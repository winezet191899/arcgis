// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.46/esri/copyright.txt for details.
// See https://www.arcgis.com/home/copyright.txt for further details.
//>>built
require({cache:{"esri/geometry/Extent":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./webMercatorUtils ./mathUtils ../srUtils".split(" "),function(g,t,a,b,c,k,h,d,e,l,f,n){function u(){}b={type:"extent",xmin:0,ymin:0,xmax:0,ymax:0};var p=g(d,{declaredClass:"esri.geometry.Extent",type:"extent",xmin:0,ymin:0,xmax:0,ymax:0,constructor:function(r,q,m,v,x){k.isObject(r)?(k.mixin(this,r),this.spatialReference&&(this.spatialReference=
n.createSpatialReference(this.spatialReference))):this.update(r,q,m,v,x);this.verifySR()},getWidth:function(){return Math.abs(this.xmax-this.xmin)},getHeight:function(){return Math.abs(this.ymax-this.ymin)},getCenter:function(){return new e((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference)},getTopLeft:function(){return new e(this.xmin,this.ymax,this.spatialReference)},getTopRight:function(){return new e(this.xmax,this.ymax,this.spatialReference)},getBottomLeft:function(){return new e(this.xmin,
this.ymin,this.spatialReference)},getBottomRight:function(){return new e(this.xmax,this.ymin,this.spatialReference)},centerAt:function(r){var q=this.getCenter(),m=r.x-q.x;r=r.y-q.y;return new p(this.xmin+m,this.ymin+r,this.xmax+m,this.ymax+r,this.spatialReference)},update:function(r,q,m,v,x){this.xmin=r;this.ymin=q;this.xmax=m;this.ymax=v;this.spatialReference=x;this.clearCache();return this},offset:function(r,q){return new p(this.xmin+r,this.ymin+q,this.xmax+r,this.ymax+q,this.spatialReference)},
expand:function(r){var q=(1-r)/2;r=this.getWidth()*q;q*=this.getHeight();return new p(this.xmin+r,this.ymin+q,this.xmax-r,this.ymax-q,this.spatialReference)},intersects:function(r){if(!r)return!1;var q=r.type,m=this.spatialReference,v=r.spatialReference;m&&v&&!m.equals(v)&&m._canProject(v)&&(r=m.isWebMercator()?l.geographicToWebMercator(r):l.webMercatorToGeographic(r,!0));switch(q){case "point":return this.contains(r);case "multipoint":return this._intersectsMultipoint(r);case "extent":return this._intersectsExtent(r);
case "polygon":return this._intersectsPolygon(r);case "polyline":return this._intersectsPolyline(r)}},normalize:function(){var r=this._normalize(!1,!0);a.isArray(r)||(r=[r]);return r},shiftCentralMeridian:function(){return this._normalize(!0)},bisect:function(){var r=this.spatialReference,q=r&&r._getInfo(),m=[],v=0;if(q&&this._isOutOfBounds(q)){var x=this;v=x.xmin;var z=x.ymin,A=x.ymax,C=q.valid[0],D=q.valid[1];x.getWidth()>2*D&&(x=x.getCenter(),x=new p(x.x-D,z,x.x+D,A,new h(r.toJson())));v=x.xmin-
v;var B=this._normalizeX(x.xmin,q);q=this._normalizeX(x.xmax,q);B.frameId===q.frameId?m.push(new p(B.x,z,q.x,A,new h(r.toJson()))):m.push(new p(B.x,z,D,A,new h(r.toJson())),new p(C,z,q.x,A,new h(r.toJson())))}else m.push(this.getExtent());return{extents:m,marginLeft:v}},_intersectsMultipoint:function(r){var q=r.points.length,m;for(m=0;m<q;m++)if(this.contains(r.getPoint(m)))return!0;return!1},_intersectsExtent:function(r){var q,m,v=!1;if(this.xmin<=r.xmin){var x=r.xmin;this.xmax<x?v=!0:q=Math.min(this.xmax,
r.xmax)-x}else x=this.xmin,r.xmax<x?v=!0:q=Math.min(this.xmax,r.xmax)-x;if(this.ymin<=r.ymin){var z=r.ymin;this.ymax<z?v=!0:m=Math.min(this.ymax,r.ymax)-z}else z=this.ymin,r.ymax<z?v=!0:m=Math.min(this.ymax,r.ymax)-z;return v?null:new p(x,z,x+q,z+m,this.spatialReference)},_intersectsPolygon:function(r){var q=[this.xmin,this.ymax],m=[this.xmax,this.ymax],v=[this.xmin,this.ymin],x=[this.xmax,this.ymin],z=[q,m,v,x];q=[[v,q],[q,m],[m,x],[x,v]];v=r.rings;x=v.length;var A=new e(0,0,this.spatialReference);
var C=z.length;for(m=0;m<C;m++)if(A.update(z[m][0],z[m][1]),r.contains(A))return!0;A.setSpatialReference(r.spatialReference);for(m=0;m<x;m++)if(z=v[m],C=z.length){var D=z[0];A.update(D[0],D[1]);if(this.contains(A))return!0;for(r=1;r<C;r++){var B=z[r];A.update(B[0],B[1]);if(this.contains(A)||this._intersectsLine([D,B],q))return!0;D=B}}return!1},_intersectsPolyline:function(r){var q=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,
this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],m,v=r.paths,x=v.length,z,A=new e(0,0,r.spatialReference);for(r=0;r<x;r++){var C=v[r];if(z=C.length){var D=C[0];A.update(D[0],D[1]);if(this.contains(A))return!0;for(m=1;m<z;m++){var B=C[m];A.update(B[0],B[1]);if(this.contains(A)||this._intersectsLine([D,B],q))return!0;D=B}}}return!1},_intersectsLine:function(r,q){var m=f._getLineIntersection2,v,x=q.length;for(v=0;v<x;v++)if(m(r,q[v]))return!0;return!1},contains:function(r){if(!r)return!1;var q=
r.type;if("point"===q){var m=this.spatialReference,v=r.spatialReference;q=r.x;r=r.y;m&&v&&!m.equals(v)&&m._canProject(v)&&(r=m.isWebMercator()?e.lngLatToXY(q,r):e.xyToLngLat(q,r,!0),q=r[0],r=r[1]);return q>=this.xmin&&q<=this.xmax&&r>=this.ymin&&r<=this.ymax}return"extent"===q?this._containsExtent(r):!1},_containsExtent:function(r){var q=r.xmin,m=r.ymin,v=r.xmax,x=r.ymax,z=r.spatialReference;r=new e(q,m,z);q=new e(q,x,z);x=new e(v,x,z);m=new e(v,m,z);return this.contains(r)&&this.contains(q)&&this.contains(x)&&
this.contains(m)?!0:!1},union:function(r){return new p(Math.min(this.xmin,r.xmin),Math.min(this.ymin,r.ymin),Math.max(this.xmax,r.xmax),Math.max(this.ymax,r.ymax),this.spatialReference)},getExtent:function(){var r=this.spatialReference;return new p(this.xmin,this.ymin,this.xmax,this.ymax,r&&new h(r.toJson()))},_shiftCM:function(r){var q=this.getCacheValue("_shifted");if(!q){q=new p(this.toJson());var m=q.spatialReference;if(r=r||m._getInfo()){var v=this._getCM(r);if(v){var x=m._isWebMercator()?l.webMercatorToGeographic(v):
v;q.xmin-=v.x;q.xmax-=v.x;m._isWebMercator()||(x.x=this._normalizeX(x.x,r).x);q.setSpatialReference(new h(k.substitute({Central_Meridian:x.x},4326===m.wkid?r.altTemplate:r.wkTemplate)))}}this.setCacheValue("_shifted",q)}return q},_getCM:function(r){var q;this._isOutOfBounds(r)&&(q=this.getCenter());return q},_isOutOfBounds:function(r){var q=r.valid[0];r=r.valid[1];var m=this.xmin,v=this.xmax;return!(m>=q&&m<=r&&v>=q&&v<=r)},_normalize:function(r,q,m){var v=new p(this.toJson()),x=v.spatialReference;
if(x&&(m=m||x._getInfo())){var z=t.map(this._getParts(m),function(A){return A.extent});return 2<z.length?r?this._shiftCM(m):v.update(m.valid[0],v.ymin,m.valid[1],v.ymax,x):2===z.length?r?this._shiftCM(m):q?z:{rings:t.map(z,function(A){return[[A.xmin,A.ymin],[A.xmin,A.ymax],[A.xmax,A.ymax],[A.xmax,A.ymin],[A.xmin,A.ymin]]}),spatialReference:x}:z[0]||v}return v},_getParts:function(r){var q=this.getCacheValue("_parts");if(!q){q=[];var m=this.xmin,v=this.xmax,x=this.ymin,z=this.ymax,A=this.spatialReference,
C=this.getWidth(),D=m,B=v,y=0,w=0;r=r||A._getInfo();var E=r.valid[0];var F=r.valid[1];w=this._normalizeX(m,r);m=w.x;y=w.frameId;w=this._normalizeX(v,r);v=w.x;w=w.frameId;r=m===v&&0<C;if(C>2*F){C=new p(D<B?m:v,x,F,z,A);m=new p(E,x,D<B?v:m,z,A);F=new p(0,x,F,z,A);x=new p(E,x,0,z,A);A=[];E=[];C.contains(F)&&A.push(y);C.contains(x)&&E.push(y);m.contains(F)&&A.push(w);m.contains(x)&&E.push(w);for(z=y+1;z<w;z++)A.push(z),E.push(z);q.push({extent:C,frameIds:[y]},{extent:m,frameIds:[w]},{extent:F,frameIds:A},
{extent:x,frameIds:E})}else m>v||r?q.push({extent:new p(m,x,F,z,A),frameIds:[y]},{extent:new p(E,x,v,z,A),frameIds:[w]}):q.push({extent:new p(m,x,v,z,A),frameIds:[y]});this.setCacheValue("_parts",q)}return q},_normalizeX:function(r,q){var m=0,v=q.valid[0],x=q.valid[1];q=2*x;r>x?(m=Math.ceil(Math.abs(r-x)/q),r-=m*q):r<v&&(m=Math.ceil(Math.abs(r-v)/q),r+=m*q,m=-m);return{x:r,frameId:m}},toJson:function(){var r={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},q=this.spatialReference;q&&
(r.spatialReference=q.toJson());return r}});u.prototype=p.prototype;p.simpleConstructor=u;p.defaultProps=b;a.setObject("geometry.Extent",p,c);c.geometry.defaultExtent=b;return p})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(g,t,a){g=function(){return this}();var b=g.location,c=b.pathname;a=b.protocol;b={version:"3.46",_appBaseUrl:a+"//"+b.host+c.substring(0,c.lastIndexOf(c.split("/")[c.split("/").length-1]))};t.noGlobals||(g.esri=b);(b.dijit=b.dijit||
{})._arcgisUrl=("http:"===a||"https:"===a?a:"http:")+"//www.arcgis.com/sharing/rest";return b})},"esri/lang":function(){define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),function(g,t,a,b,c,k,h,d,e){function l(v,x,z,A){(x=x&&x[v])?x={formatType:x.formatType,options:x}:A&&-1!==g.indexOf(A.properties||"",v)?x={formatType:A.formatter||"DateString",options:null}:z&&-1!==g.indexOf(z.properties||"",v)&&(x={formatType:z.formatter||
"NumberFormat",options:null});return x}function f(v,x,z){return[b.isString(v)?v.split(""):v,x||a.global,b.isString(z)?new Function("item","index","array",z):z]}function n(v){return void 0!==v&&null!==v}function u(v){return n(v)?v:""}function p(v,x,z,A){var C=z.match(/([^\(]+)(\([^\)]+\))?/i);z=b.trim(C[1]);var D=C[2]?b.trim(C[2]):null;C=x[v];A=A||(D?t.fromJson(D.replace(/^\(/,"({").replace(/\)$/,"})")):{});D=A.utcOffset;if(-1===g.indexOf(q,z))z=b.getObject(z),b.isFunction(z)&&(C=z(C,v,x,A));else if("number"===
typeof C||"string"===typeof C&&C&&!isNaN(Number(C)))switch(C=Number(C),z){case "NumberFormat":return h.format(C,A);case "DateString":v=new Date(C);if(A.local||A.systemLocale)return A.systemLocale?v.toLocaleDateString()+(A.hideTime?"":" "+v.toLocaleTimeString()):v.toDateString()+(A.hideTime?"":" "+v.toTimeString());v=v.toUTCString();A.hideTime&&(v=v.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return v;case "DateFormat":return v=new Date(C),n(D)&&(v=c.add(v,"minute",v.getTimezoneOffset()-D)),d.format(v,
A)}return u(C)}function r(v,x){var z;if(x)for(z in v)v.hasOwnProperty(z)&&(void 0===v[z]?delete v[z]:v[z]instanceof Object&&r(v[z],!0));else for(z in v)v.hasOwnProperty(z)&&void 0===v[z]&&delete v[z];return v}var q=["NumberFormat","DateString","DateFormat"],m=/<\/?[^>]+>/g;k={valueOf:function(v,x){for(var z in v)if(v[z]==x)return z;return null},stripTags:function(v){if(v){var x=typeof v;if("string"===x)v=v.replace(m,"");else if("object"===x)for(var z in v)(x=v[z])&&"string"===typeof x&&(x=x.replace(m,
"")),v[z]=x}return v},substitute:function(v,x,z){if(n(z))if(b.isObject(z)){var A=z.first;var C=z.dateFormat;var D=z.numberFormat;var B=z.format}else A=z;if(x&&"${*}"!==x)return b.replace(x,b.hitch({obj:v},function(w,E){var F=E.split(":");return 1<F.length?(E=F[0],F.shift(),(w=B&&B[F[0]])?F=w.formatType:(F=F.join(":"),w=null),p(E,this.obj,F,w)):(w=l(E,B,D,C))?p(E,this.obj,w.formatType,w.options):u(this.obj[E])}),/\$\{([^\}]+)\}/g);x=[];for(var y in v)if(z=(z=l(y,B,D,C))?p(y,v,z.formatType,z.options):
v[y],x.push(y+" \x3d "+u(z)+"\x3cbr/\x3e"),A)break;return x.join("")},filter:function(v,x,z){x=f(v,z,x);z={};var A;v=x[0];for(A in v)x[2].call(x[A],v[A],A,v)&&(z[A]=v[A]);return z},startsWith:function(v,x,z){z=z||0;return v.indexOf(x,z)===z},endsWith:function(v,x,z){if("number"!==typeof z||!isFinite(z)||Math.floor(z)!==z||z>v.length)z=v.length;z-=x.length;v=v.indexOf(x,z);return-1!==v&&v===z},isDefined:n,fixJson:r,isObject:function(v){return v&&"object"===typeof v},isString:function(v){return"string"===
typeof v},mixin:function(v,x){for(var z in x)x.hasOwnProperty(z)&&(v[z]=x[z]);return v},clone2DArray:function(v){if(v=v?v.slice(0):null){var x,z=v.length;for(x=0;x<z;x++)v[x]=v[x]?v[x].slice(0):null}return v},clone3DArray:function(v){if(v=v?v.slice(0):null){var x,z=v.length;for(x=0;x<z;x++){v[x]=v[x]?v[x].slice(0):null;var A=v[x];if(A){var C,D=A.length;for(C=0;C<D;C++)A[C]=A[C]?A[C].slice(0):null}}}return v}};b.mixin(e,k);e._isDefined=n;e._getParts=f;e._sanitize=r;return k})},"esri/SpatialReference":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/has","./kernel","./lang"],function(g,t,a,b,c){function k(){}a=[-2.0037508342788905E7,2.0037508342788905E7];var h=[-2.0037508342787E7,2.0037508342787E7];g=g(null,{declaredClass:"esri.SpatialReference",constructor:function(d){d&&(c.isObject(d)?c.mixin(this,d):c.isString(d)?this.wkt=d:this.wkid=d)},wkid:null,wkt:null,_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:a,origin:h,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:a,origin:h,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:a,origin:h,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:a,origin:h,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}},_isWebMercator:function(){return-1!==t.indexOf([102113,102100,3857,3785],this.wkid)},_isWrappable:function(){return-1!==t.indexOf([102113,102100,3857,3785,4326],this.wkid)},_getInfo:function(){return this.wkid?this._info[this.wkid]:null},_canProject:function(d){var e=!1;d&&(e=this.isWebMercator()&&4326===d.wkid||d.isWebMercator()&&4326===this.wkid);return e},isWebMercator:function(){return this._isWebMercator()},equals:function(d){var e=!1;d&&(this===d&&
(e=!0),this.wkid||d.wkid?e=this.wkid===d.wkid||this.isWebMercator()&&d.isWebMercator()||this.wkid===d.latestWkid||d.wkid===this.latestWkid:this.wkt&&d.wkt&&(e=this.wkt.toUpperCase()===d.wkt.toUpperCase()));return e},toJson:function(){var d=null;null!=this.wkid?d={wkid:this.wkid}:null!=this.wkt&&(d={wkt:this.wkt});d&&null!=this.latestWkid&&(d.latestWkid=this.latestWkid);return d}});k.prototype=g.prototype;g.simpleConstructor=k;return b.SpatialReference=g})},"esri/geometry/Geometry":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../SpatialReference"],function(g,t,a,b,c){g=g(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,cache:void 0,setSpatialReference:function(k){this.spatialReference=k;return this},verifySR:function(){this.spatialReference||this.setSpatialReference(new c(4326))},getExtent:function(){return null},clearCache:function(){this.cache=void 0},getCacheValue:function(k){return this.cache&&this.cache[k]},setCacheValue:function(k,h){this.cache||
(this.cache={});this.cache[k]=h}});t.setObject("geometry.Geometry",g,b);return g})},"esri/geometry/Point":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ../srUtils".split(" "),function(g,t,a,b,c,k,h,d){function e(p,r){89.99999<r?r=89.99999:-89.99999>r&&(r=-89.99999);r*=.017453292519943;return[111319.49079327169*p,3189068.5*Math.log((1+Math.sin(r))/(1-Math.sin(r)))]}function l(p,r,q){p=p/6378137*57.29577951308232;return q?[p,57.29577951308232*
(1.5707963267948966-2*Math.atan(Math.exp(-1*r/6378137)))]:[p-360*Math.floor((p+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*r/6378137)))]}function f(){}function n(){}function u(p){var r=p._json;p._unquantizeFn?(r=p._unquantizeFn({x:r.x,y:r.y}),p._xVal=r.x,p._yVal=r.y,p._unquantizeFn=null):(p._xVal=r.x,p._yVal=r.y);p._json=null}a={type:"point",x:0,y:0};g=g(h,{declaredClass:"esri.geometry.Point",type:"point",x:0,y:0,constructor:function(p,r,q){t.isArray(p)?(this.x=p[0],this.y=
p[1],this.spatialReference=r):c.isObject(p)?(c.mixin(this,p),null!=this.latitude&&(this.y=this.latitude),null!=this.longitude&&(this.x=this.longitude),this.spatialReference&&(this.spatialReference=d.createSpatialReference(this.spatialReference))):(this.x=p,this.y=r,this.spatialReference=q);this.verifySR()},offset:function(p,r){return new this.constructor(this.x+p,this.y+r,this.spatialReference)},setX:function(p){this.x=p;this.clearCache();return this},setY:function(p){this.y=p;this.clearCache();return this},
setLongitude:function(p){var r=this.spatialReference;r&&(r._isWebMercator()?this.setX(e(p,this.y)[0]):4326===r.wkid&&this.setX(p));return this},setLatitude:function(p){var r=this.spatialReference;r&&(r._isWebMercator()?this.setY(e(this.x,p)[1]):4326===r.wkid&&this.setY(p));return this},getLongitude:function(){var p=this.spatialReference;if(p)if(p._isWebMercator())var r=l(this.x,this.y)[0];else 4326===p.wkid&&(r=this.x);return r},getLatitude:function(){var p=this.spatialReference;if(p)if(p._isWebMercator())var r=
l(this.x,this.y)[1];else 4326===p.wkid&&(r=this.y);return r},update:function(p,r){this.x=p;this.y=r;this.clearCache();return this},normalize:function(){var p=this.x,r=this.spatialReference;if(r){var q=r._getInfo();q&&(p=this._normalizeX(p,q))}return new this.constructor(p,this.y,r)},_normalizeX:function(p,r){var q=r.valid[0],m=r.valid[1];r=2*m;p>m?(q=Math.ceil(Math.abs(p-m)/r),p-=q*r):p<q&&(q=Math.ceil(Math.abs(p-q)/r),p+=q*r);return p},toJson:function(){var p={x:this.x,y:this.y},r=this.spatialReference;
r&&(p.spatialReference=r.toJson());return p}});f.prototype=g.prototype;n.prototype=new f;Object.defineProperty(n.prototype,"x",{get:function(){this._json&&u(this);return this._xVal},set:function(p){this._xVal=p}});Object.defineProperty(n.prototype,"y",{get:function(){this._json&&u(this);return this._yVal},set:function(p){this._yVal=p}});n.prototype.setupLazyUnquantization=function(p,r){this._unquantizeFn=p;this._json=r};g.simpleConstructor=f;g.accessorConstructor=n;g.lngLatToXY=e;g.xyToLngLat=l;g.defaultProps=
a;g.metersPerDegree=6378137*Math.PI/180;t.setObject("geometry.Point",g,b);b.geometry.defaultPoint=a;return g})},"esri/srUtils":function(){define(["./SpatialReference","./ImageSpatialReference","./kernel","./sniff","dojo/_base/lang"],function(g,t,a,b,c){function k(h){var d=!1;h&&(h.ics||h.icsid)&&(d=!0);return d}b={isICS:k,createSpatialReference:function(h){var d=null;h&&(d=k(h)?new t(h):new g(h));return d}};c.mixin(a,b);return b})},"esri/ImageSpatialReference":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./lang ./SpatialReference".split(" "),
function(g,t,a,b,c,k){g=g(k,{declaredClass:"esri.ImageSpatialReference",constructor:function(h){h&&t.isObject(h)&&t.mixin(this,h)},icsid:null,icsns:null,ics:null,_isWebMercator:function(){return!1},_isWrappable:function(){return!1},equals:function(h){var d=!1;if(h)if(this.icsid&&h.icsid){if(d=this.icsid===h.icsid,this.icsns||h.icsns)d=d&&this.icsns===h.icsns}else this.ics&&h.ics&&(d=this.ics===h.ics);return d},toJson:function(h){var d=null,e=c.isDefined;h=e(h)?h:!0;e(this.icsid)?(d={icsid:this.icsid},
e(this.icsns)&&(d.icsns=this.icsns)):e(this.ics)&&(d={ics:this.ics});e(this.url)&&e(d)&&h&&(d.url=this.url);return d}});return b.ImageSpatialReference=g})},"esri/sniff":function(){define(["dojo/_base/sniff","dojo/global","./kernel"],function(g,t,a){var b=g("ff"),c=g("ie"),k=void 0===c&&7<=g("trident"),h=g("edge"),d=g("webkit"),e=g("opera"),l=g("chrome"),f=g("safari"),n=navigator.userAgent,u;(u=n.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+_\d+)/i))&&g.add("esri-iphone",parseFloat(u[2].replace("_",".")));
(u=n.match(/Android\s+(\d+(\.\d+)*)/i))&&g.add("esri-android",parseFloat(u[1]));(u=n.match(/Fennec\/(\d+\.\d+)/i))&&g.add("esri-fennec",parseFloat(u[1]));0<=n.indexOf("BlackBerry")&&0<=n.indexOf("WebKit")&&g.add("esri-blackberry",1);g.add("esri-touch",g("esri-iphone")||g("esri-android")||g("esri-blackberry")||6<=g("esri-fennec")||(b||d)&&(document.createTouch||"ontouchstart"in t||t.TouchEvent&&0<navigator.maxTouchPoints)?!0:!1);(u=n.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&
g.add("esri-mobile",!!u);g.add("esri-pointer",!b&&(navigator.pointerEnabled||navigator.msPointerEnabled||!!t.PointerEvent));a._getDOMAccessor=function(r){var q="";b?q="Moz":d?q="Webkit":c?q="ms":e&&(q="O");return q+r.charAt(0).toUpperCase()+r.substr(1)};g.add("esri-phonegap",!!t.cordova);g.add("esri-cors",g("esri-phonegap")||t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest);g.add("esri-file-upload",t.FormData&&t.FileList?!0:!1);g.add("esri-script-sandbox",function(){return"MessageChannel"in
t&&"HTMLIFrameElement"in t&&"sandbox"in HTMLIFrameElement.prototype});g.add("esri-secure-context",function(){if("isSecureContext"in t)return t.isSecureContext;if(t.location&&t.location.origin)return 0===t.location.origin.indexOf("https:")});g.add("esri-wasm","WebAssembly"in t);g.add("esri-workers",t.Worker?!0:!1);g.add("esri-featurelayer-webgl",!1);if(n=g("esri-featurelayer-webgl")){var p=g("esri-mobile");u=p?1:2;p=p?1:3;"object"===typeof n?(n.maxDrillLevel=null==n.maxDrillLevel?u:n.maxDrillLevel,
n.maxRecordCountFactor=null==n.maxRecordCountFactor?p:n.maxRecordCountFactor,n.enablePBFQuery=null==n.enablePBFQuery?!0:n.enablePBFQuery):g.add("esri-featurelayer-webgl",{maxDrillLevel:u,maxRecordCountFactor:p,enablePBFQuery:!0},null,!0)}g.add("esri-featurelayer-webgl-labeling",!1);g.add("esri-pbf",!c||10<=c);g.add("esri-featurelayer-pbf",!0);g.add("esri-transforms",k||h||9<=c||3.5<=b||4<=l||3.1<=f||10.5<=e||3.2<=g("esri-iphone")||2.1<=g("esri-android"));g.add("esri-transitions",k||h||10<=c||4<=b||
4<=l||3.1<=f||10.5<=e||3.2<=g("esri-iphone")||2.1<=g("esri-android"));g.add("esri-transforms3d",k||h||10<=b||12<=l||4<=f||3.2<=g("esri-iphone")||3<=g("esri-android"));g.add("esri-url-encodes-apostrophe",function(){if(!t.document)return!1;var r=t.document.createElement("a");r.href="?'";return-1<r.href.indexOf("?%27")});3>g("esri-android")&&(g.add("esri-transforms",!1,!1,!0),g.add("esri-transitions",!1,!1,!0),g.add("esri-transforms3d",!1,!1,!0));g.add("esri-will-change",g("esri-transforms")&&(52<=l||
11.1<=f));a._css=function(r){var q=g("esri-transforms3d");void 0!==r&&null!==r?q=r:q&&(l||f&&!g("esri-iphone"))&&(q=!1);var m=q?"translate3d(":"translate(",v=q?l?",-1px)":",0px)":")",x=q?"scale3d(":"scale(",z=q?",1)":")",A=q?"rotate3d(0,0,1,":"rotate(",C=q?"matrix3d(":"matrix(",D=q?",0,0,":",",B=q?",0,0,0,0,1,0,":",",y=q?",0,1)":")";return{names:{transition:d&&"-webkit-transition"||b&&"MozTransition"||e&&"OTransition"||c&&"msTransition"||"transition",transform:d&&"-webkit-transform"||b&&"MozTransform"||
e&&"OTransform"||c&&"msTransform"||"transform",transformName:d&&"-webkit-transform"||b&&"-moz-transform"||e&&"-o-transform"||c&&"-ms-transform"||"transform",origin:d&&"-webkit-transform-origin"||b&&"MozTransformOrigin"||e&&"OTransformOrigin"||c&&"msTransformOrigin"||"transformOrigin",endEvent:d&&"webkitTransitionEnd"||b&&"transitionend"||e&&"oTransitionEnd"||c&&"MSTransitionEnd"||"transitionend"},translate:function(w,E){return m+w+"px,"+E+"px"+v},scale:function(w){return x+w+","+w+z},rotate:function(w){return A+
w+"deg)"},matrix:function(w){return C+w.xx+","+w.xy+D+w.yx+","+w.yy+B+w.dx.toFixed(10)+(b&&59>=b?"px,":",")+w.dy.toFixed(10)+(b&&59>=b?"px":"")+y},getScaleFromMatrix:function(w){if(!w)return 1;w=w.toLowerCase();var E=-1<w.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(w.substring(E.length,w.indexOf(",")))}}};a.isiPhone=g("esri-iphone");a.isAndroid=g("esri-android");a.isFennec=g("esri-fennec");a.isBlackBerry=g("esri-blackberry");a.isTouchEnabled=g("esri-touch");a.isPointerEnabled=g("esri-pointer");
a._hasCors=g("esri-cors");a._hasFileUpload=g("esri-file-upload");a._hasTransforms=g("esri-transforms");a._hasTransitions=g("esri-transitions");a._has3DTransforms=g("esri-transforms3d");return g})},"esri/geometry/webMercatorUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point".split(" "),function(g,t,a,b,c,k){function h(e,l,f,n){if("point"===e.type){var u=l(e.x,e.y,n);return new e.constructor(u[0],u[1],new c(f))}if("extent"===e.type){u=l(e.xmin,
e.ymin,n);var p=l(e.xmax,e.ymax,n);return new e.constructor(u[0],u[1],p[0],p[1],new c(f))}if("polyline"===e.type||"polygon"===e.type){u="polyline"===e.type;var r=[],q;g.forEach(u?e.paths:e.rings,function(v){r.push(q=[]);g.forEach(v,function(x){q.push(l(x[0],x[1],n))})});return u?new e.constructor({paths:r,spatialReference:new c(f)}):new e.constructor({rings:r,spatialReference:new c(f)})}if("multipoint"===e.type){var m=[];g.forEach(e.points,function(v){m.push(l(v[0],v[1],n))});return new e.constructor({points:m,
spatialReference:new c(f)})}}function d(e,l){e=e&&(null!=e.wkid?e:e.spatialReference);l=l&&(null!=l.wkid?l:l.spatialReference);return e&&l?l.equals(e)?!0:l._canProject(e):!1}a={canProject:d,project:function(e,l){var f=e&&e.spatialReference;l=l&&(null!=l.wkid?l:l.spatialReference);f&&l?f.equals(l)?e=new e.constructor(e.toJson()):d(f,l)?l.isWebMercator()?e=h(e,k.lngLatToXY,{wkid:102100}):4326===l.wkid&&(e=h(e,k.xyToLngLat,{wkid:4326})):e=null:e=null;return e},lngLatToXY:k.lngLatToXY,xyToLngLat:k.xyToLngLat,
metersPerDegree:k.metersPerDegree,geographicToWebMercator:function(e){return h(e,k.lngLatToXY,{wkid:102100})},webMercatorToGeographic:function(e,l){return h(e,k.xyToLngLat,{wkid:4326},l)}};t.mixin(t.getObject("geometry",!0,b),a);return a})},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","./Point"],function(g,t,a,b){function c(d,e,l){return d instanceof b?new b(d.x+l*(e.x-d.x),d.y+l*(e.y-d.y)):[d[0]+l*(e[0]-d[0]),d[1]+l*(e[1]-d[1])]}function k(d,e){return 1E-8>
Math.abs(d-e)}function h(d,e,l,f){var n=k(d[0],e[0])?1E10:(d[1]-e[1])/(d[0]-e[0]),u=k(l[0],f[0])?1E10:(l[1]-f[1])/(l[0]-f[0]),p=d[1]-n*d[0],r=l[1]-u*l[0];if(k(n,u)){if(k(p,r)){if(k(d[0],e[0]))if(Math.min(d[1],e[1])<Math.max(l[1],f[1])||Math.max(d[1],e[1])>Math.min(l[1],f[1])){d=(d[1]+e[1]+l[1]+f[1]-Math.min(d[1],e[1],l[1],f[1])-Math.max(d[1],e[1],l[1],f[1]))/2;var q=(d-p)/n}else return null;else if(Math.min(d[0],e[0])<Math.max(l[0],f[0])||Math.max(d[0],e[0])>Math.min(l[0],f[0]))q=(d[0]+e[0]+l[0]+
f[0]-Math.min(d[0],e[0],l[0],f[0])-Math.max(d[0],e[0],l[0],f[0]))/2,d=n*q+p;else return null;return[q,d]}return null}k(n,1E10)?(q=d[0],d=u*q+r):k(u,1E10)?(q=l[0],d=n*q+p):(q=-(p-r)/(n-u),d=d[1]===e[1]?d[1]:l[1]===f[1]?l[1]:n*q+p);return[q,d]}t={getLength:function(d,e){var l=e.x-d.x;d=e.y-d.y;return Math.sqrt(l*l+d*d)},_getLength:function(d,e){var l=e[0]-d[0];d=e[1]-d[1];return Math.sqrt(l*l+d*d)},getPointOnLine:c,getMidpoint:function(d,e){return c(d,e,.5)},_equals:k,_getLineIntersection:h,getLineIntersection:function(d,
e,l,f,n){(d=h([d.x,d.y],[e.x,e.y],[l.x,l.y],[f.x,f.y]))&&(d=new b(d[0],d[1],n));return d},_getLineIntersection2:function(d,e){var l=d[0],f=d[1],n=e[0],u=e[1];e=l[0];l=l[1];d=f[0];f=f[1];var p=n[0],r=n[1];n=u[0]-p;p=e-p;var q=d-e;u=u[1]-r;r=l-r;var m=f-l,v=u*q-n*m;if(0===v)return!1;n=(n*r-u*p)/v;p=(q*r-m*p)/v;return 0<=n&&1>=n&&0<=p&&1>=p?[e+n*(d-e),l+n*(f-l)]:!1},_pointLineDistance:function(d,e){var l=e[0],f=e[1];e=l[0];var n=l[1];l=d[0];d=d[1];var u=f[0]-e,p=f[1]-n,r=l-e,q=d-n;f=Math.sqrt;var m=
Math.pow,v=f(m(u,2)+m(p,2));r=(r*u+q*p)/(v*v);n+=r*p;return f(m(l-(e+r*u),2)+m(d-n,2))}};g.mixin(g.getObject("geometry",!0,a),t);return t})},"esri/geometry/screenUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/sniff ../kernel ./Point ./ScreenPoint ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(g,t,a,b,c,k,h,d,e,l){var f=function(){return 9>a("ie")?function(u,p,r,q,m,v,x,z,A){var C=[],D=Math.round,B,y=x.length,w;for(B=0;B<y;B++){var E=x[B];var F=z?z(E[0][0],E[0][1],
A):E[0];if(1<(w=E.length)){var H=D((F[0]-u)*r+m);var M=D((p-F[1])*q+v);F=z?z(E[1][0],E[1][1],A):E[1];var R=D((F[0]-u)*r+m);F=D((p-F[1])*q+v);C.push("M",H+","+M,"L",R+","+F);for(R=2;R<w;R++)F=z?z(E[R][0],E[R][1],A):E[R],H=D((F[0]-u)*r+m),M=D((p-F[1])*q+v),C.push(H+","+M)}else H=D((F[0]-u)*r+m),M=D((p-F[1])*q+v),C.push("M",H+","+M)}return C}:function(u,p,r,q,m,v,x,z,A,C){var D=[],B,y,w=Math.round;var E=0;for(B=x?x.length:0;E<B;E++){var F=x[E];D.push("M");var H=0;for(y=F?F.length:0;H<y;H++){var M=z?
z(F[H][0],F[H][1],A):F[H];D.push(w((M[0]-u)*r+m)+","+w((p-M[1])*q+v))}C||D.push("Z")}return D}}(),n={toScreenPoint:function(u,p,r,q,m){var v=u.spatialReference,x=q.spatialReference,z=q.x;q=q.y;v&&x&&!v.equals(x)&&v._canProject(x)&&(v=v.isWebMercator()?c.lngLatToXY(z,q):c.xyToLngLat(z,q,!0),z=v[0],q=v[1]);z=(z-u.xmin)*(p/u.getWidth());q=(u.ymax-q)*(r/u.getHeight());m||(z=Math.round(z),q=Math.round(q));return new k(z,q)},toScreenGeometry:function(u,p,r,q){var m=u.xmin,v=u.ymax,x=p/u.getWidth(),z=r/
u.getHeight(),A=g.forEach,C=Math.round;if(q instanceof c)return new c(C((q.x-m)*x),C((v-q.y)*z));if(q instanceof e){u=new e;var D=u.points;A(q.points,function(F,H){D[H]=[C((F[0]-m)*x),C((v-F[1])*z)]});return u}if(q instanceof l)return new l(C((q.xmin-m)*x),C((v-q.ymin)*z),C((q.xmax-m)*x),C((v-q.ymax)*x));if(q instanceof h){u=new h;var B=u.paths,y;A(q.paths,function(F,H){y=B[H]=[];A(F,function(M,R){y[R]=[C((M[0]-m)*x),C((v-M[1])*z)]})});return u}if(q instanceof d){u=new d;var w=u.rings,E;A(q.rings,
function(F,H){E=w[H]=[];A(F,function(M,R){E[R]=[C((M[0]-m)*x),C((v-M[1])*z)]})});return u}},_toScreenPath:function(u,p,r,q,m,v){var x=q instanceof h,z=u.spatialReference,A=q.spatialReference;if(z&&A&&!z.equals(A)&&z._canProject(A))if(z.isWebMercator())var C=c.lngLatToXY;else{C=c.xyToLngLat;var D=!0}return f(u.xmin,u.ymax,p/u.getWidth(),r/u.getHeight(),m,v,x?q.paths:q.rings,C,D,x)},toMapPoint:function(u,p,r,q){return new c(u.xmin+q.x/(p/u.getWidth()),u.ymax-q.y/(r/u.getHeight()),u.spatialReference)},
toMapGeometry:function(u,p,r,q){var m=u.xmin,v=u.ymax,x=u.spatialReference,z=p/u.getWidth(),A=r/u.getHeight(),C=g.forEach;if(q instanceof c)return new c(m+q.x/z,v-q.y/A,x);if(q instanceof e){u=new e(x);var D=u.points;C(q.points,function(F,H){D[H]=[m+F[0]/z,v-F[1]/A]});return u}if(q instanceof l)return new l(m+q.xmin/z,v-q.ymin/A,m+q.xmax/z,v-q.ymax/A,x);if(q instanceof h){u=new h(x);var B=u.paths,y;C(q.paths,function(F,H){y=B[H]=[];C(F,function(M,R){y[R]=[m+M[0]/z,v-M[1]/A]})});return u}if(q instanceof
d){u=new d(x);var w=u.rings,E;C(q.rings,function(F,H){E=w[H]=[];C(F,function(M,R){E[R]=[m+M[0]/z,v-M[1]/A]})});return u}}};t.mixin(t.getObject("geometry",!0,b),n);return n})},"esri/geometry/ScreenPoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Point"],function(g,t,a,b,c){g=g(c,{declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}});t.setObject("geometry.ScreenPoint",g,b);return g})},"esri/geometry/Polyline":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),
function(g,t,a,b,c,k,h,d,e,l,f){function n(){}function u(){}b={type:"polyline",paths:null};g=g(d,{declaredClass:"esri.geometry.Polyline",type:"polyline",paths:null,constructor:function(p){this.paths=[];this._path=0;p&&(a.isArray(p)?this.paths=a.isArray(p[0][0])?p:[p]:p.paths?k.mixin(this,p):this.spatialReference=p,this.spatialReference&&(this.spatialReference=f.createSpatialReference(this.spatialReference)));this.verifySR()},addPath:function(p){this.clearCache();this._path=this.paths.length;this.paths[this._path]=
[];a.isArray(p[0])?t.forEach(p,this._addPointArr,this):t.forEach(p,this._addPoint,this);return this},_addPointArr:function(p){this.paths[this._path].push(p)},_addPoint:function(p){this.paths[this._path].push([p.x,p.y])},_insertPoints:function(p,r){this.clearCache();this._path=r;this.paths[this._path]||(this.paths[this._path]=[]);t.forEach(p,this._addPoint,this)},_validateInputs:function(p,r){return null!==p&&void 0!==p&&(0>p||p>=this.paths.length)||null!==r&&void 0!==p&&(0>r||r>=this.paths[p].length)?
!1:!0},getPoint:function(p,r){if(this._validateInputs(p,r))return new e(this.paths[p][r],this.spatialReference)},setPoint:function(p,r,q){if(this._validateInputs(p,r))return this.clearCache(),this.paths[p][r]=[q.x,q.y],this},insertPoint:function(p,r,q){if(this._validateInputs(p)&&null!=r&&0<=r&&r<=this.paths[p].length)return this.clearCache(),this.paths[p].splice(r,0,[q.x,q.y]),this},removePath:function(p){if(this._validateInputs(p,null)){this.clearCache();p=this.paths.splice(p,1)[0];var r,q=p.length,
m=this.spatialReference;for(r=0;r<q;r++)p[r]=new e(p[r],m);return p}},removePoint:function(p,r){if(this._validateInputs(p,r))return this.clearCache(),new e(this.paths[p].splice(r,1)[0],this.spatialReference)},getExtent:function(){var p=this.getCacheValue("_extent");var r=this.getCacheValue("_partwise");if(p)return p=new l(p),p._partwise=r,p;p=this.paths;var q=p.length;if(q&&p[0].length){var m,v,x,z,A=m=p[0][0][0],C=v=p[0][0][1],D=Math.min,B=Math.max,y=this.spatialReference;r=[];var w,E;for(x=0;x<
q;x++){var F=p[x];var H=w=F[0]&&F[0][0];var M=E=F[0]&&F[0][1];var R=F.length;for(z=0;z<R;z++){var V=F[z];var da=V[0];V=V[1];A=D(A,da);C=D(C,V);m=B(m,da);v=B(v,V);H=D(H,da);M=D(M,V);w=B(w,da);E=B(E,V)}r.push(new l({xmin:H,ymin:M,xmax:w,ymax:E,spatialReference:y?y.toJson():null}))}p={xmin:A,ymin:C,xmax:m,ymax:v,spatialReference:y?y.toJson():null};r=1<r.length?r:null;this.setCacheValue("_extent",p);this.setCacheValue("_partwise",r);p=new l(p);p._partwise=r;return p}},toJson:function(){var p={paths:k.clone3DArray(this.paths)},
r=this.spatialReference;r&&(p.spatialReference=r.toJson());return p}});n.prototype=g.prototype;u.prototype=new n;Object.defineProperty(u.prototype,"paths",{get:function(){this._unquantizeFn&&(this._pathsVal=this._unquantizeFn({paths:k.clone3DArray(this._pathsVal)}).paths,this._unquantizeFn=null);return this._pathsVal},set:function(p){this._pathsVal=p}});u.prototype.setupLazyUnquantization=function(p,r){this._unquantizeFn=p;this._pathsVal=r.paths};g.simpleConstructor=n;g.accessorConstructor=u;g.defaultProps=
b;a.setObject("geometry.Polyline",g,c);c.geometry.defaultPolyline=b;return g})},"esri/geometry/Polygon":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "),function(g,t,a,b,c,k,h,d,e,l,f,n){function u(){}function p(){}b={type:"polygon",rings:null};var r=g(d,{declaredClass:"esri.geometry.Polygon",type:"polygon",rings:null,constructor:function(q){this.rings=[];this._ring=
0;q&&(a.isArray(q)?this.rings=a.isArray(q[0][0])?q:[q]:q.rings?k.mixin(this,q):this.spatialReference=q,this.spatialReference&&(this.spatialReference=n.createSpatialReference(this.spatialReference)));this.verifySR()},addRing:function(q){this.clearCache();this._ring=this.rings.length;this.rings[this._ring]=[];a.isArray(q[0])?t.forEach(q,this._addPointArr,this):t.forEach(q,this._addPoint,this);return this},_addPointArr:function(q){this.rings[this._ring].push(q)},_addPoint:function(q){this.rings[this._ring].push([q.x,
q.y])},_insertPoints:function(q,m){this.clearCache();this._ring=m;this.rings[this._ring]||(this.rings[this._ring]=[]);t.forEach(q,this._addPoint,this)},_validateInputs:function(q,m){return null!==q&&void 0!==q&&(0>q||q>=this.rings.length)||null!==m&&void 0!==q&&(0>m||m>=this.rings[q].length)?!1:!0},getPoint:function(q,m){if(this._validateInputs(q,m))return new e(this.rings[q][m],this.spatialReference)},setPoint:function(q,m,v){if(this._validateInputs(q,m))return this.clearCache(),this.rings[q][m]=
[v.x,v.y],this},insertPoint:function(q,m,v){if(this._validateInputs(q)&&null!=m&&0<=m&&m<=this.rings[q].length)return this.clearCache(),this.rings[q].splice(m,0,[v.x,v.y]),this},removeRing:function(q){if(this._validateInputs(q,null)){this.clearCache();q=this.rings.splice(q,1)[0];var m,v=q.length,x=this.spatialReference;for(m=0;m<v;m++)q[m]=new e(q[m],x);return q}},removePoint:function(q,m){if(this._validateInputs(q,m))return this.clearCache(),new e(this.rings[q].splice(m,1)[0],this.spatialReference)},
getExtent:function(){var q=this.getCacheValue("_extent");var m=this.getCacheValue("_partwise");if(q)return q=new l(q),q._partwise=m,q;q=this.rings;var v=q.length;if(v&&q[0].length){var x,z,A,C,D=x=q[0][0][0],B=z=q[0][0][1],y=Math.min,w=Math.max,E=this.spatialReference;m=[];var F,H;for(A=0;A<v;A++){var M=q[A];var R=F=M[0]&&M[0][0];var V=H=M[0]&&M[0][1];var da=M.length;for(C=0;C<da;C++){var ha=M[C];var fa=ha[0];ha=ha[1];D=y(D,fa);B=y(B,ha);x=w(x,fa);z=w(z,ha);R=y(R,fa);V=y(V,ha);F=w(F,fa);H=w(H,ha)}m.push(new l({xmin:R,
ymin:V,xmax:F,ymax:H,spatialReference:E?E.toJson():null}))}q={xmin:D,ymin:B,xmax:x,ymax:z,spatialReference:E?E.toJson():null};m=1<m.length?m:null;this.setCacheValue("_extent",q);this.setCacheValue("_partwise",m);q=new l(q);q._partwise=m;return q}},contains:function(q){var m=this.rings,v=!1,x,z,A,C=m.length;var D=this.spatialReference;var B=q.spatialReference;var y=q.x;q=q.y;D&&B&&!D.equals(B)&&D._canProject(B)&&(q=D.isWebMercator()?e.lngLatToXY(y,q):e.xyToLngLat(y,q,!0),y=q[0],q=q[1]);for(A=0;A<C;A++){D=
m[A];var w=D.length;for(z=x=0;z<w;z++){x++;x===w&&(x=0);B=D[z];var E=D[x];(B[1]<q&&E[1]>=q||E[1]<q&&B[1]>=q)&&B[0]+(q-B[1])/(E[1]-B[1])*(E[0]-B[0])<y&&(v=!v)}}return v},getCentroid:function(){var q=this.getCacheValue("_centroid");if(void 0!==q)return q;q=this.rings;var m,v,x=[],z,A,C=Infinity,D=-Infinity,B=Infinity,y=-Infinity;t.forEach(q,function(F){w=m=v=0;t.forEach(F,function(H,M){M<F.length-1&&(z=F[M+1],A=H[0]*z[1]-z[0]*H[1],w+=(H[0]+z[0])*A,m+=(H[1]+z[1])*A,v+=A,H[0]<C&&(C=H[0]),H[0]>D&&(D=H[0]),
H[1]<B&&(B=H[1]),H[1]>y&&(y=H[1]))});0<v&&(v*=-1);v&&x.push([w,m,v/2])});x.sort(function(F,H){return F[2]-H[2]});var w=m=void 0;if(x[0]){var E=6*x[0][2];w=x[0][0]/E;m=x[0][1]/E;if(w<C||w>D||m<B||m>y)w=m=void 0}if(void 0===w||void 0===m)if(q=q[0]&&q[0].length?this._getLineCentroid(q[0]):null)w=q.x,m=q.y;q=isNaN(w)||isNaN(m)?null:new e(w,m,this.spatialReference);this.setCacheValue("_centroid",q);return q},_getLineCentroid:function(q){var m=0,v=0,x=0,z={x:0,y:0},A={x:0,y:0},C,D=q.length,B;for(C=0;C<
D-1;C++){var y=q[C];var w=q[C+1];if(y&&w){z.x=y[0];z.y=y[1];A.x=w[0];A.y=w[1];var E=f.getLength(z,A);0<E&&(m+=E,y=f.getMidpoint(y,w),v+=E*y[0],x+=E*y[1])}}0<m?B={x:v/m,y:x/m}:q[0]&&(B={x:q[0][0],y:q[0][1]});return B},isClockwise:function(q){var m=0,v,x=q.length,z=a.isArray(q[0])?function(A,C){return A[0]*C[1]-C[0]*A[1]}:function(A,C){return A.x*C.y-C.x*A.y};for(v=0;v<x;v++)m+=z(q[v],q[(v+1)%x]);return 0>=m/2},isSelfIntersecting:function(q){q=q||this;var m,v,x,z,A,C=q.rings.length;for(x=0;x<C;x++){for(m=
0;m<q.rings[x].length-1;m++){var D=[[q.rings[x][m][0],q.rings[x][m][1]],[q.rings[x][m+1][0],q.rings[x][m+1][1]]];for(v=x+1;v<C;v++)for(z=0;z<q.rings[v].length-1;z++){var B=[[q.rings[v][z][0],q.rings[v][z][1]],[q.rings[v][z+1][0],q.rings[v][z+1][1]]];if((A=f._getLineIntersection2(D,B))&&!(A[0]===D[0][0]&&A[1]===D[0][1]||A[0]===B[0][0]&&A[1]===B[0][1]||A[0]===D[1][0]&&A[1]===D[1][1]||A[0]===B[1][0]&&A[1]===B[1][1]))return!0}}z=q.rings[x].length;if(!(4>=z))for(m=0;m<z-3;m++){var y=z-1;0===m&&(y=z-2);
D=[[q.rings[x][m][0],q.rings[x][m][1]],[q.rings[x][m+1][0],q.rings[x][m+1][1]]];for(v=m+2;v<y;v++)if(B=[[q.rings[x][v][0],q.rings[x][v][1]],[q.rings[x][v+1][0],q.rings[x][v+1][1]]],(A=f._getLineIntersection2(D,B))&&!(A[0]===D[0][0]&&A[1]===D[0][1]||A[0]===B[0][0]&&A[1]===B[0][1]||A[0]===D[1][0]&&A[1]===D[1][1]||A[0]===B[1][0]&&A[1]===B[1][1]))return!0}}return!1},toJson:function(){var q={rings:k.clone3DArray(this.rings)},m=this.spatialReference;m&&(q.spatialReference=m.toJson());return q}});u.prototype=
r.prototype;p.prototype=new u;Object.defineProperty(p.prototype,"rings",{get:function(){this._unquantizeFn&&(this._ringsVal=this._unquantizeFn({rings:k.clone3DArray(this._ringsVal)}).rings,this._unquantizeFn=null);return this._ringsVal},set:function(q){this._ringsVal=q}});p.prototype.setupLazyUnquantization=function(q,m){this._unquantizeFn=q;this._ringsVal=m.rings};r.simpleConstructor=u;r.accessorConstructor=p;r.defaultProps=b;r.createEllipse=function(q){var m=q.center.x,v=q.center.y,x=q.longAxis,
z=q.shortAxis,A=q.numberOfPoints,C=q.map,D;q=[];var B=2*Math.PI/A;for(D=0;D<A;D++){var y=Math.cos(D*B);var w=Math.sin(D*B);y=C.toMap({x:x*y+m,y:z*w+v});q.push(y)}q.push(q[0]);m=new r(C.spatialReference);m.addRing(q);return m};r.createCircle=function(q){return r.createEllipse({center:q.center,longAxis:q.r,shortAxis:q.r,numberOfPoints:q.numberOfPoints,map:q.map})};r.fromExtent=function(q){var m=q.normalize();q=q.spatialReference;return new r({rings:t.map(m,function(v){return[[v.xmin,v.ymin],[v.xmin,
v.ymax],[v.xmax,v.ymax],[v.xmax,v.ymin],[v.xmin,v.ymin]]}),spatialReference:q?q.toJson():null})};a.setObject("geometry.Polygon",r,c);c.geometry.defaultPolygon=b;c.geometry.createEllipse=r.createEllipse;c.geometry.createCircle=r.createCircle;c.geometry.isClockwise=r.prototype.isClockwise;c.geometry.polygonSelfIntersecting=r.prototype.isSelfIntersecting;return r})},"esri/geometry/Multipoint":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),
function(g,t,a,b,c,k,h,d,e,l){function f(){}function n(){}a={type:"multipoint",points:null};g=g(h,{declaredClass:"esri.geometry.Multipoint",type:"multipoint",points:null,constructor:function(u){this.points=[];u&&(u.points?c.mixin(this,u):this.spatialReference=u,this.spatialReference&&(this.spatialReference=l.createSpatialReference(this.spatialReference)));this.verifySR()},addPoint:function(u){this.clearCache();t.isArray(u)?this.points.push(u):this.points.push([u.x,u.y]);return this},removePoint:function(u){if(this._validateInputs(u))return this.clearCache(),
new d(this.points.splice(u,1)[0],this.spatialReference)},getExtent:function(){var u=this.getCacheValue("_extent");if(u)return new e(u);u=this.points;var p=u.length;if(p){var r=u[0],q,m,v=q=r[0],x=m=r[1],z=Math.min,A=Math.max,C=this.spatialReference,D;for(D=0;D<p;D++){r=u[D];var B=r[0];r=r[1];v=z(v,B);x=z(x,r);q=A(q,B);m=A(m,r)}u={xmin:v,ymin:x,xmax:q,ymax:m,spatialReference:C?C.toJson():null};this.setCacheValue("_extent",u);return new e(u)}},_validateInputs:function(u){return null===u||0>u||u>=this.points.length?
!1:!0},getPoint:function(u){if(this._validateInputs(u))return u=this.points[u],new d(u[0],u[1],this.spatialReference)},setPoint:function(u,p){if(this._validateInputs(u))return this.clearCache(),this.points[u]=[p.x,p.y],this},toJson:function(){var u={points:c.clone2DArray(this.points)},p=this.spatialReference;p&&(u.spatialReference=p.toJson());return u}});f.prototype=g.prototype;n.prototype=new f;Object.defineProperty(n.prototype,"points",{get:function(){this._unquantizeFn&&(this._pointsVal=this._unquantizeFn({points:c.clone2DArray(this._pointsVal)}).points,
this._unquantizeFn=null);return this._pointsVal},set:function(u){this._pointsVal=u}});n.prototype.setupLazyUnquantization=function(u,p){this._unquantizeFn=u;this._pointsVal=p.points};g.simpleConstructor=f;g.accessorConstructor=n;g.defaultProps=a;t.setObject("geometry.Multipoint",g,b);b.geometry.defaultMultipoint=a;return g})},"esri/geometry/scaleUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../config","../WKIDUnitConversion"],function(g,t,a,b,c){function k(n,u,p){return n&&u?
n.getWidth()/u*(p||d)*39.37*e.screenDPI:0}function h(n,u,p,r,q){return n.expand(r*u/(39.37*((q?p:l.values[l[p]])||d)*e.screenDPI)/n.getWidth())}var d=6370997*Math.PI/180,e=b.defaults,l=c,f={getUnitValueForSR:function(n){return this.getUnitValue(n)||d},getUnitValue:function(n){if(n)if("object"===typeof n){var u=n.wkid;var p=n.wkt}else"number"===typeof n?u=n:"string"===typeof n&&(p=n);if(u)var r=l.values[l[u]];else p&&-1!==p.search(/^PROJCS/i)&&(n=/UNIT\[([^\]]+)\]\]$/i.exec(p))&&n[1]&&(r=parseFloat(n[1].split(",")[1]));
return r},getScale:function(n,u,p){if(1<arguments.length&&null!=u&&!u.declaredClass){var r=n;var q=u;u=null;var m=f.getUnitValue(p)}else r=u||n.extent,q=n.width,m=f.getUnitValue(r&&r.spatialReference);return k(r,q,m)},getExtentForScale:function(n,u,p){return h(p||n.extent,n.width,f.getUnitValue(n.spatialReference),u,!0)}};g.mixin(g.getObject("geometry",!0,a),f);a.geometry._getScale=k;a.geometry._getExtentForScale=h;return f})},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has",
"./kernel"],function(g,t,a,b){a=function(){return this}();var c={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,
zoomRate:25,zoomAnimationThrottled:!1,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:a.Worker&&!1,io:{errorHandler:function(k,h){t.publish("esri.Error",[k])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:[/^https?:\/\/.+\.arcgis\.com(\/|$)/i,"server.arcgisonline.com","services.arcgisonline.com","www.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","tiles.arcgis.com","tiles1.arcgis.com","tiles2.arcgis.com","tiles3.arcgis.com",
"tiles4.arcgis.com","basemaps.arcgis.com","basemapsbeta.arcgis.com","basemaps-api.arcgis.com","elevation3d.arcgis.com","services.arcgis.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com","services4.arcgis.com","services5.arcgis.com","services6.arcgis.com","services7.arcgis.com","services8.arcgis.com","services9.arcgis.com","cdn.arcgis.com","cdn-a.arcgis.com","cdn-b.arcgis.com","static.arcgis.com","utility.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","geoenrich.arcgis.com",
"qaext.arcgis.com","staticqa.arcgis.com","tilesqa.arcgis.com","servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","geocodeqa.arcgis.com","geoenrichqa.arcgis.com","dev.arcgis.com","devext.arcgis.com","localvtiles.arcgis.com","staticdev.arcgis.com","tilesdevext.arcgis.com","elevation3ddev.arcgis.com","servicesdev.arcgis.com","servicesdev1.arcgis.com","servicesdev2.arcgis.com","servicesdev3.arcgis.com","geocodedev.arcgis.com","geoenrichdev.arcgis.com","basemapsdev.arcgis.com",
"basemapsdev-api.arcgis.com","basemapsbetadev.arcgis.com"],corsDetection:a.cordova?!1:!0,corsDetectionTimeout:15,corsStatus:{},crossOriginNoCorsDomains:null,webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,useWorkers:"on-request",maxRequestWorkers:5,httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},workers:{loaderConfig:{has:{},paths:{},map:{},
packages:[]}}}};b.config=c;g.noGlobals||(a.esriConfig=c);return c})},"esri/WKIDUnitConversion":function(){define(["dojo/has","./kernel"],function(g,t){var a={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,
8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,
8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,
8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,
10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,
24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,
31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,
102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,
103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,
103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,
103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1};for(g=2E3;2045>=g;g++)a[g]=0;for(g=2056;2065>=g;g++)a[g]=0;for(g=2067;2135>=g;g++)a[g]=0;for(g=2137;2154>=
g;g++)a[g]=0;for(g=2161;2170>=g;g++)a[g]=0;for(g=2172;2193>=g;g++)a[g]=0;for(g=2195;2198>=g;g++)a[g]=0;for(g=2200;2203>=g;g++)a[g]=0;for(g=2205;2217>=g;g++)a[g]=0;for(g=2222;2224>=g;g++)a[g]=1;for(g=2225;2250>=g;g++)a[g]=2;for(g=2251;2253>=g;g++)a[g]=1;for(g=2257;2264>=g;g++)a[g]=2;for(g=2274;2279>=g;g++)a[g]=2;for(g=2280;2282>=g;g++)a[g]=1;for(g=2283;2289>=g;g++)a[g]=2;for(g=2290;2292>=g;g++)a[g]=0;for(g=2308;2313>=g;g++)a[g]=0;for(g=2315;2491>=g;g++)a[g]=0;for(g=2494;2866>=g;g++)a[g]=0;for(g=2867;2869>=
g;g++)a[g]=1;for(g=2870;2888>=g;g++)a[g]=2;for(g=2891;2895>=g;g++)a[g]=2;for(g=2896;2898>=g;g++)a[g]=1;for(g=2902;2908>=g;g++)a[g]=2;for(g=2915;2920>=g;g++)a[g]=2;for(g=2921;2923>=g;g++)a[g]=1;for(g=2924;2930>=g;g++)a[g]=2;for(g=2931;2962>=g;g++)a[g]=0;for(g=2964;2968>=g;g++)a[g]=2;for(g=2969;2973>=g;g++)a[g]=0;for(g=2975;2991>=g;g++)a[g]=0;for(g=2995;3051>=g;g++)a[g]=0;for(g=3054;3079>=g;g++)a[g]=0;for(g=3081;3088>=g;g++)a[g]=0;for(g=3092;3101>=g;g++)a[g]=0;for(g=3106;3138>=g;g++)a[g]=0;for(g=3146;3151>=
g;g++)a[g]=0;for(g=3153;3166>=g;g++)a[g]=0;for(g=3168;3172>=g;g++)a[g]=0;for(g=3174;3203>=g;g++)a[g]=0;for(g=3294;3358>=g;g++)a[g]=0;for(g=3367;3403>=g;g++)a[g]=0;for(g=3408;3416>=g;g++)a[g]=0;for(g=3417;3438>=g;g++)a[g]=2;for(g=3441;3446>=g;g++)a[g]=2;for(g=3447;3450>=g;g++)a[g]=0;for(g=3451;3459>=g;g++)a[g]=2;for(g=3460;3478>=g;g++)a[g]=0;for(g=3554;3559>=g;g++)a[g]=0;for(g=3560;3570>=g;g++)a[g]=2;for(g=3571;3581>=g;g++)a[g]=0;for(g=3594;3597>=g;g++)a[g]=0;for(g=3601;3604>=g;g++)a[g]=0;for(g=3637;3639>=
g;g++)a[g]=0;for(g=3665;3667>=g;g++)a[g]=0;for(g=3693;3695>=g;g++)a[g]=0;for(g=3701;3727>=g;g++)a[g]=0;for(g=3728;3739>=g;g++)a[g]=2;for(g=3740;3751>=g;g++)a[g]=0;for(g=3753;3760>=g;g++)a[g]=2;for(g=3761;3773>=g;g++)a[g]=0;for(g=3775;3777>=g;g++)a[g]=0;for(g=3779;3781>=g;g++)a[g]=0;for(g=3783;3785>=g;g++)a[g]=0;for(g=3788;3791>=g;g++)a[g]=0;for(g=3797;3802>=g;g++)a[g]=0;for(g=3814;3816>=g;g++)a[g]=0;for(g=3825;3829>=g;g++)a[g]=0;for(g=3832;3841>=g;g++)a[g]=0;for(g=3844;3852>=g;g++)a[g]=0;for(g=3873;3885>=
g;g++)a[g]=0;for(g=3890;3893>=g;g++)a[g]=0;for(g=3907;3912>=g;g++)a[g]=0;for(g=3942;3950>=g;g++)a[g]=0;for(g=3968;3970>=g;g++)a[g]=0;for(g=3973;3976>=g;g++)a[g]=0;for(g=3986;3989>=g;g++)a[g]=0;for(g=3994;3997>=g;g++)a[g]=0;for(g=4048;4051>=g;g++)a[g]=0;for(g=4056;4063>=g;g++)a[g]=0;for(g=4093;4096>=g;g++)a[g]=0;for(g=4390;4398>=g;g++)a[g]=0;for(g=4399;4413>=g;g++)a[g]=2;for(g=4418;4433>=g;g++)a[g]=2;for(g=4455;4457>=g;g++)a[g]=2;for(g=4484;4489>=g;g++)a[g]=0;for(g=4491;4554>=g;g++)a[g]=0;for(g=4568;4589>=
g;g++)a[g]=0;for(g=4652;4656>=g;g++)a[g]=0;for(g=4766;4800>=g;g++)a[g]=0;for(g=5014;5016>=g;g++)a[g]=0;for(g=5069;5072>=g;g++)a[g]=0;for(g=5105;5130>=g;g++)a[g]=0;for(g=5167;5188>=g;g++)a[g]=0;for(g=5253;5259>=g;g++)a[g]=0;for(g=5269;5275>=g;g++)a[g]=0;for(g=5292;5311>=g;g++)a[g]=0;for(g=5329;5331>=g;g++)a[g]=0;for(g=5343;5349>=g;g++)a[g]=0;for(g=5355;5357>=g;g++)a[g]=0;for(g=5387;5389>=g;g++)a[g]=0;for(g=5459;5463>=g;g++)a[g]=0;for(g=5479;5482>=g;g++)a[g]=0;for(g=5518;5520>=g;g++)a[g]=0;for(g=5530;5539>=
g;g++)a[g]=0;for(g=5550;5552>=g;g++)a[g]=0;for(g=5562;5583>=g;g++)a[g]=0;for(g=5623;5625>=g;g++)a[g]=2;for(g=5631;5639>=g;g++)a[g]=0;for(g=5649;5653>=g;g++)a[g]=0;for(g=5663;5680>=g;g++)a[g]=0;for(g=5682;5685>=g;g++)a[g]=0;for(g=5875;5877>=g;g++)a[g]=0;for(g=5896;5899>=g;g++)a[g]=0;for(g=5921;5940>=g;g++)a[g]=0;for(g=6050;6125>=g;g++)a[g]=0;for(g=6244;6275>=g;g++)a[g]=0;for(g=6328;6348>=g;g++)a[g]=0;for(g=6350;6356>=g;g++)a[g]=0;for(g=6366;6372>=g;g++)a[g]=0;for(g=6381;6387>=g;g++)a[g]=0;for(g=6393;6404>=
g;g++)a[g]=0;for(g=6480;6483>=g;g++)a[g]=0;for(g=6511;6514>=g;g++)a[g]=0;for(g=6579;6581>=g;g++)a[g]=0;for(g=6619;6624>=g;g++)a[g]=0;for(g=6625;6627>=g;g++)a[g]=2;for(g=6628;6632>=g;g++)a[g]=0;for(g=6634;6637>=g;g++)a[g]=0;for(g=6669;6692>=g;g++)a[g]=0;for(g=6707;6709>=g;g++)a[g]=0;for(g=6720;6723>=g;g++)a[g]=0;for(g=6732;6738>=g;g++)a[g]=0;for(g=6931;6933>=g;g++)a[g]=0;for(g=6956;6959>=g;g++)a[g]=0;for(g=7005;7007>=g;g++)a[g]=0;for(g=7057;7070>=g;g++)a[g]=2;for(g=7074;7082>=g;g++)a[g]=0;for(g=7109;7118>=
g;g++)a[g]=0;for(g=7119;7127>=g;g++)a[g]=1;for(g=7374;7376>=g;g++)a[g]=0;for(g=7528;7586>=g;g++)a[g]=0;for(g=7587;7645>=g;g++)a[g]=2;for(g=7692;7696>=g;g++)a[g]=0;for(g=7755;7787>=g;g++)a[g]=0;for(g=7791;7795>=g;g++)a[g]=0;for(g=7799;7801>=g;g++)a[g]=0;for(g=7803;7805>=g;g++)a[g]=0;for(g=7825;7831>=g;g++)a[g]=0;for(g=7845;7859>=g;g++)a[g]=0;for(g=8013;8032>=g;g++)a[g]=0;for(g=8065;8068>=g;g++)a[g]=1;for(g=8518;8529>=g;g++)a[g]=2;for(g=8533;8536>=g;g++)a[g]=2;for(g=8538;8540>=g;g++)a[g]=2;for(g=8677;8679>=
g;g++)a[g]=0;for(g=8836;8840>=g;g++)a[g]=0;for(g=8857;8859>=g;g++)a[g]=0;for(g=8908;8910>=g;g++)a[g]=0;for(g=9154;9159>=g;g++)a[g]=0;for(g=9205;9218>=g;g++)a[g]=0;for(g=9271;9273>=g;g++)a[g]=0;for(g=9295;9297>=g;g++)a[g]=0;for(g=9356;9360>=g;g++)a[g]=0;for(g=9404;9407>=g;g++)a[g]=0;for(g=9476;9482>=g;g++)a[g]=0;for(g=9487;9494>=g;g++)a[g]=0;for(g=9697;9699>=g;g++)a[g]=0;for(g=9821;9865>=g;g++)a[g]=0;for(g=10285;10291>=g;g++)a[g]=0;for(g=10314;10317>=g;g++)a[g]=0;for(g=10448;10465>=g;g++)a[g]=0;for(g=
11114;11118>=g;g++)a[g]=0;for(g=20004;20032>=g;g++)a[g]=0;for(g=20047;20049>=g;g++)a[g]=0;for(g=20062;20092>=g;g++)a[g]=0;for(g=20135;20138>=g;g++)a[g]=0;for(g=20248;20258>=g;g++)a[g]=0;for(g=20348;20358>=g;g++)a[g]=0;for(g=20436;20440>=g;g++)a[g]=0;for(g=20822;20824>=g;g++)a[g]=0;for(g=20904;20932>=g;g++)a[g]=0;for(g=20934;20936>=g;g++)a[g]=0;for(g=21004;21032>=g;g++)a[g]=0;for(g=21035;21037>=g;g++)a[g]=0;for(g=21095;21097>=g;g++)a[g]=0;for(g=21148;21150>=g;g++)a[g]=0;for(g=21207;21264>=g;g++)a[g]=
0;for(g=21307;21364>=g;g++)a[g]=0;for(g=21413;21423>=g;g++)a[g]=0;for(g=21453;21463>=g;g++)a[g]=0;for(g=21473;21483>=g;g++)a[g]=0;for(g=21780;21782>=g;g++)a[g]=0;for(g=21891;21894>=g;g++)a[g]=0;for(g=21896;21899>=g;g++)a[g]=0;for(g=22171;22177>=g;g++)a[g]=0;for(g=22181;22187>=g;g++)a[g]=0;for(g=22191;22197>=g;g++)a[g]=0;for(g=22207;22222>=g;g++)a[g]=0;for(g=22229;22232>=g;g++)a[g]=0;for(g=22234;22236>=g;g++)a[g]=0;for(g=22243;22250>=g;g++)a[g]=0;for(g=22262;22265>=g;g++)a[g]=0;for(g=22307;22322>=
g;g++)a[g]=0;for(g=22348;22357>=g;g++)a[g]=0;for(g=22407;22422>=g;g++)a[g]=0;for(g=22462;22465>=g;g++)a[g]=0;for(g=22521;22525>=g;g++)a[g]=0;for(g=22607;22622>=g;g++)a[g]=0;for(g=22641;22646>=g;g++)a[g]=0;for(g=22648;22657>=g;g++)a[g]=0;for(g=22707;22722>=g;g++)a[g]=0;for(g=22762;22765>=g;g++)a[g]=0;for(g=22807;22822>=g;g++)a[g]=0;for(g=22991;22994>=g;g++)a[g]=0;for(g=23028;23038>=g;g++)a[g]=0;for(g=23301;23333>=g;g++)a[g]=2;for(g=23830;23853>=g;g++)a[g]=0;for(g=23866;23872>=g;g++)a[g]=0;for(g=23877;23884>=
g;g++)a[g]=0;for(g=23886;23894>=g;g++)a[g]=0;for(g=23946;23948>=g;g++)a[g]=0;for(g=24311;24313>=g;g++)a[g]=0;for(g=24342;24347>=g;g++)a[g]=0;for(g=24370;24374>=g;g++)a[g]=10;for(g=24375;24381>=g;g++)a[g]=0;for(g=24718;24721>=g;g++)a[g]=0;for(g=24817;24821>=g;g++)a[g]=0;for(g=24877;24882>=g;g++)a[g]=0;for(g=24891;24893>=g;g++)a[g]=0;for(g=25391;25395>=g;g++)a[g]=0;for(g=25828;25838>=g;g++)a[g]=0;for(g=26191;26195>=g;g++)a[g]=0;for(g=26391;26393>=g;g++)a[g]=0;for(g=26701;26722>=g;g++)a[g]=0;for(g=26729;26799>=
g;g++)a[g]=2;for(g=26801;26803>=g;g++)a[g]=2;for(g=26811;26813>=g;g++)a[g]=2;for(g=26847;26870>=g;g++)a[g]=2;for(g=26891;26899>=g;g++)a[g]=0;for(g=26901;26923>=g;g++)a[g]=0;for(g=26929;26946>=g;g++)a[g]=0;for(g=26948;26998>=g;g++)a[g]=0;for(g=27037;27040>=g;g++)a[g]=0;for(g=27205;27232>=g;g++)a[g]=0;for(g=27258;27260>=g;g++)a[g]=0;for(g=27391;27398>=g;g++)a[g]=0;for(g=27561;27564>=g;g++)a[g]=0;for(g=27571;27574>=g;g++)a[g]=0;for(g=27581;27584>=g;g++)a[g]=0;for(g=27591;27594>=g;g++)a[g]=0;for(g=28191;28193>=
g;g++)a[g]=0;for(g=28348;28358>=g;g++)a[g]=0;for(g=28402;28432>=g;g++)a[g]=0;for(g=28462;28492>=g;g++)a[g]=0;for(g=29118;29122>=g;g++)a[g]=0;for(g=29168;29172>=g;g++)a[g]=0;for(g=29177;29185>=g;g++)a[g]=0;for(g=29187;29195>=g;g++)a[g]=0;for(g=29900;29903>=g;g++)a[g]=0;for(g=30161;30179>=g;g++)a[g]=0;for(g=30491;30494>=g;g++)a[g]=0;for(g=30729;30732>=g;g++)a[g]=0;for(g=31251;31259>=g;g++)a[g]=0;for(g=31265;31268>=g;g++)a[g]=0;for(g=31275;31279>=g;g++)a[g]=0;for(g=31281;31297>=g;g++)a[g]=0;for(g=31461;31469>=
g;g++)a[g]=0;for(g=31491;31495>=g;g++)a[g]=0;for(g=31917;31922>=g;g++)a[g]=0;for(g=31965;32E3>=g;g++)a[g]=0;for(g=32001;32003>=g;g++)a[g]=2;for(g=32005;32031>=g;g++)a[g]=2;for(g=32033;32060>=g;g++)a[g]=2;for(g=32064;32067>=g;g++)a[g]=2;for(g=32074;32077>=g;g++)a[g]=2;for(g=32081;32086>=g;g++)a[g]=0;for(g=32107;32130>=g;g++)a[g]=0;for(g=32133;32159>=g;g++)a[g]=0;for(g=32164;32167>=g;g++)a[g]=2;for(g=32180;32199>=g;g++)a[g]=0;for(g=32201;32260>=g;g++)a[g]=0;for(g=32301;32360>=g;g++)a[g]=0;for(g=32401;32460>=
g;g++)a[g]=0;for(g=32501;32560>=g;g++)a[g]=0;for(g=32601;32662>=g;g++)a[g]=0;for(g=32664;32667>=g;g++)a[g]=2;for(g=32701;32761>=g;g++)a[g]=0;for(g=53001;53004>=g;g++)a[g]=0;for(g=53008;53019>=g;g++)a[g]=0;for(g=53021;53032>=g;g++)a[g]=0;for(g=53034;53037>=g;g++)a[g]=0;for(g=53042;53046>=g;g++)a[g]=0;for(g=53074;53080>=g;g++)a[g]=0;for(g=54001;54004>=g;g++)a[g]=0;for(g=54008;54019>=g;g++)a[g]=0;for(g=54021;54032>=g;g++)a[g]=0;for(g=54034;54037>=g;g++)a[g]=0;for(g=54042;54046>=g;g++)a[g]=0;for(g=54048;54053>=
g;g++)a[g]=0;for(g=54074;54080>=g;g++)a[g]=0;for(g=54098;54101>=g;g++)a[g]=0;for(g=102001;102040>=g;g++)a[g]=0;for(g=102042;102063>=g;g++)a[g]=0;for(g=102065;102067>=g;g++)a[g]=0;for(g=102070;102117>=g;g++)a[g]=0;for(g=102122;102216>=g;g++)a[g]=0;for(g=102221;102377>=g;g++)a[g]=0;for(g=102382;102388>=g;g++)a[g]=0;for(g=102389;102398>=g;g++)a[g]=2;for(g=102399;102444>=g;g++)a[g]=0;for(g=102445;102447>=g;g++)a[g]=2;for(g=102448;102458>=g;g++)a[g]=0;for(g=102459;102468>=g;g++)a[g]=2;for(g=102469;102499>=
g;g++)a[g]=0;for(g=102500;102519>=g;g++)a[g]=1;for(g=102520;102524>=g;g++)a[g]=0;for(g=102525;102529>=g;g++)a[g]=2;for(g=102530;102588>=g;g++)a[g]=0;for(g=102590;102598>=g;g++)a[g]=0;for(g=102601;102603>=g;g++)a[g]=0;for(g=102605;102628>=g;g++)a[g]=0;for(g=102629;102646>=g;g++)a[g]=2;for(g=102648;102700>=g;g++)a[g]=2;for(g=102701;102703>=g;g++)a[g]=0;for(g=102707;102730>=g;g++)a[g]=2;for(g=102733;102758>=g;g++)a[g]=2;for(g=102767;102900>=g;g++)a[g]=0;for(g=102901;102933>=g;g++)a[g]=2;for(g=102934;102950>=
g;g++)a[g]=13;for(g=102951;102955>=g;g++)a[g]=0;for(g=102961;102963>=g;g++)a[g]=0;for(g=102965;102969>=g;g++)a[g]=0;for(g=102971;102973>=g;g++)a[g]=0;for(g=102975;102989>=g;g++)a[g]=0;for(g=102990;102992>=g;g++)a[g]=1;for(g=102997;103002>=g;g++)a[g]=0;for(g=103003;103008>=g;g++)a[g]=2;for(g=103009;103011>=g;g++)a[g]=0;for(g=103012;103014>=g;g++)a[g]=2;for(g=103019;103021>=g;g++)a[g]=0;for(g=103022;103024>=g;g++)a[g]=2;for(g=103029;103031>=g;g++)a[g]=0;for(g=103032;103034>=g;g++)a[g]=2;for(g=103065;103068>=
g;g++)a[g]=0;for(g=103074;103076>=g;g++)a[g]=0;for(g=103077;103079>=g;g++)a[g]=1;for(g=103080;103082>=g;g++)a[g]=0;for(g=103083;103085>=g;g++)a[g]=2;for(g=103090;103093>=g;g++)a[g]=0;for(g=103097;103099>=g;g++)a[g]=0;for(g=103100;103102>=g;g++)a[g]=2;for(g=103107;103109>=g;g++)a[g]=0;for(g=103110;103112>=g;g++)a[g]=2;for(g=103113;103116>=g;g++)a[g]=0;for(g=103117;103120>=g;g++)a[g]=2;for(g=103153;103157>=g;g++)a[g]=0;for(g=103158;103162>=g;g++)a[g]=2;for(g=103163;103165>=g;g++)a[g]=0;for(g=103166;103168>=
g;g++)a[g]=1;for(g=103169;103171>=g;g++)a[g]=2;for(g=103186;103188>=g;g++)a[g]=0;for(g=103189;103191>=g;g++)a[g]=2;for(g=103192;103195>=g;g++)a[g]=0;for(g=103196;103199>=g;g++)a[g]=2;for(g=103200;103224>=g;g++)a[g]=0;for(g=103225;103227>=g;g++)a[g]=1;for(g=103232;103237>=g;g++)a[g]=0;for(g=103238;103243>=g;g++)a[g]=2;for(g=103244;103246>=g;g++)a[g]=0;for(g=103247;103249>=g;g++)a[g]=2;for(g=103254;103256>=g;g++)a[g]=0;for(g=103257;103259>=g;g++)a[g]=2;for(g=103264;103266>=g;g++)a[g]=0;for(g=103267;103269>=
g;g++)a[g]=2;for(g=103300;103375>=g;g++)a[g]=0;for(g=103381;103383>=g;g++)a[g]=0;for(g=103384;103386>=g;g++)a[g]=1;for(g=103387;103389>=g;g++)a[g]=0;for(g=103390;103392>=g;g++)a[g]=2;for(g=103397;103399>=g;g++)a[g]=0;for(g=103400;103471>=g;g++)a[g]=2;for(g=103476;103478>=g;g++)a[g]=0;for(g=103479;103481>=g;g++)a[g]=2;for(g=103486;103488>=g;g++)a[g]=0;for(g=103489;103491>=g;g++)a[g]=2;for(g=103492;103495>=g;g++)a[g]=0;for(g=103496;103499>=g;g++)a[g]=2;for(g=103528;103543>=g;g++)a[g]=0;for(g=103544;103548>=
g;g++)a[g]=2;for(g=103549;103551>=g;g++)a[g]=0;for(g=103552;103554>=g;g++)a[g]=1;for(g=103555;103557>=g;g++)a[g]=2;for(g=103558;103560>=g;g++)a[g]=0;for(g=103571;103573>=g;g++)a[g]=0;for(g=103574;103576>=g;g++)a[g]=2;for(g=103577;103580>=g;g++)a[g]=0;for(g=103581;103583>=g;g++)a[g]=2;for(g=103595;103694>=g;g++)a[g]=0;for(g=103696;103699>=g;g++)a[g]=0;for(g=103700;103793>=g;g++)a[g]=2;for(g=103794;103890>=g;g++)a[g]=0;for(g=103891;103896>=g;g++)a[g]=2;for(g=103900;103971>=g;g++)a[g]=2;for(g=103972;103977>=
g;g++)a[g]=0;for(g=112E3;112101>=g;g++)a[g]=0;return t.WKIDUnitConversion=a})},"esri/domUtils":function(){define(["./kernel","dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has"],function(g,t,a,b,c){var k={show:function(h){if(h=k.getNode(h))h.style.display="block"},getNode:function(h){return h&&h.domNode||h},hide:function(h){if(h=k.getNode(h))h.style.display="none"},toggle:function(h){if(h=k.getNode(h))h.style.display="none"===h.style.display?"block":"none"},documentBox:8>=c("ie")?{w:document.documentElement.clientWidth,
h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(h){if(h=this.getNode(h)){var d=0,e=0,l=0,f=0,n=0,u=0;return[t.connect(h,"ontouchstart",function(p){d=p.touches[0].screenX;e=p.touches[0].screenY;l=h.scrollWidth;f=h.scrollHeight;n=h.clientWidth;u=h.clientHeight}),t.connect(h,"ontouchmove",function(p){p.preventDefault();var r=h.firstChild;r instanceof Text&&(r=h.childNodes[1]);var q=r._currentX||0,m=r._currentY||0;q+=p.touches[0].screenX-d;0<
q?q=0:0>q&&Math.abs(q)+n>l&&(q=-1*(l-n));r._currentX=q;m+=p.touches[0].screenY-e;0<m?m=0:0>m&&Math.abs(m)+u>f&&(m=-1*(f-u));r._currentY=m;b.set(r,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+q+"px, "+m+"px)"});d=p.touches[0].screenX;e=p.touches[0].screenY})]}}};a.mixin(g,k);return k})},"esri/urlUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/global dojo/io-query ./kernel ./lang ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),
function(g,t,a,b,c,k,h,d,e,l){var f={},n=d.defaults.io,u=/^[a-z][a-z0-9\+\-\.]*:/i,p=/^\s*http:/i,r=/^\s*https:/i,q=/:\d+$/,m=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;f.isHTTP=function(x){var z=b.location.protocol;return null==x?"http:"===z||"https:"===z:x?"https:"===z:"http:"===z};f.getProtocolForWebResource=function(x){return f.isHTTP()?b.location.protocol:x?"https:":"http:"};f.urlToObject=function(x){var z={},A=new a(x),C=x.indexOf("?");null===A.query?z={path:x,query:null}:(z.path=x.substring(0,
C),z.query=c.queryToObject(A.query));A.fragment&&(z.hash=A.fragment,null===A.query&&(z.path=z.path.substring(0,z.path.length-(A.fragment.length+1))));return z};f.getProxyUrl=function(x,z){var A=g.isString(x)?0===g.trim(x).toLowerCase().indexOf("https:"):x,C=n.proxyUrl,D=l.io.proxyNotSet;g.isString(x)&&(x=f.getProxyRule(x))&&(C=x.proxyUrl);if(!C)throw Error(D);if(A&&!1!==z&&0!==b.location.href.toLowerCase().indexOf("https:")&&(z=C,0!==z.toLowerCase().indexOf("http")&&(z=f.getAbsoluteUrl(z)),z=z.replace(/^http:/i,
"https:"),f.canUseXhr(z))){C=z;var B=1}C=f.urlToObject(C);C._xo=B;return C};f.addProxy=function(x){var z=f.getProxyRule(x),A;z?A=f.urlToObject(z.proxyUrl):n.alwaysUseProxy&&(A=f.getProxyUrl());A&&(z=f.urlToObject(x),x=A.path+"?"+z.path,(A=c.objectToQuery(g.mixin(A.query||{},z.query)))&&(x+="?"+A));return x};f.addProxyRule=function(x){var z=x.urlPrefix=f.urlToObject(x.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),A=n.proxyRules,C,D=A.length,B=D;for(C=0;C<D;C++){var y=
A[C].urlPrefix;if(0===z.indexOf(y)){if(z.length===y)return-1;B=C;break}else 0===y.indexOf(z)&&(B=C+1)}A.splice(B,0,x);return B};f.getProxyRule=function(x){var z=n.proxyRules,A=z.length,C=f.urlToObject(x).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase();for(x=0;x<A;x++)if(0===C.indexOf(z[x].urlPrefix)){var D=z[x];break}return D};f.hasSameOrigin=function(x,z,A){x=x.toLowerCase();z=z.toLowerCase();var C=b.location.href.toLowerCase();x=0===x.indexOf("http")?new a(x):C=new a(C);
z=0===z.indexOf("http")?new a(z):g.isString(C)?new a(C):C;return(A||x.scheme===z.scheme)&&x.host===z.host&&x.port===z.port};f.canUseXhr=function(x,z){var A=e("esri-phonegap")?!0:!1,C=f.hasSameOrigin,D=n.corsEnabledServers,B,y=-1;!A&&e("esri-cors")&&D&&D.length&&(A=t.some(D,function(w,E){w=!w||"object"!==typeof w||w instanceof RegExp?w:w.host;if(w instanceof RegExp){if(w.test(x))return y=E,!0}else if(w&&(B=0!==w.trim().toLowerCase().indexOf("http"),C(x,B?"http://"+w:w)||B&&C(x,"https://"+w)))return y=
E,!0;return!1}));return z?y:A};f.getAbsoluteUrl=function(x){var z=f.getProtocolForWebResource();return g.isString(x)&&!u.test(x)?0===x.indexOf("//")?z+x:0===x.indexOf("/")?z+"//"+b.location.host+x:k._appBaseUrl+x:x};f.fixUrl=function(x){x=g.trim(x);x=f.getAbsoluteUrl(x);x=f.normalizeSlashes(x);x=x.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");x=f.downgradeToHTTP(x);return x=f.upgradeToHTTPS(x)};f.normalize=function(x){return f.fixUrl(x)};f.normalizeSlashes=function(x){if(/^https?:\/\//i.test(x)){var z=
x.indexOf("?");if(-1<z){var A=x.slice(0,z);var C=x.slice(z+1)}else A=x;x=A.replace(/\/{2,}/g,"/");x=x.replace("/","//");C&&(x+="?"+C)}return x};f.downgradeToHTTP=function(x){return f.isHTTP(!1)&&r.test(x)&&f.hasSameOrigin(b.location.href,x,!0)&&!f.canUseXhr(x)?x.replace(r,"http:"):x};f.upgradeToHTTPS=function(x){var z=n.httpsDomains,A=f.isHTTP(!1),C=f.isHTTP(!0);if(!p.test(x))return x;x=g.trim(x);var D=x.indexOf("/",7);D=-1===D?x:x.slice(0,D);D=D.toLowerCase().slice(7);if(q.test(D))if(h.endsWith(D,
":80"))D=D.slice(0,-3),x=x.replace(":80","");else return x;if(A&&D===b.location.host&&(!m.test(x)||!f.canUseXhr(x)))return x;A=!1;if(C&&D===b.location.host)A=!0;else if(z)for(var B=0;B<z.length;B++){var y=z[B];if(D===y||h.endsWith(D,"."+y)){A=!0;break}}A||!C||n.alwaysUseProxy||f.getProxyRule(x)||(A=!0);A&&(x=x.replace(p,"https:"));return x};d=l.widgets.popup;var v=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,label:d.NLS_moreInfo},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,
label:"${hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,appName:"App Studio Player",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,appName:"Collector",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,appName:"Explorer",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,appName:"Navigator",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,appName:"Survey123",
label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,appName:"Trek2There",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,appName:"Workforce",label:d.NLS_openLinkInApp},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,appName:"iForm",label:d.NLS_openLinkInApp},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,appName:"FlowFinity",label:d.NLS_openLinkInApp},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,appName:"Laserfische",label:d.NLS_openLinkInApp},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,
appName:"Microsoft Power BI",label:d.NLS_openLinkInApp}];f.getURIInfo=function(x){var z;t.some(v,function(A){A.pattern.test(x)&&(z=A);return!!z});return z};f.isKnownURI=function(x){return!!f.getURIInfo(x)};f.isSecureProxyService=function(x){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(x)};f.base64UrlEncode=function(x){return btoa(String.fromCharCode.apply(null,x)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")};g.mixin(k,f);k._getProxyUrl=f.getProxyUrl;k._getProxiedUrl=f.addProxy;
k._hasSameOrigin=f.hasSameOrigin;k._canDoXOXHR=f.canUseXhr;k._getAbsoluteUrl=f.getAbsoluteUrl;k.fixUrl=f.fixUrl;return f})},"esri/layers/layer":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/Deferred dojo/_base/json dojo/has ../Evented ../kernel ../lang ../request ../deferredUtils ../urlUtils ../SpatialReference ../geometry/Extent".split(" "),function(g,t,a,b,c,k,h,d,e,l,f,n,u,p,r){var q=g([d],{declaredClass:"esri.layers.Layer",_eventMap:{error:["error"],
load:["layer"],"opacity-change":["opacity"],"update-end":["error"],"visibility-change":["visible"]},constructor:function(m,v){this._attrs={};m&&b.isString(m)?this._url=u.urlToObject(this.url=u.normalize(m)):(this.url=this._url=null,(v=v||m)&&(v.layerDefinition||v.query)&&(v=null));this.spatialReference=new p(4326);this.initialExtent=new r(-180,-90,180,90,new p(4326));this._map=this._div=null;this.normalization=!0;v&&(v.id&&(this.id=v.id),this.arcgisProps=v.arcgisProps,this.parentLayer=v.parentLayer,
!1===v.visible&&(this.visible=!1),l.isDefined(v.opacity)&&(this.opacity=v.opacity),l.isDefined(v.minScale)&&this.setMinScale(v.minScale),l.isDefined(v.maxScale)&&this.setMaxScale(v.maxScale),this.attributionDataUrl=v.attributionDataUrl||"",this.hasAttributionData=!!this.attributionDataUrl,l.isDefined(v.showAttribution)&&(this.showAttribution=v.showAttribution),this.className=v.className,this.refreshInterval=v.refreshInterval||0);this._errorHandler=b.hitch(this,this._errorHandler);this._scheduledRefresh=
b.hitch(this,this._scheduledRefresh);this.refresh=b.hitch(this,this.refresh);if(this.managedSuspension){var x=this._setMap;this._setMap=function(z){var A=x.apply(this,arguments);this._fireAttach(z);this.evaluateSuspension();if(this.suspended&&!z.loaded)var C=a.connect(z,"onLoad",this,function(){a.disconnect(C);C=null;this.evaluateSuspension()});return A}}this.registerConnectEvents()},id:null,visible:!0,opacity:1,loaded:!1,loadError:null,minScale:0,maxScale:0,visibleAtMapScale:!1,suspended:!0,attached:!1,
attributionDataUrl:"",hasAttributionData:!1,showAttribution:!0,refreshInterval:0,_errorHandler:function(m){this.loaded||(this.loadError=m);this.onError(m)},_setMap:function(m,v,x,z){this._map=m;this._lyrZEHandle=a.connect(m,"onZoomEnd",this,this._processMapScale);if(m.loaded)this.visibleAtMapScale=this._isMapAtVisibleScale();else var A=a.connect(m,"onLoad",this,function(){a.disconnect(A);A=null;this._processMapScale()})},_unsetMap:function(m,v){a.disconnect(this._lyrZEHandle);this._map=this._lyrZEHandle=
null;this._resumedOnce=void 0;this.suspended=!0;this._fireDetach(m)},_fireAttach:function(m){this.attached=!0;this.onAttach({map:m})},_fireDetach:function(m){this.attached=!1;this.onDetach({map:m})},_cleanUp:function(){this._map=this._div=null},_fireUpdateStart:function(){this.updating||(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart(),this._map&&this._map._incr())},_fireUpdateEnd:function(m,v){this.updating&&(this.updating=!1,this.attr("data-updating"),this._refreshRT(),this.onUpdateEnd(m,
v),this._map&&this._map._decr())},_getToken:function(){var m=this._url,v=this.credential;return m&&m.query&&m.query.token||v&&v.token||void 0},_findCredential:function(){this.credential=e.id&&this._url&&e.id.findCredential(this._url.path)},_useSSL:function(){var m=this._url,v=/^http:/i;this.url&&(this.url=this.url.replace(v,"https:"));m&&m.path&&(m.path=m.path.replace(v,"https:"))},refresh:function(m){},show:function(){this.setVisibility(!0)},hide:function(){this.setVisibility(!1)},setMinScale:function(m){this.setScaleRange(m)},
setMaxScale:function(m){this.setScaleRange(null,m)},setScaleRange:function(m,v){var x=l.isDefined(m),z=l.isDefined(v);this.loaded||(this._hasMin=this._hasMin||x,this._hasMax=this._hasMax||z);var A=this.minScale,C=this.maxScale;this.minScale=(x?m:this.minScale)||0;this.maxScale=(z?v:this.maxScale)||0;if(A!==this.minScale||C!==this.maxScale)this.onScaleRangeChange(),this._processMapScale()},suspend:function(){this._suspended=!0;this.evaluateSuspension()},resume:function(){this._suspended=!1;this.evaluateSuspension()},
canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&this.visibleAtMapScale&&!this._suspended},evaluateSuspension:function(){this.canResume()?this.suspended&&this._resume():this.suspended||this._suspend()},_suspend:function(){this.suspended=!0;this.attr("data-suspended","");this.onSuspend();if(this._map)this._map.onLayerSuspend(this)},_resume:function(){this.suspended=!1;this.attr("data-suspended");var m=void 0===this._resumedOnce,v=this.className,x=this._attrs,z=this.getNode(),
A;if(m){this._resumedOnce=!0;if(v&&z){var C=z.getAttribute("class")||"";(new RegExp("(^|\\s)"+v+"(\\s|$)","i")).test(C)||z.setAttribute("class",C+((C?" ":"")+v))}if(x&&z)for(A in x)x.hasOwnProperty(A)&&z.setAttribute(A,x[A])}this._refreshRT();this.onResume({firstOccurrence:m});if(this._map)this._map.onLayerResume(this)},_processMapScale:function(){var m=this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale();m!==this.visibleAtMapScale&&(this.onScaleVisibilityChange(),this.evaluateSuspension())},
isVisibleAtScale:function(m){return m?q.prototype._isMapAtVisibleScale.apply(this,arguments):!1},_isMapAtVisibleScale:function(m,v){if(!(m||this._map&&this._map.loaded))return!1;var x=this._map;m=m||x.getScale();var z=this.minScale,A=this.maxScale,C=!z,D=!A,B;v&&(B=x.width>x.height?x.width:x.height);C||(m<=z?C=!0:v&&(C=Math.abs(z-m)/z<1/B));D||(m>=A?D=!0:v&&(D=Math.abs(A-m)/A<1/B));return C&&D},getAttributionData:function(){var m=this.attributionDataUrl,v=new c(n._dfdCanceller);this.hasAttributionData&&
m?(v._pendingDfd=f({url:m,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),v._pendingDfd.then(function(x){v.callback(x)},function(x){v.errback(x)})):(m=Error("Layer does not have attribution data"),m.log=!!t.isDebug,v.errback(m));return v},getResourceInfo:function(){var m=this.resourceInfo;return b.isString(m)?k.fromJson(m):b.clone(m)},getMap:function(){return this._map},getNode:function(){return this._div},attr:function(m,v){var x=this.getNode();if("data-reference"===m&&11>h("ie"))return this;
x&&(null==v?x.removeAttribute(m):x.setAttribute(m,v));this._attrs&&(null==v?delete this._attrs[m]:this._attrs[m]=v);return this},setRefreshInterval:function(m){var v=this.refreshInterval;this.refreshInterval=m;this._toggleRT(!1);m&&this._toggleRT(!0);if(v!==m)this.onRefreshIntervalChange();return this},_toggleRT:function(m){m&&this.refreshInterval?(clearInterval(this._refreshTimer),this._refreshTimer=setInterval(this._scheduledRefresh,6E4*this.refreshInterval)):this._refreshTimer&&(clearInterval(this._refreshTimer),
this._refreshTimer=null)},_refreshRT:function(){this._toggleRT(!1);this._toggleRT(!0)},_scheduledRefresh:function(){this.onRefreshTick();!this._map||this.suspended||this.updating||this.refresh({scheduled:!0})},_refreshTS:null,_reCheckTS:/[\?&]_ts=/ig,_reReplaceTS:/([\?&]_ts=)[0-9]+/ig,addTimestampToURL:function(m){var v=this._refreshTS;v&&(m=this._reCheckTS.test(m)?m.replace(this._reReplaceTS,"$$$1"+v):m+((-1===m.indexOf("?")?"?":"\x26")+"_ts\x3d"+v));return m},setNormalization:function(m){this.normalization=
m},setVisibility:function(m){this.visible!==m&&(this.visible=m,this.onVisibilityChange(this.visible),this.evaluateSuspension());this.attr("data-hidden",m?null:"")},onLoad:function(){},onAttach:function(m){},onDetach:function(m){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onRefreshIntervalChange:function(){},onRefreshTick:function(){},
onError:function(){}});b.setObject("layers.Layer",q,e);return q})},"esri/Evented":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "),function(g,t,a,b,c,k){g=g([b],{declaredClass:"esri.Evented",registerConnectEvents:function(){var h=this.constructor,d=this.constructor._meta.parents,e=[{}],l={},f,n=function(p,r){t.isArray(p)||(p=[p]);for(var q=0;q<p.length;q++){var m=p[q];m._meta&&m._meta.parents&&n(m._meta.parents,r);m.prototype._eventMap&&
r.push(t.mixin({},m.prototype._eventMap))}return r};if(!h._onMap){n(d,e);e.push(this._eventMap);d=t.mixin.apply(this,e);for(u in this)/^on\w/.test(u)&&t.isFunction(this[u])&&(e=this._hyphenLower(u).toLowerCase(),d[e]||(l[e]={method:u}));for(f in d){var u=this._onCamelCase(f);l[f]={method:u,argKeys:d[f]}}h._onMap=l;return h._onMap}},on:function(h,d){if(-1<h.indexOf(",")){for(var e=h.split(/\s*,\s*/),l=e.length,f=[];l--;)f.push(this.on(e[l],d));f.remove=function(){for(var p=0;p<f.length;p++)f[p].remove()};
return f}e=this.constructor._onMap||this.registerConnectEvents();l="string"==typeof h&&h.toLowerCase();var n=this._onCamelCase(l),u=e&&e[l];return(n=u&&u.method||this[n]&&t.isFunction(this[n])&&n)?u&&t.isArray(u.argKeys)?(e=this._onArr2Obj(d,e[l].argKeys),a.after(this,n,e,!0)):a.after(this,n,function(p){p=p||{};p.target||(p.target=this);d.call(this,p)},!0):this.inherited(arguments)},emit:function(h,d){var e,l,f=h.toLowerCase();var n=this._onCamelCase(h);var u=this.constructor._onMap||this.registerConnectEvents();
n=(l=u&&u[f]&&u[f].method||t.isFunction(this[n])&&n)&&this[l];l&&u&&u[f]&&this._onObj2Arr(function(){e=Array.prototype.slice.call(arguments)},u[f].argKeys)(d);d=d||{};d.target||(d.target=this);if(n){var p=e&&e.length?e:[d];p=n.apply(this,p)}this.inherited(arguments,[h,d]);return p},_onObj2Arr:function(h,d){if(d){var e=this;return function(l){var f,n=[],u=d.length;for(f=0;f<u;f++)n[f]=l[d[f]];h.apply(e,n)}}return h},_onArr2Obj:function(h,d){if(d){var e=this;return function(){var l,f={},n=arguments.length;
for(l=0;l<n;l++)f[d[l]]=arguments[l];f.target||(f.target=e);h.call(e,f)}}return h},_hyphenLower:function(h){return h.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(d,e){return(e?"-":"")+d.toLowerCase()})},_onCamelCase:function(h){return"on"+h.substr(0,1).toUpperCase()+h.substr(1).replace(/\-([a-z])/g,function(d,e){return e.toUpperCase()})}});return k.Evented=g})},"esri/request":function(){define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/request/xhr ./core/request/script dojo/request/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils ./support/requestUtils".split(" "),
function(g,t,a,b,c,k,h,d,e,l,f,n,u,p,r,q,m,v,x){function z(X){X=new k(X);return(X.host+(X.port?":"+X.port:"")).toLowerCase()}function A(X){return this._xhr?this._xhr.getResponseHeader(X):null}function C(X,ca){var Q=n.objectToQuery(X.content);Q&&(X.url+=(-1===X.url.indexOf("?")?"?":"\x26")+Q);if(2E3<X.url.length){if("data:"!==X.url.toLowerCase().slice(0,5))return X=new b,X.reject(c.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."})),X;if(3E6<X.url.length)return X=
new b,X.reject(c.mixin(Error(),{message:"When using responseType 'image', data URL length cannot exceed 3000000 characters."})),X}var U=new Image;ca.allowImageDataAccess&&(U.crossOrigin=X.withCredentials?"use-credentials":"anonymous");var ia=!1,T=new b(function(Y){ia=!0;U.onload=U.onerror=U.onabort=null;U.src=""});ca=function(Y){U.onload=U.onerror=U.onabort=null;ia||T.reject(Error("Unable to load the resource"))};U.onload=function(){U.onload=U.onerror=U.onabort=null;ia||T.resolve(this)};U.onerror=
ca;U.onabort=ca;U.alt="";U.src=X.url;return T}function D(X,ca,Q,U){var ia=!1,T=!1,Y=!1,ja;if(q.isDefined(ca))if(c.isObject(ca)){ia=!!ca.useProxy;T=!!ca.usePost;Y=!!ca.returnProgress;var pa=ca.crossOrigin}else ia=!!ca;X=c.mixin({},X);delete X._credential;X._ssl&&(X.url=X.url.replace(/^http:/i,"https:"));10>r("ie")&&!ha.test(X.url)&&(X.url=encodeURI(X.url));var ta=X.content,W=X.url,S=Q&&X.form,ea=R;pa=q.isDefined(pa)?pa:ea.useCors;X.load=function(za){if(za){if(za.error){var Ia=c.mixin(Error(),za.error);
Ia.log=!!a.isDebug}else"error"===za.status&&(Ia=c.mixin(Error(),za),Ia.log=!!a.isDebug);Ia&&(X.failOk=!Ia.log,q.isDefined(Ia.httpCode)||(Ia.httpCode=Ia.code))}return Ia||za};X.error=function(za,Ia){Ia&&Ia.xhr&&Ia.xhr.abort();za instanceof Error||(za=c.mixin(Error(),za));za.log=!!a.isDebug;X.failOk=!za.log;ea.errorHandler(za,Ia);return za};X._token&&(X.content=X.content||{},X.content.token=X._token);var ka=0;if(ta&&W){var na=n.objectToQuery(ta);ka=na.length+W.length+1;r("esri-url-encodes-apostrophe")&&
(ka=na.replace(/'/g,"%27").length+W.length+1)}X.timeout=q.isDefined(X.timeout)?X.timeout:ea.timeout;X.handleAs=X.handleAs||"json";try{var sa=pa&&m.canUseXhr(X.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(X.url),Ca=m.hasSameOrigin(X.url,window.location.href)||sa,N=T||Q||ka>ea.postLength?!0:!1,P=Ca||-1===X.handleAs.indexOf("json")||!X.callbackParamName||Q?!1:!0,ba=m.getProxyRule(X.url)||ea.alwaysUseProxy||ia||!("image"===X.handleAs&&!ca.allowImageDataAccess||P&&!N||Ca)?!0:!1;Q&&!r("esri-file-upload")&&
!ba&&sa&&(ba=!0);if(ba){var la=m.getProxyUrl(W,pa);var qa=la.path;la._xo&&(sa=!0);!N&&qa.length+1+ka>ea.postLength&&(N=!0);X.url=qa+"?"+W;if(N)X.content=c.mixin(la.query||{},ta);else{var L=n.objectToQuery(c.mixin(la.query||{},ta));L&&(X.url+="?"+L);X.content=null}}if(!P||N||ba){var Z=X.headers;!sa||Z&&Z.hasOwnProperty("X-Requested-With")||(Z=X.headers=Z||{},Z["X-Requested-With"]=null);if(Q){var oa=X.callbackParamName||"callback.html",ua=X.callbackElementName||"textarea",va,xa,Aa=S.elements?S.elements.length:
0;if(ta=X.content)for(va in ta.token&&m.isSecureProxyService(W)&&(W+=(-1===W.indexOf("?")?"?":"\x26")+"token\x3d"+ta.token,X.url=ba?qa+"?"+W:W,delete ta.token),ta){var wa=ta[va];if(q.isDefined(wa)){var Ea=null;for(xa=0;xa<Aa;xa++){var Ja=S.elements[xa];if(Ja.name===va){Ea=Ja;break}}Ea?Ea.value=wa:U?S.append(va,wa):S.appendChild(f.create("input",{type:"hidden",name:va,value:wa}))}}if(r("esri-file-upload")){t.forEach(S.elements,function(za){za.name===oa&&S.removeChild(za)});var Ma=U?S:new FormData(S);
if(11<=r("safari")&&"entries"in Ma&&"delete"in Ma){U=[];for(var Da=Ma.entries(),Ya=Da.next();!Ya.done;){var Na=Ya.value;Na[1]instanceof File&&""===Na[1].name&&U.push(Na[0]);Ya=Da.next()}U.forEach(function(za){Ma.delete(za)})}X.contentType=!1;X.postData=Ma;delete X.form}else{S.enctype="multipart/form-data";9>r("ie")&&(S.encoding="multipart/form-data");S.method="post";t.some(S.elements,function(za){return za.name===oa})||S.appendChild(f.create("input",{type:"hidden",name:oa,value:ua}));if(-1!==W.toLowerCase().indexOf("addattachment")||
-1!==W.toLowerCase().indexOf("updateattachment"))W+=(-1===W.indexOf("?")?"?":"\x26")+oa+"\x3d"+ua,X.url=ba?qa+"?"+W:W;delete X.content}}if(sa&&!X.hasOwnProperty("withCredentials")&&"with-credentials"===R.useCors){qa=ba?qa:W;var Ua=m.canUseXhr(qa,!0),$a=-1<Ua?R.corsEnabledServers[Ua]:null;if($a&&$a.hasOwnProperty("withCredentials"))$a.withCredentials&&(X.withCredentials=!0);else if(u.id){var Pa=u.id.findServerInfo(qa);Pa&&Pa.webTierAuth&&(X.withCredentials=!0)}}X=M?M(X):X;var La=function(){if("image"===
X.handleAs)return C(X,ca);if(N){if(Q&&!r("esri-file-upload")){ja=new b(function(){za.cancel()});var za=l.post(X.url,X).then(function(Ka){ja.resolve(Ka)}).otherwise(function(Ka){ja.reject(Ka)});ja.addCallback(function(Ka){return X.load(Ka)});ja.addErrback(function(Ka){return X.error(Ka)});return ja}!ba&&r("safari")&&(X.url+=(-1===X.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+da++);if(Y){X.uploadProgress=!0;X.data=X.postData;X.query=X.content;ja=new b(function(){Ia.cancel()});var Ia=
d.post(X.url,X).then(function(Ka){ja.resolve(Ka)},function(Ka){ja.reject(Ka)},function(Ka){ja.progress({transferType:Ka.transferType,loaded:Ka.loaded,total:Ka.total})});ja.addCallback(function(Ka){return X.load(Ka)});ja.addErrback(function(Ka){return X.error(Ka)});return ja}return h.post(X)}return h.get(X)};return X.withCredentials&&x.isNoCorsRequestRequired(W)?ja=x.sendNoCorsRequest(W,ta).addBoth(function(){var za=La();ja.ioArgs=za.ioArgs;return za}):La()}X=M?M(X):X;X.jsonp=X.callbackParamName;X.query=
X.content;ja=new b(function(){Oa.cancel()});var Oa=e.get(X.url,X).then(function(za){ja.resolve(za)}).otherwise(function(za){ja.reject(za)});ja.addCallback(function(za){return X.load(za)});ja.addErrback(function(za){return X.error(za)});return ja}catch(za){return ja=new b,ja.errback(X.error(za)),ja}}function B(X){var ca=R.corsStatus,Q=m.canUseXhr(X,!0);-1<Q&&R.corsEnabledServers.splice(Q,1);var U=new b;U.reject({log:!!a.isDebug});ca[z(X)]=U.promise;return Q}function y(X){var ca=R.corsStatus;try{var Q=
z(X);if(R.corsDetection&&R.useCors&&r("esri-cors")&&X&&-1!==X.toLowerCase().indexOf("/rest/services")&&!m.hasSameOrigin(X,window.location.href)&&!m.canUseXhr(X)){if(ca[Q]&&!ca[Q].isCanceled())return ca[Q];var U=new b(v._dfdCanceller);ca[Q]=U.promise;var ia=h.get({url:X.substring(0,X.toLowerCase().indexOf("/rest/")+6)+"info",content:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*R.corsDetectionTimeout});U._pendingDfd=ia;ia.then(function(T){T?(m.canUseXhr(X)||R.corsEnabledServers.push(Q),
U.resolve()):U.reject()},function(T){U.reject(T)});return U.promise}}catch(T){}return fa}function w(X){M=X}function E(X,ca,Q,U){function ia(sa){sa._pendingDfd=D(Q,U,S,W);if(!sa._pendingDfd){sa.ioArgs=sa._pendingDfd&&sa._pendingDfd.ioArgs;var Ca=Error("Deferred object is missing");Ca.log=!!a.isDebug;sa.errback(Ca);sa._pendingDfd=null;return sa}sa._pendingDfd.addCallback(function(N){if(!N)return N;var P=sa._pendingDfd&&sa._pendingDfd.ioArgs&&sa._pendingDfd.ioArgs.xhr;if(!P)return N;if(P=P.getResponseHeader("Content-Type"))if(P=
P.toLowerCase(),-1===P.indexOf("text/plain")&&-1===P.indexOf("application/json"))return N;if(N instanceof ArrayBuffer&&750>=N.byteLength)P=new Blob([N]);else if(N instanceof Blob&&750>=N.size)P=N;else return N;var ba=new b,la=new FileReader;la.readAsText(P);la.onloadend=function(){if(!la.error)try{var qa=JSON.parse(la.result);if(qa.error)var L=qa.error}catch(Z){}L?(L=c.mixin(Error(),L),L.log=!!a.isDebug,null==L.httpCode&&(L.httpCode=L.code),ba.reject(L)):ba.resolve(N)};return ba.promise}).addCallback(function(N){sa.ioArgs=
sa._pendingDfd&&sa._pendingDfd.ioArgs;U.returnFullResponse&&(N={data:N,_xhr:sa.ioArgs&&sa.ioArgs.xhr,getHeader:A});sa.callback(N);sa._pendingDfd=null}).addErrback(function(N){if(N){var P=N.code;var ba=N.subcode;var la=(la=N.messageCode)&&la.toUpperCase()}if(N&&403==P&&(4==ba||N.message&&-1<N.message.toLowerCase().indexOf("ssl")&&-1===N.message.toLowerCase().indexOf("permission"))){if(!Q._ssl){Q._ssl=Q._sslFromServer=!0;E(sa,!0,Q,U);return}}else if(N&&415==N.status){if(B(Q.url),!Q._err415){Q._err415=
1;E(sa,!0,Q,U);return}}else if(u.id&&-1!==t.indexOf(u.id._errorCodes,P)&&!u.id._isPublic(Q.url)&&!Y&&(403!=P||-1===t.indexOf(V,la)&&(!q.isDefined(ba)||2==ba&&Q._token))){sa._pendingDfd=u.id.getCredential(Q.url,{token:Q._token,error:N});sa._pendingDfd.addCallback(function(qa){Q._token=qa.token;Q._credential=qa;Q._ssl=Q._sslFromServer||qa.ssl;E(sa,!0,Q,U)}).addErrback(function(qa){sa.errback(qa);sa._pendingDfd=null});return}sa.ioArgs=sa._pendingDfd&&sa._pendingDfd.ioArgs;sa.isFulfilled()||sa.errback(N);
sa._pendingDfd=null}).then(null,null,function(N){sa.progress(N)})}var T=Q.form,Y=U.disableIdentityLookup,ja=U._preLookup,pa=!1;if(r("esri-workers")&&!1!==R.useWorkers)if(!0===U.useWorkers||!0===R.useWorkers)pa=!0;else if(U.workerOptions){var ta=U.workerOptions;if(ta.callback||ta.worker&&ta.worker.worker instanceof Worker)pa=!0}var W=T&&r("esri-file-upload")&&T instanceof FormData,S=T&&(T.elements?t.some(T.elements,function(sa){return"file"===sa.type}):W),ea=-1!==Q.url.toLowerCase().indexOf("token\x3d")||
Q.content&&Q.content.token||S&&t.some(T.elements,function(sa){return"token"===sa.name})?1:0;if(!ca){X.addCallback(function(sa){if(sa&&(/\/sharing\/rest\/accounts\/self/i.test(Q.url)||/\/sharing\/rest\/portals\/self/i.test(Q.url))){if(!ea&&!Q._token&&sa.user&&sa.user.username){R.webTierAuthServers.push(z(Q.url));var Ca=R.corsEnabledServers,N=m.canUseXhr(Q.url,!0),P={host:z(Q.url),withCredentials:!0};if(-1===N)Ca.push(P);else{var ba=Ca[N];ba instanceof RegExp?(P.host=ba,Ca.splice(N,1,P)):"object"===
typeof ba?ba.withCredentials=!0:Ca.splice(N,1,P)}}Array.isArray(sa.authorizedCrossOriginNoCorsDomains)&&x.registerNoCorsDomains(sa.authorizedCrossOriginNoCorsDomains)}if(sa=Q._credential)if(Ca=(Ca=u.id.findServerInfo(sa.server))&&Ca.owningSystemUrl)Ca=Ca.replace(/\/?$/,"/sharing"),(sa=u.id.findCredential(Ca,sa.userId))&&-1===u.id._getIdenticalSvcIdx(Ca,sa)&&sa.resources.splice(0,0,Ca)});X.addBoth(function(sa){delete Q._credential;!sa||r("ie")&&sa.nodeType||(sa._ssl=Q._ssl)});var ka=Q.load,na=Q.error;
ka&&X.addCallback(function(sa){var Ca=X._pendingDfd;Ca=Ca&&Ca.ioArgs;return ka.call(Ca&&Ca.args,sa,Ca)});na&&X.addErrback(function(sa){var Ca=X._pendingDfd;Ca=Ca&&Ca.ioArgs;return na.call(Ca&&Ca.args,sa,Ca)})}!u.id||ea||Q._token||u.id._isPublic(Q.url)||Y&&!ja||!(ca=u.id.findCredential(Q.url))||(Q._token=ca.token,Q._ssl=ca.ssl);pa?U.workerOptions&&U.workerOptions.worker?(H||(H=h),h=U.workerOptions.worker,ia(X)):g(["./workers/RequestClient"],function(sa){H||(H=h);if(U.workerOptions){var Ca=U.workerOptions;
h=sa.getClient(Ca.callback,Ca.cbFunction)}else h=sa.getClient();ia(X)}):(H&&(h=H,H=null),ia(X));return X}function F(X,ca){X.url=m.fixUrl(X.url);ca=ca||{};var Q=new b(v._dfdCanceller),U=y(X.url);Q._pendingDfd=U;U.always(function(ia){ia&&"cancel"===ia.dojoType?Q.reject(ia):E(Q,!1,X,ca)});return Q}var H=null,M,R=p.defaults.io,V=["COM_0056","COM_0057","SB_0008"],da=0,ha=/%[0-9A-F]{2}/i,fa=function(){var X=new b;X.resolve();return X.promise}();F._makeRequest=D;F._processRequest=E;F._disableCors=B;F._detectCors=
y;F.setRequestPreCallback=w;u.request=F;u._makeRequest=D;u._processRequest=E;u._disableCors=B;u._detectCors=y;u.setRequestPreCallback=w;return F})},"esri/core/request/script":function(){define("require exports dojo/Deferred dojo/request/script dojo/text!./iframe.html ../sniff".split(" "),function(g,t,a,b,c,k){function h(){var m=document.createElement("iframe");m.name="esri_core_jsonp_iframe";m.style.display="none";m.setAttribute("sandbox","allow-scripts");if(!k("ff")&&"srcdoc"in m){var v=g.toUrl("dojo/dojo.js"),
x=c.replace("../../../dojo/dojo.js",v);v=v.slice(0,-7);x=x.replace("../../../dojo/",v);m.srcdoc=x}else x=g.toUrl("./iframe.html"),"http:"===window.location.protocol&&0===x.indexOf("https:")&&(x=x.replace("https:","http:")),m.src=x;document.body.appendChild(m);return m}function d(){var m=new MessageChannel;m.port1.addEventListener("message",e);m.port1.start();return m}function e(m){var v=m.data;if("ready"===v){v=0;for(var x=r;v<x.length;v++)m=x[v],f(m,u);r=null}else if(m=q[v.id])delete q[v.id],v.isError?
m.dfd.reject(Error(v.message)):m.dfd.resolve(v.response)}function l(m,v){m.addEventListener("load",function(){m.contentWindow.postMessage("init","*",[v.port2])})}function f(m,v){q[m.message.id]=m;v.port1.postMessage(m.message)}Object.defineProperty(t,"__esModule",{value:!0});var n,u,p=0,r=[],q={};t.get=function(m,v){if(!k("esri-script-sandbox"))return b.get(m,v);var x=null;v&&(x={jsonp:v.jsonp,preventCache:v.preventCache,query:v.query,timeout:v.timeout});v=new a(function(){if(r){var A=r.indexOf(z);
-1<A&&r.splice(A,1)}else z.message.id in q&&delete q[z.message.id]});var z={dfd:v,message:{id:"id"+(++p+Math.random()),url:m,options:x}};n||(n=h(),u=d(),l(n,u));r?r.push(z):f(z,u);return v.promise}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),function(g,t,a,b,c,k,h,d,e,l,f){function n(B,y){B.canDelete&&m._remove(B.id,y.options.frameDoc,!0)}function u(B){D&&D.length&&(c.forEach(D,
function(y){m._remove(y.id,y.frameDoc);y.frameDoc=null}),D=[]);return B.options.jsonp?!B.data:!0}function p(B){return!!this.scriptLoaded}function r(B){return(B=B.options.checkString)&&eval("typeof("+B+') !\x3d\x3d "undefined"')}function q(B,y){if(this.canDelete){var w=this.response.options;D.push({id:this.id,frameDoc:w.ioArgs?w.ioArgs.frameDoc:w.frameDoc});w.ioArgs&&(w.ioArgs.frameDoc=null);w.frameDoc=null}y?this.reject(y):this.resolve(B)}function m(B,y,w){var E=a.parseArgs(B,a.deepCopy({},y));B=
E.url;y=E.options;var F=a.deferred(E,n,u,y.jsonp?null:y.checkString?r:p,q);k.mixin(F,{id:v+x++,canDelete:!1});y.jsonp&&((new RegExp("[?\x26]"+y.jsonp+"\x3d")).test(B)||(B+=(~B.indexOf("?")?"\x26":"?")+y.jsonp+"\x3d"+(y.frameDoc?"parent.":"")+v+"_callbacks."+F.id),F.canDelete=!0,C[F.id]=function(R){E.data=R;F.handleResponse(E)});a.notify&&a.notify.emit("send",E,F.promise.cancel);if(!y.canAttach||y.canAttach(F)){var H=m._attach(F.id,B,y.frameDoc,function(R){if(!(R instanceof Error)){var V=Error("Error loading "+
(R.target?R.target.src:"script"));V.source=R;R=V}F.reject(R);m._remove(F.id,y.frameDoc,!0)});if(!y.jsonp&&!y.checkString)var M=h(H,z,function(R){if("load"===R.type||A.test(H.readyState))M.remove(),F.scriptLoaded=R})}t(F);return w?F:F.promise}l.add("script-readystatechange",function(B,y){return"undefined"!==typeof y.createElement("script").onreadystatechange&&("undefined"===typeof B.opera||"[object Opera]"!==B.opera.toString())});var v=g.id.replace(/[\/\.\-]/g,"_"),x=0,z=l("script-readystatechange")?
"readystatechange":"load",A=/complete|loaded/,C=b.global[v+"_callbacks"]={},D=[];m.get=m;m._attach=function(B,y,w,E){w=w||f.doc;var F=w.createElement("script");if(E)h.once(F,"error",E);F.type="text/javascript";try{F.src=y}catch(H){E&&E(F)}F.id=B;F.async=!0;F.charset="utf-8";return w.getElementsByTagName("head")[0].appendChild(F)};m._remove=function(B,y,w){e.destroy(d.byId(B,y));C[B]&&(w?C[B]=function(){delete C[B]}:delete C[B])};m._callbacksProperty=v+"_callbacks";return m})},"esri/core/sniff":function(){define(["../sniff"],
function(g){return g})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom ../NodeList-manipulate".split(" "),function(g,t,a,b,c,k,h,d,e,l,f,n){function u(A){return!this.isFulfilled()}function p(A){return!!this._finished}function r(A,C){if(!C)try{var D=A.options,B=m.doc(m._frame),y=D.handleAs;if("html"!==y){if("xml"===y)if("html"===B.documentElement.tagName.toLowerCase()){d("a",
B.documentElement).orphan();var w=B.documentElement.innerText||B.documentElement.textContent;w=w.replace(/>\s+</g,"\x3e\x3c");A.text=k.trim(w)}else A.data=B;else A.text=B.getElementsByTagName("textarea")[0].value;c(A)}else A.data=B}catch(E){C=E}C?this.reject(C):this._finished?this.resolve(A):this.reject(Error("Invalid dojo/request/iframe request state"))}function q(A){this._callNext()}function m(A,C,D){var B=b.parseArgs(A,b.deepCreate(z,C),!0);A=B.url;C=B.options;if("GET"!==C.method&&"POST"!==C.method)throw Error(C.method+
" not supported by dojo/request/iframe");m._frame||(m._frame=m.create(m._iframeName,x+"();"));A=b.deferred(B,null,u,p,r,q);A._callNext=function(){this._calledNext||(this._calledNext=!0,m._currentDfd=null,m._fireNextRequest())};A._legacy=D;m._dfdQueue.push(A);m._fireNextRequest();a(A);return D?A:A.promise}var v=g.id.replace(/[\/\.\-]/g,"_"),x=v+"_onload";n.global[x]||(n.global[x]=function(){var A=m._currentDfd;if(A){var C=l.byId(A.response.options.form)||A._tmpForm;if(C){for(var D=A._contentToClean,
B=0;B<D.length;B++)for(var y=D[B],w=0;w<C.childNodes.length;w++){var E=C.childNodes[w];if(E.name===y){f.destroy(E);break}}A._originalAction&&C.setAttribute("action",A._originalAction);A._originalMethod&&(C.setAttribute("method",A._originalMethod),C.method=A._originalMethod);A._originalTarget&&(C.setAttribute("target",A._originalTarget),C.target=A._originalTarget)}A._tmpForm&&(f.destroy(A._tmpForm),delete A._tmpForm);A._finished=!0}else m._fireNextRequest()});var z={method:"POST"};m.create=function(A,
C,D){if(n.global[A])return n.global[A];if(n.global.frames[A])return n.global.frames[A];D||(e("config-useXDomain")&&e("config-dojoBlankHtmlUrl"),D=e("config-dojoBlankHtmlUrl")||t.toUrl("dojo/resources/blank.html"));C=f.place('\x3ciframe id\x3d"'+A+'" name\x3d"'+A+'" src\x3d"'+D+'" onload\x3d"'+C+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',n.body());return n.global[A]=C};m.doc=function(A){if(A.contentDocument)return A.contentDocument;var C=
A.name;if(C){var D=n.doc.getElementsByTagName("iframe");if(A.document&&D[C].contentWindow&&D[C].contentWindow.document)return D[C].contentWindow.document;if(n.doc.frames[C]&&n.doc.frames[C].document)return n.doc.frames[C].document}return null};m.setSrc=function(A,C,D){A=n.global.frames[A.name];A.contentWindow&&(A=A.contentWindow);try{D?A.location.replace(C):A.location=C}catch(B){}};m._iframeName=v+"_IoIframe";m._notifyStart=function(){};m._dfdQueue=[];m._currentDfd=null;m._fireNextRequest=function(){try{if(!m._currentDfd&&
m._dfdQueue.length){do var A=m._currentDfd=m._dfdQueue.shift();while(A&&(A.canceled||A.isCanceled&&A.isCanceled())&&m._dfdQueue.length);if(!A||A.canceled||A.isCanceled&&A.isCanceled())m._currentDfd=null;else{var C=A.response,D=C.options,B=A._contentToClean=[],y=l.byId(D.form),w=b.notify,E=D.data||null;if(!A._legacy&&"POST"===D.method&&!y)y=A._tmpForm=f.create("form",{name:v+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},n.body());else if("GET"===D.method&&y&&-1<C.url.indexOf("?")){var F=
C.url.slice(C.url.indexOf("?")+1);E=k.mixin(h.queryToObject(F),E)}if(y){if(!A._legacy){var H=y;do H=H.parentNode;while(H&&H!==n.doc.documentElement);H||(y.style.position="absolute",y.style.left="-1000px",y.style.top="-1000px",n.body().appendChild(y));y.name||(y.name=v+"_form")}if(E){H=function(X,ca){f.create("input",{type:"hidden",name:X,value:ca},y);B.push(X)};for(var M in E){var R=E[M];if(k.isArray(R)&&1<R.length)for(F=0;F<R.length;F++)H(M,R[F]);else{var V=d("input[name\x3d'"+M+"']",y);-1==V.indexOf()?
H(M,R):V.val(R)}}}var da=y.getAttributeNode("action"),ha=y.getAttributeNode("method"),fa=y.getAttributeNode("target");C.url&&(A._originalAction=da?da.value:null,da?da.value=C.url:y.setAttribute("action",C.url));A._legacy?ha&&ha.value||(ha?ha.value=D.method:y.setAttribute("method",D.method)):(A._originalMethod=ha?ha.value:null,ha?ha.value=D.method:y.setAttribute("method",D.method));A._originalTarget=fa?fa.value:null;fa?fa.value=m._iframeName:y.setAttribute("target",m._iframeName);y.target=m._iframeName;
w&&w.emit("send",C,A.promise.cancel);m._notifyStart(C);y.submit()}else D="",C.options.data&&(D=C.options.data,"string"!==typeof D&&(D=h.objectToQuery(D))),H=C.url+(-1<C.url.indexOf("?")?"\x26":"?")+D,w&&w.emit("send",C,A.promise.cancel),m._notifyStart(C),m.setSrc(m._frame,H,!0)}}}catch(X){A.reject(X)}};b.addCommonMethods(m,["GET","POST"]);return m})},"dojo/NodeList-manipulate":function(){define("./query ./_base/lang ./_base/array ./dom-construct ./dom-attr ./NodeList-dom".split(" "),function(g,t,
a,b,c){function k(e){for(;e.childNodes[0]&&1==e.childNodes[0].nodeType;)e=e.childNodes[0];return e}function h(e,l){"string"==typeof e?(e=b.toDom(e,l&&l.ownerDocument),11==e.nodeType&&(e=e.childNodes[0])):1==e.nodeType&&e.parentNode&&(e=e.cloneNode(!1));return e}var d=g.NodeList;t.extend(d,{_placeMultiple:function(e,l){e="string"==typeof e||e.nodeType?g(e):e;for(var f=[],n=0;n<e.length;n++)for(var u=e[n],p=this.length,r=p-1,q;q=this[r];r--)0<n&&(q=this._cloneNode(q),f.unshift(q)),r==p-1?b.place(q,
u,l):u.parentNode.insertBefore(q,u),u=q;f.length&&(f.unshift(0),f.unshift(this.length-1),Array.prototype.splice.apply(this,f));return this},innerHTML:function(e){return arguments.length?this.addContent(e,"only"):this[0].innerHTML},text:function(e){if(arguments.length){for(var l=0,f;f=this[l];l++)1==f.nodeType&&c.set(f,"textContent",e);return this}var n="";for(l=0;f=this[l];l++)n+=c.get(f,"textContent");return n},val:function(e){if(arguments.length){for(var l=t.isArray(e),f=0,n;n=this[f];f++){var u=
n.nodeName.toUpperCase(),p=n.type,r=l?e[f]:e;if("SELECT"==u)for(u=n.options,p=0;p<u.length;p++){var q=u[p];q.selected=n.multiple?-1!=a.indexOf(e,q.value):q.value==r}else"checkbox"==p||"radio"==p?n.checked=n.value==r:n.value=r}return this}if((n=this[0])&&1==n.nodeType){e=n.value||"";if("SELECT"==n.nodeName.toUpperCase()&&n.multiple){e=[];u=n.options;for(p=0;p<u.length;p++)q=u[p],q.selected&&e.push(q.value);e.length||(e=null)}return e}},append:function(e){return this.addContent(e,"last")},appendTo:function(e){return this._placeMultiple(e,
"last")},prepend:function(e){return this.addContent(e,"first")},prependTo:function(e){return this._placeMultiple(e,"first")},after:function(e){return this.addContent(e,"after")},insertAfter:function(e){return this._placeMultiple(e,"after")},before:function(e){return this.addContent(e,"before")},insertBefore:function(e){return this._placeMultiple(e,"before")},remove:d.prototype.orphan,wrap:function(e){if(this[0]){e=h(e,this[0]);for(var l=0,f;f=this[l];l++){var n=this._cloneNode(e);f.parentNode&&f.parentNode.replaceChild(n,
f);k(n).appendChild(f)}}return this},wrapAll:function(e){if(this[0]){e=h(e,this[0]);this[0].parentNode.replaceChild(e,this[0]);e=k(e);for(var l=0,f;f=this[l];l++)e.appendChild(f)}return this},wrapInner:function(e){if(this[0]){e=h(e,this[0]);for(var l=0;l<this.length;l++){var f=this._cloneNode(e);this._wrap(t._toArray(this[l].childNodes),null,this._NodeListCtor).wrapAll(f)}}return this},replaceWith:function(e){e=this._normalize(e,this[0]);for(var l=0,f;f=this[l];l++)this._place(e,f,"before",0<l),f.parentNode.removeChild(f);
return this},replaceAll:function(e){e=g(e);for(var l=this._normalize(this,this[0]),f=0,n;n=e[f];f++)this._place(l,n,"before",0<f),n.parentNode.removeChild(n);return this},clone:function(){for(var e=[],l=0;l<this.length;l++)e.push(this._cloneNode(this[l]));return this._wrap(e,this,this._NodeListCtor)}});d.prototype.html||(d.prototype.html=d.prototype.innerHTML);return d})},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(g,t,a){t={_dfdCanceller:function(b){b.canceled=
!0;var c=b._pendingDfd;if(!b.isFulfilled()&&c&&!c.isFulfilled()){c.cancel();var k=c.results&&c.results[1]}b._pendingDfd=null;return k},_fixDfd:function(b){var c=b.then;b.then=function(k,h,d){if(k){var e=k;k=function(l){return l&&l._argsArray?e.apply(null,l):e(l)}}return c.call(this,k,h,d)};return b},_resDfd:function(b,c,k){var h=c.length;1===h?k?b.errback(c[0]):b.callback(c[0]):1<h?(c._argsArray=!0,b.callback(c)):b.callback()}};g.mixin(a,t);return t})},"esri/support/requestUtils":function(){define(["dojo/_base/Deferred",
"dojo/_base/url","../config","../urlUtils"],function(g,t,a,b){function c(h){h=new t(h);return h.scheme+"://"+h.authority}var k=a.defaults.io;return{registerNoCorsDomains:function(h){k.crossOriginNoCorsDomains||(k.crossOriginNoCorsDomains={});for(var d=k.crossOriginNoCorsDomains,e=0;e<h.length;e++){var l=h[e];l=l.toLowerCase();/^https?:\/\//.test(l)?d[c(l)]=0:(d[c("http://"+l)]=0,d[c("https://"+l)]=0)}},isNoCorsRequestRequired:function(h){var d=k.crossOriginNoCorsDomains;return d?(h=c(h),h=h.toLowerCase(),
!b.hasSameOrigin(h,window.location.origin)&&d[h]<Date.now()-36E5):!1},sendNoCorsRequest:function(h,d){var e=new g,l=k.crossOriginNoCorsDomains;l&&(l[c(h).toLowerCase()]=Date.now());l=b.urlToObject(h);h=l.path;if(l.query&&"json"===l.query.f||d&&"json"===d.f)h+="?f\x3djson";fetch(h,{mode:"no-cors",credentials:"include"}).then(e.resolve,e.resolve);return e}}})},"esri/layers/TileInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../SpatialReference ../geometry/Point ./LOD".split(" "),
function(g,t,a,b,c,k,h,d,e){g=g(null,{declaredClass:"esri.layers.TileInfo",constructor:function(l){t.mixin(this,l);this.width=this.cols;this.height=this.rows;this._levelToLOD={};l=this.spatialReference;var f=this.origin;l&&(l=this.spatialReference=new h(l.toJson?l.toJson():l));f&&(this.origin=new d(f.toJson?f.toJson():f),!f.spatialReference&&l&&this.origin.setSpatialReference(new h(l.toJson())));this.lods=a.map(this.lods,function(p){return new e(p)});a.forEach(this.lods,function(p){this._levelToLOD[p.level]=
p},this);l=!1;f=this.spatialReference;var n=this.origin;if(f&&n){var u=f._getInfo();u&&(l=f._isWrappable()&&Math.abs(u.origin[0]-n.x)<=u.dx)}this.isWrappable=l;this._initializeUpsampleLevels()},toJson:function(){return k.fixJson({rows:this.rows,cols:this.cols,dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJson(),spatialReference:this.spatialReference&&this.spatialReference.toJson(),lods:this.lods&&a.map(this.lods,function(l){return l.toJson()})})},
lodAt:function(l){return this._levelToLOD&&this._levelToLOD[l]||null},updateTileInfo:function(l){var f=this.lodAt(l.level),n=f.resolution*this.width;f=f.resolution*this.height;l.id=l.level+"/"+l.row+"/"+l.col;l.extent||(l.extent=[0,0,0,0]);l.extent[0]=this.origin.x+l.col*n;l.extent[1]=this.origin.y-(l.row+1)*f;l.extent[2]=l.extent[0]+n;l.extent[3]=l.extent[1]+f},upsampleTile:function(l){var f=this._upsampleLevels[l.level];if(!f||-1===f.parentLevel)return!1;l.level=f.parentLevel;l.row=Math.floor(l.row/
f.factor+.001);l.col=Math.floor(l.col/f.factor+.001);this.updateTileInfo(l);return!0},_initializeUpsampleLevels:function(){var l=this.lods;this._upsampleLevels=[];for(var f=null,n=0;n<l.length;n++){var u=l[n];this._upsampleLevels[u.level]={parentLevel:f?f.level:-1,factor:f?f.resolution/u.resolution:0};f=u}}});t.setObject("layers.TileInfo",g,c);return g})},"esri/layers/LOD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(g,t,a,b,c){g=g(null,{declaredClass:"esri.layers.LOD",
constructor:function(k){t.mixin(this,k)},toJson:function(){return c.fixJson({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}});t.setObject("layers.LOD",g,b);return g})},"esri/layers/unitBezier":function(){define([],function(){var g=function(a,b,c,k){function h(p,r){var q;r=null==r?1E-6:r;var m=p;for(q=0;8>q;q++){var v=((l*m+e)*m+d)*m-p;if(Math.abs(v)<r)return m;var x=(3*l*m+2*e)*m+d;if(1E-6>Math.abs(x))break;m-=v/x}x=0;q=1;m=p;if(m<x)return x;if(m>q)return q;
for(;x<q;){v=((l*m+e)*m+d)*m;if(Math.abs(v-p)<r)break;p>v?x=m:q=m;m=.5*(q-x)+x}return m}var d=3*a,e=3*(c-a)-d,l=1-d-e,f=3*b,n=3*(k-b)-f,u=1-f-n;return function(p,r){p=h(p,r);return((u*p+n)*p+f)*p}},t=/^cubic-bezier\((.*)\)/;g.parse=function(a){var b=g[a]||null;!b&&(a=t.exec(a))&&(a=a[1].split(",").map(function(c){return parseFloat(c.trim())}),4!==a.length||a.some(function(c){return isNaN(c)})||(b=g.apply(g,a)));return b};g.ease=g(.25,.1,.25,1);g.linear=g(0,0,1,1);g.easeIn=g["ease-in"]=g(.42,0,1,1);
g.easeOut=g["ease-out"]=g(0,0,.58,1);g.easeInOut=g["ease-in-out"]=g(.42,0,.58,1);return g})},"esri/layers/vectorTiles/request":function(){define(["require","exports","esri/request","dojo/_base/lang","dojo/Deferred"],function(g,t,a,b,c){return function(k,h){k=b.mixin({},{url:k,failOk:!0},h);"array-buffer"===h.responseType?(k.handleAs="arraybuffer",delete k.responseType):h.responseType&&(k.handleAs=h.responseType,delete k.responseType);null!==h.query&&(k.content=k.query,delete k.query);if(h.hasOwnProperty("allowImageDataAccess")){var d=
{allowImageDataAccess:h.allowImageDataAccess};delete k.allowImageDataAccess}var e=new c(function(){l.isFulfilled()||l.cancel()});var l=a(k,d).then(function(f){e.resolve({data:f})}).catch(function(f){f&&null!=f.httpCode&&(f.details=f.details||{},f.details.httpStatus=f.httpCode);e.reject(f)});return e.promise}})},"esri/layers/vectorTiles/core/promiseUtils":function(){define("require exports dojo/Deferred dojo/when dojo/promise/all ./Error".split(" "),function(g,t,a,b,c,k){function h(d){if(d){if("function"!==
typeof d.forEach){var e=Object.keys(d),l=e.map(function(p){return d[p]});return h(l).then(function(p){var r={};e.forEach(function(q,m){return r[q]=p[m]});return r})}var f=new a,n=[],u=d.length;0===u&&f.resolve(n);d.forEach(function(p){var r={promise:p};n.push(r);p.then(function(q){r.value=q}).catch(function(q){r.error=q}).then(function(){--u;0===u&&f.resolve(n)})});return f.promise}}Object.defineProperty(t,"__esModule",{value:!0});t.all=function(d){return c(d)};t.filter=function(d,e){var l=d.slice();
return c(d.map(function(f,n){return e(f,n)})).then(function(f){return l.filter(function(n,u){return f[u]})})};t.eachAlways=h;t.create=function(d,e){var l=new a(e);d(function(f){void 0===f&&(f=null);return b(f).then(l.resolve)},l.reject);return l.promise};t.reject=function(d){var e=new a;e.reject(d);return e.promise};t.resolve=function(d){void 0===d&&(d=null);var e=new a;e.resolve(d);return e.promise};t.after=function(d,e){void 0===e&&(e=null);var l=0,f=new a(function(){l&&(clearTimeout(l),l=0)});
l=setTimeout(function(){f.resolve(e)},d);return f.promise};t.timeout=function(d,e,l){var f=0,n=new a(d.cancel);d.then(function(u){n.isFulfilled()||(n.resolve(u),f&&(clearTimeout(f),f=0))});d.catch(function(u){n.isFulfilled()||(n.reject(u),f&&(clearTimeout(f),f=0))});f=setTimeout(function(){var u=l||new k("promiseUtils:timeout","The wrapped promise did not resolve within "+e+" ms");n.reject(u)},e);return n.promise};t.wrapCallback=function(d){var e=!1,l=new a(function(){return e=!0});d(function(f){e||
l.resolve(f)});return l.promise};t.isThenable=function(d){return d&&"function"===typeof d.then};t.when=function(d){return b(d)}})},"dojo/promise/all":function(){define(["../_base/array","../_base/lang","../Deferred","../when"],function(g,t,a,b){var c=g.some;return function(k){var h,d;t.isArray(k)?d=k:k&&"object"===typeof k&&(h=k);var e=[];if(h){d=[];for(var l in h)Object.hasOwnProperty.call(h,l)&&(e.push(l),d.push(h[l]));var f={}}else d&&(f=[]);if(!d||!d.length)return(new a).resolve(f);var n=new a;
n.promise.always(function(){f=e=null});var u=d.length;c(d,function(p,r){h||e.push(r);b(p,function(q){n.isFulfilled()||(f[e[r]]=q,0===--u&&n.resolve(f))},n.reject);return n.isFulfilled()});return n.promise}})},"esri/layers/vectorTiles/core/Error":function(){define(["require","exports","./tsSupport/extendsHelper","./lang","./Message"],function(g,t,a,b,c){g=function(k){function h(d,e,l){var f=k.call(this,d,e,l)||this;return f instanceof h?f:new h(d,e,l)}a(h,k);h.prototype.toJSON=function(){return{name:this.name,
message:this.message,details:b.clone(this.details),dojoType:this.dojoType}};h.fromJSON=function(d){var e=new h(d.name,d.message,d.details);null!=d.dojoType&&(e.dojoType=d.dojoType);return e};return h}(c);g.prototype.type="error";return g})},"esri/layers/vectorTiles/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var b in a)a.hasOwnProperty(b)&&(t[b]=a[b])};return function(t,
a){function b(){this.constructor=t}g(t,a);t.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b)}}()})},"esri/layers/vectorTiles/core/lang":function(){define("dojo/_base/kernel dojo/_base/lang dojo/date dojo/number dojo/date/locale dojo/i18n!../nls/common".split(" "),function(g,t,a,b,c,k){function h(p){return void 0!==p&&null!==p}function d(p){return h(p)?p:""}function e(p,r,q){var m=q.match(/([^\(]+)(\([^\)]+\))?/i),v=t.trim(m[1]);q=r[p];m=JSON.parse((m[2]?t.trim(m[2]):"{}").replace(/^\(/,
"{").replace(/\)$/,"}").replace(/([{,])\s*([0-9a-zA-Z_]+)\s*:/gi,'$1"$2":').replace(/"\s*:\s*'/gi,'":"').replace(/'\s*(,|\})/gi,'"$1'));var x=m.utcOffset;if(-1===n.indexOf(v))v=t.getObject(v),t.isFunction(v)&&(q=v(q,p,r,m));else if("number"===typeof q||"string"===typeof q&&q&&!isNaN(Number(q)))switch(q=Number(q),v){case "NumberFormat":p=t.mixin({},m);r=parseFloat(p.places);if(isNaN(r)||0>r)p.places=Infinity;return b.format(q,p);case "DateString":q=new Date(q);if(m.local||m.systemLocale)return m.systemLocale?
q.toLocaleDateString()+(m.hideTime?"":" "+q.toLocaleTimeString()):q.toDateString()+(m.hideTime?"":" "+q.toTimeString());q=q.toUTCString();m.hideTime&&(q=q.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return q;case "DateFormat":return q=new Date(q),h(x)&&(q=a.add(q,"minute",q.getTimezoneOffset()-x)),c.format(q,m)}return d(q)}function l(p,r){var q;if(r)for(q in p)p.hasOwnProperty(q)&&(void 0===p[q]?delete p[q]:p[q]instanceof Object&&l(p[q],!0));else for(q in p)p.hasOwnProperty(q)&&void 0===p[q]&&delete p[q];
return p}function f(p){if(!p||"object"!=typeof p||t.isFunction(p))return p;if(p instanceof Int8Array||p instanceof Uint8Array||p instanceof Uint8ClampedArray||p instanceof Int16Array||p instanceof Int32Array||p instanceof Uint16Array||p instanceof Uint32Array||p instanceof Float32Array||p instanceof Float64Array||p instanceof Date)return new p.constructor(p);if(p instanceof ArrayBuffer)return p.slice(0,p.byteLength);if("function"===typeof p.clone)p=p.clone();else if("function"===typeof p.map&&"function"===
typeof p.forEach)p=p.map(f);else if("function"===typeof p.notifyChange&&"function"===typeof p.watch)p=p.clone();else{var r={},q,m={};for(q in p){var v=p[q];var x=!(q in m)||m[q]!==v;if(!(q in r)||r[q]!==v&&x)r[q]=f?f(v):v}p=r}return p}var n=["NumberFormat","DateString","DateFormat"],u=/<\/?[^>]+>/g;return{equals:function(p,r){return p===r||"number"===typeof p&&isNaN(p)&&"number"===typeof r&&isNaN(r)||t.isFunction((p||{}).getTime)&&t.isFunction((r||{}).getTime)&&p.getTime()==r.getTime()||t.isFunction((p||
{}).equals)&&p.equals(r)||t.isFunction((r||{}).equals)&&r.equals(p)||!1},mixin:t.mixin,valueOf:function(p,r){for(var q in p)if(p[q]==r)return q;return null},stripTags:function(p){if(p){var r=typeof p;if("string"===r)p=p.replace(u,"");else if("object"===r)for(var q in p)(r=p[q])&&"string"===typeof r&&(r=r.replace(u,"")),p[q]=r}return p},substitute:function(p,r,q){if(h(q))if(t.isObject(q)){var m=q.first;var v=q.dateFormat;var x=q.numberFormat}else m=q;if(r&&"{*}"!==r)return t.replace(r,t.hitch({obj:p},
function(A,C){A=C.split(":");return 1<A.length?(C=A[0],A.shift(),e(C,this.obj,A.join(":"))):v&&-1!==(v.properties||[]).indexOf(C)?e(C,this.obj,v.formatter||"DateString"):x&&-1!==(x.properties||[]).indexOf(C)?e(C,this.obj,x.formatter||"NumberFormat"):d(this.obj[C])}));r=[];var z;r.push('\x3ctable class\x3d"esri-widget__table" summary\x3d"'+k.fieldsSummary+'"\x3e\x3ctbody\x3e');for(z in p)if(q=p[z],v&&-1!==(v.properties||[]).indexOf(z)?q=e(z,p,v.formatter||"DateString"):x&&-1!==(x.properties||[]).indexOf(z)&&
(q=e(z,p,x.formatter||"NumberFormat")),r.push("\x3ctr\x3e\x3cth\x3e"+z+"\x3c/th\x3e\x3ctd\x3e"+d(q)+"\x3c/td\x3e\x3c/tr\x3e"),m)break;r.push("\x3c/tbody\x3e\x3c/table\x3e");return r.join("")},filter:function(p,r,q){r=[t.isString(p)?p.split(""):p,q||g.global,t.isString(r)?new Function("item","index","array",r):r];q={};var m;p=r[0];for(m in p)r[2].call(r[m],p[m],m,p)&&(q[m]=p[m]);return q},startsWith:function(p,r,q){q=q||0;return p.indexOf(r,q)===q},endsWith:function(p,r,q){if("number"!==typeof q||
!isFinite(q)||Math.floor(q)!==q||q>p.length)q=p.length;q-=r.length;p=p.indexOf(r,q);return-1!==p&&p===q},isDefined:h,fixJson:l,clone:f}})},"esri/layers/vectorTiles/core/Message":function(){define(["require","exports","dojo/string"],function(g,t,a){return function(){function b(c,k,h){this instanceof b&&(this.name=c,this.message=k&&a.substitute(k,h,function(d){return null==d?"":d})||"",this.details=h)}b.prototype.toString=function(){return"["+this.name+"]: "+this.message};return b}()})},"esri/layers/vectorTiles/core/urlUtils":function(){define(["require",
"exports","esri/urlUtils","dojo/_base/url"],function(g,t,a,b){function c(z){return a.normalize(z)}function k(z){return"data:"===z.slice(0,5)}function h(z){return d(z)||v.test(z)}function d(z){return z&&"/"===z[0]&&"/"===z[1]}function e(z){return a.urlToObject(z)}function l(z){if("string"===typeof z)return new b(n(z));z.scheme||(z.scheme=t.appUrl.scheme);return z}function f(z){if(k(z))return null;var A=z.indexOf("://");if(-1===A&&d(z))A=2;else if(-1!==A)A+=3;else return null;A=z.indexOf("/",A);return-1===
A?z:z.slice(0,A)}function n(z,A,C){void 0===A&&(A=t.appBaseUrl);if(d(z))return C&&C.preserveProtocolRelative?z:"http"===t.appUrl.scheme&&t.appUrl.authority===f(z).slice(2)?"http:"+z:"https:"+z;if(v.test(z))return z;C=p;if("/"===z[0]){var D=A.indexOf("//");D=A.indexOf("/",D+2);A=-1===D?A:A.slice(0,D)}return C(A,z)}function u(z,A,C){void 0===C&&(C=!1);z=l(z);A=l(A);return C||z.scheme===A.scheme?z.host.toLowerCase()===A.host.toLowerCase()&&z.port===A.port:!1}function p(){for(var z=[],A=0;A<arguments.length;A++)z[A]=
arguments[A];if(z&&z.length){A=[];if(h(z[0])){var C=z[0],D=C.indexOf("//");A.push(C.slice(0,D+1));m.test(z[0])&&(A[0]+="/");z[0]=C.slice(D+2)}else"/"===z[0][0]&&A.push("");z=z.reduce(function(B,y){return y?B.concat(y.split("/")):B},[]);for(C=0;C<z.length;C++)D=z[C],".."===D&&0<A.length?A.pop():!D||"."===D&&0!==A.length||A.push(D);return A.join("/")}}function r(z,A,C){if(!(A&&C&&z&&h(z)))return z;var D=z.indexOf("//"),B=z.indexOf("/",D+2),y=z.indexOf(":",D+2);B=Math.min(0>B?z.length:B,0>y?z.length:
y);if(z.slice(D+2,B).toLowerCase()!==A.toLowerCase())return z;A=z.slice(0,D+2);z=z.slice(B);return""+A+C+z}function q(z,A,C){void 0===A&&(A=t.appBaseUrl);if(!h(z))return z;var D=c(z),B=D.toLowerCase();A=c(A).toLowerCase().replace(/\/+$/,"");if((C=C?c(C).toLowerCase().replace(/\/+$/,""):null)&&0!==A.indexOf(C))return z;for(var y=function(F,H,M){M=F.indexOf(H,M);return-1===M?F.length:M},w=y(B,"/",B.indexOf("//")+2),E=-1;B.slice(0,w+1)===A.slice(0,w)+"/";){E=w+1;if(w===B.length)break;w=y(B,"/",w+1)}if(-1===
E||C&&E<C.length)return z;z=D.slice(E);D=A.slice(E-1).replace(/[^/]+/g,"").length;if(0<D)for(B=0;B<D;B++)z="../"+z;else z="./"+z;return z}Object.defineProperty(t,"__esModule",{value:!0});t.normalize=c;t.canUseXhr=function(z){return a.canUseXhr(z)};t.removeTrailingSlash=function(z){return z.replace(/\/+$/,"")};g=Function("return this")();t.appUrl=new b(g.location);t.appBaseUrl=function(){var z=t.appUrl.path;z=z.substring(0,z.lastIndexOf(z.split("/")[z.split("/").length-1]));return t.appUrl.scheme+
"://"+t.appUrl.host+(null!=t.appUrl.port?":"+t.appUrl.port:"")+z}();var m=/^\s*file:/i,v=/^\s*[a-z][a-z0-9-+.]*:[^0-9]/i;t.isDataProtocol=k;t.isAbsolute=h;t.isProtocolRelative=d;t.urlToObject=e;t.getOrigin=f;t.makeAbsolute=n;t.hasSameOrigin=u;t.join=p;t.removeFile=function(z){var A=0;if(h(z)){var C=z.indexOf("//");-1!==C&&(A=C+2)}C=z.lastIndexOf("/");return C<A?z:z.slice(0,C+1)};t.addProxy=function(z){return a.addProxy(z)};t.makeData=function(z){return z.isBase64?"data:"+z.mediaType+";base64,"+z.data:
"data:"+z.mediaType+","+z.data};var x=/^data:(.*?)(;base64)?,(.*)$/;t.dataComponents=function(z){return(z=z.match(x))?{mediaType:z[1],isBase64:!!z[2],data:z[3]}:null};t.changeDomain=r;t.read=function(z,A){var C=A&&A.url&&A.url.path;z&&C&&(z=n(z,C,{preserveProtocolRelative:!0}));(A=A&&A.portal)&&!A.isPortal&&A.urlKey&&A.customBaseUrl?(C=A.urlKey+"."+A.customBaseUrl,A=u(t.appUrl,t.appUrl.scheme+"://"+C)?r(z,A.portalHostname,C):r(z,C,A.portalHostname)):A=z;return A};t.write=function(z,A){if(!z)return z;
!h(z)&&A&&A.blockedRelativeUrls&&A.blockedRelativeUrls.push(z);var C=n(z);if(A){var D=A.verifyItemRelativeUrls&&A.verifyItemRelativeUrls.rootPath||A.url&&A.url.path;D&&(C=q(C,D,D),C!==z&&A.verifyItemRelativeUrls&&A.verifyItemRelativeUrls.writtenUrls.push(C))}z=C;C=(A=A&&A.portal)&&!A.isPortal&&A.urlKey&&A.customBaseUrl?r(z,A.urlKey+"."+A.customBaseUrl,A.portalHostname):z;return C};t.makeRelative=q;t.removeQueryParameters=function(z){z=e(z);Object.keys(z.query||{});return z.path}})},"esri/layers/vectorTiles/geometry/support/spatialReferenceUtils":function(){define(["require",
"exports","./WKIDUnitConversion"],function(g,t,a){function b(e){return e.wkid&&!0===c[e.wkid]}Object.defineProperty(t,"__esModule",{value:!0});var c={102113:!0,102100:!0,3857:!0,3785:!0},k={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0};g=[-2.0037508342788905E7,2.0037508342788905E7];var h=[-2.0037508342787E7,2.0037508342787E7],d={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:g,origin:h,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:g,origin:h,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:g,origin:h,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:g,origin:h,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}};t.equals=function(e,l){if(l){if(e===l)return!0;if(null!=e.wkid||null!=l.wkid)return e.wkid===l.wkid||b(e)&&b(l)||null!=l.latestWkid&&e.wkid===l.latestWkid||null!=e.latestWkid&&l.wkid===e.latestWkid;if(e.wkt&&l.wkt)return e.wkt.toUpperCase()===l.wkt.toUpperCase()}return!1};t.getInfo=function(e){return e.wkid?d[e.wkid]:null};t.isGeographic=function(e){return e.wkid?null==a[e.wkid]:e.wkt?!!/^\s*GEOGCS/i.test(e.wkt):!1};t.isWGS84=function(e){return 4326===
e.wkid};t.isWebMercator=b;t.isWrappable=function(e){return e.wkid&&!0===k[e.wkid]}})},"esri/layers/vectorTiles/geometry/support/WKIDUnitConversion":function(){define(["esri/WKIDUnitConversion"],function(g){return g})},"esri/layers/vectorTiles/layers/support/vectorTileLayerLoader":function(){define("require exports ../../core/tsSupport/assignHelper ../../config ../../request ../../core/promiseUtils ../../core/urlUtils".split(" "),function(g,t,a,b,c,k,h){function d(n){n&&(n=h.getOrigin(n),h.canUseXhr(n)||
-1!==f.indexOf(n)||f.push(n))}function e(){for(var n=[],u=0;u<arguments.length;u++)n[u]=arguments[u];u=void 0;for(var p=0;p<n.length;++p)h.isProtocolRelative(n[p])?u&&(u=u.split("://")[0]+":"+n[p].trim()):u=h.isAbsolute(n[p])?n[p]:h.join(u,n[p]);return u}function l(n,u,p){var r;if("string"===typeof u){u=h.normalize(u);d(u);var q=h.urlToObject(u);q=c(q.path,{query:{f:"json"},responseType:"json"});var m=r=u}else q=k.resolve({data:u}),r=u.jsonUrl||null,m=p;return q.then(function(v){var x=v.data;v.ssl&&
(r&&(r=r.replace(/^http:/i,"https:")),m&&(m=m.replace(/^http:/i,"https:")));if(x.sources){n.styleUrl=r||null;v=m?h.removeFile(m):h.appBaseUrl;n.styleBase=v;n.style=x;n.styleUrl&&d(n.styleUrl);if(n.source)x=k.resolve();else{b:if(x=x.sources,x.esri)x=x.esri;else{for(var z=0,A=Object.keys(x);z<A.length;z++){var C=A[z];if("vector"===x[C].type){x=x[C];break b}}x=null}x=x.url?l(n,e(v,x.url)):l(n,x,v)}return x}if(x.sources)return k.reject("You must specify the URL or the JSON for a service or for a style.");
n.sourceUrl=r||null;v=m?h.removeTrailingSlash(m)+"/":h.appBaseUrl;n.sourceBase=v;n.source=x;if(x.hasOwnProperty("tileInfo"))z=x;else{z={xmin:-2.0037507067161843E7,ymin:-2.0037507067161843E7,xmax:2.0037507067161843E7,ymax:2.0037507067161843E7,spatialReference:{wkid:102100}};C=(z.xmax-z.xmin)/512;A=[];for(var D=x.hasOwnProperty("minzoom")?parseFloat(x.minzoom):0,B=x.hasOwnProperty("maxzoom")?parseFloat(x.maxzoom):16;D<B;D++){var y=C/Math.pow(2,D);A.push({level:D,scale:Math.floor(3779.527559055118*y),
resolution:y})}C=0;for(B=x.tiles;C<B.length;C++)d(e(v,B[C]));z={capabilities:"TilesOnly",initialExtent:z,fullExtent:z,minScale:A[0].scale,maxScale:A[A.length-1].scale,tiles:x.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,y:2.0037508342787E7},lods:A,spatialReference:{wkid:102100}}}}n.validatedSource=z;n.sourceUrl&&d(n.sourceUrl);x=n.style?k.resolve():null==x.defaultStyles?k.reject():"string"===typeof x.defaultStyles?l(n,e(v,x.defaultStyles,"root.json")):l(n,x.defaultStyles,
e(v,"root.json"));return x})}Object.defineProperty(t,"__esModule",{value:!0});var f=b.defaults&&b.defaults.io.corsEnabledServers||b.request.corsEnabledServers;t.loadMetadata=function(n){var u={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null},p="string"===typeof n?[n,null]:[null,n.jsonUrl],r=p[0];p=p[1];var q=r?h.urlToObject(r):null;return l(u,n,p).then(function(){var m={layerDefinition:u.validatedSource,url:r,parsedUrl:q,serviceUrl:u.sourceUrl,
style:u.style,styleUrl:u.styleUrl,spriteUrl:u.style.sprite&&e(u.styleBase,u.style.sprite),glyphsUrl:u.style.glyphs&&e(u.styleBase,u.style.glyphs)};d(m.spriteUrl);d(m.glyphsUrl);return m})}})},"esri/layers/vectorTiles/core/tsSupport/assignHelper":function(){define([],function(){return Object.assign||function(g){for(var t,a=1,b=arguments.length;a<b;a++){t=arguments[a];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(g[c]=t[c])}return g}})},"esri/layers/vectorTiles/config":function(){define(["require",
"exports","esri/config"],function(g,t,a){Object.defineProperty(a,"workers",{get:function(){return a.defaults.workers},set:function(b){return a.defaults.workers=b}});return a})},"esri/layers/vectorTiles/layers/support/TilemapCache":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/io-query ../../request ../../core/Accessor ../../core/Error ../../core/Handles ../../core/Logger ../../core/LRUMap ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ./Tilemap".split(" "),
function(g,t,a,b,c,k,h,d,e,l,f,n,u,p,r,q){var m=f.getLogger("esri.layers.support.TilemapCache");return function(v){function x(z){z=v.call(this)||this;z._handles=new l;z._pendingTilemapRequests={};z._availableLevels={};z.levels=5;z.cacheByteSize=2097152;z.request=h;return z}b(x,v);x.prototype.initialize=function(){var z=this;this._tilemapCache=new n(this.cacheByteSize,{sizeOfFunction:function(A){return A.byteSize}});this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers"],function(){return z._initializeTilemapDefinition()}),
p.init(this,"layer.tileInfo.lods",function(A){return z._initializeAvailableLevels(A)},!0)]);this._initializeTilemapDefinition()};x.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)};x.prototype.castLevels=function(z){return 2>=z?(m.error("Minimum levels for Tilemap is 3, but got ",z),3):z};Object.defineProperty(x.prototype,"size",{get:function(){return 1<<this.levels},enumerable:!0,configurable:!0});x.prototype.getTilemap=function(z,A,C){return this._tilemapFromCache(z,
A,C,this._tmpTilemapDefinition)};x.prototype.fetchTilemap=function(z,A,C,D){var B=this;if(!this._availableLevels[z])return u.reject(new e("tilemap-cache:level-unavailable","Level "+z+" is unavailable in the service"));var y=this._tmpTilemapDefinition;if(z=this._tilemapFromCache(z,A,C,y))return u.resolve(z);var w=q.tilemapDefinitionId(y),E=this._pendingTilemapRequests[w];E||(E=q.Tilemap.fromDefinition(y,D).then(function(F){B._tilemapCache.set(w,F);delete B._pendingTilemapRequests[w];return F}).catch(function(F){delete B._pendingTilemapRequests[w];
return u.reject(F)}),this._pendingTilemapRequests[w]=E);return u.create(function(F,H){E.then(F,H)})};x.prototype.getAvailability=function(z,A,C){return this._availableLevels[z]?(z=this.getTilemap(z,A,C))?z.getAvailability(A,C):"unknown":"unavailable"};x.prototype.getAvailabilityUpsample=function(z,A,C,D){D.level=z;D.row=A;D.col=C;z=this.layer.tileInfo;for(z.updateTileInfo(D);;)if(A=this.getAvailability(D.level,D.row,D.col),"unavailable"===A){if(!z.upsampleTile(D))return"unavailable"}else return A};
x.prototype.fetchAvailability=function(z,A,C,D){return this._availableLevels[z]?this.fetchTilemap(z,A,C,D).always(function(B){return B instanceof q.Tilemap?(B=B.getAvailability(A,C),"unavailable"===B?u.reject(new e("tile-map:tile-unavailable","Tile is not available",{level:z,row:A,col:C})):B):B&&"cancel"===B.dojoType?u.reject(B):"unknown"}):u.reject(new e("tilemap-cache:level-unavailable","Level "+z+" is unavailable in the service"))};x.prototype.fetchAvailabilityUpsample=function(z,A,C,D,B){var y=
this;D.level=z;D.row=A;D.col=C;var w=this.layer.tileInfo;w.updateTileInfo(D);return this.fetchAvailability(z,A,C,B).catch(function(E){return E&&"cancel"===E.dojoType?u.reject(E):w.upsampleTile(D)?y.fetchAvailabilityUpsample(D.level,D.row,D.col,D):u.reject(E)})};x.prototype._initializeTilemapDefinition=function(){if(this.layer.parsedUrl){var z=this.layer.parsedUrl,A=z.query;A&&A.token||!this.layer.token||(A=a({},A,{token:this.layer.token}));this._tilemapCache.clear();this._tmpTilemapDefinition={service:{url:z.path,
query:A?k.objectToQuery(A):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}};x.prototype._tilemapFromCache=function(z,A,C,D){z=this._getTilemapDefinition(z,A,C,D);z=q.tilemapDefinitionId(z);return this._tilemapCache.get(z)};x.prototype._getTilemapDefinition=function(z,A,C,D){D.level=z;D.row=A-A%this.size;D.col=C-C%this.size;return D};x.prototype._initializeAvailableLevels=function(z){var A=this;this._availableLevels=
{};z&&z.forEach(function(C){return A._availableLevels[C.level]=!0})};c([r.property({constructOnly:!0,type:Number})],x.prototype,"levels",void 0);c([r.cast("levels")],x.prototype,"castLevels",null);c([r.property({readOnly:!0,dependsOn:["levels"],type:Number})],x.prototype,"size",null);c([r.property({constructOnly:!0,type:Number})],x.prototype,"cacheByteSize",void 0);c([r.property({constructOnly:!0})],x.prototype,"layer",void 0);c([r.property({constructOnly:!0})],x.prototype,"request",void 0);return x=
c([r.subclass("esri.layers.support.TilemapCache")],x)}(r.declared(d))})},"esri/layers/vectorTiles/core/tsSupport/declareExtendsHelper":function(){define(["require","exports"],function(g,t){return function(a,b){a.__bases__=b.__bases__}})},"esri/layers/vectorTiles/core/tsSupport/decorateHelper":function(){define([],function(){return function(g,t,a,b){var c=arguments.length,k=3>c?t:null===b?b=Object.getOwnPropertyDescriptor(t,a):b,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)k=
Reflect.decorate(g,t,a,b);else for(var d=g.length-1;0<=d;d--)if(h=g[d])k=(3>c?h(k):3<c?h(t,a,k):h(t,a))||k;return 3<c&&k&&Object.defineProperty(t,a,k),k}})},"esri/layers/vectorTiles/core/Accessor":function(){define("./declare ./accessorSupport/Properties ./accessorSupport/get ./accessorSupport/introspection ./accessorSupport/set ./accessorSupport/watch".split(" "),function(g,t,a,b,c,k){t=t.default;g.before(function(d,e){g.hasMixin(d,h)&&b.processPrototype(e)});g.after(function(d){g.hasMixin(d,h)&&
(b.processClass(d),Object.defineProperties(d.prototype,{initialized:{get:function(){return this.__accessor__&&this.__accessor__.initialized||!1}},constructed:{get:function(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}},destroyed:{get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}}}))});var h=g(null,{declaredClass:"esri.core.Accessor","-chains-":{initialize:"after",destroy:"before"},constructor:function(){if(this.constructor===h)throw Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");
Object.defineProperty(this,"__accessor__",{value:new t(this)});if(0<arguments.length&&this.normalizeCtorArgs){for(var d=[],e=0;e<arguments.length;e++)d.push(arguments[e]);this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,d)}},__accessor__:null,postscript:function(d){var e=this.__accessor__;d=e.ctorArgs||d;if(null!=this.getDefaults){var l=this.getDefaults(d||{});this.set(l)}e.initialize();d&&(this.set(d),e.ctorArgs=null);e.constructed();this.initialize()},initialize:function(){},destroy:function(){if(this.destroyed)try{throw Error("instance is already destroyed");
}catch(d){}else k.removeTarget(this),this.__accessor__.destroy()},get:function(d){return a.get(this,d)},hasOwnProperty:function(d){return this.__accessor__?this.__accessor__.has(d):Object.prototype.hasOwnProperty.call(this,d)},keys:function(){return this.__accessor__?this.__accessor__.keys():[]},set:function(d,e){c.set(this,d,e);return this},watch:function(d,e,l){return k.watch(this,d,e,l)},_clearOverride:function(d){return this.__accessor__.clearOverride(d)},_override:function(d,e){return this.__accessor__.override(d,
e)},_isOverridden:function(d){return this.__accessor__.isOverridden(d)},notifyChange:function(d){this.__accessor__.propertyInvalidated(d)},_get:function(d){return this.__accessor__.internalGet(d)},_set:function(d,e){return this.__accessor__.internalSet(d,e)}});return h})},"esri/layers/vectorTiles/core/declare":function(){define(["require","exports","dojo/_base/declare"],function(g,t,a){function b(d,e){d&&!Array.isArray(d)&&"function"!==typeof d&&(e=d,d=null);d=d||[];e=e||{};return c([this].concat(d),
e)}function c(d,e){d&&!Array.isArray(d)&&"function"!==typeof d&&(e=d,d=null);"function"===typeof d?d=[d]:d||(d=[]);e=e||{};var l;var f=0;for(l=k.length;f<l;f++)k[f](d,e);d=a(d,e);d.createSubclass=b;f=0;for(l=h.length;f<l;f++)h[f](d);return d}var k=[],h=[];(function(d){d.hasMixin=function(e,l){e=Array.isArray(e)?e.reduce(function(n,u){return u._meta?n.concat(u._meta.bases):n},[]):e._meta?e._meta.bases:e;if(!e)return!1;if("string"===typeof l)for(var f=e.length-1;0<=f;f--)if(e[f].prototype.declaredClass===
l)return!0;return-1!==e.indexOf(l)};d.safeMixin=function(e,l){return a.safeMixin(e,l)};d.before=function(e){k.push(e)};d.after=function(e){h.push(e)}})(c||(c={}));return c})},"esri/layers/vectorTiles/core/accessorSupport/Properties":function(){define("require exports dojo/has ../Logger ./extensions ./PropertyOrigin ./Store".split(" "),function(g,t,a,b,c,k,h){Object.defineProperty(t,"__esModule",{value:!0});b.getLogger("esri.core.accessorSupport.Properties");g=function(){function d(e){this.host=e;
this._origin=k.OriginId.USER;this.ctorArgs=this.cursors=null;this.destroyed=!1;this.dirties={};this.lifecycle=0;this.overridden=null;this.store=new h.default;e=this.host.constructor.__accessorMetadata__;this.metadatas=e.properties;this.autoDestroy=e.autoDestroy}d.prototype.initialize=function(){this.lifecycle=1;c.instanceCreated(this.host,this.metadatas)};d.prototype.constructed=function(){this.lifecycle=2};d.prototype.destroy=function(){this.destroyed=!0;var e=this.cursors;if(this.cursors)for(var l=
0,f=Object.getOwnPropertyNames(e);l<f.length;l++){var n=f[l],u=e[n];if(u){for(;0<u.length;)u.pop().propertyDestroyed(this,n);e[n]=null}}if(this.autoDestroy)for(n in this.metadatas)(e=this.internalGet(n))&&e&&"function"===typeof e.destroy&&(e.destroy(),this.metadatas[n].nonNullable||this.internalSet(n,null))};Object.defineProperty(d.prototype,"initialized",{get:function(){return 0!==this.lifecycle},enumerable:!0,configurable:!0});d.prototype.clearOverride=function(e){this.isOverridden(e)&&(this.overridden[e]=
!1,this.propertyInvalidated(e))};d.prototype.get=function(e){var l=this.metadatas[e];if(this.store.has(e)&&!this.dirties[e])return this.store.get(e);var f=l.get;return f?(l=f.call(this.host),this.store.set(e,l,k.OriginId.COMPUTED),this.propertyCommitted(e),l):l.value};d.prototype.originOf=function(e){var l=this.store.originOf(e);return void 0===l&&(e=this.metadatas[e])&&e.hasOwnProperty("value")?"defaults":k.idToName(l)};d.prototype.has=function(e){return this.metadatas[e]?this.store.has(e):!1};d.prototype.internalGet=
function(e){if(this.metadatas[e]){var l=this.store;return l.has(e)?l.get(e):this.metadatas[e].value}};d.prototype.internalSet=function(e,l){this.metadatas[e]&&(this.propertyInvalidated(e),this.initialized?this.store.set(e,l,this._origin):this.store.set(e,l,k.OriginId.DEFAULTS),this.propertyCommitted(e))};d.prototype.isOverridden=function(e){return null!=this.overridden&&!0===this.overridden[e]};d.prototype.keys=function(){return this.store.keys()};d.prototype.override=function(e,l){if(this.metadatas[e]){this.overridden||
(this.overridden={});var f=this.metadatas[e];f.nonNullable&&null==l||((f=f.cast)&&(l=f.call(this.host,l)),this.overridden[e]=!0,this.internalSet(e,l))}};d.prototype.set=function(e,l){if(this.metadatas[e]){var f=this.metadatas[e];if(!f.nonNullable||null!=l){var n=f.set;(f=f.cast)&&(l=f.call(this.host,l));n?n.call(this.host,l):this.internalSet(e,l)}}};d.prototype.setDefaultOrigin=function(e){this._origin=k.nameToId(e)};d.prototype.propertyInvalidated=function(e){var l=this.dirties,f=this.isOverridden(e),
n=this.cursors&&this.cursors[e],u=this.metadatas[e].computes;if(n)for(var p=0;p<n.length;p++)n[p].propertyInvalidated(this,e);f||(l[e]=!0);if(u)for(e=0;e<u.length;e++)this.propertyInvalidated(u[e])};d.prototype.propertyCommitted=function(e){var l=this.cursors&&this.cursors[e];this.dirties[e]=!1;if(l)for(var f=0;f<l.length;f++)l[f].propertyCommitted(this,e)};d.prototype.addCursor=function(e,l){this.cursors||(this.cursors={});var f=this.cursors[e];f||(this.cursors[e]=f=[]);f.push(l)};d.prototype.removeCursor=
function(e,l){var f=this.cursors[e];this.cursors[e]&&(f.splice(f.indexOf(l),1),0===f.length&&(this.cursors[e]=null))};return d}();t.default=g})},"esri/layers/vectorTiles/core/Logger":function(){define(["require","exports","dojo/has"],function(g,t,a){var b={info:0,warn:1,error:2};g=function(){function c(k){void 0===k&&(k={});this.module=k.module||"";this.writer=k.writer||null;this.level=k.level||null;null!=k.enabled&&(this.enabled=!!k.enabled);c._loggers[this.module]=this;k=this.module.lastIndexOf(".");
-1!==k&&(this.parent=c.getLogger(this.module.slice(0,k)))}c.prototype.log=function(k){for(var h=[],d=1;d<arguments.length;d++)h[d-1]=arguments[d];this._isEnabled()&&this._matchLevel(k)&&(d=this._inheritedWriter())&&d.apply(void 0,[k,this.module].concat(h))};c.prototype.error=function(){for(var k=[],h=0;h<arguments.length;h++)k[h]=arguments[h];this.log.apply(this,["error"].concat(k))};c.prototype.warn=function(){for(var k=[],h=0;h<arguments.length;h++)k[h]=arguments[h];this.log.apply(this,["warn"].concat(k))};
c.prototype.info=function(){for(var k=[],h=0;h<arguments.length;h++)k[h]=arguments[h];this.log.apply(this,["info"].concat(k))};c.prototype.getLogger=function(k){return c.getLogger(this.module+"."+k)};c.getLogger=function(k){var h=c._loggers[k];h||(h=new c({module:k}));return h};c.prototype._parentWithMember=function(k,h){for(var d=this;d&&null==d[k];)d=d.parent;return d?d[k]:h};c.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};c.prototype._consoleWriter=
function(k,h){for(var d=[],e=2;e<arguments.length;e++)d[e-2]=arguments[e];console[k].apply(console,["["+h+"]"].concat(d))};c.prototype._matchLevel=function(k){return b[this._parentWithMember("level","error")]<=b[k]};c.prototype._isEnabled=function(){return this._parentWithMember("enabled",!0)};c._loggers={};return c}();g.getLogger("esri").level="warn";return g})},"esri/layers/vectorTiles/core/accessorSupport/extensions":function(){define(["require","exports","./extensions/aliasedProperty","./extensions/computedProperty",
"./extensions/serializableProperty"],function(g,t,a,b,c){Object.defineProperty(t,"__esModule",{value:!0});var k=[a.default,b.default,c.default];t.processPrototypeMetadatas=function(h,d){for(var e=Object.getOwnPropertyNames(h),l=0;l<k.length;l++){var f=k[l];if(f.processPrototypePropertyMetadata)for(var n=0,u=e;n<u.length;n++){var p=u[n];f.processPrototypePropertyMetadata(p,h[p],h,d)}}};t.processClassMetadatas=function(h,d){for(var e=Object.getOwnPropertyNames(h),l=0;l<k.length;l++){var f=k[l];if(f.processClassPropertyMetadata)for(var n=
0,u=e;n<u.length;n++){var p=u[n];f.processClassPropertyMetadata(p,h[p],h,d)}}};t.instanceCreated=function(h,d){for(var e=Object.getOwnPropertyNames(d),l=0;l<k.length;l++){var f=k[l];f.instanceCreated&&f.instanceCreated(h,d,e)}}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/aliasedProperty":function(){define("require exports dojo/has ../get ../set ../utils ../wire".split(" "),function(g,t,a,b,c,k,h){function d(e,l,f){var n=k.getProperties(e);return h.wire(e,f.aliasOf,function(){n.propertyInvalidated(l)})}
Object.defineProperty(t,"__esModule",{value:!0});t.AliasedPropertyExtension={processClassPropertyMetadata:function(e,l,f,n){var u=l.aliasOf;if(u&&(e=u.split(".")[0],null!=f[e]&&!l.set&&!l.get)){var p;l.get=function(){var r=b.default(this,u);if("function"===typeof r){p||(p=u.split(".").slice(0,-1).join("."));var q=b.default(this,p);q&&(r=r.bind(q))}return r};l.readOnly||(l.set=function(r){return c.default(this,u,r)})}},instanceCreated:function(e,l,f){for(var n=0;n<f.length;n++){var u=f[n],p=l[u];p.aliasOf&&
d(e,u,p)}}};t.default=t.AliasedPropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/get":function(){define(["require","exports","./utils"],function(g,t,a){function b(d,e,l){if(null!=l.getItemAt||Array.isArray(l)){var f=parseInt(d,10);if(!isNaN(f))return Array.isArray(l)?l[f]:l.getItemAt(f)}f=a.getProperties(l);return e?a.isPropertyDeclared(f,d)?f.get(d):l[d]:a.isPropertyDeclared(f,d)?f.internalGet(d):l[d]}function c(d,e,l,f){if(null==d)return d;if((d=b(e[f],l,d))||!(f<e.length-1))return f===
e.length-1?d:c(d,e,l,f+1)}function k(d,e,l,f){void 0===l&&(l=!1);void 0===f&&(f=0);return"string"===typeof e&&-1===e.indexOf(".")?b(e,l,d):c(d,a.pathToArray(e),l,f)}function h(d,e){return k(d,e,!0)}Object.defineProperty(t,"__esModule",{value:!0});t.valueOf=k;t.get=h;t.exists=function(d,e){return void 0!==k(e,d,!0)};t.default=h})},"esri/layers/vectorTiles/core/accessorSupport/utils":function(){define(["require","exports","../lang"],function(g,t,a){function b(d,e){return e?Object.keys(e).reduce(function(l,
f){if("value"===f)return l[f]=e[f],l;if(void 0===l[f])return l[f]=a.clone(e[f]),l;var n=l[f],u=e[f];if(n===u)return l;if(Array.isArray(u)||Array.isArray(l))n=n?Array.isArray(n)?l[f]=n.concat():l[f]=[n]:l[f]=[],u&&(Array.isArray(u)||(u=[u]),u.forEach(function(p){-1===n.indexOf(p)&&n.push(p)}));else if(u&&"object"===typeof u)l[f]=b(n,u);else if(!l.hasOwnProperty(f)||e.hasOwnProperty(f))l[f]=u;return l},d||{}):d}function c(d){return Array.isArray(d)?d:d.split(".")}function k(d){if(Array.isArray(d)||
-1<d.indexOf(",")){d=Array.isArray(d)?d:d.split(",");for(var e=0;e<d.length;e++)d[e]=d[e].trim();return 1===d.length?d[0]:d}return d.trim()}function h(d){var e=!1;return function(){e||(e=!0,d())}}Object.defineProperty(t,"__esModule",{value:!0});t.getProperties=function(d){return d?d.__accessor__?d.__accessor__:d.propertyInvalidated?d:null:null};t.isPropertyDeclared=function(d,e){return d&&d.metadatas&&null!=d.metadatas[e]};t.merge=b;t.pathToStringOrArray=function(d){return d?"string"===typeof d&&
-1===d.indexOf(".")?d:c(d):d};t.pathToArray=c;t.splitPath=k;t.parse=function(d,e,l,f){e=k(e);if(Array.isArray(e)){var n=e.map(function(u){return f(d,u.trim(),l)});return{remove:h(function(){return n.forEach(function(u){return u.remove()})})}}return f(d,e.trim(),l)};t.once=h})},"esri/layers/vectorTiles/core/accessorSupport/set":function(){define(["require","exports","dojo/has","../Logger","./get"],function(g,t,a,b,c){function k(h,d,e){if(h&&d)if("object"===typeof d){e=0;for(var l=Object.getOwnPropertyNames(d);e<
l.length;e++){var f=l[e];k(h,f,d[f])}}else"_"!==d[0]&&(-1!==d.indexOf(".")?(d=d.split("."),f=d.splice(d.length-1,1)[0],k(c.default(h,d),f,e)):h[d]=e)}Object.defineProperty(t,"__esModule",{value:!0});b.getLogger("esri.core.accessorSupport.set");t.set=k;t.default=k})},"esri/layers/vectorTiles/core/accessorSupport/wire":function(){define(["require","exports","./utils"],function(g,t,a){function b(l,f,n){f=a.splitPath(f);if(Array.isArray(f)){for(var u=[],p=0;p<f.length;p++)u.push((new c(f[p],n)).install(l));
return new d(u)}l=(new c(f,n)).install(l);return new e(l)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function l(f,n){this.path=f;this.callback=n;this.chain=null;this.path=f;-1<f.indexOf(".")&&(this.chain=a.pathToArray(f));this.callback=n;return this}l.prototype.install=function(f){f=this.chain?new h(this,f):new k(this,f);return f};l.prototype.notify=function(f){this.callback(f,this.path)};return l}(),k=function(){function l(f,n){this.binding=f;this.target=n;a.getProperties(n).addCursor(this.binding.path,
this)}l.prototype.destroy=function(){this.target&&(a.getProperties(this.target).removeCursor(this.binding.path,this),this.target=this.binding=null)};l.prototype.propertyDestroyed=function(f,n){a.getProperties(this.target).removeCursor(n,this)};l.prototype.propertyInvalidated=function(f,n){this.binding&&this.binding.notify(this.target)};l.prototype.propertyCommitted=function(f,n){this.binding&&this.binding.notify(this.target)};return l}(),h=function(){function l(f,n){this.binding=f;this.target=n;this.stack=
[];this.properties=a.getProperties(n);this.stack.push({properties:this.properties,propertyName:f.chain[0]});this.properties.addCursor(f.chain[0],this);this.moveForward();return this}l.prototype.destroy=function(){for(;;){var f=this.stack.pop();if(null==f)break;f.properties.removeCursor(f.propertyName,this)}this.target=this.binding=null};l.prototype.propertyDestroyed=function(f,n){this.moveBackward(f,n)};l.prototype.propertyInvalidated=function(f,n){this.binding&&this.binding.notify(this.target)};
l.prototype.propertyCommitted=function(f,n){this.binding&&(this.moveBackward(f,n),this.moveForward(),this.binding.notify(this.target))};l.prototype.moveBackward=function(f,n){for(var u=this.stack,p=u[u.length-1];p.properties!==f&&p.propertyName!==n;)p.properties.removeCursor(p.propertyName,this),u.pop(),p=u[u.length-1]};l.prototype.moveForward=function(){var f=this.stack,n=f[f.length-1];n=n.properties.internalGet(n.propertyName);(n=a.getProperties(n))&&f.length<this.binding.chain.length&&(f=this.binding.chain[f.length],
this.stack.push({properties:n,propertyName:f}),n.addCursor(f,this),this.moveForward())};return l}(),d=function(){function l(f){this.cursors=f}l.prototype.remove=function(){for(var f=this.cursors;0<f.length;)f.pop().destroy();this.cursors=null};return l}(),e=function(){function l(f){this.cursor=f}l.prototype.remove=function(){this.cursor.destroy();this.cursor=null};return l}();t.create=function(l,f){l=a.splitPath(l);if(Array.isArray(l)){for(var n=[],u=0;u<l.length;u++)n.push(new c(l[u],f));return function(r){for(var q=
[],m=0;m<n.length;m++)q[m]=n[m].install(r);return new d(q)}}var p=new c(l,f);return function(r){return new e(p.install(r))}};t.wire=b;t.default=b})},"esri/layers/vectorTiles/core/accessorSupport/extensions/computedProperty":function(){define("require exports dojo/has ../../Logger ../utils ../wire".split(" "),function(g,t,a,b,c,k){Object.defineProperty(t,"__esModule",{value:!0});b.getLogger("esri.core.accessorSupport.extensions.computedProperty");t.ComputedPropertyExtension={processClassPropertyMetadata:function(h,
d,e,l){d.dependsOn&&(e=void 0,e=d.dependsOn.slice())&&(d.wire=k.create(e,function(f){return c.getProperties(f).propertyInvalidated(h)}))},instanceCreated:function(h,d,e){for(var l=0;l<e.length;l++){var f=d[e[l]];f.wire&&f.wire(h)}}};t.default=t.ComputedPropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty":function(){define("require exports ./serializableProperty/originAliases ./serializableProperty/reader ./serializableProperty/shorthands ./serializableProperty/writer".split(" "),
function(g,t,a,b,c,k){function h(d,e,l){var f=d&&d.json;d&&d.json&&d.json.origins&&l&&(d=d.json.origins[l.origin])&&e in d&&(f=d);return f}Object.defineProperty(t,"__esModule",{value:!0});t.originSpecificReadPropertyDefinition=function(d,e){return h(d,"read",e)};t.originSpecificWritePropertyDefinition=function(d,e){return h(d,"write",e)};t.SerializablePropertyExtension={processPrototypePropertyMetadata:function(d,e,l,f){if(c.process(e)){a.process(e);l=e.type;for(f=0;Array.isArray(l);)l=l[0],f++;if(e.json.origins)for(var n in e.json.origins){var u=
e.json.origins[n];b.create(l,f,d,u);k.create(l,f,d,u)}b.create(l,f,d,e.json);k.create(l,f,d,e.json)}}};t.default=t.SerializablePropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/originAliases":function(){define(["require","exports"],function(g,t){Object.defineProperty(t,"__esModule",{value:!0});t.process=function(a){if(a.json&&a.json.origins){var b=a.json.origins,c={"web-document":["web-scene","web-map"]};a=function(h){if(b[h]){var d=b[h];c[h].forEach(function(e){b[e]=
d});delete b[h]}};for(var k in c)a(k)}}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/reader":function(){define(["require","exports","../../../object","./type"],function(g,t,a,b){function c(n,u,p,r){if(1<u)return d(n,u);if(1===u)return e(n);if(l(n)){var q=e(n.prototype.itemType.Type);return function(m,v,x){return(m=q(m,v,x))?new n(m):m}}return k(n)}function k(n){return n.prototype.read?function(u,p,r){return null==u?u:(new n).read(u,r)}:n.fromJSON}function h(n,u,
p,r){return 0!==r&&Array.isArray(u)?u.map(function(q){return h(n,q,p,r-1)}):n(u,null,p)}function d(n,u){n=k(n);var p=h.bind(null,n);return function(r,q,m){if(null==r)return r;r=p(r,m,u);q=u;for(m=r;0<q&&Array.isArray(m);)q--,m=m[0];if(void 0!==m)for(m=0;m<q;m++)r=[r];return r}}function e(n){var u=k(n);return function(p,r,q){return null==p?p:Array.isArray(p)?p.map(function(m){return u(m,null,q)}):[u(p,null,q)]}}function l(n){return b.isCollection(n)?(n=n.prototype.itemType)&&n.Type&&"function"===typeof n.Type?
f(n.Type):!1:!1}function f(n){return!!n&&(!!n.prototype.read||!!n.fromJSON||l(n))}Object.defineProperty(t,"__esModule",{value:!0});t.create=function(n,u,p,r){(!r.read||!r.read.reader&&!1!==r.read.enabled)&&f(n)&&a.setDeepValue("read.reader",c(n,u,p,r),r)}})},"esri/layers/vectorTiles/core/object":function(){define(["require","exports"],function(g,t){function a(b,c,k){for(var h=0;h<b.length;h++){var d=b[h];if(!(d in k))if(c)k[d]={};else return;k=k[d]}return k}Object.defineProperty(t,"__esModule",{value:!0});
t.getDeepValue=function(b,c){return a(b.split("."),!1,c)};t.setDeepValue=function(b,c,k){var h=b.split(".");b=h.pop();(k=a(h,!0,k))&&b&&(k[b]=c)}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/type":function(){define(["require","exports"],function(g,t){Object.defineProperty(t,"__esModule",{value:!0});t.isCollection=function(a){return!!a&&!!a.prototype.declaredClass&&0===a.prototype.declaredClass.indexOf("esri.core.Collection")}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/shorthands":function(){define(["require",
"exports"],function(g,t){function a(c){"boolean"===typeof c.read?c.read={enabled:c.read}:"function"===typeof c.read?c.read={enabled:!0,reader:c.read}:c.read&&"object"===typeof c.read&&void 0===c.read.enabled&&(c.read.enabled=!0)}function b(c){"boolean"===typeof c.write?c.write={enabled:c.write}:"function"===typeof c.write?c.write={enabled:!0,writer:c.write}:c.write&&"object"===typeof c.write&&void 0===c.write.enabled&&(c.write.enabled=!0)}Object.defineProperty(t,"__esModule",{value:!0});t.process=
function(c){c.json||(c.json={});a(c.json);b(c.json);if(c.json.origins)for(var k in c.json.origins)a(c.json.origins[k]),b(c.json.origins[k]);return!0}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/writer":function(){define(["require","exports","../../../object","./type"],function(g,t,a,b){function c(l,f,n,u){a.setDeepValue(n,k(l,u),f)}function k(l,f){return l=l&&"function"===typeof l.write?l.write({},f):l&&"function"===typeof l.toJSON?l.toJSON():"number"===typeof l?
-Infinity===l?-Number.MAX_VALUE:Infinity===l?Number.MAX_VALUE:isNaN(l)?null:l:l}function h(l,f,n,u){null===l?l=null:l&&"function"===typeof l.map?(l=l.map(function(p){return k(p,u)}),"function"===typeof l.toArray&&(l=l.toArray())):l=[k(l,u)];a.setDeepValue(n,l,f)}function d(l,f,n){return 0!==n&&Array.isArray(l)?l.map(function(u){return d(u,f,n-1)}):k(l,f)}function e(l){return function(f,n,u,p){if(null===f)f=null;else{f=d(f,p,l);p=l;for(var r=f;0<p&&Array.isArray(r);)p--,r=r[0];if(void 0!==r)for(r=
0;r<p;r++)f=[f]}a.setDeepValue(u,f,n)}}Object.defineProperty(t,"__esModule",{value:!0});t.create=function(l,f,n,u){u.write&&!u.write.writer&&!1!==u.write.enabled&&(1===f||b.isCollection(l)?u.write.writer=h:u.write.writer=1<f?e(f):c)}})},"esri/layers/vectorTiles/core/accessorSupport/PropertyOrigin":function(){define(["require","exports"],function(g,t){function a(k){switch(k){case "defaults":return c.DEFAULTS;case "service":return c.SERVICE;case "portal-item":return c.PORTAL_ITEM;case "web-scene":return c.WEB_SCENE;
case "web-map":return c.WEB_MAP;case "user":return c.USER}}function b(k){switch(k){case c.DEFAULTS:return"defaults";case c.SERVICE:return"service";case c.PORTAL_ITEM:return"portal-item";case c.WEB_SCENE:return"web-scene";case c.WEB_MAP:return"web-map";case c.USER:return"user"}}Object.defineProperty(t,"__esModule",{value:!0});var c;(function(k){k[k.DEFAULTS=0]="DEFAULTS";k[k.COMPUTED=1]="COMPUTED";k[k.SERVICE=2]="SERVICE";k[k.PORTAL_ITEM=3]="PORTAL_ITEM";k[k.WEB_SCENE=4]="WEB_SCENE";k[k.WEB_MAP=5]=
"WEB_MAP";k[k.USER=6]="USER";k[k.NUM=7]="NUM"})(c=t.OriginId||(t.OriginId={}));t.nameToId=a;t.idToName=b;t.readableNameToId=function(k){return a(k)};t.idToReadableName=function(k){return b(k)};t.writableNameToId=function(k){return a(k)};t.idToWritableName=function(k){return b(k)}})},"esri/layers/vectorTiles/core/accessorSupport/Store":function(){define(["require","exports","./PropertyOrigin"],function(g,t,a){Object.defineProperty(t,"__esModule",{value:!0});g=function(){function b(){this._values={}}
b.prototype.get=function(c){return this._values[c]};b.prototype.originOf=function(c){return a.OriginId.USER};b.prototype.keys=function(){return Object.keys(this._values)};b.prototype.set=function(c,k){this._values[c]=k};b.prototype.clear=function(c){delete this._values[c]};b.prototype.has=function(c){return c in this._values};return b}();t.default=g})},"esri/layers/vectorTiles/core/accessorSupport/introspection":function(){define("require exports ../object ./ensureType ./extensions ./metadata ./utils ./decorators/cast".split(" "),
function(g,t,a,b,c,k,h,d){Object.defineProperty(t,"__esModule",{value:!0});var e=Object.prototype.hasOwnProperty,l=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader|Writer|Caster)$/,f={Getter:"get",Setter:"set",Reader:"json.read.reader",Writer:"json.write.writer",Caster:"cast"},n=/^_(set|get)([a-zA-Z0-9]+)Attr$/;t.processPrototype=function(u){for(var p=u.declaredClass,r=u.properties||{},q=0,m=Object.getOwnPropertyNames(r);q<m.length;q++){var v=m[q],x=r[v],z=typeof x;null==x?k.setPropertyMetadata(u,v,{value:x}):
Array.isArray(x)?k.setPropertyMetadata(u,v,{type:[x[0]],value:null}):"object"===z?h.getProperties(x)||x instanceof Date?k.setPropertyMetadata(u,v,{type:x.constructor,value:x}):k.setPropertyMetadata(u,v,x):"boolean"===z?k.setPropertyMetadata(u,v,{type:Boolean,value:x}):"string"===z?k.setPropertyMetadata(u,v,{type:String,value:x}):"number"===z?k.setPropertyMetadata(u,v,{type:Number,value:x}):"function"===z&&k.setPropertyMetadata(u,v,{type:x,value:null})}q=0;for(m=Object.getOwnPropertyNames(u);q<m.length;q++){z=
m[q];x=u[z];r=v=void 0;var A=l.exec(z);if(A)v=A[1],r=f[A[2]];else if(A=n.exec(z))v=A[2][0].toLowerCase()+A[2].substr(1),r=A[1].toLowerCase();v&&r&&(v=k.getPropertyMetadata(u,v),a.setDeepValue(r,x,v))}q=0;for(m=Object.getOwnPropertyNames(k.getPropertiesMetadata(u));q<m.length;q++)if(v=m[q],x=k.getPropertyMetadata(u,v),r=x.type,z=x.types,void 0===x.value&&e.call(u,v)&&(x.value=u[v]),!x.cast&&r){v=x;x=0;for(z=r;Array.isArray(z);)z=z[0],x++;r=1===x?b.ensureArray(z):1<x?b.ensureNArray(z,x):b.ensureType(r);
v.cast=r}else!x.cast&&z&&(Array.isArray(z)?x.cast=b.ensureArrayTyped(b.ensureOneOfType(z[0])):x.cast=b.ensureOneOfType(z));c.processPrototypeMetadatas(k.getPropertiesMetadata(u),p);return k.getPropertiesMetadata(u)};t.processClass=function(u){for(var p=u.prototype,r=p.declaredClass,q=u._meta.bases,m={},v=q.length-1;0<=v;v--)h.merge(m,k.getMetadata(q[v].prototype));var x=m.properties;c.processClassMetadatas(x,r);Object.defineProperty(u,"__accessorMetadata__",{value:{properties:x,autoDestroy:!!m.autoDestroy}});
var z={};r=function(A){var C=x[A];z[A]={enumerable:!0,configurable:!0,get:function(){return this.__accessor__?this.__accessor__.get(A):C.value},set:function(D){var B=this.__accessor__;if(!B)Object.defineProperty(this,A,{enumerable:!0,configurable:!0,writable:!0,value:D});else if(!Object.isFrozen(this)){if(B.initialized&&C.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+A+"' of "+this.declaredClass);if(2===B.lifecycle&&C.constructOnly)throw new TypeError("[accessor] cannot assign to construct-only property '"+
A+"' of "+this.declaredClass);B.set(A,D)}}}};q=0;for(v=Object.getOwnPropertyNames(x);q<v.length;q++)r(v[q]);Object.defineProperties(u.prototype,z);if(m.parameters)for(u=0,r=Object.getOwnPropertyNames(m.parameters);u<r.length;u++)q=r[u],v=Object.getOwnPropertyDescriptor(p,q)||{value:p[q]},(v=d.autocastMethod(p,q,v))&&Object.defineProperty(p,q,v);return m}})},"esri/layers/vectorTiles/core/accessorSupport/ensureType":function(){define(["require","exports","../Logger"],function(g,t,a){function b(A,C){return C.isInstanceOf?
C.isInstanceOf(A):C instanceof A}function c(A){return null==A?A:new Date(A)}function k(A){return null==A?A:!!A}function h(A){return null==A?A:A.toString()}function d(A){return null==A?A:parseFloat(A)}function e(A){return null==A?A:Math.round(parseFloat(A))}function l(A){return A&&A.constructor&&void 0!==A.constructor._meta}function f(A,C){return null!=C&&A&&!b(A,C)}function n(A,C){f(A,C)&&(l(C)?x.error("Accessor#set","Assigning an instance of '"+(C.declaredClass||"unknown")+"' which is not a subclass of '"+
(A&&A.prototype&&A.prototype.declaredClass||"unknown")+"'"):C=new A(C));return C}function u(A){switch(A){case Number:return d;case z:return e;case Boolean:return k;case String:return h;case Date:return c;default:return n.bind(null,A)}}function p(A,C){var D=u(A);return 1===arguments.length?D:D(C)}function r(A,C){return 1===arguments.length?r.bind(null,A):C?Array.isArray(C)?C.map(A):[A(C)]:C}function q(A,C,D){return 0!==C&&Array.isArray(D)?D.map(function(B){return q(A,C-1,B)}):A(D)}function m(A,C,D){if(2===
arguments.length)return m.bind(null,A,C);if(!D)return D;D=q(A,C,D);for(var B=C,y=D;0<B&&Array.isArray(y);)B--,y=y[0];if(void 0!==y)for(y=0;y<B;y++)D=[D];return D}function v(A,C){if(2===arguments.length)return v(A).call(null,C);var D={},B=[],y=[],w;for(w in A.typeMap){var E=A.typeMap[w];D[w]=p(E);B.push(E&&E.prototype&&E.prototype.declaredClass||"unknown");y.push(w)}var F="string"===typeof A.key?function(H){return H[A.key]}:A.key;return function(H){if(A.base&&!f(A.base,H))return H;var M=F(H)||A.defaultKeyValue,
R=D[M];if(!R)return x.error("Accessor#set","Invalid property value, value needs to be one of '"+(B.join("', '")+"', or a plain object that can auto-cast (having .type \x3d '")+(y.join("', '")+"')")),null;if(!f(A.typeMap[M],H))return H;if("string"!==typeof A.key||l(H))return R(H);M={};for(var V in H)V!==A.key&&(M[V]=H[V]);return R(M)}}Object.defineProperty(t,"__esModule",{value:!0});var x=a.getLogger("esri.core.Accessor");t.isInstanceOf=b;t.ensureDate=c;t.ensureBoolean=k;t.ensureString=h;t.ensureNumber=
d;t.ensureInteger=e;t.isClassedType=l;t.requiresType=f;t.ensureClass=n;t.ensureType=p;t.ensureArrayTyped=r;t.ensureArray=function(A,C){return 1===arguments.length?r(p.bind(null,A)):r(p.bind(null,A),C)};t.ensureNArrayTyped=m;t.ensureNArray=function(A,C,D){return 2===arguments.length?m(p.bind(null,A),C):m(p.bind(null,A),C,D)};t.ensureOneOfType=v;var z=function(){return function(){}}();t.Integer=z;t.default=p})},"esri/layers/vectorTiles/core/accessorSupport/metadata":function(){define(["require","exports"],
function(g,t){function a(d){return null!=d.__accessorMetadata__}function b(d){return a(d)&&null!=c(d).properties}function c(d){d.__accessorMetadata__||Object.defineProperty(d,"__accessorMetadata__",{value:{},enumerable:!0,configurable:!0,writable:!0});return d.__accessorMetadata__}function k(d){d=c(d);var e=d.properties;e||(e=d.properties={});return e}function h(d,e){var l=c(d);d=l.parameters;d||(d=l.parameters={});l=d[e];l||(l=[],d[e]=l);return l}Object.defineProperty(t,"__esModule",{value:!0});
t.hasMetadata=a;t.hasPropertiesMetadata=b;t.hasPropertyMetadata=function(d,e){return b(d)&&null!=k(d)[e]};t.hasParametersMetadata=function(d,e){return a(d)&&null!=c(d).parameters&&null!=c(d).parameters[e]};t.getMetadata=c;t.getPropertiesMetadata=k;t.getPropertyMetadata=function(d,e){d=k(d);var l=d[e];l||(l=d[e]={});return l};t.setPropertyMetadata=function(d,e,l){k(d)[e]=l};t.getParametersMetadata=h;t.getParameterMetadata=function(d,e,l){var f=h(d,e)[l];f||(h(d,e)[l]=f={index:l});return f}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/cast":function(){define(["require",
"exports","../ensureType","../metadata"],function(g,t,a,b){function c(l){var f="_meta"in l?a.ensureType(l):l;return function(){for(var n=[],u=0;u<arguments.length;u++)n[u]=arguments[u];n.push(f);return"number"===typeof n[2]?h.apply(this,n):k.apply(this,n)}}function k(l,f,n,u){b.getPropertyMetadata(l,f).cast=u}function h(l,f,n,u){b.getParameterMetadata(l,f,n).cast=u}function d(l){return function(f,n,u){b.getPropertyMetadata(f,l).cast=f[n]}}Object.defineProperty(t,"__esModule",{value:!0});var e=Object.prototype.toString;
t.autocastMethod=function(l,f,n){if(b.hasParametersMetadata(l,f)){var u=b.getParametersMetadata(l,f).filter(function(r){return null!=r.cast});if(u.length){var p=n.value;n.value=function(){for(var r=[],q=0;q<arguments.length;q++)r[q]=arguments[q];for(q=0;q<u.length;q++){var m=u[q];r[m.index]=m.cast(r[m.index])}return p.apply(this,r)};return n}}};t.cast=function(){for(var l=[],f=0;f<arguments.length;f++)l[f]=arguments[f];if(3!==l.length||"string"!==typeof l[1]){if(1===l.length&&"[object Function]"===
e.call(l[0]))return c(l[0]);if(1===l.length&&"string"===typeof l[0])return d(l[0])}}})},"esri/layers/vectorTiles/core/accessorSupport/watch":function(){define("require exports ../ArrayPool ../lang ../ObjectPool ../scheduling ./get ./utils ./wire".split(" "),function(g,t,a,b,c,k,h,d,e){function l(C){v.has(C)?x.splice(x.indexOf(C),1):v.add(C);x.push(C);z||(z=k.schedule(n))}function f(C){if(!C.removed){var D=C.callback,B=C.path,y=C.oldValue,w=C.target,E=h.valueOf(w,C.propertyPath,!0);b.equals(y,E)||
(C.oldValue=E,D.call(w,E,y,B,w))}}function n(){if(z){z=null;var C=x;x=m.acquire();v.clear();for(var D=m.acquire(),B=0;B<C.length;B++){var y=C[B];f(y);y.removed&&D.push(y)}for(B=0;B<x.length;B++)y=x[B],y.removed&&(D.push(y),v.delete(y),x.splice(B,1),--B);for(B=0;B<D.length;B++)q.pool.release(D[B]);m.release(C);m.release(D);A.forEach(function(w){return w()})}}function u(C,D,B){var y=d.parse(C,D,B,function(w,E,F){var H=h.valueOf(w,E,!0),M,R=e.wire(w,E,function(V,da){V.__accessor__.destroyed?y.remove():
(M||(M=q.pool.acquire(V,da,H,F),H=null),l(M))});return{remove:d.once(function(){R.remove();M&&(M.removed=!0,l(M),M=null);y=R=H=null})}});return y}function p(C,D,B){var y=d.parse(C,D,B,function(w,E,F){var H=h.valueOf(w,E,!0),M=!1;return e.wire(w,E,function(R,V){if(R.__accessor__.destroyed)y.remove();else if(!M){M=!0;var da=h.valueOf(R,V,!0);b.equals(H,da)||F.call(R,da,H,V,R);H=h.valueOf(R,V,!0);M=!1}})});return y}function r(C,D,B,y){void 0===y&&(y=!1);return!C.__accessor__||C.__accessor__.destroyed?
{remove:function(){}}:y?p(C,D,B):u(C,D,B)}Object.defineProperty(t,"__esModule",{value:!0});var q=function(){function C(D,B,y,w){this.target=D;this.path=B;this.oldValue=y;this.callback=w;this.removed=!1;this.propertyPath=d.pathToStringOrArray(B)}C.prototype.release=function(){this.target=this.path=this.propertyPath=this.callback=this.oldValue=null;this.removed=!0};C.pool=new c(C,!0);return C}(),m=new a,v=new Set,x=m.acquire(),z;t.dispatchTarget=function(C){for(var D=m.copy(x),B=0;B<D.length;B++){var y=
D[B];y.target===C&&(f(y),v.delete(y),x.splice(x.indexOf(y),1))}};t.removeTarget=function(C){for(var D=0;D<x.length;D++){var B=x[D];B.target===C&&(B.removed=!0)}};t.dispatch=n;var A=new Set;t.afterDispatch=function(C){A.add(C);return{remove:function(){A.delete(C)}}};t.watch=r;t.isValueInUse=function(C){return x.some(function(D){return D.oldValue===C})};t.default=r})},"esri/layers/vectorTiles/core/ArrayPool":function(){define(["require","exports","./ObjectPool"],function(g,t,a){function b(h){h.length=
0}var c=Array.prototype.splice;g=function(){function h(d,e){void 0===d&&(d=50);void 0===e&&(e=50);this._pool=new a(Array,!1,b,e,d)}h.prototype.acquire=function(){return this._pool.acquire()};h.prototype.copy=function(d){var e=this.acquire();d.unshift(0,0);c.apply(e,d);d.splice(0,2);return e};h.prototype.release=function(d){this._pool.release(d)};h.acquire=function(){return k.acquire()};h.copy=function(d){return k.copy(d)};h.release=function(d){return k.release(d)};return h}();var k=new g(100);return g})},
"esri/layers/vectorTiles/core/ObjectPool":function(){define(["require","exports"],function(g,t){var a=function(){return function(){}}();return function(){function b(c,k,h,d,e){void 0===d&&(d=1);void 0===e&&(e=0);this.classConstructor=c;this.acquireFunctionOrWithConstructor=k;this.releaseFunction=h;this.growthSize=d;!0===k?this.acquireFunction=this._constructorAcquireFunction:"function"===typeof k&&(this.acquireFunction=k);this._pool=Array(e);this._set=new Set;this._initialSize=e;for(c=0;c<e;c++)this._pool[c]=
new this.classConstructor;this.growthSize=Math.max(d,1)}b.prototype.acquire=function(){for(var c=[],k=0;k<arguments.length;k++)c[k]=arguments[k];k=this.classConstructor||a;if(0===this._pool.length)for(var h=this.growthSize,d=0;d<h;d++)this._pool[d]=new k;k=this._pool.shift();this.acquireFunction?this.acquireFunction.apply(this,[k].concat(c)):k&&k.acquire&&"function"===typeof k.acquire&&k.acquire.apply(k,c);this._set.delete(k);return k};b.prototype.release=function(c){c&&!this._set.has(c)&&(this.releaseFunction?
this.releaseFunction(c):c&&c.release&&"function"===typeof c.release&&c.release(),this._pool.push(c),this._set.add(c))};b.prototype.prune=function(c){void 0===c&&(c=this._initialSize);if(!(this._pool.length<=c))for(var k;c>this._pool.length;)k=this._pool.shift(),this._set.delete(k),k.dispose&&"function"===typeof k.dispose&&k.dispose()};b.prototype._constructorAcquireFunction=function(c){for(var k=[],h=1;h<arguments.length;h++)k[h-1]=arguments[h];(d=this.classConstructor).call.apply(d,[c].concat(k));
var d};return b}()})},"esri/layers/vectorTiles/core/scheduling":function(){define(["require","exports","./nextTick","./now","./requestAnimationFrame"],function(g,t,a,b,c){function k(D){void 0===D&&(D=t.now());t.debug.rafId=null;0<z.length&&(t.debug.rafId=h());if(0<u){var B=D-u;q=Math.min(B,q);if(B<p)return}t.debug.executeFrameTasks(D)}function h(){return t.debug.requestNextFrame?t.debug.requestNextFrame(l):l()}function d(){for(var D=0;D<z.length;){var B=z[D];D++;if(B.removed){z.splice(D-1,1);for(var y=
0;y<v.length;y++){var w=v[y];if(B.phases[w]){w=A[w];var E=w.indexOf(B);-1!==E&&w.splice(E,1)}}}}}function e(){for(;x.length;){var D=x.shift();D.isActive&&(D.isActive=!1,D.callback())}t.debug.willDispatch=!1}function l(){return c(k)}Object.defineProperty(t,"__esModule",{value:!0});t.now=b;var f=function(){return function(D){this.phases=D;this.paused=!1;this.pausedAt=0;this.epoch=-1;this.dt=0;this.ticks=-1;this.removed=!1}}(),n=function(){function D(B){this.callback=B;this.isActive=!0}D.prototype.remove=
function(){this.isActive=!1};return D}(),u=-1,p=0,r=0,q=Number.POSITIVE_INFINITY,m={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0,spendInTask:0},v=["prepare","preRender","render","postRender","update"],x=[],z=[],A={prepare:[],preRender:[],render:[],postRender:[],update:[]},C=function(){function D(B){this._task=B}D.prototype.remove=function(){this._task.removed=!0};D.prototype.pause=function(){this._task.paused||(this._task.paused=!0,this._task.pausedAt=t.now())};D.prototype.resume=function(){this._task.paused&&
(this._task.paused=!1,-1!==this._task.epoch&&(this._task.epoch+=t.now()-this._task.pausedAt))};return D}();t.FrameTaskHandle=C;t.debug={frameTasks:z,rafId:null,requestNextFrame:null,willDispatch:!1,clearFrameTasks:function(D){void 0===D&&(D=!1);for(var B=0;B<z.length;B++)z[B].removed=!0;D&&d()},dispatch:e,executeFrameTasks:function(D){void 0===D&&(D=t.now());0>u&&(u=D);var B=D-u;u=D;for(var y=0;y<z.length;y++){var w=z[y];-1!==w.epoch&&(w.dt=B)}for(y=0;y<v.length;y++){B=v[y];for(var E=A[B],F=0;F<E.length;F++)w=
E[F],w.paused||w.removed||(0===y&&w.ticks++,-1===w.epoch&&(w.epoch=D),m.time=D,m.deltaTime=w.dt,m.elapsedFrameTime=t.now()-D,m.frameDuration=0<r?r:q,m.spendInTask=D-w.epoch,w.phases[B].call(w,m))}d()}};t.schedule=function(D){D=new n(D);x.push(D);t.debug.willDispatch||(t.debug.willDispatch=!0,a(e));return D};t.addFrameTask=function(D){var B=new f(D);z.push(B);for(var y=0,w=v;y<w.length;y++){var E=w[y];D[E]&&A[E].push(B)}t.debug.rafId||(u=-1,t.debug.rafId=h());return new C(B)};t.setFrameRate=function(D){if(0>=
D)r=p=0;else{var B=1.05*q;D=Math.ceil(1E3/D/B);p=(D-1)*B;r=D*q}};t.requestNextFrame=h})},"esri/layers/vectorTiles/core/nextTick":function(){define(["require","exports","./global"],function(g,t,a){function b(){if(a.postMessage&&!a.importScripts){var k=a.onmessage,h=!0;a.onmessage=function(){h=!1};a.postMessage("","*");a.onmessage=k;return h}return!1}var c=a.MutationObserver||a.WebKitMutationObserver;return function(){if(a.process&&a.process.nextTick)var k=function(l){a.process.nextTick(l)};else if(a.Promise)k=
function(l){a.Promise.resolve().then(l)};else if(c){var h=[],d=document.createElement("div");(new c(function(){for(;0<h.length;)h.shift()()})).observe(d,{attributes:!0});k=function(l){h.push(l);d.setAttribute("queueStatus","1")}}else if(b()){var e=[];a.addEventListener("message",function(l){if(l.source===a&&"esri-nexttick-message"===l.data)for(l.stopPropagation();e.length;)e.shift()()},!0);k=function(l){e.push(l);a.postMessage("esri-nexttick-message","*")}}else k=a.setImmediate?function(l){return a.setImmediate(l)}:
function(l){return a.setTimeout(l,0)};return k}()})},"esri/layers/vectorTiles/core/global":function(){define(["require","exports"],function(g,t){return function(){if("undefined"!==typeof global)return global;if("undefined"!==typeof window)return window;if("undefined"!==typeof self)return self}()})},"esri/layers/vectorTiles/core/now":function(){define(["require","exports","./global"],function(g,t,a){return function(){var b=a.performance||{};if(b.now)return function(){return b.now()};if(b.webkitNow)return function(){return b.webkitNow()};
if(b.mozNow)return function(){return b.mozNow()};if(b.msNow)return function(){return b.msNow()};if(b.oNow)return function(){return b.oNow()};var c=b.timing&&b.timing.navigationStart?b.timing.navigationStart:Date.now();return function(){return Date.now()-c}}()})},"esri/layers/vectorTiles/core/requestAnimationFrame":function(){define(["require","exports","./global","./now"],function(g,t,a,b){var c=b();g=a.requestAnimationFrame;if(!g){t=["ms","moz","webkit","o"];for(var k=0;k<t.length&&!g;++k)g=a[t[k]+
"RequestAnimationFrame"];g||(g=function(h){var d=b(),e=Math.max(0,16-(d-c)),l=a.setTimeout(function(){h(b())},e);c=d+e;return l})}return g})},"esri/layers/vectorTiles/core/Handles":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Collection ./accessorSupport/decorators".split(" "),function(g,t,a,b,c,k,h){return function(d){function e(l){l=d.call(this)||this;l._groups=new Map;return l}a(e,d);e.prototype.destroy=function(){this.removeAll()};
Object.defineProperty(e.prototype,"size",{get:function(){var l=0;this._groups.forEach(function(f){l+=f.length});return l},enumerable:!0,configurable:!0});e.prototype.add=function(l,f){if(!this._isHandle(l)&&!Array.isArray(l)&&!k.isCollection(l))return this;var n=this._getOrCreateGroup(f);Array.isArray(l)||k.isCollection(l)?l.forEach(function(u){return n.push(u)}):n.push(l);this.notifyChange("size");return this};e.prototype.has=function(l){return this._groups.has(this._ensureGroupKey(l))};e.prototype.remove=
function(l){if(Array.isArray(l)||k.isCollection(l))return l.forEach(this.remove,this),this;if(!this.has(l))return this;for(var f=this._getGroup(l),n=0;n<f.length;n++)f[n].remove();this._deleteGroup(l);this.notifyChange("size");return this};e.prototype.removeAll=function(){this._groups.forEach(function(l){for(var f=0;f<l.length;f++)l[f].remove()});this._groups.clear();this.notifyChange("size");return this};e.prototype._isHandle=function(l){return l&&!!l.remove};e.prototype._getOrCreateGroup=function(l){if(this.has(l))return this._getGroup(l);
var f=[];this._groups.set(this._ensureGroupKey(l),f);return f};e.prototype._getGroup=function(l){return this._groups.get(this._ensureGroupKey(l))};e.prototype._deleteGroup=function(l){return this._groups.delete(this._ensureGroupKey(l))};e.prototype._ensureGroupKey=function(l){return l||"_default_"};b([h.property({readOnly:!0})],e.prototype,"size",null);return e=b([h.subclass("esri.core.Handles")],e)}(h.declared(c))})},"esri/layers/vectorTiles/core/Collection":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper dojo/aspect ./Accessor ./ArrayPool ./Evented ./lang ./ObjectPool ./scheduling ./accessorSupport/decorators ./accessorSupport/ensureType".split(" "),
function(g,t,a,b,c,k,h,d,e,l,f,n,u){function p(w){return w?w.isInstanceOf&&w.isInstanceOf(y):!1}function r(w){return w?p(w)?w.toArray():w.length?Array.prototype.slice.apply(w):[]:[]}function q(w){if(w&&w.length)return w[0]}function m(w,E,F,H){E&&E.forEach(function(M,R,V){w.push(M);m(w,F.call(H,M,R,V),F,H)})}g=function(){function w(){this.target=null;this.defaultPrevented=this.cancellable=!1}w.prototype.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};w.prototype.reset=function(E){this.defaultPrevented=
!1;this.item=E};return w}();var v=function(){},x=new l(g,!0,function(w){w.item=null;w.target=null}),z=new Set,A=new Set,C=new Set,D=new Map,B=0,y=function(w){function E(H){H=w.call(this,H)||this;H._boundDispatch=H._dispatchColChange.bind(H);H._chgListeners=[];H._notifications=null;H._timer=null;H.length=0;H._items=[];Object.defineProperty(H,"uid",{value:B++});return H}a(E,w);var F=E;E.ofType=function(H){if(!H)return F;if(D.has(H))return D.get(H);if("function"===typeof H)var M=H.prototype.declaredClass;
else if(H.base)M=H.base.prototype.declaredClass;else for(var R in H.typeMap){var V=H.typeMap[R].prototype.declaredClass;M=M?M+(" | "+V):V}M=F.createSubclass({declaredClass:"esri.core.Collection\x3c"+M+"\x3e"});R={Type:H,ensureType:"function"===typeof H?u.ensureType(H):u.ensureOneOfType(H)};Object.defineProperty(M.prototype,"itemType",{value:R});D.set(H,M);return M};E.prototype.normalizeCtorArgs=function(H){return H?Array.isArray(H)||p(H)?{items:H}:H:{}};Object.defineProperty(E.prototype,"items",{get:function(){return this._items},
set:function(H){this._emitBeforeChanges()||(this._splice.apply(this,[0,this.length].concat(r(H))),this._emitAfterChanges())},enumerable:!0,configurable:!0});E.prototype.on=function(H,M){var R;Array.isArray(H)?R=H:-1<H.indexOf(",")&&(R=H.split(/\s*,\s*/));if(R){var V=[];for(H=0;H<R.length;H++)V.push(this.on(R[H],M));V.remove=function(){for(var fa=0;fa<V.length;fa++)V[fa].remove()};return V}if("change"===H){var da=this._chgListeners,ha={removed:!1,callback:M};da.push(ha);this._notifications&&this._notifications.push({listeners:da.slice(),
items:this._items.slice(),changes:[]});return{remove:function(){this.remove=v;ha.removed=!0;da.splice(da.indexOf(ha),1)}}}return c.after(this,"on"+H,M,!0)};E.prototype.hasEventListener=function(H){return"change"===H?0<this._chgListeners.length:this.inherited(arguments)};E.prototype.add=function(H,M){if(this._emitBeforeChanges())return this;M=this.getNextIndex(M);this._splice(M,0,H);this._emitAfterChanges();return this};E.prototype.addMany=function(H,M){void 0===M&&(M=this._items.length);if(!H||!H.length||
this._emitBeforeChanges())return this;M=this.getNextIndex(M);this._splice.apply(this,[M,0].concat(r(H)));this._emitAfterChanges();return this};E.prototype.removeAll=function(){if(!this.length||this._emitBeforeChanges())return[];var H=this._splice(0,this.length)||[];this._emitAfterChanges();return H};E.prototype.clone=function(){return this._createNewInstance({items:this._items.map(e.clone)})};E.prototype.concat=function(){for(var H=[],M=0;M<arguments.length;M++)H[M]=arguments[M];H=H.map(r);return this._createNewInstance({items:(R=
this._items).concat.apply(R,H)});var R};E.prototype.drain=function(H,M){if(this.length&&!this._emitBeforeChanges()){for(var R=this._splice(0,this.length),V=R.length,da=0;da<V;da++)H.call(M,R[da],da,R);this._emitAfterChanges()}};E.prototype.every=function(H,M){return this._items.every(H,M)};E.prototype.filter=function(H,M){var R=2===arguments.length?this._items.filter(H,M):this._items.filter(H);return this._createNewInstance({items:R})};E.prototype.find=function(H,M){if("function"!==typeof H)throw new TypeError(H+
" is not a function");for(var R=this._items,V=R.length,da=0;da<V;da++){var ha=R[da];if(H.call(M,ha,da,R))return ha}};E.prototype.findIndex=function(H,M){if("function"!==typeof H)throw new TypeError(H+" is not a function");for(var R=this._items,V=R.length,da=0;da<V;da++)if(H.call(M,R[da],da,R))return da;return-1};E.prototype.flatten=function(H,M){var R=[];m(R,this,H,M);return new F(R)};E.prototype.forEach=function(H,M){for(var R=this._items,V=R.length,da=0;da<V;da++)H.call(M,R[da],da,R)};E.prototype.getItemAt=
function(H){return this._items[H]};E.prototype.getNextIndex=function(H){var M=this.length;H=null==H?M:H;0>H?H=0:H>M&&(H=M);return H};E.prototype.includes=function(H,M){void 0===M&&(M=0);return arguments.length?-1!==this._items.indexOf(H,M):!1};E.prototype.indexOf=function(H,M){void 0===M&&(M=0);return this._items.indexOf(H,M)};E.prototype.join=function(H){void 0===H&&(H=",");return this._items.join(H)};E.prototype.lastIndexOf=function(H,M){void 0===M&&(M=this.length-1);return this._items.lastIndexOf(H,
M)};E.prototype.map=function(H,M){H=this._items.map(H,M);return new F({items:H})};E.prototype.reorder=function(H,M){void 0===M&&(M=this.length-1);var R=this.indexOf(H);if(-1!==R){0>M?M=0:M>=this.length&&(M=this.length-1);if(R!==M){if(this._emitBeforeChanges())return H;this._splice(R,1);this._splice(M,0,H);this._emitAfterChanges()}return H}};E.prototype.pop=function(){if(this.length&&!this._emitBeforeChanges()){var H=q(this._splice(this.length-1,1));this._emitAfterChanges();return H}};E.prototype.push=
function(){for(var H=[],M=0;M<arguments.length;M++)H[M]=arguments[M];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[this.length,0].concat(H));this._emitAfterChanges();return this.length};E.prototype.reduce=function(H,M){var R=this._items;return 2===arguments.length?R.reduce(H,M):R.reduce(H)};E.prototype.reduceRight=function(H,M){var R=this._items;return 2===arguments.length?R.reduceRight(H,M):R.reduceRight(H)};E.prototype.remove=function(H){return this.removeAt(this.indexOf(H))};
E.prototype.removeAt=function(H){if(!(0>H||H>=this.length||this._emitBeforeChanges()))return H=q(this._splice(H,1)),this._emitAfterChanges(),H};E.prototype.removeMany=function(H){if(!H||!H.length||this._emitBeforeChanges())return[];H=p(H)?H.toArray():H;for(var M=this._items,R=[],V=H.length,da=0;da<V;da++){var ha=M.indexOf(H[da]);if(-1<ha){for(var fa=da+1,X=ha+1,ca=Math.min(H.length-fa,M.length-X),Q=0;Q<ca&&H[fa+Q]===M[X+Q];)Q++;fa=1+Q;(ha=this._splice(ha,fa))&&0<ha.length&&R.push.apply(R,ha);da+=
fa-1}}this._emitAfterChanges();return R};E.prototype.reverse=function(){if(this._emitBeforeChanges())return this;var H=this._splice(0,this.length);H&&(H.reverse(),this._splice.apply(this,[0,0].concat(H)));this._emitAfterChanges();return this};E.prototype.shift=function(){if(this.length&&!this._emitBeforeChanges()){var H=q(this._splice(0,1));this._emitAfterChanges();return H}};E.prototype.slice=function(H,M){void 0===H&&(H=0);void 0===M&&(M=this.length);return this._createNewInstance({items:this._items.slice(H,
M)})};E.prototype.some=function(H,M){return this._items.some(H,M)};E.prototype.sort=function(H){if(!this.length||this._emitBeforeChanges())return this;var M=this._splice(0,this.length);arguments.length?M.sort(H):M.sort();this._splice.apply(this,[0,0].concat(M));return this};E.prototype.splice=function(H,M){for(var R=[],V=2;V<arguments.length;V++)R[V-2]=arguments[V];if(this._emitBeforeChanges())return[];R=this._splice.apply(this,[H,M].concat(R))||[];this._emitAfterChanges();return R};E.prototype.toArray=
function(){return this._items.slice()};E.prototype.toJSON=function(){return this.toArray()};E.prototype.toLocaleString=function(){return this._items.toLocaleString()};E.prototype.toString=function(){return this._items.toString()};E.prototype.unshift=function(){for(var H=[],M=0;M<arguments.length;M++)H[M]=arguments[M];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[0,0].concat(H));this._emitAfterChanges();return this.length};E.prototype._createNewInstance=function(H){return new this.constructor(H)};
E.prototype._splice=function(H,M){for(var R=[],V=2;V<arguments.length;V++)R[V-2]=arguments[V];V=this._items;var da=this.constructor.prototype.itemType;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=f.schedule(this._boundDispatch));if(M){var ha=V.splice(H,M);if(this.hasEventListener("before-remove")){var fa=x.acquire();fa.target=this;fa.cancellable=
!0;for(var X=0,ca=ha.length;X<ca;X++){var Q=ha[X];fa.reset(Q);this.emit("before-remove",fa);fa.defaultPrevented&&(ha.splice(X,1),V.splice(H,0,Q),H+=1,--X,--ca)}x.release(fa)}this.length=this._items.length;if(this.hasEventListener("after-remove")){Q=x.acquire();Q.target=this;Q.cancellable=!1;ca=ha.length;for(X=0;X<ca;X++)Q.reset(ha[X]),this.emit("after-remove",Q);x.release(Q)}}if(R&&R.length){if(da){X=[];for(ca=0;ca<R.length;ca++)Q=R[ca],fa=da.ensureType(Q),null==fa&&null!=Q||X.push(fa);R=X}da=this.hasEventListener("before-add");
X=this.hasEventListener("after-add");ca=H===this.length;if(da||X){Q=x.acquire();Q.target=this;Q.cancellable=!0;fa=x.acquire();fa.target=this;fa.cancellable=!1;for(var U=0,ia=R;U<ia.length;U++){var T=ia[U];da?(Q.reset(T),this.emit("before-add",Q),Q.defaultPrevented||(ca?V.push(T):V.splice(H++,0,T),this._set("length",V.length),X&&(fa.reset(T),this.emit("after-add",fa)))):(ca?V.push(T):V.splice(H++,0,T),this._set("length",V.length),fa.reset(T),this.emit("after-add",fa))}x.release(Q)}else ca?V.push.apply(V,
R):V.splice.apply(V,[H,0].concat(R)),this._set("length",V.length)}(R&&R.length||ha&&ha.length)&&this._notifyChangeEvent(R,ha);return ha};E.prototype._emitBeforeChanges=function(){var H=!1;if(this.hasEventListener("before-changes")){var M=x.acquire();M.target=this;M.cancellable=!0;this.emit("before-changes",M);H=M.defaultPrevented;x.release(M)}return H};E.prototype._emitAfterChanges=function(){if(this.hasEventListener("after-changes")){var H=x.acquire();H.target=this;H.cancellable=!1;this.emit("after-changes",
H);x.release(H)}};E.prototype._notifyChangeEvent=function(H,M){this.hasEventListener("change")&&this._notifications[this._notifications.length-1].changes.push({added:H,removed:M})};E.prototype._dispatchColChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var H=this._notifications;this._notifications=null;for(var M=function(da){var ha=da.changes;z.clear();A.clear();C.clear();for(var fa=0;fa<ha.length;fa++){var X=ha[fa],ca=X.added;X=X.removed;if(ca)if(0===
C.size&&0===A.size)for(var Q=0,U=ca;Q<U.length;Q++)ca=U[Q],z.add(ca);else for(Q=0,U=ca;Q<U.length;Q++)ca=U[Q],A.has(ca)?(C.add(ca),A.delete(ca)):C.has(ca)||z.add(ca);if(X)if(0===C.size&&0===z.size)for(Q=0;Q<X.length;Q++)ca=X[Q],A.add(ca);else for(Q=0;Q<X.length;Q++)ca=X[Q],z.has(ca)?z.delete(ca):(C.delete(ca),A.add(ca))}var ia=h.acquire();z.forEach(function(ta){ia.push(ta)});var T=h.acquire();A.forEach(function(ta){T.push(ta)});var Y=R._items,ja=da.items,pa=h.acquire();C.forEach(function(ta){ja.indexOf(ta)!==
Y.indexOf(ta)&&pa.push(ta)});if(da.listeners&&(ia.length||T.length||pa.length))for(ha={target:R,added:ia,removed:T,moved:pa},fa=da.listeners.length,ca=0;ca<fa;ca++)X=da.listeners[ca],X.removed||X.callback.call(R,ha);h.release(ia);h.release(T);h.release(pa)},R=this,V=0;V<H.length;V++)M(H[V]);z.clear();A.clear();C.clear()}};E.isCollection=p;b([n.property()],E.prototype,"length",void 0);b([n.property()],E.prototype,"items",null);return E=F=b([n.subclass("esri.core.Collection")],E)}(n.declared(k,d));
return y})},"esri/layers/vectorTiles/core/Evented":function(){define(["require","exports","dojo/aspect","dojo/on"],function(g,t,a,b){function c(k,h,d,e){var l;Array.isArray(h)?l=h:-1<h.indexOf(",")&&(l=h.split(/\s*,\s*/));if(l){var f=[];for(h=0;h<l.length;h++)f.push(c(k,l[h],d,e));f.remove=function(){for(var n=0;n<f.length;n++)f[n].remove()};return f}return e(k,h)}return function(){function k(){}k.prototype.emit=function(h,d){if(this.hasEventListener(h))return d=d||{},d.target||(d.target=this),b.emit(this,
h,d)};k.prototype.on=function(h,d){return c(this,h,d,function(e,l){return a.after(e,"on"+l,d,!0)})};k.prototype.hasEventListener=function(h){h="on"+h;return!(!this[h]||!this[h].after)};return k}()})},"esri/layers/vectorTiles/core/accessorSupport/decorators":function(){define("require exports ./decorators/aliasOf ./decorators/autoDestroy ./decorators/cast ./decorators/declared ./decorators/property ./decorators/reader ./decorators/shared ./decorators/subclass ./decorators/writer".split(" "),function(g,
t,a,b,c,k,h,d,e,l,f){function n(u){for(var p in u)t.hasOwnProperty(p)||(t[p]=u[p])}Object.defineProperty(t,"__esModule",{value:!0});n(a);n(b);n(c);n(k);n(h);n(d);n(e);n(l);n(f)})},"esri/layers/vectorTiles/core/accessorSupport/decorators/aliasOf":function(){define(["require","exports","../metadata"],function(g,t,a){Object.defineProperty(t,"__esModule",{value:!0});t.aliasOf=function(b){return function(c,k){a.getPropertyMetadata(c,k).aliasOf=b}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/autoDestroy":function(){define(["require",
"exports","../metadata"],function(g,t,a){Object.defineProperty(t,"__esModule",{value:!0});t.autoDestroy=function(){return function(b,c,k){a.getMetadata(b).autoDestroy=!0;return b[c]}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/declared":function(){define(["require","exports"],function(g,t){Object.defineProperty(t,"__esModule",{value:!0});t.declared=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];c=function(){return this||{}};c.__bases__=[a].concat(b);return c}})},
"esri/layers/vectorTiles/core/accessorSupport/decorators/property":function(){define("require exports dojo/has ../../lang ../../Logger ../metadata".split(" "),function(g,t,a,b,c,k){Object.defineProperty(t,"__esModule",{value:!0});c.getLogger("esri.core.accessorSupport.decorators.property");t.property=function(h){void 0===h&&(h={});return function(d,e){var l=d.constructor.prototype;if(l!==Function.prototype){(d=Object.getOwnPropertyDescriptor(d,e))&&(d.get||d.set)?(h=b.clone(h),d.set&&(h.set=d.set),
d.get&&(h.get=d.get)):d&&d.hasOwnProperty("value")&&(h=b.clone(h),h.value=d.value);e=k.getPropertyMetadata(l,e);for(var f in h)l=h[f],Array.isArray(l)?e[f]=(e[f]||[]).concat(l):e[f]=l}}};t.propertyJSONMeta=function(h,d,e){h=k.getPropertyMetadata(h.constructor.prototype,e);h.json||(h.json={});h=h.json;void 0!==d&&(h.origins||(h.origins={}),h.origins[d]||(h.origins[d]={}),h=h.origins[d]);return h}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/reader":function(){define(["require","exports",
"../../object","./property"],function(g,t,a,b){Object.defineProperty(t,"__esModule",{value:!0});t.reader=function(c,k,h){if(void 0===k||Array.isArray(k)){var d=c;h=k;var e=[void 0]}else d=k,e=Array.isArray(c)?c:[c];return function(l,f,n){var u=l.constructor.prototype;e.forEach(function(p){p=b.propertyJSONMeta(l,p,d);p.read&&"object"!==typeof p.read&&(p.read={});a.setDeepValue("read.reader",u[f],p);h&&(p.read.source=(p.read.source||[]).concat(h))})}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/shared":function(){define(["require",
"exports"],function(g,t){Object.defineProperty(t,"__esModule",{value:!0});t.shared=function(a){return function(b,c){b[c]=a}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/subclass":function(){define(["require","exports","../../declare","../metadata"],function(g,t,a,b){function c(f,n){f.read&&("function"===typeof f.read?n.push(f.read):"object"===typeof f.read&&f.read.reader&&n.push(f.read.reader))}function k(f,n){f.write&&("function"===typeof f.write?n.push(f.write):"object"===typeof f.write&&
f.write.writer&&n.push(f.write.writer))}function h(f){var n=[];f=b.getPropertiesMetadata(f.prototype);if(!f)return n;for(var u in f){var p=f[u];p.cast&&n.push(p.cast);p.copy&&n.push(p.copy);if(p=p.json)if(c(p,n),k(p,n),p=p.origins)for(var r in p){var q=p[r];c(q,n);k(q,n)}}return n}function d(f){var n={values:{},descriptors:{}},u=["__bases__"],p=b.getPropertiesMetadata(f.prototype),r=h(f);Object.getOwnPropertyNames(f.prototype).filter(function(q){return-1!==u.indexOf(q)||p&&p.hasOwnProperty(q)||!l(Object.getOwnPropertyDescriptor(f.prototype,
q))&&-1!==r.indexOf(f.prototype[q])?!1:!0}).forEach(function(q){var m=Object.getOwnPropertyDescriptor(f.prototype,q);l(m)?n.descriptors[q]=m:n.values[q]=f.prototype[q]});return n}function e(f){var n=Object.getOwnPropertyNames(f),u=Object.getPrototypeOf(f.prototype).constructor,p=Object.getOwnPropertyNames(Function);p.push("__bases__");var r=Object.getOwnPropertyNames(u),q={values:{},descriptors:{}};n.filter(function(m){return-1!==p.indexOf(m)?!1:-1===r.indexOf(m)||u[m]!==f[m]?!0:!1}).forEach(function(m){var v=
Object.getOwnPropertyDescriptor(f,m);l(v)?q.descriptors[m]=v:q.values[m]=f[m]});return q}function l(f){return f&&!(!f.get&&!f.set)}Object.defineProperty(t,"__esModule",{value:!0});t.subclass=function(f){return function(n){var u=d(n),p=e(n);null!=f&&(u.values.declaredClass=f);n=a(n.__bases__,u.values);Object.defineProperties(n.prototype,u.descriptors);for(var r in p.values)n[r]=p.values[r];Object.defineProperties(n,p.descriptors);return n}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/writer":function(){define(["require",
"exports","../../object","./property"],function(g,t,a,b){Object.defineProperty(t,"__esModule",{value:!0});t.writer=function(c,k,h){if(void 0===k){var d=c;var e=[void 0]}else"string"!==typeof k?(d=c,e=[void 0],h=k):(d=k,e=Array.isArray(c)?c:[c]);return function(l,f,n){var u=l.constructor.prototype;e.forEach(function(p){p=b.propertyJSONMeta(l,p,d);p.write&&"object"!==typeof p.write&&(p.write={});h&&a.setDeepValue("write.target",h,p);a.setDeepValue("write.writer",u[f],p)})}}})},"esri/layers/vectorTiles/core/LRUMap":function(){define(["require",
"exports"],function(g,t){return function(){function a(b,c){void 0===b&&(b=0);this.sizeOfFunction=function(){return 1};this._sizeOf=0;this._cache=new Map;this._queue=[];if(0>=b)throw Error("LRU cache size must be bigger than zero!");this._maxSize=b;c&&(c.disposeFunction&&(this.disposeFunction=c.disposeFunction),c.sizeOfFunction&&(this.sizeOfFunction=c.sizeOfFunction))}Object.defineProperty(a.prototype,"length",{get:function(){return this._cache.size},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"size",{get:function(){return this._sizeOf},enumerable:!0,configurable:!0});a.prototype.clear=function(){var b=this;this._queue.length=0;this.disposeFunction&&this._cache.forEach(function(c,k){b.disposeFunction(k,c)});this._cache.clear();this._sizeOf=0};a.prototype.delete=function(b){var c=this._cache.get(b);return this._cache.delete(b)?(this._sizeOf-=this.sizeOfFunction(c),this._queue.splice(this._queue.indexOf(b),1),this.disposeFunction&&this.disposeFunction(b,c),!0):!1};a.prototype.forEach=function(b,
c){this._cache.forEach(b,c)};a.prototype.get=function(b){var c=this._cache.get(b);if(void 0!==c)return this._queue.splice(this._queue.indexOf(b),1),this._queue.unshift(b),c};a.prototype.has=function(b){return this._cache.has(b)};a.prototype.set=function(b,c){var k=this.get(b);void 0!==k?this._sizeOf-=this.sizeOfFunction(k):this._queue.unshift(b);this._sizeOf+=this.sizeOfFunction(c);this._cache.set(b,c);this._collect();return this};a.prototype._collect=function(){for(;this._queue.length&&this._sizeOf>
this._maxSize;){var b=this._queue.pop(),c=this._cache.get(b);this._cache.delete(b)&&(this._sizeOf-=this.sizeOfFunction(c),this.disposeFunction&&this.disposeFunction(b,c))}};return a}()})},"esri/layers/vectorTiles/core/watchUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/Promise"],function(g,t,a,b){function c(r,q){Array.isArray(r)?r.forEach(q):q(r)}function k(r,q,m,v,x){x=r.watch(q,function(z,A,C,D){v&&!v(z)||m.call(r,z,A,C,D)},x);c(q,function(z){var A=r.get(z);v&&v(A)&&
m.call(r,A,A,z,r)});return x}function h(r,q,m,v,x){function z(){B&&(B.remove(),B=null)}var A=!1,C=new a(z),D=new b;D.cancel=C.cancel;D.isCanceled=C.isCanceled;D.isFulfilled=C.isFulfilled;D.isRejected=C.isRejected;D.isResolved=C.isResolved;D.then=C.then;D.remove=z;Object.freeze(D);var B=k(r,q,function(y,w,E,F){A=!0;z();m&&m.call(r,y,w,E,F);C.resolve({value:y,oldValue:w,propertyName:E,target:F})},v,x);A&&B.remove();return D}function d(r){return!!r}function e(r){return!r}function l(r){return!0===r}function f(r){return!1===
r}function n(r){return void 0!==r}function u(r){return void 0===r}function p(r,q,m,v){var x=Array.isArray(q)?q:-1<q.indexOf(",")?q.split(","):[q];q=r.watch(q,m,v);x.forEach(function(z){z=z.trim();var A=r.get(z);m.call(r,A,A,z,r)});return q}Object.defineProperty(t,"__esModule",{value:!0});t.init=p;t.watch=function(r,q,m,v){return r.watch(q,m,v)};t.once=function(r,q,m,v){return h(r,q,m,null,v)};t.when=function(r,q,m,v){return k(r,q,m,d,v)};t.whenOnce=function(r,q,m,v){return h(r,q,m,d,v)};t.whenNot=
function(r,q,m,v){return k(r,q,m,e,v)};t.whenNotOnce=function(r,q,m,v){return h(r,q,m,e,v)};t.whenTrue=function(r,q,m,v){return k(r,q,m,l,v)};t.whenTrueOnce=function(r,q,m,v){return h(r,q,m,l,v)};t.whenFalse=function(r,q,m,v){return k(r,q,m,f,v)};t.whenFalseOnce=function(r,q,m,v){return h(r,q,m,f,v)};t.whenDefined=function(r,q,m,v){return k(r,q,m,n,v)};t.whenDefinedOnce=function(r,q,m,v){return h(r,q,m,n,v)};t.whenUndefined=function(r,q,m,v){return k(r,q,m,u,v)};t.whenUndefinedOnce=function(r,q,m,
v){return h(r,q,m,u,v)};t.pausable=function(r,q,m,v){var x=!1,z=r.watch(q,function(A,C,D,B){x||m.call(r,A,C,D,B)},v);return{remove:function(){z.remove()},pause:function(){x=!0},resume:function(){x=!1}}};t.on=function(r,q,m,v,x,z,A){function C(y){var w=D[y];w&&(z&&z(w.target,y,r,m),w.handle.remove(),delete D[y])}var D={},B=p(r,q,function(y,w,E){C(E);y&&"function"===typeof y.on&&(D[E]={handle:y.on(m,v),target:y},x&&x(y,E,r,m))},A);return{remove:function(){B.remove();for(var y in D)C(y)}}}})},"esri/layers/vectorTiles/layers/support/Tilemap":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/Error ../../core/lang ../../core/promiseUtils".split(" "),
function(g,t,a,b,c,k,h){function d(e){if("vector-tile"===e.service.type)var l=e.service.url+"/tilemap/"+e.level+"/"+e.row+"/"+e.col+"/"+e.width+"/"+e.height;else l=e.service.tileServers,l=(l&&l.length?l[e.row%l.length]:e.service.url)+"/tilemap/"+e.level+"/"+e.row+"/"+e.col+"/"+e.width+"/"+e.height;(e=e.service.query)&&(l=l+"?"+e);return l}Object.defineProperty(t,"__esModule",{value:!0});g=function(){function e(){this.location={left:0,top:0,width:0,height:0};this.byteSize=40}e.prototype.getAvailability=
function(l,f){if(this._isAllAvailable)return"available";if(this._isAllUnvailable)return"unavailable";l=(l-this.location.top)*this.location.width+(f-this.location.left);f=l>>3;var n=this._tileAvailabilityBitSet;return 0>f||f>n.length?"unknown":n[f]&1<<l%8?"available":"unavailable"};e.prototype._updateFromData=function(l){for(var f=!0,n=!0,u=new Uint8Array(Math.ceil(this.location.width*this.location.height/8)),p=0,r=0;r<l.length;r++){var q=r%8;l[r]?(n=!1,u[p]|=1<<q):f=!1;7===q&&++p}this._isAllUnvailable=
n;this._isAllAvailable=f;this._isAllAvailable||this._isAllUnvailable||(this._tileAvailabilityBitSet=u,this.byteSize+=u.length)};e.fromDefinition=function(l,f){var n=l.service.request||b,u=l.row,p=l.col,r=l.width,q=l.height,m={query:{f:"json"},callbackParamName:"callback"};f=f?a({},m,f):m;return n(d(l),f).then(function(v){return v.data}).catch(function(v){if(v&&v.details&&422===v.details.httpStatus){v=[];for(var x=0,z=r*q;x<z;x++)v[x]=0;return{location:{top:u,left:p,width:r,height:q},valid:!0,data:v}}return h.reject(v)}).then(function(v){if(v.location&&
(v.location.top!==u||v.location.left!==p||v.location.width!==r||v.location.height!==q))throw new c("tilemap:location-mismatch","Tilemap response for different location than requested",{response:v,definition:{top:u,left:p,width:r,height:q}});return e.fromJSON(v)})};e.fromJSON=function(l){e.validateJSON(l);var f=new e;f.location=Object.freeze(k.clone(l.location));f._updateFromData(l.data);return Object.freeze(f)};e.validateJSON=function(l){if(!l||!l.location)throw new c("tilemap:missing-location","Location missing from tilemap response");
if(!1===l.valid)throw new c("tilemap:invalid","Tilemap response was marked as invalid");if(!l.data)throw new c("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(l.data))throw new c("tilemap:data-mismatch","Data must be an array of numbers");if(l.data.length!==l.location.width*l.location.height)throw new c("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");};return e}();t.Tilemap=g;t.tilemapDefinitionId=function(e){return e.level+"/"+
e.row+"/"+e.col+"/"+e.width+"/"+e.height};t.tilemapDefinitionUrl=d;t.default=g})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleRepository":function(){define(["require","exports","dojo/has","./StyleLayer"],function(g,t,a,b){return function(){function c(k,h){this.styleJSON=k;this.version=parseFloat(k.version);this.sprite=h?h.spriteUrl:k.sprite;this.glyphs=h?h.glyphsUrl:k.glyphs;if(a("stable-symbol-rendering")){var d=(k.layers||[]).filter(function(e){return e.layout&&e.layout["text-font"]})[0];
d&&(k.layers||[]).forEach(function(e){e.layout&&e.layout["text-font"]&&(e.layout["text-font"]=d.layout["text-font"])})}this.layers=(k.layers||[]).map(c._create);this._identifyRefLayers()}c.prototype._identifyRefLayers=function(){for(var k=[],h=[],d=0,e=0,l=this.layers;e<l.length;e++){var f=l[e];if(1===f.type){var n=f,u=f.sourceLayer;u+="|"+JSON.stringify(f.minzoom);u+="|"+JSON.stringify(f.maxzoom);u+="|"+JSON.stringify(f.filter);if(n.hasDataDrivenFill||n.hasDataDrivenOutline)u+="|"+JSON.stringify(d);
k.push({key:u,layer:f})}2===f.type&&(n=f,u=f.sourceLayer,u+="|"+JSON.stringify(f.minzoom),u+="|"+JSON.stringify(f.maxzoom),u+="|"+JSON.stringify(f.filter),u+="|"+JSON.stringify(f.layout&&f.layout["line-cap"]),u+="|"+JSON.stringify(f.layout&&f.layout["line-join"]),n.hasDataDrivenLine&&(u+="|"+JSON.stringify(d)),h.push({key:u,layer:f}));++d}this._assignRefLayers(k);this._assignRefLayers(h)};c.prototype._assignRefLayers=function(k){k.sort(function(p,r){return p.key<r.key?-1:p.key>r.key?1:0});for(var h,
d,e=k.length,l=0;l<e;l++){var f=k[l];if(f.key===h)f.layer.refLayerId=d;else if(h=f.key,d=f.layer.id,1===f.layer.type&&!f.layer.getPaintProperty("fill-outline-color"))for(var n=l+1;n<e;n++){var u=k[n];if(u.key===h){if(u.layer.getPaintProperty("fill-outline-color")){k[l]=u;k[n]=f;d=u.layer.id;break}}else break}}};c._create=function(k,h,d){h=1-1/(d.length+1)*(1+h);switch(k.type){case "background":return new b.BackgroundStyleLayer(0,k,h);case "fill":return new b.FillStyleLayer(1,k,h);case "line":return new b.LineStyleLayer(2,
k,h);case "symbol":return new b.SymbolStyleLayer(3,k,h);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":return new b.CircleStyleLayer(4,k,h)}throw Error("Unknown vector tile layer");};return c}()})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleLayer":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ./Filter ./StyleDefinition ./StyleProperty".split(" "),function(g,t,a,b,c,k,h){Object.defineProperty(t,
"__esModule",{value:!0});g=function(){function d(e,l,f){this.type=e;this.id=l.id;this.source=l.source;this.sourceLayer=l["source-layer"];this.minzoom=l.minzoom;this.maxzoom=l.maxzoom;this.filter=l.filter;this.layout=l.layout;this.paint=l.paint;this.z=f;switch(e){case 0:this._layoutDefinition=k.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=k.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=k.StyleDefinition.fillLayoutDefinition;this._paintDefinition=
k.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=k.StyleDefinition.lineLayoutDefinition;this._paintDefinition=k.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=k.StyleDefinition.symbolLayoutDefinition;this._paintDefinition=k.StyleDefinition.symbolPaintDefinition;break;case 4:this._layoutDefinition=k.StyleDefinition.circleLayoutDefinition,this._paintDefinition=k.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout);
this._paintProperties=this._parsePaint(this.paint)}d.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=c.createFilter(this.filter)};d.prototype.getLayoutProperty=function(e){var l=this._layoutProperties;if(l)return l[e]};d.prototype.getPaintProperty=function(e){var l=this._paintProperties;if(l)return l[e]};d.prototype.getLayoutValue=function(e,l,f){var n,u=this._layoutProperties;u&&(u=u[e])&&(n=u.getValue(l,f));e=this._layoutDefinition[e];
void 0===n&&(n=e["default"]);"enum"===e.type&&(n=e.values.indexOf(n));return n};d.prototype.getPaintValue=function(e,l,f){var n,u=this._paintProperties;u&&(u=u[e])&&(n=u.getValue(l,f));e=this._paintDefinition[e];void 0===n&&(n=e["default"]);"enum"===e.type&&(n=e.values.indexOf(n));return n};d.prototype._parseLayout=function(e){var l={},f;for(f in e){var n=this._layoutDefinition[f];n&&(l[f]=new h(f,n,e[f]))}return l};d.prototype._parsePaint=function(e){var l={},f;for(f in e){var n=this._paintDefinition[f];
n&&(l[f]=new h(f,n,e[f]))}return l};return d}();t.StyleLayer=g;b=function(d){function e(l,f,n){return d.call(this,l,f,n)||this}a(e,d);return e}(g);t.BackgroundStyleLayer=b;b=function(d){function e(l,f,n){l=d.call(this,l,f,n)||this;f=l.getPaintProperty("fill-color");l.hasDataDrivenColor=f?f.isDataDriven:!1;f=l.getPaintProperty("fill-opacity");l.hasDataDrivenOpacity=f?f.isDataDriven:!1;l.hasDataDrivenFill=l.hasDataDrivenColor||l.hasDataDrivenOpacity;f=l.getPaintProperty("fill-outline-color");l.outlineUsesFillColor=
!f;l.hasDataDrivenOutlineColor=f?f.isDataDriven:!1;l.hasDataDrivenOutline=(f?l.hasDataDrivenOutlineColor:l.hasDataDrivenColor)||l.hasDataDrivenOpacity;return l}a(e,d);return e}(g);t.FillStyleLayer=b;b=function(d){function e(l,f,n){l=d.call(this,l,f,n)||this;f=l.getPaintProperty("line-color");l.hasDataDrivenColor=f?f.isDataDriven:!1;f=l.getPaintProperty("line-opacity");l.hasDataDrivenOpacity=f?f.isDataDriven:!1;f=l.getPaintProperty("line-width");l.hasDataDrivenWidth=f?f.isDataDriven:!1;l.hasDataDrivenLine=
l.hasDataDrivenColor||l.hasDataDrivenOpacity||l.hasDataDrivenWidth;return l}a(e,d);return e}(g);t.LineStyleLayer=b;b=function(d){function e(l,f,n){l=d.call(this,l,f,n)||this;f=l.getPaintProperty("icon-color");l.hasDataDrivenIconColor=f?f.isDataDriven:!1;f=l.getPaintProperty("icon-opacity");l.hasDataDrivenIconOpacity=f?f.isDataDriven:!1;f=l.getLayoutProperty("icon-size");l.hasDataDrivenIconSize=f?f.isDataDriven:!1;l.hasDataDrivenIcon=l.hasDataDrivenIconColor||l.hasDataDrivenIconOpacity||l.hasDataDrivenIconSize;
f=l.getPaintProperty("text-color");l.hasDataDrivenTextColor=f?f.isDataDriven:!1;f=l.getPaintProperty("text-opacity");l.hasDataDrivenTextOpacity=f?f.isDataDriven:!1;f=l.getLayoutProperty("text-size");l.hasDataDrivenTextSize=f?f.isDataDriven:!1;l.hasDataDrivenText=l.hasDataDrivenTextColor||l.hasDataDrivenTextOpacity||l.hasDataDrivenTextSize;return l}a(e,d);return e}(g);t.SymbolStyleLayer=b;g=function(d){function e(l,f,n){l=d.call(this,l,f,n)||this;f=l.getPaintProperty("circle-radius");l.hasDataDrivenRadius=
f?f.isDataDriven:!1;f=l.getPaintProperty("circle-color");l.hasDataDrivenColor=f?f.isDataDriven:!1;f=l.getPaintProperty("circle-opacity");l.hasDataDrivenOpacity=f?f.isDataDriven:!1;f=l.getPaintProperty("circle-stroke-width");l.hasDataDrivenStrokeWidth=f?f.isDataDriven:!1;f=l.getPaintProperty("circle-stroke-color");l.hasDataDrivenStrokeColor=f?f.isDataDriven:!1;f=l.getPaintProperty("circle-stroke-opacity");l.hasDataDrivenStrokeOpacity=f?f.isDataDriven:!1;f=l.getPaintProperty("circle-blur");l.hasDataDrivenBlur=
f?f.isDataDriven:!1;return l}a(e,d);return e}(g);t.CircleStyleLayer=g;g=function(){return function(d,e,l){this.cap=d.getLayoutValue("line-cap",e,l);this.join=d.getLayoutValue("line-join",e,l);this.miterLimit=d.getLayoutValue("line-miter-limit",e,l);this.roundLimit=d.getLayoutValue("line-round-limit",e,l)}}();t.LineLayout=g;g=function(){return function(d,e,l,f){this.allowOverlap=d.getLayoutValue("icon-allow-overlap",e,f);this.ignorePlacement=d.getLayoutValue("icon-ignore-placement",e,f);this.optional=
d.getLayoutValue("icon-optional",e,f);this.rotationAlignment=d.getLayoutValue("icon-rotation-alignment",e,f);this.size=d.getLayoutValue("icon-size",e,f);this.rotate=d.getLayoutValue("icon-rotate",e,f);this.padding=d.getLayoutValue("icon-padding",e,f);this.keepUpright=d.getLayoutValue("icon-keep-upright",e,f);this.offset=d.getLayoutValue("icon-offset",e,f);2===this.rotationAlignment&&(this.rotationAlignment=l?0:1)}}();t.IconLayout=g;g=function(){return function(d,e,l,f){this.allowOverlap=d.getLayoutValue("text-allow-overlap",
e,f);this.ignorePlacement=d.getLayoutValue("text-ignore-placement",e,f);this.optional=d.getLayoutValue("text-optional",e,f);this.rotationAlignment=d.getLayoutValue("text-rotation-alignment",e,f);this.fontArray=d.getLayoutValue("text-font",e,f);this.maxWidth=d.getLayoutValue("text-max-width",e,f);this.lineHeight=d.getLayoutValue("text-line-height",e,f);this.letterSpacing=d.getLayoutValue("text-letter-spacing",e,f);this.justify=d.getLayoutValue("text-justify",e,f);this.anchor=d.getLayoutValue("text-anchor",
e,f);this.maxAngle=d.getLayoutValue("text-max-angle",e,f);this.size=d.getLayoutValue("text-size",e,f);this.rotate=d.getLayoutValue("text-rotate",e,f);this.padding=d.getLayoutValue("text-padding",e,f);this.keepUpright=d.getLayoutValue("text-keep-upright",e,f);this.transform=d.getLayoutValue("text-transform",e,f);this.offset=d.getLayoutValue("text-offset",e,f);2===this.rotationAlignment&&(this.rotationAlignment=l?0:1)}}();t.TextLayout=g})},"esri/layers/vectorTiles/views/vectorTiles/style/Filter":function(){define(["require",
"exports"],function(g,t){return function(){function a(b,c,k){this._op=b;"$type"===c?(this._val=k instanceof Array?k.map(function(h){return a._types.indexOf(h)}):a._types.indexOf(k),this._op+=11):(this._key=c,this._val=k)}a.prototype.filter=function(b){switch(this._op){case 0:return this._val;case 1:return b.values[this._key]===this._val;case 2:return b.values[this._key]!==this._val;case 3:return b.values[this._key]<this._val;case 4:return b.values[this._key]>this._val;case 5:return b.values[this._key]<=
this._val;case 6:return b.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(b.values[this._key]);case 8:return-1===this._val.indexOf(b.values[this._key]);case 9:for(var c=0,k=this._val;c<k.length;c++){var h=k[c];if(h.filter(b))return!0}return!1;case 10:c=0;for(k=this._val;c<k.length;c++)if(h=k[c],!h.filter(b))return!1;return!0;case 11:c=0;for(k=this._val;c<k.length;c++)if(h=k[c],h.filter(b))return!1;return!0;case 12:return b.type===this._val;case 13:return b.type!==this._val;case 14:return b.type<
this._val;case 15:return b.type>this._val;case 16:return b.type>=this._val;case 17:return b.type<=this._val;case 18:return-1!==this._val.indexOf(b.type);case 19:return-1===this._val.indexOf(b.type);case 20:return void 0!==b.values[this._key];case 21:return void 0===b.values[this._key]}};a.createFilter=function(b){if(!b)return new a(0,void 0,!0);var c=b[0];if(1>=b.length)return new a(0,void 0,"any"!==c);switch(c){case "\x3d\x3d":return new a(1,b[1],b[2]);case "!\x3d":return new a(2,b[1],b[2]);case "\x3e":return new a(4,
b[1],b[2]);case "\x3c":return new a(3,b[1],b[2]);case "\x3e\x3d":return new a(6,b[1],b[2]);case "\x3c\x3d":return new a(5,b[1],b[2]);case "in":return new a(7,b[1],b.slice(2));case "!in":return new a(8,b[1],b.slice(2));case "any":return new a(9,void 0,b.slice(1).map(a.createFilter.bind(this)));case "all":return new a(10,void 0,b.slice(1).map(a.createFilter.bind(this)));case "none":return new a(11,void 0,b.slice(1).map(a.createFilter.bind(this)));case "has":return new a(20,b[1],void 0);case "!has":return new a(21,
b[1],void 0);default:throw Error("invalid operator: "+c);}};a._types=["Unknown","Point","LineString","Polygon"];return a}()})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(g,t){Object.defineProperty(t,"__esModule",{value:!0});g=function(){function a(){}a.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};a.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};
a.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"line-cap":{type:"enum",values:["butt","round","square"],default:"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],default:"miter"},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}};a.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"symbol-placement":{type:"enum",values:["point","line"],default:"point"},
"symbol-spacing":{type:"number",minimum:1,default:250},"symbol-avoid-edges":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean",default:!1},"icon-ignore-placement":{type:"boolean",default:!1},"icon-optional":{type:"boolean",default:!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"icon-size":{type:"number",minimum:0,default:1},"icon-rotate":{type:"number",default:0},"icon-padding":{type:"number",minimum:0,default:2},
"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,default:16},"text-max-width":{type:"number",minimum:0,default:10},"text-line-height":{type:"number",default:1.2},"text-letter-spacing":{type:"number",
default:0},"text-justify":{type:"enum",values:["left","center","right"],default:"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),default:"center"},"text-max-angle":{type:"number",minimum:0,default:45},"text-rotate":{type:"number",default:0},"text-padding":{type:"number",minimum:0,default:2},"text-keep-upright":{type:"boolean",default:!0},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:"none"},
"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-allow-overlap":{type:"boolean",default:!1},"text-ignore-placement":{type:"boolean",default:!1},"text-optional":{type:"boolean",default:!1}};a.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};a.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-color":{type:"color",default:[0,0,0,1]},"background-pattern":{type:"string"}};a.fillPaintDefinition=
{"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"fill-pattern":{type:"string"}};a.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-color":{type:"color",default:[0,
0,0,1]},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"line-width":{type:"number",minimum:0,default:1},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-blur":{type:"number",minimum:0,default:0},"line-dasharray":{type:"array",value:"number",default:[]},"line-pattern":{type:"string"}};a.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,
maximum:1,default:1},"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-color":{type:"color",
default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-halo-blur":{type:"number",minimum:0,default:0},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"}};a.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",
minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}};a.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-color":{type:"color",default:[0,0,0,1]},"circle-blur":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",
length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1}};return a}();t.StyleDefinition=g})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleProperty":function(){define(["require","exports","../../../Color","../GeometryUtils"],function(g,t,a,b){return function(){function c(k,
h,d){this.isDataDriven=!1;switch(h.type){case "number":k=!0;break;case "color":k=!0;d=c._parseColor(d);break;case "array":k="number"===h.value;break;default:k=!1}null==d&&(d=h.default);k&&"interval"===d.type&&(k=!1);var e=d&&d.stops&&0<d.stops.length;if(e)for(var l=0,f=d.stops;l<f.length;l++){var n=f[l];n[1]=this._validate(n[1],h)}if(this.isDataDriven=d?!!d.property:!1)if(void 0!==d.default&&(d.default=this._validate(d.default,h)),e)switch(d.type){case "identity":this.getValue=this._buildIdentity(d,
h);break;case "categorical":this.getValue=this._buildCategorical(d,h);break;default:this.getValue=k?this._buildInterpolate(d,h):this._buildInterval(d,h)}else this.getValue=this._buildIdentity(d,h);else e?this.getValue=k?this._buildZoomInterpolate(d):this._buildZoomInterval(d):(d=this._validate(d,h),this.getValue=this._buildSimple(d))}c.prototype._validate=function(k,h){if("number"===h.type){if(k<h.minimum)return h.minimum;if(k>h.maximum)return h.maximum}return k};c.prototype._buildSimple=function(k){return function(){return k}};
c.prototype._buildIdentity=function(k,h){var d=this;return function(e,l){if(l){var f=l.values[k.property];"color"===h.type&&(f=c._parseColor(f))}void 0===f&&(f=k.default);return void 0!==f?d._validate(f,h):h.default}};c.prototype._buildCategorical=function(k,h){var d=this;return function(e,l){var f;l&&(f=l.values[k.property]);f=d._categorical(f,k.stops);return void 0!==f?f:void 0!==k.default?k.default:h.default}};c.prototype._buildInterval=function(k,h){var d=this;return function(e,l){var f;l&&(f=
l.values[k.property]);return"number"===typeof f?d._interval(f,k.stops):void 0!==k.default?k.default:h.default}};c.prototype._buildInterpolate=function(k,h){var d=this;return function(e,l){var f;l&&(f=l.values[k.property]);return"number"===typeof f?d._interpolate(f,k.stops,k.base||1):void 0!==k.default?k.default:h.default}};c.prototype._buildZoomInterpolate=function(k){var h=this;return function(d){return h._interpolate(d,k.stops,k.base||1)}};c.prototype._buildZoomInterval=function(k){var h=this;return function(d){return h._interval(d,
k.stops)}};c.prototype._categorical=function(k,h){for(var d=h.length,e=0;e<d;e++)if(h[e][0]===k)return h[e][1]};c.prototype._interval=function(k,h){for(var d=h.length,e=0,l=0;l<d;l++)if(h[l][0]<=k)e=l;else break;return h[e][1]};c.prototype._interpolate=function(k,h,d){for(var e,l,f=h.length,n=0;n<f;n++){var u=h[n];if(u[0]<=k)e=u;else{l=u;break}}if(e&&l){n=l[0]-e[0];k-=e[0];d=1===d?k/n:(Math.pow(d,k)-1)/(Math.pow(d,n)-1);if(Array.isArray(e[1])){e=e[1];l=l[1];k=[];for(n=0;n<e.length;n++)k.push(b.interpolate(e[n],
l[n],d));return k}return b.interpolate(e[1],l[1],d)}if(e)return e[1];if(l)return l[1]};c._isEmpty=function(k){for(var h in k)if(k.hasOwnProperty(h))return!1;return!0};c._parseColor=function(k){if(Array.isArray(k))return k;if("string"===typeof k){if(k=new a(k),!this._isEmpty(k))return a.toUnitRGBA(k)}else return k&&k.default&&(k.default=c._parseColor(k.default)),k&&k.stops&&(k.stops=k.stops.map(function(h){return[h[0],c._parseColor(h[1])]})),k};return c}()})},"esri/layers/vectorTiles/Color":function(){define(["./core/declare",
"./core/accessorSupport/ensureType","dojo/colors"],function(g,t,a){function b(h){return Math.max(0,Math.min(t.ensureInteger(h),255))}var c=g([a],{declaredClass:"esri.Color",toJSON:function(){return[b(this.r),b(this.g),b(this.b),1<this.a?this.a:b(255*this.a)]},clone:function(){return new c(this.toRgba())}});c.toJSON=function(h){return h&&[b(h.r),b(h.g),b(h.b),1<h.a?h.a:b(255*h.a)]};c.fromJSON=function(h){return h&&new c([h[0],h[1],h[2],h[3]/255])};c.toUnitRGB=function(h){return[h.r/255,h.g/255,h.b/
255]};c.toUnitRGBA=function(h){return[h.r/255,h.g/255,h.b/255,null!=h.a?h.a:1]};var k="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(g=0;g<k.length;g++)c[k[g]]=a[k[g]];c.named.rebeccapurple=[102,51,153];return c})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(g,t,a,b){var c={};t.setObject("dojo.colors",c);var k=function(d,e,l){0>l&&++l;1<l&&--l;var f=6*l;return 1>f?d+(e-d)*f:1>2*l?e:2>3*l?d+(e-d)*(2/3-l)*6:d};g.colorFromRgb=
a.fromRgb=function(d,e){var l=d.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(l){d=l[2].split(/\s*,\s*/);var f=d.length;l=l[1];if("rgb"==l&&3==f||"rgba"==l&&4==f)return l=d[0],"%"==l.charAt(l.length-1)?(l=b.map(d,function(p){return 2.56*parseFloat(p)}),4==f&&(l[3]=d[3]),a.fromArray(l,e)):a.fromArray(d,e);if("hsl"==l&&3==f||"hsla"==l&&4==f){l=(parseFloat(d[0])%360+360)%360/360;var n=parseFloat(d[1])/100,u=parseFloat(d[2])/100;n=.5>=u?u*(n+1):u+n-u*n;u=2*u-n;l=[256*k(u,n,l+1/3),256*k(u,
n,l),256*k(u,n,l-1/3),1];4==f&&(l[3]=d[3]);return a.fromArray(l,e)}}return null};var h=function(d,e,l){d=Number(d);return isNaN(d)?l:d<e?e:d>l?l:d};a.prototype.sanitize=function(){this.r=Math.round(h(this.r,0,255));this.g=Math.round(h(this.g,0,255));this.b=Math.round(h(this.b,0,255));this.a=h(this.a,0,1);return this};c.makeGrey=a.makeGrey=function(d,e){return a.fromArray([d,d,d,e])};t.mixin(a.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,
245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,
107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],
goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,
160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,
25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,
69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return a})},"esri/layers/vectorTiles/views/vectorTiles/GeometryUtils":function(){define(["require",
"exports"],function(g,t){function a(c,k){c%=k;return 0<=c?c:c+k}Object.defineProperty(t,"__esModule",{value:!0});t.C_INFINITY=Number.POSITIVE_INFINITY;t.C_PI=Math.PI;t.C_2PI=2*t.C_PI;t.C_PI_BY_2=t.C_PI/2;t.C_RAD_TO_256=128/t.C_PI;t.C_256_TO_RAD=t.C_PI/128;t.C_DEG_TO_256=256/360;t.C_DEG_TO_RAD=t.C_PI/180;t.C_SQRT2=1.414213562;t.C_SQRT2_INV=1/t.C_SQRT2;var b=1/Math.LN2;t.positiveMod=a;t.radToByte=function(c){return a(c*t.C_RAD_TO_256,256)};t.degToByte=function(c){return a(c*t.C_DEG_TO_256,256)};t.log2=
function(c){return Math.log(c)*b};t.sqr=function(c){return c*c};t.clamp=function(c,k,h){return Math.min(Math.max(c,k),h)};t.interpolate=function(c,k,h){return c*(1-h)+k*h};t.between=function(c,k,h){return c>=k&&c<=h||c>=h&&c<=k}})},"esri/layers/vectorTiles/views/vectorTiles/VectorTileContainer":function(){define("require exports ../../core/tsSupport/extendsHelper dojo/has ../../core/promiseUtils ../../core/libs/gl-matrix/mat4 ../../core/libs/gl-matrix/vec3 ../2d/engine/Container ../2d/engine/webgl/enums ../2d/engine/webgl/WGLPainter ./GeometryUtils ./renderers/Renderer".split(" "),
function(g,t,a,b,c,k,h,d,e,l,f,n){return function(u){function p(){var r=u.call(this)||this;r.isInitialized=!1;r._displayWidth=0;r._displayHeight=0;r._pointToCallbacks=new Map;r._tileCoordinateScale=h.create();r._orientationVec=h.create();r._displayScale=h.create();r._orientationVec.set([0,0,1]);r._defaultTransform=k.create();return r}a(p,u);p.prototype.initialize=function(r,q,m,v){this._renderer=new n;this._renderer.initialize(r,q);this._tileInfoView=v;this._tileInfo=m;this.isInitialized=!0};p.prototype.destroy=
function(){this._renderer&&(this._renderer.dispose(),this._renderer=null)};p.prototype.hittest=function(r,q){var m=this,v=[r,q];return c.create(function(x,z){m._pointToCallbacks.set(v,{resolve:x,reject:z});m.requestRender()},function(){m._pointToCallbacks.has(v)&&m._pointToCallbacks.delete(v)})};p.prototype.prepareChildrenRenderParameters=function(r){var q=r.state;if(!q||!this._tileInfo||!this.isInitialized)return r;r.displayLevel=this._tileInfo.scaleToZoom(q.scale);r.requiredLevel=this._tileInfoView.getSmallestInfoForScale(q.scale).level;
r.renderer=this._renderer;return r};p.prototype.renderChildren=function(r){var q=this;if(0!==this.children.length&&this.isInitialized&&r&&r.state){var m=l.default.toWGLDrawPhases(r.drawPhase);if(!(0<m.length&&m[0]===e.WGLDrawPhase.LABEL)){this.sortChildren(function(A,C){return A.key.level-C.key.level});m=this.children.length;for(var v=1;v<=m;v++){var x=this.children[v-1];x.attached&&(x.stencilData.reference=v,x.stencilData.mask=255)}this._updateTilesTransform(r.state,this._tileInfoView.getSmallestInfoForScale(r.state.scale).level,
this.children);m=r.context;m.setDepthWriteEnabled(!0);this._renderer.setStateParams(r.state,r.pixelRatio,r.displayLevel);this._renderer.drawClippingMasks(m,this.children);m.setStencilWriteMask(0);m.setBlendFunctionSeparate(1,771,1,771);m.setStencilOp(7680,7680,7681);m.setDepthFunction(515);m.setBlendingEnabled(!1);m.setStencilTestEnabled(!0);m.setDepthTestEnabled(!0);m.setDepthWriteEnabled(!0);r.drawphase=0;u.prototype.renderChildren.call(this,r);m.setDepthWriteEnabled(!1);m.setBlendingEnabled(!0);
r.drawphase=1;u.prototype.renderChildren.call(this,r);r.drawphase=2;u.prototype.renderChildren.call(this,r);m.setStencilTestEnabled(!1);m.setDepthTestEnabled(!1);if(b("esri-vector-tiles-debug"))for(v=0,x=this.children;v<x.length;v++){var z=x[v];z.attached&&z.visible&&this._renderer.renderTileInfo(m,z)}0<this._pointToCallbacks.size&&(this._pointToCallbacks.forEach(function(A,C){A.resolve(q._hitTest(r,C[0],C[1]))}),this._pointToCallbacks.clear());this._renderer.needsRedraw()&&this.requestRender()}}};
p.prototype.removeAllChildren=function(){for(var r=0;r<this.children.length;r++)this.children[r].dispose();u.prototype.removeAllChildren.call(this)};p.prototype._hitTest=function(r,q,m){var v=this._tileInfoView.getClosestInfoForScale(r.state.scale).level,x=[0,0];r.state.toMap(x,[q,m]);var z=r.state.clone(),A=z.viewpoint.clone(),C=A.targetGeometry;C.x=x[0];C.y=x[1];A.targetGeometry=C;z.viewpoint=A;z.size=[3,3];this._renderer.setStateParams(z,r.pixelRatio,r.displayLevel);return(r=this._renderer.hitTest({drawPhase:0,
pixelRatio:r.pixelRatio,stationary:r.stationary,opacity:r.opacity,context:r.context,displayLevel:r.displayLevel,requiredLevel:r.requiredLevel,renderer:r.renderer,layerOpacity:r.layerOpacity,state:z,drawphase:3,painter:null},q,m,this.children,v,3,this._updateTilesTransform.bind(this)))&&0!==r.length?r[0]:null};p.prototype._updateTilesTransform=function(r,q,m){var v=1/r.width,x=1/r.height,z=[0,0];this._calculateRelativeViewProjMat(this._tileInfo.lodAt(q).resolution,r.resolution,r.rotation,this._tileInfo.size[1],
4096,r.width,r.height,this._defaultTransform);for(var A=0;A<m.length;A++){var C=m[A];r.toScreen(z,C.coords);z[1]=r.height-z[1];C.tileTransform.displayCoord[0]=2*z[0]*v-1;C.tileTransform.displayCoord[1]=2*z[1]*x-1;C.key.level===q&&4096===C.coordRange?C.tileTransform.transform.set(this._defaultTransform):this._calculateRelativeViewProjMat(this._tileInfo.lodAt(C.key.level).resolution,r.resolution,r.rotation,this._tileInfo.size[1],C.coordRange,r.width,r.height,C.tileTransform.transform)}};p.prototype._calculateRelativeViewProjMat=
function(r,q,m,v,x,z,A,C){var D=.125;512!==v&&4096!==x&&(D=v/x);r=r/q*D;this._tileCoordinateScale.set([r,r,1]);if(z!==this._displayWidth||A!==this._displayHeight)this._displayScale.set([2/z,-2/A,1]),this._displayWidth=z,this._displayHeight=A;k.identity(C);k.scale(C,C,this._tileCoordinateScale);k.rotate(C,C,-m*f.C_DEG_TO_RAD,this._orientationVec);k.scale(C,C,this._displayScale);k.transpose(C,C)};return p}(d)})},"esri/layers/vectorTiles/core/libs/gl-matrix/mat4":function(){define(["./common"],function(g){var t=
{scalar:{},SIMD:{},create:function(){var a=new g.ARRAY_TYPE(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},clone:function(a){var b=new g.ARRAY_TYPE(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=
b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a},fromValues:function(a,b,c,k,h,d,e,l,f,n,u,p,r,q,m,v){var x=new g.ARRAY_TYPE(16);x[0]=a;x[1]=b;x[2]=c;x[3]=k;x[4]=h;x[5]=d;x[6]=e;x[7]=l;x[8]=f;x[9]=n;x[10]=u;x[11]=p;x[12]=r;x[13]=q;x[14]=m;x[15]=v;return x},set:function(a,b,c,k,h,d,e,l,f,n,u,p,r,q,m,v,x){a[0]=b;a[1]=c;a[2]=k;a[3]=h;a[4]=d;a[5]=e;a[6]=l;a[7]=f;a[8]=n;a[9]=u;a[10]=p;a[11]=r;a[12]=q;a[13]=m;a[14]=v;a[15]=x;return a},
identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}};t.scalar.transpose=function(a,b){if(a===b){var c=b[1],k=b[2],h=b[3],d=b[6],e=b[7],l=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=c;a[6]=b[9];a[7]=b[13];a[8]=k;a[9]=d;a[11]=b[14];a[12]=h;a[13]=e;a[14]=l}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],
a[14]=b[11],a[15]=b[15];return a};t.SIMD.transpose=function(a,b){var c=SIMD.Float32x4.load(b,0);var k=SIMD.Float32x4.load(b,4);var h=SIMD.Float32x4.load(b,8);b=SIMD.Float32x4.load(b,12);var d=SIMD.Float32x4.shuffle(c,k,0,1,4,5);var e=SIMD.Float32x4.shuffle(h,b,0,1,4,5);var l=SIMD.Float32x4.shuffle(d,e,0,2,4,6);d=SIMD.Float32x4.shuffle(d,e,1,3,5,7);SIMD.Float32x4.store(a,0,l);SIMD.Float32x4.store(a,4,d);d=SIMD.Float32x4.shuffle(c,k,2,3,6,7);e=SIMD.Float32x4.shuffle(h,b,2,3,6,7);c=SIMD.Float32x4.shuffle(d,
e,0,2,4,6);k=SIMD.Float32x4.shuffle(d,e,1,3,5,7);SIMD.Float32x4.store(a,8,c);SIMD.Float32x4.store(a,12,k);return a};t.transpose=g.USE_SIMD?t.SIMD.transpose:t.scalar.transpose;t.scalar.invert=function(a,b){var c=b[0],k=b[1],h=b[2],d=b[3],e=b[4],l=b[5],f=b[6],n=b[7],u=b[8],p=b[9],r=b[10],q=b[11],m=b[12],v=b[13],x=b[14];b=b[15];var z=c*l-k*e,A=c*f-h*e,C=c*n-d*e,D=k*f-h*l,B=k*n-d*l,y=h*n-d*f,w=u*v-p*m,E=u*x-r*m,F=u*b-q*m,H=p*x-r*v,M=p*b-q*v,R=r*b-q*x,V=z*R-A*M+C*H+D*F-B*E+y*w;if(!V)return null;V=1/V;
a[0]=(l*R-f*M+n*H)*V;a[1]=(h*M-k*R-d*H)*V;a[2]=(v*y-x*B+b*D)*V;a[3]=(r*B-p*y-q*D)*V;a[4]=(f*F-e*R-n*E)*V;a[5]=(c*R-h*F+d*E)*V;a[6]=(x*C-m*y-b*A)*V;a[7]=(u*y-r*C+q*A)*V;a[8]=(e*M-l*F+n*w)*V;a[9]=(k*F-c*M-d*w)*V;a[10]=(m*B-v*C+b*z)*V;a[11]=(p*C-u*B-q*z)*V;a[12]=(l*E-e*H-f*w)*V;a[13]=(c*H-k*E+h*w)*V;a[14]=(v*A-m*D-x*z)*V;a[15]=(u*D-p*A+r*z)*V;return a};t.SIMD.invert=function(a,b){var c=SIMD.Float32x4.load(b,0);var k=SIMD.Float32x4.load(b,4);var h=SIMD.Float32x4.load(b,8);var d=SIMD.Float32x4.load(b,
12);b=SIMD.Float32x4.shuffle(c,k,0,1,4,5);var e=SIMD.Float32x4.shuffle(h,d,0,1,4,5);var l=SIMD.Float32x4.shuffle(b,e,0,2,4,6);e=SIMD.Float32x4.shuffle(e,b,1,3,5,7);b=SIMD.Float32x4.shuffle(c,k,2,3,6,7);var f=SIMD.Float32x4.shuffle(h,d,2,3,6,7);var n=SIMD.Float32x4.shuffle(b,f,0,2,4,6);f=SIMD.Float32x4.shuffle(f,b,1,3,5,7);b=SIMD.Float32x4.mul(n,f);b=SIMD.Float32x4.swizzle(b,1,0,3,2);c=SIMD.Float32x4.mul(e,b);k=SIMD.Float32x4.mul(l,b);b=SIMD.Float32x4.swizzle(b,2,3,0,1);c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,
b),c);k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,b),k);k=SIMD.Float32x4.swizzle(k,2,3,0,1);b=SIMD.Float32x4.mul(e,n);b=SIMD.Float32x4.swizzle(b,1,0,3,2);c=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,b),c);d=SIMD.Float32x4.mul(l,b);b=SIMD.Float32x4.swizzle(b,2,3,0,1);c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(f,b));d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,b),d);d=SIMD.Float32x4.swizzle(d,2,3,0,1);b=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,2,3,0,1),f);b=SIMD.Float32x4.swizzle(b,1,0,3,2);n=SIMD.Float32x4.swizzle(n,
2,3,0,1);c=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,b),c);h=SIMD.Float32x4.mul(l,b);b=SIMD.Float32x4.swizzle(b,2,3,0,1);c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(n,b));h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,b),h);h=SIMD.Float32x4.swizzle(h,2,3,0,1);b=SIMD.Float32x4.mul(l,e);b=SIMD.Float32x4.swizzle(b,1,0,3,2);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,b),h);d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,b),d);b=SIMD.Float32x4.swizzle(b,2,3,0,1);h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,b),h);d=SIMD.Float32x4.sub(d,
SIMD.Float32x4.mul(n,b));b=SIMD.Float32x4.mul(l,f);b=SIMD.Float32x4.swizzle(b,1,0,3,2);k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(n,b));h=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,b),h);b=SIMD.Float32x4.swizzle(b,2,3,0,1);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,b),k);h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(e,b));b=SIMD.Float32x4.mul(l,n);b=SIMD.Float32x4.swizzle(b,1,0,3,2);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,b),k);d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(e,b));b=SIMD.Float32x4.swizzle(b,2,
3,0,1);k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(f,b));d=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,b),d);l=SIMD.Float32x4.mul(l,c);l=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(l,2,3,0,1),l);l=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(l,1,0,3,2),l);b=SIMD.Float32x4.reciprocalApproximation(l);l=SIMD.Float32x4.sub(SIMD.Float32x4.add(b,b),SIMD.Float32x4.mul(l,SIMD.Float32x4.mul(b,b)));l=SIMD.Float32x4.swizzle(l,0,0,0,0);if(!l)return null;SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(l,c));SIMD.Float32x4.store(a,
4,SIMD.Float32x4.mul(l,k));SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(l,h));SIMD.Float32x4.store(a,12,SIMD.Float32x4.mul(l,d));return a};t.invert=g.USE_SIMD?t.SIMD.invert:t.scalar.invert;t.scalar.adjoint=function(a,b){var c=b[0],k=b[1],h=b[2],d=b[3],e=b[4],l=b[5],f=b[6],n=b[7],u=b[8],p=b[9],r=b[10],q=b[11],m=b[12],v=b[13],x=b[14];b=b[15];a[0]=l*(r*b-q*x)-p*(f*b-n*x)+v*(f*q-n*r);a[1]=-(k*(r*b-q*x)-p*(h*b-d*x)+v*(h*q-d*r));a[2]=k*(f*b-n*x)-l*(h*b-d*x)+v*(h*n-d*f);a[3]=-(k*(f*q-n*r)-l*(h*q-d*r)+p*(h*
n-d*f));a[4]=-(e*(r*b-q*x)-u*(f*b-n*x)+m*(f*q-n*r));a[5]=c*(r*b-q*x)-u*(h*b-d*x)+m*(h*q-d*r);a[6]=-(c*(f*b-n*x)-e*(h*b-d*x)+m*(h*n-d*f));a[7]=c*(f*q-n*r)-e*(h*q-d*r)+u*(h*n-d*f);a[8]=e*(p*b-q*v)-u*(l*b-n*v)+m*(l*q-n*p);a[9]=-(c*(p*b-q*v)-u*(k*b-d*v)+m*(k*q-d*p));a[10]=c*(l*b-n*v)-e*(k*b-d*v)+m*(k*n-d*l);a[11]=-(c*(l*q-n*p)-e*(k*q-d*p)+u*(k*n-d*l));a[12]=-(e*(p*x-r*v)-u*(l*x-f*v)+m*(l*r-f*p));a[13]=c*(p*x-r*v)-u*(k*x-h*v)+m*(k*r-h*p);a[14]=-(c*(l*x-f*v)-e*(k*x-h*v)+m*(k*f-h*l));a[15]=c*(l*r-f*p)-e*
(k*r-h*p)+u*(k*f-h*l);return a};t.SIMD.adjoint=function(a,b){var c=SIMD.Float32x4.load(b,0);var k=SIMD.Float32x4.load(b,4);var h=SIMD.Float32x4.load(b,8);var d=SIMD.Float32x4.load(b,12);var e=SIMD.Float32x4.shuffle(c,k,0,1,4,5);var l=SIMD.Float32x4.shuffle(h,d,0,1,4,5);b=SIMD.Float32x4.shuffle(e,l,0,2,4,6);l=SIMD.Float32x4.shuffle(l,e,1,3,5,7);e=SIMD.Float32x4.shuffle(c,k,2,3,6,7);k=SIMD.Float32x4.shuffle(h,d,2,3,6,7);c=SIMD.Float32x4.shuffle(e,k,0,2,4,6);k=SIMD.Float32x4.shuffle(k,e,1,3,5,7);e=SIMD.Float32x4.mul(c,
k);e=SIMD.Float32x4.swizzle(e,1,0,3,2);h=SIMD.Float32x4.mul(l,e);d=SIMD.Float32x4.mul(b,e);e=SIMD.Float32x4.swizzle(e,2,3,0,1);h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,e),h);d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,e),d);d=SIMD.Float32x4.swizzle(d,2,3,0,1);e=SIMD.Float32x4.mul(l,c);e=SIMD.Float32x4.swizzle(e,1,0,3,2);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(k,e),h);var f=SIMD.Float32x4.mul(b,e);e=SIMD.Float32x4.swizzle(e,2,3,0,1);h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(k,e));f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,
e),f);f=SIMD.Float32x4.swizzle(f,2,3,0,1);e=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,3,0,1),k);e=SIMD.Float32x4.swizzle(e,1,0,3,2);c=SIMD.Float32x4.swizzle(c,2,3,0,1);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,e),h);var n=SIMD.Float32x4.mul(b,e);e=SIMD.Float32x4.swizzle(e,2,3,0,1);h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(c,e));n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,e),n);n=SIMD.Float32x4.swizzle(n,2,3,0,1);e=SIMD.Float32x4.mul(b,l);e=SIMD.Float32x4.swizzle(e,1,0,3,2);n=SIMD.Float32x4.add(SIMD.Float32x4.mul(k,
e),n);f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,e),f);e=SIMD.Float32x4.swizzle(e,2,3,0,1);n=SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,e),n);f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(c,e));e=SIMD.Float32x4.mul(b,k);e=SIMD.Float32x4.swizzle(e,1,0,3,2);d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(c,e));n=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,e),n);e=SIMD.Float32x4.swizzle(e,2,3,0,1);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,e),d);n=SIMD.Float32x4.sub(n,SIMD.Float32x4.mul(l,e));e=SIMD.Float32x4.mul(b,c);
e=SIMD.Float32x4.swizzle(e,1,0,3,2);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(k,e),d);f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,e));e=SIMD.Float32x4.swizzle(e,2,3,0,1);d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(k,e));f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,e),f);SIMD.Float32x4.store(a,0,h);SIMD.Float32x4.store(a,4,d);SIMD.Float32x4.store(a,8,n);SIMD.Float32x4.store(a,12,f);return a};t.adjoint=g.USE_SIMD?t.SIMD.adjoint:t.scalar.adjoint;t.determinant=function(a){var b=a[0],c=a[1],k=a[2],h=a[3],d=a[4],
e=a[5],l=a[6],f=a[7],n=a[8],u=a[9],p=a[10],r=a[11],q=a[12],m=a[13],v=a[14];a=a[15];return(b*e-c*d)*(p*a-r*v)-(b*l-k*d)*(u*a-r*m)+(b*f-h*d)*(u*v-p*m)+(c*l-k*e)*(n*a-r*q)-(c*f-h*e)*(n*v-p*q)+(k*f-h*l)*(n*m-u*q)};t.SIMD.multiply=function(a,b,c){var k=SIMD.Float32x4.load(b,0),h=SIMD.Float32x4.load(b,4),d=SIMD.Float32x4.load(b,8);b=SIMD.Float32x4.load(b,12);var e=SIMD.Float32x4.load(c,0);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,0,0,0,0),k),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,
1,1,1,1),h),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,2,2,2,2),d),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,3,3,3,3),b))));SIMD.Float32x4.store(a,0,e);e=SIMD.Float32x4.load(c,4);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,0,0,0,0),k),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,1,1,1,1),h),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,2,2,2,2),d),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,3,3,3,3),b))));SIMD.Float32x4.store(a,
4,e);e=SIMD.Float32x4.load(c,8);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,0,0,0,0),k),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,1,1,1,1),h),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,2,2,2,2),d),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,3,3,3,3),b))));SIMD.Float32x4.store(a,8,e);c=SIMD.Float32x4.load(c,12);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),k),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,
1,1,1,1),h),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),d),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),b))));SIMD.Float32x4.store(a,12,k);return a};t.scalar.multiply=function(a,b,c){var k=b[0],h=b[1],d=b[2],e=b[3],l=b[4],f=b[5],n=b[6],u=b[7],p=b[8],r=b[9],q=b[10],m=b[11],v=b[12],x=b[13],z=b[14];b=b[15];var A=c[0],C=c[1],D=c[2],B=c[3];a[0]=A*k+C*l+D*p+B*v;a[1]=A*h+C*f+D*r+B*x;a[2]=A*d+C*n+D*q+B*z;a[3]=A*e+C*u+D*m+B*b;A=c[4];C=c[5];D=c[6];B=c[7];a[4]=A*k+C*l+D*p+
B*v;a[5]=A*h+C*f+D*r+B*x;a[6]=A*d+C*n+D*q+B*z;a[7]=A*e+C*u+D*m+B*b;A=c[8];C=c[9];D=c[10];B=c[11];a[8]=A*k+C*l+D*p+B*v;a[9]=A*h+C*f+D*r+B*x;a[10]=A*d+C*n+D*q+B*z;a[11]=A*e+C*u+D*m+B*b;A=c[12];C=c[13];D=c[14];B=c[15];a[12]=A*k+C*l+D*p+B*v;a[13]=A*h+C*f+D*r+B*x;a[14]=A*d+C*n+D*q+B*z;a[15]=A*e+C*u+D*m+B*b;return a};t.multiply=g.USE_SIMD?t.SIMD.multiply:t.scalar.multiply;t.mul=t.multiply;t.scalar.translate=function(a,b,c){var k=c[0],h=c[1];c=c[2];if(b===a)a[12]=b[0]*k+b[4]*h+b[8]*c+b[12],a[13]=b[1]*k+
b[5]*h+b[9]*c+b[13],a[14]=b[2]*k+b[6]*h+b[10]*c+b[14],a[15]=b[3]*k+b[7]*h+b[11]*c+b[15];else{var d=b[0];var e=b[1];var l=b[2];var f=b[3];var n=b[4];var u=b[5];var p=b[6];var r=b[7];var q=b[8];var m=b[9];var v=b[10];var x=b[11];a[0]=d;a[1]=e;a[2]=l;a[3]=f;a[4]=n;a[5]=u;a[6]=p;a[7]=r;a[8]=q;a[9]=m;a[10]=v;a[11]=x;a[12]=d*k+n*h+q*c+b[12];a[13]=e*k+u*h+m*c+b[13];a[14]=l*k+p*h+v*c+b[14];a[15]=f*k+r*h+x*c+b[15]}return a};t.SIMD.translate=function(a,b,c){var k=SIMD.Float32x4.load(b,0),h=SIMD.Float32x4.load(b,
4),d=SIMD.Float32x4.load(b,8),e=SIMD.Float32x4.load(b,12);c=SIMD.Float32x4(c[0],c[1],c[2],0);b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11]);k=SIMD.Float32x4.mul(k,SIMD.Float32x4.swizzle(c,0,0,0,0));h=SIMD.Float32x4.mul(h,SIMD.Float32x4.swizzle(c,1,1,1,1));d=SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(c,2,2,2,2));b=SIMD.Float32x4.add(k,SIMD.Float32x4.add(h,SIMD.Float32x4.add(d,e)));SIMD.Float32x4.store(a,12,b);return a};
t.translate=g.USE_SIMD?t.SIMD.translate:t.scalar.translate;t.scalar.scale=function(a,b,c){var k=c[0],h=c[1];c=c[2];a[0]=b[0]*k;a[1]=b[1]*k;a[2]=b[2]*k;a[3]=b[3]*k;a[4]=b[4]*h;a[5]=b[5]*h;a[6]=b[6]*h;a[7]=b[7]*h;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};t.SIMD.scale=function(a,b,c){c=SIMD.Float32x4(c[0],c[1],c[2],0);var k=SIMD.Float32x4.load(b,0);SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(k,SIMD.Float32x4.swizzle(c,0,0,0,0)));k=SIMD.Float32x4.load(b,
4);SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(k,SIMD.Float32x4.swizzle(c,1,1,1,1)));k=SIMD.Float32x4.load(b,8);SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(k,SIMD.Float32x4.swizzle(c,2,2,2,2)));a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};t.scale=g.USE_SIMD?t.SIMD.scale:t.scalar.scale;t.rotate=function(a,b,c,k){var h=k[0],d=k[1];k=k[2];var e=Math.sqrt(h*h+d*d+k*k);if(Math.abs(e)<g.EPSILON)return null;e=1/e;h*=e;d*=e;k*=e;var l=Math.sin(c);var f=Math.cos(c);var n=1-f;c=b[0];e=b[1];var u=
b[2];var p=b[3];var r=b[4];var q=b[5];var m=b[6];var v=b[7];var x=b[8];var z=b[9];var A=b[10];var C=b[11];var D=h*h*n+f;var B=d*h*n+k*l;var y=k*h*n-d*l;var w=h*d*n-k*l;var E=d*d*n+f;var F=k*d*n+h*l;var H=h*k*n+d*l;h=d*k*n-h*l;d=k*k*n+f;a[0]=c*D+r*B+x*y;a[1]=e*D+q*B+z*y;a[2]=u*D+m*B+A*y;a[3]=p*D+v*B+C*y;a[4]=c*w+r*E+x*F;a[5]=e*w+q*E+z*F;a[6]=u*w+m*E+A*F;a[7]=p*w+v*E+C*F;a[8]=c*H+r*h+x*d;a[9]=e*H+q*h+z*d;a[10]=u*H+m*h+A*d;a[11]=p*H+v*h+C*d;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a};
t.scalar.rotateX=function(a,b,c){var k=Math.sin(c);c=Math.cos(c);var h=b[4],d=b[5],e=b[6],l=b[7],f=b[8],n=b[9],u=b[10],p=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=h*c+f*k;a[5]=d*c+n*k;a[6]=e*c+u*k;a[7]=l*c+p*k;a[8]=f*c-h*k;a[9]=n*c-d*k;a[10]=u*c-e*k;a[11]=p*c-l*k;return a};t.SIMD.rotateX=function(a,b,c){var k=SIMD.Float32x4.splat(Math.sin(c));c=SIMD.Float32x4.splat(Math.cos(c));b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=
b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var h=SIMD.Float32x4.load(b,4);b=SIMD.Float32x4.load(b,8);SIMD.Float32x4.store(a,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(h,c),SIMD.Float32x4.mul(b,k)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,c),SIMD.Float32x4.mul(h,k)));return a};t.rotateX=g.USE_SIMD?t.SIMD.rotateX:t.scalar.rotateX;t.scalar.rotateY=function(a,b,c){var k=Math.sin(c);c=Math.cos(c);var h=b[0],d=b[1],e=b[2],l=b[3],f=b[8],n=b[9],u=b[10],p=b[11];b!==a&&(a[4]=b[4],a[5]=
b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=h*c-f*k;a[1]=d*c-n*k;a[2]=e*c-u*k;a[3]=l*c-p*k;a[8]=h*k+f*c;a[9]=d*k+n*c;a[10]=e*k+u*c;a[11]=l*k+p*c;return a};t.SIMD.rotateY=function(a,b,c){var k=SIMD.Float32x4.splat(Math.sin(c));c=SIMD.Float32x4.splat(Math.cos(c));b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var h=SIMD.Float32x4.load(b,0);b=SIMD.Float32x4.load(b,8);SIMD.Float32x4.store(a,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,
c),SIMD.Float32x4.mul(b,k)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(h,k),SIMD.Float32x4.mul(b,c)));return a};t.rotateY=g.USE_SIMD?t.SIMD.rotateY:t.scalar.rotateY;t.scalar.rotateZ=function(a,b,c){var k=Math.sin(c);c=Math.cos(c);var h=b[0],d=b[1],e=b[2],l=b[3],f=b[4],n=b[5],u=b[6],p=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=h*c+f*k;a[1]=d*c+n*k;a[2]=e*c+u*k;a[3]=l*c+p*k;a[4]=f*c-h*k;a[5]=n*c-d*k;a[6]=u*c-e*
k;a[7]=p*c-l*k;return a};t.SIMD.rotateZ=function(a,b,c){var k=SIMD.Float32x4.splat(Math.sin(c));c=SIMD.Float32x4.splat(Math.cos(c));b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var h=SIMD.Float32x4.load(b,0);b=SIMD.Float32x4.load(b,4);SIMD.Float32x4.store(a,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(h,c),SIMD.Float32x4.mul(b,k)));SIMD.Float32x4.store(a,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,c),SIMD.Float32x4.mul(h,k)));return a};t.rotateZ=g.USE_SIMD?
t.SIMD.rotateZ:t.scalar.rotateZ;t.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};t.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};t.fromRotation=function(a,b,c){var k=c[0],h=c[1];c=c[2];var d=Math.sqrt(k*k+h*h+c*c);if(Math.abs(d)<g.EPSILON)return null;d=1/d;k*=d;h*=
d;c*=d;d=Math.sin(b);b=Math.cos(b);var e=1-b;a[0]=k*k*e+b;a[1]=h*k*e+c*d;a[2]=c*k*e-h*d;a[3]=0;a[4]=k*h*e-c*d;a[5]=h*h*e+b;a[6]=c*h*e+k*d;a[7]=0;a[8]=k*c*e+h*d;a[9]=h*c*e-k*d;a[10]=c*c*e+b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};t.fromXRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=c;a[7]=0;a[8]=0;a[9]=-c;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};t.fromYRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=
0;a[2]=-c;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=c;a[9]=0;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};t.fromZRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=0;a[3]=0;a[4]=-c;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};t.fromRotationTranslation=function(a,b,c){var k=b[0],h=b[1],d=b[2],e=b[3],l=k+k,f=h+h,n=d+d;b=k*l;var u=k*f;k*=n;var p=h*f;h*=n;d*=n;l*=e;f*=e;e*=n;a[0]=1-(p+d);a[1]=u+e;a[2]=k-f;a[3]=0;a[4]=u-
e;a[5]=1-(b+d);a[6]=h+l;a[7]=0;a[8]=k+f;a[9]=h-l;a[10]=1-(b+p);a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};t.getTranslation=function(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a};t.getRotation=function(a,b){var c=b[0]+b[5]+b[10],k=0;0<c?(k=2*Math.sqrt(c+1),a[3]=.25*k,a[0]=(b[6]-b[9])/k,a[1]=(b[8]-b[2])/k,a[2]=(b[1]-b[4])/k):b[0]>b[5]&b[0]>b[10]?(k=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/k,a[0]=.25*k,a[1]=(b[1]+b[4])/k,a[2]=(b[8]+b[2])/k):b[5]>b[10]?(k=2*Math.sqrt(1+b[5]-b[0]-
b[10]),a[3]=(b[8]-b[2])/k,a[0]=(b[1]+b[4])/k,a[1]=.25*k,a[2]=(b[6]+b[9])/k):(k=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/k,a[0]=(b[8]+b[2])/k,a[1]=(b[6]+b[9])/k,a[2]=.25*k);return a};t.fromRotationTranslationScale=function(a,b,c,k){var h=b[0],d=b[1],e=b[2],l=b[3],f=h+h,n=d+d,u=e+e;b=h*f;var p=h*n;h*=u;var r=d*n;d*=u;e*=u;f*=l;n*=l;l*=u;u=k[0];var q=k[1];k=k[2];a[0]=(1-(r+e))*u;a[1]=(p+l)*u;a[2]=(h-n)*u;a[3]=0;a[4]=(p-l)*q;a[5]=(1-(b+e))*q;a[6]=(d+f)*q;a[7]=0;a[8]=(h+n)*k;a[9]=(d-f)*k;a[10]=
(1-(b+r))*k;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};t.fromRotationTranslationScaleOrigin=function(a,b,c,k,h){var d=b[0],e=b[1],l=b[2],f=b[3],n=d+d,u=e+e,p=l+l;b=d*n;var r=d*u;d*=p;var q=e*u;e*=p;l*=p;n*=f;u*=f;f*=p;p=k[0];var m=k[1];k=k[2];var v=h[0],x=h[1];h=h[2];a[0]=(1-(q+l))*p;a[1]=(r+f)*p;a[2]=(d-u)*p;a[3]=0;a[4]=(r-f)*m;a[5]=(1-(b+l))*m;a[6]=(e+n)*m;a[7]=0;a[8]=(d+u)*k;a[9]=(e-n)*k;a[10]=(1-(b+q))*k;a[11]=0;a[12]=c[0]+v-(a[0]*v+a[4]*x+a[8]*h);a[13]=c[1]+x-(a[1]*v+a[5]*x+a[9]*
h);a[14]=c[2]+h-(a[2]*v+a[6]*x+a[10]*h);a[15]=1;return a};t.fromQuat=function(a,b){var c=b[0],k=b[1],h=b[2];b=b[3];var d=c+c,e=k+k,l=h+h;c*=d;var f=k*d;k*=e;var n=h*d,u=h*e;h*=l;d*=b;e*=b;b*=l;a[0]=1-k-h;a[1]=f+b;a[2]=n-e;a[3]=0;a[4]=f-b;a[5]=1-c-h;a[6]=u+d;a[7]=0;a[8]=n+e;a[9]=u-d;a[10]=1-c-k;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};t.frustum=function(a,b,c,k,h,d,e){var l=1/(c-b),f=1/(h-k),n=1/(d-e);a[0]=2*d*l;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*d*f;a[6]=0;a[7]=0;a[8]=(c+b)*l;a[9]=(h+k)*
f;a[10]=(e+d)*n;a[11]=-1;a[12]=0;a[13]=0;a[14]=e*d*2*n;a[15]=0;return a};t.perspective=function(a,b,c,k,h){b=1/Math.tan(b/2);var d=1/(k-h);a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(h+k)*d;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*h*k*d;a[15]=0;return a};t.perspectiveFromFieldOfView=function(a,b,c,k){var h=Math.tan(b.upDegrees*Math.PI/180),d=Math.tan(b.downDegrees*Math.PI/180),e=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);var l=2/(e+b),f=2/
(h+d);a[0]=l;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=f;a[6]=0;a[7]=0;a[8]=-((e-b)*l*.5);a[9]=(h-d)*f*.5;a[10]=k/(c-k);a[11]=-1;a[12]=0;a[13]=0;a[14]=k*c/(c-k);a[15]=0;return a};t.ortho=function(a,b,c,k,h,d,e){var l=1/(b-c),f=1/(k-h),n=1/(d-e);a[0]=-2*l;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*f;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*n;a[11]=0;a[12]=(b+c)*l;a[13]=(h+k)*f;a[14]=(e+d)*n;a[15]=1;return a};t.lookAt=function(a,b,c,k){var h=b[0],d=b[1];b=b[2];var e=k[0];var l=k[1];var f=k[2];var n=c[0];k=c[1];var u=c[2];
if(Math.abs(h-n)<g.EPSILON&&Math.abs(d-k)<g.EPSILON&&Math.abs(b-u)<g.EPSILON)return t.identity(a);c=h-n;k=d-k;n=b-u;var p=1/Math.sqrt(c*c+k*k+n*n);c*=p;k*=p;n*=p;u=l*n-f*k;f=f*c-e*n;e=e*k-l*c;(p=Math.sqrt(u*u+f*f+e*e))?(p=1/p,u*=p,f*=p,e*=p):e=f=u=0;l=k*e-n*f;var r=n*u-c*e;var q=c*f-k*u;(p=Math.sqrt(l*l+r*r+q*q))?(p=1/p,l*=p,r*=p,q*=p):q=r=l=0;a[0]=u;a[1]=l;a[2]=c;a[3]=0;a[4]=f;a[5]=r;a[6]=k;a[7]=0;a[8]=e;a[9]=q;a[10]=n;a[11]=0;a[12]=-(u*h+f*d+e*b);a[13]=-(l*h+r*d+q*b);a[14]=-(c*h+k*d+n*b);a[15]=
1;return a};t.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};t.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],
2)+Math.pow(a[15],2))};t.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];a[8]=b[8]+c[8];a[9]=b[9]+c[9];a[10]=b[10]+c[10];a[11]=b[11]+c[11];a[12]=b[12]+c[12];a[13]=b[13]+c[13];a[14]=b[14]+c[14];a[15]=b[15]+c[15];return a};t.subtract=function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];a[6]=b[6]-c[6];a[7]=b[7]-c[7];a[8]=b[8]-c[8];a[9]=b[9]-c[9];a[10]=b[10]-
c[10];a[11]=b[11]-c[11];a[12]=b[12]-c[12];a[13]=b[13]-c[13];a[14]=b[14]-c[14];a[15]=b[15]-c[15];return a};t.sub=t.subtract;t.multiplyScalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12]*c;a[13]=b[13]*c;a[14]=b[14]*c;a[15]=b[15]*c;return a};t.multiplyScalarAndAdd=function(a,b,c,k){a[0]=b[0]+c[0]*k;a[1]=b[1]+c[1]*k;a[2]=b[2]+c[2]*k;a[3]=b[3]+c[3]*k;a[4]=b[4]+c[4]*k;a[5]=
b[5]+c[5]*k;a[6]=b[6]+c[6]*k;a[7]=b[7]+c[7]*k;a[8]=b[8]+c[8]*k;a[9]=b[9]+c[9]*k;a[10]=b[10]+c[10]*k;a[11]=b[11]+c[11]*k;a[12]=b[12]+c[12]*k;a[13]=b[13]+c[13]*k;a[14]=b[14]+c[14]*k;a[15]=b[15]+c[15]*k;return a};t.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};t.equals=function(a,b){var c=a[0],k=
a[1],h=a[2],d=a[3],e=a[4],l=a[5],f=a[6],n=a[7],u=a[8],p=a[9],r=a[10],q=a[11],m=a[12],v=a[13],x=a[14];a=a[15];var z=b[0],A=b[1],C=b[2],D=b[3],B=b[4],y=b[5],w=b[6],E=b[7],F=b[8],H=b[9],M=b[10],R=b[11],V=b[12],da=b[13],ha=b[14];b=b[15];return Math.abs(c-z)<=g.EPSILON*Math.max(1,Math.abs(c),Math.abs(z))&&Math.abs(k-A)<=g.EPSILON*Math.max(1,Math.abs(k),Math.abs(A))&&Math.abs(h-C)<=g.EPSILON*Math.max(1,Math.abs(h),Math.abs(C))&&Math.abs(d-D)<=g.EPSILON*Math.max(1,Math.abs(d),Math.abs(D))&&Math.abs(e-B)<=
g.EPSILON*Math.max(1,Math.abs(e),Math.abs(B))&&Math.abs(l-y)<=g.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(f-w)<=g.EPSILON*Math.max(1,Math.abs(f),Math.abs(w))&&Math.abs(n-E)<=g.EPSILON*Math.max(1,Math.abs(n),Math.abs(E))&&Math.abs(u-F)<=g.EPSILON*Math.max(1,Math.abs(u),Math.abs(F))&&Math.abs(p-H)<=g.EPSILON*Math.max(1,Math.abs(p),Math.abs(H))&&Math.abs(r-M)<=g.EPSILON*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(q-R)<=g.EPSILON*Math.max(1,Math.abs(q),Math.abs(R))&&Math.abs(m-V)<=g.EPSILON*
Math.max(1,Math.abs(m),Math.abs(V))&&Math.abs(v-da)<=g.EPSILON*Math.max(1,Math.abs(v),Math.abs(da))&&Math.abs(x-ha)<=g.EPSILON*Math.max(1,Math.abs(x),Math.abs(ha))&&Math.abs(a-b)<=g.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};return t})},"esri/layers/vectorTiles/core/libs/gl-matrix/common":function(){define([],function(){var g={EPSILON:1E-6};g.ARRAY_TYPE="undefined"!==typeof Float32Array?Float32Array:Array;g.RANDOM=Math.random;g.ENABLE_SIMD=!1;g.SIMD_AVAILABLE=g.ARRAY_TYPE===Float32Array&&"SIMD"in
this;g.USE_SIMD=g.ENABLE_SIMD&&g.SIMD_AVAILABLE;g.setMatrixArrayType=function(a){g.ARRAY_TYPE=a};var t=Math.PI/180;g.toRadian=function(a){return a*t};g.equals=function(a,b){return Math.abs(a-b)<=g.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};return g})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec3":function(){define(["./common"],function(g){var t={create:function(){var a=new g.ARRAY_TYPE(3);a[0]=0;a[1]=0;a[2]=0;return a},clone:function(a){var b=new g.ARRAY_TYPE(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];
return b},fromValues:function(a,b,c){var k=new g.ARRAY_TYPE(3);k[0]=a;k[1]=b;k[2]=c;return k},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a},set:function(a,b,c,k){a[0]=b;a[1]=c;a[2]=k;return a},add:function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];return a},subtract:function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];return a}};t.sub=t.subtract;t.multiply=function(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];a[2]=b[2]*c[2];return a};t.mul=t.multiply;t.divide=function(a,b,c){a[0]=
b[0]/c[0];a[1]=b[1]/c[1];a[2]=b[2]/c[2];return a};t.div=t.divide;t.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);return a};t.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);return a};t.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);a[2]=Math.min(b[2],c[2]);return a};t.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);a[2]=Math.max(b[2],c[2]);return a};t.round=function(a,b){a[0]=Math.round(b[0]);
a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);return a};t.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;return a};t.scaleAndAdd=function(a,b,c,k){a[0]=b[0]+c[0]*k;a[1]=b[1]+c[1]*k;a[2]=b[2]+c[2]*k;return a};t.distance=function(a,b){var c=b[0]-a[0],k=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(c*c+k*k+a*a)};t.dist=t.distance;t.squaredDistance=function(a,b){var c=b[0]-a[0],k=b[1]-a[1];a=b[2]-a[2];return c*c+k*k+a*a};t.sqrDist=t.squaredDistance;t.length=function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*
b+c*c+a*a)};t.len=t.length;t.squaredLength=function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a};t.sqrLen=t.squaredLength;t.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];return a};t.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];return a};t.normalize=function(a,b){var c=b[0],k=b[1],h=b[2];c=c*c+k*k+h*h;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c);return a};t.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};t.cross=function(a,b,c){var k=b[0],h=b[1];b=b[2];
var d=c[0],e=c[1];c=c[2];a[0]=h*c-b*e;a[1]=b*d-k*c;a[2]=k*e-h*d;return a};t.lerp=function(a,b,c,k){var h=b[0],d=b[1];b=b[2];a[0]=h+k*(c[0]-h);a[1]=d+k*(c[1]-d);a[2]=b+k*(c[2]-b);return a};t.hermite=function(a,b,c,k,h,d){var e=d*d,l=e*(2*d-3)+1,f=e*(d-2)+d,n=e*(d-1);d=e*(3-2*d);a[0]=b[0]*l+c[0]*f+k[0]*n+h[0]*d;a[1]=b[1]*l+c[1]*f+k[1]*n+h[1]*d;a[2]=b[2]*l+c[2]*f+k[2]*n+h[2]*d;return a};t.bezier=function(a,b,c,k,h,d){var e=1-d,l=e*e,f=d*d,n=l*e;l*=3*d;e*=3*f;d*=f;a[0]=b[0]*n+c[0]*l+k[0]*e+h[0]*d;a[1]=
b[1]*n+c[1]*l+k[1]*e+h[1]*d;a[2]=b[2]*n+c[2]*l+k[2]*e+h[2]*d;return a};t.random=function(a,b){b=b||1;var c=2*g.RANDOM()*Math.PI,k=2*g.RANDOM()-1,h=Math.sqrt(1-k*k)*b;a[0]=Math.cos(c)*h;a[1]=Math.sin(c)*h;a[2]=k*b;return a};t.transformMat4=function(a,b,c){var k=b[0],h=b[1];b=b[2];var d=c[3]*k+c[7]*h+c[11]*b+c[15];d=d||1;a[0]=(c[0]*k+c[4]*h+c[8]*b+c[12])/d;a[1]=(c[1]*k+c[5]*h+c[9]*b+c[13])/d;a[2]=(c[2]*k+c[6]*h+c[10]*b+c[14])/d;return a};t.transformMat3=function(a,b,c){var k=b[0],h=b[1];b=b[2];a[0]=
k*c[0]+h*c[3]+b*c[6];a[1]=k*c[1]+h*c[4]+b*c[7];a[2]=k*c[2]+h*c[5]+b*c[8];return a};t.transformQuat=function(a,b,c){var k=b[0],h=b[1],d=b[2];b=c[0];var e=c[1],l=c[2];c=c[3];var f=c*k+e*d-l*h,n=c*h+l*k-b*d,u=c*d+b*h-e*k;k=-b*k-e*h-l*d;a[0]=f*c+k*-b+n*-l-u*-e;a[1]=n*c+k*-e+u*-b-f*-l;a[2]=u*c+k*-l+f*-e-n*-b;return a};t.rotateX=function(a,b,c,k){var h=[],d=[];h[0]=b[0]-c[0];h[1]=b[1]-c[1];h[2]=b[2]-c[2];d[0]=h[0];d[1]=h[1]*Math.cos(k)-h[2]*Math.sin(k);d[2]=h[1]*Math.sin(k)+h[2]*Math.cos(k);a[0]=d[0]+c[0];
a[1]=d[1]+c[1];a[2]=d[2]+c[2];return a};t.rotateY=function(a,b,c,k){var h=[],d=[];h[0]=b[0]-c[0];h[1]=b[1]-c[1];h[2]=b[2]-c[2];d[0]=h[2]*Math.sin(k)+h[0]*Math.cos(k);d[1]=h[1];d[2]=h[2]*Math.cos(k)-h[0]*Math.sin(k);a[0]=d[0]+c[0];a[1]=d[1]+c[1];a[2]=d[2]+c[2];return a};t.rotateZ=function(a,b,c,k){var h=[],d=[];h[0]=b[0]-c[0];h[1]=b[1]-c[1];h[2]=b[2]-c[2];d[0]=h[0]*Math.cos(k)-h[1]*Math.sin(k);d[1]=h[0]*Math.sin(k)+h[1]*Math.cos(k);d[2]=h[2];a[0]=d[0]+c[0];a[1]=d[1]+c[1];a[2]=d[2]+c[2];return a};t.forEach=
function(){var a=t.create();return function(b,c,k,h,d,e){c||(c=3);k||(k=0);for(h=h?Math.min(h*c+k,b.length):b.length;k<h;k+=c)a[0]=b[k],a[1]=b[k+1],a[2]=b[k+2],d(a,a,e),b[k]=a[0],b[k+1]=a[1],b[k+2]=a[2];return b}}();t.angle=function(a,b){a=t.fromValues(a[0],a[1],a[2]);b=t.fromValues(b[0],b[1],b[2]);t.normalize(a,a);t.normalize(b,b);b=t.dot(a,b);return 1<b?0:Math.acos(b)};t.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};t.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===
b[2]};t.equals=function(a,b){var c=a[0],k=a[1];a=a[2];var h=b[0],d=b[1];b=b[2];return Math.abs(c-h)<=g.EPSILON*Math.max(1,Math.abs(c),Math.abs(h))&&Math.abs(k-d)<=g.EPSILON*Math.max(1,Math.abs(k),Math.abs(d))&&Math.abs(a-b)<=g.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};return t})},"esri/layers/vectorTiles/views/2d/engine/Container":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(g,t,a,b){var c;(function(k){k[k.BEFORE=0]="BEFORE";k[k.ATTACHING=
1]="ATTACHING";k[k.DETACHING=2]="DETACHING";k[k.RENDERING=3]="RENDERING";k[k.AFTER=4]="AFTER";k[k.DONE=5]="DONE"})(c||(c={}));return function(k){function h(){var d=null!==k&&k.apply(this,arguments)||this;d._childrenSet=new Set;d._childrenToAttach=[];d._childrenToDetach=[];d._renderPhase=c.DONE;d.children=[];return d}a(h,k);Object.defineProperty(h.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!0,configurable:!0});h.prototype.detach=function(d){var e=this.children.concat(this._childrenToDetach);
d=this.prepareChildrenRenderParameters(d);for(var l=0;l<e.length;l++){var f=e[l];f.attached&&(this.detachChild(f,d),f.attached=!1,f.parent=null)}};h.prototype.doRender=function(d){var e=this.prepareChildrenRenderParameters(d);this._renderPhase=c.BEFORE;this.beforeRenderChildren(d,e);this._renderPhase=c.ATTACHING;this.attachChildren(e);this._renderPhase=c.DETACHING;for(var l=this._childrenToDetach;0<l.length;){var f=l.shift();this.detachChild(f,e);f.attached=!1;f.parent=null}this._renderPhase=c.RENDERING;
this.renderChildren(e);this._renderPhase=c.AFTER;this.afterRenderChildren(d,e);this._renderPhase=c.DONE};h.prototype.addChild=function(d){return this.addChildAt(d,this.children.length)};h.prototype.addChildAt=function(d,e){void 0===e&&(e=this.numChildren);if(!d||this.contains(d))return d;var l=d.parent;l&&l!==this&&l.removeChild(d);e>=this.numChildren?this.children.push(d):this.children.splice(e,0,d);this._childrenSet.add(d);e=this._childrenToDetach.indexOf(d);-1<e&&this._childrenToDetach.splice(e,
1);this._childrenToAttach.push(d);this._renderPhase>=c.RENDERING&&this.requestRender();return d};h.prototype.contains=function(d){return this._childrenSet.has(d)};h.prototype.getChildIndex=function(d){return this.children.indexOf(d)};h.prototype.getChildAt=function(d){return 0>d||d>this.children.length?null:this.children[d]};h.prototype.removeAllChildren=function(){for(var d=this.numChildren;d--;)this.removeChildAt(0)};h.prototype.removeChild=function(d){return this.contains(d)?this.removeChildAt(this.getChildIndex(d)):
d};h.prototype.removeChildAt=function(d){if(0>d||d>=this.children.length)return null;d=this.children.splice(d,1)[0];this._childrenSet["delete"](d);if(d.attached)this._childrenToDetach.push(d),this._renderPhase>=c.RENDERING&&this.requestRender();else{var e=this._childrenToAttach.indexOf(d);-1<e&&this._childrenToAttach.splice(e,1)}return d};h.prototype.requestChildRender=function(d){d&&d.parent===this&&this._renderPhase>=c.RENDERING&&this.requestRender()};h.prototype.setChildIndex=function(d,e){var l=
this.getChildIndex(d);-1<l&&(this.children.splice(l,1),this.children.splice(e,0,d),this._renderPhase>=c.RENDERING&&this.requestRender())};h.prototype.sortChildren=function(d){this._renderPhase>c.RENDERING&&this.requestRender();return this.children.sort(d)};h.prototype.attachChildren=function(d){var e=this._childrenToAttach;if(0!==e.length)for(var l=0,f=!1;!f;)f=e[l],this.attachChild(f,d)?(f.attached=!0,f.parent=this,e.splice(l,1)):++l,f=e.length===l};h.prototype.renderChildren=function(d){for(var e=
this.children,l=e.length,f=0;f<l;f++){var n=e[f];n.attached&&this.renderChild(n,d)}};h.prototype.beforeRenderChildren=function(d,e){};h.prototype.attachChild=function(d,e){return d.attach(e)};h.prototype.detachChild=function(d,e){d.detach(e)};h.prototype.renderChild=function(d,e){d.processRender(e)};h.prototype.afterRenderChildren=function(d,e){};return h}(b)})},"esri/layers/vectorTiles/views/2d/engine/DisplayObject":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./Evented"],
function(g,t,a,b){return function(c){function k(){var h=null!==c&&c.apply(this,arguments)||this;h._renderRequestedCalled=!1;h._attached=!1;h._opacity=1;h.renderRequested=!1;h._visible=!0;return h}a(k,c);Object.defineProperty(k.prototype,"attached",{get:function(){return this._attached},set:function(h){this._attached!==h&&((this._attached=h)?this.hasEventListener("attach")&&this.emit("attach"):this.hasEventListener("detach")&&this.emit("detach"))},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,
"opacity",{get:function(){return this._opacity},set:function(h){this._opacity!==h&&(this._opacity=h,this.requestRender())},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"visible",{get:function(){return this._visible},set:function(h){this._visible!==h&&(this._visible=h,this.requestRender())},enumerable:!0,configurable:!0});k.prototype.attach=function(h){return!0};k.prototype.detach=function(h){};k.prototype.processRender=function(h){this._renderRequestedCalled=!1;this.doRender(h);
this._renderRequestedCalled||(this.renderRequested=!1);this.hasEventListener("post-render")&&this.emit("post-render")};k.prototype.requestRender=function(){var h=this.renderRequested;this.renderRequested=this._renderRequestedCalled=!0;this.parent&&this.parent.requestChildRender(this);h!==this.renderRequested&&this.hasEventListener("will-render")&&this.emit("will-render")};k.prototype.dispose=function(){};return k}(b.Evented)})},"esri/layers/vectorTiles/views/2d/engine/Evented":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","dojo/aspect","dojo/on"],function(g,t,a,b,c){Object.defineProperty(t,"__esModule",{value:!0});g=function(){function k(){}k.prototype.on=function(h,d){return b.after(this,"on"+h,d,!0)};k.prototype.once=function(h,d){return c.once(this,h,d)};k.prototype.emit=function(h){c.emit(this,h,this)};k.prototype.hasEventListener=function(h){h="on"+h;return!(!this[h]||!this[h].after)};return k}();t.Evented=g;t.EventedMixin=function(k){return function(h){function d(){return null!==
h&&h.apply(this,arguments)||this}a(d,h);d.prototype.on=function(e,l){return b.after(this,"on"+e,l,!0)};d.prototype.once=function(e,l){return c.once(this,e,l)};d.prototype.emit=function(e,l){c.emit(this,e,l)};d.prototype.hasEventListener=function(e){e="on"+e;return!(!this[e]||!this[e].after)};return d}(k)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/enums":function(){define(["require","exports"],function(g,t){Object.defineProperty(t,"__esModule",{value:!0});(function(a){a[a.FILL=0]="FILL";a[a.LINE=
1]="LINE";a[a.MARKER=2]="MARKER";a[a.TEXT=3]="TEXT";a[a.LABEL=4]="LABEL";a[a.NONE=5]="NONE";a[a.UNKNOWN=6]="UNKNOWN";a[a.COUNT=7]="COUNT"})(t.WGLGeometryType||(t.WGLGeometryType={}));(function(a){a[a.SUCCEEDED=0]="SUCCEEDED";a[a.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"})(t.WGLGeometryTransactionStatus||(t.WGLGeometryTransactionStatus={}));(function(a){a[a.NONE=0]="NONE";a[a.FILL=1]="FILL";a[a.LINE=2]="LINE";a[a.MARKER=4]="MARKER";a[a.TEXT=8]="TEXT";a[a.LABEL=16]="LABEL";a[a.LABEL_ALPHA=32]=
"LABEL_ALPHA";a[a.HITTEST=64]="HITTEST";a[a.HIGHLIGHT=128]="HIGHLIGHT";a[a.CLIP=256]="CLIP";a[a.DEBUG=512]="DEBUG";a[a.NUM_DRAW_PHASES=12]="NUM_DRAW_PHASES"})(t.WGLDrawPhase||(t.WGLDrawPhase={}));(function(a){a[a.SIZE=0]="SIZE";a[a.COLOR=1]="COLOR";a[a.OPACITY=2]="OPACITY";a[a.ROTATION=3]="ROTATION"})(t.VVType||(t.VVType={}));(function(a){a[a.NONE=0]="NONE";a[a.OPACITY=1]="OPACITY";a[a.COLOR=2]="COLOR";a[a.ROTATION=4]="ROTATION";a[a.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE";a[a.SIZE_SCALE_STOPS=16]=
"SIZE_SCALE_STOPS";a[a.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";a[a.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(t.WGLVVFlag||(t.WGLVVFlag={}));(function(a){a[a.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";a[a.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";a[a.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE";a[a.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(t.WGLVVTarget||(t.WGLVVTarget={}));(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.BUTT=1]="BUTT";a[a.ROUND=2]="ROUND";a[a.SQUARE=3]=
"SQUARE"})(t.CapType||(t.CapType={}));(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.MITER=1]="MITER";a[a.BEVEL=2]="BEVEL";a[a.ROUND=3]="ROUND"})(t.JoinType||(t.JoinType={}));(function(a){a.SIMPLE_MARKER="esriSMS";a.SIMPLE_LINE="esriSLS";a.SIMPLE_FILL="esriSFS";a.PICTURE_MARKER="esriPMS";a.PICTURE_FILL="esriPFS";a.TEXT="esriTS"})(t.EsriSymbolType||(t.EsriSymbolType={}));(function(a){a.SIMPLE_MARKER="simple-marker";a.SIMPLE_LINE="simple-line";a.SIMPLE_FILL="simple-fill";a.PICTURE_MARKER="picture-marker";
a.PICTURE_FILL="picture-fill";a.TEXT="text"})(t.EsriSymbolTypeKebab||(t.EsriSymbolTypeKebab={}))})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLPainter":function(){define("require exports ../../../../core/tsSupport/assignHelper dojo/has ../../../../core/libs/gl-matrix/mat4 ./enums ./GeometryUtils ./MaterialManager ./Utils ./brushes/WGLBrushInfo ./brushes/WGLBrushStencil ./brushes/WGLGeometryBrushFill ./brushes/WGLGeometryBrushLabel ./brushes/WGLGeometryBrushLine ./brushes/WGLGeometryBrushMarker ./brushes/WGLGeometryBrushText ./painter/WGLHighlightPainter ./../../../webgl/FramebufferObject".split(" "),
function(g,t,a,b,c,k,h,d,e,l,f,n,u,p,r,q,m,v){Object.defineProperty(t,"__esModule",{value:!0});g=function(){function A(){this._initialized=!1}A.prototype.registerPass=function(C,D){this._initialize();for(var B=0;B<D.length;B++)this._passMap.set(D[B],C);return this};A.prototype.getPaintPassTs=function(C){this._initialize();return this._passMap.has(C)?[this._passMap.get(C)]:[]};A.prototype._initialize=function(){this._initialized||(this._passMap=new Map,this._initialized=!0)};return A}();t.WGLPainterOptions=
g;var x=new Uint8Array(4*e.C_HITTEST_SEARCH_SIZE*e.C_HITTEST_SEARCH_SIZE),z=new Uint32Array(x.buffer);g=function(){function A(){this._hlPainter=new m;this._extrudeMatrix=new Float32Array(16);this._extrudeNoRotationMatrix=new Float32Array(16);this._extrudeRotateVector=new Float32Array([0,0,1]);this._extrudeScaleVector=new Float32Array([1,1,1]);this._state={rotation:0,width:0,height:0};this._cachedRotation=this._cachedHeight=this._cachedWidth=0;this.materialManager=new d}A.allGeometryPhases=function(){return[k.WGLDrawPhase.FILL,
k.WGLDrawPhase.LINE,k.WGLDrawPhase.MARKER,k.WGLDrawPhase.TEXT]};A.toWGLDrawPhases=function(C){for(var D=[],B,y=0;y<k.WGLDrawPhase.NUM_DRAW_PHASES;y++)B=1<<y,B&C&&D.push(B);return D};Object.defineProperty(A.prototype,"extrudeMatrix",{get:function(){return this._extrudeMatrix},enumerable:!0,configurable:!0});Object.defineProperty(A.prototype,"extrudeNoRotationMatrix",{get:function(){return this._extrudeNoRotationMatrix},enumerable:!0,configurable:!0});A.prototype.dispose=function(){this.materialManager.dispose();
this.textureManager=null;this._hlPainter&&(this._hlPainter.dispose(),this._hlPainter=null);this._hittestFBO&&(this._hittestFBO.dispose(),this._hittestFBO=null);this._passes&&(this._passes.forEach(function(C){return C.dispose()}),this._passes.clear());this._brushes&&(this._brushes.forEach(function(C){return C.forEach(function(D){return D.dispose()})}),this._brushes.clear())};A.prototype.initialize=function(C){this.materialManager.initialize(C)};A.prototype.update=function(C,D){this._state=C;if(this._state.width!==
this._cachedWidth||this._state.height!==this._cachedHeight||this._state.rotation!==this._cachedRotation)this._extrudeScaleVector[0]=2/C.width,this._extrudeScaleVector[1]=-2/C.height,c.identity(this._extrudeMatrix),c.rotate(this._extrudeMatrix,this._extrudeMatrix,-C.rotation*h.C_DEG_TO_RAD,this._extrudeRotateVector),c.scale(this._extrudeMatrix,this._extrudeMatrix,this._extrudeScaleVector),c.transpose(this._extrudeMatrix,this._extrudeMatrix),c.identity(this._extrudeNoRotationMatrix),c.scale(this._extrudeNoRotationMatrix,
this._extrudeNoRotationMatrix,this._extrudeScaleVector),c.transpose(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix),this._cachedWidth=this._state.width,this._cachedHeight=this._state.height,this._cachedRotation=this._state.rotation};A.prototype.getBrushes=function(C){if(!this._brushes){var D=new n.default,B=new r.default,y=new p.default,w=new q.default,E=new u.default,F=new l.default,H=new f.default;this._brushes=new Map;this._brushes.set(k.WGLDrawPhase.FILL,[D]);this._brushes.set(k.WGLDrawPhase.MARKER,
[B]);this._brushes.set(k.WGLDrawPhase.LINE,[y]);this._brushes.set(k.WGLDrawPhase.TEXT,[w]);this._brushes.set(k.WGLDrawPhase.LABEL,[E]);this._brushes.set(k.WGLDrawPhase.LABEL_ALPHA,[E]);this._brushes.set(k.WGLDrawPhase.HITTEST,[D,B,y,w]);this._brushes.set(k.WGLDrawPhase.HIGHLIGHT,[D,B,y,w]);this._brushes.set(k.WGLDrawPhase.CLIP,[H]);this._brushes.set(k.WGLDrawPhase.DEBUG,[F])}if(!this._brushes.has(C))throw Error("WGLPainter: Tried to get brush for unknown phase: "+C);return this._brushes.get(C)};A.prototype.bindTextureManager=
function(C){this.textureManager=C};A.prototype.draw=function(C,D,B,y){B[0]===k.WGLDrawPhase.LABEL_ALPHA&&B[0]===k.WGLDrawPhase.LABEL||this._drawClippingRects(C,D);var w=C.context;w.setBlendingEnabled(!0);w.setStencilWriteMask(0);w.setBlendFunctionSeparate(1,771,1,771);this._drawPhases(C,D,B,y);this._debugTiles(C,D)};A.prototype.setHighlightOptions=function(C){this._hlPainter.setHighlightOptions(C)};A.prototype.highlight=function(C,D){var B=C.context,y=B.getViewport();this._hlPainter.setup(B,y.width,
y.height);this._hlPainter.startMaskDraw(B);this._drawClippingRects(C,D);B.setBlendingEnabled(!0);B.setStencilWriteMask(0);B.setBlendFunctionSeparate(1,771,1,771);this._drawPhases(C,D,[k.WGLDrawPhase.HIGHLIGHT]);this._hlPainter.draw(B)};A.prototype.hitTest=function(C,D){var B=e.C_HITTEST_SEARCH_SIZE,y=[0,0],w=[0,0],E=C.state;E.toMap(y,[0,0]);E.toMap(w,[B,B]);if(0===D.filter(function(V){return!(y[0]>V.bounds[2]||w[0]<V.bounds[0]||y[1]<V.bounds[1]||w[1]>V.bounds[3])}).length)return[];E=C.context;this._hittestFBO||
(this._hittestFBO=v.create(E,{colorTarget:0,depthStencilTarget:3,width:B,height:B}));var F=E.getViewport(),H=E.getBoundFramebufferObject();E.bindFramebuffer(this._hittestFBO);E.setViewport(0,0,B,B);this._drawClippingRects(C,D);var M=E.gl;E.setClearColor(1,1,1,1);E.clear(M.COLOR_BUFFER_BIT);E.setBlendingEnabled(!1);E.setStencilWriteMask(0);this._drawPhases(C,D,[k.WGLDrawPhase.HITTEST]);E.setBlendingEnabled(!0);this._hittestFBO.readPixels(0,0,B,B,6408,5121,x);C=B*B;D=new Set;for(B=0;B<C;B++)M=z[B],
4294967295!==M&&D.add(M);E.bindFramebuffer(H);E.setViewport(F.x,F.y,F.width,F.height);var R=[];D.forEach(function(V){R.push(V)});return R};A.prototype._getPaintPass=function(C){this._passes||(this._passes=new Map);if(!this._passes.has(C))try{this._passes.set(C,new C)}catch(D){throw Error("Tried to instantiate WGLPaintPass with unknown constructor: "+C+",\n"+D);}return this._passes.get(C)};A.prototype._getPaintPasses=function(C,D){var B=this;return D.getPaintPassTs(C).map(function(y){return B._getPaintPass(y)})};
A.prototype._drawPhases=function(C,D,B,y){C.context.setStencilTestEnabled(!0);for(var w=0;w<B.length;w++){var E=B[w],F=y?this._getPaintPasses(E,y):[];E=a({},C,{drawPhase:E});F.forEach(function(R){return R.preRender(C,C.rendererInfo)});for(var H=0,M=D;H<M.length;H++)M[H].doRender(E);F.reverse().forEach(function(R){return R.postRender(C,C.rendererInfo)})}C.context.setStencilTestEnabled(!1)};A.prototype._debugTiles=function(C,D){b("esri-feature-tiles-debug")&&this._drawPhases(C,D,[k.WGLDrawPhase.DEBUG])};
A.prototype._drawClippingRects=function(C,D){if(0!==D.length){var B=C.context;B.setDepthWriteEnabled(!1);B.setDepthTestEnabled(!1);B.setStencilTestEnabled(!0);B.setBlendingEnabled(!1);B.setColorMask(!1,!1,!1,!1);B.setStencilOp(7680,7680,7681);B.setClearStencil(0);B.clear(B.gl.STENCIL_BUFFER_BIT);B.setStencilWriteMask(255);B=0;for(var y=D.length;B<D.length;B++,y--){var w=D[B];w.attached&&(w.stencilRef=y)}this._drawPhases(C,D,[k.WGLDrawPhase.CLIP]);C.context.setColorMask(!0,!0,!0,!0)}};return A}();
t.default=g})},"esri/layers/vectorTiles/views/2d/engine/webgl/GeometryUtils":function(){define(["require","exports"],function(g,t){function a(c,k){c%=k;return 0<=c?c:c+k}Object.defineProperty(t,"__esModule",{value:!0});t.C_INFINITY=Number.POSITIVE_INFINITY;t.C_PI=Math.PI;t.C_2PI=2*t.C_PI;t.C_PI_BY_2=t.C_PI/2;t.C_RAD_TO_256=128/t.C_PI;t.C_256_TO_RAD=t.C_PI/128;t.C_DEG_TO_256=256/360;t.C_DEG_TO_RAD=t.C_PI/180;t.C_SQRT2=1.414213562;t.C_SQRT2_INV=1/t.C_SQRT2;var b=1/Math.LN2;t.positiveMod=a;t.radToByte=
function(c){return a(c*t.C_RAD_TO_256,256)};t.degToByte=function(c){return a(c*t.C_DEG_TO_256,256)};t.log2=function(c){return Math.log(c)*b};t.sqr=function(c){return c*c};t.clamp=function(c,k,h){return Math.min(Math.max(c,k),h)};t.interpolate=function(c,k,h){return c*(1-h)+k*h};t.between=function(c,k,h){return c>=k&&c<=h||c>=h&&c<=k}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialManager":function(){define("require exports ./enums ./MaterialInfoUtils ./shaders/fillShaderSnippets ./shaders/iconShaderSnippets ./shaders/labelShaderSnippets ./shaders/lineShaderSnippets ./shaders/textShaderSnippets ../../../webgl/ShaderVariations".split(" "),
function(g,t,a,b,c,k,h,d,e,l){return function(){function f(){this._programRep=new Map;this.isInitialize=!1}f.prototype.dispose=function(){this._fillShaderVariations&&(this._fillShaderVariations.dispose(),this._fillShaderVariations=null);this._lineShaderVariations&&(this._lineShaderVariations.dispose(),this._lineShaderVariations=null);this._iconShaderVariations&&(this._iconShaderVariations.dispose(),this._iconShaderVariations=null);this._textShaderVariations&&(this._textShaderVariations.dispose(),
this._textShaderVariations=null);0!==this._programRep.size&&(this._programRep.forEach(function(n){return n.dispose()}),this._programRep.clear())};f.prototype.initialize=function(n){if(!this.isInitialize){var u=new l("label",["labelVS","labelFS"],[],h,n);u.addDefine("ID","ID",[!0,!0],"ID");u.addDefine("HIGHLIGHT","HIGHLIGHT",[!1,!1],"HIGHLIGHT");u.addDefine("SDF","SDF",[!1,!1],"SDF");u.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!1,!1],"VV_SIZE_MIN_MAX_VALUE");u.addDefine("VV_SIZE_SCALE_STOPS",
"VV_SIZE_SCALE_STOPS",[!1,!1],"VV_SIZE_SCALE_STOPS");u.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!1,!1],"VV_SIZE_FIELD_STOPS");u.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!1,!1],"VV_SIZE_UNIT_VALUE");u.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");u.addDefine("VV_ROTATION","VV_ROTATION",[!1,!1],"VV_ROTATION");u.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");u.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");u.addDefine("PATTERN",
"PATTERN",[!1,!1],"PATTERN");u.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");var p=new l("text",["textVS","textFS"],[],e,n);p.addDefine("ID","ID",[!0,!0],"ID");p.addDefine("HIGHLIGHT","HIGHLIGHT",[!1,!1],"HIGHLIGHT");p.addDefine("SDF","SDF",[!1,!1],"SDF");p.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");p.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");p.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],
"VV_SIZE_FIELD_STOPS");p.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");p.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");p.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");p.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");p.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");p.addDefine("PATTERN","PATTERN",[!1,!1],"PATTERN");p.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");var r=new l("icon",["iconVS","iconFS"],
[],k,n);r.addDefine("ID","ID",[!0,!0],"ID");r.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");r.addDefine("SDF","SDF",[!0,!0],"SDF");r.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");r.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");r.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");r.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");r.addDefine("VV_COLOR",
"VV_COLOR",[!0,!1],"VV_COLOR");r.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");r.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");r.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");r.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");r.addDefine("HEATMAP","HEATMAP",[!0,!0],"HEATMAP");var q=new l("fill",["fillVS","fillFS"],[],c,n);q.addDefine("ID","ID",[!0,!0],"ID");q.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");q.addDefine("SDF","SDF",
[!1,!1],"SDF");q.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!1,!1],"VV_SIZE_MIN_MAX_VALUE");q.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!1,!1],"VV_SIZE_SCALE_STOPS");q.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!1,!1],"VV_SIZE_FIELD_STOPS");q.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!1,!1],"VV_SIZE_UNIT_VALUE");q.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");q.addDefine("VV_ROTATION","VV_ROTATION",[!1,!1],"VV_ROTATION");q.addDefine("VV_OPACITY",
"VV_OPACITY",[!0,!1],"VV_OPACITY");q.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");q.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");q.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");n=new l("line",["lineVS","lineFS"],[],d,n);n.addDefine("ID","ID",[!0,!0],"ID");n.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");n.addDefine("SDF","SDF",[!0,!0],"SDF");n.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");n.addDefine("VV_SIZE_SCALE_STOPS",
"VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");n.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");n.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");n.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");n.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");n.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");n.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");n.addDefine("PATTERN",
"PATTERN",[!0,!0],"PATTERN");n.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");this._labelShaderVariations=u;this._textShaderVariations=p;this._fillShaderVariations=q;this._iconShaderVariations=r;this._lineShaderVariations=n;this.isInitialize=!0}};f.prototype.getProgram=function(n,u,p){n|=u===a.WGLDrawPhase.HITTEST?8:0;n|=u===a.WGLDrawPhase.HIGHLIGHT?16:0;if(this._programRep[n])return this._programRep[n];if(!(this._iconShaderVariations&&this._fillShaderVariations&&this._lineShaderVariations&&this._labelShaderVariations))return null;
u=b.getMaterialVariations(n);switch(u.geometryType){case a.WGLGeometryType.MARKER:var r=this._iconShaderVariations.getProgram(u.variations,null,null,p);break;case a.WGLGeometryType.TEXT:r=this._textShaderVariations.getProgram(u.variations,null,null,p);break;case a.WGLGeometryType.LABEL:r=this._labelShaderVariations.getProgram(u.variations,null,null,p);break;case a.WGLGeometryType.FILL:r=this._fillShaderVariations.getProgram(u.variations,null,null,p);break;case a.WGLGeometryType.LINE:r=this._lineShaderVariations.getProgram(u.variations,
null,null,p)}r&&(this._programRep[n]=r);return r};return f}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfoUtils":function(){define(["require","exports","./enums","./MaterialInfo","./MaterialKeyInfo"],function(g,t,a,b,c){function k(d){var e=[];e[0]=d.sdf?!0:!1;e[1]=d.vvSizeMinMaxValue?!0:!1;e[2]=d.vvSizeScaleStops?!0:!1;e[3]=d.vvSizeFieldStops?!0:!1;e[4]=d.vvSizeUnitValue?!0:!1;e[5]=d.vvColor?!0:!1;e[6]=d.vvRotation?!0:!1;e[7]=d.vvOpacity?!0:!1;e[8]=d.visibility?!0:!1;e[9]=d.pattern?
!0:!1;e[10]=d.heatmap?!0:!1;return e.reduce(function(l,f,n){f&&(l|=1<<n+2);return l},0)}function h(d){if(d.geometryType===a.WGLGeometryType.UNKNOWN)return-1;var e=k(d)<<3;return d.geometryType+e}Object.defineProperty(t,"__esModule",{value:!0});t.createTextMaterialInfo=function(d,e,l){var f=new b.default,n=new c;n.geometryType=l;n.sdf=!0;n.pattern=!1;n.visibility=!1;n.heatmap=!1;f.texBindingInfo.push(new b.TexBindingInfo(2,d.page,"u_texture"));0===e?n.vvOpacity=n.vvSizeMinMaxValue=n.vvSizeScaleStops=
n.vvSizeFieldStops=n.vvSizeUnitValue=n.vvColor=n.vvRotation=!1:(n.vvOpacity=0!==(e&a.WGLVVFlag.OPACITY),n.vvSizeMinMaxValue=0!==(e&a.WGLVVFlag.SIZE_MINMAX_VALUE),n.vvSizeScaleStops=0!==(e&a.WGLVVFlag.SIZE_SCALE_STOPS),n.vvSizeFieldStops=0!==(e&a.WGLVVFlag.SIZE_FIELD_STOPS),n.vvSizeUnitValue=0!==(e&a.WGLVVFlag.SIZE_UNIT_VALUE),n.vvColor=0!==(e&a.WGLVVFlag.COLOR),n.vvRotation=0!==(e&a.WGLVVFlag.ROTATION));f.materialKey=h(n);f.materialKeyInfo=n;return f};t.createMaterialInfo=function(d,e,l){var f=new b.default,
n=new c;n.geometryType=e;d?(d=d.spriteMosaicItem,n.sdf=d.sdf,n.pattern=!0,f.texBindingInfo.push(new b.TexBindingInfo(1,d.page,"u_texture"))):(n.sdf=!1,n.pattern=!1);0===l?n.vvOpacity=n.vvSizeMinMaxValue=n.vvSizeScaleStops=n.vvSizeFieldStops=n.vvSizeUnitValue=n.vvColor=n.vvRotation=!1:(n.vvOpacity=0!==(l&a.WGLVVFlag.OPACITY),n.vvSizeMinMaxValue=0!==(l&a.WGLVVFlag.SIZE_MINMAX_VALUE),n.vvSizeScaleStops=0!==(l&a.WGLVVFlag.SIZE_SCALE_STOPS),n.vvSizeFieldStops=0!==(l&a.WGLVVFlag.SIZE_FIELD_STOPS),n.vvSizeUnitValue=
0!==(l&a.WGLVVFlag.SIZE_UNIT_VALUE),n.vvColor=0!==(l&a.WGLVVFlag.COLOR),n.vvRotation=0!==(l&a.WGLVVFlag.ROTATION));n.visibility=!1;f.materialKey=h(n);f.materialKeyInfo=n;return f};t.getMaterialKey=h;t.getMaterialVariations=function(d){var e=d&7;d>>=3;return{geometryType:e,variations:[0!==(d&1),0!==(d&2),0!==(d&4),0!==(d&8),0!==(d&16),0!==(d&32),0!==(d&64),0!==(d&128),0!==(d&256),0!==(d&512),0!==(d&1024),0!==(d&2048),0!==(d&4096)]}}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfo":function(){define("require exports ./enums ./MaterialInfoUtils ./MaterialInfoUtils_updateMaterialVariations ./MaterialKeyInfo ./util/serializationUtils".split(" "),
function(g,t,a,b,c,k,h){Object.defineProperty(t,"__esModule",{value:!0});var d=function(){function l(f,n,u){this.unit=f;this.pageId=n;this.semantic=u}l.prototype.clone=function(){return new l(this.unit,this.pageId,this.semantic)};l.prototype.serialize=function(f){f.writeInt32(this.unit);f.writeInt32(this.pageId);return f};l.deserialize=function(f){var n=f.readInt32();f=f.readInt32();return new l(n,f,"u_texture")};return l}();t.TexBindingInfo=d;var e=function(){function l(f,n){this.name=f;this.value=
n}l.prototype.clone=function(){return new l(this.name,this.value)};l.prototype.serialize=function(f){f.writeInt32(this.value);return f};l.deserialize=function(f){f=f.readInt32();return new l("u_my_param",f)};return l}();t.MaterialParam=e;g=function(){function l(){this.texBindingInfo=[];this.materialParams=[]}l.fromSprite=function(f,n,u){var p=new l,r=new k;r.geometryType=n;f?(r.sdf=f.sdf,r.pattern=!0,p.texBindingInfo.push(new d(1,f.page,"u_texture"))):(r.sdf=!1,r.pattern=!1);0===u?r.vvOpacity=r.vvSizeMinMaxValue=
r.vvSizeScaleStops=r.vvSizeFieldStops=r.vvSizeUnitValue=r.vvColor=r.vvRotation=!1:(r.vvOpacity=0!==(u&a.WGLVVFlag.OPACITY),r.vvSizeMinMaxValue=0!==(u&a.WGLVVFlag.SIZE_MINMAX_VALUE),r.vvSizeScaleStops=0!==(u&a.WGLVVFlag.SIZE_SCALE_STOPS),r.vvSizeFieldStops=0!==(u&a.WGLVVFlag.SIZE_FIELD_STOPS),r.vvSizeUnitValue=0!==(u&a.WGLVVFlag.SIZE_UNIT_VALUE),r.vvColor=0!==(u&a.WGLVVFlag.COLOR),r.vvRotation=0!==(u&a.WGLVVFlag.ROTATION));r.visibility=!1;p.materialKey=b.getMaterialKey(r);p.materialKeyInfo=r;return p};
l.fromGlyph=function(f,n,u){var p=new l,r=new k;r.geometryType=n;r.sdf=!0;r.pattern=!1;r.visibility=!1;r.heatmap=!1;p.texBindingInfo.push(new d(2,f.page,"u_texture"));0===u?r.vvOpacity=r.vvSizeMinMaxValue=r.vvSizeScaleStops=r.vvSizeFieldStops=r.vvSizeUnitValue=r.vvColor=r.vvRotation=!1:(r.vvOpacity=0!==(u&a.WGLVVFlag.OPACITY),r.vvSizeMinMaxValue=0!==(u&a.WGLVVFlag.SIZE_MINMAX_VALUE),r.vvSizeScaleStops=0!==(u&a.WGLVVFlag.SIZE_SCALE_STOPS),r.vvSizeFieldStops=0!==(u&a.WGLVVFlag.SIZE_FIELD_STOPS),r.vvSizeUnitValue=
0!==(u&a.WGLVVFlag.SIZE_UNIT_VALUE),r.vvColor=0!==(u&a.WGLVVFlag.COLOR),r.vvRotation=0!==(u&a.WGLVVFlag.ROTATION));p.materialKey=b.getMaterialKey(r);p.materialKeyInfo=r;return p};l.prototype.copy=function(f){this.materialParams=f.materialParams.map(function(n){return n.clone()});this.texBindingInfo=f.texBindingInfo.map(function(n){return n.clone()});f.materialKeyInfo&&(this.materialKeyInfo=new k,this.materialKeyInfo.copy(f.materialKeyInfo));this.materialKey=f.materialKey};l.prototype.serialize=function(f){f.writeInt32(this.materialKey);
h.serializeList(f,this.texBindingInfo);h.serializeList(f,this.materialParams);return f};l.deserialize=function(f){var n=new l;n.materialKey=f.readInt32();n.texBindingInfo=h.deserializeList(f,d);n.materialParams=h.deserializeList(f,e);n.materialKeyInfo=new k;c(n.materialKeyInfo,n.materialKey);return n};return l}();t.default=g})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfoUtils_updateMaterialVariations":function(){define(["require","exports"],function(g,t){return function(a,b){a.geometryType=
b&7;b>>=3;a.sdf=0!==(b&4);a.vvSizeMinMaxValue=0!==(b&8);a.vvSizeScaleStops=0!==(b&16);a.vvSizeFieldStops=0!==(b&32);a.vvSizeUnitValue=0!==(b&64);a.vvColor=0!==(b&128);a.vvRotation=0!==(b&256);a.vvOpacity=0!==(b&512);a.visibility=0!==(b&1024);a.pattern=0!==(b&2048);a.heatmap=0!==(b&4096);return a}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialKeyInfo":function(){define(["require","exports"],function(g,t){return function(){function a(){this.heatmap=this.pattern=this.visibility=this.vvOpacity=
this.vvRotation=this.vvColor=this.vvSizeUnitValue=this.vvSizeFieldStops=this.vvSizeScaleStops=this.vvSizeMinMaxValue=this.sdf=!1}a.prototype.copy=function(b){this.geometryType=b.geometryType;this.sdf=b.sdf;this.vvSizeMinMaxValue=b.vvSizeMinMaxValue;this.vvSizeScaleStops=b.vvSizeScaleStops;this.vvSizeFieldStops=b.vvSizeFieldStops;this.vvSizeUnitValue=b.vvSizeUnitValue;this.vvColor=b.vvColor;this.vvRotation=b.vvRotation;this.vvOpacity=b.vvOpacity;this.visibility=b.visibility;this.pattern=b.pattern;
this.heatmap=b.heatmap};a.prototype.hasVV=function(){void 0===this._hasVV&&(this._hasVV=this.vvColor||this.vvOpacity||this.vvRotation||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue);return this._hasVV};a.prototype.hasVVSize=function(){return this.vvSizeMinMaxValue||this.vvSizeFieldStops||this.vvSizeScaleStops||this.vvSizeUnitValue};a.prototype.hasVVColor=function(){return this.vvColor};a.prototype.hasVVRotation=function(){return this.vvRotation};a.prototype.hasVVOpacity=
function(){return this.vvOpacity};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/serializationUtils":function(){define(["require","exports"],function(g,t){Object.defineProperty(t,"__esModule",{value:!0});t.serializeList=function(a,b){if(null===b)a.writeInt32(0);else{a.writeInt32(b.length);for(var c=0;c<b.length;c++)b[c].serialize(a);return a}};t.deserializeList=function(a,b,c){var k=a.readInt32();k=Array(k);for(var h=0;h<k.length;h++)k[h]=b.deserialize(a,c);return k}})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/fillShaderSnippets":function(){define(["require",
"exports","dojo/text!./fillShaders.xml","../../../../webgl/ShaderSnippets"],function(g,t,a,b){g=new b;b.parse(a,g);return g})},"esri/layers/vectorTiles/views/webgl/ShaderSnippets":function(){define(["require","exports","dojox/xml/parser"],function(g,t,a){return function(){function b(c){if(c)for(var k in c)this[k]=c[k]}b.parse=function(c,k){c=a.parse(c).getElementsByTagName("snippet");for(var h=/\$[a-zA-Z][a-zA-Z0-9]*(?:\([^\(\)]*\))?[ \t]*/,d=/[\$\s]+/g,e=/\(([^\(\)]*)\)/,l=0;l<c.length;l++){for(var f=
c[l].getAttribute("name"),n=c[l].textContent;;){var u=n.match(h);if(null==u)break;var p=u[0].replace(d,""),r=p.match(e),q=void 0;r&&(q=r[1].split(",").map(function(m){return m.trim()}));p=p.replace(e,"");q=k._instantiate(p,q);n=n.replace(u[0],q)}k[f]=n}};b.prototype._instantiate=function(c,k){c=this[c];for(k||(k=[]);;){var h=c.match(/\$(\d+)/);if(null==h)break;var d=parseInt(h[1],10);c=c.replace(h[0],k[d])}return c};return b}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/iconShaderSnippets":function(){define(["require",
"exports","dojo/text!./iconShaders.xml","../../../../webgl/ShaderSnippets"],function(g,t,a,b){g=new b;b.parse(a,g);return g})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/labelShaderSnippets":function(){define(["require","exports","dojo/text!./labelShaders.xml","../../../../webgl/ShaderSnippets"],function(g,t,a,b){g=new b;b.parse(a,g);return g})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/lineShaderSnippets":function(){define(["require","exports","dojo/text!./lineShaders.xml",
"../../../../webgl/ShaderSnippets"],function(g,t,a,b){g=new b;b.parse(a,g);return g})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/textShaderSnippets":function(){define(["require","exports","dojo/text!./textShaders.xml","../../../../webgl/ShaderSnippets"],function(g,t,a,b){g=new b;b.parse(a,g);return g})},"esri/layers/vectorTiles/views/webgl/ShaderVariations":function(){define(["require","exports","./Program","./ShaderSourceVariator","./Util"],function(g,t,a,b,c){function k(h){return h.reduce(function(d,
e,l){e&&(d|=1<<l);return d},0)}return function(){function h(d,e,l,f,n,u){"string"===typeof d?this._initParams(d,e,l,f,n,u):this._initObject({programNamePrefix:d.programNamePrefix,shaderSnippetPrefixes:d.shaderSnippetPrefixes,baseDefines:d.baseDefines,snippets:d.snippets,rctx:d.rctx,vertexAttribLocs:d.vertexAttribLocs})}h.prototype.dispose=function(){this._programCache&&(this._programCache.forEach(function(d){return d.dispose()}),this._programCache.clear())};h.prototype._initObject=function(d){this._initParams(d.programNamePrefix,
d.shaderSnippetPrefixes,d.baseDefines,d.snippets,d.rctx,d.vertexAttribLocs)};h.prototype._initParams=function(d,e,l,f,n,u){this._defaultSnippets=f;this._defaultRctx=n;this._defaultVertexAttribLocs=u;this._programCache=new Map;this._variationInfo=new Map;this._shaderSourceVariator=new b(d,e,l)};h.prototype.addDefine=function(d,e,l,f){this._shaderSourceVariator.addDefine(d,e,l,f)};h.prototype.addBinaryShaderSnippetSuffix=function(d,e,l){this._shaderSourceVariator.addBinaryShaderSnippetSuffix(d,e,l)};
h.prototype.addNaryShaderSnippetSuffix=function(d,e){this._shaderSourceVariator.addNaryShaderSnippetSuffix(d,e)};h.prototype.getProgram=function(d,e,l,f){e=e||this._defaultSnippets;l=l||this._defaultRctx;f=f||this._defaultVertexAttribLocs;if(!e)throw Error("No ShaderSnippets provided to getProgram nor to ShaderVariations constructor.");if(!l)throw Error("No RenderingContext provided to getProgram nor to ShaderVariations constructor.");if(!f)throw Error("No VertexAttributeLocations provided to getProgram nor to ShaderVariations constructor.");
var n=k(d);if(this._programCache.has(n))return this._programCache.get(n);d=this._shaderSourceVariator.getShaderVariation(d);var u=d.shaderSnippetNames[0];var p=e[u];c.assert(null!=p,"shader snippet '"+u+"' does not exist");u=d.shaderSnippetNames[1];e=e[u];c.assert(null!=e,"shader snippet '"+u+"' does not exist");l=new a(l,p,e,f,d.defines);this._programCache.set(n,l);return l};h.prototype.getProgramByKey=function(d){if(this._programCache.has(d))return this._programCache.get(d);if(!this._variationInfo[d])return null;
var e=this._variationInfo[d],l=this._defaultSnippets,f=this._defaultRctx,n=this._defaultVertexAttribLocs;var u=e.shaderSnippetNames[0];var p=l[u];c.assert(null!=p,"shader snippet '"+u+"' does not exist");u=e.shaderSnippetNames[1];l=l[u];c.assert(null!=l,"shader snippet '"+u+"' does not exist");e=new a(f,p,l,n,e.defines);this._programCache.set(d,e);return e};h.prototype.getProgramInfo=function(d){var e=this._shaderSourceVariator.getShaderVariation(d);d=k(d);this._variationInfo[d]||(this._variationInfo[d]=
e);return{name:e.programName,key:d}};return h}()})},"esri/layers/vectorTiles/views/webgl/Program":function(){define(["require","exports","dojo/has","./ShaderTranspiler"],function(g,t,a,b){return function(){function c(k,h,d,e,l){void 0===l&&(l={});this._glName=this._context=null;this._locations={};this._id=void 0;this._initialized=!1;this._fShader=this._vShader=null;this._defines={};this._nameToUniformLocation={};this._nameToAttribLocation={};this._nameToUniform1={};this._nameToUniform2={};this._nameToUniform3=
{};this._nameToUniform4={};this._nameToUniformMatrix3={};this._nameToUniformMatrix4={};this._context=k;this._vertexShaderSource=h;this._fragmentShaderSource=d;if(Array.isArray(l))for(h=0;h<l.length;h++)this._defines[l[h]]="1";else this._defines=l;this._id=c._nextId++;this._locations=e;a("esri-webgl-debug")&&k.instanceCounter.incrementCount(3)}Object.defineProperty(c.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"glName",{get:function(){return this._glName},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});c.prototype.getDefine=function(k){return this._defines[k]};c.prototype.dispose=function(){if(this._context){var k=this._context.gl;this._vShader&&(k.deleteShader(this._vShader),this._vShader=null);this._fShader&&(k.deleteShader(this._fShader),this._fShader=null);this._glName&&(k.deleteProgram(this._glName),this._glName=null);a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(3);
this._context=null}};c.prototype.initialize=function(){if(!this._initialized){this._vShader=this._loadShader(35633);this._fShader=this._loadShader(35632);var k=this._context.gl,h=k.createProgram();k.attachShader(h,this._vShader);k.attachShader(h,this._fShader);for(var d in this._locations)k.bindAttribLocation(h,this._locations[d],d);k.linkProgram(h);k.getProgramParameter(h,k.LINK_STATUS);this._glName=h;this._initialized=!0}};c.prototype.getUniformLocation=function(k){this.initialize();void 0===this._nameToUniformLocation[k]&&
(this._nameToUniformLocation[k]=this._context.gl.getUniformLocation(this._glName,k));return this._nameToUniformLocation[k]};c.prototype.hasUniform=function(k){return null!==this.getUniformLocation(k)};c.prototype.getAttribLocation=function(k){this.initialize();void 0===this._nameToAttribLocation[k]&&(this._nameToAttribLocation[k]=this._context.gl.getAttribLocation(this._glName,k));return this._nameToAttribLocation[k]};c.prototype.setUniform1i=function(k,h){var d=this._nameToUniform1[k];if(void 0===
d||h!==d)this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(k),h),this._nameToUniform1[k]=h};c.prototype.setUniform1f=function(k,h){var d=this._nameToUniform1[k];if(void 0===d||h!==d)this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(k),h),this._nameToUniform1[k]=h};c.prototype.setUniform1fv=function(k,h){var d=this._nameToUniform2[k];void 0!==d&&c._arraysEqual(h,d)||(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(k),
h),void 0===d?this._nameToUniform2[k]=new Float32Array(h):d.set(h))};c.prototype.setUniform2f=function(k,h,d){var e=this._nameToUniform2[k];if(void 0===e||h!==e[0]||d!==e[1])this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(k),h,d),void 0===e?this._nameToUniform2[k]=new Float32Array([h,d]):(e[0]=h,e[1]=d)};c.prototype.setUniform2fv=function(k,h){var d=this._nameToUniform2[k];void 0!==d&&c._arraysEqual(h,d)||(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(k),
h),void 0===d?this._nameToUniform2[k]=new Float32Array(h):d.set(h))};c.prototype.setUniform3f=function(k,h,d,e){var l=this._nameToUniform3[k];if(void 0===l||h!==l[0]||d!==l[1]||e!==l[2])this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(k),h,d,e),void 0===l?this._nameToUniform3[k]=new Float32Array([h,d,e]):(l[0]=h,l[1]=d,l[2]=e)};c.prototype.setUniform3fv=function(k,h){var d=this._nameToUniform3[k];void 0!==d&&c._arraysEqual(h,d)||(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(k),
h),void 0===d?this._nameToUniform3[k]=new Float32Array(h):d.set(h))};c.prototype.setUniform4f=function(k,h,d,e,l){var f=this._nameToUniform4[k];if(void 0===f||h!==f[0]||d!==f[1]||e!==f[2]||l!==f[3])this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(k),h,d,e,l),void 0===f?this._nameToUniform4[k]=new Float32Array([h,d,e,l]):(f[0]=h,f[1]=d,f[2]=e,f[3]=l)};c.prototype.setUniform4fv=function(k,h){var d=this._nameToUniform4[k];void 0!==d&&c._arraysEqual(h,d)||(this._context.bindProgram(this),
this._context.gl.uniform4fv(this.getUniformLocation(k),h),void 0===d?this._nameToUniform4[k]=new Float32Array(h):d.set(h))};c.prototype.setUniformMatrix3fv=function(k,h,d){void 0===d&&(d=!1);var e=this._nameToUniformMatrix3[k];void 0!==e&&(9===e.length?c._matrix3Equal(e,h):c._arraysEqual(h,e))||(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(k),d,h),void 0===e?this._nameToUniformMatrix3[k]=new Float32Array(h):e.set(h))};c.prototype.setUniformMatrix4fv=function(k,
h,d){void 0===d&&(d=!1);var e=this._nameToUniformMatrix4[k];void 0!==e&&(16===e.length?c._matrix4Equal(e,h):c._arraysEqual(h,e))||(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(k),d,h),void 0===e?this._nameToUniformMatrix4[k]=new Float32Array(h):e.set(h))};c._padToThree=function(k){var h=k.toString();1E3>k&&(h=("  "+k).slice(-3));return h};c.prototype._addLineNumbers=function(k){var h=2;return k.replace(/\n/g,function(){return"\n"+c._padToThree(h++)+":"})};
c.prototype._loadShader=function(k){var h=35633===k,d=h?this._vertexShaderSource:this._fragmentShaderSource,e="",l;for(l in this._defines)e+="#define "+l+" "+this._defines[l]+"\n";d=e+d;"webgl2"===this._context.contextVersion&&(d=b.transpileShader(d,h?"vertex":"fragment"));h=this._context.gl;k=h.createShader(k);h.shaderSource(k,d);h.compileShader(k);h.getShaderParameter(k,h.COMPILE_STATUS);return k};c._matrix4Equal=function(k,h){return k[0]===h[0]&&k[1]===h[1]&&k[2]===h[2]&&k[3]===h[3]&&k[4]===h[4]&&
k[5]===h[5]&&k[6]===h[6]&&k[7]===h[7]&&k[8]===h[8]&&k[9]===h[9]&&k[10]===h[10]&&k[11]===h[11]&&k[12]===h[12]&&k[13]===h[13]&&k[14]===h[14]&&k[15]===h[15]};c._matrix3Equal=function(k,h){return k[0]===h[0]&&k[1]===h[1]&&k[2]===h[2]&&k[3]===h[3]&&k[4]===h[4]&&k[5]===h[5]&&k[6]===h[6]&&k[7]===h[7]&&k[8]===h[8]};c._arraysEqual=function(k,h){if(k.length!==h.length)return!1;for(var d=0;d<k.length;++d)if(k[d]!==h[d])return!1;return!0};c._nextId=0;return c}()})},"esri/layers/vectorTiles/views/webgl/ShaderTranspiler":function(){define(["require",
"exports","./reservedWordsGLSL3","./lib/glsl-tokenizer/string"],function(g,t,a,b){function c(e){return e.map(function(l){return"eof"!==l.type?l.data:""}).join("")}function k(e,l,f,n){n=n||f;for(var u=0;u<e.length;u++){var p=e[u];if("ident"===p.type&&p.data===f)return n in l?l[n]++:l[n]=0,k(e,l,n+"_"+l[n],n)}return f}function h(e,l,f){void 0===f&&(f="afterVersion");var n={data:"\n",type:"whitespace"},u=function(m){return m<e.length?/[^\r\n]$/.test(e[m].data):!1},p=function(m){for(var v=-1,x=0,z=-1,
A=0;A<m.length;A++){var C=m[A];"preprocessor"===C.type&&(C.data.match(/#(if|ifdef|ifndef)\s+.+/)?++x:C.data.match(/#endif\s*.*/)&&--x);("afterVersion"===f||"afterPrecision"===f)&&"preprocessor"===C.type&&/^#version/.test(C.data)&&(z=Math.max(z,A));if("afterPrecision"===f&&"keyword"===C.type&&"precision"===C.data){a:{for(C=A;C<m.length;C++){var D=m[C];if("operator"===D.type&&";"===D.data)break a}C=null}if(null===C)throw Error("precision statement not followed by any semicolons!");z=Math.max(z,C)}v<
z&&0===x&&(v=A)}return v+1}(e);u(p-1)&&e.splice(p++,0,n);for(var r=0;r<l.length;r++){var q=l[r];e.splice(p++,0,q)}u(p-1)&&u(p)&&e.splice(p,0,n)}Object.defineProperty(t,"__esModule",{value:!0});var d=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];t.transpileShader=function(e,l){e=b(e);a:{var f="100";var n="300 es";void 0===f&&(f="100");void 0===n&&(n="300 es");for(var u=/^\s*#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/,p=0;p<e.length;p++){var r=e[p];
if("preprocessor"===r.type){var q=u.exec(r.data);if(q)if(u=q[1].replace(/\s\s+/g," "),u===n){f=u;break a}else if(u===f){r.data="#version "+n;break a}else throw Error("unknown glsl version: "+u);}}e.splice(0,0,{type:"preprocessor",data:"#version "+n},{type:"whitespace",data:"\n"});f=null}if("300 es"===f)throw Error("shader is already glsl 300 es");u=r=null;p={};q={};for(f=0;f<e.length;++f)switch(n=e[f],n.type){case "keyword":"vertex"===l&&"attribute"===n.data?n.data="in":"varying"===n.data&&(n.data=
"vertex"===l?"out":"in");break;case "builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(n.data.trim())&&(n.data=n.data.replace(/(2D|Cube|EXT)/g,""));if("fragment"===l&&"gl_FragColor"===n.data){if(!r){r=k(e,p,"fragColor");var m=void 0;void 0===m&&(m="lowp");h(e,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:m},{type:"whitespace",data:" "},{type:"keyword",data:"vec4"},{type:"whitespace",data:" "},{type:"ident",data:r},{type:"operator",data:";"}],"afterPrecision")}n.data=
r}else"fragment"===l&&"gl_FragDepthEXT"===n.data&&(u||(u=k(e,p,"gl_FragDepth")),n.data=u);break;case "ident":if(0<=a.indexOf(n.data)){if(m="vertex"===l)a:{for(m=f-1;0<=m;m--){var v=e[m];if("whitespace"!==v.type&&"block-comment"!==v.type)if("keyword"===v.type){if("attribute"===v.data||"in"===v.data){m=!0;break a}}else break}m=!1}if(m)throw Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");n.data in q||(q[n.data]=k(e,p,n.data));n.data=q[n.data]}}for(f=e.length-1;0<=
f;--f)n=e[f],"preprocessor"===n.type&&((l=n.data.match(/#extension\s+(.*):/))&&l[1]&&0<=d.indexOf(l[1].trim())&&(l=e[f+1],e.splice(f,l&&"whitespace"===l.type?2:1)),(l=n.data.match(/#ifdef\s+(.*)/))&&l[1]&&0<=d.indexOf(l[1].trim())&&(n.data="#if 1"),(l=n.data.match(/#ifndef\s+(.*)/))&&l[1]&&0<=d.indexOf(l[1].trim())&&(n.data="#if 0"));return c(e)}})},"esri/layers/vectorTiles/views/webgl/reservedWordsGLSL3":function(){define(["require","exports"],function(g,t){return"layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" ")})},
"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/string":function(){define(["./index"],function(g){"use strict;";return function(t){var a=g(),b=[];b=b.concat(a(t));return b=b.concat(a(null))}})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/index":function(){define(["./lib/literals","./lib/operators","./lib/builtins"],function(g,t,a){"use strict;";var b="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ");return function(){function c(w){w.length&&
v.push({type:b[p],data:w,position:A,line:x,column:z})}function k(){m=m.length?[]:m;if("/"===q&&"*"===r)return A=u+n-1,p=0,q=r,n+1;if("/"===q&&"/"===r)return A=u+n-1,p=1,q=r,n+1;if("#"===r)return p=2,A=u+n,n;if(/\s/.test(r))return p=9,A=u+n,n;C=/\d/.test(r);D=/[^\w_]/.test(r);A=u+n;p=C?4:D?3:9999;return n}function h(){if(("\r"===r||"\n"===r)&&"\\"!==q)return c(m.join("")),p=999,n;m.push(r);q=r;return n+1}function d(){if("."===q&&/\d/.test(r))return p=5,n;if("/"===q&&"*"===r)return p=0,n;if("/"===q&&
"/"===r)return p=1,n;if("."===r&&m.length){for(;e(m););p=5;return n}if(";"===r||")"===r||"("===r){if(m.length)for(;e(m););c(r);p=999;return n+1}var w=2===m.length&&"\x3d"!==r;if(/[\w_\d\s]/.test(r)||w){for(;e(m););p=999;return n}m.push(r);q=r;return n+1}function e(w){var E=0;do{var F=t.indexOf(w.slice(0,w.length+E).join(""));var H=t[F];if(-1===F){if(0<E--+w.length)continue;H=w.slice(0,1).join("")}c(H);A+=H.length;m=m.slice(H.length);return m.length}while(1)}function l(){if("."===r||/[eE]/.test(r))return m.push(r),
p=5,q=r,n+1;if("x"===r&&1===m.length&&"0"===m[0])return p=11,m.push(r),q=r,n+1;if(/[^\d]/.test(r))return c(m.join("")),p=999,n;m.push(r);q=r;return n+1}function f(){"f"===r&&(m.push(r),q=r,n+=1);if(/[eE]/.test(r)||"-"===r&&/[eE]/.test(q))return m.push(r),q=r,n+1;if(/[^\d]/.test(r))return c(m.join("")),p=999,n;m.push(r);q=r;return n+1}var n=0,u=0,p=999,r,q,m=[],v=[],x=1,z=0,A=0,C=!1,D=!1,B="",y;return function(w){v=[];if(null!==w){w=w.replace?w.replace(/\r\n/g,"\n"):w;n=0;B+=w;for(y=B.length;r=B[n],
n<y;){w=n;switch(p){case 0:"/"===r&&"*"===q?(m.push(r),c(m.join("")),p=999):(m.push(r),q=r);n+=1;break;case 1:n=h();break;case 2:n=h();break;case 3:n=d();break;case 4:n=l();break;case 11:/[^a-fA-F0-9]/.test(r)?(c(m.join("")),p=999):(m.push(r),q=r,n+=1);break;case 5:n=f();break;case 9999:if(/[^\d\w_]/.test(r)){var E=m.join("");p=-1<g.indexOf(E)?8:-1<a.indexOf(E)?7:6;c(m.join(""));p=999}else m.push(r),q=r,n+=1;break;case 9:/[^\s]/g.test(r)?(c(m.join("")),p=999):(m.push(r),q=r,n+=1);break;case 999:n=
k()}if(w!==n)switch(B[w]){case "\n":z=0;++x;break;default:++z}}u+=n;B=B.slice(n);return v}m.length&&c(m.join(""));p=10;c("(eof)");return v}}})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/literals":function(){define([],function(){return"precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")})},
"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/operators":function(){define([],function(){"use strict;";return"\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/builtins":function(){define([],function(){return"abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")})},
"esri/layers/vectorTiles/views/webgl/ShaderSourceVariator":function(){define(["require","exports","../../core/lang","./Util"],function(g,t,a,b){return function(){function c(k,h,d){if("string"===typeof k)var e=k;else e=k.programNamePrefix,h=k.shaderSnippetPrefixes,d=k.baseDefines;b.assert(h,"you must specify shader snippet prefixes");b.assert(2===h.length,"you must specify shader snippet prefixes for vertex and fragment shaders");d&&0!==d.length||(d=[]);this.programNamePrefix=e;this.shaderSnippetPrefixes=
h;this.baseDefines=d;this.variables=[];this.sealed=!1}c.prototype.addDefine=function(k,h,d,e){b.assert(!this.sealed,"you cannot add another variable after the first program has been generated");b.assert(k,"you must specify a program name suffix");this.variables.push({programNameSuffixes:["",k],shaderNameSuffixes:e||k,defineStr:h,affectsShaderTypes:d||[!0,!0]})};c.prototype.addBinaryShaderSnippetSuffix=function(k,h,d){b.assert(!this.sealed,"you cannot add another variable after the first program has been generated");
b.assert(k,"you must specify a program name suffix");this.variables.push({programNameSuffixes:["",k],shaderSnippetSuffixes:["",h],affectsShaderTypes:d||[!0,!0]})};c.prototype.addNaryShaderSnippetSuffix=function(k,h){b.assert(!this.sealed,"you cannot add another variable after the first program has been generated");var d=k.map(function(e){b.assert(null!=e.value,"value must always be specified");return e.value});this.variables.push({values:d,programNameSuffixes:k.map(function(e,l){return null!=e.programNameSuffix?
e.programNameSuffix:d[l]}),shaderSnippetSuffixes:k.map(function(e,l){return null!=e.shaderSnippetSuffix?e.shaderSnippetSuffix:d[l]}),affectsShaderTypes:h||[!0,!0]})};c.prototype.getShaderVariation=function(k){b.assert(k.length===this.variables.length,"you must specify a value for each variable");for(var h=this.programNamePrefix,d=a.clone(this.shaderSnippetPrefixes),e=a.clone(this.shaderSnippetPrefixes),l=a.clone(this.baseDefines),f=0;f<this.variables.length;f++){var n=this.variables[f],u=k[f],p=void 0;
n.values?(p=n.values.indexOf(u),b.assert(0<=p,"invalid value "+u+" for variable "+f)):p=u?1:0;h+=n.programNameSuffixes[p];for(u=0;2>u;u++)n.affectsShaderTypes[u]&&(n.shaderSnippetSuffixes&&(d[u]+=n.shaderSnippetSuffixes[p],e[u]+=n.shaderSnippetSuffixes[p]),n.defineStr&&p&&(l.push(n.defineStr),e[u]+=n.shaderNameSuffixes))}return{programName:h,shaderSnippetNames:d,shaderNames:e,defines:l}};return c}()})},"esri/layers/vectorTiles/views/webgl/Util":function(){define(["require","exports","../../core/tsSupport/assignHelper",
"../../core/Error"],function(g,t,a,b){return function(){function c(){}c.vertexCount=function(k,h){return k.vertexBuffers[h].size/c.getStride(k.layout[h])};c.getStride=function(k){return k[0].stride};c.getBytesPerElement=function(k){switch(k){case 5126:return 4;case 5124:return 4;case 5125:return 4;case 5122:return 2;case 5123:return 2;case 5120:return 1;case 5121:return 1;default:throw Error("Unknown data type");}};c.addDescriptor=function(k,h,d,e,l,f){var n=c.getBytesPerElement(e);if(0<k.length){var u=
k[0].stride,p=u+n*d;k.forEach(function(r){return r.stride=p});k.push({name:h,count:d,type:e,offset:u,stride:p,normalized:l,divisor:f})}else k.push({name:h,count:d,type:e,offset:0,stride:n*d,normalized:l,divisor:f})};c.assertCompatibleVertexAttributeLocations=function(k,h){return k.locations===h.locations};c.hasAttribute=function(k,h){for(var d=0;d<k.length;d++)if(k[d].name===h)return!0;return!1};c.findAttribute=function(k,h){for(var d=0;d<k.length;d++)if(k[d].name===h)return k[d];return null};c.copyFramebufferToTexture=
function(k,h,d,e,l){void 0===l&&(l=0);var f=k.getBoundFramebufferObject(),n=k.getBoundTexture(0);k.bindFramebuffer(h);k.bindTexture(d,0);k.gl.copyTexImage2D(k.gl.TEXTURE_2D,l,d.descriptor.pixelFormat,e[0],e[1],e[2],e[3],0);k.gl.flush();k.bindFramebuffer(f);k.bindTexture(n,0)};c.assert=function(k,h){if(!k)throw new b(h);};c.setBaseInstanceOffset=function(k,h){var d={},e;for(e in k)d[e]=k[e].map(function(l){return l.divisor?a({},l,{baseInstance:h}):l});return d};c.bindVertexBufferLayout=function(k,
h,d,e,l){var f=k.gl,n=k.capabilities.instancing;k.bindBuffer(d);e.forEach(function(u){var p=h[u.name],r=(l?l:0+u.baseInstance?u.baseInstance:0)*u.stride;if(4>=u.count)f.vertexAttribPointer(p,u.count,u.type,u.normalized,u.stride,u.offset+r),f.enableVertexAttribArray(p),u.divisor&&0<u.divisor&&n&&n.vertexAttribDivisor(p,u.divisor);else if(9===u.count)for(var q=0;3>q;q++)f.vertexAttribPointer(p+q,3,u.type,u.normalized,u.stride,u.offset+12*q+r),f.enableVertexAttribArray(p+q),u.divisor&&0<u.divisor&&n&&
n.vertexAttribDivisor(p+q,u.divisor);else if(16===u.count)for(q=0;4>q;q++)f.vertexAttribPointer(p+q,4,u.type,u.normalized,u.stride,u.offset+16*q+r),f.enableVertexAttribArray(p+q),u.divisor&&0<u.divisor&&n&&n.vertexAttribDivisor(p+q,u.divisor)})};c.unbindVertexBufferLayout=function(k,h,d,e){var l=k.gl;k.bindBuffer(d);e.forEach(function(f){var n=h[f.name];if(4>=f.count)l.disableVertexAttribArray(n);else if(9===f.count)for(f=0;3>f;f++)l.disableVertexAttribArray(n+f);else if(16===f.count)for(f=0;4>f;f++)l.disableVertexAttribArray(n+
f)});k.unbindBuffer(34962)};return c}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/Utils":function(){define("require exports ../../../../arcade/Dictionary ../../../../arcade/Feature ../../../../core/Logger ../../../../core/screenUtils ../../../../support/arcadeUtils ./color ./enums ./SymbolProperties".split(" "),function(g,t,a,b,c,k,h,d,e,l){function f(D){return D.map(function(B){return B.name})}function n(D){for(var B={},y=0;y<D.length;y++){var w=D[y];B[w.name]=w.strideInBytes}return B}function u(D,
B){switch(D){case e.WGLGeometryType.MARKER:return B?t.C_ICON_VERTEX_NAMES_VV:t.C_ICON_VERTEX_NAMES;case e.WGLGeometryType.FILL:return B?t.C_FILL_VERTEX_NAMES_VV:t.C_FILL_VERTEX_NAMES;case e.WGLGeometryType.LINE:return B?t.C_LINE_VERTEX_NAMES_VV:t.C_LINE_VERTEX_NAMES;case e.WGLGeometryType.TEXT:return B?t.C_TEXT_VERTEX_NAMES_VV:t.C_TEXT_VERTEX_NAMES;case e.WGLGeometryType.LABEL:return t.C_LABEL_VERTEX_NAMES}return null}function p(D){switch(D){case "esriSMS":return"simple-marker";case "esriPMS":return"picture-marker";
case "esriSLS":return"simple-line";case "esriPLS":return"picture-line";case "esriSFS":return"simple-fill";case "esriPFS":return"picture-fill";case "esriTS":return"text"}return D}function r(D){if(D=p(D.type)){switch(D){case "simple-marker":case "picture-marker":return!0;case "CIMPointSymbol":return!0}return!1}}function q(D){if(D=p(D.type)){switch(D){case "simple-fill":case "picture-fill":return!0;case "CIMPolygonSymbol":return!0}return!1}}function m(D){if(D=p(D.type)){switch(D){case "simple-line":case "picture-line":return!0;
case "CIMLineSymbol":return!0}return!1}}function v(D){if(D=p(D.type)){switch(D){case "text":return!0;case "CIMTextSymbol":return!0}return!1}}function x(D){return D&&D.length||0}function z(D){return"string"===typeof D}Object.defineProperty(t,"__esModule",{value:!0});var A=c.getLogger("esri.views.2d.engine.webgl.Utils");t.C_HITTEST_SEARCH_SIZE=4;t.C_VBO_GEOMETRY="geometry";t.C_VBO_PERINSTANCE="per_instance";t.C_VBO_PERINSTANCE_VV="per_instance_vv";t.C_VBO_VISIBILITY="visibility";t.C_VBO_VISIBILITY_RANGE=
"visibilityRange";t.C_ICON_VERTEX_DEF=[{name:t.C_VBO_GEOMETRY,strideInBytes:28,divisor:0}];t.C_ICON_VERTEX_DEF_VV=[{name:t.C_VBO_GEOMETRY,strideInBytes:44,divisor:0}];t.C_ICON_HEATMAP=[{name:t.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];t.C_FILL_VERTEX_DEF=[{name:t.C_VBO_GEOMETRY,strideInBytes:24,divisor:0}];t.C_FILL_VERTEX_DEF_VV=[{name:t.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];t.C_LINE_VERTEX_DEF=[{name:t.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];t.C_LINE_VERTEX_DEF_VV=[{name:t.C_VBO_GEOMETRY,
strideInBytes:44,divisor:0}];t.C_TEXT_VERTEX_DEF=[{name:t.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];t.C_TEXT_VERTEX_DEF_VV=[{name:t.C_VBO_GEOMETRY,strideInBytes:36,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];t.C_LABEL_VERTEX_DEF=[{name:t.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0},{name:t.C_VBO_VISIBILITY_RANGE,strideInBytes:2,divisor:0}];t.C_ICON_VERTEX_NAMES=f(t.C_ICON_VERTEX_DEF);
t.C_ICON_VERTEX_NAMES_VV=f(t.C_ICON_VERTEX_DEF_VV);t.C_FILL_VERTEX_NAMES=f(t.C_FILL_VERTEX_DEF);t.C_FILL_VERTEX_NAMES_VV=f(t.C_FILL_VERTEX_DEF_VV);t.C_LINE_VERTEX_NAMES=f(t.C_LINE_VERTEX_DEF);t.C_LINE_VERTEX_NAMES_VV=f(t.C_LINE_VERTEX_DEF_VV);t.C_TEXT_VERTEX_NAMES=f(t.C_TEXT_VERTEX_DEF);t.C_TEXT_VERTEX_NAMES_VV=f(t.C_TEXT_VERTEX_DEF_VV);t.C_LABEL_VERTEX_NAMES=f(t.C_LABEL_VERTEX_DEF);t.C_ICON_STRIDE_SPEC=n(t.C_ICON_VERTEX_DEF);t.C_ICON_STRIDE_SPEC_VV=n(t.C_ICON_VERTEX_DEF_VV);t.C_ICON_STRIDE_SPEC_HEATMAP=
n(t.C_ICON_HEATMAP);t.C_FILL_STRIDE_SPEC=n(t.C_FILL_VERTEX_DEF);t.C_FILL_STRIDE_SPEC_VV=n(t.C_FILL_VERTEX_DEF_VV);t.C_LINE_STRIDE_SPEC=n(t.C_LINE_VERTEX_DEF);t.C_LINE_STRIDE_SPEC_VV=n(t.C_LINE_VERTEX_DEF_VV);t.C_TEXT_STRIDE_SPEC=n(t.C_TEXT_VERTEX_DEF);t.C_TEXT_STRIDE_SPEC_VV=n(t.C_TEXT_VERTEX_DEF_VV);t.C_LABEL_STRIDE_SPEC=n(t.C_LABEL_VERTEX_DEF);t.getStrides=function(D,B,y){void 0===y&&(y=!1);switch(D){case e.WGLGeometryType.MARKER:return B?t.C_ICON_STRIDE_SPEC_VV:y?t.C_ICON_STRIDE_SPEC_HEATMAP:t.C_ICON_STRIDE_SPEC;
case e.WGLGeometryType.FILL:return B?t.C_FILL_STRIDE_SPEC_VV:t.C_FILL_STRIDE_SPEC;case e.WGLGeometryType.LINE:return B?t.C_LINE_STRIDE_SPEC_VV:t.C_LINE_STRIDE_SPEC;case e.WGLGeometryType.TEXT:return B?t.C_TEXT_STRIDE_SPEC_VV:t.C_TEXT_STRIDE_SPEC;case e.WGLGeometryType.LABEL:return t.C_LABEL_STRIDE_SPEC}return null};t.getNamedBuffers=u;t.getSymbolGeometryType=function(D){return r(D)?e.WGLGeometryType.MARKER:m(D)?e.WGLGeometryType.LINE:q(D)?e.WGLGeometryType.FILL:v(D)?e.WGLGeometryType.TEXT:e.WGLGeometryType.UNKNOWN};
t.normalizeSymbolType=p;t.isMarkerSymbol=r;t.isFillSymbol=q;t.isLineSymbol=m;t.isPictureSymbol=function(D){if(D=p(D.type))switch(D){case "picture-marker":case "picture-line":case "picture-fill":return!0}return!1};t.isTextSymbol=v;t.getTextProperties=function(D){return l.TextProperties.pool.acquire(D.color?d.copyAndPremultiply(D.color):[255,255,255,255],D.haloColor?d.copyAndPremultiply(D.haloColor):[255,255,255,255],k.pt2px(D.haloSize),k.pt2px(D.font.size),D.angle*Math.PI/180,D.xoffset/D.font.size,
D.yoffset/D.font.size,"left"===D.horizontalAlignment?0:"right"===D.horizontalAlignment?1:.5,"top"===D.verticalAlignment?0:"bottom"===D.verticalAlignment?1:.5)};t.isSameUniformValue=function(D,B){return!1};t.isSameMaterialInfo=function(D,B){if(D.materialKey!==B.materialKey||x(D.texBindingInfo)!==x(B.texBindingInfo)||x(D.materialParams)!==x(B.materialParams))return!1;for(var y=D.texBindingInfo.length,w=0;w<y;++w){var E=D.texBindingInfo[w],F=B.texBindingInfo[w];if(E.unit!==F.unit||E.pageId!==F.pageId||
E.semantic!==F.semantic)return!1}D=D.materialParams.length;for(w=0;w<D;)return!1;return!0};t.serializeString=function(D,B,y){for(var w=0,E=D.length,F=0;F<E;++F)B&&(B[y+w]=D.charCodeAt(F)),++w;B&&(B[y+w]=0);++w;return w};t.deserializeString=function(D,B,y){var w=0;D.s="";for(var E=!0;E;){var F=B[y+w];++w;0!==F?D.s+=String.fromCharCode(F):E=!1}return w};t.isDefined=function(D){return null!==D&&void 0!==D};t.isNumber=function(D){return"number"===typeof D};t.isString=z;t.isStringOrNull=function(D){return null==
D||z(D)};t.lerp=function(D,B,y){return D+(B-D)*y};g=function(){function D(){this._arr=[];this._push=this._push.bind(this)}D.prototype._push=function(B,y){this._arr.push(y)};D.prototype.getKeys=function(B){this._arr.length=0;B&&B.forEach(this._push);return this._arr};return D}();t.KeysGetter=g;g=function(){function D(){this._arr=[];this._push=this._push.bind(this)}D.prototype._push=function(B,y){this._arr.push(B)};D.prototype.getValues=function(B){this._arr.length=0;B&&B.forEach(this._push);return this._arr};
return D}();t.ValuesGetter=g;t.getCapType=function(D){switch(D){case "butt":return e.CapType.BUTT;case "round":return e.CapType.ROUND;case "square":return e.CapType.SQUARE;default:return A.error("Cannot interpret unknown cap: "+D),e.CapType.UNKNOWN}};t.getJoinType=function(D){switch(D){case "miter":return e.JoinType.MITER;case "bevel":return e.JoinType.BEVEL;case "round":return e.JoinType.ROUND;default:return A.error("Cannot interpret unknown join: "+D),e.JoinType.UNKNOWN}};t.getVVType=function(D){switch(D){case "opacity":return e.VVType.OPACITY;
case "color":return e.VVType.COLOR;case "rotation":return e.VVType.ROTATION;case "size":return e.VVType.SIZE;default:return A.error("Cannot interpret unknown vv: "+D),null}};t.createArcadeFunction=function(D,B){var y=D.spatialReference,w=D.layer,E=h.createFunction(D.valueExpression),F=new b;return function(H,M){F.repurposeFromGraphicLikeObject(H.geometry,H.attributes,w);H=M&&new a({viewingMode:M.viewingMode,scale:M.scale});H=h.executeFunction(E,{vars:{$feature:F,$view:H||{}},spatialReference:y});
return B?B(H):H}};t.copyMeshData=function(D,B,y,w,E,F,H){for(var M in F){var R=F[M].stride,V=F[M].data,da=y[M].data,ha=R*E.vertexCount/4,fa=R*D/4,X=R*E.vertexFrom/4;for(R=0;R<ha;++R)da[R+fa]=V[R+X]}y=E.indexCount;for(R=0;R<y;++R)w[R+B]=H[R+E.indexFrom]-E.vertexFrom+D};t.C_VBO_INFO=(C={},C[t.C_VBO_GEOMETRY]=35044,C[t.C_VBO_VISIBILITY]=35044,C[t.C_VBO_VISIBILITY_RANGE]=35048,C);t.createGeometryData=function(D,B,y){for(var w=[],E=0;5>E;++E){for(var F={},H=0,M=u(E,D);H<M.length;H++){var R=M[H];F[R]={data:y(E,
R)}}w.push({data:B(E),buffers:F})}return w};var C})},"esri/layers/vectorTiles/arcade/Dictionary":function(){define(["require","exports","esri/arcade/Dictionary"],function(g,t,a){return a})},"esri/arcade/Dictionary":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./ArcadeDate ./executionError ./ImmutableArray ./languageUtils ../geometry/Geometry".split(" "),function(g,t,a,b,c,k,h,d,e){function l(n,u,p){void 0===p&&(p=!1);if(null===n||void 0===n)return null;
if(d.isNumber(n))return d.toNumber(n);if(d.isBoolean(n))return d.toBoolean(n);if(d.isString(n))return d.toString(n);if(d.isDate(n))return d.toDate(n,u);if(d.isArray(n)){for(var r=[],q=0;q<n.length;q++)r.push(l(n[q],u,p));return r}q=new f;q.immutable=!1;for(var m=0,v=Object.keys(n);m<v.length;m++){var x=v[m];r=n[x];void 0!==r&&q.setField(x,l(r,u,p))}q.immutable=p;return q}var f=function(){function n(u){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;
this.attributes=u instanceof n?u.attributes:void 0===u?{}:null===u?{}:u}n.prototype.field=function(u){var p=u.toLowerCase(),r=this.attributes[u];if(void 0!==r)return r;for(var q in this.attributes)if(q.toLowerCase()===p)return this.attributes[q];throw new k.ArcadeExecutionError(null,k.ExecutionErrorCodes.FieldNotFound,null,{key:u});};n.prototype.setField=function(u,p){if(this.immutable)throw new k.ArcadeExecutionError(null,k.ExecutionErrorCodes.Immutable,null);if(d.isFunctionParameter(p))throw new k.ArcadeExecutionError(null,
k.ExecutionErrorCodes.NoFunctionInDictionary,null);var r=u.toLowerCase();p instanceof Date&&(p=c.ArcadeDate.dateJSToArcadeDate(p));if(void 0===this.attributes[u])for(var q in this.attributes)if(q.toLowerCase()===r){this.attributes[q]=p;return}this.attributes[u]=p};n.prototype.hasField=function(u){var p=u.toLowerCase();if(void 0!==this.attributes[u])return!0;for(var r in this.attributes)if(r.toLowerCase()===p)return!0;return!1};n.prototype.keys=function(){var u=[],p;for(p in this.attributes)u.push(p);
return u=u.sort()};n.prototype.castToText=function(u){void 0===u&&(u=!1);var p="",r;for(r in this.attributes){""!==p&&(p+=",");var q=this.attributes[r];null==q?p+=JSON.stringify(r)+":null":d.isBoolean(q)||d.isNumber(q)||d.isString(q)?p+=JSON.stringify(r)+":"+JSON.stringify(q):q instanceof e?p+=JSON.stringify(r)+":"+d.toStringExplicit(q):q instanceof h?p+=JSON.stringify(r)+":"+d.toStringExplicit(q,null,u):q instanceof Array?p+=JSON.stringify(r)+":"+d.toStringExplicit(q,null,u):q instanceof c.ArcadeDate?
p=u?p+(JSON.stringify(r)+":"+JSON.stringify(q.getTime())):p+(JSON.stringify(r)+":"+q.stringify()):null!==q&&"object"===typeof q&&void 0!==q.castToText&&(p+=JSON.stringify(r)+":"+q.castToText(u))}return"{"+p+"}"};n.convertObjectToArcadeDictionary=function(u,p,r){void 0===r&&(r=!0);var q=new n;q.immutable=!1;for(var m in u){var v=u[m];void 0!==v&&q.setField(m.toString(),l(v,p))}q.immutable=r;return q};n.convertJsonToArcade=function(u,p,r){void 0===r&&(r=!1);return l(u,p,r)};n.prototype.castAsJson=function(u){void 0===
u&&(u=null);var p={};for(q in this.attributes){var r=this.attributes[q];if(void 0!==r){if(null===u||void 0===u?0:u.keyTranslate)var q=u.keyTranslate(q);p[q]=d.castAsJson(r,u)}}return p};n.prototype.castDictionaryValueAsJsonAsync=function(u,p,r,q,m){void 0===q&&(q=null);return a(this,void 0,void 0,function(){var v;return b(this,function(x){switch(x.label){case 0:return[4,d.castAsJsonAsync(r,q,m)];case 1:return v=x.sent(),u[p]=v,[2,v]}})})};n.prototype.castAsJsonAsync=function(u,p){void 0===u&&(u=null);
void 0===p&&(p=null);return a(this,void 0,void 0,function(){var r,q,m,v;return b(this,function(x){switch(x.label){case 0:r={};q=[];for(m in this.attributes){v=this.attributes[m];if(null===p||void 0===p?0:p.keyTranslate)m=p.keyTranslate(m);void 0!==v&&(d.isSimpleType(v)||v instanceof e||v instanceof c.ArcadeDate?r[m]=d.castAsJson(v,p):q.push(this.castDictionaryValueAsJsonAsync(r,m,v,u,p)))}return 0<q.length?[4,Promise.all(q)]:[3,2];case 1:x.sent(),x.label=2;case 2:return[2,r]}})})};return n}();return f})},
"esri/arcade/polyfill/tsSupport/awaiter":function(){define([],function(){return function(){return function(g,t,a,b){function c(k){return k instanceof a?k:new a(function(h){h(k)})}return new (a||(a=Promise))(function(k,h){function d(f){try{l(b.next(f))}catch(n){h(n)}}function e(f){try{l(b["throw"](f))}catch(n){h(n)}}function l(f){f.done?k(f.value):c(f.value).then(d,e)}l((b=b.apply(g,t||[])).next())})}}()})},"esri/arcade/polyfill/tsSupport/generator":function(){define([],function(){return function(){return function(g,
t){function a(l){return function(f){return b([l,f])}}function b(l){if(k)throw new TypeError("Generator is already executing.");for(;c;)try{if(k=1,h&&(d=l[0]&2?h["return"]:l[0]?h["throw"]||((d=h["return"])&&d.call(h),0):h.next)&&!(d=d.call(h,l[1])).done)return d;if(h=0,d)l=[l[0]&2,d.value];switch(l[0]){case 0:case 1:d=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++;h=l[1];l=[0];continue;case 7:l=c.ops.pop();c.trys.pop();continue;default:if(!(d=c.trys,d=0<d.length&&d[d.length-
1])&&(6===l[0]||2===l[0])){c=0;continue}if(3===l[0]&&(!d||l[1]>d[0]&&l[1]<d[3]))c.label=l[1];else if(6===l[0]&&c.label<d[1])c.label=d[1],d=l;else if(d&&c.label<d[2])c.label=d[2],c.ops.push(l);else{d[2]&&c.ops.pop();c.trys.pop();continue}}l=t.call(g,c)}catch(f){l=[6,f],h=0}finally{k=d=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},k,h,d,e;return e={next:a(0),"throw":a(1),"return":a(2)},"function"===typeof Symbol&&
(e[Symbol.iterator]=function(){return this}),e}}()})},"esri/arcade/ArcadeDate":function(){define(["require","exports","./polyfill/tsSupport/extends","./executionError","../libs/luxon/luxon"],function(g,t,a,b,c){function k(f){if(f instanceof c.Zone)return f;if("system"===f.toLowerCase())return"system";if("utc"===f.toLowerCase())return"utc";if("unknown"===f.toLowerCase())return d.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(f)){var n=c.FixedOffsetZone.parseSpecifier("UTC"+(f.startsWith("+")||
f.startsWith("-")?"":"+")+f);if(n)return n}f=c.IANAZone.create(f);if(!f.isValid)throw new l(e.TimeZoneNotRecognised);return f}var h;Object.defineProperty(t,"__esModule",{value:!0});t.createDateTimeZone=t.ArcadeDate=t.ArcadeDateError=t.ArcadeDateErrorMessages=t.ArcadeDateErrorCodes=t.UnknownTimeZone=void 0;var d=function(){function f(){}f.instance=new c.IANAZone("Etc/UTC");return f}();t.UnknownTimeZone=d;var e;(e=t.ArcadeDateErrorCodes||(t.ArcadeDateErrorCodes={})).TimeZoneNotRecognised="TimeZoneNotRecognised";
t.ArcadeDateErrorMessages=(h={},h[e.TimeZoneNotRecognised]="Timezone identifier has not been recognised.",h);var l=function(f){function n(u,p){u=f.call(this,b.doSubstitutions(t.ArcadeDateErrorMessages[u],p))||this;u.declaredRootClass="esri.arcade.arcadedate.dateerror";Error.captureStackTrace&&Error.captureStackTrace(u,n);return u}a(n,f);return n}(Error);t.ArcadeDateError=l;g=function(){function f(n){this._date=n;this.declaredRootClass="esri.arcade.arcadedate"}f.fromParts=function(n,u,p,r,q,m,v,x){void 0===
n&&(n=0);void 0===u&&(u=1);void 0===p&&(p=1);void 0===r&&(r=0);void 0===q&&(q=0);void 0===m&&(m=0);void 0===v&&(v=0);if(isNaN(n)||isNaN(u)||isNaN(p)||isNaN(r)||isNaN(q)||isNaN(m)||isNaN(v))return null;var z=0,A=c.DateTime.local(n,u).daysInMonth;1>p&&(z=p-1,p=1);p>A&&(z=p-A,p=A);A=0;12<u?(A=u-12,u=12):1>u&&(A=u-1,u=1);var C=0;59<q?(C=q-59,q=59):0>q&&(C=q,q=0);var D=0;59<m?(D=m-59,m=59):0>m&&(D=m,m=0);var B=0;999<v?(B=v-999,v=999):0>v&&(B=v,v=0);n=c.DateTime.fromObject({day:p,year:n,month:u,hour:r,
minute:q,second:m,millisecond:v},{zone:k(x)});0!==A&&(n=n.plus({months:A}));0!==z&&(n=n.plus({days:z}));0!==C&&(n=n.plus({minutes:C}));0!==D&&(n=n.plus({seconds:D}));0!==B&&(n=n.plus({milliseconds:B}));return new f(n)};Object.defineProperty(f,"systemTimeZoneCanonicalName",{get:function(){var n;return null!==(n=Intl.DateTimeFormat().resolvedOptions().timeZone)&&void 0!==n?n:"system"},enumerable:!1,configurable:!0});f.arcadeDateAndZoneToArcadeDate=function(n,u){var p=k(u);return n.isUnknownTimeZone||
p===d.instance?f.fromParts(n.year,n.monthJS+1,n.day,n.hour,n.minute,n.second,n.millisecond,p):new f(n._date.setZone(u))};f.dateJSToArcadeDate=function(n){return new f(c.DateTime.fromJSDate(n,{zone:"system"}))};f.dateJSAndZoneToArcadeDate=function(n,u){void 0===u&&(u="system");return new f(c.DateTime.fromJSDate(n,{zone:u}))};f.unknownEpochToArcadeDate=function(n){return new f(c.DateTime.fromMillis(n,{zone:d.instance}))};f.unknownDateJSToArcadeDate=function(n){return f.arcadeDateAndZoneToArcadeDate(f.dateJSToArcadeDate(n),
d.instance)};f.epochToArcadeDate=function(n,u){void 0===u&&(u="system");return new f(c.DateTime.fromMillis(n,{zone:u}))};f.dateTimeToArcadeDate=function(n){return new f(n)};f.prototype.changeTimeZone=function(n){n=k(n);return f.dateTimeToArcadeDate(this._date.setZone(n))};f.dateTimeAndZoneToArcadeDate=function(n,u){u=k(u);return n.zone===d.instance||u===d.instance?f.fromParts(n.year,n.month,n.day,n.hour,n.minute,n.second,n.millisecond,u):new f(n.setZone(u))};f.nowToArcadeDate=function(n){return new f(c.DateTime.fromJSDate(new Date,
{zone:n}))};f.nowUTCToArcadeDate=function(){return new f(c.DateTime.utc())};Object.defineProperty(f.prototype,"isSystem",{get:function(){return"system"===this.timeZone||this.timeZone===f.systemTimeZoneCanonicalName},enumerable:!1,configurable:!0});f.prototype.equals=function(n){return this.isSystem&&n.isSystem?this.toNumber()===n.toNumber():this.isUnknownTimeZone!==n.isUnknownTimeZone?!1:this._date.equals(n._date)};Object.defineProperty(f.prototype,"isUnknownTimeZone",{get:function(){return this._date.zone===
d.instance},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"isValid",{get:function(){return this._date.isValid},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"hour",{get:function(){return this._date.hour},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"second",{get:function(){return this._date.second},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"day",{get:function(){return this._date.day},enumerable:!1,configurable:!0});
Object.defineProperty(f.prototype,"dayOfWeekISO",{get:function(){return this._date.weekday},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"dayOfWeekJS",{get:function(){var n=this._date.weekday;6<n&&(n=0);return n},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"millisecond",{get:function(){return this._date.millisecond},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"monthISO",{get:function(){return this._date.month},enumerable:!1,configurable:!0});
Object.defineProperty(f.prototype,"weekISO",{get:function(){return this._date.weekNumber},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"yearISO",{get:function(){return this._date.weekYear},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"monthJS",{get:function(){return this._date.month-1},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"year",{get:function(){return this._date.year},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,
"minute",{get:function(){return this._date.minute},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"zone",{get:function(){return this._date.zone},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"timeZoneOffset",{get:function(){return this.isUnknownTimeZone?0:this._date.offset},enumerable:!1,configurable:!0});Object.defineProperty(f.prototype,"timeZone",{get:function(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";var n=
this.zone;return"fixed"===n.type?0===n.fixed?"utc":n.formatOffset(0,"short"):n.name},enumerable:!1,configurable:!0});f.prototype.stringify=function(){return JSON.stringify(this.toJSDate())};f.prototype.plus=function(n){return new f(this._date.plus(n))};f.prototype.diff=function(n,u){void 0===u&&(u="milliseconds");return this._date.diff(n._date,u)[u]};f.prototype.toISOString=function(n){return n?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})};
f.prototype.toFormat=function(n,u){return this._date.toFormat(n,u)};f.prototype.toJSDate=function(){return this._date.toJSDate()};f.prototype.toSQLString=function(){return"timestamp '"+this._date.toFormat("yyyy-LL-dd HH:mm:ss")+"'"};f.prototype.toDateTime=function(){return this._date};f.prototype.toNumber=function(){return this._date.toMillis()};f.prototype.getTime=function(){return this._date.toMillis()};f.prototype.toUTC=function(){return new f(this._date.toUTC())};f.prototype.toLocal=function(){return new f(this._date.toLocal())};
f.prototype.toString=function(){return this.toISOString(!0)};return f}();t.ArcadeDate=g;t.createDateTimeZone=k})},"esri/arcade/polyfill/tsSupport/extends":function(){define([],function(){return function(){var g=function(t,a){g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var k in c)Object.prototype.hasOwnProperty.call(c,k)&&(b[k]=c[k])};return g(t,a)};return function(t,a){function b(){this.constructor=t}if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+
String(a)+" is not a constructor or null");g(t,a);t.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b)}}()})},"esri/arcade/executionError":function(){define(["require","exports","./polyfill/tsSupport/assign","./polyfill/tsSupport/spreadarray","./polyfill/tsSupport/extends"],function(g,t,a,b,c){function k(f){var n,u;return f&&f.loc?"Line : "+(null===(n=f.loc.start)||void 0===n?void 0:n.line)+", "+(null===(u=f.loc.start)||void 0===u?void 0:u.column)+": ":""}function h(f,n){try{if(!n)return f;
for(var u in n){var p=n[u];p||(p="");f=f.replace("{"+u+"}",n[u])}}catch(r){}return f}var d,e;Object.defineProperty(t,"__esModule",{value:!0});t.parsingValidationMessage=t.ModuleError=t.ModuleErrorMessages=t.ModuleErrorCodes=t.ensureArcadeExecutionError=t.doSubstitutions=t.ArcadeUncompilableError=t.ArcadeCompilationError=t.ArcadeExecutionError=t.LocatableArcadeExecutionError=t.ErrorWithCause=t.ExecutionErrorMessages=t.ExecutionErrorCodes=void 0;(function(f){f.AsyncNotEnabled="AsyncNotEnabled";f.ModulesNotSupported=
"ModulesNotSupported";f.CircularModules="CircularModules";f.NeverReach="NeverReach";f.UnsupportedHashType="UnsupportedHashType";f.InvalidParameter="InvalidParameter";f.UnexpectedToken="UnexpectedToken";f.Unrecognised="Unrecognised";f.UnrecognisedType="UnrecognisedType";f.MaximumCallDepth="MaximumCallDepth";f.BooleanConditionRequired="BooleanConditionRequired";f.TypeNotAllowedInFeature="TypeNotAllowedInFeature";f.KeyMustBeString="KeyMustBeString";f.WrongNumberOfParameters="WrongNumberOfParameters";
f.CallNonFunction="CallNonFunction";f.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";f.NoFunctionInDictionary="NoFunctionInDictionary";f.NoFunctionInArray="NoFunctionInArray";f.AssignModuleFunction="AssignModuleFunction";f.LogicExpressionOrAnd="LogicExpressionOrAnd";f.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";f.FuncionNotFound="FunctionNotFound";f.InvalidMemberAccessKey="InvalidMemberAccessKey";f.UnsupportedUnaryOperator="UnsupportUnaryOperator";f.InvalidIdentifier="InvalidIdentifier";
f.MemberOfNull="MemberOfNull";f.UnsupportedOperator="UnsupportedOperator";f.Cancelled="Cancelled";f.ModuleAccessorMustBeString="ModuleAccessorMustBeString";f.ModuleExportNotFound="ModuleExportNotFound";f.Immutable="Immutable";f.OutOfBounds="OutOfBounds";f.IllegalResult="IllegalResult";f.FieldNotFound="FieldNotFound";f.PortalRequired="PortalRequired";f.LogicError="LogicError";f.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";f.KeyAccessorMustBeString="KeyAccessorMustBeString";f.WrongSpatialReference=
"WrongSpatialReference"})(g=t.ExecutionErrorCodes||(t.ExecutionErrorCodes={}));t.ExecutionErrorMessages=(d={},d[g.TypeNotAllowedInFeature]="Feature attributes only support dates, numbers, strings, guids.",d[g.LogicError]="Logic error - {reason}",d[g.NeverReach]="Encountered unreachable logic",d[g.AsyncNotEnabled]="Async Arcade must be enabled for this script",d[g.ModuleAccessorMustBeString]="Module accessor must be a string",d[g.ModuleExportNotFound]="Module has no export with provided identifier",
d[g.ModulesNotSupported]="Current profile does not support modules",d[g.ArrayAccessorMustBeNumber]="Array accessor must be a number",d[g.FuncionNotFound]="Function not found",d[g.FieldNotFound]="Key not found - {key}",d[g.CircularModules]="Circular module dependencies are not allowed",d[g.Cancelled]="Execution cancelled",d[g.UnsupportedHashType]="Type not supported in hash function",d[g.IllegalResult]="Value is not a supported return type",d[g.PortalRequired]="Portal is required",d[g.InvalidParameter]=
"Invalid parameter",d[g.WrongNumberOfParameters]="Call with wrong number of parameters",d[g.Unrecognised]="Unrecognised code structure",d[g.UnrecognisedType]="Unrecognised type",d[g.WrongSpatialReference]="Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",d[g.BooleanConditionRequired]="Conditions must use booleans",d[g.NoFunctionInDictionary]="Dictionaries cannot contain functions.",d[g.NoFunctionInArray]="Arrays cannot contain functions.",d[g.NoFunctionInTemplateLiteral]=
"Template Literals do not expect functions by value.",d[g.KeyAccessorMustBeString]="Accessor must be a string",d[g.KeyMustBeString]="Object keys must be a string",d[g.Immutable]="Object is immutable",d[g.InvalidParameter]="Invalid parameter",d[g.UnexpectedToken]="Unexpected token",d[g.MemberOfNull]="Cannot access property of null object",d[g.MaximumCallDepth]="Exceeded maximum function depth",d[g.OutOfBounds]="Out of bounds",d[g.InvalidIdentifier]="Identifier not recognised",d[g.FuncionNotFound]=
"Function not found",d[g.CallNonFunction]="Expression is not a function",d[g.InvalidMemberAccessKey]="Cannot access value using a key of this type",d[g.AssignModuleFunction]="Cannot assign function to module variable",d[g.UnsupportedUnaryOperator]="Unsupported unary operator",d[g.UnsupportedOperator]="Unsupported operator",d[g.LogicalExpressionOnlyBoolean]="Logical expressions must be boolean",d[g.LogicExpressionOrAnd]="Logical expression can only be combined with || or \x26\x26",d);d=function(f){function n(){for(var u=
[],p=0;p<arguments.length;p++)u[p]=arguments[p];return f.apply(this,u)||this}c(n,f);return n}(Error);t.ErrorWithCause=d;var l=function(f){function n(u,p){u=f.call(this,k(p)+u.message,{cause:u})||this;u.loc=null;Error.captureStackTrace&&Error.captureStackTrace(u,n);p&&p.loc&&(u.loc=p.loc);return u}c(n,f);return n}(d);t.LocatableArcadeExecutionError=l;d=function(f){function n(u,p,r,q){u=f.call(this,"Execution error - "+k(r)+h(t.ExecutionErrorMessages[p],q))||this;u.loc=null;u.declaredRootClass="esri.arcade.arcadeexecutionerror";
Error.captureStackTrace&&Error.captureStackTrace(u,n);r&&r.loc&&(u.loc=r.loc);return u}c(n,f);return n}(Error);t.ArcadeExecutionError=d;d=function(f){function n(u,p,r,q){u=f.call(this,"Compilation error - "+k(r)+h(t.ExecutionErrorMessages[p],q))||this;u.loc=null;u.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(u,n);r&&r.loc&&(u.loc=r.loc);return u}c(n,f);return n}(Error);t.ArcadeCompilationError=d;d=function(f){function n(){var u=f.call(this,
"Uncompilable code structures")||this;u.declaredRootClass="esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(u,n);return u}c(n,f);return n}(Error);t.ArcadeUncompilableError=d;t.doSubstitutions=h;t.ensureArcadeExecutionError=function(f,n,u){return"esri.arcade.arcadeexecutionerror"===u.declaredRootClass||"esri.arcade.arcadecompilationerror"===u.declaredRootClass?null===u.loc&&n&&n.loc?new l(u,{cause:u}):u:n&&n.loc?new l(u,{cause:u}):u};(function(f){f.UnrecognisedUri=
"UnrecognisedUri";f.UnsupportedUriProtocol="UnsupportedUriProtocol"})(d=t.ModuleErrorCodes||(t.ModuleErrorCodes={}));t.ModuleErrorMessages=(e={},e[d.UnrecognisedUri]="Unrecognised uri - {uri}",e[d.UnsupportedUriProtocol]="Unrecognised uri protocol",e);e=function(f){function n(u,p){u=f.call(this,h(t.ModuleErrorMessages[u],p))||this;u.declaredRootClass="esri.arcade.arcademoduleerror";Error.captureStackTrace&&Error.captureStackTrace(u,n);return u}c(n,f);return n}(Error);t.ModuleError=e;t.parsingValidationMessage=
function(f,n,u){return"Parsing error - "+k(f)+h(t.ExecutionErrorMessages[n],u)}})},"esri/arcade/polyfill/tsSupport/assign":function(){define([],function(){return function(){return function(){return(Object.assign||function(g){for(var t,a=1,b=arguments.length;a<b;a++){t=arguments[a];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(g[c]=t[c])}return g}).apply(this,arguments)}}()})},"esri/arcade/polyfill/tsSupport/spreadarray":function(){define([],function(){return function(){return function(g,
t,a){if(a||2===arguments.length)for(var b=0,c=t.length,k;b<c;b++)!k&&b in t||(k||(k=Array.prototype.slice.call(t,0,b)),k[b]=t[b]);return g.concat(k||Array.prototype.slice.call(t))}}()})},"esri/libs/luxon/luxon":function(){define(["exports"],function(g){function t(I,K){for(var G=0;G<K.length;G++){var J=K[G];J.enumerable=J.enumerable||!1;J.configurable=!0;"value"in J&&(J.writable=!0);var O=Object,aa=O.defineProperty;a:{var ma=J.key;if("object"===typeof ma&&null!==ma){var ra=ma[Symbol.toPrimitive];if(void 0!==
ra){ma=ra.call(ma,"string");if("object"!==typeof ma)break a;throw new TypeError("@@toPrimitive must return a primitive value.");}ma=String(ma)}}aa.call(O,I,"symbol"===typeof ma?ma:String(ma),J)}}function a(I,K,G){K&&t(I.prototype,K);G&&t(I,G);Object.defineProperty(I,"prototype",{writable:!1});return I}function b(){b=Object.assign?Object.assign.bind():function(I){for(var K=1;K<arguments.length;K++){var G=arguments[K],J;for(J in G)Object.prototype.hasOwnProperty.call(G,J)&&(I[J]=G[J])}return I};return b.apply(this,
arguments)}function c(I,K){I.prototype=Object.create(K.prototype);I.prototype.constructor=I;h(I,K)}function k(I){k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(K){return K.__proto__||Object.getPrototypeOf(K)};return k(I)}function h(I,K){h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(G,J){G.__proto__=J;return G};return h(I,K)}function d(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,
[],function(){})),!0}catch(I){return!1}}function e(I,K,G){e=d()?Reflect.construct.bind():function(J,O,aa){var ma=[null];ma.push.apply(ma,O);J=new (Function.bind.apply(J,ma));aa&&h(J,aa.prototype);return J};return e.apply(null,arguments)}function l(I){var K="function"===typeof Map?new Map:void 0;l=function(G){function J(){return e(G,arguments,k(this).constructor)}if(null===G||-1===Function.toString.call(G).indexOf("[native code]"))return G;if("function"!==typeof G)throw new TypeError("Super expression must either be null or a function");
if("undefined"!==typeof K){if(K.has(G))return K.get(G);K.set(G,J)}J.prototype=Object.create(G.prototype,{constructor:{value:J,enumerable:!1,writable:!0,configurable:!0}});return h(J,G)};return l(I)}function f(I,K){if(null==I)return{};var G={},J=Object.keys(I),O;for(O=0;O<J.length;O++){var aa=J[O];0<=K.indexOf(aa)||(G[aa]=I[aa])}return G}function n(I,K){if(I){if("string"===typeof I)return u(I,K);var G=Object.prototype.toString.call(I).slice(8,-1);"Object"===G&&I.constructor&&(G=I.constructor.name);
if("Map"===G||"Set"===G)return Array.from(I);if("Arguments"===G||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(G))return u(I,K)}}function u(I,K){if(null==K||K>I.length)K=I.length;for(var G=0,J=Array(K);G<K;G++)J[G]=I[G];return J}function p(I,K){var G="undefined"!==typeof Symbol&&I[Symbol.iterator]||I["@@iterator"];if(G)return(G=G.call(I)).next.bind(G);if(Array.isArray(I)||(G=n(I))||K&&I&&"number"===typeof I.length){G&&(I=G);var J=0;return function(){return J>=I.length?{done:!0}:{done:!1,value:I[J++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}function r(I,K){void 0===K&&(K={});var G=JSON.stringify([I,K]),J=Fb[G];J||(J=new Intl.DateTimeFormat(I,K),Fb[G]=J);return J}function q(I){for(var K=[],G=1;12>=G;G++){var J=Sa.utc(2016,G,1);K.push(I(J))}return K}function m(I){for(var K=[],G=1;7>=G;G++){var J=Sa.utc(2016,11,13+G);K.push(I(J))}return K}function v(I,K,G,J,O){I=I.listingMode(G);return"error"===I?null:"en"===I?J(K):O(K)}function x(I,K){if(z(I)||null===I)return K;if(I instanceof rb)return I;if("string"===typeof I){var G=I.toLowerCase();
return"default"===G?K:"local"===G||"system"===G?Gb.instance:"utc"===G||"gmt"===G?cb.utcInstance:cb.parseSpecifier(G)||ob.create(I)}return A(I)?cb.instance(I):"object"===typeof I&&I.offset&&"number"===typeof I.offset?I:new Ub(I)}function z(I){return"undefined"===typeof I}function A(I){return"number"===typeof I}function C(I){return"number"===typeof I&&0===I%1}function D(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(I){return!1}}function B(I,K,G){if(0!==I.length)return I.reduce(function(J,
O){O=[K(O),O];return J?G(J[0],O[0])===J[0]?J:O:O},null)[1]}function y(I,K){return K.reduce(function(G,J){G[J]=I[J];return G},{})}function w(I,K){return Object.prototype.hasOwnProperty.call(I,K)}function E(I,K,G){return C(I)&&I>=K&&I<=G}function F(I,K){void 0===K&&(K=2);return 0>I?"-"+(""+-I).padStart(K,"0"):(""+I).padStart(K,"0")}function H(I){if(!z(I)&&null!==I&&""!==I)return parseInt(I,10)}function M(I){if(!z(I)&&null!==I&&""!==I)return parseFloat(I)}function R(I){if(!z(I)&&null!==I&&""!==I)return I=
1E3*parseFloat("0."+I),Math.floor(I)}function V(I,K,G){void 0===G&&(G=!1);K=Math.pow(10,K);return(G?Math.trunc:Math.round)(I*K)/K}function da(I){return 0===I%4&&(0!==I%100||0===I%400)}function ha(I,K){var G=K-1;G=G-12*Math.floor(G/12)+1;return 2===G?da(I+(K-G)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][G-1]}function fa(I){var K=Date.UTC(I.year,I.month-1,I.day,I.hour,I.minute,I.second,I.millisecond);100>I.year&&0<=I.year&&(K=new Date(K),K.setUTCFullYear(K.getUTCFullYear()-1900));return+K}function X(I){var K=
I-1;K=(K+Math.floor(K/4)-Math.floor(K/100)+Math.floor(K/400))%7;return 4===(I+Math.floor(I/4)-Math.floor(I/100)+Math.floor(I/400))%7||3===K?53:52}function ca(I){return 99<I?I:I>Ra.twoDigitCutoffYear?1900+I:2E3+I}function Q(I,K,G,J){void 0===J&&(J=null);I=new Date(I);var O={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};J&&(O.timeZone=J);K=b({timeZoneName:K},O);return(G=(new Intl.DateTimeFormat(G,K)).formatToParts(I).find(function(aa){return"timezonename"===
aa.type.toLowerCase()}))?G.value:null}function U(I,K){I=parseInt(I,10);Number.isNaN(I)&&(I=0);K=parseInt(K,10)||0;K=0>I||Object.is(I,-0)?-K:K;return 60*I+K}function ia(I){var K=Number(I);if("boolean"===typeof I||""===I||Number.isNaN(K))throw new ab("Invalid unit value "+I);return K}function T(I,K){var G={},J;for(J in I)if(w(I,J)){var O=I[J];void 0!==O&&null!==O&&(G[K(J)]=ia(O))}return G}function Y(I,K){var G=Math.trunc(Math.abs(I/60)),J=Math.trunc(Math.abs(I%60));I=0<=I?"+":"-";switch(K){case "short":return""+
I+F(G,2)+":"+F(J,2);case "narrow":return""+I+G+(0<J?":"+J:"");case "techie":return""+I+F(G,2)+F(J,2);default:throw new RangeError("Value format "+K+" is out of range for property format");}}function ja(I){return y(I,["hour","minute","second","millisecond"])}function pa(I){switch(I){case "narrow":return[].concat(Sc);case "short":return[].concat(Vb);case "long":return[].concat(Tc);case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");
default:return null}}function ta(I){switch(I){case "narrow":return[].concat(Uc);case "short":return[].concat(Wb);case "long":return[].concat(Xb);case "numeric":return"1234567".split("");default:return null}}function W(I){switch(I){case "narrow":return[].concat(Vc);case "short":return[].concat(Wc);case "long":return[].concat(Xc);default:return null}}function S(I,K,G,J){void 0===G&&(G="always");void 0===J&&(J=!1);var O={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week",
"wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},aa=-1===["hours","minutes","seconds"].indexOf(I);if("auto"===G&&aa)switch(G="days"===I,K){case 1:return G?"tomorrow":"next "+O[I][0];case -1:return G?"yesterday":"last "+O[I][0];case 0:return G?"today":"this "+O[I][0]}G=Object.is(K,-0)||0>K;K=Math.abs(K);aa=1===K;var ma=O[I];I=J?aa?ma[1]:ma[2]||ma[1]:aa?O[I][0]:I;return G?K+" "+I+" ago":"in "+K+" "+I}function ea(I,K){var G="";I=p(I);for(var J;!(J=
I()).done;)J=J.value,G=J.literal?G+J.val:G+K(J.val);return G}function ka(){for(var I=arguments.length,K=Array(I),G=0;G<I;G++)K[G]=arguments[G];I=K.reduce(function(J,O){return J+O.source},"");return RegExp("^"+I+"$")}function na(){for(var I=arguments.length,K=Array(I),G=0;G<I;G++)K[G]=arguments[G];return function(J){return K.reduce(function(O,aa){var ma=O[0],ra=O[1];O=aa(J,O[2]);aa=O[1];var ya=O[2];return[b({},ma,O[0]),aa||ra,ya]},[{},null,1]).slice(0,2)}}function sa(I){if(null==I)return[null,null];
for(var K=arguments.length,G=Array(1<K?K-1:0),J=1;J<K;J++)G[J-1]=arguments[J];for(K=0;K<G.length;K++){var O=G[K];J=O[1];if(O=O[0].exec(I))return J(O)}return[null,null]}function Ca(){for(var I=arguments.length,K=Array(I),G=0;G<I;G++)K[G]=arguments[G];return function(J,O){var aa={},ma;for(ma=0;ma<K.length;ma++)aa[K[ma]]=H(J[O+ma]);return[aa,null,O+ma]}}function N(I,K,G){I=I[K];return z(I)?G:H(I)}function P(I,K){return[{hours:N(I,K,0),minutes:N(I,K+1,0),seconds:N(I,K+2,0),milliseconds:R(I[K+3])},null,
K+4]}function ba(I,K){var G=!I[K]&&!I[K+1];I=U(I[K+1],I[K+2]);return[{},G?null:cb.instance(I),K+3]}function la(I,K){return[{},I[K]?ob.create(I[K]):null,K+1]}function qa(I){var K=I[2],G=I[3],J=I[4],O=I[5],aa=I[6],ma=I[7],ra=I[8],ya="-"===I[0][0],Ba=ma&&"-"===ma[0],Ga=function(Ha,Fa){void 0===Fa&&(Fa=!1);return void 0!==Ha&&(Fa||Ha&&ya)?-Ha:Ha};return[{years:Ga(M(I[1])),months:Ga(M(K)),weeks:Ga(M(G)),days:Ga(M(J)),hours:Ga(M(O)),minutes:Ga(M(aa)),seconds:Ga(M(ma),"-0"===ma),milliseconds:Ga(R(ra),Ba)}]}
function L(I,K,G,J,O,aa,ma){K={year:2===K.length?ca(H(K)):H(K),month:Vb.indexOf(G)+1,day:H(J),hour:H(O),minute:H(aa)};ma&&(K.second=H(ma));I&&(K.weekday=3<I.length?Xb.indexOf(I)+1:Wb.indexOf(I)+1);return K}function Z(I){var K=I[8],G=I[9],J=I[10],O=I[11];I=L(I[1],I[4],I[3],I[2],I[5],I[6],I[7]);K=K?Yc[K]:G?0:U(J,O);return[I,new cb(K)]}function oa(I){return[L(I[1],I[4],I[3],I[2],I[5],I[6],I[7]),cb.utcInstance]}function ua(I){return[L(I[1],I[7],I[2],I[3],I[4],I[5],I[6]),cb.utcInstance]}function va(I,
K,G){void 0===G&&(G=!1);I={values:G?K.values:b({},I.values,K.values||{}),loc:I.loc.clone(K.loc),conversionAccuracy:K.conversionAccuracy||I.conversionAccuracy,matrix:K.matrix||I.matrix};return new Xa(I)}function xa(I,K,G,J,O){I=I[O][G];var aa=K[G]/I;aa=Math.sign(aa)!==Math.sign(J[O])&&0!==J[O]&&1>=Math.abs(aa)?0>aa?Math.floor(aa):Math.ceil(aa):Math.trunc(aa);J[O]+=aa;K[G]-=aa*I}function Aa(I,K){Zc.reduce(function(G,J){if(z(K[J]))return G;G&&xa(I,K,G,K,J);return J},null)}function wa(I,K){var G=function(J){return J.toUTC(0,
{keepLocalTime:!0}).startOf("day").valueOf()};I=G(K)-G(I);return Math.floor(Xa.fromMillis(I).as("days"))}function Ea(I,K,G){for(var J={},O=I,aa,ma,ra=0,ya=[["years",function(Ha,Fa){return Fa.year-Ha.year}],["quarters",function(Ha,Fa){return Fa.quarter-Ha.quarter+4*(Fa.year-Ha.year)}],["months",function(Ha,Fa){return Fa.month-Ha.month+12*(Fa.year-Ha.year)}],["weeks",function(Ha,Fa){Ha=wa(Ha,Fa);return(Ha-Ha%7)/7}],["days",wa]];ra<ya.length;ra++){var Ba=ya[ra],Ga=Ba[0];Ba=Ba[1];0<=G.indexOf(Ga)&&(aa=
Ga,J[Ga]=Ba(I,K),ma=O.plus(J),ma>K?(J[Ga]--,I=O.plus(J)):I=ma)}return[I,J,ma,aa]}function Ja(I,K,G,J){var O=Ea(I,K,G);I=O[0];var aa=O[1],ma=O[2],ra=O[3];O=K-I;G=G.filter(function(Ga){return 0<=["hours","minutes","seconds","milliseconds"].indexOf(Ga)});if(0===G.length){if(ma<K){var ya;ma=I.plus((ya={},ya[ra]=1,ya))}ma!==I&&(aa[ra]=(aa[ra]||0)+O/(ma-I))}K=Xa.fromObject(aa,J);if(0<G.length){var Ba;return(Ba=Xa.fromMillis(O,J)).shiftTo.apply(Ba,G).plus(K)}return K}function Ma(I,K){I=I.numberingSystem;
void 0===K&&(K="");return new RegExp(""+Hb[I||"latn"]+K)}function Da(I,K){void 0===K&&(K=function(G){return G});return{regex:I,deser:function(G){var J=K;G=G[0];var O=parseInt(G,10);if(isNaN(O)){O="";for(var aa=0;aa<G.length;aa++){var ma=G.charCodeAt(aa);if(-1!==G[aa].search(Hb.hanidec))O+=$c.indexOf(G[aa]);else for(Ba in Yb){var ra=Yb[Ba],ya=ra[0];ra=ra[1];ma>=ya&&ma<=ra&&(O+=ma-ya)}}var Ba=parseInt(O,10)}else Ba=O;return J(Ba)}}}function Ya(I){return I.replace(/\./g,"\\.?").replace(Ib,Zb)}function Na(I,
K){return null===I?null:{regex:RegExp(I.map(Ya).join("|")),deser:function(G){var J=G[0];return I.findIndex(function(O){return J.replace(/\./g,"").replace(Ib," ").toLowerCase()===O.replace(/\./g,"").replace(Ib," ").toLowerCase()})+K}}}function Ua(I,K){return{regex:I,deser:function(G){return U(G[1],G[2])},groups:K}}function $a(I){return{regex:I,deser:function(K){return K[0]}}}function Pa(I,K){var G=Ma(K),J=Ma(K,"{2}"),O=Ma(K,"{3}"),aa=Ma(K,"{4}"),ma=Ma(K,"{6}"),ra=Ma(K,"{1,2}"),ya=Ma(K,"{1,3}"),Ba=
Ma(K,"{1,6}"),Ga=Ma(K,"{1,9}"),Ha=Ma(K,"{2,4}"),Fa=Ma(K,"{4,6}"),Qa=function(sb){return{regex:RegExp(sb.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:function(ad){return ad[0]},literal:!0}},bb=function(sb){if(I.literal)return Qa(sb);switch(sb.val){case "G":return Na(K.eras("short",!1),0);case "GG":return Na(K.eras("long",!1),0);case "y":return Da(Ba);case "yy":return Da(Ha,ca);case "yyyy":return Da(aa);case "yyyyy":return Da(Fa);case "yyyyyy":return Da(ma);case "M":return Da(ra);case "MM":return Da(J);
case "MMM":return Na(K.months("short",!0,!1),1);case "MMMM":return Na(K.months("long",!0,!1),1);case "L":return Da(ra);case "LL":return Da(J);case "LLL":return Na(K.months("short",!1,!1),1);case "LLLL":return Na(K.months("long",!1,!1),1);case "d":return Da(ra);case "dd":return Da(J);case "o":return Da(ya);case "ooo":return Da(O);case "HH":return Da(J);case "H":return Da(ra);case "hh":return Da(J);case "h":return Da(ra);case "mm":return Da(J);case "m":return Da(ra);case "q":return Da(ra);case "qq":return Da(J);
case "s":return Da(ra);case "ss":return Da(J);case "S":return Da(ya);case "SSS":return Da(O);case "u":return $a(Ga);case "uu":return $a(ra);case "uuu":return Da(G);case "a":return Na(K.meridiems(),0);case "kkkk":return Da(aa);case "kk":return Da(Ha,ca);case "W":return Da(ra);case "WW":return Da(J);case "E":case "c":return Da(G);case "EEE":return Na(K.weekdays("short",!1,!1),1);case "EEEE":return Na(K.weekdays("long",!1,!1),1);case "ccc":return Na(K.weekdays("short",!0,!1),1);case "cccc":return Na(K.weekdays("long",
!0,!1),1);case "Z":case "ZZ":return Ua(new RegExp("([+-]"+ra.source+")(?::("+J.source+"))?"),2);case "ZZZ":return Ua(new RegExp("([+-]"+ra.source+")("+J.source+")?"),2);case "z":return $a(/[a-z_+-/]{1,256}?/i);default:return Qa(sb)}}(I)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};bb.token=I;return bb}function La(I){return["^"+I.map(function(K){return K.regex}).reduce(function(K,G){return K+"("+G.source+")"},"")+"$",I]}function Oa(I,K,G){if(I=I.match(K)){K={};var J=1,O;for(O in G)if(w(G,
O)){var aa=G[O],ma=aa.groups?aa.groups+1:1;!aa.literal&&aa.token&&(K[aa.token.val[0]]=aa.deser(I.slice(J,J+ma)));J+=ma}return[I,K]}return[I,{}]}function za(I){var K=function(O){switch(O){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";
default:return null}},G=null;z(I.z)||(G=ob.create(I.z));if(!z(I.Z)){G||(G=new cb(I.Z));var J=I.Z}z(I.q)||(I.M=3*(I.q-1)+1);z(I.h)||(12>I.h&&1===I.a?I.h+=12:12===I.h&&0===I.a&&(I.h=0));0===I.G&&I.y&&(I.y=-I.y);z(I.u)||(I.S=R(I.u));return[Object.keys(I).reduce(function(O,aa){var ma=K(aa);ma&&(O[ma]=I[aa]);return O},{}),G,J]}function Ia(I,K){var G;return(G=Array.prototype).concat.apply(G,I.map(function(J){if(!J.literal){var O=db.macroTokenToFormatOpts(J.val);O=eb(O,K);J=null==O||O.includes(void 0)?J:
O}return J}))}function Ka(I,K,G){G=Ia(db.parseFormat(G),I);var J=G.map(function(Ba){return Pa(Ba,I)}),O=J.find(function(Ba){return Ba.invalidReason});if(O)return{input:K,tokens:G,invalidReason:O.invalidReason};O=La(J);J=RegExp(O[0],"i");var aa=Oa(K,J,O[1]);O=aa[0];var ma=(aa=aa[1])?za(aa):[null,null,void 0],ra=ma[0],ya=ma[1];ma=ma[2];if(w(aa,"a")&&w(aa,"H"))throw new tb("Can't include meridiem when specifying 24-hour format");return{input:K,tokens:G,regex:J,rawMatches:O,matches:aa,result:ra,zone:ya,
specificOffset:ma}}function eb(I,K){if(!I)return null;K=db.create(K,I);var G=K.formatDateTimeParts;Jb||(Jb=Sa.fromMillis(1555555555555));return G.call(K,Jb).map(function(J){var O=J.type;J=J.value;"literal"===O?O={literal:!0,val:J}:(J=I[O],O=bd[O],"object"===typeof O&&(O=O[J]),O=O?{literal:!1,val:O}:void 0);return O})}function Wa(I,K){return new fb("unit out of range","you specified "+K+" (of type "+typeof K+") as a "+I+", which is invalid")}function gb(I,K,G){K=new Date(Date.UTC(I,K-1,G));100>I&&
0<=I&&K.setUTCFullYear(K.getUTCFullYear()-1900);I=K.getUTCDay();return 0===I?7:I}function kb(I,K){I=da(I)?Kb:Lb;var G=I.findIndex(function(J){return J<K});return{month:G+1,day:K-I[G]}}function pb(I){var K=I.year,G=I.month,J=I.day;var O=J+(da(K)?Kb:Lb)[G-1];G=gb(K,G,J);O=Math.floor((O-G+10)/7);1>O?(--K,O=X(K)):O>X(K)&&(K+=1,O=1);return b({weekYear:K,weekNumber:O,weekday:G},ja(I))}function lb(I){var K=I.weekYear,G=I.weekNumber,J=I.weekday,O=gb(K,1,4),aa=da(K)?366:365;G=7*G+J-O-3;1>G?(aa=K-1,G+=da(aa)?
366:365):G>aa?(aa=K+1,G-=da(K)?366:365):aa=K;K=kb(aa,G);return b({year:aa,month:K.month,day:K.day},ja(I))}function Za(I){var K=I.year;var G=I.month;G=I.day+(da(K)?Kb:Lb)[G-1];return b({year:K,ordinal:G},ja(I))}function jb(I){var K=I.year,G=kb(K,I.ordinal);return b({year:K,month:G.month,day:G.day},ja(I))}function mb(I){var K=C(I.year),G=E(I.month,1,12),J=E(I.day,1,ha(I.year,I.month));return K?G?J?!1:Wa("day",I.day):Wa("month",I.month):Wa("year",I.year)}function Va(I){var K=I.hour,G=I.minute,J=I.second;
I=I.millisecond;var O=E(K,0,23)||24===K&&0===G&&0===J&&0===I,aa=E(G,0,59),ma=E(J,0,59),ra=E(I,0,999);return O?aa?ma?ra?!1:Wa("millisecond",I):Wa("second",J):Wa("minute",G):Wa("hour",K)}function hb(I){return new fb("unsupported zone",'the zone "'+I.name+'" is not supported')}function Mb(I){null===I.weekData&&(I.weekData=pb(I.c));return I.weekData}function ub(I,K){I={ts:I.ts,zone:I.zone,c:I.c,o:I.o,loc:I.loc,invalid:I.invalid};return new Sa(b({},I,K,{old:I}))}function $b(I,K,G){var J=I-6E4*K,O=G.offset(J);
if(K===O)return[J,K];J-=6E4*(O-K);K=G.offset(J);return O===K?[J,O]:[I-6E4*Math.min(O,K),Math.max(O,K)]}function ac(I,K){I=new Date(I+6E4*K);return{year:I.getUTCFullYear(),month:I.getUTCMonth()+1,day:I.getUTCDate(),hour:I.getUTCHours(),minute:I.getUTCMinutes(),second:I.getUTCSeconds(),millisecond:I.getUTCMilliseconds()}}function zb(I,K,G){return $b(fa(I),K,G)}function bc(I,K){var G=I.o,J=I.c.year+Math.trunc(K.years),O=I.c.month+Math.trunc(K.months)+3*Math.trunc(K.quarters);J=b({},I.c,{year:J,month:O,
day:Math.min(I.c.day,ha(J,O))+Math.trunc(K.days)+7*Math.trunc(K.weeks)});K=Xa.fromObject({years:K.years-Math.trunc(K.years),quarters:K.quarters-Math.trunc(K.quarters),months:K.months-Math.trunc(K.months),weeks:K.weeks-Math.trunc(K.weeks),days:K.days-Math.trunc(K.days),hours:K.hours,minutes:K.minutes,seconds:K.seconds,milliseconds:K.milliseconds}).as("milliseconds");J=fa(J);J=$b(J,G,I.zone);G=J[0];J=J[1];0!==K&&(G+=K,J=I.zone.offset(G));return{ts:G,o:J}}function vb(I,K,G,J,O,aa){var ma=G.setZone,ra=
G.zone;return I&&0!==Object.keys(I).length?(I=Sa.fromObject(I,b({},G,{zone:K||ra,specificOffset:aa})),ma?I:I.setZone(ra)):Sa.invalid(new fb("unparsable",'the input "'+O+"\" can't be parsed as "+J))}function Ab(I,K,G){void 0===G&&(G=!0);return I.isValid?db.create(Ta.create("en-US"),{allowZ:G,forceSimple:!0}).formatDateTimeFromString(I,K):null}function Nb(I,K){var G=9999<I.c.year||0>I.c.year,J="";G&&0<=I.c.year&&(J+="+");J+=F(I.c.year,G?6:4);K?(J=J+"-"+F(I.c.month),J=J+"-"+F(I.c.day)):(J+=F(I.c.month),
J+=F(I.c.day));return J}function cc(I,K,G,J,O,aa){var ma=F(I.c.hour);K?(ma=ma+":"+F(I.c.minute),0===I.c.second&&G||(ma+=":")):ma+=F(I.c.minute);0===I.c.second&&G||(ma+=F(I.c.second),0===I.c.millisecond&&J||(ma=ma+"."+F(I.c.millisecond,3)));O&&(I.isOffsetFixed&&0===I.offset&&!aa?ma+="Z":0>I.o?(ma=ma+"-"+F(Math.trunc(-I.o/60)),ma=ma+":"+F(Math.trunc(-I.o%60))):(ma=ma+"+"+F(Math.trunc(I.o/60)),ma=ma+":"+F(Math.trunc(I.o%60))));aa&&(ma+="["+I.zone.ianaName+"]");return ma}function dc(I){var K={year:"year",
years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[I.toLowerCase()];if(!K)throw new ec(I);return K}function fc(I,K){var G=x(K.zone,Ra.defaultZone);
K=Ta.fromObject(K);var J=Ra.now();if(z(I.year))I=J;else{var O=0;for(var aa=gc;O<aa.length;O++){var ma=aa[O];z(I[ma])&&(I[ma]=hc[ma])}if(O=mb(I)||Va(I))return Sa.invalid(O);J=G.offset(J);J=zb(I,J,G);I=J[0];O=J[1]}return new Sa({ts:I,zone:G,loc:K,o:O})}function ic(I,K,G){var J=z(G.round)?!0:G.round,O=function(Ba,Ga){Ba=V(Ba,J||G.calendary?0:2,!0);return K.loc.clone(G).relFormatter(G).format(Ba,Ga)},aa=function(Ba){return G.calendary?K.hasSame(I,Ba)?0:K.startOf(Ba).diff(I.startOf(Ba),Ba).get(Ba):K.diff(I,
Ba).get(Ba)};if(G.unit)return O(aa(G.unit),G.unit);for(var ma=p(G.units),ra;!(ra=ma()).done;){ra=ra.value;var ya=aa(ra);if(1<=Math.abs(ya))return O(ya,ra)}return O(I>K?-0:0,G.units[G.units.length-1])}function jc(I){var K={};0<I.length&&"object"===typeof I[I.length-1]?(K=I[I.length-1],I=Array.from(I).slice(0,I.length-1)):I=Array.from(I);return[K,I]}function wb(I){if(Sa.isDateTime(I))return I;if(I&&I.valueOf&&A(I.valueOf()))return Sa.fromJSDate(I);if(I&&"object"===typeof I)return Sa.fromObject(I);throw new ab("Unknown datetime argument: "+
I+", of type "+typeof I);}var qb=function(I){function K(){return I.apply(this,arguments)||this}c(K,I);return K}(l(Error)),cd=function(I){function K(G){return I.call(this,"Invalid DateTime: "+G.toMessage())||this}c(K,I);return K}(qb),dd=function(I){function K(G){return I.call(this,"Invalid Interval: "+G.toMessage())||this}c(K,I);return K}(qb),ed=function(I){function K(G){return I.call(this,"Invalid Duration: "+G.toMessage())||this}c(K,I);return K}(qb),tb=function(I){function K(){return I.apply(this,
arguments)||this}c(K,I);return K}(qb),ec=function(I){function K(G){return I.call(this,"Invalid unit "+G)||this}c(K,I);return K}(qb),ab=function(I){function K(){return I.apply(this,arguments)||this}c(K,I);return K}(qb),nb=function(I){function K(){return I.call(this,"Zone is an abstract class")||this}c(K,I);return K}(qb),Bb={year:"numeric",month:"numeric",day:"numeric"},kc={year:"numeric",month:"short",day:"numeric"},fd={year:"numeric",month:"short",day:"numeric",weekday:"short"},lc={year:"numeric",
month:"long",day:"numeric"},mc={year:"numeric",month:"long",day:"numeric",weekday:"long"},nc={hour:"numeric",minute:"numeric"},oc={hour:"numeric",minute:"numeric",second:"numeric"},pc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},qc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},rc={hour:"numeric",minute:"numeric",hourCycle:"h23"},sc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},tc={hour:"numeric",minute:"numeric",second:"numeric",
hourCycle:"h23",timeZoneName:"short"},uc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},vc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},wc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},xc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},yc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},gd={year:"numeric",
month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},zc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},Ac={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},Bc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},Cc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",
second:"numeric",timeZoneName:"long"},rb=function(){function I(){}var K=I.prototype;K.offsetName=function(G,J){throw new nb;};K.formatOffset=function(G,J){throw new nb;};K.offset=function(G){throw new nb;};K.equals=function(G){throw new nb;};a(I,[{key:"type",get:function(){throw new nb;}},{key:"name",get:function(){throw new nb;}},{key:"ianaName",get:function(){return this.name}},{key:"isUniversal",get:function(){throw new nb;}},{key:"isValid",get:function(){throw new nb;}}]);return I}(),Ob=null,
Gb=function(I){function K(){return I.apply(this,arguments)||this}c(K,I);var G=K.prototype;G.offsetName=function(J,O){return Q(J,O.format,O.locale)};G.formatOffset=function(J,O){return Y(this.offset(J),O)};G.offset=function(J){return-(new Date(J)).getTimezoneOffset()};G.equals=function(J){return"system"===J.type};a(K,[{key:"type",get:function(){return"system"}},{key:"name",get:function(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",
get:function(){return!0}}],[{key:"instance",get:function(){null===Ob&&(Ob=new K);return Ob}}]);return K}(rb),Cb={},hd={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6},Db={},ob=function(I){function K(J){var O=I.call(this)||this;O.zoneName=J;O.valid=K.isValidZone(J);return O}c(K,I);K.create=function(J){Db[J]||(Db[J]=new K(J));return Db[J]};K.resetCache=function(){Db={};Cb={}};K.isValidSpecifier=function(J){return this.isValidZone(J)};K.isValidZone=function(J){if(!J)return!1;try{return(new Intl.DateTimeFormat("en-US",
{timeZone:J})).format(),!0}catch(O){return!1}};var G=K.prototype;G.offsetName=function(J,O){return Q(J,O.format,O.locale,this.name)};G.formatOffset=function(J,O){return Y(this.offset(J),O)};G.offset=function(J){J=new Date(J);if(isNaN(J))return NaN;var O=this.name;Cb[O]||(Cb[O]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:O,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}));O=Cb[O];if(O.formatToParts){O=O.formatToParts(J);for(var aa=
[],ma=0;ma<O.length;ma++){var ra=O[ma],ya=ra.type;ra=ra.value;var Ba=hd[ya];"era"===ya?aa[Ba]=ra:z(Ba)||(aa[Ba]=parseInt(ra,10))}O=aa}else O=O.format(J).replace(/\u200E/g,""),O=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(O),O=[O[3],O[1],O[2],O[4],O[5],O[6],O[7]];aa=O[0];ma=O[1];ya=O[2];ra=O[4];Ba=O[5];var Ga=O[6];"BC"===O[3]&&(aa=-Math.abs(aa)+1);O=fa({year:aa,month:ma,day:ya,hour:24===ra?0:ra,minute:Ba,second:Ga,millisecond:0});J=+J;aa=J%1E3;return(O-(J-(0<=aa?aa:1E3+aa)))/6E4};G.equals=
function(J){return"iana"===J.type&&J.name===this.name};a(K,[{key:"type",get:function(){return"iana"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]);return K}(rb),id=["base"],jd=["padTo","floor"],Dc={},Fb={},Pb={},Qb={},Eb=null,kd=function(){function I(K,G,J){this.padTo=J.padTo||0;this.floor=J.floor||!1;J.padTo;J.floor;var O=f(J,jd);if(!G||0<Object.keys(O).length)G=b({useGrouping:!1},J),0<J.padTo&&
(G.minimumIntegerDigits=J.padTo),J=G,void 0===J&&(J={}),G=JSON.stringify([K,J]),O=Pb[G],O||(O=new Intl.NumberFormat(K,J),Pb[G]=O),this.inf=O}I.prototype.format=function(K){if(this.inf)return this.inf.format(this.floor?Math.floor(K):K);K=this.floor?Math.floor(K):V(K,3);return F(K,this.padTo)};return I}(),ld=function(){function I(G,J,O){this.opts=O;var aa=void 0;G.zone.isUniversal?(aa=G.offset/60*-1,aa=0<=aa?"Etc/GMT+"+aa:"Etc/GMT"+aa,0!==G.offset&&ob.create(aa).valid?this.dt=G:(aa="UTC",this.dt=O.timeZoneName?
G:0===G.offset?G:Sa.fromMillis(G.ts+6E4*G.offset))):"system"===G.zone.type?this.dt=G:(this.dt=G,aa=G.zone.name);G=b({},this.opts);G.timeZone=G.timeZone||aa;this.dtf=r(J,G)}var K=I.prototype;K.format=function(){return this.dtf.format(this.dt.toJSDate())};K.formatToParts=function(){return this.dtf.formatToParts(this.dt.toJSDate())};K.resolvedOptions=function(){return this.dtf.resolvedOptions()};return I}(),md=function(){function I(G,J,O){this.opts=b({style:"long"},O);if(!J&&D()){J=O;void 0===J&&(J=
{});O=J;O.base;O=f(O,id);O=JSON.stringify([G,O]);var aa=Qb[O];aa||(aa=new Intl.RelativeTimeFormat(G,J),Qb[O]=aa);this.rtf=aa}}var K=I.prototype;K.format=function(G,J){return this.rtf?this.rtf.format(G,J):S(J,G,this.opts.numeric,"long"!==this.opts.style)};K.formatToParts=function(G,J){return this.rtf?this.rtf.formatToParts(G,J):[]};return I}(),Ta=function(){function I(G,J,O,aa){var ma=G.indexOf("-x-");-1!==ma&&(G=G.substring(0,ma));ma=G.indexOf("-u-");if(-1===ma)var ra=[G];else{try{ra=r(G).resolvedOptions();
var ya=G}catch(Ba){ya=G.substring(0,ma),ra=r(ya).resolvedOptions()}ra=[ya,ra.numberingSystem,ra.calendar]}ya=ra[1];G=ra[2];this.locale=ra[0];this.numberingSystem=J||ya||null;this.outputCalendar=O||G||null;J=this.locale;O=this.numberingSystem;if((ra=this.outputCalendar)||O)J.includes("-u-")||(J+="-u"),ra&&(J+="-ca-"+ra),O&&(J+="-nu-"+O);this.intl=J;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=aa;
this.fastNumbersCached=null}I.fromOpts=function(G){return I.create(G.locale,G.numberingSystem,G.outputCalendar,G.defaultToEN)};I.create=function(G,J,O,aa){void 0===aa&&(aa=!1);G=G||Ra.defaultLocale;var ma;(ma=G)||(aa?aa="en-US":(Eb||(Eb=(new Intl.DateTimeFormat).resolvedOptions().locale),aa=Eb),ma=aa);return new I(ma,J||Ra.defaultNumberingSystem,O||Ra.defaultOutputCalendar,G)};I.resetCache=function(){Eb=null;Fb={};Pb={};Qb={}};I.fromObject=function(G){G=void 0===G?{}:G;return I.create(G.locale,G.numberingSystem,
G.outputCalendar)};var K=I.prototype;K.listingMode=function(){var G=this.isEnglish(),J=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return G&&J?"en":"intl"};K.clone=function(G){return G&&0!==Object.getOwnPropertyNames(G).length?I.create(G.locale||this.specifiedLocale,G.numberingSystem||this.numberingSystem,G.outputCalendar||this.outputCalendar,G.defaultToEN||!1):this};K.redefaultToEN=function(G){void 0===G&&(G={});return this.clone(b({},
G,{defaultToEN:!0}))};K.redefaultToSystem=function(G){void 0===G&&(G={});return this.clone(b({},G,{defaultToEN:!1}))};K.months=function(G,J,O){var aa=this;void 0===J&&(J=!1);void 0===O&&(O=!0);return v(this,G,O,pa,function(){var ma=J?{month:G,day:"numeric"}:{month:G},ra=J?"format":"standalone";aa.monthsCache[ra][G]||(aa.monthsCache[ra][G]=q(function(ya){return aa.extract(ya,ma,"month")}));return aa.monthsCache[ra][G]})};K.weekdays=function(G,J,O){var aa=this;void 0===J&&(J=!1);void 0===O&&(O=!0);
return v(this,G,O,ta,function(){var ma=J?{weekday:G,year:"numeric",month:"long",day:"numeric"}:{weekday:G},ra=J?"format":"standalone";aa.weekdaysCache[ra][G]||(aa.weekdaysCache[ra][G]=m(function(ya){return aa.extract(ya,ma,"weekday")}));return aa.weekdaysCache[ra][G]})};K.meridiems=function(G){var J=this;void 0===G&&(G=!0);return v(this,void 0,G,function(){return Ec},function(){if(!J.meridiemCache){var O={hour:"numeric",hourCycle:"h12"};J.meridiemCache=[Sa.utc(2016,11,13,9),Sa.utc(2016,11,13,19)].map(function(aa){return J.extract(aa,
O,"dayperiod")})}return J.meridiemCache})};K.eras=function(G,J){var O=this;void 0===J&&(J=!0);return v(this,G,J,W,function(){var aa={era:G};O.eraCache[G]||(O.eraCache[G]=[Sa.utc(-40,1,1),Sa.utc(2017,1,1)].map(function(ma){return O.extract(ma,aa,"era")}));return O.eraCache[G]})};K.extract=function(G,J,O){return(G=this.dtFormatter(G,J).formatToParts().find(function(aa){return aa.type.toLowerCase()===O}))?G.value:null};K.numberFormatter=function(G){void 0===G&&(G={});return new kd(this.intl,G.forceSimple||
this.fastNumbers,G)};K.dtFormatter=function(G,J){void 0===J&&(J={});return new ld(G,this.intl,J)};K.relFormatter=function(G){void 0===G&&(G={});return new md(this.intl,this.isEnglish(),G)};K.listFormatter=function(G){void 0===G&&(G={});var J=this.intl;void 0===G&&(G={});var O=JSON.stringify([J,G]),aa=Dc[O];aa||(aa=new Intl.ListFormat(J,G),Dc[O]=aa);return aa};K.isEnglish=function(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")};
K.equals=function(G){return this.locale===G.locale&&this.numberingSystem===G.numberingSystem&&this.outputCalendar===G.outputCalendar};a(I,[{key:"fastNumbers",get:function(){if(null==this.fastNumbersCached){var G=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=G}return this.fastNumbersCached}}]);return I}(),Rb=null,
cb=function(I){function K(J){var O=I.call(this)||this;O.fixed=J;return O}c(K,I);K.instance=function(J){return 0===J?K.utcInstance:new K(J)};K.parseSpecifier=function(J){return J&&(J=J.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new K(U(J[1],J[2])):null};var G=K.prototype;G.offsetName=function(){return this.name};G.formatOffset=function(J,O){return Y(this.fixed,O)};G.offset=function(){return this.fixed};G.equals=function(J){return"fixed"===J.type&&J.fixed===this.fixed};a(K,[{key:"type",get:function(){return"fixed"}},
{key:"name",get:function(){return 0===this.fixed?"UTC":"UTC"+Y(this.fixed,"narrow")}},{key:"ianaName",get:function(){return 0===this.fixed?"Etc/UTC":"Etc/GMT"+Y(-this.fixed,"narrow")}},{key:"isUniversal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}],[{key:"utcInstance",get:function(){null===Rb&&(Rb=new K(0));return Rb}}]);return K}(rb),Ub=function(I){function K(J){var O=I.call(this)||this;O.zoneName=J;return O}c(K,I);var G=K.prototype;G.offsetName=function(){return null};G.formatOffset=
function(){return""};G.offset=function(){return NaN};G.equals=function(){return!1};a(K,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]);return K}(rb),Fc=function(){return Date.now()},Gc="system",Hc=null,Ic=null,Jc=null,Kc=60,Lc,Ra=function(){function I(){}I.resetCaches=function(){Ta.resetCache();ob.resetCache()};a(I,null,[{key:"now",get:function(){return Fc},set:function(K){Fc=
K}},{key:"defaultZone",get:function(){return x(Gc,Gb.instance)},set:function(K){Gc=K}},{key:"defaultLocale",get:function(){return Hc},set:function(K){Hc=K}},{key:"defaultNumberingSystem",get:function(){return Ic},set:function(K){Ic=K}},{key:"defaultOutputCalendar",get:function(){return Jc},set:function(K){Jc=K}},{key:"twoDigitCutoffYear",get:function(){return Kc},set:function(K){Kc=K%100}},{key:"throwOnInvalid",get:function(){return Lc},set:function(K){Lc=K}}]);return I}(),Tc="January February March April May June July August September October November December".split(" "),
Vb="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Sc="JFMAMJJASOND".split(""),Xb="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Wb="Mon Tue Wed Thu Fri Sat Sun".split(" "),Uc="MTWTFSS".split(""),Ec=["AM","PM"],Xc=["Before Christ","Anno Domini"],Wc=["BC","AD"],Vc=["B","A"],nd={D:Bb,DD:kc,DDD:lc,DDDD:mc,t:nc,tt:oc,ttt:pc,tttt:qc,T:rc,TT:sc,TTT:tc,TTTT:uc,f:vc,ff:xc,fff:zc,ffff:Bc,F:wc,FF:yc,FFF:Ac,FFFF:Cc},db=function(){function I(G,J){this.opts=J;this.loc=G;this.systemLoc=
null}I.create=function(G,J){void 0===J&&(J={});return new I(G,J)};I.parseFormat=function(G){for(var J=null,O="",aa=!1,ma=[],ra=0;ra<G.length;ra++){var ya=G.charAt(ra);"'"===ya?(0<O.length&&ma.push({literal:aa,val:O}),J=null,O="",aa=!aa):aa?O+=ya:ya===J?O+=ya:(0<O.length&&ma.push({literal:!1,val:O}),J=O=ya)}0<O.length&&ma.push({literal:aa,val:O});return ma};I.macroTokenToFormatOpts=function(G){return nd[G]};var K=I.prototype;K.formatWithSystemDefault=function(G,J){null===this.systemLoc&&(this.systemLoc=
this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(G,b({},this.opts,J)).format()};K.formatDateTime=function(G,J){void 0===J&&(J={});return this.loc.dtFormatter(G,b({},this.opts,J)).format()};K.formatDateTimeParts=function(G,J){void 0===J&&(J={});return this.loc.dtFormatter(G,b({},this.opts,J)).formatToParts()};K.formatInterval=function(G,J){void 0===J&&(J={});return this.loc.dtFormatter(G.start,b({},this.opts,J)).dtf.formatRange(G.start.toJSDate(),G.end.toJSDate())};K.resolvedOptions=
function(G,J){void 0===J&&(J={});return this.loc.dtFormatter(G,b({},this.opts,J)).resolvedOptions()};K.num=function(G,J){void 0===J&&(J=0);if(this.opts.forceSimple)return F(G,J);var O=b({},this.opts);0<J&&(O.padTo=J);return this.loc.numberFormatter(O).format(G)};K.formatDateTimeFromString=function(G,J){var O=this,aa="en"===this.loc.listingMode(),ma=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,ra=function(Fa,Qa){return O.loc.extract(G,Fa,Qa)},ya=function(Fa){return G.isOffsetFixed&&
0===G.offset&&Fa.allowZ?"Z":G.isValid?G.zone.formatOffset(G.ts,Fa.format):""},Ba=function(Fa,Qa){return aa?pa(Fa)[G.month-1]:ra(Qa?{month:Fa}:{month:Fa,day:"numeric"},"month")},Ga=function(Fa,Qa){return aa?ta(Fa)[G.weekday-1]:ra(Qa?{weekday:Fa}:{weekday:Fa,month:"long",day:"numeric"},"weekday")},Ha=function(Fa){return aa?W(Fa)[0>G.year?0:1]:ra({era:Fa},"era")};return ea(I.parseFormat(J),function(Fa){switch(Fa){case "S":return O.num(G.millisecond);case "u":case "SSS":return O.num(G.millisecond,3);
case "s":return O.num(G.second);case "ss":return O.num(G.second,2);case "uu":return O.num(Math.floor(G.millisecond/10),2);case "uuu":return O.num(Math.floor(G.millisecond/100));case "m":return O.num(G.minute);case "mm":return O.num(G.minute,2);case "h":return O.num(0===G.hour%12?12:G.hour%12);case "hh":return O.num(0===G.hour%12?12:G.hour%12,2);case "H":return O.num(G.hour);case "HH":return O.num(G.hour,2);case "Z":return ya({format:"narrow",allowZ:O.opts.allowZ});case "ZZ":return ya({format:"short",
allowZ:O.opts.allowZ});case "ZZZ":return ya({format:"techie",allowZ:O.opts.allowZ});case "ZZZZ":return G.zone.offsetName(G.ts,{format:"short",locale:O.loc.locale});case "ZZZZZ":return G.zone.offsetName(G.ts,{format:"long",locale:O.loc.locale});case "z":return G.zoneName;case "a":return aa?Ec[12>G.hour?0:1]:ra({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return ma?ra({day:"numeric"},"day"):O.num(G.day);case "dd":return ma?ra({day:"2-digit"},"day"):O.num(G.day,2);case "c":return O.num(G.weekday);
case "ccc":return Ga("short",!0);case "cccc":return Ga("long",!0);case "ccccc":return Ga("narrow",!0);case "E":return O.num(G.weekday);case "EEE":return Ga("short",!1);case "EEEE":return Ga("long",!1);case "EEEEE":return Ga("narrow",!1);case "L":return ma?ra({month:"numeric",day:"numeric"},"month"):O.num(G.month);case "LL":return ma?ra({month:"2-digit",day:"numeric"},"month"):O.num(G.month,2);case "LLL":return Ba("short",!0);case "LLLL":return Ba("long",!0);case "LLLLL":return Ba("narrow",!0);case "M":return ma?
ra({month:"numeric"},"month"):O.num(G.month);case "MM":return ma?ra({month:"2-digit"},"month"):O.num(G.month,2);case "MMM":return Ba("short",!1);case "MMMM":return Ba("long",!1);case "MMMMM":return Ba("narrow",!1);case "y":return ma?ra({year:"numeric"},"year"):O.num(G.year);case "yy":return ma?ra({year:"2-digit"},"year"):O.num(G.year.toString().slice(-2),2);case "yyyy":return ma?ra({year:"numeric"},"year"):O.num(G.year,4);case "yyyyyy":return ma?ra({year:"numeric"},"year"):O.num(G.year,6);case "G":return Ha("short");
case "GG":return Ha("long");case "GGGGG":return Ha("narrow");case "kk":return O.num(G.weekYear.toString().slice(-2),2);case "kkkk":return O.num(G.weekYear,4);case "W":return O.num(G.weekNumber);case "WW":return O.num(G.weekNumber,2);case "o":return O.num(G.ordinal);case "ooo":return O.num(G.ordinal,3);case "q":return O.num(G.quarter);case "qq":return O.num(G.quarter,2);case "X":return O.num(Math.floor(G.ts/1E3));case "x":return O.num(G.ts);default:var Qa=I.macroTokenToFormatOpts(Fa);Fa=Qa?O.formatWithSystemDefault(G,
Qa):Fa;return Fa}})};K.formatDurationFromString=function(G,J){var O=this,aa=function(ra){switch(ra[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "w":return"week";case "M":return"month";case "y":return"year";default:return null}};J=I.parseFormat(J);var ma=J.reduce(function(ra,ya){var Ba=ya.val;return ya.literal?ra:ra.concat(Ba)},[]);G=G.shiftTo.apply(G,ma.map(aa).filter(function(ra){return ra}));return ea(J,function(ra){return function(ya){var Ba=
aa(ya);return Ba?O.num(ra.get(Ba),ya.length):ya}}(G))};return I}(),fb=function(){function I(K,G){this.reason=K;this.explanation=G}I.prototype.toMessage=function(){return this.explanation?this.reason+": "+this.explanation:this.reason};return I}(),Mc=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,Nc=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Sb=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Oc=RegExp(""+Sb.source+("(?:"+Nc.source+"?(?:\\[("+Mc.source+")\\])?)?")),Tb=RegExp("(?:T"+
Oc.source+")?"),od=Ca("weekYear","weekNumber","weekDay"),pd=Ca("year","ordinal"),Pc=RegExp(Sb.source+" ?(?:"+Nc.source+"|("+Mc.source+"))?"),qd=RegExp("(?: "+Pc.source+")?"),rd=RegExp("^T?"+Sb.source+"$"),sd=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/,Yc={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,
MDT:-360,MST:-420,PDT:-420,PST:-480},td=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,ud=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,vd=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
wd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,xd=ka(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Tb),yd=ka(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Tb),zd=ka(/(\d{4})-?(\d{3})/,Tb),Ad=ka(Oc),Qc=na(function(I,K){return[{year:N(I,K),month:N(I,K+1,1),day:N(I,K+2,1)},null,K+3]},P,ba,la),Bd=na(od,P,ba,la),Cd=na(pd,P,ba,la),Dd=na(P,ba,la),Ed=na(P),Fd=ka(/(\d{4})-(\d\d)-(\d\d)/,qd),Gd=ka(Pc),Hd=na(P,ba,la),Rc={weeks:{days:7,hours:168,
minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},Id=b({years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,
milliseconds:2592E6}},Rc),Jd=b({years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3}},Rc),ib="years quarters months weeks days hours minutes seconds milliseconds".split(" "),Zc=ib.slice(0).reverse(),
Xa=function(){function I(G){var J="longterm"===G.conversionAccuracy||!1,O=J?Jd:Id;G.matrix&&(O=G.matrix);this.values=G.values;this.loc=G.loc||Ta.create();this.conversionAccuracy=J?"longterm":"casual";this.invalid=G.invalid||null;this.matrix=O;this.isLuxonDuration=!0}I.fromMillis=function(G,J){return I.fromObject({milliseconds:G},J)};I.fromObject=function(G,J){void 0===J&&(J={});if(null==G||"object"!==typeof G)throw new ab("Duration.fromObject: argument expected to be an object, got "+(null===G?"null":
typeof G));return new I({values:T(G,I.normalizeUnit),loc:Ta.fromObject(J),conversionAccuracy:J.conversionAccuracy,matrix:J.matrix})};I.fromDurationLike=function(G){if(A(G))return I.fromMillis(G);if(I.isDuration(G))return G;if("object"===typeof G)return I.fromObject(G);throw new ab("Unknown duration argument "+G+" of type "+typeof G);};I.fromISO=function(G,J){var O=sa(G,[sd,qa])[0];return O?I.fromObject(O,J):I.invalid("unparsable",'the input "'+G+"\" can't be parsed as ISO 8601")};I.fromISOTime=function(G,
J){var O=sa(G,[rd,Ed])[0];return O?I.fromObject(O,J):I.invalid("unparsable",'the input "'+G+"\" can't be parsed as ISO 8601")};I.invalid=function(G,J){void 0===J&&(J=null);if(!G)throw new ab("need to specify a reason the Duration is invalid");G=G instanceof fb?G:new fb(G,J);if(Ra.throwOnInvalid)throw new ed(G);return new I({invalid:G})};I.normalizeUnit=function(G){var J={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",
days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[G?G.toLowerCase():G];if(!J)throw new ec(G);return J};I.isDuration=function(G){return G&&G.isLuxonDuration||!1};var K=I.prototype;K.toFormat=function(G,J){void 0===J&&(J={});J=b({},J,{floor:!1!==J.round&&!1!==J.floor});return this.isValid?db.create(this.loc,J).formatDurationFromString(this,G):"Invalid Duration"};K.toHuman=function(G){var J=
this;void 0===G&&(G={});var O=ib.map(function(aa){var ma=J.values[aa];return z(ma)?null:J.loc.numberFormatter(b({style:"unit",unitDisplay:"long"},G,{unit:aa.slice(0,-1)})).format(ma)}).filter(function(aa){return aa});return this.loc.listFormatter(b({type:"conjunction",style:G.listStyle||"narrow"},G)).format(O)};K.toObject=function(){return this.isValid?b({},this.values):{}};K.toISO=function(){if(!this.isValid)return null;var G="P";0!==this.years&&(G+=this.years+"Y");if(0!==this.months||0!==this.quarters)G+=
this.months+3*this.quarters+"M";0!==this.weeks&&(G+=this.weeks+"W");0!==this.days&&(G+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)G+="T";0!==this.hours&&(G+=this.hours+"H");0!==this.minutes&&(G+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)G+=V(this.seconds+this.milliseconds/1E3,3)+"S";"P"===G&&(G+="T0S");return G};K.toISOTime=function(G){void 0===G&&(G={});if(!this.isValid)return null;var J=this.toMillis();if(0>J||864E5<=J)return null;
G=b({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},G);J=this.shiftTo("hours","minutes","seconds","milliseconds");var O="basic"===G.format?"hhmm":"hh:mm";G.suppressSeconds&&0===J.seconds&&0===J.milliseconds||(O+="basic"===G.format?"ss":":ss",G.suppressMilliseconds&&0===J.milliseconds||(O+=".SSS"));J=J.toFormat(O);G.includePrefix&&(J="T"+J);return J};K.toJSON=function(){return this.toISO()};K.toString=function(){return this.toISO()};K.toMillis=function(){return this.as("milliseconds")};
K.valueOf=function(){return this.toMillis()};K.plus=function(G){if(!this.isValid)return this;G=I.fromDurationLike(G);for(var J={},O=0;O<ib.length;O++){var aa=ib[O];if(w(G.values,aa)||w(this.values,aa))J[aa]=G.get(aa)+this.get(aa)}return va(this,{values:J},!0)};K.minus=function(G){if(!this.isValid)return this;G=I.fromDurationLike(G);return this.plus(G.negate())};K.mapUnits=function(G){if(!this.isValid)return this;for(var J={},O=0,aa=Object.keys(this.values);O<aa.length;O++){var ma=aa[O];J[ma]=ia(G(this.values[ma],
ma))}return va(this,{values:J},!0)};K.get=function(G){return this[I.normalizeUnit(G)]};K.set=function(G){if(!this.isValid)return this;G=b({},this.values,T(G,I.normalizeUnit));return va(this,{values:G})};K.reconfigure=function(G){G=void 0===G?{}:G;var J=G.conversionAccuracy,O=G.matrix;G={loc:this.loc.clone({locale:G.locale,numberingSystem:G.numberingSystem}),matrix:O,conversionAccuracy:J};return va(this,G)};K.as=function(G){return this.isValid?this.shiftTo(G).get(G):NaN};K.normalize=function(){if(!this.isValid)return this;
var G=this.toObject();Aa(this.matrix,G);return va(this,{values:G},!0)};K.rescale=function(){if(!this.isValid)return this;var G=this.normalize().shiftToAll().toObject(),J={},O=0;for(G=Object.entries(G);O<G.length;O++){var aa=G[O],ma=aa[0];aa=aa[1];0!==aa&&(J[ma]=aa)}return va(this,{values:J},!0)};K.shiftTo=function(){for(var G=arguments.length,J=Array(G),O=0;O<G;O++)J[O]=arguments[O];if(!this.isValid||0===J.length)return this;J=J.map(function(bb){return I.normalizeUnit(bb)});G={};O={};for(var aa=this.toObject(),
ma,ra=0;ra<ib.length;ra++){var ya=ib[ra];if(0<=J.indexOf(ya)){ma=ya;var Ba=0,Ga;for(Ga in O)Ba+=this.matrix[Ga][ya]*O[Ga],O[Ga]=0;A(aa[ya])&&(Ba+=aa[ya]);var Ha=Math.trunc(Ba);G[ya]=Ha;O[ya]=(1E3*Ba-1E3*Ha)/1E3;for(var Fa in aa)ib.indexOf(Fa)>ib.indexOf(ya)&&xa(this.matrix,aa,Fa,G,ya)}else A(aa[ya])&&(O[ya]=aa[ya])}for(var Qa in O)0!==O[Qa]&&(G[ma]+=Qa===ma?O[Qa]:O[Qa]/this.matrix[ma][Qa]);return va(this,{values:G},!0).normalize()};K.shiftToAll=function(){return this.isValid?this.shiftTo("years",
"months","weeks","days","hours","minutes","seconds","milliseconds"):this};K.negate=function(){if(!this.isValid)return this;for(var G={},J=0,O=Object.keys(this.values);J<O.length;J++){var aa=O[J];G[aa]=0===this.values[aa]?0:-this.values[aa]}return va(this,{values:G},!0)};K.equals=function(G){if(!this.isValid||!G.isValid||!this.loc.equals(G.loc))return!1;for(var J=0;J<ib.length;J++){var O=ib[J];var aa=this.values[O];O=G.values[O];aa=void 0===aa||0===aa?void 0===O||0===O:aa===O;if(!aa)return!1}return!0};
a(I,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?
this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",
get:function(){return this.invalid?this.invalid.explanation:null}}]);return I}(),xb=function(){function I(G){this.s=G.start;this.e=G.end;this.invalid=G.invalid||null;this.isLuxonInterval=!0}I.invalid=function(G,J){void 0===J&&(J=null);if(!G)throw new ab("need to specify a reason the Interval is invalid");G=G instanceof fb?G:new fb(G,J);if(Ra.throwOnInvalid)throw new dd(G);return new I({invalid:G})};I.fromDateTimes=function(G,J){G=wb(G);J=wb(J);var O=G&&G.isValid?J&&J.isValid?J<G?xb.invalid("end before start",
"The end of an interval must be after its start, but you had start\x3d"+G.toISO()+" and end\x3d"+J.toISO()):null:xb.invalid("missing or invalid end"):xb.invalid("missing or invalid start");return null==O?new I({start:G,end:J}):O};I.after=function(G,J){J=Xa.fromDurationLike(J);G=wb(G);return I.fromDateTimes(G,G.plus(J))};I.before=function(G,J){J=Xa.fromDurationLike(J);G=wb(G);return I.fromDateTimes(G.minus(J),G)};I.fromISO=function(G,J){var O=(G||"").split("/",2),aa=O[0];O=O[1];if(aa&&O){try{var ma=
Sa.fromISO(aa,J);var ra=ma.isValid}catch(Ga){ra=!1}try{var ya=Sa.fromISO(O,J);var Ba=ya.isValid}catch(Ga){Ba=!1}if(ra&&Ba)return I.fromDateTimes(ma,ya);if(ra){if(ya=Xa.fromISO(O,J),ya.isValid)return I.after(ma,ya)}else if(Ba&&(ma=Xa.fromISO(aa,J),ma.isValid))return I.before(ya,ma)}return I.invalid("unparsable",'the input "'+G+"\" can't be parsed as ISO 8601")};I.isInterval=function(G){return G&&G.isLuxonInterval||!1};var K=I.prototype;K.length=function(G){void 0===G&&(G="milliseconds");return this.isValid?
this.toDuration.apply(this,[G]).get(G):NaN};K.count=function(G){void 0===G&&(G="milliseconds");if(!this.isValid)return NaN;var J=this.start.startOf(G),O=this.end.startOf(G);return Math.floor(O.diff(J,G).get(G))+1};K.hasSame=function(G){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,G):!1};K.isEmpty=function(){return this.s.valueOf()===this.e.valueOf()};K.isAfter=function(G){return this.isValid?this.s>G:!1};K.isBefore=function(G){return this.isValid?this.e<=G:!1};K.contains=function(G){return this.isValid?
this.s<=G&&this.e>G:!1};K.set=function(G){G=void 0===G?{}:G;return this.isValid?I.fromDateTimes(G.start||this.s,G.end||this.e):this};K.splitAt=function(){var G=this;if(!this.isValid)return[];for(var J=arguments.length,O=Array(J),aa=0;aa<J;aa++)O[aa]=arguments[aa];J=O.map(wb).filter(function(ya){return G.contains(ya)}).sort();O=[];aa=this.s;for(var ma=0;aa<this.e;){var ra=J[ma]||this.e;ra=+ra>+this.e?this.e:ra;O.push(I.fromDateTimes(aa,ra));aa=ra;ma+=1}return O};K.splitBy=function(G){G=Xa.fromDurationLike(G);
if(!this.isValid||!G.isValid||0===G.as("milliseconds"))return[];for(var J=this.s,O=1,aa,ma=[];J<this.e;)aa=this.start.plus(G.mapUnits(function(ra){return ra*O})),aa=+aa>+this.e?this.e:aa,ma.push(I.fromDateTimes(J,aa)),J=aa,O+=1;return ma};K.divideEqually=function(G){return this.isValid?this.splitBy(this.length()/G).slice(0,G):[]};K.overlaps=function(G){return this.e>G.s&&this.s<G.e};K.abutsStart=function(G){return this.isValid?+this.e===+G.s:!1};K.abutsEnd=function(G){return this.isValid?+G.e===+this.s:
!1};K.engulfs=function(G){return this.isValid?this.s<=G.s&&this.e>=G.e:!1};K.equals=function(G){return this.isValid&&G.isValid?this.s.equals(G.s)&&this.e.equals(G.e):!1};K.intersection=function(G){if(!this.isValid)return this;var J=this.s>G.s?this.s:G.s;G=this.e<G.e?this.e:G.e;return J>=G?null:I.fromDateTimes(J,G)};K.union=function(G){return this.isValid?I.fromDateTimes(this.s<G.s?this.s:G.s,this.e>G.e?this.e:G.e):this};I.merge=function(G){var J=G.sort(function(O,aa){return O.s-aa.s}).reduce(function(O,
aa){var ma=O[0];return(O=O[1])?O.overlaps(aa)||O.abutsStart(aa)?[ma,O.union(aa)]:[ma.concat([O]),aa]:[ma,aa]},[[],null]);G=J[0];(J=J[1])&&G.push(J);return G};I.xor=function(G){var J,O=null,aa=0,ma=[];G=G.map(function(ya){return[{time:ya.s,type:"s"},{time:ya.e,type:"e"}]});var ra=(J=Array.prototype).concat.apply(J,G).sort(function(ya,Ba){return ya.time-Ba.time});for(J=p(ra);!(G=J()).done;)G=G.value,aa+="s"===G.type?1:-1,1===aa?O=G.time:(O&&+O!==+G.time&&ma.push(I.fromDateTimes(O,G.time)),O=null);return I.merge(ma)};
K.difference=function(){for(var G=this,J=arguments.length,O=Array(J),aa=0;aa<J;aa++)O[aa]=arguments[aa];return I.xor([this].concat(O)).map(function(ma){return G.intersection(ma)}).filter(function(ma){return ma&&!ma.isEmpty()})};K.toString=function(){return this.isValid?"["+this.s.toISO()+" \u2013 "+this.e.toISO()+")":"Invalid Interval"};K.toLocaleString=function(G,J){void 0===G&&(G=Bb);void 0===J&&(J={});return this.isValid?db.create(this.s.loc.clone(J),G).formatInterval(this):"Invalid Interval"};
K.toISO=function(G){return this.isValid?this.s.toISO(G)+"/"+this.e.toISO(G):"Invalid Interval"};K.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():"Invalid Interval"};K.toISOTime=function(G){return this.isValid?this.s.toISOTime(G)+"/"+this.e.toISOTime(G):"Invalid Interval"};K.toFormat=function(G,J){J=(void 0===J?{}:J).separator;J=void 0===J?" \u2013 ":J;return this.isValid?""+this.s.toFormat(G)+J+this.e.toFormat(G):"Invalid Interval"};K.toDuration=function(G,J){return this.isValid?
this.e.diff(this.s,G,J):Xa.invalid(this.invalidReason)};K.mapEndpoints=function(G){return I.fromDateTimes(G(this.s),G(this.e))};a(I,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return null===this.invalidReason}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]);return I}(),
yb=function(){function I(){}I.hasDST=function(K){void 0===K&&(K=Ra.defaultZone);var G=Sa.now().setZone(K).set({month:12});return!K.isUniversal&&G.offset!==G.set({month:6}).offset};I.isValidIANAZone=function(K){return ob.isValidZone(K)};I.normalizeZone=function(K){return x(K,Ra.defaultZone)};I.months=function(K,G){void 0===K&&(K="long");var J=void 0===G?{}:G;G=J.locale;var O=J.numberingSystem,aa=J.locObj;J=J.outputCalendar;return((void 0===aa?null:aa)||Ta.create(void 0===G?null:G,void 0===O?null:O,
void 0===J?"gregory":J)).months(K)};I.monthsFormat=function(K,G){void 0===K&&(K="long");var J=void 0===G?{}:G;G=J.locale;var O=J.numberingSystem,aa=J.locObj;J=J.outputCalendar;return((void 0===aa?null:aa)||Ta.create(void 0===G?null:G,void 0===O?null:O,void 0===J?"gregory":J)).months(K,!0)};I.weekdays=function(K,G){void 0===K&&(K="long");var J=void 0===G?{}:G;G=J.locale;var O=J.numberingSystem;J=J.locObj;return((void 0===J?null:J)||Ta.create(void 0===G?null:G,void 0===O?null:O,null)).weekdays(K)};
I.weekdaysFormat=function(K,G){void 0===K&&(K="long");var J=void 0===G?{}:G;G=J.locale;var O=J.numberingSystem;J=J.locObj;return((void 0===J?null:J)||Ta.create(void 0===G?null:G,void 0===O?null:O,null)).weekdays(K,!0)};I.meridiems=function(K){K=(void 0===K?{}:K).locale;return Ta.create(void 0===K?null:K).meridiems()};I.eras=function(K,G){void 0===K&&(K="short");G=(void 0===G?{}:G).locale;return Ta.create(void 0===G?null:G,null,"gregory").eras(K)};I.features=function(){return{relative:D()}};return I}(),
Hb={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",
tibt:"[\u0f20-\u0f29]",latn:"\\d"},Yb={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},$c=Hb.hanidec.replace(/[\[|\]]/g,"").split(""),Zb="[ "+String.fromCharCode(160)+"]",Ib=new RegExp(Zb,"g"),bd={year:{"2-digit":"yy",
numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}},Jb=null,Lb=[0,31,59,90,120,151,181,212,243,273,304,334],Kb=[0,31,60,91,121,152,182,213,244,274,305,335],hc={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Kd={weekNumber:1,weekday:1,
hour:0,minute:0,second:0,millisecond:0},Ld={ordinal:1,hour:0,minute:0,second:0,millisecond:0},gc="year month day hour minute second millisecond".split(" "),Md="weekYear weekNumber weekday hour minute second millisecond".split(" "),Nd="year ordinal hour minute second millisecond".split(" "),Sa=function(){function I(G){var J=G.zone||Ra.defaultZone,O=G.invalid||(Number.isNaN(G.ts)?new fb("invalid input"):null)||(J.isValid?null:hb(J));this.ts=z(G.ts)?Ra.now():G.ts;var aa=null,ma=null;O||(G.old&&G.old.ts===
this.ts&&G.old.zone.equals(J)?(ma=[G.old.c,G.old.o],aa=ma[0],ma=ma[1]):(ma=J.offset(this.ts),aa=ac(this.ts,ma),aa=(O=Number.isNaN(aa.year)?new fb("invalid input"):null)?null:aa,ma=O?null:ma));this._zone=J;this.loc=G.loc||Ta.create();this.invalid=O;this.weekData=null;this.c=aa;this.o=ma;this.isLuxonDateTime=!0}I.now=function(){return new I({})};I.local=function(){var G=jc(arguments),J=G[1];return fc({year:J[0],month:J[1],day:J[2],hour:J[3],minute:J[4],second:J[5],millisecond:J[6]},G[0])};I.utc=function(){var G=
jc(arguments),J=G[0],O=G[1];G=O[0];var aa=O[1],ma=O[2],ra=O[3],ya=O[4],Ba=O[5];O=O[6];J.zone=cb.utcInstance;return fc({year:G,month:aa,day:ma,hour:ra,minute:ya,second:Ba,millisecond:O},J)};I.fromJSDate=function(G,J){void 0===J&&(J={});G="[object Date]"===Object.prototype.toString.call(G)?G.valueOf():NaN;if(Number.isNaN(G))return I.invalid("invalid input");var O=x(J.zone,Ra.defaultZone);return O.isValid?new I({ts:G,zone:O,loc:Ta.fromObject(J)}):I.invalid(hb(O))};I.fromMillis=function(G,J){void 0===
J&&(J={});if(A(G))return-864E13>G||864E13<G?I.invalid("Timestamp out of range"):new I({ts:G,zone:x(J.zone,Ra.defaultZone),loc:Ta.fromObject(J)});throw new ab("fromMillis requires a numerical input, but received a "+typeof G+" with value "+G);};I.fromSeconds=function(G,J){void 0===J&&(J={});if(A(G))return new I({ts:1E3*G,zone:x(J.zone,Ra.defaultZone),loc:Ta.fromObject(J)});throw new ab("fromSeconds requires a numerical input");};I.fromObject=function(G,J){void 0===J&&(J={});G=G||{};var O=x(J.zone,
Ra.defaultZone);if(!O.isValid)return I.invalid(hb(O));var aa=Ra.now(),ma=z(J.specificOffset)?O.offset(aa):J.specificOffset,ra=T(G,dc),ya=!z(ra.ordinal),Ba=!z(ra.year),Ga=!z(ra.month)||!z(ra.day);Ba=Ba||Ga;var Ha=ra.weekYear||ra.weekNumber;J=Ta.fromObject(J);if((Ba||ya)&&Ha)throw new tb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Ga&&ya)throw new tb("Can't mix ordinal dates with month/day");Ga=Ha||ra.weekday&&!Ba;Ha=ac(aa,ma);if(Ga){var Fa=Md;aa=Kd;Ha=pb(Ha)}else ya?(Fa=
Nd,aa=Ld,Ha=Za(Ha)):(Fa=gc,aa=hc);var Qa=!1;Fa=p(Fa);for(var bb;!(bb=Fa()).done;)bb=bb.value,z(ra[bb])?ra[bb]=Qa?aa[bb]:Ha[bb]:Qa=!0;Ga?(aa=C(ra.weekYear),Ha=E(ra.weekNumber,1,X(ra.weekYear)),Qa=E(ra.weekday,1,7),aa=aa?Ha?Qa?!1:Wa("weekday",ra.weekday):Wa("week",ra.week):Wa("weekYear",ra.weekYear)):ya?(aa=C(ra.year),Ha=E(ra.ordinal,1,da(ra.year)?366:365),aa=aa?Ha?!1:Wa("ordinal",ra.ordinal):Wa("year",ra.year)):aa=mb(ra);if(aa=aa||Va(ra))return I.invalid(aa);ya=Ga?lb(ra):ya?jb(ra):ra;ma=zb(ya,ma,O);
O=new I({ts:ma[0],zone:O,o:ma[1],loc:J});return ra.weekday&&Ba&&G.weekday!==O.weekday?I.invalid("mismatched weekday","you can't specify both a weekday of "+ra.weekday+" and a date of "+O.toISO()):O};I.fromISO=function(G,J){void 0===J&&(J={});var O=sa(G,[xd,Qc],[yd,Bd],[zd,Cd],[Ad,Dd]);return vb(O[0],O[1],J,"ISO 8601",G)};I.fromRFC2822=function(G,J){void 0===J&&(J={});var O=sa(G.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[td,Z]);return vb(O[0],O[1],J,"RFC 2822",G)};I.fromHTTP=
function(G,J){void 0===J&&(J={});G=sa(G,[ud,oa],[vd,oa],[wd,ua]);return vb(G[0],G[1],J,"HTTP",J)};I.fromFormat=function(G,J,O){void 0===O&&(O={});if(z(G)||z(J))throw new ab("fromFormat requires an input string and a format");var aa=O,ma=aa.locale;aa=aa.numberingSystem;ma=Ta.fromOpts({locale:void 0===ma?null:ma,numberingSystem:void 0===aa?null:aa,defaultToEN:!0});ma=Ka(ma,G,J);var ra=[ma.result,ma.zone,ma.specificOffset,ma.invalidReason];ma=ra[0];aa=ra[1];var ya=ra[2];return(ra=ra[3])?I.invalid(ra):
vb(ma,aa,O,"format "+J,G,ya)};I.fromString=function(G,J,O){void 0===O&&(O={});return I.fromFormat(G,J,O)};I.fromSQL=function(G,J){void 0===J&&(J={});var O=sa(G,[Fd,Qc],[Gd,Hd]);return vb(O[0],O[1],J,"SQL",G)};I.invalid=function(G,J){void 0===J&&(J=null);if(!G)throw new ab("need to specify a reason the DateTime is invalid");G=G instanceof fb?G:new fb(G,J);if(Ra.throwOnInvalid)throw new cd(G);return new I({invalid:G})};I.isDateTime=function(G){return G&&G.isLuxonDateTime||!1};I.parseFormatForOpts=function(G,
J){void 0===J&&(J={});return(G=eb(G,Ta.fromObject(J)))?G.map(function(O){return O?O.val:null}).join(""):null};I.expandFormat=function(G,J){void 0===J&&(J={});return Ia(db.parseFormat(G),Ta.fromObject(J)).map(function(O){return O.val}).join("")};var K=I.prototype;K.get=function(G){return this[G]};K.resolvedLocaleOptions=function(G){void 0===G&&(G={});G=db.create(this.loc.clone(G),G).resolvedOptions(this);return{locale:G.locale,numberingSystem:G.numberingSystem,outputCalendar:G.calendar}};K.toUTC=function(G,
J){void 0===G&&(G=0);void 0===J&&(J={});return this.setZone(cb.instance(G),J)};K.toLocal=function(){return this.setZone(Ra.defaultZone)};K.setZone=function(G,J){var O=void 0===J?{}:J;J=O.keepLocalTime;J=void 0===J?!1:J;O=O.keepCalendarTime;O=void 0===O?!1:O;G=x(G,Ra.defaultZone);if(G.equals(this.zone))return this;if(G.isValid){var aa=this.ts;if(J||O)J=G.offset(this.ts),O=this.toObject(),aa=zb(O,J,G)[0];return ub(this,{ts:aa,zone:G})}return I.invalid(hb(G))};K.reconfigure=function(G){G=void 0===G?
{}:G;G=this.loc.clone({locale:G.locale,numberingSystem:G.numberingSystem,outputCalendar:G.outputCalendar});return ub(this,{loc:G})};K.setLocale=function(G){return this.reconfigure({locale:G})};K.set=function(G){if(!this.isValid)return this;G=T(G,dc);var J=!z(G.weekYear)||!z(G.weekNumber)||!z(G.weekday),O=!z(G.ordinal),aa=!z(G.year),ma=!z(G.month)||!z(G.day),ra=G.weekYear||G.weekNumber;if((aa||ma||O)&&ra)throw new tb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(ma&&O)throw new tb("Can't mix ordinal dates with month/day");
J?J=lb(b({},pb(this.c),G)):z(G.ordinal)?(J=b({},this.toObject(),G),z(G.day)&&(J.day=Math.min(ha(J.year,J.month),J.day))):J=jb(b({},Za(this.c),G));G=zb(J,this.o,this.zone);return ub(this,{ts:G[0],o:G[1]})};K.plus=function(G){if(!this.isValid)return this;G=Xa.fromDurationLike(G);return ub(this,bc(this,G))};K.minus=function(G){if(!this.isValid)return this;G=Xa.fromDurationLike(G).negate();return ub(this,bc(this,G))};K.startOf=function(G){if(!this.isValid)return this;var J={};G=Xa.normalizeUnit(G);switch(G){case "years":J.month=
1;case "quarters":case "months":J.day=1;case "weeks":case "days":J.hour=0;case "hours":J.minute=0;case "minutes":J.second=0;case "seconds":J.millisecond=0}"weeks"===G&&(J.weekday=1);"quarters"===G&&(J.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(J)};K.endOf=function(G){var J;return this.isValid?this.plus((J={},J[G]=1,J)).startOf(G).minus(1):this};K.toFormat=function(G,J){void 0===J&&(J={});return this.isValid?db.create(this.loc.redefaultToEN(J)).formatDateTimeFromString(this,G):"Invalid DateTime"};
K.toLocaleString=function(G,J){void 0===G&&(G=Bb);void 0===J&&(J={});return this.isValid?db.create(this.loc.clone(J),G).formatDateTime(this):"Invalid DateTime"};K.toLocaleParts=function(G){void 0===G&&(G={});return this.isValid?db.create(this.loc.clone(G),G).formatDateTimeParts(this):[]};K.toISO=function(G){var J=void 0===G?{}:G,O=J.format;G=J.suppressSeconds;G=void 0===G?!1:G;var aa=J.suppressMilliseconds;aa=void 0===aa?!1:aa;var ma=J.includeOffset;ma=void 0===ma?!0:ma;J=J.extendedZone;J=void 0===
J?!1:J;if(!this.isValid)return null;O="extended"===(void 0===O?"extended":O);var ra=Nb(this,O);return ra=ra+"T"+cc(this,O,G,aa,ma,J)};K.toISODate=function(G){G=(void 0===G?{}:G).format;return this.isValid?Nb(this,"extended"===(void 0===G?"extended":G)):null};K.toISOWeekDate=function(){return Ab(this,"kkkk-'W'WW-c")};K.toISOTime=function(G){var J=void 0===G?{}:G;G=J.suppressMilliseconds;var O=J.suppressSeconds,aa=J.includeOffset,ma=J.includePrefix,ra=J.extendedZone;J=J.format;return this.isValid?((void 0===
ma?0:ma)?"T":"")+cc(this,"extended"===(void 0===J?"extended":J),void 0===O?!1:O,void 0===G?!1:G,void 0===aa?!0:aa,void 0===ra?!1:ra):null};K.toRFC2822=function(){return Ab(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)};K.toHTTP=function(){return Ab(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")};K.toSQLDate=function(){return this.isValid?Nb(this,!0):null};K.toSQLTime=function(G){var J=void 0===G?{}:G;G=J.includeOffset;G=void 0===G?!0:G;var O=J.includeZone;O=void 0===O?!1:O;J=J.includeOffsetSpace;J=void 0===
J?!0:J;var aa="HH:mm:ss.SSS";if(O||G)J&&(aa+=" "),O?aa+="z":G&&(aa+="ZZ");return Ab(this,aa,!0)};K.toSQL=function(G){void 0===G&&(G={});return this.isValid?this.toSQLDate()+" "+this.toSQLTime(G):null};K.toString=function(){return this.isValid?this.toISO():"Invalid DateTime"};K.valueOf=function(){return this.toMillis()};K.toMillis=function(){return this.isValid?this.ts:NaN};K.toSeconds=function(){return this.isValid?this.ts/1E3:NaN};K.toUnixInteger=function(){return this.isValid?Math.floor(this.ts/
1E3):NaN};K.toJSON=function(){return this.toISO()};K.toBSON=function(){return this.toJSDate()};K.toObject=function(G){void 0===G&&(G={});if(!this.isValid)return{};var J=b({},this.c);G.includeConfig&&(J.outputCalendar=this.outputCalendar,J.numberingSystem=this.loc.numberingSystem,J.locale=this.loc.locale);return J};K.toJSDate=function(){return new Date(this.isValid?this.ts:NaN)};K.diff=function(G,J,O){void 0===J&&(J="milliseconds");void 0===O&&(O={});if(!this.isValid||!G.isValid)return Xa.invalid("created by diffing an invalid DateTime");
O=b({locale:this.locale,numberingSystem:this.numberingSystem},O);var aa=(Array.isArray(J)?J:[J]).map(Xa.normalizeUnit);J=G.valueOf()>this.valueOf();G=Ja(J?this:G,J?G:this,aa,O);return J?G.negate():G};K.diffNow=function(G,J){void 0===G&&(G="milliseconds");void 0===J&&(J={});return this.diff(I.now(),G,J)};K.until=function(G){return this.isValid?xb.fromDateTimes(this,G):this};K.hasSame=function(G,J){if(!this.isValid)return!1;var O=G.valueOf();G=this.setZone(G.zone,{keepLocalTime:!0});return G.startOf(J)<=
O&&O<=G.endOf(J)};K.equals=function(G){return this.isValid&&G.isValid&&this.valueOf()===G.valueOf()&&this.zone.equals(G.zone)&&this.loc.equals(G.loc)};K.toRelative=function(G){void 0===G&&(G={});if(!this.isValid)return null;var J=G.base||I.fromObject({},{zone:this.zone}),O=G.padding?this<J?-G.padding:G.padding:0,aa="years months days hours minutes seconds".split(" "),ma=G.unit;Array.isArray(G.unit)&&(aa=G.unit,ma=void 0);return ic(J,this.plus(O),b({},G,{numeric:"always",units:aa,unit:ma}))};K.toRelativeCalendar=
function(G){void 0===G&&(G={});return this.isValid?ic(G.base||I.fromObject({},{zone:this.zone}),this,b({},G,{numeric:"auto",units:["years","months","days"],calendary:!0})):null};I.min=function(){for(var G=arguments.length,J=Array(G),O=0;O<G;O++)J[O]=arguments[O];if(!J.every(I.isDateTime))throw new ab("min requires all arguments be DateTimes");return B(J,function(aa){return aa.valueOf()},Math.min)};I.max=function(){for(var G=arguments.length,J=Array(G),O=0;O<G;O++)J[O]=arguments[O];if(!J.every(I.isDateTime))throw new ab("max requires all arguments be DateTimes");
return B(J,function(aa){return aa.valueOf()},Math.max)};I.fromFormatExplain=function(G,J,O){void 0===O&&(O={});var aa=O;O=aa.locale;aa=aa.numberingSystem;O=Ta.fromOpts({locale:void 0===O?null:O,numberingSystem:void 0===aa?null:aa,defaultToEN:!0});return Ka(O,G,J)};I.fromStringExplain=function(G,J,O){void 0===O&&(O={});return I.fromFormatExplain(G,J,O)};a(I,[{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},
{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?
this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:
NaN}},{key:"weekYear",get:function(){return this.isValid?Mb(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?Mb(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?Mb(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?Za(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?yb.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?yb.months("long",{locObj:this.loc})[this.month-
1]:null}},{key:"weekdayShort",get:function(){return this.isValid?yb.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?yb.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,
{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.isUniversal:null}},{key:"isInDST",get:function(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}},{key:"isInLeapYear",get:function(){return da(this.year)}},{key:"daysInMonth",get:function(){return ha(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?da(this.year)?366:365:NaN}},{key:"weeksInWeekYear",
get:function(){return this.isValid?X(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return Bb}},{key:"DATE_MED",get:function(){return kc}},{key:"DATE_MED_WITH_WEEKDAY",get:function(){return fd}},{key:"DATE_FULL",get:function(){return lc}},{key:"DATE_HUGE",get:function(){return mc}},{key:"TIME_SIMPLE",get:function(){return nc}},{key:"TIME_WITH_SECONDS",get:function(){return oc}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return pc}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return qc}},
{key:"TIME_24_SIMPLE",get:function(){return rc}},{key:"TIME_24_WITH_SECONDS",get:function(){return sc}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return tc}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return uc}},{key:"DATETIME_SHORT",get:function(){return vc}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return wc}},{key:"DATETIME_MED",get:function(){return xc}},{key:"DATETIME_MED_WITH_SECONDS",get:function(){return yc}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return gd}},
{key:"DATETIME_FULL",get:function(){return zc}},{key:"DATETIME_FULL_WITH_SECONDS",get:function(){return Ac}},{key:"DATETIME_HUGE",get:function(){return Bc}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return Cc}}]);return I}();g.DateTime=Sa;g.Duration=Xa;g.FixedOffsetZone=cb;g.IANAZone=ob;g.Info=yb;g.Interval=xb;g.InvalidZone=Ub;g.Settings=Ra;g.SystemZone=Gb;g.VERSION="3.2.1";g.Zone=rb;Object.defineProperty(g,"__esModule",{value:!0})})},"esri/arcade/ImmutableArray":function(){define(["require",
"exports"],function(g,t){return function(){function a(b){void 0===b&&(b=[]);this._elements=b}a.prototype.length=function(){return this._elements.length};a.prototype.get=function(b){return this._elements[b]};a.prototype.toArray=function(){for(var b=[],c=0;c<this.length();c++)b.push(this.get(c));return b};return a}()})},"esri/arcade/languageUtils":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ./ArcadeDate ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../libs/luxon/luxon dojo/number dojo/_base/kernel ./featureset/support/shared ./ArcadeModule ./executionError".split(" "),
function(g,t,a,b,c,k,h,d,e,l,f,n,u,p,r,q,m,v,x,z,A,C,D){function B(L,Z,oa){return""===Z||null===Z||void 0===Z||Z===oa||Z===oa?L:L=L.split(Z).join(oa)}function y(L){return L instanceof h.ArcadeFunction}function w(L){return L instanceof C.ArcadeModule}function E(L){return F(L)||M(L)||X(L)||H(L)||null===L||L===t.voidOperation||"number"===typeof L?!0:!1}function F(L){return"string"===typeof L||L instanceof String}function H(L){return"boolean"===typeof L}function M(L){return"number"===typeof L}function R(L){return L instanceof
Array}function V(L){return"esri.arcade.Feature"===(null===L||void 0===L?void 0:L.arcadeDeclaredClass)?!0:!1}function da(L){return"esri.arcade.featureset.support.FeatureSet"===(null===L||void 0===L?void 0:L.declaredRootClass)}function ha(L){return"esri.arcade.featureSetCollection"===(null===L||void 0===L?void 0:L.declaredRootClass)}function fa(L){return L instanceof d}function X(L){return L instanceof f.ArcadeDate}function ca(L){return null!=L&&"object"===typeof L}function Q(L){return L instanceof
Date}function U(L,Z){if(!isNaN(L)){if(void 0===Z||null===Z||""===Z)return L.toString();Z=B(Z,"\u2030","");Z=B(Z,"\u00a4","");return x.format(L,{pattern:Z})}return L.toString()}function ia(L,Z){return void 0===Z||null===Z||""===Z?L.toISOString(!0):L.toFormat(T(Z),{locale:z.locale,numberingSystem:"latn"})}function T(L){L=L.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");var Z="",oa=0;for(L=L.match(/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g)||
[];oa<L.length;oa++){var ua=L[oa];switch(ua){case "D":Z+="d";break;case "DD":Z+="dd";break;case "DDD":Z+="o";break;case "d":Z+="c";break;case "ddd":Z+="ccc";break;case "dddd":Z+="cccc";break;case "M":Z+="L";break;case "MM":Z+="LL";break;case "MMM":Z+="LLL";break;case "MMMM":Z+="LLLL";break;case "YY":Z+="yy";break;case "Y":case "YYYY":Z+="yyyy";break;case "Q":Z+="q";break;case "Z":Z+="ZZ";break;case "ZZ":Z+="ZZZ";break;case "S":Z+="'S'";break;case "SS":Z+="'SS'";break;case "SSS":Z+="u";break;case "A":case "a":Z+=
"a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":Z+=ua;break;default:Z=2<=ua.length&&"["===ua.slice(0,1)&&"]"===ua.slice(-1)?Z+("'"+ua.slice(1,-1)+"'"):Z+("'"+ua+"'")}}return Z}function Y(L,Z,oa){switch(oa){case "\x3e":return L>Z;case "\x3c":return L<Z;case "\x3e\x3d":return L>=Z;case "\x3c\x3d":return L<=Z}return!1}function ja(L,Z){if(L===Z||null===L&&Z===t.voidOperation||null===Z&&L===t.voidOperation)return!0;if(X(L)&&X(Z))return L.equals(Z);
if(L instanceof e||L instanceof l)return L.equalityTest(Z);if(L instanceof r&&Z instanceof r){var oa=L.getCacheValue("_arcadeCacheId"),ua=Z.getCacheValue("_arcadeCacheId");if(void 0!==oa&&null!==oa)return oa===ua}return ca(L)&&ca(Z)&&(L._arcadeCacheId===Z._arcadeCacheId&&void 0!==L._arcadeCacheId&&null!==L._arcadeCacheId||L._underlyingGraphic===Z._underlyingGraphic&&void 0!==L._underlyingGraphic&&null!==L._underlyingGraphic)?!0:!1}function pa(L,Z){if(F(L))return L;if(null===L)return"";if(M(L))return U(L,
Z);if(H(L))return L.toString();if(X(L))return ia(L,Z);if(L instanceof u)return JSON.stringify(L.toJson());if(R(L)){Z=[];for(var oa=0;oa<L.length;oa++)Z[oa]=W(L[oa]);return"["+Z.join(",")+"]"}if(L instanceof d){Z=[];for(oa=0;oa<L.length();oa++)Z[oa]=W(L.get(oa));return"["+Z.join(",")+"]"}return null!==L&&"object"===typeof L&&void 0!==L.castToText?L.castToText():y(L)?"object, Function":L===t.voidOperation?"":w(L)?"object, Module":""}function ta(L,Z,oa){void 0===oa&&(oa=!1);if(F(L))return L;if(null===
L)return"";if(M(L))return U(L,Z);if(H(L))return L.toString();if(X(L))return ia(L,Z);if(L instanceof u)return L instanceof n?'{"xmin":'+L.xmin.toString()+',"ymin":'+L.ymin.toString()+","+(L.hasZ?'"zmin":'+L.zmin.toString()+",":"")+(L.hasM?'"mmin":'+L.mmin.toString()+",":"")+'"xmax":'+L.xmax.toString()+',"ymax":'+L.ymax.toString()+","+(L.hasZ?'"zmax":'+L.zmax.toString()+",":"")+(L.hasM?'"mmax":'+L.mmax.toString()+",":"")+'"spatialReference":'+Ca(L.spatialReference)+"}":Ca(L.toJson(),function(va,xa){return va.key===
xa.key?0:"spatialReference"===va.key?1:"spatialReference"===xa.key||va.key<xa.key?-1:va.key>xa.key?1:0});if(R(L)){Z=[];for(var ua=0;ua<L.length;ua++)Z[ua]=W(L[ua],oa);return"["+Z.join(",")+"]"}if(L instanceof d){Z=[];for(ua=0;ua<L.length();ua++)Z[ua]=W(L.get(ua),oa);return"["+Z.join(",")+"]"}return null!==L&&"object"===typeof L&&void 0!==L.castToText?L.castToText(oa):y(L)?"object, Function":L===t.voidOperation?"":w(L)?"object, Module":""}function W(L,Z){void 0===Z&&(Z=!1);return null===L?"null":H(L)||
M(L)||F(L)?JSON.stringify(L):L instanceof u||L instanceof d||L instanceof Array?ta(L,null,Z):X(L)?Z?JSON.stringify(L.getTime()):JSON.stringify(ia(L,"")):null!==L&&"object"===typeof L&&void 0!==L.castToText?L.castToText(Z):"null"}function S(L,Z){return M(L)?L:null===L||""===L?0:X(L)?NaN:H(L)?L?1:0:R(L)||""===L||void 0===L?NaN:void 0!==Z&&F(L)?(Z=B(Z,"\u2030",""),Z=B(Z,"\u00a4",""),x.parse(L,{pattern:Z})):L===t.voidOperation?0:Number(L)}function ea(L,Z){if(!L||!L.domain)return Z;var oa=null;if("string"===
L.field.type||"esriFieldTypeString"===L.field.type)Z=pa(Z);else{if(null===Z||void 0===Z)return null;if(""===Z)return Z;Z=S(Z)}for(var ua=0;ua<L.domain.codedValues.length;ua++){var va=L.domain.codedValues[ua];va.code===Z&&(oa=va)}return null===oa?Z:oa.name}function ka(L,Z){if(!L||!L.domain)return Z;var oa=null;Z=pa(Z);for(var ua=0;ua<L.domain.codedValues.length;ua++){var va=L.domain.codedValues[ua];va.name===Z&&(oa=va)}return null===oa?Z:oa.code}function na(L,Z,oa,ua){void 0===oa&&(oa=null);void 0===
ua&&(ua=null);if(!Z||!Z.fields)return null;for(var va=null,xa=0;xa<Z.fields.length;xa++){var Aa=Z.fields[xa];Aa.name.toLowerCase()===L.toString().toLowerCase()&&(va=Aa)}if(null===va)throw new D.ArcadeExecutionError(null,D.ExecutionErrorCodes.FieldNotFound,null,{key:L});var wa,Ea;null===ua&&oa&&Z.typeIdField&&(ua=oa.hasField(Z.typeIdField)?oa.field(Z.typeIdField):null);null!==ua&&void 0!==ua&&Z.types.some(function(Ja){return Ja.id===ua?((wa=Ja.domains&&Ja.domains[va.name])&&"inherited"===wa.type&&
(wa=sa(va.name,Z),Ea=!0),!0):!1});Ea||wa||(wa=sa(L,Z));return{field:va,domain:wa}}function sa(L,Z){var oa;Z.fields.some(function(ua){ua.name.toLowerCase()===L.toLowerCase()&&(oa=ua.domain);return!!oa});return oa}function Ca(L,Z){Z||(Z={});"function"===typeof Z&&(Z={cmp:Z});var oa="boolean"===typeof Z.cycles?Z.cycles:!1,ua=Z.cmp&&function(xa){return function(Aa){return function(wa,Ea){return xa({key:wa,value:Aa[wa]},{key:Ea,value:Aa[Ea]})}}}(Z.cmp),va=[];return function wa(Aa){Aa&&Aa.toJson&&"function"===
typeof Aa.toJson&&(Aa=Aa.toJson());if(void 0!==Aa){if("number"===typeof Aa)return isFinite(Aa)?""+Aa:"null";if("object"!==typeof Aa)return JSON.stringify(Aa);var Ea;if(Array.isArray(Aa)){var Ja="[";for(Ea=0;Ea<Aa.length;Ea++)Ea&&(Ja+=","),Ja+=wa(Aa[Ea])||"null";return Ja+"]"}if(null===Aa)return"null";if(va.includes(Aa)){if(oa)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var Ma=va.push(Aa)-1,Da=Object.keys(Aa).sort(ua&&ua(Aa));Ja="";for(Ea=0;Ea<Da.length;Ea++){var Ya=
Da[Ea],Na=wa(Aa[Ya]);Na&&(Ja&&(Ja+=","),Ja+=JSON.stringify(Ya)+":"+Na)}va.splice(Ma,1);return"{"+Ja+"}"}}(L)}function N(L,Z){if(Z instanceof r)L.push([Z.x,Z.y]);else throw new D.ArcadeExecutionError(null,D.ExecutionErrorCodes.InvalidParameter,null);}function P(L,Z){void 0===Z&&(Z=null);if(null!=L){if(H(L)||M(L)||F(L))return L;if(L instanceof u)return!0===(null===Z||void 0===Z?void 0:Z.keepGeometryType)?L:L.toJson();if(L instanceof d)return L.toArray().map(function(oa){return P(oa,Z)});if(L instanceof
Array)return L.map(function(oa){return P(oa,Z)});if(Q(L))return L;if(X(L))return L.toJSDate();if(null!==L&&"object"===typeof L&&void 0!==L.castAsJson)return L.castAsJson(Z)}return null}function ba(L,Z,oa,ua,va){return a(this,void 0,void 0,function(){var xa;return b(this,function(Aa){switch(Aa.label){case 0:return[4,la(L,Z,oa)];case 1:return xa=Aa.sent(),va[ua]=xa,[2]}})})}function la(L,Z,oa){void 0===Z&&(Z=null);void 0===oa&&(oa=null);return a(this,void 0,void 0,function(){var ua,va,xa,Aa,wa;return b(this,
function(Ea){switch(Ea.label){case 0:return L instanceof d&&(L=L.toArray()),null!=L?[3,1]:[2,null];case 1:return E(L)||L instanceof u||Q(L)||X(L)?[2,P(L,oa)]:[3,2];case 2:if(!(L instanceof Array))return[3,5];ua=[];va=[];xa=0;for(Aa=L;xa<Aa.length;xa++)wa=Aa[xa],null===wa||E(wa)||wa instanceof u||Q(wa)||X(wa)?va.push(P(wa,oa)):(va.push(null),ua.push(ba(wa,Z,oa,va.length-1,va)));return 0<ua.length?[4,Promise.all(ua)]:[3,4];case 3:Ea.sent(),Ea.label=4;case 4:return[2,va];case 5:if(null!==L&&"object"===
typeof L&&void 0!==L.castAsJsonAsync)return[2,L.castAsJsonAsync(Z,oa)];Ea.label=6;case 6:return[2,null]}})})}Object.defineProperty(t,"__esModule",{value:!0});t.featureSchema=t.defaultTimeZone=t.featureDomainCodeLookup=t.featureDomainValueLookup=t.featureSubtypes=t.featureFullDomain=t.castAsJsonAsync=t.castAsJson=t.binaryOperator=t.tick=t.toStringArray=t.autoCastArrayOfPointsToMultiPoint=t.autoCastArrayOfPointsToPolyline=t.autoCastArrayOfPointsToPolygon=t.autoCastFeatureToGeometry=t.stableStringify=
t.getDomain=t.getDomainCode=t.getDomainValue=t.fixNullGeometry=t.fixSpatialReference=t.toBoolean=t.toDate=t.toNumber=t.toStringExplicit=t.toNumberArray=t.toString=t.equalityTest=t.greaterThanLessThan=t.standardiseDateFormat=t.formatDate=t.formatNumber=t.generateUUID=t.absRound=t.pcCheck=t.isJsDate=t.isObject=t.isDate=t.isImmutableArray=t.isFeatureSetCollection=t.isFeatureSet=t.isFeature=t.isArray=t.isInteger=t.isNumber=t.isBoolean=t.isString=t.getType=t.defaultUndefined=t.isSimpleType=t.isModule=
t.isFunctionParameter=t.multiReplace=t.continueResult=t.breakResult=t.voidOperation=t.ReturnResult=t.ImplicitResult=t.ImplicitResultE=t.ReturnResultE=void 0;g=function(){return function(L){this.value=L}}();t.ReturnResultE=g;c=function(){return function(L){this.value=L}}();t.ImplicitResultE=c;t.ImplicitResult=c;t.ReturnResult=g;t.voidOperation={type:"VOID"};t.breakResult={type:"BREAK"};t.continueResult={type:"CONTINUE"};t.multiReplace=B;t.isFunctionParameter=y;t.isModule=w;t.isSimpleType=E;t.defaultUndefined=
function(L,Z){return void 0===L?Z:L};t.getType=function(L){return null==L?"":R(L)||fa(L)?"Array":X(L)?"Date":F(L)?"String":H(L)?"Boolean":M(L)?"Number":"esri.arcade.Attachment"===(null===L||void 0===L?void 0:L.declaredClass)?"Attachment":"esri.arcade.Portal"===(null===L||void 0===L?void 0:L.declaredClass)?"Portal":"esri.arcade.Dictionary"===(null===L||void 0===L?void 0:L.declaredClass)?"Dictionary":L instanceof C.ArcadeModule?"Module":V(L)?"Feature":L instanceof r?"Point":L instanceof q?"Polygon":
L instanceof m?"Polyline":L instanceof p?"Multipoint":L instanceof n?"Extent":y(L)?"Function":da(L)?"FeatureSet":ha(L)?"FeatureSetCollection":L===t.voidOperation?"":"number"===typeof L&&isNaN(L)?"Number":"Unrecognised Type"};t.isString=F;t.isBoolean=H;t.isNumber=M;t.isInteger=function(L){return"number"===typeof L&&isFinite(L)&&Math.floor(L)===L};t.isArray=R;t.isFeature=V;t.isFeatureSet=da;t.isFeatureSetCollection=ha;t.isImmutableArray=fa;t.isDate=X;t.isObject=ca;t.isJsDate=Q;t.pcCheck=function(L,
Z,oa,ua,va){if(L.length<Z||L.length>oa)throw new D.ArcadeExecutionError(ua,D.ExecutionErrorCodes.WrongNumberOfParameters,va);};t.absRound=function(L){return 0>L?-Math.round(-L):Math.round(L)};t.generateUUID=function(){var L=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Z){var oa=(L+16*Math.random())%16|0;L=Math.floor(L/16);return("x"===Z?oa:oa&3|8).toString(16)})};t.formatNumber=U;t.formatDate=ia;t.standardiseDateFormat=T;t.greaterThanLessThan=function(L,Z,oa){if(null===
L){if(null===Z||Z===t.voidOperation)return Y(null,null,oa);if(M(Z))return Y(0,Z,oa);if(F(Z)||H(Z))return Y(0,S(Z),oa);if(X(Z))return Y(0,Z.toNumber(),oa)}if(L===t.voidOperation){if(null===Z||Z===t.voidOperation)return Y(null,null,oa);if(M(Z))return Y(0,Z,oa);if(F(Z)||H(Z))return Y(0,S(Z),oa);if(X(Z))return Y(0,Z.toNumber(),oa)}else if(M(L)){if(M(Z))return Y(L,Z,oa);if(H(Z))return Y(L,S(Z),oa);if(null===Z||Z===t.voidOperation)return Y(L,0,oa);if(F(Z))return Y(L,S(Z),oa);if(X(Z))return Y(L,Z.toNumber(),
oa)}else if(F(L)){if(F(Z))return Y(pa(L),pa(Z),oa);if(X(Z))return Y(S(L),Z.toNumber(),oa);if(M(Z))return Y(S(L),Z,oa);if(null===Z||Z===t.voidOperation)return Y(S(L),0,oa);if(H(Z))return Y(S(L),S(Z),oa)}else if(X(L)){if(X(Z))return Y(L.toNumber(),Z.toNumber(),oa);if(null===Z||Z===t.voidOperation)return Y(L.toNumber(),0,oa);if(M(Z))return Y(L.toNumber(),Z,oa);if(H(Z)||F(Z))return Y(L.toNumber(),S(Z),oa)}else if(H(L)){if(H(Z))return Y(L,Z,oa);if(M(Z))return Y(S(L),S(Z),oa);if(X(Z))return Y(S(L),Z.toNumber(),
oa);if(null===Z||Z===t.voidOperation)return Y(S(L),0,oa);if(F(Z))return Y(S(L),S(Z),oa)}return!ja(L,Z)||"\x3c\x3d"!==oa&&"\x3e\x3d"!==oa?!1:!0};t.equalityTest=ja;t.toString=pa;t.toNumberArray=function(L){var Z=[];if(!R(L))return null;if(L instanceof d){for(var oa=0;oa<L.length();oa++)Z[oa]=S(L.get(oa));return Z}for(oa=0;oa<L.length;oa++)Z[oa]=S(L[oa]);return Z};t.toStringExplicit=ta;t.toNumber=S;t.toDate=function(L,Z){if(X(L))return L;if(F(L)){a:{var oa=/ (\d\d)/,ua=f.createDateTimeZone(Z);ua=v.DateTime.fromISO(L,
{zone:ua});if(ua.isValid)Z=ua;else{if(oa.test(L)&&(L=L.replace(oa,"T$1"),ua=v.DateTime.fromISO(L,{zone:Z}),ua.isValid)){Z=ua;break a}Z=null}}if(Z)return f.ArcadeDate.dateTimeToArcadeDate(Z)}return null};t.toBoolean=function(L){return H(L)?L:F(L)?(L=L.toLowerCase(),"true"===L?!0:!1):M(L)?0===L||isNaN(L)?!1:!0:!1};t.fixSpatialReference=function(L,Z){if(null===L||void 0===L)return null;if(null===L.spatialReference||void 0===L.spatialReference)L.spatialReference=Z;return L};t.fixNullGeometry=function(L){if(null===
L)return null;if(L instanceof r)return"NaN"===L.x||null===L.x||isNaN(L.x)?null:L;if(L instanceof q){if(0===L.rings.length)return null;for(var Z=0,oa=L.rings;Z<oa.length;Z++){var ua=oa[Z];if(0<ua.length)return L}return null}if(L instanceof m){if(0===L.paths.length)return null;Z=0;for(oa=L.paths;Z<oa.length;Z++)if(ua=oa[Z],0<ua.length)return L;return null}return L instanceof p?0===L.points.length?null:L:L instanceof n?"NaN"===L.xmin||null===L.xmin||isNaN(L.xmin)?null:L:null};t.getDomainValue=ea;t.getDomainCode=
ka;t.getDomain=na;t.stableStringify=Ca;t.autoCastFeatureToGeometry=function(L){if(null===L)return null;for(var Z=[],oa=0;oa<L.length;oa++){var ua=L[oa];ua&&ua.arcadeDeclaredClass&&"esri.arcade.Feature"===ua.arcadeDeclaredClass?Z.push(ua.geometry()):Z.push(ua)}return Z};t.autoCastArrayOfPointsToPolygon=function(L,Z){if(R(L)||fa(L)){var oa=!1,ua=!1,va=[];if(R(L)){for(var xa=0;xa<L.length;xa++){var Aa=L[xa];N(va,Aa)}0<va.length&&(Z=L[0].spatialReference,oa=L[0].hasZ,ua=L[0].hasM)}else if(L instanceof
l)va=L._elements,0<va.length&&(oa=L._hasZ,ua=L._hasM,Z=L.get(0).spatialReference);else if(fa(L)){xa=0;for(var wa=L.toArray();xa<wa.length;xa++)Aa=wa[xa],N(va,Aa);0<va.length&&(Z=L.get(0).spatialReference,oa=!0===L.get(0).hasZ,ua=!0===L.get(0).hasM)}else throw new D.ArcadeExecutionError(null,D.ExecutionErrorCodes.InvalidParameter,null);if(0===va.length)return null;(new q({rings:[],spatialReference:{wkid:4326}})).isClockwise(va)||(va=va.slice(0).reverse());return new q({rings:[va],spatialReference:Z,
hasZ:oa,hasM:ua})}return L};t.autoCastArrayOfPointsToPolyline=function(L,Z){if(R(L)||fa(L)){var oa=!1,ua=!1,va=[];if(R(L)){for(var xa=0;xa<L.length;xa++){var Aa=L[xa];N(va,Aa)}0<va.length&&(Z=L[0].spatialReference,oa=!0===L[0].hasZ,ua=!0===L[0].hasM)}else if(L instanceof l)va=L._elements,0<va.length&&(oa=L._hasZ,ua=L._hasM,Z=L.get(0).spatialReference);else if(fa(L)){xa=0;for(var wa=L.toArray();xa<wa.length;xa++)Aa=wa[xa],N(va,Aa);0<va.length&&(Z=L.get(0).spatialReference,oa=!0===L.get(0).hasZ,ua=
!0===L.get(0).hasM)}return 0===va.length?null:new m({paths:[va],spatialReference:Z,hasZ:oa,hasM:ua})}return L};t.autoCastArrayOfPointsToMultiPoint=function(L,Z){if(R(L)||fa(L)){var oa=!1,ua=!1,va=[];if(R(L)){for(var xa=0;xa<L.length;xa++){var Aa=L[xa];N(va,Aa)}0<va.length&&(Z=L[0].spatialReference,oa=!0===L[0].hasZ,ua=!0===L[0].hasM)}else if(L instanceof l)va=L._elements,0<va.length&&(oa=L._hasZ,ua=L._hasM,Z=L.get(0).spatialReference);else if(fa(L)){xa=0;for(var wa=L.toArray();xa<wa.length;xa++)Aa=
wa[xa],N(va,Aa);0<va.length&&(Z=L.get(0).spatialReference,oa=!0===L.get(0).hasZ,ua=!0===L.get(0).hasM)}return 0===va.length?null:new p({points:va,spatialReference:Z,hasZ:oa,hasM:ua})}return L};t.toStringArray=function(L,Z){void 0===Z&&(Z=!1);var oa=[];if(null===L)return oa;if(!0===R(L)){for(var ua=0;ua<L.length;ua++){var va=pa(L[ua]);""===va&&!0!==Z||oa.push(va)}return oa}if(L instanceof d){for(ua=0;ua<L.length();ua++)va=pa(L.get(ua)),""===va&&!0!==Z||oa.push(va);return oa}return E(L)?(va=pa(L),""===
va&&!0!==Z||oa.push(va),oa):[]};var qa=0;t.tick=function(L){qa++;return 0===qa%100?(qa=0,new Promise(function(Z){setTimeout(function(){Z(L)},0)})):L};t.binaryOperator=function(L,Z,oa){switch(oa){case "\x26":return L&Z;case "|":return L|Z;case "^":return L^Z;case "\x3c\x3c":return L<<Z;case "\x3e\x3e":return L>>Z;case "\x3e\x3e\x3e":return L>>>Z}};t.castAsJson=P;t.castAsJsonAsync=la;t.featureFullDomain=function(L,Z,oa){var ua=L.fullSchema();return null!==ua&&ua.fields?na(Z,ua,L,oa):null};t.featureSubtypes=
function(L){L=L.fullSchema();return null!==L&&L.fields?L.typeIdField?{subtypeField:L.typeIdField,subtypes:L.types?L.types.map(function(Z){return{name:Z.name,code:Z.id}}):[]}:null:null};t.featureDomainValueLookup=function(L,Z,oa,ua){var va=L.fullSchema();if(null===va||!va.fields)return null;ua=na(Z,va,L,ua);if(void 0===oa)try{oa=L.field(Z)}catch(xa){return null}return ea(ua,oa)};t.featureDomainCodeLookup=function(L,Z,oa,ua){var va=L.fullSchema();if(null===va||!va.fields)return null;if(void 0===oa){try{oa=
L.field(Z)}catch(xa){return null}return oa}L=na(Z,va,L,ua);return ka(L,oa)};t.defaultTimeZone=function(L){var Z,oa;return(null===(Z=null===L||void 0===L?void 0:L.timeReference)||void 0===Z?0:Z.timeZone)?null===(oa=null===L||void 0===L?void 0:L.timeReference)||void 0===oa?void 0:oa.timeZone:"system"};t.featureSchema=function(L){L=L.fullSchema();if(null===L||!L.fields)return null;for(var Z=[],oa=0,ua=L.fields;oa<ua.length;oa++)Z.push(A.esriFieldToJson(ua[oa]));return{objectIdField:L.objectIdField,globalIdField:L.globalIdField,
geometryType:void 0===A.layerGeometryEsriRestConstants[L.geometryType]?"":A.layerGeometryEsriRestConstants[L.geometryType],fields:Z}}})},"esri/arcade/FunctionWrapper":function(){define("require exports ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./polyfill/tsSupport/extends ./polyfill/promiseUtils".split(" "),function(g,t,a,b,c,k){function h(l,f,n){if(l instanceof d&&!(l instanceof e)){var u=new e;u.fn=l;u.parameterEvaluator=n;u.context=f;return u}return l}Object.defineProperty(t,
"__esModule",{value:!0});t.ScopeMarshalledFunction=t.NativeFunction=t.wrapModuleScopedResponse=t.ArcadeFunction=void 0;var d=function(){return function(){}}();t.ArcadeFunction=d;t.wrapModuleScopedResponse=h;g=function(l){function f(n){var u=l.call(this)||this;u.fn=n;return u}c(f,l);f.prototype.createFunction=function(n){var u=this;return function(){for(var p=[],r=0;r<arguments.length;r++)p[r]=arguments[r];return u.fn(n,{preparsed:!0,arguments:p})}};f.prototype.call=function(n,u){return this.fn(n,
u)};f.prototype.marshalledCall=function(n,u,p,r){var q=this;return r(n,u,function(m,v,x){x=x.map(function(z){return z instanceof d&&!(z instanceof e)?h(z,n,r):z});m=q.call(p,{args:x});return k.isPromiseLike(m)?m.then(function(z){return h(z,p,r)}):m})};return f}(d);t.NativeFunction=g;var e=function(l){function f(){var n=null!==l&&l.apply(this,arguments)||this;n.fn=null;n.context=null;return n}c(f,l);f.prototype.createFunction=function(n){return this.fn.createFunction(this.context)};f.prototype.call=
function(n,u){return this.fn.marshalledCall(n,u,this.context,this.parameterEvaluator)};f.prototype.marshalledCall=function(n,u,p){return this.fn.marshalledCall(n,u,this.context,this.parameterEvaluator)};return f}(d);t.ScopeMarshalledFunction=e})},"esri/arcade/polyfill/promiseUtils":function(){define(["require","exports","dojo/Deferred"],function(g,t,a){function b(k){void 0===k&&(k=void 0);var h=new a;h.resolve(k);return h.promise}function c(k){return k&&"function"===typeof k.then?k:b(k)}Object.defineProperty(t,
"__esModule",{value:!0});t.create=t.when=t.resolve=t.isPromiseLike=void 0;t.isPromiseLike=function(k){return k&&"function"===typeof k.then};t.resolve=b;t.when=c;t.create=function(k,h){var d=new a(h);k(function(e){return c(e).then(d.resolve)},d.reject);return d.promise}})},"esri/arcade/ImmutablePathArray":function(){define(["require","exports","./polyfill/tsSupport/extends","./ImmutableArray","./ImmutablePointArray"],function(g,t,a,b,c){return function(k){function h(d,e,l,f,n){d=k.call(this,d)||this;
d._lazyPath=[];d._hasZ=!1;d._hasM=!1;d._hasZ=l;d._hasM=f;d._spRef=e;d._cacheId=n;return d}a(h,k);h.prototype.get=function(d){if(void 0===this._lazyPath[d]){var e=this._elements[d];if(void 0===e)return;this._lazyPath[d]=new c(e,this._spRef,this._hasZ,this._hasM,this._cacheId,d)}return this._lazyPath[d]};h.prototype.equalityTest=function(d){return d===this?!0:null===d||!1===d instanceof h?!1:d.getUniqueHash()===this.getUniqueHash()};h.prototype.getUniqueHash=function(){return this._cacheId.toString()};
return h}(b)})},"esri/arcade/ImmutablePointArray":function(){define(["require","exports","./polyfill/tsSupport/extends","./ImmutableArray","../geometry/Point"],function(g,t,a,b,c){return function(k){function h(d,e,l,f,n,u){d=k.call(this,d)||this;d._lazyPt=[];d._hasZ=!1;d._hasM=!1;d._spRef=e;d._hasZ=l;d._hasM=f;d._cacheId=n;d._partId=u;return d}a(h,k);h.prototype.get=function(d){if(void 0===this._lazyPt[d]){var e=this._elements[d];if(void 0===e)return;var l=this._hasZ,f=this._hasM,n=null;n=l&&!f?new c(e[0],
e[1],e[2],void 0,this._spRef):f&&!l?new c(e[0],e[1],void 0,e[2],this._spRef):l&&f?new c(e[0],e[1],e[2],e[3],this._spRef):new c(e[0],e[1],this._spRef);n.setCacheValue("_arcadeCacheId",this._cacheId.toString()+"-"+this._partId.toString()+"-"+d.toString());this._lazyPt[d]=n}return this._lazyPt[d]};h.prototype.equalityTest=function(d){return d===this?!0:null===d||!1===d instanceof h?!1:d.getUniqueHash()===this.getUniqueHash()};h.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};
return h}(b)})},"esri/arcade/featureset/support/shared":function(){define("require exports ../../polyfill/tsSupport/assign ../../polyfill/tsSupport/spreadarray ../../ArcadeDate ../../../geometry/Extent ../../../layers/Field".split(" "),function(g,t,a,b,c,k,h){function d(f){var n=null;f.domain&&(n="range"===f.domain.type?{type:"range",range:[f.domain.minValue,f.domain.maxValue]}:{type:"codedValue",codedValues:f.domain.toJson().codedValues});return a(a({name:f.name,type:f.type,alias:f.alias},void 0!==
f.length?{length:f.length}:{}),{editable:!0===f.editable,nullable:!0===f.nullable,domain:n})}function e(f){return f instanceof Date}function l(f){return f instanceof c.ArcadeDate}Object.defineProperty(t,"__esModule",{value:!0});t.stableStringify=t.extractServiceUrl=t.toEsriGeometryType=t.layerFieldEsriConstants=t.layerGeometryEsriRestConstants=t.layerGeometryEsriConstants=t.callback=t.errback=t.defaultMaxRecords=t.sameGeomType=t.convertLinearUnitsToCode=t.shapeExtent=t.convertSquareUnitsToCode=t.cloneAttributes=
t.equalityTest=t.isArcadeDate=t.isDate=t.isArray=t.isNumber=t.isBoolean=t.isString=t.IdState=t.esriFieldToJson=t.cloneField=t.FeatureServiceDatabaseType=void 0;(function(f){f[f.Standardised=0]="Standardised";f[f.StandardisedNoInterval=1]="StandardisedNoInterval";f[f.SqlServer=2]="SqlServer";f[f.Oracle=3]="Oracle";f[f.Postgres=4]="Postgres";f[f.PGDB=5]="PGDB";f[f.FILEGDB=6]="FILEGDB";f[f.NotEvaluated=7]="NotEvaluated"})(t.FeatureServiceDatabaseType||(t.FeatureServiceDatabaseType={}));t.cloneField=
function(f){return new h(d(f))};t.esriFieldToJson=d;(function(f){f[f.InFeatureSet=0]="InFeatureSet";f[f.NotInFeatureSet=1]="NotInFeatureSet";f[f.Unknown=2]="Unknown"})(t.IdState||(t.IdState={}));t.isString=function(f){return"string"===typeof f||f instanceof String};t.isBoolean=function(f){return"boolean"===typeof f};t.isNumber=function(f){return"number"===typeof f};t.isArray=function(f){return f instanceof Array};t.isDate=e;t.isArcadeDate=l;t.equalityTest=function(f,n){return f===n?!0:(e(f)||l(f))&&
(e(n)||l(n))?f.getTime()===n.getTime():!1};t.cloneAttributes=function(f){var n={},u;for(u in f)n[u]=f[u];return n};t.convertSquareUnitsToCode=function(f){if(null==f)return null;if("number"===typeof f)return f;switch(f.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109439;case "kilometers":case "kilometer":case "km":return 109414}return null};t.shapeExtent=function(f){if(null==f)return null;switch(f.type){case "polygon":case "multipoint":case "polyline":return f.getExtent();
case "point":return new k({xmin:f.x,ymin:f.y,xmax:f.x,ymax:f.y,spatialReference:f.spatialReference});case "extent":return f}return null};t.convertLinearUnitsToCode=function(f){if(null==f)return null;if("number"===typeof f||"number"===typeof f)return f;switch(f.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9093;case "kilometers":case "kilometer":case "km":return 9036}return null};t.sameGeomType=function(f,n){return f===n||"point"===f&&"esriGeometryPoint"===n||
"polyline"===f&&"esriGeometryPolyline"===n||"polygon"===f&&"esriGeometryPolygon"===n||"extent"===f&&"esriGeometryEnvelope"===n||"multipoint"===f&&"esriGeometryMultipoint"===n||"point"===n&&"esriGeometryPoint"===f||"polyline"===n&&"esriGeometryPolyline"===f||"polygon"===n&&"esriGeometryPolygon"===f||"extent"===n&&"esriGeometryEnvelope"===f||"multipoint"===n&&"esriGeometryMultipoint"===f?!0:!1};t.defaultMaxRecords=1E3;t.errback=function(f){return function(n){f.reject(n)}};t.callback=function(f,n){return function(){try{f.apply(null,
arguments)}catch(u){n.reject(u)}}};t.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};t.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",
esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};t.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger","long":"esriFieldTypeLong",single:"esriFieldTypeSingle","double":"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",
geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",
esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};t.toEsriGeometryType=function(f){switch(f){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};
t.extractServiceUrl=function(f){if(void 0===f)return"";f=f.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");f=f.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return f=f.split("?")[0]};t.stableStringify=function(f,n){n||(n={});"function"===typeof n&&(n={cmp:n});var u="boolean"===typeof n.cycles?n.cycles:!1,p=n.cmp&&function(q){return function(m){return function(v,x){return q({key:v,value:m[v]},{key:x,value:m[x]})}}}(n.cmp),r=[];return function v(m){m&&m.toJson&&"function"===typeof m.toJson&&(m=
m.toJson());if(void 0!==m){if("number"===typeof m)return isFinite(m)?""+m:"null";if("object"!==typeof m)return JSON.stringify(m);var x;if(Array.isArray(m)){var z="[";for(x=0;x<m.length;x++)x&&(z+=","),z+=v(m[x])||"null";return z+"]"}if(null===m)return"null";if(r.includes(m)){if(u)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var A=r.push(m)-1,C=Object.keys(m).sort(p&&p(m));z="";for(x=0;x<C.length;x++){var D=C[x],B=v(m[D]);B&&(z&&(z+=","),z+=JSON.stringify(D)+
":"+B)}r.splice(A,1);return"{"+z+"}"}}(f)}})},"esri/layers/Field":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./RangeDomain ./CodedValueDomain".split(" "),function(g,t,a,b,c,k,h){g=g(null,{declaredClass:"esri.layers.Field",constructor:function(d){if(d&&t.isObject(d)&&(this.name=d.name,this.type=d.type,this.alias=d.alias,this.length=d.length,this.editable=d.editable,this.nullable=d.nullable,this.defaultValue=d.defaultValue,this.description=d.description?JSON.parse(d.description):
null,this.isViewOverride=!!d.isViewOverride,(d=d.domain)&&t.isObject(d)))switch(d.type){case "range":this.domain=new k(d);break;case "codedValue":this.domain=new h(d)}},toJson:function(){return c.fixJson({name:this.name,type:this.type,alias:this.alias,length:this.length,editable:this.editable,nullable:this.nullable,defaultValue:this.defaultValue,description:this.description?JSON.stringify(this.description):null,domain:this.domain?this.domain.toJson():null,isViewOverride:this.isViewOverride||void 0})},
toJSON:function(){return this.toJson()}});t.setObject("layers.Field",g,b);return g})},"esri/layers/RangeDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Domain".split(" "),function(g,t,a,b,c,k){g=g([k],{declaredClass:"esri.layers.RangeDomain",constructor:function(h){h&&t.isObject(h)&&(this.minValue=h.range[0],this.maxValue=h.range[1])},toJson:function(){var h=this.inherited(arguments);h.range=[this.minValue,this.maxValue];return c.fixJson(h)}});t.setObject("layers.RangeDomain",
g,b);return g})},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(g,t,a,b,c){g=g(null,{declaredClass:"esri.layers.Domain",constructor:function(k){k&&t.isObject(k)&&(this.name=k.name,this.type=k.type)},toJson:function(){return c.fixJson({name:this.name,type:this.type})}});t.setObject("layers.Domain",g,b);return g})},"esri/layers/CodedValueDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ./Domain".split(" "),
function(g,t,a,b,c,k,h){g=g([h],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(d){d&&t.isObject(d)&&(this.codedValues=d.codedValues)},getName:function(d){var e;a.some(this.codedValues,function(l){l.code==d&&(e=l.name);return!!e});return e},toJson:function(){var d=this.inherited(arguments);d.codedValues=t.clone(this.codedValues);return k.fixJson(d)}});t.setObject("layers.CodedValueDomain",g,c);return g})},"esri/arcade/ArcadeModule":function(){define(["require","exports"],function(g,
t){Object.defineProperty(t,"__esModule",{value:!0});t.ArcadeModule=void 0;g=function(){return function(a){this.source=a}}();t.ArcadeModule=g})},"esri/layers/vectorTiles/arcade/Feature":function(){define(["require","exports","esri/arcade/Feature"],function(g,t,a){a.prototype.repurposeFromGraphicLikeObject=function(b,c,k){void 0===k&&(k=null);null===c&&(c={});this.attributes=c;this.geometry=b;this._datesfixed=(this._layer=k)?!1:!0};return a})},"esri/arcade/Feature":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/jsonUtils ./polyfill/maybe ./ArcadeDate ./executionError".split(" "),
function(g,t,a,b,c,k,h,d,e,l,f,n,u,p,r){return function(){function q(){this.arcadeDeclaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=null;this._datesfixed=!0;this.contextTimeReference=this.dateTimeReferenceFieldIndex=null;this.immutable=!0;this._datefields=null;this.immutable=!0}q.createFromGraphic=function(m,v){var x=new q;x.contextTimeReference=null!==v&&void 0!==v?v:null;x._geometry=u.isSome(m.geometry)?m.geometry:null;x.attributes=void 0===m.attributes?{}:null===m.attributes?
{}:m.attributes;m._sourceLayer?(x._layer=m._sourceLayer,x._datesfixed=!1):m._layer?(x._layer=m._layer,x._datesfixed=!1):m.layer&&"fields"in m.layer?(x._layer=m.layer,x._datesfixed=!1):m.sourceLayer&&"fields"in m.sourceLayer&&(x._layer=m.sourceLayer,x._datesfixed=!1);return x};q.createFromArcadeFeature=function(m){var v=new q;v._datesfixed=m._datesfixed;v.attributes=m.attributes;v._geometry=m._geometry;m._layer&&(v._layer=m._layer);v.dateTimeReferenceFieldIndex=m.dateTimeReferenceFieldIndex;v.contextTimeReference=
m.contextTimeReference;return v};q.createFromArcadeDictionary=function(m){var v=new q;v.attributes=m.field("attributes");null!==v.attributes?v.attributes instanceof h?(v.attributes=v.attributes.attributes,null===v.attributes&&(v.attributes={})):v.attributes={}:v.attributes={};v._geometry=m.field("geometry");null!==v._geometry&&(v._geometry instanceof h?v._geometry=q.parseGeometryFromDictionary(v._geometry):v._geometry instanceof l||(v._geometry=null));return v};q.createFromGraphicLikeObject=function(m,
v,x,z){void 0===x&&(x=null);var A=new q;A.contextTimeReference=null!==z&&void 0!==z?z:null;null===v&&(v={});A.attributes=v;A._geometry=m?m:null;A._layer=x;A._layer&&(A._datesfixed=!1);return A};q.prototype.repurposeFromGraphicLikeObject=function(m,v,x){void 0===x&&(x=null);null===v&&(v={});this.attributes=v;this._geometry=m?m:null;this._datesfixed=(this._layer=x)?!1:!0};Object.defineProperty(q.prototype,"layerPreferredTimeZone",{get:function(){var m,v;return null!==(v=null===(m=this.dateTimeReferenceFieldIndex)||
void 0===m?void 0:m.layerPreferredTimeZone)&&void 0!==v?v:""},enumerable:!1,configurable:!0});q.prototype.fieldSourceTimeZone=function(m){var v,x;return null!==(x=null===(v=this.dateTimeReferenceFieldIndex)||void 0===v?void 0:v.fieldTimeZone(m))&&void 0!==x?x:""};q.prototype.castToText=function(m){void 0===m&&(m=!1);var v="";!1===this._datesfixed&&this._fixDates();for(var x in this.attributes){""!==v&&(v+=",");var z=this.attributes[x];null==z?v+=JSON.stringify(x)+":null":e.isBoolean(z)||e.isNumber(z)||
e.isString(z)?v+=JSON.stringify(x)+":"+JSON.stringify(z):z instanceof l?v+=JSON.stringify(x)+":"+e.toStringExplicit(z):z instanceof d?v+=JSON.stringify(x)+":"+e.toStringExplicit(z,null,m):z instanceof Array?v+=JSON.stringify(x)+":"+e.toStringExplicit(z,null,m):z instanceof p.ArcadeDate?v=m?v+(JSON.stringify(x)+":"+JSON.stringify(z.getTime())):v+(JSON.stringify(x)+":"+z.stringify()):null!==z&&"object"===typeof z&&void 0!==z.castToText&&(v+=JSON.stringify(x)+":"+z.castToText(m))}return'{"geometry":'+
(null===this.geometry()?"null":e.toStringExplicit(this.geometry()))+',"attributes":{'+v+"}}"};q.prototype._fixDates=function(){if(null!==this._datefields)0<this._datefields.length&&this._fixDateFields(this._datefields);else{for(var m=[],v=this._layer.fields,x=0;x<v.length;x++){var z=v[x],A=z.type;"date"!==A&&"esriFieldTypeDate"!==A||m.push(z.name)}this._datefields=m;0<m.length&&this._fixDateFields(m)}this._datesfixed=!0};q.prototype.isUnknownDateTimeField=function(m){var v;return"unknown"===(null===
(v=this.dateTimeReferenceFieldIndex)||void 0===v?void 0:v.fieldTimeZone(m))};q.prototype._fixDateFields=function(m){var v,x;this.attributes=c({},this.attributes);var z=null!==(x=null===(v=this.contextTimeReference)||void 0===v?void 0:v.timeZone)&&void 0!==x?x:"system";for(v=0;v<m.length;v++)if(x=this.attributes[m[v]],null!==x)if(void 0===x)for(var A in this.attributes){if(A.toLowerCase()===m[v].toLowerCase()){x=this.attributes[A];if(null!==x){var C=this.isUnknownDateTimeField(A);e.isDate(x)?this.attributes[A]=
x:this.attributes[A]=x instanceof Date?C?p.ArcadeDate.unknownDateJSToArcadeDate(x):p.ArcadeDate.dateJSAndZoneToArcadeDate(x,z):C?p.ArcadeDate.unknownEpochToArcadeDate(x):p.ArcadeDate.epochToArcadeDate(x,z)}break}}else C=this.isUnknownDateTimeField(m[v]),e.isDate(x)?this.attributes[m[v]]=x:this.attributes[m[v]]=x instanceof Date?C?p.ArcadeDate.unknownDateJSToArcadeDate(x):p.ArcadeDate.dateJSAndZoneToArcadeDate(x,z):C?p.ArcadeDate.unknownEpochToArcadeDate(x):p.ArcadeDate.epochToArcadeDate(x,z)};q.prototype.geometry=
function(){if(null===this._geometry)return this._geometry;this._geometry instanceof l||(this._geometry=n.fromJson(this._geometry));return this._geometry};q.prototype.field=function(m){!1===this._datesfixed&&this._fixDates();var v=this.attributes[m];if(void 0!==v)return v;v=m.toLowerCase();for(var x in this.attributes)if(x.toLowerCase()===v)return this.attributes[x];if(this._hasFieldDefinition(v))return null;throw new r.ArcadeExecutionError(null,r.ExecutionErrorCodes.FieldNotFound,null,{key:m});};
q.prototype._hasFieldDefinition=function(m){if(null===this._layer)return!1;for(var v=0;v<this._layer.fields.length;v++)if(this._layer.fields[v].name.toLowerCase()===m)return!0;return!1};q.prototype.setField=function(m,v){if(this.immutable)throw new r.ArcadeExecutionError(null,r.ExecutionErrorCodes.Immutable,null);v instanceof Date&&(v=this.isUnknownDateTimeField(m)?p.ArcadeDate.unknownDateJSToArcadeDate(v):p.ArcadeDate.dateJSToArcadeDate(v));if(!1===e.isSimpleType(v))throw new r.ArcadeExecutionError(null,
r.ExecutionErrorCodes.TypeNotAllowedInFeature,null);var x=m.toLowerCase();if(void 0===this.attributes[m])for(var z in this.attributes)if(z.toLowerCase()===x){this.attributes[z]=v;return}this.attributes[m]=v};q.prototype.hasField=function(m){var v=m.toLowerCase();if(void 0!==this.attributes[m])return!0;for(var x in this.attributes)if(x.toLowerCase()===v)return!0;return this._hasFieldDefinition(v)?!0:!1};q.prototype.keys=function(){var m=[],v={},x;for(x in this.attributes)m.push(x),v[x.toLowerCase()]=
1;if(null!==this._layer)for(x=0;x<this._layer.fields.length;x++){var z=this._layer.fields[x];1!==v[z.name.toLowerCase()]&&m.push(z.name)}return m=m.sort()};q.parseGeometryFromDictionary=function(m){m=q._convertDictionaryToJson(m,!0);void 0!==m.hasm&&(m.hasM=m.hasm,delete m.hasm);void 0!==m.hasz&&(m.hasZ=m.hasz,delete m.hasz);void 0!==m.spatialreference&&(m.spatialReference=m.spatialreference,delete m.spatialreference);void 0!==m.rings&&(m.rings=this._fixPathArrays(m.rings,!0===m.hasZ,!0===m.hasZ));
void 0!==m.paths&&(m.paths=this._fixPathArrays(m.paths,!0===m.hasZ,!0===m.hasM));void 0!==m.points&&(m.points=this._fixPointArrays(m.points,!0===m.hasZ,!0===m.hasM));return n.fromJson(m)};q._fixPathArrays=function(m,v,x){var z=[];if(m instanceof Array)for(var A=0;A<m.length;A++)z.push(this._fixPointArrays(m[A],v,x));else if(m instanceof d)for(A=0;A<m.length();A++)z.push(this._fixPointArrays(m.get(A),v,x));return z};q._fixPointArrays=function(m,v,x){var z=[];if(m instanceof Array)for(var A=0;A<m.length;A++){var C=
m[A];C instanceof f?v&&x?z.push([C.x,C.y,C.z,C.m]):v?z.push([C.x,C.y,C.z]):x?z.push([C.x,C.y,C.m]):z.push([C.x,C.y]):C instanceof d?z.push(C.toArray()):z.push(C)}else if(m instanceof d)for(A=0;A<m.length();A++)C=m.get(A),C instanceof f?v&&x?z.push([C.x,C.y,C.z,C.m]):v?z.push([C.x,C.y,C.z]):x?z.push([C.x,C.y,C.m]):z.push([C.x,C.y]):C instanceof d?z.push(C.toArray()):z.push(C);return z};q._convertDictionaryToJson=function(m,v){void 0===v&&(v=!1);var x={},z;for(z in m.attributes){var A=m.attributes[z];
A instanceof h&&(A=q._convertDictionaryToJson(A));v?x[z.toLowerCase()]=A:x[z]=A}return x};q.parseAttributesFromDictionary=function(m){var v={},x;for(x in m.attributes){var z=m.attributes[x];if(e.isSimpleType(z))v[x]=z;else throw new r.ArcadeExecutionError(null,r.ExecutionErrorCodes.InvalidParameter,null);}return v};q.fromJson=function(m,v){var x=null;null!==m.geometry&&void 0!==m.geometry&&(x=n.fromJson(m.geometry));var z={};if(null!==m.attributes&&void 0!==m.attributes)for(var A in m.attributes){var C=
m.attributes[A];if(null===C)z[A]=C;else if(e.isString(C)||e.isNumber(C)||e.isBoolean(C)||e.isDate(C))z[A]=C;else throw new r.ArcadeExecutionError(null,r.ExecutionErrorCodes.InvalidParameter,null);}return q.createFromGraphicLikeObject(x,z,null,null!==v&&void 0!==v?v:null)};q.prototype.fullSchema=function(){return this._layer};q.prototype.gdbVersion=function(){if(null===this._layer)return"";var m=this._layer.gdbVersion;return void 0===m?"":""===m&&this._layer.capabilities&&this._layer.capabilities.isVersioned?
"SDE.DEFAULT":m};q.prototype.castAsJson=function(m){var v,x,z={attributes:{},geometry:!0===(null===m||void 0===m?void 0:m.keepGeometryType)?this.geometry():null!==(x=null===(v=this.geometry())||void 0===v?void 0:v.toJson())&&void 0!==x?x:null},A;for(A in this.attributes)v=this.attributes[A],void 0!==v&&(z.attributes[A]=e.castAsJson(v,m));return z};q.prototype.castAsJsonAsync=function(m,v){void 0===m&&(m=null);return a(this,void 0,void 0,function(){return b(this,function(x){return[2,this.castAsJson(v)]})})};
return q}()})},"esri/geometry/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ../lang ./Point ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(g,t,a,b,c,k,h,d,e){function l(p,r,q){var m=p.rings||p.paths,v,x;var z=0;for(v=m.length;z<v;z++){var A=m[z];var C=0;for(x=A.length;C<x;C++){var D=A[C];if(0<C)B+=D[0],y+=D[1];else{var B=D[0];var y=D[1]}D[0]=r(B);D[1]=q(y)}}return p}var f={esriGeometryPoint:function(p,r,q){p.x=r(p.x);p.y=q(p.y);return p},esriGeometryPolyline:l,
esriGeometryPolygon:l,esriGeometryEnvelope:function(p,r,q){p.xmin=r(p.xmin);p.ymin=q(p.ymin);p.xmax=r(p.xmax);p.ymax=q(p.ymax);return p},esriGeometryMultipoint:function(p,r,q){var m=p.points,v;var x=0;for(v=m.length;x<v;x++){var z=m[x];if(0<x)A+=z[0],C+=z[1];else{var A=z[0];var C=z[1]}z[0]=r(A);z[1]=q(C)}return p}},n={esriGeometryPoint:function(p,r,q){p.x=r(p.x);p.y=q(p.y);return p}},u={createInstance:function(p,r){p=new p;r&&b.mixin(p,r);return p},fromJson:function(p){if(void 0!==p.x&&void 0!==p.y)return new c(p);
if(void 0!==p.paths)return new k(p);if(void 0!==p.rings)return new h(p);if(void 0!==p.points)return new d(p);if(void 0!==p.xmin&&void 0!==p.ymin&&void 0!==p.xmax&&void 0!==p.ymax)return new e(p)},getJsonType:function(p){return p instanceof c?"esriGeometryPoint":p instanceof k?"esriGeometryPolyline":p instanceof h?"esriGeometryPolygon":p instanceof e?"esriGeometryEnvelope":p instanceof d?"esriGeometryMultipoint":null},getGeometryType:function(p){return"esriGeometryPoint"===p?c:"esriGeometryPolyline"===
p?k:"esriGeometryPolygon"===p?h:"esriGeometryEnvelope"===p?e:"esriGeometryMultipoint"===p?d:null},supportsLazyUnquantization:function(p){return"esriGeometryPoint"===p||"esriGeometryPolyline"===p||"esriGeometryPolygon"===p||"esriGeometryMultipoint"===p},unquantizeFunction:function(p,r){if(p&&r){var q=r.translate[0],m=r.translate[1],v=r.scale[0],x=r.scale[1],z=function(D){return D*v+q},A=function(D){return m-D*x},C=f[p];return function(D){return D?C(D,z,A):null}}},unquantize:function(p,r,q){if(r=u.unquantizeFunction(r,
q)){var m=p.length;for(q=0;q<m;q++)r(p[q].geometry)}},quantizeFunction:function(p,r){if(p&&"esriGeometryPoint"===p&&r){var q=r.translate[0],m=r.translate[1],v=r.scale[0],x=r.scale[1],z=function(D){return Math.round((D-q)/v)},A=function(D){return Math.round((m-D)/x)},C=n[p];return function(D){return D?C(D,z,A):null}}},quantize:function(p,r,q){if(r=u.quantizeFunction(r,q)){var m=p.length;for(q=0;q<m;q++)r(p[q].geometry)}}};g.mixin(g.getObject("geometry",!0,a),u);return u})},"esri/arcade/polyfill/maybe":function(){define(["require",
"exports"],function(g,t){function a(b,c){if(null==b)throw Error(null!==c&&void 0!==c?c:"value is None");}Object.defineProperty(t,"__esModule",{value:!0});t.unwrapOrThrow=t.assertIsSome=t.isNone=t.isSome=t.none=void 0;t.none=null;t.isSome=function(b){return null!=b};t.isNone=function(b){return null==b};t.assertIsSome=a;t.unwrapOrThrow=function(b,c){a(b,c);return b}})},"esri/layers/vectorTiles/core/screenUtils":function(){define(["require","exports"],function(g,t){function a(c){return c?72*c/t.DPI:
0}Object.defineProperty(t,"__esModule",{value:!0});var b=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;t.DPI=96;t.pt2px=function(c){return c?c/72*t.DPI:0};t.px2pt=a;t.toPt=function(c){if("string"===typeof c){if(b.test(c)){var k=c.match(b),h=Number(k[1]);k=k[3]&&k[3].toLowerCase();c="-"===c.charAt(0);h="px"===k?a(h):h;return c?-h:h}return null}return c}})},"esri/layers/vectorTiles/support/arcadeUtils":function(){define(["require","exports","esri/renderers/arcadeUtils","esri/arcade/Dictionary"],function(g,t,
a,b){Object.defineProperty(t,"__esModule",{value:!0});t.createSyntaxTree=function(c){return a.createSyntaxTree(c)};t.createFunction=function(c,k){return a.createFunction(c,k)};t.createExecContext=function(c,k){return a.createExecContext(c,k)};t.executeFunction=function(c,k){return a.executeFunction(c,k)};t.extractFieldNames=function(c){return a.extractFieldNames(c)};t.getViewInfo=function(c){if(c&&c.viewingMode&&null!=c.scale&&c.spatialReference)return{view:new b({viewingMode:c.viewingMode,scale:c.scale}),
sr:c.spatialReference}}})},"esri/renderers/arcadeUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../support/expressionUtils"],function(g,t,a,b){g.setObject("renderer.arcadeUtils",b,a);return b})},"esri/support/expressionUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../kernel ../arcade/arcade ../arcade/Feature ../arcade/languageUtils".split(" "),function(g,t,a,b,c,k,h,d){function e(r){var q=new b;r.then(function(m){if(!q.isFulfilled())return d.isDate(m)&&
(m=m.toJSDate()),q.resolve(m)},function(m){if(!q.isFulfilled())return q.reject(m)});return q.promise}function l(r){var q=new b;r.then(function(m){if(!q.isFulfilled())return q.resolve(m)},function(m){if(!q.isFulfilled())return q.reject(m)});return q.promise}function f(r){return r.replace(/[|\\{}()[\]^$+*?.]/g,"\\$\x26")}var n={vars:{$feature:"any",$view:"any"}},u=/^\$(feature|aggregatedFeatures)\./i,p={_getSyntaxTree:function(r){return"string"===typeof r?p.createSyntaxTree(r):r},createSyntaxTree:function(r){try{var q=
r?k.parseScript(r):null}catch(m){q=null}return q},createFunction:function(r,q){q=q||g.clone(n);r=p._getSyntaxTree(r);try{var m=r?k.compileScript(r,q):null}catch(v){m=null}return m},createExecContext:function(r,q){return{vars:{$feature:r?h.createFromGraphic(r):new h,$view:q&&q.view},spatialReference:q&&q.sr}},evalSyntaxTree:function(r,q){try{var m=k.executeScript(r,q)}catch(v){m=null}return m},executeFunction:function(r,q){try{var m=r?r(q):null}catch(v){m=null}return d.isDate(m)?m.toJSDate():m},executeAsyncFunction:function(r,
q){try{var m=r?e(r(q)):(new b).reject(Error("expressionUtils.executeAsyncFunction: Invalid argument. compiledFunc is missing."))}catch(v){m=(new b).reject(v)}return m},extractFieldNames:function(r,q){r=p._getSyntaxTree(r);r=k.extractExpectedFieldLiterals(r);var m=[];t.forEach(r,function(x){u.test(x)&&(x=x.replace(u,""),m.push(x))});var v=t.filter(m,function(x){return-1!==x.indexOf("*")});m=t.filter(m,function(x){return-1===v.indexOf(x)});q&&t.forEach(v,function(x){var z=new RegExp("^"+x.split(/\*+/).map(f).join(".*")+
"$","i");t.forEach(q,function(A){z.test(A)&&m.push(A)})});m.sort();return t.filter(m,function(x,z){return 0===z||m[z-1]!==x})},dependsOnView:function(r){return p.hasVariable(r,"$view")},hasGeometryFunctions:function(r){return(r=p._getSyntaxTree(r))?k.scriptTouchesGeometry(r):!1},hasGeometryOperations:function(r){return(r=p._getSyntaxTree(r))?k.scriptUsesGeometryEngine(r):!1},enableGeometryOperations:function(){return l(k.enableGeometrySupport())},hasVariable:function(r,q){return(r=p._getSyntaxTree(r))?
k.referencesMember(r,q):!1},hasFunction:function(r,q){return(r=p._getSyntaxTree(r))?k.referencesFunction(r,q):!1},createFeatureSetFromLayer:function(r,q){q=q||{};var m=k.featureSetUtils();return m?m.constructFeatureSet(r,q.spatialReference,q.outFields,q.returnGeometry,q.cache):null},createFeatureSetFromLayerUrl:function(r,q){q=q||{};var m=k.featureSetUtils();return m?m.constructFeatureSetFromUrlRaw(r,q.spatialReference,q.outFields,q.returnGeometry,q.cache):null},createFeatureSetCollectionFromMap:function(r,
q){var m=k.featureSetUtils();return m?m.createFeatureSetCollectionFromMap(r,r.spatialReference,q&&q.cache):null},createFeatureSetCollectionFromServiceUrl:function(r,q){q=q||{};var m=k.featureSetUtils();return m?m.createFeatureSetCollectionFromService(r,q.spatialReference,q.cache):null},hasFeatureSetOperations:function(r){return(r=p._getSyntaxTree(r))?k.scriptUsesFeatureSet(r):!1},enableFeatureSetOperations:function(){return l(k.enableFeatureSetSupport().then(function(){var r=k.featureSetUtils();r&&
r.initialiseMetaDataCache()}))},enableAsyncOperations:function(){return l(k.enableAsyncSupport())}};g.setObject("support.expressionUtils",p,c);return p})},"esri/arcade/arcade":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./arcadeCompiler ./ArcadeModuleResolver ./arcadeRuntime ./executionError ./parser ./treeAnalysis dojo/has ./polyfill/maybe".split(" "),function(g,t,a,b,c,k,h,d,e,l,f,n){function u(Q,U){if(null===V)throw new d.ArcadeExecutionError(null,
d.ExecutionErrorCodes.AsyncNotEnabled,null);if(f("esri-csp-restrictions")||!1===H)return function(ia){return V.executeScript(Q,ia)};try{return c.compileScript(Q,U,!0)}catch(ia){if("esri.arcade.arcadeuncompilableerror"===ia.declaredRootClass)return function(T){return V.executeScript(Q,T)};throw ia;}}function p(Q,U){void 0===U&&(U=[]);return e.parseScript(Q,U)}function r(Q,U){if(!0===U.useAsync||!0===Q.isAsync){if(null===V)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.AsyncNotEnabled,
null);return V.executeScript(Q,U)}return h.executeScript(Q,U)}function q(Q,U){return l.referencesMember(Q,U)}function m(Q,U){void 0===U&&(U=[]);void 0===Q.usesGeometry&&l.findScriptDependencies(Q,U);return!0===Q.usesGeometry}function v(){return ha?ha:ha=x()}function x(){return a(this,void 0,void 0,function(){return b(this,function(Q){return[2,new Promise(function(U,ia){g(["../geometry/geometryEngine","./functions/geomsync"],function(T,Y){R=!0;Y.setGeometryEngine(T);U(!0)},function(T){ia(T)})})]})})}
function z(){return null!==fa?fa:fa=A()}function A(){return a(this,void 0,void 0,function(){var Q,U,ia;return b(this,function(T){switch(T.label){case 0:return[4,c.enableAsyncSupport()];case 1:return T.sent(),[4,new Promise(function(Y,ja){g(["./arcadeAsyncRuntime"],function(pa){Y(pa)},ja)})];case 2:V=T.sent();Q=0;for(U=da;Q<U.length;Q++)ia=U[Q],V.extend(ia),c.extend(ia,"async");da=null;return[2,!0]}})})}function C(){return V?!0:!1}function D(){return X?X:X=B()}function B(){return a(this,void 0,void 0,
function(){var Q;return b(this,function(U){switch(U.label){case 0:return[4,z()];case 1:return U.sent(),[4,new Promise(function(ia,T){g(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],function(Y,ja,pa,ta,W){ia({featuresetutils:Y,libraries:[ja,pa,ta,W]})},T)})];case 2:return Q=U.sent(),ca=Q.featuresetutils,V.extend(Q.libraries),c.extend(Q.libraries,"async"),M=!0,[2,!0]}})})}function y(Q,U){void 0===U&&(U=[]);
void 0===Q.usesFeatureSet&&l.findScriptDependencies(Q,U);return!0===Q.usesFeatureSet}function w(Q,U,ia,T,Y,ja){void 0===T&&(T=[]);void 0===Y&&(Y=!1);void 0===ja&&(ja=null);return a(this,void 0,void 0,function(){var pa,ta;return b(this,function(W){switch(W.label){case 0:pa="string"===typeof U?p(U):U;ta=[];if(pa&&(!1===R&&(m(pa)||Y)&&ta.push(v()),!1===C()&&(!0===pa.isAsync||ia)&&ta.push(z()),!1===M)){if(!(W=y(pa)))a:{W=pa;if(T)for(var S=0,ea=T;S<ea.length;S++)if(q(W,ea[S])){W=!0;break a}W=!1}W&&ta.push(D())}return ta.length?
[4,Promise.all(ta)]:[3,2];case 1:W.sent(),W.label=2;case 2:return[4,E(Q,pa,ja,ia,Y)];case 3:return W.sent(),[2,!0]}})})}function E(Q,U,ia,T,Y){void 0===ia&&(ia=null);void 0===T&&(T=!1);void 0===Y&&(Y=!1);return a(this,void 0,void 0,function(){var ja,pa,ta,W,S,ea;return b(this,function(ka){switch(ka.label){case 0:ja=l.findModuleImports(U),null===ia&&0<ja.length&&(ia=k.ArcadeModuleResolver.getDefault()),U.loadedModules={},pa=0,ta=ja,ka.label=1;case 1:if(!(pa<ta.length))return[3,5];W=ta[pa];n.assertIsSome(ia);
S=ia.normalizeModuleUri(W.source);if(Q.has(S.uri))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.CircularModules,null);Q.add(S.uri);return[4,ia.fetchModule(S)];case 2:return ea=ka.sent(),[4,w(Q,ea,T,[],Y,ia)];case 3:ka.sent(),Q.delete(S.uri),ea.isAsync&&(U.isAsync=!0),ea.usesFeatureSet&&(U.usesFeatureSet=!0),ea.usesGeometry&&(U.usesGeometry=!0),U.loadedModules[W.libname]={uri:S.uri,script:ea},ka.label=4;case 4:return pa++,[3,1];case 5:return[2]}})})}Object.defineProperty(t,"__esModule",
{value:!0});t.featureSetUtils=t.scriptTouchesGeometry=t.loadDependentModules=t.scriptUsesModules=t._loadScriptDependenciesImpl=t.loadScriptDependencies=t.scriptIsAsync=t.scriptUsesFeatureSet=t.enableFeatureSetSupportImpl=t.enableFeatureSetSupport=t.isGeometryEnabled=t.isAsyncEnabled=t.isFeatureSetSupportEnabled=t.enableAsyncSupportImpl=t.enableAsyncSupport=t.enableGeometrySupportImpl=t.enableGeometrySupport=t.scriptUsesGeometryEngine=t.extractExpectedFieldLiterals=t.extractFieldLiterals=t.referencesFunction=
t.referencesMember=t.executeScript=t.parseAndExecuteScript=t.parseScript=t.extend=t.compileScript=void 0;var F="feature angle bearing centroid envelopeintersects extent geometry isselfintersecting ringisclockwise".split(" "),H=function(){if(f("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(Q){return!1}}(),M=!1,R=!1,V=null,da=[];t.compileScript=function(Q,U){if(!0===U.useAsync||!0===Q.isAsync)return u(Q,U);if(f("esri-csp-restrictions"))return function(ia){return h.executeScript(Q,
ia)};try{return c.compileScript(Q,U)}catch(ia){if("esri.arcade.arcadeuncompilableerror"===ia.declaredRootClass)return function(T){return h.executeScript(Q,T)};throw ia;}};t.extend=function(Q){h.extend(Q);c.extend(Q,"sync");null===V?da.push(Q):(c.extend(Q,"async"),V.extend(Q))};t.parseScript=p;t.parseAndExecuteScript=function(Q,U,ia){void 0===ia&&(ia=[]);Q=e.parseScript(Q,ia);return r(Q,U)};t.executeScript=r;t.referencesMember=q;t.referencesFunction=function(Q,U){return l.referencesFunction(Q,U)};
t.extractFieldLiterals=function(Q,U){void 0===U&&(U=!1);void 0===U&&(U=!1);return l.findFieldLiterals(Q)};t.extractExpectedFieldLiterals=function(Q){return l.findExpectedFieldLiterals(Q)};t.scriptUsesGeometryEngine=m;var ha=null;t.enableGeometrySupport=v;t.enableGeometrySupportImpl=x;var fa=null;t.enableAsyncSupport=z;t.enableAsyncSupportImpl=A;t.isFeatureSetSupportEnabled=function(){return M};t.isAsyncEnabled=C;t.isGeometryEnabled=function(){return R};var X=null;t.enableFeatureSetSupport=D;t.enableFeatureSetSupportImpl=
B;t.scriptUsesFeatureSet=y;t.scriptIsAsync=function(Q,U){void 0===U&&(U=[]);void 0===Q.isAsync&&l.findScriptDependencies(Q,U);return!0===Q.isAsync};t.loadScriptDependencies=function(Q,U,ia,T,Y){void 0===ia&&(ia=[]);void 0===T&&(T=!1);void 0===Y&&(Y=null);return a(this,void 0,void 0,function(){return b(this,function(ja){return[2,w(new Set,Q,U,ia,T,Y)]})})};t._loadScriptDependenciesImpl=w;t.scriptUsesModules=function(Q,U){void 0===U&&(U=[]);void 0===Q.usesModules&&l.findScriptDependencies(Q,U);return!0===
Q.usesModules};t.loadDependentModules=E;t.scriptTouchesGeometry=function(Q){if(m(Q))return!0;Q=l.findFunctionCalls(Q);for(var U=!1,ia=0;ia<Q.length;ia++)if(F.includes(Q[ia])){U=!0;break}return U};var ca=null;t.featureSetUtils=function(){return ca}})},"esri/arcade/arcadeCompiler":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./polyfill/tsSupport/extends ./Dictionary ./Feature ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ./polyfill/promiseUtils ../geometry/Geometry ../SpatialReference ./ArcadeModuleLoader ./ArcadeModule ./FunctionWrapper ./executionError".split(" "),
function(g,t,a,b,c,k,h,d,e,l,f,n,u,p,r,q,m,v,x,z,A,C,D,B,y){function w(N,P,ba){try{return ba(N,null,P.arguments)}catch(la){throw la;}}function E(N,P){try{switch(P.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return ha(N,P);case "VariableDeclaration":for(var ba=[],la=0;la<P.declarations.length;la++)ba.push(E(N,P.declarations[la]));return ba.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":case "Program":return V(N,P);case "FunctionDeclaration":var qa=
P.id.name.toLowerCase();da(qa);var L="",Z=!1;void 0!==N.globalScope[qa]?L=qa:void 0!==N.globalScope._SymbolsMap[qa]?L=N.globalScope._SymbolsMap[qa]:N.undeclaredGlobalsInFunctions.has(qa)?(L=N.undeclaredGlobalsInFunctions.get(qa).manglename,N.globalScope._SymbolsMap[qa]=L,N.mangleMap[qa]=L,N.undeclaredGlobalsInFunctions.delete(qa),Z=!0):(L=ca(N),N.globalScope._SymbolsMap[qa]=L,N.mangleMap[qa]=L);ba={isAsync:N.isAsync,console:N.console,exports:N.exports,undeclaredGlobalsInFunctions:N.undeclaredGlobalsInFunctions,
customfunctions:N.customfunctions,moduleFactory:N.moduleFactory,moduleFactoryMap:N.moduleFactoryMap,libraryResolver:N.libraryResolver,lrucache:N.lrucache,interceptor:N.interceptor,services:N.services,symbols:N.symbols,mangleMap:N.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:N.depthCounter,globalScope:N.globalScope};var oa="new lang.UserDefinedCompiledFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(qa=0;qa<P.params.length;qa++){la=P.params[qa].name.toLowerCase();da(la);var ua=ca(N);ba.localScope._SymbolsMap[la]=ua;ba.mangleMap[la]=ua;oa+="lscope['"+ua+"']\x3darguments["+qa.toString()+"];\n"}!0===N.isAsync?(oa=oa+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(V(ba,P.body)+"\n return lastStatement; "),oa=oa+"});  }, runtimeCtx),"+(P.params.length+")")):oa+=V(ba,P.body)+"\n return lastStatement; }, runtimeCtx),"+P.params.length+")";oa+="\n lastStatement \x3d lc.voidOperation; \n";
return Z?"gscope[lang.setAssig('"+L+"', runtimeCtx)]\x3d"+oa:"gscope['"+L+"']\x3d"+oa;case "ImportDeclaration":var va,xa,Aa=P.specifiers[0].local.name.toLowerCase();da(Aa);var wa=null===(va=N.libraryResolver)||void 0===va?void 0:va.loadLibrary(Aa),Ea=ca(N);void 0===N.moduleFactory[wa.uri]&&(N.moduleFactory[wa.uri]=pa(wa.syntax,{interceptor:N.interceptor,services:N.services,moduleFactory:N.moduleFactory,lrucache:N.lrucache,timeReference:null!==(xa=N.timeReference)&&void 0!==xa?xa:null,libraryResolver:N.libraryResolver,
customfunctions:N.customfunctions,vars:{}},N.isAsync));N.moduleFactoryMap[Ea]=wa.uri;P="";P=N.isAsync?"(yield lang.loadModule('"+Ea+"', runtimeCtx) ); ":"lang.loadModule('"+Ea+"', runtimeCtx); ";if(void 0!==N.globalScope[Aa])var Ja="gscope['"+Aa+"']\x3d"+P;else void 0!==N.globalScope._SymbolsMap[Aa]?Ja="gscope['"+N.globalScope._SymbolsMap[Aa]+"']\x3d"+P:(ba="",N.undeclaredGlobalsInFunctions.has(Aa)?(ba=N.undeclaredGlobalsInFunctions.get(Aa).manglename,N.undeclaredGlobalsInFunctions.delete(Aa)):ba=
ca(N),N.globalScope._SymbolsMap[Aa]=ba,N.mangleMap[Aa]=ba,Ja="gscope[lang.setAssig('"+ba+"', runtimeCtx)]\x3d"+P);return Ja;case "ExportNamedDeclaration":var Ma=E(N,P.declaration);if("FunctionDeclaration"===P.declaration.type)N.exports[P.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===P.declaration.type){ba=0;for(var Da=P.declaration.declarations;ba<Da.length;ba++)N.exports[Da[ba].id.name.toLowerCase()]="variable"}return Ma;case "ReturnStatement":var Ya=null===P.argument?
"return lc.voidOperation":"return "+E(N,P.argument);return Ya;case "IfStatement":return R(N,P);case "ExpressionStatement":var Na="AssignmentExpression"===P.expression.type?"lastStatement \x3d lc.voidOperation; "+E(N,P.expression)+"; \n ":"lastStatement \x3d "+E(N,P.expression)+"; ";return Na;case "AssignmentExpression":return H(N,P);case "UpdateExpression":return F(N,P);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "TemplateLiteral":try{ba=[];ua=la=0;for(Z=P.quasis;ua<
Z.length;ua++)oa=Z[ua],ba.push(oa.value?JSON.stringify(oa.value.cooked):JSON.stringify("")),!1===oa.tail&&(ba.push(P.expressions[la]?"lang.castString(lang.aCheck("+E(N,P.expressions[la])+", 'TemplateLiteral'))":""),la++);L="(["+ba.join(",")+"]).join('')"}catch(Va){throw Va;}return L;case "TemplateElement":return JSON.stringify(P.value?P.value.cooked:"");case "ForStatement":ba="lastStatement \x3d lc.voidOperation; \n";null!==P.init&&(ba+=E(N,P.init)+"; ");var Ua=Q(N),$a=Q(N);ba+="var "+Ua+" \x3d true; \n do { ";
null!==P.update&&(ba+=" if ("+Ua+"\x3d\x3d\x3dfalse) {\n "+E(N,P.update)+"  \n}\n "+Ua+"\x3dfalse; \n");null!==P.test&&(ba+="var "+$a+" \x3d "+E(N,P.test)+"; ",ba+="if ("+$a+"\x3d\x3d\x3dfalse) { break; } else if ("+$a+"!\x3d\x3dtrue) { lang.error('"+y.ExecutionErrorCodes.BooleanConditionRequired+"');   }\n");ba+=E(N,P.body);null!==P.update&&(ba+="\n "+E(N,P.update));return ba+("\n"+Ua+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":var Pa=Q(N),La=Q(N),
Oa=Q(N),za="var "+Pa+" \x3d "+E(N,P.right)+";\n";"VariableDeclaration"===P.left.type&&(za+=E(N,P.left));var Ia="VariableDeclaration"===P.left.type?P.left.declarations[0].id.name:P.left.name;Ia=Ia.toLowerCase();da(Ia);ba="";null!==N.localScope&&(void 0!==N.localScope[Ia]?ba="lscope['"+Ia+"']":void 0!==N.localScope._SymbolsMap[Ia]&&(ba="lscope['"+N.localScope._SymbolsMap[Ia]+"']"));la="";if(""===ba)if(void 0!==N.globalScope[Ia])ba="gscope['"+Ia+"']";else if(void 0!==N.globalScope._SymbolsMap[Ia])ba=
"gscope['"+N.globalScope._SymbolsMap[Ia]+"']";else if(null!==N.localScope)if(N.undeclaredGlobalsInFunctions.has(Ia))ba="gscope['"+N.undeclaredGlobalsInFunctions.get(Ia).manglename+"']",la=N.undeclaredGlobalsInFunctions.get(Ia).manglename;else{var Ka={manglename:ca(N),node:P.left};N.undeclaredGlobalsInFunctions.set(Ia,Ka);ba="gscope['"+Ka.manglename+"']";la=Ka.manglename}la&&(za+="lang.chkAssig('"+la+"',runtimeCtx); \n");za=za+("if ("+Pa+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(")+
(Pa+") || lc.isString("+Pa+")) {var ")+(La+"\x3d"+Pa+".length; \nfor(var ")+(Oa+"\x3d0; "+Oa+"\x3c"+La+"; "+Oa+"++) {\n");za+=ba+"\x3d"+Oa+";\n";za+=E(N,P.body);za+="\n}\n";za+=" lastStatement \x3d lc.voidOperation; \n";za+=" \n}\n";za+="else if (lc.isImmutableArray("+Pa+")) {";za=za+("var "+La+"\x3d"+Pa+".length(); \nfor(var ")+(Oa+"\x3d0; "+Oa+"\x3c"+La+"; "+Oa+"++) {\n");za+=ba+"\x3d"+Oa+";\n";za+=E(N,P.body);za+="\n}\n";za+=" lastStatement \x3d lc.voidOperation; \n";za+=" \n}\n";za+="else if (( "+
Pa+" instanceof lang.Dictionary) || ( "+Pa+" instanceof lang.Feature)) {";za=za+("var "+La+"\x3d"+Pa+".keys(); \nfor(var ")+(Oa+"\x3d0; "+Oa+"\x3c"+La+".length; "+Oa+"++) {\n");za+=ba+"\x3d"+La+"["+Oa+"];\n";za+=E(N,P.body);za+="\n}\n";za+=" lastStatement \x3d lc.voidOperation; \n";za+=" \n}\n";N.isAsync&&(za+="else if (lc.isFeatureSet("+Pa+")) {",za=za+("var "+La+"\x3d"+Pa+".iterator(runtimeCtx.abortSignal); \nfor(var ")+(Oa+"\x3dlang. graphicToFeature( yield "+La+".next(),"+Pa+", runtimeCtx); "+
Oa+"!\x3dnull; "+Oa+"\x3dlang. graphicToFeature( yield "+La+".next(),"+Pa+", runtimeCtx)) {\n")+(ba+"\x3d"+Oa+";\n"),za+=E(N,P.body),za+="\n}\n",za+=" lastStatement \x3d lc.voidOperation; \n",za+=" \n}\n");return za+"else { lastStatement \x3d lc.voidOperation; } \n";case "WhileStatement":ba="lastStatement \x3d lc.voidOperation; \n";var eb=Q(N);return ba+="\n  var "+eb+" \x3d true;\n    do {\n      "+eb+" \x3d "+E(N,P.test)+";\n      if ("+eb+"\x3d\x3dfalse) {\n        break;\n      }\n      if ("+
eb+"!\x3d\x3dtrue) {\n        lang.error('"+y.ExecutionErrorCodes.BooleanConditionRequired+"');\n      }\n      "+E(N,P.body)+"\n    }\n    while ("+eb+" !\x3d\x3d false);\n    lastStatement \x3d lc.voidOperation;\n  ";case "Identifier":return fa(N,P);case "MemberExpression":try{ba=void 0;!0===P.computed?ba=E(N,P.property):(ba="'"+P.property.name+"'",da(P.property.name));var Wa="lang.member("+E(N,P.object)+","+ba+")"}catch(Va){throw Va;}return Wa;case "Literal":return null===P.value||void 0===P.value?
"null":JSON.stringify(P.value);case "CallExpression":return X(N,P);case "UnaryExpression":try{var gb="lang.unary("+E(N,P.argument)+",'"+P.operator+"')"}catch(Va){throw Va;}return gb;case "BinaryExpression":try{var kb="lang.binary("+E(N,P.left)+","+E(N,P.right)+",'"+P.operator+"')"}catch(Va){throw Va;}return kb;case "LogicalExpression":try{if("AssignmentExpression"===P.left.type||"UpdateExpression"===P.left.type)throw new y.ArcadeCompilationError(N,y.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,
P);if("AssignmentExpression"===P.right.type||"UpdateExpression"===P.right.type)throw new y.ArcadeCompilationError(N,y.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,P);if("\x26\x26"===P.operator||"||"===P.operator)var pb="(lang.logicalCheck("+E(N,P.left)+") "+P.operator+" lang.logicalCheck("+E(N,P.right)+"))";else throw new y.ArcadeCompilationError(null,y.ExecutionErrorCodes.LogicExpressionOrAnd,null);}catch(Va){throw Va;}return pb;case "ArrayExpression":try{ba=[];for(la=0;la<P.elements.length;la++)"Literal"===
P.elements[la].type?ba.push(E(N,P.elements[la])):ba.push("lang.aCheck("+E(N,P.elements[la])+",'ArrayExpression')");var lb="["+ba.join(",")+"]"}catch(Va){throw Va;}return lb;case "ObjectExpression":ba="lang.dictionary([";for(la=0;la<P.properties.length;la++){var Za=P.properties[la];da(Za.key.name);var jb="Identifier"===Za.key.type?"'"+Za.key.name+"'":E(N,Za.key),mb=E(N,Za.value);0<la&&(ba+=",");ba+="lang.strCheck("+jb+",'ObjectExpression'),lang.aCheck("+mb+", 'ObjectExpression')"}return ba+"])";case "Property":throw new y.ArcadeCompilationError(N,
y.ExecutionErrorCodes.NeverReach,P);case "Array":throw new y.ArcadeCompilationError(N,y.ExecutionErrorCodes.NeverReach,P);default:throw new y.ArcadeCompilationError(N,y.ExecutionErrorCodes.Unrecognised,P);}}catch(Va){throw Va;}}function F(N,P){var ba=null,la="";if("MemberExpression"===P.argument.type)return ba=E(N,P.argument.object),!0===P.argument.computed?la=E(N,P.argument.property):(la="'"+P.argument.property.name+"'",da(P.argument.property.name)),"lang.memberupdate("+ba+","+la+",'"+P.operator+
"',"+P.prefix+")";ba=P.argument.name.toLowerCase();da(ba);if(null!==N.localScope){if(void 0!==N.localScope[ba])return"lang.update(lscope, '"+ba+"','"+P.operator+"',"+P.prefix+")";if(void 0!==N.localScope._SymbolsMap[ba])return"lang.update(lscope, '"+N.localScope._SymbolsMap[ba]+"','"+P.operator+"',"+P.prefix+")"}if(void 0!==N.globalScope[ba])return"lang.update(gscope, '"+ba+"','"+P.operator+"',"+P.prefix+")";if(void 0!==N.globalScope._SymbolsMap[ba])return"lang.update(gscope, '"+N.globalScope._SymbolsMap[ba]+
"','"+P.operator+"',"+P.prefix+")";if(null!==N.localScope){if(N.undeclaredGlobalsInFunctions.has(ba))return"lang.update(gscope,lang.chkAssig( '"+N.undeclaredGlobalsInFunctions.get(ba).manglename+"',runtimeCtx),'"+P.operator+"',"+P.prefix+")";la={manglename:ca(N),node:P.argument};N.undeclaredGlobalsInFunctions.set(ba,la);return"lang.update(gscope, lang.chkAssig('"+la.manglename+"',runtimeCtx),'"+P.operator+"',"+P.prefix+")"}throw new y.ArcadeExecutionError(N,y.ExecutionErrorCodes.InvalidIdentifier,
P);}function H(N,P){var ba=E(N,P.right),la=null,qa="";if("MemberExpression"===P.left.type)return la=E(N,P.left.object),!0===P.left.computed?qa=E(N,P.left.property):(qa="'"+P.left.property.name+"'",da(P.left.property.name)),"lang.assignmember("+la+","+qa+",'"+P.operator+"',"+ba+")";la=P.left.name.toLowerCase();da(la);if(null!==N.localScope){if(void 0!==N.localScope[la])return"lscope['"+la+"']\x3dlang.assign("+ba+",'"+P.operator+"', lscope['"+la+"'])";if(void 0!==N.localScope._SymbolsMap[la])return"lscope['"+
N.localScope._SymbolsMap[la]+"']\x3dlang.assign("+ba+",'"+P.operator+"', lscope['"+N.localScope._SymbolsMap[la]+"'])"}if(void 0!==N.globalScope[la])return"gscope['"+la+"']\x3dlang.assign("+ba+",'"+P.operator+"', gscope['"+la+"'])";if(void 0!==N.globalScope._SymbolsMap[la])return"gscope['"+N.globalScope._SymbolsMap[la]+"']\x3dlang.assign("+ba+",'"+P.operator+"', gscope['"+N.globalScope._SymbolsMap[la]+"'])";if(null!==N.localScope){if(N.undeclaredGlobalsInFunctions.has(la))return"gscope[lang.chkAssig('"+
N.undeclaredGlobalsInFunctions.get(la).manglename+"',runtimeCtx)]\x3dlang.assign("+ba+",'"+P.operator+"', gscope['"+N.undeclaredGlobalsInFunctions.get(la).manglename+"'])";qa={manglename:ca(N),node:P.argument};N.undeclaredGlobalsInFunctions.set(la,qa);return"gscope[lang.chkAssig('"+qa.manglename+"',runtimeCtx)]\x3dlang.assign("+ba+",'"+P.operator+"', gscope['"+qa.manglename+"'])"}throw new y.ArcadeExecutionError(N,y.ExecutionErrorCodes.InvalidIdentifier,P);}function M(N,P){return"BlockStatement"===
P.type?E(N,P):"ReturnStatement"===P.type||"BreakStatement"===P.type||"ContinueStatement"===P.type?E(N,P)+"; ":"UpdateExpression"===P.type?"lastStatement \x3d "+E(N,P)+"; ":"ExpressionStatement"===P.type?E(N,P):"ObjectExpression"===P.type?"lastStatement \x3d "+E(N,P)+"; ":E(N,P)+"; "}function R(N,P){if("AssignmentExpression"===P.test.type||"UpdateExpression"===P.test.type)throw new y.ArcadeCompilationError(N,y.ExecutionErrorCodes.BooleanConditionRequired,P);return"if (lang.mustBoolean("+E(N,P.test)+
", runtimeCtx) \x3d\x3d\x3d true) {\n    "+M(N,P.consequent)+"\n  } "+(null!==P.alternate?"IfStatement"===P.alternate.type?" else "+R(N,P.alternate):" else {\n      "+M(N,P.alternate)+"\n    }\n":" else {\n      lastStatement \x3d lc.voidOperation;\n    }\n")}function V(N,P){for(var ba="",la=0;la<P.body.length;la++)"EmptyStatement"!==P.body[la].type&&(ba="ReturnStatement"===P.body[la].type?ba+(E(N,P.body[la])+"; \n"):"BreakStatement"===P.body[la].type?ba+(E(N,P.body[la])+"; \n"):"ContinueStatement"===
P.body[la].type?ba+(E(N,P.body[la])+"; \n"):"UpdateExpression"===P.body[la].type?ba+("lastStatement \x3d "+E(N,P.body[la])+"; \n"):"ObjectExpression"===P.body[la].type?ba+("lastStatement \x3d "+E(N,P.body[la])+"; \n"):ba+(E(N,P.body[la])+" \n"));return ba}function da(N){if("iif"===N)throw new y.ArcadeUncompilableError;if("decode"===N)throw new y.ArcadeUncompilableError;if("when"===N)throw new y.ArcadeUncompilableError;}function ha(N,P){var ba=null===P.init?null:E(N,P.init);ba===l.voidOperation&&(ba=
null);P=P.id.name.toLowerCase();da(P);if(null!==N.localScope){if(void 0!==N.localScope[P])return"lscope['"+P+"']\x3d"+ba+"; ";if(void 0!==N.localScope._SymbolsMap[P])return"lscope['"+N.localScope._SymbolsMap[P]+"']\x3d"+ba+"; ";var la=ca(N);N.localScope._SymbolsMap[P]=la;N.mangleMap[P]=la;return"lscope['"+la+"']\x3d"+ba+"; "}if(void 0!==N.globalScope[P])return"gscope['"+P+"']\x3d"+ba+"; ";if(void 0!==N.globalScope._SymbolsMap[P])return"gscope['"+N.globalScope._SymbolsMap[P]+"']\x3d"+ba+"; ";if(N.undeclaredGlobalsInFunctions.has(P))return la=
N.undeclaredGlobalsInFunctions.get(P).manglename,N.globalScope._SymbolsMap[P]=la,N.mangleMap[P]=la,N.undeclaredGlobalsInFunctions.delete(P),"gscope[lang.setAssig('"+la+"', runtimeCtx)]\x3d"+ba+"; ";la=ca(N);N.globalScope._SymbolsMap[P]=la;N.mangleMap[P]=la;return"gscope['"+la+"']\x3d"+ba+"; "}function fa(N,P){try{var ba=P.name.toLowerCase();da(ba);if(null!==N.localScope){if(void 0!==N.localScope[ba])return"lscope['"+ba+"']";if(void 0!==N.localScope._SymbolsMap[ba])return"lscope['"+N.localScope._SymbolsMap[ba]+
"']"}if(void 0!==N.globalScope[ba])return"gscope['"+ba+"']";if(void 0!==N.globalScope._SymbolsMap[ba])return"gscope['"+N.globalScope._SymbolsMap[ba]+"']";if(null!==N.localScope){if(N.undeclaredGlobalsInFunctions.has(ba))return"gscope[lang.chkAssig('"+N.undeclaredGlobalsInFunctions.get(ba).manglename+"',runtimeCtx)]";var la={manglename:ca(N),node:P.argument};N.undeclaredGlobalsInFunctions.set(ba,la);return"gscope[lang.chkAssig('"+la.manglename+"',runtimeCtx)]"}throw new y.ArcadeCompilationError(N,
y.ExecutionErrorCodes.InvalidIdentifier,P);}catch(qa){throw qa;}}function X(N,P){try{if("MemberExpression"===P.callee.type){var ba=void 0;!0===P.callee.computed?ba=E(N,P.callee.property):(ba="'"+P.callee.property.name+"'",da(P.callee.property.name));for(var la="[",qa=0;qa<P.arguments.length;qa++)0<qa&&(la+=", "),la+=E(N,P.arguments[qa]);la+="]";return N.isAsync?"(yield lang.callModuleFunction("+E(N,P.callee.object)+","+la+","+ba+",runtimeCtx))":"lang.callModuleFunction("+E(N,P.callee.object)+","+
la+","+ba+",runtimeCtx)"}if("Identifier"!==P.callee.type)throw new y.ArcadeCompilationError(N,y.ExecutionErrorCodes.FuncionNotFound,P);var L=P.callee.name.toLowerCase();if("iif"===L){try{if(3!==P.arguments.length)throw new y.ArcadeCompilationError(N,y.ExecutionErrorCodes.WrongNumberOfParameters,P);var Z=Q(N);var oa=(N.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {")+"\n        var "+Z+" \x3d "+E(N,P.arguments[0])+";\n       \n        if ("+
Z+" \x3d\x3d\x3d true) {\n          return  "+E(N,P.arguments[1])+";\n        }\n        else if ("+Z+" \x3d\x3d\x3d false) {\n          return "+E(N,P.arguments[2])+";\n        }\n        else {\n          lang.error('ExecutionErrorCodes.BooleanConditionRequired');\n        }\n      "+(N.isAsync?"})}()))":"}()")}catch(Ea){throw Ea;}return oa}if("when"===L){try{if(3>P.arguments.length)throw new y.ArcadeCompilationError(N,y.ExecutionErrorCodes.WrongNumberOfParameters,P);if(0===P.arguments.length%2)throw new y.ArcadeCompilationError(N,
y.ExecutionErrorCodes.WrongNumberOfParameters,P);var ua=Q(N);la="var ";for(qa=0;qa<P.arguments.length-1;qa+=2)la+=ua+" \x3d lang.mustBoolean("+E(N,P.arguments[qa])+", runtimeCtx);\n      if ("+ua+" \x3d\x3d\x3d true ) {\n        return "+E(N,P.arguments[qa+1])+" \n      }\n";ba=(N.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {")+"\n        "+la+"\n        return "+E(N,P.arguments[P.arguments.length-1])+"\n        "+(N.isAsync?"})}()))":"}()")}catch(Ea){throw Ea;
}return ba}if("decode"===L){try{if(2>P.arguments.length)throw new y.ArcadeCompilationError(N,y.ExecutionErrorCodes.WrongNumberOfParameters,P);if(2===P.arguments.length)var va="("+E(N,P.arguments[1])+")";else{if(0===(P.arguments.length-1)%2)throw new y.ArcadeCompilationError(N,y.ExecutionErrorCodes.WrongNumberOfParameters,P);var xa=Q(N),Aa=Q(N);la="var ";for(qa=1;qa<P.arguments.length-1;qa+=2)la+=Aa+" \x3d "+E(N,P.arguments[qa])+";\n      if (lang.binary("+Aa+", "+xa+', "\x3d\x3d") \x3d\x3d\x3d true ) {\n        return '+
E(N,P.arguments[qa+1])+" \n      }\n";va=(N.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {")+"\n        var "+xa+" \x3d "+E(N,P.arguments[0])+";\n        "+la+"\n        return "+E(N,P.arguments[P.arguments.length-1])+"\n        "+(N.isAsync?"})}()))":"}()")}}catch(Ea){throw Ea;}return va}ba="";null!==N.localScope&&(void 0!==N.localScope[L]?ba="lscope['"+L+"']":void 0!==N.localScope._SymbolsMap[L]&&(ba="lscope['"+N.localScope._SymbolsMap[L]+
"']"));if(""===ba)if(void 0!==N.globalScope[L])ba="gscope['"+L+"']";else if(void 0!==N.globalScope._SymbolsMap[L])ba="gscope['"+N.globalScope._SymbolsMap[L]+"']";else if(null!==N.localScope)if(N.undeclaredGlobalsInFunctions.has(L))ba="gscope[lang.chkAssig('"+N.undeclaredGlobalsInFunctions.get(L).manglename+"',runtimeCtx)]";else{var wa={manglename:ca(N),node:P.argument};N.undeclaredGlobalsInFunctions.set(L,wa);ba="gscope[lang.chkAssig('"+wa.manglename+"',runtimeCtx)]"}if(""!==ba){la="[";for(qa=0;qa<
P.arguments.length;qa++)0<qa&&(la+=", "),la+=E(N,P.arguments[qa]);la+="]";return N.isAsync?"(yield lang.callfunc("+ba+","+la+",runtimeCtx) )":"lang.callfunc("+ba+","+la+",runtimeCtx)"}throw new y.ArcadeCompilationError(N,y.ExecutionErrorCodes.FuncionNotFound,P);}catch(Ea){throw Ea;}}function ca(N){N.symbols.symbolCounter++;return"_T"+N.symbols.symbolCounter.toString()}function Q(N){N.symbols.symbolCounter++;return"_Tvar"+N.symbols.symbolCounter.toString()}function U(N,P,ba){var la={};N||(N={});ba||
(ba={});la._SymbolsMap={};la.textformatting=1;la.infinity=1;la.pi=1;for(var qa in P)la[qa]=1;for(qa in ba)la[qa]=1;for(qa in N)la[qa]=1;return la}function ia(N,P,ba,la){ba=ba?new ka:new ea;N||(N={});P||(P={});var qa=new d({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});qa.immutable=!1;ba._SymbolsMap={textformatting:1,infinity:1,pi:1};ba.textformatting=qa;ba.infinity=Number.POSITIVE_INFINITY;ba.pi=Math.PI;for(var L in P)ba[L]=P[L],ba._SymbolsMap[L]=1;for(L in N)ba._SymbolsMap[L]=
1,ba[L]=N[L]&&"esri.Graphic"===N[L].declaredClass?e.createFromGraphic(N[L],null!==la&&void 0!==la?la:null):N[L];return ba}function T(N,P){for(var ba={mode:P,compiled:!0,functions:{},signatures:[],standardFunction:w,standardFunctionAsync:w,evaluateIdentifier:Y},la=0;la<N.length;la++)N[la].registerFunctions(ba);if("sync"===P){for(var qa in ba.functions)ta[qa]=new B.NativeFunction(ba.functions[qa]),ea.prototype[qa]=ta[qa];for(la=0;la<ba.signatures.length;la++)f.addFunctionDeclaration(ba.signatures[la],
"sync")}else{for(qa in ba.functions)W[qa]=new B.NativeFunction(ba.functions[qa]),ka.prototype[qa]=W[qa];for(la=0;la<ba.signatures.length;la++)f.addFunctionDeclaration(ba.signatures[la],"async")}}function Y(N,P){P=P.name;if("_SymbolsMap"===P)throw new y.ArcadeExecutionError(N,y.ExecutionErrorCodes.InvalidIdentifier,null);if(0<N.localStack.length){if("_t"!==P.substr(0,2).toLowerCase()&&void 0!==N.localStack[N.localStack.length-1][P])return N.localStack[N.localStack.length-1][P];var ba=N.mangleMap[P];
if(void 0!==ba&&void 0!==N.localStack[N.localStack.length-1][ba])return N.localStack[N.localStack.length-1][ba]}if("_t"!==P.substr(0,2).toLowerCase()&&void 0!==N.globalScope[P]||1===N.globalScope._SymbolsMap[P])return N.globalScope[P];P=N.mangleMap[P];if(void 0!==P)return N.globalScope[P]}function ja(N){}function pa(N,P,ba){var la;void 0===ba&&(ba=!1);var qa={isAsync:ba,moduleFactory:P.moduleFactory,moduleFactoryMap:{},libraryResolver:new C.ArcadeModuleLoader(null,N.loadedModules),globalScope:U(P.vars,
ba?W:ta,P.customfunctions),customfunctions:P.customfunctions,localScope:null,mangleMap:{},undeclaredGlobalsInFunctions:new Map,depthCounter:{depth:1},exports:{},console:ja,lrucache:P.lrucache,timeReference:null!==(la=P.timeReference)&&void 0!==la?la:null,interceptor:P.interceptor,services:P.services,symbols:{symbolCounter:0}};N=E(qa,N);""===N&&(N="lc.voidOperation; ");var L=qa.moduleFactory,Z=qa.moduleFactoryMap,oa=qa.exports,ua={},va;for(va in oa)ua[va]=void 0!==qa.mangleMap[va]?qa.mangleMap[va]:
va;qa={lc:l,lang:sa,mangles:qa.mangleMap,prepareModule:function(xa){return new Ca(xa)},prepare:function(xa,Aa){var wa,Ea=xa.spatialReference;if(null===Ea||void 0===Ea)Ea=new A({wkid:102100});var Ja=ia(xa.vars,xa.customfunctions,Aa,xa.timeReference);return{localStack:[],isAsync:Aa,exports:oa,exportmangle:ua,gdefs:{},moduleFactory:L,moduleFactoryMap:Z,moduleSingletons:xa.moduleSingletons,mangleMap:this.mangles,spatialReference:Ea,globalScope:Ja,abortSignal:void 0===xa.abortSignal||null===xa.abortSignal?
{aborted:!1}:xa.abortSignal,localScope:null,services:xa.services,console:xa.console?xa.console:ja,lrucache:xa.lrucache,timeReference:null!==(wa=xa.timeReference)&&void 0!==wa?wa:null,interceptor:xa.interceptor,symbols:{symbolCounter:0},depthCounter:xa.depthCounter}}};return(new Function("context","spatialReference",ba?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
N+"\n return lastStatement; }); } \n yield mainBody(); \n return this.prepareModule(runtimeCtx); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+N+"\n return lastStatement; } \n mainBody(); \n return this.prepareModule(runtimeCtx); ")).bind(qa)}Object.defineProperty(t,"__esModule",{value:!0});t.enableAsyncSupport=t.compileScript=t.executeScript=
t.extend=t.functionHelper=t.UserDefinedCompiledFunction=void 0;a=function(N){function P(ba,la){var qa=N.call(this)||this;qa.paramCount=la;qa.fn=ba;return qa}h(P,N);P.prototype.createFunction=function(ba){var la=this;return function(){for(var qa=[],L=0;L<arguments.length;L++)qa[L]=arguments[L];if(qa.length!==la.paramCount)throw new y.ArcadeExecutionError(ba,y.ExecutionErrorCodes.WrongNumberOfParameters,null);return la.fn.apply(la,qa)}};P.prototype.call=function(ba,la){return this.fn.apply(this,la.arguments)};
P.prototype.marshalledCall=function(ba,la,qa,L){var Z=this;return L(ba,la,function(oa,ua,va){va=va.map(function(xa){return!l.isFunctionParameter(xa)||xa instanceof B.ScopeMarshalledFunction?xa:B.wrapModuleScopedResponse(xa,ba,L)});oa=Z.call(qa,{arguments:va});return x.isPromiseLike(oa)?oa.then(function(xa){return B.wrapModuleScopedResponse(xa,qa,L)}):oa})};return P}(B.ArcadeFunction);t.UserDefinedCompiledFunction=a;var ta={};u.registerFunctions(ta,w);v.registerFunctions(ta,w);q.registerFunctions(ta,
w);p.registerFunctions(ta,w);m.registerFunctions(ta,w);ta.iif=function(N,P){try{return w(N,P,function(ba,la,qa){throw new y.ArcadeExecutionError(N,y.ExecutionErrorCodes.Unrecognised,P);})}catch(ba){throw ba;}};ta.decode=function(N,P){try{return w(N,P,function(ba,la,qa){throw new y.ArcadeExecutionError(N,y.ExecutionErrorCodes.Unrecognised,P);})}catch(ba){throw ba;}};ta.when=function(N,P){try{return w(N,P,function(ba,la,qa){throw new y.ArcadeExecutionError(N,y.ExecutionErrorCodes.Unrecognised,P);})}catch(ba){throw ba;
}};var W={},S;for(S in ta)W[S]=new B.NativeFunction(ta[S]);r.registerFunctions(ta,w);for(S in ta)ta[S]=new B.NativeFunction(ta[S]);var ea=function(){};ea.prototype=ta;var ka=function(){};ka.prototype=W;t.functionHelper={fixSpatialReference:l.fixSpatialReference,parseArguments:function(N,P){for(var ba=[],la=0;la<P.arguments.length;la++)ba.push(E(N,P.arguments[la]));return ba},standardFunction:w};t.extend=T;T([n],"sync");T([n],"async");t.executeScript=function(N,P){return N(P)};var na=0,sa={error:function(N){throw new y.ArcadeExecutionError(null,
N,null);},__awaiter:function(N,P,ba,la){return new Promise(function(qa,L){function Z(va){try{ua(la.next(va))}catch(xa){L(xa)}}function oa(va){try{ua(la["throw"](va))}catch(xa){L(xa)}}function ua(va){va.done?qa(va.value):va.value&&va.value.then?va.value.then(Z,oa):(na++,0===na%100?setTimeout(function(){na=0;Z(va.value)},0):Z(va.value))}ua((la=la.apply(N,P||[])).next())})},functionDepthchecker:function(N,P){return function(){P.depthCounter.depth++;P.localStack.push([]);if(64<P.depthCounter.depth)throw new y.ArcadeExecutionError(null,
y.ExecutionErrorCodes.MaximumCallDepth,null);var ba=N.apply(this,arguments);if(x.isPromiseLike(ba))return ba.then(function(la){P.depthCounter.depth--;--P.localStack.length;return la});P.depthCounter.depth--;--P.localStack.length;return ba}},chkAssig:function(N,P){if(void 0===P.gdefs[N])throw new y.ArcadeExecutionError(P,y.ExecutionErrorCodes.InvalidIdentifier,null);return N},mustBoolean:function(N,P){if(!0===N||!1===N)return N;throw new y.ArcadeExecutionError(P,y.ExecutionErrorCodes.BooleanConditionRequired,
null);},setAssig:function(N,P){P.gdefs[N]=1;return N},castString:function(N){return l.toString(N)},aCheck:function(N,P){if(l.isFunctionParameter(N)){if("ArrayExpression"===P)throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.NoFunctionInArray,null);if("ObjectExpression"===P)throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.NoFunctionInDictionary,null);throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.NoFunctionInTemplateLiteral,null);}return N===l.voidOperation?null:N},
Dictionary:d,Feature:e,UserDefinedCompiledFunction:a,dictionary:function(N){for(var P={},ba=new Map,la=0;la<N.length;la+=2){if(l.isFunctionParameter(N[la+1]))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.NoFunctionInDictionary,null);if(!1===l.isString(N[la]))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.KeyMustBeString,null);var qa=N[la].toString(),L=qa.toLowerCase();ba.has(L)?qa=ba.get(L):ba.set(L,qa);P[qa]=N[la+1]===l.voidOperation?null:N[la+1]}N=new d(P);N.immutable=
!1;return N},strCheck:function(N){if(!1===l.isString(N))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.KeyMustBeString,null);return N},unary:function(N,P){if(l.isBoolean(N)){if("!"===P)return!N;if("-"===P)return-1*l.toNumber(N);if("+"===P)return 1*l.toNumber(N);if("~"===P)return~l.toNumber(N);throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.UnsupportedUnaryOperator,null);}if("-"===P)return-1*l.toNumber(N);if("+"===P)return 1*l.toNumber(N);if("~"===P)return~l.toNumber(N);throw new y.ArcadeExecutionError(null,
y.ExecutionErrorCodes.UnsupportedUnaryOperator,null);},logicalCheck:function(N){if(!1===l.isBoolean(N))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.LogicExpressionOrAnd,null);return N},logical:function(N,P,ba){if(l.isBoolean(N)&&l.isBoolean(P))switch(ba){case "||":return N||P;case "\x26\x26":return N&&P}throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.LogicExpressionOrAnd,null);},binary:function(N,P,ba){switch(ba){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return l.binaryOperator(l.toNumber(N),
l.toNumber(P),ba);case "\x3d\x3d":return l.equalityTest(N,P);case "\x3d":return l.equalityTest(N,P);case "!\x3d":return!l.equalityTest(N,P);case "\x3c":return l.greaterThanLessThan(N,P,ba);case "\x3e":return l.greaterThanLessThan(N,P,ba);case "\x3c\x3d":return l.greaterThanLessThan(N,P,ba);case "\x3e\x3d":return l.greaterThanLessThan(N,P,ba);case "+":return l.isString(N)||l.isString(P)?l.toString(N)+l.toString(P):l.toNumber(N)+l.toNumber(P);case "-":return l.toNumber(N)-l.toNumber(P);case "*":return l.toNumber(N)*
l.toNumber(P);case "/":return l.toNumber(N)/l.toNumber(P);case "%":return l.toNumber(N)%l.toNumber(P);default:throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.UnsupportedOperator,null);}},assign:function(N,P,ba){switch(P){case "\x3d":return N===l.voidOperation?null:N;case "/\x3d":return l.toNumber(ba)/l.toNumber(N);case "*\x3d":return l.toNumber(ba)*l.toNumber(N);case "-\x3d":return l.toNumber(ba)-l.toNumber(N);case "+\x3d":return l.isString(ba)||l.isString(N)?l.toString(ba)+l.toString(N):
l.toNumber(ba)+l.toNumber(N);case "%\x3d":return l.toNumber(ba)%l.toNumber(N);default:throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.UnsupportedOperator,null);}},update:function(N,P,ba,la){var qa=l.toNumber(N[P]);N[P]="++"===ba?qa+1:qa-1;return!1===la?qa:"++"===ba?qa+1:qa-1},graphicToFeature:function(N,P,ba){return null===N?null:e.createFromGraphicLikeObject(N.geometry,N.attributes,P,ba.timeReference)},memberupdate:function(N,P,ba,la){if(l.isArray(N))if(l.isNumber(P)){0>P&&(P=N.length+
P);if(0>P||P>=N.length)throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.OutOfBounds,null);var qa=l.toNumber(N[P]);N[P]="++"===ba?qa+1:qa-1}else throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.ArrayAccessorMustBeNumber,null);else if(N instanceof d){if(!1===l.isString(P))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===N.hasField(P))qa=l.toNumber(N.field(P)),N.setField(P,"++"===ba?qa+1:qa-1);else throw new y.ArcadeExecutionError(null,
y.ExecutionErrorCodes.FieldNotFound,null,{key:P});}else if(l.isFeature(N)){if(!1===l.isString(P))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===N.hasField(P))qa=l.toNumber(N.field(P)),N.setField(P,"++"===ba?qa+1:qa-1);else throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.FieldNotFound,null);}else{if(l.isImmutableArray(N))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.Immutable,null);if(N instanceof Ca){if(!1===l.isString(P))throw new y.ArcadeExecutionError(null,
y.ExecutionErrorCodes.ModuleAccessorMustBeString,null);if(!0===N.hasGlobal(P))qa=l.toNumber(N.global(P)),N.setGlobal(P,"++"===ba?qa+1:qa-1);else throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.ModuleExportNotFound,null);}else throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.InvalidIdentifier,null);}return!1===la?qa:"++"===ba?qa+1:qa-1},assignmember:function(N,P,ba,la){if(l.isArray(N))if(l.isNumber(P)){0>P&&(P=N.length+P);if(0>P||P>N.length)throw new y.ArcadeExecutionError(null,
y.ExecutionErrorCodes.OutOfBounds,null);if(P===N.length&&"\x3d"!==ba)throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.OutOfBounds,null);N[P]=this.assign(la,ba,N[P])}else throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.ArrayAccessorMustBeNumber,null);else if(N instanceof d){if(!1===l.isString(P))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===N.hasField(P))N.setField(P,this.assign(la,ba,N.field(P)));else{if("\x3d"!==ba)throw new y.ArcadeExecutionError(null,
y.ExecutionErrorCodes.FieldNotFound,null);N.setField(P,this.assign(la,ba,null))}}else if(l.isFeature(N)){if(!1===l.isString(P))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===N.hasField(P))N.setField(P,this.assign(la,ba,N.field(P)));else{if("\x3d"!==ba)throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.FieldNotFound,null);N.setField(P,this.assign(la,ba,null))}}else{if(l.isImmutableArray(N))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.Immutable,
null);if(N instanceof Ca){if(!1===l.isString(P))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.ModuleAccessorMustBeString,null);if(N.hasGlobal(P))N.setGlobal(P,this.assign(la,ba,N.global(P)));else throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.ModuleExportNotFound,null);}else throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.InvalidIdentifier,null);}},member:function(N,P){if(null===N)throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.MemberOfNull,null);
if(N instanceof d||l.isFeature(N)){if(l.isString(P))return N.field(P);throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(N instanceof z){if(l.isString(P))return p.geometryMember(N,P,null,null);throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(l.isArray(N)){if(l.isNumber(P)&&isFinite(P)&&Math.floor(P)===P){0>P&&(P=N.length+P);if(P>=N.length||0>P)throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.OutOfBounds,
null);return N[P]}throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(l.isString(N)){if(l.isNumber(P)&&isFinite(P)&&Math.floor(P)===P){0>P&&(P=N.length+P);if(P>=N.length||0>P)throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.OutOfBounds,null);return N[P]}throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(l.isImmutableArray(N)){if(l.isNumber(P)&&isFinite(P)&&Math.floor(P)===P){0>P&&(P=N.length()+P);if(P>=N.length()||
0>P)throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.OutOfBounds,null);return N.get(P)}throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(N instanceof Ca&&l.isString(P))return N.global(P);throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.InvalidMemberAccessKey,null);},callfunc:function(N,P,ba){return N.call(ba,{arguments:P,preparsed:!0})},loadModule:function(N,P){N=P.moduleFactoryMap[N];if(P.moduleSingletons[N])return P.moduleSingletons[N];
var ba=P.moduleFactory[N]({vars:{},moduleSingletons:P.moduleSingletons,depthCounter:P.depthCounter,console:P.console,abortSignal:P.abortSignal,isAsync:P.isAsync,services:P.services,lrucache:P.lrucache,timeReference:P.timeReference?P.timeReference:null,interceptor:P.interceptor},P.spatialReference);return P.moduleSingletons[N]=ba},callModuleFunction:function(N,P,ba,la){if(!(N instanceof Ca))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.FuncionNotFound,null);N=N.global(ba);if(!1===l.isFunctionParameter(N))throw new y.ArcadeExecutionError(null,
y.ExecutionErrorCodes.CallNonFunction,null);return N.call(la,{preparsed:!0,arguments:P})}};t.compileScript=function(N,P,ba){var la;void 0===ba&&(ba=!1);null===P&&(P={vars:{},customfunctions:{}});var qa=null;N.usesModules&&(qa=new C.ArcadeModuleLoader(null,N.loadedModules));qa={isAsync:ba,globalScope:U(P.vars,ba?W:ta,P.customfunctions),moduleFactory:{},moduleFactoryMap:{},undeclaredGlobalsInFunctions:new Map,customfunctions:P.customfunctions,libraryResolver:qa,localScope:null,mangleMap:{},depthCounter:{depth:1},
exports:{},console:ja,lrucache:P.lrucache,timeReference:null!==(la=P.timeReference)&&void 0!==la?la:null,interceptor:P.interceptor,services:P.services,symbols:{symbolCounter:0}};N=E(qa,N);""===N&&(N="lc.voidOperation; ");0<qa.undeclaredGlobalsInFunctions.size&&qa.undeclaredGlobalsInFunctions.forEach(function(xa){throw new y.ArcadeCompilationError(P,y.ExecutionErrorCodes.InvalidIdentifier,xa.node);});var L=qa.moduleFactory,Z=qa.moduleFactoryMap,oa=qa.exports,ua={};for(va in oa)ua[va]=void 0!==qa.mangleMap[va]?
qa.mangleMap[va]:va;var va={lc:l,lang:sa,mangles:qa.mangleMap,postProcess:function(xa){xa instanceof l.ReturnResult&&(xa=xa.value);xa instanceof l.ImplicitResult&&(xa=xa.value);xa===l.voidOperation&&(xa=null);if(xa===l.breakResult)throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.IllegalResult,null);if(xa===l.continueResult)throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.IllegalResult,null);if(l.isFunctionParameter(xa))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.IllegalResult,
null);return xa},prepare:function(xa,Aa){var wa,Ea=xa.spatialReference;if(null===Ea||void 0===Ea)Ea=new A({wkid:102100});var Ja=ia(xa.vars,xa.customfunctions,Aa,xa.timeReference);return{localStack:[],isAsync:Aa,moduleFactory:L,moduleFactoryMap:Z,mangleMap:this.mangles,moduleSingletons:{},exports:oa,gdefs:{},exportmangle:ua,spatialReference:Ea,globalScope:Ja,abortSignal:void 0===xa.abortSignal||null===xa.abortSignal?{aborted:!1}:xa.abortSignal,localScope:null,services:xa.services,console:xa.console?
xa.console:ja,lrucache:xa.lrucache,timeReference:null!==(wa=xa.timeReference)&&void 0!==wa?wa:null,interceptor:xa.interceptor,symbols:{symbolCounter:0},depthCounter:{depth:1}}}};return(new Function("context","spatialReference",ba?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
N+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+N+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(va)};t.enableAsyncSupport=function(){return new Promise(function(N,P){g(["./functions/geomasync"],function(ba){T([ba],"async");N(!0)},
function(ba){P(ba)})})};var Ca=function(N){function P(ba){var la=N.call(this,null)||this;la.moduleContext=ba;return la}h(P,N);P.prototype.hasGlobal=function(ba){void 0===this.moduleContext.exports[ba]&&(ba=ba.toLowerCase());return void 0!==this.moduleContext.exports[ba]?!0:!1};P.prototype.setGlobal=function(ba,la){var qa=this.moduleContext.globalScope;ba=ba.toLowerCase();if(l.isFunctionParameter(la))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.AssignModuleFunction,null);qa[this.moduleContext.exportmangle[ba]]=
la};P.prototype.global=function(ba){var la=this.moduleContext.globalScope;ba=ba.toLowerCase();var qa=la[this.moduleContext.exportmangle[ba]];if(void 0===qa)throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.InvalidIdentifier,null);if(l.isFunctionParameter(qa)&&!(qa instanceof B.ScopeMarshalledFunction)){var L=new B.ScopeMarshalledFunction;L.fn=qa;L.parameterEvaluator=w;L.context=this.moduleContext;return la[this.moduleContext.exportmangle[ba]]=L}return qa};return P}(D.ArcadeModule)})},"esri/arcade/treeAnalysis":function(){define(["require",
"exports","./polyfill/tsSupport/awaiter","./polyfill/tsSupport/generator"],function(g,t,a,b){function c(r){return"string"===typeof r||r instanceof String}function k(r,q){if(r)for(var m=0;m<r.length;m++)h(r[m],q)}function h(r,q){if(r&&!1!==q(r))switch(r.type){case "ImportDeclaration":k(r.specifiers,q);h(r.source,q);break;case "ExportNamedDeclaration":h(r.declaration,q);break;case "ArrayExpression":k(r.elements,q);break;case "AssignmentExpression":case "BinaryExpression":h(r.left,q);h(r.right,q);break;
case "BlockStatement":k(r.body,q);break;case "Program":k(r.body,q);break;case "CallExpression":h(r.callee,q);k(r.arguments,q);break;case "ExpressionStatement":h(r.expression,q);break;case "ForInStatement":h(r.left,q);h(r.right,q);h(r.body,q);break;case "ForStatement":h(r.init,q);h(r.test,q);h(r.update,q);h(r.body,q);break;case "WhileStatement":h(r.test,q);h(r.body,q);break;case "FunctionDeclaration":h(r.id,q);k(r.params,q);h(r.body,q);break;case "IfStatement":h(r.test,q);h(r.consequent,q);h(r.alternate,
q);break;case "LogicalExpression":h(r.left,q);h(r.right,q);break;case "MemberExpression":h(r.object,q);h(r.property,q);break;case "ObjectExpression":k(r.properties,q);break;case "Property":h(r.key,q);h(r.value,q);break;case "ReturnStatement":h(r.argument,q);break;case "UnaryExpression":h(r.argument,q);break;case "UpdateExpression":h(r.argument,q);break;case "VariableDeclaration":k(r.declarations,q);break;case "VariableDeclarator":h(r.id,q);h(r.init,q);break;case "TemplateLiteral":k(r.expressions,
q),k(r.quasis,q)}}function d(r,q){var m=!1,v=q.toLowerCase();h(r,function(x){if(m)return!1;"Identifier"===x.type&&x.name&&x.name.toLowerCase()===v&&(m=!0);return!0});return m}function e(r){var q=[];h(r,function(m){"ImportDeclaration"===m.type&&m.source&&m.source.value&&q.push({libname:m.specifiers[0].local.name.toLowerCase(),source:m.source.value});return!0});return q}function l(r){var q=[];h(r,function(m){"CallExpression"===m.type&&"Identifier"===m.callee.type&&q.push(m.callee.name.toLowerCase());
return!0});return q}Object.defineProperty(t,"__esModule",{value:!0});t.scriptUsesFeatureSet=t.findScriptDependencies=t.findFunctionCalls=t.extractFunctionDeclaration=t.findExpectedFieldLiterals=t.findFieldLiterals=t.referencesFunction=t.findModuleImports=t.referencesMember=t.walk=t.addFunctionDeclaration=t.fullArcadeApiAsync=t.fullArcadeApiSync=void 0;g={all:{min:2,max:2},none:{min:2,max:2},any:{min:2,max:2},reduce:{min:2,max:3},map:{min:2,max:2},filter:{min:2,max:2},fromcodepoint:{min:1,max:-1},
fromcharcode:{min:1,max:-1},tocodepoint:{min:1,max:2},tocharcode:{min:1,max:2},concatenate:{min:0,max:-1},expects:{min:1,max:-1},getfeatureset:{min:1,max:2},week:{min:1,max:2},fromjson:{min:1,max:1},length3d:{min:1,max:2},tohex:{min:1,max:1},hash:{min:1,max:1},timezone:{min:1,max:1},timezoneoffset:{min:1,max:1},changetimezone:{min:2,max:2},isoweek:{min:1,max:1},isoweekday:{min:1,max:1},hasvalue:{min:2,max:2},isomonth:{min:1,max:1},isoyear:{min:1,max:1},resize:{min:2,max:3},slice:{min:0,max:-1},splice:{min:0,
max:-1},push:{min:2,max:2},pop:{min:1,max:1},includes:{min:2,max:2},array:{min:1,max:2},front:{min:1,max:1},back:{min:1,max:1},insert:{min:3,max:3},erase:{min:2,max:2},split:{min:2,max:4},guid:{min:0,max:1},standardizeguid:{min:2,max:2},today:{min:0,max:0},angle:{min:2,max:3},bearing:{min:2,max:3},urlencode:{min:1,max:1},now:{min:0,max:0},timestamp:{min:0,max:0},day:{min:1,max:1},month:{min:1,max:1},year:{min:1,max:1},hour:{min:1,max:1},second:{min:1,max:1},millisecond:{min:1,max:1},minute:{min:1,
max:1},weekday:{min:1,max:1},toutc:{min:1,max:1},tolocal:{min:1,max:1},date:{min:0,max:8},datediff:{min:2,max:4},dateadd:{min:2,max:3},trim:{min:1,max:1},text:{min:1,max:2},left:{min:2,max:2},right:{min:2,max:2},mid:{min:2,max:3},upper:{min:1,max:1},proper:{min:1,max:2},lower:{min:1,max:1},find:{min:2,max:3},iif:{min:3,max:3},decode:{min:2,max:-1},when:{min:2,max:-1},defaultvalue:{min:2,max:2},isempty:{min:1,max:1},domaincode:{min:2,max:4},domainname:{min:2,max:4},polygon:{min:1,max:1},point:{min:1,
max:1},polyline:{min:1,max:1},extent:{min:1,max:1},multipoint:{min:1,max:1},ringisclockwise:{min:1,max:1},geometry:{min:1,max:1},count:{min:0,max:-1},number:{min:1,max:2},acos:{min:1,max:1},asin:{min:1,max:1},atan:{min:1,max:1},atan2:{min:2,max:2},ceil:{min:1,max:2},floor:{min:1,max:2},round:{min:1,max:2},cos:{min:1,max:1},exp:{min:1,max:1},log:{min:1,max:1},min:{min:0,max:-1},constrain:{min:3,max:3},console:{min:0,max:-1},max:{min:0,max:-1},pow:{min:2,max:2},random:{min:0,max:0},sqrt:{min:1,max:1},
sin:{min:1,max:1},tan:{min:1,max:1},abs:{min:1,max:1},isnan:{min:1,max:1},stdev:{min:0,max:-1},average:{min:0,max:-1},mean:{min:0,max:-1},sum:{min:0,max:-1},variance:{min:0,max:-1},distinct:{min:0,max:-1},first:{min:1,max:1},top:{min:2,max:2},boolean:{min:1,max:1},dictionary:{min:0,max:-1},typeof:{min:1,max:1},reverse:{min:1,max:1},replace:{min:3,max:4},sort:{min:1,max:2},feature:{min:1,max:-1},haskey:{min:2,max:2},indexof:{min:2,max:2},disjoint:{min:2,max:2},intersects:{min:2,max:2},touches:{min:2,
max:2},crosses:{min:2,max:2},within:{min:2,max:2},contains:{min:2,max:2},overlaps:{min:2,max:2},equals:{min:2,max:2},relate:{min:3,max:3},intersection:{min:2,max:2},union:{min:1,max:2},difference:{min:2,max:2},symmetricdifference:{min:2,max:2},clip:{min:2,max:2},cut:{min:2,max:2},area:{min:1,max:2},areageodetic:{min:1,max:2},length:{min:1,max:2},lengthgeodetic:{min:1,max:2},distancegeodetic:{min:2,max:3},distance:{min:2,max:3},densify:{min:2,max:3},densifygeodetic:{min:2,max:3},generalize:{min:2,
max:4},buffer:{min:2,max:3},buffergeodetic:{min:2,max:3},offset:{min:2,max:6},rotate:{min:2,max:3},issimple:{min:1,max:1},simplify:{min:1,max:1},convexhull:{min:1,max:1},centroid:{min:1,max:1},isselfintersecting:{min:1,max:1},multiparttosinglepart:{min:1,max:1},setgeometry:{min:2,max:2},portal:{min:1,max:1},getuser:{min:0,max:2},subtypes:{min:1,max:1},subtypecode:{min:1,max:1},subtypename:{min:1,max:1},domain:{min:2,max:3},convertdirection:{min:3,max:3},sqltimestamp:{min:1,max:3},schema:{min:1,max:1}};
t.fullArcadeApiSync={functionDefinitions:new Map,constantDefinitions:new Map};t.fullArcadeApiAsync={functionDefinitions:new Map,constantDefinitions:new Map};a=0;for(b=["pi","infinity"];a<b.length;a++){var f=b[a];t.fullArcadeApiAsync.constantDefinitions.set(f,{type:"constant"});t.fullArcadeApiSync.constantDefinitions.set(f,{type:"constant"})}t.fullArcadeApiAsync.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"doublequote",
type:"constant"},{key:"forwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"newline",type:"constant"}]});t.fullArcadeApiSync.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"newline",type:"constant"}]});for(var n in g)a=g[n],t.fullArcadeApiAsync.functionDefinitions.set(n,
{overloads:[{type:"function",parametersInfo:{min:a.min,max:a.max}}]}),t.fullArcadeApiSync.functionDefinitions.set(n,{overloads:[{type:"function",parametersInfo:{min:a.min,max:a.max}}]});var u="featureset featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl getfeatureset getuser attachments featuresetbyportalitem".split(" "),p="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length length3d lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple convexhull simplify multiparttosinglepart".split(" ");
t.addFunctionDeclaration=function(r,q){var m;q="sync"===q?t.fullArcadeApiSync:t.fullArcadeApiAsync;q.functionDefinitions.has(r.name.toLowerCase())?null===(m=q.functionDefinitions.get(r.name.toLowerCase()))||void 0===m?void 0:m.overloads.push({type:"function",parametersInfo:{min:r.min,max:r.max}}):q.functionDefinitions.set(r.name.toLowerCase(),{overloads:[{type:"function",parametersInfo:{min:r.min,max:r.max}}]})};t.walk=h;t.referencesMember=d;t.findModuleImports=e;t.referencesFunction=function(r,q){var m=
!1,v=q.toLowerCase();h(r,function(x){return m?!1:"CallExpression"===x.type&&"Identifier"===x.callee.type&&x.callee.name&&x.callee.name.toLowerCase()===v?(m=!0,!1):!0});return m};t.findFieldLiterals=function(r){var q=[];h(r,function(m){var v;if("MemberExpression"!==m.type||"Identifier"!==m.object.type)return!0;!1===m.computed&&m.object&&m.object.name&&m.property&&"Identifier"===m.property.type&&m.property.name?q.push(m.object.name.toLowerCase()+"."+m.property.name.toLowerCase()):m.object&&m.object.name&&
m.property&&"Literal"===m.property.type&&"string"===typeof m.property.value&&q.push(m.object.name.toLowerCase()+"."+(null===(v=m.property.value)||void 0===v?void 0:v.toString().toLowerCase()));return!1});return q};t.findExpectedFieldLiterals=function(r){var q=[];h(r,function(m){if("CallExpression"===m.type){if("Identifier"===m.callee.type&&"expects"===m.callee.name.toLowerCase()){var v="";for(var x=0;x<(m.arguments||[]).length;x++)0===x?"Identifier"===m.arguments[x].type&&(v=m.arguments[x].name.toLowerCase()):
v&&"Literal"===m.arguments[x].type&&c(m.arguments[x].value)&&q.push(v+"."+m.arguments[x].value.toLowerCase());return!1}if("Identifier"===m.callee.type&&["domainname","domaincode","domain","haskey"].includes(m.callee.name.toLowerCase())&&2<=m.arguments.length)return v="","Identifier"===m.arguments[0].type&&(v=m.arguments[0].name.toLowerCase()),v&&"Literal"===m.arguments[1].type&&c(m.arguments[1].value)&&q.push(v+"."+m.arguments[1].value.toLowerCase()),!1}if("MemberExpression"!==m.type||"Identifier"!==
m.object.type)return!0;!1===m.computed&&m.object&&m.object.name&&m.property&&"Identifier"===m.property.type&&m.property.name?q.push(m.object.name.toLowerCase()+"."+m.property.name.toLowerCase()):m.object&&m.object.name&&m.property&&"Literal"===m.property.type&&"string"===typeof m.property.value&&q.push(m.object.name.toLowerCase()+"."+(null===(v=m.property.value)||void 0===v?void 0:v.toString().toLowerCase()));return!1});return q};t.extractFunctionDeclaration=function(r,q){var m=[];if(void 0!==q.params&&
null!==q.params)for(var v=0;v<q.params.length;v++)m.push("any");return{name:r,return:"any",params:m}};t.findFunctionCalls=l;t.findScriptDependencies=function(r,q){void 0===q&&(q=[]);var m=null;if(void 0===r.usesFeatureSet){null===m&&(m=l(r));r.usesFeatureSet=!1;for(var v=0;v<m.length;v++)u.includes(m[v])&&(r.usesFeatureSet=!0,r.isAsync=!0);if(!1===r.usesFeatureSet&&q&&0<q.length)for(v=0;v<q.length;v++)if(d(r,q[v])){r.usesFeatureSet=!0;r.isAsync=!0;break}}void 0===r.usesModules&&(r.usesModules=!1,
0<e(r).length&&(r.usesModules=!0));if(void 0===r.usesGeometry)for(r.usesGeometry=!1,null===m&&(m=l(r)),v=0;v<m.length;v++)p.includes(m[v])&&(r.usesGeometry=!0)};t.scriptUsesFeatureSet=function(r){r=l(r);for(var q=0;q<r.length;q++)if(u.includes(r[q]))return!0;return!1}})},"esri/arcade/functions/array":function(){define("require exports ../polyfill/tsSupport/awaiter ../polyfill/tsSupport/generator ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../executionError ../ImmutableArray ../languageUtils ../polyfill/promiseUtils".split(" "),
function(g,t,a,b,c,k,h,d,e,l){Object.defineProperty(t,"__esModule",{value:!0});t.registerFunctions=void 0;t.registerFunctions=function(f){function n(m,v,x){if(m instanceof d)return m.toArray();if(e.isArray(m))return m;throw new h.ArcadeExecutionError(v,h.ExecutionErrorCodes.InvalidParameter,x);}function u(m,v){var x=m.length,z=Math.floor(x/2);if(0===x)return[];if(1===x)return[m[0]];var A=u(m.slice(0,z),v);m=u(m.slice(z,x),v);for(x=[];0<A.length||0<m.length;)0<A.length&&0<m.length?(z=v(A[0],m[0]),
isNaN(z)&&(z=0),0>=z?(x.push(A[0]),A=A.slice(1)):(x.push(m[0]),m=m.slice(1))):0<A.length?(x.push(A[0]),A=A.slice(1)):0<m.length&&(x.push(m[0]),m=m.slice(1));return x}function p(m,v){return a(this,void 0,void 0,function(){var x,z,A,C;return b(this,function(D){switch(D.label){case 0:return x=m.length,z=Math.floor(x/2),0===x?[2,[]]:1===x?[2,[m[0]]]:[4,p(m.slice(0,z),v)];case 1:return C=[D.sent()],[4,p(m.slice(z,x),v)];case 2:return A=C.concat([D.sent()]),[2,r(A[0],A[1],v,[])]}})})}function r(m,v,x,z){return a(this,
void 0,void 0,function(){var A,C;return b(this,function(D){switch(D.label){case 0:return A=z,0<m.length||0<v.length?0<m.length&&0<v.length?[4,x(m[0],v[0])]:[3,2]:[3,4];case 1:return C=D.sent(),isNaN(C)&&(C=1),0>=C?(A.push(m[0]),m=m.slice(1)):(A.push(v[0]),v=v.slice(1)),[2,r(m,v,x,z)];case 2:if(0<m.length)return A.push(m[0]),m=m.slice(1),[2,r(m,v,x,z)];if(0<v.length)return A.push(v[0]),v=v.slice(1),[2,r(m,v,x,z)];D.label=3;case 3:return[3,5];case 4:return[2,z];case 5:return[2]}})})}function q(m,v,
x,z){e.pcCheck(x,1,2,m,v);var A=x[0];e.isImmutableArray(A)&&(A=A.toArray());if(!1===e.isArray(A))throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.InvalidParameter,v);if(1<x.length){if(!1===e.isFunctionParameter(x[1]))throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.InvalidParameter,v);var C=A,D=x[1].createFunction(m);return z?p(C,D):C=u(C,function(B,y){return D(B,y)})}m=A;if(0===m.length)return[];x={};for(z=0;z<m.length;z++)v=e.getType(m[z]),""!==v&&(x[v]=!0);if(!0===x.Array||!0===
x.Dictionary||!0===x.Feature||!0===x.Point||!0===x.Polygon||!0===x.Polyline||!0===x.Multipoint||!0===x.Extent||!0===x.Function)return m.slice(0);z=0;v="";for(C in x)z++,v=C;return m=1<z||"String"===v?u(m,function(B,y){if(null===B||void 0===B||B===e.voidOperation)return null===y||void 0===y||y===e.voidOperation?0:1;if(null===y||void 0===y||y===e.voidOperation)return-1;B=e.toString(B);y=e.toString(y);return B<y?-1:B===y?0:1}):"Number"===v?u(m,function(B,y){return B-y}):"Boolean"===v?u(m,function(B,
y){return B===y?0:y?-1:1}):"Date"===v?u(m,function(B,y){return y-B}):m.slice(0)}f.functions.array=function(m,v){return f.standardFunction(m,v,function(x,z,A){e.pcCheck(A,1,2,m,v);x=e.toNumber(A[0]);if(isNaN(x)||!1===e.isInteger(x))throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.InvalidParameter,v);A=e.defaultUndefined(A[1],null);x=Array(x);x.fill(A);return x})};f.functions.front=function(m,v){return f.standardFunction(m,v,function(x,z,A){e.pcCheck(A,1,1,m,v);if(e.isImmutableArray(A[0])){if(0>=
A[0].length())throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.OutOfBounds,v);return A[0].get(0)}if(e.isArray(A[0])){if(0>=A[0].length)throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.OutOfBounds,v);return A[0][0]}throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.InvalidParameter,v);})};f.functions.back=function(m,v){return f.standardFunction(m,v,function(x,z,A){e.pcCheck(A,1,1,m,v);if(e.isImmutableArray(A[0])){if(0>=A[0].length())throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.OutOfBounds,
v);return A[0].get(A[0].length()-1)}if(e.isArray(A[0])){if(0>=A[0].length)throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.OutOfBounds,v);return A[0][A[0].length-1]}throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.InvalidParameter,v);})};f.functions.push=function(m,v){return f.standardFunction(m,v,function(x,z,A){e.pcCheck(A,1,2,m,v);if(e.isArray(A[0]))return A[0][A[0].length]=A[1],A[0].length;throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.InvalidParameter,v);})};f.functions.pop=
function(m,v){return f.standardFunction(m,v,function(x,z,A){e.pcCheck(A,1,1,m,v);if(e.isArray(A[0])){if(0>=A[0].length)throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.OutOfBounds,v);x=A[0][A[0].length-1];--A[0].length;return x}throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.InvalidParameter,v);})};f.functions.erase=function(m,v){return f.standardFunction(m,v,function(x,z,A){e.pcCheck(A,2,2,m,v);if(e.isArray(A[0])){x=e.toNumber(A[1]);if(isNaN(x)||!1===e.isInteger(x))throw new h.ArcadeExecutionError(m,
h.ExecutionErrorCodes.InvalidParameter,v);A=A[0];if(0>=A.length)throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.OutOfBounds,v);0>x&&(x=A.length+x);if(0>x)throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.OutOfBounds,v);if(x>=A.length)throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.OutOfBounds,v);A.splice(x,1);return e.voidOperation}throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.InvalidParameter,v);})};f.functions.insert=function(m,v){return f.standardFunction(m,
v,function(x,z,A){e.pcCheck(A,3,3,m,v);if(e.isArray(A[0])){x=e.toNumber(A[1]);if(isNaN(x)||!1===e.isInteger(x))throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.InvalidParameter,v);z=A[2];A=A[0];if(x>A.length)throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.OutOfBounds,v);if(0>x&&x<-1*A.length)throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.OutOfBounds,v);if(x===A.length)return A[x]=z,e.voidOperation;A.splice(x,0,z);return e.voidOperation}throw new h.ArcadeExecutionError(m,
h.ExecutionErrorCodes.InvalidParameter,v);})};f.functions.resize=function(m,v){return f.standardFunction(m,v,function(x,z,A){e.pcCheck(A,2,3,m,v);if(e.isArray(A[0])){z=e.toNumber(A[1]);if(isNaN(z)||!1===e.isInteger(z))throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.InvalidParameter,v);if(0>z)throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.InvalidParameter,v);x=e.defaultUndefined(A[2],null);A=A[0];if(A.length>=z)return A.length=z,e.voidOperation;var C=A.length;A.length=z;for(z=C;z<
A.length;z++)A[z]=x;return e.voidOperation}throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.InvalidParameter,v);})};f.functions.includes=function(m,v){return f.standardFunction(m,v,function(x,z,A){e.pcCheck(A,2,2,m,v);if(e.isArray(A[0])){var C=A[1];x=A[0];return-1<x.findIndex(function(B){return e.equalityTest(B,C)})?!0:!1}if(e.isImmutableArray(A[0])){var D=A[1];x=A[0].toArray();return-1<x.findIndex(function(B){return e.equalityTest(B,D)})?!0:!1}throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.InvalidParameter,
v);})};f.functions.slice=function(m,v){return f.standardFunction(m,v,function(x,z,A){e.pcCheck(A,1,3,m,v);if(e.isArray(A[0])){x=e.toNumber(e.defaultUndefined(A[1],0));z=e.toNumber(e.defaultUndefined(A[2],A[0].length));if(isNaN(x)||!1===e.isInteger(x))throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.InvalidParameter,v);if(isNaN(z)||!1===e.isInteger(z))throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.InvalidParameter,v);var C=A[0];return C.slice(x,z)}if(e.isImmutableArray(A[0])){C=A[0];
x=e.toNumber(e.defaultUndefined(A[1],0));z=e.toNumber(e.defaultUndefined(A[2],C.length()));if(isNaN(x)||!1===e.isInteger(x))throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.InvalidParameter,v);if(isNaN(z)||!1===e.isInteger(z))throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.InvalidParameter,v);return C.toArray().slice(x,z)}throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.InvalidParameter,v);})};f.functions.splice=function(m,v){return f.standardFunction(m,v,function(x,z,A){x=
[];for(z=0;z<A.length;z++)e.isArray(A[z])?x.push.apply(x,A[z]):e.isImmutableArray(A[z])?x.push.apply(x,A[z].toArray()):x.push(A[z]);return x})};f.functions.top=function(m,v){return f.standardFunction(m,v,function(x,z,A){e.pcCheck(A,2,2,m,v);if(e.isArray(A[0]))return e.toNumber(A[1])>=A[0].length?A[0].slice(0):A[0].slice(0,e.toNumber(A[1]));if(e.isImmutableArray(A[0]))return e.toNumber(A[1])>=A[0].length()?A[0].slice(0):A[0].slice(0,e.toNumber(A[1]));throw new h.ArcadeExecutionError(m,h.ExecutionErrorCodes.InvalidParameter,
v);})};f.functions.first=function(m,v){return f.standardFunction(m,v,function(x,z,A){e.pcCheck(A,1,1,m,v);return e.isArray(A[0])?0===A[0].length?null:A[0][0]:e.isImmutableArray(A[0])?0===A[0].length()?null:A[0].get(0):null})};"sync"===f.mode&&(f.functions.sort=function(m,v){return f.standardFunction(m,v,function(x,z,A){return q(m,v,A,!1)})},f.functions.any=function(m,v){return f.standardFunction(m,v,function(x,z,A){e.pcCheck(A,2,2,m,v);x=A[1].createFunction(m);z=0;for(A=n(A[0],m,v);z<A.length;z++){var C=
x(A[z]);if(e.isBoolean(C)&&!0===C)return!0}return!1})},f.functions.all=function(m,v){return f.standardFunction(m,v,function(x,z,A){e.pcCheck(A,2,2,m,v);x=A[1].createFunction(m);z=0;for(A=n(A[0],m,v);z<A.length;z++)if(!0!==x(A[z]))return!1;return!0})},f.functions.none=function(m,v){return f.standardFunction(m,v,function(x,z,A){e.pcCheck(A,2,2,m,v);x=A[1].createFunction(m);z=0;for(A=n(A[0],m,v);z<A.length;z++)if(!0===x(A[z]))return!1;return!0})},f.functions.reduce=function(m,v){return f.standardFunction(m,
v,function(x,z,A){e.pcCheck(A,2,3,m,v);var C=A[1].createFunction(m);x=n(A[0],m,v);return 2===A.length?0===x.length?null:x.reduce(function(D,B){D=C(D,B);return D=void 0!==D&&D!==e.voidOperation?D:null}):x.reduce(function(D,B){D=C(D,B);return D=void 0!==D&&D!==e.voidOperation?D:null},A[2])})},f.functions.map=function(m,v){return f.standardFunction(m,v,function(x,z,A){e.pcCheck(A,2,2,m,v);x=A[1].createFunction(m);z=[];var C=0;for(A=n(A[0],m,v);C<A.length;C++){var D=x(A[C]);void 0!==D&&D!==e.voidOperation?
z.push(D):z.push(null)}return z})},f.functions.filter=function(m,v){return f.standardFunction(m,v,function(x,z,A){e.pcCheck(A,2,2,m,v);x=A[1].createFunction(m);z=[];var C=0;for(A=n(A[0],m,v);C<A.length;C++){var D=A[C];!0===x(D)&&z.push(D)}return z})});"async"===f.mode&&(f.functions.sort=function(m,v){return f.standardFunctionAsync(m,v,function(x,z,A){return q(m,v,A,!0)})},f.functions.any=function(m,v){var x=this;return f.standardFunctionAsync(m,v,function(z,A,C){return a(x,void 0,void 0,function(){var D,
B,y,w,E,F,H;return b(this,function(M){switch(M.label){case 0:e.pcCheck(C,2,2,m,v),D=C[1].createFunction(m),B=n(C[0],m,v),y=0,w=B,M.label=1;case 1:if(!(y<w.length))return[3,7];E=w[y];return[4,D(E)];case 2:return F=M.sent(),H=null,l.isPromiseLike(H)?[4,F]:[3,4];case 3:return H=M.sent(),[3,5];case 4:H=F,M.label=5;case 5:if(e.isBoolean(H)&&!0===H)return[2,!0];M.label=6;case 6:return y++,[3,1];case 7:return[2,!1]}})})})},f.functions.all=function(m,v){var x=this;return f.standardFunctionAsync(m,v,function(z,
A,C){return a(x,void 0,void 0,function(){var D,B,y,w,E,F,H;return b(this,function(M){switch(M.label){case 0:e.pcCheck(C,2,2,m,v),D=C[1].createFunction(m),B=n(C[0],m,v),y=0,w=B,M.label=1;case 1:if(!(y<w.length))return[3,7];E=w[y];return[4,D(E)];case 2:return F=M.sent(),H=null,l.isPromiseLike(H)?[4,F]:[3,4];case 3:return H=M.sent(),[3,5];case 4:H=F,M.label=5;case 5:if(!0!==H)return[2,!1];M.label=6;case 6:return y++,[3,1];case 7:return[2,!0]}})})})},f.functions.none=function(m,v){var x=this;return f.standardFunctionAsync(m,
v,function(z,A,C){return a(x,void 0,void 0,function(){var D,B,y,w,E,F,H;return b(this,function(M){switch(M.label){case 0:e.pcCheck(C,2,2,m,v),D=C[1].createFunction(m),B=n(C[0],m,v),y=0,w=B,M.label=1;case 1:if(!(y<w.length))return[3,7];E=w[y];return[4,D(E)];case 2:return F=M.sent(),H=null,l.isPromiseLike(H)?[4,F]:[3,4];case 3:return H=M.sent(),[3,5];case 4:H=F,M.label=5;case 5:if(!0===H)return[2,!1];M.label=6;case 6:return y++,[3,1];case 7:return[2,!0]}})})})},f.functions.filter=function(m,v){var x=
this;return f.standardFunctionAsync(m,v,function(z,A,C){return a(x,void 0,void 0,function(){var D,B,y,w,E,F,H,M;return b(this,function(R){switch(R.label){case 0:e.pcCheck(C,2,2,m,v),D=C[1].createFunction(m),B=n(C[0],m,v),y=[],w=0,E=B,R.label=1;case 1:if(!(w<E.length))return[3,7];F=E[w];return[4,D(F)];case 2:return H=R.sent(),M=null,l.isPromiseLike(M)?[4,H]:[3,4];case 3:return M=R.sent(),[3,5];case 4:M=H,R.label=5;case 5:!0===M&&y.push(F),R.label=6;case 6:return w++,[3,1];case 7:return[2,y]}})})})},
f.functions.reduce=function(m,v){var x=this;return f.standardFunctionAsync(m,v,function(z,A,C){e.pcCheck(C,2,3,m,v);var D=C[1].createFunction(m);z=n(C[0],m,v);A=null;if(2<C.length)C=e.defaultUndefined(C[2],null),A=z.reduce(function(B,y){return a(x,void 0,void 0,function(){var w;return b(this,function(E){switch(E.label){case 0:return[4,B];case 1:w=E.sent();if(void 0===w||w===e.voidOperation)w=null;return[2,D(w,y)]}})})},Promise.resolve(C));else{if(0===z.length)return null;A=z.reduce(function(B,y,w){return a(x,
void 0,void 0,function(){var E;return b(this,function(F){switch(F.label){case 0:return 1>=w?[2,D(B,y)]:[4,B];case 1:E=F.sent();if(void 0===E||E===e.voidOperation)E=null;return[2,D(E,y)]}})})})}return A.then(function(B){return void 0!==B&&B!==e.voidOperation?B:null})})},f.functions.map=function(m,v){var x=this;return f.standardFunctionAsync(m,v,function(z,A,C){return a(x,void 0,void 0,function(){var D,B,y,w,E,F,H,M;return b(this,function(R){switch(R.label){case 0:e.pcCheck(C,2,2,m,v),D=C[1].createFunction(m),
B=n(C[0],m,v),y=[],w=0,E=B,R.label=1;case 1:if(!(w<E.length))return[3,7];F=E[w];return[4,D(F)];case 2:return H=R.sent(),M=null,l.isPromiseLike(M)?[4,H]:[3,4];case 3:return M=R.sent(),[3,5];case 4:M=H,R.label=5;case 5:void 0!==M&&M!==e.voidOperation?y.push(M):y.push(null),R.label=6;case 6:return w++,[3,1];case 7:return[2,y]}})})})})}})},"esri/arcade/functions/date":function(){define("require exports ../ArcadeDate ../languageUtils ../executionError ../../libs/luxon/luxon dojo/_base/kernel".split(" "),
function(g,t,a,b,c,k,h){function d(n){return null===n?n:!1===n.isValid?null:n}function e(n,u){return""===n||"default"===n.toLowerCase().trim()?b.defaultTimeZone(u):n}Object.defineProperty(t,"__esModule",{value:!0});t.registerFunctions=void 0;var l=[0,31,59,90,120,151,181,212,243,273,304,334],f=[0,31,60,91,121,152,182,213,244,274,305,335];t.registerFunctions=function(n,u){n.today=function(p,r){return u(p,r,function(q,m,v){b.pcCheck(v,0,0,p,r);q=new Date;q.setHours(0,0,0,0);return a.ArcadeDate.dateJSAndZoneToArcadeDate(q,
b.defaultTimeZone(p))})};n.changetimezone=function(p,r){return u(p,r,function(q,m,v){b.pcCheck(v,2,2,p,r);q=b.toDate(v[0],b.defaultTimeZone(p));if(null===q)return null;v=a.ArcadeDate.arcadeDateAndZoneToArcadeDate(q,e(b.toString(v[1]),p));return!1===v.isValid?null:v})};n.timezone=function(p,r){return u(p,r,function(q,m,v){b.pcCheck(v,1,2,p,r);q=b.toDate(v[0],b.defaultTimeZone(p));if(null===q)return null;q=q.timeZone;return"system"===q?a.ArcadeDate.systemTimeZoneCanonicalName:q})};n.timezoneoffset=
function(p,r){return u(p,r,function(q,m,v){b.pcCheck(v,1,1,p,r);q=b.toDate(v[0],b.defaultTimeZone(p));return null===q?null:q.timeZoneOffset})};n.now=function(p,r){return u(p,r,function(q,m,v){b.pcCheck(v,0,0,p,r);q=a.ArcadeDate.nowToArcadeDate(b.defaultTimeZone(p));return!1===q.isValid?null:q})};n.timestamp=function(p,r){return u(p,r,function(q,m,v){b.pcCheck(v,0,0,p,r);q=a.ArcadeDate.nowUTCToArcadeDate();return!1===q.isValid?null:q})};n.toutc=function(p,r){return u(p,r,function(q,m,v){b.pcCheck(v,
1,1,p,r);q=b.toDate(v[0],b.defaultTimeZone(p));return null===q?null:q.toUTC()})};n.tolocal=function(p,r){return u(p,r,function(q,m,v){b.pcCheck(v,1,1,p,r);q=b.toDate(v[0],b.defaultTimeZone(p));return null===q?null:q.toLocal()})};n.day=function(p,r){return u(p,r,function(q,m,v){b.pcCheck(v,1,1,p,r);q=b.toDate(v[0],b.defaultTimeZone(p));return null===q?NaN:q.day})};n.month=function(p,r){return u(p,r,function(q,m,v){b.pcCheck(v,1,1,p,r);q=b.toDate(v[0],b.defaultTimeZone(p));return null===q?NaN:q.monthJS})};
n.year=function(p,r){return u(p,r,function(q,m,v){b.pcCheck(v,1,1,p,r);q=b.toDate(v[0],b.defaultTimeZone(p));return null===q?NaN:q.year})};n.hour=function(p,r){return u(p,r,function(q,m,v){b.pcCheck(v,1,1,p,r);q=b.toDate(v[0],b.defaultTimeZone(p));return null===q?NaN:q.hour})};n.second=function(p,r){return u(p,r,function(q,m,v){b.pcCheck(v,1,1,p,r);q=b.toDate(v[0],b.defaultTimeZone(p));return null===q?NaN:q.second})};n.millisecond=function(p,r){return u(p,r,function(q,m,v){b.pcCheck(v,1,1,p,r);q=
b.toDate(v[0],b.defaultTimeZone(p));return null===q?NaN:q.millisecond})};n.minute=function(p,r){return u(p,r,function(q,m,v){b.pcCheck(v,1,1,p,r);q=b.toDate(v[0],b.defaultTimeZone(p));return null===q?NaN:q.minute})};n.week=function(p,r){return u(p,r,function(q,m,v){b.pcCheck(v,1,2,p,r);m=b.toDate(v[0],b.defaultTimeZone(p));if(null===m)return NaN;v=b.toNumber(b.defaultUndefined(v[1],0));if(0>v||6<v)throw new c.ArcadeExecutionError(p,c.ExecutionErrorCodes.InvalidParameter,r);q=m.dayOfWeekJS;var x=m.year;
m=m.day+(0!==x%4||0===x%100&&0!==x%400?l:f)[m.monthJS]-1;x=Math.floor(m/7);return q-v+(0>q-v?7:0)<m-7*x?x+1:x})};n.weekday=function(p,r){return u(p,r,function(q,m,v){b.pcCheck(v,1,1,p,r);q=b.toDate(v[0],b.defaultTimeZone(p));return null===q?NaN:q.dayOfWeekJS})};n.isoweekday=function(p,r){return u(p,r,function(q,m,v){b.pcCheck(v,1,1,p,r);q=b.toDate(v[0],b.defaultTimeZone(p));return null===q?NaN:q.dayOfWeekISO})};n.isomonth=function(p,r){return u(p,r,function(q,m,v){b.pcCheck(v,1,1,p,r);q=b.toDate(v[0],
b.defaultTimeZone(p));return null===q?NaN:q.monthISO})};n.isoweek=function(p,r){return u(p,r,function(q,m,v){b.pcCheck(v,1,1,p,r);q=b.toDate(v[0],b.defaultTimeZone(p));return null===q?NaN:q.weekISO})};n.isoyear=function(p,r){return u(p,r,function(q,m,v){b.pcCheck(v,1,1,p,r);q=b.toDate(v[0],b.defaultTimeZone(p));return null===q?NaN:q.yearISO})};n.date=function(p,r){return u(p,r,function(q,m,v){b.pcCheck(v,0,8,p,r);if(3===v.length)return d(a.ArcadeDate.fromParts(b.toNumber(v[0]),b.toNumber(v[1])+1,
b.toNumber(v[2]),0,0,0,0,b.defaultTimeZone(p)));if(4===v.length)return d(a.ArcadeDate.fromParts(b.toNumber(v[0]),b.toNumber(v[1])+1,b.toNumber(v[2]),b.toNumber(v[3]),0,0,0,b.defaultTimeZone(p)));if(5===v.length)return d(a.ArcadeDate.fromParts(b.toNumber(v[0]),b.toNumber(v[1])+1,b.toNumber(v[2]),b.toNumber(v[3]),b.toNumber(v[4]),0,0,b.defaultTimeZone(p)));if(6===v.length)return d(a.ArcadeDate.fromParts(b.toNumber(v[0]),b.toNumber(v[1])+1,b.toNumber(v[2]),b.toNumber(v[3]),b.toNumber(v[4]),b.toNumber(v[5]),
0,b.defaultTimeZone(p)));if(7===v.length)return d(a.ArcadeDate.fromParts(b.toNumber(v[0]),b.toNumber(v[1])+1,b.toNumber(v[2]),b.toNumber(v[3]),b.toNumber(v[4]),b.toNumber(v[5]),b.toNumber(v[6]),b.defaultTimeZone(p)));if(8===v.length)return d(a.ArcadeDate.fromParts(b.toNumber(v[0]),b.toNumber(v[1])+1,b.toNumber(v[2]),b.toNumber(v[3]),b.toNumber(v[4]),b.toNumber(v[5]),b.toNumber(v[6]),e(b.toString(v[7]),p)));if(2===v.length){q=b.toString(v[1]);if(""===q)return null;q=b.standardiseDateFormat(q);m=void 0;
m="X"===q?k.DateTime.fromSeconds(b.toNumber(v[0])):"x"===q?k.DateTime.fromMillis(b.toNumber(v[0])):k.DateTime.fromFormat(b.toString(v[0]),q,{locale:h.locale,numberingSystem:"latn"});return m.isValid?a.ArcadeDate.dateTimeToArcadeDate(m):null}if(1===v.length){if(b.isString(v[0])){if(""===v[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(v[0]))return b.toDate(v[0]+"-01-01",b.defaultTimeZone(p))}q=b.toNumber(v[0]);return!1===isNaN(q)?(m=k.DateTime.fromMillis(q),
m.isValid?a.ArcadeDate.dateTimeAndZoneToArcadeDate(m,b.defaultTimeZone(p)):null):b.toDate(v[0],b.defaultTimeZone(p))}return 0===v.length?a.ArcadeDate.nowToArcadeDate(b.defaultTimeZone(p)):null})};n.datediff=function(p,r){return u(p,r,function(q,m,v){b.pcCheck(v,2,4,p,r);q=b.toDate(v[0],b.defaultTimeZone(p));m=b.toDate(v[1],b.defaultTimeZone(p));if(null===q||null===m)return NaN;var x=b.defaultUndefined(v[3],"");""!==x&&null!==x?(x=b.toString(x),q=a.ArcadeDate.arcadeDateAndZoneToArcadeDate(q,x),m=a.ArcadeDate.arcadeDateAndZoneToArcadeDate(m,
x)):q.timeZone!==m.timeZone&&(q.isUnknownTimeZone?q=a.ArcadeDate.arcadeDateAndZoneToArcadeDate(q,m.timeZone):m=a.ArcadeDate.arcadeDateAndZoneToArcadeDate(m,q.timeZone));switch(b.toString(v[2]).toLowerCase()){case "days":case "day":case "d":return q.diff(m,"days");case "months":case "month":return q.diff(m,"months");case "minutes":case "minute":case "m":return"M"===v[2]?q.diff(m,"months"):q.diff(m,"minutes");case "seconds":case "second":case "s":return q.diff(m,"seconds");case "milliseconds":case "millisecond":case "ms":return q.diff(m);
case "hours":case "hour":case "h":return q.diff(m,"hours");case "years":case "year":case "y":return q.diff(m,"years");default:return q.diff(m)}})};n.dateadd=function(p,r){return u(p,r,function(q,m,v){var x;b.pcCheck(v,2,3,p,r);q=b.toDate(v[0],b.defaultTimeZone(p));if(null===q)return null;m=b.toNumber(v[1]);if(isNaN(m))return q;var z="milliseconds";switch(b.toString(v[2]).toLowerCase()){case "days":case "day":case "d":z="days";m=b.absRound(m);break;case "months":case "month":z="months";m=b.absRound(m);
break;case "minutes":case "minute":case "m":z="M"===v[2]?"months":"minutes";break;case "seconds":case "second":case "s":z="seconds";break;case "milliseconds":case "millisecond":case "ms":z="milliseconds";break;case "hours":case "hour":case "h":z="hours";break;case "years":case "year":case "y":z="years"}return q.plus((x={},x[z]=m,x))})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/jsonUtils ../executionError ../ImmutablePathArray".split(" "),
function(g,t,a,b,c,k,h,d,e,l,f,n,u,p,r,q,m,v){function x(C){return C&&"esri.arcade.Feature"===C.arcadeDeclaredClass}function z(C,D,B,y,w){void 0===w&&(w=1);D=D.toLowerCase();switch(D){case "hasz":return C=C.hasZ,void 0===C?!1:C;case "hasm":return C=C.hasM,void 0===C?!1:C;case "spatialreference":return D=C.spatialReference._arcadeCacheId,void 0===D&&(B=!0,Object.freeze&&Object.isFrozen(C.spatialReference)&&(B=!1),B&&(A++,D=C.spatialReference._arcadeCacheId=A)),C=new c({wkt:C.spatialReference.wkt,wkid:C.spatialReference.wkid}),
void 0!==D&&(C._arcadeCacheId="SPREF"+D.toString()),C}switch(C.type){case "extent":switch(D){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return C=C[D],void 0!==C?C:null;case "type":return"Extent"}break;case "polygon":switch(D){case "rings":return D=C.getCacheValue("_arcadeCacheId"),void 0===D&&(A++,D=A,C.setCacheValue("_arcadeCacheId",D)),C=new v(C.rings,C.spatialReference,!0===C.hasZ,!0===C.hasM,D);case "type":return"Polygon"}break;case "point":switch(D){case "x":case "y":case "z":case "m":return void 0!==
C[D]?C[D]:null;case "type":return"Point"}break;case "polyline":switch(D){case "paths":return D=C.getCacheValue("_arcadeCacheId"),void 0===D&&(A++,D=A,C.setCacheValue("_arcadeCacheId",D)),C=new v(C.paths,C.spatialReference,!0===C.hasZ,!0===C.hasM,D);case "type":return"Polyline"}break;case "multipoint":switch(D){case "points":return D=C.getCacheValue("_arcadeCacheId"),void 0===D&&(A++,D=A,C.setCacheValue("_arcadeCacheId",D)),C=new h(C.points,C.spatialReference,!0===C.hasZ,!0===C.hasM,D,1);case "type":return"Multipoint"}}if(1===
w)throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.InvalidIdentifier,y);return 2===w?{keystate:"notfound"}:null}Object.defineProperty(t,"__esModule",{value:!0});t.geometryMember=t.registerFunctions=void 0;t.registerFunctions=function(C,D){C.ringisclockwise=function(B,y){return D(B,y,function(w,E,F){d.pcCheck(F,1,1,B,y);w=[];if(null===F[0])return!1;if(d.isArray(F[0])){var H=0;for(F=F[0];H<F.length;H++)if(E=F[H],E instanceof n)w.push([E.x,E.y]);else throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.InvalidParameter,
y);}else if(F[0]instanceof h)w=F[0]._elements;else if(d.isImmutableArray(F[0])){H=0;for(var M=F[0].toArray();H<M.length;H++)if(E=M[H],E instanceof n)w.push([E.x,E.y]);else throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.InvalidParameter,y);0<w.length&&(F[0].get(0),F[0].get(0))}else throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.InvalidParameter,y);return 3>w.length?!1:(new u({rings:[],spatialReference:{wkid:4326}})).isClockwise(w)})};C.polygon=function(B,y){return D(B,y,function(w,
E,F){d.pcCheck(F,1,1,B,y);w=null;if(F[0]instanceof c){if(w=d.fixSpatialReference(k.parseGeometryFromDictionary(F[0]),B.spatialReference),!1===w instanceof u)throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.InvalidParameter,y);}else w=F[0]instanceof u?q.fromJson(F[0].toJson()):d.fixSpatialReference(new u(JSON.parse(F[0])),B.spatialReference);if(null!==w&&!1===w.spatialReference.equals(B.spatialReference))throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.WrongSpatialReference,y);return d.fixNullGeometry(w)})};
C.polyline=function(B,y){return D(B,y,function(w,E,F){d.pcCheck(F,1,1,B,y);w=null;if(F[0]instanceof c){if(w=d.fixSpatialReference(k.parseGeometryFromDictionary(F[0]),B.spatialReference),!1===w instanceof p)throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.InvalidParameter,y);}else w=F[0]instanceof p?q.fromJson(F[0].toJson()):d.fixSpatialReference(new p(JSON.parse(F[0])),B.spatialReference);if(null!==w&&!1===w.spatialReference.equals(B.spatialReference))throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.WrongSpatialReference,
y);return d.fixNullGeometry(w)})};C.point=function(B,y){return D(B,y,function(w,E,F){d.pcCheck(F,1,1,B,y);w=null;if(F[0]instanceof c){if(w=d.fixSpatialReference(k.parseGeometryFromDictionary(F[0]),B.spatialReference),!1===w instanceof n)throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.InvalidParameter,y);}else w=F[0]instanceof n?q.fromJson(F[0].toJson()):d.fixSpatialReference(new n(JSON.parse(F[0])),B.spatialReference);if(null!==w&&!1===w.spatialReference.equals(B.spatialReference))throw new m.ArcadeExecutionError(B,
m.ExecutionErrorCodes.WrongSpatialReference,y);return d.fixNullGeometry(w)})};C.multipoint=function(B,y){return D(B,y,function(w,E,F){d.pcCheck(F,1,1,B,y);w=null;if(F[0]instanceof c){if(w=d.fixSpatialReference(k.parseGeometryFromDictionary(F[0]),B.spatialReference),!1===w instanceof f)throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.InvalidParameter,y);}else w=F[0]instanceof f?q.fromJson(F[0].toJson()):d.fixSpatialReference(new f(JSON.parse(F[0])),B.spatialReference);if(null!==w&&!1===w.spatialReference.equals(B.spatialReference))throw new m.ArcadeExecutionError(B,
m.ExecutionErrorCodes.WrongSpatialReference,y);return d.fixNullGeometry(w)})};C.extent=function(B,y){return D(B,y,function(w,E,F){F=d.autoCastFeatureToGeometry(F);d.pcCheck(F,1,1,B,y);w=null;F[0]instanceof c?w=d.fixSpatialReference(k.parseGeometryFromDictionary(F[0]),B.spatialReference):F[0]instanceof n?(w={xmin:F[0].x,ymin:F[0].y,xmax:F[0].x,ymax:F[0].y,spatialReference:F[0].spatialReference.toJson()},F=F[0],F.hasZ?(w.zmin=F.z,w.zmax=F.z):F.hasM&&(w.mmin=F.m,w.mmax=F.m),w=q.fromJson(w)):w=F[0]instanceof
u?q.fromJson(F[0].getExtent().toJson()):F[0]instanceof p?q.fromJson(F[0].getExtent().toJson()):F[0]instanceof f?q.fromJson(F[0].getExtent().toJson()):F[0]instanceof e?q.fromJson(F[0].toJson()):d.fixSpatialReference(new e(JSON.parse(F[0])),B.spatialReference);if(null!==w&&!1===w.spatialReference.equals(B.spatialReference))throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.WrongSpatialReference,y);return d.fixNullGeometry(w)})};C.geometry=function(B,y){return D(B,y,function(w,E,F){d.pcCheck(F,
1,1,B,y);w=null;if(null===F[0])return null;w=x(F[0])?d.fixSpatialReference(F[0].geometry(),B.spatialReference):F[0]instanceof c?d.fixSpatialReference(k.parseGeometryFromDictionary(F[0]),B.spatialReference):d.fixSpatialReference(q.fromJson(JSON.parse(F[0])),B.spatialReference);if(null!==w&&!1===w.spatialReference.equals(B.spatialReference))throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.WrongSpatialReference,y);return d.fixNullGeometry(w)})};C.setgeometry=function(B,y){return D(B,y,function(w,
E,F){d.pcCheck(F,2,2,B,y);if(x(F[0])){if(!0===F[0].immutable)throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.Immutable,y);if(F[1]instanceof l||null===F[1])F[0]._geometry=F[1];else throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.InvalidParameter,y);}else throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.InvalidParameter,y);return d.voidOperation})};C.feature=function(B,y){return D(B,y,function(w,E,F){if(0===F.length)throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.WrongNumberOfParameters,
y);w=null;if(1===F.length)if(d.isString(F[0]))w=k.fromJson(JSON.parse(F[0]),B.timeReference);else if(x(F[0]))w=k.createFromArcadeFeature(F[0]);else if(F[0]instanceof l)w=k.createFromGraphicLikeObject(F[0],null,null,B.timeReference);else if(F[0]instanceof c)w=F[0].hasField("geometry")?F[0].field("geometry"):null,E=F[0].hasField("attributes")?F[0].field("attributes"):null,null!==w&&w instanceof c&&(w=k.parseGeometryFromDictionary(w)),null!==E&&(E=k.parseAttributesFromDictionary(E)),w=k.createFromGraphicLikeObject(w,
E,null,B.timeReference);else throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.InvalidParameter,y);else{if(2===F.length){E=w=null;if(null!==F[0])if(F[0]instanceof l)w=F[0];else if(w instanceof c)w=k.parseGeometryFromDictionary(F[0]);else throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.InvalidParameter,y);if(null!==F[1])if(F[1]instanceof c)E=k.parseAttributesFromDictionary(F[1]);else throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.InvalidParameter,y);}else{w=null;E={};if(null!==
F[0])if(F[0]instanceof l)w=F[0];else if(w instanceof c)w=k.parseGeometryFromDictionary(F[0]);else throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.InvalidParameter,y);for(var H=1;H<F.length;H+=2){var M=d.toString(F[H]),R=F[H+1];if(null===R||void 0===R||d.isString(R)||isNaN(R)||d.isDate(R)||d.isNumber(R)||d.isBoolean(R)){if(d.isFunctionParameter(R)||!1===d.isSimpleType(R))throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.InvalidParameter,y);E[M]=R===d.voidOperation?null:R}else throw new m.ArcadeExecutionError(B,
m.ExecutionErrorCodes.InvalidParameter,y);}}w=k.createFromGraphicLikeObject(w,E,null,B.timeReference)}w._geometry=d.fixSpatialReference(w.geometry(),B.spatialReference);w.immutable=!1;return w})};C.dictionary=function(B,y){return D(B,y,function(w,E,F){if(0===F.length)return F=new c,F.immutable=!1,F;if(1===F.length&&d.isString(F[0]))try{var H=JSON.parse(F[0]),M=c.convertObjectToArcadeDictionary(H,d.defaultTimeZone(B),!1);M.immutable=!1;return M}catch(R){throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.InvalidParameter,
y);}if(0!==F.length%2)throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.WrongNumberOfParameters,y);w={};for(E=0;E<F.length;E+=2)if(H=d.toString(F[E]),M=F[E+1],null===M||void 0===M||d.isString(M)||isNaN(M)||d.isDate(M)||d.isNumber(M)||d.isBoolean(M)||d.isArray(M)||d.isImmutableArray(M)){if(d.isFunctionParameter(M))throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.InvalidParameter,y);w[H]=M===d.voidOperation?null:M}else throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.InvalidParameter,
y);F=new c(w);F.immutable=!1;return F})};C.haskey=function(B,y){return D(B,y,function(w,E,F){d.pcCheck(F,2,2,B,y);w=d.toString(F[1]);if(x(F[0])||F[0]instanceof c)return F[0].hasField(w);if(F[0]instanceof l)return(F=z(F[0],w,null,null,2))&&"notfound"===F.keystate?!1:!0;throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.InvalidParameter,y);})};C.hasvalue=function(B,y){return D(B,y,function(w,E,F){d.pcCheck(F,2,2,B,y);if(null===F[0]||null===F[1])return!1;w=d.toString(F[1]);return d.isFeature(F[0])||
F[0]instanceof c?F[0].hasField(w)&&null!==F[0].field(w)?!0:!1:F[0]instanceof l?null===z(F[0],w,null,null,0)?!1:!0:!1})};C.indexof=function(B,y){return D(B,y,function(w,E,F){d.pcCheck(F,2,2,B,y);w=F[1];if(d.isArray(F[0])){for(E=0;E<F[0].length;E++)if(d.equalityTest(w,F[0][E]))return E;return-1}if(d.isImmutableArray(F[0])){var H=F[0].length();for(E=0;E<H;E++)if(d.equalityTest(w,F[0].get(E)))return E;return-1}throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.InvalidParameter,y);})};C.angle=function(B,
y){return D(B,y,function(w,E,F){F=d.autoCastFeatureToGeometry(F);d.pcCheck(F,2,3,B,y);if(!(F[0]instanceof n))throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.InvalidParameter,y);if(!(F[1]instanceof n))throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.InvalidParameter,y);if(2<F.length&&!(F[2]instanceof n))throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.InvalidParameter,y);return 2===F.length?r.angle2D(F[0],F[1]):r.angleBetween2D(F[0],F[1],F[2])})};C.bearing=function(B,y){return D(B,
y,function(w,E,F){F=d.autoCastFeatureToGeometry(F);d.pcCheck(F,2,3,B,y);if(!(F[0]instanceof n))throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.InvalidParameter,y);if(!(F[1]instanceof n))throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.InvalidParameter,y);if(2<F.length&&!(F[2]instanceof n))throw new m.ArcadeExecutionError(B,m.ExecutionErrorCodes.InvalidParameter,y);return 2===F.length?r.bearing2D(F[0],F[1]):r.bearingBetween2D(F[0],F[1],F[2])})};C.isselfintersecting=function(B,y){return D(B,
y,function(w,E,F){F=d.autoCastFeatureToGeometry(F);d.pcCheck(F,1,1,B,y);w=F[0];if(w instanceof u)return w.isSelfIntersecting(w);if(w instanceof p)return w=w.paths,r.pathsSelfIntersecting(w);if(w instanceof f)for(E=w.points,F=0;F<E.length;F++)for(var H=0;H<E.length;H++)if(H!==F){for(var M=!0,R=0;R<E[F].length;R++)if(E[F][R]!==E[H][R]){M=!1;break}if(!0===M)return!0}return d.isArray(w)||d.isImmutableArray(w)?(w=d.autoCastArrayOfPointsToPolyline(w,B.spatialReference),null!==w&&(w=w.paths),r.pathsSelfIntersecting(w)):
!1})}};var A=0;t.geometryMember=z})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point"],function(g,t,a){function b(f,n,u){var p={x:0,y:0};n&&(p.z=0);u&&(p.m=0);for(var r=0,q=f[0],m=0;m<f.length;m++){var v=f[m];a:if(v.length!==q.length)var x=!1;else{for(x=0;x<v.length;x++)if(v[x]!==q[x]){x=!1;break a}x=!0}if(!1===x){x=c(q,v,n);var z=v,A=n,C=u,D={x:(q[0]+z[0])/2,y:(q[1]+z[1])/2};A&&(D.z=(q[2]+z[2])/2);A&&C?D.m=(q[3]+z[3])/2:C&&(D.m=(q[2]+z[2])/2);q=D;q.x*=
x;q.y*=x;p.x+=q.x;p.y+=q.y;n&&(q.z*=x,p.z+=q.z);u&&(q.m*=x,p.m+=q.m);r+=x;q=v}}0<r?(p.x/=r,p.y/=r,n&&(p.z/=r),u&&(p.m/=r)):(p.x=f[0][0],p.y=f[0][1],n&&(p.z=f[0][2]),u&&n?p.m=f[0][3]:u&&(p.m=f[0][2]));return p}function c(f,n,u){var p=n[0]-f[0];f=n[1]-f[1];return u?(n=n[2]-n[2],Math.sqrt(p*p+f*f+n*n)):Math.sqrt(p*p+f*f)}function k(f,n,u){for(void 0===u&&(u=0);f<u;)f+=n;for(u+=n;f>=u;)f-=n;return f}function h(f,n){return Math.atan2(n.y-f.y,n.x-f.x)}function d(f,n,u){var p=f.x-n.x;f=f.y-n.y;var r=u.x-
n.x;n=u.y-n.y;return Math.atan2(p*n-r*f,p*r+f*n)}function e(f,n,u,p,r){var q=f[0];f=f[1];var m=n[0];n=n[1];var v=u[0],x=u[1];u=p[0]-v;v=q-v;var z=m-q;p=p[1]-x;x=f-x;var A=n-f,C=p*z-u*A;if(0===C)return!1;u=(u*x-p*v)/C;v=(z*x-A*v)/C;return 0<=u&&1>=u&&0<=v&&1>=v?(r&&(r[0]=q+u*(m-q),r[1]=f+u*(n-f)),!0):!1}Object.defineProperty(t,"__esModule",{value:!0});t.pathsSelfIntersecting=t.bearingBetween2D=t.angleBetween2D=t.angleBetweenRad=t.bearing2D=t.angle2D=t.angleRad=t.centroidMultiPoint=t.centroidPolyline=
void 0;t.centroidPolyline=function(f){for(var n={x:0,y:0,spatialReference:f.spatialReference.toJson()},u={x:0,y:0,spatialReference:f.spatialReference.toJson()},p=0,r=0,q=0;q<f.paths.length;q++)if(0!==f.paths[q].length){var m=f.paths[q];var v=!0===f.hasZ;if(1>=m.length)m=0;else{for(var x=0,z=1;z<m.length;z++)x+=c(m[z-1],m[z],v);m=x}0===m?(v=b(f.paths[q],!0===f.hasZ,!0===f.hasM),n.x+=v.x,n.y+=v.y,!0===f.hasZ&&(n.z+=v.z),!0===f.hasM&&(n.m+=v.m),++p):(v=b(f.paths[q],!0===f.hasZ,!0===f.hasM),u.x+=v.x*
m,u.y+=v.y*m,!0===f.hasZ&&(u.z+=v.z*m),!0===f.hasM&&(u.m+=v.m*m),r+=m)}return 0<r?(u.x/=r,u.y/=r,!0===f.hasZ&&(u.z/=r),!0===f.hasM&&(u.m/=r),new a(u)):0<p?(n.x/=p,n.y/=p,!0===f.hasZ&&(u.z/=p),!0===f.hasM&&(n.m/=p),new a(n)):null};t.centroidMultiPoint=function(f){if(0===f.points.length)return null;for(var n=0,u=0,p=0,r=0,q=0;q<f.points.length;q++){var m=f.getPoint(q);!0===m.hasZ&&(p+=m.z);!0===m.hasM&&(r+=m.m);n+=m.x;u+=m.y;r+=m.m}n={x:n/f.points.length,y:u/f.points.length,spatialReference:null};n.spatialReference=
f.spatialReference.toJson();!0===f.hasZ&&(n.z=p/f.points.length);!0===f.hasM&&(n.m=r/f.points.length);return new a(n)};t.angleRad=h;t.angle2D=function(f,n){return k(h(f,n),2*Math.PI)*(180/Math.PI)};t.bearing2D=function(f,n){return k(Math.PI/2-h(f,n),2*Math.PI)*(180/Math.PI)};t.angleBetweenRad=d;t.angleBetween2D=function(f,n,u){return k(d(f,n,u),2*Math.PI)*(180/Math.PI)};t.bearingBetween2D=function(f,n,u){return k(-1*d(f,n,u),2*Math.PI)*(180/Math.PI)};var l=[0,0];t.pathsSelfIntersecting=function(f){for(var n=
0;n<f.length;n++){for(var u=f[n],p=0;p<u.length-1;p++)for(var r=u[p],q=u[p+1],m=n+1;m<f.length;m++)for(var v=0;v<f[m].length-1;v++){var x=f[m][v],z=f[m][v+1],A=e(r,q,x,z,l);if(A&&!(l[0]===r[0]&&l[1]===r[1]||l[0]===x[0]&&l[1]===x[1]||l[0]===q[0]&&l[1]===q[1]||l[0]===z[0]&&l[1]===z[1]))return!0}v=u.length;if(!(3>v))for(p=0;p<=v-2;p++)for(r=u[p],q=u[p+1],m=p+2;m<=v-2;m++)if(x=u[m],z=u[m+1],(A=e(r,q,x,z,l))&&!(l[0]===r[0]&&l[1]===r[1]||l[0]===x[0]&&l[1]===x[1]||l[0]===q[0]&&l[1]===q[1]||l[0]===z[0]&&
l[1]===z[1]))return!0}return!1}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/jsonUtils ../executionError".split(" "),function(g,t,a,b,c,k,h,d,e,l,f,n,u,p){function r(m){return 0===a.version.indexOf("4.")?f.fromExtent(m):new f({spatialReference:m.spatialReference,rings:[[[m.xmin,
m.ymin],[m.xmin,m.ymax],[m.xmax,m.ymax],[m.xmax,m.ymin],[m.xmin,m.ymin]]]})}Object.defineProperty(t,"__esModule",{value:!0});t.registerFunctions=t.setGeometryEngine=void 0;var q=null;t.setGeometryEngine=function(m){q=m};t.registerFunctions=function(m,v){function x(z,A,C){c.pcCheck(C,2,2,z,A);if(!(C[0]instanceof d&&C[1]instanceof d||C[0]instanceof d&&null===C[1]||C[1]instanceof d&&null===C[0]||null===C[0]&&null===C[1]))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);}m.disjoint=
function(z,A){return v(z,A,function(C,D,B){B=c.autoCastFeatureToGeometry(B);x(z,A,B);return null===B[0]||null===B[1]?!0:q.disjoint(B[0],B[1])})};m.intersects=function(z,A){return v(z,A,function(C,D,B){B=c.autoCastFeatureToGeometry(B);x(z,A,B);return null===B[0]||null===B[1]?!1:q.intersects(B[0],B[1])})};m.touches=function(z,A){return v(z,A,function(C,D,B){B=c.autoCastFeatureToGeometry(B);x(z,A,B);return null===B[0]||null===B[1]?!1:q.touches(B[0],B[1])})};m.crosses=function(z,A){return v(z,A,function(C,
D,B){B=c.autoCastFeatureToGeometry(B);x(z,A,B);return null===B[0]||null===B[1]?!1:q.crosses(B[0],B[1])})};m.within=function(z,A){return v(z,A,function(C,D,B){B=c.autoCastFeatureToGeometry(B);x(z,A,B);return null===B[0]||null===B[1]?!1:q.within(B[0],B[1])})};m.contains=function(z,A){return v(z,A,function(C,D,B){B=c.autoCastFeatureToGeometry(B);x(z,A,B);return null===B[0]||null===B[1]?!1:q.contains(B[0],B[1])})};m.overlaps=function(z,A){return v(z,A,function(C,D,B){B=c.autoCastFeatureToGeometry(B);
x(z,A,B);return null===B[0]||null===B[1]?!1:q.overlaps(B[0],B[1])})};m.equals=function(z,A){return v(z,A,function(C,D,B){c.pcCheck(B,2,2,z,A);return B[0]===B[1]?!0:B[0]instanceof d&&B[1]instanceof d?q.equals(B[0],B[1]):c.isDate(B[0])&&c.isDate(B[1])?B[0].equals(B[1]):!1})};m.relate=function(z,A){return v(z,A,function(C,D,B){B=c.autoCastFeatureToGeometry(B);c.pcCheck(B,3,3,z,A);if(B[0]instanceof d&&B[1]instanceof d)return q.relate(B[0],B[1],c.toString(B[2]));if(B[0]instanceof d&&null===B[1]||B[1]instanceof
d&&null===B[0]||null===B[0]&&null===B[1])return!1;throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);})};m.intersection=function(z,A){return v(z,A,function(C,D,B){B=c.autoCastFeatureToGeometry(B);x(z,A,B);return null===B[0]||null===B[1]?null:q.intersect(B[0],B[1])})};m.union=function(z,A){return v(z,A,function(C,D,B){B=c.autoCastFeatureToGeometry(B);C=[];if(0===B.length)throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.WrongNumberOfParameters,A);if(1===B.length)if(c.isArray(B[0]))for(B=
c.autoCastFeatureToGeometry(B[0]),D=0;D<B.length;D++){if(null!==B[D]){if(!(B[D]instanceof d))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);C.push(B[D])}}else if(c.isImmutableArray(B[0]))for(B=c.autoCastFeatureToGeometry(B[0].toArray()),D=0;D<B.length;D++){if(null!==B[D]){if(!(B[D]instanceof d))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);C.push(B[D])}}else{if(B[0]instanceof d)return c.fixSpatialReference(b.cloneGeometry(B[0]),z.spatialReference);
if(null===B[0])return null;throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);}else for(D=0;D<B.length;D++)if(null!==B[D]){if(!(B[D]instanceof d))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);C.push(B[D])}return 0===C.length?null:q.union(C)})};m.difference=function(z,A){return v(z,A,function(C,D,B){B=c.autoCastFeatureToGeometry(B);x(z,A,B);return null!==B[0]&&null===B[1]?b.cloneGeometry(B[0]):null===B[0]?null:q.difference(B[0],B[1])})};m.symmetricdifference=
function(z,A){return v(z,A,function(C,D,B){B=c.autoCastFeatureToGeometry(B);x(z,A,B);return null===B[0]&&null===B[1]?null:null===B[0]?b.cloneGeometry(B[1]):null===B[1]?b.cloneGeometry(B[0]):q.symmetricDifference(B[0],B[1])})};m.clip=function(z,A){return v(z,A,function(C,D,B){B=c.autoCastFeatureToGeometry(B);c.pcCheck(B,2,2,z,A);if(!(B[1]instanceof h)&&null!==B[1])throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);if(null===B[0])return null;if(!(B[0]instanceof d))throw new p.ArcadeExecutionError(z,
p.ExecutionErrorCodes.InvalidParameter,A);return null===B[1]?null:q.clip(B[0],B[1])})};m.cut=function(z,A){return v(z,A,function(C,D,B){B=c.autoCastFeatureToGeometry(B);c.pcCheck(B,2,2,z,A);if(!(B[1]instanceof n)&&null!==B[1])throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);if(null===B[0])return[];if(!(B[0]instanceof d))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);return null===B[1]?[b.cloneGeometry(B[0])]:q.cut(B[0],B[1])})};m.area=function(z,
A){return v(z,A,function(C,D,B){c.pcCheck(B,1,2,z,A);B=c.autoCastFeatureToGeometry(B);if(null===B[0])return 0;if(c.isArray(B[0])||c.isImmutableArray(B[0]))return C=c.autoCastArrayOfPointsToPolygon(B[0],z.spatialReference),null===C?0:q.planarArea(C,b.convertSquareUnitsToCode(c.defaultUndefined(B[1],-1)));if(!(B[0]instanceof d))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);return q.planarArea(B[0],b.convertSquareUnitsToCode(c.defaultUndefined(B[1],-1)))})};m.areageodetic=
function(z,A){return v(z,A,function(C,D,B){c.pcCheck(B,1,2,z,A);B=c.autoCastFeatureToGeometry(B);if(null===B[0])return 0;if(c.isArray(B[0])||c.isImmutableArray(B[0]))return C=c.autoCastArrayOfPointsToPolygon(B[0],z.spatialReference),null===C?0:q.geodesicArea(C,b.convertSquareUnitsToCode(c.defaultUndefined(B[1],-1)));if(!(B[0]instanceof d))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);return q.geodesicArea(B[0],b.convertSquareUnitsToCode(c.defaultUndefined(B[1],-1)))})};
m.length=function(z,A){return v(z,A,function(C,D,B){c.pcCheck(B,1,2,z,A);B=c.autoCastFeatureToGeometry(B);if(null===B[0])return 0;if(c.isArray(B[0])||c.isImmutableArray(B[0]))return C=c.autoCastArrayOfPointsToPolyline(B[0],z.spatialReference),null===C?0:q.planarLength(C,b.convertLinearUnitsToCode(c.defaultUndefined(B[1],-1)));if(!(B[0]instanceof d))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);return q.planarLength(B[0],b.convertLinearUnitsToCode(c.defaultUndefined(B[1],
-1)))})};m.length3d=function(z,A){return v(z,A,function(C,D,B){c.pcCheck(B,1,2,z,A);B=c.autoCastFeatureToGeometry(B);if(null===B[0])return 0;if(c.isArray(B[0])||c.isImmutableArray(B[0]))return C=c.autoCastArrayOfPointsToPolyline(B[0],z.spatialReference),null===C?0:q.planarLength(C,b.convertLinearUnitsToCode(c.defaultUndefined(B[1],-1)));if(!(B[0]instanceof d))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);return q.planarLength(B[0],b.convertLinearUnitsToCode(c.defaultUndefined(B[1],
-1)))})};m.lengthgeodetic=function(z,A){return v(z,A,function(C,D,B){c.pcCheck(B,1,2,z,A);B=c.autoCastFeatureToGeometry(B);if(null===B[0])return 0;if(c.isArray(B[0])||c.isImmutableArray(B[0]))return C=c.autoCastArrayOfPointsToPolyline(B[0],z.spatialReference),null===C?0:q.geodesicLength(C,b.convertLinearUnitsToCode(c.defaultUndefined(B[1],-1)));if(!(B[0]instanceof d))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);return q.geodesicLength(B[0],b.convertLinearUnitsToCode(c.defaultUndefined(B[1],
-1)))})};m.distance=function(z,A){return v(z,A,function(C,D,B){B=c.autoCastFeatureToGeometry(B);c.pcCheck(B,2,3,z,A);C=B[0];if(c.isArray(B[0])||c.isImmutableArray(B[0]))C=c.autoCastArrayOfPointsToMultiPoint(B[0],z.spatialReference);D=B[1];if(c.isArray(B[1])||c.isImmutableArray(B[1]))D=c.autoCastArrayOfPointsToMultiPoint(B[1],z.spatialReference);if(!(C instanceof d))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);if(!(D instanceof d))throw new p.ArcadeExecutionError(z,
p.ExecutionErrorCodes.InvalidParameter,A);return q.distance(C,D,b.convertLinearUnitsToCode(c.defaultUndefined(B[2],-1)))})};m.distancegeodetic=function(z,A){return v(z,A,function(C,D,B){B=c.autoCastFeatureToGeometry(B);c.pcCheck(B,2,3,z,A);C=B[0];D=B[1];if(!(C instanceof l))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);if(!(D instanceof l))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);var y=new n({paths:[],spatialReference:C.spatialReference});
y.addPath([C,D]);return q.geodesicLength(y,b.convertLinearUnitsToCode(c.defaultUndefined(B[2],-1)))})};m.densify=function(z,A){return v(z,A,function(C,D,B){B=c.autoCastFeatureToGeometry(B);c.pcCheck(B,2,3,z,A);if(null===B[0])return null;if(!(B[0]instanceof d))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);C=c.toNumber(B[1]);if(isNaN(C))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);if(0>=C)throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,
A);return B[0]instanceof f||B[0]instanceof n?q.densify(B[0],C,b.convertLinearUnitsToCode(c.defaultUndefined(B[2],-1))):B[0]instanceof h?q.densify(r(B[0]),C,b.convertLinearUnitsToCode(c.defaultUndefined(B[2],-1))):B[0]})};m.densifygeodetic=function(z,A){return v(z,A,function(C,D,B){B=c.autoCastFeatureToGeometry(B);c.pcCheck(B,2,3,z,A);if(null===B[0])return null;if(!(B[0]instanceof d))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);C=c.toNumber(B[1]);if(isNaN(C))throw new p.ArcadeExecutionError(z,
p.ExecutionErrorCodes.InvalidParameter,A);if(0>=C)throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);return B[0]instanceof f||B[0]instanceof n?q.geodesicDensify(B[0],C,b.convertLinearUnitsToCode(c.defaultUndefined(B[2],-1))):B[0]instanceof h?q.geodesicDensify(r(B[0]),C,b.convertLinearUnitsToCode(c.defaultUndefined(B[2],-1))):B[0]})};m.generalize=function(z,A){return v(z,A,function(C,D,B){B=c.autoCastFeatureToGeometry(B);c.pcCheck(B,2,4,z,A);if(null===B[0])return null;if(!(B[0]instanceof
d))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);C=c.toNumber(B[1]);if(isNaN(C))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);return q.generalize(B[0],C,c.toBoolean(c.defaultUndefined(B[2],!0)),b.convertLinearUnitsToCode(c.defaultUndefined(B[3],-1)))})};m.buffer=function(z,A){return v(z,A,function(C,D,B){B=c.autoCastFeatureToGeometry(B);c.pcCheck(B,2,3,z,A);if(null===B[0])return null;if(!(B[0]instanceof d))throw new p.ArcadeExecutionError(z,
p.ExecutionErrorCodes.InvalidParameter,A);C=c.toNumber(B[1]);if(isNaN(C))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);return 0===C?b.cloneGeometry(B[0]):q.buffer(B[0],C,b.convertLinearUnitsToCode(c.defaultUndefined(B[2],-1)))})};m.buffergeodetic=function(z,A){return v(z,A,function(C,D,B){B=c.autoCastFeatureToGeometry(B);c.pcCheck(B,2,3,z,A);if(null===B[0])return null;if(!(B[0]instanceof d))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);
C=c.toNumber(B[1]);if(isNaN(C))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);return 0===C?b.cloneGeometry(B[0]):q.geodesicBuffer(B[0],C,b.convertLinearUnitsToCode(c.defaultUndefined(B[2],-1)))})};m.offset=function(z,A){return v(z,A,function(C,D,B){B=c.autoCastFeatureToGeometry(B);c.pcCheck(B,2,6,z,A);if(null===B[0])return null;if(!(B[0]instanceof f||B[0]instanceof n))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);C=c.toNumber(B[1]);if(isNaN(C))throw new p.ArcadeExecutionError(z,
p.ExecutionErrorCodes.InvalidParameter,A);D=c.toNumber(c.defaultUndefined(B[4],10));if(isNaN(D))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);var y=c.toNumber(c.defaultUndefined(B[5],0));if(isNaN(y))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);return q.offset(B[0],C,b.convertLinearUnitsToCode(c.defaultUndefined(B[2],-1)),c.toString(c.defaultUndefined(B[3],"round")).toLowerCase(),D,y)})};m.rotate=function(z,A){return v(z,A,function(C,D,
B){B=c.autoCastFeatureToGeometry(B);c.pcCheck(B,2,3,z,A);C=B[0];if(null===C)return null;if(!(C instanceof d))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);C instanceof h&&(C=f.fromExtent(C));D=c.toNumber(B[1]);if(isNaN(D))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);B=c.defaultUndefined(B[2],null);if(null===B)return q.rotate(C,D);if(B instanceof l)return q.rotate(C,D,B);throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,
A);})};m.centroid=function(z,A){return v(z,A,function(C,D,B){B=c.autoCastFeatureToGeometry(B);c.pcCheck(B,1,1,z,A);if(null===B[0])return null;C=B[0];if(c.isArray(B[0])||c.isImmutableArray(B[0]))C=c.autoCastArrayOfPointsToMultiPoint(B[0],z.spatialReference);if(null===C)return null;if(!(C instanceof d))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);return C instanceof l?c.fixSpatialReference(b.cloneGeometry(B[0]),z.spatialReference):C instanceof f?C.getCentroid():C instanceof
n?k.centroidPolyline(C):C instanceof e?k.centroidMultiPoint(C):C instanceof h?C.getCenter():null})};m.multiparttosinglepart=function(z,A){return v(z,A,function(C,D,B){B=c.autoCastFeatureToGeometry(B);c.pcCheck(B,1,1,z,A);D=[];if(null===B[0])return null;if(!(B[0]instanceof d))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);if(B[0]instanceof l||B[0]instanceof h)return[c.fixSpatialReference(b.cloneGeometry(B[0]),z.spatialReference)];C=q.simplify(B[0]);if(C instanceof f){D=
[];var y=[];for(B=0;B<C.rings.length;B++)if(C.isClockwise(C.rings[B])){var w=u.fromJson({rings:[C.rings[B]],hasZ:!0===C.hasZ,hasM:!0===C.hasM,spatialReference:C.spatialReference.toJson()});D.push(w)}else y.push({ring:C.rings[B],pt:C.getPoint(B,0)});for(C=0;C<y.length;C++)for(B=0;B<D.length;B++)if(D[B].contains(y[C].pt)){D[B].addRing(y[C].ring);break}return D}if(C instanceof n){D=[];for(B=0;B<C.paths.length;B++)y=u.fromJson({paths:[C.paths[B]],hasZ:!0===C.hasZ,hasM:!0===C.hasM,spatialReference:C.spatialReference.toJson()}),
D.push(y);return D}if(B[0]instanceof e){C=c.fixSpatialReference(b.cloneGeometry(B[0]),z.spatialReference);for(B=0;B<C.points.length;B++)D.push(C.getPoint(B));return D}return null})};m.issimple=function(z,A){return v(z,A,function(C,D,B){B=c.autoCastFeatureToGeometry(B);c.pcCheck(B,1,1,z,A);if(null===B[0])return!0;if(!(B[0]instanceof d))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);return q.isSimple(B[0])})};m.simplify=function(z,A){return v(z,A,function(C,D,B){B=c.autoCastFeatureToGeometry(B);
c.pcCheck(B,1,1,z,A);if(null===B[0])return null;if(!(B[0]instanceof d))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);return q.simplify(B[0])})};m.convexhull=function(z,A){return v(z,A,function(C,D,B){B=c.autoCastFeatureToGeometry(B);c.pcCheck(B,1,1,z,A);if(null===B[0])return null;if(!(B[0]instanceof d))throw new p.ArcadeExecutionError(z,p.ExecutionErrorCodes.InvalidParameter,A);return q.convexHull(B[0])})}}})},"esri/arcade/kernel":function(){define(["require","exports",
"../geometry/Extent","../geometry/jsonUtils"],function(g,t,a,b){Object.defineProperty(t,"__esModule",{value:!0});t.cloneGeometry=t.sameGeomType=t.convertLinearUnitsToCode=t.shapeExtent=t.convertSquareUnitsToCode=void 0;t.convertSquareUnitsToCode=function(c){if(null==c)return null;if("number"===typeof c)return c;c=c.toLowerCase();c=c.replace(/\s/g,"");c=c.replace(/-/g,"");switch(c){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109439;
case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};
t.shapeExtent=function(c){if(null==c)return null;switch(c.type){case "polygon":case "multipoint":case "polyline":return c.extent;case "point":return new a({xmin:c.x,ymin:c.y,xmax:c.x,ymax:c.y,spatialReference:c.spatialReference});case "extent":return c}return null};t.convertLinearUnitsToCode=function(c){if(null==c)return null;if("number"===typeof c)return c;c=c.toLowerCase();c=c.replace(/\s/g,"");c=c.replace(/-/g,"");switch(c){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":return 9093;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};t.sameGeomType=function(c,k){return c===
k||"point"===c&&"esriGeometryPoint"===k||"polyline"===c&&"esriGeometryPolyline"===k||"polygon"===c&&"esriGeometryPolygon"===k||"extent"===c&&"esriGeometryEnvelope"===k||"multipoint"===c&&"esriGeometryMultipoint"===k||"point"===k&&"esriGeometryPoint"===c||"polyline"===k&&"esriGeometryPolyline"===c||"polygon"===k&&"esriGeometryPolygon"===c||"extent"===k&&"esriGeometryEnvelope"===c||"multipoint"===k&&"esriGeometryMultipoint"===c?!0:!1};t.cloneGeometry=function(c){if(null==c)return null;var k=b.fromJson(c.toJson());
c.getCacheValue("_geVersion")&&k.setCacheValue("_geVersion",c.getCacheValue("_geVersion"));return k}})},"esri/arcade/functions/maths":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../languageUtils dojo/number".split(" "),function(g,t,a,b,c,k){function h(d,e,l){if("undefined"===typeof l||0===+l)return Math[d](e);e=+e;l=+l;if(isNaN(e)||"number"!==typeof l||0!==l%1)return NaN;e=e.toString().split("e");e=Math[d](+(e[0]+"e"+(e[1]?+e[1]-l:-l)));e=e.toString().split("e");
return+(e[0]+"e"+(e[1]?+e[1]+l:l))}Object.defineProperty(t,"__esModule",{value:!0});t.registerFunctions=void 0;t.registerFunctions=function(d,e){function l(f,n,u){f=c.toNumber(f);return isNaN(f)?f:isNaN(n)||isNaN(u)||n>u?NaN:f<n?n:f>u?u:f}d.number=function(f,n){return e(f,n,function(u,p,r){c.pcCheck(r,1,2,f,n);u=r[0];return c.isNumber(u)?u:null===u?0:c.isDate(u)?u.toNumber():c.isBoolean(u)?Number(u):c.isArray(u)?NaN:""===u||void 0===u?Number(u):c.isString(u)?void 0!==r[1]?(r=c.multiReplace(r[1],"\u2030",
""),r=c.multiReplace(r,"\u00a4",""),k.parse(u,{pattern:r})):Number(u.trim()):Number(u)})};d.abs=function(f,n){return e(f,n,function(u,p,r){c.pcCheck(r,1,1,f,n);return Math.abs(c.toNumber(r[0]))})};d.acos=function(f,n){return e(f,n,function(u,p,r){c.pcCheck(r,1,1,f,n);return Math.acos(c.toNumber(r[0]))})};d.asin=function(f,n){return e(f,n,function(u,p,r){c.pcCheck(r,1,1,f,n);return Math.asin(c.toNumber(r[0]))})};d.atan=function(f,n){return e(f,n,function(u,p,r){c.pcCheck(r,1,1,f,n);return Math.atan(c.toNumber(r[0]))})};
d.atan2=function(f,n){return e(f,n,function(u,p,r){c.pcCheck(r,2,2,f,n);return Math.atan2(c.toNumber(r[0]),c.toNumber(r[1]))})};d.ceil=function(f,n){return e(f,n,function(u,p,r){c.pcCheck(r,1,2,f,n);return 2===r.length?(u=c.toNumber(r[1]),isNaN(u)&&(u=0),h("ceil",c.toNumber(r[0]),-1*u)):Math.ceil(c.toNumber(r[0]))})};d.round=function(f,n){return e(f,n,function(u,p,r){c.pcCheck(r,1,2,f,n);return 2===r.length?(u=c.toNumber(r[1]),isNaN(u)&&(u=0),h("round",c.toNumber(r[0]),-1*u)):Math.round(c.toNumber(r[0]))})};
d.floor=function(f,n){return e(f,n,function(u,p,r){c.pcCheck(r,1,2,f,n);return 2===r.length?(u=c.toNumber(r[1]),isNaN(u)&&(u=0),h("floor",c.toNumber(r[0]),-1*u)):Math.floor(c.toNumber(r[0]))})};d.cos=function(f,n){return e(f,n,function(u,p,r){c.pcCheck(r,1,1,f,n);return Math.cos(c.toNumber(r[0]))})};d.isnan=function(f,n){return e(f,n,function(u,p,r){c.pcCheck(r,1,1,f,n);return"number"===typeof r[0]&&isNaN(r[0])})};d.exp=function(f,n){return e(f,n,function(u,p,r){c.pcCheck(r,1,1,f,n);return Math.exp(c.toNumber(r[0]))})};
d.log=function(f,n){return e(f,n,function(u,p,r){c.pcCheck(r,1,1,f,n);return Math.log(c.toNumber(r[0]))})};d.pow=function(f,n){return e(f,n,function(u,p,r){c.pcCheck(r,2,2,f,n);return Math.pow(c.toNumber(r[0]),c.toNumber(r[1]))})};d.random=function(f,n){return e(f,n,function(u,p,r){c.pcCheck(r,0,0,f,n);return Math.random()})};d.sin=function(f,n){return e(f,n,function(u,p,r){c.pcCheck(r,1,1,f,n);return Math.sin(c.toNumber(r[0]))})};d.sqrt=function(f,n){return e(f,n,function(u,p,r){c.pcCheck(r,1,1,
f,n);return Math.sqrt(c.toNumber(r[0]))})};d.tan=function(f,n){return e(f,n,function(u,p,r){c.pcCheck(r,1,1,f,n);return Math.tan(c.toNumber(r[0]))})};d.defaultvalue=function(f,n){return e(f,n,function(u,p,r){c.pcCheck(r,2,2,f,n);return null===r[0]||""===r[0]||void 0===r[0]?r[1]:r[0]})};d.isempty=function(f,n){return e(f,n,function(u,p,r){c.pcCheck(r,1,1,f,n);return null===r[0]||""===r[0]||void 0===r[0]?!0:!1})};d["boolean"]=function(f,n){return e(f,n,function(u,p,r){c.pcCheck(r,1,1,f,n);return c.toBoolean(r[0])})};
d.constrain=function(f,n){return e(f,n,function(u,p,r){c.pcCheck(r,3,3,f,n);u=c.toNumber(r[1]);p=c.toNumber(r[2]);if(c.isArray(r[0])){var q=[],m=0;for(r=r[0];m<r.length;m++)q.push(l(r[m],u,p));return q}if(c.isImmutableArray(r[0])){q=[];for(m=0;m<r[0].length();m++)q.push(l(r[0].get(m),u,p));return q}return l(r[0],u,p)})}}})},"esri/arcade/functions/stats":function(){define(["require","exports","../executionError","../languageUtils","./fieldStats"],function(g,t,a,b,c){function k(h,d,e,l){if(1===l.length){if(b.isArray(l[0]))return c.calculateStat(h,
l[0],-1);if(b.isImmutableArray(l[0]))return c.calculateStat(h,l[0].toArray(),-1)}return c.calculateStat(h,l,-1)}Object.defineProperty(t,"__esModule",{value:!0});t.registerFunctions=void 0;t.registerFunctions=function(h,d){h.stdev=function(e,l){return d(e,l,function(f,n,u){return k("stdev",f,n,u)})};h.variance=function(e,l){return d(e,l,function(f,n,u){return k("variance",f,n,u)})};h.average=function(e,l){return d(e,l,function(f,n,u){return k("mean",f,n,u)})};h.mean=function(e,l){return d(e,l,function(f,
n,u){return k("mean",f,n,u)})};h.sum=function(e,l){return d(e,l,function(f,n,u){return k("sum",f,n,u)})};h.min=function(e,l){return d(e,l,function(f,n,u){return k("min",f,n,u)})};h.max=function(e,l){return d(e,l,function(f,n,u){return k("max",f,n,u)})};h.distinct=function(e,l){return d(e,l,function(f,n,u){return k("distinct",f,n,u)})};h.count=function(e,l){return d(e,l,function(f,n,u){b.pcCheck(u,1,1,e,l);if(b.isArray(u[0])||b.isString(u[0]))return u[0].length;if(b.isImmutableArray(u[0]))return u[0].length();
throw new a.ArcadeExecutionError(e,a.ExecutionErrorCodes.InvalidParameter,l);})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(g,t,a){function b(k){for(var h=0,d=0;d<k.length;d++)h+=k[d];return h/k.length}function c(k){for(var h=b(k),d=0,e=0;e<k.length;e++)d+=Math.pow(h-k[e],2);return d/k.length}Object.defineProperty(t,"__esModule",{value:!0});t.calculateStat=t.decodeStatType=void 0;t.decodeStatType=function(k){switch(k.toLowerCase()){case "distinct":return"distinct";
case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};t.calculateStat=function(k,h,d){void 0===d&&(d=1E3);switch(k.toLowerCase()){case "distinct":a:{k=d;d=[];for(var e={},l=[],f=0;f<h.length;f++){if(void 0!==h[f]&&null!==h[f]&&h[f]!==a.voidOperation){var n=h[f];if(a.isNumber(n)||a.isString(n))void 0===e[n]&&(d.push(n),e[n]=1);else{for(var u=
!1,p=0;p<l.length;p++)!0===a.equalityTest(l[p],n)&&(u=!0);!1===u&&(l.push(n),d.push(n))}}if(d.length>=k&&-1!==k){h=d;break a}}h=d}return h;case "avg":case "mean":return b(a.toNumberArray(h));case "min":return Math.min.apply(Math,a.toNumberArray(h));case "sum":h=a.toNumberArray(h);for(d=k=0;d<h.length;d++)k+=h[d];return k;case "max":return Math.max.apply(Math,a.toNumberArray(h));case "stdev":case "stddev":return Math.sqrt(c(a.toNumberArray(h)));case "var":case "variance":return c(a.toNumberArray(h));
case "count":return h.length}return 0}})},"esri/arcade/functions/string":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../ArcadePortal ../Attachment ../Dictionary ../executionError ../languageUtils ../featureset/support/shared ./convertdirection ./hash ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../SpatialReference ../../arcgis/Portal".split(" "),function(g,t,a,b,c,k,h,d,
e,l,f,n,u,p,r,q,m,v,x){function z(C,D){return C&&D?C.x===D.x&&C.y===D.y?!0:!1:C===D}function A(C,D,B){if(null===C)D.updateUint8Array([0,139]);else if(e.isArray(C)){D.updateUint8Array([61]);if(B.map.has(C))C=B.map.get(C),D.updateIntArray([C^61237541]);else{B.map.set(C,B.currentLength++);for(var y=0;y<C.length;y++){var w=C[y];A(w,D,B)}B.map.delete(C);B.currentLength--}D.updateUint8Array([199])}else if(e.isImmutableArray(C)){D.updateUint8Array([61]);if(B.map.has(C))C=B.map.get(C),D.updateIntArray([C^
61237541]);else{B.map.set(C,B.currentLength++);y=0;for(var E=C.toArray();y<E.length;y++)w=E[y],A(w,D,B);B.map.delete(C);B.currentLength--}D.updateUint8Array([199])}else if(e.isDate(C))D.updateIntArray([C.toNumber()]),D.updateUint8Array([241]);else if(e.isString(C))D.updateIntArray([C.length]),D.updateWithString(C),D.updateUint8Array([41]);else if(e.isBoolean(C))D.updateUint8Array([!0===C?1:0,113]);else if(e.isNumber(C))D.updateFloatArray([C]),D.updateUint8Array([173]);else{if(C instanceof k)throw new d.ArcadeExecutionError(B.context,
d.ExecutionErrorCodes.UnsupportedHashType,B.node);if(C instanceof c)throw new d.ArcadeExecutionError(B.context,d.ExecutionErrorCodes.UnsupportedHashType,B.node);if(C instanceof h){D.updateUint8Array([223]);if(B.map.has(C))C=B.map.get(C),D.updateIntArray([C^61237541]);else{B.map.set(C,B.currentLength++);y=0;for(E=C.keys();y<E.length;y++)w=E[y],D.updateIntArray([w.length]),D.updateWithString(w),D.updateUint8Array([251]),w=C.field(w),A(w,D,B),D.updateUint8Array([239]);B.map.delete(C);B.currentLength--}D.updateUint8Array([73])}else{if(e.isFeature(C))throw new d.ArcadeExecutionError(B.context,
d.ExecutionErrorCodes.UnsupportedHashType,B.node);if(C instanceof r)D.updateIntArray([3833836621]),D.updateIntArray([0]),D.updateFloatArray([C.x]),D.updateIntArray([1]),D.updateFloatArray([C.y]),D.updateIntArray([3765347959]),A(C.spatialReference.wkid,D,B);else if(C instanceof q){D.updateIntArray([1266616829]);for(y=0;y<C.rings.length;y++){E=C.rings[y];var F=[],H=null,M=null;for(w=0;w<E.length;w++){var R=C.getPoint(y,w);if(0===w)H=R;else if(z(M,R))continue;M=R;w===E.length-1&&z(H,R)||F.push(R)}D.updateIntArray([1397116793,
F.length]);for(w=0;w<F.length;w++)R=F[w],D.updateIntArray([3962308117,w]),A(R,D,B),D.updateIntArray([2716288009]);D.updateIntArray([2278822459])}D.updateIntArray([3878477243]);A(C.spatialReference.wkid,D,B)}else if(C instanceof m){D.updateIntArray([4106883559]);for(y=0;y<C.paths.length;y++){E=C.paths[y];D.updateIntArray([1397116793,E.length]);for(w=0;w<E.length;w++)D.updateIntArray([3962308117,w]),A(C.getPoint(y,w),D,B),D.updateIntArray([2716288009]);D.updateIntArray([2278822459])}D.updateIntArray([2568784753]);
A(C.spatialReference.wkid,D,B)}else if(C instanceof p){D.updateIntArray([588535921,C.points.length]);for(w=0;w<C.points.length;w++)y=C.getPoint(w),D.updateIntArray([w]),A(y,D,B);D.updateIntArray([1700171621]);A(C.spatialReference.wkid,D,B)}else if(C instanceof u)D.updateIntArray([3483648373]),D.updateIntArray([0]),D.updateFloatArray([C.xmax]),D.updateIntArray([1]),D.updateFloatArray([C.xmin]),D.updateIntArray([2]),D.updateFloatArray([C.ymax]),D.updateIntArray([3]),D.updateFloatArray([C.ymin]),D.updateIntArray([3622027469]),
A(C.spatialReference.wkid,D,B);else if(C instanceof v)D.updateIntArray([14]),void 0!==C.wkid&&null!==C.wkid&&D.updateIntArray([C.wkid]),C.wkt&&D.updateWithString(C.wkt);else{if(e.isFunctionParameter(C))throw new d.ArcadeExecutionError(B.context,d.ExecutionErrorCodes.UnsupportedHashType,B.node);if(e.isFeatureSet(C))throw new d.ArcadeExecutionError(B.context,d.ExecutionErrorCodes.UnsupportedHashType,B.node);e.isFeatureSetCollection(C);throw new d.ArcadeExecutionError(B.context,d.ExecutionErrorCodes.UnsupportedHashType,
B.node);}}}}Object.defineProperty(t,"__esModule",{value:!0});t.registerFunctions=void 0;t.registerFunctions=function(C,D){C.portal=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,1,1,B,y);return new c(e.toString(F[0]))})};C.typeof=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,1,1,B,y);w=e.getType(F[0]);if("Unrecognised Type"===w)throw new d.ArcadeExecutionError(B,d.ExecutionErrorCodes.UnrecognisedType,y);return w})};C.trim=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,1,1,
B,y);return e.toString(F[0]).trim()})};C.tohex=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,1,1,B,y);w=e.toNumber(F[0]);return isNaN(w)?w:w.toString(16)})};C.upper=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,1,1,B,y);return e.toString(F[0]).toUpperCase()})};C.proper=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,1,2,B,y);w=1;2===F.length&&"firstword"===e.toString(F[1]).toLowerCase()&&(w=2);E=/\s/;F=e.toString(F[0]);for(var H="",M=!0,R=0;R<F.length;R++){var V=F[R];E.test(V)?
1===w&&(M=!0):V.toUpperCase()!==V.toLowerCase()&&(M?(V=V.toUpperCase(),M=!1):V=V.toLowerCase());H+=V}return H})};C.lower=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,1,1,B,y);return e.toString(F[0]).toLowerCase()})};C.guid=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,0,1,B,y);if(0<F.length)switch(e.toString(F[0]).toLowerCase()){case "digits":return e.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return e.generateUUID();case "digits-hyphen-parentheses":return"("+
e.generateUUID()+")"}return"{"+e.generateUUID()+"}"})};C.standardizeguid=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,2,2,B,y);w=e.toString(F[0]);if(""===w||null===w)return"";w=/^(\{|\()?([0-9a-z]{8})(\-?)([0-9a-z]{4})(\-?)([0-9a-z]{4})(\-?)([0-9a-z]{4})(\-?)([0-9a-z]{12})(\}|\))?$/gim.exec(w);if(!w)return"";E=[];for(var H=1;H<w.length;H++){var M=w[H];void 0!==M&&""!==M&&null!==M&&0>["-","}","{","(",")"].indexOf(M)&&E.push(M)}if(5!==E.length)return"";w=E[0]+"-"+E[1]+"-"+E[2]+"-"+E[3]+"-"+
E[4];switch(e.toString(F[1]).toLowerCase()){case "digits":return w.replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return w;case "digits-hyphen-parentheses":return"("+w+")"}return"{"+w+"}"})};C.console=function(B,y){return D(B,y,function(w,E,F){0!==F.length&&(1===F.length?B.console(e.toString(F[0])):B.console(e.toString(F)));return e.voidOperation})};C.mid=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,2,3,B,y);w=e.toNumber(F[1]);if(isNaN(w))return"";0>
w&&(w=0);if(2===F.length)return e.toString(F[0]).substr(w);E=e.toNumber(F[2]);if(isNaN(E))return"";0>E&&(E=0);return e.toString(F[0]).substr(w,E)})};C.find=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,2,3,B,y);w=0;if(2<F.length){w=e.toNumber(e.defaultUndefined(F[2],0));if(isNaN(w))return-1;0>w&&(w=0)}return e.toString(F[1]).indexOf(e.toString(F[0]),w)})};C.left=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,2,2,B,y);w=e.toNumber(F[1]);if(isNaN(w))return"";0>w&&(w=0);return e.toString(F[0]).substr(0,
w)})};C.right=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,2,2,B,y);w=e.toNumber(F[1]);if(isNaN(w))return"";0>w&&(w=0);return e.toString(F[0]).substr(-1*w,w)})};C.split=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,2,4,B,y);w=e.toNumber(e.defaultUndefined(F[2],-1));E=e.toBoolean(e.defaultUndefined(F[3],!1));-1===w||null===w||!0===E?F=e.toString(F[0]).split(e.toString(F[1])):(isNaN(w)&&(w=-1),-1>w&&(w=-1),F=e.toString(F[0]).split(e.toString(F[1]),w));if(!1===E)return F;E=[];for(var H=
0;H<F.length&&!(-1!==w&&E.length>=w);H++)""!==F[H]&&void 0!==F[H]&&E.push(F[H]);return E})};C.text=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,1,2,B,y);return e.toStringExplicit(F[0],F[1])})};C.concatenate=function(B,y){return D(B,y,function(w,E,F){w=[];if(1>F.length)return"";if(e.isArray(F[0])){E=e.defaultUndefined(F[2],"");for(var H=0;H<F[0].length;H++)w[H]=e.toStringExplicit(F[0][H],E);return 1<F.length?w.join(F[1]):w.join("")}if(e.isImmutableArray(F[0])){E=e.defaultUndefined(F[2],"");
for(H=0;H<F[0].length();H++)w[H]=e.toStringExplicit(F[0].get(H),E);return 1<F.length?w.join(F[1]):w.join("")}for(H=0;H<F.length;H++)w[H]=e.toStringExplicit(F[H]);return w.join("")})};C.reverse=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,1,1,B,y);if(e.isArray(F[0]))return w=F[0].slice(0),w.reverse(),w;if(e.isImmutableArray(F[0]))return w=F[0].toArray().slice(0),w.reverse(),w;throw new d.ArcadeExecutionError(B,d.ExecutionErrorCodes.InvalidParameter,y);})};C.replace=function(B,y){return D(B,
y,function(w,E,F){e.pcCheck(F,3,4,B,y);w=e.toString(F[0]);E=e.toString(F[1]);var H=e.toString(F[2]);return(4===F.length?e.toBoolean(F[3]):1)?e.multiReplace(w,E,H):w.replace(E,H)})};C.schema=function(B,y){return D(B,y,function(w,E,F){if(e.isFeature(F[0]))return(w=e.featureSchema(F[0]))?h.convertObjectToArcadeDictionary(w,e.defaultTimeZone(B)):null;throw new d.ArcadeExecutionError(B,d.ExecutionErrorCodes.InvalidParameter,y);})};C.subtypes=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,1,1,B,
y);if(e.isFeature(F[0]))return(w=e.featureSubtypes(F[0]))?h.convertObjectToArcadeDictionary(w,e.defaultTimeZone(B)):null;throw new d.ArcadeExecutionError(B,d.ExecutionErrorCodes.InvalidParameter,y);})};C.subtypecode=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,1,1,B,y);if(e.isFeature(F[0])){E=e.featureSubtypes(F[0]);if(!E)return null;if(E.subtypeField&&F[0].hasField(E.subtypeField))for(F=F[0].field(E.subtypeField),w=0,E=E.subtypes;w<E.length;w++){var H=E[w];if(H.code===F)return H.code}return null}throw new d.ArcadeExecutionError(B,
d.ExecutionErrorCodes.InvalidParameter,y);})};C.subtypename=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,1,1,B,y);if(e.isFeature(F[0])){E=e.featureSubtypes(F[0]);if(!E)return"";if(E.subtypeField&&F[0].hasField(E.subtypeField))for(F=F[0].field(E.subtypeField),w=0,E=E.subtypes;w<E.length;w++){var H=E[w];if(H.code===F)return H.name}return""}throw new d.ArcadeExecutionError(B,d.ExecutionErrorCodes.InvalidParameter,y);})};C.gdbversion=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,1,
1,B,y);if(e.isFeature(F[0]))return F[0].gdbVersion();throw new d.ArcadeExecutionError(B,d.ExecutionErrorCodes.InvalidParameter,y);})};C.domain=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,2,3,B,y);if(e.isFeature(F[0]))return(w=e.featureFullDomain(F[0],e.toString(F[1]),void 0===F[2]?void 0:e.toNumber(F[2])))&&w.domain?"coded-value"===w.domain.type||"codedValue"===w.domain.type?h.convertObjectToArcadeDictionary({type:"codedValue",name:w.domain.name,dataType:l.layerFieldEsriConstants[w.field.type],
codedValues:w.domain.codedValues.map(function(H){return{name:H.name,code:H.code}})},e.defaultTimeZone(B)):h.convertObjectToArcadeDictionary({type:"range",name:w.domain.name,dataType:l.layerFieldEsriConstants[w.field.type],min:w.domain.min,max:w.domain.max},e.defaultTimeZone(B)):null;throw new d.ArcadeExecutionError(B,d.ExecutionErrorCodes.InvalidParameter,y);})};C.domainname=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,2,4,B,y);if(e.isFeature(F[0]))return e.featureDomainValueLookup(F[0],
e.toString(F[1]),F[2],void 0===F[3]?void 0:e.toNumber(F[3]));throw new d.ArcadeExecutionError(B,d.ExecutionErrorCodes.InvalidParameter,y);})};C.domaincode=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,2,4,B,y);if(e.isFeature(F[0]))return e.featureDomainCodeLookup(F[0],e.toString(F[1]),F[2],void 0===F[3]?void 0:e.toNumber(F[3]));throw new d.ArcadeExecutionError(B,d.ExecutionErrorCodes.InvalidParameter,y);})};C.urlencode=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,1,1,B,y);if(null===
F[0])return"";if(F[0]instanceof h){w="";E=0;for(var H=F[0].keys();E<H.length;E++){var M=H[E],R=F[0].field(M);""!==w&&(w+="\x26");w=null===R?w+(encodeURIComponent(M)+"\x3d"):w+(encodeURIComponent(M)+"\x3d"+encodeURIComponent(R))}return w}return encodeURIComponent(e.toString(F[0]))})};C.hash=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,1,1,B,y);w=new n.XXH(0);A(F[0],w,{context:B,node:y,map:new Map,currentLength:0});return w.digest()})};C.convertdirection=function(B,y){return D(B,y,function(w,
E,F){e.pcCheck(F,3,3,B,y);return f.convertDirection(F[0],F[1],F[2])})};C.fromjson=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,1,1,B,y);if(!1===e.isString(F[0]))throw new d.ArcadeExecutionError(B,d.ExecutionErrorCodes.InvalidParameter,y);return h.convertJsonToArcade(JSON.parse(e.toString(F[0])),e.defaultTimeZone(B))})};C.expects=function(B,y){return D(B,y,function(w,E,F){if(1>F.length)throw new d.ArcadeExecutionError(B,d.ExecutionErrorCodes.WrongNumberOfParameters,y);return e.voidOperation})};
C.tocharcode=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,1,2,B,y);w=e.toNumber(e.defaultUndefined(F[1],0));E=e.toString(F[0]);if(0===E.length&&1===F.length)return null;if(E.length<=w||0>w)throw new d.ArcadeExecutionError(B,d.ExecutionErrorCodes.OutOfBounds,y);return E.charCodeAt(w)})};C.tocodepoint=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,1,2,B,y);w=e.toNumber(e.defaultUndefined(F[1],0));E=e.toString(F[0]);if(0===E.length&&1===F.length)return null;if(E.length<=w||0>w)throw new d.ArcadeExecutionError(B,
d.ExecutionErrorCodes.OutOfBounds,y);return E.codePointAt(w)})};C.fromcharcode=function(B,y){return D(B,y,function(w,E,F){if(1>F.length)throw new d.ArcadeExecutionError(B,d.ExecutionErrorCodes.WrongNumberOfParameters,y);w=F.map(function(H){return Math.trunc(e.toNumber(H))}).filter(function(H){return 0<=H&&65535>=H});return 0===w.length?null:String.fromCharCode.apply(null,w)})};C.fromcodepoint=function(B,y){return D(B,y,function(w,E,F){if(1>F.length)throw new d.ArcadeExecutionError(B,d.ExecutionErrorCodes.WrongNumberOfParameters,
y);try{var H=F.map(function(M){return Math.trunc(e.toNumber(M))}).filter(function(M){return 1114111>=M&&M>>>0===M})}catch(M){return null}return 0===H.length?null:String.fromCodePoint.apply(null,H)})};C.getuser=function(B,y){return D(B,y,function(w,E,F){e.pcCheck(F,0,2,B,y);w=e.defaultUndefined(F[1],"");w=!0===w||!1===w?"":e.toString(w);if(null!==w&&""!==w)return null;if(0===F.length||F[0]instanceof c){E=null;B.services&&B.services.portal&&(E=B.services.portal);if(0<F.length){F=F[0].field("url");var H=
E;F=F?(new x.Portal(F)).portalUrl===((null===H||void 0===H?void 0:H.portalUrl)||""):!1;if(!F)return null}if(!E)return null;if(""===w){a:{w=E;if(w.getPortalUser()&&(w=w.getPortalUser())){E={};F=0;for(H="username id fullName availableCredits assignedCredits firstName lastName preferredView description email idpUsername favGroupId lastLogin mfaEnabled access storageUsage storageQuota orgId role privileges".split(" ");F<H.length;F++){var M=H[F];void 0!==w[M]&&(E[M]=w[M])}w=E;break a}w=null}if(w){w=JSON.parse(JSON.stringify(w));
E=0;for(F=["lastLogin","created","modified"];E<F.length;E++)H=F[E],void 0!==w[H]&&null!==w[H]&&(w[H]=new Date(w[H]));return h.convertObjectToArcadeDictionary(w,e.defaultTimeZone(B))}}return null}throw new d.ArcadeExecutionError(B,d.ExecutionErrorCodes.InvalidParameter,y);})}}})},"esri/arcade/ArcadePortal":function(){define(["require","exports","./polyfill/tsSupport/extends","./Dictionary"],function(g,t,a,b){return function(c){function k(h){var d=c.call(this)||this;d.declaredClass="esri.arcade.Portal";
d.immutable=!1;d.setField("url",h);d.immutable=!0;return d}a(k,c);return k}(b)})},"esri/arcade/Attachment":function(){define(["require","exports","./polyfill/tsSupport/extends","./Dictionary"],function(g,t,a,b){return function(c){function k(h,d,e,l,f,n){var u=c.call(this)||this;u.attachmentUrl=f;u.declaredClass="esri.arcade.Attachment";u.immutable=!1;u.setField("id",h);u.setField("name",d);u.setField("contenttype",e);u.setField("size",l);u.setField("exifinfo",n);u.immutable=!0;return u}a(k,c);return k}(b)})},
"esri/arcade/functions/convertdirection":function(){define("require exports ../Dictionary ../executionError ../languageUtils ../polyfill/maybe".split(" "),function(g,t,a,b,c,k){function h(T){if(!1===c.isString(T))throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.InvalidParameter,null);return T}function d(T,Y){Y=Math.pow(10,Y);return Math.round(T*Y)/Y}function e(T){var Y=parseFloat,ja=T.toString(),pa=ja.replace;var ta=+T;ta=isFinite(ta)?ta-ta%1||(0>ta?-0:0===ta?ta:0):ta;Y=Y(pa.call(ja,ta.toString(),
"0"))*((0<T)-(0>T)||+T);return 0>T?{fraction:Y,integer:Math.ceil(T)}:{fraction:Y,integer:Math.floor(T)}}function l(T,Y){switch(T){case 0:return"SHORT"===Y?"N":"North";case 1:return"SHORT"===Y?"E":"East";case 2:return"SHORT"===Y?"S":"South";case 3:return"SHORT"===Y?"W":"West"}}function f(T,Y,ja){for(;T.length<ja;)T=Y+T;return T}function n(T,Y){return T-Math.floor(T/Y)*Y}function u(T){switch(T){case 6:case 1:return 360;case 4:return H;case 5:return 400;case 2:return 1296E3;case 7:return 60;case 8:return 60;
default:throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.LogicError,null,{reason:"unsupported evaluations"});}}function p(T){switch(T.toUpperCase().trim()){case "NORTH":case "NORTHAZIMUTH":case "NORTH AZIMUTH":return 1;case "POLAR":return 2;case "QUADRANT":return 3;case "SOUTH":case "SOUTHAZIMUTH":case "SOUTH AZIMUTH":return 4}throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.LogicError,null,{reason:"unsupported directionType"});}function r(T){switch(T.toUpperCase().trim()){case "D":case "DD":case "DECIMALDEGREE":case "DECIMAL DEGREE":case "DEGREE":case "DECIMALDEGREES":case "DECIMAL DEGREES":case "DEGREES":return 1;
case "DMS":case "DEGREESMINUTESSECONDS":case "DEGREES MINUTES SECONDS":return 3;case "R":case "RAD":case "RADS":case "RADIAN":case "RADIANS":return 4;case "G":case "GON":case "GONS":case "GRAD":case "GRADS":case "GRADIAN":case "GRADIANS":return 5}throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.LogicError,null,{reason:"unsupported units"});}function q(T,Y,ja){var pa=null;switch(Y){case 1:pa=t.preciseMultiply(T,3600);break;case 2:pa=T;break;case 5:pa=t.preciseMultiply(T,3240);break;case 4:pa=
t.preciseMultiply(T,M);break;default:throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}switch(ja){case 1:return t.preciseDivide(pa,3600);case 2:return pa;case 5:return t.preciseDivide(pa,3240);case 4:return pa/M;default:throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}}function m(T){k.assertIsSome(T);switch(T){case 1:case 6:case 3:return 1;case 5:return 5;case 7:return 7;case 4:return 4;
case 2:case 8:return 2}}function v(T){switch(c.toNumber(T)){case 1:return{first:0,second:1};case 2:return{first:2,second:1};case 3:return{first:2,second:3};case 4:return{first:0,second:3}}return null}function x(T){switch(T.toUpperCase().trim()){case "N":case "NORTH":return 0;case "E":case "EAST":return 1;case "S":case "SOUTH":return 2;case "W":case "WEST":return 3}return null}function z(T){T=parseFloat(T);if(c.isNumber(T)){if(isNaN(T))throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.LogicError,
null,{reason:"invalid conversion"});return T}throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}function A(T,Y,ja){var pa=3===ja,ta=null,W=null,S=0,ea=0;ea=0;if(pa){if(2>T.length)throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});ea=1;(W=v(c.toString(T[T.length-1])))?(ta=W.first,W=W.second):(S=1,ta=x(c.toString(T[0])),W=x(c.toString(T[T.length-1])));if(null===ta||null===W)throw new b.ArcadeExecutionError(null,
b.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}switch(Y){case 1:case 4:case 5:if(0===T.length)break;return pa?Q.createFromAngleMeridianAndDirection(U.createFromAngleAndUnits(z(T[S]),m(Y)),ta,W):Q.createFromAngleAndDirection(U.createFromAngleAndUnits(z(T[S]),m(Y)),ja);case 3:ea=T.length-ea-S;if(3===ea)return T=U.createFromDegreesMinutesSeconds(z(T[S]),z(T[S+1]),z(T[S+2])),pa?Q.createFromAngleMeridianAndDirection(T,ta,W):Q.createFromAngleAndDirection(T,ja);if(1===ea)return T=
z(T[S]),T=X.numberToDms(T),T=U.createFromDegreesMinutesSeconds(T.m_degrees,T.m_minutes,T.m_seconds),pa?Q.createFromAngleMeridianAndDirection(T,ta,W):Q.createFromAngleAndDirection(T,ja)}throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}function C(T){for(var Y=[" ","-","/","'",'"',"\\","^","\u00b0",R,"\t","\r","\n","*"],ja="",pa=0;pa<T.length;pa++){var ta=T.charAt(pa);ja=Y.includes(ta)?ja+"RRSPLITRRSPLITRR":ja+ta}return ja.split("RRSPLITRRSPLITRR").filter(function(W){return""!==
W})}function D(T,Y,ja){for(var pa={padding:0,rounding:0,newpos:Y},ta=!1;Y<T.length;){var W=T[Y];if(W===ja)ta?pa.rounding++:pa.padding++,Y++;else if("."===W)ta=!0,Y++;else break}pa.newpos=Y-1;return pa}Object.defineProperty(t,"__esModule",{value:!0});t.convertDirection=t.preciseDivide=t.preciseMultiply=t.preciseMinus=t.preciseAdd=void 0;var B=function(T){return function(Y,ja,pa){pa=pa||14;return+T(Y,ja).toFixed(pa)}},y=function(T,Y){return T+Y},w=function(T,Y){return T-Y},E=function(T,Y){return T*
Y},F=function(T,Y){return T/Y};t.preciseAdd=function(T,Y,ja){return B(y)(T,Y,ja)};t.preciseMinus=function(T,Y,ja){return B(w)(T,Y,ja)};t.preciseMultiply=function(T,Y,ja){return B(E)(T,Y,ja)};t.preciseDivide=function(T,Y,ja){return B(F)(T,Y,ja)};var H=2*Math.PI,M=648E3/Math.PI,R=String.fromCharCode(7501),V;(function(T){T[T.north=0]="north";T[T.east=1]="east";T[T.south=2]="south";T[T.west=3]="west"})(V||(V={}));var da;(function(T){T[T.decimal_degrees=1]="decimal_degrees";T[T.seconds=2]="seconds";T[T.degrees_minutes_seconds=
3]="degrees_minutes_seconds";T[T.radians=4]="radians";T[T.gradians=5]="gradians";T[T.truncated_degrees=6]="truncated_degrees";T[T.fractional_degree_minutes=7]="fractional_degree_minutes";T[T.fractional_minute_seconds=8]="fractional_minute_seconds"})(da||(da={}));var ha;(function(T){T[T.north_azimuth=1]="north_azimuth";T[T.polar=2]="polar";T[T.quadrant=3]="quadrant";T[T.south_azimuth=4]="south_azimuth"})(ha||(ha={}));var fa;(function(T){T[T.meridian=0]="meridian";T[T.direction=1]="direction"})(fa||
(fa={}));var X=function(){function T(Y,ja,pa){this.m_degrees=Y;this.m_minutes=ja;this.m_seconds=pa}T.prototype.getField=function(Y){switch(Y){case 1:case 6:return this.m_degrees;case 7:return this.m_minutes;case 2:case 8:return this.m_seconds;default:throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}};T.secondsToDMS=function(Y){var ja=e(Y).fraction;Y=e(Y).integer;var pa=Math.floor(Y/3600);Y-=3600*pa;var ta=Math.floor(Y/60);return new T(pa,
ta,Y-60*ta+ja)};T.numberToDms=function(Y){var ja=e(Y).fraction;Y=e(Y).integer;var pa=t.preciseMultiply(e(100*ja).fraction,100);ja=e(100*ja).integer;return new T(Y,ja,pa)};T.prototype.format=function(Y,ja){ja=d(this.m_seconds,ja);var pa=this.m_minutes,ta=this.m_degrees;if(2===Y||8===Y)60<=ja&&(ja-=60,++pa),60<=pa&&(pa=0,++ta),360<=ta&&(ta=0);else if(7===Y)ja=0,pa=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,ta=this.m_degrees,60<=pa&&(pa=0,++ta),360<=ta&&(ta=0);else if(1===Y||6===Y)Y=t.preciseDivide(this.m_seconds,
3600),ja=t.preciseDivide(this.m_minutes,60),ta=Math.round(this.m_degrees+ja+Y),ja=pa=0;return new T(ta,pa,ja)};T.dmsToSeconds=function(Y,ja,pa){return 3600*Y+60*ja+pa};return T}(),ca=function(){function T(Y,ja,pa){this.meridian=Y;this.angle=ja;this.direction=pa}T.prototype.fetchAzimuth=function(Y){return Y===fa.meridian?this.meridian:this.direction};return T}(),Q=function(){function T(Y){this._angle=Y}T.createFromAngleAndDirection=function(Y,ja){return new T(new U(T._convertDirectionFormat(Y.extractAngularUnits(2),
ja,1)))};T.prototype.getAngle=function(Y){var ja=this._angle.extractAngularUnits(2);switch(Y){case 1:case 4:case 2:return Y=new U(T._convertDirectionFormat(ja,1,Y));case 3:return Y=T.secondsNorthAzimuthToQuadrant(ja),Y=new U(Y.angle)}};T.prototype.getMeridian=function(Y){var ja=this._angle.extractAngularUnits(2);switch(Y){case 1:return 0;case 4:return 2;case 2:return 1;case 3:return T.secondsNorthAzimuthToQuadrant(ja).meridian}};T.prototype.getDirection=function(Y){var ja=this._angle.extractAngularUnits(2);
switch(Y){case 1:return 1;case 4:return 3;case 2:return 0;case 3:return T.secondsNorthAzimuthToQuadrant(ja).direction}};T.secondsNorthAzimuthToQuadrant=function(Y){var ja=324E3>=Y||972E3<=Y?0:2;return new ca(ja,0===ja?Math.min(1296E3-Y,Y):Math.abs(Y-648E3),648E3<Y?3:1)};T.createFromAngleMeridianAndDirection=function(Y,ja,pa){return new T(new U(T.secondsQuadrantToNorthAzimuth(Y.extractAngularUnits(2),ja,pa)))};T.secondsQuadrantToNorthAzimuth=function(Y,ja,pa){return 0===ja?1===pa?Y:1296E3-Y:1===pa?
648E3-Y:648E3+Y};T._convertDirectionFormat=function(Y,ja,pa){var ta=0;switch(ja){case 1:ta=Y;break;case 2:ta=324E3-Y;break;case 3:throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});case 4:ta=Y+648E3}Y=0;switch(pa){case 1:Y=ta;break;case 2:Y=324E3-ta;break;case 3:throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});case 4:Y=ta-648E3}Y%=1296E3;return 0>Y?1296E3+Y:Y};return T}(),U=function(){function T(Y){this._seconds=
Y}T.createFromAngleAndUnits=function(Y,ja){return new T(q(Y,ja,2))};T.prototype.extractAngularUnits=function(Y){return q(this._seconds,2,m(Y))};T.createFromDegreesMinutesSeconds=function(Y,ja,pa){return new T(t.preciseAdd(t.preciseAdd(t.preciseMultiply(Y,3600),t.preciseMultiply(ja,60)),pa))};return T}(),ia=function(){function T(Y,ja,pa,ta){this.view=Y;this.angle=ja;this.merdian=pa;this.direction=ta;this._formattedDms=this._dms=null}T.createFromStringAndBearing=function(Y,ja,pa){return new T(Y,ja.getAngle(pa),
ja.getMeridian(pa),ja.getDirection(pa))};T.prototype.fetchAngle=function(){return this.angle};T.prototype.fetchMeridian=function(){return this.merdian};T.prototype.fetchDirection=function(){return this.direction};T.prototype.fetchView=function(){return this.view};T.prototype.fetchDms=function(){null===this._dms&&this._calculateDms();return this._dms};T.prototype.fetchFormattedDms=function(){null===this._formattedDms&&this._calculateDms();return this._formattedDms};T.prototype._calculateDms=function(){var Y=
null,ja=6,pa=0;for(Y=0;Y<this.view.length;Y++){var ta=this.view[Y];switch(ta){case "m":Y=D(this.view,Y,ta);ja=6===ja?7:ja;Y=Y.newpos;continue;case "s":Y=D(this.view,Y,ta),ja=8,pa=pa<Y.rounding?Y.rounding:pa,Y=Y.newpos}}this._dms=X.secondsToDMS(this.angle.extractAngularUnits(2));this._formattedDms=X.secondsToDMS(this.angle.extractAngularUnits(2)).format(ja,pa)};return T}();t.convertDirection=function(T,Y,ja){if(!(Y instanceof a))throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.InvalidParameter,
null);if(!1===Y.hasField("directionType"))throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.LogicError,null,{reason:"missing directionType"});if(!1===Y.hasField("angleType"))throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.LogicError,null,{reason:"missing angleType"});var pa=p(h(Y.field("directiontype")));Y=r(h(Y.field("angletype")));if(c.isNumber(T)){T=c.toNumber(T);if(3===pa)throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});
3===Y?(T=X.numberToDms(T),Y=Q.createFromAngleAndDirection(U.createFromDegreesMinutesSeconds(T.m_degrees,T.m_minutes,T.m_seconds),pa)):Y=Q.createFromAngleAndDirection(U.createFromAngleAndUnits(T,m(Y)),pa)}else if(c.isString(T))Y=A(C(T),Y,pa);else if(c.isArray(T))Y=A(T,Y,pa);else if(c.isImmutableArray(T))Y=A(T.toArray(),Y,pa);else throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});if(!(ja instanceof a))throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.InvalidParameter,
null);if(!1===ja.hasField("directionType"))throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.LogicError,null,{reason:"missing directionType"});if(!1===ja.hasField("outputType"))throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.LogicError,null,{reason:"missing angleType"});pa=p(h(ja.field("directiontype")));T=ja.hasField("angleType")?r(h(ja.field("angletype"))):null;var ta=h(ja.field("outputType")).toUpperCase().trim();if(!pa||!ta)throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.LogicError,
null,{reason:"conversion error"});if(!(T||"TEXT"===ta&&ja.hasField("format")))throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.LogicError,null,{reason:"invalid unit"});switch(ta){case "VALUE":if(3===pa||3===T)return ja=Y,Y=ja.getAngle(pa),3===pa&&3===T?(T=X.secondsToDMS(Y.extractAngularUnits(2)),pa=[l(ja.getMeridian(pa),"SHORT"),T.m_degrees,T.m_minutes,T.m_seconds,l(ja.getDirection(pa),"SHORT")]):3===T?(T=X.secondsToDMS(Y.extractAngularUnits(2)),pa=[T.m_degrees,T.m_minutes,T.m_seconds]):
pa=3===pa?[l(ja.getMeridian(pa),"SHORT"),Y.extractAngularUnits(T),l(ja.getDirection(pa),"SHORT")]:[Y.extractAngularUnits(T)],pa;ja=Y;if((Y=m(T))&&3!==T)pa=ja.getAngle(pa).extractAngularUnits(Y);else throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});return pa;case "TEXT":ta="";ja.hasField("format")&&(ta=c.toString(ja.field("format")));if(null===ta||""===ta){ja="";switch(T){case 1:ja=3===pa?"DD.DD\u00b0":"DDD.DD\u00b0";break;case 3:ja=3===pa?"dd\u00b0 mm' ss\"":
"ddd\u00b0 mm' ss.ss\"";break;case 4:ja="R.RR";break;case 5:ja="GGG.GG"+R;break;default:throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});}3===pa&&(ja="p "+ja+" b");ta=ja}ja=Y;T=ta;var W="",S=null,ea=null;Y=ia.createFromStringAndBearing(T,ja,pa);ta={D:1,d:6,m:7,s:8,R:4,G:5};for(ea=0;ea<T.length;ea++){var ka=T[ea];switch(ka){case "[":S=T;ka={escaped:"",newpos:ea};for(ea++;ea<S.length;){var na=S[ea];ea++;if("]"===na)break;ka.escaped+=na}ka.newpos=
ea-1;S=ka;W+=S.escaped;ea=S.newpos;continue;case "D":case "d":case "m":case "s":case "R":case "G":S=D(T,ea,ka);ea=ja.getAngle(pa);a:{ka=ta[ka];na=S.padding;var sa=S.rounding,Ca=Y,N=null;switch(ka){case 1:case 4:case 5:N=n(d(ea.extractAngularUnits(ka),sa),u(ka));ea=f(N.toFixed(sa),"0",na+sa+(0<sa?1:0));break a;case 6:case 7:N=n(Ca.fetchFormattedDms().getField(ka),u(ka));ea=f(N.toFixed(sa),"0",na+sa+(0<sa?1:0));break a;case 8:N=n(d(Ca.fetchDms().getField(ka),sa),u(ka));ea=f(N.toFixed(sa),"0",na+sa+
(0<sa?1:0));break a;default:throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}}W+=ea;ea=S.newpos;continue;case "P":case "p":W+=l(Y.fetchMeridian(),"p"===ka?"SHORT":"LONG");continue;case "B":case "b":W+=l(Y.fetchDirection(),"b"===ka?"SHORT":"LONG");continue;default:W+=ka}}return W;default:throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.InvalidParameter,null);}}})},"esri/arcade/functions/hash":function(){define(["require","exports"],
function(g,t){function a(b){for(var c=[],k=0,h=b.length;k<h;k++){var d=b.charCodeAt(k);128>d?c.push(d):2048>d?c.push(192|d>>6,128|d&63):55296>d||57344<=d?c.push(224|d>>12,128|d>>6&63,128|d&63):(k++,d=65536+((d&1023)<<10|b.charCodeAt(k)&1023),c.push(240|d>>18,128|d>>12&63,128|d>>6&63,128|d&63))}return new Uint8Array(c)}Object.defineProperty(t,"__esModule",{value:!0});t.XXH=void 0;g=function(){function b(c){this._seed=c;this._totallen=0;this._bufs=[];this.init()}b.prototype.init=function(){this._bufs=
[];this._totallen=0;return this};b.prototype.updateFloatArray=function(c){for(var k=[],h=0;h<c.length;h++){var d=c[h];isNaN(d)?k.push("NaN"):Infinity===d?k.push("Infinity"):-Infinity===d?k.push("-Infinity"):0===d?k.push("0"):k.push(d.toString(16))}this.update(a(k.join("")))};b.prototype.updateIntArray=function(c){c=Int32Array.from(c);this.update(new Uint8Array(c.buffer))};b.prototype.updateUint8Array=function(c){this.update(Uint8Array.from(c))};b.prototype.updateWithString=function(c){return this.update(a(c))};
b.prototype.update=function(c){this._bufs.push(c);this._totallen+=c.length;return this};b.prototype.digest=function(){for(var c=new Uint8Array(this._totallen),k=0,h=0,d=this._bufs;h<d.length;h++){var e=d[h];c.set(e,k);k+=e.length}this.init();return this._xxHash32(c,this._seed)};b.prototype._xxHash32=function(c,k){void 0===k&&(k=0);var h=k+374761393&4294967295,d=0;if(16<=c.length){h=[k+2654435761+2246822519&4294967295,k+2246822519&4294967295,k+0&4294967295,k-2654435761&4294967295];var e=c.length-16;
for(d=k=0;(d&4294967280)<=e;d+=4){var l=d,f=c[l+0]+(c[l+1]<<8);l=c[l+2]+(c[l+3]<<8);f=h[k]+(2246822519*f+(2246822519*l<<16))&4294967295;f=f<<13|f>>>19;h[k]=2654435761*(f&65535)+(2654435761*(f>>>16)<<16)&4294967295;k=k+1&3}h=(h[0]<<1|h[0]>>>31)+(h[1]<<7|h[1]>>>25)+(h[2]<<12|h[2]>>>20)+(h[3]<<18|h[3]>>>14)&4294967295}h=h+c.length&4294967295;for(k=c.length-4;d<=k;d+=4)l=d,f=c[l+0]+(c[l+1]<<8),l=c[l+2]+(c[l+3]<<8),h=h+(3266489917*f+(3266489917*l<<16))&4294967295,h=h<<17|h>>>15,h=668265263*(h&65535)+(668265263*
(h>>>16)<<16)&4294967295;for(;d<c.length;++d)k=c[d],h+=374761393*k,h=h<<11|h>>>21,h=2654435761*(h&65535)+(2654435761*(h>>>16)<<16)&4294967295;h^=h>>>15;h=(2246822519*(h&65535)&4294967295)+(2246822519*(h>>>16)<<16);h^=h>>>13;h=(3266489917*(h&65535)&4294967295)+(3266489917*(h>>>16)<<16);h^=h>>>16;return 0>h?h+4294967296:h};return b}();t.XXH=g})},"esri/arcgis/Portal":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/_base/Deferred dojo/_base/array dojo/_base/sniff require ../config ../kernel ../lang ../request ../urlUtils ../Evented ../IdentityManager".split(" "),
function(g,t,a,b,c,k,h,d,e,l,f,n,u){var p={options:{disableIdentityLookup:!0},requestParams:{f:"json"}},r=function(y){function w(E){y[E]||(y[E]=function(){var F=arguments;return b.when(y,function(H){Array.prototype.unshift.call(F,H.results||H);return r(c[E].apply(c,F))})})}if(!y)return y;y.then&&(y=t.delegate(y));y.total||(y.total=b.when(y,function(E){return l.isDefined(E.total)?E.total:E.length||0}));w("forEach");w("filter");w("map");w("some");w("every");return y},q={useSSL:function(y,w){var E=p&&
p.self||{};if(E&&!E.isPortal)return-1!==y.indexOf("https:")||E.allSSL?w.replace("http:","https:"):w;var F=q.getLocation(w);return-1<E.portalHostname.toLowerCase().indexOf(F.hostname.toLowerCase())&&F.port&&"80"!==F.port&&"443"!==F.port?(w=F.pathname,w=0===w.indexOf("/")?w:"/"+w,E.allSSL||-1<y.indexOf("https:")?"https://"+F.hostname+(E.httpsPort&&"443"!==E.httpsPort?":"+E.httpsPort:"")+w+F.search:"http://"+F.hostname+(E.httpPort&&"80"!==E.httpPort?":"+E.httpPort:"")+w+F.search):-1!==y.indexOf("https:")||
E.allSSL?w.replace("http:","https:"):w},formatUrl:function(y){var w=p.currentToken;return-1!==y.indexOf("null")?null:q.useSSL(window.location.protocol,w?y+(-1!==y.indexOf("?")?"\x26":"?")+("token\x3d"+w):y)},getLocation:function(y){var w=document.createElement("a");w.href=y;return{protocol:w.protocol,hostname:w.hostname,port:w.port,pathname:w.pathname,search:w.search,hash:w.hash,host:w.host}},resultsToTypedArray:function(y,w,E){E=E?E.listings||E.notifications||E.userInvitations||E.tags||E.items||
E.groups||E.comments||E.provisions||E.results||E:[];return c.map(E,function(F){F=t.mixin(F,w||{});return y?new y(F):F})},clearFieldsFromObject:function(y,w){var E,F=y.length;if(t.isArray(y))for(E=0;E<F;E++)delete w[y[E]];else for(E in y)delete w[E];return w},requestToTypedArray:function(y,w,E,F,H){return r(q.request(y,w,E).then(t.partial(q.resultsToTypedArray,F,H)))},request:function(y,w,E){if(w){w.portal&&delete w.portal;if(w.form){var F=w.form;delete w.form}if(w.hasOwnProperty("withCredentials")){var H=
w.withCredentials;delete w.withCredentials}}w=t.mixin(t.mixin({},w||{}),p.requestParams);y={url:q.useSSL(window.location.protocol,y.url||y),content:w,callbackParamName:"callback",timeout:M&&M.timeout||0,form:F};null!=H&&(y.withCredentials=H);var M=t.mixin(E||{},p.options);return f(y,M)},formatQueryParams:function(y,w,E){y=t.mixin(t.mixin({},y),t.isString(w)?{q:w}:w||{});y.q=!E&&p.extraQuery?"("+y.q+")"+p.extraQuery:y.q;return y}},m=g([],{declaredClass:"esri.arcgis.PortalComment",constructor:function(y){t.mixin(this,
y);this.url=this.item.itemUrl+"/comments/"+this.id;this.created=this.created?new Date(this.created):null}}),v=g([],{declaredClass:"esri.arcgis.PortalRating",constructor:function(y){t.mixin(this,y);this.url=this.item.itemUrl+"/rating";this.created=this.created?new Date(this.created):null}}),x=g([],{declaredClass:"esri.arcgis.PortalItem",constructor:function(y){t.mixin(this,y);this.folderId=this.ownerFolder||this.folderId;this.itemUrl=(this.portal&&this.portal.portalUrl)+"content/items/"+this.id;this.userItemUrl=
this.hasOwnProperty("ownerFolder")?this.itemUrl.replace("/content/","/content/users/"+this.owner+(this.folderId?"/"+this.folderId:"")+"/"):null;this.itemDataUrl=q.formatUrl(this.itemUrl+"/data");this.thumbnailUrl=q.formatUrl(this.itemUrl+"/info/"+this.thumbnail);this.displayName=this._getDisplayName();this.iconUrl=this._getIconUrl();this.isPremiumContent=this._getIsPremiumContent();this.created=this.created?new Date(this.created):null;this.uploaded=this.uploaded?new Date(this.uploaded):null;this.modified=
this.modified?new Date(this.modified):null},getTypeInfo:function(){var y=this.type;return{source:-1<c.indexOf(this.typeKeywords||[],"ArcGIS Server")||"Feature Collection"===y?y:null,displayName:this.displayName,iconUrl:this.iconUrl,isPremiumContent:this.isPremiumContent,premiumIconUrl:this._getPremiumIconUrl()}},addComment:function(y){var w=t.isString(y)?{comment:y}:y;return q.request(this.itemUrl+"/addComment",w,{usePost:!0}).then(t.hitch(this,function(E){return new m(t.mixin(w,{id:E.commentId,item:this}))}))},
updateComment:function(y){if(y&&y.url&&y.comment)return q.request(y.url+"/update",{comment:y.comment},{usePost:!0}).then(function(w){y.id=w.commentId;return y});throw Error();},getComments:function(){return q.requestToTypedArray(this.itemUrl+"/comments",null,null,m,{item:this})},deleteComment:function(y){if(y&&y.url)return q.request(y.url+"/delete",null,{usePost:!0});throw Error();},addRating:function(y){var w=t.isObject(y)?y:{rating:parseFloat(y)};return q.request(this.itemUrl+"/addRating",w,{usePost:!0}).then(t.hitch(this,
function(E){return new v(t.mixin(w,{id:E.ratingId,item:this}))}))},getRating:function(){return q.request(this.itemUrl+"/rating").then(t.hitch(this,function(y){return new v(t.mixin(y,{item:this}))}))},deleteRating:function(){return q.request(this.itemUrl+"/deleteRating",null,{usePost:!0})},_getDisplayName:function(){var y=this.type,w=this.typeKeywords||[],E=y;"Feature Service"===y||"Feature Collection"===y?E=w.includes("Table")?"Table":w.includes("Route Layer")?"Route Layer":w.includes("Markup")?"Markup":
"Feature Layer":"Image Service"===y?E=w.includes("Elevation 3D Layer")?"Elevation Layer":w.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===y?E="Scene Layer":"Video Service"===y?E="Video Layer":"Scene Package"===y?E="Scene Layer Package":"Stream Service"===y?E="Feature Layer":"Geoprocessing Service"===y?E=w.includes("Web Tool")?"Tool":"Geoprocessing Service":"Geoenrichment Service"===y?E="GeoEnrichment Service":"Geocoding Service"===y?E="Locator":"Microsoft Powerpoint"===
y?E="Microsoft PowerPoint":"GeoJson"===y?E="GeoJSON":"Globe Service"===y?E="Globe Layer":"Vector Tile Service"===y?E="Tile Layer":"netCDF"===y?E="NetCDF":"Map Service"===y?E=w.includes("Spatiotemporal")||!w.includes("Hosted Service")&&!w.includes("Tiled")||w.includes("Relational")?"Map Image Layer":"Tile Layer":y&&y.toLowerCase().includes("add in")?E=y.replaceAll(/(add in)/gi,"Add-In"):"datastore catalog service"===y?E="Big Data File Share":"Compact Tile Package"===y?E="Tile Package (tpkx)":"Raster function template"===
y?E="Raster Function Template":"OGCFeatureServer"===y?E="OGC Feature Layer":"web mapping application"===y&&w.includes("configurableApp")?E="Instant App":"Insights Page"===y?E="Insights Report":"Excalibur Imagery Project"===y?E="Excalibur Project":"3DTiles Service"===y?E="3D tiles layer":"3DTiles Package"===y&&(E="3D tiles package");return E},_getIconUrl:function(){var y=this.type&&this.type.toLowerCase()||"",w=this.typeKeywords||[],E=!1,F=!1,H=!1,M=!1,R=!1,V=!1;E=F=!1;0<y.indexOf("service")||"feature collection"===
y||"kml"===y||"wms"===y||"wmts"===y||"wfs"===y?(E=w.includes("Hosted Service"),"feature service"===y||"feature collection"===y||"kml"===y||"wfs"===y?(M=w.includes("Table"),F=w.includes("Route Layer"),H=w.includes("Markup"),R=w.includes("Spatiotemporal"),V=w.includes("UtilityNetwork"),y=R&&M?"spatiotemporaltable":M?"table":F?"routelayer":H?"markup":R?"spatiotemporal":V?"utilitynetwork":E?"featureshosted":"features"):"map service"===y||"wms"===y||"wmts"===y?(R=w.includes("Spatiotemporal"),F=w.includes("Relational"),
y=R||F?"mapimages":E||w.includes("Tiled")||"wmts"===y?"maptiles":"mapimages"):y="scene service"===y?w.includes("Line")?"sceneweblayerline":w.includes("3DObject")?"sceneweblayermultipatch":w.includes("Point")?"sceneweblayerpoint":w.includes("IntegratedMesh")?"sceneweblayermesh":w.includes("PointCloud")?"sceneweblayerpointcloud":w.includes("Polygon")?"sceneweblayerpolygon":w.includes("Building")?"sceneweblayerbuilding":w.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===y?w.includes("Elevation 3D Layer")?
"elevationlayer":w.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===y?"streamlayer":"vector tile service"===y?"vectortile":"datastore catalog service"===y?"datastorecollection":"geocoding service"===y?"geocodeservice":"video service"===y?w.includes("Live Stream")?"livestreamvideolayer":"videolayer":"geoprocessing service"===y?w.includes("Web Tool")?"tool":"layers":"geodata service"===y?"geodataservice":"3dtiles service"===y?w.includes("3DObject")?"3dobjecttileslayer":w.includes("IntegratedMesh")?
"integratedmeshtileslayer":"3dtileslayer":"layers"):y="web map"===y||"cityengine web scene"===y?"maps":"web scene"===y?w.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===y&&w.includes("configurableApp")?"instantapps":"web mapping application"===y||"mobile application"===y||"application"===y||"operation view"===y||"desktop application"===y?"apps":"map document"===y||"map package"===y||"published map"===y||"scene document"===y||"globe document"===y||"basemap package"===
y||"mobile basemap package"===y||"mobile map package"===y||"project package"===y||"project template"===y||"pro map"===y||"layout"===y||"layer"===y&&w.includes("ArcGIS Pro")||"explorer map"===y&&w.indexOf("Explorer Document")?"mapsgray":"service definition"===y||"shapefile"===y||"cad drawing"===y||"geojson"===y||"netcdf"===y||"administrative report"===y?"datafiles":"360 vr experience"===y?"360vr":"explorer add in"===y||"desktop add in"===y||"windows viewer add in"===y||"windows viewer configuration"===
y?"appsgray":"arcgis pro add in"===y||"arcgis pro configuration"===y?"addindesktop":"pdf"===y?"pdf":"microsoft word"===y?"word":"microsoft excel"===y?"excel":"microsoft powerpoint"===y?"ppt":"rule package"===y||"file geodatabase"===y||"sqlite geodatabase"===y||"csv collection"===y||"kml collection"===y||"windows mobile package"===y||"map template"===y||"desktop application template"===y||"gml"===y||"arcpad package"===y||"code sample"===y||"document link"===y||"earth configuration"===y||"operations dashboard add in"===
y||"rules package"===y||"workflow manager package"===y||"explorer map"===y&&w.includes("Explorer Mapping Application")||w.includes("Document")?"datafilesgray":"network analysis service"===y||"geoprocessing service"===y||"geodata service"===y||"geometry service"===y||"geoprocessing package"===y||"locator package"===y||"geoprocessing sample"===y||"workflow manager service"===y?"toolsgray":"layer"===y||"layer package"===y||"explorer layer"===y?"layersgray":"scene package"===y?"scenepackage":"3dtiles package"===
y?"3dtileslayerpackage":"3dtiles service"===y?"3dtileslayer":"mobile scene package"===y?"mobilescenepackage":"tile package"===y||"compact tile package"===y?"tilepackage":"task file"===y?"taskfile":"report template"===y?"report-template":"statistical data collection"===y?"statisticaldatacollection":"insights workbook"===y?"workbook":"insights model"===y?"insightsmodel":"insights page"===y?"insightspage":"insights theme"===y?"insightstheme":"hub initiative"===y?"hubinitiative":"hub page"===y?"hubpage":
"hub site application"===y?"hubsite":"hub event"===y?"hubevent":"hub project"===y?"hubproject":"relational database connection"===y?"relationaldatabaseconnection":"big data file share"===y?"datastorecollection":"image collection"===y?"imagecollection":"desktop style"===y?"desktopstyle":"style"===y?"style":"dashboard"===y?"dashboard":"raster function template"===y?"rasterprocessingtemplate":"vector tile package"===y?"vectortilepackage":"ortho mapping project"===y?"orthomappingproject":"ortho mapping template"===
y?"orthomappingtemplate":"solution"===y?"solutions":"geopackage"===y?"geopackage":"deep learning package"===y?"deeplearningpackage":"real time analytic"===y?"realtimeanalytics":"big data analytic"===y?"bigdataanalytics":"feed"===y?"feed":"excalibur imagery project"===y?"excaliburimageryproject":"notebook"===y?"notebook":"storymap"===y?"storymap":"survey123 add in"===y?"survey123addin":"mission"===y?"mission":"mission report"===y?"missionreport":"mission template"===y?"missiontemplate":"quickcapture project"===
y?"quickcaptureproject":"pro report"===y?"proreport":"pro report template"===y?"proreporttemplate":"urban model"===y?"urbanmodel":"web experience"===y?"experiencebuilder":"web experience template"===y?"webexperiencetemplate":"experience builder widget"===y?"experiencebuilderwidget":"experience builder widget package"===y?"experiencebuilderwidgetpackage":"workflow"===y?"workflow":"kernel gateway connection"===y?"kernelgatewayconnection":"insights script"===y?"insightsscript":"hub initiative template"===
y?"hubinitiativetemplate":"storymap theme"===y?"storymaptheme":"knowledge graph"===y?"knowledgegraph":"knowledge studio project"===y?"knowledgestudio":"native application"===y?"nativeapp":"native application installer"===y?"nativeappinstaller":"web link chart"===y?"linkchart":"knowledge graph web investigation"===y?"investigation":"ogcfeatureserver"===y?"features":"pro project"===y?"proproject":"insights workbook package"===y?"insightsworkbookpackage":"apache parquet"===y?"apacheparquet":"notebook code snippets"===
y||"notebook code snippet library"===y?"notebookcodesnippets":"suitability model"===y?"suitabilitymodel":"esri classifier definition"===y?"classifierdefinition":"esri classification schema"===y?"classificationschema":"insights data engineering workbook"===y?"dataengineeringworkbook":"insights data engineering model"===y?"dataengineeringmodel":"deep learning studio project"===y?"deeplearningproject":"discussion"===y?"discussion":"allsource project"===y?"allsourceproject":"api key"===y?"apikey":"data pipeline"===
y?"datapipelines":"group layer"===y?(E=w.includes("Map"))?"layergroup2d":"layergroup":"media layer"===y?"onlinemedialayer":"form"===y?w.includes("Survey123")?"survey":"datafilesgray":"csv"===y?"csv":"image"===y?"image":"maps";return y?h.toUrl("../css/images/item_type_icons/"+y+"16.png"):null},_getIsPremiumContent:function(){var y=this.typeKeywords,w=!1;if(-1<c.indexOf(y,"Requires Subscription")||-1<c.indexOf(y,"Requires Credits"))w=!0;return w},_getPremiumIconUrl:function(){var y=this.typeKeywords,
w;this.isPremiumContent&&(w=-1<c.indexOf(y,"Requires Credits")?"premiumcredits":"premiumitem");return w?h.toUrl("../css/images/item_type_icons/"+w+"16.png"):null},getThumbnailUrl:function(y){var w=this.thumbnailUrl;w&&y&&(w+=(-1===w.indexOf("?")?"?":"\x26")+"w\x3d"+y);return w}}),z=g([],{declaredClass:"esri.arcgis.PortalListing",constructor:function(y){t.mixin(this,y);this.id=this.itemId;this.url=(this.portal&&this.portal.portalUrl)+"content/"+(this.userItemUrl?"items/":"listings/")+this.itemId;this.commentsUrl=
this.url+"/comments";this.created=this.created?new Date(this.created):null;this.banner=this.banner?q.formatUrl(this.url+"/info/"+this.banner):"";this.thumbnail=this.thumbnail?q.formatUrl(this.url+"/info/"+this.thumbnail):"";this.largeThumbnail=this.largeThumbnail?q.formatUrl(this.url+"/info/"+this.largeThumbnail):"";this.avgRating=this.avgRating||0;this.numRatings=this.numRatings||0;this.numComments=this.numComments||0;this.listingProperties=this.listingProperties||{priceDesc:"",creditsPerTransaction:0,
licenseType:"free",trialSupported:!1,trialDuration:0,listingAccess:"private"};for(var w in this.listingProperties)this[w]&&(this.listingProperties[w]=this[w]);this.properties=this.properties||{systemRequirements:"",termsAndConditions:"",version:"1.0"};this.screenshots=c.map(this.screenshots,t.hitch(this,function(E){return q.formatUrl(this.url+"/info/"+E)}));this.vendorName=this.vendor.name;this.vendor.thumbnail=this.vendor.thumbnail?this.userItemUrl?q.formatUrl(this.portal.portalUrl+"/portals/self/resources/"+
this.vendor.thumbnail):q.formatUrl(this.url+"/vendorinfo/"+this.vendor.thumbnail):""},getComments:function(){return q.requestToTypedArray(this.commentsUrl,null,null,m,{item:this})},getVendor:function(){return this.vendor}}),A=g([],{declaredClass:"esri.arcgis.PortalProvision",constructor:function(y){t.mixin(this,y);this.created=this.created?new Date(this.created):null;this.startDate=this.startDate?new Date(this.startDate):null;this.endDate=this.endDate&&-1!==this.endDate?new Date(this.endDate):null;
this.listing=y.listing?new z(t.mixin(y.listing,{portal:this.portal})):null}}),C=g([],{declaredClass:"esri.arcgis.PortalGroup",constructor:function(y){t.mixin(this,y);this.url=(this.portal&&this.portal.portalUrl)+"community/groups/"+this.id;this.thumbnailUrl=q.formatUrl(this.url+"/info/"+this.thumbnail);this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},getMembers:function(){return q.request(this.url+"/users")},queryItems:function(y,w){y=
q.formatQueryParams({},y,w);y.q="group:"+this.id+(y.q?" "+y.q:"");return this.portal.queryItems(y)},getThumbnailUrl:function(y){var w=this.thumbnailUrl;w&&y&&(w+=(-1===w.indexOf("?")?"?":"\x26")+"w\x3d"+y);return w}}),D=g([],{declaredClass:"esri.arcgis.PortalFolder",constructor:function(y){t.mixin(this,y);this.url=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username+"/"+this.id;this.created=this.created?new Date(this.created):null},getItems:function(){return q.requestToTypedArray(this.url,
null,null,x,{portal:this.portal,folderId:this.id})}}),B=g([],{declaredClass:"esri.arcgis.PortalUser",constructor:function(y){t.mixin(this,y);this.url=(this.portal&&this.portal.portalUrl)+"community/users/"+this.username;this.userContentUrl=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username;this.thumbnailUrl=this.thumbnail?q.formatUrl(this.url+"/info/"+this.thumbnail):null;this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},
getGroups:function(){return r(q.request(this.url).then(t.hitch(this,function(y){return q.resultsToTypedArray(C,{portal:this.portal},y.groups)})))},getNotifications:function(){return q.requestToTypedArray(this.url+"/notifications",null,null,null,{portal:this.portal})},getGroupInvitations:function(){return q.requestToTypedArray(this.url+"/invitations",null,null,null,{portal:this.portal})},getTags:function(){return q.requestToTypedArray(this.url+"/tags",null,null,null,{portal:this.portal})},getFolders:function(){return r(this.getContent(null,
{num:1}).then(function(y){return y.folders}))},getItems:function(y){return r(this.getContent(y).then(function(w){return w.items}))},getItem:function(y){return q.request(this.portal.portalUrl+"content/items/"+y).then(t.hitch(this,function(w){return new x(t.mixin(w,{portal:this.portal}))}))},getContent:function(y,w){var E=this.url.replace("/community/","/content/")+(y?"/"+y:"");return q.request(E,w).then(t.hitch(this,function(F){F.folders=q.resultsToTypedArray(D,{portal:this.portal},F.folders);F.items=
q.resultsToTypedArray(x,{portal:this.portal,folderId:y},F.items);return F}))},getThumbnailUrl:function(y){var w=this.thumbnailUrl;w&&y&&(w+=(-1===w.indexOf("?")?"?":"\x26")+"w\x3d"+y);return w}});g={Portal:g([u],{declaredClass:"esri.arcgis.Portal",onLoad:function(){},onError:function(){},constructor:function(y){y=t.isObject(y)?y:{url:y};this.registerConnectEvents();p={options:{disableIdentityLookup:!0},requestParams:{f:"json"}};y.self?(p.self=y.self,t.mixin(this,{url:y.url||n.getProtocolForWebResource()+
"//"+(y.self.urlKey?y.self.urlKey+"."+y.self.customBaseUrl:y.self.portalHostname)}),this.portalUrl=-1!==this.url.indexOf("/sharing")?this.url+"/":this.url+"/sharing/rest/",y=y.self.user?this.signIn():this.init(this.url)):(y.url&&t.mixin(this,{url:y.url}),y=this.init(this.url));y.then(t.hitch(this,function(){this.emit("ready",this);this.onLoad(this)}))},init:function(y,w){y=(y||this.portalUrl).replace(/\/+$/,"");this.portalUrl=-1!==y.indexOf("/sharing")?y+"/":y+"/sharing/rest/";n.canUseXhr(this.portalUrl)||
d.defaults.io.corsEnabledServers.push(this.portalUrl.replace(/^https?:\/\//i,""));return this._getSelf(this.portalUrl).then(t.hitch(this,function(E){p.self=t.mixin({},E);(E=E.user)&&w&&(p.currentToken=w&&w.token,p.loggedInUser=new B(t.mixin(E,{portal:this,credential:w})));p.self.id&&!1===p.self.canSearchPublic&&(p.extraQuery=" AND orgid:"+p.self.id);t.mixin(this,p.self);this.thumbnailUrl=q.formatUrl(this.portalUrl+"portals/self/resources/"+this.thumbnail);this.isOrganization=this.access&&this.access.length?
!0:!1;this.created=this.created?new Date(this.created):null;this.modified=this.modified?new Date(this.modified):null;return this}),t.hitch(this,function(E){this.onError(E);throw E;}))},signIn:function(){var y=new b,w=t.hitch(this,function(){this._onSignIn().then(t.hitch(this,function(){y.resolve(p.loggedInUser)}),t.hitch(this,function(E){y.reject(E)}))});if(p&&p.self)p&&p.loggedInUser?setTimeout(function(){y.resolve(p.loggedInUser)},0):w();else this.on("load",t.hitch(this,function(){w()}));return y},
signOut:function(){p.loggedInUser.credential&&p.loggedInUser.credential.destroy();p.loggedInUser=null;p.options.disableIdentityLookup=!0;q.clearFieldsFromObject(p.self,this);p.self=null;return this.init(this.url)},getPortalUser:function(){return p.loggedInUser},addResource:function(y,w){return q.request(this.portalUrl+"portals/self/addResource",{key:y,text:w},{usePost:!0})},update:function(y){return q.request(this.portalUrl+"portals/self/update",y,{usePost:!0})},queryGroups:function(y,w){return this._queryPortal(this.portalUrl+
"community/groups",q.formatQueryParams({},y,w),C)},queryItems:function(y,w){return this._queryPortal(this.portalUrl+"search",q.formatQueryParams({},y,w),x)},queryListings:function(y){y=q.formatQueryParams({},y,!0);var w="";y.q&&-1<y.q.toLowerCase().indexOf("mylistings:true")?(y.q=y.q.toLowerCase().replace("mylistings:true",""),w="?mylistings\x3dtrue"):y.q||(y.q='""');return this._queryPortal(this.portalUrl+"content/listings"+w,y,z)},queryCustomerList:function(y,w){y=q.formatQueryParams({},y,!0);return this._queryPortal(this.portalUrl+
"portals/self/customersList",y)},getProvisions:function(){return this.getCustomers().then(t.hitch(this,function(y){return y.purchases}))},getInterests:function(){return this.getCustomers().then(t.hitch(this,function(y){return y.interests}))},getTrials:function(){return this.getCustomers().then(t.hitch(this,function(y){return y.trials}))},getCustomers:function(y){return q.request(this.portalUrl+"portals/self/customers",{status:y||"all"})},getMyPurchases:function(){return this.getPurchases().then(function(y){return y.purchases})},
getMyInterests:function(){return this.getPurchases().then(function(y){return y.interests})},getPurchases:function(){return q.request(this.portalUrl+"portals/self/purchases").then(t.hitch(this,function(y){y.interests=c.map(y.interests,function(w){return t.mixin(w.provision,{listing:w.listing})});y.purchases=c.map(y.purchases,function(w){return t.mixin(w.provision,{listing:w.listing})});y.trials=c.map(y.trials,function(w){return t.mixin(w.provision,{listing:w.listing})});y.interests=q.resultsToTypedArray(A,
{portal:this},y.interests);y.trials=q.resultsToTypedArray(A,{portal:this},y.trials);y.purchases=q.resultsToTypedArray(A,{portal:this},y.purchases);return y}))},queryUsers:function(y,w){return this._queryPortal(this.portalUrl+"community/users",q.formatQueryParams({sortField:"username"},y,w),B)},_onSignIn:function(){p.options.disableIdentityLookup=!1;p.self=null;return e.id.getCredential(this.portalUrl).then(t.hitch(this,"init",this.url)).then(function(){return p.loggedInUser},t.hitch(this,function(y){p.options.disableIdentityLookup=
!0;this.onError(y);throw y;}))},_getSelf:function(y){y+="portals/self";if(p.self){var w=new b;setTimeout(function(){w.resolve(p.self)},0)}else w=q.request(y,{culture:a.locale,withCredentials:!0});return w},_queryPortal:function(y,w,E){var F=t.mixin({num:10,start:0,sortField:"title",sortOrder:"asc"},w),H=["start","query","num","nextStart"];y=q.request(y,F).then(t.hitch(this,function(M){M.results=q.resultsToTypedArray(E,{portal:this},M);M.queryParams=t.mixin({},F);M.nextQueryParams=t.mixin(F,{start:M.nextStart});
return q.clearFieldsFromObject(H,M)}));y=t.delegate(y);y.queryParams=t.mixin({},F);y.nextQueryParams=b.when(y,function(M){return M.nextQueryParams});return r(y)}}),PortalFolder:D,PortalGroup:C,PortalItem:x,PortalUser:B,PortalComment:m,PortalRating:v,PortalUtil:q,PortalResult:r,PortalListing:z};t.mixin(t.getObject("arcgis",!0,e),g);return g})},"esri/IdentityManager":function(){define(["./IdentityManagerDialog","./kernel","./OAuthSignInHandler","dojo/_base/declare"],function(g,t,a,b){g=new g;t.id=b.safeMixin(g,
a);return t.id})},"esri/IdentityManagerDialog":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/has dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ./kernel ./lang ./domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/jsapi dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),function(g,t,a,b,c,k,h,d,e,l,f,n,u,p,r,q){t=t([r],{declaredClass:"esri.IdentityManager",_eventMap:{"dialog-cancel":["info"]},
constructor:function(m){c.mixin(this,m);this.registerConnectEvents()},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblUser}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblPwd}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
onDialogCreate:function(){},onDialogCancel:function(){},signIn:function(m,v,x){this._nls||(this._nls=q.identity);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.onDialogCreate());var z=this._loginDialog,A=x&&x.error,C=x&&x.token,D=new b(function(){z.onCancel()});if(z.open)return m=Error("BUSY"),m.name="identity-manager:busy",m.code="IdentityManager.1",m.log=!!a.isDebug,D.errback(m),D;u.hide(z.errMsg_);A&&403==A.code&&C&&(h.set(z.errMsg_,"innerHTML",this._nls.forbidden),
u.show(z.errMsg_));z.dfd_=D;z.serverInfo_=v;z.resUrl_=m;z.admin_=x&&x.isAdmin;h.set(z.resLink_,{title:m,innerHTML:"("+(this.getResourceName(m)||this._nls.lblItem)+")"});h.set(z.serverLink_,{title:v.server,innerHTML:(-1!==v.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":v.server)+" "});z.txtPwd_.set("value","");z.show();return D},_createLoginDialog:function(){var m=this._nls,v=n.substitute(m,this._dialogContent);v=n.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",
server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},v);var x=new l({title:m.title,content:v,"class":"esriSignInDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(z){z.charOrCode===d.ENTER&&this.execute_()},execute_:function(){var z=this.txtUser_.get("value"),A=this.txtPwd_.get("value"),C=this.dfd_,D=this;if(this.form_.validate()&&z&&A){this.btnSubmit_.set("label",m.lblSigning);var B=f.id.findCredential(D.resUrl_,z),y=function(w){D.btnSubmit_.set("label",
m.lblOk);D.btnSubmit_.set("disabled",!1);u.hide(D.errMsg_);D.hide();l._DialogLevelManager.hide(D);var E=D.serverInfo_;D.dfd_=D.serverInfo_=D.generateDfd_=D.resUrl_=null;var F=B;if(w){var H=w.token;var M=n.isDefined(w.expires)?Number(w.expires):null;var R=!!w.ssl;F?(F.userId=z,F.token=H,F.expires=M,F.validity=w.validity,F.ssl=R,F.creationTime=(new Date).getTime()):F=new p({userId:z,server:E.server,token:H,expires:M,ssl:R,isAdmin:D.admin_,validity:w.validity})}C.callback(F)};B&&!B._enqueued?y():(D.btnSubmit_.set("disabled",
!0),D.generateDfd_=f.id.generateToken(this.serverInfo_,{username:z,password:A},{isAdmin:this.admin_}).addCallback(y).addErrback(function(w){D.btnSubmit_.set("disabled",!1);D.generateDfd_=null;D.btnSubmit_.set("label",m.lblOk);h.set(D.errMsg_,"innerHTML",w&&w.code?m.invalidUser:m.noAuthService);u.show(D.errMsg_)}))}},cancel_:function(){x.generateDfd_&&x.generateDfd_.cancel();var z=x.dfd_,A=x.resUrl_,C=x.serverInfo_;x.btnSubmit_.set("disabled",!1);x.dfd_=x.serverInfo_=x.generateDfd_=x.resUrl_=null;
u.hide(x.errMsg_);l._DialogLevelManager.hide(x);x.esriIdMgr_.onDialogCancel({resourceUrl:A,serverInfo:C});A=Error("ABORTED");A.name="identity-manager:user-aborted";A.code="IdentityManager.2";A.log=!!a.isDebug;z.errback(A)}});v=x.domNode;x.form_=e.byNode(g.query(".esriIdForm",v)[0]);x.txtUser_=e.byNode(g.query(".esriIdUser",v)[0]);x.txtPwd_=e.byNode(g.query(".esriIdPwd",v)[0]);x.btnSubmit_=e.byNode(g.query(".esriIdSubmit",v)[0]);x.btnCancel_=e.byNode(g.query(".esriIdCancel",v)[0]);x.resLink_=g.query(".resLink",
v)[0];x.serverLink_=g.query(".serverLink",v)[0];x.errMsg_=g.query(".esriErrorMsg",v)[0];x.connect(x.txtUser_,"onKeyPress",x.keypressed_);x.connect(x.txtPwd_,"onKeyPress",x.keypressed_);x.connect(x.btnSubmit_,"onClick",x.execute_);x.connect(x.btnCancel_,"onClick",x.onCancel);x.connect(x,"onCancel",x.cancel_);return x}});return f.IdentityManagerDialog=f.IdentityManager=t})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/touch dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(g,t,a,b,c,k,h,d,e,l,f,n,u,p,r,q,m,v,x,z,A,C,D,B,y,w,E,F,H,M,R){function V(){}var da=new c;da.resolve(!0);C=b("dijit._DialogBase"+(q("dojo-bidi")?"_NoBidi":""),[B,w,E,y],{templateString:R,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:C.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(ca){this._set("draggable",ca)},maxRatio:.9,
closable:!0,_setClosableAttr:function(ca){this.closeButtonNode.style.display=ca?"":"none";this._set("closable",ca)},postMixInProperties:function(){var ca=f.getLocalization("dijit","common");u.mixin(this,ca);this.inherited(arguments)},postCreate:function(){e.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);a.after(this,"onExecute",u.hitch(this,"hide"),!0);a.after(this,"onCancel",u.hitch(this,"hide"),!0);p(this.closeButtonNode,
m.press,function(ca){ca.stopPropagation()});this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&fa.isTop(this)&&(this._getFocusItems(),A.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();A.focus(this._firstFocusItem)},_endDrag:function(){var ca=d.position(this.domNode),Q=v.getBox(this.ownerDocument);ca.y=Math.min(Math.max(ca.y,0),Q.h-ca.h);ca.x=Math.min(Math.max(ca.x,0),Q.w-ca.w);this._relativePosition=ca;this._position()},
_setup:function(){var ca=this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==q("ie")?z:x)(ca,{handle:this.titleBar}),a.after(this._moveable,"onMoveStop",u.hitch(this,"_endDrag"),!0)):h.add(ca,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":t.map(this["class"].split(/\s/),function(Q){return Q+"_underlay"}).join(" "),_onKeyDown:u.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!h.contains(this.ownerDocumentBody,
"dojoMove")){var ca=this.domNode,Q=v.getBox(this.ownerDocument),U=this._relativePosition,ia=d.position(ca);e.set(ca,{left:Math.floor(Q.l+(U?Math.min(U.x,Q.w-ia.w):(Q.w-ia.w)/2))+"px",top:Math.floor(Q.t+(U?Math.min(U.y,Q.h-ia.h):(Q.h-ia.h)/2))+"px"})}},_onKey:function(ca){if(ca.keyCode==n.TAB){this._getFocusItems();var Q=ca.target;this._firstFocusItem==this._lastFocusItem?(ca.stopPropagation(),ca.preventDefault()):Q==this._firstFocusItem&&ca.shiftKey?(A.focus(this._lastFocusItem),ca.stopPropagation(),
ca.preventDefault()):Q!=this._lastFocusItem||ca.shiftKey||(A.focus(this._firstFocusItem),ca.stopPropagation(),ca.preventDefault())}else this.closable&&ca.keyCode==n.ESCAPE&&(this.onCancel(),ca.stopPropagation(),ca.preventDefault())},show:function(){if(this.open)return da.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),fa.hide(this));var ca=v.get(this.ownerDocument);this._modalconnects.push(p(ca,
"scroll",u.hitch(this,"resize",null)));this._modalconnects.push(p(this.domNode,"keydown",u.hitch(this,"_onKey")));e.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();this._fadeInDeferred=new c(u.hitch(this,function(){Q.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,V);ca=this._fadeInDeferred.promise;var Q=l.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:u.hitch(this,function(){fa.show(this,this.underlayAttrs)}),
onEnd:u.hitch(this,function(){this.autofocus&&fa.isTop(this)&&(this._getFocusItems(),A.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return ca},hide:function(){if(!this._alreadyInitialized||!this.open)return da.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred=new c(u.hitch(this,function(){Q.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,V);this._fadeOutDeferred.then(u.hitch(this,"onHide"));
var ca=this._fadeOutDeferred.promise;var Q=l.fadeOut({node:this.domNode,duration:this.duration,onEnd:u.hitch(this,function(){this.domNode.style.display="none";fa.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var U;U=this._modalconnects.pop();)U.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return ca},resize:function(ca){if("none"!=this.domNode.style.display){this._checkIfSingleChild();
if(!ca){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),t.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(T){T&&e.set(T,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var Q=v.getBox(this.ownerDocument);Q.w*=this.maxRatio;Q.h*=this.maxRatio;var U=d.position(this.domNode);this._shrunk=
!1;U.w>=Q.w&&(ca={w:Q.w},d.setMarginBox(this.domNode,ca),U=d.position(this.domNode),this._shrunk=!0);U.h>=Q.h&&(ca||(ca={w:U.w}),ca.h=Q.h,this._shrunk=!0);ca&&(ca.w||(ca.w=U.w),ca.h||(ca.h=U.h))}if(ca){d.setMarginBox(this.domNode,ca);Q=[];this.titleBar&&Q.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&Q.push({domNode:this.actionBarNode,region:"bottom"});U={domNode:this.containerNode,region:"center"};Q.push(U);var ia=M.marginBox2contentBox(this.domNode,ca);M.layoutChildren(this.domNode,
ia,Q);this._singleChild?(Q=M.marginBox2contentBox(this.containerNode,U),this._singleChild.resize({w:Q.w,h:Q.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();q("touch")||ca||this._position()}},_layoutChildren:function(){t.forEach(this.getChildren(),function(ca){ca.resize&&ca.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();
for(var ca;ca=this._modalconnects.pop();)ca.remove();fa.hide(this);this.inherited(arguments)}});q("dojo-bidi")&&(C=b("dijit._DialogBase",C,{_setTitleAttr:function(ca){this._set("title",ca);this.titleNode.innerHTML=ca;this.applyTextDir(this.titleNode)},_setTextDirAttr:function(ca){this._created&&this.textDir!=ca&&(this._set("textDir",ca),this.set("title",this.title))}}));var ha=b("dijit.Dialog",[H,C],{});ha._DialogBase=C;var fa=ha._DialogLevelManager={_beginZIndex:950,show:function(ca,Q){X[X.length-
1].focus=A.curNode;var U=X[X.length-1].dialog?X[X.length-1].zIndex+2:ha._DialogLevelManager._beginZIndex;e.set(ca.domNode,"zIndex",U);F.show(Q,U-1);X.push({dialog:ca,underlayAttrs:Q,zIndex:U})},hide:function(ca){if(X[X.length-1].dialog==ca){X.pop();var Q=X[X.length-1];1==X.length?F.hide():F.show(Q.underlayAttrs,Q.zIndex-1);if(ca.refocus&&(ca=Q.focus,!Q.dialog||ca&&k.isDescendant(ca,Q.dialog.domNode)||(Q.dialog._getFocusItems(),ca=Q.dialog._firstFocusItem),ca))try{ca.focus()}catch(U){}}else Q=t.indexOf(t.map(X,
function(U){return U.dialog}),ca),-1!=Q&&X.splice(Q,1)},isTop:function(ca){return X[X.length-1].dialog==ca}},X=ha._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];A.watch("curNode",function(ca,Q,U){ca=X[X.length-1].dialog;if(U&&ca&&!ca._fadeOutDeferred&&U.ownerDocument==ca.ownerDocument){do if(U==ca.domNode||h.contains(U,"dijitPopup"))return;while(U=U.parentNode);ca.focus()}});q("dijit-legacy-requires")&&r(0,function(){g(["dijit/TooltipDialog"])});return ha})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare",
"./Moveable"],function(g,t){var a=t.prototype.onMove;return g("dojo.dnd.TimedMoveable",t,{timeout:40,constructor:function(b,c){c||(c={});c.timeout&&"number"==typeof c.timeout&&0<=c.timeout&&(this.timeout=c.timeout)},onMoveStop:function(b){b._timer&&(clearTimeout(b._timer),a.call(this,b,b._leftTop));t.prototype.onMoveStop.apply(this,arguments)},onMove:function(b,c){b._leftTop=c;if(!b._timer){var k=this;b._timer=setTimeout(function(){b._timer=null;a.call(k,b,b._leftTop)},this.timeout)}}})})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),
function(g,t,a,b,c,k){return t("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(h){var d=[];g.forEach(h||this.getChildren(),function(e){"value"in e?d.push(e):d=d.concat(this._getDescendantFormWidgets(e.getChildren()))},this);return d},reset:function(){g.forEach(this._getDescendantFormWidgets(),function(h){h.reset&&h.reset()})},validate:function(){var h=!1;return g.every(g.map(this._getDescendantFormWidgets(),function(d){d._hasBeenBlurred=!0;var e=d.disabled||!d.validate||
d.validate();e||h||(k.scrollIntoView(d.containerNode||d.domNode),d.focus(),h=!0);return e}),function(d){return d})},setValues:function(h){a.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",h)},_setValueAttr:function(h){var d={};g.forEach(this._getDescendantFormWidgets(),function(n){n.name&&(d[n.name]||(d[n.name]=[])).push(n)});for(var e in d)if(d.hasOwnProperty(e)){var l=d[e],f=b.getObject(e,!1,h);void 0!==f&&(f=[].concat(f),
"boolean"==typeof l[0].checked?g.forEach(l,function(n){n.set("value",-1!=g.indexOf(f,n._get("value")))}):l[0].multiple?l[0].set("value",f):g.forEach(l,function(n,u){n.set("value",f[u])}))}},getValues:function(){a.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var h={};g.forEach(this._getDescendantFormWidgets(),function(d){var e=d.name;if(e&&!d.disabled){var l=d.get("value");"boolean"==typeof d.checked?
/Radio/.test(d.declaredClass)?!1!==l?b.setObject(e,l,h):(l=b.getObject(e,!1,h),void 0===l&&b.setObject(e,null,h)):(d=b.getObject(e,!1,h),d||(d=[],b.setObject(e,d,h)),!1!==l&&d.push(l)):(d=b.getObject(e,!1,h),"undefined"!=typeof d?b.isArray(d)?d.push(l):b.setObject(e,[d,l],h):b.setObject(e,l,h))}});return h},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var h=g.map(this._descendants,function(d){return d.get("state")||""});return 0<=g.indexOf(h,"Error")?
"Error":0<=g.indexOf(h,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(h){this._descendants=this._getDescendantFormWidgets();g.forEach(this._descendants,function(d){d._started||d.startup()});h||this._onChildChange()},_onChildChange:function(h){h&&"state"!=h&&"disabled"!=h||this._set("state",this._getState());h&&"value"!=h&&"disabled"!=h&&"checked"!=h||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;
this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var h=this;this.own(c(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(d){d.target!=h.domNode&&h._onChildChange(d.type.replace("attrmodified-",""))}));this.watch("state",function(d,e,l){this.onValidStateChange(""==l)})},destroy:function(){this.inherited(arguments)}})})},
"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(g,t){return g("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var a=t._getTabNavigable(this.domNode);this._firstFocusItem=a.lowest||a.first||this.closeButtonNode||this.domNode;this._lastFocusItem=a.last||a.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),
function(g,t,a,b,c,k,h,d,e,l,f,n){var u=g("dijit.DialogUnderlay",[d,e],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(p){b.set(this.node,"id",p+"_underlay");this._set("dialogId",p)},_setClassAttr:function(p){this.node.className="dijitDialogUnderlay "+p;this._set("class",p)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.own(k(this.domNode,"keydown",t.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var p=this.node.style,r=this.domNode.style;r.display="none";var q=h.getBox(this.ownerDocument);r.top=q.t+"px";r.left=q.l+"px";p.width=q.w+"px";p.height=q.h+"px";r.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new l(this.domNode);var p=h.get(this.ownerDocument);this._modalConnects=[f.on("resize",t.hitch(this,"layout")),k(p,"scroll",
t.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});u.show=function(p,r){var q=u._singleton;!q||q._destroyed?q=n._underlay=u._singleton=new u(p):p&&q.set(p);c.set(q.domNode,"zIndex",r);q.open||q.show()};u.hide=function(){var p=
u._singleton;p&&!p._destroyed&&p.hide()};return u})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),function(g,t,a,b,c,k,h,d,e,l,f,n,u,p,r,q){return e("dijit.layout.ContentPane",[a,b,c],{href:"",content:"",extractContent:!1,parseOnLoad:!0,
parserScope:g._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(m,
v,x){var z=new x(m,v);return!z.href&&z._contentSetter&&z._contentSetter.parseDeferred&&!z._contentSetter.parseDeferred.isFulfilled()?z._contentSetter.parseDeferred.then(function(){return z}):z},create:function(m,v){if(!(m&&m.template||!v||"href"in m||"content"in m)){v=f.byId(v);for(var x=v.ownerDocument.createDocumentFragment();v.firstChild;)x.appendChild(v.firstChild);m=t.delegate(m,{content:x})}this.inherited(arguments,[m,v])},postMixInProperties:function(){this.inherited(arguments);var m=r.getLocalization("dijit",
"loading",this.lang);this.loadingMessage=k.substitute(this.loadingMessage,m);this.errorMessage=k.substitute(this.errorMessage,m)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&d.forEach(this._contentSetter.parseResults,function(m){m._started||m._destroyed||!t.isFunction(m.startup)||(m.startup(),m._started=!0)},this)},_startChildren:function(){d.forEach(this.getChildren(),
function(m){m._started||m._destroyed||!t.isFunction(m.startup)||(m.startup(),m._started=!0)});this._contentSetter&&d.forEach(this._contentSetter.parseResults,function(m){m._started||m._destroyed||!t.isFunction(m.startup)||(m.startup(),m._started=!0)},this)},setHref:function(m){g.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",m)},_setHrefAttr:function(m){this.cancel();this.onLoadDeferred=new l(t.hitch(this,"cancel"));this.onLoadDeferred.then(t.hitch(this,
"onLoad"));this._set("href",m);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(m){g.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",m)},_setContentAttr:function(m){this._set("href","");this.cancel();this.onLoadDeferred=new l(t.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(t.hitch(this,"onLoad"));this._setContent(m||"");this._isDownloaded=
!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(m){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},
refresh:function(){this.cancel();this.onLoadDeferred=new l(t.hitch(this,"cancel"));this.onLoadDeferred.then(t.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var m=this,v={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};t.isObject(this.ioArgs)&&t.mixin(v,this.ioArgs);var x=this._xhrDfd=(this.ioMethod||p.get)(v),z;x.then(function(A){z=A;try{return m._isDownloaded=!0,m._setContent(A,!1)}catch(C){m._onError("Content",
C)}},function(A){x.canceled||m._onError("Download",A);delete m._xhrDfd;return A}).then(function(){m.onDownloadEnd();delete m._xhrDfd;return z});delete this._hrefChanged},_onLoadHandler:function(m){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(m)}catch(v){}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(m){}},destroyDescendants:function(m){this.isLoaded&&this._onUnloadHandler();var v=this._contentSetter;d.forEach(this.getChildren(),function(x){x.destroyRecursive?
x.destroyRecursive(m):x.destroy&&x.destroy(m);x._destroyed=!0});v&&(d.forEach(v.parseResults,function(x){x._destroyed||(x.destroyRecursive?x.destroyRecursive(m):x.destroy&&x.destroy(m),x._destroyed=!0)}),delete v.parseResults);m||u.empty(this.containerNode);delete this._singleChild},_setContent:function(m,v){m=this.preprocessContent(m);this.destroyDescendants();var x=this._contentSetter;x&&x instanceof h._ContentSetter||(x=this._contentSetter=new h._ContentSetter({node:this.containerNode,_onError:t.hitch(this,
this._onError),onContentError:t.hitch(this,function(C){C=this.onContentError(C);try{this.containerNode.innerHTML=C}catch(D){}})}));var z=t.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!m.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{});z=x.set(t.isObject(m)&&m.domNode?m.domNode:m,z);var A=this;return q(z&&z.then?z:x.parseDeferred,function(){delete A._contentSetterParams;
v||(A._started&&(A._startChildren(),A._scheduleLayout()),A._onLoadHandler(m))})},preprocessContent:function(m){return m},_onError:function(m,v,x){this.onLoadDeferred.reject(v);m=this["on"+m+"Error"].call(this,v);x||m&&this._setContent(m,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),
function(g,t,a,b,c,k,h,d,e,l){return t("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var f=this.getParent();this._childOfLayoutWidget=f&&f.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(e.on("resize",k.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var f=[],n=!1;h("\x3e *",this.containerNode).some(function(u){var p=
d.byNode(u);p&&p.resize?f.push(p):!/script|link|style/i.test(u.nodeName)&&u.offsetHeight&&(n=!0)});this._singleChild=1!=f.length||n?null:f[0];a.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(f,n){this._resizeCalled=!0;this._scheduleLayout(f,n)},_scheduleLayout:function(f,n){this._isShown()?this._layout(f,n):(this._needLayout=!0,this._changeSize=f,this._resultSize=n)},_layout:function(f,n){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();
f&&b.setMarginBox(this.domNode,f);var u=this.containerNode;u===this.domNode?(n=n||{},k.mixin(n,f||{}),"h"in n&&"w"in n||(n=k.mixin(b.getMarginBox(u),n)),this._contentBox=l.marginBox2contentBox(u,n)):this._contentBox=b.getContentBox(u);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var f=this._contentBox||b.getContentBox(this.containerNode);this._singleChild.resize({w:f.w,h:f.h})}else{f=this.getChildren();for(var n,u=0;n=
f[u++];)n.resize&&n.resize()}},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var f=this.domNode,n=this.domNode.parentNode;return"none"!=f.style.display&&"hidden"!=f.style.visibility&&!a.contains(f,"dijitHidden")&&n&&n.style&&"none"!=n.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array",
"dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(g,t,a,b,c){function k(d,e){var l=d.resize?d.resize(e):a.setMarginBox(d.domNode,e);l?c.mixin(d,l):(c.mixin(d,a.getMarginBox(d.domNode)),c.mixin(d,e))}var h={marginBox2contentBox:function(d,e){var l=b.getComputedStyle(d),f=a.getMarginExtents(d,l),n=a.getPadBorderExtents(d,l);return{l:b.toPixelValue(d,l.paddingLeft),t:b.toPixelValue(d,l.paddingTop),w:e.w-(f.w+n.w),h:e.h-(f.h+n.h)}},layoutChildren:function(d,e,l,f,n){e=
c.mixin({},e);t.add(d,"dijitLayoutContainer");l=g.filter(l,function(u){return"center"!=u.region&&"client"!=u.layoutAlign}).concat(g.filter(l,function(u){return"center"==u.region||"client"==u.layoutAlign}));g.forEach(l,function(u){var p=u.domNode,r=u.region||u.layoutAlign;if(!r)throw Error("No region setting for "+u.id);var q=p.style;q.left=e.l+"px";q.top=e.t+"px";q.position="absolute";var m=t.add;var v=r;v=v.substring(0,1).toUpperCase()+v.substring(1);m.call(t,p,"dijitAlign"+v);p={};f&&f==u.id&&(p["top"==
u.region||"bottom"==u.region?"h":"w"]=n);"leading"==r&&(r=u.isLeftToRight()?"left":"right");"trailing"==r&&(r=u.isLeftToRight()?"right":"left");"top"==r||"bottom"==r?(p.w=e.w,k(u,p),e.h-=u.h,"top"==r?e.t+=u.h:q.top=e.t+e.h+"px"):"left"==r||"right"==r?(p.h=e.h,k(u,p),e.w-=u.w,"left"==r?e.l+=u.w:q.left=e.l+e.w+"px"):"client"!=r&&"center"!=r||k(u,e)})}};c.setObject("dijit.layout.utils",h);return h})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),
function(g,t,a,b,c,k,h){var d=0,e={_secureForInnerHtml:function(l){return l.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:k.empty,_setNodeContent:function(l,f){k.empty(l);if(f)if("number"==typeof f&&(f=f.toString()),"string"==typeof f&&(f=k.toDom(f,l.ownerDocument)),!f.nodeType&&t.isArrayLike(f))for(var n=f.length,u=0;u<f.length;u=n==f.length?u+1:0)k.place(f[u],l,"last");else k.place(f,l,"last");return l},_ContentSetter:b("dojo.html._ContentSetter",null,{node:"",
content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:g._scopeName,startup:!0,constructor:function(l,f){t.mixin(this,l||{});f=this.node=c.byId(this.node||f);this.id||(this.id=["Setter",f?f.id||f.tagName:"",d++].join("_"))},set:function(l,f){void 0!==l&&(this.content=l);"number"==typeof l&&(l=l.toString());f&&this._mixin(f);this.onBegin();this.setContent();return(l=this.onEnd())&&l.then?l:this.node},setContent:function(){var l=this.node;if(!l)throw Error(this.declaredClass+
": setContent given no node");try{l=e._setNodeContent(l,this.content)}catch(n){var f=this.onContentError(n);try{l.innerHTML=f}catch(u){}}this.node=l},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(a.forEach(this.parseResults,function(l){l.destroy&&l.destroy()}),delete this.parseResults);k.empty(this.node)},onBegin:function(){var l=this.content;if(t.isString(l)&&(this.cleanContent&&
(l=e._secureForInnerHtml(l)),this.extractContent)){var f=l.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);f&&(l=f[1])}this.empty();this.content=l;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(l){return"Error occurred setting content: "+l},onExecError:function(l){return"Error occurred executing scripts: "+l},_mixin:function(l){var f=
{},n;for(n in l)n in f||(this[n]=l[n])},_parse:function(){var l=this.node;try{var f={};a.forEach(["dir","lang","textDir"],function(u){this[u]&&(f[u]=this[u])},this);var n=this;this.parseDeferred=h.parse({rootNode:l,noStart:!this.startup,inherited:f,scope:this.parserScope}).then(function(u){return n.parseResults=u},function(u){n._onError("Content",u,"Error parsing in _ContentSetter#"+n.id)})}catch(u){this._onError("Content",u,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(l,f,n){l=
this["on"+l+"Error"].call(this,f);n||l&&e._setNodeContent(this.node,l,!0)}}),set:function(l,f,n){void 0==f&&(f="");"number"==typeof f&&(f=f.toString());return n?(new e._ContentSetter(t.mixin(n,{content:f,node:l}))).set():e._setNodeContent(l,f,!0)}};t.setObject("dojo.html",e);return e})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./json5 ./query ./on ./ready".split(" "),
function(g,t,a,b,c,k,h,d,e,l,f,n,u,p,r,q,m){function v(C){var D=C._nameCaseMap,B=C.prototype;if(!D||D._extendCnt<A){D=C._nameCaseMap={};for(var y in B)"_"!==y.charAt(0)&&(D[y.toLowerCase()]=y);D._extendCnt=A}return D}function x(C,D){D||(D=g);var B=D._dojoParserCtorMap||(D._dojoParserCtorMap={}),y=C.join();if(!B[y]){for(var w=[],E=0,F=C.length;E<F;E++){var H=C[E];w[w.length]=B[H]=B[H]||a.getObject(H)||~H.indexOf("/")&&D(H)}C=w.shift();B[y]=w.length?C.createSubclass?C.createSubclass(w):C.extend.apply(C,
w):C}return B[y]}new Date("X");var z=u("csp-restrictions")?p.parse:function(C){return eval("("+C+")")};var A=0;e.after(a,"extend",function(){A++},!0);p={_clearCache:function(){A++;_ctorMap={}},_functionFromScript:function(C,D){var B="",y="",w=C.getAttribute(D+"args")||C.getAttribute("args");D=C.getAttribute("with");w=(w||"").split(/\s*,\s*/);D&&D.length&&b.forEach(D.split(/\s*,\s*/),function(E){B+="with("+E+"){";y+="}"});return new Function(w,B+C.innerHTML+y)},instantiate:function(C,D,B){D=D||{};
B=B||{};var y=(B.scope||t._scopeName)+"Type",w="data-"+(B.scope||t._scopeName)+"-",E=w+"type",F=w+"mixins",H=[];b.forEach(C,function(M){var R=y in D?D[y]:M.getAttribute(E)||M.getAttribute(y);if(R){var V=M.getAttribute(F);R=V?[R].concat(V.split(/\s*,\s*/)):[R];H.push({node:M,types:R})}});return this._instantiate(H,D,B)},_instantiate:function(C,D,B,y){function w(E){D._started||B.noStart||b.forEach(E,function(F){"function"!==typeof F.startup||F._started||F.startup()});return E}C=b.map(C,function(E){var F=
E.ctor||x(E.types,B.contextRequire);if(!F)throw Error("Unable to resolve constructor for: '"+E.types.join()+"'");return this.construct(F,E.node,D,B,E.scripts,E.inherited)},this);return y?l(C).then(w):w(C)},construct:function(C,D,B,y,w,E){function F(pa){X&&a.setObject(X,pa);for(ha=0;ha<ia.length;ha++)e[ia[ha].advice||"after"](pa,ia[ha].method,a.hitch(pa,ia[ha].func),!0);for(ha=0;ha<T.length;ha++)T[ha].call(pa);for(ha=0;ha<Y.length;ha++)pa.watch(Y[ha].prop,Y[ha].func);for(ha=0;ha<ja.length;ha++)q(pa,
ja[ha].event,ja[ha].func);return pa}var H=C&&C.prototype;y=y||{};var M={};y.defaults&&a.mixin(M,y.defaults);E&&a.mixin(M,E);if(u("dom-attributes-explicit"))var R=D.attributes;else u("dom-attributes-specified-flag")?R=b.filter(D.attributes,function(pa){return pa.specified}):(E=(/^input$|^img$/i.test(D.nodeName)?D:D.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),R=b.map(E.split(/\s+/),function(pa){var ta=pa.toLowerCase();
return{name:pa,value:"LI"==D.nodeName&&"value"==pa||"enctype"==ta?D.getAttribute(ta):D.getAttributeNode(ta).value}}));var V=y.scope||t._scopeName;E="data-"+V+"-";var da={};"dojo"!==V&&(da[E+"props"]="data-dojo-props",da[E+"type"]="data-dojo-type",da[E+"mixins"]="data-dojo-mixins",da[V+"type"]="dojotype",da[E+"id"]="data-dojo-id");var ha=0,fa;V=[];for(var X,ca;fa=R[ha++];){var Q=fa.name,U=Q.toLowerCase();fa=fa.value;switch(da[U]||U){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;
case "data-dojo-props":ca=fa;break;case "data-dojo-id":case "jsid":X=fa;break;case "data-dojo-attach-point":case "dojoattachpoint":M.dojoAttachPoint=fa;break;case "data-dojo-attach-event":case "dojoattachevent":M.dojoAttachEvent=fa;break;case "class":M["class"]=D.className;break;case "style":M.style=D.style&&D.style.cssText;break;default:if(Q in H||(Q=v(C)[U]||Q),Q in H)switch(typeof H[Q]){case "string":M[Q]=fa;break;case "number":M[Q]=fa.length?Number(fa):NaN;break;case "boolean":M[Q]="false"!=fa.toLowerCase();
break;case "function":""===fa||-1!=fa.search(/[^\w\.]+/i)?M[Q]=new Function(fa):M[Q]=a.getObject(fa,!1)||new Function(fa);V.push(Q);break;default:U=H[Q];try{M[Q]=U&&"length"in U?fa?fa.split(/\s*,\s*/):[]:U instanceof Date?""==fa?new Date(""):"now"==fa?new Date:f.fromISOString(fa):U instanceof d?t.baseUrl+fa:z(fa)}catch(pa){}}else M[Q]=fa}}for(R=0;R<V.length;R++)da=V[R].toLowerCase(),D.removeAttribute(da),D[da]=null;if(ca)try{ca=z.call(y.propsThis,"{"+ca+"}"),a.mixin(M,ca)}catch(pa){throw Error(pa.toString()+
" in data-dojo-props\x3d'"+ca+"'");}a.mixin(M,B);w||(w=C&&(C._noScript||H._noScript)?[]:r("\x3e script[type^\x3d'dojo/']",D));var ia=[],T=[],Y=[],ja=[];if(w)for(ha=0;ha<w.length;ha++)da=w[ha],D.removeChild(da),B=da.getAttribute(E+"event")||da.getAttribute("event"),y=da.getAttribute(E+"prop"),ca=da.getAttribute(E+"method"),V=da.getAttribute(E+"advice"),R=da.getAttribute("type"),da=this._functionFromScript(da,E),B?"dojo/connect"==R?ia.push({method:B,func:da}):"dojo/on"==R?ja.push({event:B,func:da}):
M[B]=da:"dojo/aspect"==R?ia.push({method:ca,advice:V,func:da}):"dojo/watch"==R?Y.push({prop:y,func:da}):T.push(da);C=(w=C.markupFactory||H.markupFactory)?w(M,D,C):new C(M,D);return C.then?C.then(F):F(C)},scan:function(C,D){function B(U){if(!U.inherited){U.inherited={};var ia=U.node,T=B(U.parent);ia={dir:ia.getAttribute("dir")||T.dir,lang:ia.getAttribute("lang")||T.lang,textDir:ia.getAttribute(R)||T.textDir};for(var Y in ia)ia[Y]&&(U.inherited[Y]=ia[Y])}return U.inherited}var y=[],w=[],E={},F=(D.scope||
t._scopeName)+"Type",H="data-"+(D.scope||t._scopeName)+"-",M=H+"type",R=H+"textdir";H+="mixins";var V=C.firstChild,da=D.inherited;if(!da){da=function Y(ia,T){return ia.getAttribute&&ia.getAttribute(T)||ia.parentNode&&Y(ia.parentNode,T)};da={dir:da(C,"dir"),lang:da(C,"lang"),textDir:da(C,R)};for(var ha in da)da[ha]||delete da[ha]}ha={inherited:da};for(var fa,X;;)if(V)if(1!=V.nodeType)V=V.nextSibling;else if(fa&&"script"==V.nodeName.toLowerCase())(da=V.getAttribute("type"))&&/^dojo\/\w/i.test(da)&&
fa.push(V),V=V.nextSibling;else if(X)V=V.nextSibling;else if(da=V.getAttribute(M)||V.getAttribute(F),C=V.firstChild,da||C&&(3!=C.nodeType||C.nextSibling)){X=null;if(da){var ca=V.getAttribute(H);fa=ca?[da].concat(ca.split(/\s*,\s*/)):[da];try{X=x(fa,D.contextRequire)}catch(U){}X||b.forEach(fa,function(U){~U.indexOf("/")&&!E[U]&&(E[U]=!0,w[w.length]=U)});ca=X&&!X.prototype._noScript?[]:null;ha={types:fa,ctor:X,parent:ha,node:V,scripts:ca};ha.inherited=B(ha);y.push(ha)}else ha={node:V,scripts:fa,parent:ha};
fa=ca;X=V.stopParser||X&&X.prototype.stopParser&&!D.template;V=C}else V=V.nextSibling;else{if(!ha||!ha.node)break;V=ha.node.nextSibling;X=!1;ha=ha.parent;fa=ha.scripts}var Q=new n;w.length?(D.contextRequire||g)(w,function(){Q.resolve(b.filter(y,function(U){if(!U.ctor)try{U.ctor=x(U.types,D.contextRequire)}catch(Y){}for(var ia=U.parent;ia&&!ia.types;)ia=ia.parent;var T=U.ctor&&U.ctor.prototype;U.instantiateChildren=!(T&&T.stopParser&&!D.template);U.instantiate=!ia||ia.instantiate&&ia.instantiateChildren;
return U.instantiate}))}):Q.resolve(y);return Q.promise},_require:function(C,D){C=z("{"+C.innerHTML+"}");var B=[],y=[],w=new n;D=D&&D.contextRequire||g;for(var E in C)B.push(E),y.push(C[E]);D(y,function(){for(var F=0;F<B.length;F++)a.setObject(B[F],arguments[F]);w.resolve(arguments)});return w.promise},_scanAmd:function(C,D){var B=new n,y=B.promise;B.resolve(!0);var w=this;r("script[type\x3d'dojo/require']",C).forEach(function(E){y=y.then(function(){return w._require(E,D)});E.parentNode.removeChild(E)});
return y},parse:function(C,D){!C||"string"==typeof C||"nodeType"in C||(D=C,C=D.rootNode);var B=C?k.byId(C):h.body();D=D||{};var y=D.template?{template:!0}:{},w=[],E=this;C=this._scanAmd(B,D).then(function(){return E.scan(B,D)}).then(function(F){return E._instantiate(F,y,D,!0)}).then(function(F){return w=w.concat(F)}).otherwise(function(F){throw F;});a.mixin(w,C);return w}};t.parser=p;c.parseOnLoad&&m(100,p,"parse");return p})},"dojo/json5":function(){define(["./json5/parse"],function(g){return{parse:g}})},
"dojo/json5/parse":function(){define(["../string","./util"],function(g,t){function a(V,da,ha){var fa=V[da];if(null!=fa&&"object"===typeof fa)for(var X in fa){var ca=a(fa,X,ha);void 0===ca?delete fa[X]:fa[X]=ca}return ha.call(V,da,fa)}function b(){if(q[x])return g.fromCodePoint(g.codePointAt(q,x))}function c(){var V=b();"\n"===V?(z++,A=0):V?A+=V.length:A++;V&&(x+=V.length);return V}function k(V,da){return{type:V,value:da,line:z,column:A}}function h(V){for(var da=0;da<V.length;da++){var ha=V[da];if(b()!==
ha)throw n(c());c()}}function d(){switch(b()){case "b":return c(),"\b";case "f":return c(),"\f";case "n":return c(),"\n";case "r":return c(),"\r";case "t":return c(),"\t";case "v":return c(),"\v";case "0":c();if(t.isDigit(b()))throw n(c());return"\x00";case "x":c();var V="",da=b();if(!t.isHexDigit(da))throw n(c());V+=c();da=b();if(!t.isHexDigit(da))throw n(c());V+=c();return g.fromCodePoint(parseInt(V,16));case "u":return c(),e();case "\n":case "\u2028":case "\u2029":return c(),"";case "\r":return c(),
"\n"===b()&&c(),"";case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":throw n(c());case void 0:throw n(c());}return c()}function e(){for(var V="",da=4;0<da--;){var ha=b();if(!t.isHexDigit(ha))throw n(c());V+=c()}return g.fromCodePoint(parseInt(V,16))}function l(){switch(C.type){case "punctuator":switch(C.value){case "{":var V={};break;case "[":V=[]}break;case "null":case "boolean":case "numeric":case "string":V=C.value}if(void 0===B)B=V;else{var da=v[v.length-1];Array.isArray(da)?
da.push(V):da[D]=V}null!==V&&"object"===typeof V?(v.push(V),m=Array.isArray(V)?"beforeArrayValue":"beforePropertyName"):(V=v[v.length-1],m=null==V?"end":Array.isArray(V)?"afterArrayValue":"afterPropertyValue")}function f(){v.pop();var V=v[v.length-1];m=null==V?"end":Array.isArray(V)?"afterArrayValue":"afterPropertyValue"}function n(V){if(void 0===V)V=r("JSON5: invalid end of input at "+z+":"+A);else{var da={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v",
"\x00":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};da[V]?V=da[V]:" ">V&&(V=V.charCodeAt(0).toString(16),V="\\x"+("00"+V).substring(V.length));V=r("JSON5: invalid character '"+V+"' at "+z+":"+A)}return V}function u(){return r("JSON5: invalid end of input at "+z+":"+A)}function p(){A-=5;return r("JSON5: invalid identifier character at "+z+":"+A)}function r(V){V=new SyntaxError(V);V.lineNumber=z;V.columnNumber=A;return V}var q,m,v,x,z,A,C,D,B,y,w,E,F,H,M={"default":function(){switch(H){case "\t":case "\v":case "\f":case " ":case "\u00a0":case "\ufeff":case "\n":case "\r":case "\u2028":case "\u2029":c();
return;case "/":c();y="comment";return;case void 0:return c(),k("eof")}if(t.isSpaceSeparator(H))c();else return M[m]()},comment:function(){switch(H){case "*":c();y="multiLineComment";return;case "/":c();y="singleLineComment";return}throw n(c());},multiLineComment:function(){switch(H){case "*":c();y="multiLineCommentAsterisk";return;case void 0:throw n(c());}c()},multiLineCommentAsterisk:function(){switch(H){case "*":c();return;case "/":c();y="default";return;case void 0:throw n(c());}c();y="multiLineComment"},
singleLineComment:function(){switch(H){case "\n":case "\r":case "\u2028":case "\u2029":c();y="default";return;case void 0:return c(),k("eof")}c()},value:function(){switch(H){case "{":case "[":return k("punctuator",c());case "n":return c(),h("ull"),k("null",null);case "t":return c(),h("rue"),k("boolean",!0);case "f":return c(),h("alse"),k("boolean",!1);case "-":case "+":"-"===c()&&(F=-1);y="sign";return;case ".":w=c();y="decimalPointLeading";return;case "0":w=c();y="zero";return;case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":w=
c();y="decimalInteger";return;case "I":return c(),h("nfinity"),k("numeric",Infinity);case "N":return c(),h("aN"),k("numeric",NaN);case '"':case "'":E='"'===c();w="";y="string";return}throw n(c());},identifierNameStartEscape:function(){if("u"!==H)throw n(c());c();var V=e();switch(V){case "$":case "_":break;default:if(!t.isIdStartChar(V))throw p();}w+=V;y="identifierName"},identifierName:function(){switch(H){case "$":case "_":case "\u200c":case "\u200d":w+=c();return;case "\\":c();y="identifierNameEscape";
return}if(t.isIdContinueChar(H))w+=c();else return k("identifier",w)},identifierNameEscape:function(){if("u"!==H)throw n(c());c();var V=e();switch(V){case "$":case "_":case "\u200c":case "\u200d":break;default:if(!t.isIdContinueChar(V))throw p();}w+=V;y="identifierName"},sign:function(){switch(H){case ".":w=c();y="decimalPointLeading";return;case "0":w=c();y="zero";return;case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":w=c();y="decimalInteger";return;case "I":return c(),
h("nfinity"),k("numeric",Infinity*F);case "N":return c(),h("aN"),k("numeric",NaN)}throw n(c());},zero:function(){switch(H){case ".":w+=c();y="decimalPoint";return;case "e":case "E":w+=c();y="decimalExponent";return;case "x":case "X":w+=c();y="hexadecimal";return}return k("numeric",0*F)},decimalInteger:function(){switch(H){case ".":w+=c();y="decimalPoint";return;case "e":case "E":w+=c();y="decimalExponent";return}if(t.isDigit(H))w+=c();else return k("numeric",F*Number(w))},decimalPointLeading:function(){if(t.isDigit(H))w+=
c(),y="decimalFraction";else throw n(c());},decimalPoint:function(){switch(H){case "e":case "E":w+=c();y="decimalExponent";return}if(t.isDigit(H))w+=c(),y="decimalFraction";else return k("numeric",F*Number(w))},decimalFraction:function(){switch(H){case "e":case "E":w+=c();y="decimalExponent";return}if(t.isDigit(H))w+=c();else return k("numeric",F*Number(w))},decimalExponent:function(){switch(H){case "+":case "-":w+=c();y="decimalExponentSign";return}if(t.isDigit(H))w+=c(),y="decimalExponentInteger";
else throw n(c());},decimalExponentSign:function(){if(t.isDigit(H))w+=c(),y="decimalExponentInteger";else throw n(c());},decimalExponentInteger:function(){if(t.isDigit(H))w+=c();else return k("numeric",F*Number(w))},hexadecimal:function(){if(t.isHexDigit(H))w+=c(),y="hexadecimalInteger";else throw n(c());},hexadecimalInteger:function(){if(t.isHexDigit(H))w+=c();else return k("numeric",F*Number(w))},string:function(){switch(H){case "\\":c();w+=d();return;case '"':if(E)return c(),k("string",w);w+=c();
return;case "'":if(!E)return c(),k("string",w);w+=c();return;case "\n":case "\r":throw n(c());case void 0:throw n(c());}w+=c()},start:function(){switch(H){case "{":case "[":return k("punctuator",c())}y="value"},beforePropertyName:function(){switch(H){case "$":case "_":w=c();y="identifierName";return;case "\\":c();y="identifierNameStartEscape";return;case "}":return k("punctuator",c());case '"':case "'":E='"'===c();y="string";return}if(t.isIdStartChar(H))w+=c(),y="identifierName";else throw n(c());
},afterPropertyName:function(){if(":"===H)return k("punctuator",c());throw n(c());},beforePropertyValue:function(){y="value"},afterPropertyValue:function(){switch(H){case ",":case "}":return k("punctuator",c())}throw n(c());},beforeArrayValue:function(){if("]"===H)return k("punctuator",c());y="value"},afterArrayValue:function(){switch(H){case ",":case "]":return k("punctuator",c())}throw n(c());},end:function(){throw n(c());}},R={start:function(){if("eof"===C.type)throw u();l()},beforePropertyName:function(){switch(C.type){case "identifier":case "string":D=
C.value;m="afterPropertyName";break;case "punctuator":f();break;case "eof":throw u();}},afterPropertyName:function(){if("eof"===C.type)throw u();m="beforePropertyValue"},beforePropertyValue:function(){if("eof"===C.type)throw u();l()},beforeArrayValue:function(){if("eof"===C.type)throw u();"punctuator"===C.type&&"]"===C.value?f():l()},afterPropertyValue:function(){if("eof"===C.type)throw u();switch(C.value){case ",":m="beforePropertyName";break;case "}":f()}},afterArrayValue:function(){if("eof"===
C.type)throw u();switch(C.value){case ",":m="beforeArrayValue";break;case "]":f()}},end:function(){}};return function(V,da){q=String(V);m="start";v=[];x=0;z=1;A=0;B=D=C=void 0;do{a:for(y="default",w="",E=!1,F=1;;)if(H=b(),V=M[y]()){C=V;break a}R[m]()}while("eof"!==C.type);return"function"===typeof da?a({"":B},"",da):B}})},"dojo/json5/util":function(){define(["./unicode"],function(g){return{isSpaceSeparator:function(t){return"string"===typeof t&&g.Space_Separator.test(t)},isIdStartChar:function(t){return"string"===
typeof t&&("a"<=t&&"z">=t||"A"<=t&&"Z">=t||"$"===t||"_"===t||g.ID_Start.test(t))},isIdContinueChar:function(t){return"string"===typeof t&&("a"<=t&&"z">=t||"A"<=t&&"Z">=t||"0"<=t&&"9">=t||"$"===t||"_"===t||"\u200c"===t||"\u200d"===t||g.ID_Continue.test(t))},isDigit:function(t){return"string"===typeof t&&/[0-9]/.test(t)},isHexDigit:function(t){return"string"===typeof t&&/[0-9A-Fa-f]/.test(t)}}})},"dojo/json5/unicode":function(){define({Space_Separator:/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
ID_Continue:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/})},
"esri/Credential":function(){define(["dojo/_base/declare","dojo/has","./kernel","./IdentityManagerBase"],function(g,t,a,b){g=g(b.Credential,{});return a.Credential=g})},"esri/IdentityManagerBase":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/url dojo/sniff dojo/io-query dojo/on ./kernel ./config ./lang ./ServerInfo ./urlUtils ./deferredUtils ./request ./Evented ./OAuthCredential ./arcgis/OAuthInfo".split(" "),function(g,t,a,
b,c,k,h,d,e,l,f,n,u,p,r,q,m,v,x){var z={},A=function(w){var E=(new k(w.owningSystemUrl)).host;w=(new k(w.server)).host;var F=/.+\.arcgis\.com$/i;return F.test(E)&&F.test(w)},C=function(w,E){return!!(A(w)&&E&&b.some(E,function(F){return F.test(w.server)}))},D=null,B=null;try{D=window.localStorage,B=window.sessionStorage}catch(w){}h=g(m,{declaredClass:"esri.IdentityManagerBase",constructor:function(){this._portalConfig=a.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=[];this.credentials=
[];this._soReqs=[];this._xoReqs=[];this._portals=[];this._getOAuthLocationParams();e(window,"pageshow",a.hitch(this,this._pageShowHandler))},defaultOAuthInfo:null,defaultTokenValidity:60,tokenValidity:null,normalizeWebTierAuth:!1,_appUrlObj:p.urlToObject(window.location.href),_postMessageAuthHandle:null,_busy:null,_rejectOnPersistedPageShow:!1,_oAuthLocationParams:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/(https?:\/\/[^\/]+\/[^\/]+)\/admin\/?(\/.*)?$/i,
_adminSvcs:/\/rest\/admin\/services(\/|$)/i,_gwDomains:[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},
{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|KnowledgeGraphServer|MapServer|MissionServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer|VideoServer)).*/ig,
_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],_createDefaultOAuthInfo:!0,_hasTestedIfAppIsOnPortal:!1,registerServers:function(w){var E=this.serverInfos;E?(w=b.filter(w,function(F){return!this.findServerInfo(F.server)},this),this.serverInfos=E.concat(w)):
this.serverInfos=w;b.forEach(w,function(F){F.owningSystemUrl&&this._portals.push(F.owningSystemUrl);if(F.hasPortal){this._portals.push(F.server);var H=f.defaults.io.corsEnabledServers,M=this._getOrigin(F.tokenServiceUrl);p.canUseXhr(F.server)||H.push(F.server.replace(/^https?:\/\//i,""));p.canUseXhr(M)||H.push(M.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(w){var E=this.oAuthInfos;E?(b.forEach(w,function(F){(F=this.findOAuthInfo(F.portalUrl))&&E.splice(E.indexOf(F),1)},this),
this.oAuthInfos=E.concat(w)):this.oAuthInfos=w},registerToken:function(w){w=n.mixin({},w);var E=this._sanitizeUrl(w.server),F=this.findServerInfo(E),H=!0,M;F||(F=new u,F.server=this._getServerInstanceRoot(E),F.tokenServiceUrl=this._getTokenSvcUrl(E),F.hasPortal=!0,this.registerServers([F]));(M=this.findCredential(E,w.userId))?(delete w.server,a.mixin(M,w),H=!1):(M=new y({userId:w.userId,server:F.server,token:w.token,expires:w.expires,ssl:w.ssl,scope:this._isServerRsrc(E)?"server":"portal"}),M.resources=
[E],this.credentials.push(M));M.onTokenChange(!1);H||M.refreshServerTokens()},toJson:function(){return n.fixJson({serverInfos:b.map(this.serverInfos,function(w){return w.toJson()}),oAuthInfos:b.map(this.oAuthInfos,function(w){return w.toJson()}),credentials:b.map(this.credentials,function(w){return w.toJson()})})},initialize:function(w){if(w){a.isString(w)&&(w=JSON.parse(w));var E=w.serverInfos,F=w.oAuthInfos;w=w.credentials;if(E){var H=[];b.forEach(E,function(R){R.server&&R.tokenServiceUrl&&H.push(R.declaredClass?
R:new u(R))});H.length&&this.registerServers(H)}if(F){var M=[];b.forEach(F,function(R){R.appId&&M.push(R.declaredClass?R:new x(R))});M.length&&this.registerOAuthInfos(M)}w&&b.forEach(w,function(R){R.userId&&R.server&&R.token&&R.expires&&R.expires>(new Date).getTime()&&(R=R.declaredClass?R:new y(R),R.onTokenChange(),this.credentials.push(R))},this)}},findServerInfo:function(w){var E;w=this._sanitizeUrl(w);b.some(this.serverInfos,function(F){this._hasSameServerInstance(F.server,w)&&(E=F);return!!E},
this);return E},findOAuthInfo:function(w){var E;w=this._sanitizeUrl(w);b.some(this.oAuthInfos,function(F){this._hasSameServerInstance(F.portalUrl,w)&&(E=F);return!!E},this);return E},findCredential:function(w,E){var F;w=this._sanitizeUrl(w);var H=this._isServerRsrc(w)?"server":"portal";E?b.some(this.credentials,function(M){this._hasSameServerInstance(M.server,w)&&E===M.userId&&M.scope===H&&(F=M);return!!F},this):b.some(this.credentials,function(M){this._hasSameServerInstance(M.server,w)&&-1!==this._getIdenticalSvcIdx(w,
M)&&M.scope===H&&(F=M);return!!F},this);return F},getCredential:function(w,E){var F=!0;if(n.isDefined(E))if(a.isObject(E)){var H=!!E.token;var M=E.error;F=!1!==E.prompt}else H=E;w=this._sanitizeUrl(w);var R=new c(r._dfdCanceller),V=this._isAdminResource(w);if((H=H?this.findCredential(w):null)&&M&&498===M.code)H.destroy();else if(H)return w=Error("You are currently signed in as: '"+H.userId+"'. You do not have access to this resource: "+w),w.name="identity-manager:not-authorized",w.code="IdentityManagerBase.1",
w.httpCode=M&&M.httpCode,w.messageCode=M?M.messageCode:null,w.subcode=M?M.subcode:null,w.details=M?M.details:null,w.log=!!t.isDebug,R.errback(w),R;if(M=this._findCredential(w,E))return R.callback(M),R;var da=this.findServerInfo(w);if(da)!da.hasPortal&&da.server&&da.owningSystemUrl&&this._hasSameServerInstance(da.server,da.owningSystemUrl)&&(da.hasPortal=!0),!da.hasServer&&this._isServerRsrc(w)&&(da._restInfoDfd=this._getTokenSvcUrl(w,!0),da.hasServer=!0);else{M=this._getTokenSvcUrl(w);if(!M)return w=
Error("Unknown resource - could not find token service endpoint."),w.name="identity-manager:unknown-resource",w.code="IdentityManagerBase.2",w.log=!!t.isDebug,R.errback(w),R;da=new u;da.server=this._getServerInstanceRoot(w);a.isString(M)?(da.tokenServiceUrl=M,da.hasPortal=!0):(da._restInfoDfd=M,da.hasServer=!0);this.registerServers([da])}da.hasPortal&&void 0===da._selfReq&&(F||p.hasSameOrigin(da.tokenServiceUrl,window.location.origin)||this._gwDomains.some(function(ha){return ha.tokenServiceUrl===
da.tokenServiceUrl}))&&(da._selfReq={owningTenant:E&&E.owningTenant,selfDfd:this._getPortalSelf(da.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),w)});return this._enqueue(w,da,E,R,V)},getResourceName:function(w){return this._isRESTService(w)?w.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(w)&&w.replace(this._gwUser,"$1")||this._gwItem.test(w)&&w.replace(this._gwItem,"$1")||this._gwGroup.test(w)&&w.replace(this._gwGroup,"$1")||
""},generateToken:function(w,E,F){var H=this._rePortalTokenSvc.test(w.tokenServiceUrl),M=new k(window.location.href.toLowerCase()),R=!E;var V=w.shortLivedTokenValidity;if(E){var da=l.id.tokenValidity||V||l.id.defaultTokenValidity;da>V&&(da=V)}if(F){var ha=F.isAdmin;var fa=F.serverUrl;var X=F.token;var ca=F.ssl;w.customParameters=F.customParameters}if(ha)V=w.adminTokenServiceUrl;else{V=w.tokenServiceUrl;var Q=new k(V.toLowerCase());w.webTierAuth&&F&&F.serverUrl&&!ca&&"http"===M.scheme&&(p.hasSameOrigin(M.uri,
V,!0)||"https"===Q.scheme&&M.host===Q.host&&"7080"===M.port&&"7443"===Q.port)&&(V=V.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));R&&H&&(V=V.replace(/\/rest/i,""))}ha=a.mixin({url:V,content:a.mixin({request:"getToken",username:E&&E.username,password:E&&E.password,serverUrl:fa,token:X,expiration:da,referer:ha||H?window.location.host:null,client:ha?"referer":null,f:"json"},w.customParameters),handleAs:"json",callbackParamName:R?"callback":void 0},F&&F.ioArgs);F={usePost:!R,disableIdentityLookup:!0,
useProxy:this._useProxy(w,F)};H||(ha.withCredentials=!1);H=q(ha,F);H.addCallback(function(U){if(!U||!U.token)return U=Error("Unable to generate token"),U.name="identity-manager:authentication-failed",U.code="IdentityManagerBase.3",U.log=!!t.isDebug,U;var ia=w.server;z[ia]||(z[ia]={});E&&(z[ia][E.username]=E.password);U.validity=da;return U});H.addErrback(function(U){});return H},isBusy:function(){return!!this._busy},checkSignInStatus:function(w){var E=new c;this.checkAppAccess(w,"").then(function(F){E.resolve(F.credential)}).catch(function(F){E.reject(F)});
return E},checkAppAccess:function(w,E,F){var H=this,M=!1;return this.getCredential(w,{prompt:!1}).then(function(R){var V={f:"json"};if("portal"===R.scope)if(E&&(H._doPortalSignIn(w)||F&&F.force)){var da=R.server+"/sharing/rest/oauth2/validateAppAccess";V.client_id=E}else if(R.token)da=R.server+"/sharing/rest";else return{credential:R};else if(R.token)da=R.server+"/rest/services";else return{credential:R};R.token&&(V.token=R.token);return q({url:da,content:V,callbackParamName:"callback"},{disableIdentityLookup:!0}).then(function(ha){if(!1===
ha.valid){var fa=Error("You are currently signed in as: '"+R.userId+"'.  You do not have access to this app: '"+E+"'.");fa.name="identity-manager:not-authorized";fa.code="IdentityManagerBase.1";fa.log=!!t.isDebug;fa.details=ha;throw fa;}M=!!ha.viewOnlyUserTypeApp;return{credential:R}}).catch(function(ha){if("IdentityManagerBase.1"===ha.code||400===ha.code)throw 400===ha.code&&(ha.name="identity-manager:invalid-request"),ha;if(498===ha.code)throw R.destroy(),ha=Error("User is not signed in."),ha.name=
"identity-manager:not-authenticated",ha.code="IdentityManagerBase.6",ha.log=!!t.isDebug,ha;return{credential:R}})}).then(function(R){return{credential:R.credential,viewOnly:M}})},setProtocolErrorHandler:function(w){this._protocolFunc=w},signIn:function(){},oAuthSignIn:function(){},onCredentialCreate:function(){},onCredentialsDestroy:function(){},destroyCredentials:function(){if(this.credentials){var w=this.credentials.slice();b.forEach(w,function(E){E.destroy()})}this.onCredentialsDestroy()},enablePostMessageAuth:function(w){w||
(w="https://www.arcgis.com/sharing/rest");this._postMessageAuthHandle&&this._postMessageAuthHandle.remove();this._postMessageAuthHandle=e(window,"message",function(E){(E.origin===window.location.origin||n.endsWith(E.origin,".arcgis.com"))&&E.data&&"arcgis:auth:requestCredential"===E.data.type&&this.getCredential(w).then(function(F){E.source.postMessage({type:"arcgis:auth:credential",credential:{expires:F.expires,server:F.server,ssl:F.ssl,token:F.token,userId:F.userId}},E.origin)}).catch(function(F){E.source.postMessage({type:"arcgis:auth:error",
error:{name:F.name,message:F.message}},E.origin)})}.bind(this))},disablePostMessageAuth:function(){this._postMessageAuthHandle&&(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)},_getOAuthLocationParams:function(){var w=window.location.hash;if(w){"#"===w.charAt(0)&&(w=w.substring(1));w=d.queryToObject(w);var E=!1;if(w.access_token&&w.expires_in&&w.state&&w.hasOwnProperty("username"))try{w.state=JSON.parse(w.state),w.state.portalUrl&&(this._oAuthLocationParams=w,E=!0)}catch(H){}else if(w.error&&
w.error_description&&"access_denied"===w.error&&(E=!0,w.state))try{w.state=JSON.parse(w.state)}catch(H){}E&&(window.location.hash=w.state&&w.state.hash||"")}if(w=window.location.search){"?"===w.charAt(0)&&(w=w.substring(1));w=d.queryToObject(w);E=!1;if(w.code&&w.state)try{w.state=JSON.parse(w.state),w.state.portalUrl&&w.state.uid&&(this._oAuthLocationParams=w,E=!0)}catch(H){}else if(w.error&&w.error_description&&"access_denied"===w.error&&(E=!0,w.state))try{w.state=JSON.parse(w.state)}catch(H){}if(E){var F=
n.mixin({},w);"code error error_description message_code persist state".split(" ").forEach(function(H){delete F[H]});E=d.objectToQuery(F);window.history.replaceState(window.history.state,"",window.location.pathname+(E?"?"+E:"")+(w.state&&w.state.hash||""))}}},_getOAuthToken:function(w,E,F,H,M){w=w.replace(/^http:/i,"https:");return q({url:w+"/sharing/rest/oauth2/token",content:H&&M?{grant_type:"authorization_code",code:E,redirect_uri:H,client_id:F,code_verifier:M}:{grant_type:"refresh_token",refresh_token:E,
client_id:F}},{disableIdentityLookup:!0,usePost:!0})},_pageShowHandler:function(w){w.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow&&(w=Error("ABORTED"),w.name="identity-manager:user-aborted",w.code="IdentityManager.2",w.log=!!t.isDebug,this._errbackFunc(w))},_findCredential:function(w,E){var F=-1,H,M,R=E&&E.token;E=E&&E.resource;var V=this._isServerRsrc(w)?"server":"portal",da=b.filter(this.credentials,function(ca){return this._hasSameServerInstance(ca.server,w)&&ca.scope===V},this);w=
E||w;if(da.length)if(1===da.length){E=da[0];var ha=(H=(M=this.findServerInfo(E.server))&&M.owningSystemUrl)&&this.findCredential(H,E.userId);F=this._getIdenticalSvcIdx(w,E);if(R)-1!==F&&(E.resources.splice(F,1),this._removeResource(w,ha));else return-1===F&&E.resources.push(w),this._addResource(w,ha),E}else{var fa,X;b.some(da,function(ca){X=this._getIdenticalSvcIdx(w,ca);return-1!==X?(fa=ca,ha=(H=(M=this.findServerInfo(fa.server))&&M.owningSystemUrl)&&this.findCredential(H,fa.userId),F=X,!0):!1},
this);if(R)fa&&(fa.resources.splice(F,1),this._removeResource(w,ha));else if(fa)return this._addResource(w,ha),fa}},_findOAuthInfo:function(w){var E=this.findOAuthInfo(w);E||b.some(this.oAuthInfos,function(F){this._isIdProvider(F.portalUrl,w)&&(E=F);return!!E},this);return E},_addResource:function(w,E){E&&-1===this._getIdenticalSvcIdx(w,E)&&E.resources.push(w)},_removeResource:function(w,E){var F=-1;E&&(F=this._getIdenticalSvcIdx(w,E),-1<F&&E.resources.splice(F,1))},_useProxy:function(w,E){return E&&
E.isAdmin&&!p.hasSameOrigin(w.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(w.tokenServiceUrl)&&10.1==w.currentVersion&&!p.hasSameOrigin(w.tokenServiceUrl,window.location.href)},_getOrigin:function(w){w=new k(w);return w.scheme+"://"+w.host+(n.isDefined(w.port)?":"+w.port:"")},_getServerInstanceRoot:function(w){var E=w.toLowerCase(),F=E.indexOf(this._agsRest);-1===F&&this._isAdminResource(w)&&(F=this._agsAdmin.test(w)?w.replace(this._agsAdmin,"$1").length:w.search(this._adminSvcs));
-1!==F||p.isSecureProxyService(E)||(F=E.indexOf("/sharing"));-1===F&&"/"===E.substr(-1)&&(F=E.length-1);return-1<F?w.substring(0,F):w},_hasSameServerInstance:function(w,E){"/"===w.substr(-1)&&(w=w.slice(0,-1));w=w.toLowerCase();E=this._getServerInstanceRoot(E).toLowerCase();w=this._normalizeAGOLorgDomain(w);E=this._normalizeAGOLorgDomain(E);w=w.substr(w.indexOf(":"));E=E.substr(E.indexOf(":"));return w===E},_normalizeAGOLorgDomain:function(w){var E=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,
F=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,H=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;E.test(w)?w=w.replace(E,"https://www.arcgis.com"):F.test(w)?w=w.replace(F,"https://devext.arcgis.com"):H.test(w)&&(w=w.replace(H,"https://qaext.arcgis.com"));return w},_sanitizeUrl:function(w){var E=(f.defaults.io.proxyUrl||"").toLowerCase(),F=E?w.toLowerCase().indexOf(E+"?"):-1;-1!==F&&(w=w.substring(F+E.length+1));w=p.normalize(w);return p.urlToObject(w).path},_isRESTService:function(w){return-1<
w.indexOf(this._agsRest)},_isAdminResource:function(w){return this._agsAdmin.test(w)||this._adminSvcs.test(w)},_isServerRsrc:function(w){return this._isRESTService(w)||this._isAdminResource(w)},_isIdenticalService:function(w,E){if(this._isRESTService(w)&&this._isRESTService(E)){w=this._getSuffix(w).toLowerCase();E=this._getSuffix(E).toLowerCase();var F=w===E;F||(F=/(.*)\/(MapServer|FeatureServer).*/ig,F=w.replace(F,"$1")===E.replace(F,"$1"))}else this._isAdminResource(w)&&this._isAdminResource(E)?
F=!0:this._isServerRsrc(w)||this._isServerRsrc(E)||!this._isPortalDomain(w)||(F=!0);return F},_isPortalDomain:function(w){var E=new k(w.toLowerCase()),F=this._portalConfig;w=b.some(this._gwDomains,function(H){return H.regex.test(E.uri)});!w&&F&&(w=this._hasSameServerInstance(this._getServerInstanceRoot(F.restBaseUrl),E.uri));w||(!this._arcgisUrl&&(F=a.getObject("esri.arcgis.utils.arcgisUrl"))&&(this._arcgisUrl=(new k(F)).authority),this._arcgisUrl&&(w=this._arcgisUrl.toLowerCase()===E.authority));
w||(w=b.some(this._portals,function(H){return this._hasSameServerInstance(H,E.uri)},this));return w=w||this._agsPortal.test(E.path)},_isIdProvider:function(w,E){var F=-1,H=-1;b.forEach(this._gwDomains,function(da,ha){-1===F&&da.regex.test(w)&&(F=ha);-1===H&&da.regex.test(E)&&(H=ha)});var M=!1;if(-1<F&&-1<H)if(0===F||4===F){if(0===H||4===H)M=!0}else if(1===F){if(1===H||2===H)M=!0}else 2===F?2===H&&(M=!0):3===F&&3===H&&(M=!0);if(!M){var R=this.findServerInfo(E),V=R&&R.owningSystemUrl;V&&A(R)&&this._isPortalDomain(V)&&
this._isIdProvider(w,V)&&(M=!0)}return M},_isPublic:function(w){w=this._sanitizeUrl(w);return b.some(this._publicUrls,function(E){return E.test(w)})},_getIdenticalSvcIdx:function(w,E){var F=-1;b.some(E.resources,function(H,M){return this._isIdenticalService(w,H)?(F=M,!0):!1},this);return F},_getSuffix:function(w){return w.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(w){if(this._isRESTService(w)||this._isAdminResource(w)){var E=this._getServerInstanceRoot(w);
var F=E+"/admin/generateToken";w=E+"/rest/info";E=q({url:w,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});E.adminUrl_=F;return E}if(this._isPortalDomain(w)){var H="";b.some(this._gwDomains,function(M){M.regex.test(w)&&(H=M.tokenServiceUrl);return!!H});H||b.some(this._portals,function(M){this._hasSameServerInstance(M,w)&&(H=M+this._gwTokenUrl);return!!H},this);H||(F=w.toLowerCase().indexOf("/sharing"),-1!==F&&(H=w.substring(0,F)+this._gwTokenUrl));H||(H=this._getOrigin(w)+this._gwTokenUrl);
H&&(F=(new k(w)).port,/^http:\/\//i.test(w)&&"7080"===F&&(H=H.replace(/:7080/i,":7443")),H=H.replace(/http:/i,"https:"));return H}if(-1!==w.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"},_exchangeToken:function(w,E,F){return q({url:w+"/sharing/rest/oauth2/exchangeToken",content:{f:"json",client_id:E,token:F}},{disableIdentityLookup:!0,usePost:!0}).then(function(H){return H.token})},_getPlatformSelf:function(w,E){w=w.replace(/^http:/i,"https:");
return q({url:w+"/sharing/rest/oauth2/platformSelf",content:{f:"json",expiration:30},headers:{"X-Esri-Auth-Client-Id":E,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},withCredentials:!0},{disableIdentityLookup:!0,usePost:!0})},_getPortalSelf:function(w,E){var F="";b.some(this._gwDomains,function(H){H.regex.test(w)&&(F=H.customBaseUrl);return!!F});if(F)return E=new c,E.resolve({allSSL:!0,currentVersion:"8.4",customBaseUrl:F,portalMode:"multitenant",supportsOAuth:!0}),E;"https:"===
window.location.protocol?w=w.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(E)&&(w=w.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return q({url:w,content:{f:"json"},callbackParamName:"callback",withCredentials:!0},{disableIdentityLookup:!0})},_doPortalSignIn:function(w){var E=this._portalConfig,F=window.location.href,H=this.findServerInfo(w);return(E||this._isPortalDomain(F))&&(H?H.hasPortal||H.owningSystemUrl&&this._isPortalDomain(H.owningSystemUrl):this._isPortalDomain(w))&&
(this._isIdProvider(F,w)||E&&(this._hasSameServerInstance(this._getServerInstanceRoot(E.restBaseUrl),w)||this._isIdProvider(E.restBaseUrl,w))||p.hasSameOrigin(F,w,!0))?!0:!1},_checkProtocol:function(w,E,F,H){var M=!0;H=H?E.adminTokenServiceUrl:E.tokenServiceUrl;0!==a.trim(H).toLowerCase().indexOf("https:")||0===window.location.href.toLowerCase().indexOf("https:")||f.defaults.io.useCors&&(p.canUseXhr(H)||p.canUseXhr(p.getProxyUrl(!0).path))||(M=this._protocolFunc?!!this._protocolFunc({resourceUrl:w,
serverInfo:E}):!1,M||(w=Error("Aborted the Sign-In process to avoid sending password over insecure connection."),w.name="identity-manager:aborted",w.code="IdentityManagerBase.4",w.log=!!t.isDebug,F(w)));return M},_enqueue:function(w,E,F,H,M,R){H||(H=new c(r._dfdCanceller));H.resUrl_=w;H.sinfo_=E;H.options_=F;H.admin_=M;H.refresh_=R;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(w),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(H)):
this._xoReqs.push(H):this._doSignIn(H);return H},_doSignIn:function(w){this._busy=w;this._rejectOnPersistedPageShow=!1;var E=this,F=function(fa){var X=w.options_&&w.options_.resource,ca=w.resUrl_,Q=w.refresh_,U=!1;-1===b.indexOf(E.credentials,fa)&&(Q&&-1!==b.indexOf(E.credentials,Q)?(Q.userId=fa.userId,Q.token=fa.token,Q.expires=fa.expires,Q.validity=fa.validity,Q.ssl=fa.ssl,Q.creationTime=fa.creationTime,U=!0,fa=Q):E.credentials.push(fa));fa.resources||(fa.resources=[]);-1===fa.resources.indexOf(X||
ca)&&fa.resources.push(X||ca);fa.scope=E._isServerRsrc(ca)?"server":"portal";fa.onTokenChange();X=E._soReqs;var ia={};E._soReqs=[];b.forEach(X,function(T){if(!this._isIdenticalService(ca,T.resUrl_)){var Y=this._getSuffix(T.resUrl_);ia[Y]||(ia[Y]=!0,fa.resources.push(T.resUrl_))}},E);w.callback(fa);b.forEach(X,function(T){this._hasSameServerInstance(this._getServerInstanceRoot(ca),T.resUrl_)?T.callback(fa):this._soReqs.push(T)},E);E._busy=w.resUrl_=w.sinfo_=w.refresh_=null;if(!U)E.onCredentialCreate({credential:fa});
E._soReqs.length?E._doSignIn(E._soReqs.shift()):E._xoReqs.length&&E._doSignIn(E._xoReqs.shift())},H=function(fa){w.errback(fa);E._busy=w.resUrl_=w.sinfo_=w.refresh_=null;E._soReqs.length?E._doSignIn(E._soReqs.shift()):E._xoReqs.length&&E._doSignIn(E._xoReqs.shift())},M=function(fa,X,ca,Q){var U=w.sinfo_,ia=!w.options_||!1!==w.options_.prompt,T=U.hasPortal&&E._findOAuthInfo(w.resUrl_);if(fa)F(new y({userId:fa,server:U.server,token:ca||null,expires:n.isDefined(Q)?Number(Q):null,ssl:!!X}));else if(window!==
window.parent&&E._appUrlObj.query&&E._appUrlObj.query["arcgis-auth-origin"]&&E._appUrlObj.query["arcgis-auth-portal"]&&E._hasSameServerInstance(E._getServerInstanceRoot(E._appUrlObj.query["arcgis-auth-portal"]),w.resUrl_)){window.parent.postMessage({type:"arcgis:auth:requestCredential"},E._appUrlObj.query["arcgis-auth-origin"]);var Y=e(window,"message",function(ea){if(ea.source===window.parent&&ea.data)if("arcgis:auth:credential"===ea.data.type&&ea.data.credential.expires<Date.now()&&(ea.data.type=
"arcgis:auth:error",ea.data.error={name:"tokenExpiredError"}),"arcgis:auth:credential"===ea.data.type)Y.remove(),F(new y(ea.data.credential));else if("arcgis:auth:error"===ea.data.type){Y.remove();ea=ea.data.error;switch(ea.name){case "identity-manager:busy":case "identity-manager:not-authorized":var ka="IdentityManager.1";break;case "identity-manager:server-identification-failed":case "identity-manager:unknown-resource":case "identity-manager:user-aborted":ka="IdentityManager.2";break;case "identity-manager:authentication-failed":case "identity-manager:credential-request-failed":case "tokenExpiredError":ka=
"IdentityManager.3";"tokenExpiredError"===ea.name&&(ea.name="identity-manager:credential-request-failed",ea.message="Parent application's token has expired.");break;case "identity-manager:aborted":ka="IdentityManager.4";break;case "identity-manager:not-authenticated":ka="IdentityManager.6";break;case "identity-manager:invalid-request":ka=400}var na=Error(ea.message);na.name=ea.name;na.code=ka;na.log=!!t.isDebug;H(na)}})}else if(T){var ja=T._oAuthCred;ja||(fa=new v(T,D),X=new v(T,B),fa.isValid()&&
X.isValid()?fa.expires>X.expires?(ja=fa,X.destroy()):(ja=X,fa.destroy()):ja=fa.isValid()?fa:X,T._oAuthCred=ja);if(ja.isValid()){var pa=new y({userId:ja.userId,server:U.server,token:ja.token,expires:ja.expires,ssl:ja.ssl,_oAuthCred:ja});var ta=T.appId!==ja.appId&&E._doPortalSignIn(w.resUrl_);ta||ja.refreshToken?(ja.refreshToken?w._pendingDfd=E._getOAuthToken(U.server,ja.refreshToken,ja.appId).then(function(ea){pa.expires=Date.now()+1E3*ea.expires_in;pa.token=ea.access_token;return pa}):(fa=new c,fa.resolve(pa),
w._pendingDfd=fa),w._pendingDfd.then(function(ea){return ta?E._exchangeToken(ea.server,T.appId,ea.token).then(function(ka){ea.token=ka;return ea}).catch(function(){return ea}):ea}).then(function(ea){F(ea)}).catch(function(){ja.destroy();M()})):F(pa)}else if(E._oAuthLocationParams&&E._hasSameServerInstance(T.portalUrl,E._oAuthLocationParams.state.portalUrl)&&(E._oAuthLocationParams.access_token||E._oAuthLocationParams.code&&E._oAuthLocationParams.state.uid===ja.stateUID&&ja.codeVerifier))fa=E._oAuthLocationParams,
E._oAuthLocationParams=null,w._pendingDfd=E._processOAuthResponseParams(fa,T,U).then(function(ea){F(ea)}).catch(H);else{var W=function(){ia?w._pendingDfd=E.oAuthSignIn(w.resUrl_,U,T,w.options_).addCallbacks(F,H):(S=Error("User is not signed in."),S.name="identity-manager:not-authenticated",S.code="IdentityManagerBase.6",S.log=!!t.isDebug,H(S))};E._doPortalSignIn(w.resUrl_)?w._pendingDfd=E._getPlatformSelf(U.server,T.appId).then(function(ea){var ka=ea.portalUrl;!ka||p.hasSameOrigin(ka,window.location.origin,
!0)?(pa=new y({userId:ea.username,server:U.server,expires:Date.now()+1E3*ea.expires_in,token:ea.token}),F(pa)):W()}).catch(W):W()}}else if(ia)E._checkProtocol(w.resUrl_,U,H,w.admin_)&&(fa=w.options_,w.admin_&&(fa=fa||{},fa.isAdmin=!0),w._pendingDfd=E.signIn(w.resUrl_,U,fa).addCallbacks(F,H));else{var S=Error("User is not signed in.");S.name="identity-manager:not-authenticated";S.code="IdentityManagerBase.6";S.log=!!t.isDebug;H(S)}},R=function(){var fa=w.sinfo_,X=fa.owningSystemUrl,ca=w.options_,Q;
if(ca){var U=ca.token;var ia=ca.error;var T=ca.prompt}(Q=E._findCredential(X,{token:U,resource:w.resUrl_}))||b.some(E.credentials,function(Y){this._isIdProvider(X,Y.server)&&(Q=Y);return!!Q},E);Q?(ca=E.findCredential(w.resUrl_,Q.userId))?F(ca):C(fa,E._legacyFed)?(ca=Q.toJson(),ca.server=fa.server,ca.resources=null,F(new y(ca))):(w._pendingDfd=E.generateToken(E.findServerInfo(Q.server),null,{serverUrl:w.resUrl_,token:Q.token,ssl:Q.ssl})).addCallbacks(function(Y){F(new y({userId:Q.userId,server:fa.server,
token:Y.token,expires:n.isDefined(Y.expires)?Number(Y.expires):null,ssl:!!Y.ssl,isAdmin:w.admin_,validity:Y.validity}))},H):(E._busy=null,U&&(w.options_.token=null),(w._pendingDfd=E.getCredential(X.replace(/\/?$/,"/sharing"),{resource:w.resUrl_,owningTenant:fa.owningTenant,token:U,error:ia,prompt:T})).addCallbacks(function(Y){E._enqueue(w.resUrl_,w.sinfo_,w.options_,w,w.admin_)},function(Y){H(Y)}))};this._errbackFunc=H;var V=w.sinfo_.owningSystemUrl,da=this._isServerRsrc(w.resUrl_),ha=w.sinfo_._restInfoDfd;
ha?ha.addCallbacks(function(fa){var X=w.sinfo_;X._restInfoDfd&&(X.adminTokenServiceUrl=X._restInfoDfd.adminUrl_,X._restInfoDfd=null,X.tokenServiceUrl=a.getObject("authInfo.tokenServicesUrl",!1,fa)||a.getObject("authInfo.tokenServiceUrl",!1,fa)||a.getObject("tokenServiceUrl",!1,fa),X.shortLivedTokenValidity=a.getObject("authInfo.shortLivedTokenValidity",!1,fa),X.currentVersion=fa.currentVersion,X.owningTenant=fa.owningTenant,(fa=X.owningSystemUrl=fa.owningSystemUrl)&&E._portals.push(fa));da&&X.owningSystemUrl?
R():M()},function(){w.sinfo_._restInfoDfd=null;var fa=Error("Unknown resource - could not find token service endpoint.");fa.name="identity-manager:server-identification-failed";fa.code="IdentityManagerBase.2";fa.log=!!t.isDebug;H(fa)}):da&&V?R():w.sinfo_._selfReq?w.sinfo_._selfReq.selfDfd.then(function(fa){var X={};if(fa){var ca=fa.user&&fa.user.username;X.username=ca;X.allSSL=fa.allSSL;var Q=fa.supportsOAuth;var U=parseFloat(fa.currentVersion);if("multitenant"===fa.portalMode)var ia=fa.customBaseUrl;
w.sinfo_.currentVersion=U}w.sinfo_.webTierAuth=!!ca;return ca&&E.normalizeWebTierAuth?E.generateToken(w.sinfo_,null,{ssl:X.allSSL}).addBoth(function(T){X.portalToken=T&&T.token;X.tokenExpiration=T&&T.expires;return X}):!ca&&Q&&4.4<=U&&!E._findOAuthInfo(w.resUrl_)?E._generateOAuthInfo({portalUrl:w.sinfo_.server,customBaseUrl:ia,owningTenant:w.sinfo_._selfReq.owningTenant}).always(function(){return X}):X}).always(function(fa){w.sinfo_._selfReq=null;fa?M(fa.username,fa.allSSL,fa.portalToken,fa.tokenExpiration):
M()}):M()},_generateOAuthInfo:function(w){var E=this,F=w.portalUrl,H=w.customBaseUrl,M=w.owningTenant;if(w=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){var R=window.location.href;var V=R.indexOf("?");-1<V&&(R=R.slice(0,V));V=R.search(/\/(apps|home)\//);R=-1<V?R.slice(0,V):null}w&&R?(this._hasTestedIfAppIsOnPortal=!0,w=q({url:R+"/sharing/rest",content:{f:"json"},handleAs:"json"}).then(function(){E.defaultOAuthInfo=new x({appId:"arcgisonline",popupCallbackUrl:R+
"/home/oauth-callback.html"})})):(w=new c,w.resolve(),w=w.promise);return w.then(function(){if(E.defaultOAuthInfo)return F=F.replace(/^http:/i,"https:"),q({url:F+"/sharing/rest/oauth2/validateRedirectUri",content:{accountId:M,client_id:E.defaultOAuthInfo.appId,redirect_uri:p.getAbsoluteUrl(E.defaultOAuthInfo.popupCallbackUrl),f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(da){if(da.valid){var ha=E.defaultOAuthInfo.clone();ha.portalUrl=da.urlKey&&H?"https://"+da.urlKey.toLowerCase()+
"."+H:F;ha.popup=window!==window.top||!(p.hasSameOrigin(F,window.location.origin)||E._gwDomains.some(function(fa){return fa.regex.test(F)&&fa.regex.test(window.location.origin)}));E.oAuthInfos.push(ha)}})})}});var y=g(m,{declaredClass:"esri.Credential",tokenRefreshBuffer:2,constructor:function(w){a.mixin(this,w);this.resources=this.resources||[];n.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},_oAuthCred:null,refreshToken:function(){var w=this,E=this.resources&&this.resources[0],
F=l.id.findServerInfo(this.server),H=F&&F.owningSystemUrl,M=!!H&&"server"===this.scope,R=M&&C(F,l.id._legacyFed),V=M&&l.id.findServerInfo(H),da,ha=(da=F.webTierAuth)&&l.id.normalizeWebTierAuth,fa=z[this.server];fa=fa&&fa[this.userId];var X={username:this.userId,password:fa};if(!da||ha)if(M&&!V&&b.some(l.id.serverInfos,function(U){l.id._isIdProvider(H,U.server)&&(V=U);return!!V}),da=V&&l.id.findCredential(V.server,this.userId),!M||da)if(R)da.refreshToken();else{if(M)var ca={serverUrl:E,token:da&&da.token,
ssl:da&&da.ssl};else if(ha)X=null,ca={ssl:this.ssl};else if(fa)this.isAdmin&&(ca={isAdmin:!0});else{if(E){E=l.id._sanitizeUrl(E);this._enqueued=1;var Q=l.id._enqueue(E,F,null,null,this.isAdmin,this);Q.addCallback(function(){w._enqueued=0;w.refreshServerTokens()}).addErrback(function(){w._enqueued=0})}return Q}return l.id.generateToken(M?V:F,M?null:X,ca).addCallback(function(U){w.token=U.token;w.expires=n.isDefined(U.expires)?Number(U.expires):null;w.creationTime=(new Date).getTime();w.validity=U.validity;
w.onTokenChange();w.refreshServerTokens()}).addErrback(function(){})}},refreshServerTokens:function(){"portal"===this.scope&&b.forEach(l.id.credentials,function(w){var E=l.id.findServerInfo(w.server),F=E&&E.owningSystemUrl;w!==this&&w.userId===this.userId&&F&&"server"===w.scope&&(l.id._hasSameServerInstance(this.server,F)||l.id._isIdProvider(F,this.server))&&(C(E,l.id._legacyFed)?(w.token=this.token,w.expires=this.expires,w.creationTime=this.creationTime,w.validity=this.validity,w.onTokenChange()):
w.refreshToken())},this)},onTokenChange:function(w){clearTimeout(this._refreshTimer);var E=this.server&&l.id.findServerInfo(this.server),F=(E=E&&E.owningSystemUrl)&&l.id.findServerInfo(E);!1!==w&&(!E||"portal"===this.scope||F&&F.webTierAuth&&!l.id.normalizeWebTierAuth)&&(n.isDefined(this.expires)||n.isDefined(this.validity))&&this._startRefreshTimer()},onDestroy:function(){},destroy:function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&
(this._oAuthCred.destroy(),this._oAuthCred=null);var w=b.indexOf(l.id.credentials,this);-1<w&&l.id.credentials.splice(w,1);this.onTokenChange();this.onDestroy()},toJson:function(){return this._toJson()},_toJson:function(){var w=n.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),E=this.resources;E&&0<E.length&&(w.resources=E.slice());return w},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);
var w=6E4*this.tokenRefreshBuffer,E=Math.pow(2,31)-1,F=(this.validity?this.creationTime+6E4*this.validity:this.expires)-(new Date).getTime();0>F?F=0:F>E&&(F=E);this._refreshTimer=setTimeout(a.hitch(this,this.refreshToken),F>w?F-w:F)}});h.Credential=y;return l.IdentityManagerBase=h})},"esri/ServerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(g,t,a,b,c){g=g(null,{declaredClass:"esri.ServerInfo",constructor:function(k){t.mixin(this,k)},toJson:function(){return c.fixJson({server:this.server,
tokenServiceUrl:this.tokenServiceUrl,adminTokenServiceUrl:this.adminTokenServiceUrl,shortLivedTokenValidity:this.shortLivedTokenValidity,owningSystemUrl:this.owningSystemUrl,owningTenant:this.owningTenant,currentVersion:this.currentVersion,hasPortal:this.hasPortal,hasServer:this.hasServer,webTierAuth:this.webTierAuth})}});return b.ServerInfo=g})},"esri/OAuthCredential":function(){define(["./kernel","dojo/_base/declare","dojo/has"],function(g,t,a){t=t(null,{declaredClass:"esri.OAuthCredential",oAuthInfo:null,
storage:null,appId:null,codeVerifier:null,expires:null,refreshToken:null,ssl:null,stateUID:null,token:null,userId:null,constructor:function(b,c){this.oAuthInfo=b;this.storage=c;this._init()},isValid:function(){var b=!1;if(this.oAuthInfo&&this.userId&&(this.refreshToken||this.token))if(null==this.expires&&this.refreshToken)b=!0;else{var c=Date.now();this.expires>c&&(this.expires-c)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(b=!0)}return b},save:function(){if(!this.storage)return!1;var b=this._load(),
c=this.oAuthInfo;if(c&&c.authNamespace&&c.portalUrl){var k=b[c.authNamespace];k||(k=b[c.authNamespace]={});this.appId||(this.appId=c.appId);k[c.portalUrl]={appId:this.appId,codeVerifier:this.codeVerifier,expires:this.expires,refreshToken:this.refreshToken,ssl:this.ssl,stateUID:this.stateUID,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(b))}catch(h){return!1}return!0}return!1},destroy:function(){var b=this._load(),c=this.oAuthInfo;if(c&&c.appId&&c.portalUrl&&
(null==this.expires||this.expires>Date.now())&&(this.refreshToken||this.token)){var k=c.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken",h=new FormData;h.append("f","json");h.append("auth_token",this.refreshToken||this.token);h.append("client_id",c.appId);h.append("token_type_hint",this.refreshToken?"refresh_token":"access_token");if("function"===typeof navigator.sendBeacon)navigator.sendBeacon(k,h);else{var d=new XMLHttpRequest;d.open("POST",k);d.send(h)}}if(c&&c.authNamespace&&
c.portalUrl&&this.storage&&(k=b[c.authNamespace])){delete k[c.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(b))}catch(e){}}c&&(this.oAuthInfo=c._oAuthCred=null)},_init:function(){var b=this._load(),c=this.oAuthInfo;c&&c.authNamespace&&c.portalUrl&&(b=b[c.authNamespace])&&(b=b[c.portalUrl])&&(this.appId=b.appId,this.codeVerifier=b.codeVerifier,this.expires=b.expires,this.refreshToken=b.refreshToken,this.ssl=b.ssl,this.stateUID=b.stateUID,this.token=b.token,this.userId=b.userId)},
_load:function(){var b={};if(this.storage){var c=this.storage.getItem("esriJSAPIOAuth");if(c)try{b=JSON.parse(c)}catch(k){}}return b}});return g.OAuthCredential=t})},"esri/arcgis/OAuthInfo":function(){define(["../kernel","../lang","dojo/_base/declare","dojo/_base/lang","dojo/has"],function(g,t,a,b,c){var k=a(null,{declaredClass:"esri.arcgis.OAuthInfo",constructor:function(h){b.mixin(this,{expiration:20160,minTimeUntilExpiration:30,portalUrl:"https://www.arcgis.com",authNamespace:"/",forceLogin:!1,
popup:!1,popupCallbackUrl:"oauth-callback.html",popupWindowFeatures:"height\x3d490,width\x3d800,resizable,scrollbars,status",preserveUrlHash:!1,flowType:"auto"},h)},_oAuthCred:null,toJson:function(){return t.fixJson({appId:this.appId,expiration:this.expiration,locale:this.locale,minTimeUntilExpiration:this.minTimeUntilExpiration,portalUrl:this.portalUrl,authNamespace:this.authNamespace,forceLogin:this.forceLogin,popup:this.popup,popupCallbackUrl:this.popupCallbackUrl,popupWindowFeatures:this.popupWindowFeatures,
preserveUrlHash:this.preserveUrlHash,flowType:this.flowType})},clone:function(){return new k(this.toJson())}});b.setObject("arcgis.OAuthInfo",k,g);return k})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),function(g,t,a,b,c,k,h,d){return g("dijit.form.Form",[c,k,h,d],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",
postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(e){t.set(this.domNode,"encType",e);b("ie")&&(this.domNode.encoding=e);this._set("encType",e)},reset:function(e){var l={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:e?e.target:this.domNode,target:e?e.target:this.domNode};!1!==this.onReset(l)&&l.returnValue&&
this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(e){this.reset(e);e.stopPropagation();e.preventDefault();return!1},_onSubmit:function(e){var l=this.constructor.prototype;if(this.execute!=l.execute||this.onExecute!=l.onExecute)a.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(e)&&(e.stopPropagation(),e.preventDefault())},onSubmit:function(){return this.isValid()},
submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"esri/OAuthSignInHandler":function(){define("./Credential ./domUtils ./lang ./urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/_base/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/jsapi dojo/io-query ./core/events dijit/form/Button dojo/query".split(" "),function(g,t,a,b,c,k,h,d,e,l,f,n,u){var p=null,r=null;try{p=window.localStorage,r=window.sessionStorage}catch(m){}var q=window.crypto||window.msCrypto;
return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(m){this._oAuthRedirectFunc=m},oAuthSignIn:function(m,v,x,z){var A=this._oAuthDfd=new d;A.resUrl_=m;A.sinfo_=v;A.oinfo_=x;var C=x._oAuthCred;if(C.storage&&("authorization-code"===x.flowType||"auto"===x.flowType&&8.4<=v.currentVersion)){var D=q.getRandomValues(new Uint8Array(32));var B=b.base64UrlEncode(D);C.codeVerifier=B;D=q.getRandomValues(new Uint8Array(32));C.stateUID=b.base64UrlEncode(D);C.save()||(C.codeVerifier=B=null)}else C.codeVerifier=null;var y=this;
this._getCodeChallenge(B).then(function(w){var E=!z||!1!==z.oAuthPopupConfirmation;if(!x.popup||!E)return y._doOAuthSignIn(m,v,x,w),A;A.codeChallenge_=w;y._nls||(y._nls=f.identity);y.oAuthDialog||(y.oAuthDialog=y._createOAuthDialog());w=y.oAuthDialog;E=z&&z.error;var F=z&&z.token;t.hide(w.errMsg_);E&&403==E.code&&F&&(l.set(w.errMsg_,"innerHTML",y._nls.forbidden),t.show(w.errMsg_));l.set(w.serverLink_,{title:v.server,innerHTML:-1!==v.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":v.server});
w.show()});return A},setOAuthResponseHash:function(m){m&&("#"===m.charAt(0)&&(m=m.substring(1)),this._processOAuthPopupParams(n.queryToObject(m)))},_createOAuthDialog:function(){var m=this._nls,v=a.substitute(m,this._oAuthDialogContent);v=a.substitute({server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},v);var x=new c({title:m.title,content:v,"class":"esriOAuthSignInDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var z=x.esriIdMgr_._oAuthDfd;
x.hide_();x.esriIdMgr_._doOAuthSignIn(z.resUrl_,z.sinfo_,z.oinfo_,z.codeChallenge_)},cancel_:function(){var z=x.esriIdMgr_._oAuthDfd;x.esriIdMgr_._oAuthDfd=null;x.hide_();var A=Error("ABORTED");A.code="IdentityManager.2";A.log=!!h.isDebug;z.errback(A)},hide_:function(){t.hide(x.errMsg_);x.hide();c._DialogLevelManager.hide(x)}});m=x.domNode;x.btnSubmit_=k.byNode(e.query(".esriIdSubmit",m)[0]);x.btnCancel_=k.byNode(e.query(".esriIdCancel",m)[0]);x.serverLink_=e.query(".serverLink",m)[0];x.errMsg_=e.query(".esriErrorMsg",
m)[0];x.connect(x.btnSubmit_,"onClick",x.execute_);x.connect(x.btnCancel_,"onClick",x.onCancel);x.connect(x,"onCancel",x.cancel_);return x},_doOAuthSignIn:function(m,v,x,z){var A=this,C=x._oAuthCred,D={portalUrl:x.portalUrl};!x.popup&&x.preserveUrlHash&&window.location.hash&&(D.hash=window.location.hash);C.stateUID&&(D.uid=C.stateUID);D={client_id:x.appId,response_type:C.codeVerifier?"code":"token",state:JSON.stringify(D),expiration:x.expiration,locale:x.locale,redirect_uri:this._getRedirectURI(x,
!!C.codeVerifier)};x.forceLogin&&(D.force_login=!0);x.forceUserId&&x.userId&&(D.prepopulatedusername=x.userId);!x.popup&&this._doPortalSignIn(m)&&(D.redirectToUserOrgUrl=!0);C.codeVerifier&&(D.code_challenge=z||C.codeVerifier,D.code_challenge_method=z?"S256":"plain");z=x.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize";C=z+"?"+n.objectToQuery(D);if(x.popup){var B=window.open(C,"esriJSAPIOAuth",x.popupWindowFeatures);B?(B.focus(),this._oAuthDfd.oAuthWin_=B,this._oAuthIntervalId=setInterval(function(){if(B.closed){clearInterval(A._oAuthIntervalId);
A._oAuthOnPopupHandle.remove();var y=A._oAuthDfd;if(y){var w=Error("ABORTED");w.code="IdentityManager.2";w.log=!!h.isDebug;y.errback(w)}}},500),A._oAuthOnPopupHandle=u.on(window,["arcgis:auth:hash","arcgis:auth:location:search"],function(y){"arcgis:auth:hash"===y.type?A.setOAuthResponseHash(y.detail):A._setOAuthResponseQueryString(y.detail)})):(m=Error("ABORTED"),m.name="identity-manager:user-aborted",m.code="IdentityManager.2",m.log=!!h.isDebug,this._oAuthDfd.errback(m))}else this._rejectOnPersistedPageShow=
!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:D,authorizeUrl:z,resourceUrl:m,serverInfo:v,oAuthInfo:x}):window.location.href=C},_getCodeChallenge:function(m){if(m&&window.isSecureContext)return m=(new TextEncoder).encode(m),q.subtle.digest("SHA-256",m).then(function(v){return b.base64UrlEncode(new Uint8Array(v))});m=new d;m.resolve(null);return m},_getRedirectURI:function(m,v){var x=window.location.href.replace(/#.*$/,"");if(m.popup)return b.getAbsoluteUrl(m.popupCallbackUrl);
if(v){var z=b.urlToObject(x);if(z.query)return"code error error_description message_code persist state".split(" ").forEach(function(A){delete z.query[A]}),(m=n.objectToQuery(z.query))?z.path+"?"+m:z.path}return x},_processOAuthPopupParams:function(m){var v=this._oAuthDfd;this._oAuthDfd=null;if(v)if(clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle&&this._oAuthOnPopupHandle.remove(),m.error){var x="access_denied"===m.error;m=Error(x?"ABORTED":"OAuth: "+m.error+" - "+m.error_description);
m.name=x?"identity-manager:user-aborted":"identity-manager:authentication-failed";m.code="IdentityManagerBase."+(x?2:3);m.log=!!h.isDebug;v.errback(m)}else this._processOAuthResponseParams(m,v.oinfo_,v.sinfo_).then(function(z){v.resolve(z)}).catch(function(z){v.reject(z)})},_processOAuthResponseParams:function(m,v,x){var z=v._oAuthCred;if(m.code){var A=z.codeVerifier;z.codeVerifier=null;z.stateUID=null;z.save();return this._getOAuthToken(x.server,m.code,v.appId,this._getRedirectURI(v,!0),A).then(function(D){var B=
new g({userId:D.username,server:x.server,token:D.access_token,expires:Date.now()+1E3*D.expires_in,ssl:D.ssl,oAuthState:m.state,_oAuthCred:z});v.userId=B.userId;z.storage=D.persist?p:r;z.refreshToken=D.refresh_token;z.token=null;z.expires=D.refresh_token_expires_in?Date.now()+1E3*D.refresh_token_expires_in:null;z.userId=B.userId;z.ssl=B.ssl;z.save();return B})}A=new g({userId:m.username,server:x.server,token:m.access_token,expires:Date.now()+1E3*Number(m.expires_in),ssl:"true"===m.ssl,oAuthState:m.state,
_oAuthCred:z});v.userId=A.userId;z.storage=m.persist?p:r;z.refreshToken=null;z.token=A.token;z.expires=A.expires;z.userId=A.userId;z.ssl=A.ssl;z.save();var C=new d;C.resolve(A);return C},_setOAuthResponseQueryString:function(m){m&&("?"===m.charAt(0)&&(m=m.substring(1)),this._processOAuthPopupParams(n.queryToObject(m)))}}})},"esri/core/events":function(){define([],function(){return{on:function(g,t,a){if(!g||"function"!==typeof g.on&&"function"!==typeof g.addEventListener)throw new TypeError("target is not a Evented or EventTarget object");
if("on"in g)return g.on(t,a);if(Array.isArray(t)){for(var b=t.slice(),c=0;c<b.length;c++)g.addEventListener(b[c],a);return{remove:function(){for(var k=0;k<b.length;k++)g.removeEventListener(b[k],a)}}}g.addEventListener(t,a);return{remove:function(){g.removeEventListener(t,a)}}}}})},"esri/arcade/ArcadeModuleLoader":function(){define(["require","exports"],function(g,t){Object.defineProperty(t,"__esModule",{value:!0});t.ArcadeModuleLoader=void 0;g=function(){function a(b,c){this._moduleSingletons=b;
this._syntaxModules=c}a.prototype.loadLibrary=function(b){return null==this._syntaxModules?null:(b=this._syntaxModules[b.toLowerCase()])?{syntax:b.script,uri:b.uri}:null};return a}();t.ArcadeModuleLoader=g})},"esri/arcade/ArcadeModuleResolver":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ../request ./parser ./featureset/support/RecentlyUsedCache ./executionError".split(" "),function(g,t,
a,b,c,k,h,d,e,l){Object.defineProperty(t,"__esModule",{value:!0});t.ArcadeModuleResolver=void 0;g=function(){function f(n){this.portalUri=n}f.prototype.extractRegexGroups=function(n,u){for(var p=[],r=0;r<u.length;r++)p[u[r]]="";r=0;for(var q=1;q<n.length;q++){var m=n[q];if(null!==m&&void 0!==m&&(p[u[r]]=m,r++,r>=u.length))break}return p};f.prototype.normalizeModuleUri=function(n){var u=/^[a-z0-9A-Z]+(@[0-9]+\.[0-9]+\.[0-9]+)?([\?|\/].*)?$/gi,p=/(.+)\/home\/item\.html\?id=(.+)$/gi,r=/(.+)\/sharing\/rest\/content\/users\/[a-zA-Z0-9]+\/items\/(.+)$/gi,
q=/(.+)\/sharing\/rest\/content\/items\/(.+)$/gi,m=/(.*)@([0-9]+\.[0-9]+\.[0-9]+)([\?|\/].*)?$/gi;if(n.startsWith("portal+")){var v=n.substring(7),x="",z=v,A=!1,C=0;for(p=[p,q,r];C<p.length;C++)if(r=p[C].exec(v),null!==r){A=this.extractRegexGroups(r,["portalurl","itemid"]);z=A.itemid;x=A.portalurl;A=!0;break}if(!1===A)if(u.test(v))z=v,x=this.portalUri;else throw new l.ModuleError(l.ModuleErrorCodes.UnsupportedUriProtocol,{uri:n});z.includes("/")&&(z=z.split("/")[0]);z.includes("?")&&(z=z.split("?")[0]);
n="current";m=m.exec(z);null!==m&&(A=this.extractRegexGroups(m,["itemid","versionstring"]),z=A.itemid,n=A.versionstring);x=(v||x).replace(/\/+$/,"");v=(-1!==x.indexOf("/sharing")?x+"/":x+"/sharing/rest/")+"content/items/"+z+"/resources/"+n+".arc";return{url:v,scheme:"portal",uri:"PO:"+v}}if(n.startsWith("mock")){if("mock"===n)return{url:"",scheme:"mock",data:'\n      export var hello \x3d 1;\n      export function helloWorld() {\n          return "Hello World " + hello;\n      }\n  ',uri:"mock"};
v=n.replace("mock:","");if(void 0!==f.mocks[v])return{url:"",scheme:"mock",data:f.mocks[v],uri:n}}throw new l.ModuleError(l.ModuleErrorCodes.UnrecognisedUri,{uri:n});};f.prototype.fetchModule=function(n){return a(this,void 0,void 0,function(){var u,p,r,q;return b(this,function(m){switch(m.label){case 0:if(u=f.cachedModules.getFromCache(n.uri))return[2,u];p=this.fetchSource(n);f.cachedModules.addToCache(n.uri,p);r=null;m.label=1;case 1:return m.trys.push([1,3,,4]),[4,p];case 2:return r=m.sent(),[3,
4];case 3:throw q=m.sent(),f.cachedModules.removeFromCache(n.uri),q;case 4:return[2,r]}})})};f.prototype.fetchSource=function(n){var u;return a(this,void 0,void 0,function(){var p;return b(this,function(r){switch(r.label){case 0:return"portal"!==n.scheme?[3,2]:[4,h({url:n.url,handleAs:"text",content:{},callbackParamName:"callback"})];case 1:if(p=r.sent())return[2,d.parseScript(p,[])];r.label=2;case 2:if("mock"===n.scheme)return[2,d.parseScript(null!==(u=n.data)&&void 0!==u?u:"",[])];throw new l.ModuleError(l.ModuleErrorCodes.UnsupportedUriProtocol);
}})})};f.create=function(n){return new f(n)};f.getDefault=function(){var n;return null!==(n=this._default)&&void 0!==n?n:f._default=f._moduleResolverFactory()};Object.defineProperty(f,"moduleResolverClass",{set:function(n){this._moduleResolverFactory=n;this._default=null},enumerable:!1,configurable:!0});f.mocks={};f.cachedModules=new e(30);f._default=null;f._moduleResolverFactory=function(){return new f("https://www.arcgis.com")};return f}();t.ArcadeModuleResolver=g})},"esri/arcade/parser":function(){define(["require",
"exports","./treeAnalysis","./lib/arcade-parser","./lib/arcade-parser"],function(g,t,a,b,c){Object.defineProperty(t,"__esModule",{value:!0});t.parseScript=void 0;t.parseScript=function(k,h){void 0===h&&(h=[]);k=b.parse(k);if(null===k.body||void 0===k.body)throw new c.ParsingError({index:0,line:0,column:0,data:null,description:"",code:c.ParsingErrorCodes.InvalidExpression});if(0===k.body.length)throw new c.ParsingError({index:0,line:0,column:0,data:null,description:"",code:c.ParsingErrorCodes.InvalidExpression});
if(0===k.body.length)throw new c.ParsingError({index:0,line:0,column:0,data:null,description:"",code:c.ParsingErrorCodes.InvalidExpression});k.loadedModules={};a.findScriptDependencies(k,h);return k}})},"esri/arcade/lib/arcade-parser":function(){define("require exports ../polyfill/tsSupport/exportstar ./parser ./tokenizer ./types".split(" "),function(g,t,a,b,c,k){Object.defineProperty(t,"__esModule",{value:!0});t.tokenize=t.parse=void 0;a(k,t);t.parse=function(h,d,e){return(new b.Parser(h,d,e)).parseScript()};
t.tokenize=function(h,d,e){h=new c.Tokenizer(h,d);d=[];var l=void 0;try{for(var f=void 0;f=h.getNextToken();)e&&(f=e(f)),d.push(f)}catch(n){h.errorHandler.tolerate(n)}h.errorHandler.tolerant&&(l=h.errors());return{tokens:d,errors:l}}})},"esri/arcade/polyfill/tsSupport/exportstar":function(){define([],function(){return function(){var g=this&&this.__createBinding||(Object.create?function(t,a,b,c){void 0===c&&(c=b);Object.defineProperty(t,c,{enumerable:!0,get:function(){return a[b]}})}:function(t,a,
b,c){void 0===c&&(c=b);t[c]=a[b]});return function(t,a){for(var b in t)"default"===b||Object.prototype.hasOwnProperty.call(a,b)||g(a,t,b)}}()})},"esri/arcade/lib/parser":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../polyfill/tsSupport/extends ./comment-handler ./error-handler ./scanner ./types".split(" "),function(g,t,a,b,c,k,h,d,e){function l(r,q){void 0===q&&(q=0);var m=r.start-r.lineStart,v=r.lineNumber;0>m&&(m+=q,v--);return{index:r.start,
line:v,column:m}}function f(r){return[a({index:r.range[0]},r.loc.start),a({index:r.range[1]},r.loc.end)]}function n(r){var q;return null!==(q=e.OperatorPrecedence[r])&&void 0!==q?q:0}Object.defineProperty(t,"__esModule",{value:!0});t.Parser=t.binaryOperatorPrecedence=void 0;var u;(function(r){r[r.None=0]="None";r[r.Function=1]="Function";r[r.IfClause=2]="IfClause";r[r.ForLoop=4]="ForLoop";r[r.WhileLoop=8]="WhileLoop"})(u||(u={}));var p;(function(r){r[r.AsObject=0]="AsObject";r[r.Automatic=1]="Automatic"})(p||
(p={}));t.binaryOperatorPrecedence=n;g=function(){function r(q,m,v){void 0===m&&(m={});this.delegate=v;this.hasLineTerminator=!1;this.options={tokens:"boolean"===typeof m.tokens&&m.tokens,comments:"boolean"===typeof m.comments&&m.comments,tolerant:"boolean"===typeof m.tolerant&&m.tolerant};this.options.comments&&(this.commentHandler=new k.CommentHandler);this.errorHandler=new h.ErrorHandler(this.options.tolerant);this.scanner=new d.Scanner(q,this.errorHandler);this.context={isAssignmentTarget:!1,
blockContext:u.None,curlyParsingType:p.AsObject};this.rawToken={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0};this.tokens=[];this.startMarker={index:0,line:this.scanner.lineNumber,column:0};this.endMarker={index:0,line:this.scanner.lineNumber,column:0};this.readNextRawToken();this.endMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}r.prototype.throwIfInvalidType=function(q,m,v){var x=v.validTypes;v=v.invalidTypes;
(null===x||void 0===x?0:x.some(function(z){return q.type===z}))||null!==v&&void 0!==v&&v.some(function(z){return q.type===z})&&this.throwError(e.ParsingErrorCodes.InvalidExpression,m)};r.prototype.throwError=function(q,m,v){void 0===v&&(v=this.endMarker);var x=m.index;this.errorHandler.throwError({code:q,index:x,line:m.line,column:m.column+1,len:v.index-x-1})};r.prototype.tolerateError=function(q,m){throw Error("######################################### !!!");};r.prototype.unexpectedTokenError=function(q){void 0===
q&&(q={});var m=q.rawToken,v=q.code;q=q.data;if(m){if(!v)switch(m.type){case 2:v=e.ParsingErrorCodes.UnexpectedEndOfScript;break;case 3:v=e.ParsingErrorCodes.UnexpectedIdentifier;break;case 6:v=e.ParsingErrorCodes.UnexpectedNumber;break;case 8:v=e.ParsingErrorCodes.UnexpectedString;break;case 10:v=e.ParsingErrorCodes.UnexpectedTemplate}var x=m.value.toString()}else x="ILLEGAL";v=null!==v&&void 0!==v?v:e.ParsingErrorCodes.UnexpectedToken;q||(q={value:x});x=h.formatErrorDescription(v,q);if(m)return new e.ParsingError({code:v,
index:m.start,line:m.lineNumber,column:m.start-m.lineStart+1,len:m.end-m.start-1,data:q,description:x});m=this.endMarker;return new e.ParsingError({code:v,index:m.index,line:m.line,column:this.endMarker.column+1,data:q,description:x})};r.prototype.throwUnexpectedToken=function(q){var m;void 0===q&&(q={});q.rawToken=null!==(m=q.rawToken)&&void 0!==m?m:this.rawToken;throw this.unexpectedTokenError(q);};r.prototype.collectComments=function(q){var m=this,v=this.commentHandler;v&&q.length&&q.forEach(function(x){x=
{type:x.multiLine?"BlockComment":"LineComment",value:m.getSourceValue(x),range:x.range,loc:x.loc};v.collectComment(x)})};r.prototype.peekAhead=function(q){var m=this,v=this.scanner.saveState();q=q.call(this,function(){m.scanner.scanComments();return m.scanner.lex()});this.scanner.restoreState(v);return q};r.prototype.getSourceValue=function(q){return this.scanner.source.slice(q.start,q.end)};r.prototype.convertToToken=function(q){return{type:e.TokenNames[q.type],value:this.getSourceValue(q),range:[q.start,
q.end],loc:{start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}}};r.prototype.readNextRawToken=function(){this.endMarker.index=this.scanner.index;this.endMarker.line=this.scanner.lineNumber;this.endMarker.column=this.scanner.index-this.scanner.lineStart;var q=this.rawToken;this.collectComments(this.scanner.scanComments());this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,
this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);this.rawToken=this.scanner.lex();this.hasLineTerminator=q.lineNumber!==this.rawToken.lineNumber;this.options.tokens&&2!==this.rawToken.type&&this.tokens.push(this.convertToToken(this.rawToken))};r.prototype.captureStartMarker=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}};r.prototype.getItemLocation=function(q){return{range:[q.index,
this.endMarker.index],loc:{start:{line:q.line,column:q.column},end:{line:this.endMarker.line,column:this.endMarker.column}}}};r.prototype.finalize=function(q){var m,v;if(this.delegate||this.commentHandler)null===(m=this.commentHandler)||void 0===m?void 0:m.attachComments(q),null===(v=this.delegate)||void 0===v?void 0:v.call(this,q);return q};r.prototype.expectPunctuator=function(q){var m=this.rawToken;this.matchPunctuator(q)?this.readNextRawToken():this.throwUnexpectedToken({rawToken:m,code:e.ParsingErrorCodes.PunctuatorExpected,
data:{value:q}})};r.prototype.expectKeyword=function(q){4===this.rawToken.type&&this.rawToken.value.toLowerCase()===q?this.readNextRawToken():this.throwUnexpectedToken({rawToken:this.rawToken})};r.prototype.expectContextualKeyword=function(q){3===this.rawToken.type&&this.rawToken.value.toLowerCase()===q?this.readNextRawToken():this.throwUnexpectedToken({rawToken:this.rawToken})};r.prototype.matchKeyword=function(q){return 4===this.rawToken.type&&this.rawToken.value.toLowerCase()===q};r.prototype.matchContextualKeyword=
function(q){return 3===this.rawToken.type&&this.rawToken.value===q};r.prototype.matchPunctuator=function(q){return 7===this.rawToken.type&&this.rawToken.value===q};r.prototype.getMatchingPunctuator=function(q){"string"===typeof q&&(q=q.split(""));if(7===this.rawToken.type&&null!==q&&void 0!==q&&q.length)return q.find(this.matchPunctuator,this)};r.prototype.isolateCoverGrammar=function(q){var m=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;q=q.call(this);this.context.isAssignmentTarget=
m;return q};r.prototype.inheritCoverGrammar=function(q){var m=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;q=q.call(this);this.context.isAssignmentTarget=this.context.isAssignmentTarget&&m;return q};r.prototype.withBlockContext=function(q,m){var v=this.context.blockContext;this.context.blockContext|=q;q=this.context.curlyParsingType;this.context.curlyParsingType=p.Automatic;m=m.call(this);this.context.blockContext=v;this.context.curlyParsingType=q;return m};r.prototype.consumeSemicolon=
function(){this.matchPunctuator(";")?this.readNextRawToken():this.hasLineTerminator||(2===this.rawToken.type||this.matchPunctuator("}")?(this.endMarker.index=this.startMarker.index,this.endMarker.line=this.startMarker.line,this.endMarker.column=this.startMarker.column):this.throwUnexpectedToken({rawToken:this.rawToken}))};r.prototype.parsePrimaryExpression=function(){var q=this.captureStartMarker(),m=this.rawToken;switch(m.type){case 3:return this.readNextRawToken(),this.finalize(a({type:"Identifier",
name:m.value},this.getItemLocation(q)));case 6:case 8:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize(a({type:"Literal",value:m.value,raw:this.getSourceValue(m),isString:"string"===typeof m.value},this.getItemLocation(q)));case 1:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize(a({type:"Literal",value:m.value.toLowerCase()===e.Keywords.True,raw:this.getSourceValue(m),isString:!1},this.getItemLocation(q)));case 5:return this.context.isAssignmentTarget=
!1,this.readNextRawToken(),this.finalize(a({type:"Literal",value:null,raw:this.getSourceValue(m),isString:!1},this.getItemLocation(q)));case 10:return this.parseTemplateLiteral();case 7:switch(m.value){case "(":return this.inheritCoverGrammar(this.parseGroupExpression);case "[":return this.inheritCoverGrammar(this.parseArrayInitializer);case "{":return this.inheritCoverGrammar(this.parseObjectExpression);default:return this.throwUnexpectedToken({rawToken:this.rawToken})}case 4:return this.context.isAssignmentTarget=
!1,this.throwUnexpectedToken({rawToken:this.rawToken});default:return this.throwUnexpectedToken({rawToken:this.rawToken})}};r.prototype.parseArrayInitializer=function(){var q=this.captureStartMarker();this.expectPunctuator("[");for(var m=[];!this.matchPunctuator("]");){var v=this.captureStartMarker();this.matchPunctuator(",")?(this.readNextRawToken(),this.throwError(e.ParsingErrorCodes.InvalidExpression,v)):(m.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.matchPunctuator("]")||
this.expectPunctuator(","))}this.expectPunctuator("]");return this.finalize(a({type:"ArrayExpression",elements:m},this.getItemLocation(q)))};r.prototype.parseObjectPropertyKey=function(){var q=this.captureStartMarker(),m=this.rawToken;switch(m.type){case 8:return this.readNextRawToken(),this.finalize(a({type:"Literal",value:m.value,raw:this.getSourceValue(m),isString:!0},this.getItemLocation(q)));case 3:case 1:case 5:case 4:return this.readNextRawToken(),this.finalize(a({type:"Identifier",name:m.value},
this.getItemLocation(q)));default:this.throwError(e.ParsingErrorCodes.KeyMustBeString,q)}};r.prototype.parseObjectProperty=function(){var q=this.rawToken,m=this.captureStartMarker(),v=this.parseObjectPropertyKey(),x=!1,z=null;this.matchPunctuator(":")?(this.readNextRawToken(),z=this.inheritCoverGrammar(this.parseAssignmentExpression)):3===q.type?(x=!0,z=this.finalize(a({type:"Identifier",name:q.value},this.getItemLocation(m)))):this.throwUnexpectedToken({rawToken:this.rawToken});return this.finalize(a({type:"Property",
kind:"init",key:v,value:z,shorthand:x},this.getItemLocation(m)))};r.prototype.parseObjectExpression=function(){var q=this.captureStartMarker();this.expectPunctuator("{");for(var m=[];!this.matchPunctuator("}");)m.push(this.parseObjectProperty()),this.matchPunctuator("}")||this.expectPunctuator(",");this.expectPunctuator("}");return this.finalize(a({type:"ObjectExpression",properties:m},this.getItemLocation(q)))};r.prototype.parseTemplateElement=function(q){void 0===q&&(q=!1);var m=this.rawToken;10!==
m.type&&this.throwUnexpectedToken({rawToken:m});q&&!m.head&&this.throwUnexpectedToken({code:e.ParsingErrorCodes.InvalidTemplateHead,rawToken:m});var v=this.captureStartMarker();this.readNextRawToken();q=m.tail;m=this.finalize(a({type:"TemplateElement",value:{raw:m.value,cooked:m.cooked},tail:q},this.getItemLocation(v)));m.loc.start.column++;m.loc.end.column-=q?1:2;return m};r.prototype.parseTemplateLiteral=function(){var q=this.captureStartMarker(),m=[],v=[],x=this.parseTemplateElement(!0);for(v.push(x);!x.tail;)m.push(this.parseExpression()),
x=this.parseTemplateElement(),v.push(x);return this.finalize(a({type:"TemplateLiteral",quasis:v,expressions:m},this.getItemLocation(q)))};r.prototype.parseGroupExpression=function(){this.expectPunctuator("(");var q=this.inheritCoverGrammar(this.parseAssignmentExpression);this.expectPunctuator(")");return q};r.prototype.parseArguments=function(){this.expectPunctuator("(");var q=[];if(!this.matchPunctuator(")"))for(;;){var m=this.isolateCoverGrammar(this.parseAssignmentExpression);q.push(m);if(this.matchPunctuator(")"))break;
this.expectPunctuator(",");if(this.matchPunctuator(")"))break}this.expectPunctuator(")");return q};r.prototype.parseMemberName=function(){var q=this.rawToken,m=this.captureStartMarker();this.readNextRawToken();5!==q.type&&3!==q.type&&4!==q.type&&1!==q.type&&this.throwUnexpectedToken({rawToken:q});return this.finalize(a({type:"Identifier",name:q.value},this.getItemLocation(m)))};r.prototype.parseLeftHandSideExpression=function(){for(var q=this.captureStartMarker(),m=this.inheritCoverGrammar(this.parsePrimaryExpression),
v=this.captureStartMarker(),x;x=this.getMatchingPunctuator("([.");)switch(x){case "(":this.context.isAssignmentTarget=!1;"Identifier"!==m.type&&"MemberExpression"!==m.type&&this.throwError(e.ParsingErrorCodes.IdentiferExpected,q,v);x=this.parseArguments();m=this.finalize(a({type:"CallExpression",callee:m,arguments:x},this.getItemLocation(q)));continue;case "[":this.context.isAssignmentTarget=!0;this.expectPunctuator("[");x=this.isolateCoverGrammar(this.parseExpression);this.expectPunctuator("]");
m=this.finalize(a({type:"MemberExpression",computed:!0,object:m,property:x},this.getItemLocation(q)));continue;case ".":this.context.isAssignmentTarget=!0,this.expectPunctuator("."),x=this.parseMemberName(),m=this.finalize(a({type:"MemberExpression",computed:!1,object:m,property:x},this.getItemLocation(q)))}return m};r.prototype.parseUpdateExpression=function(){var q=this.captureStartMarker(),m=this.getMatchingPunctuator(e.UpdateOperators);if(m){this.readNextRawToken();var v=this.captureStartMarker(),
x=this.inheritCoverGrammar(this.parseUnaryExpression);"Identifier"!==x.type&&"MemberExpression"!==x.type&&"CallExpression"!==x.type&&this.throwError(e.ParsingErrorCodes.InvalidExpression,v);this.context.isAssignmentTarget||this.tolerateError(e.ParsingErrorCodes.InvalidLeftHandSideInAssignment,q);this.context.isAssignmentTarget=!1;return this.finalize(a({type:"UpdateExpression",operator:m,argument:x,prefix:!0},this.getItemLocation(q)))}v=this.captureStartMarker();x=this.inheritCoverGrammar(this.parseLeftHandSideExpression);
var z=this.captureStartMarker();if(this.hasLineTerminator)return x;m=this.getMatchingPunctuator(e.UpdateOperators);if(!m)return x;"Identifier"!==x.type&&"MemberExpression"!==x.type&&this.throwError(e.ParsingErrorCodes.InvalidExpression,v,z);this.context.isAssignmentTarget||this.tolerateError(e.ParsingErrorCodes.InvalidLeftHandSideInAssignment,q);this.readNextRawToken();this.context.isAssignmentTarget=!1;return this.finalize(a({type:"UpdateExpression",operator:m,argument:x,prefix:!1},this.getItemLocation(q)))};
r.prototype.parseUnaryExpression=function(){var q=this.getMatchingPunctuator(e.UnaryOperators);if(q){var m=this.captureStartMarker();this.readNextRawToken();var v=this.inheritCoverGrammar(this.parseUnaryExpression);this.context.isAssignmentTarget=!1;return this.finalize(a({type:"UnaryExpression",operator:q,argument:v,prefix:!0},this.getItemLocation(m)))}return this.parseUpdateExpression()};r.prototype.parseBinaryExpression=function(){var q=this.rawToken,m=this.inheritCoverGrammar(this.parseUnaryExpression);
if(7!==this.rawToken.type)return m;var v=this.rawToken.value,x=n(v);if(0===x)return m;this.readNextRawToken();this.context.isAssignmentTarget=!1;q=[q,this.rawToken];var z=this.inheritCoverGrammar(this.parseUnaryExpression);v=[m,v,z];for(var A=[x];7===this.rawToken.type&&0<(x=n(this.rawToken.value));){for(;2<v.length&&x<=A[A.length-1];){z=v.pop();var C=v.pop();A.pop();m=v.pop();q.pop();var D=q[q.length-1];D=l(D,D.lineStart);v.push(this.finalize(this.createBinaryOrLogicalExpression(D,C,m,z)))}v.push(this.rawToken.value);
A.push(x);q.push(this.rawToken);this.readNextRawToken();v.push(this.inheritCoverGrammar(this.parseUnaryExpression))}x=v.length-1;m=v[x];for(D=q.pop();1<x;){z=q.pop();if(!z)break;D=l(z,null===D||void 0===D?void 0:D.lineStart);m=this.finalize(this.createBinaryOrLogicalExpression(D,v[x-1],v[x-2],m));x-=2;D=z}return m};r.prototype.createBinaryOrLogicalExpression=function(q,m,v,x){var z=e.LogicalOperators.includes(m)?"LogicalExpression":"BinaryExpression";if("BinaryExpression"===z)return a({type:z,operator:m,
left:v,right:x},this.getItemLocation(q));"AssignmentExpression"!==v.type&&"UpdateExpression"!==v.type||this.throwError.apply(this,b([e.ParsingErrorCodes.InvalidExpression],f(v)));"AssignmentExpression"!==x.type&&"UpdateExpression"!==x.type||this.throwError.apply(this,b([e.ParsingErrorCodes.InvalidExpression],f(v)));return a({type:z,operator:m,left:v,right:x},this.getItemLocation(q))};r.prototype.parseAssignmentExpression=function(){var q=this.captureStartMarker(),m=this.inheritCoverGrammar(this.parseBinaryExpression),
v=this.captureStartMarker(),x=this.getMatchingPunctuator(e.AssignmentOperators);if(!x)return m;"Identifier"!==m.type&&"MemberExpression"!==m.type&&this.throwError(e.ParsingErrorCodes.InvalidExpression,q,v);this.context.isAssignmentTarget||this.tolerateError(e.ParsingErrorCodes.InvalidLeftHandSideInAssignment,q);this.matchPunctuator("\x3d")||(this.context.isAssignmentTarget=!1);this.readNextRawToken();v=this.isolateCoverGrammar(this.parseAssignmentExpression);return this.finalize(a({type:"AssignmentExpression",
left:m,operator:x,right:v},this.getItemLocation(q)))};r.prototype.parseExpression=function(){return this.isolateCoverGrammar(this.parseAssignmentExpression)};r.prototype.parseStatements=function(q){for(var m=[];2!==this.rawToken.type&&!this.matchPunctuator(q);){var v=this.parseStatementListItem();e.isEmptyStatement(v)||m.push(v)}return m};r.prototype.parseStatementListItem=function(){this.context.isAssignmentTarget=!0;return this.matchKeyword(e.Keywords.Function)?this.parseFunctionDeclaration():this.matchKeyword(e.Keywords.Export)?
this.parseExportDeclaration():this.matchKeyword(e.Keywords.Import)?this.parseImportDeclaration():this.parseStatement()};r.prototype.parseBlock=function(){var q=this.captureStartMarker();this.expectPunctuator("{");var m=this.parseStatements("}");this.expectPunctuator("}");return this.finalize(a({type:"BlockStatement",body:m},this.getItemLocation(q)))};r.prototype.parseObjectStatement=function(){var q=this.captureStartMarker(),m=this.parseObjectExpression();return this.finalize(a({type:"ExpressionStatement",
expression:m},this.getItemLocation(q)))};r.prototype.parseBlockOrObjectStatement=function(){return this.context.curlyParsingType===p.AsObject||this.peekAhead(function(q){var m=q();if(3!==m.type&&8!==m.type)return!1;m=q();return 7!==m.type||":"!==m.value?!1:!0})?this.parseObjectStatement():this.parseBlock()};r.prototype.parseIdentifier=function(){var q=this.rawToken;if(3!==q.type)return null;var m=this.captureStartMarker();this.readNextRawToken();return this.finalize(a({type:"Identifier",name:q.value},
this.getItemLocation(m)))};r.prototype.parseVariableDeclarator=function(){var q=this.captureStartMarker(),m=this.parseIdentifier();m||this.throwUnexpectedToken({code:e.ParsingErrorCodes.IdentiferExpected});var v=null;if(this.matchPunctuator("\x3d")){this.readNextRawToken();var x=this.rawToken;try{v=this.isolateCoverGrammar(this.parseAssignmentExpression)}catch(z){this.throwUnexpectedToken({rawToken:x,code:e.ParsingErrorCodes.InvalidVariableAssignment})}}return this.finalize(a({type:"VariableDeclarator",
id:m,init:v},this.getItemLocation(q)))};r.prototype.parseVariableDeclarationList=function(){for(var q=[this.parseVariableDeclarator()];this.matchPunctuator(",");)this.readNextRawToken(),q.push(this.parseVariableDeclarator());return q};r.prototype.parseVariableDeclaration=function(){var q=this.captureStartMarker();this.expectKeyword(e.Keywords.Var);var m=this.parseVariableDeclarationList();this.consumeSemicolon();return this.finalize(a({type:"VariableDeclaration",declarations:m,kind:"var"},this.getItemLocation(q)))};
r.prototype.parseEmptyStatement=function(){var q=this.captureStartMarker();this.expectPunctuator(";");return this.finalize(a({type:"EmptyStatement"},this.getItemLocation(q)))};r.prototype.parseExpressionStatement=function(){var q=this.captureStartMarker(),m=this.parseExpression();this.consumeSemicolon();return this.finalize(a({type:"ExpressionStatement",expression:m},this.getItemLocation(q)))};r.prototype.parseIfClause=function(){return this.withBlockContext(u.IfClause,this.parseStatement)};r.prototype.parseIfStatement=
function(){var q=this.captureStartMarker();this.expectKeyword(e.Keywords.If);this.expectPunctuator("(");var m=this.captureStartMarker(),v=this.parseExpression(),x=this.captureStartMarker();this.expectPunctuator(")");"AssignmentExpression"!==v.type&&"UpdateExpression"!==v.type||this.throwError(e.ParsingErrorCodes.InvalidExpression,m,x);m=this.parseIfClause();x=null;this.matchKeyword(e.Keywords.Else)&&(this.readNextRawToken(),x=this.parseIfClause());return this.finalize(a({type:"IfStatement",test:v,
consequent:m,alternate:x},this.getItemLocation(q)))};r.prototype.parseWhileStatement=function(){var q=this.captureStartMarker();this.expectKeyword(e.Keywords.While);this.expectPunctuator("(");var m=this.captureStartMarker(),v=this.parseExpression(),x=this.captureStartMarker();this.expectPunctuator(")");"AssignmentExpression"!==v.type&&"UpdateExpression"!==v.type||this.throwError(e.ParsingErrorCodes.InvalidExpression,m,x);m=this.withBlockContext(u.WhileLoop,this.parseStatement);return this.finalize(a({type:"WhileStatement",
test:v,body:m},this.getItemLocation(q)))};r.prototype.parseForStatement=function(){var q=this,m=null,v=null,x=null,z=null,A=null,C=this.captureStartMarker();this.expectKeyword(e.Keywords.For);this.expectPunctuator("(");if(this.matchPunctuator(";"))this.readNextRawToken();else if(this.matchKeyword(e.Keywords.Var)){var D=this.captureStartMarker();this.readNextRawToken();var B=this.parseVariableDeclarationList();1===B.length&&this.matchKeyword(e.Keywords.In)?(B[0].init&&this.throwError(e.ParsingErrorCodes.ForInOfLoopInitializer,
D),z=this.finalize(a({type:"VariableDeclaration",declarations:B,kind:"var"},this.getItemLocation(D))),this.readNextRawToken(),A=this.parseExpression()):(this.matchKeyword(e.Keywords.In)&&this.throwError(e.ParsingErrorCodes.InvalidLeftHandSideInForIn,D),m=this.finalize(a({type:"VariableDeclaration",declarations:B,kind:"var"},this.getItemLocation(D))),this.expectPunctuator(";"))}else B=this.context.isAssignmentTarget,D=this.captureStartMarker(),m=this.inheritCoverGrammar(this.parseAssignmentExpression),
this.matchKeyword(e.Keywords.In)?(this.context.isAssignmentTarget||this.tolerateError(e.ParsingErrorCodes.InvalidLeftHandSideInForIn,D),"Identifier"!==m.type&&this.throwError(e.ParsingErrorCodes.InvalidLeftHandSideInForIn,D),this.readNextRawToken(),z=m,A=this.parseExpression(),m=null):(this.context.isAssignmentTarget=B,this.expectPunctuator(";"));z||(this.matchPunctuator(";")||(v=this.isolateCoverGrammar(this.parseExpression)),this.expectPunctuator(";"),this.matchPunctuator(")")||(x=this.isolateCoverGrammar(this.parseExpression)));
this.expectPunctuator(")");D=this.withBlockContext(u.ForLoop,function(){return q.isolateCoverGrammar(q.parseStatement)});return z&&A?this.finalize(a({type:"ForInStatement",left:z,right:A,body:D},this.getItemLocation(C))):this.finalize(a({type:"ForStatement",init:m,test:v,update:x,body:D},this.getItemLocation(C)))};r.prototype.parseContinueStatement=function(){var q=this.captureStartMarker();this.expectKeyword(e.Keywords.Continue);this.consumeSemicolon();return this.finalize(a({type:"ContinueStatement"},
this.getItemLocation(q)))};r.prototype.parseBreakStatement=function(){var q=this.captureStartMarker();this.expectKeyword(e.Keywords.Break);this.consumeSemicolon();return this.finalize(a({type:"BreakStatement"},this.getItemLocation(q)))};r.prototype.parseReturnStatement=function(){var q=this.captureStartMarker();this.expectKeyword(e.Keywords.Return);var m=(this.matchPunctuator(";")||this.matchPunctuator("}")||this.hasLineTerminator||2===this.rawToken.type)&&8!==this.rawToken.type&&10!==this.rawToken.type?
null:this.parseExpression();this.consumeSemicolon();return this.finalize(a({type:"ReturnStatement",argument:m},this.getItemLocation(q)))};r.prototype.parseStatement=function(){switch(this.rawToken.type){case 1:case 5:case 6:case 8:case 10:case 3:return this.parseExpressionStatement();case 7:return"{"===this.rawToken.value?this.parseBlockOrObjectStatement():"("===this.rawToken.value?this.parseExpressionStatement():";"===this.rawToken.value?this.parseEmptyStatement():this.parseExpressionStatement();
case 4:switch(this.rawToken.value.toLowerCase()){case e.Keywords.Break:return this.parseBreakStatement();case e.Keywords.Continue:return this.parseContinueStatement();case e.Keywords.For:return this.parseForStatement();case e.Keywords.Function:return this.parseFunctionDeclaration();case e.Keywords.If:return this.parseIfStatement();case e.Keywords.Return:return this.parseReturnStatement();case e.Keywords.Var:return this.parseVariableDeclaration();case e.Keywords.While:return this.parseWhileStatement();
default:return this.parseExpressionStatement()}default:return this.throwUnexpectedToken({rawToken:this.rawToken})}};r.prototype.parseFormalParameters=function(){var q=[];this.expectPunctuator("(");if(!this.matchPunctuator(")"))for(;2!==this.rawToken.type;){var m=this.parseIdentifier();m||this.throwUnexpectedToken({rawToken:this.rawToken,code:e.ParsingErrorCodes.IdentiferExpected});q.push(m);if(this.matchPunctuator(")"))break;this.expectPunctuator(",");if(this.matchPunctuator(")"))break}this.expectPunctuator(")");
return q};r.prototype.parseFunctionDeclaration=function(){(this.context.blockContext&u.Function)===u.Function&&this.throwUnexpectedToken({code:e.ParsingErrorCodes.NoFunctionInsideFunction});(this.context.blockContext&u.WhileLoop)!==u.WhileLoop&&(this.context.blockContext&u.IfClause)!==u.IfClause||this.throwUnexpectedToken({code:e.ParsingErrorCodes.NoFunctionInsideBlock});var q=this.captureStartMarker();this.expectKeyword(e.Keywords.Function);var m=this.parseIdentifier();m||this.throwUnexpectedToken({code:e.ParsingErrorCodes.InvalidFunctionIdentifier});
var v=this.parseFormalParameters(),x=this.context.blockContext;this.context.blockContext|=u.Function;var z=this.parseBlock();this.context.blockContext=x;return this.finalize(a({type:"FunctionDeclaration",id:m,params:v,body:z},this.getItemLocation(q)))};r.prototype.parseScript=function(){var q=this.captureStartMarker(),m=this.parseStatements();q=this.finalize(a({type:"Program",body:m},this.getItemLocation(q)));this.options.tokens&&(q.tokens=this.tokens);this.options.tolerant&&(q.errors=this.errorHandler.errors);
return q};r.prototype.parseExportDeclaration=function(){this.context.blockContext!==u.None&&this.throwUnexpectedToken({code:e.ParsingErrorCodes.ModuleExportRootOnly});var q=null,m=this.captureStartMarker();this.expectKeyword(e.Keywords.Export);this.matchKeyword(e.Keywords.Var)?q=this.parseVariableDeclaration():this.matchKeyword("function")?q=this.parseFunctionDeclaration():this.throwUnexpectedToken({code:e.ParsingErrorCodes.InvalidExpression});return this.finalize(a({type:"ExportNamedDeclaration",
declaration:q,specifiers:[],source:null},this.getItemLocation(m)))};r.prototype.parseModuleSpecifier=function(){var q=this.captureStartMarker(),m=this.rawToken;if(8===m.type)return this.readNextRawToken(),this.finalize(a({type:"Literal",value:m.value,raw:this.getSourceValue(m),isString:!0},this.getItemLocation(q)));this.throwError(e.ParsingErrorCodes.InvalidModuleUri,q)};r.prototype.parseDefaultSpecifier=function(){var q=this.captureStartMarker(),m=this.parseIdentifier();m||this.throwUnexpectedToken({code:e.ParsingErrorCodes.IdentiferExpected});
return this.finalize(a({type:"ImportDefaultSpecifier",local:m},this.getItemLocation(q)))};r.prototype.parseImportDeclaration=function(){this.context.blockContext!==u.None&&this.throwUnexpectedToken({code:e.ParsingErrorCodes.ModuleImportRootOnly});var q=this.captureStartMarker();this.expectKeyword(e.Keywords.Import);var m=this.parseDefaultSpecifier();this.expectContextualKeyword(e.Keywords.From);var v=this.parseModuleSpecifier();return this.finalize(a({type:"ImportDeclaration",specifiers:[m],source:v},
this.getItemLocation(q)))};return r}();t.Parser=g})},"esri/arcade/lib/comment-handler":function(){define(["require","exports","../polyfill/tsSupport/assign","../polyfill/tsSupport/spreadarray","./types"],function(g,t,a,b,c){function k(h,d){return d?d.loc.end.line===h.loc.start.line&&d.loc.end.column<=h.loc.start.column:!1}Object.defineProperty(t,"__esModule",{value:!0});t.CommentHandler=void 0;g=function(){function h(){this.comments=[];this._nodeStack=[];this._newComments=[]}h.prototype.insertInnerComments=
function(d){if(c.isBlockStatement(d)&&0===d.body.length){for(var e=[],l=this._newComments.length-1;0<=l;--l){var f=this._newComments[l];d.range[1]>=f.range[0]&&(e.unshift(f),this._newComments.splice(l,1))}e.length&&(d.innerComments=e)}};h.prototype.attachTrailingComments=function(d){var e,l;if(d){var f=this._nodeStack[this._nodeStack.length-1];if(c.isBlockStatement(d)&&f.range[0]>=d.range[0]&&f.range[1]<=d.range[1])for(var n=this._newComments.length-1;0<=n;--n){var u=this._newComments[n];u.range[0]>=
d.range[0]&&u.range[1]<=d.range[1]&&(f.trailingComments=b(b([],null!==(e=f.trailingComments)&&void 0!==e?e:[]),[u]),this._newComments.splice(n,1))}e=[];if(0<this._newComments.length)for(n=this._newComments.length-1;0<=n;--n)u=this._newComments[n],k(u,f)?(f.trailingComments=b(b([],null!==(l=f.trailingComments)&&void 0!==l?l:[]),[u]),this._newComments.splice(n,1)):k(u,d)&&(e.unshift(u),this._newComments.splice(n,1));(null===f||void 0===f?0:f.trailingComments)&&k(f.trailingComments[0],d)&&(e=b(b([],
e),f.trailingComments),delete f.trailingComments);0<e.length&&(d.trailingComments=e)}};h.prototype.attachLeadingComments=function(d){var e,l,f,n;if(d){for(var u;0<this._nodeStack.length;){var p=this._nodeStack[this._nodeStack.length-1];if(d.range[0]<=p.range[0])u=p,this._nodeStack.pop();else break}p=[];var r=[];if(u){for(var q=(null!==(l=null===(e=u.leadingComments)||void 0===e?void 0:e.length)&&void 0!==l?l:0)-1;0<=q;--q)e=u.leadingComments[q],d.range[0]>=e.range[1]?(p.unshift(e),u.leadingComments.splice(q,
1)):c.isVariableDeclarator(d)&&!c.isBlockComment(e)&&(r.unshift(e),u.leadingComments.splice(q,1));0===(null===(f=u.leadingComments)||void 0===f?void 0:f.length)&&delete u.leadingComments;p.length&&(d.leadingComments=p);r.length&&(d.trailingComments=b(b([],r),null!==(n=d.trailingComments)&&void 0!==n?n:[]))}else{for(q=this._newComments.length-1;0<=q;--q)e=this._newComments[q],d.range[0]>=e.range[0]&&(p.unshift(e),this._newComments.splice(q,1));p.length&&(d.leadingComments=p)}}};h.prototype.attachComments=
function(d){var e;if(c.isProgram(d)&&0<d.body.length){var l=this._nodeStack[this._nodeStack.length-1];l?(l.trailingComments=b(b([],null!==(e=l.trailingComments)&&void 0!==e?e:[]),this._newComments),this._newComments.length=0,this._nodeStack.pop()):(d.trailingComments=b([],this._newComments),this._newComments.length=0)}else this.attachTrailingComments(d),this.attachLeadingComments(d),this.insertInnerComments(d),this._nodeStack.push(d)};h.prototype.collectComment=function(d){this.comments.push(d);this._newComments.push(d)};
return h}();t.CommentHandler=g})},"esri/arcade/lib/types":function(){define(["require","exports","../polyfill/tsSupport/extends"],function(g,t,a){var b;Object.defineProperty(t,"__esModule",{value:!0});t.isTemplateElement=t.isProperty=t.isVariableDeclarator=t.isUpdateExpression=t.isUnaryExpression=t.isMemberExpression=t.isTemplateLiteral=t.isObjectExpression=t.isLogicalExpression=t.isLiteral=t.isIdentifier=t.isCallExpression=t.isBinaryExpression=t.isAssignmentExpression=t.isArrayExpression=t.isExpression=
t.isVariableDeclaration=t.isReturnStatement=t.isIfStatement=t.isFunctionDeclaration=t.isForStatement=t.isForInStatement=t.isExpressionStatement=t.isEmptyStatement=t.isContinueStatement=t.isBreakStatement=t.isBlockComment=t.isBlockStatement=t.isStatement=t.isProgram=t.ParsingError=t.ParsingErrorMessages=t.ParsingErrorCodes=t.TokenNames=t.TokenType=t.OperatorPrecedence=t.BinaryOperators=t.LogicalOperators=t.AssignmentOperators=t.UnaryOperators=t.UpdateOperators=t.Syntax=t.Keywords=void 0;(function(c){c.Break=
"break";c.Continue="continue";c.Else="else";c.False="false";c.For="for";c.From="from";c.Function="function";c.If="if";c.Import="import";c.Export="export";c.In="in";c.Null="null";c.Return="return";c.True="true";c.Var="var";c.While="while"})(t.Keywords||(t.Keywords={}));(function(c){c.AssignmentExpression="AssignmentExpression";c.ArrayExpression="ArrayExpression";c.BlockComment="BlockComment";c.BlockStatement="BlockStatement";c.BinaryExpression="BinaryExpression";c.BreakStatement="BreakStatement";c.CallExpression=
"CallExpression";c.ContinueStatement="ContinueStatement";c.EmptyStatement="EmptyStatement";c.ExpressionStatement="ExpressionStatement";c.ExportNamedDeclaration="ExportNamedDeclaration";c.ExportSpecifier="ExportSpecifier";c.ForStatement="ForStatement";c.ForInStatement="ForInStatement";c.FunctionDeclaration="FunctionDeclaration";c.Identifier="Identifier";c.IfStatement="IfStatement";c.ImportDeclaration="ImportDeclaration";c.ImportDefaultSpecifier="ImportDefaultSpecifier";c.LineComment="LineComment";
c.Literal="Literal";c.LogicalExpression="LogicalExpression";c.MemberExpression="MemberExpression";c.ObjectExpression="ObjectExpression";c.Program="Program";c.Property="Property";c.ReturnStatement="ReturnStatement";c.TemplateElement="TemplateElement";c.TemplateLiteral="TemplateLiteral";c.UnaryExpression="UnaryExpression";c.UpdateExpression="UpdateExpression";c.VariableDeclaration="VariableDeclaration";c.VariableDeclarator="VariableDeclarator";c.WhileStatement="WhileStatement"})(t.Syntax||(t.Syntax=
{}));t.UpdateOperators=["++","--"];t.UnaryOperators=["-","+","!","~"];t.AssignmentOperators="\x3d /\x3d *\x3d %\x3d +\x3d -\x3d".split(" ");t.LogicalOperators=["||","\x26\x26"];t.BinaryOperators="| \x26 \x3e\x3e \x3c\x3c \x3e\x3e\x3e ^ \x3d\x3d !\x3d \x3c \x3c\x3d \x3e \x3e\x3d + - * / %".split(" ");t.OperatorPrecedence={"||":1,"\x26\x26":2,"|":3,"^":4,"\x26":5,"\x3d\x3d":6,"!\x3d":6,"\x3c":7,"\x3e":7,"\x3c\x3d":7,"\x3e\x3d":7,"\x3c\x3c":8,"\x3e\x3e":8,"\x3e\x3e\x3e":8,"+":9,"-":9,"*":10,"/":10,"%":10};
(function(c){c[c.Unknown=0]="Unknown";c[c.BooleanLiteral=1]="BooleanLiteral";c[c.EOF=2]="EOF";c[c.Identifier=3]="Identifier";c[c.Keyword=4]="Keyword";c[c.NullLiteral=5]="NullLiteral";c[c.NumericLiteral=6]="NumericLiteral";c[c.Punctuator=7]="Punctuator";c[c.StringLiteral=8]="StringLiteral";c[c.Template=10]="Template"})(t.TokenType||(t.TokenType={}));t.TokenNames="Unknown Boolean \x3cend\x3e Identifier Keyword Null Numeric Punctuator String RegularExpression Template".split(" ");(function(c){c.InvalidModuleUri=
"InvalidModuleUri";c.ForInOfLoopInitializer="ForInOfLoopInitializer";c.IdentiferExpected="IdentiferExpected";c.InvalidEscapedReservedWord="InvalidEscapedReservedWord";c.InvalidExpression="InvalidExpression";c.InvalidFunctionIdentifier="InvalidFunctionIdentifier";c.InvalidHexEscapeSequence="InvalidHexEscapeSequence";c.InvalidLeftHandSideInAssignment="InvalidLeftHandSideInAssignment";c.InvalidLeftHandSideInForIn="InvalidLeftHandSideInForIn";c.InvalidTemplateHead="InvalidTemplateHead";c.InvalidVariableAssignment=
"InvalidVariableAssignment";c.KeyMustBeString="KeyMustBeString";c.NoFunctionInsideBlock="NoFunctionInsideBlock";c.NoFunctionInsideFunction="NoFunctionInsideFunction";c.ModuleExportRootOnly="ModuleExportRootOnly";c.ModuleImportRootOnly="ModuleImportRootOnly";c.PunctuatorExpected="PunctuatorExpected";c.TemplateOctalLiteral="TemplateOctalLiteral";c.UnexpectedBoolean="UnexpectedBoolean";c.UnexpectedEndOfScript="UnexpectedEndOfScript";c.UnexpectedIdentifier="UnexpectedIdentifier";c.UnexpectedKeyword="UnexpectedKeyword";
c.UnexpectedNull="UnexpectedNull";c.UnexpectedNumber="UnexpectedNumber";c.UnexpectedPunctuator="UnexpectedPunctuator";c.UnexpectedString="UnexpectedString";c.UnexpectedTemplate="UnexpectedTemplate";c.UnexpectedToken="UnexpectedToken"})(g=t.ParsingErrorCodes||(t.ParsingErrorCodes={}));t.ParsingErrorMessages=(b={},b[g.InvalidModuleUri]="Module uri must be a text literal.",b[g.ForInOfLoopInitializer]="for-in loop variable declaration may not have an initializer.",b[g.IdentiferExpected]="'${value}' is an invalid identifier.",
b[g.InvalidEscapedReservedWord]="Keyword cannot contain escaped characters.",b[g.InvalidExpression]="Invalid expression.",b[g.InvalidFunctionIdentifier]="'${value}' is an invalid function identifier.",b[g.InvalidHexEscapeSequence]="Invalid hexadecimal escape sequence.",b[g.InvalidLeftHandSideInAssignment]="Invalid left-hand side in assignment.",b[g.InvalidLeftHandSideInForIn]="Invalid left-hand side in for-in.",b[g.InvalidTemplateHead]="Invalid template structure.",b[g.InvalidVariableAssignment]=
"Invalid variable assignment.",b[g.KeyMustBeString]="Object property keys must be a word starting with a letter.",b[g.NoFunctionInsideBlock]="Functions cannot be declared inside of code blocks.",b[g.NoFunctionInsideFunction]="Functions cannot be declared inside another function.",b[g.ModuleExportRootOnly]="Module exports cannot be declared inside of code blocks.",b[g.ModuleImportRootOnly]="Module import cannot be declared inside of code blocks.",b[g.PunctuatorExpected]="'${value}' expected.",b[g.TemplateOctalLiteral]=
"Octal literals are not allowed in template literals.",b[g.UnexpectedBoolean]="Unexpected boolean literal.",b[g.UnexpectedEndOfScript]="Unexpected end of Arcade expression.",b[g.UnexpectedIdentifier]="Unexpected identifier.",b[g.UnexpectedKeyword]="Unexpected keyword.",b[g.UnexpectedNull]="Unexpected null literal.",b[g.UnexpectedNumber]="Unexpected number.",b[g.UnexpectedPunctuator]="Unexpected ponctuator.",b[g.UnexpectedString]="Unexpected text literal.",b[g.UnexpectedTemplate]="Unexpected quasi '${value}'.",
b[g.UnexpectedToken]="Unexpected token '${value}'.",b);b=function(c){function k(h){var d=h.code,e=h.index,l=h.line,f=h.column,n=h.len;n=void 0===n?0:n;var u=h.description;h=h.data;var p,r,q=c.call(this,""+(null!==u&&void 0!==u?u:d))||this;q.declaredRootClass="esri.arcade.lib.parsingerror";q.name="ParsingError";q.code=d;q.index=e;q.line=l;q.column=f;q.len=n;q.data=h;q.description=u;q.range={start:{line:l,column:f-1},end:{line:l,column:f+n}};null===(r=(p=Error).captureStackTrace)||void 0===r?void 0:
r.call(p,q,k);return q}a(k,c);return k}(Error);t.ParsingError=b;t.isProgram=function(c){return"Program"===(null===c||void 0===c?void 0:c.type)};t.isStatement=function(c){switch(null===c||void 0===c?void 0:c.type){case "BlockStatement":case "BreakStatement":case "ContinueStatement":case "EmptyStatement":case "ExpressionStatement":case "ForInStatement":case "ForStatement":case "FunctionDeclaration":case "IfStatement":case "ReturnStatement":case "VariableDeclaration":return!0;default:return!1}};t.isBlockStatement=
function(c){return"BlockStatement"===(null===c||void 0===c?void 0:c.type)};t.isBlockComment=function(c){return"BlockComment"===(null===c||void 0===c?void 0:c.type)};t.isBreakStatement=function(c){return"BreakStatement"===(null===c||void 0===c?void 0:c.type)};t.isContinueStatement=function(c){return"ContinueStatement"===(null===c||void 0===c?void 0:c.type)};t.isEmptyStatement=function(c){return"EmptyStatement"===(null===c||void 0===c?void 0:c.type)};t.isExpressionStatement=function(c){return"ExpressionStatement"===
(null===c||void 0===c?void 0:c.type)};t.isForInStatement=function(c){return"ForInStatement"===(null===c||void 0===c?void 0:c.type)};t.isForStatement=function(c){return"ForStatement"===(null===c||void 0===c?void 0:c.type)};t.isFunctionDeclaration=function(c){return"FunctionDeclaration"===(null===c||void 0===c?void 0:c.type)};t.isIfStatement=function(c){return"IfStatement"===(null===c||void 0===c?void 0:c.type)};t.isReturnStatement=function(c){return"ReturnStatement"===(null===c||void 0===c?void 0:
c.type)};t.isVariableDeclaration=function(c){return"VariableDeclaration"===(null===c||void 0===c?void 0:c.type)};t.isExpression=function(c){switch(null===c||void 0===c?void 0:c.type){case "ArrayExpression":case "AssignmentExpression":case "BinaryExpression":case "CallExpression":case "Identifier":case "Literal":case "LogicalExpression":case "MemberExpression":case "ObjectExpression":case "TemplateLiteral":case "UpdateExpression":case "UnaryExpression":return!0;default:return!1}};t.isArrayExpression=
function(c){return"ArrayExpression"===(null===c||void 0===c?void 0:c.type)};t.isAssignmentExpression=function(c){return"AssignmentExpression"===(null===c||void 0===c?void 0:c.type)};t.isBinaryExpression=function(c){return"BinaryExpression"===(null===c||void 0===c?void 0:c.type)};t.isCallExpression=function(c){return"CallExpression"===(null===c||void 0===c?void 0:c.type)};t.isIdentifier=function(c){return"Identifier"===(null===c||void 0===c?void 0:c.type)};t.isLiteral=function(c){return"Literal"===
(null===c||void 0===c?void 0:c.type)};t.isLogicalExpression=function(c){return"LogicalExpression"===(null===c||void 0===c?void 0:c.type)};t.isObjectExpression=function(c){return"ObjectExpression"===(null===c||void 0===c?void 0:c.type)};t.isTemplateLiteral=function(c){return"TemplateLiteral"===(null===c||void 0===c?void 0:c.type)};t.isMemberExpression=function(c){return"MemberExpression"===(null===c||void 0===c?void 0:c.type)};t.isUnaryExpression=function(c){return"UnaryExpression"===(null===c||void 0===
c?void 0:c.type)};t.isUpdateExpression=function(c){return"UpdateExpression"===(null===c||void 0===c?void 0:c.type)};t.isVariableDeclarator=function(c){return"VariableDeclarator"===(null===c||void 0===c?void 0:c.type)};t.isProperty=function(c){return"Property"===(null===c||void 0===c?void 0:c.type)};t.isTemplateElement=function(c){return"TemplateElement"===(null===c||void 0===c?void 0:c.type)}})},"esri/arcade/lib/error-handler":function(){define(["require","exports","./types"],function(g,t,a){function b(c,
k){c=a.ParsingErrorMessages[c];return k?c.replace(/\${(.*?)}/g,function(h,d){var e,l;return null!==(l=null===(e=k[d])||void 0===e?void 0:e.toString())&&void 0!==l?l:""}):c}Object.defineProperty(t,"__esModule",{value:!0});t.ErrorHandler=t.formatErrorDescription=void 0;t.formatErrorDescription=b;g=function(){function c(k){void 0===k&&(k=!1);this.tolerant=k;this.errors=[]}c.prototype.recordError=function(k){this.errors.push(k)};c.prototype.tolerate=function(k){if(this.tolerant)this.recordError(k);else throw k;
};c.prototype.throwError=function(k){var h;k.description=null!==(h=k.description)&&void 0!==h?h:b(k.code,k.data);throw new a.ParsingError(k);};c.prototype.tolerateError=function(k){var h;k.description=null!==(h=k.description)&&void 0!==h?h:b(k.code,k.data);k=new a.ParsingError(k);if(this.tolerant)this.recordError(k);else throw k;};return c}();t.ErrorHandler=g})},"esri/arcade/lib/scanner":function(){define("require exports ../polyfill/tsSupport/assign ../polyfill/tsSupport/spreadarray ../polyfill/tsSupport/extends ./assert ./character ./types".split(" "),
function(g,t,a,b,c,k,h,d){Object.defineProperty(t,"__esModule",{value:!0});t.Scanner=void 0;var e=[[],[],[]];d.UpdateOperators.forEach(function(l){return e[l.length-1].push(l)});d.UnaryOperators.forEach(function(l){return e[l.length-1].push(l)});d.LogicalOperators.forEach(function(l){return e[l.length-1].push(l)});d.AssignmentOperators.forEach(function(l){return e[l.length-1].push(l)});d.BinaryOperators.forEach(function(l){return e[l.length-1].push(l)});g=function(){function l(f,n){this.source=f;
this.errorHandler=n;this._length=f.length;this.index=0;this.lineNumber=1;this.lineStart=0;this.curlyStack=[]}l.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}};l.prototype.restoreState=function(f){this.index=f.index;this.lineNumber=f.lineNumber;this.lineStart=f.lineStart;this.curlyStack=f.curlyStack};l.prototype.eof=function(){return this.index>=this._length};l.prototype.throwUnexpectedToken=function(f){void 0===
f&&(f=d.ParsingErrorCodes.UnexpectedToken);this.errorHandler.throwError({code:f,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})};l.prototype.tolerateUnexpectedToken=function(f){void 0===f&&(f=d.ParsingErrorCodes.UnexpectedToken);this.errorHandler.tolerateError({code:f,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})};l.prototype.skipSingleLineComment=function(f){for(var n=[],u=this.index-f,p={start:{line:this.lineNumber,column:this.index-this.lineStart-
f},end:{line:0,column:0}};!this.eof();){var r=this.source.charCodeAt(this.index);++this.index;if(h.Character.isLineTerminator(r))return p&&(p.end={line:this.lineNumber,column:this.index-this.lineStart-1},f={multiLine:!1,start:u+f,end:this.index-1,range:[u,this.index-1],loc:p},n.push(f)),13===r&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,n}p&&(p.end={line:this.lineNumber,column:this.index-this.lineStart},f={multiLine:!1,start:u+f,end:this.index,
range:[u,this.index],loc:p},n.push(f));return n};l.prototype.skipMultiLineComment=function(){for(var f=[],n=this.index-2,u={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{line:0,column:0}};!this.eof();){var p=this.source.charCodeAt(this.index);if(h.Character.isLineTerminator(p))13===p&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else{if(42===p&&47===this.source.charCodeAt(this.index+1))return this.index+=2,
u&&(u.end={line:this.lineNumber,column:this.index-this.lineStart},n={multiLine:!0,start:n+2,end:this.index-2,range:[n,this.index],loc:u},f.push(n)),f;++this.index}}u&&(u.end={line:this.lineNumber,column:this.index-this.lineStart},n={multiLine:!0,start:n+2,end:this.index,range:[n,this.index],loc:u},f.push(n));this.tolerateUnexpectedToken();return f};l.prototype.scanComments=function(){for(var f=[];!this.eof();){var n=this.source.charCodeAt(this.index);if(h.Character.isWhiteSpace(n))++this.index;else if(h.Character.isLineTerminator(n))++this.index,
13===n&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index;else if(47===n)if(n=this.source.charCodeAt(this.index+1),47===n)this.index+=2,n=this.skipSingleLineComment(2),f=b(b([],f),n);else if(42===n)this.index+=2,n=this.skipMultiLineComment(),f=b(b([],f),n);else break;else break}return f};l.prototype.isKeyword=function(f){f=f.toLowerCase();switch(f.length){case 2:return f===d.Keywords.If||f===d.Keywords.In;case 3:return f===d.Keywords.Var||f===d.Keywords.For;
case 4:return f===d.Keywords.Else;case 5:return f===d.Keywords.Break||f===d.Keywords.While;case 6:return f===d.Keywords.Return||f===d.Keywords.Import||f===d.Keywords.Export;case 8:return f===d.Keywords.Function||f===d.Keywords.Continue;default:return!1}};l.prototype.codePointAt=function(f){var n=this.source.charCodeAt(f);55296<=n&&56319>=n&&(f=this.source.charCodeAt(f+1),56320<=f&&57343>=f&&(n=1024*(n-55296)+f-56320+65536));return n};l.prototype.scanHexEscape=function(f){f="u"===f?4:2;for(var n=0,
u=0;u<f;++u)if(!this.eof()&&h.Character.isHexDigit(this.source.charCodeAt(this.index)))n=16*n+"0123456789abcdef".indexOf(this.source[this.index++].toLowerCase());else return null;return String.fromCharCode(n)};l.prototype.scanUnicodeCodePointEscape=function(){var f=this.source[this.index],n=0;for("}"===f&&this.throwUnexpectedToken();!this.eof();){f=this.source[this.index++];if(!h.Character.isHexDigit(f.charCodeAt(0)))break;n=16*n+"0123456789abcdef".indexOf(f.toLowerCase())}(1114111<n||"}"!==f)&&this.throwUnexpectedToken();
return h.Character.fromCodePoint(n)};l.prototype.getIdentifier=function(){for(var f=this.index++;!this.eof();){var n=this.source.charCodeAt(this.index);if(92===n||55296<=n&&57343>n)return this.index=f,this.getComplexIdentifier();if(h.Character.isIdentifierPart(n))++this.index;else break}return this.source.slice(f,this.index)};l.prototype.getComplexIdentifier=function(){var f=this.codePointAt(this.index),n=h.Character.fromCodePoint(f);this.index+=n.length;if(92===f){117!==this.source.charCodeAt(this.index)&&
this.throwUnexpectedToken();++this.index;if("{"===this.source[this.index]){++this.index;var u=this.scanUnicodeCodePointEscape()}else u=this.scanHexEscape("u"),null!==u&&"\\"!==u&&h.Character.isIdentifierStart(u.charCodeAt(0))||this.throwUnexpectedToken();n=u}for(;!this.eof();){f=this.codePointAt(this.index);if(!h.Character.isIdentifierPart(f))break;u=h.Character.fromCodePoint(f);n+=u;this.index+=u.length;92===f&&(n=n.substring(0,n.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),
++this.index,"{"===this.source[this.index]?(++this.index,u=this.scanUnicodeCodePointEscape()):(u=this.scanHexEscape("u"),null!==u&&"\\"!==u&&h.Character.isIdentifierPart(u.charCodeAt(0))||this.throwUnexpectedToken()),n+=u)}return n};l.prototype.octalToDecimal=function(f){var n="0"!==f,u="01234567".indexOf(f);!this.eof()&&h.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(n=!0,u=8*u+"01234567".indexOf(this.source[this.index++]),"0123".includes(f)&&!this.eof()&&h.Character.isOctalDigit(this.source.charCodeAt(this.index))&&
(u=8*u+"01234567".indexOf(this.source[this.index++])));return{code:u,octal:n}};l.prototype.scanIdentifier=function(){var f=this.index,n=92===this.source.charCodeAt(f)?this.getComplexIdentifier():this.getIdentifier();var u=1===n.length?3:this.isKeyword(n)?4:n.toLowerCase()===d.Keywords.Null?5:n.toLowerCase()===d.Keywords.True||n.toLowerCase()===d.Keywords.False?1:3;if(3!==u&&f+n.length!==this.index){var p=this.index;this.index=f;this.tolerateUnexpectedToken(d.ParsingErrorCodes.InvalidEscapedReservedWord);
this.index=p}return{type:u,value:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}};l.prototype.scanPunctuator=function(){var f=this.index,n=this.source[this.index];switch(n){case "(":case "{":"{"===n&&this.curlyStack.push("{");++this.index;break;case ".":++this.index;break;case "}":++this.index;this.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":++this.index;break;default:for(var u=e.length;0<u;u--)if(n=this.source.substring(this.index,
this.index+u),e[u-1].includes(n)){this.index+=u;break}}this.index===f&&this.throwUnexpectedToken();return{type:7,value:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}};l.prototype.scanHexLiteral=function(f){for(var n="";!this.eof()&&h.Character.isHexDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];0===n.length&&this.throwUnexpectedToken();h.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:6,
value:parseInt("0x"+n,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}};l.prototype.scanBinaryLiteral=function(f){for(var n="";!this.eof();){var u=this.source[this.index];if("0"!==u&&"1"!==u)break;n+=this.source[this.index++]}0===n.length&&this.throwUnexpectedToken();this.eof()||(u=this.source.charCodeAt(this.index),(h.Character.isIdentifierStart(u)||h.Character.isDecimalDigit(u))&&this.throwUnexpectedToken());return{type:6,value:parseInt(n,2),lineNumber:this.lineNumber,
lineStart:this.lineStart,start:f,end:this.index}};l.prototype.scanOctalLiteral=function(f,n){var u="",p=!1;h.Character.isOctalDigit(f.charCodeAt(0))?(p=!0,u="0"+this.source[this.index++]):++this.index;for(;!this.eof()&&h.Character.isOctalDigit(this.source.charCodeAt(this.index));)u+=this.source[this.index++];p||0!==u.length||this.throwUnexpectedToken();(h.Character.isIdentifierStart(this.source.charCodeAt(this.index))||h.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken();
return{type:6,value:parseInt(u,8),lineNumber:this.lineNumber,lineStart:this.lineStart,start:n,end:this.index}};l.prototype.scanNumericLiteral=function(){var f=this.index,n=this.source[f];k.assert(h.Character.isDecimalDigit(n.charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point");var u="";if("."!==n){u=this.source[this.index++];n=this.source[this.index];if("0"===u){if("x"===n||"X"===n)return++this.index,this.scanHexLiteral(f);if("b"===n||"B"===n)return++this.index,
this.scanBinaryLiteral(f);if("o"===n||"O"===n)return this.scanOctalLiteral(n,f)}for(;h.Character.isDecimalDigit(this.source.charCodeAt(this.index));)u+=this.source[this.index++];n=this.source[this.index]}if("."===n){for(u+=this.source[this.index++];h.Character.isDecimalDigit(this.source.charCodeAt(this.index));)u+=this.source[this.index++];n=this.source[this.index]}if("e"===n||"E"===n){u+=this.source[this.index++];n=this.source[this.index];if("+"===n||"-"===n)u+=this.source[this.index++];if(h.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;h.Character.isDecimalDigit(this.source.charCodeAt(this.index));)u+=
this.source[this.index++];else this.throwUnexpectedToken()}h.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:6,value:parseFloat(u),lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}};l.prototype.scanStringLiteral=function(){var f=this.index,n=this.source[f];k.assert("'"===n||'"'===n,"String literal must starts with a quote");++this.index;for(var u="";!this.eof();){var p=this.source[this.index++];if(p===n){n="";break}if("\\"===
p)if((p=this.source[this.index++])&&h.Character.isLineTerminator(p.charCodeAt(0)))++this.lineNumber,"\r"===p&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(p){case "u":"{"===this.source[this.index]?(++this.index,u+=this.scanUnicodeCodePointEscape()):(p=this.scanHexEscape(p),null===p&&this.throwUnexpectedToken(),u+=p);break;case "x":p=this.scanHexEscape(p);null===p&&this.throwUnexpectedToken(d.ParsingErrorCodes.InvalidHexEscapeSequence);u+=p;break;case "n":u+="\n";
break;case "r":u+="\r";break;case "t":u+="\t";break;case "b":u+="\b";break;case "f":u+="\f";break;case "v":u+="\v";break;case "8":case "9":u+=p;this.tolerateUnexpectedToken();break;default:p&&h.Character.isOctalDigit(p.charCodeAt(0))?(p=this.octalToDecimal(p),u+=String.fromCharCode(p.code)):u+=p}else if(h.Character.isLineTerminator(p.charCodeAt(0)))break;else u+=p}""!==n&&(this.index=f,this.throwUnexpectedToken());return{type:8,value:u,lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}};
l.prototype.scanTemplate=function(){var f="",n=!1,u=this.index,p="`"===this.source[u],r=!1,q=2;for(++this.index;!this.eof();){var m=this.source[this.index++];if("`"===m){q=1;n=r=!0;break}if("$"===m){if("{"===this.source[this.index]){this.curlyStack.push("${");++this.index;n=!0;break}f+=m}else if("\\"===m)if(m=this.source[this.index++],h.Character.isLineTerminator(m.charCodeAt(0)))++this.lineNumber,"\r"===m&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(m){case "n":f+=
"\n";break;case "r":f+="\r";break;case "t":f+="\t";break;case "u":if("{"===this.source[this.index])++this.index,f+=this.scanUnicodeCodePointEscape();else{var v=this.index,x=this.scanHexEscape(m);null!==x?f+=x:(this.index=v,f+=m)}break;case "x":m=this.scanHexEscape(m);null===m&&this.throwUnexpectedToken(d.ParsingErrorCodes.InvalidHexEscapeSequence);f+=m;break;case "b":f+="\b";break;case "f":f+="\f";break;case "v":f+="\v";break;default:"0"===m?(h.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&
this.throwUnexpectedToken(d.ParsingErrorCodes.TemplateOctalLiteral),f+="\x00"):h.Character.isOctalDigit(m.charCodeAt(0))?this.throwUnexpectedToken(d.ParsingErrorCodes.TemplateOctalLiteral):f+=m}else h.Character.isLineTerminator(m.charCodeAt(0))?(++this.lineNumber,"\r"===m&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,f+="\n"):f+=m}n||this.throwUnexpectedToken();p||this.curlyStack.pop();return{type:10,value:this.source.slice(u+1,this.index-q),cooked:f,head:p,tail:r,lineNumber:this.lineNumber,
lineStart:this.lineStart,start:u,end:this.index}};l.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var f=this.source.charCodeAt(this.index);return h.Character.isIdentifierStart(f)?this.scanIdentifier():40===f||41===f||59===f?this.scanPunctuator():39===f||34===f?this.scanStringLiteral():46===f?h.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():
h.Character.isDecimalDigit(f)?this.scanNumericLiteral():96===f||125===f&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():55296<=f&&57343>f&&h.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()};return l}();t.Scanner=g})},"esri/arcade/lib/assert":function(){define(["require","exports"],function(g,t){Object.defineProperty(t,"__esModule",{value:!0});t.assert=void 0;t.assert=function(a,b){if(!a)throw Error("ASSERT: "+b);}})},"esri/arcade/lib/character":function(){define(["require",
"exports"],function(g,t){Object.defineProperty(t,"__esModule",{value:!0});t.Character=void 0;var a=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
b=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
t.Character={fromCodePoint:function(c){return 65536>c?String.fromCharCode(c):String.fromCharCode(55296+(c-65536>>10))+String.fromCharCode(56320+(c-65536&1023))},isWhiteSpace:function(c){return 32===c||9===c||11===c||12===c||160===c||5760<=c&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(c)},isLineTerminator:function(c){return 10===c||13===c||8232===c||8233===c},isIdentifierStart:function(c){return 36===c||95===c||65<=c&&90>=c||97<=c&&122>=c||92===c||
128<=c&&a.test(t.Character.fromCodePoint(c))},isIdentifierPart:function(c){return 36===c||95===c||65<=c&&90>=c||97<=c&&122>=c||48<=c&&57>=c||92===c||128<=c&&b.test(t.Character.fromCodePoint(c))},isDecimalDigit:function(c){return 48<=c&&57>=c},isHexDigit:function(c){return 48<=c&&57>=c||65<=c&&70>=c||97<=c&&102>=c},isOctalDigit:function(c){return 48<=c&&55>=c}}})},"esri/arcade/lib/tokenizer":function(){define(["require","exports","./error-handler","./scanner","./types"],function(g,t,a,b,c){Object.defineProperty(t,
"__esModule",{value:!0});t.Tokenizer=void 0;g=function(){function k(h,d){this.errorHandler=new a.ErrorHandler;this.errorHandler.tolerant=d?"boolean"===typeof d.tolerant&&d.tolerant:!1;this.scanner=new b.Scanner(h,this.errorHandler);this.trackComments=d?"boolean"===typeof d.comment&&d.comment:!1;this.buffer=[]}k.prototype.errors=function(){return this.errorHandler.errors};k.prototype.getNextToken=function(){var h=this;if(0===this.buffer.length){var d=this.scanner.scanComments();this.trackComments&&
d&&d.forEach(function(f){var n=h.scanner.source.slice(f.start,f.end);h.buffer.push({type:f.multiLine?"BlockComment":"LineComment",value:n,range:f.range,loc:f.loc})});if(!this.scanner.eof()){d={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart};var e=this.scanner.lex(),l={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart};d={type:c.TokenNames[e.type],value:this.scanner.source.slice(e.start,e.end),range:[e.start,e.end],loc:{start:d,end:l}};this.buffer.push(d)}}return this.buffer.shift()};
return k}();t.Tokenizer=g})},"esri/arcade/featureset/support/RecentlyUsedCache":function(){define(["require","exports"],function(g,t){var a=function(){function c(k){var h=this;h._keys=[];h._values=[];h.length=0;k&&k.forEach(function(d){h.set(d[0],d[1])})}c.prototype.entries=function(){var k=this;return[].slice.call(this.keys().map(function(h,d){return[h,k._values[d]]}))};c.prototype.keys=function(){return[].slice.call(this._keys)};c.prototype.values=function(){return[].slice.call(this._values)};c.prototype.has=
function(k){return this._keys.includes(k)};c.prototype.get=function(k){k=this._keys.indexOf(k);return-1<k?this._values[k]:null};c.prototype.deepGet=function(k){if(!k||!k.length)return null;var h=function(d,e){return null==d?null:e.length?h(d instanceof c?d.get(e[0]):d[e[0]],e.slice(1)):d};return h(this.get(k[0]),k.slice(1))};c.prototype.set=function(k,h){var d=this._keys.indexOf(k);-1<d?this._values[d]=h:(this._keys.push(k),this._values.push(h),this.length=this._values.length);return this};c.prototype.sortedSet=
function(k,h,d,e){var l=this._keys.length;d=d||0;e=void 0!==e?e:l-1;if(0===l)return this._keys.push(k),this._values.push(h),this;if(k===this._keys[d])return this._values.splice(d,0,h),this;if(k===this._keys[e])return this._values.splice(e,0,h),this;if(k>this._keys[e])return this._keys.splice(e+1,0,k),this._values.splice(e+1,0,h),this;if(k<this._keys[d])return this._values.splice(d,0,h),this._keys.splice(d,0,k),this;if(d>=e)return this;l=d+Math.floor((e-d)/2);return k<this._keys[l]?this.sortedSet(k,
h,d,l-1):k>this._keys[l]?this.sortedSet(k,h,l+1,e):this};c.prototype.size=function(){return this.length};c.prototype.clear=function(){this._keys.length=this.length=this._values.length=0;return this};c.prototype.delete=function(k){k=this._keys.indexOf(k);return-1<k?(this._keys.splice(k,1),this._values.splice(k,1),this.length=this._keys.length,!0):!1};c.prototype.forEach=function(k){var h=this;this._keys.forEach(function(d,e){k(h._values[e],d,e)})};c.prototype.map=function(k){var h=this;return this.keys().map(function(d,
e){return k(h._values[e],d,e)})};c.prototype.filter=function(k){var h=this;h._keys.forEach(function(d,e){!1===k(h._values[e],d,e)&&h.delete(d)});return this};c.prototype.clone=function(){return new c(this.entries())};return c}(),b=function(){function c(k){void 0===k&&(k=20);this._maxEntries=k;this._values=new a}c.prototype.delete=function(k){this._values.has(k)&&this._values.delete(k)};c.prototype.get=function(k){var h=null;this._values.has(k)&&(h=this._values.get(k),this._values.delete(k),this._values.set(k,
h));return h};c.prototype.put=function(k,h){if(this._values.size()>=this._maxEntries){var d=this._values.keys()[0];this._values.delete(d)}this._values.set(k,h)};return c}();return function(){function c(k){void 0===k&&(k=20);this._maxEntries=k;this._cache=new b(this._maxEntries)}c.prototype.clear=function(){this._cache=new b(this._maxEntries)};c.prototype.addToCache=function(k,h){this._cache.put(k,h)};c.prototype.removeFromCache=function(k){this._cache.delete(k)};c.prototype.getFromCache=function(k){return this._cache.get(k)};
return c}()})},"esri/arcade/arcadeRuntime":function(){define("require exports ./polyfill/tsSupport/awaiter ./polyfill/tsSupport/generator ./polyfill/tsSupport/assign ./polyfill/tsSupport/spreadarray ./polyfill/tsSupport/extends ./ArcadeModule ./ArcadeModuleLoader ./Dictionary ./executionError ./Feature ./FunctionWrapper ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Geometry ../SpatialReference".split(" "),
function(g,t,a,b,c,k,h,d,e,l,f,n,u,p,r,q,m,v,x,z,A,C,D,B){function y(W,S){for(var ea=[],ka=0;ka<S.arguments.length;ka++)ea.push(E(W,S.arguments[ka]));return ea}function w(W,S,ea){try{return!0===S.preparsed?ea(W,null,S.arguments):ea(W,S,y(W,S))}catch(ka){throw ka;}}function E(W,S){try{switch(null===S||void 0===S?void 0:S.type){case "EmptyStatement":return p.voidOperation;case "VariableDeclarator":var ea=null===S.init?null:E(W,S.init);ea===p.voidOperation&&(ea=null);if("Identifier"!==S.id.type)throw new f.ArcadeExecutionError(W,
f.ExecutionErrorCodes.InvalidIdentifier,S);var ka=S.id.name.toLowerCase();null!=W.localScope?W.localScope[ka]={value:ea,valueset:!0,node:S.init}:W.globalScope[ka]={value:ea,valueset:!0,node:S.init};return p.voidOperation;case "VariableDeclaration":for(var na=0;na<S.declarations.length;na++)E(W,S.declarations[na]);return p.voidOperation;case "ImportDeclaration":var sa,Ca,N=S.specifiers[0].local.name.toLowerCase(),P=W.libraryResolver.loadLibrary(N);na=null;(null===(sa=W.libraryResolver._moduleSingletons)||
void 0===sa?0:sa.has(P.uri))?na=W.libraryResolver._moduleSingletons.get(P.uri):(na=new Y(P),na.loadModule(W),null===(Ca=W.libraryResolver._moduleSingletons)||void 0===Ca?void 0:Ca.set(P.uri,na));W.globalScope[N]={value:na,valueset:!0,node:S};return p.voidOperation;case "ExportNamedDeclaration":E(W,S.declaration);if("FunctionDeclaration"===S.declaration.type)W.exports[S.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===S.declaration.type){na=0;for(var ba=S.declaration.declarations;na<
ba.length;na++)W.exports[ba[na].id.name.toLowerCase()]="variable"}return p.voidOperation;case "BlockStatement":case "Program":a:{var la=p.voidOperation;for(na=0;na<S.body.length;na++)if(la=E(W,S.body[na]),la instanceof p.ReturnResult||la===p.breakResult||la===p.continueResult){var qa=la;break a}qa=la}return qa;case "FunctionDeclaration":var L=S.id.name.toLowerCase();W.globalScope[L]={valueset:!0,node:null,value:new T(S,W)};return p.voidOperation;case "ReturnStatement":if(null===S.argument)var Z=new p.ReturnResult(p.voidOperation);
else{var oa=E(W,S.argument);Z=new p.ReturnResult(oa)}return Z;case "IfStatement":var ua=E(W,S.test);if(!0===ua)var va=E(W,S.consequent);else if(!1===ua)va=null!==S.alternate?E(W,S.alternate):p.voidOperation;else throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.BooleanConditionRequired,S);return va;case "ExpressionStatement":if("AssignmentExpression"===S.expression.type||"UpdateExpression"===S.expression.type)var xa=E(W,S.expression);else{var Aa=E(W,S.expression);xa=Aa===p.voidOperation?p.voidOperation:
new p.ImplicitResult(Aa)}return xa;case "AssignmentExpression":na=null;var wa="";if("MemberExpression"===S.left.type){na=E(W,S.left.object);if(!0===S.left.computed)wa=E(W,S.left.property);else if("Identifier"===S.left.property.type)wa=S.left.property.name;else throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.InvalidIdentifier,S);var Ea=E(W,S.right);if(p.isArray(na))if(p.isNumber(wa)){0>wa&&(wa=na.length+wa);if(0>wa||wa>na.length)throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.OutOfBounds,
S);if(wa===na.length&&"\x3d"!==S.operator)throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.OutOfBounds,S);na[wa]=H(Ea,S.operator,na[wa],S,W)}else throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.ArrayAccessorMustBeNumber,S);else if(na instanceof l){if(!1===p.isString(wa))throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.KeyAccessorMustBeString,S);if(!0===na.hasField(wa))na.setField(wa,H(Ea,S.operator,na.field(wa),S,W));else{if("\x3d"!==S.operator)throw new f.ArcadeExecutionError(W,
f.ExecutionErrorCodes.FieldNotFound,S,{key:wa});na.setField(wa,H(Ea,S.operator,null,S,W))}}else if(p.isFeature(na)){if(!1===p.isString(wa))throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.KeyAccessorMustBeString,S);if(!0===na.hasField(wa))na.setField(wa,H(Ea,S.operator,na.field(wa),S,W));else{if("\x3d"!==S.operator)throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.FieldNotFound,S,{key:wa});na.setField(wa,H(Ea,S.operator,null,S,W))}}else{if(p.isImmutableArray(na))throw new f.ArcadeExecutionError(W,
f.ExecutionErrorCodes.Immutable,S);if(na instanceof Y){if(!1===p.isString(wa))throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.ModuleAccessorMustBeString,S);if(!0===na.hasGlobal(wa))na.setGlobal(wa,H(Ea,S.operator,na.global(wa),S,W));else throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.ModuleExportNotFound,S);}else throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.InvalidIdentifier,S);}var Ja=p.voidOperation}else{na=S.left.name.toLowerCase();var Ma=E(W,S.right);if(null!=W.localScope&&
void 0!==W.localScope[na])W.localScope[na]={value:H(Ma,S.operator,W.localScope[na].value,S,W),valueset:!0,node:S.right},Ja=p.voidOperation;else if(void 0!==W.globalScope[na])W.globalScope[na]={value:H(Ma,S.operator,W.globalScope[na].value,S,W),valueset:!0,node:S.right},Ja=p.voidOperation;else throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.InvalidIdentifier,S);}return Ja;case "UpdateExpression":na=null;wa="";if("MemberExpression"===S.argument.type){na=E(W,S.argument.object);!0===S.argument.computed?
wa=E(W,S.argument.property):"Identifier"===S.argument.property.type&&(wa=S.argument.property.name);if(p.isArray(na))if(p.isNumber(wa)){0>wa&&(wa=na.length+wa);if(0>wa||wa>=na.length)throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.OutOfBounds,S);var Da=p.toNumber(na[wa]);na[wa]="++"===S.operator?Da+1:Da-1}else throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.ArrayAccessorMustBeNumber,S);else if(na instanceof l){if(!1===p.isString(wa))throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.KeyAccessorMustBeString,
S);if(!0===na.hasField(wa))Da=p.toNumber(na.field(wa)),na.setField(wa,"++"===S.operator?Da+1:Da-1);else throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.FieldNotFound,S);}else if(p.isFeature(na)){if(!1===p.isString(wa))throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.KeyAccessorMustBeString,S);if(!0===na.hasField(wa))Da=p.toNumber(na.field(wa)),na.setField(wa,"++"===S.operator?Da+1:Da-1);else throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.FieldNotFound,S);}else{if(p.isImmutableArray(na))throw new f.ArcadeExecutionError(W,
f.ExecutionErrorCodes.Immutable,S);if(na instanceof Y){if(!1===p.isString(wa))throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.ModuleAccessorMustBeString,S);if(!0===na.hasGlobal(wa))Da=p.toNumber(na.global(wa)),na.setGlobal(wa,"++"===S.operator?Da+1:Da-1);else throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.ModuleExportNotFound,S);}else throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.InvalidParameter,S);}var Ya=!1===S.prefix?Da:"++"===S.operator?Da+1:Da-1}else{na="Identifier"===
S.argument.type?S.argument.name.toLowerCase():"";if(!na)throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.InvalidIdentifier,S);if(null!=W.localScope&&void 0!==W.localScope[na])Da=p.toNumber(W.localScope[na].value),W.localScope[na]={value:"++"===S.operator?Da+1:Da-1,valueset:!0,node:S},Ya=!1===S.prefix?Da:"++"===S.operator?Da+1:Da-1;else if(void 0!==W.globalScope[na])Da=p.toNumber(W.globalScope[na].value),W.globalScope[na]={value:"++"===S.operator?Da+1:Da-1,valueset:!0,node:S},Ya=!1===S.prefix?
Da:"++"===S.operator?Da+1:Da-1;else throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.InvalidIdentifier,S);}return Ya;case "BreakStatement":return p.breakResult;case "ContinueStatement":return p.continueResult;case "TemplateElement":return S.value?S.value.cooked:"";case "TemplateLiteral":var Na="",Ua=0;Ja=0;for(na=S.quasis;Ja<na.length;Ja++)if(wa=na[Ja],Na+=wa.value?wa.value.cooked:"",!1===wa.tail){if(S.expressions[Ua]){Ea=p;var $a=Ea.toString,Pa=E(W,S.expressions[Ua]);Ma=W;Ya=S;if(p.isFunctionParameter(Pa))throw new f.ArcadeExecutionError(Ma,
f.ExecutionErrorCodes.NoFunctionInTemplateLiteral,Ya);var La=$a.call(Ea,Pa)}else La="";Na+=La;Ua++}return Na;case "ForStatement":null!==S.init&&E(W,S.init);Ua={testResult:!0,lastAction:p.voidOperation};do b:{na=W;wa=S;La=Ua;if(null!==wa.test){La.testResult=E(na,wa.test);if(!1===La.testResult)break b;if(!0!==La.testResult)throw new f.ArcadeExecutionError(na,f.ExecutionErrorCodes.BooleanConditionRequired,wa);}La.lastAction=E(na,wa.body);La.lastAction===p.breakResult?La.testResult=!1:La.lastAction instanceof
p.ReturnResult?La.testResult=!1:null!==wa.update&&E(na,wa.update)}while(!0===Ua.testResult);Na=Ua.lastAction instanceof p.ReturnResult?Ua.lastAction:p.voidOperation;return Na;case "ForInStatement":return F(W,S);case "WhileStatement":na=!0;var Oa=p.voidOperation;na=E(W,S.test);if(!1===na)var za=p.voidOperation;else{if(!0!==na)throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.BooleanConditionRequired,S);for(;!0===na;){Oa=E(W,S.body);if(Oa===p.breakResult)break;if(Oa instanceof p.ReturnResult)break;
na=E(W,S.test);if(!0!==na&&!1!==na)throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.BooleanConditionRequired,S);}za=Oa instanceof p.ReturnResult?Oa:p.voidOperation}return za;case "Identifier":return ha(W,S);case "MemberExpression":return M(W,S);case "Literal":return S.value;case "CallExpression":a:try{if("MemberExpression"===S.callee.type){var Ia=E(W,S.callee.object);if(!(Ia instanceof Y))throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.FuncionNotFound,S);var Ka=!1===S.callee.computed?
S.callee.property.name:E(W,S.callee.property);if(!Ia.hasGlobal(Ka))throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.FuncionNotFound,S);var eb=Ia.global(Ka);if(!p.isFunctionParameter(eb))throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.CallNonFunction,S);var Wa=eb.call(W,S)}else{if("Identifier"!==S.callee.type)throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.FuncionNotFound,S);if(null!=W.localScope&&void 0!==W.localScope[S.callee.name.toLowerCase()]){var gb=W.localScope[S.callee.name.toLowerCase()];
if(p.isFunctionParameter(gb.value)){Wa=gb.value.call(W,S);break a}throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.CallNonFunction,S);}if(void 0!==W.globalScope[S.callee.name.toLowerCase()]){gb=W.globalScope[S.callee.name.toLowerCase()];if(p.isFunctionParameter(gb.value)){Wa=gb.value.call(W,S);break a}throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.CallNonFunction,S);}throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.FuncionNotFound,S);}}catch(hb){throw hb;}return Wa;case "UnaryExpression":return R(W,
S);case "BinaryExpression":return V(W,S);case "LogicalExpression":return da(W,S);case "ArrayExpression":try{na=[];for(wa=0;wa<S.elements.length;wa++){var kb=E(W,S.elements[wa]);if(p.isFunctionParameter(kb))throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.NoFunctionInArray,S);kb===p.voidOperation?na.push(null):na.push(kb)}var pb=na}catch(hb){throw hb;}return pb;case "ObjectExpression":na={};var lb=new Map;for(wa=0;wa<S.properties.length;wa++){var Za=E(W,S.properties[wa]);if(p.isFunctionParameter(Za.value))throw new f.ArcadeExecutionError(W,
f.ExecutionErrorCodes.NoFunctionInDictionary,S);if(!1===p.isString(Za.key))throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.KeyMustBeString,S);var jb=Za.key.toString(),mb=jb.toLowerCase();lb.has(mb)?jb=lb.get(mb):lb.set(mb,jb);na[jb]=Za.value===p.voidOperation?null:Za.value}var Va=new l(na);Va.immutable=!1;return Va;case "Property":return{key:"Identifier"===S.key.type?S.key.name:E(W,S.key),value:E(W,S.value)};default:throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.Unrecognised,S);
}}catch(hb){throw f.ensureArcadeExecutionError(W,S,hb);}}function F(W,S){var ea=E(W,S.right);"VariableDeclaration"===S.left.type&&E(W,S.left);var ka=null,na="";if("VariableDeclaration"===S.left.type){var sa=S.left.declarations[0].id;"Identifier"===sa.type&&(na=sa.name)}else"Identifier"===S.left.type&&(na=S.left.name);if(!na)throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.InvalidIdentifier,S);na=na.toLowerCase();null!=W.localScope&&void 0!==W.localScope[na]&&(ka=W.localScope[na]);null===ka&&
void 0!==W.globalScope[na]&&(ka=W.globalScope[na]);if(null===ka)throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.InvalidIdentifier,S);if(p.isArray(ea)||p.isString(ea)){ea=ea.length;for(sa=0;sa<ea;sa++){ka.value=sa;na=E(W,S.body);if(na===p.breakResult)break;if(na instanceof p.ReturnResult)return na}return p.voidOperation}if(p.isImmutableArray(ea)){for(sa=0;sa<ea.length();sa++){ka.value=sa;na=E(W,S.body);if(na===p.breakResult)break;if(na instanceof p.ReturnResult)return na}return p.voidOperation}if(ea instanceof
l||p.isFeature(ea))for(ea=ea.keys(),sa=0;sa<ea.length;sa++){ka.value=ea[sa];na=E(W,S.body);if(na===p.breakResult)break;if(na instanceof p.ReturnResult)return na}else return p.voidOperation}function H(W,S,ea,ka,na){switch(S){case "\x3d":return W===p.voidOperation?null:W;case "/\x3d":return p.toNumber(ea)/p.toNumber(W);case "*\x3d":return p.toNumber(ea)*p.toNumber(W);case "-\x3d":return p.toNumber(ea)-p.toNumber(W);case "+\x3d":return p.isString(ea)||p.isString(W)?p.toString(ea)+p.toString(W):p.toNumber(ea)+
p.toNumber(W);case "%\x3d":return p.toNumber(ea)%p.toNumber(W);default:throw new f.ArcadeExecutionError(na,f.ExecutionErrorCodes.UnsupportedOperator,ka);}}function M(W,S){try{var ea=E(W,S.object);if(null===ea)throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.MemberOfNull,S);if(!1===S.computed){if("Identifier"===S.property.type){if(ea instanceof l||p.isFeature(ea))return ea.field(S.property.name);if(ea instanceof D)return v.geometryMember(ea,S.property.name,S,W);if(ea instanceof Y){if(!ea.hasGlobal(S.property.name))throw new f.ArcadeExecutionError(W,
f.ExecutionErrorCodes.InvalidIdentifier,S);return ea.global(S.property.name)}}throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.InvalidMemberAccessKey,S);}var ka=E(W,S.property);if(ea instanceof l||p.isFeature(ea)){if(p.isString(ka))return ea.field(ka);throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.InvalidMemberAccessKey,S);}if(ea instanceof Y){if(p.isString(ka))return ea.global(ka);throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.InvalidMemberAccessKey,S);}if(ea instanceof
D){if(p.isString(ka))return v.geometryMember(ea,ka,S,W);throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.InvalidMemberAccessKey,S);}if(p.isArray(ea)){if(p.isNumber(ka)&&isFinite(ka)&&Math.floor(ka)===ka){0>ka&&(ka=ea.length+ka);if(ka>=ea.length||0>ka)throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.OutOfBounds,S);return ea[ka]}throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.InvalidMemberAccessKey,S);}if(p.isString(ea)){if(p.isNumber(ka)&&isFinite(ka)&&Math.floor(ka)===ka){0>
ka&&(ka=ea.length+ka);if(ka>=ea.length||0>ka)throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.OutOfBounds,S);return ea[ka]}throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.InvalidMemberAccessKey,S);}if(p.isImmutableArray(ea)&&p.isNumber(ka)&&isFinite(ka)&&Math.floor(ka)===ka){0>ka&&(ka=ea.length()+ka);if(ka>=ea.length()||0>ka)throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.OutOfBounds,S);return ea.get(ka)}throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.InvalidMemberAccessKey,
S);}catch(na){throw na;}}function R(W,S){try{var ea=E(W,S.argument);if(p.isBoolean(ea)){if("!"===S.operator)return!ea;if("-"===S.operator)return-1*p.toNumber(ea);if("+"===S.operator)return 1*p.toNumber(ea);if("~"===S.operator)return~p.toNumber(ea);throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.UnsupportedUnaryOperator,S);}if("~"===S.operator)return~p.toNumber(ea);if("-"===S.operator)return-1*p.toNumber(ea);if("+"===S.operator)return 1*p.toNumber(ea);throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.UnsupportedUnaryOperator,
S);}catch(ka){throw ka;}}function V(W,S){try{var ea=[E(W,S.left),E(W,S.right)],ka=ea[0],na=ea[1];switch(S.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return p.binaryOperator(p.toNumber(ka),p.toNumber(na),S.operator);case "\x3d\x3d":return p.equalityTest(ka,na);case "!\x3d":return!p.equalityTest(ka,na);case "\x3c":return p.greaterThanLessThan(ka,na,S.operator);case "\x3e":return p.greaterThanLessThan(ka,na,S.operator);case "\x3c\x3d":return p.greaterThanLessThan(ka,
na,S.operator);case "\x3e\x3d":return p.greaterThanLessThan(ka,na,S.operator);case "+":return p.isString(ka)||p.isString(na)?p.toString(ka)+p.toString(na):p.toNumber(ka)+p.toNumber(na);case "-":return p.toNumber(ka)-p.toNumber(na);case "*":return p.toNumber(ka)*p.toNumber(na);case "/":return p.toNumber(ka)/p.toNumber(na);case "%":return p.toNumber(ka)%p.toNumber(na);default:throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.UnsupportedOperator,S);}}catch(sa){throw sa;}}function da(W,S){try{var ea=
E(W,S.left);if(p.isBoolean(ea))switch(S.operator){case "||":if(!0===ea)return ea;var ka=E(W,S.right);if(p.isBoolean(ka))return ka;throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.LogicExpressionOrAnd,S);case "\x26\x26":if(!1===ea)return ea;ka=E(W,S.right);if(p.isBoolean(ka))return ka;throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.LogicExpressionOrAnd,S);default:throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.LogicExpressionOrAnd,S);}throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,
S);}catch(na){throw na;}}function ha(W,S){try{var ea=S.name.toLowerCase();if(null!=W.localScope&&void 0!==W.localScope[ea]){var ka=W.localScope[ea];if(!0===ka.valueset)return ka.value;ka.value=E(W,ka.node);ka.valueset=!0;return ka.value}if(void 0!==W.globalScope[ea]){ka=W.globalScope[ea];if(!0===ka.valueset)return ka.value;ka.value=E(W,ka.node);ka.valueset=!0;return ka.value}throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.InvalidIdentifier,S);}catch(na){throw na;}}function fa(W,S,ea,ka){try{var na=
E(W,S.arguments[ea]);if(p.equalityTest(na,ka))return E(W,S.arguments[ea+1]);var sa=S.arguments.length-ea;return 1===sa?E(W,S.arguments[ea]):2===sa?null:3===sa?E(W,S.arguments[ea+2]):fa(W,S,ea+2,ka)}catch(Ca){throw Ca;}}function X(W,S,ea,ka){try{if(!0===ka)return E(W,S.arguments[ea+1]);if(3===S.arguments.length-ea)return E(W,S.arguments[ea+2]);var na=E(W,S.arguments[ea+2]);if(!1===p.isBoolean(na))throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.BooleanConditionRequired,S.arguments[ea+2]);return X(W,
S,ea+2,na)}catch(sa){throw sa;}}function ca(W,S,ea,ka){try{var na=W.body;if(ea.length!==W.params.length)throw new f.ArcadeExecutionError(S,f.ExecutionErrorCodes.WrongNumberOfParameters,ka);if(null!=S.localScope)for(var sa=0;sa<ea.length;sa++)S.localScope[W.params[sa].name.toLowerCase()]={value:ea[sa],valueset:!0,node:null};var Ca=E(S,na);if(Ca instanceof p.ReturnResult)return Ca.value;if(Ca===p.breakResult)throw new f.ArcadeExecutionError(S,f.ExecutionErrorCodes.UnexpectedToken,ka);if(Ca===p.continueResult)throw new f.ArcadeExecutionError(S,
f.ExecutionErrorCodes.UnexpectedToken,ka);return Ca instanceof p.ImplicitResult?Ca.value:Ca}catch(N){throw N;}}function Q(W,S,ea){var ka=new ta;W||(W={});S||(S={});var na=new l({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});na.immutable=!1;ka.textformatting={value:na,valueset:!0,node:null};for(var sa in S)ka[sa]={value:new u.NativeFunction(S[sa]),native:!0,valueset:!0,node:null};for(sa in W)ka[sa]=W[sa]&&"esri.Graphic"===W[sa].declaredClass?{value:n.createFromGraphic(W[sa],
ea),valueset:!0,node:null}:{value:W[sa],valueset:!0,node:null};return ka}function U(W){}function ia(W){for(var S={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:w,evaluateIdentifier:ha},ea=0;ea<W.length;ea++)W[ea].registerFunctions(S);for(var ka in S.functions)ja[ka]={value:new u.NativeFunction(S.functions[ka]),valueset:!0,node:null},ta.prototype[ka]=ja[ka];for(ea=0;ea<S.signatures.length;ea++)r.addFunctionDeclaration(S.signatures[ea],"sync")}Object.defineProperty(t,"__esModule",
{value:!0});t.executeScript=t.extend=t.functionHelper=void 0;var T=function(W){function S(ea,ka){var na=W.call(this)||this;na.definition=null;na.context=null;na.definition=ea;na.context=ka;return na}h(S,W);S.prototype.createFunction=function(ea){var ka=this;return function(){for(var na=[],sa=0;sa<arguments.length;sa++)na[sa]=arguments[sa];sa={spatialReference:ka.context.spatialReference,console:ka.context.console,timeReference:ka.context.timeReference?ka.context.timeReference:null,lrucache:ka.context.lrucache,
exports:ka.context.exports,libraryResolver:ka.context.libraryResolver,interceptor:ka.context.interceptor,localScope:{},depthCounter:{depth:ea.depthCounter.depth+1},globalScope:ka.context.globalScope};if(64<sa.depthCounter.depth)throw new f.ArcadeExecutionError(ea,f.ExecutionErrorCodes.MaximumCallDepth,null);return ca(ka.definition,sa,na,null)}};S.prototype.call=function(ea,ka){var na=this;return w(ea,ka,function(sa,Ca,N){var P;sa={spatialReference:ea.spatialReference,globalScope:ea.globalScope,depthCounter:{depth:ea.depthCounter.depth+
1},libraryResolver:ea.libraryResolver,exports:ea.exports,timeReference:null!==(P=ea.timeReference)&&void 0!==P?P:null,console:ea.console,lrucache:ea.lrucache,interceptor:ea.interceptor,localScope:{}};if(64<sa.depthCounter.depth)throw new f.ArcadeExecutionError(ea,f.ExecutionErrorCodes.MaximumCallDepth,ka);return ca(na.definition,sa,N,ka)})};S.prototype.marshalledCall=function(ea,ka,na,sa){var Ca=this;return sa(ea,ka,function(N,P,ba){var la;N={spatialReference:ea.spatialReference,globalScope:na.globalScope,
depthCounter:{depth:ea.depthCounter.depth+1},libraryResolver:ea.libraryResolver,exports:ea.exports,console:ea.console,timeReference:null!==(la=ea.timeReference)&&void 0!==la?la:null,lrucache:ea.lrucache,interceptor:ea.interceptor,localScope:{}};ba=ba.map(function(qa){return!p.isFunctionParameter(qa)||qa instanceof u.ScopeMarshalledFunction?qa:u.wrapModuleScopedResponse(qa,ea,sa)});return u.wrapModuleScopedResponse(ca(Ca.definition,N,ba,ka),na,sa)})};return S}(u.ArcadeFunction),Y=function(W){function S(ea){return W.call(this,
ea)||this}h(S,W);S.prototype.global=function(ea){ea=this.executingContext.globalScope[ea.toLowerCase()];ea.valueset||(ea.value=E(this.executingContext,ea.node),ea.valueset=!0);if(p.isFunctionParameter(ea.value)&&!(ea.value instanceof u.ScopeMarshalledFunction)){var ka=new u.ScopeMarshalledFunction;ka.fn=ea.value;ka.parameterEvaluator=w;ka.context=this.executingContext;ea.value=ka}return ea.value};S.prototype.setGlobal=function(ea,ka){if(p.isFunctionParameter(ka))throw new f.ArcadeExecutionError(null,
f.ExecutionErrorCodes.AssignModuleFunction,null);this.executingContext.globalScope[ea.toLowerCase()]={value:ka,valueset:!0,node:null}};S.prototype.hasGlobal=function(ea){void 0===this.executingContext.exports[ea]&&(ea=ea.toLowerCase());return void 0!==this.executingContext.exports[ea]?!0:!1};S.prototype.loadModule=function(ea){var ka,na=ea.spatialReference;if(null===na||void 0===na)na=new B({wkid:102100});this.moduleScope=Q({},ea.customfunctions,ea.timeReference);this.executingContext={spatialReference:na,
globalScope:this.moduleScope,localScope:null,libraryResolver:new e.ArcadeModuleLoader(ea.libraryResolver._moduleSingletons,this.source.syntax.loadedModules),exports:{},console:ea.console?ea.console:U,timeReference:null!==(ka=ea.timeReference)&&void 0!==ka?ka:null,lrucache:ea.lrucache,interceptor:ea.interceptor,depthCounter:{depth:1}};E(this.executingContext,this.source.syntax)};return S}(d.ArcadeModule),ja={};m.registerFunctions(ja,w);C.registerFunctions(ja,w);z.registerFunctions(ja,w);v.registerFunctions(ja,
w);A.registerFunctions(ja,w);x.registerFunctions(ja,w);ja.iif=function(W,S){try{p.pcCheck(null===S.arguments?[]:S.arguments,3,3,W,S);var ea=E(W,S.arguments[0]);if(!1===p.isBoolean(ea))throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.BooleanConditionRequired,S);return!0===ea?E(W,S.arguments[1]):E(W,S.arguments[2])}catch(ka){throw ka;}};ja.decode=function(W,S){try{if(2>S.arguments.length)throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.WrongNumberOfParameters,S);if(2===S.arguments.length)return E(W,
S.arguments[1]);if(0===(S.arguments.length-1)%2)throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.WrongNumberOfParameters,S);var ea=E(W,S.arguments[0]);return fa(W,S,1,ea)}catch(ka){throw ka;}};ja.when=function(W,S){try{if(3>S.arguments.length)throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.WrongNumberOfParameters,S);if(0===S.arguments.length%2)throw new f.ArcadeExecutionError(W,f.ExecutionErrorCodes.WrongNumberOfParameters,S);var ea=E(W,S.arguments[0]);if(!1===p.isBoolean(ea))throw new f.ArcadeExecutionError(W,
f.ExecutionErrorCodes.BooleanConditionRequired,S.arguments[0]);return X(W,S,0,ea)}catch(ka){throw ka;}};for(var pa in ja)ja[pa]={value:new u.NativeFunction(ja[pa]),valueset:!0,node:null};var ta=function(){};ta.prototype=ja;ta.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};ta.prototype.pi={value:Math.PI,valueset:!0,node:null};t.functionHelper={fixSpatialReference:p.fixSpatialReference,parseArguments:y,standardFunction:w};t.extend=ia;ia([q]);t.executeScript=function(W,S){var ea,
ka=S.spatialReference;if(null===ka||void 0===ka)ka=new B({wkid:102100});var na=null;W.usesModules&&(na=new e.ArcadeModuleLoader(new Map,W.loadedModules));var sa=Q(S.vars,S.customfunctions,S.timeReference);ka={spatialReference:ka,globalScope:sa,localScope:null,exports:{},libraryResolver:na,console:S.console?S.console:U,timeReference:null!==(ea=S.timeReference)&&void 0!==ea?ea:null,lrucache:S.lrucache,interceptor:S.interceptor,depthCounter:{depth:1}};W=E(ka,W);W instanceof p.ReturnResult&&(W=W.value);
W instanceof p.ImplicitResult&&(W=W.value);W===p.voidOperation&&(W=null);if(W===p.breakResult)throw new f.ArcadeExecutionError(ka,f.ExecutionErrorCodes.IllegalResult,null);if(W===p.continueResult)throw new f.ArcadeExecutionError(ka,f.ExecutionErrorCodes.IllegalResult,null);if(p.isFunctionParameter(W))throw new f.ArcadeExecutionError(ka,f.ExecutionErrorCodes.IllegalResult,null);return W}})},"esri/layers/vectorTiles/views/2d/engine/webgl/color":function(){define(["require","exports","./number"],function(g,
t,a){function b(h,d){Array.isArray(d)?(h[0]=d[0],h[1]=d[1],h[2]=d[2],h[3]=d[3]):(h[0]=d.r,h[1]=d.g,h[2]=d.b,h[3]=d.a);return h}function c(h,d,e){void 0===d&&(d=0);void 0===e&&(e=!1);var l=h[d+3];h[d+0]*=l;h[d+1]*=l;h[d+2]*=l;e||(h[d+3]*=255);return h}Object.defineProperty(t,"__esModule",{value:!0});t.white=[255,255,255,1];var k=[0,0,0,0];t.premultiplyAlpha=c;t.copyAndPremultiply=function(h){return c(b([],h))};t.premultiplyAlphaUint32=function(h){c(b(k,h));return a.i8888to32(k[0],k[1],k[2],k[3])};
t.premultiplyAlphaRGBA=function(h){if(!h)return 0;var d=h.a;return a.i8888to32(h.r*d,h.g*d,h.b*d,255*d)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/number":function(){define(["require","exports"],function(g,t){Object.defineProperty(t,"__esModule",{value:!0});var a=new Float32Array(1),b=new Uint32Array(a.buffer);t.nextHighestPowerOfTwo=function(c){c--;c|=c>>1;c|=c>>2;c|=c>>4;c|=c>>8;c|=c>>16;c++;return c};t.toUint32=function(c){a[0]=c;return b[0]};t.i1616to32=function(c,k){return 65535&c|k<<
16};t.i8888to32=function(c,k,h,d){return c&255|(k&255)<<8|(h&255)<<16|d<<24};t.i8816to32=function(c,k,h){return c&255|(k&255)<<8|h<<16};t.numTo32=function(c){return c|0}})},"esri/layers/vectorTiles/views/2d/engine/webgl/SymbolProperties":function(){define(["require","exports","../../../../core/ObjectPool"],function(g,t,a){Object.defineProperty(t,"__esModule",{value:!0});g=function(){function b(){this.color=[0,0,0,0];this.haloColor=[0,0,0,0];this.haloSize=0;this.size=12;this.vAnchor=this.hAnchor=this.offsetY=
this.offsetX=this.angle=0}b.prototype.acquire=function(c,k,h,d,e,l,f,n,u){this.color=c;this.haloColor=k;this.haloSize=h;this.size=d;this.angle=e;this.offsetX=l;this.offsetY=f;this.hAnchor=n;this.vAnchor=u};b.prototype.release=function(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=this.size=this.haloSize=this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0};b.pool=new a(b);return b}();t.TextProperties=
g})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrushInfo":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../GeometryUtils ./WGLBrush ../shaders/glShaderSnippets ../../../tiling/enums ../../../../webgl/BufferObject ../../../../webgl/Program ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),function(g,t,a,b,c,k,h,d,e,l,f){Object.defineProperty(t,"__esModule",{value:!0});g=function(n){function u(){var p=n.call(this)||this;p._initialized=
!1;p._maxWidth=0;p._color=new Float32Array([1,0,0,1]);return p}a(u,n);u.prototype.dispose=function(){this._outlineProgram&&(this._outlineProgram.dispose(),this._outlineProgram=null);this._tileInfoProgram&&(this._tileInfoProgram.dispose(),this._tileInfoProgram=null);this._outlineVertexArrayObject&&(this._outlineVertexArrayObject.dispose(),this._outlineVertexArrayObject=null);this._tileInfoVertexArrayObject&&(this._tileInfoVertexArrayObject.dispose(),this._tileInfoVertexArrayObject=null);this._canvas=
null};u.prototype.draw=function(p,r){p=p.context;if(r.status!==h.TileStatus.INITIALIZED){this._initialized||this._initialize(p);p.bindVAO(this._outlineVertexArrayObject);p.bindProgram(this._outlineProgram);this._outlineProgram.setUniformMatrix4fv("u_transformMatrix",r.tileTransform.transform);this._outlineProgram.setUniform2fv("u_normalized_origin",r.tileTransform.displayCoord);this._outlineProgram.setUniform1f("u_coord_range",512);this._outlineProgram.setUniform1f("u_depth",0);this._outlineProgram.setUniform4fv("u_color",
this._color);p.setLineWidth(2);p.drawArrays(3,0,4);p.bindVAO();var q=this._getTexture(p,r);q&&(p.bindVAO(this._tileInfoVertexArrayObject),p.bindProgram(this._tileInfoProgram),p.bindTexture(q,0),this._tileInfoProgram.setUniformMatrix4fv("u_transformMatrix",r.tileTransform.transform),this._tileInfoProgram.setUniform2fv("u_normalized_origin",r.tileTransform.displayCoord),this._tileInfoProgram.setUniform1f("u_depth",0),this._tileInfoProgram.setUniform1f("u_coord_ratio",1),this._tileInfoProgram.setUniform2f("u_delta",
8,8),this._tileInfoProgram.setUniform2f("u_dimensions",q.descriptor.width,q.descriptor.height),p.drawArrays(5,0,4),p.bindVAO())}};u.prototype._initialize=function(p){if(this._initialized)return!0;var r={a_pos:0},q=new e(p,k.backgroundVS,k.backgroundFS,r),m=new e(p,k.tileInfoVS,k.tileInfoFS,r),v={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},x=new Int8Array([0,0,1,0,1,1,0,1]);x=d.createVertex(p,35044,x);x=new f(p,r,v,{geometry:x});var z=new Int8Array([0,0,1,
0,0,1,1,1]);z=d.createVertex(p,35044,z);p=new f(p,r,v,{geometry:z});this._outlineProgram=q;this._tileInfoProgram=m;this._outlineVertexArrayObject=x;this._tileInfoVertexArrayObject=p;return this._initialized=!0};u.prototype._getTexture=function(p,r){if(r.texture)return r.texture;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id","canvas2d"),this._canvas.setAttribute("width","256"),this._canvas.setAttribute("height","32"),this._canvas.setAttribute("style","display:none"));
var q=r.key.id,m=this._canvas.getContext("2d");m.font="24px sans-serif";m.textAlign="left";m.textBaseline="middle";var v=m.measureText(q);v=Math.pow(2,Math.ceil(b.log2(v.width+2)));v>this._maxWidth&&(this._maxWidth=v);m.clearRect(0,0,this._maxWidth,32);m.fillStyle="blue";m.fillText(q,0,16);r.texture=new l(p,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728},this._canvas);return r.texture};return u}(c.default);t.default=g})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrush":function(){define(["require",
"exports"],function(g,t){Object.defineProperty(t,"__esModule",{value:!0});g=function(){return function(){}}();t.default=g})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/glShaderSnippets":function(){define("require exports dojo/text!./backgroundShaders.xml dojo/text!./bitblitShaders.xml dojo/text!./stencilShaders.xml dojo/text!./tileInfo.xml ../../../../webgl/ShaderSnippets".split(" "),function(g,t,a,b,c,k,h){g=new h;h.parse(a,g);h.parse(b,g);h.parse(c,g);h.parse(k,g);return g})},"esri/layers/vectorTiles/views/2d/tiling/enums":function(){define(["require",
"exports"],function(g,t){Object.defineProperty(t,"__esModule",{value:!0});g=t.TileStatus||(t.TileStatus={});g[g.INITIALIZED=0]="INITIALIZED";g[g.NO_DATA=1]="NO_DATA";g[g.READY=2]="READY";g[g.MODIFIED=3]="MODIFIED";g[g.INVALID=4]="INVALID"})},"esri/layers/vectorTiles/views/webgl/BufferObject":function(){define(["require","exports","dojo/has"],function(g,t,a){return function(){function b(c,k,h,d,e){this._glName=this._context=null;this._bufferType=void 0;this._usage=35044;this._size=-1;this._indexType=
void 0;this._context=c;this._bufferType=k;this._usage=h;this._id=b._nextId++;this._glName=this._context.gl.createBuffer();a("esri-webgl-debug")&&c.instanceCounter.incrementCount(1);d&&this.setData(d,e)}b.createIndex=function(c,k,h,d){return new b(c,34963,k,h,d)};b.createVertex=function(c,k,h){return new b(c,34962,k,h)};Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"glName",{get:function(){return this._glName},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"usage",{get:function(){return this._usage},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"bufferType",{get:function(){return this._bufferType},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"indexType",{get:function(){return this._indexType},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"byteSize",{get:function(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size},enumerable:!0,configurable:!0});b.prototype.dispose=function(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(1),this._context=null)};b.prototype.setData=function(c,k){if(c){if("number"===typeof c){if(34963===this._bufferType&&k)switch(this._indexType=k,this._size=c,
k){case 5123:c*=2;break;case 5125:c*=4}}else k=c.byteLength,c instanceof Uint16Array&&(k/=2,this._indexType=5123),c instanceof Uint32Array&&(k/=4,this._indexType=5125),this._size=k,ArrayBuffer.isView(c)&&(c=c.buffer);k=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this._bufferType,c,this._usage);this._context.bindVAO(k)}};b.prototype.setSubData=function(c,k,h,d){void 0===k&&(k=0);void 0===h&&(h=0);if(c){var e=d,l=c.byteLength;c instanceof
Uint16Array&&(l/=2,k*=2,h*=2,e*=2);c instanceof Uint32Array&&(l/=4,k*=4,h*=4,e*=4);void 0===d&&(d=l-1);d=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);l=this._context.gl;c=ArrayBuffer.isView(c)?c.buffer:c;l.bufferSubData(this._bufferType,k,c.slice(h,e));this._context.bindVAO(d)}};b._nextId=0;return b}()})},"esri/layers/vectorTiles/views/webgl/Texture":function(){define(["require","exports","dojo/has"],function(g,t,a){return function(){function b(c,k,h){this._glName=
this._context=null;this._id=-1;this._desc=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._boundToUnits=new Set;this._context=c;this._desc={pixelFormat:k.pixelFormat,internalFormat:k.internalFormat,dataType:k.dataType,target:k.target?k.target:3553,samplingMode:k.samplingMode?k.samplingMode:9729,wrapMode:k.wrapMode?k.wrapMode:10497,maxAnisotropy:k.maxAnisotropy,flipped:void 0!==k.flipped?k.flipped:!1,hasMipmap:void 0!==k.hasMipmap?k.hasMipmap:!1,level:void 0!==k.level?k.level:0,unpackAlignment:k.unpackAlignment?
k.unpackAlignment:4,width:k.width,height:k.height,preMultiplyAlpha:void 0!==k.preMultiplyAlpha?k.preMultiplyAlpha:!1};this._id=++b._nextId;a("esri-webgl-debug")&&c.instanceCounter.incrementCount(0);this.setData(h)}Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"descriptor",{get:function(){return this._desc},
enumerable:!0,configurable:!0});b.prototype.dispose=function(){var c=this;if(this._context){if(this._glName){var k=this._context.gl;this._boundToUnits.forEach(function(h){c._context.bindTexture(null,h)});k.deleteTexture(this._glName);this._glName=null}a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(0);this._context=null}};b.prototype.resize=function(c,k){var h=this._desc;if(h.width!==c||h.height!==k)h.width=c,h.height=k,this.setData(null)};b.prototype.setData=function(c){var k=
this._context.gl;this._glName||(this._glName=k.createTexture());void 0===c&&(c=null);null===c&&(this._desc.width=this._desc.width||4,this._desc.height=this._desc.height||4);var h=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var d=this._desc;b._validateTexture(d);k.pixelStorei(k.UNPACK_ALIGNMENT,d.unpackAlignment);k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,d.flipped?1:0);k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d.preMultiplyAlpha);if(c instanceof ImageData||c instanceof HTMLImageElement||
c instanceof HTMLCanvasElement||c instanceof HTMLVideoElement)k.texImage2D(k.TEXTURE_2D,d.level,d.internalFormat?d.internalFormat:d.pixelFormat,d.pixelFormat,d.dataType,c),void 0===this._desc.width&&(this._desc.width=c.width),void 0===this._desc.height&&(this._desc.height=c.height);else{var e=d.internalFormat?d.internalFormat:d.pixelFormat,l=d.pixelFormat;k.DEPTH24_STENCIL8&&e===k.DEPTH_STENCIL&&(e=k.DEPTH24_STENCIL8);k.texImage2D(k.TEXTURE_2D,d.level,e,d.width,d.height,0,l,d.dataType,c)}d.hasMipmap&&
this.generateMipmap();b._applySamplingMode(k,this._desc);b._applyWrapMode(k,this._desc);b._applyAnisotropicFilteringParameters(this._context,this._desc);this._context.bindTexture(h,0)};b.prototype.updateData=function(c,k,h,d,e,l){var f=this._context.gl,n=this._desc,u=this._context.getBoundTexture(0);this._context.bindTexture(this,0);l instanceof ImageData||l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement?f.texSubImage2D(f.TEXTURE_2D,c,k,h,n.pixelFormat,
n.dataType,l):f.texSubImage2D(f.TEXTURE_2D,c,k,h,d,e,n.pixelFormat,n.dataType,l);this._context.bindTexture(u,0)};b.prototype.generateMipmap=function(){var c=this._desc;c.hasMipmap||(c.hasMipmap=!0,b._validateTexture(c));9729===c.samplingMode?(this._samplingModeDirty=!0,c.samplingMode=9985):9728===c.samplingMode&&(this._samplingModeDirty=!0,c.samplingMode=9984);c=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var k=this._context.gl;k.generateMipmap(k.TEXTURE_2D);this._context.bindTexture(c,
0)};b.prototype.setSamplingMode=function(c){c!==this._desc.samplingMode&&(this._desc.samplingMode=c,b._validateTexture(this._desc),this._samplingModeDirty=!0)};b.prototype.setWrapMode=function(c){c!==this._desc.wrapMode&&(this._desc.wrapMode=c,b._validateTexture(this._desc),this._wrapModeDirty=!0)};b.prototype.applyChanges=function(){var c=this._context.gl,k=this._desc;this._samplingModeDirty&&(b._applySamplingMode(c,k),this._samplingModeDirty=!1);this._wrapModeDirty&&(b._applyWrapMode(c,k),this._wrapModeDirty=
!1)};b.prototype.setBoundToUnit=function(c,k){k?this._boundToUnits.add(c):this._boundToUnits.delete(c)};b._isPowerOfTwo=function(c){return 0===(c&c-1)};b._validateTexture=function(c){b._isPowerOfTwo(c.width)&&b._isPowerOfTwo(c.height)};b._applySamplingMode=function(c,k){var h=k.samplingMode;if(9985===h||9987===h)h=9729;else if(9984===h||9986===h)h=9728;c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,h);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,k.samplingMode)};b._applyWrapMode=function(c,
k){c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,k.wrapMode);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,k.wrapMode)};b._applyAnisotropicFilteringParameters=function(c,k){if(null!=k.maxAnisotropy){var h=c.capabilities.textureFilterAnisotropic;h&&(c=c.gl,c.texParameterf(c.TEXTURE_2D,h.TEXTURE_MAX_ANISOTROPY,k.maxAnisotropy))}};b._nextId=0;return b}()})},"esri/layers/vectorTiles/views/webgl/VertexArrayObject":function(){define(["require","exports","dojo/has","./Util"],function(g,t,a,b){return function(){function c(k,
h,d,e,l){this._locations=this._layout=this._glName=this._context=null;this._indexBuffer=this._buffers=void 0;this._initialized=!1;this._context=k;this._layout=d;this._buffers=e;this._locations=h;l&&(this._indexBuffer=l);this._id=c._nextId++;a("esri-webgl-debug")&&k.instanceCounter.incrementCount(2)}Object.defineProperty(c.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"vertexBuffers",{get:function(){return this._buffers},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"size",{get:function(){var k=this;return Object.keys(this._buffers).reduce(function(h,d){return h+k._buffers[d].size},this._indexBuffer?this._indexBuffer.size:0)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});c.prototype.dispose=function(k){void 0===k&&(k=!0);if(this._context){var h=this._context.capabilities.vao;h&&this._glName&&(h.deleteVertexArray(this._glName),this._glName=null);this._context.getBoundVAO()===this&&this._context.bindVAO(null);if(k){for(var d in this._buffers)this._buffers[d].dispose(),delete this._buffers[d];
this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null)}a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(2);this._context=null}};c.prototype.initialize=function(){if(!this._initialized){var k=this._context.capabilities.vao;if(k){var h=k.createVertexArray();k.bindVertexArray(h);this._bindLayout();k.bindVertexArray(null);this._glName=h}this._initialized=!0}};c.prototype.bind=function(){this.initialize();var k=this._context.capabilities.vao;k?k.bindVertexArray(this.glName):
(this._context.bindVAO(null),this._bindLayout())};c.prototype._bindLayout=function(){var k=this._buffers,h=!!this._context.capabilities.vao,d=this._layout,e=this._indexBuffer,l=this._context.gl,f;for(f in k)b.bindVertexBufferLayout(this._context,this._locations,k[f],d[f]);e&&(h?l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,e.glName):this._context.bindBuffer(e))};c.prototype.unbind=function(){this.initialize();var k=this._context.capabilities.vao;k?k.bindVertexArray(null):this._unbindLayout()};c.prototype._unbindLayout=
function(){var k=this._buffers,h=this._layout,d;for(d in k)b.unbindVertexBufferLayout(this._context,this._locations,k[d],h[d]);(k=this._indexBuffer)&&this._context.unbindBuffer(k.bufferType)};c._nextId=0;return c}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrushStencil":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix/vec4 ./WGLBrush ../shaders/glShaderSnippets ../../../../webgl/BufferObject ../../../../webgl/Program ../../../../webgl/VertexArrayObject".split(" "),
function(g,t,a,b,c,k,h,d,e){Object.defineProperty(t,"__esModule",{value:!0});g=function(l){function f(){var n=l.call(this)||this;n._color=b.create();n._initialized=!1;n._color.set([1,0,0,1]);return n}a(f,l);f.prototype.dispose=function(){this._solidProgram&&(this._solidProgram.dispose(),this._solidProgram=null);this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null)};f.prototype.draw=function(n,u){n=n.context;this._initialized||this._initialize(n);
n.setStencilFunctionSeparate(1032,519,u.stencilRef,255);n.bindVAO(this._solidVertexArrayObject);n.bindProgram(this._solidProgram);this._solidProgram.setUniformMatrix4fv("u_transformMatrix",u.tileTransform.transform);this._solidProgram.setUniform2fv("u_normalized_origin",u.tileTransform.displayCoord);this._solidProgram.setUniform1f("u_coord_range",512);this._solidProgram.setUniform1f("u_depth",0);this._solidProgram.setUniform4fv("u_color",this._color);n.drawArrays(5,0,4);n.bindVAO()};f.prototype._initialize=
function(n){if(this._initialized)return!0;var u={a_pos:0},p=new d(n,k.backgroundVS,k.backgroundFS,u);if(!p)return!1;var r=new Int8Array([0,0,1,0,0,1,1,1]);r=h.createVertex(n,35044,r);n=new e(n,u,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},{geometry:r});this._solidProgram=p;this._solidVertexArrayObject=n;return this._initialized=!0};return f}(c.default);t.default=g})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec4":function(){define(["./common"],function(g){var t=
{create:function(){var a=new g.ARRAY_TYPE(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a},clone:function(a){var b=new g.ARRAY_TYPE(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},fromValues:function(a,b,c,k){var h=new g.ARRAY_TYPE(4);h[0]=a;h[1]=b;h[2]=c;h[3]=k;return h},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a},set:function(a,b,c,k,h){a[0]=b;a[1]=c;a[2]=k;a[3]=h;return a},add:function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];return a},subtract:function(a,
b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];return a}};t.sub=t.subtract;t.multiply=function(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];a[2]=b[2]*c[2];a[3]=b[3]*c[3];return a};t.mul=t.multiply;t.divide=function(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];a[2]=b[2]/c[2];a[3]=b[3]/c[3];return a};t.div=t.divide;t.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);a[3]=Math.ceil(b[3]);return a};t.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=
Math.floor(b[2]);a[3]=Math.floor(b[3]);return a};t.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);a[2]=Math.min(b[2],c[2]);a[3]=Math.min(b[3],c[3]);return a};t.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);a[2]=Math.max(b[2],c[2]);a[3]=Math.max(b[3],c[3]);return a};t.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);a[3]=Math.round(b[3]);return a};t.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*
c;return a};t.scaleAndAdd=function(a,b,c,k){a[0]=b[0]+c[0]*k;a[1]=b[1]+c[1]*k;a[2]=b[2]+c[2]*k;a[3]=b[3]+c[3]*k;return a};t.distance=function(a,b){var c=b[0]-a[0],k=b[1]-a[1],h=b[2]-a[2];a=b[3]-a[3];return Math.sqrt(c*c+k*k+h*h+a*a)};t.dist=t.distance;t.squaredDistance=function(a,b){var c=b[0]-a[0],k=b[1]-a[1],h=b[2]-a[2];a=b[3]-a[3];return c*c+k*k+h*h+a*a};t.sqrDist=t.squaredDistance;t.length=function(a){var b=a[0],c=a[1],k=a[2];a=a[3];return Math.sqrt(b*b+c*c+k*k+a*a)};t.len=t.length;t.squaredLength=
function(a){var b=a[0],c=a[1],k=a[2];a=a[3];return b*b+c*c+k*k+a*a};t.sqrLen=t.squaredLength;t.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=-b[3];return a};t.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];a[3]=1/b[3];return a};t.normalize=function(a,b){var c=b[0],k=b[1],h=b[2];b=b[3];var d=c*c+k*k+h*h+b*b;0<d&&(d=1/Math.sqrt(d),a[0]=c*d,a[1]=k*d,a[2]=h*d,a[3]=b*d);return a};t.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};t.lerp=function(a,b,c,k){var h=
b[0],d=b[1],e=b[2];b=b[3];a[0]=h+k*(c[0]-h);a[1]=d+k*(c[1]-d);a[2]=e+k*(c[2]-e);a[3]=b+k*(c[3]-b);return a};t.random=function(a,b){b=b||1;a[0]=g.RANDOM();a[1]=g.RANDOM();a[2]=g.RANDOM();a[3]=g.RANDOM();t.normalize(a,a);t.scale(a,a,b);return a};t.transformMat4=function(a,b,c){var k=b[0],h=b[1],d=b[2];b=b[3];a[0]=c[0]*k+c[4]*h+c[8]*d+c[12]*b;a[1]=c[1]*k+c[5]*h+c[9]*d+c[13]*b;a[2]=c[2]*k+c[6]*h+c[10]*d+c[14]*b;a[3]=c[3]*k+c[7]*h+c[11]*d+c[15]*b;return a};t.transformQuat=function(a,b,c){var k=b[0],h=
b[1],d=b[2],e=c[0],l=c[1],f=c[2];c=c[3];var n=c*k+l*d-f*h,u=c*h+f*k-e*d,p=c*d+e*h-l*k;k=-e*k-l*h-f*d;a[0]=n*c+k*-e+u*-f-p*-l;a[1]=u*c+k*-l+p*-e-n*-f;a[2]=p*c+k*-f+n*-l-u*-e;a[3]=b[3];return a};t.forEach=function(){var a=t.create();return function(b,c,k,h,d,e){c||(c=4);k||(k=0);for(h=h?Math.min(h*c+k,b.length):b.length;k<h;k+=c)a[0]=b[k],a[1]=b[k+1],a[2]=b[k+2],a[3]=b[k+3],d(a,a,e),b[k]=a[0],b[k+1]=a[1],b[k+2]=a[2],b[k+3]=a[3];return b}}();t.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+
a[3]+")"};t.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]};t.equals=function(a,b){var c=a[0],k=a[1],h=a[2];a=a[3];var d=b[0],e=b[1],l=b[2];b=b[3];return Math.abs(c-d)<=g.EPSILON*Math.max(1,Math.abs(c),Math.abs(d))&&Math.abs(k-e)<=g.EPSILON*Math.max(1,Math.abs(k),Math.abs(e))&&Math.abs(h-l)<=g.EPSILON*Math.max(1,Math.abs(h),Math.abs(l))&&Math.abs(a-b)<=g.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};return t})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushFill":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),
function(g,t,a,b,c,k,h){Object.defineProperty(t,"__esModule",{value:!0});g=function(d){function e(){var l=null!==d&&d.apply(this,arguments)||this;l._isInitialized=!1;l._fillAttributeLocations={a_pos:0,a_id:1,a_color:2,a_tlbr:3,a_aux:4};l._fillAttributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_tlbr:3,a_aux:4,a_vv:5};l._spritesTextureSize=new Float32Array(2);return l}a(e,d);e.prototype.dispose=function(){};e.prototype.getGeometryType=function(){return b.WGLGeometryType.FILL};e.prototype.drawGeometry=
function(l,f,n,u){u=l.context;var p=l.painter,r=l.rendererInfo,q=l.requiredLevel,m=l.stationary,v=n.indexCount,x=n.indexFrom;this._initialize();var z=n.materialInfo.materialKeyInfo,A=z.hasVV()?this._fillAttributeLocationsVV:this._fillAttributeLocations;if(A=l.painter.materialManager.getProgram(n.materialInfo.materialKey,l.drawPhase,A)){u.bindProgram(A);var C=this._getVAO(u,f,z.hasVV());u.bindVAO(C);if(0<n.materialInfo.texBindingInfo.length){n=n.materialInfo.texBindingInfo[0];C=n.pageId;var D=l.painter.textureManager.sprites;
this._spritesTextureSize[0]=D.getWidth(C);this._spritesTextureSize[1]=D.getHeight(C);A.setUniform1f("u_zoomFactor",1/Math.pow(2,q-f.key.level)/l.pixelRatio);p.textureManager.bindSpritePage(u,C,n.unit,m?9728:9729);A.setUniform1i(n.semantic,n.unit);A.setUniform2fv("u_mosaicSize",this._spritesTextureSize)}A.setUniformMatrix4fv("u_transformMatrix",f.tileTransform.transform);A.setUniform2fv("u_normalized_origin",f.tileTransform.displayCoord);A.setUniform1f("u_opacity",1);z.vvColor&&(A.setUniform1fv("u_vvColorValues",
r.vvColorValues),A.setUniform4fv("u_vvColors",r.vvColors));z.vvOpacity&&(A.setUniform1fv("u_vvOpacityValues",r.vvOpacityValues),A.setUniform1fv("u_vvOpacities",r.vvOpacities));u.drawElements(4,v,5125,4*x);u.bindVAO(null)}};e.prototype._initialize=function(){if(this._isInitialized)return!0;this._fillVertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:24,normalized:!0,divisor:0},{name:"a_color",count:4,
type:5121,offset:8,stride:24,normalized:!0,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_aux",count:4,type:5121,offset:20,stride:24,normalized:!1,divisor:0}]};this._fillVertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:32,normalized:!0,divisor:0},{name:"a_tlbr",count:4,
type:5123,offset:12,stride:32,normalized:!1,divisor:0},{name:"a_aux",count:4,type:5121,offset:20,stride:32,normalized:!1,divisor:0},{name:"a_vv",count:2,type:5126,offset:24,stride:32,normalized:!1,divisor:0}]};this._isInitialized=!0};e.prototype._getVAO=function(l,f,n){if(f.fillGeometry.vao)return f.fillGeometry.vao;var u=f.fillGeometry.vertexBufferMap[c.C_VBO_GEOMETRY],p=f.fillGeometry.indexBuffer;if(!u||!p)return null;f.fillGeometry.vao=n?new h(l,this._fillAttributeLocationsVV,this._fillVertexAttributeLayoutVV,
{geometry:u},p):new h(l,this._fillAttributeLocations,this._fillVertexAttributeLayout,{geometry:u},p);return f.fillGeometry.vao};return e}(k.default);t.default=g})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrush":function(){define(["require","exports","../../../../../core/tsSupport/extendsHelper","./WGLBrush","../util/iterator"],function(g,t,a,b,c){Object.defineProperty(t,"__esModule",{value:!0});g=function(k){function h(){return null!==k&&k.apply(this,arguments)||this}a(h,
k);h.prototype.draw=function(d,e){var l=this;if(e.canDisplay){var f=this.getGeometryType(),n=e.getDisplayList(d.drawPhase),u=e.getGeometry(f);u&&c.forEachIter(n.ofType(f),function(p){return l.drawGeometry(d,e,p,u)})}};return h}(b.default);t.default=g})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/iterator":function(){define(["require","exports"],function(g,t){Object.defineProperty(t,"__esModule",{value:!0});t.forEachIter=function(a,b){for(;;){var c=a.next();if(c.done)break;b(c.value)}}})},
"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushLabel":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(g,t,a,b,c,k,h){Object.defineProperty(t,"__esModule",{value:!0});g=function(d){function e(){var l=null!==d&&d.apply(this,arguments)||this;l._attributeLocations={a_pos:0,a_color:1,a_vertexOffset:2,a_texAndSize:3,a_refSymbolAndPlacementOffset:4,a_visible:5,
a_visibilityRange:6};l._vertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:20,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:8,stride:20,normalized:!1,divisor:0},{name:"a_texAndSize",count:4,type:5120,offset:12,stride:20,normalized:!1,divisor:0},{name:"a_refSymbolAndPlacementOffset",count:4,type:5120,offset:16,stride:20,normalized:!1,divisor:0}],visibility:[{name:"a_visible",
count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}],visibilityRange:[{name:"a_visibilityRange",count:2,type:5121,offset:0,stride:2,normalized:!1,divisor:0}]};l._glyphsTextureSize=new Float32Array(2);return l}a(e,d);e.prototype.dispose=function(){};e.prototype.drawGeometry=function(l,f,n,u){if(l.requiredLevel===f.key.level){u=l.context;var p=l.painter,r=l.drawPhase,q=n.materialInfo,m=n.indexCount;n=n.indexFrom;var v=this._attributeLocations,x=l.drawPhase===b.WGLDrawPhase.LABEL_ALPHA,z=q.materialKey;
x&&(z|=8);if(r=p.materialManager.getProgram(z,r,v))u.setStencilTestEnabled(!1),u.bindProgram(r),v=this._getVAO(u,f),u.bindVAO(v),x?(u.setBlendingEnabled(!1),r.setUniform1f("u_fadeStep",l.labelStep)):(q=q.texBindingInfo[0],p.textureManager.bindGlyphsPage(u,q.pageId,q.unit),r.setUniform1i(q.semantic,q.unit)),q=p.textureManager.glyphs,this._glyphsTextureSize[0]=q.width/4,this._glyphsTextureSize[1]=q.height/4,p=p.extrudeNoRotationMatrix,u.bindTexture(l.labelFBO.colorTexture,3),r.setUniform1i("u_referenceTex",
3),r.setUniformMatrix4fv("u_transformMatrix",f.tileTransform.transform),r.setUniformMatrix4fv("u_extrudeMatrix",p),r.setUniform2fv("u_normalized_origin",f.tileTransform.displayCoord),r.setUniform2fv("u_mosaicSize",this._glyphsTextureSize),r.setUniform1f("u_pixelRatio",l.pixelRatio),r.setUniform1f("u_opacity",1),r.setUniform1f("u_zoomLevel",10*l.displayLevel),r.setUniform1f("u_mapRotation",l.state.rotation),r.setUniform1f("u_mapAligned",0),r.setUniform2fv("u_screenSize",l.state.size),u.drawElements(4,
m,5125,4*n),u.bindVAO(null),u.setStencilTestEnabled(!0),u.setBlendingEnabled(!0)}};e.prototype.getGeometryType=function(){return b.WGLGeometryType.LABEL};e.prototype._getVAO=function(l,f){if((f=f.labelGeometry)&&f.vao)return f.vao;var n=f.vertexBufferMap[c.C_VBO_GEOMETRY],u=f.vertexBufferMap[c.C_VBO_VISIBILITY_RANGE],p=f.indexBuffer;if(!n||!p||!u)return null;f.vao=new h(l,this._attributeLocations,this._vertexAttributeLayout,{geometry:n,visibility:f.vertexBufferMap[c.C_VBO_VISIBILITY],visibilityRange:u},
p);return f.vao};return e}(k.default);t.default=g})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushLine":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(g,t,a,b,c,k,h){Object.defineProperty(t,"__esModule",{value:!0});g=function(d){function e(){var l=null!==d&&d.apply(this,arguments)||this;l._lineAttributeLocations={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,
a_accumulatedDistanceAndHalfWidth:4,a_tlbr:5,a_segmentDirection:6};l._lineAttributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,a_accumulatedDistanceAndHalfWidth:4,a_tlbr:5,a_segmentDirection:6,a_vv:7};l._lineVertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:32,normalized:!0,divisor:0},{name:"a_offsetAndNormal",
count:4,type:5120,offset:12,stride:32,normalized:!1,divisor:0},{name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123,offset:16,stride:32,normalized:!1,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:20,stride:32,normalized:!1,divisor:0},{name:"a_segmentDirection",count:4,type:5120,offset:28,stride:32,normalized:!1,divisor:0}]};l._lineVertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:44,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:44,
normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:44,normalized:!0,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:12,stride:44,normalized:!1,divisor:0},{name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123,offset:16,stride:44,normalized:!1,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:20,stride:44,normalized:!1,divisor:0},{name:"a_segmentDirection",count:4,type:5120,offset:28,stride:44,normalized:!1,divisor:0},{name:"a_vv",count:3,type:5126,offset:32,
stride:44,normalized:!1,divisor:0}]};l._spritesTextureSize=new Float32Array(2);return l}a(e,d);e.prototype.dispose=function(){};e.prototype.getGeometryType=function(){return b.WGLGeometryType.LINE};e.prototype.drawGeometry=function(l,f,n,u){u=l.context;var p=l.painter,r=l.rendererInfo,q=l.requiredLevel,m=l.drawPhase,v=n.indexFrom,x=n.indexCount,z=n.materialInfo;n=z.materialKeyInfo;var A=n.hasVV()?this._lineAttributeLocationsVV:this._lineAttributeLocations;if(m=p.materialManager.getProgram(z.materialKey,
m,A)){u.bindProgram(m);A=this._getVAO(u,f,n.hasVV());u.bindVAO(A);A=1/l.pixelRatio;if(0<z.texBindingInfo.length){z=z.texBindingInfo[0];var C=z.pageId,D=p.textureManager.sprites;this._spritesTextureSize[0]=D.getWidth(C);this._spritesTextureSize[1]=D.getHeight(C);p.textureManager.bindSpritePage(u,C,z.unit);m.setUniform1i(z.semantic,z.unit);m.setUniform2fv("u_mosaicSize",this._spritesTextureSize)}l=Math.pow(2,q-f.key.level)/l.pixelRatio;m.setUniform1f("u_zoomFactor",l);m.setUniformMatrix4fv("u_transformMatrix",
f.tileTransform.transform);m.setUniformMatrix4fv("u_extrudeMatrix",p.extrudeMatrix);m.setUniform2fv("u_normalized_origin",f.tileTransform.displayCoord);m.setUniform1f("u_opacity",1);m.setUniform1f("u_blur",0+A);m.setUniform1f("u_antialiasing",A);m.setUniform1f("u_zoomFactor",l);n.vvSizeMinMaxValue&&m.setUniform4fv("u_vvSizeMinMaxValue",r.vvSizeMinMaxValue);n.vvSizeScaleStops&&m.setUniform1f("u_vvSizeScaleStopsValue",r.vvSizeScaleStopsValue);n.vvSizeFieldStops&&(m.setUniform1fv("u_vvSizeFieldStopsValues",
r.vvSizeFieldStopsValues),m.setUniform1fv("u_vvSizeFieldStopsSizes",r.vvSizeFieldStopsSizes));n.vvSizeUnitValue&&m.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",r.vvSizeUnitValueToPixelsRatio);n.vvColor&&(m.setUniform1fv("u_vvColorValues",r.vvColorValues),m.setUniform4fv("u_vvColors",r.vvColors));n.vvOpacity&&(m.setUniform1fv("u_vvOpacityValues",r.vvOpacityValues),m.setUniform1fv("u_vvOpacities",r.vvOpacities));u.setFaceCullingEnabled(!0);u.setFrontFace(2305);u.setCullFace(1029);u.drawElements(4,
x,5125,4*v);u.setFaceCullingEnabled(!1);u.bindVAO(null)}};e.prototype._getVAO=function(l,f,n){if(f.lineGeometry.vao)return f.lineGeometry.vao;var u=f.lineGeometry.vertexBufferMap[c.C_VBO_GEOMETRY],p=f.lineGeometry.indexBuffer;if(!u||!p)return null;f.lineGeometry.vao=n?new h(l,this._lineAttributeLocationsVV,this._lineVertexAttributeLayoutVV,{geometry:u},p):new h(l,this._lineAttributeLocations,this._lineVertexAttributeLayout,{geometry:u},p);return f.lineGeometry.vao};return e}(k.default);t.default=
g})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushMarker":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),function(g,t,a,b,c,k,h,d){Object.defineProperty(t,"__esModule",{value:!0});g=function(e){function l(){var f=null!==e&&e.apply(this,arguments)||this;f._iconAttributeLocations={a_pos:0,a_vertexOffset:1,a_vertexTex:2,a_id:3,a_color:4,
a_outlineColor:5,a_sizeAndOutlineWidth:6};f._iconAttributeLocationsVV={a_pos:0,a_vertexOffset:1,a_vertexTex:2,a_id:3,a_color:4,a_outlineColor:5,a_sizeAndOutlineWidth:6,a_vv:7};f._iconAttributeLocationsHeatmap={a_pos:0,a_vertexOffset:1,a_vertexTex:2,a_id:3,a_color:4,a_outlineColor:5,a_sizeAndOutlineWidth:6,a_weight:7};f._iconVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:28,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:28,normalized:!1,
divisor:0},{name:"a_vertexTex",count:4,type:5121,offset:8,stride:28,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:12,stride:28,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:28,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:20,stride:28,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:24,stride:28,normalized:!1,divisor:0}]};f._iconVertexAttributesWithVV={geometry:[{name:"a_pos",count:2,type:5122,
offset:0,stride:44,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:44,normalized:!1,divisor:0},{name:"a_vertexTex",count:4,type:5121,offset:8,stride:44,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:12,stride:44,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:44,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:20,stride:44,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:24,
stride:44,normalized:!1,divisor:0},{name:"a_vv",count:4,type:5126,offset:28,stride:44,normalized:!1,divisor:0}]};f._iconVertexAttributesWithHeatmap={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:32,normalized:!1,divisor:0},{name:"a_vertexTex",count:4,type:5121,offset:8,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:12,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,
type:5121,offset:16,stride:32,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:20,stride:32,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:24,stride:32,normalized:!1,divisor:0},{name:"a_weight",count:1,type:5126,offset:28,stride:32,normalized:!1,divisor:0}]};f._spritesTextureSize=new Float32Array(2);return f}a(l,e);l.prototype.dispose=function(){};l.prototype.getGeometryType=function(){return b.WGLGeometryType.MARKER};l.prototype.drawGeometry=
function(f,n,u,p){p=f.context;var r=f.painter,q=f.rendererInfo,m=f.drawPhase;f=u.indexCount;var v=u.indexFrom,x=u.materialInfo;u=x.materialKeyInfo;var z=u.heatmap,A=u.hasVV()?this._iconAttributeLocationsVV:this._iconAttributeLocations;if(m=r.materialManager.getProgram(x.materialKey,m,A))p.bindProgram(m),A=this._getVAO(p,n,u.hasVV(),z),p.bindVAO(A),z?(x=this._getIntensityTexture(p,q.heatmapParameters),p.bindTexture(x,1),m.setUniform1i("u_texture",1),this._spritesTextureSize[0]=Math.round(q.heatmapParameters.radius),
this._spritesTextureSize[1]=Math.round(q.heatmapParameters.radius)):(z=x.texBindingInfo[0],x=z.pageId,r.textureManager.bindSpritePage(p,x,z.unit),m.setUniform1i(z.semantic,z.unit),z=r.textureManager.sprites,this._spritesTextureSize[0]=z.getWidth(x)/4,this._spritesTextureSize[1]=z.getHeight(x)/4),r=q.vvMaterialParameters.vvRotationEnabled&&"geographic"===q.vvMaterialParameters.vvRotationType?r.extrudeMatrix:r.extrudeNoRotationMatrix,m.setUniformMatrix4fv("u_transformMatrix",n.tileTransform.transform),
m.setUniformMatrix4fv("u_extrudeMatrix",r),m.setUniform2fv("u_normalized_origin",n.tileTransform.displayCoord),m.setUniform2fv("u_mosaicSize",this._spritesTextureSize),m.setUniform1f("u_opacity",1),u.vvSizeMinMaxValue&&m.setUniform4fv("u_vvSizeMinMaxValue",q.vvSizeMinMaxValue),u.vvSizeScaleStops&&m.setUniform1f("u_vvSizeScaleStopsValue",q.vvSizeScaleStopsValue),u.vvSizeFieldStops&&(m.setUniform1fv("u_vvSizeFieldStopsValues",q.vvSizeFieldStopsValues),m.setUniform1fv("u_vvSizeFieldStopsSizes",q.vvSizeFieldStopsSizes)),
u.vvSizeUnitValue&&m.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",q.vvSizeUnitValueToPixelsRatio),u.vvColor&&(m.setUniform1fv("u_vvColorValues",q.vvColorValues),m.setUniform4fv("u_vvColors",q.vvColors)),u.vvOpacity&&(m.setUniform1fv("u_vvOpacityValues",q.vvOpacityValues),m.setUniform1fv("u_vvOpacities",q.vvOpacities)),u.vvRotation&&m.setUniform1f("u_vvRotationType","geographic"===q.vvMaterialParameters.vvRotationType?0:1),p.drawElements(4,f,5125,4*v),p.bindVAO(null)};l.prototype._getVAO=function(f,
n,u,p){if(n.iconGeometry.vao)return n.iconGeometry.vao;var r=n.iconGeometry.vertexBufferMap[c.C_VBO_GEOMETRY],q=n.iconGeometry.indexBuffer;if(!r||!q)return null;n.iconGeometry.vao=u?new d(f,this._iconAttributeLocationsVV,this._iconVertexAttributesWithVV,{geometry:r},q):p?new d(f,this._iconAttributeLocationsHeatmap,this._iconVertexAttributesWithHeatmap,{geometry:r},q):new d(f,this._iconAttributeLocations,this._iconVertexAttributes,{geometry:r},q);return n.iconGeometry.vao};l.prototype._getIntensityTexture=
function(f,n){if(n.intensityKernel&&!n.refreshIntensityKernel)return n.intensityKernel;n.intensityKernel&&(n.intensityKernel.dispose(),n.intensityKernel=null);for(var u=n.radius,p=n.kernelSize,r=n.blurRadius,q=u*u,m=[],v=-1;++v<p;)m[v]=Math.exp(-Math.pow(v-r,2)/(2*q))/(u/2*Math.sqrt(2*Math.PI));u=[];for(var x,z=0;z<p;z++)for(q=m[z],v=0;v<p;v++)x=z*p+v,r=m[v],u[4*x]=q*r,u[4*x+1]=0,u[4*x+2]=0,u[4*x+3]=1;f=new h(f,{target:3553,pixelFormat:6408,internalFormat:f.capabilities.colorBufferFloat.RGBA32F,dataType:5126,
samplingMode:f.capabilities.textureFloatLinear?9729:9728,wrapMode:33071,width:p,height:p},new Float32Array(u));n.intensityKernel=f;n.refreshIntensityKernel=!1;return f};return l}(k.default);t.default=g})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushText":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(g,t,a,b,c,k,h){Object.defineProperty(t,"__esModule",
{value:!0});g=function(d){function e(){var l=null!==d&&d.apply(this,arguments)||this;l._attributeLocations={a_pos:0,a_id:1,a_color:2,a_vertexOffset:3,a_texFontSize:4,a_visible:5};l._attributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_vertexOffset:3,a_texFontSize:4,a_vv:5,a_visible:6};l._vertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:20,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,
offset:8,stride:20,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:12,stride:20,normalized:!1,divisor:0},{name:"a_texFontSize",count:4,type:5120,offset:16,stride:20,normalized:!1,divisor:0}],visibility:[{name:"a_visible",count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}]};l._vertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:36,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:36,normalized:!0,divisor:0},{name:"a_color",
count:4,type:5121,offset:8,stride:36,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:12,stride:36,normalized:!1,divisor:0},{name:"a_texFontSize",count:4,type:5120,offset:16,stride:36,normalized:!1,divisor:0},{name:"a_vv",count:4,type:5126,offset:20,stride:36,normalized:!1,divisor:0}],visibility:[{name:"a_visible",count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}]};l._glyphsTextureSize=new Float32Array(2);return l}a(e,d);e.prototype.dispose=function(){};e.prototype.getGeometryType=
function(){return b.WGLGeometryType.TEXT};e.prototype.drawGeometry=function(l,f,n,u){u=l.context;var p=l.painter,r=l.rendererInfo,q=n.materialInfo,m=n.indexCount;n=n.indexFrom;var v=q.materialKeyInfo,x=v.vvSizeMinMaxValue||v.vvSizeScaleStops||v.vvSizeFieldStops||v.vvSizeUnitValue||v.vvColor||v.vvRotation||v.vvOpacity;if(l=p.materialManager.getProgram(q.materialKey,l.drawPhase,x?this._attributeLocationsVV:this._attributeLocations))u.bindProgram(l),x=this._getVAO(u,f,x,this.getGeometryType()),u.bindVAO(x),
q=q.texBindingInfo[0],p.textureManager.bindGlyphsPage(u,q.pageId,q.unit),l.setUniform1i(q.semantic,q.unit),q=p.textureManager.glyphs,this._glyphsTextureSize[0]=q.width/4,this._glyphsTextureSize[1]=q.height/4,p=r.vvMaterialParameters.vvRotationEnabled&&"geographic"===r.vvMaterialParameters.vvRotationType?p.extrudeMatrix:p.extrudeNoRotationMatrix,l.setUniformMatrix4fv("u_transformMatrix",f.tileTransform.transform),l.setUniformMatrix4fv("u_extrudeMatrix",p),l.setUniform2fv("u_normalized_origin",f.tileTransform.displayCoord),
l.setUniform2fv("u_mosaicSize",this._glyphsTextureSize),l.setUniform1f("u_pixelRatio",1),l.setUniform1f("u_opacity",1),v.vvSizeMinMaxValue&&l.setUniform4fv("u_vvSizeMinMaxValue",r.vvSizeMinMaxValue),v.vvSizeScaleStops&&l.setUniform1f("u_vvSizeScaleStopsValue",r.vvSizeScaleStopsValue),v.vvSizeFieldStops&&(l.setUniform1fv("u_vvSizeFieldStopsValues",r.vvSizeFieldStopsValues),l.setUniform1fv("u_vvSizeFieldStopsSizes",r.vvSizeFieldStopsSizes)),v.vvSizeUnitValue&&l.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",
r.vvSizeUnitValueToPixelsRatio),v.vvColor&&(l.setUniform1fv("u_vvColorValues",r.vvColorValues),l.setUniform4fv("u_vvColors",r.vvColors)),v.vvOpacity&&(l.setUniform1fv("u_vvOpacityValues",r.vvOpacityValues),l.setUniform1fv("u_vvOpacities",r.vvOpacities)),v.vvRotation&&l.setUniform1f("u_vvRotationType","geographic"===r.vvMaterialParameters.vvRotationType?0:1),u.drawElements(4,m,5125,4*n),u.bindVAO(null)};e.prototype._getVAO=function(l,f,n,u){if((f=f.getGeometry(u))&&f.vao)return f.vao;u=f.vertexBufferMap[c.C_VBO_GEOMETRY];
var p=f.vertexBufferMap[c.C_VBO_VISIBILITY],r=f.indexBuffer;if(!u||!r)return null;f.vao=n?new h(l,this._attributeLocationsVV,this._vertexAttributeLayoutVV,{geometry:u,visibility:p},r):new h(l,this._attributeLocations,this._vertexAttributeLayout,{geometry:u,visibility:p},r);return f.vao};return e}(k.default);t.default=g})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/WGLHighlightPainter":function(){define(["require","exports","dojo/has","./highlight/HighlightRenderer","./highlight/HighlightSurfaces"],
function(g,t,a,b,c){return function(){function k(){this._hlRenderer=new b;this._hlSurfaces=new c;this._height=this._width=void 0}k.prototype.dispose=function(){this._hlSurfaces&&this._hlSurfaces.dispose();this._hlRenderer&&this._hlRenderer.dispose();this._boundFBO=null};k.prototype.setup=function(h,d,e){var l=d%4,f=e%4;d+=2>l?-l:4-l;e+=2>f?-f:4-f;this._width=d;this._height=e;this._boundFBO=h.getBoundFramebufferObject();d=Math.round(.75*d);e=Math.round(.75*e);this._hlRenderer.setup(h,d,e);this._hlSurfaces.setup(h,
d,e)};k.prototype.setHighlightOptions=function(h){this._hlRenderer.setHighlightOptions({fillColor:h.fillColor,outlineColor:h.outlineColor,outlineWidth:.75*h.outlineWidth,outerHaloWidth:.75*h.outerHaloWidth,innerHaloWidth:.75*h.innerHaloWidth,outlinePosition:.75*h.outlinePosition})};k.prototype.startMaskDraw=function(h){h.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo);h.setClearColor(0,0,0,0);h.setClearStencil(0);h.clear(h.gl.COLOR_BUFFER_BIT|h.gl.STENCIL_BUFFER_BIT);h.setViewport(0,0,.75*this._width,
.75*this._height)};k.prototype.draw=function(h){h.setStencilTestEnabled(!1);h.setBlendingEnabled(!1);h.bindFramebuffer(this._hlSurfaces.sharedBlur2Fbo);h.setClearColor(0,0,0,0);h.clear(h.gl.COLOR_BUFFER_BIT);this._hlRenderer.preBlur(h,this._hlSurfaces.sharedBlur1Tex);a("esri-feature-highlight-debug")?(h.bindFramebuffer(null),h.clear(h.gl.COLOR_BUFFER_BIT),this._hlRenderer.finalBlur(h,this._hlSurfaces.sharedBlur2Tex)):(h.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo),h.setClearColor(0,0,0,0),h.clear(h.gl.COLOR_BUFFER_BIT),
this._hlRenderer.finalBlur(h,this._hlSurfaces.sharedBlur2Tex),h.bindFramebuffer(this._boundFBO),h.setBlendingEnabled(!0),h.setViewport(0,0,this._width,this._height),this._hlRenderer.renderHighlight(h,this._hlSurfaces.sharedBlur1Tex),this._boundFBO=null)};return k}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/highlight/HighlightRenderer":function(){define("require exports ../../shaders/hlShaderSnippets ../../../../../webgl/BufferObject ../../../../../webgl/ShaderVariations ../../../../../webgl/Texture ../../../../../webgl/VertexArrayObject".split(" "),
function(g,t,a,b,c,k,h){var d=[void 0,void 0,void 0,1],e=[3,4],l=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return function(){function n(){this._height=this._width=void 0;this._highlightOptions={fillColor:[.2,.6,.9,.75],outlineColor:[.2,.6,.9,.9],outlinePosition:0,outlineWidth:3.4,innerHaloWidth:2,outerHaloWidth:3.3};this._resources=null}n.prototype.dispose=function(){this._resources&&(this._resources.quadGeometry.dispose(),this._resources.quadVAO.dispose(),this._resources.highlightProgram.dispose(),
this._resources.blurProgram.dispose(),this._resources.shadeTex.dispose(),this._resources=null)};n.prototype.preBlur=function(u,p){u.bindTexture(p,e[0]);u.bindProgram(this._resources.blurProgram);this._resources.blurProgram.setUniform4fv("u_direction",[1,0,1/this._width,0]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",l);u.bindVAO(this._resources.quadVAO);u.drawArrays(5,0,4);u.bindVAO()};n.prototype.finalBlur=function(u,p){u.bindTexture(p,e[0]);u.bindProgram(this._resources.blurProgram);
this._resources.blurProgram.setUniform4fv("u_direction",[0,1,0,1/this._height]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",f);u.bindVAO(this._resources.quadVAO);u.drawArrays(5,0,4);u.bindVAO()};n.prototype.renderHighlight=function(u,p){u.bindTexture(p,e[0]);u.bindTexture(this._resources.shadeTex,e[1]);u.bindProgram(this._resources.highlightProgram);u.bindVAO(this._resources.quadVAO);u.drawArrays(5,0,4);u.bindVAO()};n.prototype._initialize=function(u,p,r){this._width=p;this._height=
r;p=new b(u,34962,35044,(new Int8Array([-128,-128,0,0,127,-128,255,0,-128,127,0,255,127,127,255,255])).buffer);r=new h(u,{a_position:0,a_texcoord:1},{geometry:[{name:"a_position",count:2,type:5120,offset:0,stride:4,normalized:!0},{name:"a_texcoord",count:2,type:5121,offset:2,stride:4,normalized:!0}]},{geometry:p});var q=(new c("hl",["texturedVS","highlightFS"],[],a,u,{a_position:0,a_texcoord:1})).getProgram([]),m=(new c("hl",["texturedVS","blurFS"],[],a,u,{a_position:0,a_texcoord:1})).getProgram([]);
q.setUniform1i("u_texture",e[0]);q.setUniform1i("u_shade",e[1]);q.setUniform4fv("u_sigmas",d);m.setUniform1i("u_texture",e[0]);m.setUniform4fv("u_sigmas",d);u=new k(u,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,width:256,height:1,samplingMode:9728});this._resources={quadGeometry:p,quadVAO:r,highlightProgram:q,blurProgram:m,shadeTex:u}};n.prototype.setHighlightOptions=function(u){function p(D,B,y){A[0]=(1-y)*D[0]+y*B[0];A[1]=(1-y)*D[1]+y*B[1];A[2]=(1-y)*D[2]+y*B[2];A[3]=(1-y)*D[3]+y*
B[3]}this._highlightOptions=u;if(this._resources){for(var r=u.outlinePosition-u.outlineWidth/2-u.outerHaloWidth,q=u.outlinePosition-u.outlineWidth/2,m=u.outlinePosition+u.outlineWidth/2,v=u.outlinePosition+u.outlineWidth/2+u.innerHaloWidth,x=new Uint8Array(1024),z,A=[void 0,void 0,void 0,void 0],C=0;256>C;++C)z=r+C/255*(v-r),z<r?(x[4*C]=0,x[4*C+1]=0,x[4*C+2]=0,x[4*C+3]=0):z<q?p([0,0,0,0],u.outlineColor,(z-r)/(q-r)):z<m?(A[0]=u.outlineColor[0],A[1]=u.outlineColor[1],A[2]=u.outlineColor[2],A[3]=u.outlineColor[3]):
z<v?p(u.outlineColor,u.fillColor,(z-m)/(v-m)):(x[4*C]=u.fillColor[0],x[4*C+1]=u.fillColor[1],x[4*C+2]=u.fillColor[2],x[4*C+3]=u.fillColor[3]),x[4*C]=255*A[0]*A[3],x[4*C+1]=255*A[1]*A[3],x[4*C+2]=255*A[2]*A[3],x[4*C+3]=255*A[3];this._resources.highlightProgram.setUniform2fv("u_minMaxDistance",[r,v]);this._resources.shadeTex.updateData(0,0,0,256,1,x)}};n.prototype.setup=function(u,p,r){this._resources?(this._width=p,this._height=r):(this._initialize(u,p,r),this.setHighlightOptions(this._highlightOptions))};
return n}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/hlShaderSnippets":function(){define(["require","exports","dojo/text!./hlShaders.xml","../../../../webgl/ShaderSnippets"],function(g,t,a,b){g=new b;b.parse(a,g);return g})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/highlight/HighlightSurfaces":function(){define(["require","exports","../../../../../webgl/FramebufferObject","../../../../../webgl/Texture"],function(g,t,a,b){function c(k,h,d){h=new b(k,{target:3553,pixelFormat:6408,
dataType:5121,wrapMode:33071,width:h,height:d,samplingMode:9729});k=a.createWithAttachments(k,h,{colorTarget:0,depthStencilTarget:2});return[h,k]}return function(){function k(){this._height=this._width=void 0;this._resources=null}k.prototype.dispose=function(){this._resources&&(this._resources.sharedBlur1Tex.dispose(),this._resources.sharedBlur1Fbo.dispose(),this._resources.sharedBlur2Tex.dispose(),this._resources.sharedBlur2Fbo.dispose(),this._resources=null)};k.prototype._initialize=function(h,
d,e){this._width=d;this._height=e;var l=c(h,d,e),f=l[0];l=l[1];h=c(h,d,e);this._resources={sharedBlur1Tex:f,sharedBlur1Fbo:l,sharedBlur2Tex:h[0],sharedBlur2Fbo:h[1]}};k.prototype.setup=function(h,d,e){!this._resources||this._width===d&&this._height===e||this.dispose();this._resources||this._initialize(h,d,e)};Object.defineProperty(k.prototype,"sharedBlur1Tex",{get:function(){return this._resources.sharedBlur1Tex},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"sharedBlur1Fbo",{get:function(){return this._resources.sharedBlur1Fbo},
enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"sharedBlur2Tex",{get:function(){return this._resources.sharedBlur2Tex},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"sharedBlur2Fbo",{get:function(){return this._resources.sharedBlur2Fbo},enumerable:!0,configurable:!0});return k}()})},"esri/layers/vectorTiles/views/webgl/FramebufferObject":function(){define(["require","exports","dojo/has","./Renderbuffer","./Texture"],function(g,t,a,b,c){return function(){function k(h,
d,e,l){this._colorAttachment=this._stencilAttachment=this._depthAttachment=this._glName=this._context=null;this._initialized=!1;this._context=h;this._desc={colorTarget:d.colorTarget,depthStencilTarget:d.depthStencilTarget,width:d.width,height:d.height,multisampled:d.multisampled};this._id=k._nextId++;a("esri-webgl-debug")&&h.instanceCounter.incrementCount(4);e&&(h=void 0,e instanceof c?(this._colorAttachment=e,h=e.descriptor):(h=e,this._colorAttachment=new c(this._context,h)),k._validateTextureDimensions(h,
this._desc));if(l instanceof b){if(2===d.depthStencilTarget)this._stencilAttachment=l;else if(1===d.depthStencilTarget||3===d.depthStencilTarget)this._depthAttachment=l;k._validateBufferDimensions(l.descriptor,this._desc)}else l&&(d=void 0,l instanceof c?(this._depthStencilTexture=l,d=this._depthStencilTexture.descriptor):(d=l,this._depthStencilTexture=new c(this._context,d)),k._validateTextureDimensions(d,this._desc))}k.create=function(h,d){return new k(h,d)};k.createWithAttachments=function(h,d,
e,l){return new k(h,e,d,l)};Object.defineProperty(k.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"colorTexture",{get:function(){return this._colorAttachment instanceof c?this._colorAttachment:null},enumerable:!0,
configurable:!0});Object.defineProperty(k.prototype,"depthStencilTexture",{get:function(){return this._depthStencilTexture},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"width",{get:function(){return this._desc.width},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"height",{get:function(){return this._desc.height},enumerable:!0,configurable:!0});k.prototype.dispose=function(){this._context&&(this._disposeColorAttachment(),this._disposeDepthStencilAttachments(),
this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null),a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(4),this._context=null)};k.prototype.attachColorTexture=function(h){if(h){k._validateTextureDimensions(h.descriptor,this._desc);this._disposeColorAttachment();if(this._initialized){this._context.bindFramebuffer(this);var d=this._context.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,h.glName,0)}this._colorAttachment=h}};k.prototype.detachColorTexture=
function(){var h=void 0;if(this._colorAttachment instanceof c){h=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var d=this._context.gl;this._context.gl.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,null,0)}this._colorAttachment=null}return h};k.prototype.attachDepthStencilTexture=function(h){if(h){k._validateTextureDimensions(h.descriptor,this._desc);4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4);this._disposeDepthStencilAttachments();
if(this._initialized){this._context.bindFramebuffer(this);var d=this._context.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.TEXTURE_2D,h.glName,0)}this._depthStencilTexture=h}};k.prototype.detachDepthStencilTexture=function(){var h=this._depthStencilTexture;if(h&&this._initialized){this._context.bindFramebuffer(this);var d=this._context.gl;this._context.gl.framebufferTexture2D(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.TEXTURE_2D,null,0)}this._depthStencilTexture=null;return h};
k.prototype.attachDepthStencilBuffer=function(h){if(h){var d=h.descriptor;k._validateBufferDimensions(d,this._desc);this._disposeDepthStencilAttachments();this._desc.depthStencilTarget=34041===d.internalFormat?3:1;this._initialized&&(this._context.bindFramebuffer(this),d=this._context.gl,d.framebufferRenderbuffer(d.FRAMEBUFFER,1===this._desc.depthStencilTarget?d.DEPTH_ATTACHMENT:d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,h.glName));this._depthAttachment=h}};k.prototype.detachDepthStencilBuffer=function(){var h=
this._context.gl,d=this._depthAttachment;d&&this._initialized&&(this._context.bindFramebuffer(this),h.framebufferRenderbuffer(h.FRAMEBUFFER,1===this._desc.depthStencilTarget?h.DEPTH_ATTACHMENT:h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,null));this._depthAttachment=null;return d};k.prototype.copyToTexture=function(h,d,e,l,f,n,u){var p=this._context;p.bindTexture(u);p.bindFramebuffer(this);p.gl.copyTexSubImage2D(3553,0,f,n,h,d,e,l)};k.prototype.readPixels=function(h,d,e,l,f,n,u){this._context.bindFramebuffer(this);
this._context.gl.readPixels(h,d,e,l,f,n,u)};k.prototype.resize=function(h,d){var e=this._desc;if(e.width!==h||e.height!==d)if(this._initialized)e.width=h,e.height=d,this._colorAttachment instanceof c?(l=this._colorAttachment,e=l.descriptor,e.width=h,e.height=d,this._colorAttachment.dispose(),this._colorAttachment=new c(this._context,e),k._validateTextureDimensions(l.descriptor,this._desc)):this._colorAttachment&&this._disposeColorAttachment(),null!=this._depthStencilTexture?(e=this._depthStencilTexture.descriptor,
e.width=h,e.height=d,this._depthStencilTexture.dispose(),this._depthStencilTexture=new c(this._context,e)):(this._depthAttachment||this._stencilAttachment)&&this._disposeDepthStencilAttachments(),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1;else{e.width=h;e.height=d;if(this._colorAttachment instanceof c){var l=this._colorAttachment;l.resize(h,d)}this._depthStencilTexture&&this._depthStencilTexture.resize(h,d)}};k.prototype.initialize=function(){if(this._initialized)return!1;
var h=this._context.gl;this._glName&&h.deleteFramebuffer(this._glName);var d=h.createFramebuffer(),e=this._desc;h.bindFramebuffer(h.FRAMEBUFFER,d);if(!this._colorAttachment)if(0===e.colorTarget)this._colorAttachment=new c(this._context,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:e.width,height:e.height});else{var l=new b(this._context,{internalFormat:32854,width:e.width,height:e.height});h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,
l.glName);this._colorAttachment=l}this._colorAttachment instanceof c&&h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,this._colorAttachment.glName,0);switch(e.depthStencilTarget){case 1:case 3:this._depthAttachment||(this._depthAttachment=new b(this._context,{internalFormat:1===e.depthStencilTarget?33189:34041,width:e.width,height:e.height}));h.framebufferRenderbuffer(h.FRAMEBUFFER,1===e.depthStencilTarget?h.DEPTH_ATTACHMENT:h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,this._depthAttachment.glName);
break;case 2:this._stencilAttachment||(this._stencilAttachment=new b(this._context,{internalFormat:36168,width:e.width,height:e.height}));h.framebufferRenderbuffer(h.FRAMEBUFFER,h.STENCIL_ATTACHMENT,h.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:this._depthStencilTexture||(this._depthStencilTexture=new c(this._context,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:e.width,height:e.height})),h.framebufferTexture2D(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,
h.TEXTURE_2D,this._depthStencilTexture.glName,0)}h.checkFramebufferStatus(h.FRAMEBUFFER);this._glName=d;return this._initialized=!0};k.prototype._disposeColorAttachment=function(){if(this._colorAttachment instanceof c){var h=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var d=this._context.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,null,0)}h.dispose()}else this._colorAttachment instanceof WebGLRenderbuffer&&(h=this._colorAttachment,d=
this._context.gl,this._initialized&&(this._context.bindFramebuffer(this),d.framebufferRenderbuffer(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(h));this._colorAttachment=null};k.prototype._disposeDepthStencilAttachments=function(){var h=this._context.gl;this._depthAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),h.framebufferRenderbuffer(h.FRAMEBUFFER,1===this._desc.depthStencilTarget?h.DEPTH_ATTACHMENT:h.DEPTH_STENCIL_ATTACHMENT,
h.RENDERBUFFER,null)),this._depthAttachment.dispose(),this._depthAttachment=null);this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.STENCIL_ATTACHMENT,h.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null);this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),h.framebufferTexture2D(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),
this._depthStencilTexture=null)};k._validateBufferDimensions=function(h,d){void 0!==d.width&&0<=d.width&&void 0!==d.height&&0<=d.height||(d.width=h.width,d.height=h.height)};k._validateTextureDimensions=function(h,d){void 0!==d.width&&0<=d.width&&void 0!==d.height&&0<=d.height||(d.width=h.width,d.height=h.height)};k._nextId=0;return k}()})},"esri/layers/vectorTiles/views/webgl/Renderbuffer":function(){define(["require","exports","dojo/has"],function(g,t,a){return function(){function b(c,k){this._context=
c;this._desc=k;this._glName=null;this._id=-1;c=this._context.gl;a("esri-webgl-debug")&&this._context.instanceCounter.incrementCount(5);this._id=++b._nextId;this._glName=c.createRenderbuffer();this._context.bindRenderbuffer(this);c.renderbufferStorage(c.RENDERBUFFER,k.internalFormat,k.width,k.height)}Object.defineProperty(b.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,
configurable:!0});Object.defineProperty(b.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});b.prototype.resize=function(c,k){var h=this._context.gl,d=this._desc;if(d.width!==c||d.height!==k)d.width=c,d.height=k,this._context.bindRenderbuffer(this),h.renderbufferStorage(h.RENDERBUFFER,d.internalFormat,d.width,d.height)};b.prototype.dispose=function(){this._glName&&(this._context.gl.deleteRenderbuffer(this._glName),this._glName=null);a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(5);
this._context=null};b._nextId=0;return b}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/Renderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../GeometryUtils ./BackgroundRenderer ./CircleRenderer ./FadeRecorder ./FillRenderer ./LineRenderer ./SymbolRenderer ./TileInfoRenderer ../../webgl/FramebufferObject".split(" "),function(g,t,a,b,c,k,h,d,e,l,f,n){return function(){function u(){this._extrudeRotateVector=new Float32Array([0,0,1]);this._extrudeScaleVector=new Float32Array([1,
1,1]);this._state={rotation:0,width:0,height:0};this._cachedRotation=this._cachedHeight=this._cachedWidth=0}u.prototype.initialize=function(p,r,q){void 0===q&&(q=!0);this._SpriteMosaic=p;this._glyphMosaic=r;this._ignoreSpeed=!q;this._backgroundRenderer=new c;this._lineRenderer=new e;this._fillRenderer=new d;this._symbolRenderer=new l;this._circleRenderer=new k;this._tileInfoRenderer=new f;this._fadeRecorder=new h.FadeRecorder(300);this._extrudeMatrix=new Float32Array(16);this._extrudeNoRotationMatrix=
new Float32Array(16);this._backgroundColor=new Float32Array([1,0,0,1])};u.prototype.dispose=function(){this._backgroundRenderer&&(this._backgroundRenderer.dispose(),this._backgroundRenderer=null);this._lineRenderer&&(this._lineRenderer.dispose(),this._lineRenderer=null);this._fillRenderer&&(this._fillRenderer.dispose(),this._fillRenderer=null);this._symbolRenderer&&(this._symbolRenderer.dispose(),this._symbolRenderer=null);this._circleRenderer&&(this._circleRenderer.dispose(),this._circleRenderer=
null);this._tileInfoRenderer&&(this._tileInfoRenderer.dispose(),this._tileInfoRenderer=null);this._hittestFBO&&(this._hittestFBO.dispose(),this._hittestFBO=null)};u.prototype.setStateParams=function(p,r,q){this._fadeRecorder.recordLevel(q);this._state=p;if(this._state.width!==this._cachedWidth||this._state.height!==this._cachedHeight||this._state.rotation!==this._cachedRotation)this._extrudeScaleVector[0]=2/p.width,this._extrudeScaleVector[1]=-2/p.height,a.identity(this._extrudeMatrix),a.rotate(this._extrudeMatrix,
this._extrudeMatrix,-p.rotation*b.C_DEG_TO_RAD,this._extrudeRotateVector),a.scale(this._extrudeMatrix,this._extrudeMatrix,this._extrudeScaleVector),a.transpose(this._extrudeMatrix,this._extrudeMatrix),a.identity(this._extrudeNoRotationMatrix),a.scale(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix,this._extrudeScaleVector),a.transpose(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix),this._cachedWidth=this._state.width,this._cachedHeight=this._state.height,this._cachedRotation=
this._state.rotation};u.prototype.drawClippingMasks=function(p,r){if(0!==r.length){p.setDepthWriteEnabled(!1);p.setDepthTestEnabled(!1);p.setStencilTestEnabled(!0);p.setBlendingEnabled(!1);p.setColorMask(!1,!1,!1,!1);p.setStencilOp(7680,7680,7681);p.setStencilWriteMask(255);p.setClearStencil(0);p.clear(p.gl.STENCIL_BUFFER_BIT);for(var q=0;q<r.length;q++){var m=r[q];m.attached&&m.visible&&(p.setStencilFunctionSeparate(1032,519,m.stencilData.reference,m.stencilData.mask),this._backgroundRenderer.renderSolidColor(p,
{u_matrix:m.tileTransform.transform,u_normalized_origin:m.tileTransform.displayCoord,u_coord_range:m.coordRange,u_depth:0,u_color:this._backgroundColor}))}p.setColorMask(!0,!0,!0,!0);p.setBlendingEnabled(!0)}};u.prototype.renderDebug=function(p,r){var q=r.key;this._backgroundColor.set([q.col%2,q.row%2,0===q.col%2&&0===q.row%2?1:0,.5]);this._backgroundRenderer.renderSolidColor(p,{u_matrix:r.tileTransform.transform,u_normalized_origin:r.tileTransform.displayCoord,u_coord_range:r.coordRange,u_depth:0,
u_color:this._backgroundColor})};u.prototype.renderBucket=function(p,r,q,m,v,x,z,A){if(!(void 0!==z.minzoom&&z.minzoom>=q+1E-6||void 0!==z.maxzoom&&z.maxzoom<q-1E-6))switch(r.type){case 0:2!==v&&this._renderBackground(p,r,q,v,x,z,A);break;case 1:2!==v&&this._renderFill(p,r,q,v,x,z,A);break;case 2:1!==v&&3!==v||this._renderLine(p,r,q,v,x,z,A);break;case 3:2!==v&&3!==v||this._renderSymbol(p,r,q,v,m,x,z,A);break;case 4:2!==v&&3!==v||this._renderCircle(p,r,q,v,m,x,z,A)}};u.prototype.renderTileInfo=function(p,
r){this._tileInfoRenderer.render(p,r)};u.prototype.needsRedraw=function(){return this._fadeRecorder.needsRedraw()};u.prototype.hitTest=function(p,r,q,m,v,x,z){var A=[0,0],C=[0,0],D=p.state;D.toMap(A,[0,0]);D.toMap(C,[x,x]);r=m.filter(function(w){return!(A[0]>w.bounds[2]||C[0]<w.bounds[0]||A[1]<w.bounds[3]||C[1]>w.bounds[1])});if(0===r.length)return[];r.sort(function(w,E){return w.key.level-E.key.level});q=r.length;for(m=1;m<=q;m++){var B=r[m-1];B.attached&&(B.stencilData.reference=m,B.stencilData.mask=
255)}z(D,v,r);v=p.context;this._hittestFBO||(this._hittestFBO=n.create(v,{colorTarget:0,depthStencilTarget:3,width:x,height:x}));z=v.getViewport();D=v.getBoundFramebufferObject();v.bindFramebuffer(this._hittestFBO);v.setViewport(0,0,x,x);m=v.gl;v.setDepthWriteEnabled(!0);v.setStencilWriteMask(255);v.setClearColor(1,1,1,1);v.setClearDepth(1);v.setClearStencil(0);v.clear(m.COLOR_BUFFER_BIT|m.DEPTH_BUFFER_BIT|m.STENCIL_BUFFER_BIT);v.setDepthWriteEnabled(!1);this.drawClippingMasks(v,r);v.setBlendingEnabled(!1);
v.setStencilWriteMask(0);v.setStencilOp(7680,7680,7681);v.setDepthFunction(515);v.setDepthTestEnabled(!0);v.setDepthWriteEnabled(!0);v.setStencilTestEnabled(!0);for(m=0;m<q;m++)B=r[m],B.attached&&B.doRender(p);v.setStencilTestEnabled(!1);v.setDepthTestEnabled(!1);this._readbackBuffer||(this._readbackBuffer=new Uint8Array(4*x*x),this._readbackBuffer32=new Uint32Array(this._readbackBuffer.buffer));this._hittestFBO.readPixels(0,0,x,x,6408,5121,this._readbackBuffer);p=new Set;x*=x;r=this._readbackBuffer32[Math.round(x/
2)];4294967295!==r&&p.add(r);for(m=0;m<x;m++)r=this._readbackBuffer32[m],4294967295!==r&&p.add(r);v.bindFramebuffer(D);v.setViewport(z.x,z.y,z.width,z.height);var y=[];p.forEach(function(w){y.push(w)});return y};u.prototype._renderBackground=function(p,r,q,m,v,x,z){this._backgroundRenderer.render(p,r,q,m,v,x,this._SpriteMosaic,this._SpriteMosaic.pixelRatio,z)};u.prototype._renderLine=function(p,r,q,m,v,x,z){this._lineRenderer.render(p,r,q,m,this._state,v,x,this._SpriteMosaic,this._extrudeMatrix,this._SpriteMosaic.pixelRatio,
z)};u.prototype._renderFill=function(p,r,q,m,v,x,z){this._fillRenderer.render(p,r,q,this._state.rotation,m,v,x,this._SpriteMosaic,this._extrudeMatrix,this._SpriteMosaic.pixelRatio,z)};u.prototype._renderCircle=function(p,r,q,m,v,x,z,A){var C=!0;v===x.key.level&&(C=!1);p.setStencilTestEnabled(C);this._circleRenderer.render(p,r,q,m,this._state.rotation,x,z,this._extrudeMatrix,A)};u.prototype._renderSymbol=function(p,r,q,m,v,x,z,A){var C=!0;v===x.key.level&&(C=!1);p.setStencilTestEnabled(C);this._symbolRenderer.render(p,
r,q,m,this._state.rotation,this._fadeRecorder.getFadeValues(this._ignoreSpeed),x,z,this._SpriteMosaic,this._glyphMosaic,this._extrudeMatrix,this._extrudeNoRotationMatrix,this._SpriteMosaic.pixelRatio,A)};return u}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/BackgroundRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat3 ../../../core/libs/gl-matrix/vec4 ../MemoryBuffer ./rendererUtils ./vtShaderSnippets ../../webgl/BufferObject ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),
function(g,t,a,b,c,k,h,d,e,l){return function(){function f(){this._solidAttributeLocations={a_pos:0};this._attributeLocations={a_pos:0,a_id:1};this._patternMatrix=a.create();this._color=b.create();this._rendererInitialized=this._solidrendererInitialized=!1;this._color.set([1,0,0,1])}f.prototype.dispose=function(){this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null);this._vertexArrayObject&&(this._vertexArrayObject.dispose(),this._vertexArrayObject=
null)};f.prototype.renderSolidColor=function(n,u){this._solidrendererInitialized||this._initializeSolidRenderer(n);n.bindVAO(this._solidVertexArrayObject);var p=this._shaderVariations.getProgram([!1,!1],void 0,void 0,this._solidAttributeLocations);n.bindProgram(p);p.setUniformMatrix4fv("u_transformMatrix",u.u_matrix);p.setUniform2fv("u_normalized_origin",u.u_normalized_origin);p.setUniform1f("u_coord_range",u.u_coord_range||4096);p.setUniform1f("u_depth",u.u_depth||0);p.setUniform4fv("u_color",u.u_color||
this._color);n.drawArrays(5,0,4);n.bindVAO()};f.prototype.render=function(n,u,p,r,q,m,v,x,z){this._rendererInitialized||this._initialize(n);var A=m.getPaintValue("background-color",p);z*=m.getPaintValue("background-opacity",p);var C=m.getPaintValue("background-pattern",p),D=void 0!==C,B=A[3]*z,y=D||1>B;if(!y||0!==r)if(y||1!==r){y=3===r;r=this._shaderVariations.getProgram([D,y],void 0,void 0,this._attributeLocations);n.bindVAO(this._vertexArrayObject);n.bindProgram(r);r.setUniform1f("u_coord_range",
q.coordRange);r.setUniform1f("u_depth",m.z||0);r.setUniformMatrix4fv("u_transformMatrix",q.tileTransform.transform);r.setUniform2fv("u_normalized_origin",q.tileTransform.displayCoord);if(D){m=v.getMosaicItemPosition(C,!0);if(!m)return;p=512*Math.pow(2,Math.floor(p)-q.key.level)*x;a.identity(this._patternMatrix);q=p/m.size[1];this._patternMatrix[0]=p/m.size[0];this._patternMatrix[4]=q;v.bind(n,9729,m.page||0);r.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix);r.setUniform1f("u_opacity",
z);r.setUniform2f("u_pattern_tl",m.tl[0],m.tl[1]);r.setUniform2f("u_pattern_br",m.br[0],m.br[1]);r.setUniform1i("u_texture",0)}else this._color[0]=B*A[0],this._color[1]=B*A[1],this._color[2]=B*A[2],this._color[3]=B,r.setUniform4fv("u_color",this._color);y&&(u=k.int32To4Bytes(u.layerID),r.setUniform4f("u_id",u[0],u[1],u[2],u[3]));n.drawArrays(5,0,4);n.bindVAO()}};f.prototype._initializeSolidRenderer=function(n){if(this._solidrendererInitialized)return!0;if(!this._shaderVariations){var u=new e("background",
["backgroundVS","backgroundFS"],[],h,n);u.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");u.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=u}u=new Int8Array([0,0,1,0,0,1,1,1]);u=d.createVertex(n,35044,u);this._solidVertexArrayObject=new l(n,{a_pos:0},{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},{geometry:u});return this._solidrendererInitialized=!0};f.prototype._initialize=function(n){if(this._rendererInitialized)return!0;if(!this._shaderVariations){var u=
new e("background",["backgroundVS","backgroundFS"],[],h,n);u.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");u.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=u}u=[];u.push(c.i1616to32(0,0));u.push(c.i1616to32(1,0));u.push(c.i1616to32(0,1));u.push(c.i1616to32(1,1));u=new Uint32Array(u);u=d.createVertex(n,35044,u);this._vertexArrayObject=new l(n,{a_pos:0},{geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}]},{geometry:u});return this._rendererInitialized=
!0};return f}()})},"esri/layers/vectorTiles/core/libs/gl-matrix/mat3":function(){define(["./common"],function(g){var t={create:function(){var a=new g.ARRAY_TYPE(9);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},fromMat4:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[4];a[4]=b[5];a[5]=b[6];a[6]=b[8];a[7]=b[9];a[8]=b[10];return a},clone:function(a){var b=new g.ARRAY_TYPE(9);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},
copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a},fromValues:function(a,b,c,k,h,d,e,l,f){var n=new g.ARRAY_TYPE(9);n[0]=a;n[1]=b;n[2]=c;n[3]=k;n[4]=h;n[5]=d;n[6]=e;n[7]=l;n[8]=f;return n},set:function(a,b,c,k,h,d,e,l,f,n){a[0]=b;a[1]=c;a[2]=k;a[3]=h;a[4]=d;a[5]=e;a[6]=l;a[7]=f;a[8]=n;return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(a===b){var c=b[1],
k=b[2],h=b[5];a[1]=b[3];a[2]=b[6];a[3]=c;a[5]=b[7];a[6]=k;a[7]=h}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a},invert:function(a,b){var c=b[0],k=b[1],h=b[2],d=b[3],e=b[4],l=b[5],f=b[6],n=b[7];b=b[8];var u=b*e-l*n,p=-b*d+l*f,r=n*d-e*f,q=c*u+k*p+h*r;if(!q)return null;q=1/q;a[0]=u*q;a[1]=(-b*k+h*n)*q;a[2]=(l*k-h*e)*q;a[3]=p*q;a[4]=(b*c-h*f)*q;a[5]=(-l*c+h*d)*q;a[6]=r*q;a[7]=(-n*c+k*f)*q;a[8]=(e*c-k*d)*q;return a},adjoint:function(a,b){var c=
b[0],k=b[1],h=b[2],d=b[3],e=b[4],l=b[5],f=b[6],n=b[7];b=b[8];a[0]=e*b-l*n;a[1]=h*n-k*b;a[2]=k*l-h*e;a[3]=l*f-d*b;a[4]=c*b-h*f;a[5]=h*d-c*l;a[6]=d*n-e*f;a[7]=k*f-c*n;a[8]=c*e-k*d;return a},determinant:function(a){var b=a[3],c=a[4],k=a[5],h=a[6],d=a[7],e=a[8];return a[0]*(e*c-k*d)+a[1]*(-e*b+k*h)+a[2]*(d*b-c*h)},multiply:function(a,b,c){var k=b[0],h=b[1],d=b[2],e=b[3],l=b[4],f=b[5],n=b[6],u=b[7];b=b[8];var p=c[0],r=c[1],q=c[2],m=c[3],v=c[4],x=c[5],z=c[6],A=c[7];c=c[8];a[0]=p*k+r*e+q*n;a[1]=p*h+r*l+
q*u;a[2]=p*d+r*f+q*b;a[3]=m*k+v*e+x*n;a[4]=m*h+v*l+x*u;a[5]=m*d+v*f+x*b;a[6]=z*k+A*e+c*n;a[7]=z*h+A*l+c*u;a[8]=z*d+A*f+c*b;return a}};t.mul=t.multiply;t.translate=function(a,b,c){var k=b[0],h=b[1],d=b[2],e=b[3],l=b[4],f=b[5],n=b[6],u=b[7];b=b[8];var p=c[0];c=c[1];a[0]=k;a[1]=h;a[2]=d;a[3]=e;a[4]=l;a[5]=f;a[6]=p*k+c*e+n;a[7]=p*h+c*l+u;a[8]=p*d+c*f+b;return a};t.rotate=function(a,b,c){var k=b[0],h=b[1],d=b[2],e=b[3],l=b[4],f=b[5],n=b[6],u=b[7];b=b[8];var p=Math.sin(c);c=Math.cos(c);a[0]=c*k+p*e;a[1]=
c*h+p*l;a[2]=c*d+p*f;a[3]=c*e-p*k;a[4]=c*l-p*h;a[5]=c*f-p*d;a[6]=n;a[7]=u;a[8]=b;return a};t.scale=function(a,b,c){var k=c[0];c=c[1];a[0]=k*b[0];a[1]=k*b[1];a[2]=k*b[2];a[3]=c*b[3];a[4]=c*b[4];a[5]=c*b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a};t.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=b[0];a[7]=b[1];a[8]=1;return a};t.fromRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=0;a[3]=-c;a[4]=b;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};t.fromScaling=
function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=b[1];a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};t.fromMat2d=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=0;a[3]=b[2];a[4]=b[3];a[5]=0;a[6]=b[4];a[7]=b[5];a[8]=1;return a};t.fromQuat=function(a,b){var c=b[0],k=b[1],h=b[2];b=b[3];var d=c+c,e=k+k,l=h+h;c*=d;var f=k*d;k*=e;var n=h*d,u=h*e;h*=l;d*=b;e*=b;b*=l;a[0]=1-k-h;a[3]=f-b;a[6]=n+e;a[1]=f+b;a[4]=1-c-h;a[7]=u-d;a[2]=n-e;a[5]=u+d;a[8]=1-c-k;return a};t.normalFromMat4=function(a,b){var c=b[0],k=b[1],h=b[2],d=b[3],
e=b[4],l=b[5],f=b[6],n=b[7],u=b[8],p=b[9],r=b[10],q=b[11],m=b[12],v=b[13],x=b[14];b=b[15];var z=c*l-k*e,A=c*f-h*e,C=c*n-d*e,D=k*f-h*l,B=k*n-d*l,y=h*n-d*f,w=u*v-p*m,E=u*x-r*m;u=u*b-q*m;var F=p*x-r*v;p=p*b-q*v;r=r*b-q*x;q=z*r-A*p+C*F+D*u-B*E+y*w;if(!q)return null;q=1/q;a[0]=(l*r-f*p+n*F)*q;a[1]=(f*u-e*r-n*E)*q;a[2]=(e*p-l*u+n*w)*q;a[3]=(h*p-k*r-d*F)*q;a[4]=(c*r-h*u+d*E)*q;a[5]=(k*u-c*p-d*w)*q;a[6]=(v*y-x*B+b*D)*q;a[7]=(x*C-m*y-b*A)*q;a[8]=(m*B-v*C+b*z)*q;return a};t.str=function(a){return"mat3("+a[0]+
", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};t.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};t.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];a[8]=b[8]+c[8];return a};t.subtract=function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=
b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];a[6]=b[6]-c[6];a[7]=b[7]-c[7];a[8]=b[8]-c[8];return a};t.sub=t.subtract;t.multiplyScalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*c;return a};t.multiplyScalarAndAdd=function(a,b,c,k){a[0]=b[0]+c[0]*k;a[1]=b[1]+c[1]*k;a[2]=b[2]+c[2]*k;a[3]=b[3]+c[3]*k;a[4]=b[4]+c[4]*k;a[5]=b[5]+c[5]*k;a[6]=b[6]+c[6]*k;a[7]=b[7]+c[7]*k;a[8]=b[8]+c[8]*k;return a};t.exactEquals=function(a,
b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]};t.equals=function(a,b){var c=a[0],k=a[1],h=a[2],d=a[3],e=a[4],l=a[5],f=a[6],n=a[7],u=a[8],p=b[0],r=b[1],q=b[2],m=b[3],v=b[4],x=b[5];a=a[6];var z=b[7];b=b[8];return Math.abs(c-p)<=g.EPSILON*Math.max(1,Math.abs(c),Math.abs(p))&&Math.abs(k-r)<=g.EPSILON*Math.max(1,Math.abs(k),Math.abs(r))&&Math.abs(h-q)<=g.EPSILON*Math.max(1,Math.abs(h),Math.abs(q))&&Math.abs(d-m)<=g.EPSILON*
Math.max(1,Math.abs(d),Math.abs(m))&&Math.abs(e-v)<=g.EPSILON*Math.max(1,Math.abs(e),Math.abs(v))&&Math.abs(l-x)<=g.EPSILON*Math.max(1,Math.abs(l),Math.abs(x))&&Math.abs(f-a)<=g.EPSILON*Math.max(1,Math.abs(f),Math.abs(a))&&Math.abs(n-z)<=g.EPSILON*Math.max(1,Math.abs(n),Math.abs(z))&&Math.abs(u-b)<=g.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))};return t})},"esri/layers/vectorTiles/views/vectorTiles/MemoryBuffer":function(){define(["require","exports"],function(g,t){return function(){function a(b){this._array=
[];this._stride=b}Object.defineProperty(a.prototype,"array",{get:function(){return this._array},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"index",{get:function(){return 4*this._array.length/this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"itemSize",{get:function(){return this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sizeInBytes",{get:function(){return 4*this._array.length},enumerable:!0,configurable:!0});a.prototype.reset=
function(){this.array.length=0};a.prototype.toBuffer=function(){return(new Uint32Array(this._array)).buffer};a.i1616to32=function(b,c){return 65535&b|c<<16};a.i8888to32=function(b,c,k,h){return b&255|(c&255)<<8|(k&255)<<16|h<<24};a.i8816to32=function(b,c,k){return b&255|(c&255)<<8|k<<16};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/rendererUtils":function(){define(["require","exports"],function(g,t){Object.defineProperty(t,"__esModule",{value:!0});var a=new Uint32Array(1),b=
new Uint8Array(a.buffer);t.int32To4Bytes=function(c){a[0]=c|0;return[b[0],b[1],b[2],b[3]]}})},"esri/layers/vectorTiles/views/vectorTiles/renderers/vtShaderSnippets":function(){define("require exports dojo/text!../../2d/engine/webgl/shaders/tileInfo.xml dojo/text!./shaders/backgroundShaders.xml dojo/text!./shaders/circleShaders.xml dojo/text!./shaders/fillShaders.xml dojo/text!./shaders/iconShaders.xml dojo/text!./shaders/lineShaders.xml dojo/text!./shaders/outlineShaders.xml dojo/text!./shaders/textShaders.xml ../../webgl/ShaderSnippets".split(" "),
function(g,t,a,b,c,k,h,d,e,l,f){g=new f;f.parse(b,g);f.parse(a,g);f.parse(k,g);f.parse(e,g);f.parse(d,g);f.parse(h,g);f.parse(l,g);f.parse(c,g);return g})},"esri/layers/vectorTiles/views/vectorTiles/renderers/CircleRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),function(g,t,a,b,
c,k,h,d,e,l){return function(){function f(){this._attributeLocations={a_pos:0,a_color:1,a_stroke_color:2,a_data:3};this._initialized=!1;this._viewProjMat=a.create();this._offsetVector=b.create();this._color=c.create();this._strokeColor=c.create()}f.prototype.dispose=function(){};f.prototype.render=function(n,u,p,r,q,m,v,x,z){if(0!==u.triangleElementCount){this._initialized||this._initialize(n);var A=v.hasDataDrivenRadius?1:v.getPaintValue("circle-radius",p),C=v.hasDataDrivenColor?[1,1,1,1]:v.getPaintValue("circle-color",
p),D=v.hasDataDrivenOpacity?1:v.getPaintValue("circle-opacity",p),B=v.hasDataDrivenStrokeWidth?1:v.getPaintValue("circle-stroke-width",p),y=v.hasDataDrivenStrokeColor?[1,1,1,1]:v.getPaintValue("circle-stroke-color",p),w=v.hasDataDrivenStrokeOpacity?1:v.getPaintValue("circle-stroke-opacity",p),E=v.hasDataDrivenBlur?0:v.getPaintValue("circle-blur",p);D=D*C[3]*z;this._color[0]=D*C[0];this._color[1]=D*C[1];this._color[2]=D*C[2];this._color[3]=D;D=w*y[3]*z;this._strokeColor[0]=D*y[0];this._strokeColor[1]=
D*y[1];this._strokeColor[2]=D*y[2];this._strokeColor[3]=D;z=m.tileTransform.transform;C=v.getPaintValue("circle-translate",p);if(0!==C[0]||0!==C[1])a.copy(this._viewProjMat,m.tileTransform.transform),z=C[0],C=C[1],w=y=0,w=(1<<m.key.level)/Math.pow(2,p)*(m.coordRange/512),1===v.getPaintValue("circle-translate-anchor",p)?(q*=-k.C_DEG_TO_RAD,p=Math.sin(q),q=Math.cos(q),y=w*(z*q-C*p),w*=z*p+C*q):(y=w*z,w*=C),this._offsetVector[0]=y,this._offsetVector[1]=w,this._offsetVector[2]=0,a.translate(this._viewProjMat,
this._viewProjMat,this._offsetVector),z=this._viewProjMat;if(p=this._getCircleVAO(n,m))n.bindVAO(p),p=3===r,r=this._shaderVariations.getProgram([p],void 0,void 0,this._attributeLocations),n.bindProgram(r),r.setUniformMatrix4fv("u_transformMatrix",z),r.setUniformMatrix4fv("u_extrudeMatrix",x),r.setUniform2fv("u_normalized_origin",m.tileTransform.displayCoord),r.setUniform1f("u_depth",v.z),r.setUniform1f("u_radius",A),r.setUniform4fv("u_color",this._color),r.setUniform1f("u_blur",E),r.setUniform1f("u_stroke_width",
B),r.setUniform4fv("u_stroke_color",this._strokeColor),r.setUniform1f("u_antialiasingWidth",1.2),p&&(m=h.int32To4Bytes(u.layerID),r.setUniform4f("u_id",m[0],m[1],m[2],m[3])),n.drawElements(4,u.triangleElementCount,5125,12*u.triangleElementStart),n.bindVAO()}};f.prototype._initialize=function(n){if(this._initialized)return!0;n=new e("circle",["circleVS","circleFS"],[],d,n);n.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=n;this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,
offset:0,stride:16,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:16,normalized:!0,divisor:0},{name:"a_stroke_color",count:4,type:5121,offset:8,stride:16,normalized:!0,divisor:0},{name:"a_data",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]};return this._initialized=!0};f.prototype._getCircleVAO=function(n,u){if(u.circleVertexArrayObject)return u.circleVertexArrayObject;var p=u.circleVertexBuffer,r=u.circleIndexBuffer;if(!p||!r)return null;u.circleVertexArrayObject=
new l(n,this._attributeLocations,this._vertexAttributes,{geometry:p},r);return u.circleVertexArrayObject};return f}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/FadeRecorder":function(){define(["require","exports","../../../core/now"],function(g,t,a){Object.defineProperty(t,"__esModule",{value:!0});(function(){return function(b,c){this.level=b;this.now=c}})();g=function(){return function(b,c,k,h){this.fadeSpeed=b;this.minfadeLevel=c;this.maxfadeLevel=k;this.fadeChange=h}}();t.FadeProperties=
g;g=function(){function b(c){void 0===c&&(c=300);this._levelSnapshots=[];this._duration=c}b.prototype.recordLevel=function(c){var k=a(),h=this._levelSnapshots;0===h.length&&(h.push({level:c,now:0}),h.push({level:c,now:0}));2!==h.length&&h[0].level===c||h.push({level:c,now:k})};b.prototype.needsRedraw=function(){if(0===this._levelSnapshots.length)return!1;for(var c=this._duration,k=this._levelSnapshots,h=k.length,d=k[h-1],e=-1;h>e+1&&k[e+1].now+c<d.now;)e++;for(0>e&&(e=0);e<h;e++)if(k[e].level!==d.level)return!0;
return!1};b.prototype.getFadeValues=function(c){void 0===c&&(c=!1);for(var k=this._duration,h=a(),d=this._levelSnapshots;3<d.length&&d[1].now+k<h;)d.shift();d[1].now+k<h&&(d[0].level=d[1].level);var e=d[0].level,l=d[d.length-1],f=l.level,n=Math.min(e,f);e=Math.max(e,f);d=(l.level-d[1].level)/((l.now-d[1].now)/k);return c?{fadeSpeed:0,minfadeLevel:n,maxfadeLevel:e,fadeChange:0}:{fadeSpeed:d,minfadeLevel:n,maxfadeLevel:e,fadeChange:(h-l.now)/k*d}};return b}();t.FadeRecorder=g})},"esri/layers/vectorTiles/views/vectorTiles/renderers/FillRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat3 ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),
function(g,t,a,b,c,k,h,d,e,l,f){var n=1/65536;return function(){function u(){this._fillAttributeLocations={a_pos:0};this._fillAttributeLocationsDD={a_pos:0,a_color:1};this._outlineAttributeLocations={a_pos:0,a_offset:1,a_xnormal:2};this._outlineAttributeLocationsDD={a_pos:0,a_offset:1,a_xnormal:2,a_color:3};this._initialized=!1;this._viewProjMat=b.create();this._offsetVector=c.create();this._patternMatrix=a.create();this._color=k.create();this._outlineColor=k.create()}u.prototype.dispose=function(){};
u.prototype.render=function(p,r,q,m,v,x,z,A,C,D,B){if(0!==r.triangleElementCount){this._initialized||this._initialize(p);var y=void 0!==z.getPaintValue("fill-pattern",q),w=z.hasDataDrivenColor?[1,1,1,1]:z.getPaintValue("fill-color",q),E=z.hasDataDrivenOpacity?1:z.getPaintValue("fill-opacity",q),F=E*w[3]*B;this._color[0]=F*w[0];this._color[1]=F*w[1];this._color[2]=F*w[2];this._color[3]=F;w=3===v;var H;w&&(H=d.int32To4Bytes(r.layerID));F=x.tileTransform.transform;var M=x.coordRange/512,R=z.getPaintValue("fill-translate",
q);if(0!==R[0]||0!==R[1]){b.copy(this._viewProjMat,x.tileTransform.transform);F=R[0];R=R[1];var V=0,da=0;M*=(1<<x.key.level)/Math.pow(2,q);1===z.getPaintValue("fill-translate-anchor",q)?(V=-h.C_DEG_TO_RAD*m,m=Math.sin(V),da=Math.cos(V),V=M*(F*da-R*m),da=M*(F*m+R*da)):(V=M*F,da=M*R);this._offsetVector[0]=V;this._offsetVector[1]=da;this._offsetVector[2]=0;b.translate(this._viewProjMat,this._viewProjMat,this._offsetVector);F=this._viewProjMat}this._drawFill(p,r,q,v,x,z,A,F,D,B,w,H);if(z.getPaintValue("fill-antialias",
q)&&!y&&0<r.outlineElementCount&&(1===v||3===v)){v=z.hasDataDrivenOutline;if(z.outlineUsesFillColor){if(1!==this._color[3])return;this._outlineColor[0]=this._color[0];this._outlineColor[1]=this._color[1];this._outlineColor[2]=this._color[2];this._outlineColor[3]=this._color[3]}else q=z.hasDataDrivenOutlineColor?[1,1,1,1]:z.getPaintValue("fill-outline-color",q),B*=E*q[3],this._outlineColor[0]=B*q[0],this._outlineColor[1]=B*q[1],this._outlineColor[2]=B*q[2],this._outlineColor[3]=B;D=.75/D;if(B=this._getOutlineVAO(p,
x,v))p.bindVAO(B),B=this._outlineShaderVariations.getProgram([v,w],void 0,void 0,v?this._outlineAttributeLocationsDD:this._outlineAttributeLocations),p.bindProgram(B),B.setUniformMatrix4fv("u_transformMatrix",F),B.setUniformMatrix4fv("u_extrudeMatrix",C),B.setUniform2fv("u_normalized_origin",x.tileTransform.displayCoord),B.setUniform1f("u_depth",z.z+n),B.setUniform1f("u_outline_width",D),B.setUniform4fv("u_color",this._outlineColor),w&&B.setUniform4f("u_id",H[0],H[1],H[2],H[3]),p.drawElements(4,r.outlineElementCount,
5125,12*r.outlineElementStart),p.bindVAO()}}};u.prototype._initialize=function(p){if(this._initialized)return!0;var r=new l("fill",["fillVS","fillFS"],[],e,p);r.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");r.addDefine("DD","DD",[!0,!1],"DD");r.addDefine("ID","ID",[!0,!0],"ID");this._fillShaderVariations=r;this._fillVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}]};this._fillVertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,
stride:8,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:8,normalized:!0,divisor:0}]};p=new l("outline",["outlineVS","outlineFS"],[],e,p);p.addDefine("DD","DD",[!0,!1],"DD");p.addDefine("ID","ID",[!0,!0],"ID");this._outlineShaderVariations=p;this._outlineVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:8,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5120,offset:4,stride:8,normalized:!1,divisor:0},{name:"a_xnormal",count:2,type:5120,offset:6,
stride:8,normalized:!1,divisor:0}]};this._outlineVertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:12,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5120,offset:4,stride:12,normalized:!1,divisor:0},{name:"a_xnormal",count:2,type:5120,offset:6,stride:12,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:12,normalized:!0,divisor:0}]};return this._initialized=!0};u.prototype._drawFill=function(p,r,q,m,v,x,z,A,C,D,B,y){var w=x.getPaintValue("fill-pattern",
q),E=void 0!==w,F=x.hasDataDrivenOpacity?1:D*x.getPaintValue("fill-opacity",q),H=x.hasDataDrivenColor?[1,1,1,1]:x.getPaintValue("fill-color",q);D*=F*H[3];this._color[0]=D*H[0];this._color[1]=D*H[1];this._color[2]=D*H[2];this._color[3]=D;H=x.hasDataDrivenFill;F=!1;!E&&(H?0:1===D)&&(F=!0);if(!E||0!==m)if(!F||1!==m)if(E||F||0!==m)if(m=this._getFillVAO(p,v,H))p.bindVAO(m),m=this._fillShaderVariations.getProgram([E,H,B],void 0,void 0,H?this._fillAttributeLocationsDD:this._fillAttributeLocations),p.bindProgram(m),
E&&(w=z.getMosaicItemPosition(w,!0))&&(q=v.coordRange/512/Math.pow(2,Math.round(q)-v.key.level)/C,a.identity(this._patternMatrix),C=1/(w.size[1]*q),this._patternMatrix[0]=1/(w.size[0]*q),this._patternMatrix[4]=C,z.bind(p,9729,w.page,1),m.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix),m.setUniform2f("u_pattern_tl",w.tl[0],w.tl[1]),m.setUniform2f("u_pattern_br",w.br[0],w.br[1]),m.setUniform1i("u_texture",1)),m.setUniformMatrix4fv("u_transformMatrix",A),m.setUniform2fv("u_normalized_origin",
v.tileTransform.displayCoord),m.setUniform1f("u_depth",x.z+n),m.setUniform4fv("u_color",this._color),B&&m.setUniform4f("u_id",y[0],y[1],y[2],y[3]),p.drawElements(4,r.triangleElementCount,5125,12*r.triangleElementStart),p.bindVAO()};u.prototype._getFillVAO=function(p,r,q){if(q){if(r.fillDDVertexArrayObject)return r.fillDDVertexArrayObject;q=r.fillDDVertexBuffer;var m=r.fillIndexBuffer;if(!q||!m)return null;r.fillDDVertexArrayObject=new f(p,this._fillAttributeLocationsDD,this._fillVertexAttributesDD,
{geometry:q},m);return r.fillDDVertexArrayObject}if(r.fillVertexArrayObject)return r.fillVertexArrayObject;q=r.fillVertexBuffer;m=r.fillIndexBuffer;if(!q||!m)return null;r.fillVertexArrayObject=new f(p,this._fillAttributeLocations,this._fillVertexAttributes,{geometry:q},m);return r.fillVertexArrayObject};u.prototype._getOutlineVAO=function(p,r,q){if(q){if(r.outlineDDVertexArrayObject)return r.outlineDDVertexArrayObject;q=r.outlineDDVertexBuffer;var m=r.outlineIndexBuffer;if(!q||!m)return null;r.outlineDDVertexArrayObject=
new f(p,this._outlineAttributeLocationsDD,this._outlineVertexAttributesDD,{geometry:q},m);return r.outlineDDVertexArrayObject}if(r.outlineVertexArrayObject)return r.outlineVertexArrayObject;q=r.outlineVertexBuffer;m=r.outlineIndexBuffer;if(!q||!m)return null;r.outlineVertexArrayObject=new f(p,this._outlineAttributeLocations,this._outlineVertexAttributes,{geometry:q},m);return r.outlineVertexArrayObject};return u}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/LineRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec2 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),
function(g,t,a,b,c,k,h,d,e,l,f){return function(){function n(){this._attributeLocations={a_pos:0,a_offsetAndNormal:1,a_accumulatedDistance:2};this._attributeLocationsDD={a_pos:0,a_offsetAndNormal:1,a_accumulatedDistance:2,a_color:3,a_width:4};this._initialized=!1;this._viewProjMat=a.create();this._offsetVector=c.create();this._color=k.create();this._dashArray=b.create()}n.prototype.dispose=function(){};n.prototype.render=function(u,p,r,q,m,v,x,z,A,C,D){if(0!==p.triangleElementCount){this._initialized||
this._initialize(u);var B=v.tileTransform.transform,y=v.coordRange/512,w=x.getPaintValue("line-translate",r);if(0!==w[0]||0!==w[1]){a.copy(this._viewProjMat,v.tileTransform.transform);B=w[0];w=w[1];var E=0,F=0;F=(1<<v.key.level)/Math.pow(2,r)*y;m=m.rotation;if(1===x.getPaintValue("line-translate-anchor",r)){E=-h.C_DEG_TO_RAD*m;m=Math.sin(E);var H=Math.cos(E);E=F*(B*H-w*m);F*=B*m+w*H}else E=F*B,F*=w;this._offsetVector[0]=E;this._offsetVector[1]=F;this._offsetVector[2]=0;a.translate(this._viewProjMat,
this._viewProjMat,this._offsetVector);B=this._viewProjMat}w=x.getPaintValue("line-pattern",r);F=void 0!==w;C=1/C;m=x.getPaintValue("line-blur",r);H=x.hasDataDrivenColor?[1,1,1,1]:x.getPaintValue("line-color",r);var M=x.hasDataDrivenOpacity?1:x.getPaintValue("line-opacity",r);E=x.hasDataDrivenWidth?1:x.getPaintValue("line-width",r);D*=M*H[3];this._color[0]=D*H[0];this._color[1]=D*H[1];this._color[2]=D*H[2];this._color[3]=D;D=x.hasDataDrivenLine;q=3===q;var R;q&&(R=d.int32To4Bytes(p.layerID));if(H=
this._getLineVAO(u,v,D)){u.bindVAO(H);D=this._shaderVariations.getProgram([F,D,q],void 0,void 0,D?this._attributeLocationsDD:this._attributeLocations);u.bindProgram(D);D.setUniformMatrix4fv("u_transformMatrix",B);D.setUniformMatrix4fv("u_extrudeMatrix",A);D.setUniform2fv("u_normalized_origin",v.tileTransform.displayCoord);D.setUniform1f("u_depth",x.z);D.setUniform1f("u_blur",m);D.setUniform1f("u_antialiasing",C);D.setUniform4fv("u_color",this._color);D.setUniform1f("u_width",E);q&&D.setUniform4f("u_id",
R[0],R[1],R[2],R[3]);if(F){if(r=z.getMosaicItemPosition(w,!0))z.bind(u,9729,r.page,1),D.setUniform2f("u_pattern_tl",r.tl[0],r.br[1]),D.setUniform2f("u_pattern_br",r.br[0],r.tl[1]),D.setUniform2f("u_spriteSize",y*r.size[0],r.size[1]),D.setUniform1i("u_texture",1)}else z=x.getPaintValue("line-dasharray",r),2>z.length&&(z=[1,-1]),this._dashArray[0]=y*z[0],this._dashArray[1]=y*z[1],D.setUniform2fv("u_dasharray",this._dashArray);u.drawElements(4,p.triangleElementCount,5125,12*p.triangleElementStart);u.bindVAO()}}};
n.prototype._initialize=function(u){if(this._initialized)return!0;u=new l("line",["lineVS","lineFS"],[],e,u);u.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");u.addDefine("DD","DD",[!0,!1],"DD");u.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=u;this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:12,normalized:!1,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:4,stride:12,normalized:!1,divisor:0},{name:"a_accumulatedDistance",count:2,type:5123,
offset:8,stride:12,normalized:!1,divisor:0}]};this._vertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:4,stride:20,normalized:!1,divisor:0},{name:"a_accumulatedDistance",count:2,type:5122,offset:8,stride:20,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:12,stride:20,normalized:!0,divisor:0},{name:"a_width",count:1,type:5126,offset:16,stride:20,normalized:!1,divisor:0}]};return this._initialized=
!0};n.prototype._getLineVAO=function(u,p,r){if(r){if(p.lineDDVertexArrayObject)return p.lineDDVertexArrayObject;r=p.lineDDVertexBuffer;var q=p.lineIndexBuffer;if(!r||!q)return null;p.lineDDVertexArrayObject=new f(u,this._attributeLocationsDD,this._vertexAttributesDD,{geometry:r},q);return p.lineDDVertexArrayObject}if(p.lineVertexArrayObject)return p.lineVertexArrayObject;r=p.lineVertexBuffer;q=p.lineIndexBuffer;if(!r||!q)return null;p.lineVertexArrayObject=new f(u,this._attributeLocations,this._vertexAttributes,
{geometry:r},q);return p.lineVertexArrayObject};return n}()})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec2":function(){define(["./common"],function(g){var t={create:function(){var a=new g.ARRAY_TYPE(2);a[0]=0;a[1]=0;return a},clone:function(a){var b=new g.ARRAY_TYPE(2);b[0]=a[0];b[1]=a[1];return b},fromValues:function(a,b){var c=new g.ARRAY_TYPE(2);c[0]=a;c[1]=b;return c},copy:function(a,b){a[0]=b[0];a[1]=b[1];return a},set:function(a,b,c){a[0]=b;a[1]=c;return a},add:function(a,b,c){a[0]=b[0]+
c[0];a[1]=b[1]+c[1];return a},subtract:function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];return a}};t.sub=t.subtract;t.multiply=function(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];return a};t.mul=t.multiply;t.divide=function(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];return a};t.div=t.divide;t.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);return a};t.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);return a};t.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);return a};
t.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);return a};t.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);return a};t.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;return a};t.scaleAndAdd=function(a,b,c,k){a[0]=b[0]+c[0]*k;a[1]=b[1]+c[1]*k;return a};t.distance=function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)};t.dist=t.distance;t.squaredDistance=function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return c*c+a*a};t.sqrDist=t.squaredDistance;t.length=
function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};t.len=t.length;t.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};t.sqrLen=t.squaredLength;t.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};t.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};t.normalize=function(a,b){var c=b[0],k=b[1];c=c*c+k*k;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c);return a};t.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};t.cross=function(a,b,c){b=b[0]*c[1]-b[1]*c[0];a[0]=a[1]=0;a[2]=b;return a};
t.lerp=function(a,b,c,k){var h=b[0];b=b[1];a[0]=h+k*(c[0]-h);a[1]=b+k*(c[1]-b);return a};t.random=function(a,b){b=b||1;var c=2*g.RANDOM()*Math.PI;a[0]=Math.cos(c)*b;a[1]=Math.sin(c)*b;return a};t.transformMat2=function(a,b,c){var k=b[0];b=b[1];a[0]=c[0]*k+c[2]*b;a[1]=c[1]*k+c[3]*b;return a};t.transformMat2d=function(a,b,c){var k=b[0];b=b[1];a[0]=c[0]*k+c[2]*b+c[4];a[1]=c[1]*k+c[3]*b+c[5];return a};t.transformMat3=function(a,b,c){var k=b[0];b=b[1];a[0]=c[0]*k+c[3]*b+c[6];a[1]=c[1]*k+c[4]*b+c[7];return a};
t.transformMat4=function(a,b,c){var k=b[0];b=b[1];a[0]=c[0]*k+c[4]*b+c[12];a[1]=c[1]*k+c[5]*b+c[13];return a};t.forEach=function(){var a=t.create();return function(b,c,k,h,d,e){c||(c=2);k||(k=0);for(h=h?Math.min(h*c+k,b.length):b.length;k<h;k+=c)a[0]=b[k],a[1]=b[k+1],d(a,a,e),b[k]=a[0],b[k+1]=a[1];return b}}();t.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};t.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};t.equals=function(a,b){var c=a[0];a=a[1];var k=b[0];b=b[1];return Math.abs(c-
k)<=g.EPSILON*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(a-b)<=g.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};return t})},"esri/layers/vectorTiles/views/vectorTiles/renderers/SymbolRenderer":function(){define(["require","exports","./IconRenderer","./SDFRenderer"],function(g,t,a,b){return function(){function c(){this._iconRenderer=new a;this._sdfRenderer=new b}c.prototype.dispose=function(){this._iconRenderer&&(this._iconRenderer.dispose(),this._iconRenderer=null);this._sdfRenderer&&(this._sdfRenderer.dispose(),
this._sdfRenderer=null)};c.prototype.render=function(k,h,d,e,l,f,n,u,p,r,q,m,v,x){h.hasData()&&(0<h.markerPerPageElementsMap.size&&this._iconRenderer.render(k,h,d,e,l,f,n,u,p,q,m,x),0<h.glyphPerPageElementsMap.size&&this._sdfRenderer.render(k,h,d,e,l,f,n,u,r,q,m,v,x))};return c}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/IconRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),
function(g,t,a,b,c,k,h,d,e,l){return function(){function f(){this._attributeLocations={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3};this._attributeLocationsDD={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3,a_color:4,a_size:5};this._spritesTextureSize=new Float32Array(2);this._initialized=!1;this._viewProjMat=a.create();this._offsetVector=b.create();this._extrudeMat=a.create();this._color=c.create()}f.prototype.dispose=function(){};f.prototype.render=function(n,u,p,r,q,m,v,x,z,A,C,D){var B=this;
this._initialized||this._initialize(n);var y=x.hasDataDrivenIconSize?1:x.getLayoutValue("icon-size",p),w=x.hasDataDrivenIconColor?[1,1,1,1]:x.getPaintValue("icon-color",p),E=x.hasDataDrivenIconOpacity?1:x.getPaintValue("icon-opacity",p);D*=w[3]*E;this._color[0]=D*w[0];this._color[1]=D*w[1];this._color[2]=D*w[2];this._color[3]=D;w=x.getLayoutValue("icon-rotation-alignment",p);2===w&&(w=1===x.getLayoutValue("symbol-placement",p)?0:1);var F=0===w;D=u.isSDF;E=x.hasDataDrivenIcon;r=3===r;w=k.degToByte(q);
var H=v.tileTransform.transform,M=x.getPaintValue("icon-translate",p);if(0!==M[0]||0!==M[1]){a.copy(this._viewProjMat,v.tileTransform.transform);H=M[0];M=M[1];var R=0,V=0;V=(1<<v.key.level)/Math.pow(2,p)*(v.coordRange/512);if(1===x.getPaintValue("icon-translate-anchor",p)){R=-k.C_DEG_TO_RAD*q;q=Math.sin(R);var da=Math.cos(R);R=V*(H*da-M*q);V*=H*q+M*da}else R=V*H,V*=M;this._offsetVector[0]=R;this._offsetVector[1]=V;this._offsetVector[2]=0;a.translate(this._viewProjMat,this._viewProjMat,this._offsetVector);
H=this._viewProjMat}F?a.copy(this._extrudeMat,A):a.copy(this._extrudeMat,C);if(A=this._getIconVAO(n,v,E)){n.bindVAO(A);var ha=this._shaderVariations.getProgram([D,E,r],void 0,void 0,E?this._attributeLocationsDD:this._attributeLocations);n.bindProgram(ha);D&&(A=x.getPaintValue("icon-halo-color",p),C=x.getPaintValue("icon-halo-width",p),ha.setUniform4f("u_outlineColor",A[0],A[1],A[2],A[3]),ha.setUniform1f("u_outlineSize",C));ha.setUniformMatrix4fv("u_transformMatrix",H);ha.setUniformMatrix4fv("u_extrudeMatrix",
this._extrudeMat);ha.setUniform2fv("u_normalized_origin",v.tileTransform.displayCoord);ha.setUniform1f("u_depth",x.z);ha.setUniform1f("u_mapRotation",w);ha.setUniform1f("u_keepUpright",0);ha.setUniform1f("u_level",10*p);ha.setUniform1f("u_fadeSpeed",10*m.fadeSpeed);ha.setUniform1f("u_minfadeLevel",10*m.minfadeLevel);ha.setUniform1f("u_maxfadeLevel",10*m.maxfadeLevel);ha.setUniform1f("u_fadeChange",10*(p+m.fadeChange));ha.setUniform1i("u_texture",1);ha.setUniform1f("u_size",y);ha.setUniform4fv("u_color",
this._color);r&&(p=h.int32To4Bytes(u.layerID),ha.setUniform4f("u_id",p[0],p[1],p[2],p[3]));u.markerPerPageElementsMap.forEach(function(fa,X){B._spritesTextureSize[0]=z.getWidth(X)/4;B._spritesTextureSize[1]=z.getHeight(X)/4;ha.setUniform2fv("u_mosaicSize",B._spritesTextureSize);z.bind(n,9729,X,1);n.drawElements(4,fa[1],5125,12*fa[0])});n.bindVAO()}};f.prototype._initialize=function(n){if(this._initialized)return!0;n=new e("icon",["iconVS","iconFS"],[],d,n);n.addDefine("SDF","SDF",[!0,!0],"SDF");n.addDefine("DD",
"DD",[!0,!1],"DD");n.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=n;this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]};this._vertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,
offset:0,stride:24,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:24,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:24,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:24,normalized:!0,divisor:0},{name:"a_size",count:1,type:5126,offset:20,stride:24,normalized:!1,divisor:0}]};return this._initialized=!0};f.prototype._getIconVAO=function(n,
u,p){if(p){if(u.iconDDVertexArrayObject)return u.iconDDVertexArrayObject;p=u.iconDDVertexBuffer;var r=u.iconIndexBuffer;if(!p||!r)return null;u.iconDDVertexArrayObject=new l(n,this._attributeLocationsDD,this._vertexAttributesDD,{geometry:p},r);return u.iconDDVertexArrayObject}if(u.iconVertexArrayObject)return u.iconVertexArrayObject;p=u.iconVertexBuffer;r=u.iconIndexBuffer;if(!p||!r)return null;u.iconVertexArrayObject=new l(n,this._attributeLocations,this._vertexAttributes,{geometry:p},r);return u.iconVertexArrayObject};
return f}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/SDFRenderer":function(){define("require exports dojo/has ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),function(g,t,a,b,c,k,h,d,e,l,f){var n=1/65536;return function(){function u(){this._attributeLocations={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3};
this._attributeLocationsDD={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3,a_color:4,a_size:5};this._initialized=!1;this._viewProjMat=b.create();this._offsetVector=c.create();this._extrudeMat=b.create();this._haloColor=k.create();this._sdfColor=k.create();this._scaleVec=c.create()}u.prototype.dispose=function(){};u.prototype.render=function(p,r,q,m,v,x,z,A,C,D,B,y,w){var E=this;if(!a("esri-vector-tiles-avoid-text")){this._initialized||this._initialize(p);var F=h.degToByte(v),H=A.getLayoutValue("text-rotation-alignment",
q);2===H&&(H=1===A.getLayoutValue("symbol-placement",q)?0:1);var M=0===H;H=A.getLayoutValue("text-keep-upright",q)&&M;m=3===m;y=.8*3/y;var R=A.hasDataDrivenTextSize?1:A.getLayoutValue("text-size",q),V=A.hasDataDrivenTextColor?[1,1,1,1]:A.getPaintValue("text-color",q),da=A.hasDataDrivenTextOpacity?1:A.getPaintValue("text-opacity",q),ha=V[3]*da*w;this._sdfColor[0]=ha*V[0];this._sdfColor[1]=ha*V[1];this._sdfColor[2]=ha*V[2];this._sdfColor[3]=ha;this._glyphTextureSize||(this._glyphTextureSize=new Float32Array([C.width/
4,C.height/4]));V=z.tileTransform.transform;ha=A.getPaintValue("text-translate",q);if(0!==ha[0]||0!==ha[1]){b.copy(this._viewProjMat,z.tileTransform.transform);V=ha[0];ha=ha[1];var fa=0,X=0;X=(1<<z.key.level)/Math.pow(2,q)*(z.coordRange/512);if(1===A.getPaintValue("text-translate-anchor",q)){fa=-h.C_DEG_TO_RAD*v;v=Math.sin(fa);var ca=Math.cos(fa);fa=X*(V*ca-ha*v);X*=V*v+ha*ca}else fa=X*V,X*=ha;this._offsetVector[0]=fa;this._offsetVector[1]=X;this._offsetVector[2]=0;b.translate(this._viewProjMat,this._viewProjMat,
this._offsetVector);V=this._viewProjMat}M?b.copy(this._extrudeMat,D):b.copy(this._extrudeMat,B);this._scaleVec[0]=1/24;this._scaleVec[1]=1/24;this._scaleVec[2]=1;b.scale(this._extrudeMat,this._extrudeMat,this._scaleVec);D=A.hasDataDrivenText;if(B=this._getSDFVAO(p,z,D)){p.bindVAO(B);var Q=this._shaderVariations.getProgram([D,m],void 0,void 0,D?this._attributeLocationsDD:this._attributeLocations);p.bindProgram(Q);Q.setUniformMatrix4fv("u_transformMatrix",V);Q.setUniformMatrix4fv("u_extrudeMatrix",
this._extrudeMat);Q.setUniform2fv("u_normalized_origin",z.tileTransform.displayCoord);Q.setUniform1f("u_depth",A.z+n);Q.setUniform2fv("u_mosaicSize",this._glyphTextureSize);Q.setUniform1f("u_mapRotation",F);Q.setUniform1f("u_keepUpright",H?1:0);Q.setUniform1f("u_level",10*q);Q.setUniform1f("u_fadeSpeed",10*x.fadeSpeed);Q.setUniform1f("u_minfadeLevel",10*x.minfadeLevel);Q.setUniform1f("u_maxfadeLevel",10*x.maxfadeLevel);Q.setUniform1f("u_fadeChange",10*(q+x.fadeChange));Q.setUniform1i("u_texture",
0);Q.setUniform1f("u_size",R);Q.setUniform1f("u_antialiasingWidth",y);m&&(x=d.int32To4Bytes(r.layerID),Q.setUniform4f("u_id",x[0],x[1],x[2],x[3]));r.glyphPerPageElementsMap.forEach(function(U,ia){C.bind(p,9729,ia,0);var T=A.getPaintValue("text-halo-color",q);ia=A.getPaintValue("text-halo-width",q);if(0<T[3]&&0<ia){var Y=T[3]*da*w;E._haloColor[0]=Y*T[0];E._haloColor[1]=Y*T[1];E._haloColor[2]=Y*T[2];E._haloColor[3]=Y;T=3*A.getPaintValue("text-halo-blur",q);ia*=3;Q.setUniform4fv("u_color",E._haloColor);
Q.setUniform1f("u_halo",1);Q.setUniform1f("u_edgeDistance",ia);Q.setUniform1f("u_edgeBlur",T);p.drawElements(4,U[1],5125,12*U[0])}0<E._sdfColor[3]&&(Q.setUniform4fv("u_color",E._sdfColor),Q.setUniform1f("u_halo",0),Q.setUniform1f("u_edgeDistance",0),Q.setUniform1f("u_edgeBlur",0),p.drawElements(4,U[1],5125,12*U[0]))});p.bindVAO()}}};u.prototype._initialize=function(p){if(this._initialized)return!0;p=new l("text",["textVS","textFS"],[],e,p);p.addDefine("DD","DD",[!0,!1],"DD");p.addDefine("ID","ID",
[!0,!0],"ID");this._shaderVariations=p;this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]};this._vertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},
{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:24,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:24,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:24,normalized:!0,divisor:0},{name:"a_size",count:1,type:5126,offset:20,stride:24,normalized:!1,divisor:0}]};return this._initialized=!0};u.prototype._getSDFVAO=function(p,r,q){if(q){if(r.textDDVertexArrayObject)return r.textDDVertexArrayObject;
q=r.textDDVertexBuffer;var m=r.textIndexBuffer;if(!q||!m)return null;r.textDDVertexArrayObject=new f(p,this._attributeLocationsDD,this._vertexAttributesDD,{geometry:q},m);return r.textDDVertexArrayObject}if(r.textVertexArrayObject)return r.textVertexArrayObject;q=r.textVertexBuffer;m=r.textIndexBuffer;if(!q||!m)return null;r.textVertexArrayObject=new f(p,this._attributeLocations,this._vertexAttributes,{geometry:q},m);return r.textVertexArrayObject};return u}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/TileInfoRenderer":function(){define("require exports ../GeometryUtils ./vtShaderSnippets ../../webgl/BufferObject ../../webgl/Program ../../webgl/Texture ../../webgl/VertexArrayObject".split(" "),
function(g,t,a,b,c,k,h,d){return function(){function e(){this._initialized=!1;this._maxWidth=0;this._color=new Float32Array([1,0,0,1])}e.prototype.dispose=function(){this._outlineProgram&&(this._outlineProgram.dispose(),this._outlineProgram=null);this._tileInfoProgram&&(this._tileInfoProgram.dispose(),this._tileInfoProgram=null);this._outlineVertexArrayObject&&(this._outlineVertexArrayObject.dispose(),this._outlineVertexArrayObject=null);this._tileInfoVertexArrayObject&&(this._tileInfoVertexArrayObject.dispose(),
this._tileInfoVertexArrayObject=null)};e.prototype.render=function(l,f){this._initialized||this._initialize(l);l.bindVAO(this._outlineVertexArrayObject);l.bindProgram(this._outlineProgram);this._outlineProgram.setUniformMatrix4fv("u_transformMatrix",f.tileTransform.transform);this._outlineProgram.setUniform2fv("u_normalized_origin",f.tileTransform.displayCoord);this._outlineProgram.setUniform1f("u_coord_range",f.coordRange);this._outlineProgram.setUniform1f("u_depth",0);this._outlineProgram.setUniform4fv("u_color",
this._color);l.setLineWidth(2);l.drawArrays(3,0,4);l.bindVAO();var n=this._getTexture(l,f);n&&(l.bindVAO(this._tileInfoVertexArrayObject),l.bindProgram(this._tileInfoProgram),l.bindTexture(n,0),this._tileInfoProgram.setUniformMatrix4fv("u_transformMatrix",f.tileTransform.transform),this._tileInfoProgram.setUniform2fv("u_normalized_origin",f.tileTransform.displayCoord),this._tileInfoProgram.setUniform1f("u_depth",0),this._tileInfoProgram.setUniform1f("u_coord_ratio",f.coordRange/512),this._tileInfoProgram.setUniform2f("u_delta",
8,8),this._tileInfoProgram.setUniform2f("u_dimensions",n.descriptor.width,n.descriptor.height),l.drawArrays(5,0,4),l.bindVAO())};e.prototype._initialize=function(l){if(this._initialized)return!0;var f={a_pos:0},n=new k(l,b.backgroundVS,b.backgroundFS,f),u=new k(l,b.tileInfoVS,b.tileInfoFS,f),p={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},r=new Int8Array([0,0,1,0,1,1,0,1]);r=c.createVertex(l,35044,r);r=new d(l,f,p,{geometry:r});var q=new Int8Array([0,0,1,
0,0,1,1,1]);q=c.createVertex(l,35044,q);l=new d(l,f,p,{geometry:q});this._outlineProgram=n;this._tileInfoProgram=u;this._outlineVertexArrayObject=r;this._tileInfoVertexArrayObject=l;return this._initialized=!0};e.prototype._getTexture=function(l,f){if(f.texture)return f.texture;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id","canvas2d"),this._canvas.setAttribute("width","256"),this._canvas.setAttribute("height","32"),this._canvas.setAttribute("style","display:none"));
var n=f.key.id,u=this._canvas.getContext("2d");u.font="24px sans-serif";u.textAlign="left";u.textBaseline="middle";var p=u.measureText(n);p=Math.pow(2,Math.ceil(a.log2(p.width+2)));p>this._maxWidth&&(this._maxWidth=p);u.clearRect(0,0,this._maxWidth,32);u.fillStyle=f.key.level>f.refKey.level?"red":"blue";u.fillText(n,0,16);f.texture=new h(l,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728},this._canvas);return f.texture};return e}()})},"esri/layers/vectorTiles/views/vectorTiles/VectorTileDisplayObject":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/ObjectPool ../../core/libs/gl-matrix/mat4 ../../core/libs/gl-matrix/vec2 ../../geometry/support/spatialReferenceUtils ../2d/engine/DisplayObject ../2d/tiling/enums ../2d/tiling/TileKey ./RenderBucket ../webgl/BufferObject".split(" "),
function(g,t,a,b,c,k,h,d,e,l,f,n){var u="fillVertexBuffer fillDDVertexBuffer fillIndexBuffer outlineVertexBuffer outlineDDVertexBuffer outlineIndexBuffer lineVertexBuffer lineDDVertexBuffer lineIndexBuffer iconVertexBuffer iconDDVertexBuffer iconIndexBuffer textVertexBuffer textDDVertexBuffer textIndexBuffer circleVertexBuffer circleIndexBuffer".split(" ");return function(p){function r(){for(var q=[],m=0;m<arguments.length;m++)q[m]=arguments[m];m=p.call(this)||this;m._renderBuckets=[];m._vectorTileData=
null;m._symbolUpdateData=null;m.status=e.TileStatus.INITIALIZED;m.coords=[0,0];m.bounds=[0,0,0,0];m.tileTransform={transform:Float32Array[16],displayCoord:Float32Array[2]};m.stencilData={mask:0,reference:0};m.status=e.TileStatus.INITIALIZED;m.tileTransform.transform=c.create();m.tileTransform.displayCoord=k.create();0<q.length&&(v=m.acquire).call.apply(v,[m].concat(q));return m;var v}a(r,p);r.prototype.reset=function(){l.pool.release(this.key);this.refKey=this.key=null;this.coords[0]=0;this.coords[1]=
0;this.bounds[0]=0;this.bounds[1]=0;this.bounds[2]=0;this.height=this.width=this.bounds[3]=0;this.resolution=null;this.rotation=0;this.id=this.client=this.styleLayers=this._vectorTileData=null;this.tileTransform.transform.fill(0);this.tileTransform.displayCoord.fill(0);this.stencilData.mask=0;this.stencilData.reference=0;this._renderBuckets.length=0;this._symbolUpdateData=null;this.status=e.TileStatus.INITIALIZED};r.prototype.acquire=function(q,m,v,x,z){this.key=q;this.refKey=m;m=v.lodAt(q.level).resolution;
var A=v.size[0]*m,C=v.origin,D=q.col*A,B=q.row*A,y=v.spatialReference,w=0;y&&(y._isWrappable?y._isWrappable():y.isWrappable)&&(y=h.getInfo(y),w=y.valid[1]-y.valid[0]);D=C.x+D+q.world*w;C=C.y-B;this.coords[0]=D;this.coords[1]=C;this.bounds[0]=D;this.bounds[1]=C;this.bounds[2]=D+A;this.bounds[3]=C-A;this.widthInPixels=v.size[1];this.coordRange=4096;this.resolution=m;this.rotation=z;this.styleLayers=x;this.id=q.id};r.prototype.setData=function(q,m){this._vectorTileData=q;this.client=m;q&&q.bufferDataInfo||
(this.status=e.TileStatus.NO_DATA)};r.prototype.updateSymbolData=function(q){q&&(this._symbolUpdateData=q,this.requestRender())};r.prototype.dispose=function(){this.fillVertexArrayObject&&(this.fillVertexArrayObject.dispose(),this.fillVertexArrayObject=null);this.fillDDVertexArrayObject&&(this.fillDDVertexArrayObject.dispose(),this.fillDDVertexArrayObject=null);this.outlineVertexArrayObject&&(this.outlineVertexArrayObject.dispose(),this.outlineVertexArrayObject=null);this.outlineDDVertexArrayObject&&
(this.outlineDDVertexArrayObject.dispose(),this.outlineDDVertexArrayObject=null);this.lineVertexArrayObject&&(this.lineVertexArrayObject.dispose(),this.lineVertexArrayObject=null);this.lineDDVertexArrayObject&&(this.lineDDVertexArrayObject.dispose(),this.lineDDVertexArrayObject=null);this.iconVertexArrayObject&&(this.iconVertexArrayObject.dispose(),this.iconVertexArrayObject=null);this.iconDDVertexArrayObject&&(this.iconDDVertexArrayObject.dispose(),this.iconDDVertexArrayObject=null);this.textVertexArrayObject&&
(this.textVertexArrayObject.dispose(),this.textVertexArrayObject=null);this.textDDVertexArrayObject&&(this.textDDVertexArrayObject.dispose(),this.textDDVertexArrayObject=null);this.circleVertexArrayObject&&(this.circleVertexArrayObject.dispose(),this.circleVertexArrayObject=null);this.fillVertexBuffer&&(this.fillVertexBuffer.dispose(),this.fillVertexBuffer=null);this.fillDDVertexBuffer&&(this.fillDDVertexBuffer.dispose(),this.fillDDVertexBuffer=null);this.fillIndexBuffer&&(this.fillIndexBuffer.dispose(),
this.fillIndexBuffer=null);this.outlineVertexBuffer&&(this.outlineVertexBuffer.dispose(),this.outlineVertexBuffer=null);this.outlineDDVertexBuffer&&(this.outlineDDVertexBuffer.dispose(),this.outlineDDVertexBuffer=null);this.outlineIndexBuffer&&(this.outlineIndexBuffer.dispose(),this.outlineIndexBuffer=null);this.lineVertexBuffer&&(this.lineVertexBuffer.dispose(),this.lineVertexBuffer=null);this.lineDDVertexBuffer&&(this.lineDDVertexBuffer.dispose(),this.lineDDVertexBuffer=null);this.lineIndexBuffer&&
(this.lineIndexBuffer.dispose(),this.lineIndexBuffer=null);this.iconVertexBuffer&&(this.iconVertexBuffer.dispose(),this.iconVertexBuffer=null);this.iconDDVertexBuffer&&(this.iconDDVertexBuffer.dispose(),this.iconDDVertexBuffer=null);this.iconIndexBuffer&&(this.iconIndexBuffer.dispose(),this.iconIndexBuffer=null);this.textVertexBuffer&&(this.textVertexBuffer.dispose(),this.textVertexBuffer=null);this.textDDVertexBuffer&&(this.textDDVertexBuffer.dispose(),this.textDDVertexBuffer=null);this.textIndexBuffer&&
(this.textIndexBuffer.dispose(),this.textIndexBuffer=null);this.circleVertexBuffer&&(this.circleVertexBuffer.dispose(),this.circleVertexBuffer=null);this.circleIndexBuffer&&(this.circleIndexBuffer.dispose(),this.circleIndexBuffer=null);this.texture&&(this.texture.dispose(),this.texture=null);this._renderBuckets.length=0;this.status=e.TileStatus.INITIALIZED};r.prototype.getCpuMemoryUsage=function(){return null!=this._vectorTileData&&this._vectorTileData.bufferData?this._vectorTileData.bufferData.reduce(function(q,
m){return q+m.byteLength},0)+this._vectorTileData.bufferDataInfo.byteLength+this._vectorTileData.bucketDataInfo.byteLength:0};r.prototype.getGpuMemoryUsage=function(){var q=this,m=u.reduce(function(v,x){return q[x]?v+q[x].size:v},0);this.texture&&(m+=this.texture.descriptor.width*this.texture.descriptor.height*4);return m};r.prototype.attach=function(q){if(this.status!==e.TileStatus.INITIALIZED)return!0;if(0===this._renderBuckets.length)for(var m=new Uint32Array(this._vectorTileData.bucketDataInfo),
v=m.length,x=0;x<v;){var z=m[x],A=m[x+1];if(0===A)A=new f.BackgroundRenderBucket,A.layerID=z,this._renderBuckets.push(A),x+=2;else if(1===A)A=new f.FillRenderBucket,A.layerID=z,A.triangleElementStart=m[x+2],A.triangleElementCount=m[x+3],A.outlineElementStart=m[x+4],A.outlineElementCount=m[x+5],this._renderBuckets.push(A),x+=6;else if(2===A)A=new f.LineRenderBucket,A.layerID=z,A.triangleElementStart=m[x+2],A.triangleElementCount=m[x+3],this._renderBuckets.push(A),x+=4;else if(3===A){A=new f.SymbolRenderBucket;
A.layerID=z;A.isSDF=0!==m[x+2];var C=x+3;z=m[C];C++;if(0<z)for(var D=void 0,B=void 0,y=void 0,w=0;w<z;w++)D=m[C],B=m[C+1],y=m[C+2],A.markerPerPageElementsMap.set(D,[B,y]),C+=3;var E=m[C];C++;if(0<E)for(y=B=D=void 0,w=0;w<E;w++)D=m[C],B=m[C+1],y=m[C+2],A.glyphPerPageElementsMap.set(D,[B,y]),C+=3;this._renderBuckets.push(A);x+=5+3*z+3*E}else 4===A&&(A=new f.CircleRenderBucket,A.layerID=z,A.triangleElementStart=m[x+2],A.triangleElementCount=m[x+3],this._renderBuckets.push(A),x+=4)}q=q.context;m=new Uint32Array(this._vectorTileData.bufferDataInfo);
v=m.length;for(A=x=0;A<v;A+=2,x++)if(!(0>=m[A+1]||0===this._vectorTileData.bufferData[x].byteLength))switch(m[A]){case 1:this.fillVertexBuffer?this.fillVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.fillVertexBuffer=n.createVertex(q,35044,this._vectorTileData.bufferData[x]);break;case 2:this.fillDDVertexBuffer?this.fillDDVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.fillDDVertexBuffer=n.createVertex(q,35044,this._vectorTileData.bufferData[x]);break;case 3:this.fillIndexBuffer?
this.fillIndexBuffer.setData(this._vectorTileData.bufferData[x]):this.fillIndexBuffer=n.createIndex(q,35044,this._vectorTileData.bufferData[x]);break;case 4:this.outlineVertexBuffer?this.outlineVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.outlineVertexBuffer=n.createVertex(q,35044,this._vectorTileData.bufferData[x]);break;case 5:this.outlineDDVertexBuffer?this.outlineDDVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.outlineDDVertexBuffer=n.createVertex(q,35044,this._vectorTileData.bufferData[x]);
break;case 6:this.outlineIndexBuffer?this.outlineIndexBuffer.setData(this._vectorTileData.bufferData[x]):this.outlineIndexBuffer=n.createIndex(q,35044,this._vectorTileData.bufferData[x]);break;case 7:this.lineVertexBuffer?this.lineVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.lineVertexBuffer=n.createVertex(q,35044,this._vectorTileData.bufferData[x]);break;case 8:this.lineDDVertexBuffer?this.lineDDVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.lineDDVertexBuffer=n.createVertex(q,
35044,this._vectorTileData.bufferData[x]);break;case 9:this.lineIndexBuffer?this.lineIndexBuffer.setData(this._vectorTileData.bufferData[x]):this.lineIndexBuffer=n.createIndex(q,35044,this._vectorTileData.bufferData[x]);break;case 10:this.iconVertexBuffer?this.iconVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.iconVertexBuffer=n.createVertex(q,35044,this._vectorTileData.bufferData[x]);break;case 11:this.iconDDVertexBuffer?this.iconDDVertexBuffer.setData(this._vectorTileData.bufferData[x]):
this.iconDDVertexBuffer=n.createVertex(q,35044,this._vectorTileData.bufferData[x]);break;case 12:this.iconIndexBuffer?this.iconIndexBuffer.setData(this._vectorTileData.bufferData[x]):this.iconIndexBuffer=n.createIndex(q,35044,this._vectorTileData.bufferData[x]);break;case 13:this.textVertexBuffer?this.textVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.textVertexBuffer=n.createVertex(q,35044,this._vectorTileData.bufferData[x]);break;case 14:this.textDDVertexBuffer?this.textDDVertexBuffer.setData(this._vectorTileData.bufferData[x]):
this.textDDVertexBuffer=n.createVertex(q,35044,this._vectorTileData.bufferData[x]);break;case 15:this.textIndexBuffer?this.textIndexBuffer.setData(this._vectorTileData.bufferData[x]):this.textIndexBuffer=n.createIndex(q,35044,this._vectorTileData.bufferData[x]);break;case 16:this.circleVertexBuffer?this.circleVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.circleVertexBuffer=n.createVertex(q,35044,this._vectorTileData.bufferData[x]);break;case 17:this.circleIndexBuffer?this.circleIndexBuffer.setData(this._vectorTileData.bufferData[x]):
this.circleIndexBuffer=n.createIndex(q,35044,this._vectorTileData.bufferData[x])}this._vectorTileData=null;this.status=e.TileStatus.READY;return!0};r.prototype.detach=function(q){this.client&&this.status!==e.TileStatus.INVALID&&this.status!==e.TileStatus.INITIALIZED&&this.client.invoke("destructTileData",this.id);this.dispose();p.prototype.detach.call(this,q)};r.prototype.doRender=function(q){if(this.visible&&this.status===e.TileStatus.READY){var m=q.context,v=q.renderer;if(m&&v){var x=q.drawphase;
this._symbolUpdateData&&this._updateSymbolData(q);m.setStencilFunction(514,this.stencilData.reference,this.stencilData.mask);var z=this.styleLayers,A=void 0!==q.layerOpacity?q.layerOpacity:1;if(0!==A){var C=this._renderBuckets.length,D=0;if(0===x)for(D=C-1;0<=D;D--){var B=this._renderBuckets[D];3!==B.type&&4!==B.type&&B.hasData()&&v.renderBucket(m,B,q.displayLevel,q.requiredLevel,x,this,z.layers[B.layerID],A)}else for(D=0;D<C;D++)B=this._renderBuckets[D],B.hasData()&&v.renderBucket(m,B,q.displayLevel,
q.requiredLevel,x,this,z.layers[B.layerID],A)}}}};r.prototype._updateSymbolData=function(q){if(!this._symbolUpdateData.bucketDataInfo)return!0;var m=new Uint32Array(this._symbolUpdateData.bucketDataInfo),v=m.length;if(0===v)return this._symbolUpdateData=null,!0;if(this.status!==e.TileStatus.READY)return this.requestRender(),!1;q=q.context;for(var x=new Uint32Array(this._symbolUpdateData.bufferDataInfo),z=x.length,A=0,C=0;C<z;C+=2,A++)switch(x[C]){case 10:this.iconVertexBuffer&&(this.iconVertexBuffer.dispose(),
this.iconVertexBuffer=null);this.iconVertexBuffer=n.createVertex(q,35044,this._symbolUpdateData.bufferData[A]);break;case 11:this.iconDDVertexBuffer&&(this.iconDDVertexBuffer.dispose(),this.iconDDVertexBuffer=null);this.iconDDVertexBuffer=n.createVertex(q,35044,this._symbolUpdateData.bufferData[A]);break;case 12:this.iconIndexBuffer&&(this.iconIndexBuffer.dispose(),this.iconIndexBuffer=null);this.iconIndexBuffer=n.createIndex(q,35044,this._symbolUpdateData.bufferData[A]);break;case 13:this.textVertexBuffer&&
(this.textVertexBuffer.dispose(),this.textVertexBuffer=null);this.textVertexBuffer=n.createVertex(q,35044,this._symbolUpdateData.bufferData[A]);break;case 14:this.textDDVertexBuffer&&(this.textDDVertexBuffer.dispose(),this.textDDVertexBuffer=null);this.textDDVertexBuffer=n.createVertex(q,35044,this._symbolUpdateData.bufferData[A]);break;case 15:this.textIndexBuffer&&(this.textIndexBuffer.dispose(),this.textIndexBuffer=null),this.textIndexBuffer=n.createIndex(q,35044,this._symbolUpdateData.bufferData[A])}q=
this._renderBuckets.length;for(x=0;x<q;x++)this._renderBuckets[x]instanceof f.SymbolRenderBucket&&(z=this._renderBuckets[x],z.markerPerPageElementsMap.clear(),z.glyphPerPageElementsMap.clear());for(q=0;q<v;){z=m[q];A=-1;C=this._renderBuckets.length;for(x=0;x<C;x++)if(this._renderBuckets[x].layerID===z){A=x;break}x=this._renderBuckets[A];x||(x=new f.SymbolRenderBucket,x.layerID=z,x.isSDF=0!==m[q+2],this._renderBuckets.push(x));var D=q+3;z=m[D];D++;if(0<z)for(var B=C=A=void 0,y=0;y<z;y++)A=m[D],C=m[D+
1],B=m[D+2],x.markerPerPageElementsMap.set(A,[C,B]),D+=3;var w=m[D];D++;if(0<w)for(B=C=A=void 0,y=0;y<w;y++)A=m[D],C=m[D+1],B=m[D+2],x.glyphPerPageElementsMap.set(A,[C,B]),D+=3;q+=5+3*z+3*w}this.iconVertexArrayObject&&(this.iconVertexArrayObject.dispose(),this.iconVertexArrayObject=null);this.iconDDVertexArrayObject&&(this.iconDDVertexArrayObject.dispose(),this.iconDDVertexArrayObject=null);this.textVertexArrayObject&&(this.textVertexArrayObject.dispose(),this.textVertexArrayObject=null);this.textDDVertexArrayObject&&
(this.textDDVertexArrayObject.dispose(),this.textDDVertexArrayObject=null);this._symbolUpdateData=null;return!0};r.pool=new b(r);return r}(d)})},"esri/layers/vectorTiles/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(g,t,a){return function(){function b(c,k,h,d){this.set(c,k,h,d)}b.from=function(c,k,h,d){return b.pool.acquire(c,k,h,d)};b.getId=function(c,k,h,d){return"object"===typeof c?c.level+"/"+c.row+"/"+c.col+"/"+c.world:c+"/"+k+"/"+h+"/"+
d};Object.defineProperty(b.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});b.prototype.equals=function(c){return this.level===c.level&&this.row===c.row&&this.col===c.col&&this.world===c.world};b.prototype.release=function(){this.world=this.col=this.row=this.level=0};b.prototype.set=function(c,k,h,d){null==c?this.world=this.col=this.row=this.level=0:"object"===
typeof c?(this.level=c.level||0,this.row=c.row||0,this.col=c.col||0,this.world=c.world||0):"string"===typeof c?(c=c.split("/"),k=c[1],h=c[2],d=c[3],this.level=parseFloat(c[0]),this.row=parseFloat(k),this.col=parseFloat(h),this.world=parseFloat(d)):(this.level=+c,this.row=+k,this.col=+h,this.world=+d||0);return this};b.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};b.prototype.getChildKeys=function(){var c=this.level+1,k=this.row<<1,h=this.col<<1,d=this.world;
return[b.pool.acquire(c,k,h,d),b.pool.acquire(c,k,h+1,d),b.pool.acquire(c,k+1,h,d),b.pool.acquire(c,k+1,h+1,d)]};b.prototype._compare=function(c){return this.row<c.row?-1:this.row>c.row?1:this.col<c.col?-1:this.col>c.col?1:0};b.sort=function(c){return c.map(function(k){return b.from(k)}).sort(function(k,h){return k._compare(h)}).map(function(k){return k.id})};b.pool=new a(b,!0,null,25,50);return b}()})},"esri/layers/vectorTiles/views/vectorTiles/RenderBucket":function(){define(["require","exports",
"../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper"],function(g,t,a,b){Object.defineProperty(t,"__esModule",{value:!0});g=function(){return function(c){this.type=c}}();t.RenderBucket=g;b=function(c){function k(){var h=c.call(this,2)||this;h.triangleElementStart=0;h.triangleElementCount=0;return h}a(k,c);k.prototype.hasData=function(){return 0<this.triangleElementCount};return k}(g);t.LineRenderBucket=b;b=function(c){function k(){var h=c.call(this,1)||this;h.triangleElementStart=
0;h.triangleElementCount=0;h.outlineElementStart=0;h.outlineElementCount=0;return h}a(k,c);k.prototype.hasData=function(){return 0<this.triangleElementCount||0<this.outlineElementCount};return k}(g);t.FillRenderBucket=b;b=function(c){function k(){var h=c.call(this,3)||this;h.markerPerPageElementsMap=new Map;h.glyphPerPageElementsMap=new Map;h.isSDF=!1;return h}a(k,c);k.prototype.hasData=function(){return 0<this.markerPerPageElementsMap.size||0<this.glyphPerPageElementsMap.size};return k}(g);t.SymbolRenderBucket=
b;b=function(c){function k(){var h=c.call(this,4)||this;h.triangleElementStart=0;h.triangleElementCount=0;return h}a(k,c);k.prototype.hasData=function(){return 0<this.triangleElementCount};return k}(g);t.CircleRenderBucket=b;g=function(c){function k(){return c.call(this,0)||this}a(k,c);k.prototype.hasData=function(){return!0};return k}(g);t.BackgroundRenderBucket=g})},"esri/layers/vectorTiles/views/vectorTiles/TileHandler":function(){define("require exports dojo/Deferred dojo/has dojo/promise/all ../../request ../../core/LRUCache ../../core/promiseUtils ../../core/requireUtils ../../core/workers ../2d/tiling/TileKey ./GeometryUtils ./GlyphMosaic ./GlyphSource ./SpriteMosaic ./SpriteSource ./TileIndex ./VectorTileDisplayObject module".split(" "),
function(g,t,a,b,c,k,h,d,e,l,f,n,u,p,r,q,m,v,x){var z=new h(10),A=new Map;return function(){function C(D,B,y,w,E){void 0===w&&(w=!1);this.devicePixelRatio=y;this.allowUpdates=w;this._tileIndex=this._connection=this._glyphMosaic=this._spriteMosaic=null;this._updateQueue=new Map;this._ongoingRequests=new Map;this._vectorTileLayer=D;this._styleRepository=D.styleRepository;this._requestUpdate=B}C.prototype.destroy=function(){this.stop();this._vectorTileLayer=this._requestUpdate=this._styleRepository=
null;this._spriteMosaic&&(this._spriteMosaic.dispose(),this._spriteMosaic=null);this._glyphMosaic&&(this._glyphMosaic.dispose(),this._glyphMosaic=null)};Object.defineProperty(C.prototype,"initialized",{get:function(){return this._broadcastPromise&&this._broadcastPromise.isFulfilled()},enumerable:!0,configurable:!0});Object.defineProperty(C.prototype,"spriteMosaic",{get:function(){return this._spriteMosaic},enumerable:!0,configurable:!0});Object.defineProperty(C.prototype,"glyphMosaic",{get:function(){return this._glyphMosaic},
enumerable:!0,configurable:!0});Object.defineProperty(C.prototype,"ongoingRequestCount",{get:function(){return this._ongoingRequests.size},enumerable:!0,configurable:!0});C.prototype.start=function(){var D=this;this.stop();var B=this._styleRepository,y=new q(B.sprite,this.devicePixelRatio);y.devicePixelRatio=this.devicePixelRatio;var w=y.load().then(function(){D._spriteMosaic=new r(1024,1024,250);D._spriteMosaic.setSpriteSource(y);b("stable-symbol-rendering")&&D._spriteMosaic.preloadSpriteItems()}),
E=new p(B.glyphs);this._glyphMosaic=new u(1024,1024,E);var F=this._fetchTileMap(this._vectorTileLayer.tileIndexUrl),H=l.open(e.getAbsMid("./WorkerTileHandler",g,x),{client:this}).then(function(R){D._connection=R}),M=new a(function(R){w.isFulfilled()||w.cancel();F.isFulfilled()||F.cancel();H.isFulfilled()||H.cancel()});c([w,F,H]).then(function(R){c(D._connection.broadcast("setLayers",B.styleJSON)).then(function(){M.resolve()})});return this._broadcastPromise=M.promise};C.prototype.stop=function(){this._broadcastPromise&&
!this._broadcastPromise.isFulfilled()&&this._broadcastPromise.cancel();this._updateQueue.forEach(function(D){return D.cancel()});this._ongoingRequests.forEach(function(D){return D.cancel()});this._connection&&(this._connection.close(),this._connection=null)};C.prototype.updateTile=function(D,B){var y=this;if(!this.allowUpdates)return d.resolve(null);if(!this._broadcastPromise.isFulfilled()||!this._connection)return d.reject(Error("no connection"));B=Math.round(n.degToByte(B.state.rotation));if(D.rotation===
B)return d.resolve(null);var w=D.key;if(this._updateQueue.has(w.id)){var E=this._updateQueue.get(w.id);E.cancel()}D.rotation=B;E=this._connection.invoke("update",{key:D.id,rotation:B},null,{client:D.client}).then(function(F){D.updateSymbolData(F);return F}).always(function(){y._updateQueue["delete"](w.id)});this._updateQueue.set(D.id,E);return E};C.prototype.getVectorTileWithLRC=function(D,B,y,w){var E=this;void 0===w&&(w=0);var F=new f(D,B,y,0);return this.getRefKey(F).then(function(H){var M=new v(F,
H,E._vectorTileLayer.tileInfo,E._styleRepository,0);if(H)return E.getTileData(M.key,0).then(function(R){M.setData(R.tileData,R.client);return M});M.setData(null,null);return M})};C.prototype.getTileData=function(D,B){var y=this;return this._broadcastPromise.isFulfilled()&&this._connection?this.getRefKey(D).then(function(w){if(!w)return d.resolve(null);var E=Math.round(n.degToByte(B));return y._getTileData(y._connection,D,w,E).then(function(F){return F&&F.tileData?{tileData:F.tileData,client:F.client}:
d.reject("No data")})}):d.reject(Error("no connection"))};C.prototype.getRefKey=function(D){return this._tileIndex?this._tileIndex.dataKey(D):d.resolve(D)};C.prototype.fetchTileData=function(D){D=f.pool.acquire(D);var B=this._vectorTileLayer.getTileUrl(D.level,D.row,D.col);f.pool.release(D);return k(B,{callbackParamName:"callback",responseType:"array-buffer"}).then(function(y){return{result:y.data,transferList:[y.data]}})};C.prototype.getSprites=function(D){return this._spriteMosaic.getSpriteItems(D)};
C.prototype.getGlyphs=function(D){return this._glyphMosaic.getGlyphItems(D.tileID,D.font,D.codePoints)};C.prototype.getStyleRepository=function(){return this._styleRepository};C.prototype.getTileIndex=function(){return this._tileIndex};C.prototype._getTileData=function(D,B,y,w){var E=this,F={client:null};if(D=this._ongoingRequests.get(B.id))return D;D=this._connection.invoke("getTile",{key:B.id,refKey:y.id,rotation:w,cacheTile:this.allowUpdates},null,F).then(function(H){E._ongoingRequests["delete"](B.id);
return{tileData:H,client:F.client}}).catch(function(H){E._ongoingRequests["delete"](B.id);E._connection.invoke("destructTileData",B.id,null,F);return d.reject(H)});this._ongoingRequests.set(B.id,D);return D};C.prototype._fetchTileMap=function(D){var B=this;if(this._vectorTileLayer.capabilities.operations.supportsTileMap&&this._vectorTileLayer.tilemapCache)return this._tileIndex=new m(this._vectorTileLayer.tilemapCache),d.resolve();if(!D)return d.resolve();if(z.has(D))return this._tileIndex=z.use(D),
d.resolve();if(A.has(D))return A.get(D).then(function(w){B._tileIndex=new m(w.data)});var y=k(D,{callbackParamName:"callback",responseType:"json"});y.then(function(w){B._tileIndex=new m(w.data);A["delete"](D);z.insert(D,B._tileIndex)});A.set(D,y);return y};return C}()})},"esri/layers/vectorTiles/core/LRUCache":function(){define(["require","exports"],function(g,t){return function(){function a(b){this._cache={};this._lruQueue=[];if(0>=b)throw Error("LRU cache size must be bigger than zero!");this._maxSize=
b}a.prototype.has=function(b){return void 0!==this._cache[b]};a.prototype.insert=function(b,c){null!==this.use(b)?this._cache[b]=c:(this._collect(),this._cache[b]=c,this._lruQueue.unshift(b))};a.prototype.use=function(b){var c=this._cache[b];if(!c)return null;this._lruQueue.splice(this._lruQueue.indexOf(b),1);this._lruQueue.unshift(b);return c};a.prototype.print=function(){for(var b=0,c=this._lruQueue;b<c.length;b++);};a.prototype._collect=function(){if(!(this._lruQueue.length<this._maxSize)){var b=
this._lruQueue.pop(),c=this._cache[b];c&&c.release&&c.release();delete this._cache[b]}};return a}()})},"esri/layers/vectorTiles/core/requireUtils":function(){define(["require","exports","dojo/Deferred"],function(g,t,a){function b(c,k){if(Array.isArray(k)){var h=new a;c(k,function(){for(var d=[],e=0;e<arguments.length;e++)d[e]=arguments[e];h.resolve(d)});return h.promise}return b(c,[k]).then(function(d){return d[0]})}Object.defineProperty(t,"__esModule",{value:!0});t.when=b;t.getAbsMid=function(c,
k,h){return k.toAbsMid?k.toAbsMid(c):h.id.replace(/\/[^\/]*$/gi,"/")+c}})},"esri/layers/vectorTiles/core/workers":function(){define(["require","exports","./workers/workers"],function(g,t,a){Object.defineProperty(t,"__esModule",{value:!0});for(var b in a)t.hasOwnProperty(b)||(t[b]=a[b])})},"esri/layers/vectorTiles/core/workers/workers":function(){define("require exports dojo/sniff dojo/promise/all ../Logger ../promiseUtils ./Connection ./RemoteClient ./WorkerOwner".split(" "),function(g,t,a,b,c,k,
h,d,e){function l(){if(q)return q;for(var m=f+n,v=[],x=function(A){var C=e.create(A).then(function(D){return r[A]=D});v.push(C)},z=0;z<m;z++)x(z);return q=b(v).then(function(){})}Object.defineProperty(t,"__esModule",{value:!0});t.Connection=h;t.RemoteClient=d;(h=navigator.hardwareConcurrency)||(h=a("safari")&&a("mac")||a("trident")?8:2);var f=a("esri-workers-debug")?1:Math.max(1,Math.ceil(h/2)),n=a("esri-workers-debug")?1:Math.max(1,Math.floor(h/2)),u=c.getLogger("esri.core.workers"),p=0,r=[];t.initialize=
function(){l()};t.open=function(m,v,x){void 0===v&&(v={});if(Array.isArray(m))return new t.Connection(m.map(function(C){return new t.RemoteClient(C,v.client)}));if("string"!==typeof m){u.warn("workers-open:signature-deprecated","DEPRECATED: workers.open() changed signature.");var z=m;m=v;v={client:z,strategy:x?"dedicated":"distributed"}}var A=v.strategy||"distributed";return"local"===A?k.create(function(C){g([m],function(D){C(t.RemoteClient.connect(D))})}).then(function(C){return new t.Connection([new t.RemoteClient(C,
v.client)])}):l().then(function(){if("dedicated"===A){var C=f+p++;p%=n;return r[C].open(m).then(function(D){return new t.Connection([new t.RemoteClient(D,v.client)])})}return k.all(r.map(function(D){return D.open(m)})).then(function(D){return new t.Connection(D.map(function(B){return new t.RemoteClient(B,v.client)}))})})};t.terminate=function(){for(var m=0;m<r.length;m++)r[m]&&r[m].terminate();r.length=0};var q})},"esri/layers/vectorTiles/core/workers/Connection":function(){define(["require","exports",
"../promiseUtils"],function(g,t,a){return function(){function b(c){this._clientIdx=0;this._clients=c}b.prototype.broadcast=function(c,k,h){for(var d=[],e=0,l=this._clients;e<l.length;e++)d.push(l[e].invoke(c,k,h));return d};b.prototype.close=function(){for(var c=0,k=this._clients;c<k.length;c++)k[c].close();this._clients=[]};b.prototype.invoke=function(c,k,h,d){var e=d&&d.client;if(!this._clients||!this._clients.length)return a.reject(Error("Connection closed"));null!=e&&-1!==this._clients.indexOf(e)||
this._clients.some(function(l){return l.isBusy()?!1:(e=l,!0)})||(this._clientIdx=(this._clientIdx+1)%this._clients.length,e=this._clients[this._clientIdx]);c=e.invoke(c,k,h);d&&(d.client=e);return c};b.prototype.openPorts=function(){return a.all(this._clients.map(function(c){return c.openPort()}))};return b}()})},"esri/layers/vectorTiles/core/workers/RemoteClient":function(){define("require exports dojo/Deferred ../Error ../promiseUtils ./utils".split(" "),function(g,t,a,b,c,k){function h(p,r){p["delete"](r)}
var d=k.MessageType.CLOSE,e=k.MessageType.CANCEL,l=k.MessageType.INVOKE,f=k.MessageType.RESPONSE,n=k.MessageType.OPEN_PORT,u=function(){function p(r){this._timer=null;this._cancelledJobIds=new Set;this._invokeMessages=[];this._invoke=r;this._timer=null;this._process=this._process.bind(this)}p.prototype.push=function(r){r.type===k.MessageType.CANCEL?this._cancelledJobIds.add(r.jobId):(this._invokeMessages.push(r),null===this._timer&&(this._timer=setTimeout(this._process,0)))};p.prototype.clear=function(){this._invokeMessages.length=
0;this._cancelledJobIds.clear();this._timer=null};p.prototype._process=function(){this._timer=null;for(var r=0,q=this._invokeMessages;r<q.length;r++){var m=q[r];this._cancelledJobIds.has(m.jobId)||this._invoke(m)}this._cancelledJobIds.clear();this._invokeMessages.length=0};return p}();return function(){function p(r,q,m){this._outJobs=new Map;this._inJobs=new Map;this._queue=new u(this._onInvoke.bind(this));this._onMessage=this._onMessage.bind(this);this._client=q;this._port=r;this._port.addEventListener("message",
this._onMessage);this._port.start();this._channel=m}p.connect=function(r){var q=new MessageChannel;r="function"===typeof r?new r:"default"in r&&"function"===typeof r.default?new r.default:r;r.remoteClient=new p(q.port1,r,q);return q.port2};p.prototype.close=function(){this._post({type:d});this._close()};p.prototype.isBusy=function(){return 0<this._outJobs.size};p.prototype.invoke=function(r,q,m){var v=this;if(!this._port)return c.reject(new b("remote-client:port-closed","Can't invoke(), port is closed"));
var x=k.newJobId(),z=new a(function(){h(v._outJobs,x);v._post({type:e,jobId:x})});this._outJobs.set(x,z);this._post({type:l,jobId:x,methodName:r},q,m);return z.promise};p.prototype.openPort=function(){var r=this,q=k.newJobId(),m=new a(function(){h(r._outJobs,q);r._post({type:e,jobId:q})});this._outJobs.set(q,m);this._post({type:n,jobId:q});return m.promise};p.prototype._close=function(){this._channel&&(this._channel=null);this._port.removeEventListener("message",this._onMessage);this._port.close();
this._outJobs.forEach(function(r){r.cancel()});this._inJobs.clear();this._outJobs.clear();this._queue.clear();this._port=this._client=null};p.prototype._onMessage=function(r){if(r=k.receiveMessage(r))switch(r.type){case f:this._onResponse(r);break;case l:this._queue.push(r);break;case e:this._onCancel(r);break;case d:this._close();break;case n:this._onOpenPort(r)}};p.prototype._onCancel=function(r){var q=this._inJobs,m=r.jobId,v=q.get(m);this._queue.push(r);v&&(h(q,m),v.cancel())};p.prototype._onInvoke=
function(r){var q=this,m=r.methodName,v=r.jobId;r=r.data;var x=this._inJobs,z=this._client,A=z[m];try{if(!A&&m&&-1!==m.indexOf("."))for(var C=m.split("."),D=0;D<C.length-1;D++)z=z[C[D]],A=z[C[D+1]];if("function"!==typeof A)throw new TypeError(m+" is not a function");var B=A.call(z,r,this)}catch(y){this._post({type:f,jobId:v,error:k.toInvokeError(y)});return}c.isThenable(B)?(x.set(v,B),B.then(function(y){x.has(v)&&(h(x,v),q._post({type:f,jobId:v},y))}).catch(function(y){x.has(v)&&(h(x,v),y&&"cancel"===
y.dojoType||q._post({type:f,jobId:v,error:k.toInvokeError(y||{message:"Error encountered at method "+m})}))})):this._post({type:f,jobId:v},B)};p.prototype._onOpenPort=function(r){var q=new MessageChannel;new p(q.port1,this._client);this._post({type:f,jobId:r.jobId},q.port2,[q.port2])};p.prototype._onResponse=function(r){var q=r.jobId,m=r.error;r=r.data;var v=this._outJobs;if(v.has(q)){var x=v.get(q);h(v,q);m?x.reject(b.fromJSON(JSON.parse(m))):x.resolve(r)}};p.prototype._post=function(r,q,m){return k.postMessage(this._port,
r,q,m)};return p}()})},"esri/layers/vectorTiles/core/workers/utils":function(){define(["require","exports","dojo/has"],function(g,t,a){function b(k){return k&&"object"===typeof k&&("result"in k||"transferList"in k)}Object.defineProperty(t,"__esModule",{value:!0});(function(k){k[k.HANDSHAKE=0]="HANDSHAKE";k[k.CONFIGURE=1]="CONFIGURE";k[k.CONFIGURED=2]="CONFIGURED";k[k.OPEN=3]="OPEN";k[k.OPENED=4]="OPENED";k[k.RESPONSE=5]="RESPONSE";k[k.INVOKE=6]="INVOKE";k[k.CANCEL=7]="CANCEL";k[k.CLOSE=8]="CLOSE";
k[k.OPEN_PORT=9]="OPEN_PORT"})(t.MessageType||(t.MessageType={}));var c=0;t.newJobId=function(){return c++};t.isTranferableResult=b;t.toInvokeError=function(k){return k?k.toJSON?JSON.stringify(k):JSON.stringify({name:k.name,message:k.message,details:k.details,stack:k.stack}):null};t.postMessage=function(k,h,d,e){2===arguments.length||void 0===d&&void 0===e?k.postMessage(h):(a("esri-workers-supports-transfer-arraybuffer")||(e?(e=e.filter(function(l){return!(l instanceof ArrayBuffer)}),e.length||(e=
null)):b(d)&&d.transferList&&(d.transferList=d.transferList.filter(function(l){return!(l instanceof ArrayBuffer)}),d.transferList.length||(d.transferList=null))),e?(h.data=d,k.postMessage(h,e)):b(d)?(h.data=d.result,d.transferList?k.postMessage(h,d.transferList):k.postMessage(h)):(h.data=d,k.postMessage(h)))};t.receiveMessage=function(k){return k?(k=k.data)?"string"===typeof k?JSON.parse(k):k:null:null}})},"esri/layers/vectorTiles/core/workers/WorkerOwner":function(){define("require exports dojo/Deferred ../../kernel ../Error ../Logger ../promiseUtils ./utils ./workerFactory".split(" "),
function(g,t,a,b,c,k,h,d,e){var l=k.getLogger("esri.core.workers"),f=d.MessageType.CANCEL,n=d.MessageType.INVOKE,u=d.MessageType.OPEN,p=d.MessageType.OPENED,r=d.MessageType.RESPONSE;return function(){function q(m,v){this._outJobs=new Map;this._inJobs=new Map;this.worker=m;this.id=v;m.addEventListener("message",this._onMessage.bind(this));m.addEventListener("error",function(x){x.preventDefault();l.error(x)})}q.create=function(m){return e.createWorker().then(function(v){return new q(v,m)})};q.prototype.terminate=
function(){this.worker.terminate()};q.prototype.open=function(m){var v=this,x=d.newJobId(),z=new a(function(A){v._outJobs["delete"](x);v._post({type:f,jobId:x})});this._outJobs.set(x,z);this._post({type:u,jobId:x,modulePath:m});return z.promise};q.prototype._onMessage=function(m){if(m=d.receiveMessage(m))switch(m.type){case p:case r:this._onResponse(m);break;case f:this._onCancel(m);break;case n:this._onInvoke(m)}};q.prototype._onCancel=function(m){(m=this._inJobs.get(m.jobId))&&m.cancel()};q.prototype._onInvoke=
function(m){var v=this,x=m.methodName,z=m.jobId;m=m.data;var A=this._inJobs,C=b.workerMessages[x];try{if("function"!==typeof C)throw new TypeError(x+" is not a function");var D=C.call(null,m)}catch(B){this._post({type:r,jobId:z,error:d.toInvokeError(B)});return}h.isThenable(D)?(A.set(z,D),D.then(function(B){A["delete"](z);v._post({type:r,jobId:z},B)}).catch(function(B){A["delete"](z);B||(B={message:"Error encountered at method"+x});B.dojoType&&"cancel"===B.dojoType||v._post({type:r,jobId:z,error:d.toInvokeError(B)})})):
this._post({type:r,jobId:z},D)};q.prototype._onResponse=function(m){var v=m.jobId,x=m.error;m=m.data;var z=this._outJobs.get(v);z&&(this._outJobs["delete"](v),x?z.reject(c.fromJSON(JSON.parse(x))):z.resolve(m))};q.prototype._post=function(m,v,x){return d.postMessage(this.worker,m,v,x)};return q}()})},"esri/layers/vectorTiles/kernel":function(){define(["require","exports","esri/kernel","./identity/IdentityManager"],function(g,t,a,b){return function(){function c(){}Object.defineProperty(c,"id",{get:function(){return a.id?
b:null},enumerable:!0,configurable:!0});c.workerMessages={};return c}()})},"esri/layers/vectorTiles/identity/IdentityManager":function(){define(["require","exports","esri/IdentityManager"],function(g,t,a){Object.defineProperty(t,"__esModule",{value:!0});t.findCredential=function(b){return a.findCredential(b)}})},"esri/layers/vectorTiles/core/workers/workerFactory":function(){define("require exports ../tsSupport/assignHelper dojo/_base/kernel ../../config ../../request ../Logger ../promiseUtils ../sniff ../urlUtils ./loaderConfig ./utils ./WorkerFallback".split(" "),
function(g,t,a,b,c,k,h,d,e,l,f,n,u){function p(C){return d.create(function(D){function B(w){if(w=n.receiveMessage(w))switch(w.type){case A:w=C;var E=c.workers.loaderUrl||f.DEFAULT_LOADER_URL;if(null!=c["default"]){var F=a({},c);delete F["default"];F=JSON.parse(JSON.stringify(F))}else F=JSON.parse(JSON.stringify(c));var H=c.workers.loaderConfig;H=f.default({baseUrl:H.baseUrl,locale:b.locale,has:a({"config-deferredInstrumentation":0,"dojo-test-sniff":0,"esri-cors":1,"esri-secure-context":e("esri-secure-context"),
"esri-workers-supports-transfer-arraybuffer":e("esri-workers-supports-transfer-arraybuffer"),"events-keypress-typed":0,"host-webworker":1},H.has),map:a({},H.map),paths:a({},H.paths),packages:H.packages||[]});w.postMessage({type:z,configure:{esriConfig:F,loaderUrl:E,loaderConfig:H}});break;case x:C.removeEventListener("message",B),C.removeEventListener("error",y),D(C)}}function y(w){w.preventDefault();C.removeEventListener("message",B);C.removeEventListener("error",y);m.warn("Failed to create Worker. Fallback to execute module in main thread",
w);C=new u;C.addEventListener("message",B);C.addEventListener("error",y)}C.addEventListener("message",B);C.addEventListener("error",y)})}Object.defineProperty(t,"__esModule",{value:!0});var r=l.normalize(g.toUrl("./worker.js")),q=!l.hasSameOrigin(r,location.href),m=h.getLogger("esri.core.workers"),v=null,x=n.MessageType.CONFIGURED,z=n.MessageType.CONFIGURE,A=n.MessageType.HANDSHAKE;t.createWorker=function(){if(!e("esri-workers"))return p(new u);if(!q){var C=void 0;try{C=new Worker(r)}catch(D){m.warn("Failed to create Worker. Fallback to execute module in main thread",
event),C=new u}return p(C)}v||(v=k(r,{responseType:"text"}));return v.then(function(D){return new Worker(URL.createObjectURL(new Blob([D.data],{type:"text/javascript"})))}).catch(function(D){m.warn("Failed to create Worker. Fallback to execute module in main thread",D);return new u}).then(function(D){return p(D)})}})},"esri/layers/vectorTiles/core/sniff":function(){define(["require","exports","dojo/sniff","./global","../views/webgl/context-util"],function(g,t,a,b,c){function k(){var l={available:!1,
version:0,majorPerformanceCaveat:!1,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1},f=document.createElement("canvas");if(!f)return l;var n=c.createContext(f,{failIfMajorPerformanceCaveat:!0},"webgl");!n&&(n=c.createContext(f,{},"webgl"))&&(l.majorPerformanceCaveat=!0);if(!n)return l;f=n.getParameter(n.VERSION);if(!f)return l;if(f=f.match(/^WebGL\s+([\d.]*)/))l.version=parseFloat(f[1]),l.available=.94<=l.version,f=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,
n.HIGH_FLOAT),l.supportsHighPrecisionFragment=f&&0<f.precision,l.supportsVertexShaderSamplers=0<n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),l.supportsElementIndexUint=null!==n.getExtension("OES_element_index_uint"),l.supportsStandardDerivatives=null!==n.getExtension("OES_standard_derivatives");return l}function h(){var l={available:!1,version:0},f=document.createElement("canvas");if(!f)return l;f=c.createContext(f,{},"webgl2");if(!f)return l;l.available=!0;f=f.getParameter(f.VERSION);if(!f)return l;
if(f=f.match(/^WebGL\s+([\d.]*)/))l.version=parseFloat(f[1]);return l}(function(){var l=navigator.userAgent,f=l.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i);l=l.match(/iPhone/i);f&&a.add("esri-mobile",f);l&&a.add("esri-iPhone",l);a.add("esri-phonegap",!!b.cordova);a.add("esri-cors",a("esri-phonegap")||"XMLHttpRequest"in b&&"withCredentials"in new XMLHttpRequest);a.add("esri-geolocation",function(){return!!navigator.geolocation});a.add("esri-canvas-svg-support",function(){return!(a("trident")||
a("ie"))});a.add("esri-secure-context",function(){if("isSecureContext"in b)return b.isSecureContext;if(b.location&&b.location.origin)return 0===b.location.origin.indexOf("https:")});a.add("esri-wasm","WebAssembly"in b);a("host-webworker")||(a.add("esri-workers","Worker"in b),a.add("esri-script-sandbox",function(){return"MessageChannel"in b&&"HTMLIFrameElement"in b&&"sandbox"in HTMLIFrameElement.prototype}),a.add("esri-url-encodes-apostrophe",function(){var n=b.document.createElement("a");n.href="?'";
return-1<n.href.indexOf("?%27")}),d||(d=k()),a.add("esri-webgl",d.available),a.add("esri-webgl-high-precision-fragment",d.supportsHighPrecisionFragment),a.add("esri-webgl-vertex-shader-samplers",d.supportsVertexShaderSamplers),a.add("esri-webgl-element-index-uint",d.supportsElementIndexUint),a.add("esri-webgl-standard-derivatives",d.supportsStandardDerivatives),a.add("esri-webgl-major-performance-caveat",d.majorPerformanceCaveat),a.add("esri-featurelayer-webgl-labeling",!0),e||(e=h()),a.add("esri-webgl2",
e.available))})();var d=null,e=null;return a})},"esri/layers/vectorTiles/views/webgl/context-util":function(){define(["require","exports"],function(g,t){function a(h,d,e){void 0===d&&(d={});switch(e){case "webgl":var l=["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case "webgl2":l=["webgl2"];break;default:l=["webgl","experimental-webgl","webkit-3d","moz-webgl"]}e=null;for(var f=0;f<l.length;f++){var n=l[f];try{e=h.getContext(n,d)}catch(u){}if(e)break}return e}function b(h,d){(h=h.parentNode)&&
(h.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+d+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}Object.defineProperty(t,"__esModule",{value:!0});t.createContextOrErrorHTML=function(h,d,e){void 0===d&&(d={});if(!window.WebGLRenderingContext)return b(h,c),null;d=a(h,d,e);return d?d:(b(h,k),null)};t.createContext=
a;var c='This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e',k='It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'})},"esri/layers/vectorTiles/core/workers/loaderConfig":function(){define(["require","exports","../tsSupport/assignHelper","dojo/has","../urlUtils"],function(g,t,a,b,c){Object.defineProperty(t,
"__esModule",{value:!0});t.DEFAULT_LOADER_URL=c.makeAbsolute(c.removeQueryParameters(g.toUrl("./worker-init.js")));t.DEFAULT_CONFIG={baseUrl:function(){var k=c.removeQueryParameters(g.toUrl("dojo/x.js"));return c.makeAbsolute(k.slice(0,k.length-5))}(),packages:[{name:"esri"},{name:"dojo"},{name:"dojox"},{name:"dstore"},{name:"moment",main:"moment"},{name:"@dojo"},{name:"cldrjs",main:"dist/cldr"},{name:"globalize",main:"dist/globalize"},{name:"maquette",main:"dist/maquette.umd"},{name:"maquette-css-transitions",
main:"dist/maquette-css-transitions.umd"},{name:"maquette-jsx",main:"dist/maquette-jsx.umd"},{name:"tslib",main:"tslib"}],map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}}};t.default=function(k){var h={async:k.async,isDebug:k.isDebug,locale:k.locale,baseUrl:k.baseUrl,has:a({},k.has),map:a({},k.map),packages:k.packages&&k.packages.concat()||[],paths:a({},k.paths)};k.hasOwnProperty("async")||
(h.async=!0);k.hasOwnProperty("isDebug")||(h.isDebug=!1);k.baseUrl||(h.baseUrl=t.DEFAULT_CONFIG.baseUrl);t.DEFAULT_CONFIG.packages.forEach(function(f){a:{for(var n=h.packages,u=0;u<n.length;u++)if(n[u].name===f.name)break a;f=a({},f);u=c.removeQueryParameters(g.toUrl(f.name+"/x.js"));u=u.slice(0,u.length-5);f.location=c.makeAbsolute(u);n.push(f)}});k=h.map=h.map||{};for(var d=0,e=Object.keys(t.DEFAULT_CONFIG.map);d<e.length;d++){var l=e[d];k[l]||(k[l]=t.DEFAULT_CONFIG.map[l])}return h}})},"esri/layers/vectorTiles/core/workers/WorkerFallback":function(){define(["require",
"exports","dojo/has","../global","./utils"],function(g,t,a,b,c){var k=function(){return function(){var e=this,l=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(function(f){e[f]=function(){for(var n=[],u=0;u<arguments.length;u++)n[u]=arguments[u];return l[f].apply(l,n)}})}}(),h=b.MutationObserver||b.WebKitMutationObserver,d=function(){if(b.process&&b.process.nextTick)var e=function(n){b.process.nextTick(n)};else if(b.Promise)e=function(n){b.Promise.resolve().then(n)};
else if(h){var l=[],f=document.createElement("div");(new h(function(){for(;0<l.length;)l.shift()()})).observe(f,{attributes:!0});e=function(n){l.push(n);f.setAttribute("queueStatus","1")}}return e}();return function(){function e(){this._dispatcher=new k;this._isInitialized=!1;this._workerPostMessage({type:c.MessageType.HANDSHAKE})}e.prototype.terminate=function(){};Object.defineProperty(e.prototype,"onmessage",{get:function(){return this._onmessageHandler},set:function(l){this._onmessageHandler&&
this.removeEventListener("message",this._onmessageHandler);(this._onmessageHandler=l)&&this.addEventListener("message",l)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"onerror",{get:function(){return this._onerrorHandler},set:function(l){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler);(this._onerrorHandler=l)&&this.addEventListener("error",l)},enumerable:!0,configurable:!0});e.prototype.postMessage=function(l,f){var n=this;d(function(){n._workerMessageHandler(new MessageEvent("message",
{data:l}))})};e.prototype.dispatchEvent=function(l){return this._dispatcher.dispatchEvent(l)};e.prototype.addEventListener=function(l,f,n){this._dispatcher.addEventListener(l,f,n)};e.prototype.removeEventListener=function(l,f,n){this._dispatcher.removeEventListener(l,f,n)};e.prototype._workerPostMessage=function(l,f){var n=this;d(function(){n.dispatchEvent(new MessageEvent("message",{data:l}))})};e.prototype._workerMessageHandler=function(l){var f=this;if(l=c.receiveMessage(l)){var n=l.jobId;switch(l.type){case c.MessageType.CONFIGURE:this._isInitialized||
this._workerPostMessage({type:c.MessageType.CONFIGURED});break;case c.MessageType.OPEN:l=l.modulePath,a("esri-webpack")?g(["esri/core/workers/RemoteClient","esri/views/vectorTiles/WorkerTileHandler","esri/views/2d/layers/features/Pipeline","esri/views/3d/layers/PointCloudWorker","esri/views/3d/layers/SceneLayerWorker","esri/layers/graphics/sources/support/CSVSourceWorker","esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker",l],function(u,p,r,q,m,v,x,z){switch(z){case "esri/views/vectorTiles/WorkerTileHandler":break;
case "esri/views/2d/layers/features/Pipeline":p=r;break;case "esri/views/3d/layers/PointCloudWorker":p=q;break;case "esri/views/3d/layers/SceneLayerWorker":p=m;break;case "esri/layers/graphics/sources/support/CSVSourceWorker":p=v;break;case "esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker":p=x;break;default:p=z}u=u.connect(p);f._workerPostMessage({type:c.MessageType.OPENED,jobId:n,data:u})}):g(["./RemoteClient",l],function(u,p){u=u.connect(p);f._workerPostMessage({type:c.MessageType.OPENED,
jobId:n,data:u})})}}};return e}()})},"esri/layers/vectorTiles/views/vectorTiles/GlyphMosaic":function(){define("require exports dojo/has ../../core/promiseUtils ./Rect ./RectangleBinPack ../webgl/Texture".split(" "),function(g,t,a,b,c,k,h){var d;a("stable-symbol-rendering")&&(d=new Set);return function(){function e(l,f,n){this.height=this.width=0;this._dirties=[];this._glyphData=[];this._currentPage=0;this._glyphIndex={};this._textures=[];this._rangePromises=new Map;this.width=l;this.height=f;this._glyphSource=
n;this._binPack=new k(l-4,f-4);this._glyphData.push(new Uint8Array(l*f));this._dirties.push(!0);this._textures.push(void 0)}e.prototype.getGlyphItems=function(l,f,n){var u=this,p=[],r=this._glyphSource,q=new Set;l=1/256;for(var m=0;m<n.length;m++)q.add(Math.floor(n[m]*l));var v=[];q.forEach(function(x){if(256>=x){var z=f+x;u._rangePromises.has(z)?v.push(u._rangePromises.get(z)):(x=r.getRange(f,x).always(function(){u._rangePromises["delete"](z)}),u._rangePromises.set(z,x),v.push(x))}});return b.all(v).then(function(x){x=
u._glyphIndex[f];x||(x={},u._glyphIndex[f]=x);if(a("stable-symbol-rendering")){d.clear();for(var z=0;z<n.length;z++){var A=n[z];d.add(A)}var C=[];q.forEach(function(ha){C.push(ha)});C.sort();A=[];for(z=0;z<C.length;z++)for(var D=C[z],B=0;256>B;++B)A.push(256*D+B)}else A=n;z=0;for(D=A;z<D.length;z++)if(A=D[z],B=x[A]){if(!a("stable-symbol-rendering")||d.has(A))p[A]={rect:B.rect,metrics:B.metrics,page:B.page}}else{var y=r.getGlyph(f,A);if(y&&y.metrics){B=y.metrics;var w=void 0;if(0===B.width)w=new c(0,
0,0,0);else{var E=B.width+6,F=B.height+6,H=E%4?4-E%4:4,M=F%4?4-F%4:4;1===H&&(H=5);1===M&&(M=5);w=u._binPack.allocate(E+H,F+M);w.isEmpty&&(u._dirties[u._currentPage]||(u._glyphData[u._currentPage]=null),u._currentPage=u._glyphData.length,u._glyphData.push(new Uint8Array(u.width*u.height)),u._dirties.push(!0),u._textures.push(void 0),u._binPack=new k(u.width-4,u.height-4),w=u._binPack.allocate(E+H,F+M));H=u._glyphData[u._currentPage];y=y.bitmap;var R=M=void 0;if(y)for(var V=0;V<F;V++){M=E*V;R=u.width*
(w.y+V+1)+w.x;for(var da=0;da<E;da++)H[R+da+1]=y[M+da]}}x[A]={rect:w,metrics:B,tileIDs:null,page:u._currentPage};if(!a("stable-symbol-rendering")||d.has(A))p[A]={rect:w,metrics:B,page:u._currentPage};u._dirties[u._currentPage]=!0}}return p})};e.prototype.removeGlyphs=function(l){for(var f in this._glyphIndex){var n=this._glyphIndex[f];if(n){var u=void 0,p;for(p in n)if(u=n[p],u.tileIDs["delete"](l),0===u.tileIDs.size){for(var r=this._glyphData[u.page],q=u.rect,m=void 0,v=void 0,x=0;x<q.height;x++)for(m=
this.width*(q.y+x)+q.x,v=0;v<q.width;v++)r[m+v]=0;delete n[p];this._dirties[u.page]=!0}}}};e.prototype.bind=function(l,f,n,u){void 0===u&&(u=0);this._textures[n]||(this._textures[n]=new h(l,{pixelFormat:6406,dataType:5121,width:this.width,height:this.height},new Uint8Array(this.width*this.height)));var p=this._textures[n];p.setSamplingMode(f);this._dirties[n]&&p.setData(this._glyphData[n]);l.bindTexture(p,u);this._dirties[n]=!1};e.prototype.dispose=function(){this._binPack=null;for(var l=0,f=this._textures;l<
f.length;l++){var n=f[l];n&&n.dispose()}this._textures.length=0};return e}()})},"esri/layers/vectorTiles/views/vectorTiles/Rect":function(){define(["require","exports"],function(g,t){return function(){function a(b,c,k,h){void 0===b&&(b=0);void 0===c&&(c=0);void 0===k&&(k=0);void 0===h&&(h=0);this.x=b;this.y=c;this.width=k;this.height=h}Object.defineProperty(a.prototype,"isEmpty",{get:function(){return 0>=this.width||0>=this.height},enumerable:!0,configurable:!0});return a}()})},"esri/layers/vectorTiles/views/vectorTiles/RectangleBinPack":function(){define(["require",
"exports","./Rect"],function(g,t,a){return function(){function b(c,k){this._height=this._width=0;this._free=[];this._width=c;this._height=k;this._free.push(new a(0,0,c,k))}Object.defineProperty(b.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0});b.prototype.allocate=function(c,k){if(c>this._width||k>this._height)return new a;for(var h=null,d=-1,e=0;e<
this._free.length;++e){var l=this._free[e];c<=l.width&&k<=l.height&&(null===h||l.y<=h.y&&l.x<=h.x)&&(h=l,d=e)}if(null===h)return new a;this._free.splice(d,1);h.width<h.height?(h.width>c&&this._free.push(new a(h.x+c,h.y,h.width-c,k)),h.height>k&&this._free.push(new a(h.x,h.y+k,h.width,h.height-k))):(h.width>c&&this._free.push(new a(h.x+c,h.y,h.width-c,h.height)),h.height>k&&this._free.push(new a(h.x,h.y+k,c,h.height-k)));return new a(h.x,h.y,c,k)};b.prototype.release=function(c){for(var k=0;k<this._free.length;++k){var h=
this._free[k];if(h.y===c.y&&h.height===c.height&&h.x+h.width===c.x)h.width+=c.width;else if(h.x===c.x&&h.width===c.width&&h.y+h.height===c.y)h.height+=c.height;else if(c.y===h.y&&c.height===h.height&&c.x+c.width===h.x)h.x=c.x,h.width+=c.width;else if(c.x===h.x&&c.width===h.width&&c.y+c.height===h.y)h.y=c.y,h.height+=c.height;else continue;this._free.splice(k,1);this.release(c)}this._free.push(c)};return b}()})},"esri/layers/vectorTiles/views/vectorTiles/GlyphSource":function(){define(["require","exports",
"../../request","../../core/pbf","../../core/promiseUtils"],function(g,t,a,b,c){var k=function(){function d(e){this._metrics=[];this._bitmaps=[];if(e)for(;e.next();)switch(e.tag()){case 1:for(var l=e.getMessage();l.next();)switch(l.tag()){case 3:for(var f=l.getMessage(),n=void 0,u=void 0,p=void 0,r=void 0,q=void 0,m=void 0,v=void 0;f.next();)switch(f.tag()){case 1:n=f.getUInt32();break;case 2:u=f.getBytes();break;case 3:p=f.getUInt32();break;case 4:r=f.getUInt32();break;case 5:q=f.getSInt32();break;
case 6:m=f.getSInt32();break;case 7:v=f.getUInt32();break;default:f.skip()}n&&(this._metrics[n]={width:p,height:r,left:q,top:m,advance:v},this._bitmaps[n]=u);break;default:l.skip()}break;default:e.skip()}}d.prototype.getMetrics=function(e){return this._metrics[e]};d.prototype.getBitmap=function(e){return this._bitmaps[e]};return d}(),h=function(){function d(){this._ranges=[]}d.prototype.getRange=function(e){return this._ranges[e]};d.prototype.addRange=function(e,l){this._ranges[e]=l};return d}();
return function(){function d(e){this._glyphInfo={};this._baseURL=e}d.prototype.getRange=function(e,l){var f=this._getFontStack(e);if(f.getRange(l))return c.resolve();var n=256*l,u=n+255;e=this._baseURL.replace("{fontstack}",e).replace("{range}",n+"-"+u);return a(e,{callbackParamName:"callback",responseType:"array-buffer"}).then(function(p){f.addRange(l,new k(new b(new Uint8Array(p.data),new DataView(p.data))))}).catch(function(){f.addRange(l,new k)})};d.prototype.getGlyph=function(e,l){if(e=this._getFontStack(e)){var f=
Math.floor(l/256);if(!(256<f)&&(e=e.getRange(f)))return{metrics:e.getMetrics(l),bitmap:e.getBitmap(l)}}};d.prototype._getFontStack=function(e){var l=this._glyphInfo[e];l||(l=this._glyphInfo[e]=new h);return l};return d}()})},"esri/layers/vectorTiles/core/pbf":function(){define(["require","exports"],function(g,t){return function(){function a(b,c,k,h){this._tag=0;this._dataType=99;this._data=b;this._dataView=c;this._pos=k||0;this._end=h||b.byteLength}a.prototype.clone=function(){return new a(this._data,
this._dataView,this._pos,this._end)};a.prototype.pos=function(){return this._pos};a.prototype.next=function(b){for(;;){if(this._pos===this._end)return!1;var c=this._decodeVarint();this._tag=c>>3;this._dataType=c&7;if(!b||b===this._tag)break;this.skip()}return!0};a.prototype.empty=function(){return this._pos>=this._end};a.prototype.tag=function(){return this._tag};a.prototype.getInt32=function(){return this._decodeVarint()};a.prototype.getInt64=function(){return this._decodeVarint()};a.prototype.getUInt32=
function(){var b=4294967295;b=(this._data[this._pos]&127)>>>0;if(128>this._data[this._pos++])return b;b=(b|(this._data[this._pos]&127)<<7)>>>0;if(128>this._data[this._pos++])return b;b=(b|(this._data[this._pos]&127)<<14)>>>0;if(128>this._data[this._pos++])return b;b=(b|(this._data[this._pos]&127)<<21)>>>0;if(128>this._data[this._pos++])return b;b=(b|(this._data[this._pos]&15)<<28)>>>0;if(128>this._data[this._pos++])return b};a.prototype.getUInt64=function(){return this._decodeVarint()};a.prototype.getSInt32=
function(){var b=this.getUInt32();return b>>>1^-(b&1)|0};a.prototype.getSInt64=function(){return this._decodeSVarint()};a.prototype.getBool=function(){var b=0!==this._data[this._pos];this._skip(1);return b};a.prototype.getEnum=function(){return this._decodeVarint()};a.prototype.getFixed64=function(){var b=this._dataView,c=this._pos;b=b.getUint32(c,!0)+4294967296*b.getUint32(c+4,!0);this._skip(8);return b};a.prototype.getSFixed64=function(){var b=this._dataView,c=this._pos;b=b.getUint32(c,!0)+4294967296*
b.getInt32(c+4,!0);this._skip(8);return b};a.prototype.getDouble=function(){var b=this._dataView.getFloat64(this._pos,!0);this._skip(8);return b};a.prototype.getFixed32=function(){var b=this._dataView.getUint32(this._pos,!0);this._skip(4);return b};a.prototype.getSFixed32=function(){var b=this._dataView.getInt32(this._pos,!0);this._skip(4);return b};a.prototype.getFloat=function(){var b=this._dataView.getFloat32(this._pos,!0);this._skip(4);return b};a.prototype.getString=function(){var b=this._getLength(),
c=this._pos;c=this._toString(this._data,c,c+b);this._skip(b);return c};a.prototype.getBytes=function(){var b=this._getLength(),c=this._pos;c=this._toBytes(this._data,c,c+b);this._skip(b);return c};a.prototype.getMessage=function(){var b=this._getLength(),c=this._pos;c=new a(this._data,this._dataView,c,c+b);this._skip(b);return c};a.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);
break;default:throw Error("Invalid data type!");}};a.prototype._skip=function(b){if(this._pos+b>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=b};a.prototype._decodeVarint=function(){var b=this._data,c=this._pos,k=0;if(10<=this._end-c){var h=b[c++];k|=h&127;if(0!==(h&128)&&(h=b[c++],k|=(h&127)<<7,0!==(h&128)&&(h=b[c++],k|=(h&127)<<14,0!==(h&128)&&(h=b[c++],k|=(h&127)<<21,0!==(h&128)&&(h=b[c++],k+=268435456*(h&127),0!==(h&128)&&(h=b[c++],k+=34359738368*(h&127),0!==(h&128)&&
(h=b[c++],k+=4398046511104*(h&127),0!==(h&128)&&(h=b[c++],k+=562949953421312*(h&127),0!==(h&128)&&(h=b[c++],k+=72057594037927936*(h&127),0!==(h&128)&&(h=b[c++],k+=0x7fffffffffffffff*(h&127),0!==(h&128)))))))))))throw Error("Varint too long!");}else{for(var d=1;c!==this._end;){h=b[c];if(0===(h&128))break;++c;k+=(h&127)*d;d*=128}if(c===this._end)throw Error("Varint overrun!");++c;k+=h*d}this._pos=c;return k};a.prototype._decodeSVarint=function(){var b=this._decodeVarint();return b%2?-(b+1)/2:b/2};a.prototype._getLength=
function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};a.prototype._toString=function(b,c,k){var h="",d="";for(k=Math.min(this._end,k);c<k;++c){var e=b[c];e&128?d+="%"+e.toString(16):(h+=decodeURIComponent(d)+String.fromCharCode(e),d="")}d.length&&(h+=decodeURIComponent(d));return h};a.prototype._toBytes=function(b,c,k){k=Math.min(this._end,k);return new Uint8Array(b.buffer,c,k-c)};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/SpriteMosaic":function(){define("require exports ./GeometryUtils ./Rect ./RectangleBinPack ../webgl/Texture".split(" "),
function(g,t,a,b,c,k){return function(){function h(d,e,l){void 0===l&&(l=0);this._size=[];this._mosaicsData=[];this._textures=[];this._dirties=[];this._pageHeight=this._pageWidth=this._currentPage=this._maxItemSize=0;this._mosaicRects={};this.pixelRatio=1;this._pageWidth=d;this._pageHeight=e;0<l&&(this._maxItemSize=l);this._binPack=new c(d-4,e-4)}h.prototype.getWidth=function(d){return d>=this._size.length?-1:this._size[d][0]};h.prototype.getHeight=function(d){return d>=this._size.length?-1:this._size[d][1]};
h.prototype.setSpriteSource=function(d){this.dispose();this.pixelRatio=d.devicePixelRatio;if(0===this._mosaicsData.length){this._binPack=new c(this._pageWidth-4,this._pageHeight-4);var e=new Uint32Array(Math.floor(this._pageWidth)*Math.floor(this._pageHeight));this._mosaicsData[0]=e;this._dirties.push(!0);this._size.push([this._pageWidth,this._pageHeight]);this._textures.push(void 0)}this._sprites=d};h.prototype.getSpriteItem=function(d,e){void 0===e&&(e=!1);var l=this._mosaicRects[d];if(l)return l;
if(!this._sprites||"loaded"!==this._sprites.loadStatus)return null;l=this._sprites.getSpriteInfo(d);if(!l||!l.width||!l.height||0>l.width||0>l.height)return null;var f=l.width,n=l.height,u=this._allocateImage(f,n),p=u[0],r=u[1];if(0>=p.width)return null;this._copy(p,l,r,u[2],e);l={rect:p,width:f,height:n,anchorX:0,anchorY:0,sdf:l.sdf,pixelRatio:l.pixelRatio,page:r};return this._mosaicRects[d]=l};h.prototype.preloadSpriteItems=function(){for(var d=0,e=this._sprites.spriteNames;d<e.length;d++)this.getSpriteItem(e[d],
!0)};h.prototype.getSpriteItems=function(d){for(var e={},l=0;l<d.length;l++){var f=d[l];e[f]=this.getSpriteItem(f)}return e};h.prototype.getMosaicItemPosition=function(d,e){e=(d=this.getSpriteItem(d,e))&&d.rect;if(!e)return null;e.width=d.width;e.height=d.height;return{size:[d.width,d.height],tl:[(e.x+2)/this._size[d.page][0],(e.y+2)/this._size[d.page][1]],br:[(e.x+2+d.width)/this._size[d.page][0],(e.y+2+d.height)/this._size[d.page][1]],page:d.page}};h.prototype.bind=function(d,e,l,f){void 0===l&&
(l=0);void 0===f&&(f=0);this._textures[l]||(this._textures[l]=new k(d,{pixelFormat:6408,dataType:5121,width:this._size[l][0],height:this._size[l][1]},new Uint8Array(this._mosaicsData[l].buffer)));var n=this._textures[l];n.setSamplingMode(e);this._dirties[l]&&n.setData(new Uint8Array(this._mosaicsData[l].buffer));d.bindTexture(n,f);this._dirties[l]=!1};h._copyBits=function(d,e,l,f,n,u,p,r,q,m,v){var x=f*e+l;p=r*u+p;if(v)for(p-=u,v=-1;v<=m;v++,x=((v+m)%m+f)*e+l,p+=u)for(r=-1;r<=q;r++)n[p+r]=d[x+(r+
q)%q];else for(v=0;v<m;v++){for(r=0;r<q;r++)n[p+r]=d[x+r];x+=e;p+=u}};h.prototype._copy=function(d,e,l,f,n,u){if(this._sprites&&"loaded"===this._sprites.loadStatus&&!(l>=this._mosaicsData.length)){var p=new Uint32Array(u?u.buffer:this._sprites.image.buffer);h._copyBits(p,u?e.width:this._sprites.width,e.x,e.y,this._mosaicsData[l],f[0],d.x+2,d.y+2,e.width,e.height,n);this._dirties[l]=!0}};h.prototype._allocateImage=function(d,e){d+=2;e+=2;var l=Math.max(d,e);if(this._maxItemSize&&this._maxItemSize<
l){l=Math.pow(2,Math.ceil(a.log2(d)));var f=Math.pow(2,Math.ceil(a.log2(e)));d=new b(0,0,d,e);this._mosaicsData.push(new Uint32Array(l*f));this._dirties.push(!0);this._size.push([l,f]);this._textures.push(void 0);return[d,this._mosaicsData.length-1,[l,f]]}l=d%4?4-d%4:4;f=e%4?4-e%4:4;1===l&&(l=5);1===f&&(f=5);l=this._binPack.allocate(d+l,e+f);return 0>=l.width?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*
this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),this._binPack=new c(this._pageWidth-4,this._pageHeight-4),this._allocateImage(d,e)):[l,this._currentPage,[this._pageWidth,this._pageHeight]]};h.prototype.dispose=function(){this._binPack=null;this._mosaicRects={};for(var d=0,e=this._textures;d<e.length;d++){var l=e[d];l&&l.dispose()}this._textures.length=0};return h}()})},"esri/layers/vectorTiles/views/vectorTiles/SpriteSource":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper dojo/Deferred ../../kernel ../../request ../../core/promiseUtils ../../core/urlUtils".split(" "),
function(g,t,a,b,c,k,h,d,e){return function(){function l(f,n){this.baseURL=f;this.devicePixelRatio=n;this._isRetina=!1;this._spritesData={};this.height=this.width=this.image=null;this.loadStatus="not-loaded"}Object.defineProperty(l.prototype,"spriteNames",{get:function(){var f=[],n;for(n in this._spritesData)f.push(n);f.sort();return f},enumerable:!0,configurable:!0});l.prototype.getSpriteInfo=function(f){return this._spritesData[f]};l.prototype.load=function(){var f=this;this.loadStatus="loading";
return this.baseURL?this._loadSprites().then(function(){f.loadStatus="loaded";return f}).catch(function(n){f.loadStatus="failed";return f}):d.resolve(this)};l.prototype._loadSprites=function(){var f=this;this._isRetina=1.15<this.devicePixelRatio?!0:!1;var n=this.baseURL,u=this._isRetina?"@2x":"";return h(n+u+".json",{callbackParamName:"callback",responseType:"json"}).then(function(p){var r=Object.keys(p.data);if(!r||0===r.length||1===r.length&&"_ssl"===r[0])return d.resolve(null);f._spritesData=p.data;
var q=new c,m=new Image;m.crossOrigin="anonymous";m.onload=function(){m.onload=null;f.width=m.width;f.height=m.height;var v=document.createElement("canvas");v.width=m.width;v.height=m.height;v=v.getContext("2d");v.drawImage(m,0,0,m.width,m.height);v=v.getImageData(0,0,m.width,m.height);v=new Uint8Array(v.data);for(var x,z=0;z<v.length;z+=4)x=v[z+3]/255,v[z]*=x,v[z+1]*=x,v[z+2]*=x;f.image=v;q.resolve()};m.onerror=function(){f._spritesData=null;q.reject()};p=""+n+u+".png";k.id&&(r=k.id.findCredential(p))&&
r.token&&(p+="?token\x3d"+r.token);m.src=e.addProxy(p);return q})};return l}()})},"esri/layers/vectorTiles/views/vectorTiles/TileIndex":function(){define(["require","exports","../../core/promiseUtils","../../layers/support/TilemapCache","../2d/tiling/TileKey"],function(g,t,a,b,c){return function(){function k(h){if(h instanceof b)this._tilemapCache=h;else if(h&&"index"in h)this._tilemap=h.index;else throw Error("Invalid tilemap!");}k.prototype.dataKey=function(h){if(this._tilemapCache){var d=h.level,
e=h.row,l=h.col,f=new c(h);return this._tilemapCache.fetchAvailabilityUpsample(d,e,l,f).then(function(){return f}).catch(function(n){if(n&&"cancel"===n.dojoType)throw n;f.level=d;f.row=e;f.col=l;return f})}return this._getIndexedDataKey(h)};k.prototype.forEach=function(h,d,e,l,f){this._callback=f;this._maxLevel=d+h;this._forEach(this._tilemap,d,e,l)};k.prototype._forEach=function(h,d,e,l){0!==h&&(this._callback(d,e,l),d!==this._maxLevel&&"object"===typeof h&&(this._forEach(h[0],d+1,2*e,2*l),this._forEach(h[1],
d+1,2*e,2*l+1),this._forEach(h[2],d+1,2*e+1,2*l),this._forEach(h[3],d+1,2*e+1,2*l+1)))};k.prototype._getIndexedDataKey=function(h){var d=[h];if(0>h.level||0>h.row||0>h.col||0<h.row>>h.level||0<h.col>>h.level)return a.resolve(null);for(;0!==h.level;)h=new c(h.level-1,h.row>>1,h.col>>1,h.world),d.push(h);h=this._tilemap;var e=d.pop();if(1===h)return a.resolve(e);for(;d.length;){var l=d.pop();var f=(l.col&1)+((l.row&1)<<1);if(h)if(0===h[f]){e=null;break}else if(1===h[f]){e=l;break}else e=l,h=h[f]}return a.resolve(e)};
return k}()})},"esri/layers/vectorTiles/views/2d/engine/StageGL":function(){define("require exports ../../../core/tsSupport/extendsHelper dojo/has ../../../core/promiseUtils ./Container ../engine/webgl/Fader ./webgl/BitBlitRenderer ./webgl/enums ./webgl/WGLPainter ./webgl/shaders/glShaderSnippets ../libs/gl-matrix/common ../libs/gl-matrix/mat2d ../libs/gl-matrix/vec2 ../../support/screenshotUtils ../../webgl/BufferObject ../../webgl/context-util ../../webgl/FramebufferObject ../../webgl/Program ../../webgl/RenderingContext ../../webgl/VertexArrayObject".split(" "),
function(g,t,a,b,c,k,h,d,e,l,f,n,u,p,r,q,m,v,x,z,A){function C(B){return{state:B.state,pixelRatio:B.pixelRatio,stationary:B.stationary}}var D={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"};return function(B){function y(){var w=null!==B&&B.apply(this,arguments)||this;w._clipData=new Float32Array(8);w._upperLeft=p.create();w._upperRight=p.create();w._lowerLeft=p.create();w._lowerRight=p.create();w._mat2=u.create();w._clipRendererInitialized=!1;w._contextVersion=null;w._labelFader=new h.default(w);
return w}a(y,B);Object.defineProperty(y.prototype,"glPainter",{get:function(){return this._painter},enumerable:!0,configurable:!0});y.prototype.fadeInLabels=function(){this._labelFader.reset();this.requestRender()};y.prototype.createElement=function(){var w=document.createElement("canvas");w.setAttribute("class","esri-display-object");return w};y.prototype.setElement=function(w){this.element=w};y.prototype.useContextVersion=function(w){this._renderingContext||(this._contextVersion=w)};y.prototype.attach=
function(w){if(this.attached)return!0;this._resizeCanvas(w);var E=m.createContextOrErrorHTML(this.element,{alpha:!0,antialias:!1,depth:!0,stencil:!0},this._contextVersion);this._renderingContext=new z(E);this._contextVersion=this._renderingContext.contextVersion;this.attached=!0;this._cachedRenderParams=C(w);this._painter||(this._painter=new l.default,this._painter.initialize(this._renderingContext));return B.prototype.attach.call(this,w)};y.prototype.detach=function(w){B.prototype.detach.call(this,
w);this._boundFBO=null;this._clipFBO&&(this._clipFBO.dispose(),this._clipFBO=null);this._labelsFBO1&&(this._labelsFBO1.dispose(),this._labelsFBO1=null);this._labelsFBO2&&(this._labelsFBO2.dispose(),this._labelsFBO2=null);this._blitRenderer&&(this._blitRenderer.dispose(),this._blitRenderer=null);this._clipVAO&&(this._clipVAO.dispose(),this._clipVBO=this._clipVAO=null);this._painter&&(this._painter.dispose(),this._painter=null);this._clipStencilProgram&&(this._clipStencilProgram.dispose(),this._clipStencilProgram=
null);this._renderingContext&&(this._renderingContext.dispose(),this._renderingContext=null);this._cachedRenderParams=null};y.prototype.renderChildren=function(w){var E=this.children;w.drawPhase=e.WGLDrawPhase.FILL|e.WGLDrawPhase.LINE|e.WGLDrawPhase.MARKER|e.WGLDrawPhase.TEXT;for(var F=E.length,H=0;H<F;H++){var M=E[H];M.attached&&this.renderChild(M,w)}if(b("esri-featurelayer-webgl-labeling")){var R=w.context,V=R.getBoundFramebufferObject();R.bindFramebuffer(this._labelsFBO2);H=w.stationary;R.setClearColor(0,
0,0,H?0:1);R.clear(R.gl.COLOR_BUFFER_BIT);if(H)for(w.drawPhase=e.WGLDrawPhase.LABEL_ALPHA,w.labelFBO=this._labelsFBO1,w.labelStep=this._labelFader.step(),H=0;H<F;H++)M=E[H],M.attached&&this.renderChild(M,w);else this._labelFader.reset();R.bindFramebuffer(V);w.labelFBO=this._labelsFBO2;w.drawPhase=e.WGLDrawPhase.LABEL;for(H=0;H<F;H++)M=E[H],M.attached&&this.renderChild(M,w);w=this._labelsFBO2;this._labelsFBO2=this._labelsFBO1;this._labelsFBO1=w}};y.prototype.beforeRenderChildren=function(w,E){w=E.context;
var F=E.state,H=E.pixelRatio;if(E=this._painter){w.enforceState();E.update(F,H);var M=F.width;E=F.height;var R=F.rotation;M=Math.round(M*H);E=Math.round(E*H);this._boundFBO=w.getBoundFramebufferObject();!b("esri-featurelayer-webgl-labeling")||this._labelsFBO1&&this._labelsFBO1.width===M&&this._labelsFBO1.height===E||(this._labelsFBO1&&(this._labelsFBO1.dispose(),this._labelsFBO2.dispose()),this._labelsFBO1=v.createWithAttachments(w,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,samplingMode:9728,
wrapMode:33071,width:M,height:E},{colorTarget:0,depthStencilTarget:0}),w.bindFramebuffer(this._labelsFBO1),w.setDepthWriteEnabled(!0),w.setStencilWriteMask(255),w.setClearColor(0,0,0,0),w.setClearDepth(1),w.setClearStencil(0),w.clear(w.gl.COLOR_BUFFER_BIT|w.gl.DEPTH_BUFFER_BIT|w.gl.STENCIL_BUFFER_BIT),w.setDepthWriteEnabled(!1),w.bindFramebuffer(this._boundFBO),this._labelsFBO2=v.createWithAttachments(w,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,
width:M,height:E},{colorTarget:0,depthStencilTarget:0}));if(F.spatialReference&&(F.spatialReference._isWrappable?F.spatialReference._isWrappable():F.spatialReference.isWrappable)){var V=n.toRadian(R),da=Math.abs(Math.cos(V)),ha=Math.abs(Math.sin(V)),fa=Math.round(F.worldScreenWidth);if(Math.round(M*da+E*ha)<=fa)this._clipFrame=!1;else{this._clipFBO&&this._clipFBO.width===M&&this._clipFBO.height===E||(this._clipFBO=new v(w,{colorTarget:0,depthStencilTarget:3,width:M,height:E}));var X=.5*M,ca=.5*E;
F=1/M;var Q=1/E;H*=.5*fa;var U=.5*(M*ha+E*da);M=this._upperLeft;da=this._upperRight;ha=this._lowerLeft;fa=this._lowerRight;p.set(M,-H,-U);p.set(da,H,-U);p.set(ha,-H,U);p.set(fa,H,U);u.identity(this._mat2);u.translate(this._mat2,this._mat2,[X,ca]);0!==R&&u.rotate(this._mat2,this._mat2,V);p.transformMat2d(M,M,this._mat2);p.transformMat2d(da,da,this._mat2);p.transformMat2d(ha,ha,this._mat2);p.transformMat2d(fa,fa,this._mat2);R=this._clipData;R.set([2*ha[0]*F-1,2*(E-ha[1])*Q-1,2*fa[0]*F-1,2*(E-fa[1])*
Q-1,2*M[0]*F-1,2*(E-M[1])*Q-1,2*da[0]*F-1,2*(E-da[1])*Q-1]);this._clipRendererInitialized||this._initializeClipRenderer(w);this._clipVBO.setData(R);this._boundFBO=w.getBoundFramebufferObject();w.bindFramebuffer(this._clipFBO);w.setDepthWriteEnabled(!0);w.setStencilWriteMask(255);w.setClearColor(0,0,0,0);w.setClearDepth(1);w.setClearStencil(0);w.clear(w.gl.COLOR_BUFFER_BIT|w.gl.DEPTH_BUFFER_BIT|w.gl.STENCIL_BUFFER_BIT);w.setDepthWriteEnabled(!1);this._clipFrame=!0}}else this._clipFrame=!1}};y.prototype.afterRenderChildren=
function(w,E){this._clipFrame&&this._clipRendererInitialized&&(w=this._renderingContext,w.bindFramebuffer(this._boundFBO),this._boundFBO=null,w.bindVAO(this._clipVAO),w.bindProgram(this._clipStencilProgram),w.setDepthWriteEnabled(!1),w.setDepthTestEnabled(!1),w.setStencilTestEnabled(!0),w.setBlendingEnabled(!1),w.setColorMask(!1,!1,!1,!1),w.setStencilOp(7680,7680,7681),w.setStencilWriteMask(255),w.setStencilFunction(519,1,255),w.drawElements(4,6,5123,0),w.bindVAO(),w.setColorMask(!0,!0,!0,!0),w.setBlendingEnabled(!0),
w.setStencilFunction(514,1,255),this._blitRenderer.render(w,this._clipFBO.colorTexture,9728,1),w.setStencilTestEnabled(!1))};y.prototype.doRender=function(w){var E=this.element.style;this.visible?(E.display="block",E.opacity=""+this.opacity,this._resizeCanvas(w),B.prototype.doRender.call(this,w),this._cachedRenderParams=C(w)):E.display="none"};y.prototype.takeScreenshot=function(w){void 0===w&&(w={});var E=w.pixelRatio||1;this._cachedRenderParams.pixelRatio=E;var F=Math.round(E*this._cachedRenderParams.state.width),
H=Math.round(E*this._cachedRenderParams.state.height),M=0,R=0,V=F,da=H,ha=F,fa=H;if(ha=w.area)M=Math.round(E*ha.x),R=Math.round(E*ha.y),V=Math.round(E*ha.width),da=Math.round(E*ha.height);void 0!==w.width&&void 0!==w.height?(ha=w.width/w.height,da*ha<V?(ha*=da,M+=Math.floor((V-ha)/2),V=Math.floor(ha)):(ha=V/ha,R+=Math.floor((da-ha)/2),da=Math.floor(ha)),ha=w.width,fa=w.height):(ha=V,fa=da);E=document.createElement("canvas");E.width=ha;E.height=fa;var X=E.getContext("2d"),ca=new Uint8Array(V*da*4),
Q=this._renderingContext,U=v.create(Q,{colorTarget:1,depthStencilTarget:3,width:F,height:H});Q.bindFramebuffer(U);Q.setViewport(0,0,F,H);var ia=this._cachedRenderParams,T=this._renderingContext.gl;this._renderingContext.setClearColor(0,0,0,0);this._renderingContext.setClearDepth(1);this._renderingContext.setClearStencil(0);this._renderingContext.clear(T.COLOR_BUFFER_BIT|T.DEPTH_BUFFER_BIT|T.STENCIL_BUFFER_BIT);ia.context=this._renderingContext;ia.painter=this._painter;this.beforeRenderChildren(ia,
ia);if(void 0!==w.rotation&&null!==w.rotation){T=ia.state;var Y=T.clone();Y.viewpoint.rotation=w.rotation;ia.state=Y;this.renderChildren(ia);ia.state=T}else this.renderChildren(ia);this.afterRenderChildren(ia,ia);U.readPixels(M,H-(R+da),V,da,6408,5121,ca);Q.bindFramebuffer();Q=X.getImageData(0,0,ha,fa);if(0!==M||0!==R||V!==F||da!==H||ha!==F||fa!==H)r.resampleHermite(ca,V,da,Q.data,ha,fa,!0);else{R=da-1;da=0;U=4*V;for(Y=T=M=H=F=V=ia=void 0;da<R;){T=da*U;Y=R*U;for(ia=0;ia<U;ia+=4)V=ca[T+ia],F=ca[T+
ia+1],H=ca[T+ia+2],M=ca[T+ia+3],ca[T+ia]=ca[Y+ia],ca[T+ia+1]=ca[Y+ia+1],ca[T+ia+2]=ca[Y+ia+2],ca[T+ia+3]=ca[Y+ia+3],ca[Y+ia]=V,ca[Y+ia+1]=F,ca[Y+ia+2]=H,ca[Y+ia+3]=M;da++;R--}V=Q.data;F=ca.length;for(R=0;R<F;R++)V[R]=ca[R]}ca=Q.data;da=ca.length;for(R=0;R<da;R+=4)M=ca[R+3],0<M&&(H=M/255,V=Math.floor(ca[R+0]/H),F=Math.floor(ca[R+1]/H),H=Math.floor(ca[R+2]/H),ca[R+0]=255>=V?V:255,ca[R+1]=255>=F?F:255,ca[R+2]=255>=H?H:255);X.putImageData(Q,0,0);X=D[w.format?w.format.toLowerCase():"png"];ca=1;void 0!==
w.quality&&(ca=w.quality/100);w=E.toDataURL(X,ca);return c.resolve({dataURL:w,x:0,y:0,width:ha,height:fa})};y.prototype.prepareChildrenRenderParameters=function(w){if(!this.attached||!this._renderingContext)return null;w=C(w);var E=this._renderingContext,F=E.gl;E.setDepthWriteEnabled(!0);E.setStencilWriteMask(255);E.setClearColor(0,0,0,0);E.setClearDepth(1);E.setClearStencil(0);E.clear(F.COLOR_BUFFER_BIT|F.DEPTH_BUFFER_BIT|F.STENCIL_BUFFER_BIT);E.setViewport(0,0,this.element.width,this.element.height);
E.setDepthWriteEnabled(!1);w.context=E;w.painter=this._painter;return w};y.prototype.attachChild=function(w,E){return w.attach(E)};y.prototype.detachChild=function(w,E){return w.detach(E)};y.prototype.renderChild=function(w,E){return w.processRender(E)};y.prototype._resizeCanvas=function(w){var E=this.element,F=E.style,H=w.state,M=w.pixelRatio;w=Math.round(H.width*M);M=Math.round(H.height*M);if(E.width!==w||E.height!==M)E.width=w,E.height=M;F.width=H.width+"px";F.height=H.height+"px"};y.prototype._initializeClipRenderer=
function(w){if(this._clipRendererInitialized)return!0;this._blitRenderer=new d;var E={a_pos:0},F=new x(w,f.stencilVS,f.stencilFS,E);if(!F)return!1;var H=q.createVertex(w,35040,32),M=new Uint16Array([0,1,2,2,1,3]);M=q.createIndex(w,35044,M);w=new A(w,E,{geometry:[{name:"a_pos",count:2,type:5126,offset:0,stride:8,normalized:!1,divisor:0}]},{geometry:H},M);this._clipStencilProgram=F;this._clipVBO=H;this._clipVAO=w;return this._clipRendererInitialized=!0};return y}(k)})},"esri/layers/vectorTiles/views/2d/engine/webgl/Fader":function(){define(["require",
"exports"],function(g,t){Object.defineProperty(t,"__esModule",{value:!0});g=function(){function a(b,c){void 0===c&&(c=250);this.duration=c;this._startTime=this._lastTime=0;this._parent=b}a.prototype.reset=function(){0===this._lastTime;this._startTime=performance.now()};a.prototype.step=function(){var b=performance.now();if(0===this._lastTime)return this._lastTime=b,this._parent.requestRender(),0;var c=b-this._lastTime;this._lastTime=b;b-this._startTime<2*this.duration&&this._parent.requestRender();
return c/this.duration};return a}();t.default=g})},"esri/layers/vectorTiles/views/2d/engine/webgl/BitBlitRenderer":function(){define("require exports ./shaders/glShaderSnippets ../../../webgl/BufferObject ../../../webgl/Program ../../../webgl/VertexArrayObject".split(" "),function(g,t,a,b,c,k){return function(){function h(){this._initialized=!1}h.prototype.dispose=function(){this._program&&(this._program.dispose(),this._program=null);this._vertexArrayObject&&(this._vertexArrayObject.dispose(),this._vertexArrayObject=
null)};h.prototype.render=function(d,e,l,f){d&&(this._initialized||this._initialize(d),d.setBlendFunctionSeparate(1,771,1,771),d.bindVAO(this._vertexArrayObject),d.bindProgram(this._program),e.setSamplingMode(l),d.bindTexture(e,0),this._program.setUniform1i("u_tex",0),this._program.setUniform1f("u_opacity",f),d.drawArrays(5,0,4),d.bindVAO())};h.prototype._initialize=function(d){if(this._initialized)return!0;var e={a_pos:0,a_tex:1},l=new c(d,a.bitblitVS,a.bitblitFS,e);if(!l)return!1;var f=new Int8Array(16);
f[0]=-1;f[1]=-1;f[2]=0;f[3]=0;f[4]=1;f[5]=-1;f[6]=1;f[7]=0;f[8]=-1;f[9]=1;f[10]=0;f[11]=1;f[12]=1;f[13]=1;f[14]=1;f[15]=1;d=new k(d,e,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:4,normalized:!1,divisor:0},{name:"a_tex",count:2,type:5120,offset:2,stride:4,normalized:!1,divisor:0}]},{geometry:b.createVertex(d,35044,f)});this._program=l;this._vertexArrayObject=d;return this._initialized=!0};return h}()})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/common":function(){define([],function(){if(!g)var g=
1E-6;if(!t)var t="undefined"!==typeof Float32Array?Float32Array:Array;if(!a)var a=Math.random;var b={GLMAT_EPSILON:g,GLMAT_ARRAY_TYPE:t,GLMAT_RANDOM:a,setMatrixArrayType:function(h){b.GLMAT_ARRAY_TYPE=h}},c=Math.PI/180,k=180/Math.PI;b.toRadian=function(h){return h*c};b.toDegree=function(h){return h*k};b.setMatrixArrayType(Array);return b})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/mat2d":function(){define(["./common"],function(g){var t=g.GLMAT_ARRAY_TYPE;g={create:function(){var a=new t(6);
a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var b=new t(6);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},invert:function(a,b){var c=b[0],k=b[1],h=b[2],d=b[3],e=b[4];b=b[5];var l=c*d-k*h;if(!l)return null;l=1/l;a[0]=d*l;a[1]=-k*l;a[2]=-h*l;a[3]=c*l;a[4]=(h*b-d*e)*l;a[5]=(k*e-c*b)*l;return a},
determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,b,c){var k=b[0],h=b[1],d=b[2],e=b[3],l=b[4];b=b[5];var f=c[0],n=c[1],u=c[2],p=c[3],r=c[4];c=c[5];a[0]=k*f+d*n;a[1]=h*f+e*n;a[2]=k*u+d*p;a[3]=h*u+e*p;a[4]=k*r+d*c+l;a[5]=h*r+e*c+b;return a}};g.mul=g.multiply;g.rotate=function(a,b,c){var k=b[0],h=b[1],d=b[2],e=b[3],l=b[4];b=b[5];var f=Math.sin(c);c=Math.cos(c);a[0]=k*c+d*f;a[1]=h*c+e*f;a[2]=k*-f+d*c;a[3]=h*-f+e*c;a[4]=l;a[5]=b;return a};g.scale=function(a,b,c){var k=b[1],h=b[2],
d=b[3],e=b[4],l=b[5],f=c[0];c=c[1];a[0]=b[0]*f;a[1]=k*f;a[2]=h*c;a[3]=d*c;a[4]=e;a[5]=l;return a};g.translate=function(a,b,c){var k=b[0],h=b[1],d=b[2],e=b[3],l=b[4];b=b[5];var f=c[0];c=c[1];a[0]=k;a[1]=h;a[2]=d;a[3]=e;a[4]=k*f+d*c+l;a[5]=h*f+e*c+b;return a};g.fromRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=-c;a[3]=b;a[4]=0;a[5]=0;return a};g.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=b[1];a[4]=0;a[5]=0;return a};g.fromTranslation=function(a,b){a[0]=1;a[1]=
0;a[2]=0;a[3]=1;a[4]=b[0];a[5]=b[1];return a};g.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};g.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};return g})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/vec2":function(){define(["./common"],function(g){var t=g.GLMAT_ARRAY_TYPE,a=g.GLMAT_RANDOM,b={create:function(){var c=new t(2);c[0]=0;c[1]=0;return c},clone:function(c){var k=
new t(2);k[0]=c[0];k[1]=c[1];return k},fromValues:function(c,k){var h=new t(2);h[0]=c;h[1]=k;return h},copy:function(c,k){c[0]=k[0];c[1]=k[1];return c},set:function(c,k,h){c[0]=k;c[1]=h;return c},add:function(c,k,h){c[0]=k[0]+h[0];c[1]=k[1]+h[1];return c},subtract:function(c,k,h){c[0]=k[0]-h[0];c[1]=k[1]-h[1];return c}};b.sub=b.subtract;b.multiply=function(c,k,h){c[0]=k[0]*h[0];c[1]=k[1]*h[1];return c};b.mul=b.multiply;b.divide=function(c,k,h){c[0]=k[0]/h[0];c[1]=k[1]/h[1];return c};b.div=b.divide;
b.min=function(c,k,h){c[0]=Math.min(k[0],h[0]);c[1]=Math.min(k[1],h[1]);return c};b.max=function(c,k,h){c[0]=Math.max(k[0],h[0]);c[1]=Math.max(k[1],h[1]);return c};b.scale=function(c,k,h){c[0]=k[0]*h;c[1]=k[1]*h;return c};b.scaleAndAdd=function(c,k,h,d){c[0]=k[0]+h[0]*d;c[1]=k[1]+h[1]*d;return c};b.distance=function(c,k){var h=k[0]-c[0];c=k[1]-c[1];return Math.sqrt(h*h+c*c)};b.dist=b.distance;b.squaredDistance=function(c,k){var h=k[0]-c[0];c=k[1]-c[1];return h*h+c*c};b.sqrDist=b.squaredDistance;b.length=
function(c){var k=c[0];c=c[1];return Math.sqrt(k*k+c*c)};b.len=b.length;b.squaredLength=function(c){var k=c[0];c=c[1];return k*k+c*c};b.sqrLen=b.squaredLength;b.negate=function(c,k){c[0]=-k[0];c[1]=-k[1];return c};b.inverse=function(c,k){c[0]=1/k[0];c[1]=1/k[1];return c};b.normalize=function(c,k){var h=k[0],d=k[1];h=h*h+d*d;0<h&&(h=1/Math.sqrt(h),c[0]=k[0]*h,c[1]=k[1]*h);return c};b.dot=function(c,k){return c[0]*k[0]+c[1]*k[1]};b.cross=function(c,k,h){k=k[0]*h[1]-k[1]*h[0];c[0]=c[1]=0;c[2]=k;return c};
b.lerp=function(c,k,h,d){var e=k[0];k=k[1];c[0]=e+d*(h[0]-e);c[1]=k+d*(h[1]-k);return c};b.random=function(c,k){k=k||1;var h=2*a()*Math.PI;c[0]=Math.cos(h)*k;c[1]=Math.sin(h)*k;return c};b.transformMat2=function(c,k,h){var d=k[0];k=k[1];c[0]=h[0]*d+h[2]*k;c[1]=h[1]*d+h[3]*k;return c};b.transformMat2d=function(c,k,h){var d=k[0];k=k[1];c[0]=h[0]*d+h[2]*k+h[4];c[1]=h[1]*d+h[3]*k+h[5];return c};b.transformMat3=function(c,k,h){var d=k[0];k=k[1];c[0]=h[0]*d+h[3]*k+h[6];c[1]=h[1]*d+h[4]*k+h[7];return c};
b.transformMat4=function(c,k,h){var d=k[0];k=k[1];c[0]=h[0]*d+h[4]*k+h[12];c[1]=h[1]*d+h[5]*k+h[13];return c};b.forEach=function(){var c=b.create();return function(k,h,d,e,l,f){h||(h=2);d||(d=0);for(e=e?Math.min(e*h+d,k.length):k.length;d<e;d+=h)c[0]=k[d],c[1]=k[d+1],l(c,c,f),k[d]=c[0],k[d+1]=c[1];return k}}();b.str=function(c){return"vec2("+c[0]+", "+c[1]+")"};return b})},"esri/layers/vectorTiles/views/support/screenshotUtils":function(){define(["require","exports","../../core/tsSupport/assignHelper"],
function(g,t,a){Object.defineProperty(t,"__esModule",{value:!0});t.adjustScreenshotSettings=function(b,c){b=a({format:"png",quality:100},b);if(b.includePadding){var k=c.width;var h=c.height}else k=c.width-c.padding.left-c.padding.right,h=c.height-c.padding.top-c.padding.bottom;var d=k/h;void 0!==b.width&&void 0===b.height?b.height=b.width/d:void 0!==b.height&&void 0===b.width&&(b.width=d*b.height);void 0!==b.height&&(b.height=Math.floor(b.height));void 0!==b.width&&(b.width=Math.floor(b.width));b.area||
b.includePadding||(b.area={x:c.padding.left,y:c.padding.top,width:k,height:h});return b};t.resampleHermite=function(b,c,k,h,d,e,l){void 0===l&&(l=!0);var f=c/d;k/=e;for(var n=Math.ceil(f/2),u=Math.ceil(k/2),p=0;p<e;p++)for(var r=0;r<d;r++){for(var q=4*(r+(l?e-p-1:p)*d),m=0,v=0,x=0,z=0,A=0,C=0,D=0,B=(p+.5)*k,y=Math.floor(p*k);y<(p+1)*k;y++){var w=Math.abs(B-(y+.5))/u,E=(r+.5)*f;w*=w;for(var F=Math.floor(r*f);F<(r+1)*f;F++){var H=Math.abs(E-(F+.5))/n;m=Math.sqrt(w+H*H);-1<=m&&1>=m&&(m=2*m*m*m-3*m*m+
1,0<m&&(H=4*(F+y*c),D+=m*b[H+3],x+=m,255>b[H+3]&&(m=m*b[H+3]/250),z+=m*b[H],A+=m*b[H+1],C+=m*b[H+2],v+=m))}}h[q]=z/v;h[q+1]=A/v;h[q+2]=C/v;h[q+3]=D/x}}})},"esri/layers/vectorTiles/views/webgl/RenderingContext":function(){define("require exports dojo/has ./enums ./InstanceCounter ./capabilities/isWebGL2Context ./capabilities/load".split(" "),function(g,t,a,b,c,k,h){return function(){function d(e,l){this.gl=null;this._blendEnabled=!1;this._blendColorState={r:0,g:0,b:0,a:0};this._blendFunctionState=
{srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,modeAlpha:32774};this._colorMaskState={r:!0,g:!0,b:!0,a:!0};this._polygonCullingEnabled=!1;this._cullFace=1029;this._frontFace=2305;this._scissorTestEnabled=!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=!1;this._depthFunction=513;this._clearDepth=1;this._depthWriteEnabled=!0;this._depthRange={zNear:0,zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=this._stencilTestEnabled=!1;this._polygonOffset=
[0,0];this._stencilFunction={face:1032,func:519,ref:0,mask:1};this._clearStencil=0;this._stencilWriteMask=1;this._stencilOperation={face:1032,fail:7680,zFail:7680,zPass:7680};this._lineWidth=1;this._clearColor={r:0,g:0,b:0,a:0};this._activeRenderbuffer=this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=this._activeShaderProgram=null;this._activeTextureUnit=0;this._textureUnitMap={};this.contextVersion=k.default(e)?"webgl2":"webgl";this.gl=e;e instanceof WebGLRenderingContext&&
this.gl.getExtension("OES_element_index_uint");this._capabilities=h.loadCapabilities(e,l);e=this.gl.getParameter(this.gl.VIEWPORT);this._viewport={x:e[0],y:e[1],width:e[2],height:e[3]};e=this.capabilities.textureFilterAnisotropic;this._parameters={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:e?this.gl.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY):
void 0,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS)};a("esri-webgl-debug")&&(this.instanceCounter=new c);this.enforceState()}Object.defineProperty(d.prototype,"contextAttributes",{get:function(){return this.gl.getContextAttributes()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"parameters",{get:function(){return this._parameters},enumerable:!0,configurable:!0});d.prototype.dispose=function(){this.bindVAO(null);this.unbindBuffer(34962);this.unbindBuffer(34963);
this._textureUnitMap={};a("esri-webgl-debug")&&this.instanceCounter.printResourceCount();this.gl=null};d.prototype.setBlendingEnabled=function(e){this._blendEnabled!==e&&(!0===e?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=e)};d.prototype.setBlendColor=function(e,l,f,n){if(e!==this._blendColorState.r||l!==this._blendColorState.g||f!==this._blendColorState.b||n!==this._blendColorState.a)this.gl.blendColor(e,l,f,n),this._blendColorState.r=e,this._blendColorState.g=
l,this._blendColorState.b=f,this._blendColorState.a=n};d.prototype.setBlendFunction=function(e,l){if(e!==this._blendFunctionState.srcRGB||l!==this._blendFunctionState.dstRGB)this.gl.blendFunc(e,l),this._blendFunctionState.srcRGB=e,this._blendFunctionState.srcAlpha=e,this._blendFunctionState.dstRGB=l,this._blendFunctionState.dstAlpha=l};d.prototype.setBlendFunctionSeparate=function(e,l,f,n){if(this._blendFunctionState.srcRGB!==e||this._blendFunctionState.srcAlpha!==f||this._blendFunctionState.dstRGB!==
l||this._blendFunctionState.dstAlpha!==n)this.gl.blendFuncSeparate(e,l,f,n),this._blendFunctionState.srcRGB=e,this._blendFunctionState.srcAlpha=f,this._blendFunctionState.dstRGB=l,this._blendFunctionState.dstAlpha=n};d.prototype.setBlendEquation=function(e){this._blendEquationState.mode!==e&&(this.gl.blendEquation(e),this._blendEquationState.mode=e,this._blendEquationState.modeAlpha=e)};d.prototype.setBlendEquationSeparate=function(e,l){if(this._blendEquationState.mode!==e||this._blendEquationState.modeAlpha!==
l)this.gl.blendEquationSeparate(e,l),this._blendEquationState.mode=e,this._blendEquationState.modeAlpha=l};d.prototype.setColorMask=function(e,l,f,n){if(this._colorMaskState.r!==e||this._colorMaskState.g!==l||this._colorMaskState.b!==f||this._colorMaskState.a!==n)this.gl.colorMask(e,l,f,n),this._colorMaskState.r=e,this._colorMaskState.g=l,this._colorMaskState.b=f,this._colorMaskState.a=n};d.prototype.setClearColor=function(e,l,f,n){if(this._clearColor.r!==e||this._clearColor.g!==l||this._clearColor.b!==
f||this._clearColor.a!==n)this.gl.clearColor(e,l,f,n),this._clearColor.r=e,this._clearColor.g=l,this._clearColor.b=f,this._clearColor.a=n};d.prototype.setFaceCullingEnabled=function(e){this._polygonCullingEnabled!==e&&(!0===e?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=e)};d.prototype.setPolygonOffsetFillEnabled=function(e){this._polygonOffsetFillEnabled!==e&&(!0===e?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),
this._polygonOffsetFillEnabled=e)};d.prototype.setPolygonOffset=function(e,l){if(this._polygonOffset[0]!==e||this._polygonOffset[1]!==l)this._polygonOffset[0]=e,this._polygonOffset[1]=l,this.gl.polygonOffset(e,l)};d.prototype.setCullFace=function(e){this._cullFace!==e&&(this.gl.cullFace(e),this._cullFace=e)};d.prototype.setFrontFace=function(e){this._frontFace!==e&&(this.gl.frontFace(e),this._frontFace=e)};d.prototype.setScissorTestEnabled=function(e){this._scissorTestEnabled!==e&&(!0===e?this.gl.enable(this.gl.SCISSOR_TEST):
this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=e)};d.prototype.setScissorRect=function(e,l,f,n){if(this._scissorRect.x!==e||this._scissorRect.y!==l||this._scissorRect.width!==f||this._scissorRect.height!==n)this.gl.scissor(e,l,f,n),this._scissorRect.x=e,this._scissorRect.y=l,this._scissorRect.width=f,this._scissorRect.height=n};d.prototype.setDepthTestEnabled=function(e){this._depthTestEnabled!==e&&(!0===e?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=
e)};d.prototype.setClearDepth=function(e){this._clearDepth!==e&&(this.gl.clearDepth(e),this._clearDepth=e)};d.prototype.setDepthFunction=function(e){this._depthFunction!==e&&(this.gl.depthFunc(e),this._depthFunction=e)};d.prototype.setDepthWriteEnabled=function(e){this._depthWriteEnabled!==e&&(this.gl.depthMask(e),this._depthWriteEnabled=e)};d.prototype.setDepthRange=function(e,l){if(this._depthRange.zNear!==e||this._depthRange.zFar!==l)this.gl.depthRange(e,l),this._depthRange.zNear=e,this._depthRange.zFar=
l};d.prototype.setStencilTestEnabled=function(e){this._stencilTestEnabled!==e&&(!0===e?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=e)};d.prototype.setClearStencil=function(e){e!==this._clearStencil&&(this.gl.clearStencil(e),this._clearStencil=e)};d.prototype.setStencilFunction=function(e,l,f){if(this._stencilFunction.func!==e||this._stencilFunction.ref!==l||this._stencilFunction.mask!==f)this.gl.stencilFunc(e,l,f),this._stencilFunction.face=
1032,this._stencilFunction.func=e,this._stencilFunction.ref=l,this._stencilFunction.mask=f};d.prototype.setStencilFunctionSeparate=function(e,l,f,n){if(this._stencilFunction.face!==e||this._stencilFunction.func!==l||this._stencilFunction.ref!==f||this._stencilFunction.mask!==n)this.gl.stencilFuncSeparate(e,l,f,n),this._stencilFunction.face=e,this._stencilFunction.func=l,this._stencilFunction.ref=f,this._stencilFunction.mask=n};d.prototype.setStencilWriteMask=function(e){this._stencilWriteMask!==e&&
(this.gl.stencilMask(e),this._stencilWriteMask=e)};d.prototype.setStencilOp=function(e,l,f){if(this._stencilOperation.fail!==e||this._stencilOperation.zFail!==l||this._stencilOperation.zPass!==f)this.gl.stencilOp(e,l,f),this._stencilOperation.face=1032,this._stencilOperation.fail=e,this._stencilOperation.zFail=l,this._stencilOperation.zPass=f};d.prototype.setStencilOpSeparate=function(e,l,f,n){if(this._stencilOperation.face!==e||this._stencilOperation.fail!==l||this._stencilOperation.zFail!==f||this._stencilOperation.zPass!==
n)this.gl.stencilOpSeparate(e,l,f,n),this._stencilOperation.face=e,this._stencilOperation.face=e,this._stencilOperation.fail=l,this._stencilOperation.zFail=f,this._stencilOperation.zPass=n};d.prototype.setLineWidth=function(e){var l=this._lineWidth;this._lineWidth!==e&&(this.gl.lineWidth(e),this._lineWidth=e);return l};d.prototype.setActiveTexture=function(e){var l=this._activeTextureUnit;0<=e&&e!==this._activeTextureUnit&&(this.gl.activeTexture(b.BASE_TEXTURE_UNIT+e),this._activeTextureUnit=e);return l};
d.prototype.clear=function(e){e&&this.gl.clear(e)};d.prototype.drawArrays=function(e,l,f){this.gl.drawArrays(e,l,f)};d.prototype.drawElements=function(e,l,f,n){5123===f?this.gl.drawElements(e,l,f,n):5125===f&&this.gl.drawElements(e,l,f,n)};Object.defineProperty(d.prototype,"capabilities",{get:function(){return this._capabilities},enumerable:!0,configurable:!0});d.prototype.setViewport=function(e,l,f,n){var u=this._viewport;if(u.x!==e||u.y!==l||u.width!==f||u.height!==n)u.x=e,u.y=l,u.width=f,u.height=
n,this.gl.viewport(e,l,f,n)};d.prototype.getViewport=function(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}};d.prototype.bindProgram=function(e){e?this._activeShaderProgram!==e&&(e.initialize(),this.gl.useProgram(e.glName),this._activeShaderProgram=e):(this.gl.useProgram(null),this._activeShaderProgram=null)};d.prototype.bindTexture=function(e,l){void 0===l&&(l=0);-1===d._MAX_TEXTURE_IMAGE_UNITS&&(d._MAX_TEXTURE_IMAGE_UNITS=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS));
var f=this._textureUnitMap[l];this.setActiveTexture(l);null==e||null==e.glName?(null!=f&&(this.gl.bindTexture(f.descriptor.target,null),f.setBoundToUnit(l,!1)),this._textureUnitMap[l]=null):f&&f.id===e.id?e.applyChanges():(this.gl.bindTexture(e.descriptor.target,e.glName),e.setBoundToUnit(l,!0),e.applyChanges(),this._textureUnitMap[l]=e)};d.prototype.bindFramebuffer=function(e){e?this._activeFramebuffer!==e&&(e.initialize()||this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,e.glName),this._activeFramebuffer=
e):(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this._activeFramebuffer=null)};d.prototype.bindBuffer=function(e){e&&(34962===e.bufferType?this._activeVertexBuffer=d._bindBuffer(this.gl,e,e.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=d._bindBuffer(this.gl,e,e.bufferType,this._activeIndexBuffer))};d.prototype.bindRenderbuffer=function(e){var l=this.gl;e||(l.bindRenderbuffer(l.RENDERBUFFER,null),this._activeRenderbuffer=null);this._activeRenderbuffer!==e&&(l.bindRenderbuffer(l.RENDERBUFFER,
e.glName),this._activeRenderbuffer=e)};d.prototype.unbindBuffer=function(e){34962===e?this._activeVertexBuffer=d._bindBuffer(this.gl,null,e,this._activeVertexBuffer):this._activeIndexBuffer=d._bindBuffer(this.gl,null,e,this._activeIndexBuffer)};d.prototype.bindVAO=function(e){e?this._activeVertexArrayObject&&this._activeVertexArrayObject.id===e.id||(e.bind(),this._activeVertexArrayObject=e):this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null)};
d.prototype.getBoundTexture=function(e){return this._textureUnitMap[e]};d.prototype.getBoundFramebufferObject=function(){return this._activeFramebuffer};d.prototype.getBoundVAO=function(){return this._activeVertexArrayObject};d.prototype.resetState=function(){this.bindProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);for(var e=0;e<this.parameters.maxTextureImageUnits;e++)this.bindTexture(null,e);this.setBlendingEnabled(!1);this.setBlendFunction(1,
0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,1);this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,7680,7680);this.setClearColor(0,0,
0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)};d.prototype.enforceState=function(){var e=this.gl,l=this._capabilities.vao;l&&l.bindVertexArray(null);for(var f=0;f<this.parameters.maxVertexAttributes;f++)e.disableVertexAttribArray(f);this._activeVertexBuffer?e.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):
e.bindBuffer(34962,null);this._activeIndexBuffer?e.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):e.bindBuffer(34963,null);if(l&&this._activeVertexArrayObject){if(l=this._activeVertexArrayObject)this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null;this.bindVAO(l)}e.bindFramebuffer(e.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:null);e.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null);e.blendColor(this._blendColorState.r,
this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);e.bindRenderbuffer(e.RENDERBUFFER,this._activeRenderbuffer?this._activeRenderbuffer.glName:null);!0===this._blendEnabled?e.enable(this.gl.BLEND):e.disable(this.gl.BLEND);e.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha);e.blendFuncSeparate(this._blendFunctionState.srcRGB,this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);e.clearColor(this._clearColor.r,
this._clearColor.g,this._clearColor.b,this._clearColor.a);e.clearDepth(this._clearDepth);e.clearStencil(this._clearStencil);e.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a);e.cullFace(this._cullFace);e.depthFunc(this._depthFunction);e.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST);e.depthMask(this._depthWriteEnabled);e.frontFace(this._frontFace);e.lineWidth(this._lineWidth);
!0===this._polygonCullingEnabled?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE);e.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?e.enable(e.POLYGON_OFFSET_FILL):e.disable(e.POLYGON_OFFSET_FILL);e.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?e.enable(e.SCISSOR_TEST):e.disable(e.SCISSOR_TEST);e.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);
e.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST);e.stencilMask(this._stencilWriteMask);for(l=0;l<this.parameters.maxTextureImageUnits;l++)e.activeTexture(b.BASE_TEXTURE_UNIT+l),e.bindTexture(3553,null),(f=this._textureUnitMap[l])&&e.bindTexture(f.descriptor.target,f.glName);e.activeTexture(b.BASE_TEXTURE_UNIT+this._activeTextureUnit);
e.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)};d._bindBuffer=function(e,l,f,n){if(!l)return e.bindBuffer(f,null),null;if(n===l)return n;e.bindBuffer(f,l.glName);return l};d._MAX_TEXTURE_IMAGE_UNITS=-1;return d}()})},"esri/layers/vectorTiles/views/webgl/enums":function(){define(["require","exports"],function(g,t){Object.defineProperty(t,"__esModule",{value:!0});t.BASE_TEXTURE_UNIT=33984})},"esri/layers/vectorTiles/views/webgl/InstanceCounter":function(){define(["require",
"exports"],function(g,t){return function(){function a(){this._instanceCount={textureCount:0,bufferCount:0,vaoCount:0,programCount:0,framebufferCount:0,renderBufferCount:0}}a.prototype.incrementCount=function(b){switch(b){case 0:this._instanceCount.textureCount++;break;case 1:this._instanceCount.bufferCount++;break;case 2:this._instanceCount.vaoCount++;break;case 3:this._instanceCount.programCount++;break;case 4:this._instanceCount.framebufferCount++;break;case 5:this._instanceCount.renderBufferCount++}};
a.prototype.decrementCount=function(b){switch(b){case 0:this._instanceCount.textureCount--;break;case 1:this._instanceCount.bufferCount--;break;case 2:this._instanceCount.vaoCount--;break;case 3:this._instanceCount.programCount--;break;case 4:this._instanceCount.framebufferCount--;break;case 5:this._instanceCount.renderBufferCount--}};a.prototype.printResourceCount=function(){};return a}()})},"esri/layers/vectorTiles/views/webgl/capabilities/isWebGL2Context":function(){define(["require","exports"],
function(g,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(a){return window.WebGL2RenderingContext&&a instanceof window.WebGL2RenderingContext}})},"esri/layers/vectorTiles/views/webgl/capabilities/load":function(){define("require exports ./DisjointTimerQuery ./Instancing ./isWebGL2Context ./VertexArrayObjects".split(" "),function(g,t,a,b,c,k){function h(d,e,l,f,n){if(f&&c.default(d))return!0;if(e[l])return!1;for(e=0;e<n.length;e++)if(d.getExtension(n[e]))return!0;return!1}Object.defineProperty(t,
"__esModule",{value:!0});t.loadCapabilities=function(d,e){e=e&&e.disabledExtensions||{};var l=b.load(d,e),f=k.load(d,e);var n=e.compressedTextureS3TC?null:(n=d.getExtension("WEBGL_compressed_texture_s3tc"))?{COMPRESSED_RGB_S3TC_DXT1:n.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:n.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:n.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:n.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null;var u=e.textureFilterAnisotropic?null:(u=d.getExtension("EXT_texture_filter_anisotropic")||
d.getExtension("MOZ_EXT_texture_filter_anisotropic")||d.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))?{MAX_TEXTURE_MAX_ANISOTROPY:u.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:u.TEXTURE_MAX_ANISOTROPY_EXT}:null;var p=a.load(d,e);if(c.default(d))var r=e.colorBufferFloat||!d.getExtension("EXT_color_buffer_float")?null:{R16F:d.R16F,RG16F:d.RG16F,RGBA16F:d.RGBA16F,R32F:d.R32F,RG32F:d.RG32F,RGBA32F:d.RGBA32F,R11F_G11F_B10F:d.R11F_G11F_B10F};else if(d instanceof WebGLRenderingContext){r=
!e.colorBufferFloat&&d.getExtension("EXT_color_buffer_half_float");var q=!e.colorBufferFloat&&d.getExtension("WEBGL_color_buffer_float");r=r||q?{RGBA16F:r?r.RGBA16F_EXT:void 0,RGBA32F:q?q.RGBA32F_EXT:void 0}:null}else r=void 0;q=c.default(d)?{MIN:d.MIN,MAX:d.MAX}:e.blendMinMax?null:(q=d.getExtension("EXT_blend_minmax"))?{MIN:q.MIN_EXT,MAX:q.MAX_EXT}:null;return{instancing:l,vao:f,compressedTextureS3TC:n,textureFilterAnisotropic:u,disjointTimerQuery:p,colorBufferFloat:r,blendMinMax:q,depthTexture:h(d,
e,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]),standardDerivatives:h(d,e,"standardDerivatives",!0,["OES_standard_derivatives"]),shaderTextureLOD:h(d,e,"shaderTextureLOD",!0,["EXT_shader_texture_lod"]),textureFloatLinear:h(d,e,"textureFloatLinear",!1,["OES_texture_float_linear"]),fragDepth:h(d,e,"fragDepth",!0,["EXT_frag_depth"])}}})},"esri/layers/vectorTiles/views/webgl/capabilities/DisjointTimerQuery":function(){define(["require","exports","./isWebGL2Context"],
function(g,t,a){Object.defineProperty(t,"__esModule",{value:!0});t.load=function(b,c){if(c.disjointTimerQuery)return null;var k=b.getExtension("EXT_disjoint_timer_query")||b.getExtension("EXT_disjoint_timer_query_webgl2");return k?a.default(b)?{createQuery:function(){return b.createQuery()},resultAvailable:function(h){return b.getQueryParameter(h,b.QUERY_RESULT_AVAILABLE)},getResult:function(h){return b.getQueryParameter(h,b.QUERY_RESULT)},disjoint:function(){return b.getParameter(k.GPU_DISJOINT_EXT)},
beginTimeElapsed:function(h){return b.beginQuery(k.TIME_ELAPSED_EXT,h)},endTimeElapsed:function(){return b.endQuery(k.TIME_ELAPSED_EXT)},createTimestamp:function(h){return k.queryCounterEXT(h,k.TIMESTAMP_EXT)},timestampBits:function(){return b.getQuery(k.TIMESTAMP_EXT,k.QUERY_COUNTER_BITS_EXT)}}:{createQuery:function(){return k.createQueryEXT()},resultAvailable:function(h){return k.getQueryObjectEXT(h,k.QUERY_RESULT_AVAILABLE_EXT)},getResult:function(h){return k.getQueryObjectEXT(h,k.QUERY_RESULT_EXT)},
disjoint:function(){return b.getParameter(k.GPU_DISJOINT_EXT)},beginTimeElapsed:function(h){return k.beginQueryEXT(k.TIME_ELAPSED_EXT,h)},endTimeElapsed:function(){return k.endQueryEXT(k.TIME_ELAPSED_EXT)},createTimestamp:function(h){return k.queryCounterEXT(h,k.TIMESTAMP_EXT)},timestampBits:function(){return k.getQueryEXT(k.TIMESTAMP_EXT,k.QUERY_COUNTER_BITS_EXT)}}:null}})},"esri/layers/vectorTiles/views/webgl/capabilities/Instancing":function(){define(["require","exports","./isWebGL2Context"],function(g,
t,a){Object.defineProperty(t,"__esModule",{value:!0});t.load=function(b,c){return a.default(b)?{drawArraysInstanced:b.drawArraysInstanced.bind(b),drawElementsInstanced:b.drawElementsInstanced.bind(b),vertexAttribDivisor:b.vertexAttribDivisor.bind(b)}:c.angleInstancedArrays?null:(b=b.getExtension("ANGLE_instanced_arrays"))?{drawArraysInstanced:b.drawArraysInstancedANGLE.bind(b),drawElementsInstanced:b.drawElementsInstancedANGLE.bind(b),vertexAttribDivisor:b.vertexAttribDivisorANGLE.bind(b)}:null}})},
"esri/layers/vectorTiles/views/webgl/capabilities/VertexArrayObjects":function(){define(["require","exports","./isWebGL2Context"],function(g,t,a){Object.defineProperty(t,"__esModule",{value:!0});t.load=function(b,c){return a.default(b)?{createVertexArray:b.createVertexArray.bind(b),deleteVertexArray:b.deleteVertexArray.bind(b),bindVertexArray:b.bindVertexArray.bind(b)}:c.vao?null:(b=b.getExtension("OES_vertex_array_object")||b.getExtension("MOZ_OES_vertex_array_object")||b.getExtension("WEBKIT_OES_vertex_array_object"))?
{createVertexArray:b.createVertexArrayOES.bind(b),deleteVertexArray:b.deleteVertexArrayOES.bind(b),bindVertexArray:b.bindVertexArrayOES.bind(b)}:null}})},"esri/layers/vectorTiles/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(g,t,a,b,c,k,h){var d=new k("0/0/0/0"),e=function(){function f(n,u,p,r,q,m,v,x){this.x=n;this.ymin=u;this.ymax=p;this.invM=r;this.leftAdjust=q;
this.rightAdjust=m;this.leftBound=v;this.rightBound=x}f.create=function(n,u){if(n[1]>u[1]){var p=[u,n];n=p[0];u=p[1]}p=n[0];n=n[1];var r=u[0];u=u[1];var q=r-p,m=u-n;m=0!==m?q/m:0;var v=(Math.ceil(n)-n)*m,x=(Math.floor(n)-n)*m;return new f(p,Math.floor(n),Math.ceil(u),m,0>q?v:x,0>q?x:v,0>q?r:p,0>q?p:r)};f.prototype.incrRow=function(){this.x+=this.invM};f.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};f.prototype.getRightCol=function(){return Math.min(this.x+
this.rightAdjust,this.rightBound)};return f}(),l=[[0,0],[0,0],[0,0],[0,0]];return function(){function f(n,u){var p=this;this.tileInfo=n;this.fullExtent=u;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var r=n.lods.slice();r.sort(function(m,v){return v.scale-m.scale});var q=this._lodInfos=r.map(function(m){return b.create(n,m,u)});r.forEach(function(m,v){p._infoByLevel[m.level]=q[v];p._infoByScale[m.scale]=q[v];p.scales[v]=m.scale},this);this._wrap=n.isWrappable}f.prototype.getLODInfoAt=
function(n){return this._infoByLevel[n.level]};f.prototype.getTileBounds=function(n,u,p){void 0===p&&(p=!1);d.set(u);return(u=this._infoByLevel[d.level])?u.getTileBounds(n,d,p):n};f.prototype.getTileCoords=function(n,u,p){void 0===p&&(p=!1);d.set(u);return(u=this._infoByLevel[d.level])?u.getTileCoords(n,d,p):n};f.prototype.getTileCoverage=function(n,u,p){void 0===u&&(u=192);void 0===p&&(p="closest");p="closest"===p?this.getClosestInfoForScale(n.scale):this.getSmallestInfoForScale(n.scale);var r=c.pool.acquire(p),
q=this._wrap;var m=Infinity;var v=-Infinity,x=r.spans;l[0][0]=l[0][1]=l[1][1]=l[3][0]=-u;l[1][0]=l[2][0]=n.size[0]+u;l[2][1]=l[3][1]=n.size[1]+u;for(u=0;u<l.length;u++){var z=l[u];n.toMap(z,z);z[0]=p.getColumnForX(z[0]);z[1]=p.getRowForY(z[1])}n=[];z=3;for(u=0;4>u;u++){if(l[u][1]!==l[z][1]){var A=e.create(l[u],l[z]);m=Math.min(A.ymin,m);v=Math.max(A.ymax,v);void 0===n[A.ymin]&&(n[A.ymin]=[]);n[A.ymin].push(A)}z=u}if(null==m||null==v||100<v-m)return null;for(z=[];m<v;){null!=n[m]&&(z=z.concat(n[m]));
var C=Infinity;var D=-Infinity;for(u=z.length-1;0<=u;u--)A=z[u],C=Math.min(C,A.getLeftCol()),D=Math.max(D,A.getRightCol());C=Math.floor(C);D=Math.floor(D);if(m>=p.first[1]&&m<=p.last[1])if(q)if(p.size[0]<p.worldSize[0])for(A=Math.floor(D/p.worldSize[0]),u=Math.floor(C/p.worldSize[0]);u<=A;u++)x.push(new h(m,Math.max(p.getFirstColumnForWorld(u),C),Math.min(p.getLastColumnForWorld(u),D)));else x.push(new h(m,C,D));else C>p.last[0]||D<p.first[0]||(C=Math.max(C,p.first[0]),D=Math.min(D,p.last[0]),x.push(new h(m,
C,D)));m+=1;for(u=z.length-1;0<=u;u--)A=z[u],A.ymax>=m?A.incrRow():z.splice(u,1)}return r};f.prototype.getTileIdAtParent=function(n,u){u=k.pool.acquire(u);var p=this._infoByLevel[u.level];if(n.resolution<p.resolution)throw Error("Cannot calculate parent tile. destination LOD's resolution "+n.resolution+" is not a parent resolution of "+p.resolution);return n.resolution===p.resolution?u.id:k.getId(n.level,Math.floor(u.row*p.resolution/n.resolution+.01),Math.floor(u.col*p.resolution/n.resolution+.01),
u.world)};f.prototype.getTileParentId=function(n){n=k.pool.acquire(n);var u=this._lodInfos.indexOf(this._infoByLevel[n.level])-1;if(0>u)return k.pool.release(n),null;u=this.getTileIdAtParent(this._lodInfos[u],n);k.pool.release(n);return u};f.prototype.getTileResolution=function(n){return(n=this._infoByLevel[n.level])?n.resolution:-1};f.prototype.getTileScale=function(n){return(n=this._infoByLevel[n.level])?n.scale:-1};f.prototype.intersects=function(n,u){var p=k.pool.acquire(u);u=this._infoByLevel[p.level];
var r=n.lodInfo;if(r.resolution>u.resolution){var q=k.pool.acquire(this.getTileIdAtParent(r,p)),m=r.denormalizeCol(q.col,q.world);u=n.spans.some(function(y){return y.row===q.row&&y.colFrom<=m&&y.colTo>=m});k.pool.release(p);k.pool.release(q);return u}if(r.resolution<u.resolution){var v=n.spans.reduce(function(y,w){y[0]=Math.min(y[0],w.row);y[1]=Math.max(y[1],w.row);y[2]=Math.min(y[2],w.colFrom);y[3]=Math.max(y[3],w.colTo);return y},[Infinity,-Infinity,Infinity,-Infinity]);n=v[0];var x=v[1],z=v[2];
v=v[3];var A=u.denormalizeCol(p.col,p.world),C=r.getColumnForX(u.getXForColumn(A)),D=r.getRowForY(u.getYForRow(p.row));A=r.getColumnForX(u.getXForColumn(A+1))-1;u=r.getRowForY(u.getYForRow(p.row+1))-1;k.pool.release(p);return!(C>v||A<z||D>x||u<n)}var B=r.denormalizeCol(p.col,p.world);u=n.spans.some(function(y){return y.row===p.row&&y.colFrom<=B&&y.colTo>=B});k.pool.release(p);return u};f.prototype.normalizeBounds=function(n,u,p){n[0]=u[0];n[1]=u[1];n[2]=u[2];n[3]=u[3];this._wrap&&(u=a.getInfo(this.tileInfo.spatialReference),
p=-p*(u.valid[1]-u.valid[0]),n[0]+=p,n[2]+=p);return n};f.prototype.getSmallestInfoForScale=function(n){var u=this.scales;if(this._infoByScale[n])return this._infoByScale[n];if(n>u[0])return this._infoByScale[u[0]];for(var p=1;p<u.length-1;p++)if(n>u[p]+1E-6)return this._infoByScale[u[p-1]];return this._infoByScale[u[u.length-1]]};f.prototype.getClosestInfoForScale=function(n){var u=this.scales;this._infoByScale[n]||(n=u.reduce(function(p,r,q,m){return Math.abs(r-n)<Math.abs(p-n)?r:p},u[0]));return this._infoByScale[n]};
return f}()})},"esri/layers/vectorTiles/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(g,t,a,b){function c(h,d,e){h[0]=d;h[1]=e;return h}var k=new b("0/0/0/0");return function(){function h(d,e,l,f,n,u,p,r,q,m,v,x){this.level=d;this.resolution=e;this.scale=l;this.origin=f;this.first=n;this.last=u;this.size=p;this.norm=r;this.worldStart=q;this.worldEnd=m;this.worldSize=v;this.wrap=x}h.create=function(d,e,l){var f=
a.getInfo(d.spatialReference),n=[d.origin.x,d.origin.y],u=[d.size[0]*e.resolution,d.size[1]*e.resolution],p=[-Infinity,-Infinity],r=[Infinity,Infinity],q=[Infinity,Infinity];l&&(c(p,Math.max(0,Math.floor((l.xmin-n[0])/u[0])),Math.max(0,Math.floor((n[1]-l.ymax)/u[1]))),c(r,Math.max(0,Math.floor((l.xmax-n[0])/u[0])),Math.max(0,Math.floor((n[1]-l.ymin)/u[1]))),c(q,r[0]-p[0]+1,r[1]-p[1]+1));if(d.isWrappable){d=[Math.ceil(Math.round(2*f.origin[1]/e.resolution)/d.size[0]),q[1]];f=[Math.floor((f.origin[0]-
n[0])/u[0]),p[1]];l=[d[0]+f[0]-1,r[1]];var m=!0}else f=p,l=r,d=q,m=!1;return new h(e.level,e.resolution,e.scale,n,p,r,q,u,f,l,d,m)};h.prototype.normalizeCol=function(d){if(!this.wrap)return d;var e=this.worldSize[0];return 0>d?e-1-Math.abs((d+1)%e):d%e};h.prototype.denormalizeCol=function(d,e){return this.wrap?this.worldSize[0]*e+d:d};h.prototype.getWorldForColumn=function(d){return this.wrap?Math.floor(d/this.worldSize[0]):0};h.prototype.getFirstColumnForWorld=function(d){return d*this.worldSize[0]+
this.first[0]};h.prototype.getLastColumnForWorld=function(d){return d*this.worldSize[0]+this.first[0]+this.size[0]-1};h.prototype.getColumnForX=function(d){return(d-this.origin[0])/this.norm[0]};h.prototype.getXForColumn=function(d){return this.origin[0]+d*this.norm[0]};h.prototype.getRowForY=function(d){return(this.origin[1]-d)/this.norm[1]};h.prototype.getYForRow=function(d){return this.origin[1]-d*this.norm[1]};h.prototype.getTileBounds=function(d,e,l){void 0===l&&(l=!1);k.set(e);var f=l?k.col:
this.denormalizeCol(k.col,k.world),n=k.row;e=this.getXForColumn(f);l=this.getYForRow(n+1);f=this.getXForColumn(f+1);n=this.getYForRow(n);d[0]=e;d[1]=l;d[2]=f;d[3]=n;return d};h.prototype.getTileCoords=function(d,e,l){void 0===l&&(l=!1);k.set(e);e=l?k.col:this.denormalizeCol(k.col,k.world);Array.isArray(d)?c(d,this.getXForColumn(e),this.getYForRow(k.row)):(d.x=this.getXForColumn(e),d.y=this.getYForRow(k.row));return d};return h}()})},"esri/layers/vectorTiles/views/2d/tiling/TileCoverage":function(){define(["require",
"exports","../../../core/ArrayPool","../../../core/ObjectPool","./TileSpan"],function(g,t,a,b,c){return function(){function k(h){this.lodInfo=h;this.spans=a.acquire()}k.prototype.release=function(){for(var h=0,d=this.spans;h<d.length;h++)c.pool.release(d[h]);a.release(this.spans)};k.prototype.forEach=function(h,d){var e=this.spans,l=this.lodInfo,f=l.level;if(0!==e.length)for(var n=0;n<e.length;n++){var u=e[n],p=u.row,r=u.colTo;for(u=u.colFrom;u<=r;u++)h.call(d,f,p,l.normalizeCol(u),l.getWorldForColumn(u))}};
k.pool=new b(k,!0);return k}()})},"esri/layers/vectorTiles/views/2d/tiling/TileSpan":function(){define(["require","exports","../../../core/ObjectPool"],function(g,t,a){return function(){function b(c,k,h){this.row=c;this.colFrom=k;this.colTo=h}b.pool=new a(b,!0);return b}()})},"esri/layers/vectorTiles/views/2d/tiling/TileStrategy":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./enums","./TileKey"],function(g,t,a,b,c){var k=new c(0,0,0,0),h=new Map,d=[],e=[];return function(){function l(f){this._previousResolution=
Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=f.acquireTile;this.releaseTile=f.releaseTile;this.tileInfoView=f.tileInfoView;f.cachePolicy&&(this.cachePolicy=f.cachePolicy);f.coveragePolicy&&(this.coveragePolicy=f.coveragePolicy);null!=f.buffer&&(this.buffer=f.buffer)}l.prototype.destroy=function(){this.clear()};l.prototype.update=function(f){var n=this,u=this.tileIndex,p=this.tileInfoView.getTileCoverage(f.state,
this.buffer,this.coveragePolicy);if(p){var r=p.spans,q=p.lodInfo,m=q.level,v=f.state.resolution,x=!f.stationary&&v>this._previousResolution;this._previousResolution=v;u.forEach(function(E){return E.visible=!0});this.tiles.length=0;h.clear();var z=0,A=0;if(0<r.length)for(var C=0;C<r.length;C++){f=r[C];for(var D=f.row,B=f.colTo,y=f.colFrom;y<=B;y++)z++,f=k.set(m,D,q.normalizeCol(y),q.getWorldForColumn(y)).id,u.has(f)?(v=u.get(f),v.status!==b.TileStatus.INITIALIZED&&A++,v.attached?h.set(f,v):v.attached||
x||this._addParentTile(f,h)):(v=this.acquireTile(k),this.tileIndex.set(f,v),x||this._addParentTile(f,h))}var w=A===z;e.length=0;d.length=0;u.forEach(function(E,F){k.set(F);if(!h.has(F)){var H=n.tileInfoView.intersects(p,k);!H||!x&&w?"purge"===n.cachePolicy&&E.status!==b.TileStatus.MODIFIED&&E.status!==b.TileStatus.READY?d.push(F):(k.level>m||!H)&&d.push(F):E.attached?e.push(F):k.level>m&&d.push(F)}});for(r=0;r<e.length;r++)f=e[r],(v=u.get(f))&&v.attached&&h.set(f,v);for(r=0;r<d.length;r++)f=d[r],
v=u.get(f),this.releaseTile(v),u["delete"](f);h.forEach(function(E){return n.tiles.push(E)});u.forEach(function(E){h.has(E.key.id)||(E.visible=!1)});e.length=0;d.length=0;h.clear();return w}};l.prototype.clear=function(){var f=this,n=this.tileIndex;n.forEach(function(u){f.releaseTile(u)});n.clear()};l.prototype._addParentTile=function(f,n){for(var u=null;;){f=this.tileInfoView.getTileParentId(f);if(!f)break;if(this.tileIndex.has(f)&&(u=this.tileIndex.get(f))&&u.attached){n.has(u.key.id)||n.set(u.key.id,
u);break}}};return l}()})},"esri/layers/vectorTiles/views/2d/tiling/TileQueue":function(){define(["require","exports","../../../core/QueueProcessor","../libs/gl-matrix/vec2"],function(g,t,a,b){function c(e,l){e.length=0;l.forEach(function(f){return e.push(f)});return e}var k=new Set,h=[],d=new Map;return function(){function e(l){var f=this;this._keysToRequests=new Map;this.tileInfoView=null;var n=l.strategy&&"scale-first"!==l.strategy?this._peekByCenterFirst.bind(this):this._peekByScaleFirst.bind(this);
this.tileInfoView=l.tileInfoView;this._queues=l.tileServers&&0<l.tileServers.length?l.tileServers.map(function(u){return new a({concurrency:l.concurrency||6,process:function(p){p=f._keysToRequests.get(p);return l.process(p,u)},peeker:n})}):[new a({concurrency:l.concurrency||6,process:function(u){u=f._keysToRequests.get(u);return l.process(u)},peeker:n})]}Object.defineProperty(e.prototype,"length",{get:function(){return this._queues.reduce(function(l,f){return l+f.length},0)},enumerable:!0,configurable:!0});
Object.defineProperty(e.prototype,"onGoingCount",{get:function(){return this._keysToRequests.size},enumerable:!0,configurable:!0});e.prototype.clear=function(){for(var l=0,f=this._queues;l<f.length;l++)f[l].clear();this._keysToRequests.clear()};e.prototype.find=function(l,f){var n=this;f=0;for(var u=this._queues;f<u.length;f++){var p=u[f].find(function(r){return l(n._keysToRequests.get(r).key)});if(p)return p}};e.prototype.get=function(l){l="string"===typeof l?l:l.id;for(var f=0,n=this._queues;f<
n.length;f++){var u=n[f].get(l);if(u)return u}};e.prototype.getRequest=function(l){return this._keysToRequests.get("string"===typeof l?l:l.id)};e.prototype.has=function(l){return"string"===typeof l?this._keysToRequests.has(l):this._keysToRequests.has(l.id)};e.prototype.isOngoing=function(l){var f="string"===typeof l?l:l.id;return this.has(f)&&this._queues.some(function(n){return n.isOngoing(f)})};e.prototype.pause=function(){for(var l=0,f=this._queues;l<f.length;l++)f[l].pause()};e.prototype.push=
function(l){var f=this,n=l.key.id,u=this._queues[l.key.row%this._queues.length].push(n);this._keysToRequests.set(n,l);u.then(function(){f._keysToRequests.delete(n)});u.catch(function(){f._keysToRequests.delete(n)});return u};e.prototype.reset=function(){for(var l=0,f=this._queues;l<f.length;l++)f[l].reset()};e.prototype.resume=function(){for(var l=0,f=this._queues;l<f.length;l++)f[l].resume()};e.prototype._peekByScaleFirst=function(l){if(!this.state)return l[0];for(var f=this.tileInfoView,n=Number.NEGATIVE_INFINITY,
u=Number.POSITIVE_INFINITY,p=0;p<l.length;p++){var r=this._keysToRequests.get(l[p]),q=this.tileInfoView.getTileScale(r.key);d.has(q)||(d.set(q,[]),n=Math.max(q,n),u=Math.min(q,u));d.get(q).push(r.key);k.add(q)}var m=this.state.scale;d.has(m)||(c(h,k),h.sort(),m=h.reduce(function(A,C,D,B){return Math.abs(C-m)<Math.abs(A-m)?C:A},h[0]));m=Math.min(m,n);m=Math.max(m,u);l=d.get(m);var v=f.getClosestInfoForScale(m),x=v.getColumnForX(this.state.center[0]),z=v.getRowForY(this.state.center[1]);l.sort(function(A,
C){var D=v.denormalizeCol(A.col,A.world),B=v.denormalizeCol(C.col,C.world);return Math.sqrt((x-D)*(x-D)+(z-A.row)*(z-A.row))-Math.sqrt((x-B)*(x-B)+(z-C.row)*(z-C.row))});k.clear();d.clear();return l[0].id};e.prototype._peekByCenterFirst=function(l){if(!this.state)return l[0];for(var f=this.tileInfoView,n=this.state.center,u=[0,0],p=Number.POSITIVE_INFINITY,r=null,q=0;q<l.length;q++){var m=this._keysToRequests.get(l[q]);f.getTileCoords(u,m.key);var v=b.distance(u,n);v<p&&(p=v,r=m.key)}return r.id};
return e}()})},"esri/layers/vectorTiles/core/QueueProcessor":function(){define(["require","exports","dojo/Deferred","./Queue","./scheduling"],function(g,t,a,b,c){return function(){function k(h){this._apiPromises=new Map;this._processingItems=new Map;this._isPaused=!1;this._scheduledNextHandle=null;this.concurrency=1;this.ordered=!1;h.concurrency&&(this.concurrency=h.concurrency);this.ordered=!!h.ordered;this._queue=new b(h.peeker?{peeker:h.peeker}:void 0);this.process=h.process}Object.defineProperty(k.prototype,
"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,configurable:!0});k.prototype.clear=function(){this._queue.clear();var h=[];this._processingItems.forEach(function(d){return h.push(d.resultPromise)});this._processingItems.clear();h.forEach(function(d){return d.cancel()});h.length=0;this._apiPromises.forEach(function(d){return h.push(d)});this._apiPromises.clear();h.forEach(function(d){return d.cancel()});this._cancelNext()};k.prototype.find=function(h,d){var e=
this,l=void 0;this._apiPromises.forEach(function(f,n){h.call(d,n)&&(l=e._apiPromises.get(n).promise)});return l};k.prototype.get=function(h){return(h=this._apiPromises.get(h))&&h.promise||void 0};k.prototype.isOngoing=function(h){return this._processingItems.has(h)};k.prototype.has=function(h){return this._apiPromises.has(h)};k.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};k.prototype.push=function(h){var d=this;if(this._apiPromises.has(h))return this._apiPromises.get(h).promise;
var e=new a(function(l){var f=d._processingItems.get(h);f?f.resultPromise.cancel(l):(d._remove(h),d._scheduleNext())});this._add(h,e);this._scheduleNext();return e.promise};k.prototype.reset=function(){var h=[];this._processingItems.forEach(function(l){return h.push(l)});this._processingItems.clear();for(var d=0;d<h.length;d++){var e=h[d];e.resultPromise.isFulfilled()?this._processReset(e):(e.isReset=!0,e.resultPromise.cancel())}};k.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};
k.prototype._scheduleNext=function(){var h=this;this._isPaused||this._scheduledNextHandle||(this._scheduledNextHandle=c.schedule(function(){h._scheduledNextHandle=null;h._next()}))};k.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};k.prototype._processResult=function(h,d){this._remove(h.item);this._scheduleNext();h.dfd.resolve(d)};k.prototype._processError=function(h,d){h.isReset?this._processReset(h):(this._remove(h.item),
this._scheduleNext(),h.dfd.reject(d))};k.prototype._processReset=function(h){this._remove(h.item);this._add(h.item,h.dfd);this._scheduleNext()};k.prototype._processOrdered=function(h,d){var e=this,l=!1;if(h.isReset)this._processReset(h);else{h.result=d;this._itemsToProcess||(this._itemsToProcess=[]);this._processingItems.forEach(function(n){l||(n.result?e._itemsToProcess.push(n):l=!0)});h=0;for(d=this._itemsToProcess;h<d.length;h++){var f=d[h];!1===f.result.ok?this._processError(f,f.result.error):
this._processResult(f,f.result.value)}this._itemsToProcess.length=0}};k.prototype._process=function(h){var d=this;if(null!=h){var e=this._apiPromises.get(h),l=this.process(h);if(l&&"function"===typeof l.then){var f={item:h,resultPromise:l,result:null,dfd:e,isReset:!1};this._processingItems.set(h,f);this.ordered?l.then(function(n){return d._processOrdered(f,{ok:!0,value:n})},function(n){return d._processOrdered(f,{ok:!1,error:n})}):l.then(function(n){return d._processResult(f,n)},function(n){return d._processError(f,
n)})}else e.resolve(l),this._remove(h)}};k.prototype._add=function(h,d){this._apiPromises.set(h,d);this._queue.push(h)};k.prototype._remove=function(h){this._queue.remove(h);this._apiPromises.delete(h);this._processingItems.delete(h)};k.prototype._cancelNext=function(){this._scheduledNextHandle&&(this._scheduledNextHandle.remove(),this._scheduledNextHandle=null)};return k}()})},"esri/layers/vectorTiles/core/Queue":function(){define(["require","exports"],function(g,t){return function(){function a(b){this._items=
[];this._itemSet=new Set;this._peeker=function(c){return c[0]};this._length=0;b&&b.peeker&&(this._peeker=b.peeker)}Object.defineProperty(a.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0};a.prototype.peek=function(){if(0!==this._length)return this._peeker(this._items)};a.prototype.push=function(b){this.contains(b)||this._add(b)};a.prototype.contains=function(b){return 0<this._length&&
this._itemSet.has(b)};a.prototype.pop=function(){if(0!==this._length){var b=this.peek();this._remove(b);return b}};a.prototype.remove=function(b){this.contains(b)&&this._remove(b)};a.prototype._add=function(b){this._items.push(b);this._itemSet.add(b);this._length++};a.prototype._remove=function(b){this._itemSet.delete(b);this._items.splice(this._items.indexOf(b),1);this._length--};return a}()})},"esri/layers/vectorTiles/views/webgl/webgl-utils":function(){define([],function(){var g=function(t,a){for(var b=
["webgl","experimental-webgl","webkit-3d","moz-webgl"],c=null,k=0;k<b.length;++k){try{c=t.getContext(b[k],a)}catch(h){}if(c)break}return c};return{create3DContext:g,setupWebGL:function(t,a){function b(c){var k=t.parentNode;k&&(k.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+c+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}
if(!window.WebGLRenderingContext)return b('This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),[null,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'];a=g(t,a);return a?[a]:(b('It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'),
[null,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'])},detectWebGL:function(){try{var t=window.WebGLRenderingContext}catch(b){t=[!1,0]}try{var a=g(document.createElement("canvas"))}catch(b){a=[!1,1]}t?a?(t=a,t=[!0,{VERSION:t.getParameter(t.VERSION),SHADING_LANGUAGE_VERSION:t.getParameter(t.SHADING_LANGUAGE_VERSION),VENDOR:t.getParameter(t.VENDOR),RENDERER:t.getParameter(t.RENDERER),
EXTENSIONS:t.getSupportedExtensions(),MAX_TEXTURE_SIZE:t.getParameter(t.MAX_TEXTURE_SIZE),MAX_RENDERBUFFER_SIZE:t.getParameter(t.MAX_RENDERBUFFER_SIZE),MAX_VERTEX_TEXTURE_IMAGE_UNITS:t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS)}]):t=[!1,1]:t=[!1,0];return t}}})},"url:esri/core/request/iframe.html":'\x3c!DOCTYPE html\x3e\r\n\x3chtml\x3e\r\n\x3chead\x3e\r\n  \x3cmeta http-equiv\x3d"Content-Security-Policy" content\x3d"default-src \'none\'; script-src * \'unsafe-inline\'"\x3e\r\n\r\n  \x3cscript\x3e\r\n    var dojoConfig \x3d {\r\n      async: true,\r\n      baseUrl: "../../../dojo/",\r\n      has: {\r\n        "csp-restrictions": true,\r\n        "dojo-preload-i18n-Api": false\r\n      }\r\n    };\r\n  \x3c/script\x3e\r\n  \x3c!--\r\n  This src is relative to this page and assumes dojo is a sibling to esri.\r\n  It is updated when this file is set as the iframe\'s `srcdoc` value.\r\n  --\x3e\r\n  \x3cscript src\x3d"../../../dojo/dojo.js"\x3e\x3c/script\x3e\r\n\r\n  \x3cscript\x3e\r\n    function windowMessageHandler(event) {\r\n      window.removeEventListener("message", windowMessageHandler);\r\n\r\n      if (window.origin !\x3d\x3d "null") {\r\n        return; // page is not in an iframe sandbox\r\n      }\r\n\r\n      var port \x3d event.ports[0];\r\n\r\n      require([\r\n        "dojo/request/script"\r\n      ], function(script) {\r\n        port.postMessage("ready");\r\n\r\n        port.addEventListener("message", function(event) {\r\n          var data \x3d event.data;\r\n          script.get(data.url, data.options)\r\n              .then(function(response) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  response: response\r\n                });\r\n              })\r\n              .otherwise(function(error) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  isError: true,\r\n                  message: error.message\r\n                });\r\n              });\r\n        });\r\n        port.start();\r\n      });\r\n    }\r\n\r\n    window.addEventListener("message", windowMessageHandler);\r\n  \x3c/script\x3e\r\n\x3c/head\x3e\r\n\x3cbody\x3e\r\n\x3c/body\x3e\r\n\x3c/html\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/fillShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"fillVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR)|| defined(VV_OPACITY)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n    \r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) { \r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) { \r\n        return fallback;\r\n      }\r\n      \r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      attribute vec2 a_pos;\r\n      attribute vec4 a_id; // since we need to render the Id as a color we need to break it into RGBA components. so just like a color, the Id is normalized.\r\n      attribute vec4 a_color;\r\n      attribute vec4 a_tlbr;\r\n      attribute vec4 a_aux;\r\n\r\n      uniform highp mat4 u_transformMatrix;\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp float v_opacity;\r\n\r\n      // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n      $fillVVUniformsVS\r\n      $fillVVFunctions\r\n\r\n  #ifdef PATTERN\r\n    uniform mediump float u_zoomFactor;\r\n    uniform mediump vec2 u_mosaicSize;\r\n\r\n    varying mediump vec4 v_tlbr;\r\n    varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      void main()\r\n      {\r\n  #ifdef VV_OPACITY\r\n        v_opacity \x3d getVVOpacity(a_vv.y);\r\n  #else\r\n        v_opacity \x3d 1.0;\r\n  #endif\r\n\r\n  #ifdef VV_COLOR\r\n       v_color \x3d getVVColor(a_vv.x, a_color);\r\n  #else\r\n       v_color \x3d a_color;\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef ID\r\n      v_id \x3d a_id;\r\n  #endif // ID\r\n\r\n  #ifdef PATTERN\r\n       // calculate the pattern matrix\r\n       mat3 patternMatrix \x3d mat3(1.0, 0.0, 0.0,\r\n                                 0.0, 1.0, 0.0,\r\n                                 0.0, 0.0, 1.0);\r\n       patternMatrix[0][0] \x3d 1.0 / (u_zoomFactor * a_aux.x);\r\n       patternMatrix[1][1] \x3d 1.0 / (u_zoomFactor * a_aux.y);\r\n\r\n       // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n       // The pattern matrix is a 3x3 scale matrix which \'tiles\' the texture inside the tile, translating from\r\n       // tile coordinates to texture coordinates.\r\n       v_tileTextureCoord \x3d (patternMatrix * vec3(a_pos, 1.0)).xy;\r\n       v_tlbr \x3d vec4(a_tlbr.x / u_mosaicSize.x, a_tlbr.y / u_mosaicSize.y, a_tlbr.z / u_mosaicSize.x, a_tlbr.w / u_mosaicSize.y);\r\n  #endif // PATTERN\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, 0, 1.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n      uniform lowp float u_opacity;\r\n\r\n  #ifdef PATTERN\r\n      uniform lowp sampler2D u_texture;\r\n\r\n      varying mediump vec4 v_tlbr;\r\n      varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp float v_opacity;\r\n\r\n      void main()\r\n      {\r\n  #ifdef PATTERN\r\n         // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n         mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n         // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n         // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n         // we need to only sample from area that has our sprite in the mosaic.\r\n         mediump vec2 samplePos \x3d mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\r\n         // sample the sprite mosaic\r\n         lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n         gl_FragColor \x3d u_opacity * v_opacity * v_color * color;\r\n  #else\r\n        gl_FragColor \x3d u_opacity * v_opacity * v_color;\r\n  #endif // PATTERN\r\n\r\n  #ifdef HIGHLIGHT\r\n        gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n  #endif // HIGHLIGHT\r\n\r\n  #ifdef ID\r\n      //if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n      //  discard;\r\n      //}\r\n      gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/iconShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"rgba2float"\x3e\x3c![CDATA[\r\n    // TODO consider moving this snippet into a util.xml file\r\n\r\n    // Factors to convert rgba back to float\r\n    const vec4 rgba2float_factors \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, rgba2float_factors);\r\n    }\r\n  ]]\x3e\x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY) || defined(VV_ROTATION)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY || VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    uniform lowp float u_vvRotationType;\r\n  #endif // VV_ROTATION\r\n\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      // we need to multiply by 8 in order to translate to tile coordinates\r\n      float interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      interpolationRatio \x3d clamp(interpolationRatio, 0.0, 1.0);\r\n      return u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) {\r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    mat4 getVVRotation(float rotationValue) {\r\n      // YF TODO: if the symbol has rotation we need to combine the symbo\'s rotation with the VV one\r\n      if (isNan(rotationValue)) {\r\n        return mat4(1, 0, 0, 0,\r\n                    0, 1, 0, 0,\r\n                    0, 0, 1, 0,\r\n                    0, 0, 0, 1);\r\n      }\r\n\r\n      float rotation \x3d rotationValue;\r\n      if (u_vvRotationType \x3d\x3d 1.0) {\r\n        rotation \x3d 90.0 - rotation;\r\n      }\r\n\r\n      float angle \x3d C_DEG_TO_RAD * rotation;\r\n\r\n      float sinA \x3d sin(angle);\r\n      float cosA \x3d cos(angle);\r\n\r\n      return mat4(cosA, sinA, 0, 0,\r\n                  -sinA,  cosA, 0, 0,\r\n                  0,     0, 1, 0,\r\n                  0,     0, 0, 1);\r\n    }\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\r\n  \x3csnippet name\x3d"iconVS"\x3e\r\n  \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    //const float C_256_TO_RAD \x3d 3.14159265359 / 128.0;\r\n    const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n    // per quad (instance) attributes (20 bytes \x3d\x3d\x3e equivalent of 5 bytes per vertex)\r\n    attribute vec2 a_pos;\r\n    attribute vec2 a_vertexOffset;\r\n    attribute vec4 a_vertexTex;\r\n\r\n    attribute vec4 a_id; // since we need to render the Id as a color we need to break it into RGBA components. so just like a color, the Id is normalized.\r\n    attribute vec4 a_color;\r\n    attribute vec4 a_outlineColor;\r\n    attribute vec4 a_sizeAndOutlineWidth;\r\n\r\n    // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n    // relative to the tile\'s upper left corner\r\n    // the extrusion vector.\r\n    uniform highp mat4 u_transformMatrix;\r\n    // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n    uniform highp mat4 u_extrudeMatrix;\r\n    // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n    uniform highp vec2 u_normalized_origin;\r\n\r\n    // the size of the mosaic given in pixels\r\n    uniform vec2 u_mosaicSize;\r\n\r\n    // the opacity of the layer given by the painter\r\n    uniform mediump float u_opacity;\r\n\r\n    // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n    varying mediump vec2 v_tex;\r\n    // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n    // opacity of the layer given by the painter\r\n    varying lowp float v_transparency;\r\n    // the of the icon given in pixels\r\n    varying mediump vec2 v_size;\r\n\r\n    // icon color. If is a picture-marker it is used to tint the texture color\r\n    varying lowp vec4 v_color;\r\n\r\n #ifdef SDF\r\n    varying lowp vec4 v_outlineColor;\r\n    varying mediump float v_outlineWidth;\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n    varying highp vec4 v_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    attribute float a_heatmapWeight;\r\n    varying mediump float v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n    // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n    $iconVVUniformsVS\r\n    $iconVVFunctions\r\n\r\n    void main()\r\n    {\r\n      vec2 a_offset \x3d a_vertexOffset;\r\n      vec2 a_tex \x3d a_vertexTex.xy;\r\n      vec2 a_size \x3d a_sizeAndOutlineWidth.xy;\r\n\r\n      // default values (we need them for the variations to come)\r\n      float a_angle \x3d 0.0;\r\n      float delta_z \x3d 0.0;\r\n      float depth \x3d 0.0;\r\n      v_transparency \x3d 1.0;\r\n\r\n  #if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n      // vv size override the original symbol\'s size\r\n      float h \x3d getVVMinMaxSize(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n      float h \x3d u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n      float h \x3d getVVStopsSize(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n      float h \x3d getVVUnitValue(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n      // make sure to preserve the aspect ratio of the symbol\r\n      vec2 size \x3d vec2(h * a_size.x / a_size.y, h);\r\n      vec2 offset \x3d a_offset * size / a_size;\r\n      v_size \x3d size;\r\n  #else\r\n  #ifdef HEATMAP\r\n      // reconstruct the kernel size\r\n      a_size \x3d 9.0 * a_size + 1.0;\r\n  #endif // HEATMAP\r\n\r\n      vec2 offset \x3d a_offset;\r\n      v_size \x3d a_size;\r\n  #endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef SDF\r\n    offset *\x3d 2.0;\r\n  #endif // SDF\r\n\r\n  #ifdef VV_ROTATION\r\n      gl_Position \x3d vec4(u_normalized_origin, depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * getVVRotation(a_vv.w) * vec4(offset, delta_z, 0.0);\r\n  #else\r\n      gl_Position \x3d vec4(u_normalized_origin, depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(offset, delta_z, 0.0);\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_OPACITY\r\n      v_transparency \x3d getVVOpacity(a_vv.z);\r\n  #else\r\n      v_transparency \x3d u_opacity;\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n      v_color \x3d getVVColor(a_vv.y, a_color);\r\n  #else\r\n      v_color \x3d a_color;\r\n  #endif // VV_COLOR\r\n\r\n      // output the texture coordinates and the transparency\r\n      v_tex \x3d a_tex / u_mosaicSize;\r\n\r\n #ifdef SDF\r\n      v_outlineColor \x3d a_outlineColor;\r\n      v_outlineWidth \x3d a_sizeAndOutlineWidth.z;\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n      v_id \x3d a_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    v_heatmapWeight \x3d a_heatmapWeight;\r\n #endif // HEATMAP\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconFS"\x3e\r\n   \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    uniform lowp sampler2D u_texture;\r\n\r\n    varying lowp vec2 v_tex;\r\n    varying lowp float v_transparency;\r\n    varying mediump vec2 v_size;\r\n    varying lowp vec4 v_color;\r\n\r\n #ifdef SDF\r\n    varying lowp vec4 v_outlineColor;\r\n    varying mediump float v_outlineWidth;\r\n\r\n    // we need the conversion function from RGBA to float\r\n    $rgba2float\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n    varying highp vec4 v_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    varying mediump float v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n    const float softEdgeRatio \x3d 1.0; // use blur here if needed\r\n\r\n    void main()\r\n    {\r\n #ifdef SDF\r\n      lowp vec4 fillPixelColor \x3d v_color;\r\n\r\n      // calculate the distance from the edge [-0.5, 0.5]\r\n      float d \x3d 0.5 - rgba2float(texture2D(u_texture, v_tex));\r\n\r\n      // the soft edge ratio is about 1.5 pixels allocated for the soft edge.\r\n      float size \x3d max(v_size.x, v_size.y);\r\n      float dist \x3d d * size * softEdgeRatio;\r\n\r\n      // set the fragment\'s transparency according to the distance from the edge\r\n      fillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\r\n\r\n      // count for the outline\r\n      // therefore tint the entire icon area.\r\n      if (v_outlineWidth \x3e 0.25) {\r\n        lowp vec4 outlinePixelColor \x3d v_outlineColor;\r\n\r\n        // outlines can\'t be larger than the size of the symbol\r\n        float clampedOutlineSize \x3d min(v_outlineWidth, size);\r\n\r\n        outlinePixelColor *\x3d clamp(0.5 - abs(dist) + clampedOutlineSize * 0.5, 0.0, 1.0);\r\n\r\n        // finally combine the outline and the fill colors (outline draws on top of fill)\r\n        gl_FragColor \x3d v_transparency * ((1.0 - outlinePixelColor.a) * fillPixelColor + outlinePixelColor);\r\n      }\r\n      else {\r\n        gl_FragColor \x3d v_transparency * fillPixelColor;\r\n      }\r\n #else // not an SDF\r\n      lowp vec4 texColor \x3d texture2D(u_texture, v_tex);\r\n\r\n #ifdef HEATMAP\r\n      texColor.r *\x3d v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n      gl_FragColor \x3d v_transparency * texColor;\r\n #endif // SDF\r\n\r\n #ifdef HIGHLIGHT\r\n      gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n #endif // HIGHLIGHT\r\n\r\n #ifdef ID\r\n      if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n        discard;\r\n      }\r\n      gl_FragColor \x3d v_id;\r\n #endif // ID\r\n    }\r\n   ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/labelShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"labelVS"\x3e\r\n  \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n      attribute vec2 a_pos;                  // 2 * 2 (2 x signed 16)\r\n      attribute vec4 a_color;                // 4 (4 x unsigned byte)\r\n      attribute vec2 a_vertexOffset;         // 2 * 2 // (2 x signed 16) offset from the anchor point of the string\r\n      attribute vec4 a_texAndSize;          // 4 (4 x unsigned byte) texture coordinatesm and font size. w is for the halo size\r\n      attribute vec4 a_refSymbolAndPlacementOffset; // 4 (4 x unsigned byte) the offset of the reference symbol of the feature (x,y) and the placement offset (z, w) all given in pixels\r\n\r\n      attribute lowp float  a_visible; // a one byte controlling the visibility of the vertex (a separate visibility buffer), values are 0 or 1 (visible)\r\n\r\n      attribute mediump vec2 a_visibilityRange; // 2 x unsigned byte;\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n      uniform float u_pixelRatio;\r\n\r\n      // the opacity of the layer\r\n      uniform mediump float u_opacity;\r\n\r\n      // the curent zoom\r\n      uniform mediump float u_zoomLevel; // the current zoom level X 10\r\n      uniform lowp float u_mapRotation;\r\n      uniform lowp float u_mapAligned;\r\n\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n    #ifdef ID\r\n       uniform mediump float u_fadeStep;\r\n       varying mediump float v_fadeStep;\r\n    #else\r\n       varying mediump vec4 v_color;\r\n    #endif // ID\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n      // by 16 and then at the shader devide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 8.0;\r\n      const float outlineScale \x3d 1.0 / 10.0;\r\n      const float sdfFontSize \x3d 24.0;\r\n\r\n      // maximum SDF distance of 8 pixels represent the distance values that range from -2 inside the geometry to 6 on the outside.\r\n      // 6 is actually the maximum distance outside the glyph, therefore it is the limitation of the halo which is 1/4 of the geometry size.\r\n      const float maxSdfDistance \x3d 8.0;\r\n\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n      void main()\r\n      {\r\n        // make sure to clip the vertices in case that given record is marked as invisible\r\n        float z \x3d 2.0 * (1.0 - a_visible);\r\n\r\n        // clip the vertex if we are beyond the visibility range of the vertex\r\n        // please note: min value of 0 is regarded infinity. max value of 255 is regarded infinity\r\n        z +\x3d 1.0 + sign(a_visibilityRange.x - u_zoomLevel);\r\n        z +\x3d 1.0 + sign(u_zoomLevel - a_visibilityRange.y);\r\n\r\n        // we use the list significant bit of the position in order to store the indication whethe the vertex is of a halow of a glyph\r\n        mediump float halo \x3d mod(a_pos, 2.0).x;\r\n\r\n        float fontSize \x3d a_texAndSize.z;\r\n\r\n        float fontScale \x3d fontSize / sdfFontSize;\r\n        // we need to scale the extrude matrix by the font-scale in order to get the right text size\r\n        mat4 extrudeMatrix \x3d fontScale * u_extrudeMatrix;\r\n\r\n        float mapRotation \x3d u_mapAligned * C_DEG_TO_RAD * -u_mapRotation;\r\n        float sinA \x3d sin(mapRotation);\r\n        float cosA \x3d cos(mapRotation);\r\n\r\n        mat4 mapRotationMat \x3d mat4(cosA, sinA, 0.0, 0.0,\r\n                                  -sinA, cosA, 0.0, 0.0,\r\n                                    0.0,  0.0, 1.0, 0.0,\r\n                                    0.0,  0.0, 0.0, 1.0);\r\n\r\n        vec4 refSymbolOffset \x3d mapRotationMat *  vec4(a_refSymbolAndPlacementOffset.xy, 0.0, 0.0);\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) +\r\n                      u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) +\r\n                      u_extrudeMatrix * vec4(refSymbolOffset.xy + a_refSymbolAndPlacementOffset.zw, 0.0, 0.0) +\r\n                      extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n\r\n        v_tex \x3d a_texAndSize.xy / u_mosaicSize;\r\n        v_antialiasingWidth \x3d 0.106 * sdfFontSize / fontSize / u_pixelRatio;\r\n        // if halo.x is zero (not a halo) v_edgeDistanceOffset will end up being zero as well.\r\n        v_edgeDistanceOffset \x3d halo * outlineScale * a_texAndSize.w / fontScale / maxSdfDistance;\r\n\r\n        v_transparency \x3d u_opacity;\r\n\r\n      #ifdef ID\r\n        v_fadeStep \x3d u_fadeStep;\r\n      #else\r\n        v_color \x3d a_color;\r\n      #endif // ID\r\n      }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"labelFS"\x3e\r\n   \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      uniform mediump sampler2D u_referenceTex;\r\n      uniform mediump vec2 u_screenSize;\r\n      uniform mediump float u_pixelRatio;\r\n\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n      varying mediump vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n\r\n    #ifdef ID\r\n      varying mediump float v_fadeStep;\r\n    #else\r\n      uniform lowp sampler2D u_texture;\r\n      varying mediump vec4 v_color;\r\n    #endif // ID\r\n\r\n    const vec3 epsilon \x3d vec3(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);\r\n\r\n      void main()\r\n      {\r\n        mediump vec2 refTextPos \x3d gl_FragCoord.xy / (u_pixelRatio * u_screenSize.xy);\r\n        mediump vec4 referenceFragment \x3d texture2D(u_referenceTex, refTextPos);\r\n    #ifdef ID\r\n        mediump float alpha \x3d clamp(referenceFragment.a + v_fadeStep, 0.0, 1.0);\r\n        // fill the whole quad\r\n        gl_FragColor \x3d vec4(alpha);\r\n    #else\r\n        // read the fade alpha\r\n        lowp float fadeAlpha \x3d referenceFragment.a;\r\n\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // the edge distance if a factor of the outline width\r\n        float glyphEdgeDistance \x3d 0.75 - v_edgeDistanceOffset;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        lowp float sdfAlpha \x3d smoothstep(glyphEdgeDistance - v_antialiasingWidth, glyphEdgeDistance + v_antialiasingWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d fadeAlpha * sdfAlpha * v_transparency * v_color;\r\n    #endif\r\n      }\r\n   ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/lineShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"thinLineParams"\x3e\r\n     \x3c![CDATA[\r\n    float thinLineHalfWidth \x3d 1.0; // meaning that a 2 pixels line width is considered a thin line\r\n    float thinLineWidthFactor \x3d 1.1;\r\n     ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY)\r\n    attribute vec3 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n    \r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      float f \x3d (sizeValue - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      return clamp(mix(u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w, f), u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) { \r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVS"\x3e\r\n    \x3c![CDATA[\r\n     precision mediump float;\r\n\r\n     attribute vec2 a_pos;\r\n     attribute vec4 a_id;\r\n     attribute vec4 a_color;\r\n     attribute vec4 a_offsetAndNormal;\r\n     attribute vec2 a_accumulatedDistanceAndHalfWidth;\r\n     attribute vec4 a_tlbr;\r\n     attribute vec4 a_segmentDirection;\r\n\r\n     // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n     // relative to the tile\'s upper left corner\r\n     // the extrusion vector.\r\n     uniform highp mat4 u_transformMatrix;\r\n     // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n     uniform highp mat4 u_extrudeMatrix;\r\n     // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n     uniform highp vec2 u_normalized_origin;\r\n     uniform lowp float u_opacity; // the layer\'s opacity\r\n     uniform mediump float u_zoomFactor;\r\n     uniform mediump float u_antialiasing;\r\n\r\n     // the interpolated normal to the line. the information is packed into the two LSBs of the vertex coordinate\r\n     varying mediump vec2 v_normal;\r\n     varying mediump float v_lineHalfWidth;\r\n     varying lowp vec4 v_color;\r\n     varying lowp float v_transparency;\r\n\r\n     const float scale \x3d 1.0 / 31.0;\r\n#ifdef SDF\r\n     const float widthFactor \x3d 2.0;\r\n#else\r\n     const float widthFactor \x3d 1.0;\r\n#endif\r\n\r\n\r\n#ifdef PATTERN\r\n     uniform mediump vec2 u_mosaicSize;\r\n\r\n     varying mediump vec4 v_tlbr; // normalized pattern coordinates [0, 1]\r\n     varying mediump vec2 v_patternSize;\r\n#endif // PATTERN\r\n\r\n// we need to accumulated distance only if it is a pattern or an SDF line\r\n#if defined(PATTERN) || defined(SDF)\r\n     varying highp float v_accumulatedDistance;\r\n#endif // PATTERN SDF\r\n\r\n#ifdef ID\r\n     varying highp vec4 v_id;\r\n#endif // ID\r\n\r\n     // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n     $lineVVUniformsVS\r\n     $lineVVFunctions\r\n\r\n     void main()\r\n     {\r\n     // size VV block\r\n#if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n#ifdef VV_SIZE_MIN_MAX_VALUE\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVMinMaxSize(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n#ifdef VV_SIZE_SCALE_STOPS\r\n       mediump float lineHalfWidth \x3d 0.5 * u_vvSizeScaleStopsValue;\r\n#endif // VV_SIZE_SCALE_STOPS\r\n\r\n#ifdef VV_SIZE_FIELD_STOPS\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVStopsSize(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_FIELD_STOPS\r\n\r\n#ifdef VV_SIZE_UNIT_VALUE\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVUnitValue(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_UNIT_VALUE\r\n\r\n#else // no VV\r\n       mediump float lineHalfWidth \x3d a_accumulatedDistanceAndHalfWidth.y * scale;\r\n#endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n#ifdef VV_OPACITY\r\n      v_transparency \x3d u_opacity * getVVOpacity(a_vv.z);\r\n#else\r\n      v_transparency \x3d u_opacity;\r\n#endif // VV_OPACITY\r\n\r\n#ifdef VV_COLOR\r\n      v_color \x3d getVVColor(a_vv.y, a_color);\r\n#else\r\n      v_color \x3d a_color;\r\n#endif // VV_COLOR\r\n\r\n       // make sure to clip the vertices in case that the width of the line is 0 (or negative)\r\n       float z \x3d 2.0 * step(lineHalfWidth, 0.0);\r\n\r\n       // add an antialiasing distance. We use 0.2 rather than 0.5 in order to match the SVG renderer\r\n       // also limit the total line width to 1.3 pixels. Below this value lines don\'t look good compared to the SVG renderer\r\n       lineHalfWidth \x3d max(lineHalfWidth, 0.45) + 0.2 * u_antialiasing;\r\n\r\n       // include the thin line parameters (thinLineHalfWidth and thinLineWidthFactor)\r\n       $thinLineParams\r\n       // for now assume that a thin line is a line which is under 2 pixels (1 pixels on either sides of the centerline)\r\n       // in practice, a thin line is a line who\'s half width vary from 0.45px to the value of thinLineHalfWidth, as the value\r\n       // is claped in line 221 above\r\n       mediump float thinLineFactor \x3d max(thinLineWidthFactor * step(lineHalfWidth, thinLineHalfWidth), 1.0);\r\n\r\n       v_lineHalfWidth \x3d lineHalfWidth;\r\n\r\n       // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n       // sake of using less attribute memory, we need to scale it back to the original range of ~ [0, 1])\r\n       // in a case of a thin line we move each vertex twice as far\r\n       mediump vec2 dist \x3d thinLineFactor * widthFactor * lineHalfWidth * a_offsetAndNormal.xy * scale;\r\n\r\n       // transform the vertex\r\n       gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, z, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\r\n       v_normal \x3d a_offsetAndNormal.zw * scale;\r\n\r\n#if defined(PATTERN) || defined(SDF)\r\n       v_accumulatedDistance \x3d a_accumulatedDistanceAndHalfWidth.x + dot(scale * a_segmentDirection.xy, dist / u_zoomFactor);\r\n#endif // PATTERN || SDF\r\n\r\n#ifdef PATTERN\r\n      v_tlbr \x3d vec4(a_tlbr.x / u_mosaicSize.x, a_tlbr.y / u_mosaicSize.y, a_tlbr.z / u_mosaicSize.x, a_tlbr.w / u_mosaicSize.y);\r\n      v_patternSize \x3d vec2(a_tlbr.z - a_tlbr.x, a_tlbr.w - a_tlbr.y);\r\n#endif // PATTERN\r\n\r\n#ifdef ID\r\n      v_id \x3d a_id;\r\n#endif // ID\r\n     }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineFS"\x3e\r\n    \x3c![CDATA[\r\n       precision lowp float;\r\n\r\n       uniform lowp float u_blur;\r\n       uniform mediump float u_antialiasing;\r\n\r\n       varying mediump vec2 v_normal;\r\n       varying mediump float v_lineHalfWidth;\r\n       varying lowp vec4 v_color;\r\n       varying lowp float v_transparency;\r\n\r\n#if defined(PATTERN) || defined(SDF)\r\n      uniform sampler2D u_texture;\r\n      uniform mediump float u_zoomFactor;\r\n\r\n      varying mediump vec4 v_tlbr; // normalized pattern coordinates [0, 1]\r\n      varying mediump vec2 v_patternSize;\r\n      varying highp float v_accumulatedDistance;\r\n#endif // PATTERN SDF\r\n\r\n#ifdef SDF\r\n      const float sdfPatternHalfWidth \x3d 15.5; // YF: assumed that the width will be set to 31\r\n     const float widthFactor \x3d 2.0;\r\n\r\n    // Factors to convert rgba back to float\r\n    const vec4 rgba2float_factors \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, rgba2float_factors);\r\n    }\r\n#endif // SDF\r\n\r\n#ifdef ID\r\n     varying highp vec4 v_id;\r\n#endif // ID\r\n\r\n       void main()\r\n       {\r\n         // include the thin line parameters (thinLineHalfWidth and thinLineWidthFactor)\r\n         $thinLineParams\r\n\r\n         // for now assume that a thin line is a line which is under 2 pixels (1 pixels on either sides of the centerline)\r\n         mediump float thinLineFactor \x3d max(thinLineWidthFactor * step(v_lineHalfWidth, thinLineHalfWidth), 1.0);\r\n\r\n         // dist represent the distance of the fragment from the line. 1.0 or -1.0 will be the values on the edge of the line,\r\n         // and any value in between will be inside the line (the sign represent the direction - right or left).\r\n         // since u_linewidth.s (half line width) is represented in pixels, dist is also given in pixels\r\n         mediump float fragDist \x3d length(v_normal) * v_lineHalfWidth;\r\n\r\n         // calculate the alpha given the difference between the line-width and the distance of the fragment from the center-line.\r\n         // when it is a thin line then use a slightly shallower slope in order to add more feathering\r\n         lowp float alpha \x3d clamp(thinLineFactor * (v_lineHalfWidth - fragDist) / (u_blur + thinLineFactor - 1.0), 0.0, 1.0);\r\n\r\n#if defined(SDF)\r\n         mediump float lineHalfWidth \x3d widthFactor * v_lineHalfWidth;\r\n         mediump float lineWidthRatio \x3d lineHalfWidth / sdfPatternHalfWidth;\r\n         mediump float relativeTexX \x3d mod((u_zoomFactor * v_accumulatedDistance + v_normal.x * lineHalfWidth) / (lineWidthRatio * v_patternSize.x), 1.0);\r\n         mediump float relativeTexY \x3d 0.5 + 0.5 * v_normal.y;\r\n\r\n          // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n         mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\r\n\r\n         // calculate the distance from the edge [-0.5, 0.5]\r\n         mediump float d \x3d rgba2float(texture2D(u_texture, texCoord)) - 0.5;\r\n\r\n         // the distance is a proportional to the line width\r\n         float dist \x3d d * lineHalfWidth;\r\n\r\n         lowp vec4 fillPixelColor \x3d v_transparency * alpha * clamp(0.5 - dist, 0.0, 1.0) * v_color;\r\n        gl_FragColor \x3d fillPixelColor;\r\n#elif defined(PATTERN)\r\n         // we need to calculate the relative portion of the line texture along the line given the accumulated distance along the line\r\n         // The computed value should is anumber btween 0 and 1 which will later be used to interpolate btween the BR and TL values\r\n         mediump float relativeTexX \x3d mod((u_zoomFactor * v_accumulatedDistance + v_normal.x * v_lineHalfWidth) / v_patternSize.x, 1.0);\r\n\r\n         // in order to calculate the texture coordinates prependicular to the line (Y axis), we use the interpolated normal values\r\n         // which range from -1.0 to 1.0. On the line\'s centerline, the value of the interpolated normal is 0.0, however the relative\r\n         // texture value shpould be 0.5 (given that at the bottom of the line, the texture coordinate must be equal to 0.0)\r\n         // (TL) ---------------------------      --\x3e left edge of line. Interpolatedf normal is 1.0\r\n         //              | -\x3e line-width / 2\r\n         //      - - - - - - - - - - - - - -\r\n         //              | -\x3e line-width / 2\r\n         //      ---------------------------- (BR)--\x3e right edge of line. Interpolatedf normal is -1.0\r\n\r\n         mediump float relativeTexY \x3d 0.5 + (v_normal.y * v_lineHalfWidth / v_patternSize.y);\r\n\r\n         // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n         mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\r\n\r\n         // get the color from the texture\r\n         lowp vec4 color \x3d texture2D(u_texture, texCoord);\r\n\r\n         gl_FragColor \x3d v_transparency * alpha * v_color * color;\r\n#else // solid line (no texture, no pattern)\r\n         // output the fragment color\r\n         gl_FragColor \x3d v_transparency * alpha * v_color;\r\n#endif // SDF\r\n\r\n#ifdef HIGHLIGHT\r\n         gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n#endif // HIGHLIGHT\r\n\r\n #ifdef ID\r\n         if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n           discard;\r\n         }\r\n         gl_FragColor \x3d v_id;\r\n #endif // ID\r\n       }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/textShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n\x3csnippet name\x3d"textVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY) || defined(VV_ROTATION)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY || VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    uniform lowp float u_vvRotationType;\r\n  #endif // VV_ROTATION\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      // we need to multiply by 8 in order to translate to tile coordinates\r\n      float interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      return clamp(u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z), u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) {\r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    mat4 getVVRotation(float rotationValue) {\r\n      // YF TODO: if the symbol has rotation we need to combine the symbo\'s rotation with the VV one\r\n      if (isNan(rotationValue)) {\r\n        return mat4(1, 0, 0, 0,\r\n                    0, 1, 0, 0,\r\n                    0, 0, 1, 0,\r\n                    0, 0, 0, 1);\r\n      }\r\n\r\n      float rotation \x3d rotationValue;\r\n      if (u_vvRotationType \x3d\x3d 1.0) {\r\n        rotation \x3d 90.0 - rotation;\r\n      }\r\n\r\n      float angle \x3d C_DEG_TO_RAD * rotation;\r\n\r\n      float sinA \x3d sin(angle);\r\n      float cosA \x3d cos(angle);\r\n\r\n      return mat4(cosA, sinA, 0, 0,\r\n                  -sinA,  cosA, 0, 0,\r\n                  0,     0, 1, 0,\r\n                  0,     0, 0, 1);\r\n    }\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n      attribute vec2 a_pos;           // 2 * 2 (2 x signed 16)\r\n      attribute vec4 a_id;            // 4 (4 x unsigned byte)\r\n      attribute vec4 a_color;         // 4 (4 x unsigned byte)\r\n      attribute vec2 a_vertexOffset; // 2 * 2 // (2 x signed 16) offset from the anchor point of the string\r\n      attribute vec4 a_texFontSize; // 4 (4 x unsigned byte) texture coordinatesm and font size\r\n\r\n      attribute lowp float  a_visible; // a one byte controlling the visibility of the vertex (a separate visibility buffer), values are 0 or 1 (visible)\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n      uniform float u_pixelRatio;\r\n\r\n      // the opacity of the layer\r\n      uniform mediump float u_opacity;\r\n\r\n      varying mediump vec4 v_color;\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n      // by 16 and then at the shader devide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 8.0;\r\n      const float outlineScale \x3d 1.0 / 10.0;\r\n      const float sdfFontSize \x3d 24.0;\r\n\r\n      // maximum SDF distance of 8 pixels represent the distance values that range from -2 inside the geometry to 6 on the outside.\r\n      // 6 is actually the maximum distance outside the glyph, therefore it is the limitation of the halo which is 1/4 of the geometry size.\r\n      const float maxSdfDistance \x3d 8.0;\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n      $textVVUniformsVS\r\n      $textVVFunctions\r\n\r\n      void main()\r\n      {\r\n        // make sure to clip the vertices in case that given record is marked as invisible\r\n        float z \x3d 2.0 * (1.0 - a_visible);\r\n\r\n        // we use the list significant bit of the position in order to store the indication whethe the vertex is of a halow of a glyph\r\n        mediump float halo \x3d mod(a_pos, 2.0).x;\r\n\r\n  #if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n        // vv size override the original symbol\'s size\r\n        vec2 size \x3d vec2(getVVMinMaxSize(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n        vec2 size \x3d vec2(u_vvSizeScaleStopsValue);\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n        vec2 size \x3d vec2(getVVStopsSize(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n        vec2 size \x3d vec2(getVVUnitValue(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n        float fontSize \x3d size.x;\r\n  #else // this generic case, no VV\r\n        float fontSize \x3d a_texFontSize.z;\r\n  #endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n        float fontScale \x3d fontSize / sdfFontSize;\r\n        // we need to scale the extrude matrix by the font-scale in order to get the right text size\r\n        mat4 extrudeMatrix \x3d fontScale * u_extrudeMatrix;\r\n\r\n        // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n        //gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n\r\n    #ifdef VV_ROTATION\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * getVVRotation(a_vv.w) * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n    #else\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n    #endif // VV_ROTATION\r\n\r\n        v_tex \x3d a_texFontSize.xy / u_mosaicSize;\r\n        v_antialiasingWidth \x3d 0.105 * sdfFontSize / fontSize / u_pixelRatio;\r\n        // if halo.x is zero (not a halo) v_edgeDistanceOffset will end up being zero as well.\r\n        v_edgeDistanceOffset \x3d halo * outlineScale * a_texFontSize.w / fontScale / maxSdfDistance;\r\n\r\n    #ifdef VV_OPACITY\r\n        v_transparency \x3d getVVOpacity(a_vv.z);\r\n    #else\r\n        v_transparency \x3d u_opacity;\r\n    #endif // VV_OPACITY\r\n\r\n    #ifdef VV_COLOR\r\n       // we don\'t want to override the halo color\r\n       v_color \x3d halo * a_color + (1.0 - halo) * getVVColor(a_vv.y, a_color);\r\n    #else\r\n        v_color \x3d a_color;\r\n    #endif // VV_COLOR\r\n\r\n  #ifdef ID\r\n        v_id \x3d a_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      uniform lowp sampler2D u_texture;\r\n\r\n      varying mediump vec4 v_color;\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n      varying mediump vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n\r\n  #ifdef ID\r\n      varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      void main()\r\n      {\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // the edge distance if a factor of the outline width\r\n        float glyphEdgeDistance \x3d 0.75 - v_edgeDistanceOffset;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        lowp float alpha \x3d smoothstep(glyphEdgeDistance - v_antialiasingWidth, glyphEdgeDistance + v_antialiasingWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d alpha * v_color;\r\n\r\n  #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/backgroundShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"backgroundVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_coord_range;\r\n    uniform mediump float u_depth;\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(u_coord_range * a_pos, 0.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"backgroundFS"\x3e\r\n  \x3c![CDATA[\r\n    uniform lowp vec4 u_color;\r\n    void main() {\r\n      gl_FragColor \x3d u_color;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/bitblitShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"bitblitVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n    attribute vec2 a_tex;\r\n\r\n    varying mediump vec2 v_uv;\r\n\r\n    void main(void) {\r\n      gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n      v_uv \x3d a_tex;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"bitblitFS"\x3e\r\n  \x3c![CDATA[\r\n    \tuniform lowp sampler2D u_tex;\r\n      uniform lowp float u_opacity;\r\n\r\n      varying mediump vec2 v_uv;\r\n\r\n      void main() {\r\n        lowp vec4 color \x3d texture2D(u_tex, v_uv);\r\n\r\n        // Note: output in pre-multiplied alpha for correct alpha compositing\r\n        gl_FragColor \x3d color *  u_opacity;\r\n      }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/stencilShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"stencilVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"stencilFS"\x3e\r\n  \x3c![CDATA[\r\n    void main() {\r\n      gl_FragColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/tileInfo.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"tileInfoVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_depth;\r\n    uniform mediump float u_coord_ratio;\r\n    uniform mediump vec2 u_delta; // in tile coordinates\r\n    uniform mediump vec2 u_dimensions; // in tile coordinates\r\n\r\n    varying mediump vec2 v_tex;\r\n\r\n    void main() {\r\n      mediump vec2 offests \x3d u_coord_ratio * vec2(u_delta + a_pos * u_dimensions);\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(offests, 0.0, 1.0);\r\n\r\n      v_tex \x3d a_pos;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"tileInfoFS"\x3e\r\n  \x3c![CDATA[\r\n    uniform mediump sampler2D u_texture;\r\n    varying mediump vec2 v_tex;\r\n\r\n    void main(void) {\r\n      lowp vec4 color \x3d texture2D(u_texture, v_tex);\r\n      gl_FragColor \x3d 0.75 * color;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/hlShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Highlight generation and rendering shaders.\r\n\r\n  These shader sources are loaded by hlShaderSnippets.ts which in turn\r\n  is used by HighlightRenderer to instantiate the programs needed for\r\n  generating and rendering the highlights.\r\n\r\n  These shaders are intended to be used with full screen quads.\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3c!--\r\n    Vertex shader: texturedVS\r\n\r\n    Identity vertex shader that outputs an untransformed 2-D vertex\r\n    and passes its texture coordinates unchanged to the interpolator.\r\n  --\x3e\r\n  \x3csnippet name\x3d"texturedVS"\x3e\r\n    \x3c![CDATA[\r\n    // Vertex position.\r\n    attribute mediump vec2 a_position;\r\n\r\n    // Texture coordinates.\r\n    attribute mediump vec2 a_texcoord;\r\n\r\n    // Texture coordinates to be interpolated.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    void main(void) {\r\n      // Pass the position unchanged.\r\n      gl_Position \x3d vec4(a_position, 0.0, 1.0);\r\n\r\n      // Pass the texture coordinates unchanged.\r\n      v_texcoord \x3d a_texcoord;\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3c!--\r\n    Fragment shader: blurFS\r\n\r\n    A gaussian blur shader. It blurs the alpha channel of its input\r\n    according to 4 different sigma and stores the results into the\r\n    four channel of the target framebuffer.\r\n\r\n    It is intended to be called twice; the first time to perform an\r\n    horizontal blur, and a second time to perform a vertical blur.\r\n\r\n    This shader is used to turn the highlight mask into a highlight\r\n    map. The highlight map is an approximation of the signed distance\r\n    field of the mask.\r\n  --\x3e\r\n  \x3csnippet name\x3d"blurFS"\x3e\r\n    \x3c![CDATA[\r\n    // Interpolated texture coordinates.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    // Blur direction information. There are two possible\r\n    // configurations that the host code can use.\r\n    //  - [1, 0, 1/WIDTH, 0] Used when blurring horizontally. In this\r\n    //    case u_direction[0] \x3d 1 is expressed in pixel and is fed to\r\n    //    the gauss function to produce the value of the gaussian weight\r\n    //    for that pixel, while u_direction[2] \x3d 1/WIDTH is in texel units\r\n    //    and is used to sample the right texel from the texture map.\r\n    //  - [0, 1, 0, 1/HEIGHT] Used when blurring vertically. In this\r\n    //    case u_direction[1] \x3d 1 is expressed in pixel and is fed to\r\n    //    the gauss function to produce the value of the gaussian weight\r\n    //    for that pixel, while u_direction[3] \x3d 1/HEIGHT is in texel units\r\n    //    and is used to sample the right texel from the texture map.\r\n    uniform mediump vec4 u_direction;\r\n\r\n    // Source to destination channel selection matrix.\r\n    uniform mediump mat4 u_channelSelector;\r\n\r\n    // The highlight map is obtained by blurring the alpha channel of the highlight\r\n    // mask accroding to these 4 values of the gaussian\'s sigma parameter.\r\n    uniform mediump vec4 u_sigmas;\r\n\r\n    // This is the highlight mask if we have not blurred horizontally yet, otherwise\r\n    // it is the horizontally blurred highlight map and blurring it one more time\r\n    // vertically will complete the process.\r\n    uniform sampler2D u_texture;\r\n\r\n    // The gaussian kernel. Note that it lacks the normalization constant, because\r\n    // we want to store it unnormalized in the highlight map (i.e. having a peak\r\n    // value of 1). Note also that we are using the SIMD (single instruction, multiple\r\n    // data) capabilities of the GPU to compute four different gaussian kernels, one\r\n    // for each sigma.\r\n    mediump vec4 gauss(mediump vec2 dir) {\r\n      return exp(-dot(dir, dir) / (2.0 * u_sigmas * u_sigmas));\r\n    }\r\n\r\n    mediump vec4 selectChannel(mediump vec4 sample) {\r\n      return u_channelSelector * sample;\r\n    }\r\n\r\n    // Sample the input texture and accumulated its gaussian weighted value and the\r\n    // total weight.\r\n    void accumGauss(mediump float i, inout mediump vec4 tot, inout mediump vec4 weight) {\r\n      // Computes the gaussian weights, one for each sigma.\r\n      // Note that u_direction.xy is [1, 0] when blurring horizontally and [0, 1] when blurring vertically.\r\n      mediump vec4 w \x3d gauss(i * u_direction.xy);\r\n\r\n      // Accumumates the values.\r\n      // Note that u_direction.xy is [1/WIDTH, 0] when blurring horizontally and [0, 1/HEIGHT] when blurring vertically.\r\n      tot +\x3d selectChannel(texture2D(u_texture, v_texcoord + i * u_direction.zw)) * w;\r\n\r\n      // Accumulates the weights.\r\n      weight +\x3d w;\r\n    }\r\n\r\n    void main(void) {\r\n      // Initialize accumulated values and weights to zero.\r\n      mediump vec4 tot \x3d vec4(0.0, 0.0, 0.0, 0.0);\r\n      mediump vec4 weight \x3d vec4(0.0, 0.0, 0.0, 0.0);\r\n\r\n      // Accumulates enough samples. These will be taken\r\n      // horizontally or vertically depending on the value\r\n      // of u_direction.\r\n      accumGauss(-5.0, tot, weight);\r\n      accumGauss(-4.0, tot, weight);\r\n      accumGauss(-3.0, tot, weight);\r\n      accumGauss(-2.0, tot, weight);\r\n      accumGauss(-1.0, tot, weight);\r\n      accumGauss(0.0, tot, weight);\r\n      accumGauss(1.0, tot, weight);\r\n      accumGauss(2.0, tot, weight);\r\n      accumGauss(3.0, tot, weight);\r\n      accumGauss(4.0, tot, weight);\r\n      accumGauss(5.0, tot, weight);\r\n\r\n      // Compute blurred values.\r\n      mediump vec4 rgba \x3d tot / weight;\r\n\r\n      // Return the values. Note that each channel will contain\r\n      // the result of a different blur operation, one for each\r\n      // of the four chosen sigma.\r\n      gl_FragColor \x3d vec4(rgba);\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3c!--\r\n    Fragment shader: highlightFS\r\n\r\n    Takes as input the highlight map, estimated the signed distance field,\r\n    and shades the fragments according to their estimated distance from the\r\n    edge of the highlighted feature.\r\n\r\n    A shade texture is used to turn distance values into colors; the shade\r\n    texture is basically a color gradient and is recomputed on the host\r\n    every time that the user alters the highlight options.\r\n  --\x3e\r\n  \x3csnippet name\x3d"highlightFS"\x3e\r\n    \x3c![CDATA[\r\n    // Interpolated texture coordinates.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    // The highlight map. Each channel is a blurred\r\n    // version of the alpha channel of the highlight mask.\r\n    //  - Channel 0 (red) corresponds to a gaussian blur with sigma \x3d u_sigmas[0];\r\n    //  - Channel 1 (green) corresponds to a gaussian blur with sigma \x3d u_sigmas[1];\r\n    //  - Channel 2 (blue) corresponds to a gaussian blur with sigma \x3d u_sigmas[2];\r\n    //  - Channel 3 (alpha) corresponds to a gaussian blur with sigma \x3d u_sigmas[3];\r\n    // As of today, only channel 3 is used for distance estimation.\r\n    // But the availability of different amounts of blur leaves the\r\n    // door open to multi-scale approaches.\r\n    uniform sampler2D u_texture;\r\n\r\n    // The highlight map was obtained by blurring the alpha channel of the highlight\r\n    // mask accroding to these 4 values of the gaussian\'s sigma parameter.\r\n    uniform mediump vec4 u_sigmas;\r\n\r\n    // A 1-D texture used to shade the highlight.\r\n    uniform sampler2D u_shade;\r\n\r\n    // The 1-D shade texture is spreaded between u_minMaxDistance[0] and u_minMaxDistance[1].\r\n    uniform mediump vec2 u_minMaxDistance;\r\n\r\n    // Signed distance estimation.\r\n    mediump float estimateDistance() {\r\n      // Use the largest sigma and the corresponding distance value stored in the\r\n      // last channel of the highlight map.\r\n      mediump float sigma \x3d u_sigmas[3];\r\n      mediump float y \x3d texture2D(u_texture, v_texcoord)[3];\r\n\r\n      // Estimates the distance by linearization and local inversion around\r\n      // the inflection point. The inflection point is in x \x3d 0.\r\n      const mediump float y0 \x3d 0.5;                           // Value of the convolution at the inflection point.\r\n      mediump float m0 \x3d 1.0 / (sqrt(2.0 * 3.1415) * sigma);  // Slope of the convolution at the inflection point.\r\n      mediump float d \x3d (y - y0) / m0;                        // Inversion of a local linearization.\r\n\r\n      // Return the estimated distance.\r\n      return d;\r\n    }\r\n\r\n    // Shading based on estimated distance.\r\n    mediump vec4 shade(mediump float d) {\r\n      // Maps the sampled distance from the [A, D] range (see HighlightRenderer::setHighlightOptions) to [0, 1].\r\n      mediump float mappedDistance \x3d (d - u_minMaxDistance.x) / (u_minMaxDistance.y - u_minMaxDistance.x);\r\n\r\n      // Force to [0, 1]; it should not be necessary because the shade texture uses the CLAMP address mode, so\r\n      // this should happen anyway internally to the sampler, but in practice it is needed to avoid weird\r\n      // banding artifacts.\r\n      // We don\'t really know if we need this or not.\r\n      mappedDistance \x3d clamp(mappedDistance, 0.0, 1.0);\r\n\r\n      // Sample the 1-D shade texture on its center line (i.e. on t\x3d0.5).\r\n      return texture2D(u_shade, vec2(mappedDistance, 0.5));\r\n    }\r\n\r\n    void main(void) {\r\n      // Estimate the distance.\r\n      mediump float d \x3d estimateDistance();\r\n\r\n      // Shade the distance.\r\n      gl_FragColor \x3d shade(d);\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/backgroundShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"backgroundVS"\x3e\r\n    \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    attribute vec2 a_pos;\r\n\r\n  #ifdef ID\r\n    uniform mediump vec4 u_id;\r\n    varying mediump vec4 v_id;\r\n  #endif // ID\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_coord_range;\r\n    uniform mediump float u_depth;\r\n\r\n  #ifdef PATTERN\r\n    uniform mediump mat3 u_pattern_matrix; // can we use medium precision?\r\n    varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(u_coord_range * a_pos, 0.0, 1.0);\r\n\r\n  #ifdef PATTERN\r\n      // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n      // The pattern matrix is a 3x3 scale matrix which \'tiles\' the texture inside the tile, translating from tile coordinates\r\n      v_tileTextureCoord \x3d (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n      v_id \x3d u_id / 255.0;\r\n  #endif // ID\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"backgroundFS"\x3e\r\n    \x3c![CDATA[\r\n  #ifdef PATTERN\r\n    uniform lowp float u_opacity;\r\n    uniform mediump vec2 u_pattern_tl;\r\n    uniform mediump vec2 u_pattern_br;\r\n    uniform sampler2D u_texture;\r\n\r\n    varying mediump vec2 v_tileTextureCoord;\r\n  #else\r\n    uniform lowp vec4 u_color;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying mediump vec4 v_id;\r\n  #endif // ID\r\n\r\n    void main() {\r\n  #ifdef PATTERN\r\n      // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n      mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n\r\n      // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n      // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n      // we need to only sample from area that has our sprite in the mosaic.\r\n      mediump vec2 samplePos \x3d mix(u_pattern_tl, u_pattern_br, normalizedTextureCoord);\r\n\r\n      // sample the sprite mosaic\r\n      lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n      gl_FragColor \x3d u_opacity * color;\r\n  #else\r\n      gl_FragColor \x3d u_color;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n      if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n        discard;\r\n      }\r\n      gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/circleShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link module:esri/views/vectorTiles/renderers/vtShaderSnippets vtShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"circleVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      attribute vec2 a_pos;\r\n      attribute vec4 a_color;\r\n      attribute vec4 a_stroke_color;\r\n      attribute vec4 a_data;\r\n\r\n      const float sizePrecision \x3d 0.25; // 1/4\r\n      const float blurPrecision \x3d 0.03125; // 1/32\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp vec4 v_stroke_color;\r\n      varying mediump float v_blur;\r\n      varying mediump float v_stroke_width;\r\n      varying mediump float v_radius;\r\n      varying mediump vec2 v_offset;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      // the z of the layer. Given by the order of the layers in the style\r\n      uniform mediump float u_depth;\r\n\r\n      // the opacity of the layer given by the painter\r\n      uniform mediump float u_radius;\r\n      uniform lowp vec4 u_color;\r\n      uniform mediump float u_blur;\r\n      uniform mediump float u_stroke_width;\r\n      uniform lowp vec4 u_stroke_color;\r\n\r\n      uniform mediump float u_antialiasingWidth; // antialiasing (factors in the pixel_ratio for high res devices)\r\n\r\n      void main()\r\n      {\r\n        v_color \x3d a_color * u_color;\r\n        v_stroke_color \x3d a_stroke_color * u_stroke_color;\r\n        v_stroke_width \x3d a_data[1] * sizePrecision * u_stroke_width;\r\n        v_radius \x3d a_data[2] * u_radius;\r\n        v_blur \x3d max(a_data[0] * blurPrecision + u_blur, u_antialiasingWidth / (v_radius + v_stroke_width));\r\n\r\n        mediump vec2 offset \x3d vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\r\n        v_offset \x3d offset;\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos * 0.5, 0.0, 1.0) + u_extrudeMatrix * (v_radius + v_stroke_width) * vec4(offset, 0.0, 0.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"circleFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp vec4 v_stroke_color;\r\n      varying mediump float v_blur;\r\n      varying mediump float v_stroke_width;\r\n      varying mediump float v_radius;\r\n      varying mediump vec2 v_offset;\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      void main()\r\n      {\r\n        mediump float dist \x3d length(v_offset);\r\n\r\n        mediump float alpha \x3d smoothstep(0.0, -v_blur, dist - 1.0);\r\n\r\n        lowp float color_mix_ratio \x3d v_stroke_width \x3c 0.01 ? 0.0 : smoothstep(-v_blur, 0.0, dist - v_radius / (v_radius + v_stroke_width));\r\n\r\n        gl_FragColor \x3d alpha * mix(v_color, v_stroke_color, color_mix_ratio);\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/fillShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"fillVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      attribute vec2 a_pos;\r\n\r\n      uniform highp mat4 u_transformMatrix;\r\n      uniform highp vec2 u_normalized_origin;\r\n      uniform mediump float u_depth;\r\n\r\n    #ifdef PATTERN\r\n      uniform mediump mat3 u_pattern_matrix;\r\n      varying mediump vec2 v_tileTextureCoord;\r\n    #endif // PATTERN\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n    #endif // DD\r\n      uniform lowp vec4 u_color;\r\n      varying lowp vec4 v_color;\r\n\r\n      void main()\r\n      {\r\n      #ifdef DD\r\n        v_color \x3d a_color * u_color;\r\n      #else\r\n        v_color \x3d u_color;\r\n      #endif // DD\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n      #ifdef PATTERN\r\n        // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n        // The pattern matrix is a 3x3 scale matrix which \'tiles\' the texture inside the tile, translating from tile coordinates\r\n        // (-4k to 8k -1) to texture coordinates.\r\n        v_tileTextureCoord \x3d (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\r\n      #endif // PATTERN\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0, 1.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n    #ifdef PATTERN\r\n      uniform mediump vec2 u_pattern_tl;\r\n      uniform mediump vec2 u_pattern_br;\r\n      uniform lowp sampler2D u_texture;\r\n      varying mediump vec2 v_tileTextureCoord;\r\n    #endif // PATTERN\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n\r\n      vec4 mixColors(vec4 color1, vec4 color2) {\r\n        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Alpha_blending)\r\n        // we use pre-multiplied colors hence the need for this kind of mixing. At lease we save ourselves an extra division...\r\n        float compositeAlpha \x3d color2.a + color1.a * (1.0 - color2.a);\r\n        vec3 compositeColor \x3d color2.rgb + color1.rgb * (1.0 - color2.a);\r\n\r\n        return vec4(compositeColor, compositeAlpha);\r\n      }\r\n      void main()\r\n      {\r\n      #ifdef PATTERN\r\n        // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n        mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n\r\n        // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n        // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n        // we need to only sample from area that has our sprite in the mosaic.\r\n        mediump vec2 samplePos \x3d mix(u_pattern_tl, u_pattern_br, normalizedTextureCoord);\r\n\r\n        // sample the sprite mosaic\r\n        lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n        gl_FragColor \x3d v_color[3] * color;\r\n      #else\r\n        gl_FragColor \x3d v_color;\r\n      #endif // PATTERN\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/iconShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link module:esri/views/vectorTiles/renderers/vtShaderSnippets vtShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"rgba2float"\x3e\x3c![CDATA[\r\n    // TODO consider moving this snippet into a util.xml file\r\n    const vec4 rgba2float_factors \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, rgba2float_factors);\r\n    }\r\n  ]]\x3e\x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVS"\x3e\r\n    \x3c![CDATA[\r\n      attribute vec2 a_pos;\r\n      attribute vec2 a_vertexOffset;\r\n      attribute vec4 a_tex;\r\n      attribute vec4 a_levelInfo;\r\n\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n      attribute mediump float a_size;\r\n    #endif // DD\r\n      uniform lowp vec4 u_color;\r\n      uniform mediump float u_size;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n\r\n      // the z of the layer. Given by the order of the layers in the style\r\n      uniform mediump float u_depth;\r\n\r\n      // the map\'s rotation from the north\r\n      uniform mediump float u_mapRotation;\r\n      uniform mediump float u_level;\r\n\r\n      // indicate whether the current set of iconst should be kept upright when the map is rotated\r\n      uniform lowp float u_keepUpright;\r\n\r\n      // the rate of the change in the opacity (fade) of the icons\r\n      uniform mediump float u_fadeSpeed;\r\n\r\n      // the low level we transition (to/from)\r\n      uniform mediump float u_minfadeLevel;\r\n\r\n      // the high level we transition (to/from)\r\n      uniform mediump float u_maxfadeLevel;\r\n\r\n      // the amount of fade given teh current time past the last recorded level\r\n      uniform mediump float u_fadeChange;\r\n\r\n      // the opacity of the layer given by the painter\r\n      uniform mediump float u_opacity;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      varying mediump vec2 v_size;\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precision we multiply the values\r\n      // by 8 and then at the shader devide by the same number\r\n      const float C_OFFSET_PRECISION \x3d 1.0 / 8.0;\r\n\r\n      const float C_256_TO_RAD \x3d 3.14159265359 / 128.0;\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n      const float tileCoordRatio \x3d 1.0 / 8.0;\r\n\r\n      void main()\r\n      {\r\n        mediump float a_labelMinLevel \x3d a_levelInfo[0];\r\n        mediump float a_angle         \x3d a_levelInfo[1];\r\n        mediump float a_minLevel      \x3d a_levelInfo[2];\r\n        mediump float a_maxLevel      \x3d a_levelInfo[3];\r\n\r\n        // if the given vertex should not be visible simply clip it by adding it a value that will push it outside the clipping plane\r\n        mediump float delta_z \x3d 0.0;\r\n\r\n        // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n        mediump float rotated \x3d mod(a_angle + u_mapRotation, 256.0);\r\n        delta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated)); //ie. z +\x3d (flip \x3e 0) \x26\x26 (64 \x3c\x3d rotated) \x26\x26 (rotated \x3c 192)\r\n\r\n        // u_level is the current service level adjusted for the change in font size\r\n        delta_z +\x3d 1.0 - step(a_minLevel, u_level); // Test if (level \x3c minLevel)\r\n        delta_z +\x3d step(a_maxLevel, u_level); // Test if (maxLevel \x3c\x3d level)\r\n\r\n        // calculate the alpha given the change in the fade and the fade-speed\r\n        lowp float alpha \x3d clamp((u_fadeChange - a_labelMinLevel) / u_fadeSpeed, 0.0, 1.0);\r\n\r\n        // if the speed is positive we are zooming in and therefore we need to \'fade-in\'. Else we need to \'fade-out\'\r\n        v_transparency \x3d (u_fadeSpeed \x3e\x3d 0.0 ? alpha : 1.0 - alpha);\r\n\r\n        // now deal with the min/max fade-levels. If we exceeded the level we simply snap to 0 or 1\r\n        if (u_maxfadeLevel \x3c a_labelMinLevel)\r\n        {\r\n          v_transparency \x3d 0.0;\r\n        }\r\n        if (u_minfadeLevel \x3e\x3d a_labelMinLevel)\r\n        {\r\n          v_transparency \x3d 1.0;\r\n        }\r\n\r\n        // if label had been faded out, clip it\r\n        delta_z +\x3d step(v_transparency, 0.0);\r\n\r\n        vec2 offset \x3d C_OFFSET_PRECISION * a_vertexOffset;\r\n\r\n        v_size \x3d abs(offset);\r\n\r\n      #ifdef SDF\r\n        offset \x3d (120.0 / 86.0) * offset;\r\n      #endif // SDF\r\n\r\n      #ifdef DD\r\n        mediump float icon_size \x3d a_size * u_size;\r\n      #else\r\n        mediump float icon_size \x3d u_size;\r\n      #endif // DD\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * icon_size * vec4(offset, delta_z, 0.0);\r\n\r\n      #ifdef DD\r\n        v_color \x3d a_color * u_color;\r\n      #else\r\n        v_color \x3d u_color;\r\n      #endif // DD\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n        v_tex \x3d a_tex.xy / u_mosaicSize;\r\n        v_transparency *\x3d v_color.w;\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconFS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      uniform lowp sampler2D u_texture; // SDF texture\r\n    #ifdef SDF\r\n      uniform lowp vec4 u_color; // a color to override the one of the vertex\r\n      uniform lowp vec4 u_outlineColor;\r\n      uniform mediump float u_outlineSize;\r\n    #endif // SDF\r\n\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      varying mediump vec2 v_size;\r\n\r\n      varying lowp vec4 v_color;\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      // we need the conversion function from RGBA to float\r\n      $rgba2float\r\n\r\n      vec4 mixColors(vec4 color1, vec4 color2) {\r\n        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Alpha_blending)\r\n        // we use pre-multiplied colors hence the need for this kind of mixing. At lease we save ourselves an extra division...\r\n        float compositeAlpha \x3d color2.a + color1.a * (1.0 - color2.a);\r\n        vec3 compositeColor \x3d color2.rgb + color1.rgb * (1.0 - color2.a);\r\n\r\n        return vec4(compositeColor, compositeAlpha);\r\n      }\r\n\r\n      void main()\r\n      {\r\n      #ifdef SDF\r\n        lowp vec4 fillPixelColor \x3d v_color;\r\n\r\n        // calculate the distance from the edge [-0.5, 0.5]\r\n        float d \x3d rgba2float(texture2D(u_texture, v_tex)) - 0.5;\r\n\r\n        // the soft edge ratio is about 1.5 pixels allocated for the soft edge.\r\n        // 1 / 86 represents a single pixel given the size of the SDF is 128 and we add 4 pixels margins to deal with\r\n        // other non SDF types.\r\n        // The rasterized geometry takes only 86 pixels because of the extra 16 pixels margin for the outline.\r\n        const float sofetEdgeRatio \x3d 0.248062016; // \x3d\x3d\x3e (32.0 / 86.0) / 1.5;\r\n        float size \x3d max(v_size.x, v_size.y);\r\n        float dist \x3d d * sofetEdgeRatio * size;\r\n\r\n        // set the fragment\'s transparency according to the distance from the edge\r\n        fillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\r\n\r\n        // count for the outline\r\n        // therefore tint the entire icon area.\r\n        if (u_outlineSize \x3e 0.25) {\r\n          lowp vec4 outlinePixelColor \x3d u_outlineColor;\r\n          // the outline limit ratio is derived from the 16 pixels allocated for the outline and the fact that 1/86 represents\r\n          // a single pixel.\r\n          const float outlineLimitRatio \x3d (16.0 / 86.0);\r\n          float clampedOutlineSize \x3d sofetEdgeRatio * min(u_outlineSize, outlineLimitRatio * max(v_size.x, v_size.y));\r\n\r\n          outlinePixelColor *\x3d clamp(0.5 - (abs(dist) - clampedOutlineSize), 0.0, 1.0);\r\n\r\n          // finally combine the outline and the fill colors\r\n          gl_FragColor \x3d v_transparency * mixColors(fillPixelColor, outlinePixelColor);\r\n        }\r\n        else {\r\n          gl_FragColor \x3d v_transparency * fillPixelColor;\r\n        }\r\n      #else // not an SDF\r\n        lowp vec4 texColor \x3d texture2D(u_texture, v_tex);\r\n        gl_FragColor \x3d v_transparency * texColor;\r\n      #endif // SDF\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/lineShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"lineVS"\x3e\r\n    \x3c![CDATA[\r\n      /* The implementation of the renderer is based on the article and implementation of MB described here:\r\n      * https://www.mapbox.com/blog/drawing-antialiased-lines/\r\n      */\r\n\r\n      attribute vec2 a_pos;\r\n      attribute vec4 a_offsetAndNormal;\r\n      attribute vec2 a_accumulatedDistance;\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      uniform mediump float u_blur;\r\n      uniform mediump float u_antialiasing; // the feather distance at which the line edge fades out\r\n\r\n      // the z of the layer. Given by the order of the layers in the style\r\n      uniform mediump float u_depth;\r\n\r\n      // the interpolated normal to the line. the information is packed into the two LSBs of the vertex coordinate\r\n      varying mediump vec2 v_normal;\r\n\r\n      // the accumulated distance along the line. We need this information in order to render the dashes.\r\n      varying highp float v_accumulatedDistance;\r\n\r\n      const float scale \x3d 1.0 / 31.0;\r\n\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n      attribute mediump float a_width;\r\n    #endif // DD\r\n      uniform lowp vec4 u_color;\r\n      uniform mediump float u_width;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n      varying mediump float v_lineHalfWidth; // the inset and outset of the line\r\n      varying mediump float v_blur;\r\n\r\n    #ifndef PATTERN\r\n      uniform mediump vec2 u_dasharray;\r\n      varying mediump vec2 v_dasharray;\r\n    #endif\r\n\r\n      void main()\r\n      {\r\n        v_normal \x3d a_offsetAndNormal.zw * scale;\r\n\r\n      #ifdef DD\r\n        v_lineHalfWidth \x3d a_width * u_width;\r\n      #else\r\n        v_lineHalfWidth \x3d u_width;\r\n      #endif // DD\r\n\r\n        v_lineHalfWidth +\x3d u_antialiasing;\r\n        v_lineHalfWidth *\x3d 0.5;\r\n\r\n      #ifndef PATTERN\r\n      #ifdef DD\r\n        v_dasharray \x3d u_dasharray * a_width;\r\n      #else\r\n        v_dasharray \x3d u_dasharray * u_width;\r\n      #endif // DD\r\n      #endif\r\n\r\n        // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n        // sake of using less attribute memory, we need to scale it back to the original range of ~ 0: 1)\r\n        mediump vec2 dist \x3d v_lineHalfWidth * a_offsetAndNormal.xy * scale;\r\n\r\n        // transform the vertex\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\r\n\r\n        // the accumulated distance will be used to calculate the dashes (or the no-data...)\r\n        v_accumulatedDistance \x3d a_accumulatedDistance.x;\r\n\r\n        v_blur \x3d u_blur + u_antialiasing;\r\n\r\n        #ifdef DD\r\n          v_color \x3d a_color * u_color;\r\n        #else\r\n          v_color \x3d u_color;\r\n        #endif // DD\r\n\r\n        #ifdef ID\r\n          v_id \x3d u_id / 255.0;\r\n        #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineFS"\x3e\r\n    \x3c![CDATA[\r\n      varying mediump vec2 v_normal;\r\n      varying highp float v_accumulatedDistance;\r\n\r\n      varying mediump float v_lineHalfWidth;\r\n      varying lowp vec4 v_color;\r\n\r\n      varying mediump float v_blur;\r\n\r\n    #ifdef PATTERN\r\n      uniform mediump vec2 u_pattern_tl;\r\n      uniform mediump vec2 u_pattern_br;\r\n      uniform mediump vec2 u_spriteSize;\r\n      uniform sampler2D u_texture;\r\n\r\n      // Horizontal scale is used to scale the horizontal texture coordinate v_normal.x before adding it as an offset to the\r\n      // accumulated distance. Most vertices will have v_normal.x \x3d\x3d 0, because the pattern must be sampled only depending on\r\n      // the v_accumulatedDistance value. But tessellation at caps can have vertices with v_normal.x !\x3d 0, thus allowing to\r\n      // "keep moving" for a few more pixel even when the line has ended or has not started yet.\r\n      const mediump float tileCoordRatio \x3d 8.0;\r\n    #else\r\n      varying mediump vec2 v_dasharray;\r\n    #endif\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      void main()\r\n      {\r\n        // dist represent the distance of the fragment from the line. 1.0 or -1.0 will be the values on the edge of the line,\r\n        // and any value in between will be inside the line (the sign represent the direction - right or left).\r\n        // since u_linewidth.s (half line width) is represented in pixels, dist is also given in pixels\r\n        mediump float fragDist \x3d length(v_normal) * v_lineHalfWidth;\r\n\r\n        // calculate the alpha given the difference between the line-width and the distance of the fragment from the center-line.\r\n        // We need to count for both sides of the line.\r\n        lowp float alpha \x3d clamp((v_lineHalfWidth - fragDist) / v_blur, 0.0, 1.0);\r\n\r\n      #ifdef PATTERN\r\n        // we need to calculate the relative portion of the line texture along the line given the accumulated distance aliong the line\r\n        // The computed value should is anumber btween 0 and 1 which will later be used to interpolate btween the BR and TL values\r\n        mediump float relativeTexX \x3d mod((v_accumulatedDistance + v_normal.x * v_lineHalfWidth * tileCoordRatio) / u_spriteSize.x, 1.0);\r\n\r\n        // in order to calculate the texture coordinates perpendicular to the line (Y axis), we use the interpolated normal values\r\n        // which range from -1.0 to 1.0. On the line\'s centerline, the value of the interpolated normal is 0.0, however the relative\r\n        // texture value should be 0.5 (given that at the bottom of the line, the texture coordinate must be equal to 0.0)\r\n        // (TL) ---------------------------      --\x3e left edge of line. Interpolated normal is 1.0\r\n        //              | -\x3e line-width / 2\r\n        //      - - - - - - - - - - - - - -\r\n        //              | -\x3e line-width / 2\r\n        //      ---------------------------- (BR)--\x3e right edge of line. Interpolated normal is -1.0\r\n\r\n        mediump float relativeTexY \x3d 0.5 + (v_normal.y * v_lineHalfWidth / u_spriteSize.y);\r\n\r\n        // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n        mediump vec2 texCoord \x3d mix(u_pattern_tl, u_pattern_br, vec2(relativeTexX, relativeTexY));\r\n\r\n        // get the color from the texture\r\n        lowp vec4 color \x3d texture2D(u_texture, texCoord);\r\n\r\n        // finally write the fragment value\r\n        gl_FragColor \x3d alpha * v_color[3] * color;\r\n      #else\r\n        // now calculate the dashes given the accumulated distance of the line:\r\n        // start with calculating a normalized position along the line\r\n        lowp float dashPos \x3d  mod(v_accumulatedDistance, v_dasharray.x + v_dasharray.y);\r\n\r\n        // calculate the contribution to the alpha of the dash part. It is provided by the shortest portion of the position along the dash.\r\n        // we must clamp since the value might be bigger than 1 or smaller than zero (when over a dash).\r\n        //   | \x3c--- pos along the dash part\r\n        // -------_______-------_______\r\n        // when the dashPos is over the \'gap\' part of the dash dasharray.x - dashPos is negative and therefore the alpha will\r\n        // get clamped to zero.\r\n        // when dasharray.x - dashPos is positive, or when dashPos is smaller than 1.0, it gives us a soft edge to each dash part.\r\n        // along the direction of the line.\r\n        lowp float dashAlpha \x3d clamp(min(dashPos, v_dasharray.x - dashPos) + 0.5, 0.0, 1.0);\r\n\r\n        // if we don\'t have a no-data part to the dash then it is a solid line\r\n        dashAlpha \x3d max(sign(-v_dasharray.y), dashAlpha);\r\n        // finally multiply the fragment\'s alpha by the calculated dash-alpha\r\n        alpha *\x3d dashAlpha;\r\n\r\n        // output the fragment color\r\n        gl_FragColor \x3d alpha * v_color;\r\n      #endif // PATTERN\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/outlineShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"outlineVS"\x3e\r\n    \x3c![CDATA[\r\n      attribute vec2 a_pos;\r\n      attribute vec2 a_offset;\r\n      attribute vec2 a_xnormal;\r\n\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n    #endif // DD\r\n      uniform lowp vec4 u_color;\r\n      varying lowp vec4 v_color;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      uniform highp mat4 u_transformMatrix;\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      uniform highp vec2 u_normalized_origin;\r\n      uniform mediump float u_depth;\r\n      uniform mediump float u_outline_width;\r\n\r\n      varying lowp vec2 v_normal;\r\n\r\n      const float scale \x3d 1.0 / 15.0;\r\n\r\n      void main()\r\n      {\r\n      #ifdef DD\r\n        v_color \x3d a_color * u_color;\r\n      #else\r\n        v_color \x3d u_color;\r\n      #endif // DD\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n        v_normal \x3d a_xnormal;\r\n\r\n        // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n        // sake of using less attribute memory, we need to scale it back to the original range of ~ 0: 1)\r\n        mediump vec4 dist \x3d vec4(u_outline_width * a_offset * scale, 0.0, 0.0);\r\n\r\n        // Remove the texture normal bit of the position before scaling it with the\r\n        // model/view matrix. Add the extrusion vector *after* the model/view matrix\r\n        // because we\'re extruding the line in pixel space, regardless of the current\r\n        // tile\'s zoom level.\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * dist;\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"outlineFS"\x3e\r\n    \x3c![CDATA[\r\n      varying lowp vec4 v_color;\r\n      varying mediump vec2 v_normal;\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      void main()\r\n      {\r\n        // Calculate the distance of the pixel from the line in pixels.\r\n        lowp float dist \x3d abs(v_normal.y);\r\n\r\n        lowp float alpha \x3d smoothstep(1.0, 0.0, dist);\r\n        gl_FragColor \x3d alpha * v_color;\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/textShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link module:esri/views/vectorTiles/renderers/vtShaderSnippets vtShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"rgba2float"\x3e\x3c![CDATA[\r\n    // TODO this snippet should only be in views/3d/webgl-engine/materials/internal/Util.xml\r\n\r\n    // Factors to convert rgba back to float\r\n    const vec4 toFloat \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, toFloat);\r\n    }\r\n  ]]\x3e\x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVS"\x3e\r\n    \x3c![CDATA[\r\n      attribute vec2 a_pos;\r\n      attribute vec2 a_vertexOffset;\r\n      attribute vec4 a_tex;\r\n      attribute vec4 a_levelInfo;\r\n\r\n      uniform lowp vec4 u_color; // always defined as halo does not support data driven but text does\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n    #endif // DD\r\n      varying lowp vec4 v_color;\r\n\r\n      uniform mediump float u_size;\r\n    #ifdef DD\r\n      attribute mediump float a_size;\r\n    #endif // DD\r\n      varying mediump float v_size;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n\r\n      // attribute bool a_visible; // --\x3e a one bit controlling the visibility of the vertex\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n\r\n      // the z of the layer. Given by the order of the layers in the style\r\n      uniform mediump float u_depth;\r\n\r\n      // the map\'s rotation from the north\r\n      uniform mediump float u_mapRotation;\r\n      uniform mediump float u_level;\r\n\r\n      // indicate whether the current set of iconst should be kept upright when the map is rotated\r\n      uniform lowp float u_keepUpright;\r\n\r\n      // the rate of the change in the opacity (fade) of the icons\r\n      uniform mediump float u_fadeSpeed;\r\n\r\n      // the low level we transition (to/from)\r\n      uniform mediump float u_minfadeLevel;\r\n\r\n      // the high level we transition (to/from)\r\n      uniform mediump float u_maxfadeLevel;\r\n\r\n      // the amount of fade given teh current time past the last recorded level\r\n      uniform mediump float u_fadeChange;\r\n\r\n      // the opacity of the layer given by the painter\r\n      uniform mediump float u_opacity;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying lowp vec2 v_tex;\r\n\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precision we multiply the values\r\n      // by 8 and then at the shader divide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 8.0;\r\n\r\n      // outline position and appearance\r\n      const mediump float edgePos \x3d 0.75; // defined by the SDF encoding\r\n      uniform mediump float u_edgeDistance;\r\n      uniform mediump float u_edgeBlur;\r\n      uniform mediump float u_antialiasingWidth; // antialiasing (factors in the pixel_ratio for high res devices)\r\n\r\n      varying mediump float v_edgeDistance; // will factor in the size\r\n      varying mediump float v_edgeWidth; // will factor in the size\r\n\r\n      uniform lowp float u_halo; // needed to avoid using the color attribute for halo\r\n\r\n      void main()\r\n      {\r\n        mediump float a_labelMinLevel \x3d a_levelInfo[0];\r\n        mediump float a_angle        \x3d a_levelInfo[1];\r\n        mediump float a_minLevel    \x3d a_levelInfo[2];\r\n        mediump float a_maxLevel    \x3d a_levelInfo[3];\r\n\r\n        // if the given vertex should not be visible simply clip it by adding it a value that will push it outside the clipping plane\r\n        mediump float delta_z \x3d 0.0;\r\n\r\n        // TODO: force clipping the vertex in case that the vertex isn\'t visible\r\n        //delta_z +\x3d a_visible ? 0.0 : 1.0;\r\n\r\n        // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n        mediump float rotated \x3d mod(a_angle + u_mapRotation, 256.0);\r\n        delta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated)); //ie. z +\x3d (flip \x3e 0) \x26\x26 (64 \x3c\x3d rotated) \x26\x26 (rotated \x3c 192)\r\n\r\n        // u_level is the current service level adjusted for the change in font size\r\n        delta_z +\x3d 1.0 - step(a_minLevel, u_level); // Test if (level \x3c minLevel)\r\n        delta_z +\x3d step(a_maxLevel, u_level); // Test if (maxLevel \x3c\x3d level)\r\n\r\n        // calculate the alpha given the change in the fade and the fade-speed\r\n        lowp float alpha \x3d clamp((u_fadeChange - a_labelMinLevel) / u_fadeSpeed, 0.0, 1.0);\r\n\r\n        // if the speed is positive we are zooming in and therefore we need to \'fade-in\'. Else we need to \'fade-out\'\r\n        v_transparency \x3d (u_fadeSpeed \x3e\x3d 0.0 ? alpha : 1.0 - alpha);\r\n\r\n        // now deal with the min/max fade-levels. If we exceeded the level we simply snap to 0 or 1\r\n        if (u_maxfadeLevel \x3c a_labelMinLevel)\r\n        {\r\n          v_transparency \x3d 0.0;\r\n        }\r\n        if (u_minfadeLevel \x3e\x3d a_labelMinLevel)\r\n        {\r\n          v_transparency \x3d 1.0;\r\n        }\r\n\r\n        // if label has been faded out, clip it\r\n        delta_z +\x3d step(v_transparency, 0.0);\r\n\r\n        v_tex \x3d a_tex.xy / u_mosaicSize;\r\n\r\n      #ifdef DD\r\n        if (u_halo \x3e 0.5)\r\n        {\r\n          v_color \x3d u_color;\r\n        }\r\n        else\r\n        {\r\n          v_color \x3d a_color * u_color;\r\n          // opacity already factored in a_color\r\n        }\r\n      #else\r\n        v_color \x3d u_color;\r\n      #endif // DD\r\n\r\n      #ifdef DD\r\n        v_size \x3d a_size * u_size;\r\n      #else\r\n        v_size \x3d u_size;\r\n      #endif // DD\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n        v_edgeDistance \x3d edgePos - u_edgeDistance / v_size;\r\n        v_edgeWidth \x3d (u_antialiasingWidth + u_edgeBlur) / v_size;\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * v_size * vec4(offsetPrecision * a_vertexOffset, delta_z, 0.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textFS"\x3e\r\n    \x3c![CDATA[\r\n      uniform lowp sampler2D u_texture;\r\n      uniform mediump float u_edgeDistance;\r\n\r\n      varying lowp vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n      varying lowp vec4 v_color;\r\n      varying mediump float v_edgeWidth;\r\n      varying mediump float v_edgeDistance;\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      // this is taken from http://www.valvesoftware.com/publications/2007/SIGGRAPH2007_AlphaTestedMagnification.pdf\r\n      // and https://www.mapbox.com/blog/text-signed-distance-fields/\r\n      // http://metalbyexample.com/rendering-text-in-metal-with-signed-distance-fields/\r\n\r\n      void main()\r\n      {\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        mediump float alpha \x3d smoothstep(v_edgeDistance - v_edgeWidth, v_edgeDistance + v_edgeWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d alpha * v_color;\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n\r\n',
"*now":function(g){g(['dojo/i18n!*preload*esri/layers/nls/VectorTileLayerImpl*["ar","bg","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("esri/layers/VectorTileLayerImpl","dojo/_base/lang dojo/has dojo/dom-construct dojo/dom-style dojo/io-query ../geometry/Extent ../geometry/screenUtils ../geometry/scaleUtils ../SpatialReference ../config ../lang ../domUtils ../urlUtils ../kernel ./layer ./TileInfo ./unitBezier ./vectorTiles/request ./vectorTiles/core/promiseUtils ./vectorTiles/core/urlUtils ./vectorTiles/geometry/support/spatialReferenceUtils ./vectorTiles/layers/support/vectorTileLayerLoader ./vectorTiles/layers/support/TilemapCache ./vectorTiles/views/vectorTiles/style/StyleRepository ./vectorTiles/views/vectorTiles/VectorTileContainer ./vectorTiles/views/vectorTiles/VectorTileDisplayObject ./vectorTiles/views/vectorTiles/TileHandler ./vectorTiles/views/2d/engine/StageGL ./vectorTiles/views/2d/tiling/TileInfoView ./vectorTiles/views/2d/tiling/TileStrategy ./vectorTiles/views/2d/tiling/TileKey ./vectorTiles/views/2d/tiling/TileQueue ./vectorTiles/views/webgl/webgl-utils".split(" "),function(g,
t,a,b,c,k,h,d,e,l,f,n,u,p,r,q,m,v,x,z,A,C,D,B,y,w,E,F,H,M,R,V,da){var ha=m.ease;h=r.createSubclass({declaredClass:"esri.layers.VectorTileLayer",_mapsWithAttribution:"OpenStreetMap_v2 OpenStreetMap_Daylight_v2 OpenStreetMap_Export_v2 OpenStreetMap_FTS_v2 OpenStreetMap_GCS_v2 World_Basemap World_Basemap_v2 World_Basemap_Export_v2 World_Basemap_GCS_v2 World_Basemap_WGS84 World_Contours_v2".split(" "),_eventMap:{"style-change":["style"]},constructor:function(Q,U){this._frame=this._frame.bind(this);this._params=
U||{};U&&U.tileServers&&U.tileServers.length&&(this.tileServers=U.tileServers=U.tileServers.map(function(ia){return u.getAbsoluteUrl(ia)},this));U&&U.copyright&&(this.copyright=U.copyright);this._viewState={scale:0,width:0,height:0,size:[0,0],rotation:0,resolution:1,center:[0,0],worldScreenWidth:0,spatialReference:null,toScreen:function(ia,T){var Y=this.center[1]+this.resolution*this.height*.5;ia[0]=(T[0]-(this.center[0]-this.resolution*this.width*.5))/this.resolution;ia[1]=(Y-T[1])/this.resolution;
return ia},toMap:function(ia,T){var Y=this.center[1]+this.resolution*this.height*.5;ia[0]=this.center[0]-this.resolution*this.width*.5+T[0]*this.resolution;ia[1]=Y-T[1]*this.resolution;return ia}};this._renderParameters={state:this._viewState,pixelRatio:window.devicePixelRatio,stationary:!0};this._updateParameters={state:this._viewState,pixelRatio:window.devicePixelRatio,stationary:!0};this.type="vector-tile";U&&U.resourceInfo?(this._stopDisplay(),this._applyMetadata(U.resourceInfo)):this.setStyle(Q);
this.registerConnectEvents()},setStyle:function(Q){return this.loadStyle(Q)},getStyle:function(){return this.currentStyleInfo&&this.currentStyleInfo.style||null},opacity:1,setOpacity:function(Q){if(this.opacity!=Q)this.onOpacityChange(this.opacity=Q)},onOpacityChange:function(){},_pinching:!1,getTileUrl:function(Q,U,ia){var T=this._url&&this._url.query,Y=this.tileServers[U%this.tileServers.length];Y=Y.replace(/\{z\}/gi,Q.toString()).replace(/\{level\}/gi,Q.toString()).replace(/\{y\}/gi,U.toString()).replace(/\{row\}/gi,
U.toString()).replace(/\{x\}/gi,ia.toString()).replace(/\{col\}/gi,ia.toString());T&&(Y+="?"+c.objectToQuery(T));Y=this.addTimestampToURL(Y);return u.addProxy(Y)},loadStyle:function(Q){if(this._loadingPromise&&"string"===typeof Q&&this.url===Q)return this._loadingPromise;this._stopDisplay();var U=this._loadingPromise;this._loadingPromise=C.loadMetadata(Q).then(function(ia){this._applyMetadata(ia)}.bind(this)).otherwise(function(ia){this._errorHandler(ia);throw ia;}.bind(this));U&&!U.isFulfilled()&&
U.cancel();return this._loadingPromise},_applyMetadata:function(Q){this.url=Q.url;this._url=Q.parsedUrl;!this._url&&Q.styleUrl&&(this._url=z.urlToObject(Q.styleUrl));this.currentStyleInfo={glyphsUrl:Q.glyphsUrl,serviceUrl:Q.serviceUrl,spriteUrl:Q.spriteUrl,styleUrl:Q.styleUrl,style:Q.style,layerDefinition:Q.layerDefinition};this.styleRepository=new B(Q.style,Q);this._read(Q.layerDefinition);this.onStyleChange(this.getStyle());this.loaded||(this._findCredential(),this.loaded=!0,this.onLoad(this));
this.suspended||this._tileHandler||this._startDisplay()},refresh:function(){this.suspended||(this._refreshTS=Date.now(),this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD))},takeScreenshot:function(Q){return this._stageGL?this._stageGL.takeScreenshot(Q):x.reject("No valid GL context!")},_setMap:function(Q,U,ia){this.inherited(arguments);this._map=Q;var T=this._div=a.create("div",null,U);b.set(T,{position:"absolute",width:Q.width+"px",height:Q.height+"px",overflow:"visible",opacity:this.opacity});
this.attr("data-vectortiles",!0);this._onResizeHandle=Q.on("resize",g.hitch(this,this._onResizeHandler));this._onOpacityHandle=this.on("opacity-change",g.hitch(this,this._opacityChangeHandler));this._onScaleVisHandle=this.on("scale-visibility-change",g.hitch(this,function(){}));this._onVisibilityHandle=this.on("visibility-change",g.hitch(this,function(){}));Q.acquireWebGLContext(this);this._stageGL=new F;this._stageGL.setElement(this._stageGL.createElement());this._div.appendChild(this._stageGL.element);
this._stageGL.parent={requestChildRender:this._scheduleRender.bind(this)};this._stageGL.attach(this._renderParameters);this._startDisplay();this.evaluateSuspension();if(this.suspended&&!Q.loaded)var Y=Q.on("load",g.hitch(this,function(){Y.remove();this.evaluateSuspension()}));return T},_unsetMap:function(Q,U){Q.releaseWebGLContext(this);this._map=null;this.suspended||this._stopDisplay();this._stageGL.detach(this._renderParameters);this._stageGL=null;a.destroy(this._div);this._div=null;this._handles&&
this._handles.forEach(function(ia){ia.remove()});this._handles=null;this._onResizeHandle=this._onResizeHandle&&this._onResizeHandle.remove()&&null;this._onOpacityHandle=this._onOpacityHandle&&this._onOpacityHandle.remove()&&null;this._onScaleVisHandle=this._onScaleVisHandle&&this._onScaleVisHandle.remove()&&null;this._onVisibilityHandle=this._onVisibilityHandle&&this._onVisibilityHandle.remove()&&null;this.inherited(arguments)},_read:function(Q){this.version=Q.currentVersion||Q.version;this.copyright=
this.copyright||Q.copyrightText;this.fullExtent=new k(Q.fullExtent);this.initialExtent=new k(Q.initialExtent);this.spatialReference=this.fullExtent.spatialReference;this.tileInfo=new q(Q.tileInfo);this.tileInfo.size=[this.tileInfo.cols,this.tileInfo.height];this.tileInfo.spatialReference.isWrappable=this.tileInfo.spatialReference._isWrappable();this.tileInfo.scales=this.tileInfo.lods.map(function(ia){return ia.scale});this.tileInfo.scaleToZoom=function(ia){for(var T=this.scales,Y=T.length-1,ja=0;ja<
Y;ja++){var pa=T[ja],ta=T[ja+1];if(pa<=ia)break;if(ta===ia)return ja+1;if(pa>ia&&ta<ia)return ja+1-(ia-ta)/(pa-ta)}return ja};this._hasMin||this.setMinScale(Q.minScale);this._hasMax||this.setMaxScale(Q.maxScale);Q.tileMap&&(this.tileIndexUrl=z.join(this.currentStyleInfo.serviceUrl,Q.tileMap));if(!this._params.tileServers){var U=Q.tiles;this.currentStyleInfo&&this.currentStyleInfo.serviceUrl&&U.forEach(function(ia,T,Y){z.isAbsolute(ia)?Y[T]=ia:Y[T]=z.join(this.currentStyleInfo.serviceUrl,ia)}.bind(this));
this.tileServers=U}U=null;this.currentStyleInfo.serviceUrl&&(this.parsedUrl=z.urlToObject(this.currentStyleInfo.serviceUrl),U=this._getDefaultAttribution(this.parsedUrl.path));U?(this.attributionDataUrl=U,this.hasAttributionData=!0):(this.attributionDataUrl=null,this.hasAttributionData=!1);this.capabilities=this._getCapabilities(Q);this.tilemapCache=this.capabilities.supportsTileMapIndexing?new D({layer:this}):null},_getCapabilities:function(Q){var U=Q.hasOwnProperty("exportTilesAllowed")?Q.exportTilesAllowed:
!1;Q=Q.capabilities?-1!==Q.capabilities.toLowerCase().indexOf("tilemap"):!1;return{exportTilesAllowed:U,supportsTileMapIndexing:Q}},_getDefaultAttribution:function(Q){var U=Q.match(/^https?:\/\/(basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);if(U&&(Q=U[3])){U=U[2]||"";Q=Q.toLowerCase();for(var ia=0,T=this._mapsWithAttribution.length;ia<T;ia++){var Y=this._mapsWithAttribution[ia];if(-1<Y.toLowerCase().indexOf(Q))return Q=
window.location.protocol,("http:"===Q||"https:"===Q?Q:"https:")+"//static.arcgis.com/attribution/Vector"+U+"/"+Y}}},_startDisplay:function(){var Q={capabilities:{operations:{supportsTileMap:this.capabilities.supportsTileMapIndexing}},styleRepository:this.styleRepository,tileIndexUrl:this.tileIndexUrl,tileInfo:this.tileInfo,tilemapCache:this.tilemapCache,fullExtent:{width:this.fullExtent.getWidth()},getTileUrl:this.getTileUrl.bind(this)};this._renderParameters.pixelRatio=this._updateParameters.pixelRatio=
window.devicePixelRatio;this._vectorTileContainer=new y;this._stageGL.addChild(this._vectorTileContainer);this._viewState.spatialReference=this.tileInfo.spatialReference;this._tileInfoView=new H(this.tileInfo,this.fullExtent);this._tileRequests=new Map;this._tileHandler=new E(Q,this._scheduleUpdate.bind(this),window.devicePixelRatio||1,!1,this._tileInfoView);this._viewState.spatialReference=this.spatialReference;this._allTilesAreHandled=!1;this._tileHandlerPromise=this._tileHandler.start().then(function(){this._fetchQueue=
new V({tileInfoView:this._tileInfoView,process:this._getTileData.bind(this)});this._tileStrategy=new M({cachePolicy:"keep",coveragePolicy:"smallest",acquireTile:this._acquireTile.bind(this),releaseTile:this._releaseTile.bind(this),tileInfoView:this._tileInfoView});this._vectorTileContainer.initialize(this._tileHandler.spriteMosaic,this._tileHandler.glyphMosaic,this.tileInfo,this._tileInfoView);this._scheduleUpdate()}.bind(this))},_stopDisplay:function(){this._tileHandlerPromise&&!this._tileHandlerPromise.isFulfilled()&&
this._tileHandlerPromise.cancel();this._tileStrategy&&(this._frameRequested=this._updateRequested=this._renderRequested=!1,this._animation&&(this._animation.stop(),this._animation=null),this._tileRequests.forEach(function(Q){Q.cancel("cancel")}),this._tileHandler.stop(),this._tileHandler.destroy(),this._tileStrategy.destroy(),this._tileInfoView=this._tileHandler=this._tileStrategy=null,this._vectorTileContainer.removeAllChildren(),this._stageGL.removeChild(this._vectorTileContainer),this._vectorTileContainer=
null)},_scheduleRender:function(){this._renderRequested=!0;this._map&&this._tileStrategy&&this._scheduleFrame()},_scheduleUpdate:function(){this._updateRequested=!0;this._map&&this._tileStrategy&&this._scheduleFrame()},_scheduleFrame:function(){this._map&&!this._frameRequested&&(this._frameRequested=!0,ca(this._frame))},_frame:function(){if(this._frameRequested){this._frameRequested=!1;this._renderParameters.pixelRatio!==window.devicePixelRatio&&(this._renderParameters.pixelRatio=this._updateParameters.pixelRatio=
window.devicePixelRatio,this._stopDisplay(),this._startDisplay());this._animation&&(this._animation.step(),this._animation.running||(this._animation=null));this._updateParameters.stationary=this._renderParameters.stationary=!this._animation&&!this._pinching&&!this._panning;this._viewState.resolution=this._viewState.scale/(39.37*d.getUnitValueForSR(this.spatialReference)*96);var Q=0;this._viewState.spatialReference&&this._viewState.spatialReference._isWrappable()&&(Q=A.getInfo(this._viewState.spatialReference),
Q=Q.valid[1]-Q.valid[0]);this._viewState.worldScreenWidth=Math.round(Q/this._viewState.resolution);this._renderRequested&&(this._renderRequested=!1,this._stageGL.doRender(this._renderParameters));this._updateRequested&&(this._updateRequested=!1,this._fetchQueue.pause(),this._fetchQueue.state=this._updateParameters.state,this._allTilesAreHandled=this._tileStrategy.update(this._updateParameters),this._fetchQueue.resume());this._animation&&(this._scheduleRender(),this._scheduleUpdate());this._checkUpdating()}},
_setViewState:function(Q){Q=g.mixin(this._viewState,Q);Q.center.type&&(Q.center=[Q.center.x,Q.center.y]);this._scheduleRender();this._scheduleUpdate()},_animateViewState:function(Q,U){U=U.immediate||0===l.defaults.map.zoomDuration;this._animation=null;if(U)this._setViewState(Q);else{U=this._viewState;var ia=l.defaults.map.zoomDuration,T=fa()+16,Y=U.center[0],ja=U.center[1],pa=U.scale,ta=Array.isArray(Q.center)?Q.center[0]:Q.center.x,W=Array.isArray(Q.center)?Q.center[1]:Q.center.y,S=Q.scale||U.scale,
ea=this;this._animation={running:!0,stop:function(){this.running=!1},step:function(){if(this.running){var ka=(fa()+16-T)/ia;1<=ka&&(ka=1,this.running=!1);ka=ha(ka);ea._setViewState({center:[Y+(ta-Y)*ka,ja+(W-ja)*ka],scale:pa+(S-pa)*ka})}}};this._scheduleRender();this._scheduleUpdate()}},_checkUpdating:function(){var Q=!0;this._tileRequests.forEach(function(U){Q|=U.isFulfilled()});Q&&this._tileStrategy&&(Q=this._allTilesAreHandled);Q?this._fireUpdateEnd():this._fireUpdateStart()},_acquireTile:function(Q){var U=
R.pool.acquire();U.set(Q.level,Q.row,Q.col,Q.world);Q=this._tileHandler.getStyleRepository();var ia=w.pool.acquire(U,U,this.tileInfo,Q,this._tileHandler.glyphMosaic,0);this._tileHandlerPromise.then(function(){var T=this._tileHandler.getRefKey(U).then(function(Y){ia.refKey=Y;return this._fetchQueue.push(U).then(function(ja){ia.setData(ja.tileData,ja.workerId,ja.connection);ia.once("attach",this._scheduleUpdate.bind(this));this._vectorTileContainer.addChild(ia)}.bind(this))}.bind(this));this._tileRequests.set(U.id,
T)}.bind(this));return ia},_releaseTile:function(Q){var U=Q.key.id,ia=this._tileRequests.get(U);ia.isFulfilled()||ia.cancel();this._tileRequests["delete"](U);this._vectorTileContainer.removeChild(Q);this._scheduleUpdate();Q.once("detach",function(){w.pool.release(Q)})},_getTileData:function(Q){return this._tileHandler.getTileData(Q,0)},onStyleChange:function(Q){},_opacityChangeHandler:function(Q){this._div&&(this._div.style.opacity=Q.opacity)},_onResizeHandler:function(Q){var U=this._div&&this._div.style;
U&&(U.width=Q.width+"px",U.height=Q.height+"px",this._setViewState({center:Q.extent.getCenter(),width:Q.width,height:Q.height,size:[Q.width,Q.height]}))},onResume:function(){var Q=this._map;this.inherited(arguments);n.show(this._div);this._setViewState({center:Q.extent.getCenter(),scale:Q.getScale(),width:Q.width,height:Q.height,size:[Q.width,Q.height],spatialReference:Q.spatialReference});this._handles=[Q.on("pan-end",g.hitch(this,this._onPanEndHandler)),Q.on("pan",g.hitch(this,this._onPanExtentChangeHandler)),
Q.on("extent-change",g.hitch(this,this._onExtentChangeHandler)),Q.on("scale",g.hitch(this,this._onScaleHandler))]},onSuspend:function(){this.inherited(arguments);n.hide(this._div);this._handles.forEach(function(Q){Q.remove()});this._handles=null},_onPanEndHandler:function(Q){this._panning=!1;this._setViewState({center:Q.extent.getCenter(),scale:this._map.getScale()})},_onPanExtentChangeHandler:function(Q){this._panning=!0;this._animation&&(this._animation.stop(),this._animation=null);this._setViewState({center:Q.extent.getCenter(),
scale:this._map.getScale()})},_onExtentChangeHandler:function(Q){var U=this._pinching||Q.immediate;this._animateViewState({center:Q.extent.getCenter(),scale:Q.lod.scale},{immediate:U});this._pinching=!1},_onScaleHandler:function(Q){this._animation&&(this._animation.stop(),this._animation=null);var U=this._map;if(U._zoomAnimDiv.extent)this._pinching=this._panning=!1,this._animateViewState({center:U._zoomAnimDiv.extent.getCenter(),scale:U._zoomAnimDiv.newLod.scale},{immediate:Q.immediate});else{var ia=
U.navigationManager,T=ia._dragOrigin;Q=U.extent.getCenter();var Y=T.x-.5*U.width;T=T.y-.5*U.height;var ja=U.extent.getWidth()/U.width;if(ia._pinchScale){this._pinching=!0;ia=ia._pinchScale;var pa=ja/ia;Q.x-=Y*(pa-ja);Q.y+=T*(pa-ja);U=U.__LOD.scale/ia;this._setViewState({center:Q,scale:U})}else ia._zoomEndExtent&&(this._pinching=!1,ia=U.getScale()/U.navigationManager._zoomEndLod.scale,pa=ja/ia,Q.x-=Y*(pa-ja),Q.y+=T*(pa-ja),U=U.navigationManager._zoomEndLod.scale,this._animateViewState({center:Q,scale:U},
{immediate:!1}))}}});h.ACCESS_TOKEN=null;h.supported=function(){return da.detectWebGL()[0]};var fa=function(){var Q=window.performance||{},U=Q.now||Q.webkitNow||Q.msNow||Q.oNow||Q.mozNow;if(void 0!==U)return function(){return U.call(Q)};var ia=window.performance&&window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:(new Date).getTime();return function(){return(new Date).getTime()-ia}}();e=t("ff");f=t("ie");p=t("webkit");t=t("opera");var X=
(new Date).getTime(),ca=window.requestAnimationFrame;ca||(ca=window[(p&&"webkit"||e&&"moz"||t&&"o"||f&&"ms")+"RequestAnimationFrame"])||(ca=function(Q){var U=fa(),ia=Math.max(0,16-(U-X)),T=window.setTimeout(function(){Q(fa())},ia);X=U+ia;return T});return h});