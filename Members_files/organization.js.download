// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.46/esri/copyright.txt for details.
// See https://www.arcgis.com/home/copyright.txt for further details.
//>>built
/*
 @overview es6-promise - a tiny implementation of Promises/A+.
 @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 @license   Licensed under MIT license
            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 @version   v4.2.8+1e68dce6
*/
require({cache:{"arcgisonline/pages/basePage":function(){define("require exports tslib calcite-web/js/calcite-web dojo/_base/kernel dojo/Deferred dojo/when dojo/_base/lang dojo/_base/window dojo/query dojo/debounce dijit/_WidgetBase dijit/registry dojo/on dojo/string dojo/topic dojo/dom-attr dojo/dom-construct dojo/dom-class esri/Evented esri/config arcgisonline/sharing/util ./utils/alerts ./utils/dom ./utils/organization arcgisonline/telemetry ../sharing/dijit/SiteHeader ./components/SiteFooter ./components/ManageBlockedApps/blocked-apps-service ../tsutils/declareDecorator arcgisonline/esriGeowConfig preact ./utils/queryHandler dojo/i18n!../nls/arcgisonline dojo/i18n!../nls/notebooks".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E,K,I,L){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);
D=f.__importDefault(D);G=f.__importDefault(G);F=f.__importDefault(F);A=f.__importDefault(A);y=f.__importDefault(y);z=f.__importDefault(z);B=f.__importDefault(B);C=f.__importDefault(C);H=f.__importDefault(H);K=f.__importStar(K);I=f.__importDefault(I);L=f.__importDefault(L);return function(){function M(N){this.esriPortalConfig=H.default;this._handles=[];this._forceErrorToast=this._hideErrors=this._showErrors=this.hideFooter=this.hideHeader=this.isLoaded=!1;this.page=f.__assign({},N);this.portalUser=
N.portalUser||null;this.portal=N.portal||null}M.prototype.destroy=function(){(0,E.render)(null,this.footerDiv)};M.prototype.postMixInProperties=function(){this.inherited(arguments);this.i18n=I.default;this.i18n.notebookLanding=L.default.notebookLanding;this.i18n.notebookViewer=L.default.notebookViewer;this.i18n.notebookServerManager=L.default.notebookServerManager;this.i18n.CreateNotebookDlg=L.default.CreateNotebookDlg;w.default.defaults.io.errorHandler=this._showError.bind(this);this._queryStringParams=
K.queryToObject(window.location.search.slice(1))};M.prototype.startup=function(){this.inherited(arguments);this.telemetry=A.default.init({config:this.portal});var N=getComputedStyle(document.documentElement);"rgba(0, 0, 0, 0)"===(null===N||void 0===N?void 0:N["background-color"])&&document.body.classList.contains("dj_a11y")&&document.documentElement.classList.add("a11y-black");this._buildPage();this._addEventListeners()};M.prototype.toggleErrors=function(N){this._hideErrors=!N;this._showErrors=N};
M.prototype._setPageTitleAttr=function(N){window.document.title=N};M.prototype._setIsLoadedAttr=function(N){this.isLoaded=N};M.prototype.showLoader=function(){G.default.activateNode(this._loader);G.default.hideNode(this._content)};M.prototype.hideLoader=function(){G.default.deactivateNode(document.querySelector(".js-page-loader"));G.default.showNode(document.querySelector(".js-content-wrapper"));G.default.deactivateNode(this._loader);G.default.showNode(this._content)};M.prototype.removeError=function(){var N=
document.querySelector(".js-alert");N&&n.default.destroy(N)};M.prototype.hideErrors=function(){var N=document.querySelector(".js-alert");N&&n.default.empty(N)};M.prototype.showAlert=function(N){var P=N.type||"success";N=N.text||"";this._alert&&this._alert.destroy();var R=document.querySelector("arcgis-onboarding-whats-new");R&&R.parentElement.removeChild(R);this._alert=D.default.showAlert(P,N)};M.prototype.showError=function(N){this._showError(N)};M.prototype._addEventListeners=function(){var N=this;
this.own(p.default.subscribe("alert/show",this.showAlert.bind(this)),p.default.subscribe("tabs/disable",this._disableTabs.bind(this)),p.default.subscribe("tabs/enable",this._enableTabs.bind(this)),p.default.subscribe("page/showError",this._showError.bind(this)),p.default.subscribe("page/disableErrors",function(){N._hideErrors=!0}),p.default.subscribe("page/enableErrors",function(){N._hideErrors=!1}),(0,m.default)(window,"resize",(0,t.default)(function(){return p.default.publish("window/resize")},
300)))};M.prototype._buildPage=function(){var N=this,P;this.set("pageTitle",H.default.portalName||this.i18n.common.arcgis);var R=h.default.locale.split("-");document.documentElement.lang=-1!==h.default.locale.indexOf("-")?[R[0],R[1].toUpperCase()].join("-"):R[0];this.pageNode=this.pageNode||e.default.body();this.flexFix=n.default.create("div",{class:"flex-column"},this.pageNode,"next");this.contentWrapper=n.default.create("div",{class:"js-content-wrapper content-wrapper flex-column flex-1 hide"},
this.flexFix,"next");this.hideHeader||(this.header=new y.default({page:this,id:"header",esriPortalConfig:this.esriPortalConfig,relativePath:this.relativePath,telemetry:this.telemetry}),this.header.placeAt(this.contentWrapper,"first"),this.header.startup());n.default.place(this.domNode,this.contentWrapper);this.hideFooter||(this.footerDiv=n.default.create("div",null,this.contentWrapper,"last"),this.footer=(0,E.h)(z.default,{id:"footer",portal:this.portal}),(0,E.render)(this.footer,this.footerDiv));
this.skipToContent&&(R=v.default.substitute('\x3ca href\x3d"#${skipToContent}" class\x3d"skip-to-content js-skip-to-content"\x3e${i18n.common.skipToContent}\x3c/a\x3e',{skipToContent:this.skipToContent,i18n:I.default}),n.default.place(R,this.pageNode,"first"),document.querySelector(".js-skip-to-content").addEventListener("click",function(Y){Y.preventDefault();Y.stopPropagation();if(Y=document.getElementById(N.skipToContent))Y.tabIndex=-1,Y.focus()}));this.set("htmlCssClasses");(null===(P=this.portalUser)||
void 0===P?0:P.orgId)&&this.setBlockedClasses()};M.prototype.setBlockedClasses=function(){B.default.getBlockedApps().then(function(N){var P={webappbuilder:"wab-blocked",arcgisstorymaps:"storymap-blocked",opsdashboard:"dashboard-blocked",experienceBuilder:"exp-builder-blocked",HubforArcGIS:"hub-blocked",arcgisinstantapps:"instant-apps-blocked",fieldmaps:"fieldMaps-blocked"};Object.keys(P).forEach(function(R){-1<(null===N||void 0===N?void 0:N.indexOf(R))&&(R=P[R],document.documentElement.classList.add(R),
document.body.classList.add(R))})})};M.prototype._setHtmlCssClassesAttr=function(){var N=[],P=this.portal,R=P.getPortalUser(),Y=R&&R.isOrgUser,ja=R&&R.licenses,aa;N.push(P.isPortal?"is-on-premise":"is-online");N.push(R?"is-signed-in":"is-signed-out");Object.keys(ja||{}).forEach(function(da){aa=ja[da];!aa.valid&&aa.className&&N.push(aa.className)});N.push(H.default.webAppBuilderEnabled&&Y?"is-wab-enabled":"");N.push(H.default.showCreateDashboard&&Y?"is-createDashboard-enabled":"");N.push(H.default.sceneViewerEnabled?
"is-sceneViewer-enabled":"");k.default.add(document.querySelector("html"),N.join(" "))};M.prototype._request=function(N,P){return x.default.request(N,P)};M.prototype._showError=function(N){var P=null;P=N&&N.message||this.i18n.common.errors.genericError.message;var R=document.querySelector(".js-alert")||n.default.toDom('\x3cdiv class\x3d"flex-center js-alert leader-2 trailer-2"\x3e\x3c/div\x3e'),Y=null;if(!(this._hideErrors||N&&("SB_0001"===N.messageCode||"SB_0002"===N.messageCode)||403!==N.code&&
"GWM_0003"===N.messageCode)){if(!this._item&&this.portalUser&&N&&403===N.code){if(-1!==N.message.indexOf("world/utilities.gpserver"))return;P=this.i18n.errorWidget.accessDeniedResource;this._showErrors=!0}else"GWM_0011"===(null===N||void 0===N?void 0:N.messageCode)?(P=-1<window.location.href.indexOf("/group.html")?this.i18n.common.errors.spamContentGroupUpdate:this.i18n.common.errors.spamContentItemUpdate,this._showErrors=!0):P&&"Item does not exist or is inaccessible."===P?(P=this.i18n.errorWidget.itemNotFound+
" "+this.i18n.errorWidget.invalidItem,this._showErrors=!0):P&&"User does not exist or is inaccessible."===P?(P=this.i18n.errorWidget.userNotFound+" "+this.i18n.errorWidget.invalidUser,this._showErrors=!0):P&&"Your request has timed out."===P?P=this.i18n.contentCategories.errors.timedOut:this.portal.isPortal&&N&&"string"===typeof N&&-1<N.indexOf("ERROR 002555")?(P=this.i18n.itemProperties.error.dataStoreReadOnlyMode,this._showErrors=!0):P&&-1<P.indexOf("Your account is out of storage space and your item cannot be updated.")?
(P=this.i18n.common.errors.outOfStorageSpace,this._showErrors=!0):P=N.messageHTML?N.messageHTML:x.default.htmlEncode(P);Y=n.default.toDom('\x3cdiv class\x3d"column-12 alert alert-red alert-inline break-word is-active"\x3e'+P+"\x3c/div\x3e");if(this._showErrors&&N&&499!==N.code&&498!==N.code&&404!==N.code)if(this._forceErrorToast||this.isLoaded&&!N.forceErrorNode)D.default.showAlert("error",P);else{(0,q.default)(".content-wrapper .loader, .js-page-loader").removeClass("is-active");(0,q.default)(".js-content-wrapper").removeClass("hide");
P=document.querySelector(".view-background");var ja=document.querySelectorAll("header.subnav").length?1:0;n.default.place(R,P,ja);n.default.place(Y,R,"only")}p.default.publish("ago/page/error",{error:N});return N}};M.prototype._createTab=function(N,P){var R=this.tabDijit=new N(a.default.mixin({page:this,i18n:this.i18n,portal:this.portal,portalUser:this.portalUser,telemetry:this.telemetry},P||{}),n.default.create("div",{},this._content)),Y=new d.default;R.startup().then(function(){c.default.init();
window.setTimeout(function(){var ja;null===(ja=document.body.querySelectorAll(".accordion, .accordion-title"))||void 0===ja?void 0:ja.forEach(function(aa){aa.removeAttribute("role")})},10);Y.resolve(R)});return Y};M.prototype._destroyTab=function(){var N=this,P=new d.default,R=this.tabDijit&&this.tabDijit.canDestroy?this.tabDijit.canDestroy():!0;(0,b.default)(R,function(){N.showLoader();(g.default.findWidgets(N._content)||[]).forEach(function(Y){Y.destroy?Y.destroy():Y.destroyRecursive&&Y.destroyRecursive()});
n.default.empty(N._content);D.default.clearAlerts();P.resolve(!0)});return P};M.prototype._disableTabs=function(){var N=this;this._clearTabHandlerOverrides();var P=document.querySelectorAll(".js-subnav-link");G.default.forEachNode(P,function(R){N._disabledTabHandlers.push((0,m.default)(R,"click",function(Y){Y.stopPropagation();Y.preventDefault()}));l.default.set(R,"aria-disabled",!0);k.default.add(R,"disabled")})};M.prototype._enableTabs=function(){var N=this;setTimeout(function(){N._clearTabHandlerOverrides();
var P=document.querySelectorAll(".js-subnav-link");G.default.forEachNode(P,function(R){l.default.set(R,"aria-disabled",!1);k.default.remove(R,"disabled")})},500)};M.prototype._clearTabHandlerOverrides=function(){this._disabledTabHandlers=this._disabledTabHandlers||[];this._disabledTabHandlers.forEach(function(N){return N.remove()})};M.prototype.getMemberDefaults=function(){var N,P=null===(N=this.portalUser)||void 0===N?void 0:N.userRole;N=(null===P||void 0===P?void 0:P.isAdmin())||(null===P||void 0===
P?void 0:P.canManageSecurity());return this.portalUser&&this.portal.id&&N?this.portal.getMemberDefaults():(N=new d.default,N.resolve(),N)};M.prototype.getHomePageConfig=function(){var N=new d.default;if(!this.portalUser||!this.portal.id)return N.resolve(),N;var P=F.default.hasModernHomePageEnabled(this.portal);(this.portal.hasModernHomePageEnabled=P)?this.portal.getHomePageConfig().then(function(){N.resolve()}):N.resolve();return N};M.prototype.disableErrors=function(){this._hideErrors=!0};M.prototype.enableErrors=
function(){this._hideErrors=!1};return M=f.__decorate([(0,C.default)(u.default,r.default)],M)}()})},"arcgisonline/pages/components/SiteFooter":function(){define("require exports tslib ../../esriGeowConfig ../../pages/utils/organization ../utils/arrays dojo/topic preact preact/hooks dojo/i18n!../../nls/arcgisonline".split(" "),function(S,J,f,c,h,d,b,a,e,q){Object.defineProperty(J,"__esModule",{value:!0});c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);q=
f.__importDefault(q);J.default=function(t){var u=t.id,g=t.portal;t=(0,e.useState)(!1);var m=t[0],v=t[1];t=(0,e.useState)([]);var p=t[0],l=t[1];(0,e.useEffect)(function(){var D=b.default.subscribe("contact-us-link/update",n);return function(){var G;null===(G=null===D||void 0===D?void 0:D.remove)||void 0===G?void 0:G.call(D)}},[]);(0,e.useEffect)(function(){n()},[]);var n=function(){var D,G,F=f.__assign(f.__assign(f.__assign({},q.default.common),q.default.siteFooter),{helpLabel:q.default.supportPage.helpLabel}),
A=g.portalUser,y=g.isPortal,z=window.location.href;-1<z.indexOf("?useExisting\x3d1")&&(z=z.substring(0,z.length-14));v(-1<z.indexOf("viewer.html")&&-1===z.indexOf("returnUrl")&&!h.default.isMobile());var B=[];(c.default.footerLinks||[]).forEach(function(C){var H,E,K="${i18n.legal}"===(null===C||void 0===C?void 0:C.title),I=!!(K&&(null===A||void 0===A?0:A.accountId)),L="${i18n.help}"===(null===C||void 0===C?void 0:C.title)||"support.html"===(null===C||void 0===C?void 0:C.url),M=!(L&&!A&&"public"===
g.access&&(y||!y&&g.customBaseUrl));K=!K&&!L||K&&!I||L&&!M;I=null===(H=C.title)||void 0===H?void 0:H.indexOf("${i18n.");H=null===(E=C.title)||void 0===E?void 0:E.indexOf("}");E=-1<I&&-1<H?"".concat(F[C.title.substring(I+7,H)]):C.title;if(C.url){-1===C.url.indexOf("http")&&-1===C.url.indexOf("mailto:")&&m&&(C.url="support.html"===C.url?g.helpBase||"".concat(c.default.baseUrl).concat(C.url):"".concat(c.default.baseUrl).concat(C.url));if("${i18n.help}"===C.title||"support.html"===C.url)C.url=g.helpBase;
K&&B.push({href:C.url,target:"_blank",title:E})}else y&&"contactUs"===C.type?(K=c.default.portalName||"ArcGIS.com",H=escape(z),C="mailto:".concat(C.email),C+='?subject\x3d"A comment about '.concat(K,'"'),C+='\x26body\x3d"I have the following comment about the '.concat(K," Web site. %0AReferring page: ").concat(H,' %0A %0A(Please provide as much detail as possible. Note: Contact Us is not meant for obtaining technical support or general product information.)"'),B.push({id:"".concat(u,"_contactEsri"),
href:C,title:E})):"reportAbuse"===C.type&&(H=escape(z),C="mailto:".concat(C.email,'?subject\x3d"Concerns about an item"'),C+='\x26body\x3d"I have concerns about the following. %0AReferring page: '.concat(H," %0A %0A(Please describe your concerns. If you have concerns about a particular item, it's best to click the 'Report Abuse' link while viewing the item description. Doing so will include the URL to the specific item in this e-mail.)\""),B.push({href:C,title:E}))});k(null===(G=null===(D=g.portalProperties)||
void 0===D?void 0:D.links)||void 0===G?void 0:G.contactUs,B)},k=function(D,G){G=null!==G&&void 0!==G?G:p;D=null!==D&&void 0!==D?D:{visible:!1,url:""};D={id:"".concat(u,"_customContactUs"),href:D.url,title:q.default.siteFooter.customContactUs,className:D.visible?"footer__contact-us":"footer__contact-us hide"};var F=d.default.findIndex(G,function(A){return A.id==="".concat(u,"_customContactUs")});-1<F?G[F]=D:(F=d.default.findIndex(G,function(A){return A.id==="".concat(u,"_contactEsri")}),-1<F?G.splice(F,
0,D):G.push(D));l(G)};t="".concat(u,"_links");var r=m?"\x26nbsp;. ":"",w=p.filter(function(D){return!D.className||-1===D.className.indexOf("hide")}),x=w.map(function(D,G){var F,A,y,z=null!==(F=D.id)&&void 0!==F?F:"".concat(u,"_link").concat(G);F=D.href;var B=null!==(A=D.target)&&void 0!==A?A:"";A=null!==(y=D.className)&&void 0!==y?y:"";G=G===w.length-1;return(0,a.h)(a.Fragment,null,(0,a.h)("a",{id:z,href:F,className:A,target:B},D.title),G?null:(0,a.h)("span",null,r))});return(0,a.h)("div",{class:"padding-leader-2 footer text-center padding-trailer-1 font-size--2 text-light-gray",
role:"contentinfo"},(0,a.h)("span",{id:t,class:"esriItemLinks"},x),(0,a.h)("div",{class:"esri-footer-barrier"}))}})},"arcgisonline/pages/dijit/SubNav":function(){define("require exports tslib dojo/dom-class dojo/has dojo/hash dojo/query dojo/string dojo/topic dijit/_TemplatedMixin dijit/_WidgetBase ../../tsutils/declareDecorator ../utils/formatters ../utils/arrays ../utils/dom ../utils/focus ./InlineEdit dojo/text!./SubNav/templates/_option.html dojo/text!./SubNav/templates/_title.html dojo/text!./SubNav/templates/_paths.html dojo/text!./SubNav/templates/_path.html dojo/text!./SubNav/templates/SubNav.html dojo/i18n!../../nls/arcgisonline ../utils/icons".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);D=f.__importDefault(D);
G=f.__importDefault(G);return function(){function F(A,y){this.templateString=x.default;this.i18n=D.default;this.linksHTML=this.activeLabel="";this.hideLinks="hide";this.edit=null;this._titleTypeSize="subnav-title";this.titleHTML=""}F.prototype.postMixInProperties=function(){var A=this,y;this.inherited(arguments);var z=this.links&&this.links.map(function(B){B.show=-1===Object.keys(B).indexOf("show")||B.show;return B}).filter(function(B){return B.show});0<(null===z||void 0===z?void 0:z.length)&&(this.hideLinks=
"",this.linksHTML=this.links.reduce(function(B,C){C.logClick=!!C.logClick;C.isActive=C.id===A.active?"is-active":"";C.isActive&&(A.activeLabel=C.label);return B+a.default.substitute(n.default,C,null,g.default)},""),document.title="".concat(this.titleText," - ").concat(this.activeLabel));if(100<(null===(y=this.title)||void 0===y?void 0:y.length)||this.paths)this._titleTypeSize+=" subnav-title--".concat(180<this.titleText.length?"smaller":"small"),this.edit&&(this.edit.titleClass=this._titleTypeSize);
this.titleHTML=this.paths?this.generateBreadCrumbs(this.paths):a.default.substitute(k.default,this)};F.prototype.postCreate=function(){var A=this;this.inherited(arguments);this.own((0,b.default)(".js-subnav-expand",this.domNode).on("click",this.toggleNav.bind(this)),(0,b.default)(".js-subnav-link",this.domNode).on("keyup",this.handleKeyUp.bind(this)),(0,b.default)(".js-subnav-link",this.domNode).on("click",this.handleLinkClick.bind(this)),e.default.subscribe("/dojo/hashchange",function(y){((0,h.default)("ie")||
(0,h.default)("trident")||(0,h.default)("edge"))&&A.updateActiveTab(y)}));this.paths&&this.attachBreadCrumbEvents();window.addEventListener("popstate",function(){A.updateActiveTab(window.location.hash)});this.edit&&(this.edit.formClass="flex flex-center fullscreen",this.edit.inputLabel=D.default.itemProperties.editTitle,this._titleEdit=new l.default(this.edit,this.domNode.querySelector(".js-subnav-edit")),this.own(e.default.subscribe("inlineEdit/".concat(this.edit.prop,"/done"),this.closeEdit.bind(this)),
e.default.subscribe("inlineEdit/".concat(this.edit.prop,"/cancel"),this.closeEdit.bind(this)),e.default.subscribe("inlineEdit/".concat(this.edit.prop,"/start"),this.openEdit.bind(this))))};F.prototype.showTab=function(A){(0,b.default)('.js-subnav-link[data-tab\x3d"'.concat(A,'"]'),this.domNode).removeClass("hide")};F.prototype.hideTab=function(A){(0,b.default)('.js-subnav-link[data-tab\x3d"'.concat(A,'"]'),this.domNode).addClass("hide")};F.prototype.showEditLink=function(){var A;null===(A=this._titleEdit)||
void 0===A?void 0:A.showEditLink()};F.prototype.hideEditLink=function(){var A;null===(A=this._titleEdit)||void 0===A?void 0:A.hideEditLink()};F.prototype.updateText=function(A){var y;null===(y=this._titleEdit)||void 0===y?void 0:y.updateText(A)};F.prototype.setPageTitle=function(A){this.domNode.querySelector("#pagetitle").textContent=A};F.prototype.updateBreadCrumbs=function(A){this.paths=A;this.domNode.querySelector(".js-subnav-title-wrap").innerHTML=this.generateBreadCrumbs(A);this.attachBreadCrumbEvents()};
F.prototype.updateActiveTab=function(A){A=A||"overview";var y=(0,b.default)(".js-subnav-link",this.domNode);y.removeClass("is-active").attr("aria-selected","false");if(y=m.default.find(y,function(z){return z.getAttribute("href").replace("#","")===A.replace("#","")}))c.default.add(y,"is-active"),y.setAttribute("aria-selected","true"),this.activeLabel=y.textContent,this.domNode.querySelector(".js-subnav-current-label").innerHTML=this.activeLabel,this.closeNav(),document.title="".concat(this.titleText,
" - ").concat(this.activeLabel)};F.prototype.attachBreadCrumbEvents=function(){var A=this,y;this.domNode.querySelectorAll(".js-subnav-paths")&&0<(null===(y=this.paths)||void 0===y?void 0:y.length)&&(v.default.forEachNode(this.domNode.querySelectorAll(".js-subnav-path"),function(z,B){var C;(null===(C=A.paths[B])||void 0===C?0:C.onPathClick)&&z.addEventListener("click",function(H){A.paths[B].onPathClick(H)})}),y=this.paths[this.paths.length-1],y.edit&&(y.edit.formClass="flex flex-center fullscreen",
y.edit.inputLabel=D.default.itemProperties.editTitle,this._titleEdit=new l.default(y.edit,this.domNode.querySelector(".js-last-path")),this.own(e.default.subscribe("inlineEdit/".concat(y.edit.prop,"/done"),this.closeEdit.bind(this)),e.default.subscribe("inlineEdit/".concat(y.edit.prop,"/cancel"),this.closeEdit.bind(this)),e.default.subscribe("inlineEdit/".concat(y.edit.prop,"/start"),this.openEdit.bind(this)))))};F.prototype.generateBreadCrumbs=function(A){A=A.map(function(y,z,B){return a.default.substitute(w.default,
f.__assign(f.__assign({},y),{icons:G.default,showBack:1<B.length&&0===z?"":"hide",lastPath:z===B.length-1?"js-last-path subnav-breadcrumb-last flex-0":"subnav-breadcrumb-first js-early-path"}))}).join("\x3cspan class\x3d'subnav-breadcrumb-separator flex-0 js-early-path'\x3e/\x3c/span\x3e");return a.default.substitute(r.default,{paths:A,_titleTypeSize:this._titleTypeSize})};F.prototype.openNav=function(){var A=this;this.domNode.querySelector(".js-subnav-expand").setAttribute("aria-expanded","true");
(0,b.default)(".js-subnav-links, .js-subnav-expand",this.domNode).addClass("is-active");window.setTimeout(function(){var y,z=A.domNode.querySelector(".js-subnav-links");null===(y=z.firstChild)||void 0===y?void 0:y.focus();A.focusTrapHandler=p.default.trapFocus(z)},100)};F.prototype.closeNav=function(){this.domNode.querySelector(".js-subnav-expand").setAttribute("aria-expanded","false");(0,b.default)(".js-subnav-links, .js-subnav-expand",this.domNode).removeClass("is-active");this.focusTrapHandler&&
(p.default.untrapFocus(this.domNode.querySelector(".js-subnav-links"),this.focusTrapHandler),this.domNode.querySelector(".js-subnav-expand").focus())};F.prototype.toggleNav=function(A){c.default.contains(A.target,"is-active")?this.closeNav():this.openNav()};F.prototype.openEdit=function(A){(0,b.default)(".js-subnav-links,.js-subnav-expand,.js-early-path").addClass("visibility-hidden")};F.prototype.closeEdit=function(){(0,b.default)(".js-subnav-links,.js-subnav-expand,.js-early-path").removeClass("visibility-hidden")};
F.prototype.handleKeyUp=function(A){32===A.keyCode?(A.preventDefault(),this.logClickEvent(A.target,this.telemetry),(0,d.default)(A.target.getAttribute("href"),!0)):"Escape"===A.key&&this.domNode.querySelector(".js-subnav-expand").classList.contains("is-active")&&this.closeNav()};F.prototype.handleLinkClick=function(A){this.logClickEvent(A.target,this.telemetry)};F.prototype.logClickEvent=function(A,y){"true"===(null===A||void 0===A?void 0:A.dataset.logclick)&&(null===y||void 0===y?void 0:y.logEvent({category:"Secondary Nav",
action:A.dataset.tab,size:window.innerWidth,pageUrl:window.location.href}))};return F=f.__decorate([(0,u.default)(t.default,q.default)],F)}()})},"arcgisonline/pages/dijit/InlineEdit":function(){define("require exports tslib esri/lang esri/libs/sanitizer/Sanitizer arcgis-components/wrappers/Tags dojo/on dojo/query dojo/has dojo/topic dojo/string dojo/i18n!../../nls/arcgisonline dijit/_TemplatedMixin dijit/_WidgetBase ../pageUtil ../utils/formatters ../utils/alerts ../utils/arrays ../utils/dom ../../sharing/util ../utils/icons ../../sharing/dijit/Editor dojox/uuid/generateRandomUuid ./CategoryPicker dojo/text!./InlineEdit/templates/InlineEdit.html dojo/text!./InlineEdit/templates/inlineEditTextArea.html dojo/text!./InlineEdit/templates/inlineEditFieldValueType.html dojo/text!./InlineEdit/templates/inlineEditRichText.html dojo/text!./InlineEdit/templates/inlineEditCustom.html dojo/text!./InlineEdit/templates/inlineEditLayerRename.html dojo/text!./InlineEdit/templates/inlineEditLayerRenameSubnav.html dojo/text!./InlineEdit/templates/inlineEditNotebookTags.html dojo/text!./InlineEdit/templates/inlineEditNumericChange.html arcgisonline/tsutils/declareDecorator dijit/_editor/plugins/FontChoice dijit/_editor/plugins/TextColor ./InlineEdit/ViewSource ../../sharing/dijit/LinkDialog".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E,K,I){c=f.__importDefault(c);h=f.__importDefault(h);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);D=f.__importDefault(D);
G=f.__importDefault(G);F=f.__importDefault(F);A=f.__importDefault(A);y=f.__importDefault(y);z=f.__importDefault(z);B=f.__importDefault(B);C=f.__importDefault(C);H=f.__importDefault(H);E=f.__importDefault(E);K=f.__importDefault(K);I=f.__importDefault(I);return function(){function L(M,N){this.templateString=F.default;this.i18n=u.default;this.icons=w.default;this.inputType="textbox";this.inputClass="subnav-edit__input";this.defaultText=this.inputLabel="";this.invalidText=this.emptyText=void 0;this.required=
!1;this.pattern=void 0;this.editorHeight="240px";this.rows=4;this.titleClass="subnav-title";this.titleId="pagetitle";this.viewTitle=this.placeholder=this.buttonsClass=this.formClass=this.formTitle="";this.knownTags=[];this.isGroup=!1;this.editButtonClasses="btn-link-white if-can-update";this.editButtonUpdatePermissionClasses="if-can-update";this.cancelButtonClasses="btn btn-transparent btn-link-white";this.saveButtonClasses="btn btn-white margin-left-half";this.showCharactersLeft=this.showLoader=
!1;this.sanitizer=new h.default;this.dontSanitize=!1;this._oldValue=this.prop="";this._supportsFormValidation=!1;this.templateString={textArea:A.default,fieldValueType:y.default,richText:z.default,tags:B.default,categories:B.default,layerRename:C.default,layerRenameSubnav:H.default,notebookTags:E.default,numericChange:K.default}[M.isNotebook?"notebookTags":M.inputType]||F.default;this.baseUrl=M.baseUrl;this.openInNewTab=M.openInNewTab;this.inputLabel=M.inputLabel||M.formTitle||u.default.common.edit}
L.prototype.postMixInProperties=function(){this.inherited(arguments);this.inputId=this.inputId||(0,D.default)();this._oldValue=this.value=this._sanitizeValue(this.value);this.knownTags&&(this.knownTags=this._sanitizeStringArray(this.knownTags))};L.prototype.postCreate=function(){this.inherited(arguments);this.showLoader&&k.default.showNode(this._saveLoader);this.required&&(this._input.required=!0);this.pattern&&(this._input.pattern=this.pattern);var M=document.createElement("input");this._supportsFormValidation=
!(0,e.default)("safari")&&"required"in M&&"pattern"in M;!this._supportsFormValidation||"textArea"!==this.inputType&&"textbox"!==this.inputType||this._input.setCustomValidity(this._valOrFunction(this.defaultText||"",window,[this._input]));switch(this.inputType){case "textArea":case "textbox":this.maxLength&&(this._input.maxLength=this.maxLength);break;case "richText":this._formatRichText();break;case "tags":this._inputEl.id=this.inputId,this._form.addEventListener("keydown",function(N){"Enter"===N.key&&
"INPUT"===N.target.nodeName&&N.preventDefault()})}this._hasCharactersLeft()&&(k.default.showNode(this._charactersLeft),this._setCharactersLeft(),this.own((0,b.default)(this._input,"keyup",this._setCharactersLeft.bind(this))));this._updateView();this._initHandlers()};L.prototype.initTagsEditor=function(){var M=Array.isArray(this.value)?this.value:this.value.split(",");this.domNode.querySelector(".js-inline-edit").setAttribute("data-edit-id","tags");this._input=new d.TagsWrapper(this.domNode.querySelector("#".concat(this.inputId)),
{activeTags:M.filter(function(N){return N}),knownTags:this.knownTags.map(function(N){return N.tag}),maxWidth:"100%",minWidth:"100%"})};L.prototype.initCategoryPicker=function(){var M=this;this.portal&&this.portal.getCategories().then(function(N){M._formatCategories(M.value);M._input=new G.default({categories:M.value,schema:N,alwaysOpen:!0},M._inputEl);M._input.startup()},function(N){})};L.prototype.hide=function(){k.default.hideNode(this.domNode)};L.prototype.hideEditLink=function(){(0,a.default)(".js-inline-edit",
this.domNode).addClass("visibility-hidden")};L.prototype.showEditLink=function(){(0,a.default)(".js-inline-edit",this.domNode).removeClass("visibility-hidden")};L.prototype.updateText=function(M){M=this._sanitizeString(M);(0,a.default)(".js-view",this.domNode).innerHTML(M);this.value=this._input.value=M};L.prototype.updateValue=function(M){M=this._sanitizeValue(M);this._setInputValue(M);this.value=M;this._updateView()};L.prototype._sanitizeValue=function(M){return M instanceof Array?this._sanitizeStringArray(M):
this._sanitizeString(M)};L.prototype._sanitizeStringArray=function(M){var N=this;return this.dontSanitize?M:(M||[]).map(function(P){return N.sanitizer.sanitize(P)})};L.prototype._sanitizeString=function(M){return this.dontSanitize?M:this.sanitizer.sanitize(M)};L.prototype._setCharactersLeft=function(){this._hasCharactersLeft()&&(this._charactersLeft.textContent=t.default.substitute(this.i18n.myOrganization.generalTab.summaryCharsLeft,{chars:this.maxLength-this._input.value.length}))};L.prototype._setInputValue=
function(M){this._input&&("richText"===this.inputType?this._input.set("value",M||""):"categories"===this.inputType?this._input.setCategories(M,!0):"tags"===this.inputType?(M=Array.isArray(M)?M:M.split(","),this._input.setTags(M.filter(function(N){return N}))):this._input.value=c.default.isDefined(M)?M:"")};L.prototype._initHandlers=function(){var M=this;this.own((0,b.default)(this._cancelButton,"click",function(N){N.stopPropagation();N.preventDefault();M._cancelEdit()}),(0,a.default)(".js-inline-edit",
this.domNode).on("click",function(N){var P;N.stopPropagation();q.default.publish("inlineEdit/".concat(M.prop,"/start"));M._oldValue=M.value;k.default.hideNode(M._textView);k.default.showNode(M._form);"richText"===M.inputType&&((null===(P=M._input)||void 0===P?0:P.destroy)&&M._input.destroy(!0),N=v.default.editorDefaults(M.inputId),N.height=M.editorHeight,M._input=new x.default(N,M._inputEl),M._input.startup(),M._input.set("value",M.value||""));"fieldValueType"===M.inputType&&M._setupFieldValueType(M.value);
"categories"!==M.inputType&&M._input.focus();"numericChange"===M.inputType&&M._setInputValue(M.value)}),(0,b.default)(this._form,"submit",function(N){N.stopPropagation();N.preventDefault();N="richText"===M.inputType&&M._input.get("value")||"textArea"===M.inputType&&M._input.value;M.containsHttp(N)?l.default.showAlert("error",M.i18n.common.httpNotSupported):M._submitForm()}),q.default.subscribe("inlineEdit/".concat(this.prop,"/done"),function(N){M.containsHttp(M.value)&&l.default.showAlert("error",
M.i18n.common.httpNotSupported);M._updateView();M.showLoader&&M._saveLoader&&(M._saveButton.disabled=!1,M._cancelButton.disabled=!1,M._saveLoader.classList.remove("inline-edit-save-loader--active"));M._hideEdit()}),q.default.subscribe("inlineEdit/cancel",function(){M._cancelEdit()}),q.default.subscribe("inlineEdit/".concat(this.prop,"/oldValue"),function(N){M.value=M._oldValue=N}));"textbox"!==this.inputType&&"textArea"!==this.inputType&&"layerRename"!==this.inputType&&"layerRenameSubnav"!==this.inputType||
this.own((0,b.default)(this._input,"change",this._changeOrInput.bind(this)),(0,b.default)(this._input,"input",this._changeOrInput.bind(this)),(0,b.default)(this._input,"invalid",this._invalid.bind(this)))};L.prototype.containsHttp=function(M){var N;return!r.default.isPortal()&&("richText"===this.inputType||"textArea"===this.inputType)&&-1<(null===(N=null===M||void 0===M?void 0:M.indexOf)||void 0===N?void 0:N.call(M,"http://"))};L.prototype._cancelEdit=function(){var M;this._setInputValue(this._oldValue);
this._setCharactersLeft();(null===(M=this._input)||void 0===M?0:M.validity)&&this._setCustomValidity("");"categories"===this.inputType&&this._input.hideError();this._hideEdit();q.default.publish("inlineEdit/".concat(this.prop,"/cancel"))};L.prototype._hasCharactersLeft=function(){return"textArea"===this.inputType&&this.maxLength&&this.showCharactersLeft&&c.default.isDefined(this._charactersLeft)};L.prototype._updateView=function(){var M=this.domNode.querySelectorAll(".js-view"),N=this.inputType;if(0<
M.length&&this.value||"tags"===N){switch(N){case "categories":M=this._formatCategories(this.value);break;case "fieldValueType":M=this._getFieldValueType(this.value);break;case "tags":M=this._formatTags(this.value);break;default:M=this.formatter?this.formatter(this.value):this.value}"tags"!==N&&"categories"!==N&&(M=this._sanitizeString(M));(0,a.default)(".js-view",this.domNode).innerHTML(M);"richText"===this.inputType&&this._formatRichText()}};L.prototype._submitForm=function(){var M={},N=n.default.from(this._form.elements)||
[],P;if(("textbox"===this.inputType||"textArea"===this.inputType||"layerRename"===this.inputType||"layerRenameSubnav"===this.inputType)&&!this._supportsFormValidation&&(N=N.some(function(R){return(P=R.getAttribute("data-customValidity"))?(q.default.publish("page/showError",{message:P}),!0):!1})))return;this.showLoader&&this._saveLoader&&(this._saveButton.disabled=!0,this._cancelButton.disabled=!0,this._saveLoader.classList.add("inline-edit-save-loader--active"));"categories"===this.inputType?(this._input.hideError(),
this.value=this._input.getCategories(!0),q.default.publish("inlineEdit/categories/submit",this.value)):(M[this.prop]="tags"===this.inputType?this._input.getTags().join(","):this._input.value,M.clearEmptyFields=!0,M.prop=this.prop,-1<["layerRename","layerRenameSubnav","layerDescription","layerCopyright"].indexOf(this.prop)&&void 0!==this.layerId&&(M.layerId=this.layerId),this.value=M[this.prop],q.default.publish("inlineEdit/submit",M));this._oldValue=this.value};L.prototype._changeOrInput=function(){var M,
N,P=null!==(N=null===(M=this._input.value)||void 0===M?void 0:M.trim())&&void 0!==N?N:"";M=this._input.pattern;N=this._input.required;var R="TEXTAREA"!==this._input.nodeName;!P&&N?this.emptyText&&this._setCustomValidity(this._valOrFunction(this.emptyText,window,[this._input])):this._supportsFormValidation&&R||!M?this._setCustomValidity(""):(new RegExp(M)).test(P)?this._setCustomValidity(""):this.invalidText&&this._setCustomValidity(this._valOrFunction(this.invalidText,window,[this._input]))};L.prototype._invalid=
function(){var M,N,P,R,Y,ja,aa=null!==(N=null===(M=this._input.value)||void 0===M?void 0:M.trim())&&void 0!==N?N:"";aa&&""!==aa?(null===(P=this._input.validity)||void 0===P?0:P.patternMismatch)||(null===(R=this._input.validity)||void 0===R?0:R.badInput)||(null===(Y=this._input.validity)||void 0===Y?0:Y.typeMismatch)||(null===(ja=this._input.validity)||void 0===ja?0:ja.customError)?this.invalidText&&this._setCustomValidity(this._valOrFunction(this.invalidText,window,[this._input])):this._setCustomValidity(""):
this.emptyText&&this._setCustomValidity(this._valOrFunction(this.emptyText,window,[this._input]))};L.prototype._valOrFunction=function(M,N,P){return"function"===typeof M?M.apply(N,P):M};L.prototype._setCustomValidity=function(M){this._supportsFormValidation?this._input.setCustomValidity(M):(this._input.setAttribute("data-customvalidity",M),""===M&&q.default.publish("hidePageError"))};L.prototype._hideEdit=function(){k.default.showNode(this._textView);k.default.hideNode(this._form)};L.prototype._formatCategories=
function(M){var N=new RegExp(/^\/.+\//);M=M.map(function(P){return P.replace(N,"")}).map(p.default.formatCategoryChip).reduce(function(P,R){return P+t.default.substitute("\x3cspan class\x3d'label filter-label'\x3e${category}\x3c/span\x3e",{category:R})},"");return 0<M.length?M:this.i18n.contentCategories.noCategoriesItem};L.prototype._formatTags=function(M){var N=this;M=M&&"string"===typeof M?M.split(","):M||[];var P="settings-tab"===this._currentView,R=this.isGroup?"groups":"content";return 0>=M.filter(function(Y){return Y}).length?
this.i18n.contentCategories.noTags:M.map(function(Y){var ja=N.dontSanitize?Y:N.sanitizer.sanitize(Y);ja=r.default.htmlEncode(ja);return P?Y:'\x3ca href\x3d"'.concat(N.baseUrl||"","search.html?t\x3d").concat(R,"\x26q\x3dtags:%22").concat(ja,'%22" target\x3d"').concat(N.openInNewTab?"_blank":"_self",'"\x3e').concat(ja,"\x3c/a\x3e")}).join(", ")};L.prototype._formatRichText=function(){(0,a.default)(".js-view table").addClass("table")};L.prototype._setupFieldValueType=function(M){for(var N=this.fieldValueTypeList.fieldValueType,
P=0;P<N.length;P++)this._input.options[P]=new Option(this._getFieldValueType(N[P].title),N[P].title),M===N[P].title&&(this._input.selectedIndex=P)};L.prototype._getFieldValueType=function(M){if("none"===M)return this.i18n.attributeFieldDetails.none;M=M||this.i18n.attributesView.commonUndefined;return this.i18n.attributeFieldDetails.fieldValueTypesList[M]||M};return L=f.__decorate([(0,I.default)(m.default,g.default)],L)}()})},"arcgis-components/wrappers/Tags":function(){define(["../Component","../Inputs/Tags/index"],
function(S,J){return function(f){function c(d){if(h[d])return h[d].exports;var b=h[d]={i:d,l:!1,exports:{}};return f[d].call(b.exports,b,b.exports,c),b.l=!0,b.exports}var h={};return c.m=f,c.c=h,c.d=function(d,b,a){c.o(d,b)||Object.defineProperty(d,b,{enumerable:!0,get:a})},c.r=function(d){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"});Object.defineProperty(d,"__esModule",{value:!0})},c.t=function(d,b){if((1&b&&(d=c(d)),8&b)||4&b&&"object"==
typeof d&&d&&d.__esModule)return d;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:d}),2&b&&"string"!=typeof d)for(var e in d)c.d(a,e,function(q){return d[q]}.bind(null,e));return a},c.n=function(d){var b=d&&d.__esModule?function(){return d.default}:function(){return d};return c.d(b,"a",b),b},c.o=function(d,b){return Object.prototype.hasOwnProperty.call(d,b)},c.p="",c(c.s=949)}({1:function(f,c,h){function d(m,v){function p(){this.constructor=m}if("function"!=
typeof v&&null!==v)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");u(m,v);m.prototype=null===v?Object.create(v):(p.prototype=v.prototype,new p)}function b(m,v){var p={},l;for(l in m)Object.prototype.hasOwnProperty.call(m,l)&&0>v.indexOf(l)&&(p[l]=m[l]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(l=Object.getOwnPropertySymbols(m);n<l.length;n++)0>v.indexOf(l[n])&&Object.prototype.propertyIsEnumerable.call(m,l[n])&&(p[l[n]]=m[l[n]])}return p}
function a(m,v,p,l){var n,k=arguments.length,r=3>k?v:null===l?l=Object.getOwnPropertyDescriptor(v,p):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(m,v,p,l);else for(var w=m.length-1;0<=w;w--)(n=m[w])&&(r=(3>k?n(r):3<k?n(v,p,r):n(v,p))||r);return 3<k&&r&&Object.defineProperty(v,p,r),r}function e(m,v,p,l){return new (p||(p=Promise))(function(n,k){function r(D){try{x(l.next(D))}catch(G){k(G)}}function w(D){try{x(l.throw(D))}catch(G){k(G)}}function x(D){var G;D.done?
n(D.value):(G=D.value,G instanceof p?G:new p(function(F){F(G)})).then(r,w)}x((l=l.apply(m,v||[])).next())})}function q(m,v){function p(x){return function(D){return function(G){if(l)throw new TypeError("Generator is already executing.");for(;r&&(r=0,G[0]&&(w=0)),w;)try{if(l=1,n&&(k=2&G[0]?n.return:G[0]?n.throw||((k=n.return)&&k.call(n),0):n.next)&&!(k=k.call(n,G[1])).done)return k;switch(n=0,k&&(G=[2&G[0],k.value]),G[0]){case 0:case 1:k=G;break;case 4:return w.label++,{value:G[1],done:!1};case 5:w.label++;
n=G[1];G=[0];continue;case 7:G=w.ops.pop();w.trys.pop();continue;default:if(!(k=w.trys,(k=0<k.length&&k[k.length-1])||6!==G[0]&&2!==G[0])){w=0;continue}if(3===G[0]&&(!k||G[1]>k[0]&&G[1]<k[3]))w.label=G[1];else if(6===G[0]&&w.label<k[1])w.label=k[1],k=G;else if(k&&w.label<k[2])w.label=k[2],w.ops.push(G);else{k[2]&&w.ops.pop();w.trys.pop();continue}}G=v.call(m,w)}catch(F){G=[6,F],n=0}finally{l=k=0}if(5&G[0])throw G[1];return{value:G[0]?G[1]:void 0,done:!0}}([x,D])}}var l,n,k,r,w={label:0,sent:function(){if(1&
k[0])throw k[1];return k[1]},trys:[],ops:[]};return r={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r}function t(m,v,p){if(p||2===arguments.length)for(var l,n=0,k=v.length;n<k;n++)!l&&n in v||(l||(l=Array.prototype.slice.call(v,0,n)),l[n]=v[n]);return m.concat(l||Array.prototype.slice.call(v))}h.d(c,"d",function(){return d});h.d(c,"a",function(){return g});h.d(c,"f",function(){return b});h.d(c,"c",function(){return a});h.d(c,"b",function(){return e});
h.d(c,"e",function(){return q});h.d(c,"g",function(){return t});var u=function(m,v){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,l){p.__proto__=l}||function(p,l){for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(p[n]=l[n])})(m,v)},g=function(){return(g=Object.assign||function(m){for(var v,p=1,l=arguments.length;p<l;p++)for(var n in v=arguments[p])Object.prototype.hasOwnProperty.call(v,n)&&(m[n]=v[n]);return m}).apply(this,arguments)};Object.create;Object.create},
17:function(f,c){f.exports=S},681:function(f,c){f.exports=J},949:function(f,c,h){h.r(c);h.d(c,"TagsWrapper",function(){return q});var d=h(1),b=h(17);f=h(681);h=h.n(f);var a=function(t,u){switch(u.type){case "UPDATE_ACTIVE_TAGS":return Object(d.a)(Object(d.a)({},t),{activeTags:u.payload});case "UPDATE_KNOWN_TAGS":return Object(d.a)(Object(d.a)({},t),{knownTags:u.payload});default:return t}},e=Object(b.connect)(function(t){return{activeTags:t.activeTags,knownTags:t.knownTags}},function(t){return{onChange:function(u){t({type:"UPDATE_ACTIVE_TAGS",
payload:u})}}})(h.a),q=function(){function t(u,g){this.renderContainer=u;this.store=Object(b.createStore)(a,{activeTags:g.activeTags,knownTags:g.knownTags});this.projector=Object(b.createProjector)(this.store,function(m){return m(e,Object(d.a)({key:"wrapped-tags"},g))},this.renderContainer)}return t.prototype.destroy=function(){this.projector.stop();this.renderContainer.remove?this.renderContainer.remove():this.renderContainer.parentNode&&this.renderContainer.parentNode.removeChild(this.renderContainer)},
t.prototype.focus=function(){var u=this.renderContainer.querySelector("input");u&&u.focus()},t.prototype.getTags=function(){return this.store.getState().activeTags},t.prototype.setTags=function(u){this.store.dispatch({type:"UPDATE_ACTIVE_TAGS",payload:u})},t.prototype.getKnownTags=function(){return this.store.getState().knownTags},t.prototype.setKnownTags=function(u){this.store.dispatch({type:"UPDATE_KNOWN_TAGS",payload:u})},t.prototype.watchTags=function(u){var g=this,m=this.store.getState().activeTags;
return this.store.subscribe(function(){var v=g.store.getState().activeTags;v!==m&&u(m=v)})},t}()}})})},"arcgis-components/Inputs/Tags/index":function(){define(["../../Component","dojo/i18n!../../Inputs/Tags/nls/resources"],function(S,J){return function(f){function c(d){if(h[d])return h[d].exports;var b=h[d]={i:d,l:!1,exports:{}};return f[d].call(b.exports,b,b.exports,c),b.l=!0,b.exports}var h={};return c.m=f,c.c=h,c.d=function(d,b,a){c.o(d,b)||Object.defineProperty(d,b,{enumerable:!0,get:a})},c.r=
function(d){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"});Object.defineProperty(d,"__esModule",{value:!0})},c.t=function(d,b){if((1&b&&(d=c(d)),8&b)||4&b&&"object"==typeof d&&d&&d.__esModule)return d;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:d}),2&b&&"string"!=typeof d)for(var e in d)c.d(a,e,function(q){return d[q]}.bind(null,e));return a},c.n=function(d){var b=d&&d.__esModule?function(){return d.default}:
function(){return d};return c.d(b,"a",b),b},c.o=function(d,b){return Object.prototype.hasOwnProperty.call(d,b)},c.p="",c(c.s=822)}({1:function(f,c,h){function d(m,v){function p(){this.constructor=m}if("function"!=typeof v&&null!==v)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");u(m,v);m.prototype=null===v?Object.create(v):(p.prototype=v.prototype,new p)}function b(m,v){var p={},l;for(l in m)Object.prototype.hasOwnProperty.call(m,l)&&0>v.indexOf(l)&&(p[l]=m[l]);
if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(l=Object.getOwnPropertySymbols(m);n<l.length;n++)0>v.indexOf(l[n])&&Object.prototype.propertyIsEnumerable.call(m,l[n])&&(p[l[n]]=m[l[n]])}return p}function a(m,v,p,l){var n,k=arguments.length,r=3>k?v:null===l?l=Object.getOwnPropertyDescriptor(v,p):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(m,v,p,l);else for(var w=m.length-1;0<=w;w--)(n=m[w])&&(r=(3>k?n(r):3<k?n(v,p,r):n(v,p))||r);return 3<
k&&r&&Object.defineProperty(v,p,r),r}function e(m,v,p,l){return new (p||(p=Promise))(function(n,k){function r(D){try{x(l.next(D))}catch(G){k(G)}}function w(D){try{x(l.throw(D))}catch(G){k(G)}}function x(D){var G;D.done?n(D.value):(G=D.value,G instanceof p?G:new p(function(F){F(G)})).then(r,w)}x((l=l.apply(m,v||[])).next())})}function q(m,v){function p(x){return function(D){return function(G){if(l)throw new TypeError("Generator is already executing.");for(;r&&(r=0,G[0]&&(w=0)),w;)try{if(l=1,n&&(k=
2&G[0]?n.return:G[0]?n.throw||((k=n.return)&&k.call(n),0):n.next)&&!(k=k.call(n,G[1])).done)return k;switch(n=0,k&&(G=[2&G[0],k.value]),G[0]){case 0:case 1:k=G;break;case 4:return w.label++,{value:G[1],done:!1};case 5:w.label++;n=G[1];G=[0];continue;case 7:G=w.ops.pop();w.trys.pop();continue;default:if(!(k=w.trys,(k=0<k.length&&k[k.length-1])||6!==G[0]&&2!==G[0])){w=0;continue}if(3===G[0]&&(!k||G[1]>k[0]&&G[1]<k[3]))w.label=G[1];else if(6===G[0]&&w.label<k[1])w.label=k[1],k=G;else if(k&&w.label<k[2])w.label=
k[2],w.ops.push(G);else{k[2]&&w.ops.pop();w.trys.pop();continue}}G=v.call(m,w)}catch(F){G=[6,F],n=0}finally{l=k=0}if(5&G[0])throw G[1];return{value:G[0]?G[1]:void 0,done:!0}}([x,D])}}var l,n,k,r,w={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return r={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r}function t(m,v,p){if(p||2===arguments.length)for(var l,n=0,k=v.length;n<k;n++)!l&&n in v||(l||(l=Array.prototype.slice.call(v,
0,n)),l[n]=v[n]);return m.concat(l||Array.prototype.slice.call(v))}h.d(c,"d",function(){return d});h.d(c,"a",function(){return g});h.d(c,"f",function(){return b});h.d(c,"c",function(){return a});h.d(c,"b",function(){return e});h.d(c,"e",function(){return q});h.d(c,"g",function(){return t});var u=function(m,v){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,l){p.__proto__=l}||function(p,l){for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(p[n]=l[n])})(m,v)},g=function(){return(g=
Object.assign||function(m){for(var v,p=1,l=arguments.length;p<l;p++)for(var n in v=arguments[p])Object.prototype.hasOwnProperty.call(v,n)&&(m[n]=v[n]);return m}).apply(this,arguments)};Object.create;Object.create},18:function(f,c){f.exports=S},400:function(f,c){f.exports=J},518:function(f,c,h){c.a=function(d,b){var a=d.name,e=d.onRemove;return b("li",{class:"inp-tags__tag",key:a},b("span",{title:a,class:"inp-tags__tag-innards",onkeydown:d.onKeyDown,id:"tag-".concat(a),tabindex:"-1"},a,b("button",
{class:"inp-tags__tag-remove-btn","data-value":a,onclick:e,tabindex:"-1",type:"button"},b("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 32 32"},b("path",{d:"M18.404 16l9.9 9.9-2.404 2.404-9.9-9.9-9.9 9.9L3.696 25.9l9.9-9.9-9.9-9.898L6.1 3.698l9.9 9.899 9.9-9.9 2.404 2.406-9.9 9.898z"})))))}},519:function(f,c,h){var d=h(400);c.a=function(b,a){var e=b.onSuggestionFocus,q=b.onSuggestionBlur,t=b.onSuggestionClick,u=b.onSuggestionKeyDown;if(!b.visible)return null;
b=b.matchingTags.map(function(m,v){var p={"inp-tags__suggestion":!0,"inp-tags__suggestion--grey":0==v%2,"inp-tags__suggestion--white":0!=v%2};return a("li",{id:"suggestion-".concat(v),classes:p,"data-value":m,"data-index":v,key:m,title:m,onfocus:e,onblur:q,onmousedown:t,onkeydown:u,tabindex:"0"},m)});var g=a("div",{class:"inp-tags__no-suggestions",id:"no-matching-div"},a("div",{class:"inp-tags__no-suggestions-text",id:"no-matching-text"},d.noTagsFound));return a("ul",{id:"tag-suggestions",class:"inp-tags__suggestions",
key:"tag-suggestions"},b[0]?b:g)}},822:function(f,c,h){h.r(c);var d=h(1);f=h(18);var b=h(400),a=h(518),e=h(519);h=function(q){function t(u){u=q.call(this,u)||this;return u.state={value:"",isFocused:!1,isTyping:!1,hasBeenFocused:!1},u.handleInputBlur=u.handleInputBlur.bind(u),u.handleInputChange=u.handleInputChange.bind(u),u.handleInputFocus=u.handleInputFocus.bind(u),u.handleInputKeyDown=u.handleInputKeyDown.bind(u),u.handleSuggestionBlur=u.handleSuggestionBlur.bind(u),u.handleSuggestionClick=u.handleSuggestionClick.bind(u),
u.handleSuggestionFocus=u.handleSuggestionFocus.bind(u),u.handleSuggestionKeyDown=u.handleSuggestionKeyDown.bind(u),u.handleWidgetClick=u.handleWidgetClick.bind(u),u.spliceTag=u.spliceTag.bind(u),u.handleTagInputKeyDown=u.handleTagInputKeyDown.bind(u),u}return Object(d.d)(t,q),t.prototype.render=function(u){var g=this,m={"inp-tags__active-tags":!0,"inp-tags__active-tags--focused":this.state.isFocused},v=this.props.knownTags.filter(function(l){return-1!==l.toLowerCase().indexOf(g.state.value.toLowerCase())&&
-1===g.props.activeTags.indexOf(l)}),p=this.props.maxWidth?this.props.maxWidth:"auto";return u("div",{id:"tags-container",classes:{"inp-tags__container":!0},style:"\n                        min-width: ".concat(this.props.minWidth?this.props.minWidth:"auto",";\n                        max-width: ").concat(p,";\n                    ")},u("ul",{classes:m,key:"active-tags",id:"active-tags"},this.props.activeTags.filter(function(l){return l}).map(function(l){return u(a.a,{name:l,onRemove:g.spliceTag,onKeyDown:g.handleTagInputKeyDown})}),
u("input",{id:"tags-input",class:"inp-tags__input",placeholder:b.addTags,value:this.state.value,onkeydown:this.handleInputKeyDown,onfocus:this.handleInputFocus,onblur:this.handleInputBlur,oninput:this.handleInputChange,afterCreate:this.handler})),u(e.a,{matchingTags:v,onSuggestionBlur:this.handleSuggestionBlur,onSuggestionClick:this.handleSuggestionClick,onSuggestionFocus:this.handleSuggestionFocus,onSuggestionKeyDown:this.handleSuggestionKeyDown,visible:this.state.isTyping}))},t.prototype.handler=
function(u){},t.prototype.addTag=function(u,g){var m=this;void 0===g&&(g=!0);var v=[];u.split(",").forEach(function(p){(p=m.stripHTML(p.trim()))&&-1===m.props.activeTags.indexOf(p)&&-1===v.indexOf(p)&&v.push(p)});this.props.onChange(this.props.activeTags.concat(v));(u=document.getElementById("tags-input"))&&g&&u.focus()},t.prototype.spliceTag=function(u){u=u.currentTarget||u.target;var g=Object(d.g)([],this.props.activeTags,!0);g.splice(this.props.activeTags.indexOf(u.dataset.value),1);this.props.onChange(g)},
t.prototype.handleInputBlur=function(u){var g=this;setTimeout(function(){var m=document.getElementById("tags-container");(null==m?0:m.contains(document.activeElement))||(g.addTag(u.target.value,!1),g.setState({value:"",hasBeenFocused:!0,isFocused:!1,isTyping:!1}))})},t.prototype.handleInputChange=function(u){this.setState({value:u.target.value})},t.prototype.handleInputFocus=function(){this.setState({isFocused:!0})},t.prototype.handleInputKeyDown=function(u){switch(u.key){case "Enter":u.target.value&&
(this.addTag(u.target.value),this.setState({value:"",isTyping:!1}),(g=document.getElementById("tags-input"))&&(g.focus(),g.value=""));break;case "Tab":var g;u.target.value&&(u.preventDefault(),this.addTag(u.target.value),this.setState({value:"",isTyping:!1}),(g=document.getElementById("tags-input"))&&(g.focus(),g.value=""));break;case "Backspace":u.target.value||(u=Object(d.g)([],this.props.activeTags,!0),u.pop(),this.props.onChange(u),this.setState({value:"",isTyping:!1}));break;case "Down":case "ArrowDown":g=
document.getElementById("suggestion-0");this.state.isTyping&&g?(u.preventDefault(),g.focus()):this.setState({isTyping:!0});break;case "Up":case "ArrowUp":case "Left":case "ArrowLeft":u="tag-".concat(this.props.activeTags[this.props.activeTags.length-1]);this.focusElement(document.getElementById(u));break;default:this.setState({isTyping:!0})}},t.prototype.handleSuggestionBlur=function(u){u.preventDefault();this.setState({isFocused:!1,isTyping:!1})},t.prototype.handleSuggestionClick=function(u){u.preventDefault();
this.addTag(u.target.dataset.value);this.setState({value:"",isFocused:!0,isTyping:!1});(u=document.getElementById("tags-input"))&&(u.focus(),u.value="")},t.prototype.handleSuggestionFocus=function(u){u.preventDefault();this.setState({isFocused:!0,isTyping:!0})},t.prototype.handleSuggestionKeyDown=function(u){switch(u.preventDefault(),u.key){case "Up":case "ArrowUp":0===u.target["data-index"]?this.focusElement(document.getElementById("tags-input")):this.focusElement(document.getElementById("suggestion-".concat(u.target["data-index"]-
1)));break;case "Down":case "ArrowDown":(u=document.getElementById("suggestion-".concat(u.target["data-index"]+1)))?u.focus():this.focusElement(document.getElementById("suggestion-0"));break;case "Tab":case "Enter":this.handleSuggestionClick(u);break;case "Escape":u.preventDefault(),this.focusElement(document.getElementById("tags-input"))}},t.prototype.handleWidgetClick=function(u){(u=document.getElementById("tags-input"))&&u.focus()},t.prototype.handleTagInputKeyDown=function(u){var g=document.activeElement.getAttribute("title");
if(g){var m=this.props.activeTags.indexOf(g);switch(u.key){case "Left":case "ArrowLeft":g="tag-".concat(0<m?this.props.activeTags[m-1]:this.props.activeTags[this.props.activeTags.length-1]);this.focusElement(document.getElementById(g));break;case "Right":case "ArrowRight":g=m<this.props.activeTags.length-1?"tag-".concat(this.props.activeTags[m+1]):"tag-".concat(this.props.activeTags[0]);this.focusElement(document.getElementById(g));break;case "Down":case "ArrowDown":this.focusElement(document.getElementById("tags-input"));
break;case "Backspace":case "Delete":u=Object(d.g)([],this.props.activeTags,!0),u.splice(this.props.activeTags.indexOf(g),1),this.props.onChange(u),g="tag-".concat(this.props.activeTags[m<this.props.activeTags.length-1?m+1:m-1]),this.focusElement(document.getElementById(g))}}},t.prototype.focusElement=function(u){u&&u.focus()},t.prototype.stripHTML=function(u){return u&&u.replace(/<(?:.|\s)*?>/g,"")},t}(f.Component);c.default=h}})})},"arcgisonline/pages/dijit/CategoryPicker":function(){define("require exports tslib dojo/has dojo/topic dojo/query dojo/string dojo/dom-class dojo/dom-construct dijit/_TemplatedMixin dijit/_WidgetBase ../utils/categories ../utils/formatters ../utils/icons dojo/text!./CategoryPicker/templates/CategoryPicker.html dojo/text!./CategoryPicker/templates/Category.html dojo/text!./CategoryPicker/templates/CategoryGroup.html dojo/text!./CategoryPicker/templates/CategoryChip.html dojo/i18n!../../nls/arcgisonline ../../tsutils/declareDecorator ../utils/dom ../../esriGeowConfig esri/Evented".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);D=f.__importDefault(D);
return function(){function G(F,A){var y=this;this.templateString=v.default;this.i18n=k.default;this.icons=m.default;this.defaultText="";this.categoriesLimit=20;this.globalClickListener=function(z){z=z.target;z.classList.contains("js-add-category-dropdown-link")||z.classList.contains("js-add-category-dropdown-button")||z.classList.contains("js-add-category-input")||y.closeCategoryDropdown()}}G.prototype.postMixInProperties=function(){var F=this,A,y,z;this.inherited(arguments);this.rootNode=u.default.getRootNode(this.schema);
this.schema=(null===(y=null===(A=this.schema)||void 0===A?void 0:A[0])||void 0===y?void 0:y.categories)||[];this.categories=(null===(z=this.categories)||void 0===z?void 0:z.map(function(B){return F.removeRoot(B)}))||[];this.alwaysOpen=this.alwaysOpen||!1;this.categorySortHash=u.default.getSchemaOrder(this.schema)};G.prototype.startup=function(){var F,A;this.inherited(arguments);if(null===(F=x.default.portal)||void 0===F?0:F.maxCategoriesPerItem)this.categoriesLimit=null===(A=x.default.portal)||void 0===
A?void 0:A.maxCategoriesPerItem;this.domNode.querySelector(".js-add-category-error").textContent=b.default.substitute(k.default.contentCategories.addCategoryError,{number:this.categoriesLimit});this.setCategories(this.categories);this.addEventListeners()};G.prototype.hideError=function(){(0,d.default)(".js-add-category-error",this.domNode).removeClass("is-active")};G.prototype.setCategories=function(F,A){var y=this;F.map(function(z){return A?y.removeRoot(z):z}).filter(function(z){return y.categorySortHash[z]});
this.categories=F.map(function(z){return A?y.removeRoot(z):z}).filter(function(z){return y.categorySortHash[z]});this.rebuildCategoryChips();this.buildCategoryDropdown();this.alwaysOpen&&this.domNode.classList.add("category-picker--always-open")};G.prototype.getCategories=function(F){var A=F?this.rootNode:"";return this.categories.map(function(y){return"".concat(A).concat(y)})};G.prototype.removeCategory=function(F,A){var y=this,z;this.categories.length<=this.categoriesLimit&&w.default.forEachNode(this.domNode.querySelectorAll(".js-add-category-error"),
function(E){return E.classList.remove("is-active")});var B=this.domNode.querySelector(".js-category-chip[data-category-name\x3d'".concat(F,"']")),C=this.domNode.querySelector(".js-category-picker-item[data-category-path\x3d'".concat(F,"']")),H=C&&w.default.querySelectorAllAsArray(".js-category-picker-item.is-active",C);H=null===H||void 0===H?void 0:H.map(function(E){return E.getAttribute("data-category-path")});if(-1<this.categories.indexOf(F)||0<(null===H||void 0===H?void 0:H.length))null===(z=null===
B||void 0===B?void 0:B.parentNode)||void 0===z?void 0:z.removeChild(B),this.categories=this.categories.filter(function(E){return E!==F}),C.classList.remove("is-active"),H.forEach(function(E){y.removeCategory(E)}),A&&h.default.publish("categories/update"),this.emit("change",this.categories),this.rebuildCategoryChips();this.buildCategoryDropdown()};G.prototype.addCategory=function(F,A){if(0>this.categories.indexOf(F))if(this.categories=this.categories.filter(function(C){return 0>F.indexOf("".concat(C,
"/"))}),this.categories.length<this.categoriesLimit){this.categories.push(F);var y=this.domNode.querySelector('.js-category-picker-item[data-category-path\x3d"'.concat(F,'"]')),z=0<(0,d.default)(y.parentElement).closest(".js-category-picker-item").length,B=[y];if(z)for(;y.parentElement.parentElement.classList.contains("js-category-picker-item");)y=y.parentElement.parentElement,B.push(y);B.forEach(function(C){return C.classList.add("is-active")});A&&h.default.publish("categories/update");this.emit("change",
this.categories);this.rebuildCategoryChips()}else w.default.querySelectorAllAsArray(".js-add-category-error",this.domNode).forEach(function(C){return C.classList.add("is-active")})};G.prototype.disable=function(){this.domNode.classList.add("category-picker--disabled")};G.prototype.enable=function(){this.domNode.classList.remove("category-picker--disabled")};G.prototype.buildCategoryDropdown=function(){if(this.domNode){var F=this.domNode.querySelector(".js-add-category-dropdown-menu");F&&(F.innerHTML=
this.categoriesToDom(this.schema,"",!0))}};G.prototype.categoriesToDom=function(F,A,y){var z=this;F=F.reduce(function(B,C){var H=A?"".concat(A,"/").concat(C.title):"/".concat(C.title),E=C.categories?z.categoriesToDom(C.categories,H):"",K=H===z.selectedCategory?"is-selected":"",I=-1<z.categories.indexOf(H)||0<z.categories.filter(function(L){return-1<L.indexOf("".concat(H,"/"))}).length;return B+b.default.substitute(p.default,{title:C.title,children:E,path:H,isActive:I?"is-active":"",isSelected:K,icons:m.default})},
"");return b.default.substitute(l.default,{categories:F,icons:m.default,role:y?"tree":"group"})};G.prototype.addEventListeners=function(){this.inherited(arguments);this.own((0,d.default)(".js-add-category-dropdown-menu",this.domNode).on("click",this.treeLinkClick.bind(this)),(0,d.default)(".js-category-chip-wrap",this.domNode).on("click",this.categoryChipClick.bind(this)),(0,d.default)(".js-add-category-dropdown-button",this.domNode).on("click",this.toggleCategoryDropdown.bind(this)),(0,d.default)(".js-add-category-input",
this.domNode).on("keydown",this.addCategoryKeyDown.bind(this)),(0,d.default)(".js-add-category-input",this.domNode).on("keyup",this.addCategoryKeyUp.bind(this)))};G.prototype.treeLinkClick=function(F){var A,y=F.target;a.default.contains(y,"js-add-category-dropdown-link")&&(F.preventDefault(),F=y.getAttribute("data-category-path"),y.parentNode.classList.contains("is-active")?this.removeCategory(F,!0):this.addCategory(F,!0),null===(A=this.domNode.querySelector(".js-add-category-input"))||void 0===A?
void 0:A.focus())};G.prototype.categoryChipClick=function(F){F.preventDefault();F=F.target;a.default.contains(F,"js-category-chip-remove")&&(F=F.getAttribute("data-category-name"),this.removeCategory(F,!0))};G.prototype.toggleCategoryDropdown=function(){this.domNode.querySelector(".js-add-category-dropdown").classList.contains("is-active")?this.closeCategoryDropdown():this.openCategoryDropdown()};G.prototype.openCategoryDropdown=function(){var F=this.domNode.querySelector(".js-add-category-input"),
A=this.domNode.querySelector(".js-add-category-dropdown");F.value="";A.classList.add("is-active");F.focus();window.addEventListener("click",this.globalClickListener);if((0,c.default)("trident")||(0,c.default)("edge"))F=this.domNode.closest(".dijitContentPane"),this.originalScrollTop&&this.originalScrollTop!==F.scrollTop?F.scrollTop=this.originalScrollTop:(this.originalScrollTop=F.scrollTop,F.scrollTop+=2)};G.prototype.closeCategoryDropdown=function(){this.alwaysOpen||(w.default.querySelectorAllAsArray(".js-add-category-dropdown",
this.domNode).forEach(function(F){return F.classList.remove("is-active")}),this.selectedCategory=null);window.removeEventListener("click",this.globalClickListener);this.buildCategoryDropdown()};G.prototype.addCategoryKeyDown=function(F){9===F.keyCode?this.closeCategoryDropdown():13===F.keyCode&&this.domNode.querySelector(".js-add-category-dropdown").classList.contains("is-active")&&F.preventDefault()};G.prototype.addCategoryKeyUp=function(F){var A,y,z=F.keyCode,B=null===(A=F.target)||void 0===A?void 0:
A.value;A=w.default.querySelectorAllAsArray(".js-add-category-dropdown-link",this.domNode);var C=w.default.querySelectorAllAsArray(".js-category-picker-item",this.domNode);w.default.hideNodes(A);w.default.hideNodes(C);var H=function(E){return-1<E.getAttribute("data-category-path").toLowerCase().indexOf(B.toLowerCase())};C=A.filter(function(E){var K=H(E);E=0<w.default.querySelectorAllAsArray(".js-add-category-dropdown-link",E.parentNode).filter(H).length;return K||E}).map(function(E){var K;E.classList.remove("hide");
null===(K=E.parentNode)||void 0===K?void 0:K.classList.remove("hide");return E});A=this.domNode.querySelector(".js-add-category-dropdown-link.is-selected");switch(z){case 27:this.closeCategoryDropdown();break;case 13:F.preventDefault();A&&(z=A.getAttribute("data-category-path"),(null===(y=A.parentNode)||void 0===y?0:y.classList.contains("is-active"))?this.removeCategory(z,!0):this.addCategory(z,!0),A.classList.add("is-selected"));break;case 40:case 38:F.preventDefault(),F=C.indexOf(A),y=C[F+1]?C[F+
1]:C[0],F=C[F-1]?C[F-1]:C[C.length-1],z=40===z?y:F,A&&A.classList.remove("is-selected"),a.default.add(z,"is-selected"),this.selectedCategory=z.getAttribute("data-category-path"),A=z.getBoundingClientRect(),y=z.closest(".js-add-category-dropdown-menu").getBoundingClientRect(),(A.top<=y.top||A.bottom>=y.bottom)&&z.scrollIntoView()}};G.prototype.rebuildCategoryChips=function(){var F=this,A=this.domNode.querySelector(".js-category-chip-wrap");e.default.empty(A);var y=this.categories.sort(function(z,B){return F.categorySortHash[z]-
F.categorySortHash[B]});y.forEach(function(z){var B=b.default.substitute(k.default.contentCategories.removeCategoryX,{category:z});z=b.default.substitute(n.default,{category:z,removeText:B,icons:m.default},null,g.default);e.default.place(z,A)});this.defaultText&&w.default.showHide(this.defaultTextContainer,0===y.length)};G.prototype.removeRoot=function(F){var A=new RegExp("".concat(this.rootNode,"/"));return F.replace(A,"/")};return G=f.__decorate([(0,r.default)(t.default,q.default,D.default)],G)}()})},
"dijit/_editor/plugins/FontChoice":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom-construct dojo/i18n dojo/_base/lang dojo/string dojo/store/Memory ../../registry ../../_Widget ../../_TemplatedMixin ../../_WidgetsInTemplateMixin ../../form/FilteringSelect ../_Plugin ../range dojo/i18n!../nls/FontChoice".split(" "),function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v){S=f("dijit._editor.plugins._FontDropDown",[q,t,u],{label:"",plainText:!1,templateString:"\x3cspan style\x3d'white-space: nowrap' class\x3d'dijit dijitReset dijitInline'\x3e\x3clabel class\x3d'dijitLeft dijitInline' for\x3d'${selectId}'\x3e${label}\x3c/label\x3e\x3cinput data-dojo-type\x3d'../../form/FilteringSelect' required\x3d'false' data-dojo-props\x3d'labelType:\"html\", labelAttr:\"label\", searchAttr:\"name\"' class\x3d'${comboClass}' tabIndex\x3d'-1' id\x3d'${selectId}' data-dojo-attach-point\x3d'select' value\x3d''/\x3e\x3c/span\x3e",
contextRequire:S,postMixInProperties:function(){this.inherited(arguments);this.strings=h.getLocalization("dijit._editor","FontChoice");this.label=this.strings[this.command];this.id=e.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.selectId=this.id+"_select";this.inherited(arguments)},postCreate:function(){this.select.set("store",new a({idProperty:"value",data:J.map(this.values,function(r){var w=this.strings[r]||r;return{label:this.getLabel(r,w),name:w,value:r}},this)}));this.select.set("value",
"",!1);this.disabled=this.select.get("disabled")},_setValueAttr:function(r,w){w=!1!==w;this.select.set("value",0>J.indexOf(this.values,r)?"":r,w);w||(this.select._lastValueReported=null)},_getValueAttr:function(){return this.select.get("value")},focus:function(){this.select.focus()},_setDisabledAttr:function(r){this._set("disabled",r);this.select.set("disabled",r)}});var p=f("dijit._editor.plugins._FontNameDropDown",S,{generic:!1,command:"fontName",comboClass:"dijitFontNameCombo",postMixInProperties:function(){this.values||
(this.values=this.generic?["serif","sans-serif","monospace","cursive","fantasy"]:["Arial","Times New Roman","Comic Sans MS","Courier New"]);this.inherited(arguments)},getLabel:function(r,w){return this.plainText?w:"\x3cdiv style\x3d'font-family: "+r+"'\x3e"+w+"\x3c/div\x3e"},_normalizeFontName:function(r){var w=this.values;if(!r||!w)return r;var x=r.split(",");if(1<x.length)for(var D=0,G=x.length;D<G;D++){var F=b.trim(x[D]);if(-1<J.indexOf(w,F))return F}return r},_setValueAttr:function(r,w){w=!1!==
w;r=this._normalizeFontName(r);this.generic&&(r={Arial:"sans-serif",Helvetica:"sans-serif",Myriad:"sans-serif",Times:"serif","Times New Roman":"serif","Comic Sans MS":"cursive","Apple Chancery":"cursive",Courier:"monospace","Courier New":"monospace",Papyrus:"fantasy","Estrangelo Edessa":"cursive",Gabriola:"fantasy"}[r]||r);this.inherited(arguments,[r,w])}}),l=f("dijit._editor.plugins._FontSizeDropDown",S,{command:"fontSize",comboClass:"dijitFontSizeCombo",values:[1,2,3,4,5,6,7],getLabel:function(r,
w){return this.plainText?w:"\x3cfont size\x3d"+r+"'\x3e"+w+"\x3c/font\x3e"},_setValueAttr:function(r,w){w=!1!==w;r.indexOf&&-1!=r.indexOf("px")&&(r={10:1,13:2,16:3,18:4,24:5,32:6,48:7}[parseInt(r,10)]||r);this.inherited(arguments,[r,w])}}),n=f("dijit._editor.plugins._FormatBlockDropDown",S,{command:"formatBlock",comboClass:"dijitFormatBlockCombo",values:"noFormat p h1 h2 h3 pre".split(" "),postCreate:function(){this.inherited(arguments);this.set("value","noFormat",!1)},getLabel:function(r,w){return this.plainText||
"noFormat"==r?w:"\x3c"+r+"\x3e"+w+"\x3c/"+r+"\x3e"},_execCommand:function(r,w,x){if("noFormat"===x){var D;if((w=v.getSelection(r.window))&&0<w.rangeCount&&(x=w.getRangeAt(0),x)){w=x.startContainer;for(D=x.endContainer;w&&w!==r.editNode&&w!==r.document.body&&1!==w.nodeType;)w=w.parentNode;for(;D&&D!==r.editNode&&D!==r.document.body&&1!==D.nodeType;)D=D.parentNode;var G=d.hitch(this,function(z,B){if(z.childNodes&&z.childNodes.length){var C;for(C=0;C<z.childNodes.length;C++){var H=z.childNodes[C];if(1==
H.nodeType&&r.selection.inSelection(H)){var E=H.tagName?H.tagName.toLowerCase():"";-1!==J.indexOf(this.values,E)&&B.push(H);G(H,B)}}}});x=d.hitch(this,function(z){if(z&&z.length){for(r.beginEditing();z.length;)this._removeFormat(r,z.pop());r.endEditing()}});var F=[];if(w==D){for(D=w;D&&D!==r.editNode&&D!==r.document.body;){if(1==D.nodeType){var A=D.tagName?D.tagName.toLowerCase():"";if(-1!==J.indexOf(this.values,A)){var y=D;break}}D=D.parentNode}G(w,F);y&&(F=[y].concat(F))}else for(D=w;r.selection.inSelection(D);)1==
D.nodeType&&(A=D.tagName?D.tagName.toLowerCase():"",-1!==J.indexOf(this.values,A)&&F.push(D),G(D,F)),D=D.nextSibling;x(F);r.onDisplayChanged()}}else r.execCommand(w,x)},_removeFormat:function(r,w){if(r.customUndo){for(;w.firstChild;)c.place(w.firstChild,w,"before");w.parentNode.removeChild(w)}else{r.selection.selectElementChildren(w);var x=r.selection.getSelectedHtml();r.selection.selectElement(w);r.execCommand("inserthtml",x||"")}}}),k=f("dijit._editor.plugins.FontChoice",m,{useDefaultCommand:!1,
_initButton:function(){var r={fontName:p,fontSize:l,formatBlock:n}[this.command],w=this.params;this.params.custom&&(w.values=this.params.custom);var x=this.editor;this.button=new r(d.delegate({dir:x.dir,lang:x.lang},w));this.own(this.button.select.on("change",d.hitch(this,function(D){this.editor.focused&&this.editor.focus();"fontName"==this.command&&-1!=D.indexOf(" ")&&(D="'"+D+"'");this.button._execCommand?this.button._execCommand(this.editor,this.command,D):this.editor.execCommand(this.command,
D)})))},updateState:function(){var r=this.editor,w=this.command;if(r&&r.isLoaded&&w.length&&this.button){var x=this.get("disabled");this.button.set("disabled",x);if(!x){try{var D=r.queryCommandValue(w)||""}catch(F){D=""}(x=d.isString(D)&&(D.match(/'([^']*)'/)||D.match(/"([^"]*)"/)))&&(D=x[1]);"fontSize"!==w||D||(D=3);if("formatBlock"===w)if(D&&"p"!=D)0>J.indexOf(this.button.values,D)&&(D="noFormat");else{D=null;if((w=v.getSelection(this.editor.window))&&0<w.rangeCount&&(w=w.getRangeAt(0)))var G=w.endContainer;
for(;G&&G!==r.editNode&&G!==r.document;){if((w=G.tagName?G.tagName.toLowerCase():"")&&-1<J.indexOf(this.button.values,w)){D=w;break}G=G.parentNode}D||(D="noFormat")}D!==this.button.get("value")&&this.button.set("value",D,!1)}}}});J.forEach(["fontName","fontSize","formatBlock"],function(r){m.registry[r]=function(w){return new k({command:r,plainText:w.plainText})}});k._FontDropDown=S;k._FontNameDropDown=p;k._FontSizeDropDown=l;k._FormatBlockDropDown=n;return k})},"dijit/_editor/plugins/TextColor":function(){define("require dojo/colors dojo/_base/declare dojo/_base/lang ../_Plugin ../../form/DropDownButton".split(" "),
function(S,J,f,c,h,d){var b=f("dijit._editor.plugins.TextColor",h,{buttonClass:d,colorPicker:"dijit/ColorPalette",useDefaultCommand:!1,_initButton:function(){this.command=this.name;this.inherited(arguments);var a=this;this.button.loadDropDown=function(e){function q(t){a.button.dropDown=new t({dir:a.editor.dir,ownerDocument:a.editor.ownerDocument,value:a.value,onChange:function(u){a.editor.execCommand(a.command,u)},onExecute:function(){a.editor.execCommand(a.command,this.get("value"))}});e()}"string"==
typeof a.colorPicker?S([a.colorPicker],q):q(a.colorPicker)}},updateState:function(){var a=this.editor,e=this.command;if(a&&a.isLoaded&&e.length){if(this.button){var q=this.get("disabled");this.button.set("disabled",q);if(q)return;try{var t=a.queryCommandValue(e)||""}catch(u){t=""}}""==t&&(t="#000000");"transparent"==t&&(t="#ffffff");"string"==typeof t?-1<t.indexOf("rgb")&&(t=J.fromRgb(t).toHex()):(t=((t&255)<<16|t&65280|(t&16711680)>>>16).toString(16),t="#000000".slice(0,7-t.length)+t);this.value=
t;(a=this.button.dropDown)&&a.get&&t!==a.get("value")&&a.set("value",t,!1)}}});h.registry.foreColor=function(a){return new b(a)};h.registry.hiliteColor=function(a){return new b(a)};return b})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(S,J,f,c){var h={};J.setObject("dojo.colors",h);var d=function(a,e,q){0>q&&++q;1<q&&--q;var t=6*q;return 1>t?a+(e-a)*t:1>2*q?e:2>3*q?a+(e-a)*(2/3-q)*6:a};S.colorFromRgb=f.fromRgb=function(a,e){var q=a.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);
if(q){a=q[2].split(/\s*,\s*/);var t=a.length;q=q[1];if("rgb"==q&&3==t||"rgba"==q&&4==t)return q=a[0],"%"==q.charAt(q.length-1)?(q=c.map(a,function(m){return 2.56*parseFloat(m)}),4==t&&(q[3]=a[3]),f.fromArray(q,e)):f.fromArray(a,e);if("hsl"==q&&3==t||"hsla"==q&&4==t){q=(parseFloat(a[0])%360+360)%360/360;var u=parseFloat(a[1])/100,g=parseFloat(a[2])/100;u=.5>=g?g*(u+1):g+u-g*u;g=2*g-u;q=[256*d(g,u,q+1/3),256*d(g,u,q),256*d(g,u,q-1/3),1];4==t&&(q[3]=a[3]);return f.fromArray(q,e)}}return null};var b=
function(a,e,q){a=Number(a);return isNaN(a)?q:a<e?e:a>q?q:a};f.prototype.sanitize=function(){this.r=Math.round(b(this.r,0,255));this.g=Math.round(b(this.g,0,255));this.b=Math.round(b(this.b,0,255));this.a=b(this.a,0,1);return this};h.makeGrey=f.makeGrey=function(a,e){return f.fromArray([a,a,a,e])};J.mixin(f.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,
226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,
150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],
hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,
136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],
navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,
87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return f})},"arcgisonline/pages/dijit/InlineEdit/ViewSource":function(){define("require exports tslib ../../../tsutils/declareDecorator dijit/_editor/_Plugin dijit/_editor/plugins/ViewSource esri/libs/sanitizer/Sanitizer".split(" "),
function(S,J,f,c,h,d,b){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);var a=function(){function e(q){this.declaredClass="arcgisonline.pages.dijit.InlineEdit.ViewSource";this.sanitizer=new b.default}e.prototype._filter=function(q){q&&(q=this.sanitizer.sanitize(q),this.stripScripts&&(q=this._stripScripts(q)),this.stripComments&&(q=this._stripComments(q)),this.stripIFrames&&(q=this._stripIFrames(q)),this.stripEventHandlers&&(q=this._stripEventHandlers(q)));
return q};return e=f.__decorate([(0,c.default)(d.default)],e)}();h.default.registry.viewSourceSanitize=h.default.registry.viewsourcesanitize=function(e){return new a({readOnly:"readOnly"in e?e.readOnly:!1,stripComments:"stripComments"in e?e.stripComments:!0,stripScripts:"stripScripts"in e?e.stripScripts:!0,stripIFrames:"stripIFrames"in e?e.stripIFrames:!0,stripEventHandlers:"stripEventHandlers"in e?e.stripEventHandlers:!0})};return a})},"arcgisonline/pages/utils/whatsNew":function(){define(["require",
"exports","tslib","./storage"],function(S,J,f,c){c=f.__importDefault(c);return function(){function h(){}h.getCookie=function(){return c.default.getCookie(h.COOKIE,!0)||{}};h.setCookie=function(d){var b=new Date((new Date).getTime()+31556926E3),a=-1<window.location.hostname.indexOf("esri.com")?".esri.com":".arcgis.com";c.default.setCookie(h.COOKIE,d,{expires:b,path:"/",domain:a,sameSite:"Strict"},!0)};h.shouldShow=function(d,b){var a=new Date,e=h.getCookie();if(a<b){if(!e[d])return!0}else h.reset(d);
return!1};h.set=function(d){var b=h.getCookie();b[d]=!0;h.setCookie(b)};h.reset=function(d){var b=h.getCookie();b[d]&&(delete b[d],h.setCookie(b))};h.COOKIE="esri_whatsnew";return h}()})},"arcgisonline/pages/organization/widgets/_status":function(){define("require exports tslib ../../../esriGeowConfig ../../../sharing/util ../../../tsutils/declareDecorator dijit/_WidgetBase dijit/_TemplatedMixin dojo/Deferred dojo/dom dojo/dom-style dojo/dom-attr dojo/_base/kernel dojo/on dojo/topic dojo/text!./templates/_status.html dojo/i18n!../../../nls/arcgisonline ./Reports/Reports ../../utils/dom ../../utils/organization ../../pageUtil esri/Evented".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);return function(){function D(){this.i18n=
l.default;this.templateString=p.default;this.widgetsInTemplate=!0;this.isCustomReportAdmin=this.isAdmin=this.showingNew=!1;this.newCookieKey="admin-reports"}D.prototype.postCreate=function(){var G=this;this.inherited(arguments);this.own(v.default.subscribe("create-report",function(){G.showReports()}))};D.prototype.startup=function(){this.inherited(arguments);var G=this.portalUser.userRole||{};this.isAdmin=G.isAdmin();this.isCustomReportAdmin=G.isCustom()&&G.canCreateReports()&&G.canViewOrgGroups()&&
G.canViewOrgItems()&&G.canViewUsers();return this._initUI()};D.prototype.destroy=function(){this.inherited(arguments)};D.prototype._initUI=function(){var G=new e.default;this.isAdmin||this.isCustomReportAdmin?this.initReports():k.default.hideNode(this.domNode.querySelector(".js-tabs-container"));this._addEventListeners();"reports"===w.default.getQueryParams().section&&(this.isAdmin||this.isCustomReportAdmin)?this.showReports():this.showDashboard();G.resolve();return G};D.prototype.initReports=function(){this.reportsSection=
new n.default({portal:this.portal,portalUser:this.portalUser,telemetry:this.telemetry,page:this.page},this.domNode.querySelector(".js-reports-section"));!this.portal.isPortal&&r.default.shouldShowOnboard(this.newCookieKey,new Date("July 30, 2020"))&&(k.default.showNode(this.newBadge),this.showingNew=!0)};D.prototype._initDashboard=function(){var G=c.default.isDebug?"../status/usage.html":h.default.isPortal()?"".concat(h.default.getSecureUrl("".concat(location.protocol,"//").concat(c.default.self.portalHostname)),
"/apps/activitydashboard/usage.html"):"".concat(c.default.baseUrl,"status/usage.html");this._iframeSrc="".concat(G,"?embedded\x3d1\x26locale\x3d").concat(g.default.locale);u.default.set(this.dashboard,"src",this._iframeSrc)};D.prototype._resizeIframe=function(G){try{var F="".concat(parseInt(G.data,10)+300,"px"),A=q.default.byId("statusIframe");t.default.set(A,"height",F)}catch(y){}};D.prototype._addEventListeners=function(){var G=this;this.own((0,m.default)(window,"message",this._resizeIframe,!1),
(0,m.default)(this.dashboardTab,"click",function(){G.showDashboard();G.recordStatusTabTelemetry("dashboard")}),(0,m.default)(this.reportsTab,"click",function(){G.showReports();G.recordStatusTabTelemetry("reports")}))};D.prototype.recordStatusTabTelemetry=function(G){var F;null===(F=this.telemetry)||void 0===F?void 0:F.logEvent({category:"status section tab",action:G})};D.prototype.showDashboard=function(){var G;w.default.updateQueryParams({section:"dashboard"});this.reportsTab.classList.remove("tab-selected");
this.dashboardTab.classList.add("tab-selected");this.domNode.querySelector("#main-content-area").classList.add("dashboard--active");k.default.showNode(this.dashboard);null===(G=this.reportsSection)||void 0===G?void 0:G.hide();this._iframeSrc||this._initDashboard()};D.prototype.showReports=function(){w.default.updateQueryParams({section:"reports"});this.reportsTab.classList.add("tab-selected");this.dashboardTab.classList.remove("tab-selected");this.domNode.querySelector("#main-content-area").classList.remove("dashboard--active");
k.default.hideNode(this.dashboard);this.reportsSection.show();this.showingNew&&(r.default.createOnboardCookie(this.newCookieKey),k.default.hideNode(this.newBadge))};return D=f.__decorate([(0,d.default)(b.default,a.default,x.default)],D)}()})},"arcgisonline/pages/organization/widgets/Reports/Reports":function(){define("require exports tslib preact calcite-web/js/calcite-web dojo/Deferred dojo/string dojo/topic dojo/promise/all dojo/on dojo/query dojo/text!./templates/Reports.html dojo/i18n!../../../../nls/arcgisonline dijit/_TemplatedMixin dijit/_WidgetBase ./ReportRow ./ReportCard ./RenameReport ./ProcessingReports arcgisonline/pages/organization/_OrganizationActions arcgisonline/pages/dijit/FilterSingleWithSearch arcgisonline/pages/dijit/FilterStatus arcgisonline/pages/utils/arrays arcgisonline/pages/utils/dom arcgisonline/pages/utils/icons arcgisonline/pages/pageUtil arcgisonline/pages/dijit/SearchInput arcgisonline/pages/dijit/ControlBar arcgisonline/pages/dijit/Pagination arcgisonline/pages/portal/PortalUser arcgisonline/pages/dijit/CreateReport arcgisonline/pages/dijit/ScheduleReport arcgisonline/pages/components/ScheduledReports/ScheduledReports arcgisonline/sharing/util arcgisonline/esriGeowConfig arcgisonline/tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E,K,I,L,M){h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);D=f.__importDefault(D);
G=f.__importDefault(G);F=f.__importDefault(F);A=f.__importDefault(A);y=f.__importDefault(y);z=f.__importDefault(z);B=f.__importDefault(B);C=f.__importDefault(C);H=f.__importDefault(H);E=f.__importDefault(E);K=f.__importDefault(K);I=f.__importDefault(I);L=f.__importDefault(L);M=f.__importDefault(M);return function(){function N(P,R){this.templateString=u.default;this.i18n=f.__assign(f.__assign({},g.default.myOrganization.statusTab),g.default.myOrganization.membersTab);this.icons=F.default;this.initialStart=
1;this.initialNum=20;this.allowedSortOptions=["title","created","owner"];this.rows=[];this.cards=[];this.sortField="created";this.sortOrder="desc";this.searchTerm="";this.pageInfo={start:1,num:20,total:0,nextStart:-1};this.filters={};this.refreshing=!1;this.processingReports=[];this.owners=[];this.scheduledReportsActive=!1;this.scheduledReportTasks=[];this.topicPrefix="org-reports-";this.maxRefresh=10;this.refreshDelay=500;this.handleScheduledReportsClose=this.handleScheduledReportsClose.bind(this)}
N.prototype.postCreate=function(){this.inherited(arguments);this.applyQueryParameters();this.render();this.initUI();this.addEventListeners()};N.prototype.destroy=function(){clearInterval(this.processingIntervals);this.inherited(arguments)};N.prototype.show=function(){G.default.showNode(this.domNode)};N.prototype.hide=function(){G.default.hideNode(this.domNode)};N.prototype.getPendingReports=function(P){return I.default.request({url:"".concat(L.default.restBaseUrl,"portals/self/itemsStatus"),content:{status:P,
sortField:"created",sortOrder:"desc",type:"Administrative Report"}})};N.prototype.getProcessingReports=function(){var P=this,R=new d.default;(0,e.default)({processing:this.getPendingReports("processing"),failed:this.getPendingReports("failed")}).then(function(Y){var ja,aa,da=(null===(ja=Y.processing)||void 0===ja?void 0:ja.results)||[];Y=(null===(aa=Y.failed)||void 0===aa?void 0:aa.results)||[];aa=f.__spreadArray(f.__spreadArray([],da,!0),Y,!0);if(null===aa||void 0===aa||!aa.length)return R.resolve([]),
R;var ra=aa.map(function(ca){var fa=ca.properties;return{title:fa.title||"",created:ca.created,owner:ca.owner,status:ca.status,reportProps:fa}}).filter(function(ca){return!!ca.title});aa=ra.reduce(function(ca,fa){-1===ca.indexOf(fa.owner)&&ca.push(fa.owner);return ca},[]);P.getOwners(aa).then(function(){ra.forEach(function(ca){ca.ownerUser=P.owners.filter(function(fa){return fa.username===ca.owner})[0]});R.resolve(ra)})},function(){R.resolve([])});return R};N.prototype.startPollingForProcessingReports=
function(){var P=this;this.processingIntervals&&(clearInterval(this.processingIntervals),this.processingIntervals=void 0);this.retrieveAndRenderProcessingReports();this.processingIntervals=window.setInterval(function(){P.retrieveAndRenderProcessingReports()},3E4)};N.prototype.retrieveAndRenderProcessingReports=function(){var P=this;return this.getProcessingReports().then(function(R){var Y;P.processingReports=R;P.processingBtn.textContent=b.default.substitute(P.i18n.processingReports,{num:null!==(Y=
null===R||void 0===R?void 0:R.length)&&void 0!==Y?Y:0});G.default.showHide(P.processingBtn,0<(null===R||void 0===R?void 0:R.length));a.default.publish("process-reports/update",R)})};N.prototype.getScheduledReportsAndRender=function(){return f.__awaiter(this,void 0,void 0,function(){var P,R,Y,ja;return f.__generator(this,function(aa){switch(aa.label){case 0:return[4,this.getScheduledReports()];case 1:P=aa.sent();if(!(0<(null===P||void 0===P?void 0:P.total)))return[3,3];R=P.tasks;Y=R.reduce(function(da,
ra){-1===da.indexOf(ra.userId)&&da.push(ra.userId);return da},[]);return[4,this.getOwners(Y)];case 2:return ja=aa.sent(),R.forEach(function(da){da.owner=da.userId;var ra=null===ja||void 0===ja?void 0:ja.filter(function(ca){return ca.username===da.userId})[0];ra&&(da.portalUser=ra)}),this.scheduledReportTasks=R,this.scheduledReportsContainer||(this.scheduledReportsContainer=document.createElement("div"),document.body.appendChild(this.scheduledReportsContainer)),G.default.showNode(this.scheduledReportsBtn),
this.renderScheduledReports(),h.default.dropdown(),[2];case 3:this.scheduledReportTasks=[],this.scheduledReportsContainer&&this.renderScheduledReports(),aa.label=4;case 4:return G.default.hideNode(this.scheduledReportsBtn),[2]}})})};N.prototype.renderScheduledReports=function(){var P=f.__assign(f.__assign(f.__assign(f.__assign({},g.default.common),g.default.jobStatusDlg),g.default.myOrganization.membersTab),g.default.myOrganization.statusTab.scheduledReportsDialog);P.scheduleLabels.yearly=g.default.createReport.schedule.yearly;
0===this.scheduledReportTasks.length&&(this.scheduledReportsActive=!1);(0,c.render)(this.scheduledReportsActive?(0,c.h)(K.default,{tasks:this.scheduledReportTasks,texts:P,onClose:this.handleScheduledReportsClose,portal:this.portal,portalUser:this.portalUser}):null,this.scheduledReportsContainer)};N.prototype.handleScheduledReportsClose=function(){this.scheduledReportsActive=!1;this.renderScheduledReports()};N.prototype.getScheduledReports=function(){return I.default.request({url:"".concat(L.default.restBaseUrl,
"portals/self/allScheduledTasks"),content:{types:"ExecuteReport",num:100}})};N.prototype.getReports=function(){var P=this,R="".concat(this.searchTerm," orgid:").concat(this.portal.id),Y=this.filters.type;Y='typekeywords: "ReportKey ACCOUNT'.concat(Y?" ".concat(Y):"",'"');R+=" ".concat(Y);Object.keys(this.filters).forEach(function(ja){"type"!==ja&&(R+=" ".concat(P.filters[ja]))});return I.default.request({url:"".concat(L.default.restBaseUrl,"search"),content:{start:this.pageInfo.start,num:this.pageInfo.num,
sortField:this.sortField,sortOrder:this.sortOrder,q:R}})};N.prototype.render=function(){this.startPollingForProcessingReports();this.getScheduledReportsAndRender();this.initFilters();this.initSearchInput();this.initPagination();this.initControlBar();this.initDocumentation();this.applyFilters();this.refreshView()};N.prototype.refreshView=function(){var P=this;if(!this.refreshing)return this.refreshing=!0,this.getReports().then(function(R){return P.renderRefresh(R)})};N.prototype.renderRefresh=function(P){G.default.deactivateNode(this.loader);
G.default.showNode(this.reportsContent);this.pagination.render(P);this.renderPageRange(P.total);this.renderRows(null===P||void 0===P?void 0:P.results);this.refreshing=!1};N.prototype.addEventListeners=function(){var P=this;this.own(a.default.subscribe("report/created",this.handleReportCreated.bind(this)),a.default.subscribe("".concat(this.topicPrefix,"search/wait"),this.handleSearchWait.bind(this)),a.default.subscribe("".concat(this.topicPrefix,"search/update"),this.handleSearchUpdate.bind(this)),
a.default.subscribe("".concat(this.topicPrefix,"pagination/page"),this.handlePageChange.bind(this)),a.default.subscribe("".concat(this.topicPrefix,"filter/update"),this.handleFilterUpdate.bind(this)),a.default.subscribe("".concat(this.topicPrefix,"filter/remove"),this.handleFilterRemove.bind(this)),a.default.subscribe("".concat(this.topicPrefix,"filter/clear"),this.handleFilterClear.bind(this)),a.default.subscribe("".concat(this.topicPrefix,"sort/update"),this.handleSortUpdate.bind(this)),a.default.subscribe("report/download",
this.handleDownload.bind(this)),a.default.subscribe("report/details",this.handleViewDetails.bind(this)),a.default.subscribe("report/rename",this.handleRename.bind(this)),a.default.subscribe("report/delete",this.handleDelete.bind(this)),a.default.subscribe("scheduled-reports/update",function(){P.getScheduledReportsAndRender()}),(0,t.default)(".js-table-sort-header",this.tableHeader).on("click",this.handleSortColumn.bind(this)),(0,q.default)(this.processingBtn,"click",function(){return P.handleProcessingClick()}),
(0,q.default)(this.scheduledReportsBtn,"click",function(){P.scheduledReportsActive=!0;P.getScheduledReportsAndRender()}),a.default.subscribe("create-report",function(R){P.openCreateReport(R)}),a.default.subscribe("schedule-report",function(R){P.openScheduleReport(R)}))};N.prototype.openCreateReport=function(P){(new H.default({portal:this.portal,user:this.portalUser,telemetry:this.telemetry,opener:this.domNode.querySelector(".js-action-createReport"),defaultType:P.reportSubType,defaultProps:P})).open()};
N.prototype.openScheduleReport=function(P){(new E.default({portal:this.portal,user:this.portalUser,telemetry:this.telemetry,opener:this.domNode.querySelector(".js-action-createReport"),defaultType:P.reportSubType,defaultProps:P,editScheduleOnly:P.editScheduleOnly})).open()};N.prototype.handleProcessingClick=function(){(new k.default({reports:this.processingReports,portal:this.portal})).open()};N.prototype.renderPageRange=function(P){var R=this.pagination.getCurrentPageObj();this.pageRange.textContent=
A.default.getPageRangeString({start:0===P?0:R.start,end:R.end,total:R.total})};N.prototype.handleReportCreated=function(P){var R=this;this.startPollingForProcessingReports();this.getItemStatus(P).then(function(Y){"processing"===Y.status?setTimeout(function(){R.handleReportCreated(P)},1E4):R.refreshView()})};N.prototype.getItemStatus=function(P){return I.default.request({url:"".concat(L.default.restBaseUrl,"content/users/").concat(this.portalUser.username,"/items/").concat(P,"/status")})};N.prototype.handleSortUpdate=
function(P){var R=P.ascending;this.sortField=P.property;this.sortOrder=R?"asc":"desc";this.renderSortedColumn();A.default.updateQueryParams({sortOrder:this.sortOrder,sortField:this.sortField});this.refreshView()};N.prototype.renderSortedColumn=function(){(0,t.default)(".js-table-sort-header",this.tableHeader).removeClass("is-ascending").removeClass("is-descending");var P=this.tableHeader.querySelector('.js-table-sort-header[data-sort\x3d"'.concat(this.sortField,'"]'));P.classList.add("desc"===this.sortOrder?
"is-descending":"is-ascending");P.setAttribute("aria-sort","desc"===this.sortOrder?"descending":"ascending")};N.prototype.handleFilterClear=function(){this.pageInfo.start=1;A.default.removeQueryParams(Object.keys(this.filters));this.filters={};this.refreshView()};N.prototype.handleFilterRemove=function(P){delete this.filters[P.param];A.default.removeQueryParams([P.param]);this.paginationReset();this.refreshView()};N.prototype.handleFilterUpdate=function(P){var R,Y=this,ja,aa=P.param,da=P.selected;
this.filters[aa]=da[0].q;var ra=(R={},R[aa]=da[0].value,R);"created"===aa&&"custom"===da[0].value&&(aa=da[0],R=aa.from,aa=aa.to,R&&(ra.created_from=R.toDate().getTime()),aa&&(ra.created_to=aa.toDate().getTime()));A.default.updateQueryParams(ra);this.paginationReset();ra=Object.keys(this.filters).filter(function(ca){return!!Y.filters[ca]});null===(ja=this.telemetry)||void 0===ja?void 0:ja.logEvent({category:"Filter",action:P.param,label:P.selected[0].label,count:ra.length,attribute:ra.sort().join(",")});
this.refreshView()};N.prototype.paginationReset=function(){this.pageInfo.start=1;this.pagination.set("start",this.pageInfo.start)};N.prototype.handlePageChange=function(P){this.pageInfo=P;A.default.updateQueryParams({start:this.pageInfo.start,num:this.pageInfo.num});this.refreshView()};N.prototype.handleSortColumn=function(P){P=P.target;var R=P.dataset.sort;this.sortField===R?P.dataset.sortOrder=this.sortOrder="asc"===P.dataset.sortOrder?"desc":"asc":this.sortOrder=P.dataset.sortOrder;this.sortField=
R;a.default.publish("".concat(this.topicPrefix,"sort/update"),{property:this.sortField,ascending:"asc"===this.sortOrder})};N.prototype.handleSearchWait=function(P){A.default.updateQueryParams({searchTerm:P});this.searchInput.getValue()!==P&&this.searchInput.setValue(P,!0);this.controlBar.getSearchValue()!==P&&this.controlBar.setSearchValue(P)};N.prototype.handleSearchUpdate=function(P){this.searchTerm=P;this.refreshView()};N.prototype.initFilters=function(){var P;new x.default({topic:this.topicPrefix},
this.domNode.querySelector(".js-filter-status"));var R={member:{value:"member",q:"USERS",label:this.i18n.member,active:"member"===this.initialReportType},item:{value:"item",q:"CONTENT",label:this.i18n.item,active:"item"===this.initialReportType}};this.portal.isPortal||(R=f.__assign(f.__assign(f.__assign({activity:{value:"activity",q:"ACTIVITY",label:this.i18n.activity,active:"activity"===this.initialReportType}},"Developer Subscription"!==(null===(P=this.portal.subscriptionInfo)||void 0===P?void 0:
P.type)&&{credit:{value:"credit",q:"CREDITS",label:this.i18n.credit,active:"credit"===this.initialReportType}}),R),{view:{value:"view",q:"ITEM_USAGES",label:this.i18n.view,active:"view"===this.initialReportType},serviceUsages:{value:"serviceUsages",q:"SERVICE_USAGES",label:this.i18n.serviceUsage,active:"serviceUsages"===this.initialReportType}}));this.reportFilter=new w.default({title:this.i18n.reportType,searchText:this.i18n.reportType,topic:this.topicPrefix,filterParameter:{param:"type",chipText:"".concat(this.i18n.reportType,
": "),clearText:this.i18n.reportTypeClear,options:R},active:!0},this.domNode.querySelector(".js-type-filter"));this.dateCreatedFilter=new w.default({title:this.i18n.dateCreated,type:"date",cssClasses:"members-filter__last-login",active:!1,topic:this.topicPrefix,filterParameter:{param:"created",chipText:"".concat(this.i18n.dateCreated,": "),clearText:this.i18n.dateCreatedClear,minDate:this.portal.created}},this.domNode.querySelector(".js-created-filter"))};N.prototype.initPagination=function(){this.pagination=
new B.default({start:this.pageInfo.start,num:this.pageInfo.num,pageSizeLabel:this.i18n.reportsPerPage,topic:this.topicPrefix,telemetry:this.telemetry},this.domNode.querySelector(".js-pagination"))};N.prototype.initSearchInput=function(){this.searchInput=new y.default({placeholder:this.i18n.searchPlaceholder,topic:this.topicPrefix,baseClass:"reports__search-input",searchTerm:this.searchTerm},this.domNode.querySelector(".js-search-input"))};N.prototype.initControlBar=function(){var P=this,R=[{property:"title",
label:this.i18n.title,ascending:!0,active:!0},{property:"created",label:this.i18n.created,ascending:!0,active:!1},{property:"owner",label:this.i18n.owner,ascending:!0,active:!1}];R.forEach(function(Y){Y.active=Y.property===P.sortField;Y.active&&(Y.ascending="asc"===P.sortOrder)});R={search:{placeholder:this.i18n.searchPlaceholder,searchTerm:this.searchTerm},sort:R,filterContainer:this.domNode.querySelector(".js-filters-panel"),viewContainer:this.domNode.querySelector(".js-view-wrap"),topic:this.topicPrefix,
baseClass:"reports__control-bar",actions:'\x3cbutton data-action\x3d"createReport" class\x3d"btn-link js-action-createReport margin-right-half"\x3e'.concat(F.default.plus["32"],"\x3c/button\x3e"),telemetry:this.telemetry};this.controlBar=new z.default(R,this.domNode.querySelector(".js-control-bar"));this.controlBar.domNode.style.height="auto"};N.prototype.initDocumentation=function(){this.domNode.querySelector(".reports__documentation").innerHTML=this.i18n.reportsDocumentation.replace("${documentationLink}",
'\x3ccalcite-link target\x3d"_blank" href\x3d"'.concat(this.portal.getHelpUrl("120003630"),'"\x3e').concat(this.i18n.reportsDocumentationLink,"\x3c/calcite-link\x3e"))};N.prototype.renderRows=function(P){var R=this,Y,ja;null===(Y=this.rows)||void 0===Y?void 0:Y.forEach(function(aa){aa.destroy()});this.rows=[];null===(ja=this.cards)||void 0===ja?void 0:ja.forEach(function(aa){aa.destroy()});P=P||[];0===P.length?(G.default.hideNode(this.table),G.default.showNode(this.noResults),Y=Object.keys(this.filters).some(function(aa){return!!R.filters[aa]}),
this.searchTerm||Y?(G.default.showNode(this.noResultsEl),G.default.hideNode(this.noReportsEl)):(G.default.hideNode(this.noResultsEl),G.default.showNode(this.noReportsEl))):(G.default.showNode(this.table),G.default.hideNode(this.noResults),this.rows=[],this.cards=[],Y=P.reduce(function(aa,da){-1===aa.indexOf(da.owner)&&aa.push(da.owner);return aa},[]),this.getOwners(Y).then(function(){P.forEach(function(aa){var da,ra;aa.title=aa.title;var ca=null===(da=R.owners)||void 0===da?void 0:da.filter(function(fa){return fa.username===
aa.owner})[0];da=new p.default({report:aa,owner:ca,portal:R.portal,canManage:(null===(ra=R.portalUser.userRole)||void 0===ra?void 0:ra.isAdmin())||R.portalUser.username===ca.username});R.table.appendChild(da.domNode);R.rows.push(da);R.own(da.on("download",function(fa){return R.handleDownload(fa)}),da.on("details",function(fa){return R.handleViewDetails(fa)}),da.on("rename",function(fa){return R.handleRename(fa)}),da.on("delete",function(fa){return R.handleDelete(fa)}));ra=new l.default({report:aa,
owner:ca,portal:R.portal});R.cards.push(ra);R.cardsContainer.appendChild(ra.domNode)});h.default.dropdown()}))};N.prototype.handleRename=function(P){var R=this,Y=P.report;P=new n.default({report:Y,portal:this.portal,portalUser:this.portalUser});P.open();this.own(P.on("saved",function(ja){Y.title=ja;R.rows.some(function(aa){var da=aa.report.id===Y.id;da&&aa.updateTitle(ja);return da});R.cards.some(function(aa){var da=aa.report.id===Y.id;da&&aa.updateTitle(ja);return da})}),P.on("closed",function(){R.focusReportAction(Y)}))};
N.prototype.handleDelete=function(P){var R=this,Y=P.report;this._confirmDelete().then(function(){return R._handleDeleteUtil(Y)}).then(function(){R.refreshViewAfterDelete(Y.id);a.default.publish("alert/show",{type:"success",text:g.default.itemProperties.itemDeleteSuccess})},function(){a.default.publish("alert/show",{type:"error",text:g.default.common.errors.deleteProtectedItem})})};N.prototype.refreshViewAfterDelete=function(P,R){var Y=this;void 0===R&&(R=0);if(!this.refreshing)return this.refreshing=
!0,this.getReports().then(function(ja){ja.results.some(function(aa){return aa.id===P})&&R<Y.maxRefresh?(Y.refreshing=!1,setTimeout(Y.refreshViewAfterDelete(P,R+1),Y.refreshDelay)):Y.renderRefresh(ja)})};N.prototype._confirmDelete=function(){var P=new d.default;A.default.createConfirmationDialog({strings:{title:g.default.deleteWarningDlg.deleteWarningDlgTitle,description:g.default.deleteWarningDlg.confirmDeleteSingleItem,ok:g.default.deleteWarningDlg.deleteWarningDlgTitle},okColor:"red",autoCloseOnOk:!0,
onOk:function(){P.resolve(!0)}});return P};N.prototype._handleDeleteUtil=function(P){var R=new d.default,Y=this.portalUser;if(null===Y)return R.reject(),R;Y=Y.username||Y.email;Y="".concat(L.default.restBaseUrl,"content/users/").concat(P.owner||Y);var ja=P.ownerFolder;ja&&"/"!==ja&&(Y="".concat(Y,"/").concat(ja));Y="".concat(Y,"/items/").concat(P.id,"/delete");I.default.request({url:Y},{usePost:!0}).then(function(){R.resolve(!0)},function(aa){R.reject(aa)});return R};N.prototype.focusReportAction=
function(P){this.rows.forEach(function(R){R.report.id===P.id&&R.focusActionBtn()})};N.prototype.handleDownload=function(P){P=P.report;var R="".concat(L.default.restBaseUrl,"content/items/").concat(P.id,"/data?token\x3d").concat(I.default.getToken());I.default._fetchItemData(P,R)};N.prototype.handleViewDetails=function(P){P=P.report;window.open("".concat(L.default.baseUrl,"item.html?id\x3d").concat(P.id),"_blank")};N.prototype.getOwners=function(P){var R=this,Y=new d.default;P=P.filter(function(ja){return!R.owners.some(function(aa){return aa.username===
ja})}).reduce(function(ja,aa){return"".concat(ja?"".concat(ja," OR "):"","username:").concat(aa)},"");if(!P)return Y.resolve(this.owners),Y;I.default.request({url:"".concat(L.default.restBaseUrl,"portals/self/users/search"),content:{q:P}}).then(function(ja){ja.results?(ja=ja.results.map(function(aa){return new C.default(f.__assign(f.__assign({},aa),{portal:R.portal}))}),R.owners=f.__spreadArray(f.__spreadArray([],R.owners,!0),ja,!0),Y.resolve(R.owners)):Y.resolve(ja.results)});return Y};N.prototype.initUI=
function(){A.default.registerItemActions(this,this.domNode,r.default,this.page);document.body.classList.add("reports-page");G.default.showHide(this.getStartedEl,this.portalUser.isOrgAdmin)};N.prototype.applyQueryParameters=function(){var P=A.default.getQueryParams();this.applySearchParameter(P);this.applyReportParameter(P);this.applySortParameters(P);this.applyPaginationParameter(P);this.applyDateCreatedParameter(P)};N.prototype.applySearchParameter=function(P){P.searchTerm&&(this.searchTerm=P.searchTerm)};
N.prototype.applyReportParameter=function(P){P.type&&(this.initialReportType=P.type)};N.prototype.applySortParameters=function(P){if(P.sortField){var R=P.sortField;if(R&&this.allowedSortOptions&&this.allowedSortOptions.length){var Y=D.default.find(this.allowedSortOptions,function(ja){return ja===R});Y&&(this.sortField=Y)}}P.sortOrder&&(this.sortOrder=P.sortOrder);this.renderSortedColumn()};N.prototype.applyPaginationParameter=function(P){if(P.num){var R=parseInt(P.num,10);-1<[20,60,100].indexOf(R)&&
(this.initialNum=R,this.pageInfo&&this.pageInfo.num&&(this.pageInfo.num=this.initialNum))}P.start&&this.pageInfo&&(this.initialStart=parseInt(P.start,10)||1,0<this.initialStart%this.pageInfo.num&&(this.initialStart=Math.floor(this.initialStart/this.pageInfo.num)*this.pageInfo.num+1,this.pageInfo&&this.pageInfo.start&&(this.pageInfo.start=this.initialStart)))};N.prototype.applyDateCreatedParameter=function(P){P.created&&(this.initialDateCreatedFilter=P.created,this.initialDateCreatedFilterTo=P.created_to?
P.created_to:void 0,this.initialDateCreatedFilterFrom=P.created_from?P.created_from:void 0)};N.prototype.applyFilters=function(){this.applyPagination();this.applyReportFilter();this.applyDateCreatedFilter()};N.prototype.applyPagination=function(){this.pagination&&this.pagination.setInitialProperties({num:this.initialNum,start:this.initialStart});this.pageInfo&&(this.pageInfo.num=this.initialNum,this.pageInfo.start=this.initialStart)};N.prototype.applyReportFilter=function(){this.initialReportType&&
this.reportFilter&&this.reportFilter.select&&(this.reportFilter.select(this.initialReportType),this.setFiltersFromState(this.reportFilter))};N.prototype.applyDateCreatedFilter=function(){this.initialDateCreatedFilter&&this.dateCreatedFilter&&this.dateCreatedFilter.select&&(this.dateCreatedFilter.select(this.initialDateCreatedFilter,this.initialDateCreatedFilterFrom,this.initialDateCreatedFilterTo),this.setFiltersFromState(this.dateCreatedFilter))};N.prototype.setFiltersFromState=function(P){var R=
P.getState();P=R.param;R=R.selected;if(null===R||void 0===R?0:R[0])R[0].q&&"created"!==P?this.filters[P]=R[0].q:R[0].from&&R[0].to&&(this.filters[P]="".concat(P,":[").concat(R[0].from.valueOf()," TO ").concat(R[0].to.valueOf(),"]"))};return N=f.__decorate([(0,M.default)(v.default,m.default)],N)}()})},"arcgisonline/pages/organization/widgets/Reports/ReportRow":function(){define("require exports tslib esri/Evented dojo/on dojo/topic dojo/text!./templates/ReportRow.html dojo/i18n!../../../../nls/arcgisonline dijit/_TemplatedMixin dijit/_WidgetBase arcgisonline/pages/utils/formatters arcgisonline/pages/utils/dom arcgisonline/esriGeowConfig ./ReportOwner arcgisonline/tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);return function(){function p(l,n){this.templateString=b.default;this.i18n=f.__assign(f.__assign(f.__assign({},a.default.common),a.default.myOrganization.statusTab),a.default.myOrganization.membersTab);
this.fullDate=t.default.fullDate;this.doNotLinkTitle=this.hideActions=this.canManage=!1;this.detailsLink=""}p.prototype.postMixInProperties=function(){this.detailsLink="".concat(g.default.baseUrl,"item.html?id\x3d").concat(this.report.id);this.inherited(arguments)};p.prototype.postCreate=function(){this.inherited(arguments);u.default.showHide(this.titleEl,!this.doNotLinkTitle);u.default.showHide(this.noLinkTitle,this.doNotLinkTitle);"failed"===this.report.status&&(u.default.hideNode(this.fileIcon),
u.default.showNode(this.warningIcon),u.default.showNode(this.retryBtn));this.hideActions&&(this.titleCol.classList.add("processing-report__title-col"),u.default.hideNode(this.downloadCol),u.default.hideNode(this.actionsCol),u.default.showNode(this.retryCol));new m.default({report:this.report,owner:this.owner,portal:this.portal},this.domNode.querySelector(".js-report-owner"));this.addEventListeners();this.canManage||u.default.hideNodes([this.renameBtn,this.deleteBtn])};p.prototype.focusActionBtn=function(){this.actionsBtn.focus()};
p.prototype.updateTitle=function(l){this.report.title=l;this.titleEl.textContent=l};p.prototype.addEventListeners=function(){var l=this;this.own((0,h.default)(this.downloadBtn,"click",function(){l.emit("download",{report:l.report})}),(0,h.default)(this.viewDetailsBtn,"click",function(){l.emit("details",{report:l.report})}),(0,h.default)(this.renameBtn,"click",function(){l.emit("rename",{report:l.report})}),(0,h.default)(this.retryBtn,"click",function(){d.default.publish("create-report",l.report.reportProps)}),
(0,h.default)(this.deleteBtn,"click",function(){l.emit("delete",{report:l.report})}))};return p=f.__decorate([(0,v.default)(q.default,e.default,c.default)],p)}()})},"arcgisonline/pages/organization/widgets/Reports/ReportOwner":function(){define("require exports tslib dojo/on dojo/text!./templates/ReportOwner.html dijit/_TemplatedMixin dijit/_WidgetBase arcgisonline/pages/dijit/MemberThumb arcgisonline/pages/organization/widgets/ProfilePopup arcgisonline/tsutils/declareDecorator".split(" "),function(S,
J,f,c,h,d,b,a,e,q){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);return function(){function t(u,g){this.templateString=h.default}t.prototype.destroy=function(){var u;this.inherited(arguments);null===(u=this.popup)||void 0===u?void 0:u.destroy()};t.prototype.postCreate=function(){var u=this;this.inherited(arguments);this.owner&&new a.default({member:this.owner,cssClasses:"margin-right-half report-owner-thumb",
scale:"s"},this.domNode.querySelector(".js-thumb"));this.own((0,c.default)(this.domNode,"click",function(g){return u.openProfilePopup(g)}));this.portal||this.domNode.classList.add("btn-link-darker-gray")};t.prototype.openProfilePopup=function(u){u.stopPropagation();this.portal&&(u=new e.default({username:this.report.owner,portal:this.portal,opener:this.domNode,dialogClass:"report-owner__popup"}),u.open(),this.popup=u)};return t=f.__decorate([(0,q.default)(b.default,d.default)],t)}()})},"arcgisonline/pages/organization/widgets/Reports/ReportCard":function(){define("require exports tslib dojo/text!./templates/ReportCard.html dojo/i18n!../../../../nls/arcgisonline dojo/on dijit/_TemplatedMixin dijit/_WidgetBase ./ReportOwner ./ReportPopup arcgisonline/tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);return function(){function u(g,m){this.templateString=c.default;this.i18n=h.default}u.prototype.postCreate=function(){var g=this;this.inherited(arguments);new e.default({report:this.report,owner:this.owner,portal:this.portal},this.domNode.querySelector(".js-report-owner"));this.own((0,d.default)(this.domNode,
"click",function(){return g.showPopup()}))};u.prototype.updateTitle=function(g){this.report.title=g;this.titleEl.textContent=g};u.prototype.showPopup=function(){new q.default({report:this.report,owner:this.owner})};return u=f.__decorate([(0,t.default)(a.default,b.default)],u)}()})},"arcgisonline/pages/organization/widgets/Reports/ReportPopup":function(){define("require exports tslib dojo/text!./templates/ReportPopup.html dojo/i18n!../../../../nls/arcgisonline dojo/dom-construct dojo/topic dijit/_TemplatedMixin dijit/_WidgetBase dijit/a11yclick arcgisonline/pages/utils/formatters arcgisonline/pages/utils/icons ./ReportOwner arcgisonline/tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);return function(){function v(p,l){this.templateString=c.default;this.i18n=f.__assign(f.__assign({},h.default.common),h.default.myOrganization.statusTab);this.fullDate=t.default.fullDate;this.icons=u.default}v.prototype.postMixInProperties=
function(){this.inherited(arguments);this.srcNodeRef||(this.srcNodeRef=d.default.place(d.default.create("div"),document.body,"last"))};v.prototype.postCreate=function(){var p=this;this.inherited(arguments);new g.default({report:this.report,owner:this.owner},this.domNode.querySelector(".js-report-owner"));this.own((0,q.default)(this.closeBtn,function(){p.destroy()}),(0,q.default)(this.downloadBtn,function(){b.default.publish("report/download",{report:p.report})}),(0,q.default)(this.viewDetailsBtn,
function(){b.default.publish("report/details",{report:p.report})}),(0,q.default)(this.renameBtn,function(){b.default.publish("report/rename",{report:p.report});p.destroy()}))};return v=f.__decorate([(0,m.default)(e.default,a.default)],v)}()})},"arcgisonline/pages/organization/widgets/Reports/RenameReport":function(){define("require exports tslib esri/Evented dojo/text!./templates/RenameReport.html dojo/i18n!../../../../nls/arcgisonline dojo/string dojo/debounce arcgisonline/pages/dijit/Overlay arcgisonline/pages/dijit/TextboxWithValidation/TextboxWithValidation arcgisonline/pages/utils/alerts arcgisonline/sharing/util arcgisonline/tsutils/declareDecorator arcgisonline/esriGeowConfig".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);return function(){function v(p,l){var n=this;this.i18n=d.default;this.texts=f.__assign({},d.default.myOrganization.statusTab);this.title=this.texts.renameReport;this.overlayContents=b.default.substitute(h.default,
{i18n:this.texts});this.maxWidth=500;this.constrain=!0;this.closeOnScrimClick=!1;this.checkDuplicateName=(0,a.default)(function(){var k=n.titleInput.getValue(),r='(title:"'.concat(k,'" AND orgid:"').concat(n.portal.id,'" AND type:"Administrative Report")');return n.portal.queryItems({q:r}).then(function(w){var x;(null===(x=w.items)||void 0===x?0:x.some(function(D){return D.title===k&&D.id!==n.report.id}))?n.titleInput.showError(b.default.substitute(d.default.createReport.errors.reportNameAlreadyExists,
{reportName:k})):n.titleInput.validate()&&n.titleInput.hideError()})},300)}v.prototype.open=function(){var p=this;this.inherited(arguments);this.titleInput=new q.default({requiredMsg:this.texts.nameRequired,labelText:this.texts.reportName},this.domNode.querySelector(".js-title-input"));this.own(this.titleInput.on("input",function(){p.titleInput.isValid=!1;p.checkDuplicateName()}));this.titleInput.setValue(this.report.title)};v.prototype.close=function(){this.inherited(arguments);this.emit("closed")};
v.prototype.handlePrimary=function(){var p=this,l=this.titleInput.getValue();this.titleInput.isValid&&u.default.request({url:"".concat(m.default.restBaseUrl,"content/users/").concat(this.report.owner,"/items/").concat(this.report.id,"/update"),content:{title:l}},{usePost:!0}).then(function(n){n&&!n.code?(t.default.showAlert("success",p.texts.renameSuccess),p.emit("saved",l),p.close()):t.default.showAlert("error",p.texts.renameError)},function(){t.default.showAlert("error",p.texts.renameError)})};
return v=f.__decorate([(0,g.default)(e.default,c.default)],v)}()})},"arcgisonline/pages/organization/widgets/Reports/ProcessingReports":function(){define("require exports tslib dojo/string dojo/topic dojo/text!./templates/ProcessingReports.html dojo/i18n!../../../../nls/arcgisonline arcgisonline/pages/dijit/Overlay arcgisonline/pages/utils/dom arcgisonline/pages/utils/culture ./ReportRow arcgisonline/tsutils/declareDecorator".split(" "),function(S,J,f,c,h,d,b,a,e,q,t,u){c=f.__importDefault(c);h=f.__importDefault(h);
d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);return function(){function g(m,v){this.i18n=b.default;this.texts=f.__assign(f.__assign({},b.default.myOrganization.statusTab),b.default.myOrganization.statusTab.processingOverlay);this.title=this.texts.overlayTitle;this.overlayContents=c.default.substitute(d.default,{i18n:this.texts});this.maxWidth=750;this.constrain=!0;this.closeOnScrimClick=
!1;this.rows=[]}g.prototype.open=function(){var m=this;this.own(h.default.subscribe("process-reports/update",function(v){m.reports=v;m.renderRows()}),h.default.subscribe("create-report",function(){m.close()}));e.default.hideNode(this._primaryBtn);this._cancelBtn.textContent=b.default.common.close;this.renderRows();this.inherited(arguments)};g.prototype.renderRows=function(){var m=this;this.rows.forEach(function(p){return p.destroy()});this.rows=[];var v=this.domNode.querySelector(".js-table-wrap");
e.default.showHide(v,0<this.reports.length);e.default.showHide(this.domNode.querySelector(".js-count"),0<this.reports.length);e.default.showHide(this.domNode.querySelector(".js-no-reports"),0===this.reports.length);this.renderCount();this.reports.forEach(function(p){p=new t.default({report:p,owner:p.ownerUser,portal:m.portal,hideActions:!0,doNotLinkTitle:!0});v.appendChild(p.domNode);m.rows.push(p)})};g.prototype.renderCount=function(){this.domNode.querySelector(".js-count").textContent=q.default.getString(this.texts.reportNum,
this.reports.length)};return g=f.__decorate([(0,u.default)(a.default)],g)}()})},"arcgisonline/pages/organization/_OrganizationActions":function(){define("require exports tslib ../../esriGeowConfig ../pageUtil ../dijit/InviteMembers ../dijit/CreateReport ../dijit/ScheduleReport ../dijit/AssignLicenses ../dijit/ManageLicenseTypes ./widgets/ProfilePopup ./widgets/TransferItemsOverlay ./widgets/PendingMembers/PendingMembers ./widgets/SetCreditsOverlay/SetCreditsOverlay ../utils/alerts ../../sharing/util ../../sharing/dijit/dialog/GeneralDlg ../../sharing/geow/Account ../../sharing/geow/Password dijit/a11yclick dijit/registry dojo/promise/all dojo/dom-construct dojo/i18n!../../nls/arcgisonline dojo/query dojo/string dojo/topic ../utils/channels ../components/DeleteMembers/DeleteMembersModal preact".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C){function H(K){y.default.publish("member-action/telemetry",K)}function E(K){y.default.publish("members-bulk-action/telemetry",K)}c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);
n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);D=f.__importDefault(D);G=f.__importDefault(G);F=f.__importDefault(F);A=f.__importDefault(A);y=f.__importDefault(y);B=f.__importDefault(B);return function(){function K(){}K.manageItems=function(I){H("Manage items");this._goToView(I,"content")};K.manageCredits=function(I){var L,M;H("Manage credits");(new m.default({portal:null===(L=I.page)||void 0===L?void 0:L.portal,memberCount:null===
(M=I.page)||void 0===M?void 0:M.totalMembers,members:[I.item],notBatch:!0})).open();y.default.publish("manage-member/open",{member:I.item,action:"credits",isDropdown:I.evt.target.classList.contains("dropdown-link")})};K.viewGroups=function(I){H("View groups");this._goToView(I,"groups")};K.viewProfile=function(I){H("View profile");this._goToView(I,"user")};K.expirePassword=function(I){k.default.expirePassword.call(k.default,I.item.username)};K.resetPassword=function(I){function L(){setTimeout(function(){return y.default.publish("manage-members/close")})}
var M=I.item.username,N=I.item.fullName,P=I.item.email;H("Reset password");h.default.createConfirmationDialog({strings:{title:G.default.myOrganization.formatters.resetPassword,description:A.default.substitute(G.default.myOrganization.wishToResetPwd,{user:M})},okColor:"red",autoCloseOnOk:!0,onOk:function(){k.default.resetPassword.call(k.default,M,N,P,L);L()},onCancel:function(){L()}});y.default.publish("manage-member/open",{member:I.item,action:"password",isDropdown:I.evt.target.classList.contains("dropdown-link")})};
K.disableMultiFactor=function(I){function L(M){var N="".concat(p.default.getSecureUrl(c.default.restBaseUrl),"community/users/").concat(M,"/disableMfa");p.default.request({url:N},{usePost:!0}).then(function(){h.default.createConfirmationDialog({strings:{title:G.default.common.noticeLabel,description:A.default.substitute(G.default.myOrganization.securityTab.disableMultiFactorSuccess,{user:M})},autoCloseOnOk:!0,hideCancel:!0});y.default.publish("disableMultiFactor/update")},function(P){P=A.default.substitute(G.default.myOrganization.securityTab.errorDisableMultiFactor,
{user:M});h.default.createConfirmationDialog({strings:{title:G.default.common.errorTitle,description:P},autoCloseOnOk:!0,hideCancel:!0})})}h.default.createConfirmationDialog({strings:{title:G.default.userProfile.disableMFA,description:A.default.substitute(G.default.myOrganization.securityTab.disableMultiFactorUserMsg,{user:I.item.username}),ok:G.default.common.disable},autoCloseOnOk:!0,okColor:"red",onOk:function(){L(I.item.username)}})};K.getOverlayContainer=function(){var I=document.createElement("div");
document.body.appendChild(I);return I};K.manageLicenseType=function(I){H("Manage user types / roles");this._manageLicenseType=new q.default({members:[I.item],portal:I.portal,user:I.user,isDrillIn:I.isDrillIn},this.getOverlayContainer());this._manageLicenseType.open();y.default.publish("manage-member/open",{member:I.item,action:"userType",isDropdown:I.evt.target.classList.contains("dropdown-link")})};K.manageLicenseTypesBulk=function(I){var L=I.scope,M=I.page,N=I.evt.target;N.classList.contains("members__batch-btn--disabled")?
(I=JSON.parse(N.dataset.disableReasons),L=M="",I.selectedSelf?(M=G.default.myOrganization.membersTab[I.onlyOneAdminUserType?"unableToManageUserTypeNoOptions":"unableToManageUserTypeBatch"],L=G.default.myOrganization.membersTab.deselectSelfRetry):I.selectedAdminContact&&(M=G.default.myOrganization.membersTab.unableToChangeAdminContactRole,L=G.default.myOrganization.membersTab.deselectAdminContacts),this._showDisableReason(M,L,"manage-user-type-reasons/deselect")):(L=L.selection.slice(),this._manageLicenseType=
new q.default({members:L,portal:M.portal,user:M.portalUser},this.getOverlayContainer()),E("Manage user types / roles"),this._manageLicenseType.open(),y.default.publish("manage-members-batch/open",{action:"userType",members:I.scope.selection.slice()}))};K.categorizeMember=function(I){y.default.publish("manage-member/open",{member:I.item,action:"categorize",isDropdown:!0});y.default.publish("categorize-member/open",I.item)};K.editEmail=function(I){y.default.publish("manage-member/open",{member:I.item,
action:"editEmail",isDropdown:!0});y.default.publish("edit-email/open",I.item)};K.manageLicenses=function(I){H("Manage add-on licenses");this._manageLicensesOverlay=new e.default({members:[I.item],portal:I.portal,isDrillIn:I.isDrillIn},this.getOverlayContainer());this._manageLicensesOverlay.open();y.default.publish("manage-member/open",{member:I.item,action:"licenses",isDropdown:I.evt.target.classList.contains("dropdown-link")})};K.manageLicensesBulk=function(I){var L=I.page,M=I.evt.target,N=I.scope.selection.slice(),
P=N.reduce(function(R,Y){Y=Y.licenseType;(null===Y||void 0===Y?0:Y.supportsSignInOnlyFromUTApps)&&-1===R.indexOf(Y.name)&&R.push(Y.name);return R},[]).join(",");M.classList.contains("members__batch-btn--disabled")?(I=JSON.parse(M.dataset.disableReasons),L=A.default.substitute(G.default.myOrganization.membersTab.unableToAssignLicenses,{userTypes:P}),M=void 0,I.all||(M=A.default.substitute(G.default.myOrganization.membersTab.deselectUserTypes,{userTypes:P})),this._showDisableReason(L,M,"manage-licenses/deselect")):
(this._manageLicensesOverlay=new e.default({members:N,portal:L.portal},this.getOverlayContainer()),this._manageLicensesOverlay.open(),E("Manage add-on licenses"),y.default.publish("manage-members-batch/open",{action:"licenses",members:I.scope.selection.slice()}))};K._showDisableReason=function(I,L,M){I='\x3cdiv class\x3d"trailer-half margin-right-2"\x3e'.concat(I,"\x3c/div\x3e").concat(L?'\x3cdiv class\x3d"padding-leader-half members-alert__btn-container"\x3e\n      \x3cbutton class\x3d"btn-link font-size--1 text-left js-deselect-btn"\x3e'.concat(L,
"\x3c/button\x3e\n    \x3c/div\x3e"):"");var N=h.default.createSpecifiedDialog(l.default);N.show({title:"",message:I});I=N._dialog;I.domNode.classList.add("members-bulk__dialog");I.titleNode.classList.add("hide");I.containerNode.querySelector(".esriFloatTrailing.right").classList.add("hide");for(var P=(0,F.default)("br",I.containerNode),R=0;R<P.length;R++)I.containerNode.removeChild(P[R]);L&&N.own((0,r.default)(N._dialog.domNode.querySelector(".js-deselect-btn"),function(){y.default.publish(M);N.hide()}))};
K.inviteMembers=function(I){function L(P,R,Y){h.default.createConfirmationDialog({strings:{title:P,description:R},hideCancel:!0,autoCloseOnOk:!0,renderHtmlDescription:Y})}var M=I.page.portal,N=M.isPortal;I.page.disableInvites||I.page.noUserTypesAvailable||I.page.maxedUsers?I.page.noUserTypesAvailable?L(G.default.myOrganization.inviteMembers.insufficientUserTypes,G.default.myOrganization.inviteMembers[I.page.portal.isPortal?"noUserTypesAvailablePortal":"noUserTypesAvailable"]):I.page.maxedUsers&&(I=
void 0,I=N?G.default.myOrganization.maxUsersPortalMsg:A.default.substitute(G.default.myOrganization.maxUsersMsg,{linkStart:'\x3cspan class\x3d"esriItemLinks"\x3e\x3ca target\x3d"_blank" href\x3d"'.concat(M.helpBase+M.helpMap.m["120000503"],'"\x3e'),linkEnd:"\x3c/a\x3e\x3c/span\x3e"}),L(G.default.myOrganization.noticeLabel,I,!0)):(this._inviteMembersOverlay=new d.default({manageLicenses:I.scope.manageLicenses,portal:I.page.portal,user:I.user},D.default.place(D.default.create("div"),document.body,"last")),
this._inviteMembersOverlay.open())};K.showPendingInvitations=function(I){(new g.default({portalId:I.page.portal.id})).open()};K.enableEsri=function(I){var L=this,M="".concat(G.default.myOrganization.enableEsriAccessDesc,"\x3cbr\x3e\x3cbr\x3e").concat(G.default.myOrganization.enableEsriAccessNote),N=I.item.username;H("Enable Esri Access");h.default.createConfirmationDialog({strings:{title:G.default.myOrganization.enableEsriAccessTitle,description:M},autoCloseOnOk:!0,renderHtmlDescription:!0,onOk:function(){var P=
"".concat(p.default.getSecureUrl(c.default.restBaseUrl),"community/users/").concat(N,"/update");p.default.request({url:P,content:{usertype:L.userTypeBoth}},{usePost:!0}).then(function(){v.default.showAlert("success",A.default.substitute(G.default.myOrganization.esriAccessEnabled,{user:N}));y.default.publish("esriAccess/update");L._updateUsertypeInCookieAndRefresh(N,L.userTypeBoth)},function(){var R=A.default.substitute(G.default.myOrganization.enableEsriAccessError,{user:N});v.default.showAlert("error",
R)})}})};K.disableEsri=function(I){var L=this,M=I.item.username;I=p.default.getSecureUrl(c.default.restBaseUrl)+"community/users/"+M+"/update";var N={usertype:this.userTypeArcGIS};H("Disable Esri Access");p.default.request({url:I,content:N},{usePost:!0}).then(function(){v.default.showAlert("success",A.default.substitute(G.default.myOrganization.esriAccessDisabled,{user:M}));y.default.publish("esriAccess/update");L._updateUsertypeInCookieAndRefresh(M,L.userTypeArcGIS)},function(){var P=A.default.substitute(G.default.myOrganization.disableEsriAccessError,
{user:M});v.default.showAlert("error",P)})};K.disableMember=function(I){var L=this,M=I.item.username;I=c.default.restBaseUrl+"community/users/"+M+"/disable";H("Disable member");p.default.request({url:I},{usePost:!0}).then(function(){v.default.showAlert("success",A.default.substitute(G.default.myOrganization.disabledUser,{user:M}));y.default.publish("disable/update")},function(N){N=L._getDisableError(M,N);v.default.showAlert("error",N)})};K.enableMember=function(I){var L=this,M=I.item.username;I=c.default.restBaseUrl+
"community/users/"+M+"/enable";H("Enable member");p.default.request({url:I},{usePost:!0}).then(function(){v.default.showAlert("success",A.default.substitute(G.default.myOrganization.enabledUser,{user:M}));y.default.publish("members/refresh")},function(N){N=L._getEnableError(M,N);v.default.showAlert("error",N)})};K.deleteMember=function(I){return f.__awaiter(this,void 0,void 0,function(){function L(){return f.__awaiter(this,void 0,void 0,function(){var R,Y,ja,aa,da,ra,ca,fa,la,ta,Q,T,O,Z,na,ia;return f.__generator(this,
function(X){switch(X.label){case 0:return[4,p.default.request({url:"".concat(c.default.restBaseUrl,"search"),content:{q:"owner:".concat(M.username," orgid:").concat(N.id,' -typekeywords:("MapAreaPackage") -type:("Map Area" OR "Indoors Map Configuration" OR "Code Attachment")'),countFields:"owner",countSize:100,num:100}})];case 1:return R=X.sent(),Y=null===(la=null===(fa=null===(ca=null===R||void 0===R?void 0:R.aggregations)||void 0===ca?void 0:ca.counts)||void 0===fa?void 0:fa[0])||void 0===la?void 0:
la.fieldValues,ja=null===(ta=null===Y||void 0===Y?void 0:Y.filter(function(ha){var V;return(null===(V=ha.value)||void 0===V?void 0:V.toLowerCase())===M.username.toLowerCase()})[0])||void 0===ta?void 0:ta.count,M.contentCount=null!==ja&&void 0!==ja?ja:0,[4,p.default.request({url:"".concat(c.default.restBaseUrl,"community/groups"),content:{q:"owner:".concat(M.username," orgid:").concat(N.id),countFields:"owner",countSize:100,num:100}})];case 2:return aa=X.sent(),[4,p.default.request({url:"".concat(c.default.restBaseUrl,
"/content/users/").concat(M.username),content:{foldersContent:!0,inRecycleBin:!0,num:0}})];case 3:return da=X.sent(),ra=null===(O=null===(T=null===(Q=null===aa||void 0===aa?void 0:aa.aggregations)||void 0===Q?void 0:Q.counts)||void 0===T?void 0:T[0])||void 0===O?void 0:O.fieldValues,null===ra||void 0===ra||ra.filter(function(ha){var V;return(null===(V=ha.value)||void 0===V?void 0:V.toLowerCase())===M.username.toLowerCase()}),M.groupCount=null!==(Z=null===aa||void 0===aa?void 0:aa.total)&&void 0!==
Z?Z:0,(0,C.render)((0,C.h)(B.default,{portal:N,members:[M],groupsCount:null!==(na=null===aa||void 0===aa?void 0:aa.total)&&void 0!==na?na:0,recycleCount:null!==(ia=null===da||void 0===da?void 0:da.total)&&void 0!==ia?ia:0,onClose:function(){(0,C.render)(null,P)},onDeleted:function(){window.setTimeout(function(){(0,C.render)(null,P)},300);v.default.showAlert("success",A.default.substitute(G.default.myOrganization.membersTab.deletedUser,{user:M.username}));y.default.publish("delete-members/done",I.item);
y.default.publish("members/refresh",!0);y.default.publish("member-categories-count/update")},onError:function(ha){window.setTimeout(function(){(0,C.render)(null,P)},300);v.default.showAlert("error",ha)}}),P),[2]}})})}var M,N,P;return f.__generator(this,function(R){M=I.item;N=I.portal;P=document.body.querySelector("#delete-member-modal");P||(P=document.createElement("div"),P.id="delete-member-modal",document.body.appendChild(P));L();(0,z.handleRecycleUpdate)(function(){window.setTimeout(function(){L()},
1E3)});return[2]})})};K.deleteMemberOld=function(I){var L=this,M=p.default.getUser(),N=I.item.username,P=function(){setTimeout(function(){return y.default.publish("manage-members/close")})},R=function(Y){Y&&((Y=L._getDeleteErrorMessage(Y,N))?(v.default.showAlert("error",Y),P()):(v.default.showAlert("success",A.default.substitute(G.default.myOrganization.membersTab.deletedUser,{user:N})),y.default.publish("delete-members/done",I.item),y.default.publish("members/refresh",!0),y.default.publish("member-categories-count/update")))};
M.username!==N&&(M="".concat(G.default.myOrganization.reallyDeleteUserMsg).concat(p.default.isPortal()?"":"\x3cbr\x3e\x3cbr\x3e".concat(G.default.myOrganization.deleteUserReminder)),H("Delete member"),h.default.createConfirmationDialog({strings:{title:G.default.myOrganization.deleteUserLabel,description:A.default.substitute(M,{user:N}),ok:G.default.myOrganization.deleteUserLabel},okColor:"red",renderHtmlDescription:!0,autoCloseOnOk:!0,onOk:function(){n.default.deleteUser(N,R.bind(L),R.bind(L));P()},
onCancel:function(){P()}}),y.default.publish("manage-member/open",{member:I.item,action:"delete",isDropdown:I.evt.target.classList.contains("dropdown-link")}))};K.transferContent=function(I){return f.__awaiter(this,void 0,void 0,function(){var L;return f.__generator(this,function(M){L=I.item;p.default.request({url:"".concat(c.default.restBaseUrl,"search"),content:{q:"owner:".concat(L.username," orgid:").concat(I.portal.id,' -type:"Code Attachment" -type:"Featured Items" -type:"Symbol Set" -type:"Color Set" -type:"Windows Viewer Add In" -type:"Windows Viewer Configuration" -type:"Map Area" -typekeywords:"MapAreaPackage"')}}).then(function(N){var P;
L.contentCount=null!==(P=null===N||void 0===N?void 0:N.total)&&void 0!==P?P:0;0===L.contentCount?h.default.createConfirmationDialog({strings:{title:G.default.myOrganization.membersTab.transferItems,description:A.default.substitute(G.default.myOrganization.membersTab.noTransferContent,{username:L.username}),ok:G.default.common.done},hideCancel:!0,autoCloseOnOk:!0}):((new u.default({portal:I.portal,members:[L],telemetry:I.page.telemetry,hasRecycle:!1})).open(),y.default.publish("manage-member/open",
{member:I.item,action:"transferContent",isDropdown:I.evt.target.classList.contains("dropdown-link")}))});return[2]})})};K.orgProfilePopup=function(I){var L,M=I.evt,N=null!==(L=I.item.username)&&void 0!==L?L:null;M&&(M.preventDefault(),M.stopPropagation());N&&(new t.default({username:N,opener:M.target,portal:I.portal})).open()};K.enableEsriBulk=function(I){var L=this;h.default.createConfirmationDialog({strings:{title:G.default.myOrganization.enableEsriAccessTitle,description:"".concat(G.default.myOrganization.enableEsriAccessDesc,
"\x3cbr\x3e\x3cbr\x3e").concat(G.default.myOrganization.enableEsriAccessNote),ok:G.default.common.ok},okColor:"red",autoCloseOnOk:!0,renderHtmlDescription:!0,onOk:function(){(0,x.default)(I.scope.selection.map(function(M){var N="".concat(p.default.getSecureUrl(c.default.restBaseUrl),"community/users/").concat(M.username,"/update");return p.default.request({url:N,content:{userType:M.userType===L.userTypeBoth?L.userTypeArcGIS:L.userTypeBoth}},{usePost:!0})})).then(function(M){var N=p.default.getUser();
M.forEach(function(P){N.username===P.username&&(c.default.userInfo.usertype="both"===c.default.userInfo.usertype?"arcgisonly":"both")});v.default.showAlert("success",G.default.myOrganization.membersTab.esriAccessSuccess);y.default.publish("esriAccess/update")},function(){v.default.showAlert("error",G.default.myOrganization.membersTab.esriAccessError)})}})};K.disableMemberBulk=function(I){var L=I.evt.target;if(L.classList.contains("members__batch-btn--disabled")){I=JSON.parse(L.dataset.disableReasons);
L=G.default.myOrganization.membersTab.deselectMembersRetry;var M=void 0;if(I.selectedAdmin)M=G.default.myOrganization.membersTab.unableToDisableCustomRole;else if(I.newUser||I.self)M=G.default.myOrganization.membersTab.unableToDisable;this._showDisableReason(M,L,"disable-members-reasons/deselect")}else E("Disable members"),this._toggleBulkMemberEnabledState(I,"disableUsers")};K.enableMemberBulk=function(I){E("Enable members");this._toggleBulkMemberEnabledState(I,"enableUsers")};K.deleteMemberBulk=
function(I){var L=this,M=I.scope.selection,N=p.default.getUser();I="".concat(G.default.myOrganization.membersTab.confirmDeleteMembers).concat(p.default.isPortal()?"":"\x3cbr\x3e\x3cbr\x3e".concat(G.default.myOrganization.deleteUserReminder));var P=M.length,R=0,Y="",ja=function(da,ra){R++;(da=L._getDeleteErrorMessage(ra,da))&&(Y+="\x3cli\x3e".concat(da,"\x3c/li\x3e"));L._detectDeletionComplete(R,P,Y)},aa=function(da,ra){R++;(da=L._getDeleteErrorMessage(ra,da))&&(Y+="\x3cli\x3e".concat(da,"\x3c/li\x3e"));
L._detectDeletionComplete(R,P,Y)};h.default.createConfirmationDialog({strings:{title:G.default.myOrganization.deleteUserLabel,description:I,ok:G.default.myOrganization.deleteUserLabel},okColor:"red",autoCloseOnOk:!0,renderHtmlDescription:!0,onOk:function(){M.forEach(function(da){N.username!==da.username?n.default.deleteUser(da.username,ja.bind(L,da.username),aa.bind(L,da.username)):(R++,Y+="\x3cli\x3e".concat(G.default.myOrganization.deleteSelfMsg,"\x3c/li\x3e"),L._detectDeletionComplete(R,P,Y))})}})};
K.createReport=function(I){var L,M,N;this._createReportOverlay=new b.default({portal:null===(L=I.page)||void 0===L?void 0:L.portal,user:I.user,telemetry:null===(M=I.page)||void 0===M?void 0:M.telemetry,opener:null===(N=I.evt)||void 0===N?void 0:N.target});this._createReportOverlay.open()};K.scheduleReport=function(I){var L,M,N;this._scheduleReportOverlay=new a.default({portal:null===(L=I.page)||void 0===L?void 0:L.portal,user:I.user,telemetry:null===(M=I.page)||void 0===M?void 0:M.telemetry,opener:null===
(N=I.evt)||void 0===N?void 0:N.target});this._scheduleReportOverlay.open()};K.emptyRecycleBin=function(I){h.default.createConfirmationDialog({strings:{title:G.default.myOrganization.membersTab.emptyBin,description:G.default.myOrganization.membersTab.emptyBinWarning.replace("${name}",I.item.firstName),ok:G.default.common.confirm},color:"red",okColor:"red",autoCloseOnOk:!0,onOk:function(){v.default.showAlert("success",G.default.myOrganization.membersTab.emptyBinSuccess.replace("${name}",I.item.firstName))}})};
K._getDeleteErrorMessage=function(I,L){var M;I.code&&I.messageCode&&(M="COM_1029"===I.messageCode?A.default.substitute(G.default.myOrganization.unableToDeleteUserMsg,{user:L}):"COM_1056"===I.messageCode?A.default.substitute(G.default.myOrganization.noDeleteDisconnectedUserMsg,{user:L}):"COM_1057"===I.messageCode?A.default.substitute(G.default.myOrganization.noDeleteProvisionedUserMsg,{user:L}):"COM_1060"===I.messageCode?A.default.substitute(G.default.myOrganization.securityTab.needTwoAdminDeleteMsg,
{user:L}):"COM_1077"===I.messageCode?A.default.substitute(G.default.myOrganization.unableToDeleteUserBaseMsg,{user:L})+" "+G.default.myOrganization.couldNotRemoveContact:"COM_1150"===I.messageCode?A.default.substitute(G.default.myOrganization.noDeleteAppBundlesMsg,{user:L}):"COM_1052"===I.messageCode?A.default.substitute(G.default.myOrganization.customCannotDeleteAdminMsg,{user:L}):"COM_1152"===I.messageCode?A.default.substitute(G.default.myOrganization.unableToDeleteUserReports,{user:L}):A.default.substitute(G.default.myOrganization.unableToDeleteUserMsg,
{user:L}));return M};K._detectDeletionComplete=function(I,L,M){I>=L&&(0<M.length?(M="\x3cul\x3e".concat(M,"\x3c/ul\x3e"),h.default.createConfirmationDialog({strings:{title:G.default.common.errorLabel,description:M},hideCancel:!0,autoCloseOnOk:!0,renderHtmlDescription:!0})):v.default.showAlert("success",G.default.myOrganization.membersTab.deleteSuccess),y.default.publish("delete/update"))};K._goToView=function(I,L){var M=encodeURIComponent(I.item.username),N=p.default.getUser();N=M===N.username;I=
I.portal.portalUser.userRole;var P=c.default.baseUrl,R=!1;switch(L){case "content":R=I.canManageItems();break;case "groups":R=I.isAdmin()||I.canViewOrgGroups();break;default:R=!0}R?(P+=L+".html",N||(P+="?user\x3d"+M)):P+="search.html?q\x3downer:%22"+M+"%22#"+L;window.location=P};K._updateUsertypeInCookieAndRefresh=function(I,L){p.default.getUser().username===I&&(c.default.userInfo.usertype=L,(I=w.default.byId("header"))&&I.updateEsriAccessLinks(L))};K._toggleBulkMemberEnabledState=function(I,L){var M=
this;I=I.scope.selection;h.default.sendAllResources("".concat(c.default.restBaseUrl,"portals/self/").concat(L),25,I.map(function(N){return N.username}),function(N){return{users:JSON.stringify(N)}}).then(function(N){var P={results:[]};N.forEach(function(R){return P.results=P.results.concat(R.results)});M._toggleBulkEnabledStateSuccess(L,P)},this._toggleBulkEnabledStateError.bind(this,L))};K._toggleBulkEnabledStateSuccess=function(I,L){var M=!1,N=[],P={enableUsers:{errorFunc:this._getEnableError,successMessage:G.default.myOrganization.membersTab.enableSuccess},
disableUsers:{errorFunc:this._getDisableError,successMessage:G.default.myOrganization.membersTab.disableSuccess}};L.results.forEach(function(R){R.status||(M=!0,N.push(P[I].errorFunc(R.username,R.error)))});M?1<N.length?v.default.showAlertList("error",N):v.default.showAlert("error",N[0]):v.default.showAlert("success",P[I].successMessage);y.default.publish("disable/update")};K._toggleBulkEnabledStateError=function(I,L){v.default.showAlert("error","enableUsers"===I?G.default.myOrganization.membersTab.enableError:
G.default.myOrganization.membersTab.disableError)};K._getEnableError=function(I,L){return A.default.substitute(G.default.myOrganization.enabledUserError,{user:I})};K._getDisableError=function(I,L){var M=A.default.substitute(G.default.myOrganization.disabledUserError,{user:I});(null===L||void 0===L?0:L.messageCode)&&"COM_1061"===L.messageCode?M=A.default.substitute(G.default.myOrganization.securityTab.needTwoAdminDisableMsg,{user:I}):(null===L||void 0===L?0:L.messageCode)&&"COM_1078"===L.messageCode&&
(M=" "+G.default.couldNotRemoveContact);return M};K.userTypeArcGIS="arcgisonly";K.userTypeBoth="both";return K}()})},"arcgisonline/pages/dijit/InviteMembers":function(){define("require exports tslib preact calcite-web/js/calcite-web dojo/string dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/keys dojo/query dojo/on dojo/topic dojo/Deferred dojo/store/Memory dojo/text!./InviteMembers/templates/InviteMembers.html dojo/i18n!../../nls/arcgisonline dojo/_base/lang dojo/promise/all esri/lang esri/request dijit/_TemplatedMixin dijit/_WidgetBase dijit/a11yclick dijit/form/FilteringSelect dijit/form/NumberTextBox dojox/data/CsvStore ../../esriGeowConfig ../pageUtil ../utils/alerts ../utils/arrays ../utils/dom ../utils/number ../utils/resources ../utils/tooltips ../organization/widgets/SelectedGroups ../organization/widgets/settings/rows/DefaultLicenseRow ../organization/widgets/settings/rows/GroupRow ../organization/widgets/LicensesOverlay ../organization/widgets/UserDefaults/DefaultGroupsOverlay ../components/MemberCategories/CategoryPicker/CategoryChips ../components/MemberCategories/DefaultCategoriesModal/DefaultCategoriesModal ../components/MemberCategories/api ../components/ProcessMembers/ProcessMembers ../components/ProcessMembers/NewMemberModal ../organization/widgets/GroupIcon ./Overlay ./OverlayConfirm ./SearchInput ./Pagination ./CaseInsensitiveMemory ./InviteMembers/MobileError ./ToggleSwitch ./InviteMembers/MemberForm ./InviteMembers/NewMemberCard ./InviteMembers/AppIconList ./InviteMembers/LicenseAssignments ./InviteMembers/LicenseTypeSelect ../utils/user ../utils/culture ../utils/organization ../utils/icons ../utils/promises ../utils/strings ../../sharing/util ../../sharing/dijit/_LevelAwareMixin ../../sharing/dijit/dialog/SelectEnterpriseGroupDlg ../../sharing/geow/Roles ../../sharing/geow/Account ../../sharing/geow/Licenses ../../tsutils/declareDecorator arcgis-components/wrappers/GroupBrowser".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E,K,I,L,M,N,P,R,Y,ja,aa,da,ra,ca,fa,la,ta,Q,T,O,Z,na,ia,X,ha,V,ea,U,ka,ma,sa,pa,Aa,za,Ba,ua,Fa,va,xa,Da,Ca){h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);
k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);D=f.__importDefault(D);G=f.__importDefault(G);F=f.__importDefault(F);A=f.__importDefault(A);y=f.__importDefault(y);z=f.__importDefault(z);B=f.__importDefault(B);C=f.__importDefault(C);H=f.__importDefault(H);E=f.__importDefault(E);K=f.__importDefault(K);I=f.__importDefault(I);L=f.__importDefault(L);M=f.__importDefault(M);N=f.__importDefault(N);P=f.__importDefault(P);R=f.__importDefault(R);Y=f.__importDefault(Y);
ja=f.__importDefault(ja);aa=f.__importDefault(aa);ra=f.__importDefault(ra);ca=f.__importDefault(ca);fa=f.__importDefault(fa);la=f.__importDefault(la);ta=f.__importDefault(ta);Q=f.__importDefault(Q);T=f.__importDefault(T);O=f.__importDefault(O);Z=f.__importDefault(Z);na=f.__importDefault(na);ia=f.__importDefault(ia);X=f.__importDefault(X);ha=f.__importDefault(ha);V=f.__importDefault(V);ea=f.__importDefault(ea);U=f.__importDefault(U);ka=f.__importDefault(ka);ma=f.__importDefault(ma);sa=f.__importDefault(sa);
pa=f.__importDefault(pa);Aa=f.__importDefault(Aa);za=f.__importDefault(za);Ba=f.__importDefault(Ba);ua=f.__importDefault(ua);Fa=f.__importDefault(Fa);va=f.__importDefault(va);xa=f.__importDefault(xa);Da=f.__importDefault(Da);return function(){function qa(W,ba){var oa=this;this.title=l.default.myOrganization.inviteMembers.addMembers;this.i18n=l.default;this.icons=sa.default;this.step1Title=d.default.substitute(l.default.myOrganization.inviteMembers.step1Title,{wrapStart:'\x3cspan class\x3d"stepper-num margin-right-quarter"\x3e',
wrapEnd:"\x3c/span\x3e"});this.step2Title=d.default.substitute(l.default.myOrganization.inviteMembers.step2Title,{wrapStart:'\x3cspan class\x3d"stepper-num margin-right-quarter"\x3e',wrapEnd:"\x3c/span\x3e"});this.step3Title=d.default.substitute(l.default.myOrganization.inviteMembers.step3Title,{wrapStart:'\x3cspan class\x3d"stepper-num margin-right-quarter"\x3e',wrapEnd:"\x3c/span\x3e"});this.step4Title=d.default.substitute(l.default.myOrganization.inviteMembers.step4Title,{wrapStart:'\x3cspan class\x3d"stepper-num margin-right-quarter"\x3e',
wrapEnd:"\x3c/span\x3e"});this._importedUsernamesUpdated=0;this.trialOrgTypes="Trial;Trial Developer;Developer Subscription;HUP Online Entitlements;Trial Press;Personal Use".split(";");this.usersPerInvite=25;this._page={start:1,end:3,num:20,total:0,nextStart:-1};this._usernameRegExp=/^[a-zA-Z0-9@_\-.]+$/;this._usernameStartEndRegExp=/^([a-zA-Z0-9_][a-zA-Z0-9@_\-.]+[a-zA-Z0-9_])?$/;this._userNamePortalRegExp=/^[a-zA-Z0-9@_.-]+$/;this._maxUsersPerInvite=25;this._maxUsernameLength=128;this._minUsernameLength=
6;this._minSAMLUsernameLength=1;this._maxSAMLUsernameLength=128;this._minPasswordLength=8;this._maxPasswordLength=28;this._membersPerPage=16;this._accountAdminRole="account_admin";this._accountPublisherRole="account_publisher";this._accountUserRole="account_user";this._orgAdminRole="org_admin";this._orgPublisherRole="org_publisher";this._orgUserRole="org_user";this._enterpriseProvider="enterprise";this._searchTerm="";this._supportsWindows=this._supportsLDAP=this._addMode=this._supportsEnterpriseGroups=
this._isWindowsGroupStore=!1;this._newMembers=[];this._filteredMembers=[];this._membersInFile=[];this._currentStep=1;this._currentPropTab="licenses";this._userLimitReached=!1;this._selectedMethod="add-no-email";this._memberKeyField="username";this._newMemberRows=[];this._selectedMembers=[];this._selectedGroupItems=[];this._selectedGroups=[];this._selectedMembersCount=0;this._profileVisOptions=[{text:l.default.userProfile.everyone,value:"public"},{text:l.default.userProfile.organization,value:"org"},
{text:l.default.userProfile.privateLabel,value:"private"}];this._languages=[];this._pages=[];this._groupIcons=[];this._apps=[];this._topicPrefix="INVITE_MEMBERS/";this.summaryMemberRows=[];this.selectedCategories=[];this._userFields=[{name:"email",csvKey:l.default.organizationInvite.csv.email,methods:"add-no-email add-with-email add-enterprise-id add-built-in add-saml invite invite-enterprise".split(" "),validators:[{error:l.default.organizationInvite.step2Create.invalid.emailNotSet,isValid:function(wa){return 0<
wa.length}},{error:function(wa){return d.default.substitute(l.default.organizationInvite.step2Create.invalid.emailAddress,{email:za.default.stripHTML(wa)})},isValid:function(wa){return za.default.isValidEmailAddress(wa)}},{error:function(wa){return d.default.substitute(l.default.organizationInvite.step2Create.invalid.emailAddress,{email:za.default.stripHTML(wa)})+" "+l.default.organizationInvite.emailContainsApostrophe},isValid:function(wa){return-1===wa.indexOf("'")}},{error:function(wa){return d.default.substitute(l.default.organizationInvite.step2Invite.invalid.emailExists,
{email:za.default.stripHTML(wa)})},isValid:function(wa,Ea,Ga){return!oa._isDuplicateEmail(wa,Ea?Ga:void 0)}}]},{name:"rolename",csvKey:l.default.organizationInvite.csv.role,methods:["all"],validators:[{error:l.default.myOrganization.inviteMembers.chooseValidRole,isValid:function(wa){return!!oa.roles.filter(function(Ea){return Ea.name===wa})[0]}}]},{name:"licenseTypeName",csvKey:l.default.organizationInvite.csv.type,methods:["all"],validators:[{error:l.default.myOrganization.inviteMembers.chooseValidLicenseType,
isValid:function(wa){return!!oa._licenseTypesResult.userLicenseTypes.filter(function(Ea){return Ea.name===wa})[0]}}]},{name:"firstname",csvKey:l.default.organizationInvite.csv.firstName,methods:["add-no-email","add-with-email","add-enterprise-id","add-built-in","add-saml"],validators:[{error:l.default.organizationInvite.step2Create.invalid.firstNameIsBlank,isValid:function(wa){return 0<wa.length}}]},{name:"lastname",csvKey:l.default.organizationInvite.csv.lastName,methods:["add-no-email","add-with-email",
"add-enterprise-id","add-built-in","add-saml"],validators:[{error:l.default.organizationInvite.step2Create.invalid.lastNameIsBlank,isValid:function(wa){return 0<wa.length}}]},{name:"username",csvKey:l.default.organizationInvite.csv.username,methods:["add-no-email","add-with-email","add-built-in","add-saml","add-enterprise"],validators:[{error:l.default.organizationInvite.step2Create.invalid.usernameIsBlank,isValid:function(wa){return 0<wa.length}},{error:l.default.organizationInvite.step2Create.invalid.usernameTooShort,
isValid:function(wa){return wa.length>=(oa.portal.isPortal&&H.default.includes(["add-saml","add-enterprise"],oa._selectedMethod)?oa._minSAMLUsernameLength:oa._minUsernameLength)}},{error:l.default.organizationInvite.step2Create.invalid.usernameTooLong,isValid:function(wa){return wa.length<=(oa.portal.isPortal&&H.default.includes(["add-saml","add-enterprise"],oa._selectedMethod)?oa._maxSAMLUsernameLength:oa._maxUsernameLength)}},{error:l.default.organizationInvite.step2Create.invalid.usernameInvalidChars,
isValid:function(wa){return oa._isPortal?oa._usernameContainsAlphaNumericPortal(wa):oa._usernameContainsAlphaNumeric(wa)}},{error:l.default.organizationInvite.step2Create.invalid.usernameStartEndChars,isValid:function(wa){return oa._usernameValidStartEnd(wa)}},{error:function(wa){return d.default.substitute(l.default.organizationInvite.step2Create.invalid.usernameExists,{username:wa})},isValid:function(wa,Ea,Ga){return!oa._isDuplicateUsername(wa,Ea?Ga:void 0)}}]},{name:"idpUsername",csvKey:l.default.organizationInvite.csv.idpUsername,
methods:["add-enterprise-id"],validators:[{error:l.default.organizationInvite.step2Create.invalid.idpUsernameIsBlank,isValid:function(wa){return 0<wa.length}},{error:function(wa){return d.default.substitute(l.default.organizationInvite.step2Create.invalid.idpUsernameExists,{username:wa})},isValid:function(wa,Ea,Ga){return!oa._isDuplicateIDPUsername(wa,Ea?Ga:void 0)}}]},{name:"password",csvKey:l.default.organizationInvite.csv.password,methods:["add-no-email","add-built-in"],validators:[]}];this.hasOIDC=
this.hasSAML=!1;this.handleCategoriesSave=function(wa){oa.selectedCategories=wa;oa.renderCategoriesChips(oa.selectedCategories,".js-category-chips-container");oa.handleManageCategoriesClose();oa.manageCategoriesBtn.focus()};this.handleManageCategoriesClose=function(){(0,c.render)(null,oa.domNode.querySelector(".js-categories-modal"));oa.manageCategoriesBtn.focus()}}qa.prototype.postMixInProperties=function(){var W,ba;this.inherited(arguments);var oa=this.portal.helpBase+(null!==(ba=null===(W=this.portal.helpMap)||
void 0===W?void 0:W.m["120001750"])&&void 0!==ba?ba:"");W=za.default.relativeToExplicitUrl("js/arcgisonline/sharing/dijit/css/images/helpIcon.png");this.overlayContents=d.default.substitute(p.default,{i18n:l.default,exclamationIcon:sa.default["inline-end"]["exclamation-mark-circle"]["16"],trashIcon:sa.default.inline.trash["16"],checkIcon:sa.default.check["32"],plusIcon:sa.default.inline.plus["16"],chevronRight:sa.default["chevron-right"]["24"],csvSuccess:sa.default.check["16"],csvError:sa.default["exclamation-mark-circle"]["16"],
csvWarning:sa.default["exclamation-mark-triangle"]["16"],step1Title:this.step1Title,step2Title:this.step2Title,step3Title:this.step3Title,step4Title:this.step4Title,learnEsriAccessLink:oa,learnEsriAccessIcon:W})};qa.prototype.postCreate=function(){this.inherited(arguments);this._esriAccessTooltip=L.default.createTooltip("esriAccessHelp",this.i18n.myOrganization.defaultsTab.learnEsriAccess);this.esriAccessInfo=L.default.createTooltip("esriAccessTooltip",this.i18n.myOrganization.defaultsTab.learnEsriAccess);
this.getInvitationRequestContent=this.getInvitationRequestContent.bind(this);this.updateLoaderPct=this.updateLoaderPct.bind(this)};qa.prototype.destroy=function(){this._mobileError&&this._mobileError.destroy();this._esriAccessTooltip&&this._esriAccessTooltip.destroy();this.esriAccessInfo&&this.esriAccessInfo.destroy();this._licenseAssignments&&this._licenseAssignments.destroy();this.inherited(arguments)};qa.prototype.open=function(){this.inviteMembersLoader=this.domNode.querySelector(".js-invite-members-loader");
this.calciteLoader=this.domNode.querySelector(".js-invite-members-calcite-loader");this.calciteLoaderMessage=this.domNode.querySelector(".js-invite-members-calcite-loader-text");this.dontCloseMessage=this.domNode.querySelector(".js-invite-members-dont-close");this._selectedGroupsDropdown=new M.default({portal:this.portal},this.domNode.querySelector(".js-selected-groups"));a.default.add(this.domNode,"overlay-invite-members");e.default.place(this.domNode.querySelector(".js-invite-members-headers"),
this._overlayContentWrapper,"before");e.default.place(this.domNode.querySelector(".js-step-bars"),this.domNode.querySelector(".js-invite-members-headers"),"after");e.default.place(this.domNode.querySelector(".js-mobile-titles"),this.domNode.querySelector(".overlay-title-bar"),"before");e.default.place(this.domNode.querySelector(".js-mobile-actions"),this._overlayActionBar,"after");this._newMembers=[];this._licensesAPI=new xa.default;this._setPrimaryBtnText(l.default.organizationInvite.step1Create.nextBtn);
this._showLoader();this._initConfiguration().then(this._initUI.bind(this));document.body.classList.add("invite-members--open");this.inherited(arguments);this._mobileError=new Z.default};qa.prototype.close=function(){var W=this,ba=arguments;document.body.classList.remove("invite-members--open");if(0<this._newMembers.length){var oa=-1!==this._selectedMethod.indexOf("add")?l.default.organizationInvite.notFinishedAdding:l.default.organizationInvite.notFinishedInviting;this._confirmAction({title:l.default.organizationInvite.noticeLabel,
message:oa,okLabel:l.default.organizationInvite.stopInviting,cancelLabel:l.default.organizationInvite.finishInviting,className:"invite-members__unsent-invitations"}).then(function(wa){"onOk"===wa&&(W._closeInviteMembers(),W.inherited(ba))})}else this._closeInviteMembers(),this.inherited(ba)};qa.prototype._confirmAction=function(W){var ba=W.title,oa=W.message,wa=W.okLabel;W=W.cancelLabel;if(ma.default.isMobile())return this._mobileError.show({title:ba,description:oa,buttonText:wa,cancelText:W,isConfirm:!0,
isInfo:!0});var Ea=new m.default;B.default.createConfirmationDialog({strings:{title:ba,description:oa},autoCloseOnOk:!0,renderHtmlDescription:!0,onOk:function(){Ea.resolve("onOk")},onCancel:function(){Ea.resolve("onCancel")}});return Ea};qa.prototype._closeInviteMembers=function(){this.hideFormError();this._clearSelectedGroups()};qa.prototype._initConfiguration=function(){var W=this;this._isPortal=za.default.isPortal();this._isAdmin=this.user.isOrgAdmin;this._creditsEnabled=z.default.creditBudgetingEnabled&&
("enabled"===this.portal.creditAssignments||"validated"===this.portal.creditAssignments);this._canManageCredits=this._isAdmin&&this._creditsEnabled;this._canUpdateMembers=this._isAdmin||this.user.userRole.canUpdateUsers();this.canAssignGroups=!this.portal.isPortal||this._isAdmin||this.user.userRole.canAssignUsersToOrgGroups();var ba=new m.default,oa=za.default.getSecureUrl(z.default.restBaseUrl),wa="".concat(za.default.getPortalAdminBaseUrl(),"/security/config"),Ea=za.default.formatPortalOrgUrl(za.default.getPortalAdminBaseUrl(),
"/license",this.portal.id);oa={passwordPolicy:za.default.request({url:"".concat(oa,"portals/self/securityPolicy/passwordPolicy")}),idp:za.default.request({url:"".concat(oa,"portals/self/idp")}),oidc:za.default.request({url:"".concat(oa,"portals/self/oidc")}),federationIdp:za.default.request({url:"".concat(oa,"portals/self/idp/federation")}),socialProviders:za.default.request({url:"".concat(oa,"portals/self/socialProviders")}),securityConfig:this._isPortal?za.default.request({url:wa},{useProxy:z.default.isDebug}):
null,licenseInfo:this._isPortal?za.default.request({url:Ea},{useProxy:z.default.isDebug}):null,levelCounts:this._isPortal?null:za.default.request({url:"".concat(oa,"portals/self/users/counts?type\x3dlevel")}),userCount:za.default.request({url:"".concat(oa,"portals/self/users?start\x3d1\x26num\x3d1")}),pendingCount:this._isPortal?null:za.default.request({url:"".concat(oa,"portals/self/invitations?start\x3d1\x26num\x3d1\x26type\x3demail")}).then(function(Ga){return Ga},function(){return{total:0,invitations:0}}),
licenseTypes:this._licensesAPI.getLicenseTypes(),languages:va.default.getSupportedLanguages(),userDefaults:za.default.request({url:"".concat(oa,"portals/self/userDefaultSettings")})};(0,k.default)(oa).then(function(Ga){var Ja,ya,Ha,Ia,Ka,Ma,Na,La,Pa,Oa,Qa;Ga.userDefaults&&(W._userDefaults=Ga.userDefaults);W._passwordPolicy=Ga&&Ga.passwordPolicy&&!Ga.passwordPolicy.code?Ga.passwordPolicy:null;W._passwordPolicy&&(W._userFields.filter(function(Ua){return"password"===Ua.name})[0].validators=[{error:function(Ua){Ua=
za.default.meetsPasswordPolicyStrength(W._passwordPolicy,Ua);var Va;Ua.minLength||(Va=d.default.substitute(W.i18n.organizationInvite.step2Create.invalid.passwordLength,{num:W._passwordPolicy.minLength}));Ua.minLetter||(Va=d.default.substitute(W.i18n.organizationInvite.step2Create.invalid.passwordLetter,{num:W._passwordPolicy.minLetter}));Ua.minUpper||(Va=d.default.substitute(W.i18n.organizationInvite.step2Create.invalid.passwordUpper,{num:W._passwordPolicy.minUpper}));Ua.minLower||(Va=d.default.substitute(W.i18n.organizationInvite.step2Create.invalid.passwordLower,
{num:W._passwordPolicy.minLower}));Ua.minDigit||(Va=d.default.substitute(W.i18n.organizationInvite.step2Create.invalid.passwordDigit,{num:W._passwordPolicy.minDigit}));Ua.minOther||(Va=d.default.substitute(W.i18n.organizationInvite.step2Create.invalid.passwordOther,{num:W._passwordPolicy.minOther}));return Va},isValid:function(Ua){return za.default.meetsPasswordPolicyStrength(W._passwordPolicy,Ua).meetsRequirements()}}]);Ga.licenseTypes.userLicenseTypes=Ga.licenseTypes.userLicenseTypes.filter(function(Ua){return 0!==
Ua.maxUsers});W._licenseTypesResult=Ga.licenseTypes;Ga.languages&&(W._languages=Ga.languages,W._initLanguageSelect());W._currentIDP=(null===(Ja=null===Ga||void 0===Ga?void 0:Ga.idp)||void 0===Ja?0:Ja.id)?Ga.idp:(null===(ya=null===Ga||void 0===Ga?void 0:Ga.federationIdp)||void 0===ya?0:ya.id)?Ga.federationIdp:null;W.hasSAML=(null===(Ha=W._currentIDP)||void 0===Ha?void 0:Ha.id)&&W.portal.canSignInIDP;W._currentOIDC=null===(Ka=null===(Ia=null===Ga||void 0===Ga?void 0:Ga.oidc)||void 0===Ia?void 0:Ia.oidcProviders)||
void 0===Ka?void 0:Ka[0];W.hasOIDC=(null===(Ma=W._currentOIDC)||void 0===Ma?void 0:Ma.id)&&W.portal.canSignInOIDC;W._currentSocialProviders=(null===(Na=null===Ga||void 0===Ga?void 0:Ga.socialProviders)||void 0===Na?0:Na.config)?Ga.socialProviders.config:null;W._userCount=null===(La=null===Ga||void 0===Ga?void 0:Ga.userCount)||void 0===La?void 0:La.total;!W._isPortal&&(null===(Pa=null===Ga||void 0===Ga?void 0:Ga.pendingCount)||void 0===Pa?0:Pa.total)&&(W._userCount+=Ga.pendingCount.total);if(W._isPortal&&
Ga.licenseInfo&&Ga.licenseTypes){W._portalLicenseInfo=Ga.licenseInfo;W._userCount=W._portalLicenseInfo.currentRegisteredMembers||W._userCount;var Ra=n.default.clone(Ga.licenseTypes.userLicenseTypes);W._maxUsersPerLevel={};W._currentUsersPerLevel={};Object.keys(Ra).forEach(function(Ua){Ua=Ra[Ua];W._currentUsersPerLevel[Ua.id]=Ua.assigned;W._maxUsersPerLevel[Ua.id]=Ua.maxUsers});W._userLimitReached=-1<W._portalLicenseInfo.maximumRegisteredMembers&&W._portalLicenseInfo.currentRegisteredMembers>=W._portalLicenseInfo.maximumRegisteredMembers}else if(!W._isPortal&&
Ga.licenseTypes){var Sa=n.default.clone(Ga.licenseTypes.userLicenseTypes);W._maxUsersPerLevel={};W._currentUsersPerLevel={};Object.keys(Sa).forEach(function(Ua){Ua=Sa[Ua];W._currentUsersPerLevel[Ua.id]=Ua.assigned;W._maxUsersPerLevel[Ua.id]=Ua.maxUsers});W._userLimitReached=-1<z.default.self.subscriptionInfo.maxUsers&&W._userCount>=z.default.self.subscriptionInfo.maxUsers}if(W._isPortal&&(null===Ga||void 0===Ga?0:Ga.securityConfig)){Ga=Ga.securityConfig;Ga.defaultRoleForUser&&(W._portalDefaultRole=
Ga.defaultRoleForUser.replace("account_","org_"));Ga.defaultLevelForUser&&(W._portalDefaultLevel=Ga.defaultLevelForUser);Ga.defaultUserTypeIdForUser&&(W._portalDefaultUserTypeId=Ga.defaultUserTypeIdForUser);Ga.defaultIDPUsernameSuffix&&(W._samlSuffix=Ga.defaultIDPUsernameSuffix);if(null===(Oa=Ga.groupStoreConfig)||void 0===Oa?0:Oa.type)Oa=Ga.groupStoreConfig.type.toLowerCase(),"builtin"!==Oa&&"saml"!==Oa&&(W._isWindowsGroupStore="windows"===Oa,W._supportsEnterpriseGroups=!0);if(null===(Qa=Ga.userStoreConfig)||
void 0===Qa?0:Qa.type)Oa=Ga.userStoreConfig.type.toLowerCase(),"windows"===Oa&&(W._supportsWindows=!0),"ldap"===Oa&&(W._supportsLDAP=!0)}ba.resolve()});return ba};qa.prototype._isDuplicateEmail=function(W,ba){var oa=r.default.isDefined(ba)?this._newMembers.filter(function(wa,Ea){return Ea!==ba}):this._newMembers;return"email"===this._memberKeyField&&!!oa.filter(function(wa){return wa.email.toLowerCase()===W.toLowerCase()}).shift()};qa.prototype._isDuplicateUsername=function(W,ba){var oa=r.default.isDefined(ba)?
this._newMembers.filter(function(wa,Ea){return Ea!==ba}):this._newMembers;return"username"===this._memberKeyField&&!!oa.filter(function(wa){return wa.username.toLowerCase()===W.toLowerCase()}).shift()};qa.prototype._isDuplicateIDPUsername=function(W,ba){W=r.default.isDefined(ba)?this._newMembers.filter(function(oa,wa){return wa!==ba}):this._newMembers;return"idpUsername"===this._memberKeyField&&!!W.filter(function(oa){return oa.idpUsername.toLowerCase()===oa.idpUsername.toLowerCase()}).shift()};qa.prototype._usernameAlreadyUsed=
function(W,ba){return-1<ba.indexOf(W)};qa.prototype._initStartPageSelect=function(){this._pages=[{page:"index.html",name:l.default.siteHeader.simpleHome},{page:"gallery.html",name:l.default.siteHeader.gallery},{page:"webmap/viewer.html",name:l.default.siteHeader.map},{page:"webscene/viewer.html",name:l.default.siteHeader.scene}];var W=this.user.userRole;(null===W||void 0===W?0:W.canCreateGroup())&&this._pages.push({page:"groups.html",name:l.default.siteHeader.groups});(null===W||void 0===W?0:W.canCreateItem())&&
this._pages.push({page:"content.html",name:l.default.siteHeader.myContent});(null===W||void 0===W?0:W.canViewOrgUsers())&&this._pages.push({page:"organization.html",name:l.default.siteHeader.myAccount});W=new v.default({idProperty:"page",label:"name",data:this._pages});this._startPageSelect=new F.default({type:"select",store:W,searchAttr:"name",value:"index.html"});e.default.place(this._startPageSelect.domNode,this.domNode.querySelector(".js-start-page-select"))};qa.prototype._initLanguageSelect=
function(){var W=this,ba=this.portal.culture?ka.default.getRootLocale(this.portal.culture):"en",oa;this._languages.forEach(function(Ga){var Ja;Ga.displayName=Aa.default.htmlDecode("".concat(Ga.language).concat(Ga.localizedName?" - ".concat(Ga.localizedName):"","\x26lrm;"));if(Ga.culture===ba||Ga.culture===W.portal.culture)oa=Ga.displayName;(null===(Ja=Ga.cultureFormats)||void 0===Ja?0:Ja.length)&&Ga.cultureFormats.forEach(function(ya){ya.displayName=Aa.default.htmlDecode("".concat(ya.name).concat(ya.localizedName?
" - ".concat(ya.localizedName):"","\x26lrm;"))})});var wa=new v.default({idProperty:"culture",label:"displayName",data:this._languages}),Ea=new v.default({idProperty:"format",label:"displayName",data:[]});this._languageSelect=new F.default({type:"select",store:wa,searchAttr:"displayName"});this._languageFormatSelect=new F.default({type:"select",store:Ea,searchAttr:"displayName"});e.default.place(this._languageSelect.domNode,this.domNode.querySelector(".js-language-select"));e.default.place(this._languageFormatSelect.domNode,
this.domNode.querySelector(".js-language-format-select"));this.own((0,u.default)(this._languageSelect,"change",this._onLanguageChange.bind(this)));oa&&this._languageSelect.set("displayedValue",oa)};qa.prototype._onLanguageChange=function(){var W=this._languageSelect.get("store").query({displayName:this._languageSelect.get("displayedValue")}).shift();W&&this._initLanguageFormat(W.culture,W.cultureFormats)};qa.prototype._initLanguageFormat=function(W,ba){var oa,wa,Ea;W&&(null===ba||void 0===ba?0:ba.length)?
(W=null!==(Ea=null!==(wa=null===(oa=this.portal.portalUser)||void 0===oa?void 0:oa.cultureFormat)&&void 0!==wa?wa:this.portal.cultureFormat)&&void 0!==Ea?Ea:"",oa=ka.default.getSelectedFormat(W,null!==ba&&void 0!==ba?ba:[]),wa=new v.default({idProperty:"format",label:"displayName",data:ba}),this._languageFormatSelect.set("store",wa),this._languageFormatSelect.set("searchAttr","displayName"),oa?this._languageFormatSelect.set("displayedValue",oa.displayName):this._languageFormatSelect.set("displayedValue",
ba[0].displayName),E.default.showNode(this._languageFormatContainer)):E.default.hideNode(this._languageFormatContainer)};qa.prototype._getSelectedEnterpriseUserLicenseTypeLevel=function(){var W=this;return this._licenseTypesResult.userLicenseTypes.filter(function(ba){return ba.id===W._enterpriseGroupLicenseTypeSelect.value})[0].level};qa.prototype._initUI=function(){var W=this;this._isTrialOrg=!this._isPortal&&H.default.includes(this.trialOrgTypes,z.default.self.subscriptionInfo.type);this._progressError=
this.domNode.querySelector(".js-progress-error");this._overlayActionBar.appendChild(this._progressError);this._fileDragDropText=this.domNode.querySelector(".js-drag-drop-text");this._fileDragDropText.innerHTML=d.default.substitute(this.i18n.myOrganization.inviteMembers.dragDrop,{linkStart:"\x3cbutton class\x3d'btn-link font-size-2 js-browse'\x3e",linkEnd:"\x3c/button\x3e"});this._fileBrowse=this.domNode.querySelector(".js-browse");this._chooseDifferentFile=this.domNode.querySelector(".js-choose-different");
this._addOptions=this.domNode.querySelector(".js-add-options");this._addMemberOptionBtn=this._addOptions.querySelector(".js-add-member");this._addMembersOptionBtn=this._addOptions.querySelector(".js-add-members");this._newMemberFormContainer=this.domNode.querySelector(".js-new-member-form-container");this._memberList=this.domNode.querySelector(".js-member-list");this._memberListContent=this.domNode.querySelector(".js-member-list-content");this._membersNumbers=this.domNode.querySelector(".js-members-numbers");
this._selectAll=this.domNode.querySelector(".js-select-all");this._selectAllCheckbox=this.domNode.querySelector(".js-select-all-checkbox");this._selectedActions=this.domNode.querySelector(".js-selected-actions");this._selectedNumber=this.domNode.querySelector(".js-selected-number");this._filePanel=this.domNode.querySelector(".js-members-from-file");this.processMembersContainer=this.domNode.querySelector(".js-process-members");this._fileInput=this.domNode.querySelector(".js-file-input");this._fileName=
this.domNode.querySelector(".js-file-name");this._fileDesc=this.domNode.querySelector(".js-file-desc");this._fileInfo=this.domNode.querySelector(".js-file-info");this._fileAddBtn=this.domNode.querySelector(".js-file-add-btn");this._fileMembersNum=this.domNode.querySelector(".js-file-members-num");this._enterpriseGroupPanel=this.domNode.querySelector(".js-members-from-enterprise-group");this._enterpriseGroupInput=this.domNode.querySelector(".js-enterprise-group-input");this._enterpriseGroupError=this.domNode.querySelector(".js-enterprise-group-error");
this._enterpriseGroupLicenseTypes=this.domNode.querySelector(".js-enterprise-group-license-types");this._enterpriseGroupRoleContainer=this.domNode.querySelector(".js-enterprise-group-role-container");this._enterpriseGroupRoleError=this.domNode.querySelector(".js-enterprise-group-role-error");this._enterpriseGroupLoader=this.domNode.querySelector(".js-enterprise-group-loader");this._enterpriseGroupAddBtn=this.domNode.querySelector(".js-enterprise-group-add-btn");this._enterpriseGroupForm=this.domNode.querySelector(".js-enterprise-group-form");
this._clearSelectionBtn=this.domNode.querySelector(".js-clear-selection");this._searchEnterpriseGroupBtn=this.domNode.querySelector(".js-enterprise-search-btn");this._inviteMethods=(0,t.default)("input[name\x3dinviteMethod]",this.domNode);this._emailMessageTextarea=this.domNode.querySelector(".js-email-message");this._emailSettings=this.domNode.querySelector(".js-email-settings");this._languageFormatContainer=this.domNode.querySelector(".js-language-format-container");this._enableEsriCheckbox=this.domNode.querySelector(".js-enable-esri-checkbox");
this.esriAccessToggle=new na.default({labelClasses:"trailer-0"},this.domNode.querySelector(".js-esri-access-toggle"));this._licensesTabContent=this.domNode.querySelector(".js-licenses-tab-content");this._overlayBody=this.domNode.querySelector(".js-overlay-body");this._fileBox=this.domNode.querySelector(".js-file-drop");this._emailValidateContainer=this.domNode.querySelector(".js-email-validate-container");this._validateEmail=this.domNode.querySelector(".js-validate-email");this._profileVisSelect=
this.domNode.querySelector(".js-visibility-select");this._mobileCreditsProp=this.domNode.querySelector(".js-mobile-credits-prop");this._noLimitRadio=this.domNode.querySelector(".js-credits-no-limit-radio");this._creditsAllocRadio=this.domNode.querySelector(".js-credits-alloc-radio");this._creditsAllocTextbox=this.domNode.querySelector(".js-credits-alloc-textbox");this._mobileEsriAccessToggle=new na.default(void 0,this.domNode.querySelector(".js-mobile-esri-access"));this._mobileEsriAccessToggle.domNode.classList.add("invite-members__mobile-access-toggle");
this._mobileLicensesContainer=this.domNode.querySelector(".js-mobile-prop-licenses-container");this._mobileGroupsContainer=this.domNode.querySelector(".js-mobile-prop-groups-container");this._mobileMainTitle=this.domNode.querySelector(".js-mobile-main-title");this._mobileSubTitle=this.domNode.querySelector(".js-mobile-sub-title");this.manageLicensesBtn=this.domNode.querySelector(".js-manage-licenses-btn");this.manageGroupsBtn=this.domNode.querySelector(".js-manage-groups-btn");this.manageCategoriesBtn=
this.domNode.querySelector(".js-manage-categories-btn");this.licensesCard=this.domNode.querySelector(".js-licenses-prop-card");this.groupsCard=this.domNode.querySelector(".js-groups-prop-card");this.categoriesCard=this.domNode.querySelector(".js-categories-prop-card");this.checkMemberCategories();this._rolesAPI=new Fa.default;this._searchInput=new Q.default({placeholder:l.default.myOrganization.inviteMembers.searchMembers,topic:this._topicPrefix},this.domNode.querySelector(".js-search-input"));this._pagination=
new T.default({start:this._page.start,num:this._page.num,topic:this._topicPrefix},this.domNode.querySelector(".js-pagination"));E.default.hideNode(this._pagination.domNode);for(var ba=1;4>=ba;ba++)this["_step"+ba]=this.domNode.querySelector(".js-step-"+ba),this["_stepHeader"+ba]=this.domNode.querySelector(".js-step-header-"+ba),this["_stepBar"+ba]=this.domNode.querySelector(".js-step-"+ba+"-bar");this._setPrimaryBtnText(l.default.organizationInvite.step1Create.nextBtn);this._canUpdateMembers||this.domNode.classList.add("invite-members__cannot-update-members");
this._getRoles().then(function(){var oa,wa,Ea,Ga;W._enterpriseGroupLicenseTypeSelect=new ea.default({userLicenseTypes:W._licenseTypesResult.userLicenseTypes,portal:W.portal,roles:W.roles,apps:W._apps,comboboxId:"enterprise-group-license-type-combobox",listboxId:"enterprise-group-license-type-listbox"},W._enterpriseGroupLicenseTypes);W.own((0,u.default)(W._enterpriseGroupLicenseTypeSelect,"change",function(){var ya=W._getSelectedEnterpriseUserLicenseTypeLevel(),Ha=ma.default.filterRoles(W.roles,W._viewerRole,
ya===W.LICENSE_LEVELS.TWO,ya);Ha=new O.default({idProperty:"role",data:Ha});var Ia=0<Ha.query({role:W._enterpriseGroupRoleSelect.value}).length;W._enterpriseGroupRoleSelect.set("store",Ha);Ia||(ya===W.LICENSE_LEVELS.TWO?W.portal.isPortal&&W._portalDefaultRole?W._enterpriseGroupRoleSelect.set("value",W._portalDefaultRole):W._enterpriseGroupRoleSelect.set("displayedValue",W.i18n.myOrganization.formatters.roleUser):W._enterpriseGroupRoleSelect.set("displayedValue",W.i18n.myOrganization.formatters.roleViewer))}),
B.default.registerKeystrokeHandler(W._enterpriseGroupInput,function(ya){ya.keyCode===q.default.ENTER&&W._onEnterpriseGroupAddClick()}));var Ja=null!==(wa=null===(oa=W._userDefaults)||void 0===oa?void 0:oa.role)&&void 0!==wa?wa:void 0;oa=null!==(Ga=null===(Ea=W._userDefaults)||void 0===Ea?void 0:Ea.userLicenseType)&&void 0!==Ga?Ga:void 0;W._newMemberForm=new ia.default({isEdit:!1,member:{},roles:W.roles,filteredRoles:W._getFilteredRoles(),viewerRole:W.portal.viewerRole,fields:W._getFormFields(),userLicenseTypes:W._licenseTypesResult.userLicenseTypes,
inviteMethod:W._selectedMethod,supportsLDAP:W._supportsLDAP,supportsWindows:W._supportsWindows,samlSuffix:W._samlSuffix,userType:W._userType,portal:W.portal,apps:W._apps,defaultUserTypeId:oa,defaultRole:Ja,currentIDP:W._currentIDP,currentOIDC:W._currentOIDC},e.default.create("div",{},W._newMemberFormContainer));W.own((0,u.default)(W._newMemberForm,"cancel",W._onFormCancelClick.bind(W)),(0,u.default)(W._newMemberForm,"add",W._onAddClick.bind(W)),(0,u.default)(W._newMemberForm,"add-another",W._onAddAnotherClick.bind(W)));
W._initEnterpriseGroupRoleSelect();W.getLicenses()});this._hideLoader();this._getAllGroups();this._initGroupBrowser();this._initSelectableOptions();this._goToStep(1);this._initEmailMessage();this._initCreditsAlocation();this._initStartPageSelect();this._addListeners();h.default.dropdown()};qa.prototype.getLicenses=function(){var W=this,ba=new m.default;this.user.userRole.canManageLicenses()?this._licensesAPI.getLicensedEntitlements().then(function(oa){W._licensesAPI.getAppBundles().then(function(wa){oa=
ma.default.convertAppBundletoEntitlement(wa.appBundles).concat(oa);ba.resolve(oa)})}):ba.resolve([]);ba.then(function(oa){W._entitlements=oa;W._apps=ma.default.filterOutProExtensions(oa);W._apps.forEach(function(wa){wa.isPro&&(wa.allowedLevels=[W.LICENSE_LEVELS.TWO])});g.default.publish("invite-apps/loaded",W._apps)})};qa.prototype._initEnterpriseGroupRoleSelect=function(){var W=new O.default({idProperty:"role",data:ma.default.filterRoles(this._getFilteredRoles(),this.portal.viewerRole,!0)});this._enterpriseGroupRoleSelect=
new F.default({displayedValue:l.default.myOrganization.formatters.roleUser,searchAttr:"name",store:W,fetchProperties:{sort:[{attribute:"name",descending:!1}]},title:l.default.myOrganization.formatters.roleUser,onChange:this._onEnterpriseGroupRoleChange.bind(this)},this._enterpriseGroupRoleContainer);this._enterpriseGroupRoleSelect.domNode.appendChild(this._enterpriseGroupRoleError)};qa.prototype._initGroupBrowser=function(){this.groupBrowser=new Ca.GroupBrowserWrapper(document.getElementById("invite-members-group-browser-container"),
{apiVersion:3,portal:this.portal,portalUser:this.user,request:w.default,initialState:f.__assign(f.__assign({},Ca.initialState),{config:f.__assign(f.__assign({},Ca.initialState.config),{baseQ:"orgid:".concat(this.portal.id," ").concat(this.canAssignGroups?"":"AND owner:".concat(this.user.username),' AND (-owner:"esri_nav" -owner:"esri_boundaries" -owner:"esri_demographics" -owner:"esri_livingatlas") AND -provider:enterprise')})}),onChange:this._handleGroupChange.bind(this)})};qa.prototype._getAllGroups=
function(){var W=this;B.default.fetchAllResources("".concat(this.portal.url,"community/groups"),{q:"orgid:".concat(this.portal.id," AND -provider:enterprise")}).then(function(ba){W._orgGroups=ba})};qa.prototype._initSelectableOptions=function(){this._isPortal?(this.domNode.querySelector(".js-add-built-in").checked=!0,this._selectedMethod="add-built-in",(this.hasSAML||this.hasOIDC)&&a.default.remove(this.domNode.querySelector(".js-add-saml-option-container"),"disabled"),(this._supportsLDAP||this._supportsWindows)&&
a.default.remove(this.domNode.querySelector(".js-add-enterprise-option-container"),"disabled"),!this._supportsEnterpriseGroups||"ldap"!==this._userType&&"windows"!==this._userType||E.default.showNode(this._enterpriseGroupPanel)):this.hasSAML||this.hasOIDC?(E.default.showNodes([this.domNode.querySelector(".js-add-enterprise-id-option-container"),this.domNode.querySelector(".js-invite-enterprise-option-container")]),this.domNode.querySelector(".js-invite-enterprise-option").checked=!0,this.domNode.classList.add("invite-members__is-invite-method"),
this._selectedMethod="invite-enterprise",this._memberKeyField="email",(0,t.default)(".invite-members__invite-method-item",this.domNode).removeClass("invite-members__invite-method-item--selected"),(0,t.default)(".js-invite-enterprise-option-container",this.domNode).addClass("invite-members__invite-method-item--selected")):E.default.hideNodes([this.domNode.querySelector(".js-add-enterprise-id-option-container"),this.domNode.querySelector(".js-invite-enterprise-option-container")]);this._updateRequiredFields()};
qa.prototype._selectCreditsOption=function(){var W=this._noLimitRadio.parentElement.parentElement,ba=this._creditsAllocRadio.parentElement.parentElement;this.domNode.querySelector(".invite-member__credits-option--checked")&&this.domNode.querySelector(".invite-member__credits-option--checked").classList.remove("invite-member__credits-option--checked");-1===this._creditsToAssign?(this._noLimitRadio.checked=!0,W.classList.add("invite-member__credits-option--checked")):(this._creditsAllocRadio.checked=
!0,this._creditsNumberTextBox.setValue(this._creditsToAssign.toString()),ba.classList.add("invite-member__credits-option--checked"))};qa.prototype._initCreditsAlocation=function(){var W=this,ba=this.domNode.querySelector(".js-credits-error"),oa=this._noLimitRadio.parentElement.parentElement,wa=this._creditsAllocRadio.parentElement.parentElement;!this._creditsToAssign&&r.default.isDefined(this.portal.defaultUserCreditAssignment)?this._creditsToAssign=this.portal.defaultUserCreditAssignment:this._creditsToAssign=
-1;this._creditsNumberTextBox=new A.default({trim:!0},this._creditsAllocTextbox);this._creditsNumberTextBox.displayMessage=function(){};this._selectCreditsOption();this.domNode.querySelector(".js-org-credits").innerHTML=K.default.format(this.portal.availableCredits);za.default.request({url:"".concat(z.default.restBaseUrl,"portals/self/users?start\x3d1\x26num\x3d0")}).then(function(Ea){W.domNode.querySelector(".js-member-count").innerHTML=K.default.format(Ea.total)});this.own((0,u.default)(this._creditsNumberTextBox,
"change",function(){W._creditsAllocRadio.checked&&!W._creditsErrorMessage&&(W._creditsToAssign=W._creditsNumberTextBox.get("value"))}),(0,u.default)(this._creditsNumberTextBox,"keyup",function(){var Ea=W._creditsNumberTextBox.get("value");W._creditsAllocRadio.checked=!0;W.domNode.querySelector(".invite-member__credits-option--checked").classList.remove("invite-member__credits-option--checked");wa.classList.add("invite-member__credits-option--checked");if(W._creditsNumberTextBox.isValid(!1))Ea&&Ea>
W.portal.availableCredits&&(Ga=W.i18n.batchAssignCreditsDlg.creditLimitOrg);else var Ga=W.i18n.batchAssignCreditsDlg.creditsNumberRequired;(W._creditsErrorMessage=Ga)?(ba.textContent=Ga,W._creditsNumberTextBox.domNode.classList.add("input-error"),ba.classList.add("is-active")):(W._creditsNumberTextBox.domNode.classList.remove("input-error"),ba.classList.remove("is-active"))}),(0,t.default)("input[name\x3dcreditsAlloc]",this.domNode).on("change",function(){W.domNode.querySelector(".invite-member__credits-option--checked").classList.remove("invite-member__credits-option--checked");
W._creditsAllocRadio.checked?(wa.classList.add("invite-member__credits-option--checked"),W._creditsToAssign=W._creditsNumberTextBox.get("value")):(oa.classList.add("invite-member__credits-option--checked"),W._creditsToAssign=-1)}))};qa.prototype._initEmailMessage=function(){var W,ba,oa,wa=za.default.getUser(),Ea=(this.hasSAML||this.hasOIDC)&&"invite-enterprise"===this._selectedMethod,Ga=this.hasSAML&&this.hasOIDC,Ja="";Ea&&(Ja=Ga?d.default.substitute(l.default.myOrganization.inviteMembers.emailMessageBodyIDPMultipleOnline,
{idpName:this._currentIDP.name,oidcName:this._currentOIDC.name}):d.default.substitute(l.default.myOrganization.inviteMembers.emailMessageBodyIDPOnline,{idpName:(null===(W=this._currentIDP)||void 0===W?void 0:W.name)||(null===(ba=this._currentOIDC)||void 0===ba?void 0:ba.name)}));W=d.default.substitute(this._isPortal?l.default.myOrganization.inviteMembers.emailMessageBodyPortal:l.default.myOrganization.inviteMembers.emailMessageBodyOnline,{user:U.default.createFullName(wa)||wa.username||"",organization:null===
(oa=z.default.self)||void 0===oa?void 0:oa.name})+(Ea?" "+Ja:"");this._emailMessageTextarea.innerHTML=W};qa.prototype._getRoles=function(){var W=this,ba=new m.default;this.roles?ba.resolve(this.roles):this._rolesAPI.getAllRoles(!0).then(function(oa){W.portal.viewerRole=W._viewerRole=oa.filter(function(wa){return wa.id===W.SYSTEM_ROLES.VIEWER})[0];W.portal.viewerEditRole=W._viewerEditRole=oa.filter(function(wa){return wa.id===W.SYSTEM_ROLES.DATA_EDITOR})[0];W.portal.facilitatorRole=oa.filter(function(wa){return wa.id===
W.SYSTEM_ROLES.FACILITATOR});oa.forEach(function(wa){wa.id===W.SYSTEM_ROLES.VIEWER&&(wa.name=l.default.myOrganization.formatters.roleViewer);wa.id===W.SYSTEM_ROLES.DATA_EDITOR&&(wa.name=l.default.myOrganization.formatters.roleViewerEdit);wa.id===W.SYSTEM_ROLES.FACILITATOR&&(wa.name=l.default.myOrganization.formatters.roleFacilitator);wa.compatibleLevels=[W.LICENSE_LEVELS.TWO];W._viewerEditRole&&!Fa.default.exceedsRolePrivileges(W._viewerEditRole.privileges,wa.privileges,!0)&&wa.compatibleLevels.push(W.LICENSE_LEVELS.ONE_PLUS_EDIT);
Fa.default.exceedsRolePrivileges(W._viewerRole.privileges,wa.privileges,!0)||wa.compatibleLevels.push(W.LICENSE_LEVELS.ONE)});oa=f.__spreadArray(f.__spreadArray([],oa,!0),[{id:"org_publisher",name:l.default.myOrganization.formatters.rolePublisher,compatibleLevels:[W.LICENSE_LEVELS.TWO]},{id:"org_user",name:l.default.myOrganization.formatters.roleUser,compatibleLevels:[W.LICENSE_LEVELS.TWO]}],!1);W._isPortal&&W._isAdmin&&oa.push({id:"org_admin",name:l.default.myOrganization.formatters.roleAdmin,compatibleLevels:[W.LICENSE_LEVELS.TWO]});
oa.sort(function(wa,Ea){wa=wa.name.toLowerCase();Ea=Ea.name.toLowerCase();return wa>Ea?1:wa<Ea?-1:0});W.roles=oa.map(function(wa){return{id:wa.id,name:wa.name,privileges:wa.privileges,compatibleLevels:wa.compatibleLevels}});ba.resolve(W.roles)});return ba};qa.prototype._drillOut=function(){var W=this;this.domNode.classList.remove("invite-members__drill-in");this.domNode.classList.add("invite-members__mobile-".concat(this._currentDrillIn,"-slide-out"));setTimeout(function(){E.default.removeClasses(W.domNode,
["invite-members__mobile-".concat(W._currentDrillIn,"-details"),"invite-members__mobile-".concat(W._currentDrillIn,"-slide-out"),"invite-members__mobile-".concat(W._currentDrillIn,"-slide-in")]);W._overlayContentWrapper.scrollTop=0},500)};qa.prototype._addListeners=function(){var W=this;this.own((0,t.default)(".js-stepper-next-btn",this.domNode).on("click",this.handlePrimary.bind(this)),(0,G.default)(this.domNode.querySelector(".js-mobile-prop-credits-row"),this._drillIn.bind(this,"credits")),(0,G.default)(this.domNode.querySelector(".js-mobile-prop-licenses-row"),
this._drillIn.bind(this,"licenses")),(0,G.default)(this.domNode.querySelector(".js-mobile-prop-groups-row"),this._drillIn.bind(this,"groups")),(0,G.default)(this.domNode.querySelector(".js-drill-in-save"),this._saveDrill.bind(this)),(0,G.default)(this.domNode.querySelector(".js-drill-in-cancel"),this._cancelDrill.bind(this)),(0,t.default)(".js-add-member",this.domNode).on("click",this._onNewMemberClick.bind(this)),(0,t.default)(".js-add-members",this.domNode).on("click",this._onNewMembersFromFileClick.bind(this)),
(0,t.default)(".js-add-members-enterprise-group",this.domNode).on("click",this._onNewMembersFromEnterpriseGroupClick.bind(this)),(0,t.default)(".js-remove-btn",this.domNode).on("click",this._removeSelectedMembers.bind(this)),(0,t.default)(".js-prop-tab",this.domNode).on("click",this._onPropTabClick.bind(this)),(0,t.default)(".js-file-drop",this.domNode).on("drop",this._onFileDrop.bind(this)),(0,t.default)(".js-file-drop",this.domNode).on("dragover",this._onDragOver.bind(this)),(0,t.default)(".js-file-cancel").on("click",
this._onFileCancelClick.bind(this)),(0,t.default)(".js-enterprise-group-add-btn").on("click",this._onEnterpriseGroupAddClick.bind(this)),(0,t.default)(".js-enterprise-group-cancel").on("click",this._onEnterpriseGroupCancelClick.bind(this)),(0,u.default)(this._searchEnterpriseGroupBtn,"click",this._onSearchEnterpriseGroupClick.bind(this)),(0,t.default)(".js-clear-selection").on("click",this._clearSelection.bind(this)),(0,t.default)(".js-step-link").on("click",this._onStepClick.bind(this)),(0,t.default)(".js-stepper-title").on("click",
this._onStepClick.bind(this)),(0,u.default)(this._selectAllCheckbox,"change",this._selectAllChange.bind(this)),(0,u.default)(this._fileInput,"change",this._onFileChange.bind(this)),(0,u.default)(this._mobileEsriAccessToggle,"change",function(){W._enableEsriCheckbox.checked=W._mobileEsriAccessToggle.checked();W.esriAccessToggle.setChecked(W._mobileEsriAccessToggle.checked(),!0)}),(0,u.default)(this.esriAccessToggle,"change",function(){W._enableEsriCheckbox.checked=W.esriAccessToggle.checked();W._mobileEsriAccessToggle.setChecked(W.esriAccessToggle.checked(),
!0)}),(0,u.default)(this._selectedGroupsDropdown,"remove",this._onGroupRemoved.bind(this)),(0,u.default)(this.manageLicensesBtn,"click",this.handleManageLicensesClick.bind(this)),(0,u.default)(this.manageGroupsBtn,"click",this.handleManageGroupsClick.bind(this)),(0,u.default)(this.manageCategoriesBtn,"click",this.handleManageCategoriesClick.bind(this)),this._inviteMethods.on("change",this._onMethodSelect.bind(this)),g.default.subscribe("".concat(this._topicPrefix,"pagination/page"),this._paginationPage.bind(this)),
g.default.subscribe("".concat(this._topicPrefix,"search/update"),this._searchUpdate.bind(this)),g.default.subscribe("enterprise-group-selected",this._onEnterpriseGroupSelected.bind(this)),g.default.subscribe("group/remove",this._onGroupRemoved.bind(this)),g.default.subscribe("invite-form/error",this._onFormError.bind(this)),g.default.subscribe("invite-form/validated",this.hideFormError.bind(this)),g.default.subscribe("invite-members/scroll-top",function(){W._overlayContentWrapper.scrollTop=0}),g.default.subscribe("invite-members/user-type-role",
function(ba){W._updateMobileTitles(W.i18n.myOrganization.inviteMembers.userTypeAndRole,ba);W._overlayContentWrapper.scrollTop=0;W._inUserTypeRole=!0}),g.default.subscribe("invite-members/remove-member",this._confirmRemoveMember.bind(this)),g.default.subscribe("invite-licenses/save",this.handleLicensesOverlaySave.bind(this)),g.default.subscribe("invite-licenses/cancel",function(){W._licenseAssignments.setSelectedState(W._lastLicensesState)}),g.default.subscribe("invite-groups/save",this.handleGroupsOverlaySave.bind(this)),
g.default.subscribe("invite-summary-pagination/page",this.renderSummaryMembers.bind(this)));this._fileBrowse.addEventListener("click",this._onBrowseClick.bind(this));this._chooseDifferentFile.addEventListener("click",this._onBrowseClick.bind(this));this._fileAddBtn.addEventListener("click",this._onFileAddClick.bind(this))};qa.prototype.handleGroupsOverlaySave=function(W){this.groupBrowser.selectGroups(W);this._selectedGroups=W;this.renderGroupRows(W)};qa.prototype.handleLicensesOverlaySave=function(W){this._licenseAssignments.setSelectedState(W);
this.renderLicenseRows()};qa.prototype.renderGroupRows=function(W){var ba=this;this.groupRows&&this.groupRows.forEach(function(wa){return wa.destroy()});var oa=this.domNode.querySelector(".js-groups-rows-container");this.groupRows=W.map(function(wa){return new P.default({group:wa,portal:ba.portal,hideActions:!0})});E.default.appendChildren(this.groupRows.map(function(wa){return wa.domNode}),oa)};qa.prototype.renderCategoriesChips=function(W,ba){(0,c.render)((0,c.h)(ja.default,{selectedCategories:W}),
this.domNode.querySelector(ba))};qa.prototype.renderLicenseRows=function(){var W=this,ba=this._licenseAssignments.getSelectedState(),oa=ba.appBundles,wa=ba.apps,Ea=ba.data,Ga=ba.pro,Ja=ba.runtime;ba=ba.userTypeExtensions;var ya=Ga.filter(function(Ha){return Ha.isExtension});Ga=Ga.filter(function(Ha){return!Ha.isExtension});0===Ga.length&&0<ya.length&&ya[0]&&(Ga=[f.__assign(f.__assign({},ya[0]),{title:this.i18n.myOrganization.inviteMembers.arcgisProExtensions})]);oa=f.__spreadArray(f.__spreadArray(f.__spreadArray(f.__spreadArray(f.__spreadArray(f.__spreadArray([],
oa,!0),wa,!0),Ea,!0),Ga,!0),Ja,!0),ba,!0);this.licenseRows&&this.licenseRows.forEach(function(Ha){return Ha.destroy()});wa=this.domNode.querySelector(".js-licenses-rows-container");this.licenseRows=oa.map(function(Ha){return new N.default({app:Ha,portal:W.portal})});wa.innerHTML="";E.default.appendChildren(this.licenseRows.map(function(Ha){return Ha.domNode}),wa)};qa.prototype.handleManageLicensesClick=function(){var W=this;if(this._newMembers.some(function(oa){var wa;return null===(wa=oa.licenseType)||
void 0===wa?void 0:wa.supportsSignInOnlyFromUTApps}))C.default.showAlert("warning",this.i18n.myOrganization.inviteMembers.userTypeNoAddon);else{var ba=new R.default({entitlements:this._licenseAssignments.entitlements,portal:this.portal,members:this._newMembers,userLicenseTypes:this._licenseTypesResult.userLicenseTypes,topicPrefix:"invite",opener:this.manageLicensesBtn,appBundles:this._entitlements.filter(function(oa){return oa.isAppBundle})});ba.open();ba.startup().then(function(){W._lastLicensesState=
W._licenseAssignments.getSelectedState();ba.setSelectedState(W._lastLicensesState);-1===W._selectedMethod.indexOf("add")&&ba.setAppLimits(10,5)})}};qa.prototype.handleManageGroupsClick=function(){var W=this,ba=this._newMembers.map(function(oa){return f.__assign(f.__assign({},oa),{memberRole:W.roles.filter(function(wa){return wa.id===oa.role})[0]})});ba=new Y.default({title:l.default.myOrganization.inviteMembers.groups,portal:this.portal,groups:this._selectedGroups,saveTopic:"invite-groups/save",opener:this.manageGroupsBtn,
maxWidth:850,closeOnScrimClick:!1,members:ba});ba.domNode.classList.add("invite-members__groups-overlay");ba.open()};qa.prototype.handleManageCategoriesClick=function(){(0,c.render)((0,c.h)(aa.default,{title:this.i18n.myOrganization.inviteMembers.memberCategories.title,defaultCategories:this.selectedCategories,onSave:this.handleCategoriesSave,onClose:this.handleManageCategoriesClose}),this.domNode.querySelector(".js-categories-modal"))};qa.prototype._drillIn=function(W){var ba=this;E.default.addClasses(this.domNode,
["invite-members__drill-in","invite-members__mobile-"+W+"-details"]);setTimeout(function(){ba.domNode.classList.add("invite-members__mobile-"+W+"-slide-in")},100);this._currentDrillIn=W;this._updateMobileTitles(this.i18n.myOrganization.inviteMembers["groups"===W?"assignGroups":W],this.i18n.myOrganization.inviteMembers.setMemberProperties);"credits"===W?this._lastCreditsValue=this._creditsToAssign:"groups"===W?(this._lastSelectedGroups=this._selectedGroups,this.domNode.querySelector("#invite-members-group-browser-container").querySelector(".gb-search-area__input").focus()):
"licenses"===W&&(this._lastLicensesState=this._licenseAssignments.getSelectedState())};qa.prototype._saveDrill=function(){"add-form"===this._currentDrillIn?this._inUserTypeRole?(this._newMemberForm.saveUserTypeRole(),this._inUserTypeRole=!1):this._newMemberForm.add():"update-form"===this._currentDrillIn?this._currentMemberForm&&(this._inUserTypeRole?(this._currentMemberForm.saveUserTypeRole(),this._inUserTypeRole=!1):(this._currentMemberForm.update(),this._currentMemberForm=void 0)):("credits"===
this._currentDrillIn?this._mobileCreditsProp.textContent=-1===this._creditsToAssign?this.i18n.myOrganization.inviteMembers.noLimit:this._creditsToAssign:"licenses"===this._currentDrillIn?0===this._showSelectedLicenseIcons(this._mobileLicensesContainer).length&&(this._mobileLicensesContainer.textContent=this.i18n.myOrganization.inviteMembers.assignLicenses):"groups"===this._currentDrillIn&&(0===this._selectedGroups.length?this._mobileGroupsContainer.textContent=this.i18n.myOrganization.inviteMembers.assignGroups:
this._showSelectedGroupIcons(this._mobileGroupsContainer)),this._drillOut())};qa.prototype._cancelDrill=function(){var W=this;if("add-form"===this._currentDrillIn)this._inUserTypeRole?(this._newMemberForm.cancelUserTypeRole(),this._inUserTypeRole=!1):this._newMemberForm.cancel();else if("update-form"===this._currentDrillIn)this._currentMemberForm&&(this._inUserTypeRole?(this._currentMemberForm.cancelUserTypeRole(),this._inUserTypeRole=!1):(this._currentMemberForm.cancel(!0),this._currentMemberForm=
void 0));else if("user-type-role"===this._currentDrillIn)(this._currentMemberForm||this._newMemberForm).cancelUserTypeRole();else{if(r.default.isDefined(this._lastCreditsValue)&&"credits"===this._currentDrillIn)this._creditsToAssign=this._lastCreditsValue,this._selectCreditsOption();else if(r.default.isDefined(this._lastLicensesState)&&"licenses"===this._currentDrillIn)this._licenseAssignments.setSelectedState(this._lastLicensesState);else if(r.default.isDefined(this._lastSelectedGroups)&&"groups"===
this._currentDrillIn){this._selectedGroups=this._lastSelectedGroups;var ba=this.groupBrowser.getState().groups.selectedGroups,oa=[];this.groupBrowser.selectGroups(this._lastSelectedGroups);Object.keys(ba).forEach(function(wa){W._lastSelectedGroups.filter(function(Ea){return Ea.id===wa})[0]||oa.push(wa)});this.groupBrowser.deselectGroups(oa)}this._drillOut()}};qa.prototype._searchUpdate=function(W){this._searchTerm=W;this._renderMemberList();return!0};qa.prototype.generateErrorMessage=function(W,ba){return l.default.controlBar.invalidSyntax};
qa.prototype._paginationPage=function(W){this._page=f.__assign({},W);this._renderMemberList()};qa.prototype._clearSelection=function(){this._selectAllCheckbox.checked=!1;this._selectedMembers=[];this._filteredMembers.forEach(function(W){W.selected=!1});this._newMemberRows.forEach(function(W){W.deselect()});this._updateSelectionSection();this._selectAllCheckbox.checked||this._selectAllCheckbox.focus()};qa.prototype._selectAllChange=function(){var W=this;this._selectedMembers=[];this._selectAllCheckbox.checked?
this._newMemberRows.forEach(function(ba){ba.select();ba.member.selected=!0;W._selectedMembers.push(ba.member)}):this._newMemberRows.forEach(function(ba){ba.deselect();ba.member.selected=!1});this._updateSelectionSection();this._selectAllCheckbox.checked?this._clearSelectionBtn.focus():this._selectAllCheckbox.focus()};qa.prototype._removeSelectedMembers=function(){var W=this;this._selectedMembers.forEach(function(ba){for(var oa=0;oa<W._newMembers.length;oa++)if(ba===W._newMembers[oa]){W._newMembers.splice(oa,
1);break}});this._renderMemberList();this._selectedMembers=[];this._selectAllCheckbox.checked=!1;this._updateSelectionSection();this._updateStep2View()};qa.prototype._confirmRemoveMember=function(W){var ba=this;this._mobileError.show({title:this.i18n.myOrganization.inviteMembers.removeConfirm,description:this.i18n.myOrganization.inviteMembers.removeConfirmDesc,buttonText:this.i18n.myOrganization.inviteMembers.yes,cancelText:this.i18n.myOrganization.inviteMembers.no,isConfirm:!0}).then(function(oa){"onOk"===
oa&&ba._removeMember(W)})};qa.prototype._removeMember=function(W){for(var ba=0;ba<this._newMembers.length;ba++)if(W===this._newMembers[ba]){this._newMembers.splice(ba,1);break}this.domNode.classList.remove("invite-members__member-form");this._renderMemberList();this._updateStep2View()};qa.prototype._updateStep1View=function(){this._clearSelectedGroups();this._licenseAssignments&&(this._licenseAssignments.destroy(),this._licenseAssignments=void 0);this._primaryBtn.disabled=!1;this._selectedMembers=
[];E.default.hideNode(this._selectedActions);E.default.showNode(this._selectAll);E.default.hideNode(this._pagination.domNode);this._selectedNumber.textContent="";this._selectAllCheckbox.checked=!1;this._showActionBar()};qa.prototype._updateStep2View=function(W){this._licenseAssignments&&(this._licenseAssignments.destroy(),this._licenseAssignments=void 0);this._clearSelectedGroups();E.default.hideNode(this._filePanel);E.default.hideNode(this.processMembersContainer);E.default.hideNode(this._newMemberFormContainer);
this._showActionBar();E.default.hideNode(this._enterpriseGroupPanel);0===this._newMembers.length?(E.default.showNode(this._addOptions),E.default.hideNode(this._stepBar2),a.default.remove(this.domNode,"has-step-bar"),E.default.hideNode(this._selectAll),E.default.hideNode(this._memberList),this._resetFilePanel(),this._primaryBtn.disabled=!0,W&&this._addMemberOptionBtn.focus()):(E.default.hideNode(this._addOptions),E.default.showNode(this._stepBar2),a.default.add(this.domNode,"has-step-bar"),E.default.showNode(this._selectAll),
E.default.showNode(this._memberList),this._primaryBtn.disabled=!1)};qa.prototype._selectDefaultLicenses=function(){var W=this,ba,oa;if(this._userDefaults){var wa=0<(null===(ba=this._userDefaults.apps)||void 0===ba?void 0:ba.length);ba=0<(null===(oa=this._userDefaults.appBundles)||void 0===oa?void 0:oa.length);oa=ma.default.getProEntitlements(this._entitlements);var Ea=ma.default.getProExtensions(this._entitlements),Ga=[],Ja=[],ya=[];if(wa){if(0<oa.length||0<Ea.length){var Ha=0<oa.length?oa[0].itemId:
Ea[0].itemId;var Ia=this._userDefaults.apps.filter(function(Ka){return Ka.itemId===Ha})[0];Ia&&(Ga=this._entitlements.filter(function(Ka){return-1<Ia.entitlements.indexOf(Ka.key)}))}Ja=this._entitlements.filter(function(Ka){return!!W._userDefaults.apps.filter(function(Ma){var Na;return Ma.itemId===Ka.itemId&&-1<(null===(Na=Ma.entitlements)||void 0===Na?void 0:Na.indexOf(Ka.key))})[0]})}ba&&(ya=this._entitlements.filter(function(Ka){return Ka.isAppBundle&&-1<W._userDefaults.appBundles.indexOf(Ka.itemId)}));
this._licenseAssignments.setSelectedState({pro:Ga,apps:Ja,data:Ja,appBundles:ya,userTypeExtensions:Ja,runtime:Ja})}};qa.prototype._initMobileLiceses=function(){0===this._showSelectedLicenseIcons(this._mobileLicensesContainer).length&&(this._mobileLicensesContainer.textContent=this.i18n.myOrganization.inviteMembers.assignLicenses)};qa.prototype._updateStep3View=function(W){var ba=this,oa,wa,Ea,Ga,Ja=this._entitlements;W=(this._isAdmin||this.user.userRole.canManageLicenses())&&0<Ja.length;var ya=this.canAssignGroups||
0<this.groupBrowser.getState().groups.displayGroups.length,Ha=this._creditsEnabled&&!this.portal.isPortal&&(this._isAdmin||this.user.userRole.canManageCredits()),Ia=!this.portal.isPortal||this._canUpdateMembers;if(this.showMemberProperties=W||ya||Ha||Ia){var Ka=[];this._newMembers.forEach(function(Ma){var Na=ba._licenseTypesResult.userLicenseTypes.filter(function(La){return La.id===Ma.userLicenseType})[0];Na&&!Ka.filter(function(La){return La.id===Na.id})[0]&&Ka.push(Na)});this._creditsEnabled||(E.default.hideNode(this.domNode.querySelector(".js-summary-credit-limit-container")),
E.default.hideNode(this.domNode.querySelector(".js-mobile-prop-credits-row")));(0,t.default)(".js-properties-content").addClass("hide");W?(this._licenseAssignments?this._initMobileLiceses():(this._licenseAssignments=new V.default({entitlements:Ja,portal:this.portal,members:this._newMembers,userLicenseTypes:this._licenseTypesResult.userLicenseTypes,appBundles:this._entitlements.filter(function(Ma){return Ma.isAppBundle})}),this._licensesTabContent.appendChild(this._licenseAssignments.domNode),this._licenseAssignments.startup().then(function(){ba._selectDefaultLicenses();
ba._initMobileLiceses();ba.renderLicenseRows()})),-1===this._selectedMethod.indexOf("add")?this._licenseAssignments.setAppLimits(10,5):this._licenseAssignments.setAppLimits(void 0,void 0)):(this._hideTab("licenses"),E.default.hideNode(this.licensesCard));ya?0===this._selectedGroups.length?(Ja=this._selectedGroups,0<(null===(wa=null===(oa=this._userDefaults)||void 0===oa?void 0:oa.groups)||void 0===wa?void 0:wa.length)?(Ja=this._orgGroups.filter(function(Ma){return-1<ba._userDefaults.groups.indexOf(Ma.id)}),
this.groupBrowser.selectGroups(Ja),this.renderGroupRows(Ja)):this.renderGroupRows([]),0===Ja.length?this._mobileGroupsContainer.textContent=this.i18n.myOrganization.inviteMembers.assignGroups:this._showSelectedGroupIcons(this._mobileGroupsContainer)):this._showSelectedGroupIcons(this._mobileGroupsContainer):(this._hideTab("groups"),E.default.hideNode(this.groupsCard));this.selectedCategories=(null===(Ea=this._userDefaults)||void 0===Ea?void 0:Ea.categories)||[];this.renderCategoriesChips(this.selectedCategories,
".js-category-chips-container");Ha?E.default.showNode(this.domNode.querySelector(".js-credits-tab")):this._hideTab("credits");Ia?E.default.showNode(this.domNode.querySelector(".js-settings-tab")):this._hideTab("settings");this._currentPropTab=W?"licenses":ya?"groups":Ha?"credits":"settings";this._validateEmail.checked=!0;"invite"===this._selectedMethod?E.default.showNode(this._emailValidateContainer):E.default.hideNode(this._emailValidateContainer);h.default.dropdown();this._mobileCreditsProp.textContent=
-1===this._creditsToAssign?this.i18n.myOrganization.inviteMembers.noLimit:this._creditsToAssign;"both"===(null===(Ga=this._userDefaults)||void 0===Ga?void 0:Ga.userType)&&(this._enableEsriCheckbox.checked=!0,this._mobileEsriAccessToggle.setChecked(!0,!0),this.esriAccessToggle.setChecked(!0,!0));oa="add-enterprise"===this._selectedMethod;E.default.showHide(this.domNode.querySelector(".js-start-page-summary-row"),!oa);E.default.showHide(this.domNode.querySelector(".js-start-page-select-row"),!oa);E.default.showHide(this.domNode.querySelector(".js-settings-prop-card"),
"invite-enterprise"!==this._selectedMethod)}else this._goToStep(4)};qa.prototype.checkMemberCategories=function(){return f.__awaiter(this,void 0,void 0,function(){var W,ba;return f.__generator(this,function(oa){switch(oa.label){case 0:return null!==(ba=this.user.userRole)&&void 0!==ba&&ba.canUpdateUsers()?[4,(0,da.getMemberCategories)()]:(E.default.hideNode(this.categoriesCard),[2]);case 1:return W=oa.sent(),W.length||E.default.hideNode(this.categoriesCard),[2]}})})};qa.prototype._hideTab=function(W){E.default.hideNode(this.domNode.querySelector(".js-mobile-prop-".concat(W,
"-row")))};qa.prototype._showSelectedLicenseIcons=function(W){var ba=this;if(!this._licenseAssignments)return[];var oa=[];oa=this._licenseAssignments.getSelectedLicenses();var wa=oa.productLicenses;oa=f.__spreadArray(f.__spreadArray([],oa.proLicenses,!0),wa,!0);this._appIcons&&this._appIcons.destroyRecursive();oa=oa.filter(function(Ea){return!ma.default.isProExtension(Ea.key)});0<oa.length&&(this._appIcons=new ha.default({apps:oa}),W.innerHTML="",e.default.place(this._appIcons.domNode,W),setTimeout(function(){ba._appIcons.startup()},
0));return oa};qa.prototype._updateStep4View=function(){var W=this,ba="",oa=[];this.domNode.querySelector(".js-step4-stepper-btn").textContent=-1<this._selectedMethod.indexOf("invite")?this.i18n.myOrganization.inviteMembers.sendInvitations:l.default.myOrganization.inviteMembers.addMembers;E.default.showNode(this._emailSettings);switch(this._selectedMethod){case "add-no-email":ba=l.default.organizationInvite.step1.addUsersLabel;E.default.hideNode(this._emailSettings);break;case "add-enterprise-id":ba=
l.default.organizationInvite.step1.addUsersLabel;E.default.hideNode(this._emailSettings);break;case "add-with-email":ba=l.default.organizationInvite.step1.createUsersLabel;break;case "invite":ba=l.default.organizationInvite.step1.inviteUsersLabel;break;case "invite-enterprise":ba=l.default.organizationInvite.step1.idpUsersLabel}this.portal.subscriptionInfo&&-1<this.trialOrgTypes.indexOf(this.portal.subscriptionInfo.type)&&E.default.hideNode(this._emailSettings);E.default.showHide(this.domNode.querySelector(".js-summary-props-panel"),
this.showMemberProperties);this.domNode.querySelector(".js-summary-desc").innerHTML=ba;this.domNode.querySelector(".js-mobile-invite-member-number").textContent=d.default.substitute(this.i18n.myOrganization.inviteMembers.inviteNumberOfMembers,{number:this._newMembers.length});var wa=this.domNode.querySelector(".js-mobile-member-icons");wa.innerHTML="";this._newMembers.forEach(function(Ga){var Ja=oa.filter(function(Ia){return Ia.name===Ga.licenseTypeName})[0];Ja?Ja.count++:(Ja=W._licenseTypesResult.userLicenseTypes.filter(function(Ia){return Ia.id===
Ga.userLicenseType})[0],oa.push({name:Ga.licenseTypeName,count:1,apps:Ja?Ja.apps:[]}));Ja=document.createElement("div");Ja.classList.add("invite-members__mobile-member-icon");var ya="";if(Ga.firstname&&Ga.lastname){ya=Ga.firstname.substr(0,1)+Ga.lastname.substr(0,1);var Ha=Aa.default.hexToRgb(Aa.default.stringToHex(Ga.firstname+Ga.lastname))}else ya=(Ha=Ga.email||Ga.username||"")?Ha.substr(0,2):Ha,Ha=Aa.default.hexToRgb(Aa.default.stringToHex(Ha));Ja.textContent=ya;Ha&&(Ja.style.backgroundColor="rgba("+
Ha.r+","+Ha.g+","+Ha.b+", 0.5)");wa.appendChild(Ja)});oa.sort(function(Ga,Ja){return Ga.count>Ja.count?-1:Ga.count<Ja.count?1:0});ba=this.domNode.querySelector(".js-summary-apps-section");0<this._showSelectedLicenseIcons(this.domNode.querySelector(".js-summary-app-icons")).length?E.default.showNode(ba):E.default.hideNode(ba);this._showSelectedGroupIcons(this.domNode.querySelector(".js-group-icons"));this.renderCategoriesChips(this.selectedCategories,".js-summary-category-chips");E.default.showHide(this.domNode.querySelector(".js-summary-categories-section"),
0<this.selectedCategories.length);ba=this.domNode.querySelector(".js-summary-groups-section");0<this._selectedGroups.length?E.default.showNode(ba):E.default.hideNode(ba);ba=-1===this._creditsToAssign?l.default.myOrganization.inviteMembers.noLimit:K.default.format(this._creditsToAssign);this.domNode.querySelector(".js-summary-credit-limit").innerHTML=ba;this.domNode.querySelector(".js-summary-enable-esri-access").innerHTML=this._enableEsriCheckbox.checked?l.default.myOrganization.inviteMembers.yes:
l.default.myOrganization.inviteMembers.no;ba=this._profileVisOptions.filter(function(Ga){return Ga.value===W._profileVisSelect.value})[0].text;this.domNode.querySelector(".js-summary-profile-vis").innerHTML=ba;ba=this._startPageSelect.get("displayedValue");this.domNode.querySelector(".js-summary-start-page").innerHTML=ba;var Ea=this._languages.filter(function(Ga){return Ga.culture===W._languageSelect.get("value")}).shift();ba=null===Ea||void 0===Ea?void 0:Ea.displayName;Ea=(Ea=(null===Ea||void 0===
Ea?0:Ea.cultureFormats)?Ea.cultureFormats.filter(function(Ga){return Ga.format===W._languageFormatSelect.get("value")}).shift():void 0)?Ea.displayName:void 0;E.default.showHide(this.domNode.querySelector(".js-summary-language-format-container"),!!Ea);this.domNode.querySelector(".js-summary-language").innerHTML=ba;this.domNode.querySelector(".js-summary-language-format").innerHTML=Ea||"";this.renderSummaryMembers({total:this._newMembers.length,start:1,end:6,nextStart:7>this._newMembers.length?-1:7})};
qa.prototype.renderSummaryMembers=function(W){var ba=this;this.summaryPagination||(this.summaryPagination=new T.default({start:1,num:6,topic:"invite-summary-",hideDropdown:!0},this.domNode.querySelector(".js-summary-pagination")));this.summaryMemberRows.forEach(function(Ea){Ea.destroy()});this.summaryMemberRows=[];var oa=this._newMembers.length,wa=this.domNode.querySelector(".js-summary-member-list");this.domNode.querySelector(".js-summary-member-count").textContent=d.default.substitute(this.i18n.myOrganization.inviteMembers.membersCount,
{num:oa});wa.innerHTML="";this._newMembers.forEach(function(Ea,Ga){Ga+=1;Ga>=W.start&&Ga<=W.end&&(Ea=new X.default({member:Ea,userLicenseTypes:ba._licenseTypesResult.userLicenseTypes,portal:ba.portal,apps:ba._apps,readonly:!0,currentIDP:ba._currentIDP,currentOIDC:ba._currentOIDC}),wa.appendChild(Ea.domNode),Ea.startup(),ba.summaryMemberRows.push(Ea))});this.summaryPagination.render(W);6<oa&&E.default.showNode(this.summaryPagination.domNode)};qa.prototype._showSelectedGroupIcons=function(W){var ba=
this;W.innerHTML="";0<this._groupIcons.length&&this._groupIcons.forEach(function(oa){oa.destroyRecursive()});0<this._selectedGroups.length&&(this._groupIcons=[],this._selectedGroups.forEach(function(oa){oa=new fa.default({group:oa,portal:ba.portal,scale:"m"});W.appendChild(oa.domNode);ba._groupIcons.push(oa)}))};qa.prototype._resetFilePanel=function(W){var ba=this;E.default.showNode(this._fileDragDropText);E.default.hideNode(this._fileName);E.default.showNode(this._fileDesc);E.default.hideNode(this._fileInfo);
E.default.hideNode(this.domNode.querySelector(".js-compile-error-icon"));this._fileBox.classList.remove("invite-members__file-box--hasErrors");this._fileBox.classList.remove("invite-members__file-box--hasWarnings");this._userFields.forEach(function(oa){if(oa=ba.domNode.querySelector(".js-field-".concat(oa.name)))oa.classList.remove("invite-members__field-row--success"),oa.classList.remove("invite-members__field-row--has-errors"),oa.classList.remove("invite-members__field-row--has-warnings")});W||
(this._fileInput.value=null)};qa.prototype._resetEnterpriseGroupPanel=function(){E.default.hideNode(this._enterpriseGroupError);this._enterpriseGroupInput.value=""};qa.prototype._onFileAddClick=function(){0<this._membersInFile.length&&(this._newMembers=f.__spreadArray(f.__spreadArray([],this._newMembers,!0),this._membersInFile,!0),this._addNewMembers(),this._showMembersList(),this._resetFilePanel())};qa.prototype._onFileCancelClick=function(){E.default.hideNode(this._filePanel);this._showActionBar();
this._cancelAdd(!0);this._resetFilePanel()};qa.prototype._cancelAdd=function(W){0===this._newMembers.length?(E.default.showNode(this._addOptions),W?this._addMembersOptionBtn.focus():this._addMemberOptionBtn.focus()):(E.default.showNode(this._memberList),W?this._stepBar2.querySelector(".js-add-members").focus():this._stepBar2.querySelector(".js-add-member").focus(),this._enableMemberList())};qa.prototype._onBrowseClick=function(){this._fileInput.click()};qa.prototype._onFileChange=function(){this._handleFile(this._fileInput.files[0])};
qa.prototype._setPrimaryBtnText=function(W){this._primaryBtn.innerHTML=W};qa.prototype._createPortalAccounts=function(W){var ba=this,oa=za.default.formatPortalOrgUrl(za.default.getPortalAdminBaseUrl(),"/security/users/createUser",this.portal.id),wa=[];W.forEach(function(Ea){var Ga="add-enterprise"===ba._selectedMethod||"add-saml"===ba._selectedMethod?ba._enterpriseProvider:"arcgis";"add-saml"===ba._selectedMethod&&-1<Ea.targetUserProvider.indexOf("oidc")&&(Ga=Ea.targetUserProvider);var Ja="add-saml"===
ba._selectedMethod&&"saml"===ba._userType&&ba._samlSuffix?U.default.removeSAMLSuffix(Ea.username,ba._samlSuffix):"add-saml"===ba._selectedMethod&&-1<Ga.indexOf("oidc")?Ea.idpUsername:void 0,ya=Ea.firstname,Ha=Ea.lastname;ya&&Ha||(Ha=U.default.splitFullName(Ea.fullname),ya=Ha.first,Ha=Ha.last);Ga={username:Ea.username,firstname:ya,lastname:Ha,email:Ea.email,password:Ea.password,role:Ea.role,userLicenseTypeId:Ea.userLicenseType,idpUsername:Ja,provider:Ga};"add-enterprise"===ba._selectedMethod&&(Ga.fullname=
Ea.fullname);wa.push(za.default.request({url:oa,content:Ga},{usePost:!0}))});pa.default.eachAlways(wa).then(function(Ea){var Ga=[],Ja=[],ya=W.length,Ha=0;Ea.forEach(function(Ia,Ka){var Ma,Na,La=Ia.error||void 0;Ia=Ia.value||void 0;var Pa=null!==(Na=null!==(Ma=null===La||void 0===La?void 0:La.message)&&void 0!==Ma?Ma:null===Ia||void 0===Ia?void 0:Ia.message)&&void 0!==Na?Na:void 0;if(La||Ia&&(!Ia.status||Ia.status&&"success"!==Ia.status))Ha++,-1<(null===Pa||void 0===Pa?void 0:Pa.indexOf("user already exists"))?
Ja.push(W[Ka].username):Ga.push(W[Ka].username)});ya-=Ha;(0,k.default)([ba._assignLicenses(),ba._assignMemberProperties(W,Ga),ba._assignToGroups(W,Ga,ba._selectedGroups)]).then(function(){ba._completeCreatePortalAccounts(ya,Ga,Ja)},function(){ba._completeCreatePortalAccounts(ya,Ga,Ja)})})};qa.prototype._completeCreatePortalAccounts=function(W,ba,oa){var wa,Ea=!1,Ga=!1;W&&(wa=d.default.substitute(l.default.myOrganization.inviteMembers.membersAdded,{num:W}));0<(null===ba||void 0===ba?void 0:ba.length)&&
(Ea=ba.join(", "),Ea=d.default.substitute(l.default.myOrganization.inviteMembers.membersNotAdded,{userList:Ea}),wa=wa?wa+"\x3cbr\x3e"+Ea:Ea,Ea=!0);0<(null===oa||void 0===oa?void 0:oa.length)&&(oa=oa.join(", "),oa=d.default.substitute(l.default.myOrganization.inviteMembers.membersAlreadyExist,{userList:oa}),wa=wa?wa+"\x3cbr\x3e"+oa:oa,Ga=!0);Ea||Ga?(Ea||Ga)&&C.default.showAlert("error",wa,{textIncludesHTML:!0}):C.default.showAlert("success",wa);this._newMembers=[];g.default.publish("pending/refresh");
g.default.publish("members/refresh");this.selectedCategories.length&&g.default.publish("member-categories-count/update");this._hideLoader();this.close()};qa.prototype.getInvitationRequestContent=function(W){var ba=this,oa=H.default.includes(["invite","invite-enterprise"],this._selectedMethod)&&!!this._licenseAssignments;W={invitationList:JSON.stringify({invitations:(null!==W&&void 0!==W?W:this._newMembers).map(function(wa){var Ea,Ga={email:wa.email,firstname:wa.firstname,lastname:wa.lastname,username:wa.username,
password:wa.password,role:wa.role,userLicenseType:wa.userLicenseType,fullname:0<(null===(Ea=wa.fullname)||void 0===Ea?void 0:Ea.trim().length)&&" "!==wa.fullname?wa.fullname:void 0,userType:wa.userType,groups:ba._selectedGroups.map(function(Ja){return Ja.id}).join(","),userCreditAssignment:ba._creditsToAssign,applyActUserDefaults:!1};H.default.includes(["invite-enterprise","add-enterprise-id"],ba._selectedMethod)?(Ga.targetUserProvider=wa.targetUserProvider||"enterprise","add-enterprise-id"===ba._selectedMethod&&
(Ga.idpUsername=wa.idpUsername)):"invite"===ba._selectedMethod&&(Ga.targetUserProvider="all",Ga.validateEmail=ba._validateEmail.checked);ba.selectedCategories.length&&(Ga.memberCategories=ba.selectedCategories.join(", "));return Ga}),apps:oa?this._getInviteAppLicenses():void 0,appBundles:oa?this._getInviteAppBundles():void 0})};this._isTrialOrg||"add-no-email"===this._selectedMethod||(W.message=this._createHTMLLineBreaks(this._emailMessageTextarea.value));return W};qa.prototype._invitationsRequest=
function(W){var ba=this,oa=H.default.includes(["invite","invite-enterprise"],this._selectedMethod);W=null!==W&&void 0!==W?W:this._newMembers;var wa=oa&&!!this._licenseAssignments;oa="".concat(za.default.getSecureUrl(z.default.restBaseUrl),"portals/self/invite");W={invitationList:JSON.stringify({invitations:W.map(function(Ea,Ga){var Ja;Ga={email:Ea.email,firstname:Ea.firstname,lastname:Ea.lastname,username:Ea.username,password:Ea.password,role:Ea.role,userLicenseType:Ea.userLicenseType,fullname:0<
(null===(Ja=Ea.fullname)||void 0===Ja?void 0:Ja.trim().length)&&" "!==Ea.fullname?Ea.fullname:void 0,userType:Ea.userType,groups:ba._selectedGroups.map(function(ya){return ya.id}).join(","),userCreditAssignment:ba._creditsToAssign,applyActUserDefaults:!1};H.default.includes(["invite-enterprise","add-enterprise-id"],ba._selectedMethod)?(Ga.targetUserProvider=Ea.targetUserProvider||"enterprise","add-enterprise-id"===ba._selectedMethod&&(Ga.idpUsername=Ea.idpUsername)):"invite"===ba._selectedMethod&&
(Ga.targetUserProvider="all",Ga.validateEmail=ba._validateEmail.checked);ba.selectedCategories.length&&(Ga.memberCategories=ba.selectedCategories.join(", "));return Ga}),apps:wa?this._getInviteAppLicenses():void 0,appBundles:wa?this._getInviteAppBundles():void 0})};this._isTrialOrg||"add-no-email"===this._selectedMethod||(W.message=this._createHTMLLineBreaks(this._emailMessageTextarea.value));return za.default.request({url:oa,content:W},{usePost:!0})};qa.prototype._createHTMLLineBreaks=function(W){if(W)for(var ba=
W.indexOf("\n");-1<ba;)W=0===ba?"\x3cbr\x3e"+W.substring(ba+1):W.substring(0,ba)+"\x3cbr\x3e"+W.substring(ba+1),ba=W.indexOf("\n");return W};qa.prototype._memberLevelsAreValid=function(){var W=this,ba=new m.default,oa={};this._newMembers.forEach(function(wa){wa.userLicenseType&&(oa[wa.userLicenseType]?oa[wa.userLicenseType]++:W._currentUsersPerLevel[wa.userLicenseType]?(oa[wa.userLicenseType]=W._currentUsersPerLevel[wa.userLicenseType],oa[wa.userLicenseType]++):oa[wa.userLicenseType]=1)});Object.keys(oa).some(function(wa){var Ea;
return(null===(Ea=W._maxUsersPerLevel)||void 0===Ea?void 0:Ea[wa])<oa[wa]})?(ba.resolve(!1),this._isPortal?this._showPortalLevelsError(z.default.self.helpBase+z.default.self.helpMap.m["120000836"]):this._confirmAction({title:this.i18n.myOrganization.inviteMembers.insufficientUserTypes,message:this._isPortal?this.i18n.myOrganization.inviteMembers.insufficientLicensesPortalMsg:this.i18n.myOrganization.inviteMembers.insufficientLicensesMsg,okLabel:this.i18n.myOrganization.inviteMembers.goToMemberList,
className:"invite-members__insufficient-licenses"}).then(function(wa){"onOk"===wa&&W._goToStep(2)})):ba.resolve(!0);return ba};qa.prototype._showPortalLevelsError=function(W){var ba=this;W=this._createPortalLevelExceedsLink(W);W="\x3cp\x3e".concat(W,"\x3c/p\x3e");this._confirmAction({title:this.i18n.myOrganization.inviteMembers.insufficientLicenses,message:W,okLabel:this.i18n.myOrganization.inviteMembers.goToMemberList,className:"invite-members__insufficient-licenses"}).then(function(oa){"onOk"===
oa&&ba._goToStep(2)})};qa.prototype._createPortalLevelExceedsLink=function(W){return"".concat(this.i18n.myOrganization.inviteMembers.insufficientLicenses," ").concat(d.default.substitute(this.i18n.myOrganization.inviteMembers.insufficientLicensesPortalLink,{linkStart:"\x3cspan class\x3d'esriItemLinks'\x3e\x3ca href\x3d'".concat(W,"' target\x3d'_blank'\x3e"),linkEnd:"\x3c/a\x3e\x3c/span\x3e"}))};qa.prototype._sendInvitations=function(){var W=this;this._memberLevelsAreValid().then(function(ba){ba&&
W._doSendInvitations()})};qa.prototype._doSendInvitations=function(){var W=this,ba=-1<this._selectedMethod.indexOf("add-")?this.i18n.myOrganization.inviteMembers.addingMembers:this.i18n.myOrganization.inviteMembers.invitingMembers;this._showLoader(ba,!this.portal.isPortal,!0);this.portal.isPortal?this._createPortalAccounts(this._newMembers):(this._newMembers.forEach(function(oa){oa.userType=W._enableEsriCheckbox.checked?"both":"arcgisonly"}),this._newMembers.length<=this._maxUsersPerInvite?this._invitationsRequest(this._newMembers).then(this._onUsersInvited.bind(this,
!1),this._onUsersInvited.bind(this,!1)):(ba="".concat(za.default.getSecureUrl(z.default.restBaseUrl),"portals/self/invite"),I.default.sendAllResourcesSerially(ba,this._maxUsersPerInvite,this._newMembers,this.getInvitationRequestContent,this.updateLoaderPct).then(function(oa){W._onUsersInvited(!0,oa)},function(oa){W._onUsersInvited(!0,oa)})))};qa.prototype._showLoader=function(W,ba,oa){var wa;this._primaryBtn.disabled=!0;this._cancelBtn.disabled=!0;this.closeBtn.disabled=!0;this.calciteLoader&&(this.calciteLoader.type=
ba?"determinate":"indeterminate",this.calciteLoader.label=W,this.calciteLoader.value=0,this.calciteLoaderMessage.textContent=W?W:"",oa?this.dontCloseMessage.classList.remove("hide"):this.dontCloseMessage.classList.add("hide"));null===(wa=this.inviteMembersLoader)||void 0===wa?void 0:wa.classList.add("is-active")};qa.prototype._hideLoader=function(){var W;this._primaryBtn.disabled=!1;this._cancelBtn.disabled=!1;this.closeBtn.disabled=!1;this.calciteLoader&&(this.calciteLoader.label="",this.calciteLoader.text=
"",this.calciteLoader.value=0,this.calciteLoader.type="determinate");null===(W=this.inviteMembersLoader)||void 0===W?void 0:W.classList.remove("is-active")};qa.prototype.updateLoaderPct=function(W){this.calciteLoader&&(this.calciteLoader.value=100<W?100:Math.round(W))};qa.prototype._provisionLicenses=function(){var W=new m.default,ba=this._newMembers.map(function(oa){return oa.username});(0,k.default)(f.__spreadArray([this._provisionProLicenses(ba)],this._provisionAppLicenses(ba),!0)).then(function(){W.resolve()},
function(){W.resolve()});return W};qa.prototype._provisionRequest=function(W,ba){return this._licensesAPI.provisionUserEntitlements(W,ba)};qa.prototype._provisionAppLicenses=function(W){var ba=this,oa=[];this._licenseAssignments.getProductLicenses().filter(function(wa){return!wa.isAppBundle}).forEach(function(wa){oa.push(ba._provisionRequest(wa.itemId,{users:W,entitlements:[wa.key]}))});return oa};qa.prototype._getInviteAppLicenses=function(){var W=this._licenseAssignments.getProductLicenses().filter(function(oa){return!oa.isAppBundle}),
ba=this._licenseAssignments.getProLicenses();W=W.map(function(oa){return{itemId:oa.itemId,entitlements:[oa.key]}});0<ba.length&&W.push({itemId:ba[0].itemId,entitlements:f.__spreadArray([],ba.map(function(oa){return oa.key}),!0)});return W};qa.prototype._provisionProLicenses=function(W){var ba=this._licenseAssignments.getProLicenses(),oa=new m.default;0<ba.length?(W={users:W,entitlements:f.__spreadArray([],ba.map(function(wa){return wa.key}),!0)},this._provisionRequest(ba[0].itemId,W).then(function(){oa.resolve()},
function(){oa.resolve()})):oa.resolve();return oa};qa.prototype._provisionBundles=function(W){var ba=this,oa=this._newMembers.map(function(Ga){return Ga.username}),wa=new m.default,Ea=[];W.forEach(function(Ga){Ea.push(ba._licensesAPI.provisionUserAppBundle(Ga.itemId,oa))});(0,k.default)(Ea).then(function(){wa.resolve()},function(Ga){wa.reject(Ga)});return wa};qa.prototype._assignMemberProperties=function(W,ba){var oa=this;if(this._canUpdateMembers){var wa=new m.default,Ea=za.default.getSecureUrl(z.default.restBaseUrl),
Ga=[];W=this._getInvitedUserList(W,ba);ba=this._getSelectedLanguageAndFormat();var Ja=E.default.getSelectedOption(this._profileVisSelect.options),ya=ba.culture,Ha=ba.cultureFormat,Ia=this._enableEsriCheckbox.checked,Ka=Ja.value,Ma=this._getSelectedStartPage();W.forEach(function(Na){var La=za.default.request({url:Ea+"community/users/"+Na+"/update",content:f.__assign({culture:ya,cultureFormat:Ha,userType:Ia?"both":"arcgisonly",access:Ka},!!oa.selectedCategories.length&&{categories:JSON.stringify(oa.selectedCategories)})},
{usePost:!0});Na=za.default.request({url:Ea+"community/users/"+Na+"/setProperties",content:{properties:JSON.stringify({landingPage:{url:Ma}})}},{usePost:!0});Ga.push(La,Na)});(0,k.default)(Ga).then(function(Na){wa.resolve(Na)},function(Na){wa.resolve(Na)});return wa}};qa.prototype._getSelectedStartPage=function(){var W=this;return this._pages.filter(function(ba){return ba.name===W._startPageSelect.get("displayedValue")}).shift().page};qa.prototype._getSelectedLanguageAndFormat=function(){var W=this,
ba,oa,wa={},Ea=this._languages.filter(function(Ja){return Ja.culture===W._languageSelect.get("value")}).shift(),Ga=null!==(ba=null===Ea||void 0===Ea?void 0:Ea.culture)&&void 0!==ba?ba:void 0;Ga&&((null===Ea||void 0===Ea?0:Ea.cultureFormats)?(ba=Ea.cultureFormats.filter(function(Ja){return Ja.format===W._languageFormatSelect.get("value")}).shift(),ba=null!==(oa=null===ba||void 0===ba?void 0:ba.format)&&void 0!==oa?oa:void 0,wa.culture=Ga+(ba?"-"+ba:""),wa.cultureFormat=ba):wa.culture=Ga);return wa};
qa.prototype._assignToGroups=function(W,ba,oa){var wa=new m.default,Ea=this._getInvitedUserList(W,ba),Ga=[],Ja=z.default.restBaseUrl+"community/groups/${groupId}/addUsers";oa.forEach(function(ya){ya=d.default.substitute(Ja,{groupId:ya.id});Ga.push(B.default.sendAllResources(ya,25,Ea,function(Ha){return{users:Ha.join(",")}}))});(0,k.default)(Ga).then(function(ya){wa.resolve(ya)},function(ya){wa.reject(ya)});return wa};qa.prototype._getInvitedUserList=function(W,ba){var oa=[];W.forEach(function(wa){H.default.includes(ba,
wa.username)||oa.push(wa.username)});return oa};qa.prototype._assignLicenseTypes=function(){var W=new m.default,ba={};this._newMembers.forEach(function(wa){ba[wa.userLicenseType]?ba[wa.userLicenseType].push(wa.username):ba[wa.userLicenseType]=[wa.username]});var oa=[];Object.keys(ba).forEach(function(wa){oa.push(za.default.request({url:"".concat(z.default.restBaseUrl,"portals/self/updateUserLicenseType"),content:{users:ba[wa],userLicenseType:wa}},{usePost:!0}))});(0,k.default)(oa).then(function(){W.resolve()});
return W};qa.prototype._assignLicenses=function(){var W=new m.default;if(this._licenseAssignments){var ba=this._licenseAssignments.getProductLicenses().filter(function(oa){return oa.isAppBundle});(0,k.default)([this._provisionLicenses(),this._provisionBundles(ba)]).then(function(){W.resolve()},function(oa){W.resolve()})}else W.resolve();return W};qa.prototype._getInviteAppBundles=function(){return this._licenseAssignments.getProductLicenses().filter(function(W){return W.isAppBundle}).map(function(W){return W.itemId})};
qa.prototype._onUsersInvited=function(W,ba){var oa=this,wa;if(!ba.messageCode&&(W?ba:ba&&ba.success)){var Ea=this._newMembers.length,Ga=[];W?ba.forEach(function(Ja){Ja.notInvited&&(Ea-=Ja.notInvited.length,Ga=f.__spreadArray(f.__spreadArray([],Ga,!0),Ja.notInvited,!0))}):ba.notInvited&&(Ea-=ba.notInvited.length,Ga=ba.notInvited);-1<this._selectedMethod.indexOf("add")?(ba=[this._assignLicenses(),this._assignMemberProperties(this._newMembers,Ga)],(0,k.default)(ba).then(function(){oa._completeUsersInvite(Ea,
Ga)},function(Ja){oa._completeUsersInvite(Ea,Ga)})):this._completeUsersInvite(Ea,Ga)}else W=-1<this._selectedMethod.indexOf("add-")?this.i18n.organizationInvite.completed.errorAdding:this.i18n.organizationInvite.completed.errorSendingInvitations,400===ba.code&&"Too many groups in 'invitationList' parameter"===(null===(wa=ba.details)||void 0===wa?void 0:wa[0])&&(W=this.i18n.organizationInvite.completed.tooManyGroups),C.default.showAlert("error",W),this._newMembers=[],g.default.publish("pending/refresh"),
g.default.publish("members/refresh"),this._hideLoader(),this.close();this.selectedCategories.length&&g.default.publish("member-categories-count/update")};qa.prototype._completeUsersInvite=function(W,ba){var oa=!1,wa=!1;this.updateLoaderPct(100);if(W){var Ea=0===this._selectedMethod.indexOf("add-")?l.default.myOrganization.inviteMembers.membersAdded:l.default.myOrganization.inviteMembers.invitationsSent;Ea=d.default.substitute(Ea,{num:W});oa=!0}if(null===ba||void 0===ba?0:ba.length)W=0===this._selectedMethod.indexOf("add-")?
l.default.myOrganization.inviteMembers.membersNotAdded:l.default.myOrganization.inviteMembers.invitationsNotSent,ba=d.default.substitute(W,{userList:ba.join(", ")}),Ea=Ea?Ea+"\x3cbr\x3e"+ba:ba,wa=!0,H.default.includes(["add-no-email","add-built-in"],this._selectedMethod)&&(Ea+="\x3cbr\x3e"+l.default.myOrganization.inviteMembers.membersNotAddedPwdWarn);wa?C.default.showAlert("error",Ea,{textIncludesHTML:!0}):oa&&C.default.showAlert("success",Ea);this._newMembers=[];g.default.publish("pending/refresh");
g.default.publish("members/refresh",-1<this._selectedMethod.indexOf("add-"));this._hideLoader();this.close()};qa.prototype._onStepClick=function(W){W=+b.default.get(W.target,"data-step-num");W<this._currentStep&&(1===W&&(this._newMembers=[]),this._goToStep(W))};qa.prototype._goToStep=function(W,ba){this.hideFormError();E.default.hideNode(this["_step".concat(this._currentStep)]);this["_stepBar".concat(this._currentStep)]&&E.default.hideNode(this["_stepBar".concat(this._currentStep)]);this._currentStep=
W;for(var oa=W-1;1<=oa;oa--)a.default.remove(this["_stepHeader".concat(oa)],"invite-members__step-item--active"),a.default.add(this["_stepHeader".concat(oa)],"invite-members__step-item--past"),this["_stepHeader".concat(oa)].tabIndex=0,this["_step".concat(oa)].parentNode.classList.add("invite-members__content--past-step");for(oa=W+1;4>=oa;oa++)a.default.remove(this["_stepHeader".concat(oa)],"invite-members__step-item--past"),a.default.remove(this["_stepHeader".concat(oa)],"invite-members__step-item--active"),
this["_stepHeader".concat(oa)].tabIndex=-1,this["_step".concat(oa)].parentNode.classList.remove("invite-members__content--past-step");E.default.showNode(this["_step".concat(this._currentStep)]);W=this.domNode.querySelector(".invite-members__content--active-step");null===W||void 0===W?void 0:W.classList.remove("invite-members__content--active-step");this["_step".concat(this._currentStep)].parentNode.classList.remove("invite-members__content--past-step");this["_step".concat(this._currentStep)].parentNode.classList.add("invite-members__content--active-step");
a.default.remove(this["_stepHeader".concat(this._currentStep)],"invite-members__step-item--past");a.default.add(this["_stepHeader".concat(this._currentStep)],"invite-members__step-item--active");this["_stepHeader".concat(this._currentStep)].tabIndex=0;this["_stepBar".concat(this._currentStep)]?(E.default.showNode(this["_stepBar".concat(this._currentStep)]),a.default.add(this.domNode,"has-step-bar")):a.default.remove(this.domNode,"has-step-bar");E.default.hideNode(this.domNode.querySelector(".js-compile-error-icon"));
4===this._currentStep?this._setPrimaryBtnText(l.default.myOrganization.inviteMembers.addMembers):this._setPrimaryBtnText(l.default.organizationInvite.step1Create.nextBtn);switch(this._currentStep){case 1:this._updateStep1View();break;case 2:(0,c.render)(null,this.processMembersContainer);this._renderMemberList();this._updateStep2View(ba);break;case 3:this._updateStep3View(ba);break;case 4:this._updateStep4View()}};qa.prototype.handlePrimary=function(){var W=this;if(4<=this._currentStep)this._sendInvitations();
else{if(2===this._currentStep){var ba=!1;this._newMembers.forEach(function(oa){var wa;0<(null===(wa=oa.errors)||void 0===wa?void 0:wa.length)&&(ba=!0)});if(ba){this._showProgressError(this.i18n.myOrganization.inviteMembers.fixOrRemoveInvalidMembers);return}E.default.hideNode(this.domNode.querySelector(".js-compile-error-icon"));this._membersInFile=[];this._resetFilePanel();if(0===this._newMembers.length){this._mobileError.show({title:this.i18n.myOrganization.inviteMembers.noMembersAdded,description:this.i18n.myOrganization.inviteMembers.atLeastOneMember,
buttonText:this.i18n.myOrganization.inviteMembers.addMember}).then(function(oa){"onOk"===oa&&W.handleAddToBulk()});return}}else if(3===this._currentStep&&this._creditsErrorMessage){this._showProgressError(this._creditsErrorMessage);return}3===this._currentStep&&this._initEmailMessage();this._goToStep(this._currentStep+1,!0)}};qa.prototype._showProgressError=function(W){var ba=this;this._progressError.textContent=W;E.default.showNode(this._progressError);setTimeout(function(){E.default.hideNode(ba._progressError)},
5E3)};qa.prototype._disableMemberList=function(){a.default.add(this._selectAll,"invite-members__member-list--disable");this._newMemberRows.forEach(function(W){W.disable()})};qa.prototype._enableMemberList=function(){this._newMemberRows.forEach(function(W){W.enable()});a.default.remove(this._selectAll,"invite-members__member-list--disable")};qa.prototype._onNewMemberClick=function(){this.domNode.classList.add("invite-members__member-form");this._currentDrillIn="add-form";this._updateMobileTitles(this.i18n.myOrganization.inviteMembers.addMember,
this.i18n.myOrganization.inviteMembers.compileMemberList);this._newMemberForm.member={};this._newMemberForm.setInviteMethod(this._selectedMethod);this._newMemberForm.setFormFields(this._getFormFields(),"add-enterprise"===this._selectedMethod);E.default.hideNode(this._addOptions);this._newMemberForm.reset();E.default.hideNode(this._filePanel);this._showNewMemberForm();this._newMemberForm.focusOnFirstInput();this._disableMemberList()};qa.prototype._updateMobileTitles=function(W,ba){this._mobileMainTitle.textContent=
W;this._mobileSubTitle.textContent=ba};qa.prototype._onNewMembersFromFileClick=function(){var W=this;this._membersInFile=[];this._updateRequiredFields();E.default.hideNode(this._addOptions);E.default.showNode(this._filePanel);E.default.hideNode(this._newMemberFormContainer);E.default.hideNode(this._selectAll);E.default.hideNode(this._memberList);E.default.disableNode(this._fileAddBtn,!1);this._hideActionBar();this._fileBrowse.focus();this._disableMemberList();var ba=this._userFields.filter(function(wa){return-1!==
wa.methods.indexOf(W._selectedMethod)||"all"===wa.methods[0]});ba.some(function(wa){return"idpUsername"===wa.name&&"ID"===wa.csvKey})&&ba.push({name:"idType",csvKey:this.i18n.myOrganization.inviteMembers.idType,methods:[]});ba=encodeURIComponent("".concat("\ufeff").concat(ba.map(function(wa){return wa.csvKey}).join(",")));ba="data:text/csv; charset\x3dutf-8;,".concat(ba);var oa=this.domNode.querySelector(".js-download-csv");oa.setAttribute("href",ba);oa.setAttribute("download","invite_csv_template.csv")};
qa.prototype._onNewMembersFromEnterpriseGroupClick=function(){var W,ba,oa,wa;this._membersInFile=[];var Ea=this._licenseTypesResult.userLicenseTypes,Ga=null===(W=this._userDefaults)||void 0===W?void 0:W.userLicenseType;W=Ea[0];if(null===(ba=this._userDefaults)||void 0===ba?0:ba.userLicenseType)W=Ea.filter(function(Ja){return Ja.id===Ga}).shift()||W;this._enterpriseGroupLicenseTypeSelect.select(W);(null===(oa=this._userDefaults)||void 0===oa?0:oa.role)&&this._enterpriseGroupRoleSelect.set("value",
null===(wa=this._userDefaults)||void 0===wa?void 0:wa.role);this._enterpriseGroupRoleSelect.domNode.classList.remove("input-error");this._enterpriseGroupRoleError.classList.remove("is-active");this._enterpriseGroupLoader.classList.remove("is-active");E.default.disableNode(this._enterpriseGroupAddBtn,!1);E.default.hideNode(this._addOptions);E.default.showNode(this._enterpriseGroupPanel)};qa.prototype._onEnterpriseGroupAddClick=function(){var W=this,ba=this._enterpriseGroupInput.value;if(ba){E.default.disableNode(this._enterpriseGroupAddBtn,
!0);E.default.hideNode(this._enterpriseGroupForm);this._enterpriseGroupLoader.classList.add("is-active");var oa=this._enterpriseGroupRoleSelect.get("displayedValue"),wa=this.roles.filter(function(ya){return ya.name===oa})[0],Ea=this._enterpriseGroupLicenseTypeSelect.get("value"),Ga=this._licenseTypesResult.userLicenseTypes.filter(function(ya){return ya.id===Ea})[0],Ja=za.default.formatPortalOrgUrl(za.default.getPortalAdminBaseUrl(),"/security/groups/getUsersWithinEnterpriseGroup",this.portal.id);
za.default.request({url:Ja,content:{groupName:ba}},{usePost:!0,useProxy:z.default.isDebug}).then(function(ya){var Ha;ya&&!ya.code&&(null===(Ha=ya.users)||void 0===Ha?0:Ha.length)?(W._enterpriseGroupLoader.classList.remove("is-active"),E.default.disableNode(W._enterpriseGroupAddBtn,!1),E.default.showNode(W._enterpriseGroupForm),ya.users.forEach(function(Ia){var Ka=U.default.splitFullName(Ia.fullname);Ia={email:Ia.email,username:U.default.cleanUsernameDomain(Ia.username,W._supportsLDAP,W._supportsWindows),
fullname:Ia.fullname,firstname:Ka.first,lastname:Ka.last,provider:W._enterpriseProvider,rolename:oa,role:wa.id,userLicenseType:Ea,licenseType:Ga,licenseTypeName:Ga.name,level:Ga.level};W._membersInFile.push(Ia)}),W._newMembers=f.__spreadArray(f.__spreadArray([],W._newMembers,!0),W._membersInFile,!0),W._addNewMembers(),W._showMembersList(),W._resetEnterpriseGroupPanel()):(W._onSearchEnterpriseGroupClick(),W._enterpriseGroupLoader.classList.remove("is-active"),E.default.disableNode(W._enterpriseGroupAddBtn,
!1),E.default.showNode(W._enterpriseGroupForm),g.default.publish("alert/show",{type:"error",text:d.default.substitute(l.default.myOrganization.inviteMembers.enterpriseGroupNotFound,{name:ba})}))},function(){W._onSearchEnterpriseGroupClick();W._enterpriseGroupLoader.classList.remove("is-active");E.default.disableNode(W._enterpriseGroupAddBtn,!1);E.default.showNode(W._enterpriseGroupForm);g.default.publish("alert/show",{type:"error",text:d.default.substitute(l.default.myOrganization.inviteMembers.enterpriseGroupNotFound,
{name:ba})})})}else b.default.set(this._enterpriseGroupError,"innerHTML",l.default.organizationInvite.step2Create.invalid.groupNameIsBlank),a.default.add(this._enterpriseGroupInput,"input-error"),a.default.add(this._enterpriseGroupInput,"is-active")};qa.prototype._onEnterpriseGroupCancelClick=function(){E.default.hideNode(this._enterpriseGroupPanel);this._cancelAdd();this._resetFilePanel()};qa.prototype._onSearchEnterpriseGroupClick=function(){B.default.createSpecifiedDialog(ua.default).show(this._enterpriseGroupInput.value||
"")};qa.prototype._onEnterpriseGroupSelected=function(W){var ba;W=null!==(ba=null===W||void 0===W?void 0:W.rolename)&&void 0!==ba?ba:"";this._enterpriseGroupInput.value=W};qa.prototype._onAddAnotherClick=function(W){this._addNewMember(W);this._disableMemberList();this._onNewMemberClick()};qa.prototype._onAddClick=function(W){this.domNode.classList.remove("invite-members__member-form");this._addNewMember(W);this._hideNewMemberForm();this._enableMemberList()};qa.prototype._showNewMemberForm=function(){E.default.showNode(this._newMemberFormContainer);
this._hideActionBar()};qa.prototype._hideNewMemberForm=function(){E.default.hideNode(this._newMemberFormContainer);this._showActionBar()};qa.prototype._showActionBar=function(){this._overlayContentWrapper.classList.remove("overlay-content--no-actions");E.default.showNode(this._overlayActionBar)};qa.prototype._hideActionBar=function(){this._overlayContentWrapper.classList.add("overlay-content--no-actions");E.default.hideNode(this._overlayActionBar)};qa.prototype._showMembersList=function(){E.default.hideNode(this._newMemberFormContainer);
E.default.hideNode(this._filePanel);E.default.hideNode(this._enterpriseGroupPanel);E.default.showNode(this._selectAll);E.default.showNode(this._memberList);this._enableMemberList()};qa.prototype._editMember=function(){this._disableMemberList()};qa.prototype._addNewMember=function(W){this._newMembers.push(W);this._renderMemberList();this._updateStep2View();this._newMemberRows.forEach(function(ba){ba.member===W&&ba.focusOnEdit()})};qa.prototype._getFilteredRoles=function(){var W=this;return this.roles.filter(function(ba){var oa=
!1;ba.privileges&&(oa=r.default.isDefined(ba.privileges.filter(function(wa){return-1<wa.indexOf(":admin")})[0]));return!oa||W._isPortal&&W._isAdmin})};qa.prototype._addNewMemberRow=function(W){var ba=this,oa=new X.default({member:W,filteredRoles:this._getFilteredRoles(),roles:this.roles,viewerRole:this.portal.viewerRole,userLicenseTypes:this._licenseTypesResult.userLicenseTypes,fields:this._getFormFields(),inviteMethod:this._selectedMethod,supportsLDAP:this._supportsLDAP,supportsWindows:this._supportsWindows,
samlSuffix:this._samlSuffix,userType:this._userType,apps:this._apps,portal:this.portal,index:this._newMemberRows.length,currentIDP:this._currentIDP,currentOIDC:this._currentOIDC});e.default.place(oa.domNode,this._memberListContent);setTimeout(function(){oa.startup()},0);this.own((0,u.default)(oa,"selected-change",function(wa){if(wa)ba._selectedMembersCount++,ba._selectedMembers.push(oa.member),oa.member.selected=!0;else for(ba._selectedMembersCount--,oa.member.selected=!1,wa=0;wa<ba._selectedMembers.length;wa++)if(ba._selectedMembers[wa]===
W){ba._selectedMembers.splice(wa,1);break}ba._updateSelectionSection()}),(0,u.default)(oa,"edit",function(wa){ba.domNode.classList.add("invite-members__member-form");ba._currentDrillIn="update-form";ba._updateMobileTitles(ba.i18n.myOrganization.inviteMembers.editMember,ba.i18n.myOrganization.inviteMembers.compileMemberList);ba._editMember();ba._hideActionBar();ba._currentMemberForm=wa}),(0,u.default)(oa,"close-edit",function(){ba.domNode.classList.remove("invite-members__member-form");ba._enableMemberList();
ba._showActionBar()}));this._newMemberRows.push(oa)};qa.prototype._updateSelectionSection=function(){0<this._selectedMembers.length?(E.default.hideNode(this._selectAll),E.default.showNode(this._selectedActions)):(E.default.hideNode(this._selectedActions),E.default.showNode(this._selectAll));0===this._selectedMembers.length?(this._selectAllCheckbox.checked=!1,this._selectAllCheckbox.indeterminate=!1):this._selectedMembers.length===this._newMemberRows.length?(this._selectAllCheckbox.checked=!0,this._selectAllCheckbox.indeterminate=
!1):this._selectAllCheckbox.indeterminate=!0;this._selectedNumber.textContent=ka.default.getString(this.i18n.myOrganization.inviteMembers.selectedNumber,this._selectedMembers.length)};qa.prototype._onFormCancelClick=function(){this._hideNewMemberForm();this._cancelAdd();this.domNode.classList.remove("invite-members__member-form")};qa.prototype._onPropTabClick=function(W){E.default.hideNode(this.domNode.querySelector(".js-"+this._currentPropTab+"-tab"));this._currentPropTab=b.default.get(W.target,
"data-tab");E.default.showNode(this.domNode.querySelector(".js-"+this._currentPropTab+"-tab"));a.default.remove(this.domNode.querySelector(".invite-members__tab--active"),"invite-members__tab--active");a.default.add(W.target,"invite-members__tab--active")};qa.prototype._onDragOver=function(W){W.preventDefault()};qa.prototype._onFileDrop=function(W){W.preventDefault();var ba;W.dataTransfer.items?"file"===W.dataTransfer.items[0].kind&&(ba=W.dataTransfer.items[0].getAsFile()):0<W.dataTransfer.files.length&&
(ba=W.dataTransfer.files[0]);ba&&this._handleFile(ba)};qa.prototype._handleFile=function(W){var ba=this,oa=(W.type||" ").toLowerCase(),wa=W.name.toLowerCase();this._currentFileName=wa;if(-1!==oa.indexOf("text/")||-1!==wa.indexOf(".txt")||-1!==wa.indexOf(".csv")){var Ea=new FileReader;Ea.onload=function(){var Ga=Ea.result,Ja=Ga.indexOf("\n");Ja=Ga.substr(0,Ja).trim();var ya=Ja.toLowerCase(),Ha=ba._getSeparator(Ja);Ga=Ga.replace(Ja,ya);!ba._isPortal||"ldap"!==ba._userType&&"windows"!==ba._userType?
ba._processCsvData(Ga,Ha):ba._processCsvDataEnterprise(Ga,Ha);ba._fileAddBtn.focus()};Ea.readAsText(W)}else C.default.showAlert("error",l.default.addItemFrm.errors.unknownType.message)};qa.prototype.renderProcessMembers=function(){var W=this;this._newMembers.forEach(function(oa,wa){oa.tempId="".concat((oa.email||oa.username||"member-tempid").replace(/@/,"-").replace(/./g,"-"),"-").concat(wa)});var ba=this._userFields.filter(function(oa){return-1!==oa.methods.indexOf(W._selectedMethod)||"all"===oa.methods[0]});
(0,c.render)((0,c.h)(ra.default,{fileName:this._currentFileName,userTypes:this._licenseTypesResult.userLicenseTypes,invitations:f.__spreadArray([],this._newMembers,!0),fields:ba,onFileChange:function(oa){W._newMembers=[];W._handleFile(oa)},onEdit:function(oa){return W.handleEditBulkMember(oa)},onAdd:function(){return W.handleAddToBulk()},onRemoveMembers:function(oa){return W.handleRemoveBulkMembers(oa)}}),this.processMembersContainer);E.default.showNode(this.processMembersContainer);this._primaryBtn.disabled=
!1;this._showActionBar()};qa.prototype.handleRemoveBulkMembers=function(W){var ba=this;this._newMembers=this._newMembers.filter(function(oa){return!W.some(function(wa){return wa.tempId===oa.tempId})});this.renderProcessMembers();setTimeout(function(){var oa;null===(oa=ba.domNode.querySelector(".js-review-member-cb"))||void 0===oa?void 0:oa.setFocus()},300)};qa.prototype.renderFormModal=function(W,ba){var oa=this,wa,Ea,Ga=this.domNode.querySelector(".js-form-modal"),Ja=!!W;W={isEdit:Ja,member:W||{},
roles:this.roles,filteredRoles:this._getFilteredRoles(),viewerRole:this.portal.viewerRole,fields:this._getFormFields(),userLicenseTypes:this._licenseTypesResult.userLicenseTypes,inviteMethod:this._selectedMethod,supportsLDAP:this._supportsLDAP,supportsWindows:this._supportsWindows,samlSuffix:this._samlSuffix,userType:this._userType,portal:this.portal,apps:this._apps,defaultUserTypeId:null===(wa=this._userDefaults)||void 0===wa?void 0:wa.userLicenseType,defaultRole:null===(Ea=this._userDefaults)||
void 0===Ea?void 0:Ea.role,currentIDP:this._currentIDP,currentOIDC:this._currentOIDC,editingIndex:ba};(0,c.render)((0,c.h)(ca.default,{formParameters:W,onCancel:function(){(0,c.render)(null,Ga);oa.preventScroll(!0)},onSave:function(ya){(0,c.render)(null,Ga);oa.preventScroll(!0);Ja||(oa._newMembers.push(ya),C.default.showAlert("success",oa.i18n.myOrganization.inviteMembers.reviewStep.addSingleSuccess));oa.renderProcessMembers();oa._newMembers.some(function(Ha){var Ia;return 0<(null===(Ia=Ha.errors)||
void 0===Ia?void 0:Ia.length)})||E.default.hideNode(oa.domNode.querySelector(".js-compile-error-icon"));setTimeout(function(){var Ha=oa.domNode.querySelector("#review-member-edit__".concat(ya.tempId));null===Ha||void 0===Ha?void 0:Ha.setFocus()},300)}}),Ga)};qa.prototype.handleAddToBulk=function(){this.renderFormModal()};qa.prototype.handleEditBulkMember=function(W){var ba,oa=this._newMembers.find(function(wa,Ea){wa.tempId===W&&(ba=Ea);return wa.tempId===W});this.renderFormModal(oa,ba)};qa.prototype._hasDuplicateUsername=
function(W,ba,oa){var wa=[],Ea=!1,Ga;for(Ga=0;Ga<ba.length;Ga++){var Ja=W.getValue(ba[Ga],oa.toLowerCase());if(-1<wa.indexOf(Ja)){Ea=!0;var ya=Ja;break}else wa.push(Ja)}return Ea?ya:null};qa.prototype._addUserIfNotAlreadyAdded=function(W){var ba=this;if(this._newMembers.filter(function(oa){return oa[ba._memberKeyField]===W[ba._memberKeyField]})[0])return W.invalid&&(W.invalid=!1),!1;this._membersInFile.push(W);return!0};qa.prototype._processCsvDataEnterprise=function(W,ba){var oa=this;this._resetFilePanel(!0);
E.default.disableNode(this._fileAddBtn,!0);this._membersInFile=[];var wa=new y.default({data:W,separator:ba});wa.fetch({onComplete:function(Ea){var Ga=!1;oa._hasDuplicateUsername(wa,Ea,oa.i18n.organizationInvite.csv.username)&&(Ga=!0);var Ja=za.default.formatPortalOrgUrl(za.default.getPortalAdminBaseUrl(),"/security/users/getEnterpriseUser",oa.portal.id),ya=[];Ea.forEach(function(Ha){(Ha=wa.getValue(Ha,oa.i18n.organizationInvite.csv.username.toLowerCase()))&&ya.push(za.default.request({url:Ja,content:{username:Ha}},
{usePost:!0}))});oa._showLoader(oa.i18n.myOrganization.inviteMembers.processingCsv);pa.default.eachAlways(ya).then(function(Ha){E.default.disableNode(oa._fileAddBtn,!1);var Ia=oa._userFields.filter(function(Qa){return-1!==Qa.methods.indexOf(oa._selectedMethod)||"all"===Qa.methods[0]}),Ka=Ia.filter(function(Qa){return"username"===Qa.name})[0],Ma=[],Na=[],La=0,Pa=!1;Ha.forEach(function(Qa){var Ra=Qa.value;!Qa.error&&Ra&&Ea.forEach(function(Sa){var Ua,Va,Ya,Wa,$a,Ta,Xa,Za,bb,db=wa.getValue(Sa,oa.i18n.organizationInvite.csv.username.toLowerCase()),
cb=db?db.indexOf("\\"):-1,gb=Ra.username.indexOf("\\");cb=-1<cb?db.substring(cb+1):db;gb=-1<gb?Ra.username.substring(gb+1):Ra.username;if(db&&cb.toLowerCase()===gb.toLowerCase()){db=U.default.splitFullName(Ra.fullname);var ab={username:Ra.username,fullname:Ra.fullname,firstname:db.first,lastname:db.last,email:Ra.email};Ia.forEach(function(hb){var fb=hb.csvKey.toLowerCase();ab[hb.name]=wa.getValue(Sa,fb)?wa.getValue(Sa,fb).trim():""});115<(null===(Ua=ab.firstname)||void 0===Ua?void 0:Ua.length)&&(ab.firstname=
ab.firstname.substring(0,115));115<(null===(Va=ab.lastname)||void 0===Va?void 0:Va.length)&&(ab.lastname=ab.lastname.substring(0,115));ab.username=U.default.cleanUsernameDomain(Ra.username,oa._supportsLDAP,oa._supportsWindows);ab.licenseTypeName&&(Ua=oa._licenseTypesResult.userLicenseTypes.filter(function(hb){return hb.name.toLowerCase()===ab.licenseTypeName.toLowerCase()})[0])&&(ab.licenseTypeName=Ua.name,ab.userLicenseType=Ua.id,ab.licenseType=Ua,ab.level=Ua.level);oa.hasSAML&&oa.hasOIDC&&"add-enterprise-id"===
oa._selectedMethod&&(Ua=null===(Ya=wa.getValue(Sa,oa.i18n.myOrganization.inviteMembers.idType.toLowerCase()))||void 0===Ya?void 0:Ya.toLowerCase(),ab.targetUserProvider=-1<(null===Ua||void 0===Ua?void 0:Ua.indexOf("oidc"))?"oidc_".concat(oa._currentOIDC.id):"enterprise");if(oa._isPortal&&(null===(Wa=ab.rolename)||void 0===Wa?void 0:Wa.toLowerCase())===oa.i18n.organizationInvite.userRoles.admin.toLowerCase())ab.rolename=oa.i18n.organizationInvite.userRoles.admin,ab.role=oa._orgAdminRole;else if((null===
($a=ab.rolename)||void 0===$a?void 0:$a.toLowerCase())===oa.i18n.organizationInvite.csv.publisherRole.toLowerCase())ab.rolename=oa.i18n.organizationInvite.userRoles.publisher,ab.role=oa._orgPublisherRole;else if((null===(Ta=ab.rolename)||void 0===Ta?void 0:Ta.toLowerCase())===oa.i18n.organizationInvite.csv.userRole.toLowerCase())ab.rolename=oa.i18n.organizationInvite.userRoles.user,ab.role=oa._orgUserRole;else if((null===(Xa=ab.rolename)||void 0===Xa?void 0:Xa.toLowerCase())===oa.i18n.organizationInvite.csv.viewerRole.toLowerCase())ab.rolename=
oa.i18n.organizationInvite.userRoles.viewer,ab.role=oa.SYSTEM_ROLES.VIEWER;else if((null===(Za=ab.rolename)||void 0===Za?void 0:Za.toLowerCase())===oa.i18n.organizationInvite.csv.viewerEditRole.toLowerCase())ab.rolename=oa.i18n.organizationInvite.userRoles.viewerEdit,ab.role=oa.SYSTEM_ROLES.DATA_EDITOR;else if((null===(bb=ab.rolename)||void 0===bb?void 0:bb.toLowerCase())===oa.i18n.organizationInvite.csv.facilitatorRole.toLowerCase())ab.rolename=oa.i18n.organizationInvite.userRoles.facilitator,ab.role=
oa.SYSTEM_ROLES.FACILITATOR;else{if(Ya=oa._getCustomRoleByName(ab.rolename))ab.rolename=Ya.name,ab.role=Ya.id;ab.role||(ab.rolename=oa._getDefaultUserRoleName(),ab.role=oa._isPortal?oa._portalDefaultRole:oa._accountUserRole)}ab.level||(ab.level=wa.getValue(Sa,oa.i18n.organizationInvite.csv.level.toLowerCase())||oa.LICENSE_LEVELS.TWO);ab.level!==oa.LICENSE_LEVELS.ONE_PLUS_EDIT||oa._isValidLevelOnePlusEditRole(ab.role)?ab.level!==oa.LICENSE_LEVELS.ONE||oa._isValidLevelOneRole(ab.role)||(ab.rolename=
oa.i18n.organizationInvite.userRoles.viewer,ab.role=oa.SYSTEM_ROLES.VIEWER):(ab.rolename=oa.i18n.organizationInvite.userRoles.viewerEdit,ab.role=oa.SYSTEM_ROLES.DATA_EDITOR);oa._containsInvalidFields(ab,Ia)&&(ab.invalid=!0,La++);Na.push(ab);Ma.push(ab.username)}})});if(0<Na.length){var Oa=new m.default;Ka?U.default.checkUsernames(Na.map(function(Qa){return Qa.username})).then(function(Qa){var Ra;(null===(Ra=Qa.usernames)||void 0===Ra?void 0:Ra.length)===Ma.length&&(Qa.usernames.forEach(function(Sa){var Ua=
Na.filter(function(Ya){return Ya.username===Sa.requested})[0];if(Ua){var Va=!1;Ua.username!==Sa.suggested&&(Va=Pa=!0);Va||oa._addUserIfNotAlreadyAdded(Ua)||La--}}),Oa.resolve());Qa.messageCode&&"GWM_0021"===Qa.messageCode&&C.default.showAlert("error",Qa.message);Oa.reject()}):(Na.forEach(function(Qa){oa._addUserIfNotAlreadyAdded(Qa)||La--}),Oa.resolve());Oa.then(function(){oa._hideLoader();0<La?(Pa||Ga)&&C.default.showAlert("error",l.default.organizationInvite.step2Create.invalid.usernameExistsFile):
Ga&&C.default.showAlert("error",l.default.organizationInvite.step2Create.invalid.usernameExistsFile);oa._displayFileResult()})}else oa._hideLoader(),C.default.showAlert("error",l.default.organizationInvite.step2Create.invalid.uploadNoUsers),oa._displayFileResult()},function(Ha){oa._hideLoader();E.default.disableNode(oa._fileAddBtn,!1);oa._displayFileResult()})}})};qa.prototype._processCsvData=function(W,ba){var oa=this;this._membersInFile=[];var wa=new y.default({data:W,separator:ba});wa.fetch({onComplete:function(Ea){var Ga=
[],Ja=[],ya=0,Ha=oa._userFields.filter(function(Na){return-1!==Na.methods.indexOf(oa._selectedMethod)||"all"===Na.methods[0]}),Ia=Ha.filter(function(Na){return"username"===Na.name})[0],Ka=oa._hasDuplicateUsername(wa,Ea,oa.i18n.organizationInvite.csv.username),Ma=!1;Ka?Ma=!0:(oa._importedUsernamesUpdated=0,Ea.forEach(function(Na){var La,Pa,Oa,Qa,Ra,Sa,Ua,Va,Ya,Wa,$a=0,Ta={};Ha.forEach(function(Za){var bb=Za.csvKey.toLowerCase();Ta[Za.name]=wa.getValue(Na,bb)?wa.getValue(Na,bb.trim()):""});if(oa.hasSAML&&
oa.hasOIDC&&"add-enterprise-id"===oa._selectedMethod){var Xa=null===(La=wa.getValue(Na,oa.i18n.myOrganization.inviteMembers.idType.toLowerCase()))||void 0===La?void 0:La.toLowerCase();Ta.targetUserProvider=-1<(null===Xa||void 0===Xa?void 0:Xa.indexOf("oidc"))?"oidc_".concat(oa._currentOIDC.id):"enterprise"}if(Ia)Ga.push(Ta.username);else if("add-enterprise-id"===oa._selectedMethod){La=z.default.self.urlKey?"_".concat(z.default.self.urlKey):"";Ta.username=Ta.idpUsername;for(Ta.username=U.default.createValidOrgUsername(za.default.stripHTML(Ta.username),
La,oa._minUsernameLength,oa._maxUsernameLength);oa._usernameAlreadyUsed(Ta.username,Ga);)$a++,Ta.username=U.default.createValidOrgUsername(za.default.stripHTML(Ta.idpUsername)+$a,La,oa._minUsernameLength,oa._maxUsernameLength);Ta.idpUsername||(oa._importedUsernamesUpdated++,Ta.idpUsername=Ta.username);Ga.push(Ta.username)}Ta.licenseTypeName&&($a=oa._licenseTypesResult.userLicenseTypes.filter(function(Za){return Za.name.toLowerCase()===Ta.licenseTypeName.toLowerCase()}).shift())&&(Ta.licenseTypeName=
$a.name,Ta.userLicenseType=$a.id,Ta.licenseType=$a,Ta.level=$a.level);if(oa._isPortal&&(null===(Pa=Ta.rolename)||void 0===Pa?void 0:Pa.toLowerCase())===oa.i18n.organizationInvite.userRoles.admin.toLowerCase())Ta.rolename=oa.i18n.organizationInvite.userRoles.admin,Ta.role=oa._orgAdminRole;else if((null===(Oa=Ta.rolename)||void 0===Oa?void 0:Oa.toLowerCase())===oa.i18n.organizationInvite.csv.publisherRole.toLowerCase())Ta.rolename=oa.i18n.organizationInvite.userRoles.publisher,Ta.role=oa._orgPublisherRole;
else if((null===(Qa=Ta.rolename)||void 0===Qa?void 0:Qa.toLowerCase())===oa.i18n.organizationInvite.csv.userRole.toLowerCase())Ta.rolename=oa.i18n.organizationInvite.userRoles.user,Ta.role=oa._orgUserRole;else if((null===(Ra=Ta.rolename)||void 0===Ra?void 0:Ra.toLowerCase())===oa.i18n.organizationInvite.csv.viewerRole.toLowerCase())Ta.rolename=oa.i18n.organizationInvite.userRoles.viewer,Ta.role=oa.SYSTEM_ROLES.VIEWER;else if((null===(Sa=Ta.rolename)||void 0===Sa?void 0:Sa.toLowerCase())===oa.i18n.organizationInvite.csv.viewerEditRole.toLowerCase())Ta.rolename=
oa.i18n.organizationInvite.userRoles.viewerEdit,Ta.role=oa.SYSTEM_ROLES.DATA_EDITOR;else if((null===(Ua=Ta.rolename)||void 0===Ua?void 0:Ua.toLowerCase())===oa.i18n.organizationInvite.csv.facilitatorRole.toLowerCase())Ta.rolename=oa.i18n.organizationInvite.userRoles.facilitator,Ta.role=oa.SYSTEM_ROLES.FACILITATOR;else if(Pa=oa._getCustomRoleByName(Ta.rolename))Ta.rolename=Pa.name,Ta.role=Pa.id;Ta.level||(Ta.level=wa.getValue(Na,oa.i18n.organizationInvite.csv.level.toLowerCase())||oa.LICENSE_LEVELS.TWO);
Ta.role&&Ta.level===oa.LICENSE_LEVELS.ONE_PLUS_EDIT&&!oa._isValidLevelOnePlusEditRole(Ta.role)?(Ta.rolename=oa.i18n.organizationInvite.userRoles.viewerEdit,Ta.role=oa.SYSTEM_ROLES.DATA_EDITOR):Ta.role&&Ta.level===oa.LICENSE_LEVELS.ONE&&!oa._isValidLevelOneRole(Ta.role)&&(Ta.rolename=oa.i18n.organizationInvite.userRoles.viewer,Ta.role=oa.SYSTEM_ROLES.VIEWER);!oa._isPortal&&oa._isAdmin&&(Ta.userType="true"===(wa.getValue(Na,oa.i18n.organizationInvite.csv.allowEsriAccess.toLowerCase())||"").toLowerCase()?
"both":"");115<(null===(Va=Ta.firstname)||void 0===Va?void 0:Va.length)&&(Ta.firstname=Ta.firstname.substring(0,115));115<(null===(Ya=Ta.lastname)||void 0===Ya?void 0:Ya.length)&&(Ta.lastname=Ta.lastname.substring(0,115));if(Ta.firstname||Ta.lastname)Ta.fullname=U.default.createFullName({firstName:Ta.firstname,lastName:Ta.lastname});oa._isPortal&&"saml"===oa._userType&&(Xa=null===(Wa=wa.getValue(Na,oa.i18n.myOrganization.inviteMembers.idType.toLowerCase()))||void 0===Wa?void 0:Wa.toLowerCase(),Va=
oa.hasOIDC&&-1<(null===Xa||void 0===Xa?void 0:Xa.indexOf("oidc")),Ta.targetUserProvider=Va?"oidc_".concat(oa._currentOIDC.id):oa._enterpriseProvider,Ta.provider=oa._enterpriseProvider,oa._addMode&&oa._samlSuffix&&(Ta.idpUsername=oa._removeSAMLSuffix(Ta.username)),Va&&(Ta.idpUsername=Ta.username,Ta.username=U.default.createValidOrgUsername(Ta.email.split("@")[0],"",oa._minUsernameLength,oa._maxUsernameLength)));oa._containsInvalidFields(Ta,Ha)&&(Ta.invalid=!0,ya++);Ja.push(Ta)}));0<Ja.length?Ja.forEach(function(Na){oa._addUserIfNotAlreadyAdded(Na)||
ya--}):Ma?C.default.showAlert("error",d.default.substitute(l.default.organizationInvite.multipleUsernameCollision,{username:Ka})):C.default.showAlert("error",l.default.organizationInvite.step2Create.invalid.uploadNoUsers);oa._displayFileResult()}})};qa.prototype._displayFileResult=function(){return f.__awaiter(this,void 0,void 0,function(){var W,ba,oa,wa,Ea,Ga=this,Ja;return f.__generator(this,function(ya){switch(ya.label){case 0:return this._fileName.innerHTML=this._currentFileName,this._fileMembersNum.innerHTML=
d.default.substitute(l.default.myOrganization.inviteMembers.membersNum,{number:this._membersInFile.length}),W=this._getFormFields(),ba={},oa=!0,this.hasSAML&&this.hasOIDC&&"add-enterprise-id"===this._selectedMethod&&W.push({name:"idType",csvKey:this.i18n.myOrganization.inviteMembers.idType,methods:["add-enterprise-id"]}),wa=[],this._membersInFile.forEach(function(Ha){W.forEach(function(Ia){(Ia.validators?Ia.validators:[]).forEach(function(Ka){if(!Ka.isValid(Ha[Ia.name])||"password"===Ia.name&&Ha.password.toLowerCase()===
Ha.username.toLowerCase())Ha.errors||(Ha.errors=[]),Ha.errors.includes(Ia.name)||(Ha.errors.push(Ia.name),oa=!1,ba[Ia.name]?ba[Ia.name]++:ba[Ia.name]=1)})});!W.some(function(Ia){return"username"===Ia.name})||Ha.errors&&-1!==Ha.errors.indexOf("username")||wa.push(Ha.username)}),[4,U.default.checkUsernames(wa,!this.portal.isPortal)];case 1:return Ea=ya.sent(),(null===(Ja=Ea.usernames)||void 0===Ja?0:Ja.length)&&this._membersInFile.forEach(function(Ha){Ea.usernames.forEach(function(Ia){Ia.requested===
Ha.username&&Ia.suggested!==Ia.requested&&(Ha.errors||(Ha.errors=[]),Ha.errors.push("username-taken"))})}),0===this._membersInFile.length?this._fileBox.classList.add("invite-members__file-box--hasErrors"):oa?(this._fileBox.classList.remove("invite-members__file-box--hasErrors"),E.default.hideNode(this.domNode.querySelector(".js-compile-error-icon"))):(this._fileBox.classList.add("invite-members__file-box--hasErrors"),E.default.showNode(this.domNode.querySelector(".js-compile-error-icon"))),0<this._importedUsernamesUpdated?
this._fileBox.classList.add("invite-members__file-box--hasWarnings"):this._fileBox.classList.remove("invite-members__file-box--hasWarnings"),0<this._membersInFile.length?(E.default.disableNode(this._fileAddBtn,!1),W.forEach(function(Ha){var Ia=Ga.domNode.querySelector(".js-field-".concat(Ha.name));Ia&&(ba[Ha.name]?(Ia.classList.remove("invite-members__field-row--success"),Ia.classList.remove("invite-members__field-row--has-warnings"),Ia.classList.add("invite-members__field-row--has-errors"),Ia.querySelector(".js-error-count").textContent=
ba[Ha.name]):("username"===Ha.name||"idpUsername"===Ha.name)&&0<Ga._importedUsernamesUpdated?(Ia.classList.remove("invite-members__field-row--success"),Ia.classList.remove("invite-members__field-row--has-errors"),Ia.classList.add("invite-members__field-row--has-warnings"),Ia.querySelector(".js-warning-count").textContent=String(Ga._importedUsernamesUpdated)):(Ia.classList.remove("invite-members__field-row--has-errors"),Ia.classList.remove("invite-members__field-row--has-warnings"),Ia.classList.add("invite-members__field-row--success")))})):
0===this._membersInFile.length&&E.default.disableNode(this._fileAddBtn,!0),E.default.hideNode(this._fileDragDropText),E.default.showNode(this._fileName),E.default.hideNode(this._fileDesc),E.default.hideNode(this._fileInfo),E.default.hideNode(this._filePanel),this._newMembers=f.__spreadArray(f.__spreadArray([],this._newMembers,!0),this._membersInFile,!0),this.renderProcessMembers(),[2]}})})};qa.prototype._addNewMembers=function(){this._renderMemberList();this._updateStep2View()};qa.prototype._renderMemberList=
function(){var W=this,ba=this._searchTerm.toLowerCase();this._filteredMembers=this._newMembers.filter(function(oa){var wa,Ea,Ga,Ja,ya;return-1!==(null===(wa=oa.fullname)||void 0===wa?void 0:wa.toLowerCase().indexOf(ba))||-1!==(null===(Ea=oa.username)||void 0===Ea?void 0:Ea.toLowerCase().indexOf(ba))||-1!==(null===(Ga=oa.email)||void 0===Ga?void 0:Ga.toLowerCase().indexOf(ba))||-1!==(null===(Ja=oa.licenseTypeName)||void 0===Ja?void 0:Ja.toLowerCase().indexOf(ba))||-1!==(null===(ya=oa.rolename)||void 0===
ya?void 0:ya.toLowerCase().indexOf(ba))});this._page.start>this._filteredMembers.length&&(this._page.start=(Math.ceil(this._filteredMembers.length/this._page.num)-1)*this._page.num+1,this._page.start=1>this._page.start?1:this._page.start);this._newMemberRows.forEach(function(oa){oa.destroy()});this._newMemberRows=[];this._page.total=this._filteredMembers.length;this._page.end=this._page.start+this._page.num-1;this._page.nextStart=this._page.end+1;this._page.end>=this._page.total&&(this._page.end=
this._page.total,this._page.nextStart=-1);this._memberListContent.innerHTML="";this._filteredMembers.forEach(function(oa,wa){wa+=1;wa>=W._page.start&&wa<=W._page.end&&W._addNewMemberRow(oa)});this._pagination.render(this._page);this._filteredMembers.length>this._page.num&&E.default.showNode(this._pagination.domNode);this._membersNumbers.innerHTML=B.default.getPageRangeString({start:0===this._page.total?0:this._page.start,end:this._page.end,total:this._page.total});this._updateSelectionSection()};
qa.prototype._containsInvalidFields=function(W,ba){var oa=!0;ba.some(function(wa){wa.validators&&(wa.validators.some(function(Ea){Ea.isValid(W[wa.name])||(oa=!1);return!oa}),"password"===wa.name&&W.password===W.username&&(oa=!1));return!oa});return!oa};qa.prototype._usernameContainsAlphaNumeric=function(W){return W&&!!this._usernameRegExp.test(W)};qa.prototype._usernameContainsAlphaNumericPortal=function(W){return W&&!!this._userNamePortalRegExp.test(W)};qa.prototype._usernameValidStartEnd=function(W){return W&&
!!this._usernameStartEndRegExp.test(W)};qa.prototype._isValidLevelOneRole=function(W){return this._isValidViewerRole(W,Fa.default.extraLevelOnePrivileges)};qa.prototype._isValidLevelOnePlusEditRole=function(W){return this._isValidViewerRole(W,f.__spreadArray(f.__spreadArray([],Fa.default.extraLevelOnePrivileges,!0),["features:user:edit"],!1))};qa.prototype._isValidViewerRole=function(W,ba){var oa,wa=this._viewerRole;ba=(null===ba||void 0===ba?0:ba.length)?ba.concat(this._viewerRole.privileges):this._viewerRole.privileges;
for(var Ea=0;Ea<this.roles.length;Ea++)if((null===(oa=this.roles[Ea])||void 0===oa?0:oa.privileges)&&this.roles[Ea].id===W)return wa&&!Fa.default.exceedsRolePrivileges(ba,this.roles[Ea].privileges);return!1};qa.prototype._isValidEnterpriseGroupRole=function(){var W=0!==this._enterpriseGroupRoleSelect.value.length;0===this._enterpriseGroupRoleSelect.value.length?(this._enterpriseGroupRoleSelect.domNode.classList.add("input-error","invite-members__form-role-error"),this._enterpriseGroupRoleError.classList.add("is-active")):
(this._enterpriseGroupRoleSelect.domNode.classList.remove("input-error","invite-members__form-role-error"),this._enterpriseGroupRoleError.classList.remove("is-active"));return W};qa.prototype._getCustomRoleByName=function(W){var ba;W&&(ba=H.default.find(this._getFilteredRoles(),function(oa){var wa;return(null===(wa=oa.name)||void 0===wa?void 0:wa.toLowerCase())===W.toLowerCase()}));return ba};qa.prototype._getCustomRoleName=function(W){if(W){var ba=H.default.find(this.roles,function(wa){return wa.id&&
wa.id===W});if(ba)var oa=ba.name}return oa};qa.prototype._getDefaultUserRoleName=function(){return this._isPortal?this._portalDefaultRole===this._orgAdminRole||this._portalDefaultRole===this._accountAdminRole?this.i18n.organizationInvite.userRoles.admin:this._portalDefaultRole===this._orgPublisherRole||this._portalDefaultRole===this._accountPublisherRole?this.i18n.organizationInvite.userRoles.publisher:this._portalDefaultRole===this._orgUserRole||this._portalDefaultRole===this._accountUserRole?this.i18n.organizationInvite.userRoles.user:
this._getCustomRoleName(this._portalDefaultRole):this._userDefaults&&this._userDefaults.role?this._getCustomRoleName(this._userDefaults.role):this.i18n.organizationInvite.userRoles.user};qa.prototype._isSaml=function(){return!!(this._isPortal&&this._addMode&&"saml"===this._userType&&this._samlSuffix)};qa.prototype._removeSAMLSuffix=function(W){var ba="_"+this._samlSuffix;return W.lastIndexOf(ba)===W.length-ba.length?W.substring(0,W.lastIndexOf(ba)):W};qa.prototype._addSAMLSuffix=function(W){var ba=
W&&this._samlSuffix,oa="_"+this._samlSuffix,wa=ba&&-1===W.indexOf(oa);ba=ba&&W.lastIndexOf(oa)===W.length-oa.length;return wa||ba?W+oa:W};qa.prototype._generateUsername=function(W,ba){var oa="",wa=0<ba?""+ba:"",Ea=this.portal.urlKey?"_".concat(this.portal.urlKey):"";oa=za.default.isValidEmailAddress(W)?W.split("@")[0]:""+ba;W=oa.length+wa.length+Ea.length;return oa=oa.substring(0,oa.length-(W>this._maxUsernameLength?W%this._maxUsernameLength:0))+wa+Ea};qa.prototype._getSeparator=function(W){var ba=
0,oa="";[",",";","|","\t"," "].forEach(function(wa){var Ea=W.split(wa).length;Ea>ba&&(" "!==wa||!oa)&&(ba=Ea,oa=wa)});return oa};qa.prototype._onMethodSelect=function(){var W=this._getSelectedInviteMethodContainer();this._selectedMethod=this._getInviteMethod();-1===this._selectedMethod.indexOf("add")?(this._memberKeyField="email",this.domNode.classList.add("invite-members__is-invite-method")):(this._memberKeyField="username",this.domNode.classList.remove("invite-members__is-invite-method"));"add-enterprise"===
this._selectedMethod?(this._userType=this._supportsLDAP?"ldap":"windows",this._supportsEnterpriseGroups&&this._overlayBody.classList.add("has-enterprise-group-support")):this._overlayBody.classList.remove("has-enterprise-group-support");"add-saml"===this._selectedMethod&&(this._userType="saml");this._newMemberForm&&(this._newMemberForm.userType=this._userType);(0,t.default)(".invite-members__invite-method-item",this.domNode).removeClass("invite-members__invite-method-item--selected");a.default.add(W,
"invite-members__invite-method-item--selected")};qa.prototype._updateRequiredFields=function(){var W=this,ba=this._getFormFields(),oa="";E.default.hideNode(this.domNode.querySelector(".js-field-idType"));if("add-enterprise-id"===this._selectedMethod){var wa=this.i18n.myOrganization.inviteMembers,Ea=wa.samlId,Ga=wa.oidcId;wa=wa.id;this.hasSAML&&this.hasOIDC?(oa=wa,"add-enterprise-id"===this._selectedMethod&&E.default.showNode(this.domNode.querySelector(".js-field-idType"))):this.hasSAML?oa=Ea:this.hasOIDC&&
(oa=Ga);this.domNode.querySelector(".js-idpusername-csv-label").textContent=oa}"add-saml"===this._selectedMethod&&this.hasSAML&&this.hasOIDC&&E.default.showNode(this.domNode.querySelector(".js-field-idType"));this._userFields.forEach(function(Ja){var ya=ba.filter(function(Ia){return Ia.csvKey===Ja.csvKey})[0],Ha=W.domNode.querySelector(".js-field-".concat(Ja.name));ya?("idpUsername"===ya.name&&oa&&(ya.csvKey=oa),E.default.showNode(Ha)):E.default.hideNode(Ha)})};qa.prototype._getFormFields=function(){var W=
this;return this._userFields.filter(function(ba){return"all"===ba.methods[0]||-1!==ba.methods.indexOf(W._selectedMethod)})};qa.prototype._getSelectedInviteMethodContainer=function(){var W=this._inviteMethods.filter(function(ba){return ba.checked})[0];return W?W.parentNode.parentNode:null};qa.prototype._getInviteMethod=function(){var W;this._inviteMethods.some(function(ba){ba.checked&&(W=ba.value);return ba.checked});return W};qa.prototype._handleGroupChange=function(W){this._selectedGroups=W;this._selectedGroupsDropdown.update(W)};
qa.prototype._clearSelectedGroups=function(){this.groupBrowser&&this.groupBrowser.deselectGroups(this._selectedGroups.map(function(W){return W.id}))};qa.prototype.hideFormError=function(){var W,ba;null===(W=this._mobileError)||void 0===W?void 0:W.hide();null===(ba=this.overlayConfirm)||void 0===ba?void 0:ba.hide();this.overlayConfirm=void 0};qa.prototype._onFormError=function(W){var ba=this;W&&(ma.default.isMobile()?(W||(W=this.i18n.myOrganization.inviteMembers.completeAllFields),this._mobileError.show({title:this.i18n.myOrganization.inviteMembers.invalidFields,
description:W,buttonText:this.i18n.myOrganization.inviteMembers.ok})):(this.overlayConfirm||(this.overlayConfirm=new ta.default({title:this.i18n.myOrganization.inviteMembers.invalidFields,description:W,showActions:!1,noMask:!0,iconKey:"exclamation-mark-triangle-f",cssClasses:"full-width text-constrain overlay-confirm-pane--error"}),this._overlay.appendChild(this.overlayConfirm.domNode),u.default.once(this.overlayConfirm,"close",function(){ba.overlayConfirm=void 0})),this.overlayConfirm.show()))};
qa.prototype._onGroupRemoved=function(W){this.domNode.querySelector(".gb-search-area__input").focus();this.groupBrowser.deselectGroups([W.id])};qa.prototype._onEnterpriseGroupRoleChange=function(){this._isValidEnterpriseGroupRole()};return qa=f.__decorate([(0,Da.default)(D.default,x.default,Ba.default,la.default)],qa)}()})},"arcgisonline/pages/organization/widgets/SelectedGroups":function(){define("require exports tslib calcite-web/js/calcite-web dojo/text!./templates/SelectedGroups.html dojo/i18n!../../../nls/arcgisonline dojo/string dojo/topic dojo/Evented dijit/_TemplatedMixin dijit/_WidgetBase ../../utils/icons ../../utils/arrays ../../utils/dom ../../dijit/InviteMembers/SelectedGroupItem arcgisonline/tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);return function(){function l(n,k){this.templateString=h.default;this.i18n=d.default;this.icons=u.default;this.dropdownClass="";this._selectedGroupItems=[]}l.prototype.postCreate=
function(){this.inherited(arguments);c.default.dropdown();this.own(a.default.subscribe("group/remove",this._handleGroupRemove.bind(this)))};l.prototype._handleGroupRemove=function(n){var k=g.default.findIndex(this._selectedGroupItems,function(r){return r.id===n.id});k=this._selectedGroupItems.splice(k,1).shift();k.destroy();k=null;this.emit("remove",n)};l.prototype._clearSelectedGroupItems=function(){this._selectedGroupItems.forEach(function(n){n.destroy();n=null});this._selectedGroupItems=[];this._list.innerHTML=
""};l.prototype.update=function(n){var k=this;this._clearSelectedGroupItems();n.forEach(function(r){r=new v.default({item:r,portal:k.portal});k._selectedGroupItems.push(r)});m.default.appendChildren(this._selectedGroupItems.map(function(r){return r.domNode}),this._list);this._count.textContent=b.default.substitute(this.i18n.myOrganization.inviteMembers.assignedGroups,{n:n.length});m.default.showHide(this.domNode,0<n.length)};return l=f.__decorate([(0,p.default)(t.default,q.default,e.default)],l)}()})},
"arcgisonline/pages/dijit/InviteMembers/SelectedGroupItem":function(){define("require exports tslib ../../utils/formatters ../../organization/widgets/GroupIcon dijit/_WidgetBase dijit/_TemplatedMixin dijit/a11yclick dojo/text!./templates/SelectedGroupItem.html dojo/i18n!../../../nls/arcgisonline ../../../tsutils/declareDecorator dojo/topic".split(" "),function(S,J,f,c,h,d,b,a,e,q,t,u){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);
e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);return function(){function g(m,v){this.templateString=e.default;this.i18n=q.default;this.hide=c.default.hide;this.show=c.default.show;this.firstChar=c.default.firstChar;this.stripHTML=c.default.stripHTML}g.prototype.postCreate=function(){this.inherited(arguments);this._groupIcon=new h.default({group:this.item,portal:this.portal},this._groupIcon);this._addEventListeners()};g.prototype._addEventListeners=function(){this.own((0,a.default)(this.domNode.querySelector(".js-remove-group"),
this._removeGroup.bind(this)))};g.prototype._removeGroup=function(m){m.stopPropagation();u.default.publish("group/remove",{id:this.item.id})};return g=f.__decorate([(0,t.default)(d.default,b.default)],g)}()})},"arcgisonline/pages/organization/widgets/LicensesOverlay":function(){define("require exports tslib dojo/topic dojo/text!./templates/LicensesOverlay.html dojo/i18n!../../../nls/arcgisonline dojo/string dijit/_TemplatedMixin dijit/_WidgetBase arcgisonline/pages/dijit/Overlay ../../dijit/InviteMembers/LicenseAssignments arcgisonline/tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);return function(){function g(m,v){this.title=d.default.myOrganization.inviteMembers.licenses;this.i18n=d.default;this.overlayContents=b.default.substitute(h.default,{i18n:this.i18n});this.constrain=!0;this.maxWidth=850;this.closeOnScrimClick=!1;this.topicPrefix=
""}g.prototype.postCreate=function(){this.inherited(arguments);this.licenseAssignments=new t.default({entitlements:this.entitlements,portal:this.portal,members:this.members,userLicenseTypes:this.userLicenseTypes,appBundles:this.appBundles},this.domNode.querySelector(".js-panels-container"))};g.prototype.startup=function(){var m=this;return this.licenseAssignments.startup().then(function(){m._overlayLoader.classList.remove("is-active")})};g.prototype.open=function(){this.inherited(arguments);this._overlayLoader.classList.add("is-active")};
g.prototype.setSelectedState=function(m){this.licenseAssignments.setSelectedState(m)};g.prototype.setAppLimits=function(m,v){this.licenseAssignments.setAppLimits(m,v)};g.prototype.close=function(){this.inherited(arguments)};g.prototype.handlePrimary=function(){c.default.publish("".concat(this.topicPrefix,"-licenses/save"),this.licenseAssignments.getSelectedState());this.close()};g.prototype.handleCancel=function(){c.default.publish("".concat(this.topicPrefix,"-licenses/cancel"));this.close()};return g=
f.__decorate([(0,u.default)(e.default,a.default,q.default)],g)}()})},"arcgisonline/pages/components/ProcessMembers/ProcessMembers":function(){define("require exports tslib preact ./ReviewAndFixPanel ./ReviewMembers/ReviewMembers".split(" "),function(S,J,f,c,h,d){Object.defineProperty(J,"__esModule",{value:!0});h=f.__importDefault(h);d=f.__importDefault(d);J.default=function(b){var a=b.fileName,e=b.invitations,q=b.userTypes,t=b.fields,u=b.onFileChange,g=b.onEdit,m=b.onAdd;b=b.onRemoveMembers;var v=
e.some(function(l){var n;return 0<(null===(n=l.errors)||void 0===n?void 0:n.length)}),p=0;e.forEach(function(l){var n;if(null===(n=l.errors)||void 0===n?0:n.length)p+=l.errors.length});return(0,c.h)("div",null,(0,c.h)(h.default,{fileName:a,hasErrors:v,errorCount:p,onFileChange:u}),(0,c.h)(d.default,{invitations:e,userTypes:q,fields:t,onEdit:g,onAdd:m,onRemoveMembers:b}))}})},"arcgisonline/pages/components/ProcessMembers/ReviewAndFixPanel":function(){define("require exports tslib preact preact/hooks dojo/i18n!../../../nls/arcgisonline xstyle/css!./ReviewAndFixPanel.css".split(" "),
function(S,J,f,c,h,d){Object.defineProperty(J,"__esModule",{value:!0});d=f.__importDefault(d);J.default=function(b){var a=b.fileName,e=b.hasErrors,q=b.errorCount,t=b.onFileChange;b=f.__assign(f.__assign(f.__assign({},d.default.common),d.default.myOrganization.inviteMembers),d.default.myOrganization.inviteMembers.reviewStep);var u=(0,h.useRef)(null);return(0,c.h)("div",{class:"review-and-fix-panel trailer-1"},(0,c.h)("h2",{class:"font-size-2 trailer-half"},b.reviewAndFix),(0,c.h)("div",{class:"flex"},
(0,c.h)("div",null,(0,c.h)("div",{class:"trailer-quarter"},b.uploadedFile),(0,c.h)("div",{class:"flex flex-align-center"},(0,c.h)("div",{class:"flex flex-align-center review-and-fix-panel__upload-container"},(0,c.h)("div",{class:"flex flex-1 margin-right-1"},(0,c.h)("calcite-icon",{icon:"file-csv",class:"margin-right-half"}),a),(0,c.h)("calcite-button",{class:"flex-1",appearance:"transparent",onClick:function(){u.current.click()}},b.chooseDiffFile),(0,c.h)("input",{type:"file",ref:u,onChange:function(){t(u.current.files[0])},
class:"hide","aria-hidden":"true"})),e&&(0,c.h)("div",{class:"flex margin-left-2"},(0,c.h)("calcite-icon",{icon:"information",class:"margin-right-half"}),(0,c.h)("p",{class:"trailer-0"},b.errorsInFile.replace("${num}","".concat(q))))))))}})},"arcgisonline/pages/components/ProcessMembers/ReviewMembers/ReviewMembers":function(){define("require exports tslib preact preact/hooks dojo/i18n!../../../../nls/arcgisonline dojo/topic ../../../pageUtil ../../../utils/culture ./ReviewMemberRow ../../../dijit/Pagination xstyle/css!./ReviewMembers.css".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t){Object.defineProperty(J,"__esModule",{value:!0});d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);J.default=function(u){function g(T,O){return T?-1<T.toLowerCase().indexOf(O):!1}function m(T){if(!C)return!0;var O=C.toLowerCase();return g(T.fullname,O)||g(T.email,O)||g(T.username,O)?!0:!1}function v(T){K(function(O){var Z=G.find(function(na){return na.tempId===T});return Z?f.__spreadArray(f.__spreadArray([],
O,!0),[Z],!1):f.__spreadArray([],O,!0)})}function p(T){K(function(O){return O.filter(function(Z){return Z.tempId!==T})})}function l(){K([])}function n(){K([]);z(E)}function k(T){T.noSort||(T.title===I?N(function(O){return"desc"===O?"asc":"desc"}):(L(T.title),N("asc")))}function r(T){var O;if("member"===I)return T.email||T.username||"";if("errors"===I)return(null===(O=T.errors)||void 0===O?void 0:O.length)||0;if("userType"===I)return T.licenseType?T.licenseTypeName:"";if("role"===I)return T.role?T.rolename:
""}function w(T,O){T=r(T);O=r(O);return"asc"===M?T>O?1:T<O?-1:0:T>O?-1:T<O?1:0}function x(){return G.filter(m).sort(w).slice(aa.start-1,aa.end)}var D,G=u.invitations,F=u.userTypes,A=u.onEdit,y=u.onAdd,z=u.onRemoveMembers;u=f.__assign(f.__assign({},d.default.myOrganization.inviteMembers),d.default.myOrganization.inviteMembers.reviewStep);var B=(0,h.useState)(""),C=B[0],H=B[1];B=(0,h.useState)([]);var E=B[0],K=B[1];B=(0,h.useState)("errors");var I=B[0],L=B[1];B=(0,h.useState)("desc");var M=B[0],N=B[1],
P=(0,h.useState)(!1);B=P[0];var R=P[1],Y=(0,h.useState)(!1);P=Y[0];var ja=Y[1];Y=(0,h.useState)({start:1,end:20>G.length?G.length:20,nextStart:-1,total:G.length,num:20});var aa=Y[0],da=Y[1];Y=(0,h.useState)(null);var ra=Y[0],ca=Y[1],fa=(0,h.useRef)(null);(0,h.useEffect)(function(){var T=new t.default({start:aa.start,num:aa.num,topic:"review-members-",hideDropdown:!0},fa.current);T.domNode.classList.remove("padding-leader-1");T.render(aa);ca(T);var O=b.default.subscribe("".concat("review-members-",
"pagination/page"),function(Z){da(Z)});return function(){O.remove()}},[]);(0,h.useEffect)(function(){null===ra||void 0===ra?void 0:ra.render(aa)},[aa,ra]);(0,h.useEffect)(function(){if(aa.total!==G.length){var T=aa.start>G.length&&1<=aa.start-20?aa.start-20:aa.start,O=T+20-1;O=O>G.length?G.length:O;da(function(Z){return f.__assign(f.__assign({},Z),{start:T,end:O,total:la})})}},[G]);(0,h.useEffect)(function(){var T=x();R(T.length&&T.every(function(O){return E.includes(O)}));ja(T.some(function(O){return E.includes(O)})&&
T.some(function(O){return!E.includes(O)}))},[E,G]);var la=G.length;Y=a.default.getPageRangeString({start:aa.start,end:aa.end,total:la});var ta=[{title:"member",text:u.member},{title:"errors",text:u.fieldErrors},{title:"userType",text:u.licenseType},{title:"role",text:u.role},{title:"licenses",text:u.includedLicenses,noSort:!0}],Q=(null===(D=ta.find(function(T){return T.title===I}))||void 0===D?void 0:D.text)||"";return(0,c.h)("div",{class:"review-members"},(0,c.h)("div",{class:"flex flex-align-center review-members__top-bar"},
(0,c.h)("div",null,(0,c.h)("calcite-button",{appearance:"outline","icon-start":"plus-circle",onClick:function(){return y()}},u.addSingle)),(0,c.h)("div",{class:"flex-1 review-members__search-wrapper"},(0,c.h)("div",{class:"position-relative review-members__search-container"},(0,c.h)("calcite-icon",{icon:"search",scale:"s",class:"review-members__search-icon"}),(0,c.h)("input",{type:"text",class:"review-members__search-input padding-left-2",placeholder:u.searchMembers,onInput:function(T){H(T.target.value)}}))),
(0,c.h)("div",null,(0,c.h)("calcite-dropdown",{oncalciteDropdownItemSelect:function(T){T=T.target.dataset.title;["asc","desc"].includes(T)?N(T):L(T)}},(0,c.h)("calcite-button",{slot:"trigger",iconStart:"sort-".concat("asc"===M?"ascending":"descending","-arrow"),appearance:"transparent"},Q),(0,c.h)("calcite-dropdown-group",{groupTitle:u.sortBy},function(){return ta.filter(function(T){return!T.noSort}).map(function(T){return(0,c.h)("calcite-dropdown-item",{"data-title":T.title,key:"sort-by-".concat(T.title),
selected:I===T.title},T.text)})}()),(0,c.h)("calcite-dropdown-group",{"group-title":u.sortDirection},(0,c.h)("calcite-dropdown-item",{"data-title":"asc",selected:"asc"===M},u.ascending),(0,c.h)("calcite-dropdown-item",{"data-title":"desc",selected:"desc"===M},u.descending))))),(0,c.h)("div",{class:"flex review-members__page-range-wrapper"},0===E.length&&(0,c.h)("div",null,Y),0<E.length&&(0,c.h)("div",{class:"flex flex-1"},(0,c.h)("div",{class:"flex-1 flex"},(0,c.h)("div",{class:"review-members__num-selected"},
e.default.getString(u.selectedNumber,E.length)),(0,c.h)("calcite-button",{appearance:"transparent",onClick:l},u.clearSelection)),(0,c.h)("calcite-button",{appearance:"transparent",iconStart:"trash",kind:"danger",onClick:n},u.remove))),(0,c.h)("div",{class:"review-members__table-wrapper"},(0,c.h)("table",{class:"review-members__table"},(0,c.h)("thead",null,(0,c.h)("tr",null,(0,c.h)("th",null,(0,c.h)("calcite-checkbox",{checked:B,oncalciteCheckboxChange:function(T){T.target.checked?K(f.__spreadArray([],
x(),!0)):K([])},indeterminate:P})),ta.map(function(T){return(0,c.h)("th",{key:T.title,class:T.title===I?"sort-field--active":"",tabIndex:T.noSort?-1:0,onClick:function(){k(T)},onKeyUp:function(O){" "!==O.key&&"Enter"!==O.key||k(T)}},(0,c.h)("div",{class:"flex flex-align-center"},(0,c.h)("div",{class:"flex-1"},T.text),T.title===I&&(0,c.h)("calcite-icon",{scale:"s",icon:"desc"===M?"caret-down":"caret-up"})))}),(0,c.h)("th",null))),(0,c.h)("tbody",null,function(){return x().map(function(T){return(0,c.h)(q.default,
{key:T.tempId,userTypes:F,member:T,onEdit:function(){A(T.tempId)},onSelect:function(){return v(T.tempId)},onDeselect:function(){return p(T.tempId)},selected:E.some(function(O){return T.tempId===O.tempId})})})}()))),(0,c.h)("div",{class:"padding-trailer-1"},(0,c.h)("div",{ref:fa})))}})},"arcgisonline/pages/components/ProcessMembers/ReviewMembers/ReviewMemberRow":function(){define("require exports tslib preact preact/hooks dojo/i18n!../../../../nls/arcgisonline ../../../utils/strings ../../../utils/organization ../../../dijit/InviteMembers/AppIconList ../../../../esriGeowConfig".split(" "),
function(S,J,f,c,h,d,b,a,e,q){Object.defineProperty(J,"__esModule",{value:!0});d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);J.default=function(t){var u=t.member,g=t.userTypes,m=t.onEdit,v=t.onSelect,p=t.onDeselect;t=t.selected;var l=f.__assign(f.__assign(f.__assign({},d.default.common),d.default.myOrganization.inviteMembers),d.default.myOrganization.inviteMembers.reviewStep),n=(0,h.useRef)(null);(0,h.useEffect)(function(){var I,
L,M;n.current.innerHTML="";var N=g.find(function(ja){return u.userLicenseType&&ja.id===u.userLicenseType});if(!(-1<(null===(I=u.errors)||void 0===I?void 0:I.indexOf("licenseTypeName")))&&N){0===N.apps.length&&(n.current.textContent=l.none);I=document.createElement("div");n.current.appendChild(I);var P=q.default.self,R=(null===(L=N.apps)||void 0===L?void 0:L.filter(function(ja){return ja.isAppBundle}))||[];L=(null===(M=N.apps)||void 0===M?void 0:M.filter(function(ja){return!ja.isAppBundle}))||[];L=
a.default.transformAppBundleApps(L,P.isPortal);M=f.__spreadArray(f.__spreadArray([],R,!0),L,!0);var Y=new e.default({apps:M,portal:P},I);window.setTimeout(function(){Y.startup()},300)}},[u.licenseTypeName]);var k=u.firstname,r=u.lastname,w=u.fullname,x=u.email,D=u.username,G=u.licenseTypeName,F=u.role,A=u.rolename,y=u.errors,z="",B="";k&&r?(B="".concat(k.substring(0,1)).concat(r.substring(0,1)),z="".concat(k).concat(r)):B=(z=x||D||"")?z.substring(0,2):"";k="";if(z=b.default.hexToRgb(b.default.stringToHex(z)))k=
z.g,r=z.b,k="rgba(".concat(z.r,", ").concat(k,", ").concat(r,", 0.5)");z=-1<(null===y||void 0===y?void 0:y.indexOf("firstname"))||-1<(null===y||void 0===y?void 0:y.indexOf("lastname"));r=!(null===w||void 0===w||!w.trim())||z;var C="";C=r?z?l.nameMissing:w.trim():x||D||"";w=!(null===y||void 0===y?0:y.length);var H=null===y||void 0===y?void 0:y.every(function(I){return"firstname"===I||"lastname"===I}),E="";if(!w&&!H&&1===(null===y||void 0===y?void 0:y.length)){var K=y[0];"licenseTypeName"===K?E=l.invalidUserType:
"username"===K?E=l.invalidUsername:"username-taken"===K?E=l.usernameTaken:"rolename"===K?E=l.invalidRole:"email"===K&&(E=l.invalidEmail)}A=F?A:l.invalidRole;return(0,c.h)("tr",{class:"review-member-row"},(0,c.h)("td",null,(0,c.h)("calcite-checkbox",{class:"js-review-member-cb",checked:t,oncalciteCheckboxChange:function(I){I.target.checked?v():p()},label:d.default.GroupWidget.selectTitle.replace("${title}",D)})),(0,c.h)("td",null,(0,c.h)("div",{class:"flex flex-align-center"},(0,c.h)("div",{class:"invite-members__member-thumb margin-right-half",
style:{"background-color":k}},B),(0,c.h)("div",null,(0,c.h)("div",{class:"avenir-demi ".concat(z?"review-members__error-text":"")},C),r&&(0,c.h)("div",{class:"font-size--1 flex flex-align-center"},(0,c.h)("div",{title:D,class:"text-ellipsis review-members__username-width"},D),!!D&&!!x&&(0,c.h)("span",{class:"org-member-dot-separator"},"\u2022"),x)))),(0,c.h)("td",null,!w&&(0,c.h)("div",{class:"flex flex-align-center"},(0,c.h)("calcite-icon",{icon:"exclamation-mark-triangle-f",scale:"s",class:"review-members__error-icon margin-right-half"}),
H?l.nameRequired:E?E:l.multipleErrors),w&&(0,c.h)("div",{class:"flex flex-align-center"},(0,c.h)("calcite-icon",{icon:"check-circle-f",scale:"s",class:"review-members__check-icon margin-right-half"}),l.noErrors)),(0,c.h)("td",null,-1<(null===y||void 0===y?void 0:y.indexOf("licenseTypeName"))?(0,c.h)("span",{class:"review-members__error-text"},l.invalidType):G),(0,c.h)("td",{title:A},F?A:(0,c.h)("span",{class:"review-members__error-text"},A)),(0,c.h)("td",null,(0,c.h)("div",{ref:n})),(0,c.h)("td",
{class:"review-members__edit-col"},(0,c.h)("calcite-button",{id:"review-member-edit__".concat(u.tempId),appearance:"transparent","icon-start":"edit-attributes",onClick:function(){m()}},l.edit)))}})},"arcgisonline/pages/components/ProcessMembers/NewMemberModal":function(){define("require exports tslib preact preact/hooks preact/compat dojo/i18n!../../../nls/arcgisonline ../../dijit/InviteMembers/MemberForm".split(" "),function(S,J,f,c,h,d,b,a){Object.defineProperty(J,"__esModule",{value:!0});b=f.__importDefault(b);
a=f.__importDefault(a);J.default=function(e){function q(){l(!1);g()}var t=e.formParameters,u=e.onSave,g=e.onCancel;e=f.__assign(f.__assign({},b.default.common),b.default.myOrganization.inviteMembers);var m=(0,h.useRef)(null),v=(0,h.useState)(!1),p=v[0],l=v[1];v=(0,h.useState)(null);var n=v[0],k=v[1];(0,h.useEffect)(function(){var r=new a.default(f.__assign(f.__assign({},t),{inModal:!0}),m.current);if(t.isEdit){if(t.fields.some(function(w){return"username"===w.name}))r.onUsernameInputChange();if(t.fields.some(function(w){return"idpUsername"===
w.name}))r.onEnterpriseIDInputChange()}k(r);r.on("update, add",function(w){l(!1);u(w)});window.setTimeout(function(){l(!0)},300)},[]);v=t.isEdit?e.editMember:e.newMember;return(0,c.h)(c.Fragment,null,(0,d.createPortal)((0,c.h)("calcite-modal",{open:p,role:"dialog","aria-modal":"true","aria-label":v,oncalciteModalClose:q,outsideCloseDisabled:!0,class:"bring-modal-to-front"},(0,c.h)("h3",{slot:"header",class:"font-size-2 trailer-0"},v),(0,c.h)("div",{slot:"content"},(0,c.h)("div",{ref:m})),(0,c.h)("calcite-button",
{slot:"primary",width:"full",onClick:function(){t.isEdit?n.update():n.add()}},e.save),(0,c.h)("calcite-button",{slot:"secondary",width:"full",appearance:"outline",onClick:q},e.cancel)),document.body))}})},"arcgisonline/pages/dijit/InviteMembers/MemberForm":function(){define("require exports tslib dojo/dom-class dojo/dom-form dojo/Evented dojo/on dojo/debounce dojo/string dojo/query dojo/keys dojo/topic dojo/has dojo/text!./templates/MemberForm.html dojo/i18n!../../../nls/arcgisonline dojo/Deferred dijit/_TemplatedMixin dijit/_WidgetBase dijit/a11yclick dijit/form/FilteringSelect ../../../esriGeowConfig ../../pageUtil ../../utils/alerts ../../utils/arrays ../../utils/dom ../../utils/organization ../../utils/user ../../utils/icons ./LicenseTypeSelect ../PasswordStrength ../SelectOptions ../CaseInsensitiveMemory ../../../sharing/util ../../../sharing/dijit/_LevelAwareMixin ../../../sharing/dijit/dialog/SelectEnterpriseUserDlg ../../../tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E,K,I,L,M){Object.defineProperty(J,"__esModule",{value:!0});c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=
f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);D=f.__importDefault(D);G=f.__importDefault(G);F=f.__importDefault(F);A=f.__importDefault(A);y=f.__importDefault(y);z=f.__importDefault(z);B=f.__importDefault(B);C=f.__importDefault(C);H=f.__importDefault(H);E=f.__importDefault(E);K=f.__importDefault(K);I=f.__importDefault(I);L=f.__importDefault(L);M=f.__importDefault(M);S=function(){function N(P,R){this.templateString=m.default;this.i18n=v.default;this.icons=z.default;this.inModal=
!1;this._minUsernameLength=6;this._maxUsernameLength=128;this._settingUsername=!1;this._dynamicFields="email firstname lastname username password idpUsername".split(" ");this.hasOIDC=this.hasSAML=!1}N.prototype.postCreate=function(){var P=this,R,Y;this.inherited(arguments);this.hasSAML=(null===(R=this.currentIDP)||void 0===R?void 0:R.id)&&this.portal.canSignInIDP;this.hasOIDC=(null===(Y=this.currentOIDC)||void 0===Y?void 0:Y.id)&&this.portal.canSignInOIDC;K.default.isPortal()&&(this._passwordLabel.textContent=
this.i18n.myOrganization.inviteMembers.password);this.isEdit&&this.member.errors&&-1!==this.member.errors.indexOf("licenseTypeName")&&(this.userLicenseTypes=f.__spreadArray([{name:this.member.licenseTypeName,invalid:!0}],this.userLicenseTypes,!0));this.inModal&&this.domNode.classList.add("invite-members-form--in-modal");R=this.i18n.myOrganization.inviteMembers;this.idTypeSelect=new H.default({options:[{name:"idType",text:R.saml,value:"saml",selected:!0},{name:"idType",text:R.oidc,value:"oidc"}],optionsClass:"flex-1",
optionsLabelClass:"full-width"},this.domNode.querySelector(".js-id-type-select"));this._licenseTypeSelect=new B.default({userLicenseTypes:this.userLicenseTypes,portal:this.portal,roles:this.roles,apps:this.apps,comboboxId:"member-form-user-type-combobox",listboxId:"member-form-user-type-listbox"},this._licenseTypes);(0,b.default)(this._licenseTypeSelect,"change",function(){P._onUserTypeChange()});this._adjustFormFields();this._initRoleSelect();this._strengthMeter=new C.default({baseClass:"leader-half",
portal:this.portal},this.domNode.querySelector(".js-strength-meter"));this.isEdit?(this._formTitle.innerHTML=v.default.myOrganization.inviteMembers.editMember,c.default.remove(this.domNode,"invite-members__form--is-add"),c.default.add(this.domNode,"invite-members__form--is-edit"),this._populateEditForm(),this._strengthMeter.update(this._passwordInput.value)):this._strengthMeter.update();this._updateUserTypeRole();this._addEventListeners()};N.prototype.setFormFields=function(P,R){this.fields=P;this._adjustFormFields();
R?F.default.showNode(this._searchEnterpriseUsersBtn):F.default.hideNode(this._searchEnterpriseUsersBtn)};N.prototype.setInviteMethod=function(P){this.inviteMethod=P};N.prototype.reset=function(){var P=this;this._form.reset();this._enterpriseUsername=void 0;var R=this.userLicenseTypes[0];if(this.defaultUserTypeId){var Y=this.userLicenseTypes.filter(function(ja){return ja.id===P.defaultUserTypeId})[0];Y&&(R=Y)}R&&(this._licenseTypeSelect.select(R),this._currentLevel=R.level,this._currentUserType=R,
this._resetRoleSelect(),this._updateUserTypeRole());this._strengthMeter.update();this._hideErrors()};N.prototype.focusOnFirstInput=function(){for(var P=this.domNode.querySelectorAll(".invite-members__form-column"),R,Y=0;Y<P.length;Y++){var ja=P[Y];if(!P[Y].classList.contains("hide")&&(ja=ja.querySelector("input[type\x3dtext]"))){R=ja;break}}R&&R.focus()};N.prototype._onUserTypeChange=function(){var P,R,Y=this.getSelectedUserLicenseType(),ja=this._getSelectedUserLicenseTypeLevel();if(ja!==this._currentLevel||
this.portal.isPortal&&((null===Y||void 0===Y?0:Y.supportsSignInOnlyFromUTApps)||(null===(P=this._currentUserType)||void 0===P?0:P.supportsSignInOnlyFromUTApps)))this._currentLevel=ja,this._currentUserType=Y,P=this._getRoleStore(),Y=0<P.query({role:this._roleSelect.value}).length,this._roleSelect.set("store",P),Y||(null===(R=this.member.errors)||void 0===R?0:R.includes("rolename"))||(ja===this.LICENSE_LEVELS.TWO?this._defaultRole?this._roleSelect.set("displayedValue",this._defaultRole.name):this._roleSelect.set("displayedValue",
this.i18n.myOrganization.formatters.roleUser):this._roleSelect.set("displayedValue",this.i18n.myOrganization.formatters.roleViewer))};N.prototype._hideErrors=function(){var P=this;this.fields.forEach(function(R){var Y=P["_".concat(R.name,"Input")],ja=P["_".concat(R.name,"Error")];R=P["_".concat(R.name,"Warning")];Y&&(c.default.remove(Y,"input-error"),c.default.remove(ja,"is-active"),R&&(c.default.remove(Y,"input-error-warning"),c.default.remove(R,"is-active")))})};N.prototype._adjustFormFields=function(){var P=
this;this._dynamicFields.forEach(function(da){var ra=P.fields.filter(function(fa){return fa.name===da})[0],ca=P["_".concat(da,"Col")];ra?F.default.showNode(ca):F.default.hideNode(ca)});if(this.fields.some(function(da){return"idpUsername"===da.name})||"add-saml"===this.inviteMethod){var R=this.i18n.myOrganization.inviteMembers,Y=R.id,ja=R.samlId;R=R.oidcId;var aa="";"add-saml"!==this.inviteMethod?(this.hasSAML&&this.hasOIDC?(aa=Y,this.idpRow.appendChild(this._idpUsernameCol),F.default.showNode(this.idpRow)):
(this.emailRow.appendChild(this._idpUsernameCol),F.default.hideNode(this.idpRow),this.hasSAML?aa=ja:this.hasOIDC&&(aa=R)),this.idpLabelText.textContent=aa):this.hasSAML&&this.hasOIDC?(this.idpRow.appendChild(this._usernameCol),F.default.showNode(this.idpRow)):(this.emailRow.appendChild(this._usernameCol),F.default.hideNode(this.idpRow))}else F.default.hideNode(this.idpRow)};N.prototype._addEventListeners=function(){var P=this;this.own((0,k.default)(this._cancelBtn,this.cancel.bind(this)),(0,k.default)(this._updateBtn,
this.update.bind(this)),(0,k.default)(this._addBtn,this.add.bind(this)),(0,k.default)(this._addAnotherBtn,this._onAddAnotherClick.bind(this)),(0,k.default)(this._searchEnterpriseUsersBtn,this._onSelectEnterpriseUserClick.bind(this)),(0,k.default)(this._userTypeRolePanel,this._onUserTypeRoleClick.bind(this)),(0,k.default)(this._removeBtn,this._onRemoveClick.bind(this)),u.default.subscribe("enterprise-user-selected",this._onEnterpriseUserSelected.bind(this)),(0,b.default)(this._emailInput,"change",
this._onEmailInputChange.bind(this)),(0,b.default)(this._usernameInput,"change",this.onUsernameInputChange.bind(this)),(0,b.default)(this._passwordInput,"keyup",(0,a.default)(this._isValidPassword.bind(this),300)),(0,b.default)(this._idpUsernameInput,"change",this.onEnterpriseIDInputChange.bind(this)));var R=this.domNode.querySelectorAll(".js-form-input");[].forEach.call(R,function(Y){Y.addEventListener("change",P._onInputChange.bind(P))});this._form.addEventListener("keydown",this._onFormKeydown.bind(this));
this._form.addEventListener("submit",this._onFormSubmit.bind(this))};N.prototype._onRemoveClick=function(){u.default.publish("invite-members/remove-member",this.member)};N.prototype._onUserTypeRoleClick=function(){if(this._firstnameInput.value)var P=y.default.createFullName({firstName:this._firstnameInput.value,lastName:this._lastnameInput.value});else this._emailInput.value&&(P=this._emailInput.value);this.domNode.classList.add("invite-members-form__user-type-role-details");u.default.publish("invite-members/user-type-role",
P)};N.prototype._isValidPassword=function(){var P=this,R=this._passwordInput.value.trim();return this._strengthMeter.update(R).then(function(Y){var ja,aa=R.toLowerCase()===P._usernameInput.value.trim().toLowerCase();Y=!Y.isValidStrength;var da=P.fields.filter(function(ca){return"password"===ca.name})[0];da=null===(ja=null===da||void 0===da?void 0:da.validators)||void 0===ja?void 0:ja[0];if(da.isValid(R))aa?ra=P.i18n.myOrganization.inviteMembers.passwordUsernameError:Y&&(ra=P.i18n.myOrganization.inviteMembers.passwordTooWeak);
else var ra=da.error(R);ra?(P._passwordError.innerHTML=ra,P._passwordInput.classList.add("input-error"),P._passwordError.classList.add("is-active")):(P._passwordInput.classList.remove("input-error"),P._passwordError.classList.remove("is-active"));return!ra})};N.prototype.validateForm=function(){var P=this,R=!0;this.fields.forEach(function(Y){var ja=!1;"licenseTypeName"===Y.name?P._licenseTypeSelect.isvalid()||(R=!1,ja=!0):"rolename"===Y.name?P._isValidRole()||(R=!1,ja=!0):P._isValidInput(Y.name)||
(R=!1,ja=!0);P.member.errors&&(Y=P.member.errors.indexOf(Y.name),-1<Y&&!ja&&P.member.errors.splice(Y,1))});R&&u.default.publish("invite-form/validated");return R};N.prototype._isFormValid=function(){var P=this.validateForm();if(!P){var R=void 0,Y=(0,q.default)(".input-error-message.is-active").filter(function(ja){return!ja.classList.contains("input-error-message-warning")});1<Y.length?R=this.i18n.myOrganization.inviteMembers.fixErrors:1===Y.length&&(R=Y[0].textContent);this.inModal||u.default.publish("invite-form/error",
R);if(R=this.domNode.querySelectorAll(".input-error")[0])"INPUT"!==R.tagName&&(R=R.querySelector("input.dijitInputInner")),R&&R.focus()}return P};N.prototype._getFormField=function(P){return G.default.find(this.fields,function(R){return P===R.name})};N.prototype._waitForUsernameRequest=function(){var P=new p.default;this._checkUsernameDfd&&!this._checkUsernameDfd.isFulfilled()?this._checkUsernameDfd.then(function(){P.resolve()}):P.resolve();return P};N.prototype._save=function(P){var R=this;if(this._isFormValid()){var Y=
new p.default;this.fields.filter(function(ja){return"password"===ja.name})[0]?this._isValidPassword().then(function(ja){ja?Y.resolve():Y.reject()}):Y.resolve();Y.then(function(){var ja;R._updateMemberFromForm();("add-enterprise-id"===R.inviteMethod||"add-saml"===R.inviteMethod)&&-1<(null===(ja=R.member.targetUserProvider)||void 0===ja?void 0:ja.indexOf("oidc"))?(ja=R.member.email.split("@")[0],ja=y.default.createValidOrgUsername(ja,"",R._minUsernameLength,R._maxUsernameLength),R._checkAndSetRequestedUsername(ja,
!0).then(function(aa){aa&&(R.member.username=aa);R.reset();R.emit(P,R.member)})):(R.reset(),R.emit(P,R.member))})}};N.prototype._add=function(P){var R=this;if("add-enterprise"!==this.inviteMethod||this._isValidInput("username"))if("add-enterprise"===this.inviteMethod){F.default.disableNodes([this._addBtn,this._addAnotherBtn],!0);var Y=y.default.stripUsernameDomain(this._usernameInput.value,this.supportsLDAP,this.supportsWindows);""===Y?x.default.createSpecifiedDialog(L.default).show(Y):this._getEnterpriseUser(Y).then(function(ja){F.default.disableNodes([R._addBtn,
R._addAnotherBtn],!1);!ja||(null===ja||void 0===ja?0:ja.code)?(x.default.createSpecifiedDialog(L.default).show(Y),D.default.showAlert("error",e.default.substitute(R.i18n.myOrganization.inviteMembers.enterpriseUserNotFound,{name:Y}))):ja.email?(R._fillInEnterpriseUserDetails(ja),R._save(P)):D.default.showAlert("error",e.default.substitute(R.i18n.myOrganization.inviteMembers.enterpriseUserNoEmail,{user:Y}))},function(ja){F.default.disableNodes([R._addBtn,R._addAnotherBtn],!1);x.default.createSpecifiedDialog(L.default).show(Y);
D.default.showAlert("error",e.default.substitute(R.i18n.myOrganization.inviteMembers.enterpriseUserNotFound,{name:Y}))})}else this._save(P);else x.default.createSpecifiedDialog(L.default).show(this._usernameInput.value)};N.prototype._checkAndSetRequestedUsername=function(P,R){var Y=this,ja=new p.default;this._checkUsernameDfd=ja;y.default.checkUsernames([P]).then(function(aa){if(aa.messageCode&&"GWM_0021"===aa.messageCode)D.default.showAlert("error",aa.message),ja.reject();else{aa=aa.usernames[0];
Y._settingUsername=!0;var da=void 0;Y.hasSAML&&Y.hasOIDC?da="saml"===Y.idTypeSelect.value()?"enterprise":"oidc":Y.hasSAML?da="enterprise":Y.hasOIDC&&(da="oidc");"oidc"!==da||"add-saml"!==Y.inviteMethod?(Y._usernameInput.value=aa.requested===aa.suggested?aa.requested:aa.suggested,R||Y._toggleUsernameWarning(aa.requested!==aa.suggested),Y._isValidInput("username"),Y.member.errors&&(Y.member.errors=Y.member.errors.filter(function(ra){return"username-taken"!==ra})),ja.resolve(Y._usernameInput.value)):
ja.resolve(aa.suggested)}});return ja};N.prototype._toggleUsernameWarning=function(P){var R=this,Y="username";this._idpUsernameCol.classList.contains("hide")||(Y="idpUsername");this["_".concat(Y,"Input")].classList[P?"add":"remove"]("input-error-warning");this["_".concat(Y,"Warning")].classList[P?"add":"remove"]("is-active");P&&"username"===Y&&setTimeout(function(){R._usernameInput.classList.remove("input-error-warning");R._usernameWarning.classList.remove("is-active")},4E3)};N.prototype._updateMemberFromForm=
function(){var P=this,R=h.default.toObject(this._form),Y=this._roleSelect.get("displayedValue"),ja=this.filteredRoles.filter(function(ca){return ca.name===Y})[0],aa={};this.fields.forEach(function(ca){aa[ca.name]=R[ca.name]});aa.rolename=Y;aa.role=ja.id;aa.userLicenseType=this._licenseTypeSelect.value;if(ja=this.userLicenseTypes.filter(function(ca){return ca.id===P._licenseTypeSelect.value})[0])aa.licenseTypeName=ja.name,aa.licenseType=ja,aa.level=ja.level;this.fields.some(function(ca){return"firstname"===
ca.name||"lastname"===ca.name})&&(aa.fullname=y.default.createFullName({firstName:R.firstname,lastName:R.lastname},this.portal.culture));var da=(ja=this.samlSuffix&&"saml"===this.userType)&&-1<aa.username.indexOf(this.samlSuffix);if("add-enterprise"===this.inviteMethod||"add-saml"===this.inviteMethod)aa.email=this._emailInput.value,ja&&(aa.idpUsername=da?y.default.removeSAMLSuffix(aa.username,this.samlSuffix):aa.username,aa.username=y.default.addSAMLSuffix(aa.username,this.samlSuffix)),aa.firstname=
R.firstname,aa.lastname=R.lastname,aa.fullname=this.enterpriseFullname;if("add-enterprise-id"===this.inviteMethod||"add-saml"===this.inviteMethod)ja||(aa.username=this._usernameInput.value),this.hasSAML&&this.hasOIDC?aa.targetUserProvider="saml"===this.idTypeSelect.value()?"enterprise":"oidc_".concat(this.currentOIDC.id):this.hasSAML?aa.targetUserProvider="enterprise":this.hasOIDC&&(aa.targetUserProvider="oidc_".concat(this.currentOIDC.id));"add-saml"===this.inviteMethod&&-1<aa.targetUserProvider.indexOf("oidc_")&&
(aa.idpUsername=aa.username);for(var ra in aa)aa.hasOwnProperty(ra)&&(this.member[ra]=aa[ra])};N.prototype._populateEditForm=function(){var P=this,R,Y=this.member.username;"add-enterprise"===this.inviteMethod||"add-saml"===this.inviteMethod?Y=this.samlSuffix&&"saml"===this.userType&&-1<this.member.username.indexOf(this.samlSuffix)?y.default.removeSAMLSuffix(this.member.username,this.samlSuffix):y.default.stripUsernameDomain(this.member.username,this.supportsLDAP,this.supportsWindows):"add-enterprise-id"===
this.inviteMethod&&(Y=y.default.stripOrgKeyFromUsername(Y,w.default.self.urlKey?"_"+w.default.self.urlKey:""));this._firstnameInput.value=this.member.firstname?this.member.firstname:"";this._lastnameInput.value=this.member.lastname?this.member.lastname:"";this._emailInput.value=this.member.email?this.member.email:"";this._usernameInput.value=Y?Y:"";this._passwordInput.value=this.member.password?this.member.password:"";this._idpUsernameInput.value=this.member.idpUsername?this.member.idpUsername:"";
Y=this.userLicenseTypes.filter(function(ja){return ja.id===P.member.userLicenseType})[0];(null===Y||void 0===Y?0:Y.id)&&this._licenseTypeSelect.select(Y);this._onUserTypeChange();this._roleSelect.set("displayedValue",this.member.rolename);-1<(null===(R=this.member.targetUserProvider)||void 0===R?void 0:R.indexOf("oidc"))&&this.idTypeSelect.select("oidc");this.member.errors&&this._isFormValid()};N.prototype._getSelectedUserLicenseTypeLevel=function(){var P,R=this.getSelectedUserLicenseType();return null!==
(P=null===R||void 0===R?void 0:R.level)&&void 0!==P?P:""};N.prototype.getSelectedUserLicenseType=function(){var P=this;return this.userLicenseTypes.filter(function(R){return R.id===P._licenseTypeSelect.value})[0]};N.prototype._getRoleStore=function(){var P=this,R=this.getSelectedUserLicenseType(),Y=f.__spreadArray([],this.filteredRoles,!0);this.portal.isPortal&&(null===R||void 0===R?0:R.supportsSignInOnlyFromUTApps)&&(Y=Y.filter(function(ja){return!A.default.isAdminRole(ja)}));R=A.default.filterRoles(Y,
this.viewerRole,this._currentLevel===this.LICENSE_LEVELS.TWO,this._currentLevel);Y=new E.default({idProperty:"role",data:R});this.defaultRole&&(this._defaultRole=G.default.find(R,function(ja){return ja.role===P.defaultRole})||void 0);return Y};N.prototype._resetRoleSelect=function(){this._roleSelect.set("store",this._getRoleStore());this._roleSelect.set("displayedValue",this._defaultRole?this._defaultRole.name:this._currentLevel===this.LICENSE_LEVELS.TWO?v.default.myOrganization.formatters.roleUser:
v.default.myOrganization.formatters.roleViewer)};N.prototype._initRoleSelect=function(){this._currentLevel=this._getSelectedUserLicenseTypeLevel();var P=this._getRoleStore();this._roleSelect=new r.default({displayedValue:this._defaultRole?this._defaultRole.name:this._currentLevel===this.LICENSE_LEVELS.TWO?v.default.myOrganization.formatters.roleUser:v.default.myOrganization.formatters.roleViewer,searchAttr:"name",store:P,fetchProperties:{sort:[{attribute:"name",descending:!1}]},title:this.i18n.myOrganization.inviteMembers.role,
onChange:this._onRoleChange.bind(this)},this._roleContainer);(0,g.default)("mozilla")&&this._roleSelect.domNode.querySelector(".dijitInputInner").setAttribute("autocomplete","new-password");this._roleSelect.domNode.appendChild(this._roleError)};N.prototype._isValidRole=function(){var P=0!==this._roleSelect.value.length;0===this._roleSelect.value.length?(F.default.addClasses(this._roleSelect.domNode,["input-error","invite-members__form-role-error"]),this._roleError.classList.add("is-active")):(F.default.removeClasses(this._roleSelect.domNode,
["input-error","invite-members__form-role-error"]),this._roleError.classList.remove("is-active"));return P};N.prototype._isValidInput=function(P){var R=this,Y=this.fields.filter(function(fa){return fa.name===P})[0],ja=!0;if(Y){var aa=this["_".concat(Y.name,"Input")],da=this["_".concat(Y.name,"Error")],ra=null===aa||void 0===aa?void 0:aa.value;if(aa){var ca=!0;"password"===P&&this._passwordInput.value.trim()===this._usernameInput.value.trim()&&(ca=!1,da.innerHTML=this.i18n.myOrganization.inviteMembers.passwordUsernameError,
c.default.add(aa,"input-error"),c.default.add(da,"is-active"),ja=!1);((null===Y||void 0===Y?void 0:Y.validators)||[]).some(function(fa){var la=!fa.isValid(ra,R.isEdit,R.editingIndex);la&&(ca=!1,da.innerHTML="function"===typeof fa.error?fa.error(ra):fa.error,c.default.add(aa,"input-error"),c.default.add(da,"is-active"),"username"===P&&(F.default.removeClasses(R._usernameInput,["input-error-warning"]),R._usernameWarning.classList.remove("is-active")),ja=!1);return la});ca&&(c.default.remove(aa,"input-error"),
c.default.remove(da,"is-active"))}}return ja};N.prototype._getEnterpriseUser=function(P){var R=new p.default,Y=K.default.formatPortalOrgUrl(K.default.getPortalAdminBaseUrl(),"/security/users/getEnterpriseUser",this.portal.id);this._enterpriseUsername&&(P=this._enterpriseUsername);P?K.default.request({url:Y,content:{username:P}},{usePost:!0}).then(function(ja){R.resolve(ja)},function(){u.default.publish("alert/show",{type:"error",text:e.default.substitute(v.default.myOrganization.inviteMembers.enterpriseUserNotFound,
{name:P})});R.resolve(null)}):R.resolve();return R};N.prototype._fillInEnterpriseUserDetails=function(P){if(P){var R=P.firstName&&P.lastName?{first:P.firstName,last:P.lastName}:y.default.splitFullName(P.fullname),Y=y.default.cleanUsernameDomain(P.username,this.supportsLDAP,this.supportsWindows);this._enterpriseUsername=P.username;this._usernameInput.value=Y;this._firstnameInput.value=R.first;this._lastnameInput.value=R.last;this._emailInput.value=P.email;this.enterpriseFullname=P.fullname}else this._usernameInput.value=
""};N.prototype._onInputChange=function(P){"password"===P.target.dataset.propertyName?this._isValidPassword().then(function(R){R&&u.default.publish("invite-form/validated")}):this._isValidInput(P.target.dataset.propertyName)&&u.default.publish("invite-form/validated")};N.prototype._onRoleChange=function(){this._isValidRole()};N.prototype._onFormSubmit=function(P){P.preventDefault();P.stopPropagation();this.isEdit?this.update():this.add()};N.prototype._onFormKeydown=function(P){P.keyCode===t.default.ENTER&&
P.target instanceof HTMLInputElement&&("text"===P.target.type||"password"===P.target.type)&&("add-enterprise"===this.inviteMethod&&"username"===P.target.name?(this._searchEnterpriseUsersBtn.focus(),this._searchEnterpriseUsersBtn.click()):this._onFormSubmit(P))};N.prototype.saveUserTypeRole=function(){this.domNode.classList.remove("invite-members-form__user-type-role-details");this._updateUserTypeRole()};N.prototype.cancelUserTypeRole=function(){var P=this;this.domNode.classList.remove("invite-members-form__user-type-role-details");
this._previousRole&&this._roleSelect.set("value",this._previousRole);if(this._previousUserType){var R=this.userLicenseTypes.filter(function(Y){return Y.id===P._previousUserType})[0];R&&this._licenseTypeSelect.select(R)}u.default.publish("invite-members/scroll-top")};N.prototype._updateUserTypeRole=function(){var P=this,R=this.userLicenseTypes.filter(function(ja){return ja.id===P._licenseTypeSelect.value})[0],Y=this._roleSelect.get("displayedValue");R&&(this._userTypeName.textContent=R.name);this._roleName.textContent=
Y;this._previousRole=this._roleSelect.value;this._previousUserType=this._licenseTypeSelect.value};N.prototype.add=function(){var P=this;this._waitForUsernameRequest().then(function(){P._add("add")})};N.prototype._onAddAnotherClick=function(){var P=this;this._waitForUsernameRequest().then(function(){P._add("add-another")})};N.prototype._onSelectEnterpriseUserClick=function(P){P&&P.preventDefault();(P.clientX||P.clientY||document.activeElement===this._searchEnterpriseUsersBtn)&&x.default.createSpecifiedDialog(L.default).show(this._usernameInput.value)};
N.prototype._onEnterpriseUserSelected=function(P){var R=this["_".concat("username","Input")],Y=this["_".concat("username","Error")];c.default.remove(R,"input-error");c.default.remove(Y,"is-active");P?(P.username=y.default.stripUsernameDomain(P.username,this.supportsLDAP,this.supportsWindows),this._fillInEnterpriseUserDetails(P)):this._usernameInput.value=""};N.prototype._onEmailInputChange=function(){var P=this,R,Y=K.default.stripHTML(this._emailInput.value),ja=this._getFormField("email");if(ja&&
ja.validators&&ja.validators.every(function(ta){return ta.isValid(Y,P.isEdit)})&&!this._usernameInput.value){var aa=Y.split("@")[0],da=this._firstnameInput.value,ra=this._lastnameInput.value,ca=aa;ja=w.default.self.urlKey?"_"+w.default.self.urlKey:"";var fa=(null===(R=this.portal.portalProperties)||void 0===R?void 0:R.usernameFormat)||"",la=/^[a-zA-Z0-9@_\-.]+$/;R=(fa.includes("firstName")||fa.includes("firstInitial"))&&(!da||!la.test(da));la=(fa.includes("lastName")||fa.includes("lastInitial"))&&
(!ra||!la.test(ra));!fa||R||la?ca=y.default.createValidOrgUsername(ca,ja,this._minUsernameLength,this._maxUsernameLength):(ca="",fa.split(" ").forEach(function(ta){ca="firstName"===ta?ca+da:"firstInitial"===ta?ca+da[0]:"lastName"===ta?ca+ra:"lastInitial"===ta?ca+ra[0]:"emailPrefix"===ta?ca+aa:"urlKey"===ta&&P.portal.urlKey?ca+P.portal.urlKey:ca+ta}),ca=y.default.createValidOrgUsername(ca,"",this._minUsernameLength,this._maxUsernameLength));this._checkAndSetRequestedUsername(ca.toLowerCase(),!0)}};
N.prototype.onUsernameInputChange=function(){this._settingUsername&&(this._settingUsername=!1);if(this._isValidInput("username")){var P=K.default.stripHTML(this._usernameInput.value);this._checkAndSetRequestedUsername(P)}};N.prototype.onEnterpriseIDInputChange=function(){if(this._isValidInput("idpUsername")){var P=w.default.self.urlKey?"_"+w.default.self.urlKey:"";P=y.default.createValidOrgUsername(K.default.stripHTML(this._idpUsernameInput.value),this.hasSAML&&"saml"===this.idTypeSelect.value()?
P:"",this._minUsernameLength,this._maxUsernameLength);this._checkAndSetRequestedUsername(P)}};N.prototype.update=function(){var P=this;this._waitForUsernameRequest().then(function(){if("add-enterprise"===P.inviteMethod){F.default.disableNode(P._addBtn,!0);var R=y.default.stripUsernameDomain(P._usernameInput.value,P.supportsLDAP,P.supportsWindows);""===R?x.default.createSpecifiedDialog(L.default).show(R):P._getEnterpriseUser(R).then(function(Y){F.default.disableNode(P._addBtn,!1);!Y||(null===Y||void 0===
Y?0:Y.code)?(x.default.createSpecifiedDialog(L.default).show(R),D.default.showAlert("error",e.default.substitute(P.i18n.myOrganization.inviteMembers.enterpriseUserNotFound,{name:R}))):(P._fillInEnterpriseUserDetails(Y),P._save("update"))},function(Y){F.default.disableNode(P._addBtn,!1);x.default.createSpecifiedDialog(L.default).show(R);D.default.showAlert("error",e.default.substitute(P.i18n.myOrganization.inviteMembers.enterpriseUserNotFound,{name:R}))})}else P._save("update")})};N.prototype.cancel=
function(P){P||this.reset();this.emit("cancel")};return N=f.__decorate([(0,M.default)(n.default,l.default,d.default,I.default)],N)}();J.default=S})},"arcgisonline/sharing/dijit/dialog/SelectEnterpriseUserDlg":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/event dojo/on dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n dojo/keys dojo/topic dojo/store/Memory esri/lang esri/request arcgisonline/esriGeowConfig arcgisonline/sharing/util arcgisonline/sharing/dijit/Grid dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/form/Button dijit/form/TextBox dojo/text!arcgisonline/sharing/dijit/dialog/templates/SelectEnterpriseUserDlg.html".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A){return J([w,x,D],{declaredClass:"arcgisonline.sharing.dijit.dialog.SelectEnterpriseUserDlg",basePath:S.toUrl("esri/arcgisonline/sharing/dijit/dialog"),baseClass:"esriSelectEnterpriseUserDlg orgDlg",widgetsInTemplate:!0,templateString:A,_maxUsers:1E3,_searchEnterpriseUsersAPI:"/security/users/searchEnterpriseUsers",statics:{_instance:null,getInstance:function(){null===this._instance&&(this._instance=new arcgisonline.sharing.dijit.dialog.SelectEnterpriseUserDlg);
return this._instance}},postMixInProperties:function(){this.inherited(arguments);this.i18n={};f.mixin(this.i18n,dojo.i18n.getLocalization("arcgisonline","arcgisonline").common);f.mixin(this.i18n,dojo.i18n.getLocalization("arcgisonline","arcgisonline").selectEnterpriseUserDlg)},postCreate:function(){this.inherited(arguments);this._portalAdminUrl=k.getPortalAdminBaseUrl()},startup:function(){this.inherited(arguments)},show:function(y){this._clear();this._initSearch(y);this._dialog.show();this._usersGrid&&
this._usersGrid._started&&(this._usersGrid._grid.resize(),this._usersGrid._grid.refresh());this.onSearch()},onSearchKeyDown:function(y){y.keyCode==g.ENTER&&(h.stop(y),this.onSearch())},onSearch:function(y){y&&y.preventDefault();this._clearUsersGrid();this._usersGrid.refresh();this._setSearchingMessage(this.i18n.searching);(y=this._search.get("value"))&&""!==y?this._searchEnterpriseUsers(y).then(f.hitch(this,function(z){if(z&&z.users&&0<z.users.length){var B=this._usersGrid.get("store"),C;for(C=0;C<
z.users.length;C++)B.put(z.users[C])}this._usersGrid.refresh()}),f.hitch(this,function(z){this._usersGrid.refresh()})):this._defaultUsersQuery()},onGoToPageKeyDown:function(y){y.keyCode==g.ENTER&&(h.stop(y),this.onGoToPage())},onGoToPage:function(){var y=this._goTo.get("value"),z=Math.ceil(this._usersGrid._grid._total/this._usersGrid._grid._rowsOnPage);try{y=parseInt(y),y<=z?this._usersGrid._grid.gotoPage(y).then(f.hitch(this,function(){this._goTo.set("value","")})):this._goTo.set("value","")}catch(B){this._goTo.set("value",
"")}},onCancel:function(){this._dialog.hide()},onOk:function(){m.publish("enterprise-user-selected",this._selectedUser);this._dialog.hide()},_setSearchingMessage:function(y){if(this._usersGrid){var z=this._usersGrid.domNode.querySelector(".dgrid-no-data");z&&(z.textContent=y)}},_searchEnterpriseUsers:function(y,z){var B=k.formatPortalOrgUrl(this._portalAdminUrl,this._searchEnterpriseUsersAPI,(n.portal||{}).id);z={maxCount:p.isDefined(z)?z:this._maxUsers};p.isDefined(y)&&0<y.length&&(z.filter=y);return k.request({url:B,
content:z})},_defaultUsersQuery:function(){this._clearUsersGrid();this._searchEnterpriseUsers().then(f.hitch(this,function(y){if(y&&y.users&&0<y.users.length){var z=this._usersGrid.get("store"),B;for(B=0;B<y.users.length;B++)z.put(y.users[B])}this._usersGrid.refresh()}),f.hitch(this,function(y){this._usersGrid.refresh()}))},_usersGridColumns:function(){return{username:{label:" "+this.i18n.userNameCol,sortable:!1,formatter:f.hitch(this,function(y){return'\x3cspan class\x3d"esriContentTypeName"\x3e'+
y+"\x3c/span\x3e"})},fullname:{label:" "+this.i18n.fullNameCol,sortable:!1,formatter:f.hitch(this,function(y){y=p.isDefined(y)?y:"";return'\x3cspan class\x3d"esriContentTypeName"\x3e'+y+"\x3c/span\x3e"})}}},_createUsersGrid:function(){this._usersGrid=new r({columns:this._usersGridColumns(),id:"usersGrid",region:"center",noDataMessage:this.i18n.noUsersFound,showLoadingMessage:!0,showHeader:!0,rowsPerPage:10,pagingLinks:!0,selectionMode:"single",store:new v({identifier:"username",label:"fullname",data:[]})},
q.create("div",null,this._gridContainer));this._usersGrid.startup();this._usersGrid.on("dgrid-select",f.hitch(this,this._selectedGridRow));this._usersGrid.on("dgrid-deselect",f.hitch(this,this._deselectedGridRow));this._usersGrid.on("dgrid-refresh-complete",f.hitch(this,function(){1<Math.ceil(this._usersGrid._grid._total/this._usersGrid._grid._rowsOnPage)?t.set(this._goToPageContainer,"display",""):t.set(this._goToPageContainer,"display","none")}))},_selectedGridRow:function(y){e.add(y.rows[0].element,
"selectedUser");this._selectedUser=y.rows[0].data;this._okBtn.set("disabled",!1)},_deselectedGridRow:function(y){e.remove(y.rows[0].element,"selectedUser");this._selectedUser&&this._selectedUser.username===y.rows[0].data.username&&(this._selectedUser=null,this._okBtn.set("disabled",!0))},_initGrid:function(){this._usersGrid?this._clearUsersGrid():this._createUsersGrid();this._usersGrid.refresh()},_clearUsersGrid:function(){var y=this._usersGrid.get("store"),z=y.query(),B;for(B=0;B<z.length;B++)z[B]&&
z[B].id&&y.remove(z[B].id)},_clear:function(){this._search.set("value","");this._selectedUser=null;this._okBtn.set("disabled",!0);this._initGrid()},_initSearch:function(y){p.isDefined(y)&&this._search.set("value",y)}})})},"arcgisonline/pages/dijit/InviteMembers/NewMemberCard":function(){define("require exports tslib dojo/Evented dojo/on dojo/text!./templates/NewMemberCard.html dojo/i18n!../../../nls/arcgisonline dijit/_TemplatedMixin dijit/_WidgetBase ./AppIconList ../../utils/dom ../../utils/organization ./MemberForm ../../utils/icons ../../utils/strings ../../../tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);return function(){function l(n,k){this.templateString=d.default;this.i18n=b.default;this.icons=m.default;this.readonly=!1;this._disableClass="invite-members__member-list--disable"}
l.prototype.postCreate=function(){this.inherited(arguments);this._populateCard();this.readonly?(t.default.hideNode(this.checkboxCol),t.default.hideNode(this.editCol)):this._addEventListeners()};l.prototype.select=function(){this._checkbox.checked=!0};l.prototype.deselect=function(){this._checkbox.checked=!1};l.prototype.disable=function(){this._listItem.classList.add(this._disableClass)};l.prototype.enable=function(){this._listItem.classList.remove(this._disableClass)};l.prototype.focusOnEdit=function(){this._editButton.focus()};
l.prototype.renderThumb=function(){this.thumbContainer.className="invite-members__member-thumb margin-right-half";var n=this.member;var k=n.firstname;var r=n.lastname;var w=n.email;n=n.username;k&&r?(r=k.substr(0,1)+r.substr(0,1),k=v.default.hexToRgb(v.default.stringToHex(this.member.firstname+this.member.lastname))):(r=(k=w||n||"")?k.substr(0,2):k,k=v.default.hexToRgb(v.default.stringToHex(k)));this.thumbContainer.textContent=r;k&&(r=k.g,w=k.b,this.thumbContainer.style.backgroundColor="rgba(".concat(k.r,
", ").concat(r,", ").concat(w,", 0.5)"))};l.prototype._populateCard=function(){var n=this,k=this.member.errors||[];this.renderThumb();if(0<k.length)t.default.showNode(this._errorIcon);else{t.default.showNode(this._licensesTitle);t.default.hideNode(this._errorIcon);var r=this.domNode.querySelectorAll(".".concat("invite-members__error-text"));[].forEach.call(r,function(G){G.classList.remove("invite-members__error-text")})}this.member.fullname&&0!==this.member.fullname.trim().length||-1!==k.indexOf("firstname")||
-1!==k.indexOf("lastname")?(-1!==k.indexOf("firstname")||-1!==k.indexOf("lastname")?(this._mainTitle.textContent=this.i18n.myOrganization.inviteMembers.invalidName,this._mainTitle.classList.add("invite-members__error-text")):this._mainTitle.textContent=this.member.fullname,this._username.innerHTML=this.member.username,-1!==k.indexOf("email")?(this._email.textContent=this.i18n.myOrganization.inviteMembers.invalidEmail,this._email.classList.add("invite-members__error-text")):this._email.textContent=
this.member.email):(t.default.hideNode(this._subTitle),this._mainTitle.innerHTML=this.member.email||"");if(-1===k.indexOf("licenseTypeName")){this._licenseType.textContent=this.member.licenseTypeName;this._licenseType.title=this.member.licenseTypeName;r=this.userLicenseTypes.filter(function(G){return G.id===n.member.userLicenseType})[0];var w=r.apps.filter(function(G){return G.isAppBundle}),x=f.__spreadArray([],r.apps.filter(function(G){return!G.isAppBundle}),!0);x=u.default.transformAppBundleApps(x,
this.portal.isPortal);var D=f.__spreadArray(f.__spreadArray([],w,!0),x,!0);w=!1;this._appIcons?setTimeout(function(){n._appIcons.render(D)}):(this._appIcons=new q.default({apps:D,portal:this.portal},this._licenses),w=!0);0===r.apps.length?(t.default.showNode(this._noLicenses),t.default.hideNode(this._appIcons.domNode)):(t.default.hideNode(this._noLicenses),t.default.showNode(this._appIcons.domNode));w&&setTimeout(function(){n._appIcons.startup()},100)}else this._licenseType.textContent=this.i18n.myOrganization.inviteMembers.invalidType,
this._licenseType.classList.add("invite-members__error-text"),t.default.hideNode(this._licensesTitle);-1===k.indexOf("rolename")?(this._role.textContent=this.member.rolename,this._role.title=this.member.rolename):(this._role.textContent=this.i18n.myOrganization.inviteMembers.invalidRole,this._role.classList.add("invite-members__error-text"));this.defaultRoleTooltipContent.textContent=this.i18n.myOrganization.inviteMembers.roleWarning.replace("${roleName}",this.member.rolename);this.own((0,h.default)(this.defaultRoleWarningBtn,
"click",function(G){G.stopPropagation()}));this.member.noRoleMatch&&t.default.showNode(this.defaultRoleWarning);this._checkbox.checked=this.member.selected};l.prototype._addEventListeners=function(){this.own((0,h.default)(this._checkbox,"change",this._onCheckboxChange.bind(this)),(0,h.default)(this._checkbox,"click",function(n){n.stopPropagation()}),(0,h.default)(this._editButton,"click",this._onEditClick.bind(this)),(0,h.default)(this._listItem,"click",this._onEditClick.bind(this)))};l.prototype._onCheckboxChange=
function(){this.emit("selected-change",this._checkbox.checked)};l.prototype._onEditClick=function(n){var k=this;n.stopPropagation();this._form=new g.default({isEdit:!0,editingIndex:this.index,member:this.member,filteredRoles:this.filteredRoles,viewerRole:this.viewerRole,fields:this.fields,userLicenseTypes:this.userLicenseTypes,inviteMethod:this.inviteMethod,supportsLDAP:this.supportsLDAP,supportsWindows:this.supportsWindows,samlSuffix:this.samlSuffix,userType:this.userType,portal:this.portal,apps:this.apps,
roles:this.roles,currentIDP:this.currentIDP,currentOIDC:this.currentOIDC});this._form.setFormFields(this.fields,"add-enterprise"===this.inviteMethod);this.own((0,h.default)(this._form,"cancel",this._closeEdit.bind(this)),(0,h.default)(this._form,"update",function(){k._populateCard();k._closeEdit()}));this.domNode.appendChild(this._form.domNode);this._form.focusOnFirstInput();t.default.hideNode(this._listItem);this.emit("edit",this._form)};l.prototype._closeEdit=function(){this._form.destroy();t.default.showNode(this._listItem);
this._editButton.focus();this.emit("close-edit")};return l=f.__decorate([(0,p.default)(e.default,a.default,c.default)],l)}()})},"arcgisonline/pages/dijit/CreateReport":function(){define("require exports tslib dojo/string dojo/dom-construct dojo/on dojo/text!./CreateReport/templates/CreateReport.html dojo/i18n!../../nls/arcgisonline dojo/topic dojo/_base/kernel dojo/debounce dojo/Deferred dijit/_TemplatedMixin dijit/_WidgetBase ./Overlay ../../sharing/dijit/_LevelAwareMixin ./CreateReport/ReportTypeSelect ../utils/alerts ../utils/culture ../utils/icons ../utils/time ../utils/validation ../../sharing/util ../../esriGeowConfig ../../tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);D=f.__importDefault(D);
G=f.__importDefault(G);F=f.__importDefault(F);return function(){function A(y,z){this.title=a.default.createReport.dlgTitle;this.i18n=a.default;this.icons=r.default;this.closeOnScrimClick=!1;this.maxWidth=700;this.defaultType="content";this.defaultProps={};this.editScheduleOnly=!1;this._groupIcons=[]}A.prototype.postMixInProperties=function(){this.inherited(arguments);this.user=this.user||D.default.getUser();this.portal=this.portal||this.user.portal;var y=new Date;y.setFullYear(y.getFullYear()-2);
this.twoYearsAgo=y;this._minDate=this.portal.created>y?this.portal.created:y;y=this.portal.culture||"en";this.locale=q.default.locale.toLowerCase()!==y.toLowerCase()?q.default.locale:y;y=k.default.getDatePickerLocale(this.locale);this.overlayContents=c.default.substitute(b.default,{i18n:a.default,editIcon:r.default.edit["16"],folderIcon:r.default.inline["folder-plus"]["16"],checkIcon:r.default.check["24"],xIcon:r.default.x["24"],arrowRightIcon:r.default["arrow-right"]["16"],calendarIcon:r.default.calendar["16"],
locale:y})};A.prototype.postCreate=function(){this.inherited(arguments)};A.prototype.destroy=function(){this.inherited(arguments)};A.prototype.open=function(){this.domNode.classList.add("overlay-create-report");this.defaultName=!0;this.setPrimaryBtnText(a.default.createReport.primaryLabel);this.showLoader();this.initUI();this.inherited(arguments);this._reportTypeSelect.focus()};A.prototype.close=function(){this.inherited(arguments)};A.prototype.showLoader=function(y){this._primaryBtn.disabled=!0;
this._cancelBtn.disabled=!0;this.closeBtn.disabled=!0;this.inherited(arguments)};A.prototype.hideLoader=function(){this._primaryBtn.disabled=!1;this._cancelBtn.disabled=!1;this.closeBtn.disabled=!1;this.inherited(arguments)};A.prototype.handlePrimary=function(){var y=this;this.showLoader();this.type=this.getReportType();this.createReport().then(function(z){e.default.publish("report/created",z.itemId);y.hideLoader();y.close();n.default.showAlert("success",a.default.createReport.success)},function(z){-1<
z.message.indexOf("The daily report is already generated. Report item id: ")?(z=z.message.split("report is already generated. Report item id: ").pop(),z='(id:"'.concat(z,'" AND orgid:"').concat(y.portal.id,'")'),y.portal.queryItems({q:z}).then(function(B){B=c.default.substitute(a.default.createReport.errors.reeportDuplicateSearch,{reportName:B.items[0].title});y.handleError(B)})):(z="COM_1198"===z.messageCode?c.default.substitute(a.default.createReport.errors.reportHourCache,{reportId:z.message.split("'")[1]}):
-1<z.message.indexOf("The weekly report is already generated.")?a.default.createReport.errors.reportAlreadyExistsWeekly:-1<z.message.indexOf("The monthly report is already generated.")?a.default.createReport.errors.reportAlreadyExistsMonthly:-1<z.message.indexOf("The quarterly report is already generated.")?a.default.createReport.errors.reportAlreadyExistsQuarterly:-1<z.message.indexOf("The yearly report is already generated.")?a.default.createReport.errors.reportAlreadyExistsYearly:c.default.substitute(a.default.createReport.errors.general,
{report:y.name}),y.handleError(z))})};A.prototype.handleError=function(y){this.hideLoader();this.close();n.default.showAlert("error",y)};A.prototype.initDateSelector=function(){this._currentDate=new Date;this.dateDuration.selectedItem=this.dateDuration.selectedItem||this.dateDuration.children[0].closest("calcite-segmented-control-item");this.initDaySelector();this.initRangeSelector();this.initYearSelector();this._dateDurationChange()};A.prototype._dateDurationChange=function(){"daily"===this.dateDuration.selectedItem.value?
(this.dateDayContainer.classList.remove("hide"),this.dateRangeContainer.classList.add("hide"),this.dateYearContainer.classList.add("hide"),this.changeDateDay()):"yearly"===this.dateDuration.selectedItem.value?(this.dateDayContainer.classList.add("hide"),this.dateRangeContainer.classList.add("hide"),this.dateYearContainer.classList.remove("hide"),this.changeDateYear()):(this.dateDayContainer.classList.add("hide"),this.dateRangeContainer.classList.remove("hide"),this.dateYearContainer.classList.add("hide"),
this.changeDateRangeMax(),this.changeDateRange());"itemUsages"===this.type&&this.changeViewCountAggregation()};A.prototype.showDateSelector=function(y,z){void 0===y&&(y=!1);void 0===z&&(z=!1);this.dateContainer.classList.remove("hide");this.dateDayOption.classList.remove("hide");this.dateYearOption.classList.remove("hide");y||(this.dateDayOption.classList.add("hide"),"daily"===this.dateDuration.selectedItem.value&&(this.dateDuration.selectedItem=this.dateDuration.querySelector("calcite-segmented-control-item:not(.hide)"),
this._dateDurationChange()));z||(this.dateYearOption.classList.add("hide"),"yearly"===this.dateDuration.selectedItem.value&&(this.dateDuration.selectedItem=this.dateDuration.querySelector("calcite-segmented-control-item:not(.hide)"),this._dateDurationChange()))};A.prototype.hideDateSelector=function(){this.dateContainer.classList.add("hide")};A.prototype.setPrimaryBtnText=function(y){this._primaryBtn.innerHTML=y};A.prototype.initUI=function(){this.dateDuration=this.domNode.querySelector(".custom-date-duration-select");
this.dateDay=this.domNode.querySelector(".report__date-picker");this.dateDay.placement="top-start";this.dateDay.flipPlacements=["top-start"];this.dateRange=this.domNode.querySelector(".report__range-picker");this.dateRange.placement="top-start";this.dateRange.flipPlacements=["top-start"];this.dateDayContainer=this.domNode.querySelector(".date-day-container");this.dateRangeContainer=this.domNode.querySelector(".date-range-container");this.dateYearContainer=this.domNode.querySelector(".date-year-container");
this.dateYearSelect=this.domNode.querySelector(".date-year-select");this.dateDayOption=this.domNode.querySelector(".duration-daily");this.dateYearOption=this.domNode.querySelector(".duration-yearly");this.reportDateError=this.domNode.querySelector(".date-error-message");this.reportDateTime=this.domNode.querySelector(".date-duration-info");this.dateContainer=this.domNode.querySelector(".date-picker-container");this._reportTypeOptionsContainer=this.domNode.querySelector(".js-report-type-options");this.nameInputField=
this.domNode.querySelector(".js-report-name-input");this.nameError=this.domNode.querySelector(".name-error-message");this.nameEditIcon=this.domNode.querySelector(".report-edit-icon");this.viewCountSelect=this.domNode.querySelector("#view-aggregate-select");this.viewCountRow=this.domNode.querySelector("#view-count-preview-row");this.viewCountLabel=this.domNode.querySelector("#view-aggregate-label");this.viewCountContainer=this.domNode.querySelector("#view-count-container");this.initDateSelector();
this.renderReportType();!this.defaultProps.title||"credits"!==this.defaultType&&"activity"!==this.defaultType||this.changeReportNameManually(this.defaultProps.title);this.addListeners();this.hideLoader()};A.prototype.addListeners=function(){this.own((0,d.default)(this.nameInputField,"input",(0,t.default)(this.changeReportNameEvent.bind(this),500)),(0,d.default)(this.dateDuration,"calciteSegmentedControlChange",this._dateDurationChange.bind(this)),(0,d.default)(this.dateDay,"calciteInputDatePickerChange",
this.changeDateDay.bind(this)),(0,d.default)(this.dateRange,"calciteInputDatePickerClose",this.changeDateRange.bind(this)),(0,d.default)(this.viewCountSelect,"change",this.changeViewCountPreview.bind(this)),(0,d.default)(this.dateYearSelect,"change",this.changeDateYear.bind(this)),(0,d.default)(this.domNode.querySelector(".js-report-type-label"),"click",function(y){y.preventDefault()}))};A.prototype.getDateValueAsDate=function(y,z){void 0===z&&(z=!1);return Array.isArray(y)?z?y[1]:y[0]:y};A.prototype.getDateValueAsString=
function(y,z){void 0===z&&(z=!1);return Array.isArray(y)?z?y[1]:y[0]:y};A.prototype.changeDefaultName=function(){var y,z,B="".concat(a.default.createReport.defaultName.org),C=(null===(y=this.dateDuration.selectedItem)||void 0===y?void 0:y.value)||"daily";y="weekly"===C?"".concat(a.default.createReport.defaultName.weekly):"daily"===C?"".concat(a.default.createReport.defaultName.day):"quarterly"===C?"".concat(a.default.createReport.defaultName.quarterly):"yearly"===C?"".concat(a.default.createReport.defaultName.yearly):
"".concat(a.default.createReport.defaultName.monthly);var H="daily"===C,E="yearly"===C;"activity"===this.type||"credits"===this.type||"serviceUsages"===this.type||"itemUsages"===this.type?(C="weekly"===C?this._rangeDates[0]:null===(z=this.dateDay)||void 0===z?void 0:z.valueAsDate,z=E?this.dateYearSelect.value:this.printStartDate(H,this.getDateValueAsDate(C)),B+=("credits"===this.type?"".concat(a.default.createReport.defaultName.credits):"serviceUsages"===this.type?"".concat(a.default.createReport.defaultName.service):
"itemUsages"===this.type?"".concat(a.default.createReport.defaultName.view):"".concat(a.default.createReport.defaultName.activity))+y+"_"+z):B+=("content"===this.type?"".concat(a.default.createReport.defaultName.content):"".concat(a.default.createReport.defaultName.users))+"_"+this.printStartDate(!0);this.name=this.name||B;this.changeReportNameDefault(B)};A.prototype.printStartDate=function(y,z){void 0===y&&(y=!1);void 0===z&&(z=new Date);var B="";y?B=z.toLocaleDateString(this.locale,{year:"numeric",
month:"numeric",day:"numeric"}):(y=this._rangeDates[0],z=this._rangeDates[1],B="weekly"===this.dateDuration.value?"".concat(y.toLocaleDateString(this.locale,{year:"numeric",month:"numeric",day:"numeric",timeZone:"UTC"}),"_").concat(z.toLocaleDateString(this.locale,{year:"numeric",month:"numeric",day:"numeric",timeZone:"UTC"})):y.toLocaleDateString(this.locale,{year:"numeric",month:"numeric",timeZone:"UTC"}));return B};A.prototype.changeReportNameEvent=function(y){this.changeReportNameManually(y.srcElement.value)};
A.prototype.changeReportNameManually=function(y){this.defaultName=!1;this.changeReportName(y)};A.prototype.changeReportNameDefault=function(y){this.nameInputField.value=y;this.changeReportName(y)};A.prototype.changeReportName=function(y){var z=this;(y=y.trim())?this.doesReportNameExist(y).then(function(B){B?(z.defaultName&&z.changeReportNameUtil(y),B=c.default.substitute(a.default.createReport.errors.reportNameAlreadyExists,{reportName:y}),z.showNameError(B)):z.changeReportNameUtil(y)}):this.showNameError(a.default.createReport.errors.reportNameBlank)};
A.prototype.doesReportNameExist=function(y){var z='(title:"'.concat(y,'" AND orgid:"').concat(this.portal.id,'" AND type:"Administrative Report")');return this.portal.queryItems({q:z}).then(function(B){var C;return null===(C=B.items)||void 0===C?void 0:C.some(function(H){return H.title===y})})};A.prototype.changeReportNameUtil=function(y){-1<y.indexOf("\x3c")||-1<y.indexOf("\x3e")?this.showNameError():(this.hideNameError(),this.name=y)};A.prototype.showNameError=function(y){this.nameError.innerText=
y?y:a.default.itemProperties.error.badCharacter;x.default.setInvalidState(this.nameInputField,this.nameError);this.nameInputField.classList.add("input-error");this.nameEditIcon.classList.add("hide");this._primaryBtn.disabled=!0};A.prototype.hideNameError=function(){x.default.clearState([this.nameInputField,this.nameError]);this.nameInputField.classList.remove("input-error");this.nameEditIcon.classList.remove("hide");this._primaryBtn.disabled=!1};A.prototype.getReportType=function(){return this._selectedReportTypeOption.reportType.slug};
A.prototype.renderReportType=function(){var y=this,z,B=[{name:a.default.createReport.reportType.itemLabel,slug:"content",desc:a.default.createReport.reportType.itemMsg},{name:a.default.createReport.reportType.memberLabel,slug:"users",desc:a.default.createReport.reportType.memberMsg}];this.portal.isPortal||B.push({name:a.default.createReport.reportType.viewLabel,slug:"itemUsages",desc:a.default.createReport.reportType.viewMsg});this.portal.isPortal||"Developer Subscription"===(null===(z=this.portal.subscriptionInfo)||
void 0===z?void 0:z.type)||B.unshift({name:a.default.createReport.reportType.creditLabel,slug:"credits",desc:a.default.createReport.reportType.creditMsg});this.portal.isPortal||(B.unshift({name:a.default.createReport.reportType.activityLabel,slug:"activity",desc:a.default.createReport.reportType.activityMsg}),B.push({name:a.default.createReport.reportType.serviceLabel,slug:"serviceUsages",desc:a.default.createReport.reportType.serviceMsg}));this._reportTypeSelect=new l.default({reportTypes:B,default:B.filter(function(C){return C.slug===
y.defaultType})[0]},this._reportTypeOptionsContainer);this.own((0,d.default)(this._reportTypeSelect,"change",this.onReportTypeChange.bind(this)));this.onReportTypeChange(this.defaultType,!!this.defaultProps.title)};A.prototype.getLearnLink=function(){var y={content:"120003647",activity:"120003645",users:"120003648",credits:"120003646",serviceUsages:"120003725",itemUsages:"120004134"}[this.type];return'\x3ca href\x3d"'.concat("".concat(G.default.self.helpBase).concat(this.portal.helpMap.m[y]||""),
'" target\x3d"_blank"\x3e').concat(a.default.itemProperties.learnMore,"\x3c/a\x3e")};A.prototype.onReportTypeChange=function(y,z){this._selectedReportTypeOption=this._reportTypeSelect.getSelectedOption();this.type=this.getReportType();var B=this.reportDateTime.querySelector(".js-date-learn-link");B&&(B.innerHTML=this.getLearnLink());"activity"===y||"credits"===y||"serviceUsages"===y||"itemUsages"===y?this.showDateSelector("activity"===y,"itemUsages"===y):this.hideDateSelector();this.defaultName&&
!z?this.changeDefaultName():null;"itemUsages"===y?(this.viewCountContainer.classList.remove("hide"),this.changeViewCountAggregation()):this.viewCountContainer.classList.add("hide")};A.prototype.createReport=function(){var y=new u.default,z=this.type,B="activity"===this.type||"credits"===this.type||"serviceUsages"===this.type||"itemUsages"===this.type,C=B?this.dateDuration.selectedItem.value:null;B=B?"".concat(this._date.valueOf()):null;var H=this.name,E="".concat(G.default.restBaseUrl,"community/users/").concat(this.user.username,
"/report"),K="itemUsages"===this.type?this.getViewCountAggregation(C):void 0;D.default.request({url:E,content:{f:"pjson",reportType:"org",reportSubType:z,timeDuration:C,startTime:B,title:H,timeAggregate:K}},{usePost:!0}).then(function(I){return y.resolve(I)},function(I){return y.reject(I)});return y};A.prototype.initDaySelector=function(){var y=new Date;y.setDate(y.getDate()-1);var z=y.toISOString().substring(0,10),B=this._minDate.toISOString().substring(0,10);this.dateDay.value=z;this.dateDay.min=
B;this.dateDay.max=z;this.changeStartInfo(y)};A.prototype.initRangeSelector=function(){var y=new Date;y.setDate(y.getDate()-1);var z=y.toISOString().substring(0,10),B=this._minDate.toISOString().substring(0,10);this.dateRange.value=[z,z];this.dateRange.min=B;this.dateRange.max=z;this._rangeDates=[y,y]};A.prototype.initYearSelector=function(){var y=new Date;y.setDate(y.getDate()-1);y=y.getFullYear()-1;var z=document.createElement("option");z.value="".concat(y);z.innerText="".concat(y);z.selected=!0;
this.dateYearSelect.add(z)};A.prototype.changeStartInfo=function(y){var z=a.default.createReport.dateDuration.startInfo;z="monthly"===this.dateDuration.selectedItem.value?a.default.createReport.dateDuration.startInfoMonth:"weekly"===this.dateDuration.selectedItem.value?a.default.createReport.dateDuration.startInfo:"quarterly"===this.dateDuration.selectedItem.value?a.default.createReport.dateDuration.startInfoQuarter:"yearly"===this.dateDuration.selectedItem.value?a.default.createReport.dateDuration.startInfoYear:
a.default.createReport.dateDuration.startInfoDay;y.setUTCHours(0,0,0,0);y=y.toLocaleDateString(this.locale,{year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",timeZoneName:"short"});this.reportDateTime.textContent=c.default.substitute(z,{time:y});z=' \x3cspan class\x3d"js-date-learn-link"\x3e'.concat(this.getLearnLink(),"\x3c/span\x3e ");h.default.place(z,this.reportDateTime,"last")};A.prototype.changeDateDay=function(){var y=new Date(this.getDateValueAsString(this.dateDay.value));
this.changeStartInfo(y);this.defaultName?this.changeDefaultName():null;this._date=y};A.prototype.changeDateRangeMax=function(){var y=new Date;y.setUTCHours(0,0,0,0);var z=new Date,B=new Date(this.twoYearsAgo.getTime());if("weekly"===this.dateDuration.selectedItem.value){y.setDate(y.getDate()-y.getDay());z=new Date(y.getFullYear(),y.getMonth(),y.getDate()-6);y.setUTCHours(0,0,0,0);z.setUTCHours(0,0,0,0);var C=((7-B.getDay())%7+1)%7||7;C=B.getDate()+C;B=new Date(B.setDate(C));this._minDate<B&&(this.dateRange.minAsDate=
new Date(Date.UTC(B.getFullYear(),B.getMonth(),B.getDate(),0,0,0,0)))}else"monthly"===this.dateDuration.selectedItem.value?(y=new Date(y.getUTCFullYear(),y.getUTCMonth(),0),z=new Date(y.getUTCFullYear(),y.getUTCMonth(),1),B.setMonth(B.getMonth()+1),B.setUTCDate(1),B.setUTCHours(0,0,0,0),this._minDate<B&&(this.dateRange.minAsDate=B)):"quarterly"===this.dateDuration.selectedItem.value?(y=new Date(y.getUTCFullYear(),y.getUTCMonth()-y.getUTCMonth()%3,0),z=new Date(y.getUTCFullYear(),y.getUTCMonth()-2,
1),B=new Date(this.twoYearsAgo.getUTCFullYear(),this.twoYearsAgo.getUTCMonth()-this.twoYearsAgo.getUTCMonth()%3+3,1),this._minDate<B&&(this.dateRange.minAsDate=B)):"yearly"===this.dateDuration.selectedItem.value&&(y=new Date(y.getUTCFullYear(),0,0),z=new Date(y.getUTCFullYear(),0,1));this.dateRange.maxAsDate=y;this.dateRange.valueAsDate[1]>y&&(this.dateRange.value=[z.toISOString(),y.toISOString()])};A.prototype.changeDateRange=function(){var y=new Date(this.getDateValueAsString(this.dateRange.value)),
z=new Date(this.getDateValueAsString(this.dateRange.value,!0));y>=this._rangeDates[0]&&z>this._rangeDates[1]&&(y=z);y<this.dateRange.minAsDate&&(y=new Date(this.dateRange.minAsDate.getTime()));z=new Date;"weekly"===this.dateDuration.selectedItem.value?(y.setDate(y.getDate()-y.getDay()),z=new Date(y),z.setDate(y.getDate()+6)):"quarterly"===this.dateDuration.selectedItem.value?(y.setUTCDate(1),y.setUTCMonth(y.getUTCMonth()-y.getUTCMonth()%3),z=new Date(y.getUTCFullYear(),y.getUTCMonth()+3,0)):"yearly"===
this.dateDuration.selectedItem.value?(y.setUTCMonth(0),y.setUTCDate(1),z=new Date(y.getUTCFullYear()+1,0,0)):(y.setUTCDate(1),z=new Date(y.getUTCFullYear(),y.getUTCMonth()+1,0));z.setUTCHours(0,0,0,0);this._rangeDates=[y,z];this.dateRange.value=[y.toISOString(),z.toISOString()];this.changeStartInfo(y);this.defaultName?this.changeDefaultName():null;this._date=y;this.changeViewCountPreview()};A.prototype.changeDateYear=function(){var y=parseInt(this.dateYearSelect.value,10);this._date=new Date(y,0,
1);this.changeStartInfo(this._date);this.changeViewCountPreview();this.defaultName?this.changeDefaultName():null};A.prototype.getViewCountAggregation=function(y){return"weekly"===y?"day":this.viewCountSelect.value};A.prototype.changeViewCountAggregation=function(){var y=a.default.createReport.viewCountAggregation.label,z=["week","month"];switch(this.dateDuration.selectedItem.value){case "weekly":y=a.default.createReport.viewCountAggregation.dailyLabel;z=["day"];break;case "monthly":z=["day","week"]}this.viewCountLabel.innerText=
y;1<z.length?this.viewCountSelect.classList.remove("hide"):this.viewCountSelect.classList.add("hide");Array.from(this.viewCountSelect.children).forEach(function(B){z.some(function(C){return B.classList.contains(C)})?(B.classList.remove("hide"),B.disabled=!1):(B.classList.add("hide"),B.disabled=!0)});z.includes(this.viewCountSelect.value)||(y=this.viewCountSelect.querySelector(".view-count-select-option:not(.hide)"),this.viewCountSelect.value=y.value);this.changeViewCountPreview()};A.prototype.changeViewCountPreview=
function(){var y=this,z=this.viewCountSelect.value,B=[a.default.createReport.viewCountAggregation.columns.itemID],C=new Date(this._rangeDates[0]);C.setUTCHours(0,0,0,0);var H=new Date(this._rangeDates[1]);H.setUTCHours(0,0,0,0);switch(this.dateDuration.selectedItem.value){case "weekly":C=new Date(2023,0,2);for(z=0;7>z;z++)B.push(C.toLocaleDateString(this.locale,{weekday:"long"})),C.setDate(C.getDate()+1);break;case "monthly":if("day"===z)for(;C<=H;)B.push(C.toLocaleDateString(this.locale,{year:"numeric",
month:"long",day:"numeric",timeZone:"UTC"})),C.setUTCDate(C.getUTCDate()+1);else for(z=w.default.elapsedTime(C.getTime(),H.getTime()),C=w.default.calculateWeeks(z),z=1;z<=C;z++)H=c.default.substitute(a.default.createReport.viewCountAggregation.columns.week,{number:"".concat(z)}),B.push(H);break;case "quarterly":if("week"===z)for(B.unshift(a.default.createReport.viewCountAggregation.columns.title),z=w.default.elapsedTime(C.getTime(),H.getTime()),C=w.default.calculateWeeks(z),z=1;z<=C;z++)H=c.default.substitute(a.default.createReport.viewCountAggregation.columns.weekView,
{number:"".concat(z)}),B.push(H);else for(;C<=H;)B.push(C.toLocaleDateString(this.locale,{year:"numeric",month:"long",timeZone:"UTC"})),C.setMonth(C.getMonth()+1);break;default:if("week"===z)for(z=1;52>=z;z++)H=c.default.substitute(a.default.createReport.viewCountAggregation.columns.week,{number:"".concat(z)}),B.push(H);else for(z=0;12>z;z++)B.push((new Date(parseInt(this.dateYearSelect.value,10),z)).toLocaleDateString(this.locale,{year:"numeric",month:"long",timeZone:"UTC"}))}this.viewCountRow.innerHTML=
"";B.forEach(function(E){var K=document.createElement("td");K.innerText=E;y.viewCountRow.appendChild(K)})};return A=f.__decorate([(0,F.default)(m.default,g.default,p.default,v.default)],A)}()})},"arcgisonline/pages/dijit/CreateReport/ReportTypeSelect":function(){define("require exports tslib dojo/topic dojo/dom-construct dojo/dom-class dojo/keys dojo/on dojo/Evented dojo/text!./templates/ReportTypeSelect.html dojo/i18n!../../../nls/arcgisonline dijit/_TemplatedMixin dijit/_WidgetBase ./ReportTypeOption ../../../tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);return function(){function p(l,n){this.templateString=q.default;this.i18n=t.default;this._isOpen=this.hasChanged=!1;this._currentOptionIndex=0}p.prototype.postCreate=function(){var l=this;
this._renderOptions(this.default?this.default:this.reportTypes[0]);this.own((0,a.default)(document.documentElement,"click",function(n){n=n.target;n===l.domNode||l.domNode.contains(n)||(d.default.remove(l.domNode,"report-type--is-open"),document.body.classList.remove("report-type--is-open"),l._isOpen=!1)}))};p.prototype.focus=function(){this._selectedTypeOption.domNode.focus()};p.prototype.select=function(l){var n;this.value=null!==(n=null===l||void 0===l?void 0:l.slug)&&void 0!==n?n:"";this._renderOptions(l)};
p.prototype.isvalid=function(){return 0!==this.reportTypes.length};p.prototype.getSelectedOption=function(){return this._selectedTypeOption};p.prototype.disableOption=function(l,n){this.reportTypeOptions.forEach(function(k){k.reportType.slug===l.slug&&k.disable(n)})};p.prototype.enableOption=function(l){this.reportTypeOptions.forEach(function(n){n.reportType.slug===l.slug&&n.enable()})};p.prototype.collapseIfExpanded=function(){this._isOpen&&this._toggleTypeSelect(void 0,!1)};p.prototype._toggleTypeSelect=
function(l,n){void 0===n&&(n=!0);1>=this.reportTypes.length||(this._isOpen?(d.default.remove(this.domNode,"report-type--is-open"),document.body.classList.remove("report-type--is-open")):(d.default.add(this.domNode,"report-type--is-open"),document.body.classList.add("report-type--is-open"),document.querySelectorAll(".report-type__selected-option .report-type-option").forEach(function(k){return k.tabIndex=-1})),this._isOpen=!this._isOpen,n&&c.default.publish("report-types-select/toggle"))};p.prototype._onSelectedChange=
function(l){this._isOpen=!1;document.querySelectorAll(".report-type__selected-option .report-type-option").forEach(function(n){return n.tabIndex=0});d.default.remove(this.domNode,"report-type--is-open");document.body.classList.remove("report-type--is-open");l.slug!==this._currentSelectedType.slug&&(this.hasChanged=!0,this._renderOptions(l),d.default.remove(this.domNode,"report-type--is-open"),document.body.classList.remove("report-type--is-open"),this.emit("change",this.value))};p.prototype._renderOptions=
function(l){var n=this,k,r,w;this._currentSelectedType=l;1===this.reportTypes.length&&this.domNode.classList.add("report-type__single-option");0<(null===(k=this.reportTypeOptions)||void 0===k?void 0:k.length)&&this.reportTypeOptions.forEach(function(x){x.destroy()});null===(r=this._selectedTypeOption)||void 0===r?void 0:r.destroy();this.reportTypeOptions=[];this.value=null!==(w=null===l||void 0===l?void 0:l.slug)&&void 0!==w?w:"";this._selectedOption.innerHTML="";this._options.innerHTML="";this.reportTypes.forEach(function(x,
D){var G=new m.default({reportType:x,checked:(null===l||void 0===l?void 0:l.slug)===x.slug,preventDefaultOnClick:!0});(null===l||void 0===l?void 0:l.slug)===x.slug&&(n._currentOptionIndex=D,n._selectedTypeOption=new m.default({reportType:x,checked:!0,radioName:"selectedReportType",preventDefaultOnClick:!0}),n.own((0,a.default)(n._selectedTypeOption,"select",n._toggleTypeSelect.bind(n)),(0,a.default)(n._selectedTypeOption.domNode,"keyup",n._onSelectedKeydown.bind(n))),h.default.place(n._selectedTypeOption.domNode,
n._selectedOption));n.own((0,a.default)(G,"select",n._onSelectedChange.bind(n)));h.default.place(G.domNode,n._options);n.reportTypeOptions.push(G)});this._selectedOption.setAttribute("aria-label",t.default.createReport.reportType.selectLabel)};p.prototype._traverseOption=function(l){this.reportTypeOptions.forEach(function(k){k.deselect()});var n=this.reportTypeOptions[l];n.select();this.value=n.reportType.slug;this._currentOptionIndex=l};p.prototype._onSelectedKeydown=function(l){var n=this;switch(l.keyCode){case b.default.UP_ARROW:this._traverseOption(0===
this._currentOptionIndex?this.reportTypeOptions.length-1:this._currentOptionIndex-1);break;case b.default.DOWN_ARROW:this._isOpen?this._traverseOption(this._currentOptionIndex===this.reportTypeOptions.length-1?0:this._currentOptionIndex+1):this._toggleTypeSelect();break;case b.default.ESCAPE:case b.default.ENTER:if(l.preventDefault(),this._isOpen){this._toggleTypeSelect();var k=this.reportTypes.filter(function(r){return r.slug===n.value})[0];this._onSelectedChange(k);this._selectedTypeOption&&this._selectedTypeOption.domNode.focus()}else this._toggleTypeSelect()}l.stopPropagation()};
return p=f.__decorate([(0,v.default)(g.default,u.default,e.default)],p)}()})},"arcgisonline/pages/dijit/CreateReport/ReportTypeOption":function(){define("require exports tslib calcite-web/js/calcite-web dijit/_TemplatedMixin dijit/_WidgetBase dijit/a11yclick dojo/on dojo/Evented dojo/text!./templates/ReportTypeOption.html dojo/i18n!../../../nls/arcgisonline ../../../tsutils/declareDecorator".split(" "),function(S,J,f,c,h,d,b,a,e,q,t,u){Object.defineProperty(J,"__esModule",{value:!0});c=f.__importDefault(c);
h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);S=function(){function g(m,v){this.templateString=q.default;this.i18n=t.default;this.radioName="reportType";this._selectedClass="report-type-option--selected"}g.prototype.postMixInProperties=function(){this.inherited(arguments)};g.prototype.postCreate=function(){this.inherited(arguments);this.expandedSelected&&(this._selectedClass=
"report-type-option--selected-expanded");this._name.textContent=this.reportType.name;this._desc.textContent=this.reportType.desc||"";this.domNode.setAttribute("aria-label",t.default.createReport.reportType.optionLabel.replace("${type}",this.reportType.name).replace("${description}",this.reportType.desc));this.domNode.setAttribute("aria-selected",this.checked?"true":"false");this._radioButton.checked=this.checked;this._radioButton.setAttribute("aria-checked",this._radioButton.checked?"true":"false");
this.checked&&this.domNode.classList.add(this._selectedClass);setTimeout(function(){c.default.dropdown()},100);this._addEventListeners()};g.prototype.deselect=function(){this.checked=!1;this._radioButton.setAttribute("aria-checked","false");this._radioButton.checked=this.checked;this.domNode.classList.remove(this._selectedClass)};g.prototype.select=function(){this.checked=!0;this._radioButton.setAttribute("aria-checked","true");this._radioButton.checked=this.checked;this.domNode.classList.add(this._selectedClass)};
g.prototype.disable=function(m){this._radioButton.disabled=!0;this.domNode.classList.add("report-type-option--disabled");this._disableClickCallback=m};g.prototype.enable=function(){this._radioButton.disabled=!1;this.domNode.classList.remove("report-type-option--disabled")};g.prototype._addEventListeners=function(){var m=this;this.own((0,a.default)(this.domNode,"mousedown",function(v){m._radioButton.disabled&&v.preventDefault()}),(0,b.default)(this.domNode,function(v){v.stopPropagation();m.preventDefaultOnClick&&
v.preventDefault();m._radioButton.disabled&&m._disableClickCallback?m._disableClickCallback(m):(m.select(),m.emit("select",m.reportType))}));this._radioButton.addEventListener("change",function(){m._radioButton.setAttribute("aria-checked",m._radioButton.checked?"true":"false")})};return g=f.__decorate([(0,u.default)(d.default,h.default,e.default)],g)}();J.default=S})},"arcgisonline/pages/utils/time":function(){define(["require","exports"],function(S,J){function f(h,d){return d-h}function c(h){return Math.ceil(h/
6048E5)}Object.defineProperty(J,"__esModule",{value:!0});J.calculateWeeks=J.elapsedTime=void 0;J.elapsedTime=f;J.calculateWeeks=c;J.default={elapsedTime:f,calculateWeeks:c}})},"arcgisonline/pages/dijit/ScheduleReport":function(){define("require exports tslib dojo/string dojo/on dojo/text!./CreateReport/templates/ScheduleReport.html dojo/i18n!../../nls/arcgisonline dojo/topic dojo/_base/kernel dojo/debounce dijit/_TemplatedMixin dijit/_WidgetBase ./Overlay ../../sharing/dijit/_LevelAwareMixin ./CreateReport/ReportTypeSelect ../utils/icons ../utils/validation ../utils/alerts ../utils/culture ../utils/date ../../sharing/util ../../tsutils/declareDecorator dojo/Deferred ../../esriGeowConfig ./SelectOptions".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);D=f.__importDefault(D);
G=f.__importDefault(G);F=f.__importDefault(F);return function(){function A(y,z){this.title=b.default.createReport.dlgTitleSchedule;this.i18n=b.default;this.icons=p.default;this.closeOnScrimClick=!1;this.maxWidth=700;this.defaultType="content";this.defaultProps={};this.editScheduleOnly=!1;this._scheduleDurationValue="daily";this._groupIcons=[]}A.prototype.postMixInProperties=function(){this.inherited(arguments);this._scheduleNoticeHelp={content:this.helpMapUrl("120003647"),activity:this.helpMapUrl("120003645"),
users:this.helpMapUrl("120003648"),credits:this.helpMapUrl("120003646"),serviceUsages:this.helpMapUrl("120003725"),views:this.helpMapUrl("120003725"),itemUsages:this.helpMapUrl("120004134")};this.user=this.user||w.default.getUser();this.portal=this.portal||this.user.portal;var y=new Date;y.setFullYear(y.getFullYear()-2);this._minDate=this.portal.created>y?this.portal.created:y;y=this.portal.culture||"en";this.locale=e.default.locale.toLowerCase()!==y.toLowerCase()?e.default.locale:y;y=k.default.getDatePickerLocale(this.locale);
this.overlayContents=c.default.substitute(d.default,{i18n:b.default,editIcon:p.default.edit["16"],folderIcon:p.default.inline["folder-plus"]["16"],checkIcon:p.default.check["24"],xIcon:p.default.x["24"],arrowRightIcon:p.default["arrow-right"]["16"],calendarIcon:p.default.calendar["16"],locale:y})};A.prototype.postCreate=function(){this.inherited(arguments)};A.prototype.destroy=function(){this.inherited(arguments)};A.prototype.open=function(){this.domNode.classList.add("overlay-create-report");this._defaultName=
!this.editScheduleOnly;this._setPrimaryBtnText(b.default.createReport.primaryLabelSchedule);this.showLoader();this._initUI();this.editScheduleOnly&&this._setEditOnly();this.inherited(arguments);this._reportTypeSelect.focus()};A.prototype._setEditOnly=function(){var y=this;this._setOverlayTitle(b.default.createReport.dlgTitleEdit);this._setPrimaryBtnText(b.default.createReport.primaryLabelEdit);this._changeReportNameManually(this.defaultProps.title);this._nameInputField.value=this.defaultProps.title;
if(this.defaultProps.task){var z=this._reportTypeSelect.reportTypes.filter(function(K){return K.slug===y.defaultProps.task.parameters.reportSubType})[0];this._reportTypeSelect.select(z);this._onReportTypeChange();z=this.defaultProps.task.cronSchedule;for(var B="1"===z.dayOfMonth&&"?"===z.dayOfWeek&&"0"===z.hour&&"1"===z.minute&&"1"===z.month?"yearly":"*"===z.dayOfMonth?"daily":"?"===z.dayOfMonth?"weekly":"*/3"===z.month?"quarterly":"monthly",C=0;C<this._scheduleDuration.children.length;C++){var H=
this._scheduleDuration.children.item(C);H.checked=H.value===B;H.checked?H.click():null}this._scheduleDurationValue=B;"yearly"===B?this.domNode.querySelector(".schedule-duration-yearly").setAttribute("checked","true"):"weekly"===B?this._scheduleWeeklyRadioGroup.select(z.dayOfWeek):"monthly"===B&&(this._scheduleMonthlySelect.value=z.dayOfMonth);z=new Date;B=z.toISOString().substring(0,10);C=new Date(this.defaultProps.task.startDate);H=C.toISOString().substring(0,10);this._scheduleStartDateCalendar.value=
C.toISOString();this._scheduleStartDateCalendar.min=C<z?H:B;if(this.defaultProps.task.endDate){this._scheduleEnd.value="ondate";this._changeScheduleEnd({srcElement:{value:"ondate"}});var E=(new Date(this.defaultProps.task.endDate)).toISOString().substring(0,10);this._scheduleEndDateCalendar.value=E;this._scheduleEndDateCalendar.min=C>z?H:B;this._scheduleEndDateCalendar.dispatchEvent(new Event("calciteInputDatePickerChange"))}else-1<this.defaultProps.task.maxOccurrences&&(this._scheduleEnd.value="number",
this._changeScheduleEnd({srcElement:{value:"number"}}),this._scheduleEndOccurrence.value=this.defaultProps.task.maxOccurrences,this._scheduleEndOccurrence.dispatchEvent(new Event("input")))}};A.prototype.close=function(){this.inherited(arguments)};A.prototype.showLoader=function(y){this._primaryBtn.disabled=!0;this._cancelBtn.disabled=!0;this.closeBtn.disabled=!0;this.inherited(arguments)};A.prototype.hideLoader=function(){this._primaryBtn.disabled=!1;this._cancelBtn.disabled=!1;this.closeBtn.disabled=
!1;this.inherited(arguments)};A.prototype.handlePrimary=function(){var y=this;this.showLoader();this._type=this._getReportType();this._createScheduledReport().then(function(z){a.default.publish("report/created",z.taskId);a.default.publish("scheduled-reports/update");y.hideLoader();y.close();n.default.showAlert("success",b.default.createReport.success)},function(z){switch(z.messageCode){case "COM_1200":0<=z.message.indexOf("report is already scheduled with task id:")&&(z=z.message.substring(41),y._getScheduleTaskById(z).then(function(B){B=
c.default.substitute(b.default.createReport.errors.reportScheduleDuplicateSearch,{reportName:(null===B||void 0===B?void 0:B.title)||""});y._handleError(B)}));break;default:z=c.default.substitute(b.default.createReport.errors.general,{report:y._name}),y._handleError(z)}})};A.prototype.helpMapUrl=function(y){return"".concat(G.default.self.helpBase).concat(this.portal.helpMap.m[y]||"")};A.prototype._handleError=function(y){this.hideLoader();this.close();n.default.showAlert("error",y)};A.prototype._initSchedule=
function(){var y=new Date,z=y.toISOString().substring(0,10);this._scheduleStartDateCalendar.value=z;this._scheduleStartDateCalendar.min=z;y=new Date(y);y.setDate(y.getDate()+1);y=y.toISOString().substring(0,10);this._scheduleEndDateCalendar.min=y};A.prototype._setPrimaryBtnText=function(y){this._primaryBtn.innerHTML=y};A.prototype._setOverlayTitle=function(y){this.overlayTitle.innerHTML=y};A.prototype._initUI=function(){this._reportTypeOptionsContainer=this.domNode.querySelector(".js-report-type-options");
this._nameInputField=this.domNode.querySelector(".js-report-name-input");this._nameError=this.domNode.querySelector(".name-error-message");this._nameEditIcon=this.domNode.querySelector(".report-edit-icon");this._scheduleDuration=this.domNode.querySelector(".report-schedule__duration-radio");this._scheduleDurationWeekly=this.domNode.querySelector(".report-schedule__weekly");this._scheduleDurationMonthly=this.domNode.querySelector(".report-schedule__monthly");this._scheduleEnd=this.domNode.querySelector("#schedule-end-select");
this._scheduleEndDate=this.domNode.querySelector(".schedule-end-date");this._scheduleEndOccurrence=this.domNode.querySelector(".schedule-end-occurrence");this._scheduleNotice=this.domNode.querySelector(".schedule-notice");this._scheduleMonthlySelect=this.domNode.querySelector(".js-schedule-monthly-select");this._scheduleStartDateCalendar=this.domNode.querySelector(".report-schedule__date-picker");this._scheduleEndDateCalendar=this.domNode.querySelector(".report-schedule_end-date");this.viewCountSelect=
this.domNode.querySelector("#view-aggregate-select");this.viewCountRow=this.domNode.querySelector("#view-count-preview-row");this.viewCountLabel=this.domNode.querySelector("#view-aggregate-label");this.viewCountContainer=this.domNode.querySelector("#view-count-container");for(var y,z=27;1<z;z--)y=document.createElement("option"),y.value="".concat(z),y.text=c.default.substitute(b.default.createReport.schedule.dayOfMonth.day,{number:z}),this._scheduleMonthlySelect.insertBefore(y,this._scheduleMonthlySelect.children[1]);
var B=(new Date).getDay();y=[0,1,2,3,4,5,6].map(function(C){C-=B;var H=new Date;H.setDate(H.getDate()+C);return r.default.format(H.getTime(),"short-weekday")});this._scheduleWeeklyRadioGroup=new F.default({options:[{name:"sunday",text:y[0],value:"1",selected:!0},{name:"monday",text:y[1],value:"2"},{name:"tuesday",text:y[2],value:"3"},{name:"wednesday",text:y[3],value:"4"},{name:"thursday",text:y[4],value:"5"},{name:"friday",text:y[5],value:"6"},{name:"saturday",text:y[6],value:"7"}],rounded:!0},this.domNode.querySelector(".js-schedule-radio-group"));
this._renderReportType();this._initSchedule();!this.defaultProps.title||"credits"!==this.defaultType&&"activity"!==this.defaultType||this._changeReportNameManually(this.defaultProps.title);this._addListeners();this.hideLoader()};A.prototype._addListeners=function(){this.own((0,h.default)(this._nameInputField,"input",(0,q.default)(this._changeReportNameEvent.bind(this),500)),(0,h.default)(this._scheduleDuration,"calciteSegmentedControlChange",this._changeScheduleDuration.bind(this)),(0,h.default)(this._scheduleEnd,
"change",this._changeScheduleEnd.bind(this)),(0,h.default)(this._scheduleStartDateCalendar,"calciteInputDatePickerChange",this._changeScheduleStart.bind(this)),(0,h.default)(this._scheduleStartDateCalendar,"calciteInputDatePickerChange",this.validateStartCalendar.bind(this)),(0,h.default)(this._scheduleStartDateCalendar,"calciteInputDatePickerChange",this.changeViewCountPreview.bind(this)),(0,h.default)(this._scheduleStartDateCalendar,"input",this.validateStartCalendar.bind(this)),(0,h.default)(this._scheduleEndDateCalendar,
"calciteInputDatePickerChange",this.validateEndCalendar.bind(this)),(0,h.default)(this._scheduleEndDateCalendar,"input",this.validateEndCalendar.bind(this)),(0,h.default)(this.viewCountSelect,"change",this.changeViewCountPreview.bind(this)),(0,h.default)(this._scheduleEndOccurrence,"input",this.validateEndNumber.bind(this)),(0,h.default)(this.domNode.querySelector(".js-report-type-label"),"click",function(y){y.preventDefault()}))};A.prototype.getDateValueAsDate=function(y,z){void 0===z&&(z=!1);return Array.isArray(y)?
z?y[1]:y[0]:y};A.prototype.getDateValueAsString=function(y,z){void 0===z&&(z=!1);return Array.isArray(y)?z?y[1]:y[0]:y};A.prototype._changeScheduleStart=function(){var y=this.getDateValueAsDate(this._scheduleStartDateCalendar.valueAsDate);y=new Date(y);y.setDate(y.getDate()+1);this._scheduleEndDateCalendar.min=y.toISOString().substring(0,10)};A.prototype._changeScheduleDuration=function(y){this._scheduleDurationValue=y.target.selectedItem.value;this._changeScheduleDurationUtil()};A.prototype._changeScheduleDurationUtil=
function(){this._scheduleDurationWeekly.classList.add("hide");this._scheduleDurationMonthly.classList.add("hide");"monthly"!==this._scheduleDurationValue||"content"!==this._type&&"users"!==this._type?"weekly"!==this._scheduleDurationValue||"content"!==this._type&&"users"!==this._type||this._scheduleDurationWeekly.classList.remove("hide"):this._scheduleDurationMonthly.classList.remove("hide");this._changeScheduleNotice();this._defaultName?this._changeDefaultName():null;"itemUsages"===this._type?(this.viewCountContainer.classList.remove("hide"),
this.changeViewCountAggregation()):this.viewCountContainer.classList.add("hide")};A.prototype._changeScheduleEnd=function(y){this._scheduleEndDate.classList.add("hide");this._scheduleEndOccurrence.classList.add("hide");"ondate"===y.srcElement.value?(this._scheduleEndDate.classList.remove("hide"),this._scheduleEndDateCalendar.value||(this._scheduleEndDateCalendar.classList.add("input-error"),this.validatePrimaryBtn(!0))):"number"===y.srcElement.value?(this._scheduleEndOccurrence.classList.remove("hide"),
this._scheduleEndOccurrence.value?this.validatePrimaryBtn():(this._scheduleEndOccurrence.classList.add("input-error"),this.validatePrimaryBtn(!0))):this.validatePrimaryBtn()};A.prototype.validateStartCalendar=function(y){this._scheduleStartDateCalendar.value?(this._scheduleStartDateCalendar.classList.remove("input-error"),this.validatePrimaryBtn()):(this._scheduleStartDateCalendar.classList.add("input-error"),this.validatePrimaryBtn(!0))};A.prototype.validateEndCalendar=function(y){this._scheduleEndDateCalendar.value?
(this._scheduleEndDateCalendar.classList.remove("input-error"),this.validatePrimaryBtn()):(this._scheduleEndDateCalendar.classList.add("input-error"),this.validatePrimaryBtn(!0))};A.prototype.validateEndNumber=function(y){this._scheduleEndOccurrence.value?(this._scheduleEndOccurrence.classList.remove("input-error"),this.validatePrimaryBtn()):(this._scheduleEndOccurrence.classList.add("input-error"),this.validatePrimaryBtn(!0))};A.prototype._changeScheduleNotice=function(){var y="";y="content"===this._type||
"users"===this._type?b.default.createReport.schedule.notice[this._type]:"itemUsages"===this._type?b.default.createReport.schedule.notice.views[this._scheduleDurationValue]:b.default.createReport.schedule.notice[this._type][this._scheduleDurationValue];var z="itemUsages"===this._type?b.default.createReport.schedule.noticeLink.views:b.default.createReport.schedule.noticeLink[this._type];this._scheduleNotice.innerHTML=y.replace("${noticeLink}",'\x3ccalcite-link target\x3d"_blank" href\x3d"'.concat(this._scheduleNoticeHelp[this._type],
'"\x3e').concat(z,"\x3c/calcite-link\x3e"))};A.prototype._checkScheduleDefaults=function(){var y=this.domNode.querySelector(".schedule-duration-daily"),z=this.domNode.querySelector(".schedule-duration-yearly");"credits"===this._type||"serviceUsages"===this._type||"itemUsages"===this._type?(y.classList.add("hide"),y.hasAttribute("checked")&&(this._scheduleDuration.selectedItem=this._scheduleDuration.querySelector("calcite-segmented-control-item:not(.hide)"),this._scheduleDurationValue=this._scheduleDuration.selectedItem.value)):
y.classList.remove("hide");"itemUsages"!==this._type?(z.classList.add("hide"),z.hasAttribute("checked")&&(this._scheduleDuration.selectedItem=this._scheduleDuration.querySelector("calcite-segmented-control-item:not(.hide)"),this._scheduleDurationValue=this._scheduleDuration.selectedItem.value)):z.classList.remove("hide");this._changeScheduleNotice()};A.prototype._changeDefaultName=function(){var y,z=(null===(y=this._scheduleDuration.selectedItem)||void 0===y?void 0:y.value)||"daily";y=b.default.createReport.schedule[z];
z="";switch(this._type){case "content":z=b.default.createReport.defaultName.content;break;case "activity":z=b.default.createReport.defaultName.activity;break;case "credits":z=b.default.createReport.defaultName.credits;break;case "serviceUsages":z=b.default.createReport.defaultName.service;break;case "itemUsages":z=b.default.createReport.defaultName.view;break;default:z=b.default.createReport.defaultName.users}y="".concat(y,"_").concat(b.default.createReport.defaultName.org).concat(z);this._name=this._name||
y;this._changeReportNameDefault(y)};A.prototype._changeReportNameEvent=function(y){this._changeReportNameManually(y.srcElement.value)};A.prototype._changeReportNameManually=function(y){this._defaultName=!1;this._changeReportName(y)};A.prototype._changeReportNameDefault=function(y){this._nameInputField.value=y;this._changeReportName(y)};A.prototype._changeReportName=function(y){var z=this;(y=y.trim())?this._doesReportNameExist(y).then(function(B){B?(z._defaultName&&z._changeReportNameUtil(y),B=c.default.substitute(b.default.createReport.errors.reportNameAlreadyExists,
{reportName:y}),z._showNameError(B)):z._changeReportNameUtil(y)}):this._showNameError(b.default.createReport.errors.reportNameBlank)};A.prototype._doesReportNameExist=function(y){var z='(title:"'.concat(y,'" AND orgid:"').concat(this.portal.id,'" AND type:"Administrative Report")');return this.portal.queryItems({q:z}).then(function(B){var C;return null===(C=B.items)||void 0===C?void 0:C.some(function(H){return H.title===y})})};A.prototype._changeReportNameUtil=function(y){-1<y.indexOf("\x3c")||-1<
y.indexOf("\x3e")?this._showNameError():(this._hideNameError(),this._name=y)};A.prototype._showNameError=function(y){this._nameError.innerText=y?y:b.default.itemProperties.error.badCharacter;l.default.setInvalidState(this._nameInputField,this._nameError);this._nameInputField.classList.add("input-error");this._nameEditIcon.classList.add("hide");this.validatePrimaryBtn(!0)};A.prototype._hideNameError=function(){l.default.clearState([this._nameInputField,this._nameError]);this._nameInputField.classList.remove("input-error");
this._nameEditIcon.classList.remove("hide");this.validatePrimaryBtn()};A.prototype._getReportType=function(){return this._selectedReportTypeOption.reportType.slug};A.prototype._renderReportType=function(){var y=this,z,B=[{name:b.default.createReport.reportType.itemLabel,slug:"content",desc:b.default.createReport.reportType.itemMsg},{name:b.default.createReport.reportType.memberLabel,slug:"users",desc:b.default.createReport.reportType.memberMsg}];this.portal.isPortal||B.push({name:b.default.createReport.reportType.viewLabel,
slug:"itemUsages",desc:b.default.createReport.reportType.viewMsg});this.portal.isPortal||"Developer Subscription"===(null===(z=this.portal.subscriptionInfo)||void 0===z?void 0:z.type)||B.unshift({name:b.default.createReport.reportType.creditLabel,slug:"credits",desc:b.default.createReport.reportType.creditMsg});this.portal.isPortal||(B.unshift({name:b.default.createReport.reportType.activityLabel,slug:"activity",desc:b.default.createReport.reportType.activityMsg}),B.push({name:b.default.createReport.reportType.serviceLabel,
slug:"serviceUsages",desc:b.default.createReport.reportType.serviceMsg}));this._reportTypeSelect=new v.default({reportTypes:B,default:B.filter(function(C){return C.slug===y.defaultType})[0]},this._reportTypeOptionsContainer);this.own((0,h.default)(this._reportTypeSelect,"change",this._onReportTypeChange.bind(this)));this._onReportTypeChange(!!this.defaultProps.title)};A.prototype._onReportTypeChange=function(y){this._selectedReportTypeOption=this._reportTypeSelect.getSelectedOption();this._type=this._getReportType();
this._checkScheduleDefaults();this._defaultName&&!y?this._changeDefaultName():null;this._changeScheduleDurationUtil()};A.prototype.validatePrimaryBtn=function(y){void 0===y&&(y=!1);if(y)this._primaryBtn.disabled=!0;else if(this._nameInputField.classList.contains("input-error"))this._primaryBtn.disabled=!0;else if(this._scheduleStartDateCalendar.classList.contains("input-error"))this._primaryBtn.disabled=!0;else{if("ondate"===this._scheduleEnd.value){if(this._scheduleEndDateCalendar.classList.contains("input-error")){this._primaryBtn.disabled=
!0;return}}else if(this._scheduleEndOccurrence.classList.contains("input-error")){this._primaryBtn.disabled=!0;return}this._primaryBtn.disabled=!1}};A.prototype._createScheduledReport=function(){var y=this.editScheduleOnly?"".concat(G.default.restBaseUrl,"community/users/").concat(this.defaultProps.task.owner,"/tasks/").concat(this.defaultProps.task.id,"/update"):"".concat(G.default.restBaseUrl,"community/users/").concat(this.user.username,"/createTask"),z=new D.default,B=this._name,C=this._type,
H="activity"===this._type||"credits"===this._type||"serviceUsages"===this._type||"itemUsages"===this._type?this._scheduleDurationValue:null,E="itemUsages"===this._type?this.getViewCountAggregation(H):void 0;C=JSON.stringify({reportType:"org",reportSubType:C,timeDuration:H,timeAggregate:E});H=Number(this._scheduleStartDateCalendar.valueAsDate.valueOf());E=(new Date).valueOf();H=E>H?E:H;E={daily:{minute:"1",hour:"0",dayOfMonth:"*",month:"*",dayOfWeek:"?"},weekly:{minute:"1",hour:"0",dayOfMonth:"?",
month:"*",dayOfWeek:"1"},monthly:{minute:"1",hour:"0",dayOfMonth:"1",month:"*",dayOfWeek:"?"},quarterly:{minute:"1",hour:"0",dayOfMonth:"1",month:"*/3",dayOfWeek:"?"},yearly:{minute:"1",hour:"0",dayOfMonth:"1",month:"1",year:"*",dayOfWeek:"?"}}[this._scheduleDurationValue];if("content"===this._type||"users"===this._type)"weekly"===this._scheduleDurationValue?E=f.__assign(f.__assign({},E),{dayOfWeek:this._scheduleWeeklyRadioGroup.value()}):"monthly"===this._scheduleDurationValue&&(E=f.__assign(f.__assign({},
E),{dayOfMonth:this._scheduleMonthlySelect.value}));var K="-1",I=null;"number"===this._scheduleEnd.value?K=this._scheduleEndOccurrence.value:"ondate"===this._scheduleEnd.value&&(I=Number(this._scheduleEndDateCalendar.valueAsDate.valueOf())>H?this._scheduleEndDateCalendar.valueAsDate.valueOf():H);B=f.__assign(f.__assign({f:"pjson",title:B,type:"ExecuteReport",parameters:C,startDate:H,endDate:I},E),{maxOccurrences:K});w.default.request({url:y,content:B},{usePost:!0}).then(function(L){return z.resolve(L)},
function(L){return z.reject(L)});return z};A.prototype._getScheduleTaskById=function(y){return f.__awaiter(this,void 0,void 0,function(){var z;return f.__generator(this,function(B){switch(B.label){case 0:return B.trys.push([0,2,,3]),[4,w.default.request({url:"".concat(G.default.restBaseUrl,"portals/self/allScheduledTasks"),content:{types:"ExecuteReport",num:100}})];case 1:return z=B.sent(),[2,z.tasks.find(function(C){return C.id===y})];case 2:return B.sent(),[3,3];case 3:return[2]}})})};A.prototype.getViewCountAggregation=
function(y){return"weekly"===y?"day":this.viewCountSelect.value};A.prototype.changeViewCountAggregation=function(){var y=b.default.createReport.viewCountAggregation.label,z=["week","month"];switch(this._scheduleDuration.selectedItem.value){case "weekly":y=b.default.createReport.viewCountAggregation.dailyLabel;z=["day"];break;case "monthly":z=["day","week"]}this.viewCountLabel.innerText=y;1<z.length?this.viewCountSelect.classList.remove("hide"):this.viewCountSelect.classList.add("hide");Array.from(this.viewCountSelect.children).forEach(function(B){z.some(function(C){return B.classList.contains(C)})?
(B.classList.remove("hide"),B.disabled=!1):(B.classList.add("hide"),B.disabled=!0)});z.includes(this.viewCountSelect.value)||(y=this.viewCountSelect.querySelector(".view-count-select-option:not(.hide)"),this.viewCountSelect.value=y.value);this.changeViewCountPreview()};A.prototype.changeViewCountPreview=function(){var y=this,z=this.viewCountSelect.value,B=[b.default.createReport.viewCountAggregation.columns.itemID],C=this._scheduleStartDateCalendar.value;C=Array.isArray(C)?C[0]:C;C=new Date(C);C.setUTCHours(0,
0,0,0);C=new Date(C);C.setUTCDate(1);var H=new Date(C);switch(this._scheduleDuration.selectedItem.value){case "weekly":C=new Date(2023,0,2);for(z=0;7>z;z++)B.push(C.toLocaleDateString(this.locale,{weekday:"long"})),C.setDate(C.getDate()+1);break;case "monthly":H.setUTCMonth(H.getUTCMonth()+1);H.setUTCDate(0);if("day"===z)for(;C<=H;)B.push(C.toLocaleDateString(this.locale,{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"})),C.setUTCDate(C.getUTCDate()+1);else for(z=H.getTime()-C.getTime(),
C=Math.ceil(z/6048E5),z=1;z<=C;z++)H=c.default.substitute(b.default.createReport.viewCountAggregation.columns.week,{number:"".concat(z)}),B.push(H);break;case "quarterly":H=C.getUTCMonth()%3;C.setUTCMonth(C.getUTCMonth()-H);H=new Date(C);H.setUTCMonth(H.getUTCMonth()+3);H.setUTCDate(0);if("week"===z)for(B.unshift(b.default.createReport.viewCountAggregation.columns.title),z=H.getTime()-C.getTime(),C=Math.ceil(z/6048E5),z=1;z<=C;z++)H=c.default.substitute(b.default.createReport.viewCountAggregation.columns.weekView,
{number:"".concat(z)}),B.push(H);else for(;C<=H;)B.push(C.toLocaleDateString(this.locale,{year:"numeric",month:"long",timeZone:"UTC"})),C.setUTCMonth(C.getUTCMonth()+1);break;default:if("week"===z)for(z=1;52>=z;z++)H=c.default.substitute(b.default.createReport.viewCountAggregation.columns.week,{number:"".concat(z)}),B.push(H);else for(z=0;12>z;z++)B.push((new Date(C.getUTCFullYear(),z)).toLocaleDateString(this.locale,{year:"numeric",month:"long",timeZone:"UTC"}))}this.viewCountRow.innerHTML="";B.forEach(function(E){var K=
document.createElement("td");K.innerText=E;y.viewCountRow.appendChild(K)})};return A=f.__decorate([(0,x.default)(u.default,t.default,m.default,g.default)],A)}()})},"arcgisonline/pages/dijit/AssignLicenses":function(){define("require exports tslib calcite-web/js/calcite-web dojo/promise/all dojo/topic dojo/string dojo/text!./AssignLicenses/templates/AssignLicenses.html dojo/i18n!../../nls/arcgisonline dojo/Deferred dijit/_TemplatedMixin dijit/_WidgetBase ./SelectedMembers ../pageUtil ./Overlay ./InviteMembers/LicenseAssignments ./ToggleSwitch ../utils/icons ../utils/alerts ../utils/culture ../utils/dom ../utils/user ../utils/organization ../../sharing/geow/Licenses ../../sharing/util ../../tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);D=
f.__importDefault(D);G=f.__importDefault(G);F=f.__importDefault(F);A=f.__importDefault(A);return function(){function y(z,B){this.title=e.default.myOrganization.manageLicenses.overlayTitle;this.i18n=e.default;this.overlayContents=b.default.substitute(a.default,{i18n:e.default,infoIcon:n.default.inline.info["32"]})}y.prototype.postMixInProperties=function(){this.inherited(arguments);1===this.members.length&&(this.title=b.default.substitute(e.default.myOrganization.manageLicenses.overlayTitleSingleUser,
{name:x.default.createFullName(this.members[0])}))};y.prototype.postCreate=function(){this.inherited(arguments);this.domNode.classList.add("mobile-drill-in")};y.prototype.open=function(){var z=this;this.inherited(arguments);this.domNode.classList.add("assign-licenses-overlay");this.closeBtn.classList.add("hide-on-mobile");this.mobileTitle.textContent=this.i18n.myOrganization.manageLicenses.addOnLicenses;this._overlayLoaderText.textContent=this.i18n.myOrganization.manageLicenses.updating;if(!this.portal.isPortal){this._notifyToggle=
new l.default({label:this.i18n.myOrganization.manageLicenses.notifyEmail,labelClasses:"trailer-0 flex flex-align-center"},this.domNode.querySelector(".js-notify-toggle"));var B=this._notifyToggle.domNode.querySelector(".toggle-switch-label--text");B&&(B.classList.add("text-ellipsis"),B.setAttribute("title",B.textContent));this._overlayActionBar.insertBefore(this.domNode.querySelector(".js-notify"),this._overlayActionBar.querySelector("nav"));w.default.showNode(this.domNode.querySelector(".js-notify"))}this._licensesAPI=
new G.default;(0,h.default)({entitlements:this._licensesAPI.getLicensedEntitlements(),userTypes:this._licensesAPI.getLicenseTypes()}).then(function(C){z._userLicenseTypes=C.userTypes.userLicenseTypes;z._entitlements=C.entitlements;z._entitlements.forEach(function(H){H.isPro?z._proItemId=H.itemId:H.isBusinessAnalyst?z.businessAnalystItemId=H.itemId:H.isDrone2Map&&(z.droneItemId=H.itemId)});return z.requestEntitlements()}).then(function(){z.members.forEach(function(C){C.entitlements=C.entitlements||
[];C.appBundles&&C.appBundles.forEach(function(H){C.entitlements.push(H.id)})});z._addListeners();z._initUI();c.default.dropdown()})};y.prototype.close=function(){this.inherited(arguments);d.default.publish("manage-members/close")};y.prototype.requestEntitlements=function(){var z=this,B={};B.userProvisionedListings=(0,h.default)(this.members.reduce(function(C,H){C[H.username]=z._licensesAPI.getUserProvisionedListings(H.username,{includeExpired:!0});return C},{}));this._proItemId&&(B.proEntitlements=
(0,h.default)(this.members.reduce(function(C,H){C[H.username]=z._licensesAPI.getUserEntitlements(z._proItemId,H.username);return C},{})));this.businessAnalystItemId&&(B.businessAnalystEntitlements=(0,h.default)(this.members.reduce(function(C,H){C[H.username]=z._licensesAPI.getUserEntitlements(z.businessAnalystItemId,H.username);return C},{})));this.droneItemId&&(B.droneEntitlements=(0,h.default)(this.members.reduce(function(C,H){C[H.username]=z._licensesAPI.getUserEntitlements(z.droneItemId,H.username);
return C},{})));return(0,h.default)(B).then(function(C){C.proEntitlements&&Object.keys(C.proEntitlements).forEach(function(H){var E,K,I=z.members.filter(function(M){return M.username===H})[0],L=null===(K=null===(E=C.proEntitlements[H])||void 0===E?void 0:E.userEntitlements)||void 0===K?void 0:K.entitlements;L&&(I.entitlements=f.__spreadArray([],L,!0))});C.businessAnalystEntitlements&&Object.keys(C.businessAnalystEntitlements).forEach(function(H){var E,K,I=z.members.filter(function(M){return M.username===
H})[0],L=null===(K=null===(E=C.businessAnalystEntitlements[H])||void 0===E?void 0:E.userEntitlements)||void 0===K?void 0:K.entitlements;I.entitlements||(I.entitlements=[]);L&&(I.entitlements=f.__spreadArray(f.__spreadArray([],I.entitlements,!0),L,!0))});C.droneEntitlements&&Object.keys(C.droneEntitlements).forEach(function(H){var E,K,I=z.members.filter(function(M){return M.username===H})[0],L=null===(K=null===(E=C.droneEntitlements[H])||void 0===E?void 0:E.userEntitlements)||void 0===K?void 0:K.entitlements;
I.entitlements||(I.entitlements=[]);L&&(I.entitlements=f.__spreadArray(f.__spreadArray([],I.entitlements,!0),L,!0))});C.userProvisionedListings&&Object.keys(C.userProvisionedListings).forEach(function(H){var E=C.userProvisionedListings[H],K=z.members.filter(function(I){return I.username===H})[0];K.entitlements||(K.entitlements=[]);E.forEach(function(I){var L=z._entitlements.filter(function(N){return N.itemId===I.itemId})[0],M=null===L||void 0===L?void 0:L.key;!L||L.isPro||L.isBusinessAnalyst||L.isDrone2Map||
!M||-1!==K.entitlements.indexOf(M)||K.entitlements.push(M)})});z.members.forEach(function(H){H.doubleAssignedList=[];H.entitlements.forEach(function(E){D.default.isProKey(E)||D.default.isIncludedThroughUserType(H,E)&&H.doubleAssignedList.push(E)});H.entitlements=D.default.filterIncludedEntitlements(H)})})};y.prototype._addListeners=function(){this.own(d.default.subscribe("selected-members/remove",this._onMembersRemove.bind(this)),d.default.subscribe("licenses/warning",this._showWarning.bind(this)))};
y.prototype._provisionProLicenses=function(z,B,C,H,E){var K=this;E||(E=[]);H||(H=new q.default);this._licensesAPI.provisionUserEntitlements(this._proItemId,B[C],z).then(function(I){C++;C>=B.length?0===E.length?H.resolve(I):H.reject(E[0]):K._provisionProLicenses(z,B,C,H,E)},function(I){C++;E.push(I);C>=B.length?H.reject(I):K._provisionProLicenses(z,B,C,H,E)});return H};y.prototype._hasSameEntitlements=function(z,B){z.sort();B.sort();return z.length===B.length&&z.every(function(C,H){return C===B[H]})};
y.prototype.handlePrimary=function(){var z=this,B=this._licenseAssignments.getChangedRows(),C=B.filter(function(H){return H.entitlement.isPro&&!H.isExtension})[0];B=0<B.filter(function(H){return H.entitlement.isPro&&H.isExtension}).length;this.members.some(function(H){return H.entitlements.some(function(E){return(E=z._licenseAssignments.getProRowByKey(E))?(E.checked()||!E.hasChanged)&&E.entitlement.isExpired:!1})})&&(C||B)?m.default.createConfirmationDialog({strings:{title:this.i18n.common.notice,
description:1===this.members.length?this.i18n.myOrganization.manageLicenseMembers.expiredExtensions:this.i18n.myOrganization.manageLicenses.expiredProLicenses},autoCloseOnOk:!0,onOk:function(){z._actuallySave(!0)}}):this._actuallySave()};y.prototype._actuallySave=function(z){var B=this,C,H=this._licenseAssignments.getSelectedLicenses(),E=this.members.map(function(la){return la.username}),K=H.productLicenses,I=this._licenseAssignments.getChangedRows(),L=I.filter(function(la){return la.entitlement.isPro&&
!la.isExtension})[0],M=I.filter(function(la){return la.entitlement.isPro&&la.isExtension}),N=0<M.length,P=[],R=null===(C=this._notifyToggle)||void 0===C?void 0:C.checked(),Y=[];(L||N)&&this.members.forEach(function(la){var ta,Q,T,O,Z={username:la.username,entitlements:[],hasChanged:!1},na=null===(ta=la.entitlements)||void 0===ta?void 0:ta.filter(function(X){return D.default.isProKey(X)})[0];ta=null===(T=null===(Q=la.licenseType)||void 0===Q?void 0:Q.apps)||void 0===T?void 0:T.filter(function(X){return"ArcGIS Pro"===
X.title})[0];if(null===L||void 0===L?0:L.checked()){if(na!==L.entitlement.key||ta)Z.hasChanged=!0;Z.entitlements.push(L.entitlement.key)}else L&&!L.checked()&&na===L.entitlement.key?Z.hasChanged=!0:na&&!L&&Z.entitlements.push(na);null===(O=la.entitlements)||void 0===O?void 0:O.forEach(function(X){if(D.default.isProExtension(X)){var ha=B._licenseAssignments.getProRowByKey(X);ha.hasChanged&&ha.checked()||!ha.hasChanged?Z.entitlements.push(X):ha.hasChanged&&!ha.checked()&&(Z.hasChanged=!0)}});N&&M.forEach(function(X){var ha;
!X.checked()||null!==(ha=la.entitlements)&&void 0!==ha&&ha.filter(function(V){return V===X.entitlement.key})[0]||(Z.entitlements.push(X.entitlement.key),Z.hasChanged=!0)});if(Z.hasChanged){if(z){var ia=[];Z.entitlements.forEach(function(X){var ha=B._licenseAssignments.getProRowByKey(X);ha&&!ha.entitlement.isExpired&&ia.push(X)});Z.entitlements=ia}Y.push(Z)}});var ja=[];Y.forEach(function(la){var ta=ja.filter(function(Q){return B._hasSameEntitlements(Q.entitlements,la.entitlements)})[0];ta?ta.users.push(la.username):
ja.push({users:[la.username],entitlements:la.entitlements})});0<ja.length&&P.push(this._provisionProLicenses(R,ja,0));var aa=F.default.getUser(),da=!1,ra={},ca=this._entitlements.filter(function(la){return la.isPro});this.members.forEach(function(la){var ta,Q=f.__spreadArray([],la.entitlements,!0);null===(ta=la.doubleAssignedList)||void 0===ta?void 0:ta.forEach(function(T){-1===Q.indexOf(T)&&Q.push(T)});Q.filter(function(T){return!ca.filter(function(O){return O.key===T})[0]}).forEach(function(T){var O=
K.filter(function(na){return na.itemId===T||na.key===T})[0],Z=I.filter(function(na){return na.entitlement.key===T||na.entitlement.itemId===T})[0];!O&&Z&&("Web Mapping Application"===Z.entitlement.type&&la.username===aa.username&&(da=!0),ra[T]?ra[T].push(la.username):ra[T]=[la.username])})});Object.keys(ra).forEach(function(la){var ta=B._entitlements.filter(function(T){return T.key===la})[0],Q=!!K.filter(function(T){return T.itemId===ta.itemId})[0];ta&&!Q&&P.push(B._licensesAPI.provisionUserEntitlements(ta.itemId,
{users:ra[la],entitlements:[]},R))});K.forEach(function(la){var ta=[];la.isAppBundle?(B.members.forEach(function(Q){Q.appBundles.filter(function(T){return T.id===la.itemId})[0]||ta.push(Q.username)}),0<ta.length&&P.push(B._licensesAPI.provisionUserAppBundle(la.itemId,ta))):(B.members.forEach(function(Q){-1===Q.entitlements.indexOf(la.itemId)&&(!la.key||la.key&&-1===Q.entitlements.indexOf(la.key))&&("Web Mapping Application"===la.type&&Q.username===aa.username&&(da=!0),ta.push(Q.username))}),0<ta.length&&
P.push(B._licensesAPI.provisionUserEntitlements(la.itemId,{users:ta,entitlements:la.isEsriApp?[la.key]:f.__spreadArray([],la.entitlementKeys||[],!0)},R)))});var fa={};this.members.forEach(function(la){la.appBundles.forEach(function(ta){K.filter(function(Q){return Q.itemId===ta.id})[0]||(fa[ta.id]?fa[ta.id].push(la.username):fa[ta.id]=[la.username])})});Object.keys(fa).forEach(function(la){P.push(B._licensesAPI.provisionUserAppBundle(la,fa[la],!0))});0<P.length?(this._overlayLoader.classList.add("is-active"),
(0,h.default)(P).then(function(){B._overlayLoader.classList.remove("is-active");k.default.showAlert("success",r.default.getString(B.i18n.myOrganization.manageLicenses.licensesUpdated,B.members.length));d.default.publish("members/refresh");d.default.publish("licenses/update");da&&d.default.publish("appLauncher/restart");B.close()},function(la){B._overlayLoader.classList.remove("is-active");"CONT_0056"===la.messageCode?(la=void 0,la=1===E.length?b.default.substitute(B.i18n.manageLicenses.assignLicense.disconnectedSingleWarning,
{name:E[0]}):B.i18n.manageLicenses.assignLicense.disconnectedSomeWarning,k.default.showAlert("error",la)):k.default.showAlert("error",B.i18n.myOrganization.manageLicenses.licensesUpdateError)})):this.close()};y.prototype._onMembersRemove=function(z){w.default.hideNode(this.domNode.querySelector(".js-warning"));this._licenseAssignments.updatePanels()};y.prototype._showWarning=function(z){z=this.i18n.myOrganization.manageLicenses.incompatibleWarning[1<this.members.length?"multiple":"single"];var B=
this.i18n.myOrganization.manageLicenses.removeMembersToEnable[1<this.members.length?"multiple":"single"];this.domNode.querySelector(".js-warning-text").innerHTML="\x3cdiv\x3e".concat(z,"\x3c/div\x3e\x3cdiv\x3e").concat(B,"\x3c/div\x3e");w.default.showNode(this.domNode.querySelector(".js-warning"))};y.prototype._initUI=function(){this._licenseAssignments=new p.default({portal:this.portal,entitlements:this._entitlements,members:this.members,userLicenseTypes:this._userLicenseTypes},this.domNode.querySelector(".js-panels-container"));
this._licenseAssignments.startup();this._selectedMembers=new g.default({showSections:!0,members:this.members},this.domNode.querySelector(".js-selected-members"));if(1>this._entitlements.length){var z=this.domNode.querySelector(".js-no-licenses");z.textContent=this.i18n.myOrganization.licensesTab["noAddOnLicenses".concat(this.portal.isPortal?"Portal":"")];w.default.showNode(z)}};return y=f.__decorate([(0,A.default)(u.default,t.default,v.default)],y)}()})},"arcgisonline/pages/dijit/ManageLicenseTypes":function(){define("require exports tslib dojo/topic dojo/promise/all dojo/on dojo/Deferred dojo/string dojo/text!./ManageLicenseTypes/templates/ManageLicenseTypes.html dojo/i18n!../../nls/arcgisonline dijit/_TemplatedMixin dijit/_WidgetBase ./SelectedMembers ../utils/alerts ../utils/dom ../utils/organization ../pageUtil ./Overlay ./InviteMembers/LicenseTypeSelect ../utils/icons ../utils/arrays ../utils/user ../utils/promises ./RolesSelect/RolesSelect ../../sharing/geow/Licenses ../../sharing/geow/Roles ../../sharing/util ../../esriGeowConfig ../../sharing/dijit/_LevelAwareMixin ../../tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);
D=f.__importDefault(D);G=f.__importDefault(G);F=f.__importDefault(F);A=f.__importDefault(A);y=f.__importDefault(y);z=f.__importDefault(z);B=f.__importDefault(B);C=f.__importDefault(C);return function(){function H(E,K){this.title=q.default.myOrganization.manageLicenseTypes.assignLicenseTypeRole;this.i18n=q.default;this.memberRoles=[];this.entitlements=[];this.hasCoordinators=!1;this.adminContactNotice={title:"",message:"",active:!1};this.userTypeLabel="manage-user-type-dropdown-label"}H.prototype.postMixInProperties=
function(){var E;this.inherited(arguments);1===this.members.length&&(this.title=a.default.substitute(this.i18n.myOrganization.manageLicenseTypes.changeLicenseTypeRole,{name:x.default.createFullName(this.members[0])}),-1<(null===(E=this.portal.contacts)||void 0===E?void 0:E.indexOf(this.members[0].username))&&(E=this.i18n.myOrganization.membersTab.adminContactWarning,this.adminContactNotice={title:E.title,message:a.default.substitute(E.desc,{linkStart:'\x3cbutton class\x3d"btn-link font-size--1 js-contacts-btn"\x3e',
linkEnd:"\x3c/button\x3e"}),active:!0}));this.overlayContents=a.default.substitute(e.default,{i18n:this.i18n,infoIcon:r.default.inline.info["32"],adminContactNotice:this.adminContactNotice,userTypeLabel:this.userTypeLabel})};H.prototype.postCreate=function(){var E=this,K;this.inherited(arguments);this.adminContactNotice.active&&v.default.showNode(this.domNode.querySelector(".js-notice-wrapper"));var I=this.domNode.querySelector(".js-contacts-btn");I&&this.own((0,d.default)(I,"click",function(){E.close();
c.default.publish("admin-contacts/open")}));I=this.user.userRole.isCustom();var L=this.members.some(function(P){return"org_admin"===P.role||"account_admin"===P.role}),M=this.user.userRole.isAdmin(),N=this.members.some(function(P){return P.username===E.user.username});this._adminSelectSelf=M&&N;this._customAdminSelectAdmin=I&&L;this.isAdmin=null===(K=this.user.userRole)||void 0===K?void 0:K.isAdmin();this.domNode.classList.add("mobile-drill-in");this.members.forEach(function(P){-1===E.memberRoles.indexOf(P.role)&&
E.memberRoles.push(P.role)});(this.hasCoordinators=this.members.some(function(P){return P.isCoordinator}))&&v.default.showNode(this.domNode.querySelector(".js-warning"))};H.prototype.open=function(){var E=this;this.inherited(arguments);this.closeBtn.classList.add("hide-on-mobile");this.mobileTitle.textContent=this.i18n.myOrganization.mobileMemberPanel.userTypeRole;this._overlayLoaderText.textContent=this.i18n.myOrganization.manageLicenseTypes.updating;this._content=this.domNode.querySelector(".js-content");
this._loader=this.domNode.querySelector(".js-loader");this._downgradeWarning=this.domNode.querySelector(".js-downgrade-warning");this._downgradeWarningContainer=this.domNode.querySelector(".js-downgrade-warning-container");this.domNode.classList.add("manage-license-types");this._licenseTypeOptionsContainer=this.domNode.querySelector(".js-license-type-options");this._rolesContainer=this.domNode.querySelector(".js-roles");this._roleError=this.domNode.querySelector(".js-role-error");this._rolesSection=
this.domNode.querySelector(".js-roles-section");this._licensesAPI=new F.default;this._rolesAPI=new A.default;document.body.classList.add("manage-user-type--open");this._licensesAPI.getLicenseTypes().then(function(K){E._licenseTypes=null===K||void 0===K?void 0:K.userLicenseTypes;E._selectedMembers=new g.default({showSections:!0,members:E.members},E.domNode.querySelector(".js-selected-members"));return E._licensesAPI.getLicensedEntitlements()}).then(function(K){var I=K.filter(function(L){return L.isPro})[0];
if(null===I||void 0===I?0:I.itemId)E.proItemId=I.itemId;E.members.forEach(function(L){L.entitlements=[];L.appBundles&&L.appBundles.forEach(function(M){L.entitlements.push(M.id)})});K=p.default.filterOutProExtensions(K);K.forEach(function(L){L.isPro&&(L.allowedLevels=[E.LICENSE_LEVELS.TWO])});E.entitlements=K;return E.requestEntitlements()}).then(function(){return E._licensesAPI.getAppBundles()}).then(function(K){K=p.default.convertAppBundletoEntitlement(K.appBundles);E._apps=f.__spreadArray(f.__spreadArray([],
K,!0),E.entitlements,!0);E._render();E._loader.classList.remove("is-active");v.default.showNode(E._content)});this._addListeners();this.getUsersLicenses()};H.prototype.close=function(){this.inherited(arguments);document.body.classList.remove("manage-user-type--open");this._dismissUserTypeAlert();c.default.publish("manage-members/close")};H.prototype._addListeners=function(){var E=this;this.own(c.default.subscribe("selected-members/remove",this._onSelectedMembersRemove.bind(this)),c.default.subscribe("roles-select/toggle",
function(){E._licenseTypeSelect.collapseIfExpanded()}),c.default.subscribe("user-types-select/toggle",function(){E._rolesSelect.collapseIfExpanded()}))};H.prototype.getUsersLicenses=function(){return f.__awaiter(this,void 0,void 0,function(){var E,K;return f.__generator(this,function(I){switch(I.label){case 0:E=this.members.map(function(L){return y.default.request({url:"".concat(z.default.restBaseUrl,"community/users/").concat(L.username,"/provisionedListings")})}),I.label=1;case 1:return I.trys.push([1,
3,,4]),[4,Promise.all(E)];case 2:return K=I.sent(),this.members.forEach(function(L,M){var N;M=K[M].provisionedListings;M=M.filter(function(R){return!p.default.alreadyIncludedInUserType(L.licenseType,R)});var P=0<(null===(N=L.appBundles)||void 0===N?void 0:N.length)||M.some(function(R){return"esri"===R.owner||"esri_apps"===R.owner});L.hasEsriAddonApp=P;L.hasAddonApp=0<M.length}),[3,4];case 3:return I.sent(),[3,4];case 4:return[2]}})})};H.prototype.requestEntitlements=function(){var E=this,K={};K.userProvisionedListings=
(0,h.default)(this.members.reduce(function(I,L){I[L.username]=E._licensesAPI.getUserProvisionedListings(L.username);return I},{}));this.proItemId&&(K.proEntitlements=(0,h.default)(this.members.reduce(function(I,L){I[L.username]=E._licensesAPI.getUserEntitlements(E.proItemId,L.username);return I},{})));return(0,h.default)(K).then(function(I){I.proEntitlements&&Object.keys(I.proEntitlements).forEach(function(L){var M,N,P=E.members.filter(function(Y){return Y.username===L})[0];P.entitlements||(P.entitlements=
[]);var R=null===(N=null===(M=I.proEntitlements[L])||void 0===M?void 0:M.userEntitlements)||void 0===N?void 0:N.entitlements;R&&(P.entitlements=f.__spreadArray(f.__spreadArray([],P.entitlements,!0),R,!0))});I.userProvisionedListings&&Object.keys(I.userProvisionedListings).forEach(function(L){var M=I.userProvisionedListings[L],N=E.members.filter(function(P){return P.username===L})[0];N.entitlements||(N.entitlements=[]);M.forEach(function(P){var R=E.entitlements.filter(function(ja){return ja.itemId===
P.itemId})[0],Y=null===R||void 0===R?void 0:R.key;R&&!R.isPro&&Y&&-1===N.entitlements.indexOf(Y)&&N.entitlements.push(Y)})});E.members.forEach(function(L){L.entitlements=p.default.filterIncludedEntitlements(L)})})};H.prototype._dismissUserTypeAlert=function(){var E;null===(E=document.getElementById("user-type-required-alert"))||void 0===E?void 0:E.remove()};H.prototype._onSelectedMembersRemove=function(){var E=this;this.hasCoordinators=this.members.some(function(N){return N.isCoordinator});v.default.showHide(this.domNode.querySelector(".js-warning"),
this.hasCoordinators);var K=this._licenseTypes;this.hasCoordinators&&(K=this._licenseTypes.filter(function(N){return N.level===E.LICENSE_LEVELS.TWO}));this._licenseTypeSelect.userLicenseTypes=K;var I=K.every(function(N){return N.assigned>=N.maxUsers}),L=!1;K.forEach(function(N){if(1===E.members.length?E.members[0].licenseType.id===N.id:E.members.every(function(P){return P.licenseType.id===N.id}))L=!0,E._licenseTypeSelect.select(N),E._selectedLicenseTypeOption=E._licenseTypeSelect.getSelectedOption()});
L||this._licenseTypeSelect.select(K[0]);K.forEach(function(N){if(N.id!==E._selectedLicenseTypeOption.id){var P=N.maxUsers-N.assigned;E.cannotAssignUserType(N)||E.members.length>P&&(1<E.members.length||!I)?E._licenseTypeSelect.disableOption(N):E._licenseTypeSelect.enableOption(N)}});var M=this.LICENSE_LEVELS.TWO;this.memberRoles=[];this.members.forEach(function(N){N.licenseType.level===E.LICENSE_LEVELS.ONE?M=E.LICENSE_LEVELS.ONE:N.licenseType.level===E.LICENSE_LEVELS.ONE_PLUS_EDIT&&M===E.LICENSE_LEVELS.TWO&&
(M=E.LICENSE_LEVELS.ONE_PLUS_EDIT);-1===E.memberRoles.indexOf(N.role)&&E.memberRoles.push(N.role)});this._licenseTypeSelect.hasChanged&&(M=this._selectedLicenseTypeOption.licenseType.level);K=p.default.filterRoles(this.roles,this._viewerRole,M===this.LICENSE_LEVELS.TWO,M);this.hasCoordinators&&(K=K.filter(function(N){return"org_admin"===N.role||N.role===E.SYSTEM_ROLES.FACILITATOR}));this.updateRolesSelect(K)};H.prototype.updateRolesSelect=function(E){var K=this,I=this.memberRoles.every(function(N){return!!E.filter(function(P){return P.role===
N})[0]}),L=0;if(I&&1<this.memberRoles.length)E=f.__spreadArray([{role:"multi-select",name:"",description:""}],E,!0),L=this.memberRoles.length;else if(I){var M=E.filter(function(N){return N.role===K.memberRoles[0]})[0];L=1}else E=f.__spreadArray([{role:"error",name:"",description:this.i18n.myOrganization.manageLicenseTypes.noRoleSelected}],E,!0),L=0;this._rolesSelect.updateOptions(E,L,M);1<L&&this._rolesSelect.options.forEach(function(N){-1<K.memberRoles.indexOf(N.role.role)&&N.showMembers(K.members.filter(function(P){return P.role===
N.role.role}))})};H.prototype._hasProEntitlements=function(E){return E.some(function(K){return-1!==["desktopBasicN","desktopStdN","desktopAdvN"].indexOf(K)})};H.prototype._checkForGroupsAndItems=function(E){var K=new b.default;(0,h.default)({itemResult:y.default.request({url:"".concat(z.default.restBaseUrl,"search"),content:{q:'owner:"'.concat(E,'"'),start:1,num:1}}),userResult:y.default.request({url:"".concat(z.default.restBaseUrl,"community/users/").concat(E)})}).then(function(I){K.resolve({username:E,
userResult:I.userResult,itemResult:I.itemResult})},function(I){K.reject(I)});return K};H.prototype._ownsGroups=function(E){for(var K=E.username,I=0;I<E.groups.length;I++)if(K===E.groups[I].owner)return!0;return!1};H.prototype._save=function(){var E=this,K,I=null===(K=this._rolesSelect.value)||void 0===K?void 0:K.role,L=this._selectedLicenseTypeOption.licenseType.id,M=[],N=[];this.members.forEach(function(aa){aa.userLicenseTypeId!==L&&E._licenseTypeSelect.hasChanged&&M.push(aa.username);I&&aa.role!==
I&&E._rolesSelect.hasChanged&&N.push(aa.username)});var P=new b.default,R=new b.default,Y=[];if(this._selectedLicenseTypeOption.licenseType.level!==this.LICENSE_LEVELS.TWO&&0<M.length){var ja=[];M.forEach(function(aa){ja.push(E._checkForGroupsAndItems(aa))});(0,h.default)(ja).then(function(aa){aa.forEach(function(da){var ra,ca,fa=E._ownsGroups(da.userResult);((null===(ra=null===da||void 0===da?void 0:da.itemResult)||void 0===ra?0:ra.total)||(null===(ca=null===da||void 0===da?void 0:da.userResult)||
void 0===ca?0:ca.groups)&&fa)&&Y.push(da.username)});R.resolve()},function(){R.resolve()})}else R.resolve();R.then(function(){var aa,da=E._licenseTypes.filter(function(ta){return ta.id===L})[0];if(0===Y.length){var ra=!1;E._licenseTypeSelect.hasChanged&&E.members.some(function(ta){ta.level===E.LICENSE_LEVELS.ONE&&da.level!==E.LICENSE_LEVELS.ONE?ra=!0:ta.level===E.LICENSE_LEVELS.ONE_PLUS_EDIT&&da.level===E.LICENSE_LEVELS.TWO&&(ra=!0);return ra});E._overlayLoader.classList.add("is-active");var ca=new b.default,
fa;if(null===(aa=E._selectedLicenseTypeOption.licenseType.apps)||void 0===aa?0:aa.some(function(ta){var Q=!ta.isAppBundle&&E._hasProEntitlements(ta.entitlements);Q&&(fa=ta.id);return Q})){var la=[];E.members.forEach(function(ta){ta.entitlements&&E._hasProEntitlements(ta.entitlements)&&la.push(ta.username)});0===la.length&&ca.resolve();(0,h.default)(la.map(function(ta){return y.default.request({url:"".concat(z.default.restBaseUrl,"content/listings/").concat(fa,"/userEntitlements/").concat(ta)})})).then(function(ta){ta.some(function(Q){var T;
return null===(T=Q.userEntitlements)||void 0===T?void 0:T.disconnected})?(m.default.showAlert("error",a.default.substitute(E.i18n.myOrganization.manageLicenseTypes.offlineError2,{userType:E._selectedLicenseTypeOption.licenseType.name})),ca.reject(),E.close()):ca.resolve()},function(){ca.resolve()})}else ca.resolve();ca.then(function(){ra?E._updateUsersLicenseType(M,L).then(function(){E._updateRoles(N,I).then(function(){P.resolve()})}):E._updateRoles(N,I).then(function(){E._updateUsersLicenseType(M,
L).then(function(){P.resolve()})})},function(ta){P.reject()});P.then(function(){var ta;if(E._licenseTypeSelect.hasChanged){var Q=[],T=[],O=!1;null===(ta=E._selectedLicenseTypeOption.licenseType.apps)||void 0===ta?void 0:ta.forEach(function(na){var ia=[];!na.isAppBundle&&E._hasProEntitlements(na.entitlements)?(O=!0,E.members.forEach(function(X){if(X.entitlements&&E._hasProEntitlements(X.entitlements))ia.push(X.username);else{var ha=F.default.getExtNotSupported(na.entitlements[0]),V=[],ea=!1;ha&&(X.entitlements.forEach(function(U){p.default.isProExtension(U)&&
(-1<ha.indexOf(U)?ea=!0:V.push(U))}),ea&&T.push({app:na,users:[X.username],entitlements:V}))}})):E.members.forEach(function(X){var ha,V=!1;(V=-1!==(null===(ha=X.entitlements)||void 0===ha?void 0:ha.indexOf(na.id)))&&ia.push(X.username)});0<ia.length?Q.push({app:na,users:ia}):na.isAppBundle&&na.apps.forEach(function(X){var ha=[];E.members.forEach(function(V){var ea;-1!==(null===(ea=V.entitlements)||void 0===ea?void 0:ea.indexOf(X.id))&&ha.push(V.username)});0<ha.length&&Q.push({app:X,users:ha})})});
if(!O){var Z=[];E.members.forEach(function(na){na.entitlements&&!E._hasProEntitlements(na.entitlements)&&na.entitlements.some(function(ia){return p.default.isProExtension(ia)})&&Z.push(na.username)});0<Z.length&&E._licensesAPI.retrieveProductListings().then(function(){var na,ia=E._licensesAPI.getProListing();(ia=null===(na=null===ia||void 0===ia?void 0:ia.listing)||void 0===na?void 0:na.itemId)&&E._licensesAPI.provisionUserEntitlements(ia,{users:Z,entitlements:[]})})}0<T.length&&D.default.eachAlways(T.map(function(na){return E._licensesAPI.provisionUserEntitlements(na.app.id,
{users:na.users,entitlements:na.entitlements})}));E.members.forEach(function(na){na.entitlements.forEach(function(ia){var X,ha=E._apps.filter(function(U){return U.itemId===ia})[0];if(null===ha||void 0===ha?0:ha.requiredListings){var V=!na.entitlements.some(function(U){return-1<ha.requiredListings.indexOf(U)}),ea=!(null===(X=E._selectedLicenseTypeOption.licenseType.apps)||void 0===X?0:X.some(function(U){if(-1<ha.requiredListings.indexOf(U.id))return!0;if(U.isAppBundle&&U.apps)return U.apps.some(function(ka){return ha.requiredListings.indexOf(ka.id)})}));
V&&ea&&E._licensesAPI.provisionUserEntitlements(ha.itemId,{users:[na.username],entitlements:[]})}ha&&(X=E._selectedLicenseTypeOption.licenseType.extensions,0<(null===X||void 0===X?void 0:X.length)&&-1<X.map(function(U){return U.id}).indexOf(ha.itemId)&&E._licensesAPI.provisionUserEntitlements(ha.itemId,{users:[na.username],entitlements:[]}))})});E._makeRevokeRequests(Q,0).then(function(){E._overlayLoader.classList.remove("is-active");E.close();m.default.showAlert("success",E.i18n.myOrganization.manageLicenseTypes.licenseTypeAndRoleUpdateSuccess);
c.default.publish("members/refresh")})}else E._overlayLoader.classList.remove("is-active"),m.default.showAlert("success",E.i18n.myOrganization.manageLicenseTypes.licenseTypeAndRoleUpdateSuccess),c.default.publish("members/refresh"),E.close()})}else aa=void 0,aa=1===Y.length?a.default.substitute('\x3cdiv class\x3d"trailer-1"\x3e'.concat(E.i18n.changeUserLicenseLevelDlg.changeLevelOneError,"\x3c/div\x3e\x3cdiv\x3e").concat(E.i18n.changeUserLicenseLevelDlg.changeLevelOneError2,"\x3c/div\x3e"),{username:Y[0],
userType:da.name}):a.default.substitute('\x3cdiv class\x3d"trailer-1"\x3e'.concat(E.i18n.myOrganization.manageLicenseTypes.batchChangeLevelOneError,"\x3c/div\x3e\x3cdiv\x3e").concat(E.i18n.myOrganization.manageLicenseTypes.batchChangeLevelOneError2,"\x3c/div\x3e"),{userType:da.name}),l.default.createConfirmationDialog({strings:{title:E.i18n.myOrganization.manageLicenseTypes.updateUserTypeError,description:aa},autoCloseOnOk:!0,renderHtmlDescription:!0,hideCancel:!0})})};H.prototype.handlePrimary=function(){var E=
this,K,I;if(!this._selectedLicenseTypeOption)m.default.showAlert("error",this.i18n.myOrganization.manageLicenseTypes.mustSelectUserType,null,"user-type-required-alert");else if(this._isValidRole())if(this._licenseTypeSelect.hasChanged||this._rolesSelect.hasChanged)if(1<this.members.length){var L=this.i18n.myOrganization.manageLicenseTypes.confirmUserTypeRole;L=this._licenseTypeSelect.hasChanged&&this._rolesSelect.hasChanged?a.default.substitute(this.i18n.myOrganization.manageLicenseTypes.confirmUserTypeRole,
{count:this.members.length,userType:this._selectedLicenseTypeOption.licenseType.name,role:null===(K=this._rolesSelect.value)||void 0===K?void 0:K.name}):this._licenseTypeSelect.hasChanged?a.default.substitute(this.i18n.myOrganization.manageLicenseTypes.confirmUserType,{count:this.members.length,userType:this._selectedLicenseTypeOption.licenseType.name}):a.default.substitute(this.i18n.myOrganization.manageLicenseTypes.confirmRole,{count:this.members.length,role:null===(I=this._rolesSelect.value)||
void 0===I?void 0:I.name});l.default.createConfirmationDialog({strings:{title:this.i18n.myOrganization.manageLicenseTypes.assignLicenseTypeRole,description:L},autoCloseOnOk:!0,onOk:function(){E._save()}})}else this._save();else this.close()};H.prototype._makeRevokeRequests=function(E,K,I){var L=this;I||(I=new b.default);if(0===E.length)return I.resolve(),I;var M=E[K].app,N=E[K].users,P=new b.default;M.isAppBundle?this._licensesAPI.provisionUserAppBundle(M.id,N,!0).then(function(){P.resolve()},function(){P.resolve()}):
this._licensesAPI.provisionUserEntitlements(M.id,{users:N,entitlements:[]}).then(function(){P.resolve()},function(){P.resolve()});P.then(function(){K++;K>=E.length?I.resolve():L._makeRevokeRequests(E,K,I)});return I};H.prototype._updateUsersLicenseType=function(E,K){var I=this,L=new b.default;0===E.length?L.resolve():this._licensesAPI.updateUserLicenseType(E,K).then(function(M){var N=!1,P,R=[],Y=[];-1<E.indexOf(I.user.username)&&c.default.publish("appLauncher-license/refresh");M.forEach(function(aa){aa.results.forEach(function(da){da.status||
(N=!0,R.push(da.error.messageCode),"GWM_0021"===da.error.messageCode&&(P=da.error.message),Y.push(da.username))})});if(N){var ja=new b.default;(0,h.default)(Y.map(function(aa){var da=I.members.filter(function(ra){return ra.username===aa})[0].role;return I._updateUserRole(aa,da)})).then(function(){ja.resolve()},function(){ja.resolve()});ja.then(function(){var aa=1<E.length?I.i18n.myOrganization.manageLicenseTypes.updateUserTypeErrorBulk:I.i18n.myOrganization.manageLicenseTypes.updateUserTypeError;
w.default.includes(R,"ORG_1089")&&(aa+="  "+I.i18n.myOrganization.manageLicenseTypes.groupCapabilitiesError);w.default.includes(R,"ORG_1088")&&(aa+="  "+I.i18n.myOrganization.manageLicenseTypes.premiumAppsError);w.default.includes(R,"ORG_3240")&&(aa=I.i18n.myOrganization.manageLicenseTypes.offlineError);w.default.includes(R,"GWM_0021")&&(aa=P);m.default.showAlert("error",aa);I.close();L.reject();Y.length<E.length&&c.default.publish("members/refresh")})}else L.resolve()},function(M){(null===M||void 0===
M?0:M.messageCode)&&"GWM_0021"===M.messageCode?m.default.showAlert("error",M.message):m.default.showAlert("error",1<E.length?I.i18n.myOrganization.manageLicenseTypes.updateUserTypeErrorBulk:I.i18n.myOrganization.manageLicenseTypes.updateUserTypeError);I.close();L.reject()});return L};H.prototype._updateRoles=function(E,K){var I=this,L=new b.default;if(0===E.length)L.resolve();else{var M=E.map(function(N){return I._updateUserRole(N,K)});(0,h.default)(M).then(function(){L.resolve()},function(N){var P=
I.i18n.myOrganization.manageLicenseTypes,R=P.mustNotNoLeaveGroups,Y=P.mustNotHiddenMemberGroups,ja=P.updateRoleError,aa=P.updateRoleErrorBulk,da=P.updateRoleSharedUpdateError;P=P.updateRoleSharedUpdateErrorBulk;ja=1<E.length?aa:ja;if(null===N||void 0===N?0:N.messageCode)"GWM_0021"===N.messageCode?ja=N.message:"COM_10722"===N.messageCode?ja=R:"COM_10721"===N.messageCode?ja=Y:"COM_10724"===N.messageCode&&(ja=1<E.length?P:da);m.default.showAlert("error",ja);I.close()})}return L};H.prototype._updateUserRole=
function(E,K){return y.default.request({url:"".concat(z.default.restBaseUrl,"portals/self/updateUserRole"),content:{user:E,role:K}},{usePost:!0})};H.prototype._render=function(){var E=this;this._getRoles().then(function(){if(E._adminSelectSelf||E._customAdminSelectAdmin)E._licenseTypes=E._licenseTypes.filter(function(R){return R.level===E.LICENSE_LEVELS.TWO&&!R.supportsSignInOnlyFromUTApps});var K=E._licenseTypes;E.hasCoordinators&&(K=E._licenseTypes.filter(function(R){return R.level===E.LICENSE_LEVELS.TWO}));
var I=K.every(function(R){return R.assigned>=R.maxUsers}),L=1===E.members.length||E.members.every(function(R){return R.licenseType.id===E.members[0].licenseType.id}),M=[];E.members.forEach(function(R){-1===M.indexOf(R.licenseType.id)&&M.push(R.licenseType.id)});var N=f.__spreadArray([],K,!0);L||(N=f.__spreadArray([{id:"unknown",name:"",userTypeCount:M.length}],K,!0));E._licenseTypeSelect=new k.default({userLicenseTypes:N,portal:E.portal,roles:E.roles,apps:E._apps,comboboxId:"manage-license-type-combobox",
listboxId:"manage-license-type-listbox",labelId:E.userTypeLabel},E._licenseTypeOptionsContainer);L||(E._licenseTypeSelect.licenseTypeOptions.forEach(function(R){-1<M.indexOf(R.licenseType.id)&&R.showMembers(E.members.filter(function(Y){return Y.licenseType.id===R.licenseType.id}))}),E._licenseTypeSelect.domNode.classList.add("license-type-select--hide-compat"));E.own((0,d.default)(E._licenseTypeSelect,"change",E._onLicenseTypeChange.bind(E)));var P=[];E._licenseTypes.forEach(function(R){if(1===E.members.length?
E.members[0].licenseType.id===R.id:E.members.every(function(ja){return ja.licenseType.id===R.id}))E._licenseTypeSelect.select(R);else{var Y=R.maxUsers-R.assigned;(E.cannotAssignUserType(R)||E.members.length>Y&&(1<E.members.length||!I))&&P.push(R)}});P.forEach(function(R){E._licenseTypeSelect.disableOption(R)});E._selectedLicenseTypeOption=E._licenseTypeSelect.getSelectedOption();E._initRoleSelect()})};H.prototype.cannotAssignUserType=function(E){return E.preventSignInFromNonUTEsriApps&&this.members.some(function(K){return K.hasEsriAddonApp})||
E.supportsSignInOnlyFromUTApps&&this.members.some(function(K){return K.hasAddonApp})};H.prototype.filterAdminRoles=function(){return this.roles.filter(function(E){var K=!1;E.privileges?K=!!E.privileges.filter(function(I){return-1<I.indexOf(":admin")})[0]:"org_admin"===E.id&&(K=!0);return!K})};H.prototype._onLicenseTypeChange=function(E){var K=this,I=this._licenseTypes.filter(function(ca){return ca.id===E})[0];this._dismissUserTypeAlert();v.default.removeClasses(this._rolesSelect.domNode,["input-error",
"invite-members__form-role-error"]);this._roleError.classList.remove("is-active");if(!this._selectedLicenseTypeOption||I!==this._selectedLicenseTypeOption.licenseType){I.supportsSignInOnlyFromUTApps&&this.portal.isPortal&&this.roles.filter(function(ca){var fa=!1;ca.privileges&&(fa=!!ca.privileges.filter(function(la){return-1<la.indexOf(":admin")})[0]);return!fa});var L=p.default.canSupportAdminRoles(I)?this.roles:this.filterAdminRoles();L=p.default.filterRoles(L,this._viewerRole,I.level===this.LICENSE_LEVELS.TWO,
I.level);this.hasCoordinators&&(L=L.filter(function(ca){return"org_admin"===ca.role||ca.role===K.SYSTEM_ROLES.FACILITATOR}));this.updateRolesSelect(L);var M=0,N=[];this.members.forEach(function(ca){ca.level===K.LICENSE_LEVELS.TWO&&I.level!==K.LICENSE_LEVELS.TWO&&(M++,N.push(ca.username))});if(M){this._downgradeWarning.innerHTML="";L=document.createElement("p");var P=document.createElement("p"),R=document.createElement("p"),Y=document.createElement("p"),ja=document.createElement("ul"),aa=document.createElement("li"),
da=document.createElement("li"),ra=document.createElement("li");aa.textContent=this.i18n.myOrganization.manageLicenseTypes.ownItemsOrGroups;da.textContent=this.i18n.myOrganization.manageLicenseTypes.belongToUpdateGroups;ra.textContent=this.i18n.myOrganization.manageLicenseTypes.assignedIncompatibleLicenses;ja.appendChild(aa);ja.appendChild(da);ja.appendChild(ra);ja.classList.add("trailer-half");L.classList.add("leader-0");L.classList.add("trailer-quarter");P.classList.add("trailer-quarter");R.classList.add("trailer-quarter");
Y.classList.add("trailer-0");L.textContent=this.i18n.myOrganization.manageLicenseTypes.membersUserTypeMayNot;1===M?(P.innerHTML=a.default.substitute(this.i18n.changeUserLicenseLevelDlg.toManageRecycle,{username:N[0],linkStart:'\x3cspan class\x3d"esriItemLinks"\x3e\x3ccalcite-link target\x3d"_blank" href\x3d"'+z.default.baseUrl+"content.html?user\x3d"+N[0]+'"\x3e',linkEnd:"\x3c/calcite-link\x3e\x3c/span\x3e"}),R.innerHTML=a.default.substitute(this.i18n.changeUserLicenseLevelDlg.toTransferItems,{username:N[0],
linkStart:'\x3cspan class\x3d"esriItemLinks"\x3e\x3ccalcite-link target\x3d"_blank" href\x3d"'.concat(this.portal.helpBase).concat(this.portal.helpMap.m["120004182"]||"",'"\x3e'),linkEnd:"\x3c/calcite-link\x3e\x3c/span\x3e"}),Y.innerHTML=a.default.substitute(this.i18n.changeUserLicenseLevelDlg.toTransferGroups,{username:N[0],linkStart:'\x3cspan class\x3d"esriItemLinks"\x3e\x3ccalcite-link target\x3d"_blank" href\x3d"'+z.default.baseUrl+"groups.html?user\x3d"+N[0]+'"\x3e',linkEnd:"\x3c/calcite-link\x3e\x3c/span\x3e"})):
(P.innerHTML=a.default.substitute(this.i18n.myOrganization.manageLicenseTypes.batchManageRecycle,{linkStart:'\x3cspan class\x3d"esriItemLinks"\x3e\x3ccalcite-link target\x3d"_blank" href\x3d"'.concat(this.portal.helpBase).concat(this.portal.helpMap.m["120004183"]||"",'"\x3e'),linkEnd:"\x3c/calcite-link\x3e\x3c/span\x3e"}),R.innerHTML=a.default.substitute(this.i18n.myOrganization.manageLicenseTypes.batchToTransferItems,{linkStart:'\x3cspan class\x3d"esriItemLinks"\x3e\x3ccalcite-link target\x3d"_blank" href\x3d"'.concat(this.portal.helpBase).concat(this.portal.helpMap.m["120004182"]||
"",'"\x3e'),linkEnd:"\x3c/calcite-link\x3e\x3c/span\x3e"}),Y.textContent=this.i18n.myOrganization.manageLicenseTypes.batchToTransferGroups);v.default.appendChildren([L,ja,R,Y],this._downgradeWarning);v.default.showNode(this._downgradeWarningContainer)}else this._downgradeWarning.innerHTML="",v.default.hideNode(this._downgradeWarningContainer);this._selectedLicenseTypeOption=this._licenseTypeSelect.getSelectedOption()}};H.prototype._initRoleSelect=function(){var E=this,K=[],I=[],L=!1;this.members.forEach(function(R){-1===
I.indexOf(R.role)&&I.push(R.role);K.filter(function(Y){return Y.id===R.licenseType.id})[0]||(K.push(R.licenseType),L=!p.default.canSupportAdminRoles(R.licenseType))});var M=K.every(function(R){return R.level===E.LICENSE_LEVELS.TWO}),N=L?this.filterAdminRoles():this.roles;M=p.default.filterRoles(N,this._viewerRole,M,this._selectedLicenseTypeOption?this._selectedLicenseTypeOption.licenseType.level:this.LICENSE_LEVELS.TWO);var P;this.hasCoordinators&&(M=M.filter(function(R){return"org_admin"===R.role||
R.role===E.SYSTEM_ROLES.FACILITATOR}));1<I.length?M=f.__spreadArray([{role:"multi-select",name:"",description:""}],M,!0):P=M.filter(function(R){return R.role===I[0]})[0];this._rolesSelect=new G.default({selectedCount:I.length,roles:M,portal:this.portal,selectedRole:P},this._rolesContainer);this.adminContactNotice.active&&this._rolesSelect.disable();1<I.length&&this._rolesSelect.options.forEach(function(R){-1<I.indexOf(R.role.role)&&R.showMembers(E.members.filter(function(Y){return Y.role===R.role.role}))});
1<this.members.length&&this._rolesSection.classList.add("manage-usertype--bulk");this._disableRolesSelectIfNecessary()};H.prototype._isValidRole=function(){return this._rolesSelect.isValid};H.prototype._disableRolesSelectIfNecessary=function(){this._rolesSelect.set("disabled",this._adminSelectSelf||this._customAdminSelectAdmin)};H.prototype._getRoles=function(){var E=this,K=new b.default;this.roles?K.resolve(this.roles):this._rolesAPI.getAllRoles(!0).then(function(I){E._viewerRole=I.filter(function(L){return L.id===
E.SYSTEM_ROLES.VIEWER})[0];E._viewerEditRole=I.filter(function(L){return L.id===E.SYSTEM_ROLES.DATA_EDITOR})[0];I.forEach(function(L){L.id===E.SYSTEM_ROLES.VIEWER&&(L.name=q.default.myOrganization.formatters.roleViewer);L.id===E.SYSTEM_ROLES.DATA_EDITOR&&(L.name=q.default.myOrganization.formatters.roleViewerEdit);L.id===E.SYSTEM_ROLES.FACILITATOR&&(L.name=q.default.myOrganization.formatters.roleFacilitator);L.compatibleLevels=[E.LICENSE_LEVELS.TWO];A.default.exceedsRolePrivileges(E._viewerEditRole.privileges,
L.privileges,!0)||L.compatibleLevels.push(E.LICENSE_LEVELS.ONE_PLUS_EDIT);A.default.exceedsRolePrivileges(E._viewerRole.privileges,L.privileges,!0)||L.compatibleLevels.push(E.LICENSE_LEVELS.ONE)});I=f.__spreadArray(f.__spreadArray([],I,!0),[{id:"org_admin",name:q.default.myOrganization.formatters.roleAdmin,compatibleLevels:[E.LICENSE_LEVELS.TWO]},{id:"org_publisher",name:q.default.myOrganization.formatters.rolePublisher,compatibleLevels:[E.LICENSE_LEVELS.TWO]},{id:"org_user",name:q.default.myOrganization.formatters.roleUser,
compatibleLevels:[E.LICENSE_LEVELS.TWO]}],!1);E.isAdmin||(I=I.filter(function(L){return"org_admin"!==L.id}));I.sort(function(L,M){L=L.name.toLowerCase();M=M.name.toLowerCase();return L>M?1:L<M?-1:0});E.roles=I.map(function(L){return{id:L.id,name:L.name,privileges:L.privileges,compatibleLevels:L.compatibleLevels,description:L.description}});K.resolve(E.roles)});return K};return H=f.__decorate([(0,C.default)(u.default,t.default,B.default,n.default)],H)}()})},"arcgisonline/pages/dijit/RolesSelect/RolesSelect":function(){define("require exports tslib esri/Evented dojo/on dojo/topic dojo/keys dojo/text!./RolesSelect.html dojo/i18n!../../../nls/arcgisonline dijit/_TemplatedMixin dijit/_WidgetBase arcgisonline/pages/utils/icons arcgisonline/pages/utils/dom ./RoleOption arcgisonline/tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);return function(){function p(l,n){this.templateString=a.default;this.i18n=e.default;this.icons=u.default;this.roles=[];this.selectedCount=1;this.hasChanged=!1;this.isValid=!0;this.options=
[];this.selectedOptionIndex=0;this.isOpen=!1}p.prototype.postCreate=function(){this.inherited(arguments);this.toggleExpand=this.toggleExpand.bind(this);this.handleSelectedChange=this.handleSelectedChange.bind(this);this.handleKeydown=this.handleKeydown.bind(this);this.value=this.selectedRole;this.renderOptions(this.selectedRole||this.roles[0]);this.addEventListeners()};p.prototype.disable=function(){this.domNode.classList.add("role-select--disabled")};p.prototype.updateOptions=function(l,n,k){this.value=
k;this.selectedCount=n;this.roles=l;this.renderOptions(k||this.roles[0]);this.isValid="error"!==l[0].role};p.prototype.collapseIfExpanded=function(){this.isOpen&&this.toggleExpand(void 0,!1)};p.prototype.addEventListeners=function(){var l=this;this.own((0,h.default)(this.searchInput,"input",function(){return l.handleSearchInput()}),(0,h.default)(document.documentElement,"click",function(n){n=n.target;n===l.domNode||l.domNode.contains(n)||(l.isOpen=!1,l.searchInput.value="",g.default.hideNode(l.searchContainer),
l.domNode.classList.remove("license-type--is-open"))}))};p.prototype.handleSearchInput=function(){var l=this.searchInput.value.toLowerCase().trim();this.options.forEach(function(n,k){n.role.name&&(!l||-1<n.role.name.toLowerCase().indexOf(l)||-1<n.role.description.toLowerCase().indexOf(l)?n.show():n.hide())})};p.prototype.renderOptions=function(l){var n=this,k,r;this.selectedRole=l;1===this.roles.length&&this.domNode.classList.add("license-type__single-option");0<(null===(k=this.options)||void 0===
k?void 0:k.length)&&this.options.forEach(function(w){return w.destroy()});null===(r=this.selectedOption)||void 0===r?void 0:r.destroy();this.options=[];this.roles.forEach(function(w,x){var D=(null===l||void 0===l?void 0:l.role)===w.role;D&&(n.selectedOptionIndex=x,n.selectedOption=new m.default({role:w,rolesCount:1<n.selectedCount&&0===x?n.selectedCount:void 0,portal:n.portal,checked:!0}),n.own((0,h.default)(n.selectedOption,"select",n.toggleExpand),(0,h.default)(n.selectedOption.domNode,"keyup",
n.handleKeydown)),n.selectedOptionContainer.appendChild(n.selectedOption.domNode));w=new m.default({role:w,rolesCount:1<n.selectedCount&&0===x?n.selectedCount:void 0,portal:n.portal,checked:D});n.own((0,h.default)(w,"select",n.handleSelectedChange));n.optionsContainer.appendChild(w.domNode);n.options.push(w)})};p.prototype.toggleExpand=function(l,n){void 0===n&&(n=!0);1>=this.roles.length||(this.domNode.classList.toggle("license-type--is-open"),this.isOpen=!this.isOpen,g.default.showHide(this.searchContainer,
this.isOpen),n&&d.default.publish("roles-select/toggle"))};p.prototype.handleSelectedChange=function(l){var n;this.isOpen=!1;this.searchInput.value="";g.default.hideNode(this.searchContainer);this.domNode.classList.remove("license-type--is-open");"error"!==l.role&&"multi-select"!==l.role&&l.role!==(null===(n=this.value)||void 0===n?void 0:n.role)&&(this.hasChanged=!0,this.value=l,this.selectedCount=1,this.roles=this.roles.filter(function(k){return k.name}),this.renderOptions(l),this.isValid=!0,this.emit("change",
this.value))};p.prototype.traverseOption=function(l){this.options.forEach(function(n){n.deselect()});this.options[l].select();this.selectedOptionIndex=l};p.prototype.handleKeydown=function(l){switch(l.keyCode){case b.default.UP_ARROW:this.traverseOption(0===this.selectedOptionIndex?this.options.length-1:this.selectedOptionIndex-1);break;case b.default.DOWN_ARROW:this.isOpen?this.traverseOption(this.selectedOptionIndex===this.options.length-1?0:this.selectedOptionIndex+1):this.toggleExpand();break;
case b.default.ESCAPE:case b.default.ENTER:l.preventDefault(),this.isOpen&&(this.toggleExpand(),this.handleSelectedChange(this.roles[this.selectedOptionIndex]),this.selectedOption&&this.selectedOption.domNode.focus())}l.stopPropagation()};return p=f.__decorate([(0,v.default)(t.default,q.default,c.default)],p)}()})},"arcgisonline/pages/dijit/RolesSelect/RoleOption":function(){define("require exports tslib esri/Evented dojo/text!./RoleOption.html dojo/i18n!../../../nls/arcgisonline dojo/i18n!../../../nls/custom-roles dijit/_TemplatedMixin dijit/_WidgetBase dijit/a11yclick arcgisonline/pages/utils/dom arcgisonline/pages/dijit/MemberThumb arcgisonline/sharing/dijit/_LevelAwareMixin arcgisonline/tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);return function(){function v(p,l){this.templateString=h.default;this.i18n=d.default;this.checked=!1;this.selectedClass="license-type-option--selected"}v.prototype.postMixInProperties=function(){this.inherited(arguments);
this.i18n.customRoles=b.default.customRoles;var p=this.portal.isPortal;switch(this.role.role){case "org_admin":case "account_admin":this.role.description=p?this.i18n.customRoles.adminDescriptionPortal:this.i18n.customRoles.adminDescription;break;case "org_publisher":case "account_publisher":this.role.description=this.i18n.customRoles.publisherDescription;break;case "org_user":case "account_user":this.role.description=this.i18n.customRoles.userDescription;break;case this.SYSTEM_ROLES.VIEWER:this.role.description=
p?this.i18n.customRoles.viewerDescriptionPortal:this.i18n.customRoles.viewerDescription;break;case this.SYSTEM_ROLES.DATA_EDITOR:this.role.description=p?this.i18n.customRoles.viewerPlusEditDescriptionPortal:this.i18n.customRoles.viewerPlusEditDescription;break;case this.SYSTEM_ROLES.FACILITATOR:this.role.description=this.i18n.customRoles.facilitatorDescription}};v.prototype.postCreate=function(){this.inherited(arguments);this.render();this.addEventListeners()};v.prototype.show=function(){t.default.showNode(this.domNode)};
v.prototype.hide=function(){t.default.hideNode(this.domNode)};v.prototype.deselect=function(){this.checked=!1;this.domNode.classList.remove(this.selectedClass)};v.prototype.select=function(){this.checked=!0;this.domNode.classList.add(this.selectedClass)};v.prototype.showMembers=function(p){this.domNode.classList.add(this.selectedClass);var l=p.slice(0,5).map(function(n){return new u.default({member:n,cssClasses:"org-member-thumbnail-container",showTooltip:!0})});t.default.appendChildren(l.map(function(n){return n.domNode}),
this.memberIcons);5<p.length&&(l=document.createElement("div"),l.className="org-member-card__more-tile link-darker-gray flex-center",l.textContent="+".concat(p.length-5),this.memberIcons.appendChild(l))};v.prototype.render=function(){"error"===this.role.role&&this.domNode.classList.add("license-type-option--error");this.checked&&this.domNode.classList.add(this.selectedClass);this.rolesCount&&(this.domNode.classList.add("multiple-assigned-option"),t.default.showNode(this.rolesAssigned),this.rolesAssignedCount.textContent=
"".concat(this.rolesCount))};v.prototype.addEventListeners=function(){var p=this;this.own((0,q.default)(this.domNode,function(l){l.stopPropagation();l.preventDefault();p.emit("select",p.role)}))};return v=f.__decorate([(0,m.default)(e.default,a.default,g.default,c.default)],v)}()})},"arcgisonline/pages/organization/widgets/TransferItemsOverlay":function(){define("require exports tslib dojo/text!./templates/TransferItemsOverlay.html dojo/i18n!../../../nls/arcgisonline dojo/i18n!../../../nls/organization dojo/string dojo/on dojo/topic dojo/Deferred dijit/_TemplatedMixin dijit/_WidgetBase arcgisonline/sharing/util arcgisonline/esriGeowConfig arcgisonline/pages/dijit/Overlay arcgisonline/pages/components/MemberPicker arcgisonline/pages/components/MemberThumb arcgisonline/pages/dijit/ChangeOwner/FolderPicker arcgisonline/pages/portal/PortalUser arcgisonline/pages/utils/icons arcgisonline/pages/utils/dom arcgisonline/pages/utils/validation arcgisonline/pages/utils/alerts arcgisonline/pages/dijit/SelectOptions arcgisonline/tsutils/declareDecorator preact".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);D=f.__importDefault(D);G=f.__importDefault(G);F=
f.__importDefault(F);return function(){function y(z,B){this.title=h.default.myOrganization.membersTab.transferItems;this.i18n=h.default;this.texts=f.__assign(f.__assign(f.__assign(f.__assign({},h.default.common),h.default.myOrganization.membersTab),h.default.myOrganization.membersTab.transferContentOverlay),d.default.transferRecycleNote);this.overlayContents=b.default.substitute(c.default,{i18n:this.i18n,texts:this.texts,icons:r.default});this.maxWidth=600;this.constrain=!0;this.closeOnScrimClick=
!1;this.primaryBtnText=this.texts.transfer;this.totalItems=0}y.prototype.postCreate=function(){this.inherited(arguments);this.attachElements()};y.prototype.open=function(){this.inherited(arguments);this.initUI();this.addListeners();this.totalItems=this.members.reduce(function(z,B){return z+B.contentCount},0);this.itemsCount.textContent="".concat(this.totalItems);this.fadeIn();this._primaryBtn.classList.add("tooltip");this._primaryBtn.classList.add("transfer-btn");this._primaryBtn.disabled=!0;this._primaryBtn.setAttribute("aria-label",
this.texts.selectNewOwner)};y.prototype.close=function(){this.inherited(arguments);e.default.publish("manage-members/close")};y.prototype.handlePrimary=function(){var z=this;this.folderPickerArea.classList.contains("hide")?this.validateOwner()&&this.validateFolder()&&this.reassign().then(function(B){"submitted"===B.status||"succeeded"===B.status?(D.default.showAlert("success",b.default.substitute(z.texts.success,{username:z.newOwner.username}),{cssClasses:"",preventAutoDismiss:!0}),z.close()):D.default.showAlert("error",
z.texts.error)},function(B){"CONT_0068"===(null===B||void 0===B?void 0:B.messageCode)?D.default.showAlert("error",z.i18n.common.errors.CONT_0068):D.default.showAlert("error",z.texts.error)}):this.folderPicker.hasUnsavedChanges()?this.folderPicker.saveNewfolder().then(function(B){z.handleSelectFolder(B)}):this.hideFolderPicker()};y.prototype.reassign=function(){var z,B="one"!==this.folderOptions.value(),C={targetUser:this.newOwner.username,reassignedUsers:this.members.filter(function(H){return 0!==
H.contentCount}).map(function(H){return H.username}),targetFolderName:B?this.prefixInput.value.trim():this.selectedFolder.title,createSubFolderPerReassignedUser:B};null===(z=this.telemetry)||void 0===z?void 0:z.logEvent({category:"Target folder option",action:B?"Folder for each previous owner":"Only one folder"});return g.default.request({url:"".concat(m.default.restBaseUrl,"portals/self/reassignUsersContent"),content:{reassign:JSON.stringify(C)}},{usePost:!0})};y.prototype.attachElements=function(){this.ownerArea=
this.domNode.querySelector(".js-owner-area");this.ownerEdit=this.domNode.querySelector(".js-owner-edit");this.ownerEditBtn=this.domNode.querySelector(".js-owner-edit-button");this.folderArea=this.domNode.querySelector(".js-folder-area");this.multiFoldersArea=this.domNode.querySelector(".js-multi-folder-area");this.itemsCount=this.domNode.querySelector(".js-items-count");this.itemsArea=this.domNode.querySelector(".js-items-area");this.memberPickerWrapper=this.domNode.querySelector(".js-member-picker-wrapper");
this.oneFolderArea=this.domNode.querySelector(".js-one-folder-area");this.prefixInput=this.domNode.querySelector(".js-prefix-input");this.prefixExample=this.domNode.querySelector(".js-prefix-example");this.prefixInputPanel=this.domNode.querySelector(".js-folder-prefix-input-panel");this.prefixError=this.domNode.querySelector(".js-prefix-error");this.folderEdit=this.domNode.querySelector(".js-folder-edit");this.folderPickerArea=this.domNode.querySelector(".js-folder-picker-area");this.folderOptionsArea=
this.domNode.querySelector(".js-folder-options-area")};y.prototype.renderRecycle=function(){return f.__awaiter(this,void 0,void 0,function(){var z,B,C,H,E,K,I;return f.__generator(this,function(L){if(!this.hasRecycle)return[2];z=this.domNode.querySelector(".js-recycle-notice");B=this.domNode.querySelector(".js-recycle-notice-message");C=this.domNode.querySelector(".js-recycle-notice-link");B.textContent=1<(null===(E=this.members)||void 0===E?void 0:E.length)?this.texts.transferBatchRecycleBin:this.texts.transferRecyceBin;
w.default.showNode(z);w.default.showHide(C,1===(null===(K=this.members)||void 0===K?void 0:K.length));1===(null===(I=this.members)||void 0===I?void 0:I.length)&&(H=this.members[0],C.href="content.html?user\x3d".concat(H.username,"\x26folder\x3drecycle#content"));return[2]})})};y.prototype.initUI=function(){this.memberPickerProps={portal:this.portal,allowEmptySearch:!0,excludedUsernames:this.members.map(function(B){return B.username}),selectUpdate:this.handleSelectMember.bind(this),selectCancel:this.hideMemberPicker.bind(this),
hideMemberPicker:!1};(0,A.render)((0,A.h)(p.MemberPicker,this.memberPickerProps),this.domNode.querySelector(".js-member-picker"));this.members.some(function(B){return 0===B.contentCount})&&w.default.showNode(this.domNode.querySelector(".js-no-content-warning"));var z=Math.max.apply(Math,this.members.map(function(B){return B.username.length}));this.prefixInput.maxLength=125-z;this.folderOptions=new G.default({options:[{name:"folderOption",text:this.texts.multiFolders,value:"multiple",selected:1<this.members.length},
{name:"folderOption",text:this.texts.oneFolder,value:"one",selected:1===this.members.length}],baseClass:"full-width",optionsClass:"flex-1 flex transfer-content__folder-option",optionsLabelClass:"full-width transfer-content__folder-option-label"},this.domNode.querySelector(".js-folder-options"));z=this.getOwnersQuery();this.domNode.querySelector(".js-launch-search-btn").href="".concat(m.default.baseUrl,"search.html?q\x3d").concat(z);this.showMemberPicker();this.prefixInput.value=this.texts.defaultPrefix;
this.updatePrefixExample();this.handleFolderOptionsChange();1===this.members.length&&w.default.hideNode(this.folderOptionsArea);this.renderRecycle()};y.prototype.updatePrefixExample=function(){this.prefixExample.textContent=b.default.substitute(this.texts.prefixSample,{prefix:this.prefixInput.value.trim()})};y.prototype.getOwnersQuery=function(){return this.members.reduce(function(z,B){return"".concat(z).concat(z?" OR ":"",'owner:"').concat(encodeURIComponent(B.username),'"')},"")};y.prototype.addListeners=
function(){var z=this;this.own(this.folderOptions.on("change",this.handleFolderOptionsChange.bind(this)),(0,a.default)(this.prefixInput,"input",this.handlePrefixInput.bind(this)),(0,a.default)(this.ownerEdit,"click",this.showMemberPicker.bind(this)),(0,a.default)(this.folderEdit,"click",this.handleFolderEditClick.bind(this)),(0,a.default)(this.prefixInputPanel,"click",function(){z.prefixInput.focus()}))};y.prototype.handleFolderEditClick=function(z){null===z||void 0===z?void 0:z.preventDefault();
w.default.hideNodes([this.ownerArea,this.folderArea,this.itemsArea]);w.default.showNode(this.folderPickerArea);this.folderPicker.focus()};y.prototype.handleSelectFolder=function(z){this.selectedFolder=z;this.renderCurrentFolder();this.hideFolderPicker()};y.prototype.hideFolderPicker=function(){w.default.showNodes([this.ownerArea,this.folderArea,this.itemsArea]);w.default.hideNode(this.folderPickerArea);this.folderEdit.focus()};y.prototype.handlePrefixInput=function(){0<this.prefixInput.value.length?
x.default.clearState([this.prefixInputPanel,this.prefixError]):x.default.setInvalidState(this.prefixInputPanel,this.prefixError);this.updatePrefixExample()};y.prototype.handleFolderOptionsChange=function(){var z=this.folderOptions.value();w.default.showHide(this.multiFoldersArea,"multiple"===z);w.default.showHide(this.oneFolderArea,"one"===z)};y.prototype.hideMemberPicker=function(){(0,A.render)((0,A.h)(p.MemberPicker,f.__assign(f.__assign({},this.memberPickerProps),{showMemberPicker:!1})),this.domNode.querySelector(".js-member-picker"));
w.default.showNode(this.ownerArea);w.default.showNode(this.folderArea);w.default.showNode(this.itemsArea);w.default.hideNode(this.memberPickerWrapper);this.ownerEditBtn.focus()};y.prototype.initFolderPicker=function(){this.folderPicker=new n.default({portal:this.portal,user:this.newOwner},this.domNode.querySelector(".js-folder-picker"));this.own(this.folderPicker.on("cancel",this.hideFolderPicker.bind(this)),this.folderPicker.on("selectUpdate",this.handleSelectFolder.bind(this)))};y.prototype.handleSelectMember=
function(z){var B=this;this.newOwner=z;this._primaryBtn.disabled=!1;this._primaryBtn.removeAttribute("aria-label");this._primaryBtn.classList.remove("tooltip");this.hideMemberPicker();(0,A.render)((0,A.h)(l.MemberThumb,{showName:!0,member:z}),this.domNode.querySelector(".js-member-thumb"));this.fadeIn();this.ensureMemberHasPrivileges(z).then(function(C){B.newOwner=C;B.validateOwner();return B.getFolders(C)}).then(function(C){B.newOwner.folders=C;B.selectedFolder=void 0;B.renderCurrentFolder();B.folderPicker||
B.initFolderPicker();B.folderPicker.updateUser(B.newOwner)})};y.prototype.renderCurrentFolder=function(){this.selectedFolder||(this.selectedFolder=this.newOwner.folders[0]);this.domNode.querySelector(".js-folder-name").textContent=this.selectedFolder.title;var z=r.default.inline[this.selectedFolder.id===this.newOwner.username?"home":"folder"]["16"];this.domNode.querySelector(".js-folder-icon").innerHTML=z};y.prototype.ensureMemberHasPrivileges=function(z){var B=new q.default;z.privileges?B.resolve(z):
this.fetchUser(z.username).then(function(C){B.resolve(C)});return B};y.prototype.getFolders=function(z){if(!z.folders)return z.getFolders();var B=new q.default;B.resolve(z.folders);return B};y.prototype.validateFolder=function(){var z=!0;"multiple"===this.folderOptions.value()&&0===this.prefixInput.value.length?(z=!1,x.default.setInvalidState(this.prefixInputPanel,this.prefixError)):x.default.clearState([this.prefixInputPanel,this.prefixError]);return z};y.prototype.validateOwner=function(){var z,
B=this.domNode.querySelector(".js-member-select-error"),C=null===(z=this.newOwner)||void 0===z?void 0:z.userRole;z=null===C||void 0===C?void 0:C.isCustom();x.default.clearState([this.ownerEdit,B]);if(this.newOwner)!z||null!==C&&void 0!==C&&C.canCreateItem()||(H=this.i18n.changeOwner.warnings.cantOwnItems);else var H=this.texts.ownerRequired;H&&x.default.setInvalidState(this.ownerEdit,B,H);return!H};y.prototype.fetchUser=function(z){var B=this;z="".concat(m.default.restBaseUrl,"community/users/").concat(z,
"/");return g.default.request({url:z}).then(function(C){return new k.default(f.__assign(f.__assign({},C),{portal:B.portal}))})};y.prototype.showMemberPicker=function(z){null===z||void 0===z?void 0:z.preventDefault();w.default.showNode(this.memberPickerWrapper);(0,A.render)((0,A.h)(p.MemberPicker,f.__assign(f.__assign({},this.memberPickerProps),{showMemberPicker:!0,showCancel:!!this.newOwner})),this.domNode.querySelector(".js-member-picker"));w.default.hideNode(this.ownerArea);w.default.hideNode(this.folderArea);
w.default.showNode(this.memberPickerWrapper)};y.prototype.fadeIn=function(){this.domNode.querySelector(".js-change-owner-wrapper").classList.add("animate-fade-in");this.domNode.querySelector(".js-change-owner-loader").classList.remove("is-active")};return y=f.__decorate([(0,F.default)(u.default,t.default,v.default)],y)}()})},"arcgisonline/pages/components/MemberPicker":function(){define("require exports tslib preact preact/hooks dojo/i18n!../../nls/arcgisonline arcgisonline/sharing/util arcgisonline/esriGeowConfig ../utils/keys ../portal/PortalUser ./MemberPickerRow ./preactHooks arcgisonline/sharing/dijit/_LevelAwareMixin".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g){var m=this;Object.defineProperty(J,"__esModule",{value:!0});J.MemberPicker=void 0;d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);q=f.__importDefault(q);J.MemberPicker=function(v){var p=(0,u.useSetState)({showCancel:v.showCancel||!0,selected:null,totalMembers:0,showMoreMembers:!1,showNoResults:!1,members:[],searchInput:"",initialFocus:!1}),l=p[0],n=p[1],k=(0,h.useRef)(null);p=(0,h.useRef)(null);(0,h.useEffect)(function(){w().then(function(I){n({totalMembers:I});
!v.alwaysPreventEmptySearch&&(100>=I||v.allowEmptySearch)?x().then(function(L){return n({members:L})}):n({showMoreMembers:!0})})},[]);(0,h.useEffect)(function(){var I=l.initialFocus;k.current&&I&&(r(),n({initialFocus:!1}))},[k,l.initialFocus]);(0,h.useEffect)(function(){v.showMemberPicker&&r()},[v.showMemberPicker]);(0,h.useEffect)(function(){n({showCancel:v.showCancel})},[v.showCancel]);var r=function(){var I;null===(I=k.current)||void 0===I?void 0:I.focus()},w=function(){return f.__awaiter(m,void 0,
void 0,function(){var I,L,M;return f.__generator(this,function(N){switch(N.label){case 0:return I=G("",1),L=D(),[4,b.default.request({url:L,content:I})];case 1:return M=N.sent(),[2,M.total]}})})},x=function(I){return f.__awaiter(m,void 0,void 0,function(){var L,M,N,P;return f.__generator(this,function(R){switch(R.label){case 0:return L=v.portal,M=G(I),N=D(),[4,b.default.request({url:N,content:M})];case 1:return P=R.sent(),[2,(P.results||P.users).map(function(Y){return new q.default(f.__assign(f.__assign({},
Y),{portal:L}))})]}})})},D=function(){var I=v.group;return(null===I||void 0===I?0:I.isBackedByEnterpriseGroup)||(null===I||void 0===I?0:I.isBackedByOIDCGroup())?"".concat(a.default.restBaseUrl,"community/groups/").concat(I.id,"/userlist"):"".concat(a.default.restBaseUrl,"portals/self/users/search")},G=function(I,L){var M,N,P=v.group,R=v.portal,Y=v.adminOnly,ja=v.roles,aa=g.LevelAwareInfo.LICENSE_LEVELS,da=aa.ONE;aa=aa.ONE_PLUS_EDIT;da=P?"":"-level:".concat(da," -level:").concat(aa," ");Y=(null===
P||void 0===P?0:P.hiddenMembers)||Y?"role:org_admin":"";var ra="";if(null===P||void 0===P?0:P.leavingDisallowed)ra="(role:org_admin",ja.filter(function(ca){var fa;return null===(fa=ca.privileges)||void 0===fa?void 0:fa.includes("portal:admin:createLeavingDisallowedGroup")}).forEach(function(ca){ra+=" OR role:".concat(ca.id)}),ra+=")";P=I?"(".concat(I,")"):"";ja=R.isPortal?"-username:esri_livingatlas -username:esri_boundaries -username:esri_demographics -username:esri_nav":"";if(null===(M=v.excludedUsernames)||
void 0===M?0:M.length)ja=v.excludedUsernames.reduce(function(ca,fa){return"".concat(ca).concat(ca?" ":"","-username:").concat(fa)},ja);L={num:L||100,sortOrder:"asc"};(null===(N=v.group)||void 0===N?0:N.isBackedByEnterpriseGroup)?L.name=I:L.q="".concat(P," ").concat(da," ").concat(Y," ").concat(ra," orgid:").concat(R.id," ").concat(ja);return L};(0,h.useEffect)(function(){var I=l.members,L=l.searchInput,M=l.totalMembers;0<(null===I||void 0===I?void 0:I.length)?n({showMoreMembers:!1,showNoResults:!1,
selected:0}):n({showNoResults:0<L.length,showMoreMembers:0===L.length&&100<=M})},[l.members,l.totalMembers]);var F=function(I){var L=l.members,M=l.selected;v.selectUpdate(I||L[M])},A=function(I,L){var M=l.members;n({showCancel:!0});var N=I,P=M.length-1;I>P?N=0:0>I&&(N=P);n({selected:N});L||F(M[N])},y=function(){var I;null===(I=k.current)||void 0===I?void 0:I.focus()},z=function(){n(function(I){return{showCancel:!I.showCancel}})};(0,u.useEventListener)("keydown",function(I){var L=l.members,M=l.selected;
if(v.showMemberPicker)switch(I.keyCode){case e.ESCAPE:v.selectCancel();break;case e.ENTER:I.preventDefault();(null===L||void 0===L?0:L[M])&&F();break;case e.UP:I.preventDefault();A(M-1,!0);break;case e.DOWN:I.preventDefault(),A(M+1,!0)}});var B=l.members,C=l.showCancel,H=l.selected,E=l.showMoreMembers,K=l.showNoResults;return(0,c.h)("div",{ref:p,class:"member-picker ".concat(v.showMemberPicker?"":"hide")},(0,c.h)("div",{class:"font-size--1 trailer-half flex member-picker__label-wrapper"},(0,c.h)("h4",
{class:"trailer-0 font-size--1 flex-1",id:"member-picker-label"},d.default.changeOwner.newOwner),(0,c.h)("button",{class:"btn-link font-size--1 flex-0 btn-link-off-black right ".concat(C?"":"hide"),onClick:v.selectCancel},d.default.common.cancel)),(0,c.h)("label",{for:"member-picker-input",class:"visually-hidden"},d.default.changeOwner.searchMembers),(0,c.h)("input",{id:"member-picker-input",class:"member-picker-search",ref:k,onInput:function(I){var L=l.totalMembers;I=I.target.value;I!==l.searchInput&&
n({searchInput:I});(2<(null===I||void 0===I?void 0:I.length)||!v.alwaysPreventEmptySearch&&0<L&&100>=L||v.allowEmptySearch&&0===(null===I||void 0===I?void 0:I.length))&&x(I).then(function(M){return n({members:M})});0===I.length&&n({showNoResults:!1});0!==I.length||v.allowEmptySearch||n({members:[],showMoreMembers:!0})},placeholder:d.default.changeOwner.searchMembers,"aria-controls":"member-results-list","aria-label":"".concat(d.default.changeOwner.newOwner),type:"search",autocomplete:"off"}),0<B.length&&
(0,c.h)("ul",{class:"member-picker-results",id:"member-results-list",role:"menu","aria-labelledby":"member-picker-label"},B.map(function(I,L){return(0,c.h)(t.MemberPickerRow,{key:I.id,member:I,isSelected:L===H,index:L,handleCancel:z,handleSelect:A,handleFocus:y})})),K&&(0,c.h)("p",{class:"leader-1 trailer-1 font-size--2 padding-left-2 padding-right-2 member-picker__no-match"},d.default.changeOwner[v.group?"noUsersFoundGroup":"noUsersFoundItem"]),E&&(0,c.h)("p",{class:"leader-1 trailer-1 font-size--2 padding-left-2 padding-right-2 member-picker__search-text"},
d.default.changeOwner.tooManyUsers))}})},"arcgisonline/pages/components/MemberPickerRow":function(){define(["require","exports","preact","./MemberThumb","preact/hooks"],function(S,J,f,c,h){Object.defineProperty(J,"__esModule",{value:!0});J.MemberPickerRow=void 0;J.MemberPickerRow=function(d){var b=d.member,a=d.isSelected,e=d.handleSelect,q=d.handleFocus,t=d.index,u=(0,f.createRef)();(0,h.useEffect)(function(){a&&u.current&&u.current.scrollIntoView({behavior:"smooth"})},[a,u]);return(0,f.h)("li",{class:"member-browser-row member-browser-row--select member-browser-row--on-gray member-browser-row--compact flex flex-center ".concat(a?
"is-active":""),ref:u,role:"menuitem","aria-selected":a,"tab-index":"0",onFocus:q,onClick:function(){e(t)}},(0,f.h)("div",{class:"flex-1 flex flex-column margin-left-half"},(0,f.h)(c.MemberThumb,{member:b,showName:!0})))}})},"arcgisonline/pages/dijit/ChangeOwner/FolderPicker":function(){define("require exports tslib dojo/text!./templates/FolderPicker.html dojo/i18n!../../../nls/arcgisonline dojo/Evented dojo/Deferred dojo/debounce dojo/string dojo/dom-construct dijit/_TemplatedMixin dijit/_WidgetBase ../../../tsutils/declareDecorator ../../../sharing/util ../../utils/organization ../../../esriGeowConfig ./FolderPickerRow ../../utils/dom ../../utils/keys ../../utils/icons".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);r=f.__importDefault(r);return function(){function w(x,D){this.templateString=c.default;this.i18n=h.default;
this.icons=r.default;this._rows=[];this._selectedIndex=0;this._creatingFolder=!1}w.prototype.postMixInProperties=function(){this.inherited(arguments);this.containerClass=this.isMoveItem?"move-item-container":"member-picker"};w.prototype.postCreate=function(){var x=this,D,G;this.inherited(arguments);this.itemFolders=null!==(D=[this.initialFolderId])&&void 0!==D?D:null===(G=this.items)||void 0===G?void 0:G.map(function(F){return F.ownerFolder});this._searchInput=this.domNode.querySelector(".js-search-input");
this._noFolderRow=this.domNode.querySelector(".js-no-folder");this._createFolderInlineLink=this._noFolderRow.querySelector(".js-create-folder-inline");this._createFolderInlineLink.addEventListener("click",this._showNewFolder.bind(this,!0));this._searchInput.addEventListener("input",(0,a.default)(this._updateResults.bind(this),300));this.domNode.addEventListener("keydown",this._handleKeys.bind(this));this._newFolderForm=this.domNode.querySelector(".js-create-folder-form");this._newFolderForm.addEventListener("submit",
function(F){var A,y;null===(y=null===(A=x.saveNewfolder(F))||void 0===A?void 0:A.then)||void 0===y?void 0:y.call(A,function(z){x.emit("selectUpdate",z)})});this._newFolderInput=this._newFolderForm.querySelector(".js-create-folder-input");this._newFolderInput.addEventListener("input",(0,a.default)(this._updateFolderResults.bind(this),300));this.isMoveItem?(D=this.domNode.querySelector(".js-folder-picker-cancel"),D.parentElement.removeChild(D),this._resultsDropdown.classList.add("move-item")):this.domNode.querySelector(".js-folder-picker-cancel").addEventListener("click",
function(F){x._cancelNewFolder();x._buildFolderList();n.default.hideNode(x._noFolderRow);x.emit("cancel")});this._createFolderButton=this.domNode.querySelector(".js-create-new-folder");this._createFolderButton.addEventListener("click",this._showNewFolder.bind(this,!1));this._createFolderButton.addEventListener("keydown",function(F){"Enter"===F.key&&(F.stopPropagation(),x._showNewFolder(!1))});this.domNode.addEventListener("keydown",function(F){"Enter"===F.key&&F.stopPropagation()});this._showHideCreate()};
w.prototype.shouldHideCreate=function(){var x=v.default.getUserRole(this.portal.portalUser);return this.portal.portalUser.username!==this.user.username&&x.isCustom()&&x.canReassignOrgItems()};w.prototype._showHideCreate=function(){var x=this.shouldHideCreate();n.default.showHide(this._createFolderButton,!x);n.default.showHide(this._createFolderInlineLink,!x)};w.prototype._buildFolderList=function(){var x=this,D;this._rows.forEach(function(F){return F.destroy()});this._rows=(this.user.folders||[]).map(function(F,
A){var y=new l.default({folder:F,user:x.user,isMoveItem:x.isMoveItem},q.default.place(q.default.create("li"),x._resultsDropdown));y.on("select",function(){return x.emit("selectUpdate",F)});y.on("select",function(){return x._select(A)});y.on("hover",function(){return x._active(A,!0)});return y});var G=null===(D=this.itemFolders)||void 0===D?void 0:D.filter(function(F,A){return F&&x.itemFolders.indexOf(F)===A});1===(null===G||void 0===G?void 0:G.length)?(D=this._rows.filter(function(F){return F.folder.id===
G[0]})[0],D=this._rows.indexOf(D),-1!==D&&(this._active(D),this._select(D))):this._active(0);this._searchInput.value=""};w.prototype._updateResults=function(){var x=this._searchInput.value.toLowerCase(),D=this._rows.filter(function(G){var F=G.folder.title.toLowerCase();F=!x||-1<F.indexOf(x);n.default.showHide(G.domNode,F);return F});0===D.length&&(this._createFolderInlineLink.textContent=e.default.substitute(this.i18n.folderDlg.createFolderInline,[x]));n.default.showHide(this._noFolderRow,0===D.length)};
w.prototype._checkMatchingFolder=function(x){var D=x.toLowerCase();return 0<this._rows.filter(function(G){return G.folder.title.toLowerCase()===D}).length};w.prototype._updateFolderResults=function(){this._checkMatchingFolder(this._newFolderInput.value)?this._displayError("Unable to create folder.",this._newFolderInput.value):this._closeErrorMessage()};w.prototype._handleKeys=function(x){if(!this._creatingFolder)switch(x.keyCode){case k.ESCAPE:this.emit("cancel");break;case k.ENTER:x.preventDefault();
this._createFolderInlineLink===document.activeElement?this._showNewFolder(!0):this._createFolderButton===document.activeElement&&this._showNewFolder(!1);if(x=this._rows[this._selectedIndex])this.emit("selectUpdate",x.folder),this._select(this._selectedIndex);break;case k.UP:x.preventDefault();this._active(this._selectedIndex-1);break;case k.DOWN:x.preventDefault(),this._active(this._selectedIndex+1)}};w.prototype._select=function(x){if(x||0===x){var D=this._rows.length-1;x>D&&(x=0);0>x&&(x=D)}this._rows[x].select();
this._rows.forEach(function(G,F){F!==x&&G.deselect()})};w.prototype._active=function(x,D){if(x||0===x){var G=this._rows.length-1;x>G&&(x=0);0>x&&(x=G);this._selectedIndex=x;this._rows[x].active();if(!D){var F=this._rows[x].domNode;D=F.parentElement;G=F.offsetTop;F=F.offsetHeight;var A=G+F;G<D.scrollTop?D.scrollTop=G:A>D.scrollTop+D.offsetHeight&&(D.scrollTop=G-D.offsetHeight+F)}}this._rows.filter(function(y,z){return z!==x}).forEach(function(y){return y.deactivate()})};w.prototype._showNewFolder=
function(x){var D=this;this._creatingFolder=!0;x?(n.default.hideNode(this._noFolderRow),this.saveNewfolder(void 0,!0).then(function(G){D.emit("selectUpdate",G)})):(n.default.hideNode(this._createFolderButton),n.default.showNode(this._newFolderForm),this._active(),this._newFolderInput.focus(),this._newFolderForm.querySelector(".js-folder-create-cancel").addEventListener("click",this._cancelNewFolder.bind(this)))};w.prototype._cancelNewFolder=function(x){null===x||void 0===x?void 0:x.preventDefault();
this._closeErrorMessage();this._creatingFolder=!1;n.default.hideNode(this._newFolderForm);this._newFolderInput.value="";this.shouldHideCreate()||n.default.showNode(this._createFolderButton)};w.prototype.focus=function(){this._searchInput.focus()};w.prototype.updateUser=function(x){this.user=x;this._buildFolderList();this._showHideCreate()};w.prototype.hasUnsavedChanges=function(){return this._creatingFolder&&0<this._newFolderInput.value.length};w.prototype.saveNewfolder=function(x,D){var G=this;null===
x||void 0===x?void 0:x.preventDefault();x="".concat(p.default.restBaseUrl,"content/users/").concat(this.user.username,"/createFolder");var F=D?this._searchInput.value:this._newFolderInput.value;D={title:F};if(null!==F&&void 0!==F&&F.trim())if(-1<F.indexOf("\x3c")||-1<F.indexOf("\x3e"))this._displayError(this.i18n.folderDlg.invalid.invalidCharacters,F);else if(this._checkMatchingFolder(F))this._newFolderInput.focus();else return this.emit("folderCreated",F),m.default.request({url:x,content:D},{usePost:!0}).then(function(A){var y=
new b.default;!0===(null===A||void 0===A?void 0:A.success)&&(G._cancelNewFolder(),G.user.folders.unshift(A.folder),G._buildFolderList(),G._select(0),G._active(0),y.resolve(A.folder));return y},function(A){G._displayError(A.message,F)});else this._displayError(this.i18n.folderDlg.invalid.provideName,F)};w.prototype._displayError=function(x,D){var G;"Unable to create folder."===x&&(G=""===D?this.i18n.folderDlg.invalid.provideName:e.default.substitute(this.i18n.folderDlg.invalid.sameFolderName,[D]));
D=this.domNode.querySelector(".js-create-folder-error-message");D.textContent=G||x;this._newFolderInput.focus();D.classList.add("is-active");this._newFolderInput.classList.add("error")};w.prototype._closeErrorMessage=function(){this.domNode.querySelector(".js-create-folder-error-message").classList.remove("is-active");this._newFolderInput.classList.remove("error")};return w=f.__decorate([(0,g.default)(u.default,t.default,d.default)],w)}()})},"arcgisonline/pages/dijit/ChangeOwner/FolderPickerRow":function(){define("require exports tslib dojo/text!./templates/FolderPickerRow.html dojo/i18n!../../../nls/arcgisonline ../../utils/icons dojo/Evented dijit/_TemplatedMixin dijit/_WidgetBase ../../../tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);return function(){function t(u,g){this.templateString=c.default;this.i18n=h.default;this.icons=d.default}t.prototype.postMixInProperties=function(){this.inherited(arguments);this.folderIcon=d.default.inline[this.user.username===this.folder.id?"home":"folder"]["16"]};t.prototype.postCreate=function(){var u=this;
this.inherited(arguments);this._folderLink.addEventListener("click",function(g){g.preventDefault();u.emit("select")});this.domNode.addEventListener("click",function(g){return u.emit("select")});this._folderLink.addEventListener("mouseover",function(g){return u.emit("hover")})};t.prototype.active=function(){this._folderLink.classList.add("is-active")};t.prototype.deactivate=function(){this._folderLink.classList.remove("is-active")};t.prototype.select=function(){this._folderLink.setAttribute("aria-selected",
"true");this._folderLink.classList.add("is-selected")};t.prototype.deselect=function(){this._folderLink.setAttribute("aria-selected","false");this._folderLink.classList.remove("is-selected")};return t=f.__decorate([(0,q.default)(e.default,a.default,b.default)],t)}()})},"arcgisonline/pages/organization/widgets/PendingMembers/PendingMembers":function(){define("require exports tslib calcite-web/js/calcite-web dojo/text!./templates/PendingMembers.html dojo/i18n!../../../../nls/arcgisonline dojo/string dojo/topic dijit/_TemplatedMixin dijit/_WidgetBase ../../../dijit/Overlay ./PendingRow ../../../dijit/Pagination ../../../dijit/SortDropdown ../../../utils/dom ../../../pageUtil ../../../../sharing/geow/Account arcgisonline/tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);return function(){function k(r){this.title=d.default.myOrganization.memberViewPending;this.i18n=d.default;this.overlayContents=
b.default.substitute(h.default,{i18n:this.i18n});this.showActionBar=!1;this.constrain=!0;this._sort={property:"created",ascending:!1,label:d.default.myOrganization.pendingMembers.date};this._sortOptions=[{property:"created",label:d.default.myOrganization.pendingMembers.date,ascending:!1,active:!0},{property:"email",label:d.default.myOrganization.pendingMembers.email,ascending:!0}];this._membersPerPage=20;this._startPos=1;this._rows=[];this._topicPrefix="PENDING_MEMBERS/";this._resentEmails=[]}k.prototype.postCreate=
function(){this.inherited(arguments);this._renderPendingUsers=this._renderPendingUsers.bind(this)};k.prototype.open=function(){this.inherited(arguments);this.domNode.classList.add("pending-members-overlay");this._initSortDropdown();this._initPagination();this._getPendingUsers();c.default.dropdown()};k.prototype.close=function(){this.inherited(arguments)};k.prototype._addEventListeners=function(){this.inherited(arguments);this.own(a.default.subscribe("pending/resend",this._handleResend.bind(this)),
a.default.subscribe("pending/refresh",this._getPendingUsers.bind(this)),a.default.subscribe("pending/remove",this._handlePendingRemove.bind(this)),a.default.subscribe("".concat(this._topicPrefix,"pagination/page"),this._paginationPage.bind(this)),a.default.subscribe("".concat(this._topicPrefix,"sort/update"),this._sortUpdate.bind(this)))};k.prototype._handleResend=function(r){-1===this._resentEmails.indexOf(r)&&this._resentEmails.push(r);a.default.publish("pending/refresh")};k.prototype._handlePendingRemove=
function(){1===this._rows.length&&1<this._startPos&&(this._startPos-=this._membersPerPage);a.default.publish("pending/refresh")};k.prototype._sortUpdate=function(r){this._startPos=1;this._sort=f.__assign({},r);this._getPendingUsers()};k.prototype._paginationPage=function(r){this._startPos=r.start;this._membersPerPage=r.num;this._getPendingUsers()};k.prototype._initSortDropdown=function(){this._sortDropDown=new m.default({options:this._sortOptions,topic:this._topicPrefix},this.domNode.querySelector(".js-sort-dropdown"))};
k.prototype._initPagination=function(){this._pagination=new g.default({start:1,num:this._membersPerPage,topic:this._topicPrefix,pageSizeLabel:d.default.contentPage.paginationPerPageMembers},this.domNode.querySelector(".js-pagination"))};k.prototype._getPendingUsers=function(){-1<this._startPos&&l.default.getPendingAccountUsers(this.portalId,{start:this._startPos,num:this._membersPerPage,type:"email",sortField:this._sort.property,sortOrder:this._sort.ascending?"asc":"desc"},this._renderPendingUsers)};
k.prototype._renderPendingUsers=function(r){var w=this;if(r.code||r.messageCode)r.total=0,r.invitations=[];if(0<r.total){0<this._rows.length&&this._rows.forEach(function(D){D.destroy()});this._rows=[];this._pagination.render(r);var x=this._pagination.getCurrentPageObj();this.domNode.querySelector(".js-member-count").textContent=p.default.getPageRangeString({start:0===r.total?0:x.start,end:x.end,total:x.total});r.invitations.forEach(function(D){var G=new u.default({invitation:D});-1<w._resentEmails.indexOf(D.email)&&
G.markAsResent(!0);w._rows.push(G)});v.default.appendChildren(this._rows.map(function(D){return D.domNode}),this.domNode.querySelector(".js-list"))}else this.close()};return k=f.__decorate([(0,n.default)(q.default,e.default,t.default)],k)}()})},"arcgisonline/pages/organization/widgets/PendingMembers/PendingRow":function(){define("require exports tslib dojo/text!./templates/PendingRow.html dojo/i18n!../../../../nls/arcgisonline dojo/string dojo/on dojo/topic dijit/_TemplatedMixin dijit/_WidgetBase ../../../utils/organization ../../../utils/icons ../../../utils/dom ../../../utils/alerts ../../../../sharing/util ../../../../sharing/dijit/_LevelAwareMixin ../../../../esriGeowConfig arcgisonline/tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);return function(){function k(r,w){this.templateString=c.default;this.i18n=f.__assign(f.__assign({},h.default.myOrganization.pendingMembers),
h.default.resendInviteDlg);this.icons=u.default;this.PROVIDERS={ENTERPRISE:"enterprise",ALL:"all"}}k.prototype.postCreate=function(){var r=this;this.inherited(arguments);this.getInvitation().then(function(w){r.invitation=w});this._render();this._addEventListeners()};k.prototype._render=function(){this._email.textContent=this.invitation.email;this._invitedLabel.textContent=d.default.substitute(this.i18n.invitedLabel,{date:t.default.lastLoginDate(this.invitation.created)})};k.prototype._addEventListeners=
function(){this.own((0,b.default)(this._resendBtn,"click",this._handleResendClick.bind(this)),(0,b.default)(this._deleteBtn,"click",this._handleDeleteClick.bind(this)))};k.prototype._handleResendClick=function(){this._resendInvitation()};k.prototype._handleDeleteClick=function(){this.deleteInvitation().then(function(){a.default.publish("pending/remove")},function(){m.default.showAlert("error",h.default.errorRemovingInvite)})};k.prototype._resendInvitation=function(){var r=this;this.deleteInvitation().then(function(){r._sendInvite()},
function(){m.default.showAlert("error",h.default.errorRemovingInvite);r._sendInvite()})};k.prototype._sendInvite=function(){var r=this,w=this.invitation.account;w={invitationList:JSON.stringify({invitations:[{email:this.invitation.email,role:this.invitation.role,targetUserProvider:(null===w||void 0===w?void 0:w.targetUserProvider)||this.PROVIDERS.ALL,validateEmail:w?!!w.validateEmail:!0,level:(null===w||void 0===w?void 0:w.level)||this.LICENSE_LEVELS.TWO,userType:null===w||void 0===w?void 0:w.userType,
userLicenseType:null===w||void 0===w?void 0:w.userLicenseType,groups:null===w||void 0===w?void 0:w.groups,userCreditAssignment:null===w||void 0===w?void 0:w.userCreditAssignment}],apps:null===w||void 0===w?void 0:w.apps,appBundles:null===w||void 0===w?void 0:w.appBundles})};v.default.request({url:"".concat(l.default.restBaseUrl,"portals/self/invite"),content:w},{usePost:!0}).then(function(x){var D;0<(null===(D=x.notInvited)||void 0===D?void 0:D.length)?m.default.showAlert("error",r.i18n.errorSendingInvite):
r.markAsResent()},function(){m.default.showAlert("error",h.default.errorSendingInvite)})};k.prototype.markAsResent=function(r){g.default.hideNode(this._resendBtn);g.default.showNode(this._resentLabel);r||a.default.publish("pending/resend",this.invitation.email)};k.prototype.deleteInvitation=function(){return v.default.request({url:l.default.restBaseUrl+"portals/self/invitations/"+this.invitation.id+"/delete"},{usePost:!0})};k.prototype.getInvitation=function(){return v.default.request({url:"".concat(v.default.getSecureUrl(l.default.restBaseUrl),
"community/invitations/").concat(this.invitation.id)})};return k=f.__decorate([(0,n.default)(q.default,e.default,p.default)],k)}()})},"arcgisonline/pages/dijit/SortDropdown":function(){define("require exports tslib ../pageUtil ../utils/arrays ../utils/icons ../utils/dom ../../tsutils/declareDecorator calcite-web/js/calcite-web dijit/_WidgetBase dojo/_base/event dojo/_base/lang dojo/on dojo/query dojo/string dojo/topic esri/Evented dojo/i18n!../../nls/arcgisonline dojo/text!./SortDropdown/SortDropdown.html dojo/text!./SortDropdown/SortDropdownOption.html".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);return function(){function w(x,D){this.icons=d.default;this.state=
{ascending:!0,property:"",label:"",sortEnabled:!0};this.directionStrings={title:{asc:"alphabetical",desc:"reverseAlphabetical"},owner:{asc:"alphabetical",desc:"reverseAlphabetical"},modified:{asc:"leastRecent",desc:"mostRecent"},added:{asc:"leastRecent",desc:"mostRecent"},numviews:{asc:"leastToMost",desc:"mostToLeast"},relevance:{asc:"leastToMost",desc:"mostToLeast",disabled:!0},lastlogin:{asc:"leastRecent",desc:"mostRecent"},name:{asc:"alphabetical",desc:"reverseAlphabetical"},fullname:{asc:"alphabetical",
desc:"reverseAlphabetical"},joined:{asc:"leastRecent",desc:"mostRecent"},level:{asc:"alphabetical",desc:"reverseAlphabetical"},role:{asc:"alphabetical",desc:"reverseAlphabetical"},created:{asc:"leastRecent",desc:"mostRecent"},email:{asc:"alphabetical",desc:"reverseAlphabetical"},fieldAlias:{asc:"alphabetical",desc:"reverseAlphabetical"},fieldName:{asc:"alphabetical",desc:"reverseAlphabetical"},fieldType:{asc:"alphabetical",desc:"reverseAlphabetical"},defaultFSOrder:{asc:"leastToMost",desc:"mostToLeast",
disabled:!0},mfaenabled:{asc:"ascending",desc:"descending"},membertype:{asc:"alphabetical",desc:"reverseAlphabetical"},username:{asc:"alphabetical",desc:"reverseAlphabetical"},layerName:{asc:"alphabetical",desc:"reverseAlphabetical"},layerType:{asc:"alphabetical",desc:"reverseAlphabetical"},datasetName:{asc:"alphabetical",desc:"reverseAlphabetical"},datasetPath:{asc:"alphabetical",desc:"reverseAlphabetical"},machine:{asc:"alphabetical",desc:"reverseAlphabetical"},containerId:{asc:"alphabetical",desc:"reverseAlphabetical"},
runtimeName:{asc:"alphabetical",desc:"reverseAlphabetical"},version:{asc:"alphabetical",desc:"reverseAlphabetical"},avgrating:{asc:"highestRated",desc:"highestRated",disabled:!0},custom:{asc:"mostRecent",desc:"leastRecent",disabled:!0}}}w.prototype.postMixInProperties=function(){this.inherited(arguments);this.options=u.default.clone(this.params.options);this.dontUpdateQueryParams=this.params.dontUpdateQueryParams;this.defaultOption=h.default.find(this.options,function(x){return x.active});this.topic=
this.params.topic||"";this.state=f.__assign(f.__assign(f.__assign({},this.state),this.defaultOption),{widgetId:this.id});this.ascendingLabel=n.default.gallery[this.directionStrings[this.defaultOption.property].asc];this.descendingLabel=n.default.gallery[this.directionStrings[this.defaultOption.property].desc];this.i18n=n.default};w.prototype.postCreate=function(){this.updateUI();this.attachEvents()};w.prototype.updateUI=function(x){x=this.options.reduce(this.renderOption.bind(this),"");this.domNode.innerHTML=
v.default.substitute(k.default,{options:x,i18n:n.default,activeOption:this.state,ascendingActive:this.state.ascending?"is-active":"",descendingActive:this.state.ascending?"":"is-active",descendingLabel:this.descendingLabel,ascendingLabel:this.ascendingLabel,direction:this.state.ascending?"is-asc":"",label:this.state.ascending?n.default.sortDropdown.ascendingLabel:n.default.sortDropdown.descendingLabel,showReverseOrder:"relevance"===this.state.property?"hide":"",icons:d.default});b.default.showHide(this.domNode.querySelector(".js-sort-direction-section"),
!this.directionStrings[this.defaultOption.property].disabled)};w.prototype.attachEvents=function(){this.own((0,m.default)(".js-sort-direction",this.domNode).on("click",this.toggleSort.bind(this)),(0,m.default)(".js-sort-option",this.domNode).on("click",this.selectOption.bind(this)),(0,g.default)(this.domNode.querySelector(".js-toggle-btn"),"click",this.handleToggle.bind(this)),p.default.subscribe("".concat(this.topic,"sort/update"),this.sortUpdate.bind(this)),p.default.subscribe("".concat(this.topic,
"sort/disable"),this.sortDisable.bind(this)),p.default.subscribe("".concat(this.topic,"sort/enable"),this.sortEnable.bind(this)))};w.prototype.handleToggle=function(){if(!this.domNode.classList.contains("is-active")){var x=this.domNode.querySelectorAll(".control-bar__dropdown-item")[0];x&&setTimeout(function(){x.focus()})}};w.prototype.renderOption=function(x,D){var G=D.active?"is-active":"",F=D.ascending?"asc":"desc",A=D.hide?"hide":"";D=u.default.mixin(u.default.clone(D),{isActive:G,sortOrder:F,
hide:A,icons:d.default});D=v.default.substitute(r.default,D);return x+D};w.prototype.toggleSort=function(x){var D;t.default.stop(x);this.state.ascending="asc"===x.currentTarget.getAttribute("data-value");null===(D=this.telemetry)||void 0===D?void 0:D.logEvent({category:"Control Bar Sort Order",action:"selected sort order",pageUrl:window.location.href});this.closeAndPublish()};w.prototype.toggleSelectedSortDirection=function(x){var D="asc"===x?"desc":"asc";(0,m.default)(".js-sort-direction[data-value\x3d'".concat(x,
"']"),this.domNode).addClass("is-active");(0,m.default)(".js-sort-direction[data-value\x3d'".concat(D,"']"),this.domNode).removeClass("is-active")};w.prototype.selectOption=function(x){var D;t.default.stop(x);this.state={ascending:"asc"===x.target.getAttribute("data-order"),property:x.target.getAttribute("data-property"),label:x.target.textContent};null===(D=this.telemetry)||void 0===D?void 0:D.logEvent({category:"Control Bar Sort Order",action:"selected sort order",pageUrl:window.location.href});
this.closeAndPublish()};w.prototype.closeAndPublish=function(){e.default.bus.emit("dropdown:close");p.default.publish("".concat(this.topic,"sort/update"),u.default.clone(this.state));this.domNode.querySelector(".js-toggle-btn").focus()};w.prototype.sortUpdate=function(x){!1===this.state.sortEnabled&&e.default.bus.emit("dropdown:close");this.state=this.directionStrings[this.state.property]?u.default.clone(x):this.defaultOption;x=this.state.property;(0,m.default)(".js-sort-label",this.domNode).shift().innerHTML=
this.state.label;(0,m.default)(".js-sort-option",this.domNode).removeClass("is-active");(0,m.default)(".js-sort-option[data-property\x3d'".concat(x,"']"),this.domNode).addClass("is-active");var D=this.directionStrings[x].disabled||(this.state.ascending?"asc":"desc");this.toggleSelectedSortDirection(D);(0,m.default)(".js-sort-direction-section",this.domNode)[this.directionStrings[x].disabled?"addClass":"removeClass"]("hide");this.domNode.querySelector(".js-ascending-label").innerHTML=n.default.gallery[this.directionStrings[x].asc];
this.domNode.querySelector(".js-descending-label").innerHTML=n.default.gallery[this.directionStrings[x].desc];this.dontUpdateQueryParams||this.topic||c.default.updateQueryParams({sortOrder:D,sortField:x})};w.prototype.sortDisable=function(){Array.prototype.slice.call(document.querySelectorAll(".js-sort-option")).forEach(function(x){"relevance"!==x.getAttribute("data-property")&&(x.style.display="none")})};w.prototype.sortEnable=function(){Array.prototype.slice.call(document.querySelectorAll(".js-sort-option")).forEach(function(x){x.style.display=
"block"})};return w=f.__decorate([(0,a.default)(q.default,l.default)],w)}()})},"arcgisonline/pages/organization/widgets/SetCreditsOverlay/SetCreditsOverlay":function(){define("require exports tslib esri/lang dojo/text!./SetCreditsOverlay.html dojo/i18n!../../../../nls/arcgisonline dojo/string dojo/on dojo/topic dijit/_TemplatedMixin dijit/_WidgetBase dijit/form/NumberTextBox arcgisonline/pages/dijit/Overlay arcgisonline/pages/utils/alerts arcgisonline/pages/utils/validation arcgisonline/pages/pageUtil ../../../utils/number arcgisonline/esriGeowConfig arcgisonline/tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);return function(){function r(w,x){this.title=d.default.batchAssignCreditsDlg.setCreditAllocation;
this.i18n=d.default;this.overlayContents="";this.background="white";this.constrain=!0;this.maxWidth=700;this.notBatch=!1}r.prototype.postMixInProperties=function(){this.inherited(arguments);this.overlayContents=b.default.substitute(h.default,{i18n:this.i18n.batchAssignCreditsDlg,learnUrl:"".concat(this.portal.helpBase).concat(this.portal.helpMap.m["120001873"]||"")})};r.prototype.open=function(){var w,x;this.inherited(arguments);this.noLimitRadio=this.domNode.querySelector(".js-no-limit-radio");this.creditsRadio=
this.domNode.querySelector(".js-credits-radio");this.creditsError=this.domNode.querySelector(".js-credits-error");this.setupCreditsInput();this.domNode.querySelector(".js-org-credits").textContent=l.default.format(this.portal.availableCredits);this.domNode.querySelector(".js-org-member-count").textContent=l.default.format(this.memberCount);var D=this.portal.defaultUserCreditAssignment;1===(null===(w=this.members)||void 0===w?void 0:w.length)&&(D=null!==(x=this.members[0].assignedCredits)&&void 0!==
x?x:-1);c.default.isDefined(D)&&-1!==D?(this.creditsRadio.checked=!0,this.creditsInput.setValue("".concat(D))):this.noLimitRadio.checked=!0};r.prototype.close=function(){this.inherited(arguments);e.default.publish("manage-members/close")};r.prototype.handlePrimary=function(){var w=this;if(!this.creditsError.classList.contains("is-active")){var x=this.i18n.batchAssignCreditsDlg,D=x.assignmentFailure,G=x.assignmentSomeFailure;x=x.assignmentSuccessful;var F=this.noLimitRadio.checked?-1:+this.creditsInput.get("value"),
A=this.notBatch?-1===F?b.default.substitute(this.i18n.assignCreditsDlg.allocatedNoLimit,{name:this.members[0].username}):b.default.substitute(this.i18n.assignCreditsDlg.allocateCredits,{name:this.members[0].username,num:isNaN(F)?0:F}):x;x="".concat(n.default.restBaseUrl,"portals/self/assignUserCredits");var y=this.members.map(function(z){return{username:z.username,credits:F}});p.default.sendAllResources(x,500,y,function(z){return{userAssignments:JSON.stringify(z)}}).then(function(z){if(z){var B=[];
z.forEach(function(C){C=C.notAssignedUsers;if(null===C||void 0===C?0:C.length)B=f.__spreadArray(f.__spreadArray([],B,!0),C,!0)});(z=z.every(function(C){return(null===C||void 0===C?void 0:C.code)&&C.message}))?m.default.showAlert("error",D):0<B.length?m.default.showAlert("warning","".concat(G," ").concat(B.join(", "))):m.default.showAlert("success",A);z||e.default.publish("members/refresh");w.close()}},function(){m.default.showAlert("error",D);w.close()})}};r.prototype.setupCreditsInput=function(){var w=
this;this.creditsInput=new u.default({trim:!0},this.domNode.querySelector(".js-credits-input"));this.creditsInput.displayMessage=function(){};this.own((0,a.default)(this.creditsInput,"keyup",function(){var x=w.creditsInput.get("value");w.creditsRadio.checked=!0;if(x&&!isNaN(x)&&x>w.portal.availableCredits)var D=w.i18n.batchAssignCreditsDlg.creditLimitOrg;else w.creditsInput.isValid(!1)||(D=w.i18n.batchAssignCreditsDlg.creditsNumberRequired);D?(w.creditsError.textContent=D,v.default.setInvalidState(w.creditsInput.domNode,
w.creditsError)):v.default.clearState([w.creditsInput.domNode,w.creditsError])}))};return r=f.__decorate([(0,k.default)(t.default,q.default,g.default)],r)}()})},"arcgisonline/sharing/geow/Password":function(){define("require exports tslib ../../esriGeowConfig ../../pages/pageUtil ../util dojo/Deferred dojo/string dojo/i18n!../../nls/arcgisonline".split(" "),function(S,J,f,c,h,d,b,a,e){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);
e=f.__importDefault(e);return function(){function q(){}q.expirePassword=function(t){var u="".concat(c.default.restBaseUrl,"community/users/").concat(t,"/expirePassword");d.default.request({url:u,content:{expiration:-1}},{usePost:!0}).then(function(g){h.default.createConfirmationDialog({strings:{title:e.default.common.noticeLabel,description:a.default.substitute(e.default.myOrganization.passwordExpired,{user:t})},hideCancel:!0,autoCloseOnOk:!0})},function(g){g=a.default.substitute(e.default.myOrganization.passwordExpiredError,
{user:t});h.default.createConfirmationDialog({strings:{title:e.default.common.errorTitle,description:g},hideCancel:!0,autoCloseOnOk:!0})})};q.resetPassword=function(t,u,g,m){var v=d.default.getSecureUrl(c.default.restBaseUrl),p="".concat(v,"community/users/").concat(t);v="".concat(p,"/reset");var l="".concat(p,"/update"),n="".concat(p,"/expirePassword");p={email:!0};var k={expiration:1},r=function(){null===m||void 0===m?void 0:m()},w=function(){null===m||void 0===m?void 0:m()},x;d.default.isPortal()&&
!c.default.self.supportsEmail?this._generateNewPassword(t).then(function(D){d.default.request({url:l,content:{password:D}},{usePost:!0}).then(function(G){G&&!G.code?(x="\x3cp\x3e".concat(a.default.substitute(e.default.myOrganization.passwordResetDescPortal,{user:t}),"\x3c/p\x3e\x3cp\x3e").concat(a.default.substitute(e.default.myOrganization.passwordRespDesc,{user:t}),"\x3c/p\x3e\x3cp\x3e\x3cstrong\x3e").concat(g,"\x3c/strong\x3e\x3c/p\x3e\x3cp\x3e").concat(a.default.substitute(e.default.myOrganization.passwordSampleHello,
{fullname:u}),"\x3c/p\x3e\x3cp\x3e").concat(a.default.substitute(e.default.myOrganization.passwordSampleReset,{username:t}),"\x3c/p\x3e\x3cp\x3e\x3cstrong\x3e").concat(D,"\x3c/strong\x3e\x3c/p\x3e\x3cp\x3e").concat(a.default.substitute(e.default.myOrganization.passwordResetSignIn,{orgName:c.default.self.name}),"\x3c/p\x3e"),d.default.request({url:n,content:k},{usePost:!0}).then(function(){h.default.createConfirmationDialog({strings:{title:e.default.myOrganization.passwordResetLabel,description:x},
renderHtmlDescription:!0,hideCancel:!0,autoCloseOnOk:!0,onOk:r,onCancel:w})},function(){h.default.createConfirmationDialog({strings:{title:e.default.myOrganization.passwordResetLabel,description:x},hideCancel:!0,autoCloseOnOk:!0,onOk:r,onCancel:w})})):h.default.createConfirmationDialog({strings:{title:e.default.common.errorTitle,description:a.default.substitute(e.default.myOrganization.passwordResetError,{user:t})},hideCancel:!0,autoCloseOnOk:!0,onOk:r,onCancel:w})},function(G){h.default.createConfirmationDialog({strings:{title:e.default.common.errorTitle,
description:a.default.substitute(e.default.myOrganization.passwordResetError,{user:t})},hideCancel:!0,autoCloseOnOk:!0,onOk:r,onCancel:w})})}):d.default.request({url:v,content:p},{usePost:!0}).then(function(){h.default.createConfirmationDialog({strings:{title:e.default.myOrganization.passwordResetLabel,description:a.default.substitute(e.default.myOrganization.passwordResetDesc,{user:t})},hideCancel:!0,autoCloseOnOk:!0,onOk:r,onCancel:w})},function(D){x=a.default.substitute(e.default.myOrganization.passwordResetError,
{user:t});D&&"COM_1062"===D.messageCode?x=e.default.myOrganization.passwordResetDisabled:D&&"COM_1063"===D.messageCode&&(x=e.default.myOrganization.passwordResetBlocked);h.default.createConfirmationDialog({strings:{title:e.default.common.errorTitle,description:x},hideCancel:!0,autoCloseOnOk:!0,onOk:r,onCancel:w})})};q._generateNewPassword=function(t){var u=this,g=new b.default,m,v;if(d.default.isPortal())this._loadPasswordPolicy().then(function(p){m=u._generatePassword(p);if(p)for(v=d.default.meetsPasswordPolicyStrength(p,
m);!v.meetsRequirements()||t.toLowerCase()===m.toLowerCase();)m=u._generatePassword(p),v=d.default.meetsPasswordPolicyStrength(p,m);else for(;!d.default.meetsPasswordStrength(m)||t.toLowerCase()===m.toLowerCase();)m=u._generatePassword(p);g.resolve(m)},function(p){for(m=u._generatePassword();!d.default.meetsPasswordStrength(m);)m=u._generatePassword();g.resolve(m)});else{for(m=this._generatePassword();!d.default.meetsPasswordStrength(m)||t.toLowerCase()===m.toLowerCase();)m=this._generatePassword();
g.resolve(m)}return g};q._generatePassword=function(t){var u=!!t,g=u?t.minLength:8,m="".concat("ABCDEFGHIJKLMNOPQRSTWXYZ").concat("abcdefghjkmnpqrstuvwxyz").concat("23456789"),v="";u&&t.minOther&&(m+="!#$%()*+,-./:;\x3d?@[]^_{}~");for(t=0;t<g;t++)v+=m.charAt(Math.floor(Math.random()*m.length));return v};q._loadPasswordPolicy=function(){var t="".concat(d.default.getSecureUrl(c.default.restBaseUrl),"portals/self/securityPolicy/passwordPolicy");return d.default.request({url:t})};return q}()})},"arcgisonline/pages/components/DeleteMembers/DeleteMembersModal":function(){define("require exports tslib preact preact/hooks preact/compat ../../dijit/ChangeOwner/FolderPicker ../MemberThumb ../MemberPicker ./SelectedMember ./ContentFolderOptions ../MemberThumbsStack ./api ./LinkSection dojo/i18n!../../../nls/arcgisonline dojo/i18n!../../../nls/organization xstyle/css!./DeleteMembersModal.css".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p){function l(n,k){var r=f.__assign({},v.default.myOrganization);r={COM_1029:r.unableToDeleteUserMsg,COM_1056:r.noDeleteDisconnectedUserMsg,COM_1057:r.noDeleteProvisionedUserMsg,COM_1060:r.securityTab.needTwoAdminDeleteMsg,COM_1077:r.unableToDeleteUserBaseMsg,COM_1150:r.noDeleteAppBundlesMsg,COM_1052:r.customCannotDeleteAdminMsg,COM_1152:r.unableToDeleteUserReports,default:r.unableToDeleteUserMsg};if(n.code&&n.messageCode)return(r[n.messageCode]||r.default).replace("${user}",
k)}Object.defineProperty(J,"__esModule",{value:!0});b=f.__importDefault(b);q=f.__importDefault(q);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);J.default=function(n){function k(Sa){if(ka)return ka;Sa=new b.default({portal:L,user:Sa},Ka.current);Sa.on("cancel",function(){Q(!1)});Sa.on("selectUpdate",function(Ua){na(Ua);Q(!1)});ma(Sa);return Sa}function r(Sa){return f.__awaiter(this,void 0,void 0,function(){var Ua,Va;return f.__generator(this,function(Ya){switch(Ya.label){case 0:return[4,
w(Sa)];case 1:return Ua=Ya.sent(),na(null===Ua||void 0===Ua?void 0:Ua.folders[0]),x(Ua),ca(Ua),la(!1),oa(!1),Va=k(Ua),Va.updateUser(Ua),window.setTimeout(function(){Ma.current.focus()},100),[2]}})})}function w(Sa){return f.__awaiter(this,void 0,void 0,function(){var Ua;return f.__generator(this,function(Va){switch(Va.label){case 0:return[4,(0,g.getUser)(Sa.username,L)];case 1:return Ua=Va.sent(),(null===Ua||void 0===Ua?0:Ua.folders)?[3,3]:[4,Ua.getFolders()];case 2:Va.sent(),Va.label=3;case 3:return[2,
Ua]}})})}function x(Sa){var Ua=null===Sa||void 0===Sa?void 0:Sa.userRole;Sa=Sa.groups.length+M;(null===Ua||void 0===Ua?0:Ua.canCreateItem())?(null===Ua||void 0===Ua?0:Ua.canCreateGroup())?512<Sa?O(ja.transferGroupsLimit):O(""):O(ja.warnings.cantOwnGroups):O(ja.warnings.cantOwnItems)}function D(){la(!1);window.setTimeout(function(){Ma.current.focus()},100)}function G(){return 1<I.length}function F(){return I.some(function(Sa){return"both"===Sa.userType&&"arcgis"===Sa.provider})}function A(){return I.some(function(Sa){return 0<
Sa.contentCount})}function y(){return I.reduce(function(Sa,Ua){return Sa+Ua.contentCount},0)}function z(){oa(!1)}function B(){Ea(!1)}function C(){da(!1);window.setTimeout(function(){P()},300)}function H(Sa){U(Sa.target.checked)}function E(Sa){Ha(Sa.target.value)}function K(Sa,Ua,Va,Ya){var Wa=Ua<ua,$a=Ua===ua;return(0,c.h)("div",{class:"flex trailer-quarter delete-member__progress-step ".concat(Ua>ua?"delete-member__progress-step--disabled":"")},Wa?(0,c.h)("calcite-icon",{icon:"check-circle",scale:"s",
class:"margin-right-half delete-members__progress-check"}):$a?(0,c.h)("calcite-loader",{label:Sa,inline:!0}):(0,c.h)("calcite-icon",{icon:"circle",scale:"s",class:"margin-right-half"}),Sa,0<Ya&&(0,c.h)("div",{class:"margin-left-half"},"(",Va,"/",Ya,")"))}var I=n.members,L=n.portal,M=n.groupsCount,N=n.recycleCount,P=n.onClose,R=n.onDeleted,Y=n.onError,ja=f.__assign(f.__assign(f.__assign({},v.default.common),v.default.changeOwner),p.default.deleteMembersModal),aa=(0,h.useState)(!1);n=aa[0];var da=aa[1];
aa=(0,h.useState)();var ra=aa[0],ca=aa[1],fa=(0,h.useState)(!0);aa=fa[0];var la=fa[1],ta=(0,h.useState)(!1);fa=ta[0];var Q=ta[1];ta=(0,h.useState)("");var T=ta[0],O=ta[1];ta=(0,h.useState)();var Z=ta[0],na=ta[1],ia=(0,h.useState)("");ta=ia[0];var X=ia[1],ha=(0,h.useState)(!1);ia=ha[0];var V=ha[1];ha=(0,h.useState)(!1);var ea=ha[0],U=ha[1];ha=(0,h.useState)();var ka=ha[0],ma=ha[1],sa=(0,h.useState)("")[1];ha=(0,h.useState)(1<I.length);var pa=ha[0],Aa=ha[1];ha=(0,h.useState)(ja.defaultPrefix);var za=
ha[0],Ba=ha[1];ha=(0,h.useState)(1);var ua=ha[0],Fa=ha[1],va=(0,h.useState)(0);ha=va[0];var xa=va[1],Da=(0,h.useState)(0);va=Da[0];var Ca=Da[1],qa=(0,h.useState)(0)[1],W=(0,h.useState)(0)[1],ba=(0,h.useState)(!1);Da=ba[0];var oa=ba[1],wa=(0,h.useState)(!1);ba=wa[0];var Ea=wa[1];wa=(0,h.useState)(A()||0<M);var Ga=wa[0],Ja=wa[1];wa=(0,h.useState)("transfer");var ya=wa[0],Ha=wa[1],Ia=(0,h.useRef)(null),Ka=(0,h.useRef)(null),Ma=(0,h.useRef)(null);(0,h.useEffect)(function(){Ia.current&&window.setTimeout(function(){da(!0);
window.setTimeout(function(){var Sa=Ia.current.shadowRoot.querySelector(".modal");1>Sa.getBoundingClientRect().top&&(Sa.style.margin="0 1.5rem")},300)},100)},[Ia.current]);wa=I.reduce(function(Sa,Ua){return"".concat(Sa).concat(Sa?" OR ":"",'owner:"').concat(encodeURIComponent(Ua.username),'"')},"");wa="search.html?q\x3d".concat(wa);var Na="".concat(wa,"#groups"),La=Math.max.apply(Math,I.map(function(Sa){return Sa.username.length})),Pa=G()?ja.confirmDeleteMultiple:ja.confirmDelete.replace("${user}",
I[0].username),Oa=ia&&(A()||0<M||0<N),Qa=1<I.length,Ra="transfer"===ya&&(A()||0<M);return(0,c.h)(c.Fragment,null,(0,d.createPortal)((0,c.h)("calcite-modal",{ref:Ia,open:n,role:"dialog",widthScale:"s","aria-modal":"true",oncalciteModalClose:C,outsideCloseDisabled:!0,closeButtonDisabled:ia,style:{"--calcite-modal-width":"588px"}},(0,c.h)("h3",{slot:"header",class:"font-size-2 trailer-0"},G()?ja.deleteMembers:ja.deleteMember),(0,c.h)("div",{slot:"content"},Ga&&(0,c.h)("div",null,(0,c.h)("p",{class:"avenir-demi"},
Qa?ja.manageContentBeforeDelete:ja.manageBeforeDelete),(0,c.h)("calcite-tile-select-group",{layout:"vertical",style:"--calcite-font-size--2: 0.875rem"},(0,c.h)("calcite-tile-select",{width:"full",checked:"transfer"===ya,"input-enabled":!0,"input-inputAlignment":"start",description:Qa?ja.transferContent:ja.transferContentAndGroups,value:"transfer",oncalciteTileSelectChange:E}),(0,c.h)("calcite-tile-select",{width:"full",checked:"delete"===ya,"input-enabled":!0,"input-inputAlignment":"start",description:Qa?
ja.deleteContent:ja.deleteContentAndGroups,value:"delete",oncalciteTileSelectChange:E})),G()&&(0,c.h)("div",{class:"leader-1 flex flex-align-center"},(0,c.h)("calcite-icon",{scale:"s",class:"no-transfer-warning-icon margin-right-half",icon:"exclamation-mark-triangle"}),(0,c.h)("div",{class:"avenir-demi font-size--2"},ja.noGroupsTransfer))),!Ga&&(0,c.h)(c.Fragment,null,Oa&&(0,c.h)("div",{class:""},(0,c.h)("p",{class:"trailer-0 font-size-0"},ja.deletingWarning),(0,c.h)("div",{class:"leader-1 font-size--1"},
L.isPortal?null:K(ja.process.esriAccess,1),K(ja.process.licenses,2,va,ha),0<M?K(G()||"delete"===ya?ja.process.deleteGroups:ja.process.groups,3):"",A()?K("delete"===ya?ja.process.deleteContent:ja.process.content,4):"",L.recycleBinSupported&&L.recycleBinEnabled&&0<N?K(ja.process.emptyRecycle,5):"",K(ja.process.deleting,6))),(0,c.h)("calcite-alert",{kind:"danger",open:!!ta,label:ta,placement:"top-end"},(0,c.h)("div",{slot:"message"},ta)),!F()&&!A()&&!(0<M)&&0===N&&!Oa&&(0,c.h)("p",null,Pa),(0,c.h)("div",
{class:"".concat(Oa||!(F()||A()||0<M)&&0===N?"hide":"")},(0,c.h)("div",{class:"delete-member__top-section"},!G()&&(0,c.h)("div",null,(0,c.h)("div",{class:"avenir-demi"},ja.selectedMember),(0,c.h)(q.default,{member:I[0],noBorder:!0})),G()&&(0,c.h)("p",{class:"trailer-0 avenir-demi"},ja.membersListDesc.replace("${count}",I.length)),G()&&(0,c.h)("div",{class:"trailer-half"},(0,c.h)(u.MemberThumbsStack,{members:I}))),"transfer"===ya&&(A()||0<M)&&(0,c.h)("div",{class:"delete-member__bottom-section leader-half"},
(0,c.h)("div",{class:"avenir-demi"},ja.transferTitle),(0,c.h)("p",{class:"font-size--2 trailer-half"},ja.transferDesc),(0,c.h)("div",{class:"".concat(fa?"hide":"")},(0,c.h)("div",{class:"".concat(aa?"hide":""," trailer-1")},(0,c.h)("h4",{class:"font-size--1 trailer-quarter"},ja.newOwner),(0,c.h)("div",{ref:Ma,"aria-label":"".concat(ja.newOwner,", ").concat(null===ra||void 0===ra?void 0:ra.fullName,", ").concat(null===ra||void 0===ra?void 0:ra.username),class:"panel panel-white flex flex-align-center change-owner-card input-error--no-icon ".concat(T?
"input-error":""),onClick:function(){la(!0)},onKeyDown:function(Sa){if("Space"===Sa.code||"Enter"===Sa.code)Sa.preventDefault(),Sa.stopPropagation(),la(!0)},tabIndex:0,role:"button"},ra&&(0,c.h)("div",{class:"flex-1"},(0,c.h)(a.MemberThumb,{member:ra,showName:!0})),(0,c.h)("calcite-icon",{icon:"pencil",scale:"s"})),T&&(0,c.h)("calcite-input-message",{icon:"exclamation-mark-triangle",status:"invalid"},T)),(0,c.h)("div",{class:"position-relative delete-member__member-picker-wrapper ".concat(aa?"":"hide")},
(0,c.h)(e.MemberPicker,{portal:L,excludedUsernames:I.map(function(Sa){return Sa.username}),showMemberPicker:aa,alwaysPreventEmptySearch:!0,selectUpdate:r,selectCancel:D})),ra&&A()&&G()&&(0,c.h)(t.ContentFolderOptions,{usernameLength:La,defaultFolder:Z,newOwner:ra,portal:L,onOptionChange:function(Sa){Aa(Sa)},onPrefixChange:function(Sa){Ba(Sa)},onFolderChange:function(Sa){na(Sa)}}),!pa&&!G()&&(0,c.h)("div",{class:"trailer-1 ".concat(Z&&A()?"":"hide")},(0,c.h)("div",null,ja.folder),(0,c.h)("div",{class:"panel panel-white flex flex-align-center change-owner-card",
tabIndex:0,onClick:function(){Q(!0)},onKeyDown:function(Sa){"Space"!==Sa.code&&"Enter"!==Sa.code||Q(!0)},role:"button","aria-label":"".concat(ja.selectedFolder,", ").concat(null===Z||void 0===Z?void 0:Z.title)},(0,c.h)("div",{class:"flex-0 to-transfer-icon"},(0,c.h)("calcite-icon",{icon:"".concat((null===Z||void 0===Z?void 0:Z.id)===(null===ra||void 0===ra?void 0:ra.username)?"home":"folder"),scale:"s"})),(0,c.h)("div",{class:"flex-1 flex flex-column margin-left-half break-word"},(0,c.h)("div",{class:"font-size-0 trailer-0"},
null===Z||void 0===Z?void 0:Z.title)),(0,c.h)("calcite-icon",{icon:"pencil",scale:"s"})))),(0,c.h)("div",{class:"".concat(fa?"":"hide"," position-relative delete-member__folder-picker")},(0,c.h)("div",{ref:Ka})),(0,c.h)("div",null,A()&&!fa&&(0,c.h)(m.default,{id:"content-to-transfer",title:ja.contentTransfer,icon:"images",url:wa,count:y(),noMargin:!0,linkAriaLabel:ja.viewContent}),!G()&&0<M&&!fa&&(0,c.h)(m.default,{id:"groups-to-transfer",title:ja.groupsTransfer,icon:"group",url:Na,count:M,noMargin:!A(),
linkAriaLabel:ja.viewGroups}))),(0<N||0<M&&G()||"delete"===ya&&(A()||0<M))&&(0,c.h)("div",{class:"padding-leader-half trailer-1 ".concat(Ra?"delete-member__permanent-delete--border":"")},(0,c.h)("div",{class:"avenir-demi trailer-half"},ja.permanentlyDelete),(0,c.h)("div",null,A()&&"delete"===ya&&(0,c.h)(m.default,{id:"content-to-delete",title:ja.contentDelete,icon:"images",url:wa,count:y(),noMargin:!0,linkAriaLabel:ja.viewContent}),0<N&&(0,c.h)(m.default,{id:"recycle-to-empty",title:ja.recycleToDelete,
icon:"recycle-bin",url:G()?"":"content.html?user\x3d".concat(I[0].username,"\x26folder\x3drecycle#content"),count:N,linkAriaLabel:ja.viewRecycle,noMargin:!0}),0<M&&("delete"===ya||G())&&(0,c.h)(m.default,{id:"groups-to-delete",title:ja.groupsToDelete,icon:"group",url:Na,count:M,noMargin:!0,linkAriaLabel:ja.viewGroups}))),F()&&(0,c.h)("div",{class:"leader-1"},(0,c.h)("div",{class:" delete-member__checkbox-wrapper"},(0,c.h)("calcite-label",{style:{"--calcite-label-margin-bottom":0},layout:"inline"},
(0,c.h)("calcite-checkbox",{class:"margin-right-half",checked:ea,oncalciteCheckboxChange:H}),(0,c.h)("div",null,(0,c.h)("div",{class:"avenir-demi"},ja.keepEsriAccess),(0,c.h)("div",null,ja.keepEsriAccessDesc)))))),Da&&(0,c.h)("div",{class:"delete-members__alert-wrapper"},(0,c.h)("calcite-alert",{open:Da,icon:"information",kind:"brand",label:ja.noOwnerAlert.title,oncalciteAlertClose:z,placement:"bottom"},(0,c.h)("div",{slot:"title"},ja.noOwnerAlert.title),(0,c.h)("div",{slot:"message"},ja.noOwnerAlert.description))),
ba&&(0,c.h)("div",{class:"delete-members__alert-wrapper"},(0,c.h)("calcite-alert",{open:ba,icon:"information",kind:"brand",label:ja.cannotDelete,oncalciteAlertClose:B,placement:"bottom"},(0,c.h)("div",{slot:"title"},ja.cannotDelete),(0,c.h)("div",{slot:"message"},ja.recipientGroupLimit))))),!Ga&&(A()||0<M)&&(0,c.h)("calcite-button",{slot:"back",width:"full",kind:"neutral",appearance:"outline",onClick:function(){Ja(!0)},disabled:ia},ja.back),(0,c.h)("calcite-button",{slot:"primary",width:"full",onClick:function(){return f.__awaiter(this,
void 0,void 0,function(){var Sa,Ua,Va,Ya,Wa,$a,Ta,Xa,Za,bb,db,cb,gb,ab,hb;return f.__generator(this,function(fb){switch(fb.label){case 0:if(Ga)return Ja(!1),[2];if("transfer"===ya&&!ra&&(A()||0<M&&!G()))return oa(!0),[2];"transfer"===ya&&!G()&&ra&&(Sa=(null===(hb=ra.groups)||void 0===hb?void 0:hb.length)+M,512<Sa&&Ea(!0));if(T||"transfer"===ya&&!ra&&(A()||!G()&&0<M))return[2];oa(!1);Ea(!1);V(!0);Ua=I.map(function(ib){return ib.username});if(ea||!F())return[3,2];sa(ja.process.esriAccess);return[4,
(0,g.disableUsersEsriAccess)(I.filter(function(ib){return"both"===ib.userType&&"arcgis"===ib.provider}).map(function(ib){return ib.username}))];case 1:fb.sent(),fb.label=2;case 2:return Fa(2),sa(ja.process.licenses),[4,(0,g.revokeUsersLicenses)(f.__spreadArray([],Ua,!0),function(ib,lb){Ca(ib);xa(lb)})];case 3:fb.sent();if(!(0<M))return[3,7];sa(ja.process.groups);Fa(3);return 1<Ua.length||"delete"===ya?[4,(0,g.deleteUsersGroups)(f.__spreadArray([],Ua,!0),function(ib,lb){qa(lb);W(ib)})]:[3,5];case 4:return Va=
fb.sent(),Va?[3,7]:(X(ja.errors.deleteGroups),V(!1),[2]);case 5:return[4,(0,g.reassignUsersGroups)(f.__spreadArray([],Ua,!0),ra.username,function(ib,lb){qa(lb);W(ib)})];case 6:Ya=fb.sent();if(!Ya)return X(ja.errors.groups),V(!1),[2];fb.label=7;case 7:Wa=I.filter(function(ib){return 0<ib.contentCount}).map(function(ib){return ib.username});sa(ja.process.content);Fa(4);$a=[];if(!(0<Wa.length))return[3,13];if("transfer"!==ya)return[3,11];Ta=void 0;Xa={targetUser:ra.username,reassignedUsers:Wa,targetFolderName:pa?
za.trim():null===Z||void 0===Z?void 0:Z.title,createSubFolderPerReassignedUser:pa,unshareContentFromExternalGroups:!0,addTargetUserToInternalGroups:!0};return[4,(0,g.reassignUsersContent)(Xa)];case 8:return Ta=fb.sent(),(null===Ta||void 0===Ta?0:Ta.messageCode)?(X("CONT_0068"===Ta.messageCode?v.default.common.errors.CONT_0068:ja.errors.content),V(!1),[2]):null!==Ta&&void 0!==Ta&&Ta.jobId&&"submitted"===Ta.status?[4,(0,g.checkJobStatus)(Ta.jobId)]:[3,10];case 9:Za=fb.sent();if("failed"===Za.status)return X(ja.errors.content),
V(!1),[2];if("succeeded"===Za.status&&(bb=Za.result.results.some(function(ib){return!!ib.error})))return X(ja.noSharedGroupAccess),V(!1),[2];fb.label=10;case 10:return[3,13];case 11:if("delete"!==ya)return[3,13];db=[];return[4,(0,g.deleteUsersContent)(f.__spreadArray([],Wa,!0),db)];case 12:fb.sent(),(cb=db.some(function(ib){return ib.results.some(function(lb){return!lb.success})}))&&db.reduce(function(ib,lb){lb.results.some(function(jb){var kb;return!jb.success&&"CONT_0048"===(null===(kb=jb.error)||
void 0===kb?void 0:kb.messageCode)})&&(ib[lb.username]||($a.push(lb.username),ib[lb.username]=0),ib[lb.username]++);return ib},{}),fb.label=13;case 13:if(!(L.recycleBinSupported&&L.recycleBinEnabled&&0<N))return[3,15];Fa(5);return[4,(0,g.emptyUsersRecycleBins)(f.__spreadArray([],Ua,!0),Ua.length)];case 14:fb.sent(),fb.label=15;case 15:return sa(ja.process.deleting),Fa(6),gb=Ua.filter(function(ib){return!$a.includes(ib)}),[4,(0,g.deleteUsers)(gb,l)];case 16:return ab=fb.sent(),0<$a.length?(V(!1),Y(ja.errors.deleteProtection)):
ab.error?ab.error&&(X(ab.error),V(!1)):(Fa(7),V(!1),da(!1),R()),[2]}})})},disabled:Oa||fa,kind:Ga?"brand":"danger",loading:!Oa&&ia},Ga?ja.next:G()?ja.deleteMembers:ja.deleteMember),(0,c.h)("calcite-button",{slot:"secondary",width:"full",appearance:"outline",onClick:C,disabled:ia},ja.cancel)),document.body))}})},"arcgisonline/pages/components/DeleteMembers/SelectedMember":function(){define(["require","exports","preact","../MemberThumb"],function(S,J,f,c){Object.defineProperty(J,"__esModule",{value:!0});
J.default=function(h){var d=h.member;return(0,f.h)("div",{class:"flex delete-member__member-row ".concat(h.noBorder?"delete-member__member-row--no-border":"")},(0,f.h)("div",{class:"flex-1"},(0,f.h)(c.MemberThumb,{member:d,showName:!0})))}})},"arcgisonline/pages/components/DeleteMembers/ContentFolderOptions":function(){define("require exports tslib preact preact/hooks ../../dijit/ChangeOwner/FolderPicker dojo/i18n!../../../nls/organization".split(" "),function(S,J,f,c,h,d,b){Object.defineProperty(J,
"__esModule",{value:!0});J.ContentFolderOptions=void 0;d=f.__importDefault(d);b=f.__importDefault(b);J.ContentFolderOptions=function(a){function e(C){if(y)return y;C=new d.default({portal:m,user:C},B.current);C.on("cancel",function(){A(!1)});C.on("selectUpdate",function(H){G(H);A(!1);l(H)});z(C);return C}function q(C){x("multiple"===C);v("multiple"===C)}var t=a.usernameLength,u=a.defaultFolder,g=a.newOwner,m=a.portal,v=a.onOptionChange,p=a.onPrefixChange,l=a.onFolderChange;a=f.__assign({},b.default.deleteMembersModal);
var n=(0,h.useState)(a.defaultPrefix),k=n[0],r=n[1],w=(0,h.useState)(!0);n=w[0];var x=w[1],D=(0,h.useState)(u);w=D[0];var G=D[1],F=(0,h.useState)(!1);D=F[0];var A=F[1];F=(0,h.useState)();var y=F[0],z=F[1],B=(0,h.useRef)(null);(0,h.useEffect)(function(){e(g).updateUser(g)},[g]);(0,h.useEffect)(function(){G(u)},[u]);return(0,c.h)("div",null,(0,c.h)("div",{class:"font-size--1 trailer-quarter"},a.folderSettings),(0,c.h)("div",{class:"trailer-1"},(0,c.h)("div",{class:"content-folder-option ".concat(n?
"content-folder-option--checked":""),onClick:function(){return q("multiple")}},(0,c.h)("div",null,(0,c.h)("calcite-label",{layout:"inline"},(0,c.h)("calcite-radio-button",{checked:n,value:"multiple"}),a.folderForEach)),(0,c.h)("div",{class:"content-folder__input-container"},(0,c.h)("div",null,(0,c.h)("div",{class:"font-size--1"},a.folderPrefix),(0,c.h)("div",{class:"panel panel-white delete-members__prefix-panel flex flex-align-center change-owner-card"},(0,c.h)("div",{class:"flex-0 delete-members__prefix-icon"},
(0,c.h)("calcite-icon",{scale:"s",icon:"folder"})),(0,c.h)("div",{class:"flex-1 margin-left-half transfer-content-overlay__prefix-input-wrapper"},(0,c.h)("input",{type:"text",class:"delete-members__prefix-input ".concat(k.length?"":"input-error"),maxLength:125-t,value:k,onInput:function(C){C=C.target;r(C.value);p(C.value)}}))),(0,c.h)("div",{class:"input-error-message ".concat(k.length?"":"is-active")},a.prefixRequired),(0,c.h)("div",{class:"font-size--2 leader-quarter"},a.prefixSample.replace("${prefix}",
k))))),(0,c.h)("div",{class:"content-folder-option ".concat(n?"":"content-folder-option--checked"),onClick:function(){return q("single")}},(0,c.h)("div",null,(0,c.h)("calcite-label",{layout:"inline"},(0,c.h)("calcite-radio-button",{checked:!n,value:"single"}),a.oneFolder)),(0,c.h)("div",{class:"content-folder__input-container"},(0,c.h)("div",{class:"".concat(D?"hide":"")},(0,c.h)("div",null,a.folder),(0,c.h)("div",{class:"panel panel-white flex flex-align-center change-owner-card selected-folder-tile",
tabIndex:0,onClick:function(){A(!0)},onKeyDown:function(C){"Space"!==C.code&&"Enter"!==C.code||A(!0)},role:"button"},(0,c.h)("div",{class:"flex-0 to-transfer-icon"},(0,c.h)("calcite-icon",{icon:"".concat((null===w||void 0===w?void 0:w.id)===(null===g||void 0===g?void 0:g.username)?"home":"folder"),scale:"s"})),(0,c.h)("div",{class:"flex-1 flex flex-column margin-left-half break-word"},(0,c.h)("div",{class:"font-size-0 trailer-0"},null===w||void 0===w?void 0:w.title)),(0,c.h)("calcite-icon",{icon:"pencil",
scale:"s"}))),(0,c.h)("div",{class:"".concat(D?"":"hide"," position-relative delete-member__folder-picker")},(0,c.h)("div",{ref:B}))))))}})},"arcgisonline/pages/components/MemberThumbsStack":function(){define(["require","exports","preact","./MemberThumb"],function(S,J,f,c){Object.defineProperty(J,"__esModule",{value:!0});J.MemberThumbsStack=void 0;J.MemberThumbsStack=function(h){var d=h.scale,b=h.members;h=h.displayCount||5;var a=0;b.length>h&&(a=b.length-h,b=b.slice(0,h));return(0,f.h)("div",{class:"flex flex-align-center"},
(0,f.h)("div",{class:"flex flex-align-center"},b.map(function(e){return(0,f.h)(c.MemberThumb,{key:e.username,member:e,scale:d||"m",cssClasses:"member-thumbs-stack__item"})})),0<a&&(0,f.h)("calcite-chip",{class:"member-thumbs-stack__chip",value:a},"+",a))}})},"arcgisonline/pages/components/DeleteMembers/api":function(){define("require exports tslib ../../../sharing/util ../../../esriGeowConfig ../../portal/PortalUser ../../pageUtil ../../utils/timeout".split(" "),function(S,J,f,c,h,d,b,a){function e(C){return f.__awaiter(this,
void 0,void 0,function(){var H;return f.__generator(this,function(E){switch(E.label){case 0:return E.trys.push([0,5,,6]),[4,c.default.request({url:"".concat(h.default.restBaseUrl,"portals/self/jobs/").concat(C)})];case 1:return H=E.sent(),"submitted"!==H.status?[3,3]:[4,(0,a.timeout)(1E3)];case 2:return E.sent(),[2,e(C)];case 3:if("succeeded"===H.status||"failed"===H.status)return[2,H];E.label=4;case 4:return[3,6];case 5:return E.sent(),[3,6];case 6:return[2]}})})}function q(C,H){return f.__awaiter(this,
void 0,void 0,function(){var E,K,I;return f.__generator(this,function(L){switch(L.label){case 0:if(null===C||void 0===C||!C.length)return[2,!0];E=C.splice(0,1)[0];return[4,k(E)];case 1:return K=L.sent(),K.length?[4,A(K,E,H)]:[2,q(C,H)];case 2:return(I=L.sent())?[2,q(C,H)]:[2,!1]}})})}function t(C,H,E){return f.__awaiter(this,void 0,void 0,function(){var K,I,L;return f.__generator(this,function(M){switch(M.label){case 0:if(null===C||void 0===C||!C.length)return[2,!0];K=C.splice(0,1)[0];return[4,n(K)];
case 1:return I=M.sent(),I.length?[4,u(I,H,K,0,I.length,E)]:[2,t(C,H)];case 2:return(L=M.sent())?[2,t(C,H)]:[2,!1]}})})}function u(C,H,E,K,I,L){return f.__awaiter(this,void 0,void 0,function(){var M,N;return f.__generator(this,function(P){switch(P.label){case 0:if(null===C||void 0===C||!C.length)return[2,!0];M=C.splice(0,1)[0];return[4,p(M,H,E)];case 1:return(N=P.sent())?(K++,null===L||void 0===L?void 0:L(K,I),[2,u(C,H,E,K,I,L)]):[2,!1]}})})}function g(C,H){return f.__awaiter(this,void 0,void 0,function(){var E,
K,I;return f.__generator(this,function(L){switch(L.label){case 0:if(null===C||void 0===C||!C.length)return[2,!0];E=C.splice(0,1)[0];return[4,n(E)];case 1:return K=L.sent(),K.length?[4,m(K,0,K.length,H)]:[2,g(C,H)];case 2:return(I=L.sent())?[2,g(C,H)]:[2,!1]}})})}function m(C,H,E,K){return f.__awaiter(this,void 0,void 0,function(){var I,L;return f.__generator(this,function(M){switch(M.label){case 0:if(null===C||void 0===C||!C.length)return[2,!0];I=C.splice(0,1)[0];return[4,v(I)];case 1:return(L=M.sent())?
(H++,null===K||void 0===K?void 0:K(H,E),[2,m(C,H,E,K)]):[2]}})})}function v(C){return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,function(H){switch(H.label){case 0:return H.trys.push([0,2,,3]),[4,c.default.request({url:"".concat(h.default.restBaseUrl,"community/groups/").concat(C.id,"/delete")},{usePost:!0})];case 1:return H.sent(),[2,!0];case 2:return H.sent(),[2,!1];case 3:return[2]}})})}function p(C,H,E){return f.__awaiter(this,void 0,void 0,function(){var K,I;return f.__generator(this,
function(L){switch(L.label){case 0:return L.trys.push([0,2,,4]),[4,c.default.request({url:"".concat(h.default.restBaseUrl,"community/groups/").concat(C.id,"/reassign"),content:{targetUsername:H}},{usePost:!0})];case 1:return L.sent(),[2,!0];case 2:return K=L.sent(),"COM_0046"!==(null===K||void 0===K?void 0:K.messageCode)?[2,!1]:(I=l(C,E))?[4,(0,a.timeout)(1E3)]:[2,!1];case 3:return L.sent(),[2,p(C,H,E)];case 4:return[2]}})})}function l(C,H){return f.__awaiter(this,void 0,void 0,function(){var E,K;
return f.__generator(this,function(I){switch(I.label){case 0:return I.trys.push([0,2,,3]),E="(".concat(H,")"),K="".concat(C.title," ").concat(C.title.includes(E)?"(1)":E),[4,c.default.request({url:"".concat(h.default.restBaseUrl,"community/groups/").concat(C.id,"/update"),content:{title:K}},{usePost:!0})];case 1:return I.sent(),C.title=K,[2,!0];case 2:return I.sent(),[2,!1];case 3:return[2]}})})}function n(C){return f.__awaiter(this,void 0,void 0,function(){var H;return f.__generator(this,function(E){switch(E.label){case 0:return E.trys.push([0,
2,,3]),[4,b.default.fetchAllResources("".concat(h.default.restBaseUrl,"community/groups"),{q:"owner:".concat(C),sortField:"title",sortOrder:"asc"})];case 1:return H=E.sent(),[2,H];case 2:return E.sent(),[2,[]];case 3:return[2]}})})}function k(C){return f.__awaiter(this,void 0,void 0,function(){var H;return f.__generator(this,function(E){switch(E.label){case 0:return E.trys.push([0,2,,3]),[4,b.default.fetchAllResources("".concat(h.default.restBaseUrl,"search"),{q:"(owner:".concat(C,")")})];case 1:return H=
E.sent(),[2,H];case 2:return E.sent(),[2,[]];case 3:return[2]}})})}function r(C){return f.__awaiter(this,void 0,void 0,function(){var H;return f.__generator(this,function(E){switch(E.label){case 0:return E.trys.push([0,2,,3]),[4,b.default.fetchAllResources("".concat(h.default.restBaseUrl,"community/users/").concat(C,"/provisionedListings"),{includeExpired:!0},"provisionedListings")];case 1:return H=E.sent(),[2,H];case 2:return E.sent(),[2,[]];case 3:return[2]}})})}function w(C){return f.__awaiter(this,
void 0,void 0,function(){var H;return f.__generator(this,function(E){switch(E.label){case 0:return E.trys.push([0,2,,3]),[4,b.default.fetchAllResources("".concat(h.default.restBaseUrl,"content/users/").concat(C),{foldersContent:!0,inRecycleBin:!0,sortField:"modified",sortOrder:"asc"},"items")];case 1:return H=E.sent(),[2,H];case 2:return E.sent(),[3,3];case 3:return[2]}})})}function x(C){return f.__awaiter(this,void 0,void 0,function(){var H;return f.__generator(this,function(E){switch(E.label){case 0:return E.trys.push([0,
2,,3]),[4,b.default.fetchAllResources("".concat(h.default.restBaseUrl,"community/users/").concat(C,"/appBundles"),{num:10},"appBundles")];case 1:return H=E.sent(),[2,H];case 2:return E.sent(),[2,[]];case 3:return[2]}})})}function D(C,H){return f.__awaiter(this,void 0,void 0,function(){var E;return f.__generator(this,function(K){switch(K.label){case 0:if(null===C||void 0===C||!C.length)return[2,!0];E=C.splice(0,1)[0];return[4,G(E,H)];case 1:return K.sent(),[2,D(C)]}})})}function G(C,H){return f.__awaiter(this,
void 0,void 0,function(){var E,K,I,L,M,N;return f.__generator(this,function(P){switch(P.label){case 0:return[4,r(C)];case 1:return E=P.sent(),[4,x(C)];case 2:K=P.sent();if(!((null===E||void 0===E?0:E.length)||(null===K||void 0===K?0:K.length)))return[2,!0];I=E.length;L=I+K.length;return[4,z(E,{suppressCustomerEmail:!0,userEntitlements:JSON.stringify({users:[C],entitlements:[]})},function(R){return"".concat(h.default.restBaseUrl,"content/listings/").concat(R.itemId,"/provisionUserEntitlements")},0,
L,H)];case 3:return M=P.sent(),[4,z(K,{users:[C],revoke:!0},function(R){return"".concat(h.default.restBaseUrl,"/content/listings/").concat(R.id,"/provisionUserAppBundle")},I,L,H)];case 4:return N=P.sent(),[2,M&&N]}})})}function F(C,H){return f.__awaiter(this,arguments,void 0,function(E,K,I,L){var M,N,P;void 0===I&&(I=0);return f.__generator(this,function(R){switch(R.label){case 0:if(null===E||void 0===E||!E.length)return[2,!0];M=E.splice(0,1)[0];return[4,w(M)];case 1:return N=R.sent(),[4,A(N,M)];
case 2:P=R.sent();if(!P)return[2,!1];I++;null===L||void 0===L?void 0:L(I,K);return[2,F(E,K,I,L)]}})})}function A(C,H){return f.__awaiter(this,arguments,void 0,function(E,K,I){var L;void 0===I&&(I=[]);return f.__generator(this,function(M){switch(M.label){case 0:if(null===E||void 0===E||!E.length)return[2,!0];L=E.splice(0,100);return[4,y(L,K,I)];case 1:return M.sent(),[2,A(E,K,I)]}})})}function y(C,H,E){return f.__awaiter(this,arguments,void 0,function(K,I,L,M){var N;void 0===M&&(M=1);return f.__generator(this,
function(P){switch(P.label){case 0:return P.trys.push([0,2,,3]),[4,c.default.request({url:"".concat(h.default.restBaseUrl,"content/users/").concat(I,"/deleteItems"),content:{items:K.map(function(R){return R.id}).join(","),permanentDelete:!0}},{usePost:!0})];case 1:return N=P.sent(),L.push(f.__assign(f.__assign({},N),{username:I})),[2,L];case 2:P.sent();if(3>=M)return[2,y(K,I,L,M+1)];L.push({username:I,results:[{success:!1}]});return[2,L];case 3:return[2]}})})}function z(C,H,E){return f.__awaiter(this,
arguments,void 0,function(K,I,L,M,N,P){var R;void 0===M&&(M=0);return f.__generator(this,function(Y){switch(Y.label){case 0:if(null===K||void 0===K||!K.length)return[2,!0];R=K.splice(0,1)[0];Y.label=1;case 1:return Y.trys.push([1,3,,4]),[4,c.default.request({url:L(R),content:I},{usePost:!0})];case 2:return Y.sent(),M++,null===P||void 0===P?void 0:P(M,N),[2,z(K,I,L,M,N,P)];case 3:return Y.sent(),[2,!1];case 4:return[2]}})})}function B(C,H){return f.__awaiter(this,void 0,void 0,function(){var E,K,I,
L,M;return f.__generator(this,function(N){switch(N.label){case 0:if(null===C||void 0===C||!C.length)return[2,{success:!0}];E=C.splice(0,1)[0];N.label=1;case 1:return N.trys.push([1,3,,4]),[4,c.default.request({url:"".concat(h.default.restBaseUrl,"community/users/").concat(E,"/delete")},{usePost:!0})];case 2:return K=N.sent(),(I=H(K,E))?[2,{error:I}]:[2,B(C,H)];case 3:return L=N.sent(),M=H(L,E),[2,{error:M}];case 4:return[2]}})})}Object.defineProperty(J,"__esModule",{value:!0});J.disableUsersEsriAccess=
J.disableEsriAccess=J.deleteUsers=J.deleteUser=J.postRequestsSerially=J.deleteItemsWithRetries=J.permanentlyDeleteItems=J.emptyUsersRecycleBins=J.revokeAllLicenses=J.revokeUsersLicenses=J.getUserAppBundles=J.getAllRecycleItems=J.getAllProvisionedListings=J.getAllUserItems=J.getAllUserGroups=J.deleteGroup=J.deleteGroups=J.deleteUsersGroups=J.reassignGroupsAndRenameIfNeeded=J.reassignUsersGroups=J.deleteUsersContent=J.checkJobStatus=J.reassignUsersContent=J.getUser=void 0;c=f.__importDefault(c);h=f.__importDefault(h);
d=f.__importDefault(d);b=f.__importDefault(b);J.getUser=function(C,H){return f.__awaiter(this,void 0,void 0,function(){var E;return f.__generator(this,function(K){switch(K.label){case 0:return K.trys.push([0,2,,3]),[4,c.default.request({url:"".concat(h.default.restBaseUrl,"community/users/").concat(C,"/")})];case 1:return E=K.sent(),[2,new d.default(f.__assign(f.__assign({},E),{portal:H}))];case 2:return K.sent(),[3,3];case 3:return[2]}})})};J.reassignUsersContent=function(C){return f.__awaiter(this,
void 0,void 0,function(){var H,E;return f.__generator(this,function(K){switch(K.label){case 0:return K.trys.push([0,2,,3]),[4,c.default.request({url:"".concat(h.default.restBaseUrl,"portals/self/reassignUsersContent"),content:{reassign:JSON.stringify(C)}},{usePost:!0})];case 1:return H=K.sent(),[2,H];case 2:return E=K.sent(),[2,E];case 3:return[2]}})})};J.checkJobStatus=e;J.deleteUsersContent=q;J.reassignUsersGroups=t;J.reassignGroupsAndRenameIfNeeded=u;J.deleteUsersGroups=g;J.deleteGroups=m;J.deleteGroup=
v;J.getAllUserGroups=n;J.getAllUserItems=k;J.getAllProvisionedListings=r;J.getAllRecycleItems=w;J.getUserAppBundles=x;J.revokeUsersLicenses=D;J.revokeAllLicenses=G;J.emptyUsersRecycleBins=F;J.permanentlyDeleteItems=A;J.deleteItemsWithRetries=y;J.postRequestsSerially=z;J.deleteUser=function(C){return f.__awaiter(this,void 0,void 0,function(){var H,E;return f.__generator(this,function(K){switch(K.label){case 0:return K.trys.push([0,2,,3]),[4,c.default.request({url:"".concat(h.default.restBaseUrl,"community/users/").concat(C,
"/delete")},{usePost:!0})];case 1:return H=K.sent(),[2,H];case 2:return E=K.sent(),[2,E];case 3:return[2]}})})};J.deleteUsers=B;J.disableEsriAccess=function(C){return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,function(H){switch(H.label){case 0:return H.trys.push([0,2,,3]),[4,c.default.request({url:"".concat(h.default.restBaseUrl,"community/users/").concat(C,"/update"),content:{userType:"arcgisonly"}},{usePost:!0})];case 1:return H.sent(),[3,3];case 2:return H.sent(),[3,3];
case 3:return[2]}})})};J.disableUsersEsriAccess=function(C){return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,function(H){switch(H.label){case 0:return[4,z(C,{userType:"arcgisonly"},function(E){return"".concat(h.default.restBaseUrl,"community/users/").concat(E,"/update")})];case 1:return[2,H.sent()]}})})}})},"arcgisonline/pages/components/DeleteMembers/LinkSection":function(){define(["require","exports","tslib","preact","dojo/i18n!../../../nls/organization"],function(S,J,
f,c,h){Object.defineProperty(J,"__esModule",{value:!0});h=f.__importDefault(h);J.default=function(d){var b=d.id,a=d.title,e=d.description,q=d.description2,t=d.url,u=d.icon,g=d.count;d=d.linkAriaLabel;var m=f.__assign({},h.default.deleteMembersModal);b="".concat(b,"-tooltip-button");return(0,c.h)("div",{class:"count-list-section"},(0,c.h)("div",{class:"trailer-quarter font-size--1 flex flex-align-center"},a," ",e&&(0,c.h)(c.Fragment,null,(0,c.h)("button",{class:"btn-link btn-link-darker-gray margin-left-half link-section__tooltip-button",
id:b},(0,c.h)("calcite-icon",{icon:"information",scale:"s"})),(0,c.h)("calcite-tooltip",{label:"",referenceElement:b},(0,c.h)("p",{class:"trailer-half"},e),q&&(0,c.h)("p",{class:"trailer-0"},q)))),(0,c.h)("div",{class:"flex flex-align-center"},(0,c.h)("div",{class:"flex-1 flex flex-align-center"},(0,c.h)("calcite-icon",{icon:u,scale:"s"}),(0,c.h)("div",{class:"margin-left-half"},g)),t&&(0,c.h)("a",{href:t,target:"_blank",class:"flex flex-align-center font-size--1","aria-label":d,onKeyDown:function(v){"Enter"===
v.key&&v.target.click()}},m.viewAll," ",(0,c.h)("calcite-icon",{scale:"s",icon:"launch",class:"margin-left-half"}))))}})},"arcgisonline/pages/components/ScheduledReports/ScheduledReports":function(){define("require exports tslib preact ./ScheduledReportRow preact/hooks".split(" "),function(S,J,f,c,h,d){Object.defineProperty(J,"__esModule",{value:!0});h=f.__importDefault(h);J.default=function(b){var a=b.texts,e=b.tasks,q=b.portal,t=b.portalUser;b=b.onClose;var u=(0,d.useState)(!1),g=u[0],m=u[1],v=
(0,d.useRef)(null);u=a.columnNames;var p=a.cancel;(0,d.useEffect)(function(){v.current&&m(!0)},[v.current]);return(0,c.h)("calcite-modal",{"aria-labelledby":"scheduled-reports-title",ref:v,open:g,oncalciteModalClose:b,style:{"--calcite-modal-content-background":"var(--calcite-color-background)"},fullscreen:!0},(0,c.h)("h3",{slot:"header",id:"scheduled-reports-title",class:"trailer-0 font-size-1 avenir-demi"},a.title),(0,c.h)("div",{slot:"content"},(0,c.h)("div",{class:"scheduled-reports-content"},
(0,c.h)("div",{class:"content-table-view table-select reports__table",role:"table"},(0,c.h)("div",{class:"table-select-head js-table-header",role:"rowgroup"},(0,c.h)("div",{class:"table-select-row table-select-row-header",role:"row"},(0,c.h)("span",{class:"table-select-cell table-select-cell-th",role:"columnheader"},(0,c.h)("label",{class:"table-select-cell-sort"},u.title)),(0,c.h)("span",{class:"table-select-cell table-select-cell-th",role:"columnheader"},(0,c.h)("label",{class:"table-select-cell-sort"},
u.owner)),(0,c.h)("span",{class:"table-select-cell table-select-cell-th",role:"columnheader"},(0,c.h)("label",{class:"table-select-cell-sort"},u.schedule)),(0,c.h)("span",{class:"table-select-cell table-select-cell-th",role:"columnheader"},(0,c.h)("label",{class:"table-select-cell-sort"},u.startEnd)),(0,c.h)("span",{class:"table-select-cell table-select-cell-th",role:"columnheader"},(0,c.h)("label",{class:"table-select-cell-sort"},u.nextRuntime)),(0,c.h)("span",{class:"table-select-cell table-select-cell-th org-members__action-column",
role:"columnheader"},(0,c.h)("label",{class:"table-select-cell-sort table-select-cell-action"},"\u00a0")))),e.map(function(l){var n,k,r=(null===(n=t.userRole)||void 0===n?void 0:n.isAdmin())||t.username===l.portalUser.username;n=null===(k=t.userRole)||void 0===k?void 0:k.isAdmin();return(0,c.h)(h.default,{key:l.id,task:l,texts:a,portal:q,canManage:r,canReassign:n})})))),(0,c.h)("calcite-button",{slot:"secondary",appearance:"outline",onClick:b},p))}})},"arcgisonline/pages/components/ScheduledReports/ScheduledReportRow":function(){define("require exports tslib preact preact/hooks dojo/topic arcgisonline/pages/utils/formatters arcgisonline/pages/organization/widgets/Reports/ReportOwner arcgisonline/pages/utils/alerts arcgisonline/pages/dijit/ChangeOwnerTask ./taskAPI".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t){function u(m,v){void 0===v&&(v=1);v=m.getFullYear()+v;var p=m.getMonth(),l=m.getDate();m.setMonth(p);m.setFullYear(m.getFullYear()+1);1!==p||29!==l||0===v%4&&0!==v%100||0===v%400?m.setDate(l):m.setDate(28);return m}var g=this;Object.defineProperty(J,"__esModule",{value:!0});d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);J.default=function(m){var v=m.task,p=m.texts,l=m.portal,n=m.canManage;m=m.canReassign;
var k=v.id,r=v.userId,w=v.title,x=v.startDate,D=v.endDate,G=v.lastStart,F=v.maxOccurrences,A=v.cronSchedule,y=v.taskState,z=v.active,B=p.startLabel,C=p.endLabel,H=p.afterOccurrences,E=p.never,K=p.actions,I=p.scheduleLabels,L=p.messages,M=(0,h.useRef)(null);(0,h.useEffect)(function(){var ia;M.current&&(ia=new a.default({report:v,owner:v.portalUser,portal:l},M.current));return function(){var X;null===(X=null===ia||void 0===ia?void 0:ia.destroy)||void 0===X?void 0:X.call(ia)}},[M,v.portalUser]);var N=
"",P="",R=!1;if(A){var Y=I.daily;R=I.weekly;var ja=I.monthly,aa=I.monthlyLast,da=I.quarterly,ra=I.yearly,ca=A.minute,fa=A.hour,la=A.dayOfMonth;I=A.month;var ta=A.dayOfWeek,Q="1"===la&&"?"===ta&&"0"===fa&&"1"===ca&&"1"===I,T="*"===la&&"*"===I&&"?"===ta,O="*"===I&&"?"===la,Z="*"===I&&"?"===ta,na="*/3"===I&&"?"===ta;A=function(){if(!F||-1===F)return!1;var ia=new Date(x);ia.setHours(0);ia.setMinutes(1);if(Q){var X=u(ia,F);ia.setTime(X.getTime())}else if(T)ia.setDate(ia.getDate()+F);else if(O)X=+ta-1,
ia.setDate(ia.getDate()+(X+7-ia.getDay())%7),ia.setDate(ia.getDate()+7*(F-1));else if(Z){if("L"===la){var ha=ia.getFullYear(),V=ia.getMonth();X=new Date(ha,V+1,0);ha=new Date(ha,V+2,0);ia.getTime()<X.getTime()?ia.setMonth(X.getMonth(),X.getDate()):ia.setMonth(ha.getMonth(),ha.getDate())}else X=+la,ia.getDate()>X?ia.setMonth(ia.getMonth()+1,X):ia.setDate(X);ia.setMonth(ia.getMonth()+F-1)}else na&&(ia.setDate(1),ia.setMonth(ia.getMonth()+(3-ia.getMonth()%3)),ia.setMonth(ia.getMonth()+3*(F-1)));return ia.getTime()<=
Date.now()};Q?(N=ra,R=void 0,G?R=u(new Date(G),1):(R=u(new Date(x),1),R.setUTCDate(+la),R.setUTCMonth(+I-1),R.setUTCHours(0,0,0,0)),P=b.default.fullDate(R.getTime())):T?(N=Y,G=new Date,P=G.getTime()>x?p.tomorrow:b.default.fullDate(x)):O?(G=new Date,P=+ta-1,N=P-G.getDay(),G.setDate(G.getDate()+N),N=G.getTime(),N=b.default.dayOfWeek(N),N=R.replace("${dayOfWeek}",N),R=new Date,R.getTime()<x&&(R=new Date(x)),R.setDate(R.getDate()+(P+7-R.getDay())%7),P=b.default.fullDate(R.getTime())):Z?(N="L"===la?aa:
ja.replace("${dayNumber}",la),G=new Date,G.getTime()<x&&(G=new Date(x)),"L"!==la?(R=+la,G.getDate()>R?G.setMonth(G.getMonth()+1,R):G.setDate(R)):(R=new Date,G=R.getFullYear(),Y=R.getMonth(),P=new Date(G,Y+1,0),G=new Date(G,Y+2,0),G=R.getTime()<P.getTime()?P:G),P=b.default.fullDate(G.getTime())):na&&(N=da,G=new Date,R=G.getTime()>x?G:new Date(x),R.setDate(1),R.setMonth(R.getMonth()+(3-R.getMonth()%3)),P=b.default.fullDate(R.getTime()));R="completed"===y||A();"paused"===y||"disabled"===y?P=p.paused:
R&&(P=p.completed)}A=function(){return f.__awaiter(g,void 0,void 0,function(){var ia,X,ha,V,ea;return f.__generator(this,function(U){switch(U.label){case 0:return ia=L.pause,X=L.resume,z?[3,2]:[4,(0,t.enableTask)(r,k)];case 1:return V=U.sent(),[3,4];case 2:return[4,(0,t.disableTask)(r,k)];case 3:V=U.sent(),U.label=4;case 4:return ha=V,ea=z?ia:X,ha.success?e.default.showAlert("success",ea.success):e.default.showAlert("error",ea.error),d.default.publish("scheduled-reports/update"),[2]}})})};G=function(){var ia=
[v],X=v.portalUser,ha=(null===X||void 0===X?void 0:X.getCurrentFolder())||{};ia=new q.default({tasks:ia,owner:X,portal:l,adminOnly:!0,currentFolder:ha});ia.open();ia.on("close",function(V){V.newOwner&&d.default.publish("scheduled-reports/update")})};return(0,c.h)("div",{class:"table-select-row flex table-select-row-avatar",role:"row"},(0,c.h)("span",{class:"table-select-cell flex-1 overflow-visible",role:"cell","data-dojo-attach-point":"titleCol"},(0,c.h)("div",{class:"flex flex-align-center"},(0,c.h)("calcite-icon",
{icon:"file-text",scale:"s"}),(0,c.h)("div",{class:"margin-left-half text-ellipsis",title:w},w))),(0,c.h)("span",{class:"table-select-cell flex-1",role:"cell"},(0,c.h)("div",{ref:M,class:"js-report-owner"})),(0,c.h)("span",{class:"table-select-cell",role:"cell"},N),(0,c.h)("span",{class:"table-select-cell",role:"cell"},(0,c.h)("p",{class:"trailer-quarter"},B.replace("${date}",b.default.fullDate(x))),(0,c.h)("p",{class:"trailer-quarter"},C.replace("${date}",D?b.default.fullDate(D):-1===F?E:H.replace("${maxOccurrences}",
F)))),(0,c.h)("span",{class:"table-select-cell",role:"cell"},P),(0,c.h)("span",{class:"table-select-cell org-members__action-column org-members__action-column-body table-select-cell-overflow",role:"cell"},(0,c.h)("div",{class:"dropdown js-dropdown"},(0,c.h)("button",{class:"btn btn-link btn-link-darker-gray leader-quarter js-dropdown-toggle",tabIndex:0,"aria-haspopup":"true","aria-expanded":"false","aria-label":p.openActions,disabled:!n},(0,c.h)("calcite-icon",{icon:"ellipsis",scale:"s"})),(0,c.h)("nav",
{class:"dropdown-menu dropdown-right",role:"menu"},!R&&(0,c.h)("button",{class:"dropdown-link",role:"menuitem",onClick:A},"active"===y?K.pause:K.resume),(0,c.h)("button",{class:"dropdown-link",role:"menuitem",onClick:function(){d.default.publish("schedule-report",{editScheduleOnly:!0,task:v,title:w,portal:l})}},K.edit),m&&(0,c.h)("button",{class:"dropdown-link",role:"menuitem",onClick:G},K.transfer),(0,c.h)("button",{class:"dropdown-link",role:"menuitem",onClick:function(){return f.__awaiter(g,void 0,
void 0,function(){var ia,X;return f.__generator(this,function(ha){switch(ha.label){case 0:return[4,(0,t.deleteTask)(r,k)];case 1:return ia=ha.sent(),X=L.deleteMessages,ia.success?e.default.showAlert("success",X.success):e.default.showAlert("error",X.error),d.default.publish("scheduled-reports/update"),[2]}})})}},K.delete)))))}})},"arcgisonline/pages/dijit/ChangeOwnerTask":function(){define("require exports tslib dojo/string dojo/Deferred ../components/MemberPicker ../components/MemberThumb ../../tsutils/declareDecorator ../utils/dom ../utils/organization dojo/text!./ChangeOwner/templates/ChangeOwner.html dojo/i18n!../../nls/arcgisonline ../utils/icons preact ../components/ScheduledReports/taskAPI ./ChangeOwner".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p){c=f.__importDefault(c);h=f.__importDefault(h);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);p=f.__importDefault(p);return function(){function l(n,k){this.title=u.default.changeOwner.title;this.i18n=u.default;this.icons=g.default;this.constrain=!0;this.overlayContents=c.default.substitute(t.default,{i18n:u.default,icons:g.default});this.maxWidth=600;this.class="bring-modal-to-front";
this.closeOnScrimClick=!1}l.prototype.handlePrimary=function(){this.disableButtons();this._reassign()};l.prototype.initUIUtil=function(){var n=this.tasks||[this.group],k=n[0].owner;n=n.every(function(r){return r.owner===k});return{firstOwner:k,sameOwner:n}};l.prototype._compileRequests=function(){var n=this,k=[],r=[],w=[],x=this._owner.username===this.owner.username,D=q.default.getUserRole(this.owner).isCustom();this.tasks.forEach(function(G){x&&G.owner===n._owner.username&&!D?k.push(G):r.push(G)});
0<r.length&&r.forEach(function(G){return w.push(function(){return n._reassignTask(G)})});return w};l.prototype.reassignUtil=function(n){return this.tasks.find(function(k){return k.id===n.itemId})};l.prototype._reassignTask=function(n){var k=new h.default;(0,v.reassignTask)(n.owner,n.id,this._owner.username).then(function(){return k.resolve({success:!0,task:n})},function(r){return k.resolve({error:r,task:n})});return k};l.prototype._memberSelectUpdate=function(n){var k=this;this._owner=n;(0,m.render)((0,m.h)(d.MemberPicker,
f.__assign(f.__assign({},this.memberPickerProps),{showMemberPicker:!1})),this.domNode.querySelector(".js-member-picker"));e.default.setVisibility(this._ownerArea,!0);(0,m.render)((0,m.h)(b.MemberThumb,{member:n,showName:!0}),this.domNode.querySelector(".js-member-thumb"));this._folder=null;this._ownerEditButton.focus();this._primaryBtn.disabled=!1;this._fadeIn();n.privileges?this._validateSelectedMember():this._fetchUser(n.username).then(function(r){k._owner=r;!r.privileges&&k.canReassignOwnItems?
k.canReassignItems():k._validateSelectedMember()});this._initialOpen&&this._openOwnerSelect();this._initialOpen&&!this.group&&(this._initialOpen=!1)};return l=f.__decorate([(0,a.default)(p.default)],l)}()})},"arcgisonline/pages/components/ScheduledReports/taskAPI":function(){define(["require","exports","tslib","arcgisonline/esriGeowConfig","arcgisonline/sharing/util"],function(S,J,f,c,h){function d(b,a){return"".concat(c.default.restBaseUrl,"community/users/").concat(b,"/tasks/").concat(a)}Object.defineProperty(J,
"__esModule",{value:!0});J.reassignTask=J.deleteTask=J.disableTask=J.enableTask=void 0;c=f.__importDefault(c);h=f.__importDefault(h);J.enableTask=function(b,a){return h.default.request({url:"".concat(d(b,a),"/enable")},{usePost:!0})};J.disableTask=function(b,a){return h.default.request({url:"".concat(d(b,a),"/disable")},{usePost:!0})};J.deleteTask=function(b,a){return h.default.request({url:"".concat(d(b,a),"/delete")},{usePost:!0})};J.reassignTask=function(b,a,e){return h.default.request({url:"".concat(d(b,
a),"/reassign"),content:{targetUsername:e}},{usePost:!0})}})},"arcgisonline/pages/dijit/ChangeOwner":function(){define("require exports tslib dojo/string dojo/Deferred dijit/_TemplatedMixin dijit/_WidgetBase ./Overlay ../components/MemberPicker ../components/MemberThumb ./ChangeOwner/FolderPicker ../portal/PortalUser ../../tsutils/declareDecorator ../utils/dom ../utils/alerts ../utils/arrays ../../sharing/util ../utils/organization ../../esriGeowConfig dojo/text!./ChangeOwner/templates/ChangeOwner.html dojo/i18n!../../nls/arcgisonline ../utils/icons ./OverlayConfirm ../../sharing/geow/Roles preact".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);D=f.__importDefault(D);G=f.__importDefault(G);return function(){function A(y,
z){this.title=w.default.changeOwner.title;this.i18n=w.default;this.icons=x.default;this.constrain=!0;this.overlayContents=c.default.substitute(r.default,{i18n:w.default,icons:x.default});this.maxWidth=600;this.closeOnScrimClick=!1}A.prototype.postMixInProperties=function(){this.inherited(arguments)};A.prototype.postCreate=function(){this.inherited(arguments);this.rolesAPI=new G.default;this._initialOpen=!0;this.group||(this._folderArea=this.domNode.querySelector(".js-folder-area"),this._folderEdit=
this.domNode.querySelector(".js-folder-edit"),this._folderEditButton=this.domNode.querySelector(".js-folder-button"));this._ownerArea=this.domNode.querySelector(".js-owner-area");this._ownerEdit=this.domNode.querySelector(".js-owner-edit");this._ownerEditButton=this.domNode.querySelector(".js-owner-edit-button");this._loader=this.domNode.querySelector(".js-overlay-loader");var y=this.portal.portalUser.userRole;this.canReassignOrgItems=y.isAdmin()||y.canReassignOrgItems();this.canReassignOwnItems=
!this.canReassignOrgItems&&y.canReassignOwnItems();this._primaryBtn.disabled=!0};A.prototype.open=function(){this.inherited(arguments);this._initUI();this._addListeners()};A.prototype.close=function(y){this.inherited(arguments)};A.prototype._destroy=function(){this.inherited(arguments);(0,F.render)(null,this.domNode.querySelector(".js-member-picker"));(0,F.render)(null,this.domNode.querySelector(".js-member-thumb"))};A.prototype.handlePrimary=function(){var y=this;this.disableButtons();!this.group&&
this.canReassignOwnItems?this.reassignItems():this._folderPicker&&this._folderPicker.hasUnsavedChanges()?this._folderPicker.saveNewfolder().then(function(z){y._folder=z;y._reassign()},this._reassign.bind(this)):this._reassign()};A.prototype.disableButtons=function(){this._primaryBtn.disabled=!0;this._cancelBtn.disabled=!0};A.prototype.enableButtons=function(){this._primaryBtn.disabled=!1;this._cancelBtn.disabled=!1};A.prototype._addListeners=function(){var y=this;this._ownerEdit.addEventListener("click",
this._openOwnerSelect.bind(this));this.group||(this._folderEdit.addEventListener("click",this._openFolderSelect.bind(this)),this.own(this._folderPicker.on("selectUpdate",this._folderSelectUpdate.bind(this)),this._folderPicker.on("folderCreated",function(z){return y._createdFolder=z}),this._folderPicker.on("cancel",this._folderSelectCancel.bind(this))))};A.prototype.initUIUtil=function(){var y=this.items||[this.group],z=y[0].owner;y=y.every(function(B){return B.owner===z});return{firstOwner:z,sameOwner:y}};
A.prototype._initUI=function(){return f.__awaiter(this,void 0,void 0,function(){var y,z,B,C,H=this,E;return f.__generator(this,function(K){switch(K.label){case 0:return y=this.initUIUtil(),z=y.firstOwner,this.sameOwner=B=y.sameOwner,this.group&&(this.domNode.querySelector(".js-item-owner-label").innerHTML=w.default.changeOwner.groupOwner),C=[],null!==(E=this.group)&&void 0!==E&&E.leavingDisallowed?[4,this.rolesAPI.getAllRoles(!0)]:[3,2];case 1:C=K.sent(),K.label=2;case 2:return this.memberPickerProps=
{portal:this.portal,group:this.group,showCancel:!this.group&&this.sameOwner,selectUpdate:this._memberSelectUpdate.bind(this),selectCancel:this._memberSelectCancel.bind(this),showMemberPicker:!0,adminOnly:this.adminOnly,roles:C},this.sameOwner&&(this.memberPickerProps.excludedUsernames=[z]),this._memberPicker=(0,F.render)((0,F.h)(e.MemberPicker,this.memberPickerProps),this.domNode.querySelector(".js-member-picker")),this.group||(this._folderPicker=new t.default({portal:this.portal,user:this.owner},
this.domNode.querySelector(".js-folder-picker"))),this.sameOwner?this._fetchUser(z).then(function(I){H._owner=I;H._memberSelectUpdate(H._owner)}):(this._openOwnerSelect(),this._fadeIn()),[2]}})})};A.prototype._fetchUser=function(y){var z=this;y="".concat(k.default.restBaseUrl,"community/users/").concat(y,"/");return l.default.request({url:y}).then(function(B){return new u.default(f.__assign(f.__assign({},B),{portal:z.portal}))})};A.prototype._fadeIn=function(){var y=this.domNode.querySelector(".js-change-owner-wrapper");
this.domNode.querySelector(".js-change-owner-loader").classList.remove("is-active");y.classList.add("animate-fade-in")};A.prototype._compileRequests=function(){var y=this;if(this.group)return[function(){return y._reassignGroup()}];var z=[],B=[],C=[],H=this._owner.username===this.owner.username,E=n.default.getUserRole(this.owner).isCustom();this.items.forEach(function(K){H&&K.owner===y._owner.username&&!E?z.push(K):B.push(K)});0<z.length&&C.push(function(){return y._moveItems(z)});0<B.length&&B.forEach(function(K){return C.push(function(){return y._reassignItem(K)})});
return C};A.prototype.reassignUtil=function(y){return p.default.find(this.items,function(z){return z.id===y.itemId})};A.prototype.waitForSeries=function(y){var z=new h.default;return y.reduce(function(B,C){return B.then(function(H){return C().then(function(E){return H.concat([E])})})},z.resolve([]))};A.prototype._reassign=function(){var y=this;this._loader.classList.add("is-active");this.waitForSeries(this._compileRequests()).then(function(z){var B=z.filter(function(E){return E.success}).map(function(E){return E.item}),
C=z.filter(function(E){return E.error&&!E.success}),H=z.filter(function(E){return E.moveItems});0<H.length&&(H[0].results||[]).forEach(function(E){var K=y.reassignUtil(E);E.success?B.push({success:!0,item:K}):C.push({error:E.error,item:K})});0===C.length&&0<B.length?y._handleSuccess(B):0<C.length&&0===B.length?y._handleError(C[0]):0<C.length&&0<B.length&&y._handlePartialSuccess(B,C[0]);0===z[0].length&&y._handleSuccess(z[0])},function(z){y._handleError(z)})};A.prototype.getTransferError=function(y){var z=
w.default.changeOwner.transferErrors.general;if(null===y||void 0===y?0:y.messageCode)"CONT_00482"===y.messageCode?z=w.default.common.errors.CONT_00482:(y=w.default.changeOwner.transferErrors[y.messageCode])&&(z=y);return z};A.prototype.reassignItems=function(){return f.__awaiter(this,void 0,void 0,function(){var y,z,B,C,H,E,K;return f.__generator(this,function(I){switch(I.label){case 0:y=this.portal.portalUser.username,I.label=1;case 1:return I.trys.push([1,3,,4]),[4,l.default.request({url:"".concat(k.default.restBaseUrl,
"content/users/").concat(y,"/reassignItems"),content:{targetUsername:this._owner.username,items:this.items.map(function(L){return L.id}).join(",")}},{usePost:!0})];case 2:z=I.sent();C=z.results.some(function(L){if(L.error)return B=L.error,!0});H=z.results.some(function(L){return L.success});if(C)return E=this.getTransferError(B),this._loader.classList.remove("is-active"),H?(v.default.showAlert("error",E),this.close({newOwner:this._owner,newFolder:this.reassignFolderName})):this.showErrorPopup(E),
[2];v.default.showAlert("success",w.default.changeOwner.transferSuccess);this.close({newOwner:this._owner,newFolder:this.reassignFolderName});return[3,4];case 3:return K=I.sent(),E=this.getTransferError(K),this._loader.classList.remove("is-active"),this.showErrorPopup(E),[3,4];case 4:return[2]}})})};A.prototype.canReassignItems=function(){return f.__awaiter(this,void 0,void 0,function(){var y,z,B,C,H,E,K,I;return f.__generator(this,function(L){switch(L.label){case 0:y=this.portal.portalUser.username,
z=this.domNode.querySelector(".js-member-select-error"),this._ownerEdit.classList.remove("input-error"),z.classList.remove("is-active"),L.label=1;case 1:return L.trys.push([1,3,,4]),[4,l.default.request({url:"".concat(k.default.restBaseUrl,"content/users/").concat(y,"/canReassignItems?token\x3d").concat(l.default.getToken()),content:{targetUsername:this._owner.username,items:this.items.map(function(M){return M.id}).join(",")}},{usePost:!0})];case 2:return L.sent(),[3,4];case 3:return B=L.sent(),C=
B.messageCode,H="",E=w.default.changeOwner.warnings,K=E.cantReceiveItems,I=E.cantOwnItems,"CONT_0291"===C?H=K:"CONT_0292"===C&&(H=I),H&&(z.innerHTML=H,z.classList.add("is-active"),this._ownerEdit.classList.add("input-error")),[3,4];case 4:return[2]}})})};A.prototype._reassignItem=function(y){var z=this._owner.username===this._folder.id?"/":this._folder.title,B=new h.default;l.default.request({url:"".concat(k.default.restBaseUrl,"content/users/").concat(y.owner,"/items/").concat(y.id,"/reassign"),
content:{targetUsername:this._owner.username,targetFolderName:z}},{usePost:!0}).then(function(){return B.resolve({success:!0,item:y})},function(C){return B.resolve({error:C,item:y})});return B};A.prototype._moveItems=function(y){var z=this._folder.username===this._folder.id?"/":this._folder.id,B=y.filter(function(H){return(H.ownerFolder||"/")!==z}),C=new h.default;0===B.length?C.resolve([]):l.default.request({url:"".concat(k.default.restBaseUrl,"content/users/").concat(this._owner.username,"/moveItems"),
content:{items:B.map(function(H){return H.id}).join(","),folder:z}},{usePost:!0}).then(function(H){return C.resolve({moveItems:!0,results:H.results})},function(H){return C.resolve({error:H,items:y})});return C};A.prototype._reassignGroup=function(){return l.default.request({url:"".concat(k.default.restBaseUrl,"community/groups/").concat(this.group.id,"/reassign"),content:{targetUsername:this._owner.username}},{usePost:!0})};A.prototype._handleSuccess=function(y){this._loader.classList.remove("is-active");
if(this.telemetry&&!this.group){var z=this._folder.title===this._createdFolder;this.telemetry.logEvent({category:"change owner folder option",label:this._folder.id===this._owner.username?"default":z?"new":"custom"})}y={newOwner:this._owner,updatedItems:y};this.group||(v.default.showAlert("success",w.default.changeOwner.success),y.newFolder=this._folder);this.close(y)};A.prototype.showErrorPopup=function(y){var z=this;y=new D.default({title:w.default.common.errorTitle,description:y,showActions:!1,
cssClasses:"full-width text-constrain overlay-confirm-pane--error"});y.domNode.classList.add("position-absolute");y.domNode.classList.add("fullscreen");this._overlay.appendChild(y.domNode);y.show().then(function(){z._ownerEditButton.focus()});this.enableButtons()};A.prototype._handleError=function(y){y=y.messageCode?this._getErrorText(y):this._getErrorText(y.error,y.item);this._loader.classList.remove("is-active");this.showErrorPopup(y)};A.prototype._handlePartialSuccess=function(y,z){var B=z.error;
z=z.item;this._loader.classList.remove("is-active");z=this._getErrorText(B,z);y={newOwner:this._owner,updatedItems:y,error:B};this.group||(v.default.showAlert("error",z),y.newFolder=this._folder);this.close(y)};A.prototype._getErrorText=function(y,z){var B=this.group?w.default.GroupWidget.error.cantReassignGroup:w.default.changeOwner.cantChangeOwner,C=this._owner.username;if(null===y||void 0===y?0:y.messageCode)switch(y.messageCode){case "COM_0046":B=c.default.substitute(w.default.GroupWidget.error.errorReassignGroupName,
{name:C,groupName:this.group.title});break;case "CONT_0014":B=c.default.substitute(w.default.folderDlg.invalid.itemExists,[z.title,this._folder.folderAttributeName||this._folder.title]);break;case "COM_1065":y=y.message&&y.message.match(/\d+/)[0];B=c.default.substitute(w.default.GroupWidget.error.groupMaxOtherUser,{name:C,numGroups:y});break;case "COM_1076":B=c.default.substitute(w.default.GroupWidget.error.errorReassignGroupOpenData,{name:C});break;case "COM_1084":B=c.default.substitute(w.default.GroupWidget.error.errorReassignGroupPrivileges,
{name:C});break;case "COM_1070":B=w.default.common.errors.COM_1070;break;case "CONT_0293":B=w.default.changeOwner.noSharedGroupAccess;break;default:w.default.common.errors[y.messageCode]&&(B=w.default.common.errors[y.messageCode]),403===y.code&&(B=w.default.errorWidget.accessDeniedResource)}return B};A.prototype._openOwnerSelect=function(y){null===y||void 0===y?void 0:y.preventDefault();(0,F.render)((0,F.h)(e.MemberPicker,f.__assign(f.__assign({},this.memberPickerProps),{showMemberPicker:!0,showCancel:!this._initialOpen})),
this.domNode.querySelector(".js-member-picker"));m.default.setVisibility(this._ownerArea,!1);this.group||(m.default.setVisibility(this._folderArea,!1),m.default.hideNode(this._folderPicker.domNode))};A.prototype._openFolderSelect=function(y){y&&y.preventDefault();this.group||(m.default.showNode(this._folderPicker.domNode),m.default.setVisibility(this._folderArea,!1),this._folderPicker.focus());m.default.setVisibility(this._ownerArea,!1)};A.prototype._folderSelectUpdate=function(y){this._folder=y;
m.default.hideNode(this._folderPicker.domNode);m.default.setVisibility(this._folderArea,!0);m.default.setVisibility(this._ownerArea,!0);this._populateCurrentFolder();this._folderEditButton&&this._folderEditButton.focus()};A.prototype._folderSelectCancel=function(){m.default.hideNode(this._folderPicker.domNode);m.default.setVisibility(this._folderArea,!0);m.default.setVisibility(this._ownerArea,!0);this._folderEditButton&&this._folderEditButton.focus()};A.prototype._memberSelectUpdate=function(y){var z=
this;this._owner=y;(0,F.render)((0,F.h)(e.MemberPicker,f.__assign(f.__assign({},this.memberPickerProps),{showMemberPicker:!1})),this.domNode.querySelector(".js-member-picker"));m.default.setVisibility(this._ownerArea,!0);(0,F.render)((0,F.h)(q.MemberThumb,{member:y,showName:!0}),this.domNode.querySelector(".js-member-thumb"));this._folder=null;this._ownerEditButton.focus();if(!this._initialOpen||this.group)this._primaryBtn.disabled=!1;this.group?this._fadeIn():this.canReassignOrgItems?(this._ownerEdit.classList.add("btn-disabled"),
y.folders?(this._populateCurrentFolder(),this._folderPicker.updateUser(y),this._ownerEdit.classList.remove("btn-disabled"),this._fadeIn()):y.getFolders().then(function(B){y.folders=B;z._owner.folders=B;z._populateCurrentFolder();z._folderPicker.updateUser(y);z._ownerEdit.classList.remove("btn-disabled");z._fadeIn()})):this.canReassignOwnItems&&(this._initialOpen||this._populateTransferFolder(),this._fadeIn());y.privileges?this._validateSelectedMember():this._fetchUser(y.username).then(function(B){z._owner=
B;!B.privileges&&z.canReassignOwnItems?z.canReassignItems():z._validateSelectedMember()});this._initialOpen&&this._openOwnerSelect();this._initialOpen&&!this.group&&this.canReassignOwnItems&&(this._initialOpen=!1)};A.prototype._memberSelectCancel=function(){(0,F.render)((0,F.h)(e.MemberPicker,f.__assign(f.__assign({},this.memberPickerProps),{showMemberPicker:!1})),this.domNode.querySelector(".js-member-picker"));this._ownerEdit.focus();m.default.setVisibility(this._ownerArea,!0);this._folder&&!this.group&&
m.default.setVisibility(this._folderArea,!0);this._ownerEditButton.focus();this.canReassignOwnItems&&this._populateTransferFolder();!this._owner.privileges&&this.canReassignOwnItems?this.canReassignItems():this._validateSelectedMember()};A.prototype._validateSelectedMember=function(){var y,z=this.domNode.querySelector(".js-member-select-error");this._ownerEdit.classList.remove("input-error");z.classList.remove("is-active");var B=!1,C=n.default.getUserRole(this._owner),H=C.isCustom(),E=!!this.group,
K=this._owner.username===this.portal.portalUser.username;E||!H||C.canCreateItem()||K||(B=w.default.changeOwner.warnings.cantOwnItems);(null===(y=this.group)||void 0===y?0:y.isOpenDataEnabled)&&!C.canDesignateOpenDataGroups()&&(B=w.default.changeOwner.warnings.cantOwnOpenData);y=C.isAdmin()||H&&C.canCreateUpdateCapableGroup();E&&this.group.isSharedOwnership&&!y&&(B=w.default.changeOwner.warnings.cantOwnAccessUpdateGroups);E&&H&&!C.canCreateGroup()&&(B=w.default.changeOwner.warnings.cantOwnGroups);
E||K||!this.canReassignOwnItems||!H||C.canReceiveUserItems()||(B=w.default.changeOwner.warnings.cantReceiveItems);B&&"string"===typeof B&&(z.innerHTML=B,z.classList.add("is-active"),this._ownerEdit.classList.add("input-error"))};A.prototype._populateTransferFolder=function(){m.default.setVisibility(this._folderArea,!0);m.default.setVisibility(this._folderEdit,!0);this._folderEdit.classList.add("change-owner-card--disabled");m.default.hideNode(this.domNode.querySelector(".js-folder-edit-button"));
var y=new Date,z=y.getDate(),B=y.getMonth()+1;z="".concat(10>z?"0":"").concat(z);B="".concat(10>B?"0":"").concat(B);y=y.getFullYear().toString();this.reassignFolderName="".concat(this.portal.portalUser.username,"_").concat(y,"_").concat(B,"_").concat(z);this.domNode.querySelector(".js-folder-name").innerHTML=this.reassignFolderName};A.prototype._populateCurrentFolder=function(){var y;m.default.setVisibility(this._folderArea,!0);m.default.setVisibility(this._folderEdit,!0);m.default.hideNode(this._folderPicker.domNode);
if(!this._folder){var z=this.items[0].ownerFolder,B=this.items.every(function(H){return H.ownerFolder===z}),C=p.default.find(this._owner.folders,function(H){return H.id===z});this._folder=B&&C?C:this._owner.folders[0]}this.domNode.querySelector(".js-folder-name").innerHTML=this._folder.title;B=x.default.inline[this._folder.id===this._owner.username?"home":"folder"]["16"];this.domNode.querySelector(".js-folder-icon").innerHTML=B;null===(y=this._folderEditButton)||void 0===y?void 0:y.focus();this._initialOpen&&
(m.default.setVisibility(this._folderArea,!1),this._initialOpen=!1)};return A=f.__decorate([(0,g.default)(b.default,d.default,a.default)],A)}()})},"arcgisonline/pages/organization/widgets/_overview":function(){define("require exports tslib arcgisonline/esriGeowConfig ../../pageUtil ../../portal/PortalItem ../../portal/PortalGroup ../../dijit/_CheckReadonlyMixin ../../dijit/Card ../../dijit/InfoTooltip ../../utils/alerts ../../utils/arrays ../../utils/culture ../../utils/dom ../../utils/icons ../../utils/formatters ../../utils/mapViewer ../../utils/number ../../utils/organization ../../utils/subscription ../../utils/strings ../../utils/verified ../../utils/storage ../doubleAssignedAPI ../_OrganizationActions ./_OverviewCard ./LicenseCardItem ./LicensesAvailable ./UserTypeName ./LicenseExpirationBadge ./SecurityAlert ./SqlAlert ./MigrateUserDefaultsAlert ./DataStoreOverlay ./DoubleAssignedOverlay ./onboard/OnboardBanner ../api ../components/SubscriptionExpiringModal ../../components/NewHomePageBanner/NewHomePageBanner ../../components/EmailVerification/UnverifiedEmailsModal ../../../sharing/util ../../../sharing/dijit/_LevelAwareMixin ../../../sharing/dijit/dialog/ManageSubscriptionDlg ../../../sharing/geow/Community ../../../sharing/geow/Licenses ../../../sharing/geow/Roles arcgisonline/tsutils/declareDecorator calcite-web/js/calcite-web dijit/a11yclick dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/_base/kernel dojo/dom-construct dojo/Deferred dojo/topic dojo/string dojo/hash dojo/query dojo/promise/all dojo/on dojo/debounce dojo/request dojo/json dojox/charting/Chart dojox/charting/plot2d/StackedAreas dojox/fx/easing esri/arcgis/Portal moment/moment preact dojo/i18n!../../../nls/org-settings dojo/i18n!../../../nls/organization dojo/text!./templates/_overviewMembersRow.html dojo/text!./templates/_openDataGroup.html dojo/text!./templates/_regionalDataHostingInfo.html dojo/text!./templates/_overview.html dojo/text!./templates/_featureDataStoreInfo.html arcgisonline/pages/components/RecycleOnboarding arcgisonline/pages/components/MapViewerPortalSwitchNotice dojo/_base/sniff dojox/charting/axis2d/Default".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E,K,I,L,M,N,P,R,Y,ja,aa,da,ra,ca,fa,la,ta,Q,T,O,Z,na,ia,X,ha,V,ea,U,ka,ma,sa,pa,Aa,za,Ba,ua,Fa,va,xa,Da,Ca,qa,W,ba,oa,wa,Ea,Ga){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importStar(l);
n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);D=f.__importDefault(D);F=f.__importDefault(F);A=f.__importDefault(A);y=f.__importDefault(y);z=f.__importDefault(z);B=f.__importDefault(B);C=f.__importDefault(C);H=f.__importDefault(H);E=f.__importDefault(E);K=f.__importDefault(K);I=f.__importDefault(I);L=f.__importDefault(L);M=f.__importDefault(M);P=f.__importDefault(P);R=f.__importDefault(R);Y=f.__importDefault(Y);ja=f.__importDefault(ja);
aa=f.__importDefault(aa);da=f.__importDefault(da);ra=f.__importDefault(ra);ca=f.__importDefault(ca);fa=f.__importDefault(fa);la=f.__importDefault(la);ta=f.__importDefault(ta);Q=f.__importDefault(Q);T=f.__importDefault(T);O=f.__importDefault(O);Z=f.__importDefault(Z);na=f.__importDefault(na);ia=f.__importDefault(ia);X=f.__importDefault(X);ha=f.__importDefault(ha);V=f.__importDefault(V);ea=f.__importDefault(ea);U=f.__importDefault(U);ka=f.__importDefault(ka);ma=f.__importDefault(ma);sa=f.__importDefault(sa);
pa=f.__importDefault(pa);Aa=f.__importDefault(Aa);za=f.__importDefault(za);Ba=f.__importDefault(Ba);ua=f.__importDefault(ua);Fa=f.__importDefault(Fa);va=f.__importDefault(va);Da=f.__importDefault(Da);Ca=f.__importDefault(Ca);qa=f.__importDefault(qa);W=f.__importDefault(W);ba=f.__importDefault(ba);oa=f.__importDefault(oa);wa=f.__importDefault(wa);Ea=f.__importDefault(Ea);Ga=f.__importDefault(Ga);return function(){function Ja(){this.baseClass="org-overview-tab";this.templateString=oa.default;this.widgetsInTemplate=
!0;this.icons=v.default;this.i18nSettings=Da.default;this.orgStrings=Ca.default;this.subscriptionId="";this._currentCreditsFontSize=6;this._currentWindowWidth=0;this._switchingTabsMessage="switching tabs";this.promises=[];this.emailsNoticeCookieKey="noEmailsNotice"}Ja.prototype.postMixInProperties=function(){this.inherited(arguments);this.subscriptionId=this.portal.isPortal?"":this.portal.subscriptionInfo.id;(0,ea.default)()||(0,ea.default)("#overview",!0)};Ja.prototype.postCreate=function(){var ya=
this,Ha,Ia,Ka,Ma,Na;this.inherited(arguments);this._rolesAPI=new fa.default;this._licensesAPI=new ca.default;this._isAdmin=this.portalUser.userRole.isAdmin();this._currentWindowWidth=window.innerWidth;this.portalUser.userRole.canManageCollaborations()&&this.portal.canHavePartnerCollab()&&this.initCollabOnboard();this.checkNotebookOnboard();this._organizationInfoCard=new A.default({cardClass:this.portal.isPortal?"info-card hide":"info-card",cardTitle:this.portal.name,cardTitleLink:"#settings",cardTitleLinkLabel:this.i18n.myOrganization.orgInfoCard.editSettings,
onCardTitleLinkClick:function(){ya.logClickEvent("info card","edit settings")}},this.domNode.querySelector(".js-org-info"));this._creditsCard=new A.default({cardClass:"credits-card ".concat(!this._isAdmin||this.portal.isPortal||"Developer Subscription"===(null===(Ha=this.portal.subscriptionInfo)||void 0===Ha?void 0:Ha.type)?"hide":""),cardTitle:this.i18n.myOrganization.creditsCard.creditsTitle,cardTitleLink:"#status",cardTitleLinkLabel:this.i18n.myOrganization.creditsCard.viewStatus,containerClass:"org-overview__credits-card-body",
onCardTitleLinkClick:function(){ya.logClickEvent("credits card","view status")}},this.domNode.querySelector(".js-credits-info"));(Ha=k.default.getBuyLink(this.portal))&&this._isAdmin&&!r.default.isTrialSubscription(null===(Ia=this.portal.subscriptionInfo)||void 0===Ia?void 0:Ia.type,this.portal.isPortal)&&"Trial Developer"!==(null===(Ka=this.portal.subscriptionInfo)||void 0===Ka?void 0:Ka.type)&&"Evaluation"!==(null===(Ma=this.portal.subscriptionInfo)||void 0===Ma?void 0:Ma.type)&&(Ia='\x3cspan class\x3d"org-overview__link-separator"\x3e|\x3c/span\x3e\x3ca href\x3d"'.concat(Ha,
'" class\x3d"font-size--1 avenir-regular overview-card-title-link js-buy-credits-link" target\x3d"_blank"\x3e').concat(this.i18n.myOrganization.creditsCard.buyCredits,"\x3c/a\x3e"),this._creditsCard.domNode.querySelector(".js-card-title-link").insertAdjacentHTML("afterend",Ia),this.own((0,ma.default)(this._creditsCard.domNode.querySelector(".js-buy-credits-link"),"click",function(){ya.logClickEvent("credits card","buy credits")})));this._adminContact=new A.default({cardClass:this._isAdmin?"hide":
"",cardTitle:this.i18n.myOrganization.adminCard.adminContacts,cardTitleLink:"?role\x3dorg_admin#members",cardTitleLinkLabel:this.i18n.myOrganization.adminCard.viewAll,onCardTitleLinkClick:function(){ya.logClickEvent("admin contacts card","view all")}},this.domNode.querySelector(".js-admin-contacts"));Ia=k.default.canManageMembers(this.portalUser);Ka=this.i18n.myOrganization.membersCard[Ia?"manageMembers":"viewMembers"];k.default.isMobile()&&(Ka=this.i18n.myOrganization.membersCard[Ia?"manage":"view"]);
this._membersCard=new A.default({cardClass:this._shouldPortalAdminCheck()?"":"hide",cardTitle:this.i18n.myOrganization.membersCard.membersTitle,cardTitleLink:"#members",cardTitleLinkLabel:Ka,onCardTitleLinkClick:function(){ya.logClickEvent("members card","manage members")}},this.domNode.querySelector(".js-members-info"));m.default.showHide(this._membersCard.domNode,null===(Na=this.portalUser.userRole)||void 0===Na?void 0:Na.canViewOrgUsers());this.portal.isPortal&&!c.default.emailVerificationEnabled||
this.checkUnverifiedEmailsNotice();this._newestMembersCard=new A.default({cardClass:"hide",cardTitle:this.i18n.myOrganization.membersCard.newestMembers,cardTitleLink:"#members",cardTitleLinkLabel:this.i18n.myOrganization.membersCard.viewMembers,onCardTitleLinkClick:function(){ya.logClickEvent("newest members card","view all members")}},this.domNode.querySelector(".js-newest-members"));this._licensesCard=new A.default({cardClass:"license-card",cardTitle:this.i18n.myOrganization.licensesCard.licensesTitle,
cardTitleLink:"#licenses",cardTitleLinkLabel:k.default.isMobile()?this.i18n.myOrganization.membersCard.manage:this.i18n.myOrganization.licensesCard.manageLicenses,onCardTitleLinkClick:function(){ya.logClickEvent("license card","manage add-on licenses")}},this.domNode.querySelector(".js-licenses-info"));this._openDataCard=new A.default({cardClass:"open-data-card hide",cardTitle:this.i18n.myOrganization.openDataCard.openDataTitle,cardTitleLink:"/home/groups.html?sortOrder\x3dasc\x26sortField\x3dtitle\x26start\x3d1\x26searchTerm\x3disopendata%3A%20true#organization",
cardTitleLinkLabel:this.i18n.myOrganization.adminCard.viewAll,onCardTitleLinkClick:function(){ya.logClickEvent("open data card","view all")}},this.domNode.querySelector(".js-open-data"));this.getLicenseTypes().then(function(){ya.render()});this.own((0,ma.default)(this._renewLink,"click",function(){ya.logClickEvent("info card","renew subscription");h.default.createSpecifiedDialog(da.default).showUpgrade(ya.portal)}),(0,ma.default)(this._purchaseLink,"click",function(){h.default.createSpecifiedDialog(da.default).showUpgrade(ya.portal)}),
(0,Q.default)(this._downloadActivity,function(){location.hash="#status";ha.default.publish("create-report",{reportSubType:"activity"});ya.logClickEvent("info card","create activity report")}),this.portal.watch("name",function(){ya._organizationInfoCard.setTitle(ya.portal.name);c.default.self.name=ya.portal.name}),(0,ma.default)(this.systemHealthLink,"click",function(){ya.logClickEvent("info card","system health")}));this._isAdmin&&(this.checkDoubleAssigned(),this.renderRecycleBinOnboarding());if(this._isAdmin||
this.portalUser.userRole.canManageWebsite())this.renderHomePageBanner(),this.checkRasterBanner(),this.renderMapViewerPortalSwitchBanner()};Ja.prototype.startup=function(){this.inherited(arguments);var ya=new X.default;this._initUI().then(function(Ha){ya.resolve()});return ya};Ja.prototype.destroy=function(){var ya=this;(0,xa.render)(null,this.domNode.querySelector(".js-new-home-page-banner"));(0,xa.render)(null,this.domNode.querySelector(".js-map-viewer-switch-banner"));(0,xa.render)(null,this.domNode.querySelector(".js-map-viewer-portal-switch-banner"));
this.inherited(arguments);this.promises.forEach(function(Ha){Ha&&!Ha.isFulfilled()&&Ha.cancel(ya._switchingTabsMessage)})};Ja.prototype.setEmailsNoticeCookie=function(){var ya=new Date((new Date).getTime()+31556926E3),Ha=-1<window.location.hostname.indexOf("esri.com")?".esri.com":".arcgis.com";D.default.setCookie(this.emailsNoticeCookieKey,"true",{expires:ya,path:"/",domain:Ha,sameSite:"Strict"})};Ja.prototype.logClickEvent=function(ya,Ha){var Ia;null===(Ia=this.telemetry)||void 0===Ia?void 0:Ia.logEvent({category:"overview card link",
action:"click",attribute:ya,label:Ha})};Ja.prototype.checkUnverifiedEmailsNotice=function(){return f.__awaiter(this,void 0,void 0,function(){var ya,Ha,Ia,Ka,Ma,Na,La,Pa,Oa=this,Qa;return f.__generator(this,function(Ra){switch(Ra.label){case 0:return(ya=D.default.getCookie(this.emailsNoticeCookieKey))?[2]:null!==(Qa=this.portalUser.userRole)&&void 0!==Qa&&Qa.canUpdateUsers()?[4,(0,N.getUnverifiedEmailsCount)(this.portal)]:[3,2];case 1:Ha=Ra.sent(),Ia=this.i18n.myOrganization.membersCard.unverifiedEmailNotice,
Ka=Ia.title,Ma=Ia.message,Ha&&(Na=this.domNode.querySelector("#unverified-emails-notice"),this.domNode.querySelector("#unverified-emails-notice-title").innerHTML=V.default.substitute(Ka,{count:Ha}),this.domNode.querySelector("#unverified-emails-notice-message").innerHTML=Ma,Na.open=!0,this.portal.canSignInIDP&&(Na.closable=!0,Na.addEventListener("calciteNoticeClose",function(){Oa.setEmailsNoticeCookie()})),La=this.domNode.querySelector("#unverified-modal"),Pa=this.domNode.querySelector("#unverified-member-report-btn"),
this._isAdmin&&m.default.showNode(Pa),this.own((0,ma.default)(this.domNode.querySelector("#unverified-emails-btn"),"click",function(){Oa.logClickEvent("members card","view unverified members");(0,xa.render)((0,xa.h)(Y.default,{portal:Oa.portal,portalUser:Oa.portalUser,onClose:function(){(0,xa.render)(null,La)}}),La)}),(0,ma.default)(Pa,"click",function(){Oa.logClickEvent("members card","create a member report");location.hash="#status";ha.default.publish("create-report",{reportSubType:"users"})}))),
Ra.label=2;case 2:return[2]}})})};Ja.prototype.renderHomePageBanner=function(){this.portal.isPortal&&k.default.hasLegacyHomePageEnabled(this.portal)&&(0,xa.render)((0,xa.h)(R.default,{texts:this.i18n.myOrganization.overviewTab.newHomePageBanner,portal:this.portal,telemetry:this.telemetry}),this.domNode.querySelector(".js-new-home-page-banner"))};Ja.prototype.renderRecycleBinOnboarding=function(){this.portal.recycleBinEnabled&&(0,xa.render)((0,xa.h)(Ea.default,{orgOnboarding:!0}),document.querySelector(".js-recycle-onboarding"))};
Ja.prototype.renderMapViewerPortalSwitchBanner=function(){var ya=this,Ha,Ia=l.default.determineOrgMapViewer({mapViewer:null===(Ha=this.portal.portalProperties)||void 0===Ha?void 0:Ha.mapViewer,created:this.portal.created,subscriptionInfo:this.portal.subscriptionInfo,isPortal:this.portal.isPortal});this.portal.isPortal&&Ia===l.MapViewerType.Classic&&(0,xa.render)((0,xa.h)(Ga.default,{mapViewer:Ia,isPortal:this.portal.isPortal,onUpdateClick:function(){ya.page.goToMapSettings()}}),document.querySelector(".js-map-viewer-portal-switch-banner"))};
Ja.prototype.checkRasterBanner=function(){return f.__awaiter(this,void 0,void 0,function(){var ya,Ha,Ia,Ka,Ma,Na,La,Pa,Oa,Qa,Ra,Sa=this;return f.__generator(this,function(Ua){switch(Ua.label){case 0:return Ua.trys.push([0,2,,3]),[4,h.default.fetchAllResources("".concat(this.portal.url,"community/groups"),{q:"orgid:".concat(this.portal.id," AND (access:org OR access:public)")})];case 1:ya=Ua.sent();Ha=this.portal.basemapGalleryGroupQuery;if(!Ha||null===ya||void 0===ya||!ya.length)return[2];Ia=void 0;
Ka=Ha.indexOf('title:"');Ma=Ha.indexOf("id:");-1<Ka?(Na=Ha.substring(Ka+7),Pa=Ha.indexOf("owner:"),Na=Na.substring(0,Na.lastIndexOf('"')),-1<Pa&&(La=Ha.substring(Pa+6)),Na&&La&&(Oa=ya.filter(function(Va){return Va.title===Na&&Va.owner===La})[0])&&(Na=Oa.altTitle||Oa.title,Ia=Oa),!this.portal.isPortal&&Ha.indexOf("owner:esri")&&(Ia=void 0)):-1<Ma&&(Qa=Ha.substring(Ma+3),(Oa=ya.filter(function(Va){return Va.id===Qa})[0])&&(Ia=Oa));(Ra=!Ia)&&!this.portal.useVectorBasemaps&&k.default.shouldShowOnboard("raster-basemaps-banner",
new Date("September 22, 2022"))&&(m.default.showNode(this.rasterBanner),this.own((0,ma.default)(this.updateRasterBtn,"click",function(){return f.__awaiter(Sa,void 0,void 0,function(){return f.__generator(this,function(Va){switch(Va.label){case 0:return Va.trys.push([0,2,,3]),[4,ja.default.request({url:"".concat(c.default.restBaseUrl,"portals/self/update"),content:{useVectorBasemaps:!0}},{usePost:!0})];case 1:return Va.sent(),t.default.showAlert("success",this.i18n.myOrganization.overviewTab.rasterBanner.success),
this.portal.useVectorBasemaps=!0,m.default.hideNode(this.rasterBanner),[3,3];case 2:return Va.sent(),t.default.showAlert("error",this.i18n.myOrganization.overviewTab.rasterBanner.error),[3,3];case 3:return[2]}})})}),(0,ma.default)(this.closeRasterWarningBtn,"click",function(){k.default.createOnboardCookie("raster-basemaps-banner");m.default.hideNode(Sa.rasterBanner)})));return[3,3];case 2:return Ua.sent(),[3,3];case 3:return[2]}})})};Ja.prototype.checkDoubleAssigned=function(){return f.__awaiter(this,
void 0,void 0,function(){function ya(Qa,Ra,Sa){Qa.forEach(function(Ua){if(Ua.itemId===Ra.id){var Va=Ka[Ua.key];Va?Va.userTypes.push(Sa):Ka[Ua.key]={key:Ua.key,itemId:Ua.itemId,name:Ua.title,userTypes:[Sa],isPro:Ua.isPro}}})}var Ha,Ia,Ka,Ma,Na,La,Pa,Oa;return f.__generator(this,function(Qa){switch(Qa.label){case 0:return[4,this._licensesAPI.getLicensedEntitlements()];case 1:return Ha=Qa.sent().filter(function(Ra){return!Ra.isExtension}),[4,this._licensesAPI.getLicenseTypes()];case 2:return Ia=Qa.sent().userLicenseTypes,
Ka={},Ia.forEach(function(Ra){Ra.apps.forEach(function(Sa){Sa.isAppBundle?Sa.apps.forEach(function(Ua){ya(Ha,Ua,Ra)}):ya(Ha,Sa,Ra)})}),[4,(0,G.getDoubleAssignUsers)(Ka)];case 3:Ma=Qa.sent();if(Na=0<Object.keys(Ma).length){Object.keys(Ma).forEach(function(Ra){var Sa=Ma[Ra];Sa.response&&(Sa.response.results=Sa.response.results.filter(function(Ua){var Va,Ya,Wa=Ia.find(function(Ta){return Ta.id===Ua.userLicenseTypeId}),$a=null===(Ya=null===(Va=Wa.apps.find(function(Ta){return"ArcGIS Pro"===Ta.title}))||
void 0===Va?void 0:Va.entitlements)||void 0===Ya?void 0:Ya[0];if(Wa&&$a){if("desktopBasicN"===Ra)return!0;if("desktopAdvN"===Ra)return $a===Ra;if("desktopStdN"===Ra)return $a===Ra||"desktopAdvN"===$a}}),Sa.response.results.forEach(function(Ua){Ua.userLicenseTypeName=Ia.filter(function(Va){return Va.id===Ua.userLicenseTypeId})[0].name}))});La=Object.keys(Ma).some(function(Ra){var Sa,Ua;return 0<(null===(Ua=null===(Sa=Ma[Ra].response)||void 0===Sa?void 0:Sa.results)||void 0===Ua?void 0:Ua.length)});
if(!La)return[2];Pa=null===(Oa=this.domNode)||void 0===Oa?void 0:Oa.querySelector(".js-double-assigned");m.default.showNode(Pa);this.own((0,ma.default)(this.domNode.querySelector(".js-open-double-assigned-btn"),"click",function(){(new L.default({doubleAssignedRecords:Ma,userLicenseTypes:Ia})).open()}),ha.default.subscribe("double-assinged/refresh",function(Ra){Ma=Ra}),ha.default.subscribe("double-assigned/fixed",function(){m.default.hideNode(Pa)}))}return[2]}})})};Ja.prototype.registerActions=function(){h.default.registerItemActions(this,
this.domNode,F.default,this.page,this.actionGuard.bind(this))};Ja.prototype.actionGuard=function(){return this.checkReadonly()};Ja.prototype.initCollabOnboard=function(){var ya=this,Ha=k.default.shouldShowOnboard("overview-collab-onboard",new Date("June, 1, 2021"));m.default.showHide(this.collabOnboard,Ha);this.own((0,ma.default)(this.collabBtn,"click",function(){ha.default.publish("collaborations-settings/open")}),(0,ma.default)(this.dismissCollabOnBoard,"click",function(){m.default.hideNode(ya.collabOnboard);
k.default.createOnboardCookie("overview-collab-onboard")}))};Ja.prototype._shouldPortalAdminCheck=function(){return this.portalUser.role&&this._isAdmin&&this.portal.isPortal};Ja.prototype._portalAdminCheck=function(){var ya=this,Ha=new X.default;if(this._shouldPortalAdminCheck()){var Ia=ja.default.getPortalAdminBaseUrl(),Ka=ja.default.formatPortalOrgUrl(Ia,"/license",this.portal.id);(0,ka.default)({licenseInfo:ja.default.request({url:Ka,content:{ts:(new Date).getTime()}},{useProxy:c.default.isDebug}),
portalAdmin:ja.default.request({url:"".concat(Ia,"/")},{useProxy:c.default.isDebug})}).then(function(Ma){ya._licenseInfo=Ma.licenseInfo;Ha.resolve()})}else Ha.resolve();return Ha};Ja.prototype._populateAdminView=function(){this._populateLicenseCard();this._populateCreditsCard();this.portal.isPortal||this._populateOrganizationCard();this._populateMembersCard()};Ja.prototype._populateNonAdminView=function(){k.default.canLoadLicensesUI(this.portalUser)?this._populateLicenseCard():this._licensesCard.hide();
this._creditsCard.hide();this.portal.isPortal||(this._populateOrganizationCard(),this._populateOpenDataCard());k.default.canLoadMembersCard(this.portalUser)?this._populateMembersCard():this.portalUser.userRole.canViewOrgUsers()&&(this._membersCard.hide(),this._populateNewestMembersCard());this.portal.contacts&&this._populateAdminContact()};Ja.prototype._initUI=function(){var ya=new X.default;this.renderAPIKeysCard();this._initHandlers();ya.resolve();return ya};Ja.prototype.showGeneralError=function(ya,
Ha){void 0===Ha&&(Ha=this.i18n.common.errorTitle);h.default.createConfirmationDialog({strings:{title:Ha,description:ya},hideCancel:!0,autoCloseOnOk:!0,renderHtmlDescription:!0})};Ja.prototype._initHandlers=function(){var ya=this;this.own(ha.default.subscribe("inlineEdit/submit",function(Ha){var Ia=Ha.prop;if("name"===Ia){var Ka=ya.portal.name,Ma=Aa.default.stringify(ya.portal.rotatorPanels);Ha.rotatorPanels=w.default.replaceAll(Ma,Ka,Ha.name)}delete Ha.prop;ya.page.updatePortal(Ha,!0).then(function(){ha.default.publish("inlineEdit/"+
Ia+"/done",Ha.name);ya.page.hideErrors()},function(Na){"name"===Ia&&ha.default.publish("inlineEdit/name/oldValue",ya.portal.name);"ORG_1141"===(null===Na||void 0===Na?void 0:Na.messageCode)?ya.showGeneralError(ya.i18n.myOrganization.generalTab.cannotChangeVerifiedName):"GWM_0021"===(null===Na||void 0===Na?void 0:Na.messageCode)?ya.showGeneralError(Na.message):ya.showGeneralError(ya.i18n.myOrganization.error.unableToUpdateProperty)})}),(0,ma.default)(window,"resize",(0,sa.default)(function(){ya.creditsChart&&
(ya.creditsChart.resize(),window.innerWidth<ya._currentWindowWidth?ya._shrinkCreditsFontSize():ya._growCreditsFontSize(),ya._currentWindowWidth=window.innerWidth)},500)),(0,Q.default)(this._maintenanceLink,this._maintenanceLinkClick.bind(this)),this.portal.watch("thumbnailUrl",function(){ya.domNode.querySelector(".org-thumb-medium").src=ya.portal.thumbnailUrl||"./images/group-no-image.png"}),ha.default.subscribe("pending/refresh",this._pendingRefresh.bind(this)),ha.default.subscribe("members/refresh",
this._refreshMembersAndLicensesCards.bind(this)))};Ja.prototype._maintenanceLinkClick=function(){this.showGeneralError(this._maintenanceMessage.description,this.i18n.myOrganization.systemMaintenance)};Ja.prototype._setupFeatureDataStoreInfoPopup=function(){var ya='\x3cspan class\x3d"esriItemLinks"\x3e\x3ca href\x3d"'+(this.portal.helpBase+(this.portal.helpMap.m["120001241"]||""))+'" target\x3d"_blank"\x3e';switch(this.portal.subscriptionInfo.dataStoreLevel||"S"){case "M1":var Ha=this.i18n.myOrganization.featureDSM1;
var Ia=V.default.substitute(this.i18n.myOrganization.featureDSM1Desc,{linkStart:ya,linkEnd:"\x3c/a\x3e\x3c/span\x3e"});break;case "M2":Ha=this.i18n.myOrganization.featureDSM2;Ia=V.default.substitute(this.i18n.myOrganization.featureDSM2Desc,{linkStart:ya,linkEnd:"\x3c/a\x3e\x3c/span\x3e"});break;case "M3":Ha=this.i18n.myOrganization.featureDSM3;Ia=V.default.substitute(this.i18n.myOrganization.featureDSM3Desc,{linkStart:ya,linkEnd:"\x3c/a\x3e\x3c/span\x3e"});break;case "M4":Ha=this.i18n.myOrganization.featureDSM4;
Ia=V.default.substitute(this.i18n.myOrganization.featureDSM4Desc,{linkStart:ya,linkEnd:"\x3c/a\x3e\x3c/span\x3e"});break;case "S":Ha=this.i18n.myOrganization.standardFeatureDS;Ia=V.default.substitute(this.i18n.myOrganization.standardFeatureDSDesc,{linkStart:ya,linkEnd:"\x3c/a\x3e\x3c/span\x3e"});break;default:Ha=this.i18n.myOrganization.standardFeatureDS,Ia=V.default.substitute(this.i18n.standardFeatureDSDesc.myOrganization,{linkStart:ya,linkEnd:"\x3c/a\x3e\x3c/span\x3e"})}ya=V.default.substitute(wa.default,
{dataStoreName:Ha,currentLabel:this.i18n.myOrganization.currentFeatureDS,description:Ia,learnMore:ya+this.i18n.myOrganization.learnMoreDS+"\x3c/a\x3e\x3c/span\x3e"});new q.default({title:this.i18n.myOrganization.featureDS,content:ya,buttonAriaLabel:this.i18n.myOrganization.orgInfoCard.moreFeatureDataStore,baseClass:"org-overview__feature-toolip"},this.domNode.querySelector(".js-feature-ds-info"))};Ja.prototype._setupRegionalDataHostingInfoPopup=function(){var ya=this;k.default.getSubscriptionInfo().then(function(Ha){Ha=
Da.default.regionalDataHosting.hostingLocations[(null===Ha||void 0===Ha?void 0:Ha.storageRegion)||"us1"];var Ia="".concat(ya.portal.helpBase).concat(ya.portal.helpMap.m["120001913"]||"");Ia=V.default.substitute(ba.default,f.__assign(f.__assign({},Da.default.regionalDataHosting),{helpUrl:Ia,hostingLocation:Ha,icons:v.default}));ya._regionalHostingLocation.textContent=Ha;ya._regionalDataHostingInfo=new q.default({title:Da.default.regionalDataHosting.title,content:Ia,buttonAriaLabel:Da.default.regionalDataHosting.learnMore,
dialogClasses:["org-overview__regional-data-hosting"]},ya._regionalDataHostingInfo)})};Ja.prototype._getSystemStatuses=function(){var ya=this,Ha=c.default.agoStatusUrl;Ha&&(0,pa.default)(Ha,{headers:{"X-Requested-With":null}}).then(function(Ia){try{var Ka=JSON.parse(Ia),Ma=ya.i18n.myOrganization.orgInfoCard,Na="";Ka.messages.some(function(La){var Pa=(0,va.default)(La.startdate).toDate().getTime(),Oa=(0,va.default)(La.enddate).toDate().getTime(),Qa=(new Date).getTime();Pa<=Qa&&Oa>Qa&&(ya._maintenanceMessage=
La);return void 0!==ya._maintenanceMessage});ya._maintenanceMessage&&ya._maintenanceContainer.classList.add("is-active");Ka.services.forEach(function(La){0<La.events.length&&La.events.forEach(function(Pa){if("True"!==Pa.resolved){var Oa="";switch(Pa.type){case "Informational message":Oa=Ma.informationalMessage;break;case "Performance issues":Oa=Ma.performanceIssues;break;case "Service disruption":Oa=Ma.serviceDisruption}Na+="\x3cp class\x3d'icon-ui-close icon-ui-red trailer-0' \x3e"+La.name+" ("+
Oa+")\x3c/p\x3e"}})});0===Na.length&&(Na="\x3cp class\x3d'icon-ui-check-mark icon-ui-green trailer-0'\x3e"+ya.i18n.myOrganization.orgInfoCard.allSystemsOperational+"\x3c/p\x3e");ia.default.place(Na,ya._systemHealth)}catch(La){}})};Ja.prototype._computePortalExpirationDate=function(){var ya=this,Ha,Ia;(null===(Ha=this._licenseInfo)||void 0===Ha?0:Ha.features)&&this._licenseInfo.features.forEach(function(Ka){Ka.level===ya.LICENSE_LEVELS.TWO&&(!Ia||Ia&&Ka.expiration<Ia)&&(Ia=Ka.expiration)});return Ia};
Ja.prototype._checkOnlineSubscriptionExpiration=function(ya){var Ha=Date.now();Ha=(0,va.default)(new Date(ya)).diff(Ha,"days");var Ia=D.default.getCookie("ago_sub_expiring_viewed"),Ka=this.portalUser.userRole.canManageCredits()||this.portalUser.userRole.canManageLicenses();if(0<Ha&&15>=Ha&&Ka&&!Ia){Ha=1===Ha?this.i18n.myOrganization.subscriptionStatus.expiresTomorrow:V.default.substitute(this.i18n.myOrganization.subscriptionStatus.expiresInDays,{num:Ha});Ka='\x3ca target\x3d"_blank" href\x3d"'.concat("http://www.esri.com/about-esri/offices/",
'"\x3e');var Ma=this.i18n.myOrganization.subscriptionStatus;Ia=Ma.subscriptionExpiring;Ma=Ma.closePermanently;var Na=this.i18n.common,La=Na.ok;Na=Na.close;var Pa=V.default.substitute(this.i18n.manageSubscriptionDlg.upgradeInsideUS,{officeLinkStart:Ka,officeLinkEnd:"\x3c/a\x3e\x3c/span\x3e"});Ka=V.default.substitute(this.i18n.manageSubscriptionDlg.upgradeOutsideUS,{officeLinkStart:Ka,officeLinkEnd:"\x3c/a\x3e\x3c/span\x3e"});var Oa=document.createElement("div");Oa.id="subscription-expiring-modal";
document.body.append(Oa);var Qa=function(){(0,xa.render)(null,Oa)};(0,xa.render)((0,xa.h)(P.default,{strings:{title:Ia,expiresIn:Ha,upgradeInsideUS:Pa,upgradeOutsideUS:Ka,closePermanently:Ma,ok:La,close:Na},onOk:function(Ra){Ra&&D.default.setCookie("ago_sub_expiring_viewed",!0,{expires:ya,path:"/",domain:window.location.hostname,sameSite:"Strict"});Qa()},onCancel:Qa}),Oa)}};Ja.prototype._populateOrganizationCard=function(){return f.__awaiter(this,void 0,void 0,function(){var ya,Ha,Ia,Ka,Ma,Na,La,
Pa,Oa,Qa,Ra,Sa,Ua,Va,Ya=this;return f.__generator(this,function(Wa){switch(Wa.label){case 0:this._organizationInfoCard.showContent();ya=p.default.fullDate(this.portal.created.getTime());Ha=new Date;this._createdDate.innerHTML=ya;this.portal.isPortal&&!this._isAdmin?(m.default.hideNode(this._renewalDateContainer),m.default.hideNode(this._mobileRenewalDateContainer)):(Ia=this.portal.isPortal?this._computePortalExpirationDate():void 0,Ka=this.portal.isPortal?new Date(Ia):new Date(this.portal.subscriptionInfo.expDate),
Ma=this.i18n.myOrganization.orgInfoCard[this.portal.isPortal?"expirationDate":"renewalDate"],Na=p.default.fullDate(Ka.getTime()),La=this.portal.isPortal?"":this.portal.subscriptionInfo.type,Pa="Trial"===La||"Trial Press"===La||"Evaluation"===La,this._mobileRenewalLabel.innerHTML=this._renewalDateLabel.innerHTML=Ma,this._mobileRenewalDate.innerHTML=this._renewalDate.innerHTML=Na,(Oa=this.portal.isPortal?20>=(0,va.default)(Ka).diff(Ha,"days"):15>=(0,va.default)(Ka).diff(Ha,"days"))?(this._renewalDate.classList.add("text-red"),
this.portal.isPortal||u.default.includes("Trial;Trial Press;Evaluation;Trial Developer;Developer;Developer Subscription".split(";"),this.portal.subscriptionInfo.type)||this._checkOnlineSubscriptionExpiration(this.portal.subscriptionInfo.expDate)):this._renewalDate.classList.add("text-dark-green"),m.default.showHide(this._renewalDateDot,!this.portal.isPortal),this.portal.isPortal?(Oa&&(this._licenseWarningMessage.innerHTML=V.default.substitute(this.i18n.myOrganization.orgInfoCard.licenseWarningMessage,
{linkStart:'\x3ca href\x3d"'+this.portal.helpBase+this.portal.helpMap.m["120000802"]+'" target\x3d"_blank"\x3e',linkEnd:"\x3c/a\x3e"}),m.default.showNode(this._licenseWarningContainer)),this._renewalDateLabel.classList.add("avenir-bold"),Qa=this._portalExpirationInfo,m.default.showNode(Qa),this._portalExpirationInfo=new q.default({content:this.i18n.myOrganization.orgInfoCard.portalExpirationInfo},Qa)):"Developer Subscription"!==La?"active"===this.portal.subscriptionInfo.state?(Pa&&(this._renewLink.innerHTML=
this.i18n.myOrganization.manageSubscriptionLabel),m.default.showNodes([this._renewalDateDot,this._renewLink])):Pa?m.default.showNodes([this._renewalDateDot,this._purchaseLink]):m.default.showNodes([this._renewalDate,this._renewLink]):m.default.hideNode(this._renewalDateDot));this._isAdmin?m.default.showHide(this._createdDateContainer,!this.portal.isPortal):(this._organizationInfoCard.switchCardClass("org-card-viewer"),this._organizationInfoCard.hideLink(),m.default.hideNode(this._organizationDatesContainer));
this.portal.isPortal&&m.default.hideNode(this._organizationIdContainer);if(!this._isAdmin||this.portal.isPortal)return[3,2];Ra=this.portal.subscriptionInfo.dataStoreLevel||"S";Sa=void 0;switch(Ra){case "M1":Sa=this.i18n.myOrganization.featureDSM1;break;case "M2":Sa=this.i18n.myOrganization.featureDSM2;break;case "M3":Sa=this.i18n.myOrganization.featureDSM3;break;case "M4":Sa=this.i18n.myOrganization.featureDSM4;break;case "S":Sa=this.i18n.myOrganization.standardFeatureDS;break;default:Sa=this.i18n.myOrganization.standardFeatureDS}document.body.classList.contains("dj_a11y");
this._featureDSLevel.innerHTML=Sa;m.default.showNode(this._featureDSContainer);m.default.showNode(this._regionalDataHostingContainer);m.default.showNode(this._downloadActivity);this.own((0,ma.default)(this.viewDSBtn,"click",function(){Ya.logClickEvent("info card","feature data store");(new I.default({portal:Ya.portal})).open()}));return this.datastoreDetailsEnabled()?[4,this.getUsedStoragePercent()]:[3,2];case 1:Ua=Wa.sent(),Va=document.documentElement.lang,this._featureDSLevel.innerHTML=V.default.substitute(this.i18n.myOrganization.orgInfoCard.featureDataStoreUsed,
{plan:Sa,percent:"".concat(Ua).concat("he"!==Va?"\x26rlm;":"")}),75>Ua?m.default.hideNode(this.featureDSIcon):(75<=Ua&&95>Ua?(this.featureDSIcon.icon="exclamation-mark-triangle-f",this.featureDSIcon.classList.add("data-store-storage--medium-usage")):(this.featureDSIcon.icon="exclamation-mark-circle-f",this.featureDSIcon.classList.add("data-store-storage--high-usage")),m.default.showNode(this.featureDSIcon)),Wa.label=2;case 2:return[2]}})})};Ja.prototype._populateCreditsCard=function(){return f.__awaiter(this,
void 0,void 0,function(){function ya(Za){return Za.map(function(bb){return bb.credits})}function Ha(Za){return 0===Za.length?0:Math.max.apply(null,Za)}var Ia,Ka,Ma,Na,La,Pa,Oa,Qa,Ra,Sa,Ua,Va,Ya,Wa,$a,Ta=this,Xa;return f.__generator(this,function(Za){switch(Za.label){case 0:return this.portal.isPortal||!this._isAdmin||"Developer Subscription"===(null===(Xa=this.portal.subscriptionInfo)||void 0===Xa?void 0:Xa.type)?[3,3]:[4,ja.default.request({url:"".concat(c.default.restBaseUrl,"portals/self/users?start\x3d1\x26num\x3d0")})];
case 1:return Ia=Za.sent(),[4,ja.default.request({url:"".concat(c.default.restBaseUrl,"/search"),content:{q:"orgid:".concat(this.portal.id),num:0}})];case 2:return Ka=Za.sent(),Ma=(null===Ia||void 0===Ia?void 0:Ia.total)||0,Na=(null===Ka||void 0===Ka?void 0:Ka.total)||0,La=100<=Ma&&1E4<=Na?7:30,7===La&&(Pa=this.domNode.querySelector(".js-credits-days-label"),Pa.title=Pa.textContent=this.i18n.myOrganization.creditsCard.lastSevenDays),Oa=new Date,Qa=Oa.getTime(),Ra=Oa.setDate(Oa.getDate()-La),Sa=new Date,
Ua=Sa.setHours(Sa.getHours()-24),Va="".concat(c.default.restBaseUrl,"portals/").concat(this.portal.id,"/usage"),Ya=ja.default.request({url:Va,content:{f:"json",startTime:Ra,endTime:Qa,period:"1d",vars:"credits",groupby:"stype,etype"}}),Wa=ja.default.request({url:Va,content:{f:"json",startTime:Ua,endTime:Qa,period:"1h",vars:"credits",groupby:"stype,etype"}}),$a=(0,ka.default)({lastThirtyDays:Ya,lastTwentyFourHours:Wa}),this.promises.push($a),this._creditsCard.show(),$a.then(function(bb){var db=Ta._getCreditsUsage(bb.lastThirtyDays.data),
cb=ya(db.creditsByType.storage),gb=ya(db.creditsByType.analytics),ab=ya(db.creditsByType.subscriber),hb=Ta.page.isLeftToRight()?"ltr":"rtl";bb=Ta._getLastTwentyFourHoursUsage(bb.lastTwentyFourHours.data);var fb={};db.creditsByType.storage.forEach(function(jb){var kb=p.default.fullDate(jb.timestamp);fb[kb]||(fb[kb]={});fb[kb].storage=jb.credits});db.creditsByType.analytics.forEach(function(jb){var kb=p.default.fullDate(jb.timestamp);fb[kb]||(fb[kb]={});fb[kb].analytics=jb.credits});db.creditsByType.subscriber.forEach(function(jb){var kb=
p.default.fullDate(jb.timestamp);fb[kb]||(fb[kb]={});fb[kb].subscriber=jb.credits});var ib=Ta.domNode.querySelector(".js-chart-caption-body"),lb="";Object.keys(fb).forEach(function(jb){lb+="\x3ctr\x3e\x3ctd\x3e".concat(jb,"\x3c/td\x3e\x3ctd\x3e").concat(fb[jb].storage||"0","\x3c/td\x3e\x3ctd\x3e").concat(fb[jb].analytics||"0","\x3c/td\x3e\x3ctd\x3e").concat(fb[jb].subscriber||"0","\x3c/td\x3e\x3c/tr\x3e")});ib.innerHTML=lb;Ta._creditsCard&&Ta._creditsCard.showContent();Ta._availableCredits.innerHTML=
n.default.format(Math.round(100*Ta.portal.availableCredits)/100,2);0>Ta.portal.availableCredits&&(Ta._availableCredits.classList.remove("text-dark-green"),Ta._availableCredits.classList.add("text-red"));Ta._lastThirtyDaysUsage.innerHTML=n.default.format(db.lastThirtyDaysUsage,2);Ta._lastDayUsage.innerHTML=n.default.format(bb,2);Ta._shrinkCreditsFontSize();db=Ta._creditsCard.containerNode.clientHeight-247;Ta._chartWrapper.style.height="".concat(100<=db?db:100,"px");db=Ha(cb);bb=Ha(gb);ib=Ha(ab);db=
db+bb+ib;Ta.creditsChart=new za.default("creditsChart");Ta.creditsChart.setDir(hb).addPlot("default",{type:Ba.default,animate:{duration:300,easing:ua.default.linear}}).addAxis("y",{vertical:!0,leftBottom:Ta.page.isLeftToRight(),fixLower:"major",fixUpper:"major",includeZero:!0,majorTick:{length:0,color:"#fff"},minorTicks:!1,fontColor:"#6e6e6e",stroke:"#fff",max:db,labelFunc:function(jb,kb){-1<jb.indexOf("e-")||-1<jb.indexOf("e,-")?(jb=kb.toString(),-1!==jb.indexOf("e")&&(jb=parseInt(jb.split("-")[1],
10),kb=kb.toLocaleString(na.default.locale,{minimumFractionDigits:jb}))):kb=jb;return kb}}).addSeries("Storage",cb,{stroke:"#5A9359",fill:"#DEE9DE"}).addSeries("Analytics",gb,{stroke:"#0071AB",fill:"#B3D5E6"}).addSeries("Subscriber",ab,{stroke:"#E16731",fill:"#F6D2C2"}).render();Ta._creditsStartDate.innerHTML=p.default.fullDate((new Date(Ra)).getTime());Ta._creditsEndDate.innerHTML=p.default.fullDate((new Date(Qa)).getTime())},function(bb){Ta._creditsCard&&bb!==Ta._switchingTabsMessage&&(Ta._availableCredits.innerHTML=
n.default.format(Math.round(100*Ta.portal.availableCredits)/100,2),Ta._creditsCard.showContent(),Ta._creditsCard.domNode.classList.add("has-credits-error"))}),[3,4];case 3:m.default.hideNode(this._creditsCard.domNode),Za.label=4;case 4:return[2]}})})};Ja.prototype._isCreditsOverflow=function(){var ya=!1;(0,U.default)(".js-credits-container").forEach(function(Ha){Ha.scrollWidth>Ha.clientWidth&&(ya=!0)});return ya};Ja.prototype._setCreditsFontSize=function(ya){(0,U.default)(".js-credits-value").replaceClass("font-size-"+
ya,"font-size-"+this._currentCreditsFontSize);this._currentCreditsFontSize=ya};Ja.prototype._shrinkCreditsFontSize=function(){this._isCreditsOverflow()&&1!==this._currentCreditsFontSize&&(this._setCreditsFontSize(this._currentCreditsFontSize-1),this._shrinkCreditsFontSize())};Ja.prototype._growCreditsFontSize=function(){this._isCreditsOverflow()||6===this._currentCreditsFontSize?this._shrinkCreditsFontSize():(this._setCreditsFontSize(this._currentCreditsFontSize+1),this._growCreditsFontSize())};Ja.prototype._getLastTwentyFourHoursUsage=
function(ya){var Ha=this,Ia=0;ya.forEach(function(Ka){Ia+=Ha._sumCreditsUsage(Ka.credits)});return Ia};Ja.prototype._getCreditsUsage=function(ya){var Ha=this,Ia=[],Ka=0,Ma=0,Na=0,La=0;ya.forEach(function(Oa){var Qa=Oa.stype,Ra=Oa.etype;if("geocodecnt"===Ra&&"geocode"===Qa||"svcusg"===Ra&&"geoenrich"===Qa||"svcusg"===Ra&&"naservicearea"===Qa||"svcusg"===Ra&&"nasimpleroute"===Qa||"svcusg"===Ra&&"spanalysis"===Qa||"svcusg"===Ra&&"natsproute"===Qa||"svcusg"===Ra&&"nacfroute"===Qa||"svcusg"===Ra&&"navrproute"===
Qa||"svcusg"===Ra&&"elevanalysis"===Qa||"svcusg"===Ra&&"nalademandpoint"===Qa||"svcusg"===Ra&&"naodresult"===Qa)Ia.push({type:"analytics",usage:Oa.credits}),Ka+=Ha._sumCreditsUsage(Oa.credits);else if("stg"===Ra)Ia.push({type:"storage",usage:Oa.credits}),Ma+=Ha._sumCreditsUsage(Oa.credits);else if("landscapeimagery"===Qa||"premiummaps"===Qa||"demogmaps"===Qa||"premiumimagery"===Qa||"premiumfeatures"===Qa||"landscapemaps"===Qa||"landscapeimagery"===Qa||"landscapeanalysis"===Qa)Ia.push({type:"subscriber",
usage:Oa.credits}),Na+=Ha._sumCreditsUsage(Oa.credits);else if("tilegencnt"===Ra||"svcusg"===Ra&&"tiles"===Qa||"svcusg"===Ra&&"features"===Qa||"svcusg"===Ra&&"wfs"===Qa||"svcusg"===Ra&&"scene"===Qa||"svcusg"===Ra&&"vectortiles"===Qa)La+=Ha._sumCreditsUsage(Oa.credits)});var Pa={storage:[],analytics:[],subscriber:[]};Ia.forEach(function(Oa){Oa.usage.forEach(function(Qa){var Ra=Pa[Oa.type],Sa=Ra.filter(function(Ua){return Ua.timestamp===+Qa[0]})[0];Sa?Sa.credits+=+Qa[1]:Ra.push({timestamp:+Qa[0],credits:+Qa[1]})})});
return{creditsByType:Pa,storageCredits:Ma,analyticsCredits:Ka,subscriberCredits:Na,lastThirtyDaysUsage:Ma+Ka+Na+La}};Ja.prototype._sumCreditsUsage=function(ya){return ya.reduce(function(Ha,Ia){return Ha+ +Ia[1]},0)};Ja.prototype._getMemberFillColor=function(ya){ya.favGroupId?ya="#"+ya.favGroupId.substr(ya.favGroupId.length-6):(ya=(+ya.created.toString().substring(0,7)).toString(16),6>ya.length&&(ya="0"+ya),ya="#"+ya);ya=w.default.hexToRgb(ya);return"rgba("+ya.r+","+ya.g+","+ya.b+", 0.2)"};Ja.prototype._populateNewestMembersCard=
function(){var ya=this;this._newestMembersCard.show();ja.default.request({url:"".concat(c.default.restBaseUrl,"portals/self/users"),content:{num:4,sortField:"created",sortOrder:"desc"}}).then(function(Ha){ya._renderMemberRows(Ha.users,ya._newestMemberContent);ya._newestMembersCard.showContent()})};Ja.prototype._populateMembersCard=function(){var ya=this,Ha=this.portalUser.userRole;!Ha.isAdmin()&&!Ha.canInviteUsers()||this.portal.isPortal||m.default.showNode(this._pendingInvites);if(this._isAdmin||
Ha.canInviteUsers()){var Ia=this.portal.isPortal?this.i18n.myOrganization.invitePortalUsersLabel:this.i18n.myOrganization.inviteUsersLabel;k.default.isMobile()&&(Ia=this.portal.isPortal?this.i18n.myOrganization.membersCard.add:this.i18n.myOrganization.membersCard.invite);ia.default.place('\x3ca href\x3d"#" class\x3d"font-size--1 avenir-regular overview-card-title-link js-action-inviteMembers" data-action\x3d"inviteMembers"\x3e'+Ia+'\x3c/a\x3e \x3cspan class\x3d"org-overview__link-separator"\x3e|\x3c/span\x3e ',
this._membersCard.domNode.querySelector(".js-card-title-link"),"before");this.own((0,ma.default)(this._membersCard.domNode.querySelector(".js-action-inviteMembers"),"click",function(){ya.logClickEvent("members card","invite members")}))}Ha.canViewOrgUsers()?(m.default.showNode(this._membersCard.domNode),this._renderMembersCard()):m.default.hideNode(this._membersCard.domNode)};Ja.prototype._pendingRefresh=function(){var ya=this;ja.default.request({url:"".concat(c.default.restBaseUrl,"portals/self/invitations?start\x3d1\x26num\x3d0\x26type\x3demail")}).then(function(Ha){ya._pendingInvitesCount.innerHTML=
Ha.total;0===Ha.total?(ya._pendingInvitesCount.classList.add("unlink"),m.default.disableNode(ya._pendingInvitesCount,!0),ya._pendingClick&&ya._pendingClick.remove()):(ya._pendingInvitesCount.classList.add("unlink"),m.default.disableNode(ya._pendingInvitesCount,!1),ya._pendingClick&&ya._pendingClick.remove(),ya.own(ya._pendingClick=(0,ma.default)(ya._pendingInvitesCount,"click",function(){F.default.showPendingInvitations({page:ya.page})})))},function(){ya._pendingInvitesCount.innerHTML="0";ya._pendingInvitesCount.classList.add("unlink");
m.default.disableNode(ya._pendingInvitesCount,!0);ya._pendingClick&&ya._pendingClick.remove()})};Ja.prototype._refreshMembersAndLicensesCards=function(){this.portalUser.userRole.canViewOrgUsers()&&this._renderMembersCard();this.page.canShowLicenses&&this._renderLicensesCard()};Ja.prototype._getMemberCardInfo=function(){var ya={};if(this._isAdmin||this.portalUser.userRole.canViewUsers()){var Ha=this.portal.isPortal?"".concat(c.default.restBaseUrl,"portals/self/users?start\x3d1\x26num\x3d0\x26excludeSystemUsers\x3dtrue"):
"".concat(c.default.restBaseUrl,"portals/self/users?start\x3d1\x26num\x3d0");ya.members=ja.default.request({url:Ha})}this.portal.isPortal||!this._isAdmin&&!this.portalUser.userRole.canInviteUsers()||(ya.invitations=ja.default.request({url:"".concat(c.default.restBaseUrl,"portals/self/invitations?start\x3d1\x26num\x3d0\x26type\x3demail")}).then(function(Ia){return Ia},function(){return{total:0,invitations:[]}}));return(0,ka.default)(ya)};Ja.prototype.checkNotebookOnboard=function(){var ya,Ha,Ia,Ka=
new Date("April 24, 2020"),Ma=-1<(null===(ya=this.portal.allowedBetaFeatures)||void 0===ya?void 0:ya.indexOf("notebooks"));ya=(null===(Ha=this.portal.subscriptionInfo)||void 0===Ha?void 0:Ha.type)&&-1<["Trial Developer","Trial","Developer Subscription"].indexOf(null===(Ia=this.portal.subscriptionInfo)||void 0===Ia?void 0:Ia.type);!this.portal.isPortal&&this._isAdmin&&c.default.enablePublicBetaAccess&&k.default.shouldShowOnboard("notebook-onboard",Ka)&&(!ya||ya&&Ma)&&new M.default({bannerText:this.i18n.myOrganization.overviewTab.notebookOnboard,
cookieKey:"notebook-onboard",baseClass:"org-overview__onboard-banner",contentClasses:"org-overview__onboard-content",content:'\x3cp class\x3d"trailer-0 margin-right-half"\x3e'.concat(this.i18n.myOrganization.overviewTab.notebookOnboard,' \x3ca href\x3d"https://community.esri.com/community/arcgis-notebook-beta-online" target\x3d"_blank"\x3e').concat(this.i18n.myOrganization.overviewTab.learnMore,"\x3c/a\x3e\x3c/p\x3e")},this.domNode.querySelector(".js-notebook-onboard"))};Ja.prototype.render=function(){var ya=
this,Ha=this._isAdmin||this.portalUser.userRole.canManageSecurity();this.portal.isPortal||this.portal.allSSL||!Ha||(new H.default({baseClass:"trailer-1",showBtn:!0,portal:this.portal},this.domNode.querySelector(".js-https-warning"))).show();this.portal.isPortal||this.portal.useStandardizedQuery||!Ha||(new E.default({portal:this.portal},this.domNode.querySelector(".js-sql-warning"))).show();this.checkIfNeedToShowAlerts();this.portal.isPortal?m.default.hideNode(this._systemHealthContainer):this._getSystemStatuses();
this._getLatestContent();this._isAdmin?(this.portal.isPortal||(this.datastoreDetailsEnabled()?(m.default.hideNodes((0,U.default)(".js-no-ds-details",this.domNode)),m.default.showNodes((0,U.default)(".js-ds-details",this.domNode))):this._setupFeatureDataStoreInfoPopup(),this._setupRegionalDataHostingInfoPopup()),this._portalAdminCheck().then(function(){ya._populateAdminView();ya.registerActions()})):(this._populateNonAdminView(),this.registerActions())};Ja.prototype.datastoreDetailsEnabled=function(){var ya,
Ha,Ia=h.default.getQueryParams().showDS;return(null===(ya=this.portal.helperServices.datastoreManagement)||void 0===ya?void 0:ya.url)&&(c.default.dataStoreDetailsEnabled||Ia)&&!this.portal.isTrialOrg()&&"ConnectED"!==(null===(Ha=this.portal.subscriptionInfo)||void 0===Ha?void 0:Ha.type)};Ja.prototype.getLicenseTypes=function(){var ya=this,Ha=new X.default;k.default.canGetUserTypes(this.portalUser)?this._licensesAPI.getLicenseTypes().then(function(Ia){ya.userTypes=Ia.userLicenseTypes;Ha.resolve()},
function(){Ha.resolve()}):Ha.resolve();return Ha};Ja.prototype.checkIfNeedToShowAlerts=function(){var ya=this,Ha=this.portalUser.userRole;(Ha.isAdmin()||Ha.canManageSecurity())&&(0,ka.default)({userDefaults:this.getUserDefaults(),idp:this.getIdentityProvider()}).then(function(){var Ia;if(k.default.canGetUserTypes(ya.portalUser)&&ya.userTypes){var Ka=ya.userTypes,Ma=!1;(null===Ka||void 0===Ka?0:Ka.length)&&ya.userDefaults.userLicenseType&&(Ma=Ka.filter(function(Na){return Na.id===ya.userDefaults.userLicenseType})[0],
Ma=!Ma);Ma&&(new H.default({baseClass:"trailer-1",content:'\x3cspan class\x3d"org-overview__security-alert-title avenir-bold"\x3e'.concat(Da.default.memberDefaultsTab.warning,"\x3c/span\x3e ").concat(Da.default.memberDefaultsTab["userTypeWarning".concat(ya.portal.isPortal?"Portal":"")]),btnLabel:Da.default.memberDefaultsTab.viewMemberDefaults,portal:ya.portal,handleBtnClick:function(){ha.default.publish("security-member-defaults/open")}},ya.domNode.querySelector(".js-member-defaults-warning"))).show();
(null===Ka||void 0===Ka?0:Ka.length)&&(null===(Ia=ya.currentIdp)||void 0===Ia?0:Ia.userLicenseType)&&((Ma=Ka.filter(function(Na){return Na.id===ya.currentIdp.userLicenseType})[0])||(new H.default({baseClass:"trailer-1",content:'\x3cspan class\x3d"org-overview__security-alert-title avenir-bold"\x3e'.concat(Da.default.memberDefaultsTab.warning,"\x3c/span\x3e ").concat(V.default.substitute(Da.default.memberDefaultsTab.idpUserTypeWarning,{linkStart:"",linkEnd:""})),btnLabel:Da.default.memberDefaultsTab.viewEnterpriseLogins,
portal:ya.portal,handleBtnClick:function(){ha.default.publish("security-enterprise-logins/open")}},ya.domNode.querySelector(".js-idp-warning"))).show())}new K.default({baseClass:"trailer-1",currentIdp:ya.currentIdp,userDefaults:ya.userDefaults},ya.domNode.querySelector(".js-migrate-warning"))})};Ja.prototype._renderMembersCard=function(){var ya=this,Ha=this._getMemberCardInfo();this.promises.push(Ha);Ha.then(function(Ia){var Ka,Ma,Na;if((null===(Ma=null===(Ka=ya.portalUser)||void 0===Ka?void 0:Ka.userRole)||
void 0===Ma?0:Ma.canManageLicenses())&&(ya._licenseInfo||ya.userTypes)){if(ya._licenseInfo&&(ya._totalAvailMembers.innerHTML=" / "+ya._licenseInfo.maximumRegisteredMembers,m.default.showNode(ya._totalAvailMembers),ya.userTypes&&(ya.userTypes.forEach(function(Pa){if(ya._licenseInfo.userTypes){var Oa=ya._licenseInfo.userTypes.filter(function(Qa){return Qa.id===Pa.id})[0];Oa&&(Pa.expiration=Oa.expiration,Pa.daysLeft=(0,va.default)((0,va.default)(Pa.expiration)).diff(new Date,"days"))}}),ya.userTypes.sort(function(Pa,
Oa){return 0===Pa.maxUsers&&0<Pa.assigned?-1:30<Pa.daysLeft&&30<Oa.daysLeft?0:Pa.daysLeft<Oa.daysLeft?-1:Pa.daysLeft>Oa.daysLeft?1:0}))),Na=ya.userTypes){var La=Na.slice(0,2);ya._membersPerLicenseTypeList.innerHTML="";Ka=La.map(function(Pa,Oa){var Qa=new B.default({userType:Pa,portal:ya.portal,cssClasses:"avenir-bold trailer-quarter"}),Ra=new z.default({used:Pa.assigned,total:Pa.maxUsers,cssClasses:"font-size--1 flex-wrap"}),Sa=document.createElement("div");Oa<La.length-1&&Sa.classList.add("trailer-1");
ya.portal.isPortal&&(Pa.expiration&&0<Pa.expiration&&30>Pa.daysLeft||0===Pa.maxUsers&&0<Pa.assigned)?(Oa=new C.default({portal:ya.portal,expiration:Pa.expiration,used:Pa.assigned,total:Pa.maxUsers,isTemporary:-1<Pa.id.indexOf("Temporary")}),Pa=document.createElement("div"),m.default.addClasses(Pa,["flex-1","user-type-card__expires-container"]),Pa.appendChild(Oa.domNode),Oa=document.createElement("div"),m.default.addClasses(Oa,["flex","flex-wrap"]),m.default.appendChildren([Ra.domNode,Pa],Oa),m.default.appendChildren([Qa.domNode,
Oa],Sa)):Sa.innerHTML=Qa.domNode.outerHTML+Ra.domNode.outerHTML;return Sa});m.default.appendChildren(Ka,ya._membersPerLicenseTypeList);2<ya.userTypes.length&&(ya._moreLicenseTypes.textContent=g.default.getString(ya.i18n.myOrganization.membersCard.moreLicenseTypes,ya.userTypes.length-2),m.default.showNode(ya._moreLicenseTypes))}}else ya._membersCardTop.classList.remove("overview-border-bottom"),m.default.hideNode(ya._membersPerLicenseTypeSection);ya._totalMembersCount.innerHTML=Ia.members.total;ya._membersCard.showContent();
Ia.invitations&&(ya._pendingClick&&ya._pendingClick.remove(),0<Ia.invitations.total?(ya._pendingInvitesCount.classList.remove("unlink"),m.default.disableNode(ya._pendingInvitesCount,!1),ya.own(ya._pendingClick=(0,ma.default)(ya._pendingInvitesCount,"click",function(){F.default.showPendingInvitations({page:ya.page})}))):(ya._pendingInvitesCount.classList.add("unlink"),m.default.disableNode(ya._pendingInvitesCount,!0)),ya._pendingInvitesCount.innerHTML=Ia.invitations.total,Ia.invitations.total+Ia.members.total>=
ya.portal.subscriptionInfo.maxUsers&&(ya.page.maxedUsers=!0));(ya._isAdmin||ya.portalUser.userRole.canInviteUsers())&&ya.userTypes&&(Na||(Na=ya.userTypes),Ia=Na.reduce(function(Pa,Oa){return Pa+Oa.maxUsers},0),Na=Na.every(function(Pa){return 0>=Pa.maxUsers-Pa.assigned}),0===Ia||ya.page.isDeveloperAccount&&1===Ia?(ya.domNode.querySelector(".js-action-inviteMembers").classList.add("overview-card-title-disabled-link"),ya.page.disableInvites=!0):Na&&(ya.page.noUserTypesAvailable=!0))})};Ja.prototype._renderLicensesCard=
function(){var ya=this,Ha=(0,ka.default)({entitlements:this._licensesAPI.getLicensedEntitlements(),appBundlesResult:this._licensesAPI.getAppBundles(!0)});this.promises.push(Ha);Ha.then(function(Ia){var Ka=Ia.entitlements,Ma=Ia.appBundlesResult.appBundles||[];Ma=Ma.map(function(Qa){return{title:Qa.name,used:Qa.assigned,total:Qa.maxUsers,isAppBundle:!0,apps:Qa.apps}});ya._licensesCard.showContent();Ka=k.default.filterOutProExtensions(Ka);Ia=k.default.getProEntitlements(Ka);var Na=Ka.filter(function(Qa){return-1===
Qa.key.indexOf("desktop")}),La=5-Ia.length,Pa=Ma,Oa=0;Ma.length>=La?(Pa=Ma.slice(0,La),Oa=Ma.length-La,La=0):La-=Ma.length;La=0<La?Na.slice(0,5-Ia.length-Ma.length):[];Na=Na.length-La.length+Oa;0<Na?ya._moreAppsLink.innerHTML=1<Na?V.default.substitute(ya.i18n.myOrganization.licensesCard.moreApps,{count:Na}):ya.i18n.myOrganization.licensesCard.moreApp:m.default.hideNode(ya._moreAppsLink);Ka=1>Ka.length&&1>Ma.length;ya.portal.isPortal&&Ka?(Ka=V.default.substitute(ya.i18n.myOrganization.licensesCard.noLicensesPortal,
{startLink:'\x3ca href\x3d"#licenses"\x3e',endLink:"\x3c/a\x3e"}),m.default.hideNodes((0,U.default)(".js-licenses-info-container",ya.domNode)),ya._noLicensesContainer.innerHTML="",ia.default.create("label",{innerHTML:Ka},ya._noLicensesContainer),m.default.showNode(ya._noLicensesContainer)):!ya.portal.isPortal&&Ka?ya._licensesCard.hide():(ya._licenseContainer.innerHTML="",ya._populateLicenseCardItems(Ia,ya._licenseContainer),ya._populateLicenseCardItems(Pa,ya._licenseContainer),ya._populateLicenseCardItems(La,
ya._licenseContainer))})};Ja.prototype._renderMemberRows=function(ya,Ha){var Ia=this;ya.forEach(function(Ka){Ka.email||(Ka.email="");if(Ka.thumbnail)Ka.thumbnailImage='\x3cimg src\x3d"'+ra.default.getProfileThumbnailUrl(Ka)+'" class\x3d"overview-member-thumb" \x3e',Ka.initials="";else if(Ka.thumbnailImage="",Ka.firstName&&Ka.lastName)Ka.initials=Ka.firstName.substring(0,1)+Ka.lastName.substring(0,1);else if(Ka.fullName){var Ma=Ka.fullName.split(" ");Ka.initials=Ma[0].substring(0,1)+(Ma[1]?Ma[1].substring(0,
1):"")}Ka.backgroundColor=Ia._getMemberFillColor(Ka);Ma=document.createElement("div");Ma.className="overview-member-row";Ma.innerHTML=V.default.substitute(qa.default,Ka);var Na=document.createElement("arcgis-user-avatar");Na.scale="l";Na.user=Ka;Na.portal=Ia.portal;Ma.querySelector(".js-avatar-container").appendChild(Na);Ha.appendChild(Ma);Ia._addProfilePopupListener(Ma.querySelector(".js-member-card-username"),"data-username",Ka)})};Ja.prototype._populateOpenDataCard=function(){var ya=this,Ha={start:1,
num:2,sortField:"title",sortOrder:"asc",q:"orgid:".concat(this.portal.id," isopendata:true")};this._openDataCard.show();ja.default.request({url:"".concat(c.default.restBaseUrl,"community/groups"),content:Ha}).then(function(Ia){Ia=Ia.results.map(function(Ka){return ya._getGroupItemsAndMembers(Ka)});(0,ka.default)(Ia).then(function(Ka){Ka.forEach(function(Ma){Ma=f.__assign(f.__assign({},Ma),{contributorsLabel:ya.i18n.myOrganization.openDataCard.contributors,itemsLabel:ya.i18n.myOrganization.openDataCard.items});
ia.default.place(V.default.substitute(W.default,Ma),ya._openDataGroupsContainer);m.default.createElement("arcgis-group-thumbnail",{portal:ya.portal,group:Ma,scale:"l"},ya._openDataGroupsContainer.querySelector(".js-open-data-thumb-".concat(Ma.id)))},ya);ya._openDataCard.showContent()})})};Ja.prototype._getMemberCount=function(ya){var Ha=new X.default;ya.groupMembers().then(function(Ia){Ha.resolve(Ia.total||Ia.users&&Ia.users.length||0)});return Ha};Ja.prototype._getGroupItemsAndMembers=function(ya){var Ha=
new X.default;ya=new b.default(f.__assign(f.__assign({},ya),{portal:this.portal}));(0,ka.default)({memberCount:this._getMemberCount(ya),itemCount:ya.itemCount(ya)}).then(function(Ia){ya.set(Ia);Ha.resolve(ya)});return Ha};Ja.prototype._populateAdminContact=function(){var ya=this;if(this.portal.isPortal&&0===this.portal.contacts.length)this._adminContact.hide();else{this.portalUser.userRole.canViewOrgUsers()&&this.portalUser.userRole.canViewUsers()||this._adminContact.hideLink();this._adminContact.show();
var Ha=this.portal.contacts.slice(0,4).map(function(Ia){return ja.default.request({url:"".concat(c.default.restBaseUrl,"community/users/").concat(Ia)})});(0,ka.default)(Ha).then(function(Ia){Ia=Ia.filter(function(Ka){return Ka.fullName||Ka.firstName&&Ka.lastName});0<Ia.length?(ya._renderMemberRows(Ia,ya._adminCardContent),ya._adminContact.showContent()):ya._adminContact.hide()})}};Ja.prototype._populateLicenseCard=function(){this.page.canShowLicenses?this._renderLicensesCard():this._licensesCard.hide()};
Ja.prototype._populateLicenseCardItems=function(ya,Ha){var Ia=this;ya.forEach(function(Ka){Ka=new y.default({entitlement:Ka,portal:Ia.portal});Ha.appendChild(Ka.domNode)})};Ja.prototype._generateModifiedRange=function(ya,Ha){return"modified:["+this._getRangeValue(ya.valueOf())+" TO "+this._getRangeValue(Ha.valueOf())+"]"};Ja.prototype._getRangeValue=function(ya){return ya.toLocaleString("en",{style:"decimal",minimumIntegerDigits:19,useGrouping:!1})};Ja.prototype._getLatestContent=function(){var ya=
this,Ha=new Date,Ia=new Date(Ha.getTime()-6048E5);ja.default.request({url:this.portal.url+"search/",content:{q:"("+this._generateModifiedRange(Ia,Ha)+" AND orgid:"+this.portal.id+') -type:("Code Attachment") -typekeywords:("MapAreaPackage") -type:("Map Area")',sortField:"created",sortOrder:"desc",num:100}}).then(function(Ka){var Ma=document.querySelector(".js-latest-content");Ka=Ka.results;if(ya.portalUser.userRole.canViewOrgUserContent()||Ka&&0<Ka.length){var Na=[],La=[],Pa=function(Oa){Oa=new e.default({item:Oa,
portalUser:ya.portalUser});Oa.placeAt(Ma);ya._addProfilePopupListener((0,U.default)(".js-card-item-owner",Oa.domNode),"data-owner")};Ka.filter(function(Oa){return Oa.thumbnail}).slice(0,5).forEach(function(Oa){Oa=new d.default(f.__assign(f.__assign({},Oa),{portal:ya.portal}));Oa.thumbnailUrl+="\x26w\x3d400";Na.push(Oa);La.push(x.default.getVerifiedInfo(Oa))});(0,ka.default)(La).then(function(Oa){Oa.forEach(function(Qa,Ra){Na[Ra].set("verified",Qa)});Na.forEach(Pa);ta.default.dropdown()},function(){Na.forEach(Pa)})}else m.default.hideNode(ya._contentCard)})};
Ja.prototype._addProfilePopupListener=function(ya,Ha,Ia){var Ka=this;Ia&&(Ia=new Fa.default.PortalUser(f.__assign(f.__assign({},Ia),{portal:this.portal})),this.portal.roles||this._rolesAPI.getAllRoles(!0).then(function(Ma){Ma=Ma.concat([{id:"org_publisher",name:Ka.i18n.myOrganization.formatters.rolePublisher},{id:"org_admin",name:Ka.i18n.myOrganization.formatters.roleAdmin},{id:"org_user",name:Ka.i18n.myOrganization.formatters.roleUser}]);Ka.portal.roles=Ma.map(function(Na){return{id:Na.id,name:Na.name,
privileges:Na.privileges}})}));this.own((0,Q.default)(ya,function(Ma){Ma={evt:Ma,item:Ia?Ia:{username:Ma.target.getAttribute(Ha)},portal:Ka.portal};if(k.default.isMobile()&&Ia){if(Ka.portal.roles&&Ia.role){var Na=Ka.portal.roles.filter(function(La){return La.id===Ia.role})[0];Na&&(Ia.roleName=Na.name)}Ka.page.openMobileMemberPanel(Ma)}else F.default.orgProfilePopup(Ma)}))};Ja.prototype.getIdentityProvider=function(){var ya=this,Ha=new X.default,Ia="".concat(c.default.restBaseUrl,"portals/self/idp");
(0,ka.default)({idp:ja.default.request({url:Ia}),fedIdp:ja.default.request({url:"".concat(Ia,"/federation")})}).then(function(Ka){var Ma,Na;(null===(Ma=Ka.idp)||void 0===Ma?0:Ma.id)?ya.currentIdp=Ka.idp:(null===(Na=Ka.fedIdp)||void 0===Na?0:Na.id)?(ya.currentIdp=Ka.fedIdp,ya.currentIdp.isFederation=!0):ya.currentIdp=void 0;Ha.resolve()},function(){ya.currentIdp=void 0;Ha.resolve()});return Ha};Ja.prototype.getUserDefaults=function(){var ya=this;return ja.default.request({url:"".concat(c.default.restBaseUrl,
"portals/self/userDefaultSettings"),content:{}}).then(function(Ha){ya.userDefaults=f.__assign({},Ha);delete ya.userDefaults._ssl})};Ja.prototype.getUsedStoragePercent=function(){return f.__awaiter(this,void 0,void 0,function(){var ya,Ha,Ia,Ka,Ma,Na,La,Pa,Oa;return f.__generator(this,function(Qa){switch(Qa.label){case 0:return ya={metric:"db_featurestorage_mb",ago:1,agoUnit:"h"},Ha=null===(Pa=this.portal.helperServices.datastoreManagement)||void 0===Pa?void 0:Pa.url,[4,ja.default.request({url:"".concat(Ha,
"/").concat(this.portal.id,"/datastores/featureDataStore"),content:ya})];case 1:return Ia=Qa.sent(),Ka=(null===(Oa=null===Ia||void 0===Ia?void 0:Ia[0])||void 0===Oa?void 0:Oa.value)||0,Ma=this.portal.subscriptionInfo.dataStoreLevel||"S",Na=1024*("M4"===Ma?4E3:"S"===Ma?500:1E3),La=Math.round(Ka/Na*100),[2,La]}})})};Ja.prototype.renderAPIKeysCard=function(){return f.__awaiter(this,void 0,void 0,function(){var ya,Ha;return f.__generator(this,function(Ia){switch(Ia.label){case 0:return this._isAdmin?
[4,this.getExistingAPIKeys()]:[2];case 1:return ya=Ia.sent(),[4,this.getTotalAPIKeys()];case 2:return Ha=Ia.sent(),0<ya&&0<Ha&&(this.totalAPIKeysContainer.textContent=Ha,this.keysUsedContainer.textContent=ya,m.default.showNode(this.apiKeyCard)),[2]}})})};Ja.prototype.getTotalAPIKeys=function(){return f.__awaiter(this,void 0,void 0,function(){var ya;return f.__generator(this,function(Ha){switch(Ha.label){case 0:return Ha.trys.push([0,2,,3]),[4,ja.default.request({url:"".concat(c.default.restBaseUrl,
"portals/self/limits"),content:{limitsType:"Backend",limitName:"ApiKeysLimit"}})];case 1:return ya=Ha.sent(),[2,(null===ya||void 0===ya?void 0:ya.limitValue)||0];case 2:return Ha.sent(),[3,3];case 3:return[2]}})})};Ja.prototype.getExistingAPIKeys=function(){return f.__awaiter(this,void 0,void 0,function(){var ya;return f.__generator(this,function(Ha){switch(Ha.label){case 0:return Ha.trys.push([0,2,,3]),[4,ja.default.request({url:"".concat(c.default.restBaseUrl,"portals/self/apiKeys")})];case 1:return ya=
Ha.sent(),[2,(null===ya||void 0===ya?void 0:ya.total)||0];case 2:return Ha.sent(),[3,3];case 3:return[2]}})})};return Ja=f.__decorate([(0,la.default)(T.default,O.default,Z.default,aa.default,a.default)],Ja)}()})},"arcgisonline/pages/dijit/Card":function(){define("require exports tslib ../../tsutils/declareDecorator dojo/string ./Card/_CardBase dojo/text!./Card/Card.html dojo/text!./Card/MinimalCard.html dojo/i18n!../../nls/arcgisonline".split(" "),function(S,J,f,c,h,d,b,a,e){c=f.__importDefault(c);
h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);return function(){function q(t,u){this.alwaysShowDrag=this.draggable=!1;this.templateString=t.minimal?a.default:b.default}q.prototype.postMixInProperties=function(){var t,u;this.inherited(arguments);this.item.ownerText=null!==(u=null===(t=this.item.verified)||void 0===t?void 0:t.name)&&void 0!==u?u:this.item.owner;this.item.viewMsg=h.default.substitute(e.default.viewsWidget.universalViewsMsgAlone,
{viewcount:this.item.numViews})};q.prototype.postCreate=function(){this.inherited(arguments);this.draggable&&this.domNode.classList.add("card--draggable");this.alwaysShowDrag&&this.domNode.classList.add("card--show-drag")};q.prototype.setDraggable=function(t){(this.draggable=t)?this.domNode.classList.add("card--draggable"):this.domNode.classList.remove("card--draggable")};return q=f.__decorate([(0,c.default)(d.default)],q)}()})},"arcgisonline/pages/dijit/Card/_CardBase":function(){define("require exports tslib ../../../esriGeowConfig ../../components/Favorite ./_getItemClasses ../OrgPopup/OrgPopup ../../item/_Actions ../../utils/formatters ../../utils/item ../../utils/setItemUrls ../../utils/icons ../../utils/arrays ../../utils/dom ../../utils/notebook ../../../tsutils/declareDecorator dijit/_WidgetBase dijit/_TemplatedMixin ../ItemShareSummary dojo/dom-construct dojo/query dojo/string dojo/on dojo/topic preact dojo/i18n!../../../nls/arcgisonline dojo/text!./Card.html dojo/text!./OpenDropdown.html".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);
D=f.__importDefault(D);G=f.__importDefault(G);A=f.__importDefault(A);y=f.__importDefault(y);z=f.__importDefault(z);var B;(function(C){C.notebook="notebookViewer";C.map="mapViewer";C.newMap="newMapViewer";C.download="download";C.desktop="openDesktop";C.pro="openPro";C.story="storyMapViewer"})(B||(B={}));return function(){function C(H){this.i18n=A.default;this.template=y.default;this.fullDate=e.default.fullDate;this.completeDate=e.default.completeDate;this.empty=e.default.empty;this.getAccess=e.default.getAccess;
this.getAccessIcon=e.default.getAccessIcon;this.formatNumViews=e.default.formatNumViews;this.formatViewsLabel=e.default.formatViewsLabel;this.selectTitle=e.default.selectTitle;this.moreOptionsTitle=e.default.moreOptionsTitle;this.hasSharedOwnershipGroups=this.fullItemTypes=!1;this.hide=e.default.hide;this.show=e.default.show;this.icons=u.default;this.isImage=!1;this.imageClass="";this.cssClasses=[];this.select=this.favoritesDisabled=!1;this.checked=this.selectedClass="";this.selectItem=A.default.GroupWidget.selectItem;
this.disabled="disabled";this.addSearchTelemetryParams=!1;this.searchTerm="";this.badgeWidth="narrow";this.badgeScale="s";this.canCreateNotebooks=!1}C.prototype.postMixInProperties=function(){var H=this,E,K,I,L,M,N;this.formatDisplayName=e.default.formatDisplayName.bind(this,this.item,this.fullItemTypes);this.favoritesDisabled=!this.portalUser;this.selectCardClass=this.select?"card-select":"";this.isSelected&&(this.selectedClass="card-select-active",this.checked="checked",this.selectItem=A.default.GroupWidget.unselectItem);
this.hasSublayers=!(null===(E=this.item.sublayers)||void 0===E||!E.length);this.removedClass=this.isRemoved?"card-select-removed":"";this.item.canShare=this.allowShare&&q.default.canShareItem(this.item,this.portalUser);this.item.isAdmin=null!==(K=this.item.isAdmin)&&void 0!==K?K:(null===(I=this.portalUser)||void 0===I?void 0:I.isOrgAdmin)&&this.item.portal.id===this.portalUser.orgId;this.item.snippet=250<this.item.snippet.length?this.item.snippet.substring(0,250)+"\u2026":this.item.snippet;this.item.ownerText=
e.default.formatOwnerText(this.item);this.item.accessIcon=e.default.getAccessIcon(this.item.access);this.canCreateNotebooks=(null===(L=this.portalUser)||void 0===L?void 0:L.userRole.canCreateNotebooks())&&v.default.notebookServerConfigured();this.item.openIn.forEach(function(P){return t.default[P](H.item)});t.default.configureStoryMapTheme(this.item);this.item.downloadUrl="file"===this.item.classification?t.default.getItemDataUrl(this.item):"";this.item.defaultOpenUrl=this._getDefaultOpenUrl(this.item);
this.item.defaultOpenIcon=this.item.defaultOpenIcon||"launch";this.item.defaultOpenSvg=null!==(N=null===(M=u.default.inline[this.item.defaultOpenIcon])||void 0===M?void 0:M["16"])&&void 0!==N?N:u.default.inline.launch["16"];this.item.defaultOpenText=this._getDefaultOpenText(this.item);this._setDefaultThumbnail(this.item);this.cssClasses=(0,d.default)(this.item,this.portalUser);"Image"===this.item.type&&(this.isImage=!0,this.imageClass="card--image-item")};C.prototype._setDefaultThumbnail=function(H){var E;
H.thumbnailUrl=null!==(E=this.useMostRecentToken(H.thumbnailUrl))&&void 0!==E?E:"";if("Notebook"===H.type||"Notebook Code Snippets"===H.type||"Notebook Code Snippet Library"===H.type||"Geoprocessing Service"===H.type&&H.typeKeywords.includes("Notebook Web Tool"))E="".concat(c.default.baseUrl,"js/arcgisonline/css/images/").concat("Notebook"===H.type?"notebook-thumb.png":H.typeKeywords.includes("Web Tool")?"notebook-web-tool-thumb.png":"notebook-code-snippet-thumb.png"),H.thumbnailUrl=H.thumbnailUrl||
E;H.largeThumbnailUrl="".concat(H.thumbnailUrl).concat(-1<H.thumbnailUrl.search("\\?token\x3d")?"\x26":"?","w\x3d400")};C.prototype.useMostRecentToken=function(H){var E,K=this.item.portal.getPortalUser(),I=null===(E=null===K||void 0===K?void 0:K.credential)||void 0===E?void 0:E.token;return t.default.swivelToken(H,null===K||void 0===K?void 0:K.token,I)};C.prototype._getDefaultOpenText=function(H){return"Notebook"!==H.type||this.canCreateNotebooks?this.item.defaultOpenText||A.default.itemLinks.viewDetails:
A.default.itemLinks.viewDetails};C.prototype.postCreate=function(){var H=this,E,K;this.inherited(arguments);this.cssClasses.filter(function(Y){return Y}).forEach(function(Y){return H.domNode.classList.add(Y)});var I=this.item,L=this.portalUser,M=this.domNode.querySelector(".js-card-badges"),N=this.domNode.querySelector(".js-favorites-container"),P=this.domNode.querySelector(".js-open-dropdown-container"),R=this.domNode.querySelector(".js-default-open");!this.favoritesDisabled&&N&&(0,F.render)((0,F.h)(h.default,
{item:this.item}),N);P&&(N=this.addSearchTelemetryParams?"\x26fromSearch\x3dtrue\x26searchPosition\x3d".concat(this.itemIndex,"\x26searchTerm\x3d").concat(this.searchTerm,"\x26searchFacet\x3dcard%20dropdown%20item%20details"):"",r.default.place(x.default.substitute(z.default,{item:I,i18n:A.default,icons:u.default,telemetryParams:N},null,this),P),q.default.isHubType(I.type)&&P.querySelector(".js-view-link").classList.add("if-hub-and-not-blocked"));M&&m.default.createElement("arcgis-item-badges",{item:this.item,
user:this.portalUser,width:this.badgeWidth,showTooltips:!0,scale:"s",api:3},M);if("Feature Service"===I.type||"Feature Collection"===I.type)M=this.domNode.querySelector(".js-layers-tables"),P=this.domNode.querySelector(".js-layers-tables-toggle"),M&&P&&c.default.deepLayerSearchEnabled&&m.default.createElement("arcgis-layers-and-tables-summary-popup",{item:I,layers:I.sublayers,portal:I.portal,api:3,user:L,searchTerm:this.searchTerm,config:c.default,telemetry:this.telemetry,border:!0,tooltip:this.formatDisplayName(I.displayName),
i18nNoService:A.default.publishWizard.errors.selectedServiceNotExist.message,i18nNoLayers:A.default.SelectLayersWFS.noLayers},M).appendChild(P);new k.default({item:I,portalUser:L,right:!0,canShare:this.item.canShare,allowShare:this.allowShare,showShareGroups:this.showShareGroups&&this.isWide,telemetry:this.telemetry,portal:this.item.portal},this.domNode.querySelector(".js-share-summary"));if(R){I=this.item.defaultOpenUrl;if(I===B.download||I===B.desktop||I===B.pro)R.classList.add("js-action"),R.setAttribute("data-action",
this.item.defaultOpenUrl);this.item.defaultOpenUrl===B.newMap&&(I="modern"===this.item.portal.defaultMapViewer&&this.item.canOpenInNewMapViewer?this.item.newMapViewerUrl:this.item.mapViewerUrl,R.href=I,R.setAttribute("data-href",I));(I=this.item.openIn)&&I[0]&&I[0]!==B.map&&this.item[I[0]+"Url"]&&R.setAttribute("target","_blank")}this._addEventListeners();(null===(E=this.item.portal)||void 0===E?0:E.isPortal)&&m.default.hideNodes(null===(K=this.domNode)||void 0===K?void 0:K.querySelectorAll(".js-hide-portal"))};
C.prototype.destroy=function(){this.inherited(arguments);this._popup&&this._popup.destroy()};C.prototype._getDefaultOpenUrl=function(H){var E="item.html?id\x3d"+H.id,K=H.openIn&&H.openIn[0];return H.defaultOpenText===A.default.itemLinks.openDesktop?B.desktop:H.defaultOpenText===A.default.itemLinks.openPro?B.pro:H.defaultOpenText===A.default.itemLinks.openVRExperience?H.vrExperienceUrl:!K||K!==B.notebook||this.portalUser&&this.canCreateNotebooks?K&&K!==B.map&&H[K+"Url"]?H[K+"Url"]:"download-to"===
H.defaultOpenIcon||g.default.includes(H.types,"is-pdf")?B.download:K===B.map?B.newMap:K===B.story?B.story:E:E};C.prototype._addEventListeners=function(){var H=this;this.own((0,w.default)(".js-card-select-check-mark-wrap",this.domNode).on("click",function(K){K.stopPropagation()}),(0,w.default)(".js-card-select-check-mark",this.domNode).on("change",function(K){H[K.target.checked?"_select":"_deselect"]()}),(0,w.default)(this.domNode).on("click",this._toggleSelected.bind(this)),(0,w.default)(".js-card-item-owner",
this.domNode).on("click",this._showProfile.bind(this)),(0,w.default)(".js-action",this.domNode).on("click",this._handleAction.bind(this)),G.default.subscribe("view/deselectAll",this._deselect.bind(this)),(0,w.default)(".js-card-image",this.domNode).on("error",this._cardImageError.bind(this)),(0,w.default)(".js-card-title-link",this.domNode).on("click",this._cardOpen.bind(this)),(0,w.default)(".js-item-share-dropdown",this.domNode).on("click",this._shareItemDropdown.bind(this)),(0,w.default)(".js-telemetry-overflow-menu .js-dropdown-toggle",
this.domNode).on("click",function(){return H._logTelementryEvent("more options")}),(0,w.default)(".js-telemetry-categorize",this.domNode).on("click",function(){var K,I;if(null===(K=window.location.pathname)||void 0===K?0:K.includes("content.html"))null===(I=H.telemetry)||void 0===I?void 0:I.logEvent({eventType:"other",pageName:"content",pageUrl:window.location.href,path:window.location.pathname,category:"item action",action:"categorize"})}),(0,w.default)(".js-telemetry-thumbnail-hover",this.domNode).on("mouseover",
function(){return H._logTelementryEvent("thumbnail")}),(0,w.default)(".js-telemetry-title-hover",this.domNode).on("mouseover",function(){return H._logTelementryEvent("title")}),(0,w.default)(".js-item-categorize",this.domNode).on("click",this._categorizeItem.bind(this)),this.item.watch(this._itemUpdate.bind(this)));var E=this.domNode.querySelector(".js-verified-owner-link");E&&this.own((0,D.default)(E,"click",this.showOrgPopup.bind(this)))};C.prototype._telemetryEvent=function(){var H=window.location.href,
E=window.location.hash;E=H.includes("content.html")&&(!E||E.includes("content"));var K=H.includes("gallery.html");if(E||K)return{category:"grid card action",eventType:"other",pageName:E?"my content":"gallery",pageUrl:H}};C.prototype._logTelementryEvent=function(H){var E,K=this._telemetryEvent();K&&(null===(E=this.telemetry)||void 0===E?void 0:E.logEvent(f.__assign({label:H},K)))};C.prototype._handleAction=function(H){var E=this;H.preventDefault();var K=H.currentTarget.getAttribute("data-action"),
I=this.item,L=this.portalUser,M=this.item.portal;if(K&&a.default[K])if("share"!==K||this.item.isOwner)a.default[K]({evt:H,item:I,user:L,portal:M});else this.item.getOwnerProfile(!0,!0).then(function(N){E.item.itemOwner=N;a.default.share({evt:H,item:I,user:L,portal:M})})};C.prototype._select=function(){this.domNode.classList.add("card-select-active");this.item.isSelected=!0;var H=this.domNode.querySelector(".js-card-select-check-mark");H.parentNode.setAttribute("aria-label",A.default.GroupWidget.unselectItem);
H.checked=!0;G.default.publish("view/select",this.item)};C.prototype._deselect=function(){this.domNode.classList.remove("card-select-active");this.item.isSelected=!1;var H=this.domNode.querySelector(".js-card-select-check-mark");H&&(H.parentNode.setAttribute("aria-label",A.default.GroupWidget.selectItem),H.checked=!1);G.default.publish("view/deselect",this.item)};C.prototype._toggleSelected=function(H){"ARCGIS-LAYERS-AND-TABLES-SUMMARY-POPUP"!==H.target.tagName&&this.select&&(this.domNode.classList.contains("card-select-active")?
this._deselect():this._select())};C.prototype._showProfile=function(H){H.stopPropagation();G.default.publish("profile/show",H)};C.prototype.showOrgPopup=function(H){H.stopPropagation();(new b.default({item:this.item,opener:H.target})).open()};C.prototype._cardImageError=function(H){H.preventDefault();H.target.src="js/arcgisonline/css/images/default_thumb.png"};C.prototype._cardOpen=function(H){G.default.publish("card/open",this.itemIndex,H)};C.prototype._itemUpdate=function(H,E,K){G.default.publish("item/update",
{item:this.item,name:H,oldValue:E,value:K})};C.prototype._shareItemDropdown=function(){this.domNode.querySelector(".js-item-share-dropdown").blur()};C.prototype._categorizeItem=function(){G.default.publish("item/categorize",this.item,this.domNode.querySelector(".js-dropdown-toggle"))};return C=f.__decorate([(0,p.default)(l.default,n.default)],C)}()})},"arcgisonline/pages/components/Favorite":function(){define("require exports tslib ../pageUtil ../../sharing/geow/Content dojo/topic preact dojo/i18n!../../nls/arcgisonline".split(" "),
function(S,J,f,c,h,d,b,a){Object.defineProperty(J,"__esModule",{value:!0});c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);a=f.__importDefault(a);S=function(e){function q(){var t=null!==e&&e.apply(this,arguments)||this;t.buttonRef=(0,b.createRef)();t.handleClick=function(u){u.stopPropagation();var g=t.state.isFavorite,m=t.props.item;t.checkReadonly(m.portal)||(t.setState(function(v){return{isFavorite:!v.isFavorite}}),m.set("isFavorite",g),(g?h.default.removeFromFavorites(m):h.default.addToFavorites(m)).then(function(){},
function(v){d.default.publish("alert/show",{type:"error",text:null===v||void 0===v?void 0:v.message});t.setState(function(p){return{isFavorite:!p.isFavorite}});m.set("isFavorite",g)}))};return t}f.__extends(q,e);q.prototype.componentDidMount=function(){this.setState({isFavorite:this.props.item.isFavorite})};q.prototype.checkReadonly=function(t){return t.isReadOnly?(c.default.createConfirmationDialog({strings:{title:a.default.common.errorTitle,description:t.isPortal?a.default.common.errors.portalInReadOnlyModeMsg:
a.default.common.errors.onlineInReadOnlyModeMsg},hideCancel:!0,autoCloseOnOk:!0}),!0):!1};q.prototype.render=function(){var t,u=this.state.isFavorite,g=this.props.showText,m=u?a.default.common.unfavorite:a.default.common.favorite,v=g?"thumbnail-favorite":"card-action";return(0,b.h)("span",null,(0,b.h)("button",{onClick:this.handleClick,ref:this.buttonRef,role:"checkbox","aria-label":a.default.common.favorite,"aria-checked":u?"true":"false",class:"font-size--3 ".concat(u?"btn-link-yellow":""," ").concat(v)},
(0,b.h)("calcite-icon",{icon:u?"star-f":"star",scale:"s"}),g&&(0,b.h)("span",{class:"btn-link-off-black margin-left-half"},m)),!g&&(0,b.h)("calcite-tooltip",{referenceElement:null===(t=this.buttonRef)||void 0===t?void 0:t.current,"close-on-click":!0,label:a.default.common.favorite,placement:"bottom",overlayPositioning:"fixed"},(0,b.h)("p",{class:"avenir-regular font-size--3 trailer-0 leader-0"},m)))};return q}(b.Component);J.default=S})},"arcgisonline/pages/dijit/Card/_getItemClasses":function(){define("require exports tslib ../../utils/arrays ../../utils/organization dojo/sniff arcgisonline/pages/utils/mapViewer".split(" "),
function(S,J,f,c,h,d,b){Object.defineProperty(J,"__esModule",{value:!0});c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);J.default=function(a,e){var q,t,u,g,m=a.url||"";var v=a.isHostedService;var p=a.serviceInfo||{},l=null!==(u=null===p||void 0===p?void 0:p.capabilities)&&void 0!==u?u:"";u=null===e||void 0===e?void 0:e.userRole;m=e&&-1<m.indexOf(e.orgId);l=-1<l.indexOf("Editing");p=c.default.includes(a.typeKeywords,"Multi Services View")||p.isMultiServicesView;var n=a.isAdminView?
null===u||void 0===u?void 0:u.canUpdateOrgItems():a.canUpdate;u=v&&!p&&(n||l&&(null===u||void 0===u?void 0:u.canEditFeaturesFullControl())&&m);v=null!==(g=a.canEditService)&&void 0!==g?g:u;a.isEditableByUser=v;g=(0,d.default)("trident");v=h.default.isMobile();g=g||v;v="Scene Service"===a.type&&c.default.includes(a.typeKeywords,"Voxel");u="Web Experience"===a.type&&a.origin;p="Web Experience Template"===a.type&&a.origin;p="Dashboard"===a.type&&a.origin||u||p;u=[].concat(a.types);u.push(a.hasResources?
"has-resources":"");u.push(a.hasViewStyle?"has-viewStyle":"");u.push(a.url?"has-url":"");u.push((null===e||void 0===e?0:e.isOrgUser)&&"Form"===a.type?"is-surveyForm":"");u.push(a.portal&&!a.portal.isPortal&&(null===e||void 0===e?0:e.isOrgUser)&&"Form"===a.type?"is-surveyFormBrowser":"");u.push(a.isConfigurableApp?"can-configure":"");u.push(a.typeKeywords.includes("configurableApp")?"is-instant-apps":"");u.push(a.isEditableByUser&&"Feature Service"===a.type?"can-edit-service":"");u.push(v?"is-voxel":
"");u.push(a.isOwner?"is-owner":"");u.push(a.isAdmin?"is-admin":"");u.push((null===e||void 0===e?0:e.isOrgUser)?"":"is-public-user");u.push((null===e||void 0===e?0:e.isOrgAdmin)?"is-admin":"");u.push(a.canUpdate&&!p?"can-update":"is-viewer");u.push(c.default.includes(a.typeKeywords,"Web AppBuilder")&&a.canUpdate&&!a.origin?"can-edit-wab":"");u.push((null===e||void 0===e?0:e.isOrgUser)&&"Notebook"===a.type?"is-notebook":"");v=-1<(null===(q=a.openIn)||void 0===q?void 0:q.indexOf("mapViewer"));u.push(v&&
!g?"is-map-viewer-beta":"");u.push(e&&(null===e||void 0===e?void 0:e.defaultMapViewer)!==b.MapViewerType.Modern?"is-map-viewer-classic":"is-map-viewer-modern");["OGCFeatureServer","Media Layer","Group Layer"].includes(a.type)&&u.push("no-legacy-viewer-support");e=["OGCFeatureServer","Media Layer"].includes(a.type)||"Group Layer"===a.type&&!(null===(t=a.typeKeywords)||void 0===t?0:t.includes("Scene"));u.push(e?"is-only-map-viewer-modern":"is-multiple-map-viewer");a.addBlockClasses(u);return u}})},
"arcgisonline/pages/dijit/OrgPopup/OrgPopup":function(){define("require exports tslib esri/Evented dojo/text!./OrgPopup.html dojo/i18n!../../../nls/arcgisonline dojo/on dojo/keys dijit/_TemplatedMixin dijit/_WidgetBase dijit/popup dijit/TooltipDialog arcgisonline/pages/utils/dom arcgisonline/pages/utils/focus arcgisonline/pages/utils/icons arcgisonline/tsutils/declareDecorator".split(" "),function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);
b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);return function(){function l(n,k){this.templateString=h.default;this.i18n=d.default;this.icons=v.default}l.prototype.postCreate=function(){this.inherited(arguments);this.dialog=new u.default({class:"profile-popup",title:"",content:this.domNode,_onKey:this.handleDialogKeydown.bind(this)});
this.render();this.addEventListeners()};l.prototype.open=function(){var n=this;t.default.open({popup:this.dialog,orient:["below","above"],around:this.opener,onCancel:function(){n.opener.focus();n.close()}});this.dialog.domNode.parentElement.classList.add("profile-popup__container");var k=m.default.getFocusableElements(this.dialog.domNode);this.firstFocusItem=k[0];this.lastFocusItem=k[k.length-1];this.firstFocusItem.focus();setTimeout(function(){g.default.showHide(n.descToggle,n.descEl.scrollHeight>
n.descEl.clientHeight)},100)};l.prototype.close=function(){t.default.close(this.dialog);this.dialog.destroy();this.destroy();this.emit("close")};l.prototype.render=function(){g.default.showHide(this.descContainer,!!this.item.verified.description);this.item.verified.description&&(this.descEl.innerHTML=this.item.verified.description)};l.prototype.addEventListeners=function(){var n=this;this.own((0,b.default)(this.closeIcon,"click",function(){t.default.close(n.dialog)}),(0,b.default)(this.domNode,"click",
function(k){k.stopPropagation()}),(0,b.default)(document.body,"click",function(){n.close()}),(0,b.default)(this.descToggle,"click",function(){return n.handleDescToggle()}))};l.prototype.handleDialogKeydown=function(n){var k=this;if(n.keyCode===a.default.TAB)if(n.stopPropagation(),this.lastFocusItem!==n.target||n.shiftKey)n.shiftKey&&this.firstFocusItem===n.target&&(n.preventDefault(),this.opener.focus(),this.close());else{n.preventDefault();var r=m.default.getFocusableElements(document.body);r.forEach(function(w,
x){w===k.opener&&r[x+1].focus()});this.close()}};l.prototype.handleDescToggle=function(){this.descContainer.classList.toggle("profile-popup__bio-container--expanded")};return l=f.__decorate([(0,p.default)(q.default,e.default,c.default)],l)}()})},"arcgisonline/pages/item/_Actions":function(){define("require exports tslib dojo/Deferred dojo/_base/event dojo/_base/lang dojo/aspect dojo/cookie dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/has dojo/i18n!../../nls/arcgisonline dojo/json dojo/on dojo/promise/all dojo/string dojo/topic esri/config esri/lang preact ../../esriGeowConfig ../../map/utils/getMapCookie ../../sharing/dijit/OldAppendData ../../sharing/dijit/dialog/AttachCodeDlg ../../sharing/dijit/dialog/ConfirmDialog ../../sharing/dijit/dialog/CreateAppDlg ../../sharing/dijit/dialog/ExportDlg ../../sharing/dijit/dialog/ExtentDlg ../../sharing/dijit/dialog/JobStatusDlg ../../sharing/dijit/dialog/LayerTimeSettings ../../sharing/dijit/dialog/ManageSceneCache ../../sharing/dijit/dialog/OpenMapDlg ../../sharing/dijit/dialog/OverwriteFromCloud ../../sharing/dijit/dialog/PublishTileServiceDlg ../../sharing/dijit/dialog/RateLimiting ../../sharing/dijit/dialog/ShareOwnershipDlg ../../sharing/dijit/dialog/_CreateItemUtilMixin ../../sharing/util ../../sharing/utilShare ../components/Collaborations/collab-service ../components/ConfirmDialog ../components/ImageUploadModal/ImageUploadModal ../components/UpdateViewModal ../dijit/ChangeOwner ../dijit/MoveItem ../dijit/ReplaceLayer/ReplaceLayer ../dijit/ReplaceLayer/ReplaceSceneLayer ../organization/widgets/ProfilePopup ../pageUtil ../portal/PortalItem ../portal/PortalUser ../serviceUtil ../statusUtil ../utils/alerts ../utils/arrays ../utils/dom ../utils/icons ../utils/item ../utils/culture esri/request ../utils/number arcgis-components/wrappers/Share ../utils/setItemUrls ../utils/strings ../utils/verified ./widgets/AdvancedOfflineOptions/AdvancedOfflineOptions ./widgets/_metadata ./widgets/typeOptions/mapOptions/domainUpdate ./widgets/typeOptions/mapOptions/httpsUpdate ../components/ChangeOwnerWarning ../components/DeleteItems".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E,K,I,L,M,N,P,R,Y,ja,aa,da,ra,ca,fa,la,ta,Q,T,O,Z,na,ia,X,ha,V,ea,U,ka,ma,sa,pa,Aa,za,Ba,ua,Fa,va,xa,Da,Ca){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);
n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);x=f.__importDefault(x);D=f.__importDefault(D);G=f.__importDefault(G);F=f.__importDefault(F);A=f.__importDefault(A);y=f.__importDefault(y);z=f.__importDefault(z);B=f.__importDefault(B);C=f.__importDefault(C);H=f.__importDefault(H);E=f.__importDefault(E);K=f.__importDefault(K);I=f.__importDefault(I);L=f.__importDefault(L);M=f.__importDefault(M);N=f.__importDefault(N);P=f.__importDefault(P);R=f.__importDefault(R);Y=f.__importDefault(Y);
ja=f.__importDefault(ja);aa=f.__importDefault(aa);da=f.__importDefault(da);ra=f.__importDefault(ra);ca=f.__importDefault(ca);fa=f.__importDefault(fa);la=f.__importDefault(la);ta=f.__importDefault(ta);Q=f.__importDefault(Q);T=f.__importDefault(T);O=f.__importDefault(O);Z=f.__importDefault(Z);na=f.__importDefault(na);ia=f.__importDefault(ia);X=f.__importDefault(X);ha=f.__importDefault(ha);V=f.__importDefault(V);ea=f.__importDefault(ea);U=f.__importDefault(U);ka=f.__importDefault(ka);ma=f.__importDefault(ma);
sa=f.__importDefault(sa);Aa=f.__importDefault(Aa);za=f.__importDefault(za);Ba=f.__importDefault(Ba);ua=f.__importDefault(ua);Fa=f.__importDefault(Fa);va=f.__importDefault(va);xa=f.__importDefault(xa);return function(qa){function W(){return null!==qa&&qa.apply(this,arguments)||this}f.__extends(W,qa);W.openDefault=function(ba){var oa,wa=ba.evt,Ea=ba.item,Ga=null===(oa=null===Ea||void 0===Ea?void 0:Ea.openIn)||void 0===oa?void 0:oa[0],Ja="Operation View"===Ea.type||"Dashboard"===Ea.type;oa="appViewer"===
Ga||"StoryMap"===Ea.type;var ya="mapViewer"===Ga,Ha="notebookViewer"===Ga,Ia=ha.default.includes(Ea.types,"is-desktop")||ha.default.includes(Ea.types,"is-desktopPro"),Ka=ha.default.includes(Ea.types,"is-pro"),Ma=Ea.types.some(function(La){return-1<["is-download","is-pdf","is-file"].indexOf(La)}),Na=ha.default.includes(Ea.types,"is-downloadImage");(Ga=Ja?null:document.querySelector(".js-open-".concat(oa?"url":Ga)))?(wa=e.default.get(Ga,"href"),oa?window.open(wa):ya?this.newMapViewer(ba):window.location.href=
wa):Ha?window.open(Ea.notebookViewerUrl,"_blank").focus():Ia?this.openDesktop(ba):Ka?this.openPro(ba):Ma?this.download(ba):Na?this.downloadImage(ba):Ja?(Ga=Array.prototype.slice.call(document.querySelectorAll(".js-open-btn")).filter(function(La){return 0!==(null===La||void 0===La?void 0:La.offsetHeight)}).shift(),wa=Ga.getAttribute("href"),"Dashboard"===Ea.type?window.open(wa):window.location.href=wa):h.default.stop(wa)};W.exportData=function(ba){var oa=ba.evt,wa=ba.item,Ea=new z.default,Ga=ba.layerId||
e.default.get(oa.currentTarget,"data-layerId");ba=ba.layer||(r.default.isDefined(Ga)?T.default.findLayer(Ga,wa.layers):wa.layers);Ea.show(wa,ba,e.default.get(oa.target,"data-type"));(0,v.default)(Ea,"done",function(Ja){Ea.hide().then(function(){window.location.href="item.html?id\x3d".concat(Ja.itemId)})})};W.exportImagery=function(ba){var oa=ba.item,wa=oa.portal||{},Ea=this._getAvailableCredits(wa),Ga=wa.isPortal?null:new c.default;if(!wa.isPortal){wa=na.default.fetchExportImageryCredits(oa);var Ja=
wa.canceller;wa.dfd.then(function(Ha){var Ia=Ha.outputValue;Ha.success&&Ia.credits?(Ha=l.default.substitute(g.default.exportDlg.costForTilePackage,{credits:sa.default.format(Ia.credits),availableCredits:sa.default.format(Ea)}),Ga.resolve({success:Ea>=Ia.credits,code:1,message:Ha})):Ga.reject(g.default.errorWidget.defaultError);return null},function(){return Ga.reject(g.default.errorWidget.defaultError)})}var ya=new z.default;ya.show(oa,oa.layers,e.default.get(ba.evt.target,"data-type"),{waitForCredits:Ga,
canceller:Ja});(0,v.default)(ya,"done",function(Ha){ya.hide().then(function(){window.location.href="item.html?id\x3d".concat(Ha.itemId)})})};W.append_old=function(ba){var oa=ba.evt,wa=ba.page,Ea=ba.item;ba=r.default.isDefined(ba.layerId)?ba.layerId:e.default.get(oa.currentTarget,"data-layerId");ba=r.default.isDefined(ba)?T.default.findLayer(ba,Ea.layers):null;var Ga=(new G.default({item:Ea,layer:ba,layers:ba?[ba]:Ea.layers})).show();(0,v.default)(Ga,"hide",function(Ja){wa._showDataLastUpdated(Ea);
Ga.destroyRecursive()})};W.overwriteFromCloud=function(ba){var oa=ba.page.portal,wa=ba.item,Ea=new I.default;P.default.getCloudProviderItemResource(wa).then(function(Ga){Ea.startup(oa,Ga,wa);Ea.showModal()},this._showError);(0,v.default)(Ea,"hide",function(Ga){Ea.destroyRecursive()})};W.download=function(ba){ba=ba.item;R.default._fetchItemData(ba,this.getItemDataUrl(ba))};W.openDesktop=function(ba){var oa=ba.evt,wa=ba.item,Ea=wa.portal||{};oa=oa&&e.default.get(oa.target,"data-type")||"arcmap";var Ga=
wa.url||"",Ja="Map Service"===wa.type,ya="Image Service"===wa.type,Ha=R.default.onAGOLFederatedServer(Ga)||R.default.onFederatedServer(Ga),Ia=-1!==Ga.indexOf(".arcgis.com/")&&-1!==Ga.indexOf("//landscape"),Ka=wa.openPkg,Ma=wa.openData;Ga=wa.openLyr;"pro"===oa?this.openPro(ba):(Ea.isPortal||!Ja&&!ya||wa.isHostedService||wa.isServiceProxy||Ha||Ia||(Ga=!0),ba=Ka?this._getItemPkgPath(wa):Ma?this.getItemDataUrl(wa):Ga?this._getLyrPath(wa):this._getPItemPath(wa),Ga?R.default.openPageAndCount(wa.id,ba):
R.default._fetchItemData(wa,ba))};W.openPro=function(ba){ba=ba.item;var oa=this._getPItemXPath(ba);ba.openLyr?R.default.openPageAndCount(ba.id,oa):R.default._fetchItemData(ba,oa)};W.share=function(ba,oa){var wa,Ea,Ga,Ja,ya=ba.items||(ba.item?[ba.item]:[]),Ha=ba.item||ya[0]||{},Ia=ba.telemetryWorkflow,Ka=ba.user.portal||(null===(wa=ba.page)||void 0===wa?void 0:wa.portal),Ma=ba.user||(null===(Ea=ba.page)||void 0===Ea?void 0:Ea.portalUser),Na=ya.length,La=window.location.href,Pa=-1<La.indexOf("item.html")?
"item":"content",Oa=ba.telemetry||(null===(Ga=ba.page)||void 0===Ga?void 0:Ga.telemetry);ba=-1<La.indexOf("notebook.html");wa="item"===Pa;ba=ya.every(function(Ya){return["Web Map","Web Scene","Media Layer","Group Layer","Notebook"].includes(Ya.type)})&&(wa||ba);!Ia&&Oa&&(Ia=Oa.startWorkflow("share",{details:Ha.access,pageUrl:La,pageName:Pa,count:Na}));if(ba){var Qa=document.getElementById("share-dlg-container");Qa||(Qa=document.createElement("div"),Qa.id="share-dlg-container",document.body.append(Qa));
Ha=V.default.createElement("arcgis-item-share",{items:ya,portal:Ka,user:Ma,config:x.default,api:3},Qa);var Ra=function(Ya,Wa,$a){Ia&&(Ya={pageName:Pa,pageUrl:La,count:Na,details:null!==Ya&&void 0!==Ya?Ya:"mixed",error:void 0},Oa&&Oa.endWorkflow("share",Ya));1===ya.length?X.default.showAlert("success",l.default.substitute(g.default.sharingDlg.itemUpdated,[ya[0].title])):X.default.showAlert("success",l.default.substitute(g.default.sharingDlg.itemsUpdated,[ya[0].title,ya.length-1]));var Ta=ya.reduce(function(Za,
bb){var db;return f.__assign(f.__assign({},Za),(db={},db[bb.id]=!0,db))},{}),Xa=ya[0].portal;$a&&(ya=ya.concat(Wa.filter(function(Za){return!Ta[Za.id]}).map(function(Za){return new O.default(d.default.mixin(Za,{portal:Xa}))})));(0,p.default)(ya.map(d.default.hitch(T.default,"getItemSharing"))).then(function(Za){ya.forEach(function(bb,db){Ja=Za[db];db=(Ja.groups||[]).map(function(cb){return{id:cb.id,thumbnail:cb.thumbnail,title:cb.title}});d.default.mixin(bb,{access:(null===Ja||void 0===Ja?void 0:
Ja.access)||bb.access,sharing:Ja,groupData:db,sharedGroups:Ja.total||0});bb.contentStatus=U.default.getContentStatus(bb)});return(0,p.default)(ya.map(Ba.default.getVerifiedInfo))}).then(function(Za){Za.forEach(function(bb,db){ya[db].verified=bb});ya.forEach(function(bb){var db="public"===bb.access,cb=bb.types||[];cb=ha.default.concatUnique(cb,db?["is-public"]:["is-not-public"]);cb=ha.default.filterOut(cb,db?["is-not-public"]:["is-public"]);bb.types=cb.concat();bb.set("sharing",bb.sharing)});n.default.publish("view/updateShare",
ya);n.default.publish("view/deselectAll",{});window.setTimeout(function(){n.default.publish("aggregations/refresh")},500);V.default.removeComponent(Qa,document.body)})};Ha.addEventListener("workflowCancel",function(Ya){Ya=Ya.detail;var Wa=Ya.newShareLevel;"share"!==Ya.cancelAtStep&&Ra(Wa,[],!1);V.default.removeComponent(Qa,document.body)});Ha.addEventListener("workflowComplete",function(Ya){Ya=Ya.detail;var Wa=Ya.didUpdateDependentLayersSharing;Ra(Ya.newShareLevel,Ya.dependentLayersWithSourceItems.map(function($a){return $a.sourceItem}),
Wa)})}else{var Sa=document.createElement("div");Sa.classList.add("share-item-wrapper");document.body.appendChild(Sa);var Ua=function(){var Ya;document.documentElement.classList.remove("overflow-hidden");Sa.parentElement.removeChild(Sa);null===(Ya=null===oa||void 0===oa?void 0:oa.target)||void 0===Ya?void 0:Ya.focus()},Va=new c.default;Ka.canHavePartnerCollab()?ja.default.getCollaborations().then(function(Ya){var Wa;Ya=(null===(Wa=null===Ya||void 0===Ya?void 0:Ya.trustedOrgs)||void 0===Wa?void 0:Wa.filter(function($a){return-1<
$a.from.established&&-1<$a.to.established}))||[];Va.resolve(Ya)}):Va.resolve([]);Va.then(function(Ya){new pa.ShareWrapper(Sa,{apiVersion:3,portal:Ka,portalUser:Ma,request:ma.default,initialState:{resources:{items:ya},utilities:{onCancel:function(){Ia&&Oa&&Oa.cancelWorkflow("share",{pageName:Pa,pageUrl:La});Ua()},onComplete:function(Wa){var $a,Ta=0<(null===($a=null===Wa||void 0===Wa?void 0:Wa.errors)||void 0===$a?void 0:$a.length)&&Wa.errors[0];if(Ia){$a={pageName:Pa,pageUrl:La,count:Na,details:void 0,
error:void 0};if(Wa.selectedOptions){var Xa=Wa.selectedOptions,Za=Object.keys(Wa.selectedOptions).filter(function(cb){return"total"!==cb}).reduce(function(cb,gb){if(!cb||Xa[gb]>Xa[cb])cb=gb;return cb},null);$a.details=Xa[Za]===Xa.total?Za:"mixed"}Ta&&Ta.notSharedWith&&($a.error=Ta.notSharedWith);Oa&&Oa.endWorkflow("share",$a)}Ua();Ta?X.default.showAlert("error",Ta.error.message):1===ya.length?X.default.showAlert("success",l.default.substitute(g.default.sharingDlg.itemUpdated,[ya[0].title])):X.default.showAlert("success",
l.default.substitute(g.default.sharingDlg.itemsUpdated,[ya[0].title,ya.length-1]));var bb=ya.reduce(function(cb,gb){var ab;return f.__assign(f.__assign({},cb),(ab={},ab[gb.id]=!0,ab))},{}),db=ya[0].portal;Wa=(Wa&&Wa.dependentItems||[]).filter(function(cb){return!bb[cb.id]}).map(function(cb){return new O.default(d.default.mixin(cb,{portal:db}))});ya=ya.concat(Wa);(0,p.default)(ya.map(d.default.hitch(T.default,"getItemSharing"))).then(function(cb){ya.forEach(function(gb,ab){Ja=cb[ab];ab=(Ja.groups||
[]).map(function(hb){return{id:hb.id,thumbnail:hb.thumbnail,title:hb.title}});d.default.mixin(gb,{access:(null===Ja||void 0===Ja?void 0:Ja.access)||gb.access,sharing:Ja,groupData:ab,sharedGroups:Ja.total||0});gb.contentStatus=U.default.getContentStatus(gb)});return(0,p.default)(ya.map(Ba.default.getVerifiedInfo))}).then(function(cb){cb.forEach(function(gb,ab){ya[ab].verified=gb});ya.forEach(function(gb){var ab="public"===gb.access,hb=gb.types||[];hb=ha.default.concatUnique(hb,ab?["is-public"]:["is-not-public"]);
hb=ha.default.filterOut(hb,ab?["is-not-public"]:["is-public"]);gb.types=hb.concat();gb.set("sharing",gb.sharing)});n.default.publish("view/updateShare",ya);n.default.publish("view/deselectAll",{});window.setTimeout(function(){n.default.publish("aggregations/refresh")},500)})}},config:{groupsPerPage:100,hasTrustedOrgs:0<Ya.length}}})})}};W.shareOwnership=function(ba){ba.portal.getPortalUser().getGroups().then(function(oa){var wa=ba.item||{},Ea=ba.items||[wa],Ga=wa.type,Ja=new A.default({class:"sharedOwnershipDlg",
title:g.default.sharingDlg.sharedOwnershipTitle,buttonOk:g.default.common.ok,buttonCancel:g.default.common.cancel,style:{height:"auto"}}),ya=new N.default({value:{items:Ea,groups:oa}}),Ha;Ja.setContent(ya.domNode);ya.startup().then(function(){Ja.show()});var Ia=n.default.subscribe("/dlg/onOk",function(){ya.validate().then(function(){ya.shareWithSelectedGroup().then(function(){(0,p.default)(Ea.map(d.default.hitch(T.default,"getItemSharing"))).then(function(Ma){Ea.forEach(function(Na,La){Ha=Ma[La];
d.default.mixin(Na,{access:(null===Ha||void 0===Ha?void 0:Ha.access)||Na.access,sharing:Ha})});Ea[0].set("sharing",Ea[0].sharing);n.default.publish("view/deselectAll",{});ba.item&&("Web Map"===Ga||"Web Scene"===Ga?(k.default.defaults.io.errorHandler=function(){},Y.default.checkWebMapContent({webMapId:wa.id,webMapItemCard:wa,webMapConfig:wa.itemData,confirmItemControl:!0})):"Web Mapping Application"===Ga&&Y.default.checkWebAppContent({webAppId:wa.id,webAppItemCard:wa,confirmItemControl:!0}))});Ja.hide().then(function(){Ka.remove();
Ia.remove()})},function(Ma){Ma&&Ma.messageCode&&"GWM_0021"===Ma.messageCode&&ba.page._showError(Ma)})})});var Ka=n.default.subscribe("/dlg/onCancel",function(){Ka.remove();Ia.remove()})})};W.rateLimiting=function(ba){(new M.default({item:ba.item,user:ba.user})).showModal()};W.timeSettings=function(ba){var oa=ba.item,wa=ba.evt,Ea=ba.user;ba=ba.layerId||e.default.get(wa.target,"data-layerId");ba=T.default.findLayer(ba,oa.layers);(new H.default({item:oa,layer:ba,user:Ea})).showModal()};W.appendData=
function(ba){var oa=ba.item,wa=ba.page,Ea=ba.user,Ga=ba.layerId,Ja=ba.layer;ba=ba.newItemEntryPage;var ya,Ha;V.default.forEachNode(document.querySelectorAll(".append-container"),function(Ka){Ka.remove()});oa.thumbnail&&-1===oa.thumbnail.indexOf("thumbnail/ago_downloaded.")&&oa.thumbnail.indexOf("thumbnail/thumbnail.");var Ia=t.default.create("div",null,document.body,"last");oa=V.default.createElement("arcgis-new-item",{isActive:!0,existingItem:oa,portal:oa.portal,layers:oa.layers,user:Ea,layerId:Ga,
layer:Ja,config:x.default,api:3,firstStep:"appendSelect",workflow:"append",telemetry:wa.telemetry,newItemEntryPage:ba},Ia);oa.addEventListener("workflowCancel",function(Ka){var Ma;if(Ka.detail){switch((null===(Ma=Ka.detail)||void 0===Ma?void 0:Ma.overwriteStatus).toLowerCase()){case "completed":ya="success";Ha=g.default.appendData.overwriteSuccess;break;case "failed":ya="error";Ha=g.default.appendData.overwriteFailed;break;case "processing":ya="info";Ha=g.default.appendData.overwriteProcessing;break;
default:ya="info",Ha=g.default.appendData.overwriteProcessing}setTimeout(function(){X.default.showAlert(ya,Ha)},3E3)}else n.default.publish("/refresh"),Ia.remove()});oa.addEventListener("workflowComplete",function(Ka){var Ma=Ka.detail,Na=Ma.id,La=Ma.jobId;Ka=Ma.overwriteStatus;var Pa=Ma.appendType;Ma=Ma.result;var Oa="add"===Pa,Qa=g.default.appendData,Ra=Qa.singleInsertRecordCount,Sa=Qa.insertRecordCount,Ua=Qa.singleUpdateRecordCount;Qa=Qa.updateRecordCount;Oa={single:Oa?Ra:Ua,multiple:Oa?Sa:Qa,unknown:Oa?
Sa:Qa};if("overwrite"!==Pa){var Va=ka.default.getString(Oa,Ma.recordCount);switch(Ma.status.toLowerCase()){case "completed":ya="success";Ha=g.default.appendData.successAlert;break;case "failed":ya="error";Ha=g.default.appendData.failedAlert;break;case "processing":ya="info";Ha=g.default.appendData.processingAlert;break;default:ya="info",Ha=g.default.appendData.unknownAlert}setTimeout(function(){X.default.showAlert(ya,Va,{},Ha)},3E3);n.default.publish("append/done",{type:"success"});Ia.remove()}else{switch(Ka.toLowerCase()){case "completed":ya=
"success";Ha=g.default.appendData.overwriteSuccess;break;case "failed":ya="error";Ha=g.default.appendData.overwriteFailed;break;case "processing":ya="info";Ha=g.default.appendData.overwriteProcessing;break;default:ya="info",Ha=g.default.appendData.overwriteProcessing}setTimeout(function(){X.default.showAlert(ya,Ha)},3E3);Ia.remove();setTimeout(function(){Na?window.location.href="item.html?id\x3d".concat(Na).concat(La?"\x26jobid\x3d".concat(La):""):n.default.publish("itemData/update")},5E3)}})};W.updateData=
function(ba){var oa=ba.item,wa=ba.user;ba=ba.page;var Ea=oa.thumbnail&&-1===oa.thumbnail.indexOf("thumbnail/ago_downloaded.")&&-1===oa.thumbnail.indexOf("thumbnail/thumbnail."),Ga=t.default.create("div",null,document.body,"last");V.default.createElement("arcgis-new-item",{isActive:!0,existingItem:oa,portal:oa.portal,layers:oa.layers,user:wa,config:x.default,api:3,workflow:"update",telemetry:ba.telemetry},Ga).addEventListener("workflowComplete",function(Ja){Ja.detail.success?setTimeout(function(){X.default.showAlert("success",
g.default.appendData.successAlert)},3E3):setTimeout(function(){X.default.showAlert("error",g.default.appendData.failedAlert)},3E3);var ya=n.default.subscribe("itemData/update",function(){ya.remove();"Vector Tile Service"!==oa.type||Ea?"Image"===oa.type&&oa.set({thumbnailUrl:"".concat(oa.thumbnailUrl).concat(oa.thumbnailUrl.includes("?")?"\x26":"?","ts\x3d").concat(Date.now())}):(oa.set({thumbnail:"",thumbnailUrl:""}),oa.getThumbnail(!0))});Ga.remove()})};W.publishService=function(ba,oa,wa){void 0===
oa&&(oa="file");var Ea=ba.item,Ga=ba.user;ba=ba.page;var Ja=t.default.create("div",null,document.body,"last"),ya=Ga;Ea.owner!==Ga.username&&(ya=new Z.default(Ea.itemOwner));oa=V.default.createElement("arcgis-new-item",{isActive:!0,portal:Ea.portal,user:ya,existingItem:Ea,config:x.default,api:3,telemetry:ba.telemetry,existingItemType:oa,existingItemPublishType:wa},Ja);oa.addEventListener("workflowCancel",function(){n.default.publish("folders/refresh",{forcedDelay:1E3});t.default.destroy(Ja)});oa.addEventListener("workflowComplete",
function(Ha){var Ia,Ka=Ha.detail;Ha=Ka.id;var Ma=Ka.response,Na=Ka.jobId,La=Ka.serviceType,Pa=Ka.item;Ka=Ka.newItemMode;if(null===Ma||void 0===Ma?0:Ma.success)if(t.default.destroy(Ja),Ma=Na?"\x26jobid\x3d".concat(Na):"",Na="Map Service"===La?(null===(Ia=Pa.portal)||void 0===Ia?0:Ia.isPortal)||!Pa.tileAutoCreation?"#settings/manageTiles":"#overview/manageTiles":"","tileLayer"===Ka)window.location.href="item.html?id\x3d".concat(Ha).concat(Ma).concat(Na);else switch(null===Pa||void 0===Pa?void 0:Pa.type){case "Tile Package":Ia=
La?"#settings/buildCache":"";window.location.href="item.html?id\x3d".concat(Ha).concat(Ma).concat(Ia);break;case "Service Definition":Ia="Map Service"===La?"#settings/manageTiles":"";window.location.href="item.html?id\x3d".concat(Ha).concat(Ma).concat(Ia);break;default:window.location.href="item.html?id\x3d".concat(Ha).concat(Ma)}})};W.publishTiles=function(ba){var oa=this,wa=ba.item,Ea=ba.user,Ga=ba.evt,Ja=ba.layer,ya=wa&&wa.itemOwner&&wa.itemOwner.folders,Ha=e.default.get(Ga.target,"data-type"),
Ia=e.default.get(Ga.target,"data-method"),Ka=this._getPublishingTypeMessage(wa,Ha);this._getPublishingCostMessage(wa,Ha).then(function(Ma){Ka=Ma&&Ma.message||Ka;if(!Ma||Ma.availableCredits>=Ma.totalCost)if("features"===Ha){var Na=document.createElement("div"),La=function(Pa){(0,w.render)(Pa?(0,w.h)(ra.default,{title:g.default.itemProperties.publishViewLayer,itemId:wa.id,method:Ia,onClose:function(){La(!1)}}):null,Na)};La(!0)}else["vectorTiles","tiles"].includes(Ha)?oa.publishService(ba,"tileLayer",
Ha):(new L.default({portal:wa.portal,folders:ya,portalUser:Ea,message:Ka,item:wa,showFolders:!0,type:Ha||"tiles",serviceLayers:Ja?[Ja]:null,sublayer:Ja})).showModal().then(function(Pa){var Oa=null===Pa||void 0===Pa?void 0:Pa.id;Pa=!(null===Pa||void 0===Pa||!Pa.cacheOnDemand);Oa&&(Pa="tiles"===Ha?Pa?"":"#settings/manageTiles":"scenes"===Ha?"#settings/buildCache":"",window.location.href="item.html?id\x3d".concat(Oa).concat(Pa))});else oa._showError({title:g.default.publishTileServiceDlg.notEnoughCreditsTitle,
message:Ka})})};W.publishImagery=function(ba){var oa=this,wa=ba.item,Ea=ba.user,Ga=ba.layer,Ja=wa&&wa.itemOwner&&wa.itemOwner.folders,ya=e.default.get(ba.evt.target,"data-type"),Ha=this._getImageServiceTypeMessage(ya);this._getPublishingCostMessage(wa,ya).then(function(Ia){Ha=Ia&&Ia.message||Ha;!Ia||Ia.availableCredits>=Ia.totalCost?(new L.default({portal:wa.portal,folders:Ja,portalUser:Ea,message:Ha,item:wa,showFolders:!0,type:ya,serviceLayers:Ga?[Ga]:null,sublayer:Ga})).showModal().then(function(Ka){if(Ka=
null===Ka||void 0===Ka?void 0:Ka.id)window.location.href="item.html?id\x3d".concat(Ka)}):oa._showError({title:g.default.publishTileServiceDlg.notEnoughCreditsTitle,message:Ha})})};W._getImageServiceTypeMessage=function(ba){return"dynamicImagery"===ba?g.default.publishImageServiceDlg.dynamicImageryLayerDesc:g.default.publishImageServiceDlg.tileImageryLayerDesc};W._getPublishingTypeMessage=function(ba,oa){switch(oa){case "wfs":ba="wfsServiceDetailsDesc";break;case "ogcfeatures":ba="ogcFeatureServiceDetailsDesc";
break;case "scenes":ba="sceneServiceDetailsDesc";break;case "features":ba="viewServiceDetailsDesc";break;case "vectorTiles":ba="vectorServiceDetailsDesc";break;default:ba="serviceDetailsDesc"}return g.default.publishTileServiceDlg[ba]};W._getAvailableCredits=function(ba){var oa,wa;return(null===(oa=ba.user)||void 0===oa?void 0:oa.availableCredits)||(null===(wa=ba.subscriptionInfo)||void 0===wa?void 0:wa.availableCredits)||0};W._getPublishingCostMessage=function(ba,oa){var wa=new c.default;if("scenes"!==
oa)wa.resolve(null);else{var Ea=g.default.publishTileServiceDlg.sceneServiceDetailsDescCost,Ga=this._getAvailableCredits(ba.portal||{});na.default.fetchScenePublishingCredits(ba,ba.layers||[]).then(function(Ja){Ea=l.default.substitute(g.default.publishTileServiceDlg.createLayerCost,{credits:sa.default.format(Ja),availableCredits:sa.default.format(Ga)});Ea=Ga>=Ja?l.default.substitute(g.default.publishTileServiceDlg.sceneServiceDetailsDescCost,{createLayerCost:Ea}):Ea;wa.resolve({totalCost:Ja,availableCredits:Ga,
message:Ea})})}return wa};W.moveItem=function(ba){var oa,wa=ba.page.portal,Ea=ba.portalUser||(null===(oa=ba.item)||void 0===oa?void 0:oa.itemOwner)||wa.getPortalUser(),Ga=ba.currentFolder&&ba.currentFolder.id||ba.item&&ba.item.folderId||Ea.username,Ja=ba.selectedItems||[ba.item];ba=new fa.default({items:Ja,owner:Ea,portal:wa,currentFolder:Ga});ba.open();ba.on("close",function(ya){n.default.publish("folders/refresh");if(ya){var Ha=ya.newFolder;ya=ya.error;if(Ha&&!ya)if(n.default.publish("items/itemDetailRefresh",
Ha),Ga&&"all"!==Ga){Ja.forEach(function(Na){d.default.mixin(Na,{folder:Ha,folderId:Ha.id,ownerFolder:Ha.id})});n.default.publish("items/refresh",{removedItems:Ja});var Ia=n.default.subscribe("items/refreshComplete",function(){n.default.publish("view/deselectAll");Ia.remove();n.default.publish("folders/refreshAndSelect");n.default.publish("aggregations/refresh")})}else n.default.publish("view/deselectAll",{}),n.default.publish("aggregations/refresh");else if(ya){var Ka=null===ya||void 0===ya?void 0:
ya.movedItems;if((null===Ka||void 0===Ka?0:Ka.length)&&Ga&&"all"!==Ga){n.default.publish("items/refresh",{removedItems:null===ya||void 0===ya?void 0:ya.movedItems});var Ma=n.default.subscribe("items/refreshComplete",function(){Ma.remove();n.default.publish("aggregations/refresh")})}}}})};W.openLayerMetadata=function(ba){var oa,wa,Ea=ba.item,Ga=ba.evt,Ja=null!==(oa=ba.page)&&void 0!==oa?oa:null===(wa=null===ba||void 0===ba?void 0:ba.scope)||void 0===wa?void 0:wa.page,ya=Ga.target;ba=ba.layerId||e.default.get(ya,
"data-layerId");var Ha=!1,Ia=!1;V.default.disableNode(ya,!0);Fa.default.openLayerEditor(Ea,ba).then(function(Ka){var Ma=[],Na=function(){V.default.disableNode(ya,!1)};Ma.push(Ka.gxeAdaptor.on("metadata-save",function(La){var Pa;if(null===(Pa=null===La||void 0===La?void 0:La.response)||void 0===Pa?0:Pa.success)Ha=!0,Ia=!1}));Ma.push(Ka.gxeAdaptor.on("metadata-delete",function(La){var Pa;if(null===(Pa=null===La||void 0===La?void 0:La.response)||void 0===Pa?0:Pa.success)Ia=!0,Ha=!1}));Ma.push(b.default.after(Ka.dialog,
"show",Na));Ma.push(b.default.after(Ka.dialog,"hide",Na));Ma.push(b.default.after(Ka,"onDialogClose",function(){Na();Ma.forEach(function(La){var Pa;null===(Pa=null===La||void 0===La?void 0:La.remove)||void 0===Pa?void 0:Pa.call(La)});(Ha||Ia)&&setTimeout(function(){Ja._item.set("serviceChanged",!0)},500)}))})};W.viewMetadata=function(ba){ba="".concat(ba.item.itemUrl,"/info/metadata/metadata.xml");var oa=R.default.getToken();oa=oa?"\x26token\x3d".concat(oa):"";R.default.openPage("".concat(ba,"?format\x3ddefault").concat("\x26output\x3dhtml").concat(oa),
!1)};W.editMetadata=function(ba){var oa=ba.item,wa=ba.evt.target,Ea=!1;V.default.disableNode(wa,!0);Fa.default.openEditor(oa).then(function(Ga){var Ja=[],ya=function(){V.default.disableNode(wa,!1)};Ja.push(Ga.gxeAdaptor.on("metadata-save",function(Ha){var Ia;if(null===(Ia=null===Ha||void 0===Ha?void 0:Ha.response)||void 0===Ia?0:Ia.success)Ha=ha.default.concatUnique(oa.typeKeywords,["Metadata"]),oa.set("typeKeywords",Ha.join(",")),Ea=!0}));Ja.push(Ga.gxeAdaptor.on("metadata-delete",function(Ha){var Ia;
if(null===(Ia=null===Ha||void 0===Ha?void 0:Ha.response)||void 0===Ia?0:Ia.success)Ha=ha.default.filterOut(oa.typeKeywords,["Metadata"]),oa.set("typeKeywords",Ha.join(",")),Ea=!1}));Ja.push(b.default.after(Ga.dialog,"show",ya));Ja.push(b.default.after(Ga.dialog,"hide",ya));Ja.push(b.default.after(Ga,"onDialogClose",function(){ya();Ja.forEach(function(Ha){var Ia;null===(Ia=null===Ha||void 0===Ha?void 0:Ha.remove)||void 0===Ia?void 0:Ia.call(Ha)});Ea&&setTimeout(function(){var Ha="".concat(oa.portal.portalUrl,
"content/items/").concat(oa.id);R.default.request({url:Ha}).then(function(Ia){oa.set("accessInformation",Ia.accessInformation);oa.set("description",Ia.description);oa.set("licenseInfo",Ia.licenseInfo);oa.set("snippet",Ia.snippet);oa.set("tags",Ia.tags);oa.set("title",Ia.title);oa.set("serviceChanged",!0)})},500)}))})};W.setExtent=function(ba){};W.setSearchExtent=function(ba){ba=ba.item;var oa=ba.proxyFilter||{};ba=ba.unsavedSearchExtent||oa.searchExtent||null;var wa=new B.default;ba=ba?za.default.stringToArray(ba,
",",!1):null;wa._publish=function(Ea){n.default.publish("searchExtent/update",Ea)};ba=4===(null===ba||void 0===ba?void 0:ba.length)?[[Number(ba[0]),Number(ba[1])],[Number(ba[2]),Number(ba[3])]]:null;wa.show(ba);v.default.once(wa._extentDialog,"hide",function(){wa._extentDialog.destroyRecursive();wa.destroyRecursive()})};W.reassignItem=function(ba){var oa,wa,Ea,Ga,Ja=ba.item||{},ya=ba.items||[Ja],Ha=null===(oa=ba.page)||void 0===oa?void 0:oa.telemetry;oa=ba.portal||ba.page&&ba.page.portal||{};var Ia=
(null===Ja||void 0===Ja?void 0:Ja.itemOwner)||ba.owner,Ka=(null===(wa=ba.owner)||void 0===wa?void 0:wa.getCurrentFolder())||{};wa=null===(Ea=Ja.resultData)||void 0===Ea?void 0:Ea.length;Ea="Feature Service"===(null===(Ga=null===Ja||void 0===Ja?void 0:Ja.sourceData)||void 0===Ga?void 0:Ga.type);var Ma=ba.dontRemoveFromList||!1;if(!Ja.isHostedService&&wa||Ja.isHostedService&&Ea&&("WFS"===Ja.type||Ja.isDataView||"Map Service"===Ja.type||"Scene Service"===Ja.type)){var Na=document.createElement("div");
(0,w.render)((0,w.h)(Da.ChangeOwnerWarning,{sourceItem:Ja.sourceData,portal:oa,onClose:function(){(0,w.render)(null,Na)}}),Na)}else Ga=new ca.default({items:ya,owner:Ia,portal:oa,telemetry:Ha,currentFolder:Ka}),Ga.open(),Ga.on("close",function(La){var Pa;if(La){var Oa=La.newOwner,Qa=La.newFolder,Ra=La.error;La=La.updatedItems;if(Oa&&Qa&&!Ra)if(Ma=Ma||Oa===Ia.username&&(null===(Pa=ba.folder)||void 0===Pa?void 0:Pa.isAll),ya.forEach(function(Va){d.default.mixin(Va,{owner:Oa})}),ba.noRedirect){n.default.publish("items/refresh",
Ma?{forcedDelay:1E3}:{removedItems:ya});var Sa=n.default.subscribe("items/refreshComplete",function(){Sa.remove();n.default.publish("folders/refreshAndSelect");Ra||n.default.publish("view/deselectAll",{});n.default.publish("aggregations/refresh")})}else window.location.href="item.html?id\x3d".concat(Ja.id);if(Ra){La.map(function(Va){return ha.default.find(ya,function(Ya){return Ya.id===Va.itemId})}).forEach(function(Va){d.default.mixin(Va,{owner:Oa})});n.default.publish("items/refresh",{forcedDelay:1E3});
var Ua=n.default.subscribe("items/refreshComplete",function(){Ua.remove();n.default.publish("aggregations/refresh")})}}})};W.deleteItem=function(ba){return f.__awaiter(this,void 0,void 0,function(){var oa,wa,Ea,Ga,Ja,ya,Ha,Ia,Ka,Ma,Na,La=this,Pa;return f.__generator(this,function(Oa){oa=ba.item;wa=oa.portal||{};Ia=function(Qa,Ra,Sa){var Ua,Va;if(null===Qa||void 0===Qa?0:Qa.success)if(ba.noRedirect){n.default.publish("items/refresh",{removedItems:[oa]});var Ya=n.default.subscribe("items/refreshComplete",
function(){n.default.publish("view/deselectAll");Ya.remove();Ra();n.default.publish("alert/show",{type:"success",text:g.default.itemProperties.itemDeleteSuccess});n.default.publish("aggregations/refresh")})}else(null===Ja||void 0===Ja?0:Ja.id)?window.location.href="item.html?id\x3d".concat(Ja.id):oa.isAdmin&&!oa.isOwner?window.location.href="content.html?user\x3d".concat(oa.owner):(Qa=(null===(Va=null===(Ua=null===Sa||void 0===Sa?void 0:Sa.permanentlyDeleted)||void 0===Ua?void 0:Ua.removed)||void 0===
Va?0:Va.length)?"permanent":"recycled",window.location.href="content.html?fromDelete\x3d".concat(Qa));else Ra(),ba.noRedirect?n.default.publish("alert/show",{type:"error",text:g.default.common.errors[(null===Qa||void 0===Qa?void 0:Qa.messageCode)||""]||Qa}):La._showError(Qa)};if(Ka=wa.recycleBinEnabled)return Ma=t.default.create("div",null,document.body,"last"),Na=function(Qa){return Ka?Qa?g.default.itemProperties.itemsPermanentDelete.single:g.default.itemProperties.itemsRecycle.single:g.default.itemProperties.itemsDelete.single},
(0,w.render)((0,w.h)(Ca.DeleteItems,{items:[oa],portal:ba.page.portal,onCancel:function(){V.default.removeComponent(Ma,document.body)},onSubmit:function(Qa,Ra){return f.__awaiter(La,void 0,void 0,function(){var Sa,Ua,Va,Ya,Wa,$a,Ta,Xa;return f.__generator(this,function(Za){switch(Za.label){case 0:return[4,Promise.all([U.default.deleteItems(Qa,!1),U.default.deleteItems(Ra,!0)])];case 1:return Va=Za.sent(),Ya=Va[0],Wa=Va[1],Sa=f.__spreadArray(f.__spreadArray([],Ya.removed,!0),Wa.removed,!0),Ua=f.__spreadArray(f.__spreadArray([],
Ya.errors,!0),Wa.errors,!0),$a=Sa,Ta=Ua,V.default.removeComponent(Ma,document.body),$a.length?(n.default.publish("items/refresh",{removedItems:$a}),Ia($a[0],null,{deleted:Ya,permanentlyDeleted:Wa})):Ia(Ta[0]),Xa=n.default.subscribe("items/refreshComplete",function(){var bb;Xa.remove();n.default.publish("aggregations/refresh");if(Ta.length){var db=(null===(bb=Ta[0])||void 0===bb?void 0:bb.messageCode)||"";bb=g.default.common.errors[db]||Ta[0];n.default.publish("alert/show",{type:"error",text:bb})}else bb=
Na(1===Wa.removed.length),n.default.publish("alert/show",{type:"success",text:bb})}),[2]}})})},recycleEnabled:Ka,disableLinks:"settings"===(null===(Pa=ba.page)||void 0===Pa?void 0:Pa._currentView),allowDiscouraged:!0}),Ma),[2];(0,p.default)({canBeDeleted:wa.isPortal?oa.canBeDeleted():null,sourceData:oa.getSourceData(),resultData:oa.getResultData()}).then(function(Qa){var Ra,Sa,Ua;Ea=null===(Ra=Qa.canBeDeleted)||void 0===Ra?void 0:Ra.success;Ga=!Ea&&(null===(Sa=Qa.canBeDeleted)||void 0===Sa?void 0:
Sa.offendingItems)||[];Ja=Qa.sourceData;ya=Qa.resultData;Ha=!Ja&&(null===ya||void 0===ya?void 0:ya.length)&&!oa.isHostedService;Ra="".concat(g.default.itemProperties.deleteItemBlocked).concat('\x3cbr/\x3e\x3cul class\x3d"list-plain"\x3e${layerList}\x3c/ul\x3e');Sa="".concat(g.default.itemProperties.deleteSourceItem).concat('\x3cbr/\x3e\x3cul class\x3d"list-plain"\x3e${layerList}\x3c/ul\x3e\x3cbr\x3e').concat(g.default.itemProperties.deleteSourceItemMsg);var Va=Ha?Sa:Ra,Ya="",Wa="".concat(wa.helpBase).concat(wa.helpMap.m["120001208"]);
Ra=ya||Ga||void 0;var $a=(null===Ra||void 0===Ra?0:Ra.length)?Ra.length-5:0,Ta=(null===Ra||void 0===Ra?0:Ra.length)?Ra.map(function(Xa){return"id:".concat(Xa.id||Xa.itemId)}).join(" OR "):"";wa.isPortal?Ea?T.default.createConfirmationDialog({strings:{title:g.default.common.deleteLabel,description:g.default.deleteWarningDlg.confirmDeleteSingleItem,ok:g.default.common.deleteLabel},renderHtmlDescription:!0,okColor:"red",onOk:function(Xa){T.default.deleteItem(oa).then(function(Za){Ia(Za,Xa)},function(Za){Ia(Za,
Xa)})}}):Ea||Ga.length?(Qa=((null===(Ua=Qa.canBeDeleted)||void 0===Ua?void 0:Ua.offendingItems)||[]).map(function(Xa){return R.default.request({url:"".concat(wa.portalUrl,"content/items/").concat(Xa.itemId)})}),(0,p.default)(Qa).then(function(Xa){Ga=Xa;Ga=Ga.map(function(Za){return new O.default(d.default.mixin(Za,{portal:wa}))});Ga.forEach(function(Za,bb){5>bb&&(Ya+=l.default.substitute('\x3cli\x3e\x3ca href\x3d"item.html?id\x3d${relItem.id}" target\x3d"_blank"\x3e${relItem.title}\x3c/a\x3e, ${relItem.displayName}\x3c/li\x3e',
{relItem:Za,i18n:g.default}))});Ya+=5<Ga.length?l.default.substitute('\x3cli\x3e\x3ca target\x3d"_blank" href\x3d"search.html?t\x3dcontent\x26q\x3d(${query})"\x3e${i18n.FilterDlg.and} ${count} ${i18n.itemProperties.more}\x3c/a\x3e\x3c/li\x3e',{query:encodeURIComponent(Ta),i18n:g.default,count:$a||0}):"";Va=l.default.substitute(Va,{layerList:Ya,helpTitle:g.default.itemProperties.learnMoreDeletingSourceItems,helpUrl:Wa});Ha?T.default.createConfirmationDialog({strings:{title:g.default.common.notice,
description:Va,ok:g.default.common.yesLabel,cancel:g.default.common.noLabel},renderHtmlDescription:!0,onOk:function(Za){T.default.deleteItem(oa).then(function(bb){Ia(bb,Za)},function(bb){Ia(bb,Za)})}}):T.default.createConfirmationDialog({strings:{title:g.default.common.notice,description:Va},renderHtmlDescription:!0,hideCancel:!0,autoCloseOnOk:!0})})):(Ua=Qa.canBeDeleted,n.default.publish("alert/show",{type:"error",text:Ua&&(Ua.messageCode&&g.default.common.errors[Ua.messageCode]||Ua.message||g.default.common.errors.genericError.message)})):
!ya||!ya.length||La.isFeedWithSingleHostedFeatureLayer(oa,ya)||La.isHostedFeatureLayerFromFeed(oa,ya)?T.default.createConfirmationDialog({strings:{title:g.default.common.deleteLabel,description:g.default.deleteWarningDlg.confirmDeleteSingleItem,ok:g.default.common.deleteLabel},okColor:"red",onOk:function(Xa){T.default.deleteItem(oa).then(function(Za){Ia(Za,Xa)},function(Za){Ia(Za,Xa)})}}):(ya.forEach(function(Xa,Za){5>Za&&(Ya+=l.default.substitute('\x3cli\x3e\x3ca href\x3d"item.html?id\x3d${relItem.id}" target\x3d"_blank"\x3e${relItem.title}\x3c/a\x3e, ${relItem.displayName}\x3c/li\x3e',
{relItem:Xa,i18n:g.default}))}),Ya+=5<ya.length?l.default.substitute('\x3cli\x3e\x3ca target\x3d"_blank" href\x3d"search.html?t\x3dcontent\x26q\x3d(${query})"\x3e${i18n.FilterDlg.and} ${count} ${i18n.itemProperties.more}\x3c/a\x3e\x3c/li\x3e',{query:encodeURIComponent(Ta),i18n:g.default,count:$a||0}):"",Va=l.default.substitute(Va,{layerList:Ya,helpTitle:g.default.itemProperties.learnMoreDeletingSourceItems,helpUrl:Wa}),Ha?T.default.createConfirmationDialog({strings:{title:g.default.common.notice,
description:Va,ok:g.default.common.yesLabel,cancel:g.default.common.noLabel},renderHtmlDescription:!0,onOk:function(Xa){T.default.deleteItem(oa).then(function(Za){Ia(Za,Xa)},function(Za){Ia(Za,Xa)})}}):T.default.createConfirmationDialog({strings:{title:g.default.common.notice,description:Va},hideCancel:!0,renderHtmlDescription:!0,autoCloseOnOk:!0}))},function(Qa){n.default.publish("alert/show",{type:"error",text:Qa&&(Qa.messageCode&&g.default.common.errors[Qa.messageCode]||Qa.message||g.default.common.errors.genericError.message)})});
return[2]})})};W.toggleAttachments=function(ba){var oa=ba.item,wa=ba.evt,Ea=oa.isDataView,Ga=g.default.itemProperties,Ja=Ea?Ga.showAttachments:Ga.enableAttachments,ya=Ea?Ga.hideAttachments:Ga.disableAttachments,Ha=Ea?Ga.showingAttachments:Ga.enablingAttachments,Ia=Ea?Ga.hidingAttachments:Ga.disablingAttachments,Ka=Ea?Ga.enablingAttachmentsViewMessage:Ga.enablingAttachmentsMessage;Ga=Ea?Ga.disableAttachmentsViewMessage:Ga.disableAttachmentsMessage;var Ma=ba.layerId||e.default.get(wa.target,"data-layerId"),
Na=ba.layer||T.default.findLayer(Ma,oa.layers),La=Na.hasAttachments,Pa=function(Oa){T.default.enableAttachments(oa,Na,!La).then(function(){oa.set("maxAgeCheck",!0);e.default.set(wa.target,"innerHTML","".concat(ea.default.inline.attachment["16"]).concat(La?Ja:ya));null===Oa||void 0===Oa?void 0:Oa()},function(Qa){Qa=Qa&&(Qa.messageCode&&g.default.common.errors[Qa.messageCode]||Qa.message||g.default.common.errors.genericError.message);null===Oa||void 0===Oa?void 0:Oa();n.default.publish("alert/show",
{type:"error",text:Qa})})};ba=function(Oa){T.default.createConfirmationDialog({strings:{title:La?ya:Ja,description:Oa,ok:g.default.common.yesLabel,cancel:g.default.common.noLabel,processing:La?Ia:Ha},onOk:function(Qa){Pa(Qa)}})};Ea?Pa():ba(La?Ga:Ka)};W.createApp=function(ba){var oa,wa=ba.item,Ea=ba.portal;ba=ba.evt;if(null===(oa=null===ba||void 0===ba?void 0:ba.target)||void 0===oa?0:oa.href)return window.open(ba.target.href,"_blank");var Ga=wa.isHostedTemplate;oa="wab"===e.default.get(ba.target,
"data-type")||ha.default.includes(wa.typeKeywords,"Web AppBuilder for ArcGIS");ba=e.default.get(ba.target,"data-type")||null;Ga=Ga||oa;var Ja=new y.default({item:wa});oa={isWab:oa};if(ba){"webscene"===ba&&Ea.isPortal&&(oa.typeInfo="webscene_portal");if("storymap"===ba)return Ea="Web Scene"===wa.type?"webscene":"webmap",window.open("".concat(x.default.storymapsUrl,"/stories/new?").concat(Ea,"\x3d").concat(wa.id),"_blank");(wa=Ga?Ja.showModal(oa):Ja.showWizard(oa))&&wa.then(function(ya){if(null===ya||
void 0===ya?0:ya.configureUrl)window.location.href=ya.configureUrl})}};W.profilePopup=function(ba){var oa=this,wa=ba.item,Ea=ba.evt;(wa=ba.profile||wa.owner||(ba.user?ba.user.username||ba.user:null))&&!this._popup&&(this._popup=new Q.default({username:wa,opener:Ea.target,portal:ba.page.portal}),this._popup.open(),v.default.once(this._popup,"close",function(){oa._popup=void 0}))};W.advancedOfflineOptions=function(ba){var oa=document.createElement("div");document.body.appendChild(oa);(new ua.default({item:ba.item,
page:ba.page},oa)).open()};W.attachCode=function(ba){var oa=ba.item;ba=oa.codeAttachment;var wa=new F.default({item:oa,sharing:oa.sharing});wa.show(ba);b.default.after(wa,"onUpload",function(){oa.set("codeAttachmentChanged",!0);wa.hide()})};W.deleteCode=function(ba){var oa=ba.item;ba=ba.item;var wa=ba.portal,Ea=ba.codeAttachment;ba="Web Mapping Application"===oa.type&&ha.default.includes(oa.typeKeywords,"Web AppBuilder");Ea&&T.default.createConfirmationDialog({strings:{title:g.default.itemProperties.removeAttachmentTitle,
description:"".concat(g.default.itemProperties.removeAttachmentMsg).concat(ba?"":"\x3cbr\x3e\x3cbr\x3e".concat(g.default.itemProperties.removeAttachmentUpdate)),ok:g.default.itemProperties.removeAttachmentButton},okColor:"red",renderHtmlDescription:!0,onOk:function(Ga){var Ja="".concat(wa.portalUrl,"content/items/").concat(Ea.id);R.default.request({url:Ja}).then(function(ya){ya=new O.default(d.default.mixin(ya,{portal:oa.portal}));T.default.deleteItem(ya,{permanentDelete:!0}).then(function(){Ga();
oa.set("codeAttachment",null)},function(){Ga()})},function(){Ga()})}})};W.thumbnail=function(ba){var oa=this,wa,Ea,Ga,Ja,ya=document.getElementById("item-thumb-modal-container");ya||(ya=document.createElement("div"),ya.id="item-thumb-modal-container",document.body.appendChild(ya));var Ha=function(){(0,w.render)(null,ya)},Ia=g.default.GroupWidget.thumbnailDlg,Ka=(null===(Ea=null===(wa=ba.item.itemData)||void 0===wa?void 0:wa.map)||void 0===Ea?void 0:Ea.itemId)||(null===(Ja=null===(Ga=ba.item.itemData)||
void 0===Ga?void 0:Ga.values)||void 0===Ja?void 0:Ja.webmap),Ma={contentClass:"esriThumbnailDlg",onSave:function(Na){return f.__awaiter(oa,void 0,void 0,function(){var La,Pa,Oa,Qa,Ra,Sa,Ua,Va,Ya,Wa,$a;return f.__generator(this,function(Ta){switch(Ta.label){case 0:La=new FormData,Pa="thumbnail"+(new Date).getTime()+"."+Na.format,La.append("thumbnail",Na.blob,Pa),La.append("f","json"),Oa=ba.item,Qa=ba.page.portalUser,Sa=(Ra=Oa.itemOwner)?Ra.userContentUrl:Qa.userContentUrl,Ua=Oa.folderId&&"/"!==Oa.folderId?
"/".concat(Oa.folderId):"",Va="".concat(Sa).concat(Ua,"/items/").concat(Oa.id,"/update"),Ta.label=1;case 1:return Ta.trys.push([1,4,,5]),[4,R.default.request({url:Va,form:La,timeout:12E4},{usePost:!0})];case 2:return Ta.sent(),[4,Qa.getItem(Oa.id)];case 3:return Ya=Ta.sent(),Wa=Oa.thumbnailUrl,Ya.thumbnailUrl&&($a=-1<Ya.thumbnailUrl.indexOf("?token\x3d"),Wa="".concat(Ya.thumbnailUrl).concat($a?"\x26":"?","ts\x3d").concat((new Date).getTime())),Oa.set("thumbnailUrl",Wa),Ha(),[3,5];case 4:return Ta.sent(),
[3,5];case 5:return[2]}})})},onCancel:Ha,allowFromMap:!0,height:292,aspectRatio:1.5,zoomToFull:!0,fillBackground:!1,itemId:ba.item.id,texts:{title:Ia.createThumb,drag:Ia.uploadImage,size:Ia.dragAndDrop}};"Web Experience"!==ba.item.type&&"StoryMap"!==ba.item.type||Ka||!ba.item.itemDataUrl?(0,w.render)((0,w.h)(da.default,f.__assign(f.__assign({},Ma),{mapId:"Web Mapping Application"===ba.item.type&&Ka?Ka:ba.item.id})),ya):R.default.request({url:ba.item.itemDataUrl},{addToken:!1}).then(function(Na){(null===
Na||void 0===Na?0:Na.resources)?(Na=Object.values(Na.resources).find(function(La){return"webmap"===La.type}),Na=null===Na||void 0===Na?void 0:Na.data):Na=Object.values((null===Na||void 0===Na?void 0:Na.dataSources)||{}).find(function(La){return"WEB_MAP"===La.type});(0,w.render)((0,w.h)(da.default,f.__assign(f.__assign({},Ma),{mapId:(null===Na||void 0===Na?0:Na.itemId)?Na.itemId:ba.item.id})),ya)},function(Na){})};W.newMapViewer=function(ba){var oa=ba.item;ba=ba.evt;var wa=e.default.get(ba.currentTarget,
"data-href")||oa.mapNewViewerUrl,Ea=-1<wa.indexOf("useExisting\x3d1"),Ga=oa.canOpenInNewMapViewer,Ja=oa.portal.defaultMapViewer,ya=["OGCFeatureServer","Media Layer","Group Layer"].includes(oa.type);("modern"===Ja||ya)&&Ga?window.location=e.default.get(ba.currentTarget,"href")||oa.newMapViewerUrl:"Web Map"!==oa.type&&Ea?window.location=wa:(0,D.default)().then(function(Ha){if(Ha&&!0===Ha.c){var Ia=new K.default;Ia.show(wa,Ha);v.default.once(Ia._dialog,"hide",function(){Ia._dialog.destroyRecursive();
Ia.destroy()})}else window.location=wa})};W.whatsNew=function(ba){var oa=new c.default,wa=ba.key,Ea=ba.endDate,Ga=ba.redirectUrl,Ja=ba.disableDebugBlock,ya=new Date((new Date).getTime()+31556926E3),Ha={},Ia=new Date,Ka=R.default.getCookie("esri_whatsnew")||{},Ma={closeable:!1,showCancel:!!Ga,buttonOkLabel:Ga?g.default.common.learnMore:g.default.common.gotIt,buttonCancelLabel:g.default.common.gotIt,className:"whatsNewDlg"},Na=-1<window.location.hostname.indexOf("esri.com")?".esri.com":".arcgis.com";
if(Ia<Ea&&(Ja||!x.default.isDebug))if(Ka[wa])oa.resolve(!0);else{var La=new A.default(Ma);Ga?(q.default.add(La.okButton.domNode,"hide"),Ea=t.default.create("a",{className:"btn right learn-more-link icon-ui-link-external",href:Ga,target:"_blank",innerHTML:g.default.addItemFrm.learnMore},La.actionBarNode,"last")):Ea=La.okButton;v.default.once(Ea,"click",function(){La.hide()});v.default.once(La,"hide",function(){Ha[wa]=!0;(0,a.default)("esri_whatsnew",m.default.stringify(d.default.mixin(Ka,Ha)),{expires:ya,
path:"/",domain:Na,sameSite:"Strict"});oa.resolve(!0)});La.show({message:ba.message||"",title:ba.title||""})}else Ka[wa]&&(delete Ka[wa],(0,a.default)("esri_whatsnew",m.default.stringify(Ka),{expires:ya,path:"/",domain:Na,sameSite:"Strict"})),oa.resolve(!0);return oa};W.shareSocial=function(ba){var oa=ba.evt.target;ba=ba.item;"public"!==(null===ba||void 0===ba?void 0:ba.access)?T.default.createConfirmationDialog({strings:{title:g.default.itemLinks.shareItem,description:r.default.substitute({appTitle:x.default.portalName||
"ArcGIS.com"},g.default.itemLinks.shareItemMsg)},hideCancel:!0,hideClose:!0,autoCloseOnOk:!0,onOk:function(){window.open(e.default.get(oa,"href"))}}):window.open(e.default.get(oa,"href"))};W.sceneJobStatus=function(ba){var oa=ba.item,wa=ba.item;ba=wa.portal;var Ea=wa.portal.isPortal,Ga=oa.properties.cacheJobUrl;wa=oa.lastCachingJobStatus;var Ja=oa.serverToken?"?token\x3d".concat(oa.serverToken):"",ya=Ea?"".concat(Ga).concat(Ja):"".concat(oa.adminUrl,"/").concat(Ga).concat(Ja);oa=Ea?Ga:"".concat(oa.adminUrl,
"/").concat(Ga).concat(Ja);(new C.default).show(ba,ba.portalUser,ya,oa,wa)};W.manageSceneCache=function(ba){var oa=ba.item,wa=ba.page;ba=ba.item.portal.isPortal?wa._hostedFederatedServer:void 0;wa=oa.sourceData||{};(new E.default).show(wa,oa,ba)};W.markItemAsAuthoritative=function(ba){var oa,wa=ba.item,Ea=((null===(oa=wa.portal)||void 0===oa?0:oa.isVerified)&&"public"===wa.access?"public":"org")+"_authoritative";wa._setContentStatusTo(Ea).then(function(Ga){Ga.success&&(wa.set("protected",!0),n.default.publish("item/protect",
{protect:!0}),wa.set("contentStatus",Ea));return Ba.default.getVerifiedInfo(wa)}).then(function(Ga){wa.set("verified",Ga)})};W.markItemAsDeprecated=function(ba){var oa=ba.item;oa._setContentStatusTo("deprecated").then(function(wa){wa.success&&(oa.set("contentStatus","deprecated"),oa.set("verified",!1))})};W.removeContentStatus=function(ba){var oa=ba.item;oa._setContentStatusTo("").then(function(wa){wa.success&&(oa.set("contentStatus",""),oa.set("verified",!1))})};W.httpsUpdate=function(ba){var oa=
document.createDocumentFragment();ba=new xa.default(ba,t.default.create("div",null,oa));var wa=T.default.createDialogWrapper({className:"update-to-https-dlg",draggable:!(0,u.default)("touch"),title:g.default.itemProperties.updateLayersToHTTPS},oa);oa=function(){wa.hide()};ba.startup();ba.own(n.default.subscribe("update-to-https/done",oa),n.default.subscribe("update-to-https/cancel",oa));wa.show()};W.domainUpdate=function(ba){var oa=document.createDocumentFragment(),wa=new va.default(ba,t.default.create("div",
null,oa)),Ea=T.default.createDialogWrapper({className:"update-domains-dlg",draggable:!(0,u.default)("touch"),title:g.default.itemProperties.domainsTitle},oa);wa.startup();wa.own(n.default.subscribe("update-domain/done",function(){Ea.hide()}));Ea.show();setTimeout(function(){wa.domainReplace.value&&wa.domainReplace.focus()},200)};W.replaceLayer=function(ba){(new la.default({user:ba.user,item:ba.item,page:ba.page},t.default.place(t.default.create("div"),document.body.lastChild,"after"))).open()};W.replaceSceneLayer=
function(ba){(new ta.default({user:ba.user,item:ba.item},t.default.place(t.default.create("div"),document.body.lastChild,"after"))).open()};W.updateSourceUrlToHttps=function(ba){var oa=ba.page,wa=ba.item;ba="".concat(x.default.restBaseUrl,"portals/checkurl");var Ea=[200,301,302,304,307,401,403,407,498,499],Ga=null===wa||void 0===wa?void 0:wa.url,Ja=(null===wa||void 0===wa?void 0:wa.sourceUrl)&&za.default.startsWith(wa.sourceUrl,"http://"),ya=null===wa||void 0===wa?void 0:wa.sourceUrl;if(Ja){var Ha=
ya.replace("http://","https://");R.default.request({url:"".concat(ba,"?url\x3d").concat(encodeURIComponent("".concat(Ha,"?f\x3djson")))},{addToken:!1}).then(function(Ia){Ia&&!Ia.code&&ha.default.includes(Ea,Ia.httpStatusCode)?oa.updateItem({url:Ha}).then(function(){wa.set({url:Ga,sourceUrl:Ha});n.default.publish("item/proxy-url-update",{sourceUrl:Ha});X.default.showAlert("success",g.default.itemProperties.upgradeToHttpsSuccess)}):X.default.showAlert("error",g.default.itemProperties.upgradeToHttpsFail)},
function(Ia){X.default.showAlert("error",g.default.itemProperties.upgradeToHttpsFail)})}};W.downloadImage=function(ba){T.default.downloadImage(ba).then(function(oa){oa&&oa.url&&(window.location=oa.url)})};W.refreshSnapshot=function(ba){var oa,wa,Ea,Ga,Ja,ya=ba.item,Ha=ba.page,Ia="Map Service"===ya.type;ba="Feature Service"===ya.type;var Ka={},Ma=[];Ia?(Ka=(null===(wa=null===(oa=ya.adminServiceInfo)||void 0===oa?void 0:oa.properties)||void 0===wa?0:wa.serviceInfo)?JSON.parse(ya.adminServiceInfo.properties.serviceInfo):
{},Ma=((null===Ka||void 0===Ka?void 0:Ka.layers)||[]).filter(function(Ta){return-1<Ta.queryPolicy.indexOf("createSnapshot")}).map(function(Ta){return Ta.id})):(Ka=(null===(Ea=ya.adminServiceInfo)||void 0===Ea?void 0:Ea.jsonProperties)||{},Ma=((null===Ka||void 0===Ka?void 0:Ka.layerIds)||[]).map(function(Ta){return Ka.layers[Ta]}).filter(function(Ta){var Xa,Za,bb;return-1<(null===(bb=null===(Za=null===(Xa=Ta.adminLayerInfo)||void 0===Xa?void 0:Xa.publishInfo)||void 0===Za?void 0:Za.queryPolicy)||void 0===
bb?void 0:bb.indexOf("createSnapshot"))}).map(function(Ta){return Ta.id}));var Na=(ya.serviceInfo.layers||[]).concat(ya.serviceInfo.tables||[]);oa=Ma.map(function(Ta){var Xa;return null===(Xa=Na.filter(function(Za){return Za.id===Ta}).shift())||void 0===Xa?void 0:Xa.name});wa=Ia?"MapServer":"FeatureServer";var La="".concat(Ha._hostedFederatedServer.url,"/rest/services/System/PublishingTools/GPServer/Refresh%20Service"),Pa="".concat(La,"/submitJob");Ha=null===(Ja=null===(Ga=ya.url.split("/rest/services/"))||
void 0===Ga?void 0:Ga[1])||void 0===Ja?void 0:Ja.split("/");var Oa=(Ga=2===(ba?Ha.indexOf("FeatureServer"):Ha.indexOf("MapServer")))?Ha[1]:Ha[0],Qa={f:"json",token:ya.adminServerToken,serviceType:wa,serviceName:Oa,serviceFolder:Ga?Ha[0]:null},Ra=document.getElementById("refresh-snapshot-dialog"),Sa=document.getElementById("refresh-snapshot-error-dialog");Ra||(Ra=document.createElement("div"),Ra.id="refresh-shapshot-dialog",document.body.appendChild(Ra));Sa||(Sa=document.createElement("div"),Sa.id=
"refresh-snapshot-error-dialog",document.body.appendChild(Sa));var Ua=g.default.itemProperties.snapshot.refresh;ya="".concat(g.default.itemProperties.snapshot.description,'\x3cdiv class\x3d"leader-half margin-left-1 margin-right-1"\x3e').concat(oa.join("\x3cbr\x3e"),"\x3c/div\x3e");Ga=g.default.common;var Va=Ga.ok,Ya=Ga.cancel,Wa=function(){(0,w.render)(null,Sa);document.body.removeChild(Sa)},$a=function(){(0,w.render)((0,w.h)(aa.default,{autoCloseOnOk:!0,hideCancel:!0,hideClose:!1,renderHtmlDescription:!1,
onOk:Wa,onCancel:Wa,strings:{title:Ua,description:g.default.itemProperties.snapshot.inProgress,ok:Va,cancel:Ya},width:"s"}),Sa)};(0,w.render)((0,w.h)(aa.default,{autoCloseOnOk:!1,hideCancel:!1,hideClose:!1,renderHtmlDescription:!0,onOk:function(Ta){R.default.request({url:Pa,content:Qa},{usePost:!0}).then(function(Xa){(0,w.render)(null,Ra);X.default.showAlert("success",g.default.itemProperties.snapshot.success.replace("${name}",Oa));ia.default.checkAsyncJobStatus("".concat(La,"/jobs/").concat(Xa.jobId)).then(function(){null===
Ta||void 0===Ta?void 0:Ta();X.default.showAlert("success",g.default.itemProperties.snapshot.finished.replace("${name}",Oa))},function(Za){null===Ta||void 0===Ta?void 0:Ta();$a()})},function(Xa){null===Ta||void 0===Ta?void 0:Ta();$a()})},onCancel:function(){V.default.removeComponent(Ra,document.body)},strings:{title:Ua,description:ya,ok:Va,cancel:Ya},width:"s"}),Ra)};W._getItemPkgPath=function(ba){var oa=ba.portal.getPortalUser();oa=null===oa||void 0===oa?void 0:oa.getToken();oa="public"!==ba.access&&
oa?"?token\x3d".concat(oa):"";return"".concat(ba.itemUrl,"/item.pkinfo").concat(oa)};W._getPItemPath=function(ba){var oa=ba.portal.getPortalUser();oa=null===oa||void 0===oa?void 0:oa.getToken();oa="public"!==ba.access&&oa?"?token\x3d".concat(oa):"";return"".concat(ba.itemUrl,"/item.pitem").concat(oa)};W._getPItemXPath=function(ba){var oa=ba.portal.getPortalUser();oa=null===oa||void 0===oa?void 0:oa.getToken();oa="public"!==ba.access&&oa?"?token\x3d".concat(oa):"";return"".concat(ba.itemUrl,"/item.pitemx").concat(oa)};
W._getLyrPath=function(ba){var oa=ba.portal.getPortalUser();oa=null===oa||void 0===oa?void 0:oa.getToken();oa="public"!==ba.access&&oa?"\x26token\x3d".concat(oa):"";return"".concat(ba.url,"?f\x3dlyr\x26v\x3d9.3").concat(oa)};W._showError=function(ba){T.default.createConfirmationDialog({strings:{title:ba.title||g.default.addItemFrm.errors.error.title,description:ba.message||g.default.addItemFrm.errors.error.message},hideCancel:!0,autoCloseOnOk:!0})};W.isFeedWithSingleHostedFeatureLayer=function(ba,
oa){return"Feed"===ba.type&&ba.isHostedService&&1===(null===oa||void 0===oa?void 0:oa.length)&&"Feature Service"===oa[0].type&&ha.default.includes(oa[0].typeKeywords,"Hosted Service")};W.isHostedFeatureLayerFromFeed=function(ba,oa){return"Feature Service"===ba.type&&ba.isHostedService&&1===(null===oa||void 0===oa?void 0:oa.length)&&"Feed"===oa[0].type&&ha.default.includes(oa[0].typeKeywords,"Hosted Service")};return W}(Aa.default)})},"arcgisonline/map/utils/getMapCookie":function(){define(["require",
"exports","tslib","dojo/Deferred"],function(S,J,f,c){Object.defineProperty(J,"__esModule",{value:!0});c=f.__importDefault(c);J.default=function(){var h,d=null===(h=window.sessionStorage)||void 0===h?void 0:h.getItem("Esri_webmap");h=new c.default;(null===d||void 0===d?0:d.length)?h.resolve(JSON.parse(d)):h.resolve(null);return h}})},"arcgisonline/sharing/dijit/OldAppendData":function(){define("require exports tslib ../../esriGeowConfig ../../pages/pageUtil ../../pages/dijit/UploadProgressBar ../../pages/utils/arrays ../../pages/utils/clone ../../pages/utils/dom ../../pages/utils/strings ../util ./AppendData/FieldTableRow ./AppendData/_canMatchFields ./dialog/ConfirmDialog ./dialog/_CreateItemUtilMixin ../geow/Item dijit/_TemplatedMixin dijit/_WidgetBase dojo/on dojo/topic dojo/Deferred dojo/promise/all esri/lang dojo/i18n!../../nls/arcgisonline dojo/text!../../pages/dijit/View/templates/loader.html dojo/text!./AppendData/templates/_appendData.html dojo/text!./AppendData/templates/_table-row.html ../../tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);
D=f.__importDefault(D);G=f.__importDefault(G);F=f.__importDefault(F);A=f.__importDefault(A);y=f.__importDefault(y);z=f.__importDefault(z);return function(){function B(C,H){this.templateString=A.default;this.i18n=G.default;this.baseClass="appendData";this.dijits=[];this.supportedItemTypes=[{value:"Shapefile",innerHTML:G.default.addItemFrm.typeShapefile,regex:"(.zip$)",fileType:"shapefile",extension:"zip",appendUploadFormat:"shapefile"},{value:"File Geodatabase",innerHTML:G.default.addItemFrm.itemFileGeodatabase,
regex:"(.zip$)",fileType:"fileGeodatabase",extension:"zip",appendUploadFormat:"filegdb"},{value:"CSV",regex:"(.csv$)",fileType:"csv",appendUploadFormat:"csv",extension:"csv"},{value:"Microsoft Excel",regex:"(.xls$|.xlsx$)",fileType:"excel",appendUploadFormat:"excel",extension:"xls"},{value:"Microsoft Excel",regex:"(.xls$|.xlsx$)",fileType:"excel",appendUploadFormat:"excel",extension:"xlsx"},{value:"GeoJson",regex:"(.geojson$)",fileType:"geojson",appendUploadFormat:"geojson",extension:"geojson"}];
this.supportedFilesRegEx="(.zip$|.csv$|.xls$|.xlsx$|.geojson$)";this.noneField={value:"__none",displayName:G.default.oldAppendDataDlg.none,name:G.default.oldAppendDataDlg.none,type:"none"};this.longitudeField={value:"longitude",displayName:G.default.addItemFrm.locationTypes.longitude,name:"longitude",type:"esriFieldTypeDouble",sqlType:"sqlTypeDouble",nullable:!0,editable:!0,locationType:"longitude"};this.latitudeField={value:"latitude",displayName:G.default.addItemFrm.locationTypes.latitude,name:"latitude",
type:"esriFieldTypeDouble",sqlType:"sqlTypeDouble",nullable:!0,editable:!0,locationType:"latitude"};this.sortHandlers=[]}B.prototype.postMixInProperties=function(){var C;this.inherited(arguments);this.serviceUrl=this.item&&this.item.url;this.portal=this.portal||(null===(C=this.item)||void 0===C?void 0:C.portal)||(null===c.default||void 0===c.default?void 0:c.default.self)||{};this.user=this.user||this.portalUser||(this.portal.getPortalUser?this.portal.getPortalUser():this.portal.portalUser)||{};this.serviceLayers=
this.layer?(0,a.default)([this.layer||this.layerInfo]):(0,a.default)(this.layers||[this.layer||this.layerInfo]);this._layerInfo=this.layer||this.layerInfo||this.serviceLayers&&this.serviceLayers.length?this.serviceLayers[0]:null;this.serviceInfo=this.item&&this.item.serviceInfo||{};this.adminServiceInfo=this.item&&this.item.adminServiceInfo||{};this.capabilities=this.portal.isPortal&&!this.item.isSDS?q.default.stringToArray(this.serviceInfo.capabilities,",",!0):q.default.stringToArray(this.adminServiceInfo.capabilities||
"",",",!0);this.changeTrackingEnabled=b.default.includes(this.capabilities,"ChangeTracking");this.syncEnabled=this.serviceInfo.syncEnabled||!1};B.prototype.postCreate=function(){this.inherited(arguments);var C=this.domNode.querySelector(".js-analyze-loader-wrap");C.innerHTML=F.default.replace("${location}","");this.uploadProgressBar=new d.default({});this.uploadProgressBar.startup();this.uploadProgressBar.hide();C.appendChild(this.uploadProgressBar.domNode);this.portal.isPortal&&(this.supportedItemTypes.splice(5,
1),this.supportedItemTypes.splice(1,1),this.step1Bullet4.innerText=G.default.oldAppendDataDlg.messageStep1Bullet4Portal,e.default.hideNode(this.step1Bullet3));this.sortHeader=this.sortHeader.bind(this)};B.prototype.startup=function(){this.inherited(arguments);this.render().then(this.addEventListeners.bind(this)).then(function(){})};B.prototype.destroy=function(){var C=this;this.inherited(arguments);r.default.publish("cancel-item-upload");this.deleteItem().then(function(){C.dijits.forEach(function(H){H.destroy()});
C.sortHandlers.forEach(function(H){H.remove()});C.sortHandlers=[];C.dijits=[]})};B.prototype.show=function(){var C,H,E,K=(null===(C=this.portal.helpMap)||void 0===C?void 0:C.m["120001300"])||"share-maps/manage-hosted-feature-layers.htm#ESRI_SECTION1_E2F5EF6240F246EBA5D238968B63BF97";C="".concat(this.portal.helpBase).concat(K);this.dlg=new m.default({title:G.default.oldAppendDataDlg.title,buttonOkLabel:G.default.oldAppendDataDlg.uploadBtn,buttonCancelLabel:G.default.common.cancel,helpLinkInfo:{title:G.default.oldAppendDataDlg.helpLinkTitle,
url:C}});this.dlg.setContent(this.domNode);this.dlg.show();this.okBtn=null===(H=this.dlg)||void 0===H?void 0:H.okButton;null===(E=this.okBtn)||void 0===E?void 0:E.set("disabled",!0);this.own((0,k.default)(this.dlg,"ok",this.processStep.bind(this)));return this.dlg};B.prototype.hide=function(){var C;null===(C=this.dlg)||void 0===C?void 0:C.hide();k.default.emit(this,"hide",{bubbles:!0,cancelable:!0})};B.prototype.processStep=function(){var C=this,H=new w.default;this.isStep1?this.uploadData().then(this.analyze.bind(this)).then(this.addLayerInfo.bind(this)).then(this.validateLayers.bind(this),
function(E){C.showError(E)}).then(this.showStep2.bind(this),function(E){C.showError(E)}).then(function(E){H.resolve(E)},function(E){C.showStep1()}):this.appendDataLayer().then(function(E){C.done();H.resolve(E)},function(E){C.showStep2();C.showError(E)});return H};B.prototype._setItemAttr=function(C){this.item=C};B.prototype._setReadOnlyAttr=function(C,H){var E=C?"add":"remove";r.default.publish("/esri/disable",C," ");e.default.querySelectorAllAsArray(".append-data",this.domNode).forEach(function(K){K.classList[E]("disabled")});
C?this.showLoader(H||this.i18n.common.pleaseWait):this.hideLoader()};B.prototype.setSelectedSourceType=function(){this.selectedSourceType=this.findSupportedType(this.supportedTypes.options[this.supportedTypes.selectedIndex].dataset.fileType)};B.prototype.getFieldMappings=function(){var C=this,H=this.fromField.value,E=this.toField.value,K=this.dijits.map(function(I){return I.field}).filter(function(I){return I.matchField&&"__none"!==I.matchField.value}).map(function(I){return{source:I.matchField&&
I.matchField.name,name:I.name}});this.updateExistingFeatures.checked&&"__none"!==E&&(K=K.filter(function(I){return I.name!==C.fromField.value&&I.name!==C.toField.value}),K.push({source:E,name:H}));return(null===K||void 0===K?0:K.length)?K:null};B.prototype.getAppendFields=function(C){return(((null===C||void 0===C?0:C.length)?C:this.getFieldMappings())||[]).filter(function(H){return null===H||void 0===H?void 0:H.name}).map(function(H){return H.name})};B.prototype.getAppendParams=function(){var C=this.selectedSourceType.appendUploadFormat,
H=this.updateExistingFeatures.checked,E=this.fromField.options[this.fromField.selectedIndex];E=this.findField({name:E.dataset.value,type:E.dataset.type},this.layerFields);var K=this.getSelectedDataLayer(),I=this.getFieldMappings();C={sourceTableName:K.name,fieldMappings:(null===I||void 0===I?0:I.length)?JSON.stringify(I):null,upsert:H,skipUpdates:!1,useGlobalIds:H&&"esriFieldTypeGlobalID"===(null===E||void 0===E?void 0:E.type),skipInserts:H?this.skipInserts.checked:!1,updateGeometry:H?this.updateGeometry.checked:
!0,appendFields:JSON.stringify(this.getAppendFields()),appendItemId:this.uploadedItem.id,appendUploadFormat:C,rollbackOnFailure:!0};!this.selectedSourceType||"csv"!==this.selectedSourceType.fileType&&"excel"!==this.selectedSourceType.fileType||(C=f.__assign(f.__assign({},C),{appendSourceInfo:JSON.stringify(this.getAnalyzeParameters())}));if(null===E||void 0===E?0:E.isUniqueIndex)C.upsertMatchingField=E.name;return C};B.prototype.getSelectedDataLayer=function(){var C=parseInt(this.dataLayersSelect.value,
10);var H=(this.dataLayers||[]).filter(function(E){return E.excelSheetId===C||E.id===C});return(null===H||void 0===H?0:H.length)?H.shift():{}};B.prototype.getSelectedServiceLayer=function(){var C=parseInt(this.serviceLayersSelect.value,10),H=this.serviceLayers||[];return this.findLayer("".concat(C),H)};B.prototype.getFormData=function(){var C=this.fileInput.files[0],H=(null===C||void 0===C?void 0:C.name)||"",E=this.selectedSourceType.value,K="".concat(H.substr(0,H.indexOf(".")),"_agotmp").concat(H.substr(H.indexOf("."))),
I=new FormData;I.append("type",E);I.append("title",K);I.append("file",C,K);this.origFilename=H;this.sourceTitle=K;return I};B.prototype.getAnalyzeParameters=function(){var C=(0,a.default)(this.analyzeResults),H=this.findLocationField("longitude"),E=this.findLocationField("latitude"),K=C.publishParameters.locationType;H=H&&"__none"!==H.value?H.name:C.publishParameters.longitudeFieldName;E=E&&"__none"!==E.value?E.name:C.publishParameters.latitudeFieldName;H&&E?(C.publishParameters.locationType="coordinates",
C.publishParameters.latitudeFieldName=E,C.publishParameters.longitudeFieldName=H):"coordinates"!==K&&(C.publishParameters.locationType="none");return C.publishParameters};B.prototype.addEventListeners=function(){var C=new w.default;this.own((0,k.default)(this.showFieldMatchingLink,"click",this.showFieldMatching.bind(this)),(0,k.default)(this.updateExistingFeatures,"change",this.updateExistingFeaturesChange.bind(this)),(0,k.default)(this.fileInput,"change",this.onFileChange.bind(this)),(0,k.default)(this.fromField,
"change",this.onFromFieldChange.bind(this)),(0,k.default)(this.toField,"change",this.onToFieldChange.bind(this)),(0,k.default)(this.serviceLayersSelect,"change",this.onServiceLayerChange.bind(this)),(0,k.default)(this.dataLayersSelect,"change",this.onDataLayerChange.bind(this)),(0,k.default)(this.supportedTypes,"change",this.setSelectedSourceType.bind(this)));C.resolve();return C};B.prototype.sortHeader=function(C){var H=C.target;C=H.dataset.sort;var E=H.classList.contains("is-ascending")||H.classList.contains("is-descending");
H=H.dataset.sortOrder;E&&(H="asc"===H?"desc":"asc");this.sortUpdate({property:C,ascending:"asc"===H})};B.prototype.sortUpdate=function(C){var H=this,E=this.domNode.querySelector(".js-table-rows"),K=this.noneField,I=this.getUIDField(),L=this.updateExistingFeatures.checked,M=this.getSelectedDataLayer(),N=(M.fields||[this.noneField]).sort(function(aa,da){return aa.name.localeCompare(da.name)}),P=this.layerFields,R={esriFieldTypeOID:1,esriFieldTypeGlobalID:1},Y={portal:this.portal,template:y.default,
dataLayerFields:N,addressFields:M.addressFields};this.currentSort=C=C||this.currentSort;(null===N||void 0===N?0:N.length)&&"__none"!==N[0].value&&N.unshift(K);var ja=C.ascending?"is-ascending":"is-descending";e.default.querySelectorAllAsArray(".js-table-sort-header",this.domNode).forEach(function(aa){aa.classList.remove("is-descending");aa.classList.remove("is-ascending");aa.setAttribute("aria-sort","none")});e.default.querySelectorAllAsArray(".js-table-sort-header[data-sort\x3d'".concat(C.property,
"']"),this.domNode).forEach(function(aa){aa.classList.add(ja);aa.setAttribute("aria-sort",C.ascending?"ascending":"descending");aa.dataset.sortOrder=C.ascending?"asc":"desc"});this.sortTitle("matchField"===C.property?this.matchFields||[]:this.layerFields||[],C);this.sortHandlers.forEach(function(aa){aa.remove()});this.sortHandlers=[];e.default.querySelectorAllAsArray(".js-table-sort-header",this.domNode).forEach(function(aa){H.sortHandlers.push((0,k.default)(aa,"click",H.sortHeader.bind(H)))});this.dijits.forEach(function(aa){aa.destroy()});
this.dijits=[];P.forEach(function(aa){aa.type in R||!aa.editable||L&&aa.name===I.name||(aa=new u.default(f.__assign(f.__assign({},Y),{field:aa})),aa.startup(),aa.placeAt(E),H.dijits.push(aa))})};B.prototype.sortTitle=function(C,H){return null===C||void 0===C?void 0:C.sort(function(E,K){return H.ascending?E.name.localeCompare(K.name):K.name.localeCompare(E.name)})};B.prototype.showStep1=function(){var C=this,H=new w.default,E=this.okBtn;this.fillSupportedTypes().then(function(){e.default.hideNode(C.step2);
e.default.showNode(C.step1);C.isStep1=!0;null===E||void 0===E?void 0:E.set("label",G.default.oldAppendDataDlg.uploadBtn);C.set("readOnly",!1);H.resolve(!0)});return H};B.prototype.showStep2=function(){var C=this,H=new w.default;(0,x.default)({serviceLayers:this.fillServiceLayers(this.serviceLayers),dataLayers:this.fillDataLayers(this.dataLayers)}).then(function(){var E=C.getSelectedDataLayer(),K=C.getSelectedServiceLayer();C.updateFields(K,E).then(function(){H.resolve(!0)})});return H};B.prototype.updateFields=
function(C,H){var E=this,K=new w.default,I=this.okBtn,L="fileGeodatabase"===(this.analyzeResults&&this.analyzeResults.publishParameters||{}).type,M=this.selectedFile||this.uploadedItem&&this.uploadedItem.title||this.sourceTitle||"",N=this.syncEnabled||this.changeTrackingEnabled,P=H&&H.geometryType,R=C&&C.geometryType,Y=R?!0:!1,ja,aa,da;(0,x.default)({serviceLayerFields:this.fillServiceLayerFields(C,H),dataLayerFields:this.fillDataLayerFields(C,H),fieldMatching:this.fillFieldMatching(C,H)}).then(function(){e.default.hideNode(E.step1);
e.default.showNode(E.step2);if(N){if(R!==P&&R&&("esriGeometryPoint"!==R||L||P)){E.showError({message:G.default.oldAppendDataDlg.noMatchingSelectedLayerType});return}ja=!0}else R===P?ja=aa=da=!0:R&&("esriGeometryPoint"!==R||L||P)?da=!0:ja=aa=da=!0;E.domNode.querySelector(".js-updateFeatures-container").classList.add("hide");e.default.showHideAll(e.default.querySelectorAllAsArray(".js-updateGeometry",E.domNode),Y);E.updateExistingFeatures.checked=aa||da||!1;!aa&&ja?e.default.querySelectorAllAsArray(".js-updateFeatures, .js_attributesOnly",
E.domNode).forEach(function(ra){ra.classList.add("disabled")}):(e.default.querySelectorAllAsArray(".js-updateFeatures",E.domNode).forEach(function(ra){ra.classList.remove("disabled")}),e.default.querySelectorAllAsArray(".js-attributesOnly",E.domNode).forEach(function(ra){ra.classList[!aa&&da?"add":"remove"]("disabled")}));E.updateExistingFeaturesChange();E.updateGeometry.checked=!1;E.skipInserts.checked=!ja&&(aa||da)||!1;E.toField.value="__none";E.isStep1=!1;E.appendDataLabel.innerHTML=G.default.oldAppendDataDlg.chooseLayer.replace("${fileName}",
M);null===I||void 0===I?void 0:I.set("label",G.default.oldAppendDataDlg.applyUpdatesBtn);E.set("readOnly",!1);K.resolve(!0)});return K};B.prototype.updateLayerDataUpdatedDate=function(){var C=this.item,H=this._layerInfo,E=(new Date).getTime();H&&(H.editingInfo=H.editingInfo||{},H.editingInfo.lastEditDate=E,C.layers&&(C=C.layers[H.id],C.editingInfo=C.editingInfo||{},C.editingInfo.lastEditDate=E))};B.prototype.done=function(){var C=this;this.deleteItem().then(function(){C.updateLayerDataUpdatedDate();
r.default.publish("append/done",{type:"success"});C.set("readOnly",!1);r.default.publish("alert/show",{type:"success",text:G.default.oldAppendDataDlg.updateSuccess});C.hide()})};B.prototype.showFieldMatching=function(C){C="true"===this.showFieldMatchingLink.dataset.value;this.showFieldMatchingLink.dataset.value=C?"false":"true";this.showFieldMatchingLink.innerHTML=C?G.default.oldAppendDataDlg.showFieldMatching:G.default.oldAppendDataDlg.hideFieldMatching;e.default.showHide(this.fieldMatching,!C)};
B.prototype.updateExistingFeaturesChange=function(C){var H=this.updateExistingFeatures.checked?"remove":"add";e.default.querySelectorAllAsArray(".js-updateFeatures-container",this.domNode).forEach(function(E){E.classList[H]("hide")});this.sortUpdate()};B.prototype.onFileChange=function(C){C=this.fileInput.files[0];C=(null===C||void 0===C?void 0:C.name)||"";var H=C.split(".").pop(),E=(new RegExp(this.supportedFilesRegEx,"i")).test(C),K="zip"===(null===H||void 0===H?void 0:H.toLowerCase());this.selectedSourceType=
this.findSupportedType(K?"shapefile":H);this.selectedFile=C;e.default.showHide(this.zipSelect,E&&K&&!this.portal.isPortal);this.okBtn.set("disabled",!E)};B.prototype.onFromFieldChange=function(C){C=(null===C||void 0===C?void 0:C.target)||{};var H=C.options[C.selectedIndex],E=this.getSelectedDataLayer(),K=this.getSelectedServiceLayer();H={name:H.dataset.value,type:H.dataset.type};var I=this.findField(H,this.layerFields),L=this.findField({name:C.dataset.prevValue,type:C.dataset.prevType},this.layerFields);
this.uidField=H;I.type!==L.type&&this.fillDataLayerFields(K,E);"__none"===I.value&&(this.toField.value="__none");C.dataset.prevValue=C.value;C.dataset.prevType=C.type;this.sortUpdate()};B.prototype.onToFieldChange=function(C){C=(null===C||void 0===C?void 0:C.target)||{};C=C.options[C.selectedIndex];C=this.findField({name:C.dataset.value,type:C.dataset.type},this.layerFields);r.default.publish("appendData/fieldChanged",C)};B.prototype.onServiceLayerChange=function(){this.showStep2()};B.prototype.onDataLayerChange=
function(){var C=this.getSelectedDataLayer(),H=this.getSelectedServiceLayer();this.updateFields(H,C)};B.prototype.render=function(){var C=new w.default;(0,x.default)([this.showStep1()]).then(function(){C.resolve(!0)});return C};B.prototype.showLoader=function(C){var H=this.domNode.querySelector(".analyze-loader-wrap .loader");e.default.showNode(this.domNode.querySelector(".analyze-loader-wrap"));e.default.activateNode(H);if(H=H.querySelector(".loader-text"))H.innerHTML=C};B.prototype.hideLoader=function(){e.default.hideNode(this.domNode.querySelector(".analyze-loader-wrap"));
e.default.deactivateNode(this.domNode.querySelector(".analyze-loader-wrap .loader"))};B.prototype.clearSelect=function(C){if(null===C||void 0===C?0:C.options)for(var H=C.options.length-1;0<=H;H--)C.remove(H)};B.prototype.fillSupportedTypes=function(){var C=this,H=new w.default,E;this.supportedItemTypes.forEach(function(K){K.innerHTML&&(E=document.createElement("option"),E.dataset.value=K.value,E.dataset.validate=K.regex||"",E.dataset.fileType=K.fileType,E.dataset.appendUploadFormat=K.appendUploadFormat,
E.value=K.value,E.innerHTML=K.innerHTML,C.supportedTypes.add(E))});H.resolve(!0);return H};B.prototype.fillServiceLayers=function(C){var H=this,E,K,I;C=new w.default;if(null===(K=null===(E=this.serviceLayersSelect)||void 0===E?void 0:E.options)||void 0===K?0:K.length)C.resolve(this.serviceLayers);else{E=this.serviceLayers||[];var L;this.clearSelect(this.serviceLayersSelect);(null===E||void 0===E?0:E.length)&&E.forEach(function(M){L=document.createElement("option");L.dataset.value=M.id;L.value=M.id;
L.innerHTML=M.name;H.serviceLayersSelect.add(L)});e.default.showHide(this.serviceLayersContainer,1<(null===(I=this.layers)||void 0===I?void 0:I.length));C.resolve(E)}return C};B.prototype.fillDataLayers=function(C){var H=this,E,K=new w.default;C=C||this.dataLayers||[];this.clearSelect(this.dataLayersSelect);C.forEach(function(L){var M=D.default.isDefined(L.excelSheetId)?parseInt(L.excelSheetId,10):parseInt(L.id,10);M="".concat(M);var N=document.createElement("option");N.dataset.value=M;N.value=M;
N.innerHTML=L.name;H.dataLayersSelect.add(N)});if(this.dataLayersSelect.options&&!this.dataLayersSelect.options.length){var I=document.createElement("option");I.dataset.value=this.noneField.value;I.value=this.noneField.value;I.innerHTML=this.noneField.name;this.dataLayersSelect.add(I)}e.default.showHide(this.dataLayersContainer,1<(null===(E=this.analyzeResultLayers)||void 0===E?void 0:E.length));this.dataLayers=C;K.resolve(C);return K};B.prototype.fillServiceLayerFields=function(C,H){var E=this;H=
new w.default;var K=this.noneField,I=(0,a.default)(C.indexes||[]),L=this.getUIDField(C),M={esriFieldTypeOID:1,esriFieldTypeGlobalID:1},N=(0,a.default)(C.fields||[]),P;this.clearSelect(this.fromField);I.filter(function(R){return null===R||void 0===R?void 0:R.isUnique}).forEach(function(R){var Y;P=(null===(Y=R.fields)||void 0===Y?void 0:Y.split(","))||[];P.forEach(function(ja){N.some(function(aa){return aa.name.toLowerCase()===ja.toLowerCase()?aa.isUniqueIndex=!0:!1})})});"Table"===C.type||!this.selectedSourceType||
"excel"!==this.selectedSourceType.fileType&&"csv"!==this.selectedSourceType.fileType||((C=this.findField(this.longitudeField,N))&&"__none"!==C.value||N.push((0,a.default)(this.longitudeField)),(C=this.findField(this.latitudeField,N))&&"__none"!==C.value||N.push((0,a.default)(this.latitudeField)));this.layerFields=(0,a.default)(N||[]);N=N.filter(function(R){return R.type&&R.type in M||R.isUniqueIndex}).sort(function(R,Y){return R.name.localeCompare(Y.name)});N.unshift(K);N.forEach(function(R){var Y=
document.createElement("option");Y.dataset.value=R.value||R.name||null;Y.dataset.type=R.type||null;Y.value=R.value||R.name||null;Y.innerHTML=R.displayName||R.name;E.fromField.add(Y)});this.fromField.value=(null===L||void 0===L?void 0:L.value)||"__none";this.fromField.dataset.type=(null===L||void 0===L?void 0:L.value)||"__none";this.fromField.dataset.prevValue=this.fromField.value;this.fromField.dataset.prevType=this.fromField.type;H.resolve(N);return H};B.prototype.fillDataLayerFields=function(C,
H){var E=this,K,I=new w.default,L=this.noneField;H=H&&H.fields?(0,a.default)(H.fields):[];C=this.getUIDField(C);H=this.filterAllowedFields(H,C).sort(function(M,N){return M.name.localeCompare(N.name)});C=this.findField(C,H);this.clearSelect(this.toField);(null===H||void 0===H?0:H.length)&&"__none"!==H[0].value?H.unshift(L):H=[L];H.forEach(function(M){var N=document.createElement("option");N.dataset.value=M.value||M.name||null;N.dataset.type=M.type||null;N.value=M.value||M.name||null;N.innerHTML=M.displayName||
M.name;E.toField.add(N)});this.toField.value="__none"!==(null===C||void 0===C?void 0:C.value)?C.name||"__none":"__none";this.toField.disabled="__none"===this.fromField.value||2>(null===(K=this.toField.options)||void 0===K?void 0:K.length);I.resolve(H);return I};B.prototype.filterAllowedFields=function(C,H){C=C.filter(function(E){return(0,g.default)(H,E)});return(null===C||void 0===C?0:C.length)?C:[]};B.prototype.fillFieldMatching=function(C,H){C=new w.default;this.sortUpdate({property:"title",ascending:!0});
C.resolve(!0);return C};B.prototype.addLayerInfo=function(C){var H=new w.default,E=(null===C||void 0===C?0:C.publishParameters)?(0,a.default)(C.publishParameters):{};C=(E.layers||[E.layerInfo]).map(function(K){var I=K.locationType||E.locationType||null;K.geometryType=K.geometryType||("coordinates"===I?"esriGeometryPoint":null)||null;K.addressFields=K.addressFields||E.addressFields||("coordinates"===I?{longitudeFieldName:K.longitudeFieldName||E.longitudeFieldName,latitudeFieldName:K.latitudeFieldName||
E.latitudeFieldName}:{});return K});H.resolve(C);return H};B.prototype.validateLayers=function(C){var H=new w.default,E="fileGeodatabase"===(this.analyzeResults&&this.analyzeResults.publishParameters||{}).type,K=this.syncEnabled||this.changeTrackingEnabled?this.layers.filter(function(I){return C.some(function(L){return L.geometryType===I.geometryType||!I.geometryType||"esriGeometryPoint"===I.geometryType&&!E&&!L.geometryType})}):this.layers;K&&K.length?(this.analyzeResultLayers=(0,a.default)(C),this.dataLayers=
(0,a.default)(C),this.serviceLayers=(0,a.default)(K),H.resolve(this.analyzeResults)):H.reject({message:G.default.oldAppendDataDlg.noMatchingLayerType});return H};B.prototype.getUIDField=function(C){var H=this.uidField||null;if(!H){var E=C.globalIdField;C=(C.fields||[]).filter(function(K){return K.name===E});H=this.uidField=(null===C||void 0===C?0:C.length)?C.shift():this.noneField}return H};B.prototype.findField=function(C,H){H=(H||[]).filter(function(E){return E.type===C.type&&E.name.toLowerCase()===
C.name.toLowerCase()});return(null===H||void 0===H?0:H.length)?H.shift():this.noneField};B.prototype.findLocationField=function(C){var H=this.dijits.map(function(E){return E.field}).filter(function(E){return E.name.toLowerCase()===C.toLowerCase()&&E.matchField});return(null===H||void 0===H?0:H.length)?H.shift().matchField:null};B.prototype.findLayer=function(C,H){return h.default.findLayer(C,H||[])};B.prototype.findSupportedType=function(C){var H=(this.supportedItemTypes||[]).filter(function(E){return E.fileType===
C||E.extension.toLowerCase()===C.toLowerCase()});return(null===H||void 0===H?0:H.length)?H.shift():null};B.prototype.uploadData=function(C){var H=this,E;C=C||new w.default;var K=null===(E=this.item)||void 0===E?void 0:E.owner;E=this.getFormData();var I={owner:K,folderId:void 0,fileName:this.sourceTitle,fileType:this.selectedSourceType.value};this._setReadOnlyAttr(!0,G.default.oldAppendDataDlg.uploadProgress);this.uploadProgressBar.reset();this.uploadProgressBar.show();p.default.addItem(I,E,this.fileInput.files[0]).then(function(L){H.uploadProgressBar.hide();
if(L&&L.success){var M={title:I.fileName,type:I.fileType,folderId:""};H.uploadedItem=f.__assign(f.__assign(f.__assign({},L),M),{title:H.sourceTitle});L.isMultipart?(L.statusUrl=p.default._getActionItemUrl(I,"status"),H._setReadOnlyAttr(!0,G.default.addItemFrm.checkingStatus),H.checkStatus(L).then(function(){H.set("readOnly",!1);C.resolve(L)})):C.resolve(L)}else C.reject(L)},function(L){H.uploadProgressBar.hide();L&&409!==L.code?H.showError(L):H.deleteExistingTempItem(H.sourceTitle).then(function(){H.uploadData(C)},
function(M){H.showError(L)})});return C};B.prototype.analyze=function(C){var H=this,E=new w.default;C=f.__assign({fileType:this.selectedSourceType.fileType},C);this._setReadOnlyAttr(!0,G.default.oldAppendDataDlg.analyzeProgress);v.default.analyzeItem(C,{enableGlobalGeocoding:!1},this.portal).then(function(K){H.analyzeResults=K;E.resolve(K)},function(K){E.reject(K)});return E};B.prototype.appendDataLayer=function(){var C,H=new w.default,E=this.getSelectedServiceLayer(),K=this.analyzeResults||{},I=
(null===(C=K.publishParameters)||void 0===C?void 0:C.locationType)||"none";C="".concat(this.serviceUrl,"/").concat(E.id,"/append");var L=this.getAppendParams(),M=this.findLocationField("longitude")||{},N=this.findLocationField("latitude")||{},P=this.updateExistingFeatures.checked;if(P&&("__none"===this.fromField.value||"__none"===this.toField.value))return H.reject({message:G.default.oldAppendDataDlg.noUIDFieldMapping}),H;if(!(!K.publishParameters||"csv"!==K.publishParameters.type&&"excel"!==K.publishParameters.type||
"esriGeometryPoint"!==E.geometryType||"none"!==I&&"address"!==I||P&&!L.updateGeometry||"__none"!==M.value&&"__none"!==N.value))return H.reject({message:G.default.oldAppendDataDlg.noLocationFields}),H;L.fieldMappings?(this._setReadOnlyAttr(!0,G.default.oldAppendDataDlg.applyProgress),t.default.request({url:C,content:L},{usePost:!0}).then(this.checkStatus.bind(this),function(R){H.reject(R)}).then(function(R){H.resolve(R)})):H.reject({message:G.default.oldAppendDataDlg.noMatchingFields});return H};B.prototype.checkStatus=
function(C,H,E){var K=this,I=null===C||void 0===C?void 0:C.statusUrl,L=E||new w.default,M=H||500;t.default.request({url:I}).then(function(N){var P,R;N=N||{status:"completed"};"completed"===(null===(P=N.status)||void 0===P?void 0:P.toLowerCase())?L.resolve(!0):"failed"===(null===(R=N.status)||void 0===R?void 0:R.toLowerCase())||400<N.code||""===N.status?K.showError(N):(M=(M||500)+250,setTimeout(function(){K.checkStatus(C,M,L)},H))},function(N){K.showError(N)});return L};B.prototype.deleteItem=function(){var C=
this,H,E=new w.default,K=null===(H=this.item)||void 0===H?void 0:H.itemOwner;this.uploadedItem?K.deleteItems([this.uploadedItem]).then(function(){C.uploadedItem=null;E.resolve(!0)},function(){C.uploadedItem=null;E.resolve(!0)}):E.resolve(!0);return E};B.prototype.deleteExistingTempItem=function(C){var H,E=new w.default,K=null===(H=this.item)||void 0===H?void 0:H.itemOwner;this.portal.queryItems("title:".concat(C)).then(function(I){var L;(null===(L=null===I||void 0===I?void 0:I.items)||void 0===L?
0:L.length)?K.deleteItems([I.items.shift()]).then(function(){E.resolve(!0)},function(){E.resolve(!0)}):E.resolve(!1)});return E};B.prototype.showError=function(C){var H=this,E=f.__assign(f.__assign({},G.default.publishWizard.errors.error),C);C=C&&(C.statusMessage||C.message||"");-1<C.indexOf("Invalid Shapefile")?E.message=D.default.substitute({name:this.origFilename},this.i18n.addItemFrm.errors.invalidShapefile.message):-1<C.indexOf("Invalid File Geodatabase")?E.message=D.default.substitute({name:this.origFilename},
this.i18n.addItemFrm.errors.invalidFileGeodatabase.message):-1<C.indexOf("Object reference not set to")?E.message=D.default.substitute({name:this.origFilename},this.i18n.oldAppendDataDlg.error):-1<C.indexOf("Duplicate field names are not allowed")?E.message=this.i18n.common.errors.duplicateFields:-1<C.indexOf("Must specify data to be analyzed")&&(E.message=this.i18n.oldAppendDataDlg.specifyData);this.errorDlg=new m.default({showCancel:!1,style:{width:"400px",height:"auto"}});this.errorDlg.show(E).then(function(){H.set("readOnly",
!1);H.errorDlg.hide()});return!1};return B=f.__decorate([(0,z.default)(n.default,l.default)],B)}()})},"arcgisonline/pages/dijit/UploadProgressBar":function(){define("require exports tslib dojo/topic dojo/text!./UploadProgressBar/UploadProgressBar.html dojo/i18n!../../nls/arcgisonline dijit/_TemplatedMixin dijit/_WidgetBase ../utils/dom ../utils/culture ../../tsutils/declareDecorator".split(" "),function(S,J,f,c,h,d,b,a,e,q,t){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=
f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);return function(){function u(g,m){this.templateString=h.default;this.i18n=d.default}u.prototype.startup=function(){this.inherited(arguments);this.own(c.default.subscribe("item/upload-progress-update",this._onProgressUpdate.bind(this)))};u.prototype.hide=function(){e.default.hideNode(this.domNode)};u.prototype.show=function(){e.default.showNode(this.domNode)};u.prototype.reset=function(){this._uploadPercentLabel.textContent=
this._uploadProgressFill.style.width="0%";this._uploadPercentLabel.innerHTML=q.default.getPercentString(0);this._uploadProgressFill.style.width="0%"};u.prototype._onProgressUpdate=function(g){this._uploadProgressFill.classList[100===g?"add":"remove"]("upload-progress-bar__fill--full");this._uploadPercentLabel.innerHTML=q.default.getPercentString(g/100);this._uploadProgressFill.style.width="".concat(g,"%")};return u=f.__decorate([(0,t.default)(a.default,b.default)],u)}()})},"arcgisonline/sharing/dijit/AppendData/FieldTableRow":function(){define("require exports tslib ../../../esriGeowConfig ../../../pages/utils/formatters ./_canMatchFields ../../../tsutils/declareDecorator dijit/_WidgetBase dijit/_TemplatedMixin dojo/on dojo/topic dojo/Deferred dojo/promise/all dojo/text!./templates/_table-row.html dojo/i18n!../../../nls/arcgisonline".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);return function(){function p(l,n){this.i18n=v.default;this.noneField={value:"__none",name:v.default.oldAppendDataDlg.none}}p.prototype.postMixInProperties=function(){var l=this;this.inherited(arguments);
Object.keys(h.default).forEach(function(n){l[n]=h.default[n]});this.portal=this.portal||(null===c.default||void 0===c.default?void 0:c.default.self)||{};this.portalUser=this.portalUser||this.user||this.portal.portalUser||{};this.templateString=this.template||m.default;this.displayName=this.field.displayName||this.field.name};p.prototype.postCreate=function(){var l=this,n;this.inherited(arguments);null===(n=this.cssClasses)||void 0===n?void 0:n.forEach(function(k){l.domNode.classList.add(k)})};p.prototype.startup=
function(){this.inherited(arguments);this.render().then(this.addEventListeners.bind(this)).then(function(){})};p.prototype.setValue=function(l){l=(null===l||void 0===l?void 0:l.matchField)||l||{name:v.default.oldAppendDataDlg.none,value:"__none"};this.matchFields.value=l.value;this.field.matchField=l;this.matchFieldValue.innerHTML=l.displayName||l.name;this.matchFieldValue.dataset.value=l.value||l.name;this.matchFieldValue.dataset.type=l.type};p.prototype.render=function(){var l=this,n=new u.default;
(0,g.default)([this.createMatchFieldOptions()]).then(function(){var k,r=(null===(k=l.field)||void 0===k?void 0:k.matchField)||l.field;k=r?l.findField(r,l.dataLayerFields):null;l.setValue(k);n.resolve(!0)});return n};p.prototype.addEventListeners=function(){var l=this,n=new u.default;this.own((0,q.default)(this.matchFields,"blur",function(k){l.field.value=l.editEnd({evt:k})}),(0,q.default)(this.matchFieldsContainer,"click",function(k){l.editStart({evt:k})}),t.default.subscribe("appendData/fieldChanged",
function(k){var r,w;"__none"!==k.value&&(null===(w=null===(r=l.field)||void 0===r?void 0:r.matchField)||void 0===w?void 0:w.name)===k.name&&l.setValue()}));n.resolve();return n};p.prototype.editStart=function(l){l=l.evt.target;var n=l.parentElement.querySelector("select"),k=l.dataset.value;k&&"SPAN"===(null===l||void 0===l?void 0:l.tagName)&&(l.classList.add("hide"),n.classList.remove("hide"),n.value=k,n.focus())};p.prototype.editEnd=function(l){l=l.evt.target;var n=l.parentElement.querySelector("span"),
k=l.options[l.selectedIndex].dataset.value,r=this.findField({type:l.options[l.selectedIndex].dataset.type,name:k},this.dataLayerFields);t.default.publish("appendData/fieldChanged",r);this.setValue(r);l.classList.add("hide");n.classList.remove("hide");return k};p.prototype.findField=function(l,n){var k=this;n=(n||[]).filter(function(r){return l.name.toLowerCase()===r.name.toLowerCase()&&(r.type===l.type||k.findAddressField(r.displayName||r.name))});return(null===n||void 0===n?0:n.length)?n.shift():
this.noneField};p.prototype.findAddressField=function(l){var n=this.addressFields||{},k=Object.keys(n).filter(function(r){return n[r]===l});return(null===k||void 0===k?0:k.length)?k.shift():null};p.prototype.createMatchFieldOptions=function(){var l=this,n=new u.default;(this.dataLayerFields||[]).forEach(function(k){if("__none"===k.value||(0,d.default)(l.field,k)){var r=document.createElement("option");r.dataset.value=k.value||k.name;r.dataset.type=k.type||null;r.value=k.value||k.name;r.innerHTML=
k.displayName||k.name;l.matchFields.add(r)}});n.resolve(!0);return n};return p=f.__decorate([(0,b.default)(a.default,e.default)],p)}()})},"arcgisonline/sharing/dijit/AppendData/_canMatchFields":function(){define(["require","exports"],function(S,J){Object.defineProperty(J,"__esModule",{value:!0});J.default=function(f,c){var h;f=(null===f||void 0===f?void 0:f.type)||null;c=(null===c||void 0===c?void 0:c.type)||null;var d={esriFieldTypeSmallInteger:["esriFieldTypeSmallInteger"],esriFieldTypeInteger:["esriFieldTypeInteger",
"esriFieldTypeSmallInteger"],esriFieldTypeSingle:["esriFieldTypeSingle","esriFieldTypeDouble"],esriFieldTypeDouble:["esriFieldTypeDouble","esriFieldTypeSingle","esriFieldTypeInteger","esriFieldTypeSmallInteger"],esriFieldTypeDate:["esriFieldTypeDate"],esriFieldTypeString:"esriFieldTypeString esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeDate esriFieldTypeGUID".split(" "),esriFieldTypeGUID:["esriFieldTypeGUID","esriFieldTypeString"],esriFieldTypeOID:["esriFieldTypeOID",
"esriFieldTypeSmallInteger","esriFieldTypeInteger"],esriFieldTypeGlobalID:["esriFieldTypeGlobalID","esriFieldTypeGUID","esriFieldTypeString"]};return c&&(c===f||-1<(null===(h=d[f])||void 0===h?void 0:h.indexOf(c)))}})},"arcgisonline/sharing/dijit/dialog/_CreateItemUtilMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/_base/array dojo/dom-form dojo/io-query dojo/json dojo/Deferred dojo/promise/all esri/lang arcgisonline/esriGeowConfig arcgisonline/pages/utils/categories arcgisonline/sharing/util esri/geometry/webMercatorUtils esri/geometry/Extent arcgisonline/sharing/dijit/Role arcgisonline/pages/statusUtil dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n){return{addItem:function(k,r,w,x){var D=w&&w.getPortalUser(),G=r&&"/"!==r?r:"",F=k instanceof FormData,A={url:(w&&w.portalUrl)+"content/users/"+(x||D.username)+(G?"/"+G:"")+"/addItem"};r=k&&("FORM"===k.tagName||"FORM"===k.nodeName||F)?"form":"content";var y,z,B,C=new a;A[r]=k;t.self.hasCategorySchema&&A[r].categories&&(F?A[r].categories.value=b.stringify(A[r].categories):A[r].categories=b.stringify(A[r].categories));g.request(A,{usePost:!0}).then(J.hitch(this,
function(H){if(F)if(k.keys)for(B=k.keys(),y={};!(z=B.next()).done;)"file"!==z.value&&(y[z.value]=k.get(z.value));else y=H;else y=A.form?h.toObject(k):k;y.title=J.isArray(y.title)?y.title[0]:y.title;y=J.mixin(H,y,{folderId:G});C.resolve(y)}),function(H){C.reject(H)});return C},updateItem:function(k,r){var w=r&&r.getPortalUser();r=(r&&r.portalUrl)+"content/users/"+(k.owner||w.username)+(k.folderId&&"/"!==k.folderId?"/"+k.folderId:"")+"/items/"+k.id+"/update";w=J.mixin({},k);var x=new a;delete w.owner;
t.self.hasCategorySchema&&w.categories&&(w.categories=b.stringify(w.categories));g.request({url:r,content:w},{usePost:!0}).then(J.hitch(this,function(D){x.resolve(k)}),function(D){x.reject(D)});return x},setCategories:function(k,r){!k.categories||r&&0!==r.length||(r=k.categories);return u.setItemCategories([k.id],r)},addItemResource:function(k,r,w){var x=r&&r.getPortalUser();return g.request({url:(r&&r.portalUrl)+"content/users/"+(k.owner||x.username)+(k.folderId&&"/"!==k.folderId?"/"+k.folderId:
"")+"/items/"+k.id+"/addResources",content:w},{usePost:!0}).then(J.hitch(this,function(D){return D}))},getCloudProviderItemResource:function(k){return g.request({url:t.restBaseUrl+"content/items/"+k.id+"/resources/cloudProvider.json"}).then(J.hitch(this,function(r){return r}))},getPublishParametersForOverwrite:function(k,r){var w=new a;this._fetchPublishParameters(k,r).then(J.hitch(this,function(x){this._fetchServiceInfo(k).then(J.hitch(this,function(D){var G="";"CSV"==r?(G=J.mixin(J.mixin({},D.layers&&
D.layers[0]),{fields:x.layerInfo.fields}),G=J.mixin(x,{layerInfo:G,name:x.name||k.title.replace(/ /g,"_")})):G="Microsoft Excel"==r?this._generateExcelOverwritePublishParameters(x,D):{name:k.title?k.title.replace(/ /g,"_"):this.item.title.replace(/ /g,"_")};G=D?J.mixin(G,D):G;w.resolve(G)}),J.hitch(this,function(D){w.reject(D)}))}),J.hitch(this,function(x){w.reject(x)}));return w},_fetchPublishParameters:function(k,r){k=t.restBaseUrl+"content/items/"+k.id+"/info/publishParameters.json";!r||"CSV"!==
r&&"Microsoft Excel"!==r?(r=new a,r.resolve(!1)):r=g.request({url:k}).then(J.hitch(this,function(w){return w}));return r},_fetchServiceInfo:function(k){k=k.url;var r={addToken:(g.isHostedService(k)||g.isAgolService(k))&&!1!==t.isMultiTenant},w=new a,x;e([g.request({url:k},r),g.request({url:k+"/layers"},r)]).then(J.hitch(this,function(D){var G={},F=D&&1<D.length&&D[1],A=F&&F.layers;F=F&&F.tables;A&&A.length&&(c.forEach(A,function(y){delete y.fields}),G.layers=A);F&&F.length&&(G.tables=F);x=J.mixin(D[0],
G);w.resolve(x)}));return w},_generateExcelOverwritePublishParameters:function(k,r){r.name=k.name;r.sourceSR=k.sourceSR;r.targetSR=k.targetSR;for(var w=0;w<r.tables.length;w++)"Review"!=r.tables[w].name&&(r.layers[r.layers.length]=r.tables[w]);for(w=0;w<r.layers.length;w++)r.layers[w].excelSheetId=k.layers[w].excelSheetId,r.layers[w].locationType=k.layers[w].locationType,r.layers[w].latitudeFieldName=k.layers[w].latitudeFieldName,r.layers[w].longitudeFieldName=k.layers[w].longitudeFieldName,r.layers[w].geocodeServiceUrl=
k.layers[w].geocodeServiceUrl,r.layers[w].sourceLocale=k.layers[w].sourceLocale,r.layers[w].sourceCountry=k.layers[w].sourceCountry,r.layers[w].standardizedFieldNames=k.layers[w].standardizedFieldNames,r.layers[w].addressFields=k.layers[w].addressFields;return r},deleteItem:function(k,r){k=(r&&r.getPortalUser()).userContentUrl+(k.folderId&&"/"!==k.folderId?"/"+k.folderId:"")+"/items/"+k.id+"/delete";return g.request({url:k},{usePost:!0})},publishItem:function(k,r,w){var x=(w&&w.getPortalUser()).username;
w=(w&&w.portalUrl)+"content/users/"+x+(k.folderId&&"/"!==k.folderId?"/"+k.folderId:"")+"/publish";var D=new a;r.publishParameters=b.stringify(r.publishParameters);g.request({url:w,content:r},{usePost:!0}).then(J.hitch(this,function(G){if(t.self.hasCategorySchema&&k.categories){var F=[];(G.services||[]).forEach(function(A){F.push(this.setCategories({id:A.id,categories:k.categories}))},this);e(F).then(J.hitch(this,function(){D.resolve(J.mixin(k,{publishResult:G.services||[]}))}))}else D.resolve(J.mixin(k,
{publishResult:G.services||[]}))}),function(G){D.reject(G)});return D},createService:function(k,r,w,x){var D=new a,G,F=x&&x.getPortalUser();g.request({url:(x&&x.portalUrl)+"content/users/"+(k.owner||F.username)+"/createService",content:r},{usePost:!0}).then(function(A){return G=A}).then(J.hitch(this,this.addToDefinition,w)).then(J.hitch(this,function(A){D.resolve(J.mixin(k,{createResult:A||[]}))}),J.hitch(this,function(A){this.deleteItem(J.mixin(G,{id:G.itemId}),x).then(function(){D.reject(A)})}));
return D},addToDefinition:function(k,r){var w=new a;if(k){var x=r.encodedServiceURL.replace("rest/services","rest/admin/services");g.request({url:x+"/addToDefinition",content:{addToDefinition:k,async:!0}},{usePost:!0}).then(function(D){return l.checkAsyncJobStatus(D.statusURL)}.bind(this),function(D){w.reject(D)}.bind(this)).then(J.hitch(this,function(D){w.resolve(J.mixin(r,{addToDefinitionResult:D}))}),function(D){w.reject(D)})}else w.resolve(r);return w},moveItem:function(k,r,w){var x=new a,D=w&&
w.getPortalUser();D=k.owner||D.username;w=(w&&w.portalUrl)+"content/users/"+D+(k.folderId&&"/"!==k.folderId?"/"+k.folderId:"")+"/items/"+k.id+"/move";D={folder:r&&r!==D?r:"/"};(k.folderId||"/")!==D.folder?g.request({url:w,content:D},{usePost:!0}).then(J.hitch(this,function(G){x.resolve(J.mixin(k,{folderId:r}))})):x.resolve(k);return x},serviceNameAvailable:function(k,r){var w=r&&r.getPortalUser();k={name:k.title.replace(/ /g,"_"),type:k.type||"Feature Service"};return g.request({url:r.url+"portals/"+
w.orgId+"/isServiceNameAvailable",content:k})},analyzeItem:function(k,r,w){r=J.mixin({enableGlobalGeocoding:!0,sourceLocale:f.locale.split("-")[0]},r||{});k=J.mixin({},{analyzeParameters:r,filetype:k.fileType||k.type&&k.type.toLowerCase()||"",itemid:k.id});w=w.url+"/content/features/analyze";k.analyzeParameters=b.stringify(k.analyzeParameters);return g.request({url:w,content:k},{usePost:!0})},createTemplatedApplication:function(k,r,w,x){var D=k,G=x&&x.sharing?x.sharing:{},F=x&&x.isEveryoneChecked?
x:null,A=J.isArray(r.typeKeywords)?-1<c.indexOf(r.typeKeywords,"selfConfigured"):-1<r.typeKeywords.indexOf("selfConfigured"),y=J.isArray(r.typeKeywords)?-1<c.indexOf(r.typeKeywords,"configurableApp"):-1<r.typeKeywords.indexOf("configurableApp");x=J.isArray(r.typeKeywords)?-1<c.indexOf(r.typeKeywords,"Web AppBuilder for ArcGIS"):-1<r.typeKeywords.indexOf("Web AppBuilder for ArcGIS");var z,B=J.hitch(this,function(H){var E=new a;if(H.shareWithWebMap){var K=t.restBaseUrl+"content/items/"+H.id+"/share",
I="public"===G.access||F&&F.isEveryoneChecked()||!1,L="org"===G.access||F&&F.isAccountChecked()||!1,M=G.groups||F&&F.getSharedGroups()||[];M=c.map(M,"return item.id;");I={f:"json",everyone:I,org:L,groups:M.join(","),items:[H.id]};t.self.hasCategorySchema&&I.categories&&(I.categories=b.stringify(I.categories));g.request({url:K,content:I},{usePost:!0}).then(J.hitch(this,function(){E.resolve(H)}))}else E.resolve(H);return E});if(D&&x)return k=new a,D.folderId&&"/"!==D.folderId&&(D.folder=D.folderId),
x=window.location.protocol+"//"+window.location.host+g.getHomeAppContext()+"/apps/webappbuilder/index.html?",x+=d.objectToQuery({title:D.title,tags:D.tags,summary:D.description,folder:D.folder,categories:D.categories&&D.categories.length?b.stringify(D.categories):void 0}),k.resolve(J.mixin(D,{configureUrl:x})),k;if(D){x=g.parseUrl(r.url);delete k.typeKeywords;var C=window.location.protocol+"//"+x.host+(x.port&&"443"!==x.port&&"80"!==x.port?":"+x.port:"")+x.path;C="https:"===window.location.protocol?
g.getSecureUrl(C):g.getHttpUrl(C);D=J.mixin({type:"Web Mapping Application",typeKeywords:"Web Map, Map, Online Map, Mapping Site, JavaScript, Ready To Use"+(A?" ,selfConfigured":"")+(y?", configurableApp":""),thumbnailURL:g.getStaticImagesUrl()+"/webapp.png",url:C},D);D.text=b.stringify(J.mixin({},{source:r.id,folderId:D.folderId,values:k.webSceneId?{webscene:k.webSceneId}:k.webMapId?{webmap:k.webMapId}:k.groupId?{group:k.groupId}:{}}));return this.addItem(D,D.folderId,w).then(J.hitch(this,function(H){return B(J.mixin(D,
{id:H.id})).then(J.hitch(this,function(E){var K=E.url.indexOf("?"),I=-1!==K?E.url.substr(K,E.url.length):"";I+=I&&I.length?"\x26":"?";I+="appid\x3d"+H.id;C=E.url.substr(0,-1!==K?K:E.url.length)+I;return this.updateItem({id:H.id,url:C,folderId:E.folderId},w).then(J.hitch(this,function(){return A?(z=A?C+"\x26edit\x3dtrue":t.baseUrl+("webmap/configureApp.html?appid\x3d"+H.id),z+=H.folderId&&"/"!==H.folderId?"\x26folderid\x3d"+H.folderId:"",J.mixin(E,H,{configureUrl:z,url:C})):y?(z=window.location.protocol+
"//"+window.location.host+g.getHomeAppContext()+"/apps/configure-template/index.html?appid\x3d"+H.id,J.mixin(E,H,{configureUrl:z,url:C})):g.request({url:t.restBaseUrl+"content/items/"+r.id+"/data"}).then(J.hitch(this,function(L){z=L&&L.configurationSettings?t.baseUrl+"webmap/configureApp.html?appid\x3d"+H.id+(H.folderId&&"/"!==H.folderId?"\x26folderid\x3d"+H.folderId:""):t.baseUrl+"item.html?id\x3d"+H.id;return J.mixin(E,H,{configureUrl:z,url:C})}))}))}))}),J.hitch(this,function(H){H&&409===H.code&&
(H=D,H={title:n.addItemFrm.errors.error.title,message:q.substitute({type:H.type,title:H.title},n.addItemFrm.errors.itemExists.message)});throw H;}))}},checkStatus:function(k,r,w,x){var D=(x&&x.getPortalUser()).userContentUrl;k?g.request({url:D+"/items/"+k.id+"/status",content:{jobId:k.jobId}}).then(J.hitch(this,function(G){G=G||{status:"failed"};if("completed"===G.status)return r.resolve(k);if("failed"===G.status||""===G.status)return G=l.getStatusError(G),r.reject({message:G});w=(w||500)+250;setTimeout(J.hitch(this,
function(){this.checkStatus(k,r,w,x)}),w)}),J.hitch(this,function(G){r.reject(G)})):r.reject()},_getBatchGeocodeServers:function(k){if(!this._batchGeocoderServers){var r=k.getPortalUser(),w=-1<c.indexOf(r.privileges,"portal:user:createItem")&&-1<c.indexOf(r.privileges,"premium:user:geocode"),x=/(arcgis.com\/arcgis\/rest\/services\/world\/geocodeserver).*/ig,D=/(\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/ig,G,F,A=[];c.forEach(k.helperServices&&k.helperServices.geocode||[],function(y){G=
!!y.url.match(x);F=!!y.url.match(D);(G&&!k.isPortal&&w||F||y.batch)&&A.push({isWorldGeocodeServer:G||F,isWorldGeocodeServerProxy:F,label:y.name,value:y.url,url:y.url,name:y.name})});this._batchGeocoderServers=A}return this._batchGeocoderServers},getPortalDefaultExtentAsGCS:function(k){if(k=k.defaultExtent||null){k=m.webMercatorToGeographic(new v(k));var r=k.spatialReference._getInfo();if(r){if(k.xmin>k.xmax){var w=r.valid[1]-k.xmin,x=k.xmax-r.valid[0];w>x?k.xmax=r.valid[1]+x:k.xmin=r.valid[0]-w}return Math.round(1E4*
k.xmin)/1E4+","+Math.round(1E4*k.ymin)/1E4+","+Math.round(1E4*k.xmax)/1E4+","+Math.round(1E4*k.ymax)/1E4}}return null},itemExists:function(k,r,w){var x=k.title;w=w&&"/"!==w?w:"root";var D="Data Store"===k.type?k.type.toLowerCase():k.type;r={q:'title:"'+x+'" AND type:"'+D+'" AND owner:"'+r+'" AND ownerfolder:"'+w+'"',num:1};var G,F=new dojo.Deferred;g.request({url:t.restBaseUrl+"search",content:r}).then(function(A){A&&A.total?(G=A.results&&A.results.shift(),k&&k.id===G.id||x!==G.title?F.resolve({itemExists:!1}):
(A=k.isFile?q.substitute({type:k.fileExtension,item:k.item,name:k.name||k.title,title:k.title},n.addItemFrm.errors.itemExistsFile.message):q.substitute({type:D,item:k.item,title:x},n.addItemFrm.errors.itemExists.message),F.resolve({itemExists:!0,message:A}))):F.resolve({itemExists:!1})}.bind(this));return F},noSQLCheck:function(k,r){return k.connectionUri===r.noSQLConnectionURI&&k.database===r.noSQLDataBase&&k.username===r.noSQLUsername},getAllNoSQLDatastorePromises:function(k){var r=new a,w=[];g.request({url:t.restBaseUrl+
"search?q\x3dtype%3A'Data+Store'\x26bbox\x3d\x26sortField\x3d\x26sortOrder\x3d"}).then(function(x){if(x&&x.total){var D=[];x.results.forEach(function(G){G.typeKeywords.includes("nosql")&&D.push(G)});0!==D.length&&D.forEach(function(G){w.push(function(){var F=new a;g.request({url:t.restBaseUrl+"content/items/"+G.id+"/data"}).then(function(A){this.noSQLCheck(A.info.connectionProperties,k)?F.resolve({itemExists:!0}):F.resolve({itemExists:!1})}.bind(this));return F}.call(this))}.bind(this))}r.resolve({allPromises:w})}.bind(this));
return r},checkForDuplicateNoSQL:function(k){var r=new a;this.getAllNoSQLDatastorePromises(k).then(function(w){e(w.allPromises).then(function(x){var D;0!==x.length?(x.forEach(function(G){!0===G.itemExists&&(D=!0)}),D?r.resolve({itemExists:!0}):r.resolve({itemExists:!1})):r.resolve({itemExists:!1})})}.bind(this));return r},hasCreateLayer:function(k){var r={managed:!0},w=k&&(k.user||k.getPortalUser&&k.getPortalUser()),x=new p({portalUser:w}),D,G,F,A,y;if(k.isPortal&&w&&(x.isBasedOnAdmin()||x.isBasedOnPublisher()))return k.getFederatedServers().then(J.hitch(this,
function(z){(G=(D=c.filter(z.servers||[],J.hitch(this,function(B){return B.isHosted})))&&D.length?D[0]:null)?(F=G.adminUrl+"/admin/data/findItems",y=g.request({url:F,content:r},{useProxy:!0}).then(J.hitch(this,function(B){return(A=c.filter(B.items||B||[],J.hitch(this,function(C){return C&&C.provider&&"arcgis data store"===C.provider.toLowerCase()})))&&A.length?!0:!1}),J.hitch(this,function(B){return!1}))):(y=new a,y.resolve(!1));return y}));k=new a;k.resolve(!0);return k}}})},"arcgisonline/pages/statusUtil":function(){define("require exports tslib dojo/Deferred dojo/on dojo/json dojo/topic esri/lang esri/urlUtils ./pageUtil ./utils/arrays ./utils/polling esri/tasks/Geoprocessor ../sharing/util dojo/i18n!../nls/arcgisonline".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);return function(){function p(){}p.checkStatus=function(l){var n=new c.default,k=this.getJobUrl(l),r=this.getJobId(l),w=m.default.isPortal(),x="Scene Service"===l.type,D=w&&x&&!this.isSceneFromFeatures(l),
G=this.is3DTilesFromPackage(l),F=!w&&G;l.canUpdate&&l.isHostedService&&!l.isUtilityNetwork&&("Feature Service"===l.type||(w||k&&r)&&"Image Service"===l.type||x||"Vector Tile Service"===l.type||"3DTiles Service"===l.type||w&&"Map Service"===l.type)?(l.set("status","processing"),k&&r?this.checkJobStatus(l,500):F||x&&!D||!(r||"Feature Service"===l.type&&(this.isFeaturesFromPackage(l)||this.isFeaturesFromExcel(l))||"Map Service"===l.type&&!this.isTileFromFeatures(l)||"Vector Tile Service"===l.type&&l.sourceData&&
!this.isVectorTileFromFeatures(l)||w&&G)?w||this.isVectorTileFromFeatures(l)?l.set("status","completed"):this.checkServiceStatus(l,500,n):"Vector Tile Service"===l.type&&l.sourceData&&this.isVectorTileFromPackage(l)||"Feature Service"===l.type&&this.isFeaturesFromExcel(l)?this.checkItemStatusCallSupport(l,500,n):(l.set("firstStatus",!0),this.checkItemStatus(l,500,n))):l.set("status","completed");n.resolve(l);return n};p.checkItemStatusCallSupport=function(l,n,k){var r=this;this.supportsItemStatusCall(l).then(function(w){w?
(l.set("firstStatus",!0),r.checkItemStatus(l,n,k)):r.checkServiceStatus(l,n,k)})};p.supportsItemStatusCall=function(l){var n="".concat(l.userItemUrl,"/status"),k=l.jobId;return!k&&"Vector Tile Service"===l.type&&l.sourceData&&this.isVectorTileFromPackage(l)?Promise.resolve(!1):m.default.request({url:n,content:{jobId:k}}).then(function(r){var w;return"item status doesn't exist"===(null===(w=null===r||void 0===r?void 0:r.statusMessage)||void 0===w?void 0:w.toLowerCase())?!1:!0},function(){return!1})};
p.isFeaturesFromPackage=function(l){var n,k=null===(n=l.sourceData)||void 0===n?void 0:n.type;return"Feature Service"===l.type&&0<(null===k||void 0===k?void 0:k.indexOf("Package"))};p.isFeaturesFromExcel=function(l){var n,k=null===(n=l.sourceData)||void 0===n?void 0:n.type;return"Feature Service"===l.type&&"Microsoft Excel"===k};p.isTileFromFeatures=function(l){var n;return"Map Service"===l.type&&"Feature Service"===(null===(n=l.sourceData)||void 0===n?void 0:n.type)};p.isSceneFromFeatures=function(l){var n;
return"Scene Service"===l.type&&"Feature Service"===(null===(n=l.sourceData)||void 0===n?void 0:n.type)};p.isVectorTileFromFeatures=function(l){var n;return"Vector Tile Service"===l.type&&"Feature Service"===(null===(n=l.sourceData)||void 0===n?void 0:n.type)};p.isVectorTileFromPackage=function(l){var n,k;return"Vector Tile Service"===l.type&&0<(null===(k=null===(n=l.sourceData)||void 0===n?void 0:n.type)||void 0===k?void 0:k.indexOf("Package"))};p.is3DTilesFromPackage=function(l){var n,k;return"3DTiles Service"===
l.type&&(null===(k=null===(n=l.sourceData)||void 0===n?void 0:n.type)||void 0===k?void 0:k.includes("Package"))};p.getJobId=function(l){var n=e.default.urlToObject(document.URL),k=l.properties||{};l.jobId=l.jobId||k.jobId||n&&n.query&&n.query.jobid||null;return l.jobId};p.getJobUrl=function(l){var n=(l.properties&&l.properties.jobUrl||"").split("/jobs/");l.jobUrl=n.shift();l.jobId=l.jobUrl?n.shift():null;return l.jobUrl};p.checkItemStatus=function(l,n,k){var r=this,w;void 0===n&&(n=500);var x=l.portal.isPortal,
D="".concat(l.userItemUrl,"/status"),G={jobId:l.jobId};"image service"===(null===(w=l.type)||void 0===w?void 0:w.toLowerCase())&&(G.jobType="publishImageService");m.default.request({url:D,content:G}).then(function(F){F=F||{status:"failed"};var A=x&&"failed"===F.status&&-1<F.statusMessage.toLowerCase().indexOf("job not found.");"completed"===F.status||A?l.set({firstStatus:void 0,status:"completed",readyForGeocodeReview:!0,readyToRetrieveServiceLayers:!0}):"failed"===F.status||400<F.code||""===F.status?
(l.set("statusError",r.getStatusError(F)),l.set("status","failed")):(l.set("status","processing"),F.jobInfo.jobId&&(l.set("jobId",F.jobInfo.jobId),l.firstStatus?l.set({firstStatus:!1,status:"completed"}):l.set("status","processing")),n+=250,setTimeout(function(){return r.checkItemStatus(l,n,k)},n))},function(F){l.set("statusError",r.getStatusError(F));l.set("status","failed")})};p.checkServiceStatus=function(l,n,k){var r=this;void 0===n&&(n=500);var w="".concat(l.adminUrl,"/status"),x={};if("Scene Service"===
l.type||"Vector Tile Service"===l.type)w=l.adminUrl;"3DTiles Service"===l.type&&(w=l.adminUrl.replace("/tileset.json",""));l.adminServerToken&&(x.token=l.adminServerToken);m.default.request({url:w,content:x},{useProxy:m.default.shouldUseProxy(w)}).then(function(D){var G,F;D.status=(null===(G=D.realTimeState)||void 0===G?void 0:G.toLowerCase())||(null===(F=D.status)||void 0===F?void 0:F.toLowerCase())||(D.currentVersion&&D.capabilities?"started":"failed");if("Scene Service"===l.type||"Vector Tile Service"===
l.type||"3DTiles Service"===l.type)D.status="PROCESSING"===D.cacheExecutionStatus||"SUBMITTED"===D.cacheExecutionStatus?"processing":"started";"started"===D.status?l.set({status:"completed",readyForGeocodeReview:!0}):"failed"===D.status||400<D.code||""===D.status?(l.set("statusError",r.getStatusError(D)),l.set("status","failed")):(l.set("status","processing"),n+=250,setTimeout(function(){return r.checkServiceStatus(l,n,k)},n))},function(D){l.set("statusErrorCode",null===D||void 0===D?void 0:D.code);
l.set("statusError",r.getStatusError(D));l.set("status","failed")})};p.checkVectorTileServiceJobStatus=function(l,n,k){var r=this;void 0===n&&(n=500);void 0===k&&(k=0);var w=new c.default;if("Vector Tile Service"===l.type){var x=l.adminUrl,D={},G=null!==k&&void 0!==k?k:0;l.adminServerToken&&(D.token=l.adminServerToken);m.default.request({url:x,content:D},{useProxy:m.default.shouldUseProxy(x)}).then(function(F){F.code?10<G?(l.set("statusErrorCode",null===F||void 0===F?void 0:F.code),l.set("statusError",
r.getStatusError(F)),l.set("status","failed"),w.resolve(F)):(n+=1E3,setTimeout(function(){r.checkVectorTileServiceJobStatus(l,n,G+1)},n)):(F.status="PROCESSING"===F.cacheExecutionStatus||"SUBMITTED"===F.cacheExecutionStatus?"processing":"started","started"===F.status?(l.set("status","completed"),w.resolve(F)):"failed"===F.status||400<F.code||""===F.status?(l.set("statusError",r.getStatusError(F)),l.set("status","failed"),w.resolve(F)):(l.set("status","processing"),n+=1E3,setTimeout(function(){return r.checkVectorTileServiceJobStatus(l,
n)},n)))},function(F){10<G?(l.set("statusErrorCode",null===F||void 0===F?void 0:F.code),l.set("statusError",r.getStatusError(F)),l.set("status","failed"),w.resolve(F)):(n+=1E3,setTimeout(function(){r.checkVectorTileServiceJobStatus(l,n,G+1)},n))})}else w.resolve();return w};p.checkJobStatus=function(l,n){var k=this;void 0===n&&(n=3E3);var r=(l.portal.getPortalUser()||{}).getToken(),w=l.jobId,x=l.jobUrl,D=l.properties;if(D&&"processing"===D.jobStatus){l.set("status","processing");var G=new g.default(x+
(r?"?token\x3d".concat(r):""));(0,h.default)(G,"status-update",function(A){"esriJobExecuting"!==A.jobInfo.jobStatus?(l.set("status","completed"),F&&clearInterval(F)):l.set("status","processing")});(0,h.default)(G,"error",function(A){var y;A=A.error||A;(null===(y=null===A||void 0===A?void 0:A.message)||void 0===y?0:y.indexOf("not found."))?(l.set("status","completed"),D&&(D.jobId&&delete D.jobId,D.jobUrl&&delete D.jobUrl,D.jobStatus&&delete D.jobStatus,D.jobType&&delete D.jobType,l.set("properties",
D))):(l.set("statusError",k.getStatusError(A)),l.set("status","failed"));F&&clearInterval(F)});var F=setInterval(function(){return G.checkJobStatus(w)},n)}else l.set("status","completed")};p.checkSceneCachingJobStatus=function(l,n,k,r){var w=this;void 0===n&&(n=3E3);var x=m.default.isPortal(),D=!(!l.portalUser||!l.portalUser.isOrgAdmin),G=l.cachingJobUrl||l.properties&&l.properties.cacheJobUrl,F=x?["esriJobSucceeded","esriJobFailed","esriJobCancelled"]:["Completed","Failed"],A=x?"esriJobFailed":"Failed",
y=x?"jobStatus":"status",z=x?G:"".concat(l.adminUrl,"/").concat(G);x&&D&&(z=z.replace("/rest/","/admin/").replace("/SceneCachingControllers/GPServer/","/SceneCachingControllers.GPServer/"),y="status");var B=x?{useProxy:m.default.shouldUseProxy(z)}:{};if(G)var C=setInterval(function(){m.default.request({url:z},B).then(function(H){r&&b.default.publish(r,H);t.default.includes(F,H[y])?(H[y]===A&&(l.set("status","failed"),k&&k.reject(H)),clearInterval(C),l.set("cachingJobUrl",void 0),l.set("status","completed"),
k&&k.resolve(H)):l.set("status","processing")},function(H){var E;(null===(E=null===H||void 0===H?void 0:H.message)||void 0===E?0:E.indexOf("not found."))?(l.set("cachingJobUrl",void 0),l.set("status","completed"),k&&k.resolve()):(l.set("statusError",w.getStatusError(H)),l.set("status","failed"),k&&k.reject(H))})},n);else l.set("cachingJobUrl",void 0),l.set("status","completed"),k&&k.resolve({})};p.getStatusError=function(l){var n=(null===l||void 0===l?void 0:l.statusMessage)||v.default.addItemFrm.errors.publishError.message;
if(n&&"null"!==n)return q.default.isJson(n)?d.default.parse(n):n;n="null"===n&&!l.jobType;return"failed"===(null===l||void 0===l?void 0:l.status)&&"publish"===l.jobType||n?v.default.addItemFrm.errors.publishError.message:l};p.checkAsyncJobStatus=function(l,n){var k=new c.default,r=0,w,x=function(){m.default.request({url:l},n).then(function(D){D=D||{status:"Failed"};w=D.status||D.jobStatus;w=a.default.isDefined(w)?w.toLowerCase():w;t.default.includes(["esrijobsucceeded","completed"],w)?k.resolve(D):
t.default.includes(["esrijobfailed","failed"],w)||400<D.code?k.reject(D):setTimeout(x,u.default.asyncIntervalTimerFunction(r++))},function(D){k.reject(D)})};setTimeout(x,u.default.asyncIntervalTimerFunction(r++));return k};p.checkAsyncJobStatusWithVaryingInterval=function(l,n){var k=new c.default,r=0,w,x=function(){setTimeout(function(){r++;m.default.request({url:l}).then(function(D){D=D||{status:"Failed"};w=D.status||D.jobStatus;w=a.default.isDefined(w)?w.toLowerCase():w;t.default.includes(["esrijobsucceeded",
"completed"],w)?k.resolve(D):t.default.includes(["esrijobfailed","failed"],w)||400<D.code?k.reject(D):x()},function(D){return k.reject(D)})},n(r))};x();return k};p.getEndTime=function(l){var n=m.default.isPortal();if(((null===l||void 0===l?0:l.startTime)||(null===l||void 0===l?0:l.submittedTime))&&((null===l||void 0===l?0:l.totalTime)||(null===l||void 0===l?0:l.duration))){var k=(n?l.submittedTime:l.startTime)||0;k=n?k:1E3*k;l=n?a.default.isDefined(l.duration)?l.duration:void 0:a.default.isDefined(l.totalTime)?
1E3*l.totalTime:void 0;return k+l}if(n&&l.jobStatus&&l.messages&&(l=t.default.find(l.messages||[],function(w){return"esriJobMessageTypeInformative"===w.type&&0===w.description.indexOf("Succeeded at ")})))try{k=l.description.indexOf(" (Elapsed Time: ");var r=l.description.substring(14,k).trim();return(new Date(r)).getTime()}catch(w){}};return p}()})},"arcgisonline/pages/utils/polling":function(){define(["require","exports"],function(S,J){function f(c){return 1E3*J.ASYNC_POLLING_INTERVALS[-1<c&&c<J.ASYNC_POLLING_INTERVALS.length-
1?c:J.ASYNC_POLLING_INTERVALS.length-1]}Object.defineProperty(J,"__esModule",{value:!0});J.asyncIntervalTimerFunction=J.ASYNC_POLLING_INTERVALS=void 0;J.ASYNC_POLLING_INTERVALS=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,15,15,30,30,30,30,30,30,30,30,30,30,120];J.asyncIntervalTimerFunction=f;J.default={ASYNC_POLLING_INTERVALS:J.ASYNC_POLLING_INTERVALS,asyncIntervalTimerFunction:f}})},"arcgisonline/sharing/geow/Item":function(){define("require exports tslib ../../esriGeowConfig ../util dojo/Deferred dojo/dom-form dojo/topic dojo/promise/all esri/request".split(" "),
function(S,J,f,c,h,d,b,a,e,q){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);return function(){function t(){}t.addItem=function(u,g,m){return t._action(u,g,m,"addItem")};t.update=function(u,g,m){return t._action(u,g,m,"update")};t._action=function(u,g,m,v){if(h.default.getUser())return v=t._getActionItemUrl(u,v),u=5242880<m.size?t._multiPartAction(v,g,m,u):t._postForm(v,g)};t._multiPartAction=
function(u,g,m,v){var p=new d.default,l=function(w){p.reject(w)},n=function(w){w.isMultipart=!0;p.resolve(w)},k=function(w){t._commitItem(v,g).then(n,l)},r=function(w){t._cancelItem(v);"Request canceled"!==w.message&&l.call(t,w)};t._startMultipartRequest(u,v.fileName?v.fileName:m.name).then(function(w){w.success?(v.id=w.id,t._addItemParts(v,m).then(k,r)):l.call(t,w.error)},l);return p};t._postForm=function(u,g){return h.default.request({url:u,form:g,timeout:0},{usePost:!0})};t._startMultipartRequest=
function(u,g){return h.default.request({url:u,content:{multipart:!0,filename:g,async:!0}},{usePost:!0})};t.generatePart=function(u,g){var m,v,p,l,n,k,r,w,x;return f.__generator(this,function(D){switch(D.label){case 0:m=u.name,v=u.size,p=5242880,l=Math.ceil(v/p),n=0,1E4<l&&(p=Math.ceil(v/1E4),l=Math.ceil(v/p)),D.label=1;case 1:if(!(n<l))return[3,3];k=new FormData;r=n*p;w=u.slice(r,r+p);n++;x={partNum:n,size:w.size};k.append("partNum",String(x.partNum));k.append("streamdata","true");k.append("f","json");
k.append("token",g);k.append("file",w,m);return[4,{partData:x,formData:k}];case 2:return D.sent(),[3,1];case 3:return[2]}})};t._addItemParts=function(u,g){var m=this,v=g.size,p=new d.default,l={};this.pendingRequests=[];var n=3;a.default.subscribe("cancel-item-upload",function(){m.pendingRequests.forEach(function(x){x&&!x.isFulfilled()&&x.cancel()})});var k=t.generatePart(g,h.default.getToken()),r=!0,w=function(){if(r){var x=[];t.uploadError=!1;for(var D=0;D<n;D++){var G=k.next(),F=G.value;if(G.done){r=
!1;break}x.push(F)}(0,e.default)(x.map(function(A){var y=new d.default;return t._addPartWithRetries(u,A.partData,A.formData,1,v,l,y)})).then(function(){r||p.resolve();n=t.uploadError?Math.ceil(n/2):Math.min(++n,10);w()},function(A){r=!1;p.reject(A)})}};w();return p};t._addPartWithRetries=function(u,g,m,v,p,l,n){var k=t._getActionItemUrl(u,"addPart");k=(0,q.default)({url:k,form:m,timeout:0},{returnProgress:!0,disableIdentityLookup:!0}).then(function(r){r.success?n.resolve(r):n.reject(r.error)},function(r){v++;
t.uploadError=!0;"Request canceled"!==r.message&&7>=v?t._addPartWithRetries(u,g,m,v,p,l,n):n.reject(r)},function(r){r.loaded&&"upload"===r.transferType&&(l[g.partNum.toString()]=r.loaded,r=Object.keys(l).reduce(function(w,x){return w+l[x]},0),a.default.publish("item/upload-progress-update",Math.floor(r/p*100)))});t.pendingRequests.push(k);return n};t._commitItem=function(u,g){var m=t._getActionItemUrl(u,"commit");u=g instanceof FormData?{title:u.fileName,type:u.fileType}:f.__assign({},b.default.toObject(g));
return h.default.request({url:m,content:u},{usePost:!0})};t._cancelItem=function(u){u=t._getActionItemUrl(u,"cancel");return h.default.request({url:u},{usePost:!0})};t._getUserUrl=function(u){var g=h.default.getUser();g=g.username||g.email;return"".concat(c.default.restBaseUrl,"content/users/").concat(u.owner||g)};t._getActionItemUrl=function(u,g){var m=this._getUserUrl(u);u.folderId&&(m="".concat(m,"/").concat(u.folderId));return m="addItem"===g?"".concat(m,"/addItem"):"".concat(m,"/items/").concat(u.id,
"/").concat(g)};t.uploadError=!1;return t}()})},"arcgisonline/sharing/dijit/dialog/AttachCodeDlg":function(){define("require exports tslib ../../../pages/pageUtil ../../../pages/utils/clone ../../../pages/utils/dom ../../util ../../geow/Content arcgisonline/tsutils/declareDecorator dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/string dojo/on dojo/i18n!../../../nls/arcgisonline dojo/text!./templates/AttachCodeDlg.html".split(" "),function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,
p){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);return function(){function l(n,k){this.widgetsInTemplate=!0;this.templateString=p.default;this.fileInput=null;this.clearFormOnHide=!0;this.codeAttachment=null;this.messageErrorUpdate=this.messageLabel=
this.messageLabelUpdate=this.titleLabel="";this.errorLabelNode=null;this.type="Code Attachment";this.typeKeywords="Code";this.handleAddItem=this.handleAddItem.bind(this)}l.prototype.postMixInProperties=function(){this.inherited(arguments);this.i18n=f.__assign(f.__assign({},v.default.common),v.default.attachCodeDlg);this.titleLabel=this.i18n.attachCode;this.messageLabelUpdate=this.i18n.messageLabelUpdateString;this.messageLabel=this.i18n.messageLabelString;this.messageErrorUpdate=this.i18n.messageErrorUpdateString};
l.prototype.postCreate=function(){var n=this;this.fileInput&&this.own((0,m.default)(this.fileInput,"change",function(){n.errorLabelNode.innerHTML=""}));this.own((0,m.default)(this.cancelButton,"click",this.cancelButtonClick.bind(this)),(0,m.default)(this.uploadButton,"click",this.uploadButtonClick.bind(this)))};l.prototype.clear=function(){this.fileInput&&(this.fileInput.value="")};l.prototype.hide=function(){this.dialog&&(this.dialog.hide(),this.clearFormOnHide&&this.clear())};l.prototype.show=function(n){var k,
r,w,x;this.codeAttachment=n;(null===(k=this.codeAttachment)||void 0===k?0:k.name)?(this.messageLabelUpdate=g.default.substitute(this.messageLabelUpdate,{fileName:this.codeAttachment.name}),this.codeUploadMessage.innerHTML=this.messageLabelUpdate,null===(r=this.dialog)||void 0===r?void 0:r.set("title",this.i18n.updateCode)):(this.codeUploadMessage.innerHTML=this.messageLabel,null===(w=this.dialog)||void 0===w?void 0:w.set("title",this.i18n.attachCode));this.dialog&&(null===(x=this.dialog)||void 0===
x?void 0:x.show())};l.prototype.cancelButtonClick=function(){this.hide()};l.prototype.uploadButtonClick=function(){var n=this.fileInput.value;0<(null===n||void 0===n?void 0:n.length)&&b.default.endsWith(n,".zip")?(this.uploadButton.disabled=!0,this.cancelButton.disabled=!0,this.codeUploadWaiting.classList.remove("hide"),this.codeUploadWaiting.classList.add("inline-block"),this.doUpload()):this.errorLabelNode.innerHTML=this.i18n.fileZipFormat};l.prototype.doUpload=function(){if(null==this.item||null===
this.item.id)this.uploadButton.disabled=!1,this.cancelButton.disabled=!1,d.default.hideNode(this.codeUploadWaiting);else{var n=this.fileInput.value,k=n.lastIndexOf("\\");-1<k&&(n=n.substring(k+1,n.length));if(this.codeAttachment){var r=this.codeAttachment.name.lastIndexOf(".");k=n.lastIndexOf(".");r=[this.codeAttachment.name.substring(0,r),this.codeAttachment.name.substring(r).toLowerCase()];n=[n.substring(0,k),n.substring(k).toLowerCase()];r[0]!==n[0]||r[1]!==n[1]?(c.default.createConfirmationDialog({strings:{title:this.i18n.updateCodeError,
description:g.default.substitute(this.messageErrorUpdate,{fileName:this.codeAttachment.name})},hideCancel:!0,autoCloseOnOk:!0,renderHtmlDescription:!0}),this.uploadButton.disabled=!1,this.cancelButton.disabled=!1,d.default.hideNode(this.codeUploadWaiting)):this.updateCodeItem()}else this.createCodeItem()}};l.prototype.createCodeItem=function(){if(this.form){var n=this.form.elements;n.type.value=this.type;n.typekeywords.value=this.typeKeywords;n.relationshipType.value="WMA2Code";"Mobile Application"===
this.item.type&&(n.relationshipType.value="MobileApp2Code");n.originItemId.value=this.item.id;var k=this.fileInput.value,r=k.lastIndexOf("\\");-1<r&&(k=k.substring(r+1,k.length));this.fileName=k;n.title.value=k;k=n.title.value.lastIndexOf("\\");-1<k&&(n.title.value=n.title.value.substring(k+1,n.title.value.length));k=n.title.value.lastIndexOf("/");-1<k&&(n.title.value=n.title.value.substring(k+1,n.title.value.length));a.default.addItem(null,this.form,this.handleAddItem,this.handleAddItem)}};l.prototype.updateCodeItem=
function(){if(this.form){var n=this.form.elements;n.type.value=this.type;n.typekeywords.value=this.typeKeywords;n.overwrite.value="true";var k=this.fileInput.value,r=k.lastIndexOf("\\");-1<r&&(k=k.substring(r+1,k.length));this.fileName=k;n.title.value=k;a.default.updateItem(this.codeAttachment,this.form,this.handleAddItem,this.handleAddItem)}};l.prototype.handleAddItem=function(n,k){var r,w=!1;-1<k.url.indexOf("/status")&&(w=!0);if(!w&&n.success||w&&"completed"===n.status)this.lastUploaded=(0,h.default)(n),
this.lastUploaded.title=this.lastUploaded.name=this.form.elements.title.value,this.onUpload(this.lastUploaded);else{k=this.i18n.attachementFailedUpload;if(null===(r=null===n||void 0===n?void 0:n.error)||void 0===r?0:r.message)k=n.error.message;else if(null===n||void 0===n?0:n.statusMessage)k=n.statusMessage;n=this.i18n.cannotAddAttachment;-1<k.indexOf("already exists")?(k=this.i18n.sameZipFileName,n=this.i18n.duplicateFileName):-1<k.indexOf("The request size is greater than the max allowed of 1024MB")&&
(k=this.i18n.fileSizeExceeds);this.hide();c.default.createConfirmationDialog({strings:{title:n,description:k},hideCancel:!0,autoCloseOnOk:!0})}this.uploadButton.disabled=!1;this.cancelButton.disabled=!1;d.default.hideNode(this.codeUploadWaiting)};l.prototype.handleUpdateItem=function(n,k){var r;if(n.success)this.uploadButton.disabled=!1,this.cancelButton.disabled=!1,d.default.hideNode(this.codeUploadWaiting),this.hide();else{k=this.i18n.attachementFailedUpload;if(null===(r=null===n||void 0===n?void 0:
n.error)||void 0===r?0:r.message)k=n.error.message;n=this.i18n.cannotAddAttachment;-1<k.indexOf("already exists")?(k=this.i18n.sameZipFileName,n=this.i18n.duplicateFileName):-1<k.indexOf("The request size is greater than the max allowed of 1024MB")&&(k=this.i18n.fileSizeExceeds);this.hide();c.default.createConfirmationDialog({strings:{title:n,description:k},hideCancel:!0,autoCloseOnOk:!0});this.uploadButton.disabled=!1;this.cancelButton.disabled=!1;d.default.hideNode(this.codeUploadWaiting)}};l.prototype.onUpload=
function(n){};return l=f.__decorate([(0,e.default)(q.default,t.default,u.default)],l)}()})},"arcgisonline/sharing/dijit/dialog/CreateAppDlg":function(){define("require esri/declare esri/Evented esri/kernel esri/lang esri/request dojo/_base/lang dojo/_base/window dojo/_base/array dojo/topic dojo/string dojo/query dojo/on dojo/json dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/promise/all dojo/Deferred dojo/when dojo/io-query dojox/widget/Wizard dojox/widget/WizardPane dijit/Dialog dijit/registry ./ConfirmDialog ./ItemPropertiesDlg ./BrowseItemsDlg ./ConfirmDialog ./_CreateItemUtilMixin ../../../esriGeowConfig ../../../pages/components/ManageBlockedApps/blocked-apps-service ../../../pages/utils/arrays ../../../map/utils/previewInTemplate ../../../map/utils/openMap dijit/_WidgetBase arcgisonline/sharing/util dojo/i18n!../../../nls/arcgisonline arcgisonline/sharing/dijit/dialog/PluginConfigurableAppsViewer arcgisonline/sharing/dijit/dialog/Plugin3DConfigurableAppsViewer".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E,K,I,L,M,N,P,R,Y){return J([P,f],{showModal:function(ja){var aa=new w,da=this.item?b.mixin({},this.item,{tags:this.item.isHostedTemplate?[]:this.item.tags||[]}):{},ra=ja.isWab,ca="Web Scene"===da.type,fa=R.getHomeAppContext(),la=ja.message,ta,Q=new z({title:ja.title||Y.itemProperties.createNewApp,buttonOk:Y.common.ok,buttonCancel:Y.common.cancel,busyMessage:Y.addItemFrm.addingItem,style:{width:"550px",height:"auto"}}),T=new B({typeInfo:ra?
"wab":"configapp",message:la||(ra?Y.items.createWABMessage:Y.itemProperties.createAppTitle),showFolders:!0,showFile:!1,item:da});this.item&&(T.set("summary",this.item.isHostedTemplate?"":this.item.snippet),T.set("title",this.item.isHostedTemplate?"":this.item.title),T.set("tags",this.item.isHostedTemplate?[]:this.item.tags),K.self.hasCategorySchema&&T.set("categories",this.item.categories||[]));Q.setContent(T.domNode);Q.show();T.set("focus","title");this.own(g(Q,"ok",b.hitch(this,function(){q.publish("/esri/disable",
!0,Y.addItemFrm.addingItem);T._validate().then(b.hitch(this,function(){ra?(da=b.mixin({},T.get("item")),Q.hide().then(b.hitch(this,function(){this.redirectToAppBuilder(da)}))):(ta=T.get("item"),this.item.isHostedTemplate||(ta=b.mixin(ta,{shareWithWebMap:!0},ca?{webSceneId:this.item.id}:{webMapId:this.item.id})),R.isPortal()&&da.url&&0===da.url.indexOf("/")&&da.url&&-1===da.url.indexOf(fa)&&(da.url=fa+da.url),E.createTemplatedApplication(ta,da,this.item.portal,this.item).then(function(O){ta=O;Q.hide()}))}),
b.hitch(this,function(O){q.publish("/esri/disable",!1);this._showError(O)}))})),g(Q,"hide",function(){aa.resolve(ta)}));return aa},showWizard:function(ja){var aa=new w;I.default.getBlockedApps().then(b.hitch(this,function(da){da=da&&da.includes("arcgisinstantapps");var ra=this.item?b.mixin({},this.item,{tags:this.item.isHostedTemplate?[]:this.item.tags||[]}):{},ca=new A({title:Y.items.newWebMappingAppTitle,"class":"esriCreateAppDlg"}),fa=this.item&&this.item.portal||ja.portal||{},la=this.item?L.includes(ra.types,
"is-map"):!0,ta="Web Scene"===ra.type,Q;la=la?this.item?"arcgisonline/sharing/dijit/dialog/PluginConfigurableAppsViewer":"arcgisonline/sharing/dijit/dialog/PluginConfigurableApps":"arcgisonline/sharing/dijit/dialog/Plugin3DConfigurableAppsViewer";var T=[new C({messageLeft:Y.browseItemsDlg.instructionsLeft,messageRight:Y.browseItemsDlg.instructionsRight,item:this.item,"class":"esriBrowseItemsDlg",instantAppsBlocked:da}),new B({message:Y.itemProperties.createAppTitle,typeInfo:"configapp",showFolders:!0,
showFile:!1,showUrl:!1,item:this.item})],O=b.hitch(this,function(ea){q.publish("/esri/disable",ea,Y.addItemFrm.addingItem);u(".dojoxWizardButtons .dijitButton").map(y.byNode).forEach(function(U){U.set("disabled",ea)})}),Z=b.hitch(this,function(ea){return ea._validate()}),na=q.subscribe("/esri/browseitems/close",b.hitch(this,function(ea,U){if("create-app"===ea)X.nextButton.onClick();else"on-view-item"===ea?window.open("item.html?id\x3d"+U.id):"download-app"===ea?R.downloadWebMappingApp(U):"preview-app"===
ea&&M.default(ra,U)})),ia=b.hitch(this,function(ea){ea._validate().then(b.hitch(this,function(U){O(!0);U=T[0].get("selection");var ka=R.getHomeAppContext(),ma=T[1].get("item");R.isPortal()&&U.url&&0===U.url.indexOf("/")&&U.url&&-1===U.url.indexOf(ka)&&(U.url=ka+U.url);Q=ma;this.item&&!this.item.isHostedTemplate&&(Q=b.mixin(Q,{shareWithWebMap:!0},ta?{webSceneId:this.item.id}:{webMapId:this.item.id}));E.createTemplatedApplication(ma,U,fa,this.item).then(b.hitch(this,function(sa){this.telemetry&&this.telemetry.logEvent({label:"create apps",
category:"new item",pageName:"my content",details:this.label});ca.hide().then(b.hitch(this,function(){setTimeout(function(){window.location=sa.configureUrl},400)}))}),b.hitch(this,function(sa){O(!1);this._showError(sa)}))}),b.hitch(this,function(U){O(!1);this._showError(U)}))});da=b.hitch(this,function(ea){ca.hide().then(b.hitch(this,function(){aa.resolve(!1)}))});var X=new G({nextButtonLabel:Y.publishWizard.nextButtonLabel,previousButtonLabel:Y.publishWizard.previousButtonLabel,doneButtonLabel:Y.publishWizard.doneButtonLabel,
cancelButtonLabel:Y.publishWizard.cancelButtonLabel,"class":"esriCreateApp",hideDisabled:!0,doneFunction:ia,cancelFunction:da}),ha=T[1];T[0].addPlugin(la);var V=g(ca,"hide",b.hitch(this,function(ea){V.remove();e.forEach(T,function(U){U.destroyRecursive();U=null});na.remove();X.destroyRecursive();ca.destroyRecursive();(ea=document.getElementById("create-dropdown"))&&ea.focus()}));e.forEach(T,function(ea,U){(new F({content:ea.domNode,passFunction:b.partial(Z,ea),doneFunction:U===T.length-1?b.partial(ia,
ea):null})).placeAt(X)});v.after(X,"_checkButtons",function(){X.selectedChildWidget.isFirstChild?X.nextButton.domNode.style.display="none":X.selectedChildWidget.isLastChild&&ha.set("focus","title")});u(".dojoxWizardButtons",X.domNode).addClass("esriFloatTrailing");n.add(X.nextButton.domNode,["calcite","primary"]);n.add(X.cancelButton.domNode,["calcite","cancel"]);n.add(X.previousButton.domNode,["calcite","default btn-back icon-ui-left"]);n.add(X.doneButton.domNode,["calcite","primary"]);this.item&&
(ha.set("summary",this.item.isHostedTemplate?"":this.item.snippet),ha.set("title",this.item.isHostedTemplate?"":this.item.title),ha.set("tags",this.item.isHostedTemplate?"":this.item.tags),K.self.hasCategorySchema&&ha.set("categories",this.item.categories||[]));X.startup();k.create("span",{"class":"spinner hide",innerHTML:Y.common.pleaseWait},u(".dojoxWizardButtons",X.domNode)[0],"first");ca.setContent(X.domNode);ca.show().then(function(){ca.closeButtonNode&&(ca.closeButtonNode.tabIndex=0)}.bind(this));
document.documentElement.scrollTop=document.body.scrollTop=(document.documentElement.scrollTop||document.body.scrollTop)+1}));return aa},showCreateDefaultItem:function(ja){var aa=new z({title:ja.title||Y.common.create,buttonOk:Y.common.ok,buttonCancel:Y.common.cancel,style:{width:"550px",height:"auto"}}),da=ja.typeInfo,ra=new B({typeInfo:da,item:ja.item,message:ja.message,showFolders:!0,showFile:!1,showUrl:ja.showUrl}),ca=null;"dashboard_map"===da&&ja&&ja.item&&(ra.set("title",ja.item.title),K.self.hasCategorySchema&&
ra.set("categories",ja.item.categories||[]));aa.setContent(ra.domNode);aa.show();g(aa,"hide",function(){var ta=document.getElementById("create-dropdown");ta&&ta.focus()});var fa=g(aa.okButton,"click",b.hitch(this,function(){ja.isWAB?ra._validate().then(b.hitch(this,function(ta){ca=ra.get("item");this.telemetry&&this.label&&this.telemetry.logEvent({label:"create apps",category:"new item",pageName:"my content",details:this.label,attribute:ra.wab2DRadio.checked?"2d":"3d"});aa.hide().then(b.hitch(this,
function(){setTimeout(function(){this.redirectToAppBuilder(ca)}.bind(this),400)}))}),b.hitch(this,function(ta){this._showError(ta)})):ra.addItem().then(b.hitch(this,function(ta){aa.hide().then(b.hitch(this,function(){la.remove();fa.remove();"webmap"===da?N(ta.id):"webscene"===da||"webscene_portal"===da?window.location="./webscene/viewer.html?webscene\x3d"+ta.id:"urbanmodel"===da?window.location=(K.urbanUrl||"https://urban.arcgis.com")+"?id\x3d"+ta.id:"dashboard"===da||"dashboard_map"===da?(this.telemetry&&
this.telemetry.logEvent({label:"create apps",category:"new item",pageName:"my content",details:"dashboard"}),setTimeout(function(){this.redirectToAppBuilder(ta)}.bind(this),400)):window.location="ipynb"===da||"notebook"===da?"notebook/notebook.html?id\x3d"+ta.id:"item.html?id\x3d"+(ta.serviceItemId||ta.id)+(ta.jobId?"\x26jobid\x3d"+ta.jobId:"")}))}),b.hitch(this,function(ta){this._showError(ta)}))}));var la=g.once(aa.cancelButton,"click",b.hitch(this,function(){la.remove();fa.remove()}))},redirectToAppBuilder:function(ja){ja.folderId&&
"/"!==ja.folderId&&(ja.folder=ja.folderId);var aa={title:ja.title,tags:ja.tags,summary:ja.snippet,folder:ja.folder,appType:ja.wabType},da="Dashboard"===ja.type?"../apps/dashboards/"+ja.id+"#mode\x3dedit":"../apps/webappbuilder/index.html?";K.self.hasCategorySchema&&ja.categories&&ja.categories.length&&b.mixin(aa,{categories:m.stringify(ja.categories)});ja.wabType&&(aa=b.mixin(aa,{appType:ja.wabType,webmap:ja.webmap}),da+=D.objectToQuery(aa));window.location=da},_showError:function(ja){ja=b.mixin(b.mixin({},
Y.publishWizard.errors.error),ja);this._errorDlg=new z({showCancel:!1,style:{width:"400px",height:"auto"}});this._errorDlg.show(ja).then(b.hitch(this,function(){this._errorDlg.hide()}));return!1}})})},"dojox/widget/Wizard":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/connect dijit/layout/StackContainer dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/i18n dojo/text!./Wizard/Wizard.html dojo/i18n!dijit/nls/common dojo/i18n!./nls/Wizard dijit/form/Button".split(" "),function(S,
J,f,c,h,d,b,a){return J("dojox.widget.Wizard",[c,h,d],{templateString:a,nextButtonLabel:"",previousButtonLabel:"",cancelButtonLabel:"",doneButtonLabel:"",cancelFunction:null,hideDisabled:!1,postMixInProperties:function(){this.inherited(arguments);var e=S.mixin({cancel:b.getLocalization("dijit","common",this.lang).buttonCancel},b.getLocalization("dojox.widget","Wizard",this.lang)),q;for(q in e)this[q+"ButtonLabel"]||(this[q+"ButtonLabel"]=e[q])},startup:function(){this._started||(this.inherited(arguments),
this.connect(this.nextButton,"onClick","_forward"),this.connect(this.previousButton,"onClick","back"),this.cancelFunction?(S.isString(this.cancelFunction)&&(this.cancelFunction=S.getObject(this.cancelFunction)),this.connect(this.cancelButton,"onClick",this.cancelFunction)):this.cancelButton.domNode.style.display="none",this.connect(this.doneButton,"onClick","done"),this._subscription=f.subscribe(this.id+"-selectChild",S.hitch(this,"_checkButtons")),this._started=!0)},resize:function(){this.inherited(arguments);
this._checkButtons()},_checkButtons:function(){var e=this.selectedChildWidget,q=e.isLastChild||this.nextButton.get("disabled");this.nextButton.set("disabled",q);this._setButtonClass(this.nextButton);e.doneFunction?(this.doneButton.domNode.style.display="",q&&(this.nextButton.domNode.style.display="none")):this.doneButton.domNode.style.display="none";this.previousButton.set("disabled",!this.selectedChildWidget.canGoBack);this._setButtonClass(this.previousButton)},_setButtonClass:function(e){e.domNode.style.display=
this.hideDisabled&&e.disabled?"none":""},_forward:function(){this.selectedChildWidget._checkPass()&&this.forward()},done:function(){this.selectedChildWidget.done()},destroy:function(){f.unsubscribe(this._subscription);this.inherited(arguments)}})})},"dijit/layout/StackContainer":function(){define("dojo/_base/array dojo/cookie dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/ready dojo/topic dojo/when ../registry ../_WidgetBase ./_LayoutWidget".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m){d("dijit-legacy-requires")&&e(0,function(){require(["dijit/layout/StackController"])});f=f("dijit.layout.StackContainer",m,{doLayout:!0,persist:!1,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);c.add(this.domNode,"dijitLayoutContainer")},postCreate:function(){this.inherited(arguments);this.own(a(this.domNode,"keydown",b.hitch(this,"_onKeyDown")))},startup:function(){if(!this._started){var v=this.getChildren();S.forEach(v,this._setupChild,
this);this.persist?this.selectedChildWidget=u.byId(J(this.id+"_selectedChild")):S.some(v,function(l){l.selected&&(this.selectedChildWidget=l);return l.selected},this);var p=this.selectedChildWidget;!p&&v[0]&&(p=this.selectedChildWidget=v[0],p.selected=!0);q.publish(this.id+"-startup",{children:v,selected:p,textDir:this.textDir});this.inherited(arguments)}},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=!0;var v=this.selectedChildWidget;v&&this._showChild(v)}this.inherited(arguments)},
_setupChild:function(v){var p=v.domNode,l=h.place("\x3cdiv role\x3d'tabpanel' class\x3d'"+this.baseClass+"ChildWrapper dijitHidden'\x3e",v.domNode,"replace"),n=v["aria-label"]||v.title||v.label;n&&l.setAttribute("aria-label",n);h.place(p,l);v._wrapper=l;this.inherited(arguments);"none"==p.style.display&&(p.style.display="block");v.domNode.removeAttribute("title")},addChild:function(v,p){this.inherited(arguments);this._started&&(q.publish(this.id+"-addChild",v,p),this.layout(),this.selectedChildWidget||
this.selectChild(v))},removeChild:function(v){var p=S.indexOf(this.getChildren(),v);this.inherited(arguments);h.destroy(v._wrapper);delete v._wrapper;this._started&&q.publish(this.id+"-removeChild",v);if(!this._descendantsBeingDestroyed){if(this.selectedChildWidget===v&&(this.selectedChildWidget=void 0,this._started)){var l=this.getChildren();l.length&&this.selectChild(l[Math.max(p-1,0)])}this._started&&this.layout()}},selectChild:function(v,p){v=u.byId(v);if(this.selectedChildWidget!=v){var l=this._transition(v,
this.selectedChildWidget,p);this._set("selectedChildWidget",v);q.publish(this.id+"-selectChild",v,this._focused);this.persist&&J(this.id+"_selectedChild",this.selectedChildWidget.id)}return t(l||!0)},_transition:function(v,p){p&&this._hideChild(p);p=this._showChild(v);v.resize&&(this.doLayout?v.resize(this._containerContentBox||this._contentBox):v.resize());return p},_adjacent:function(v){var p=this.getChildren(),l=S.indexOf(p,this.selectedChildWidget);l+=v?1:p.length-1;return p[l%p.length]},forward:function(){return this.selectChild(this._adjacent(!0),
!0)},back:function(){return this.selectChild(this._adjacent(!1),!0)},_onKeyDown:function(v){q.publish(this.id+"-containerKeyDown",{e:v,page:this})},layout:function(){var v=this.selectedChildWidget;v&&v.resize&&(this.doLayout?v.resize(this._containerContentBox||this._contentBox):v.resize())},_showChild:function(v){var p=this.getChildren();v.isFirstChild=v==p[0];v.isLastChild=v==p[p.length-1];v._set("selected",!0);v._wrapper&&c.replace(v._wrapper,"dijitVisible","dijitHidden");return v._onShow&&v._onShow()||
!0},_hideChild:function(v){v._set("selected",!1);v._wrapper&&c.replace(v._wrapper,"dijitHidden","dijitVisible");v.onHide&&v.onHide()},closeChild:function(v){if(!v.onClose||v.onClose(this,v))this.removeChild(v),v.destroyRecursive()},destroyDescendants:function(v){this._descendantsBeingDestroyed=!0;this.selectedChildWidget=void 0;S.forEach(this.getChildren(),function(p){v||this.removeChild(p);p.destroyRecursive(v)},this);this._descendantsBeingDestroyed=!1}});f.ChildWidgetProperties={selected:!1,disabled:!1,
closable:!1,iconClass:"dijitNoIcon",showTitle:!0};b.extend(g,f.ChildWidgetProperties);return f})},"dojox/widget/WizardPane":function(){define(["dojo/_base/lang","dojo/_base/declare","dijit/layout/ContentPane"],function(S,J,f){return J("dojox.widget.WizardPane",f,{canGoBack:!0,passFunction:null,doneFunction:null,startup:function(){this.inherited(arguments);this.isFirstChild&&(this.canGoBack=!1);S.isString(this.passFunction)&&(this.passFunction=S.getObject(this.passFunction));S.isString(this.doneFunction)&&
this.doneFunction&&(this.doneFunction=S.getObject(this.doneFunction))},_onShow:function(){this.isFirstChild&&(this.canGoBack=!1);this.inherited(arguments)},_checkPass:function(){var c=!0;if(this.passFunction&&S.isFunction(this.passFunction)){var h=this.passFunction();switch(typeof h){case "boolean":c=h;break;case "string":alert(h),c=!1}}return c},done:function(){this.doneFunction&&S.isFunction(this.doneFunction)&&this.doneFunction()}})})},"arcgisonline/sharing/dijit/dialog/ItemPropertiesDlg":function(){define("esri/lang dojo/_base/declare dojo/on dojo/dom-attr dojo/query dojo/dom dojo/dom-style dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/dom-construct dojo/string dojo/_base/window dojo/promise/all dojo/when dojo/Deferred dojo/_base/array dojo/cookie dojo/dom-class dojo/json dojox/form/Uploader dijit/registry dijit/form/TextBox dijit/form/RadioButton dijit/ConfirmDialog dijit/focus dgrid/OnDemandGrid dgrid/editor dojo/store/Observable dojo/store/Memory esri/dijit/Tags arcgisonline/sharing/dijit/dialog/_AddItemDlgMixin arcgisonline/sharing/dijit/dialog/_CreateItemUtilMixin dijit/form/SimpleTextarea dijit/form/Textarea dijit/form/Select dojo/topic esri/Evented esri/arcgis/Portal arcgisonline/pages/portal/PortalItem arcgisonline/esriGeowConfig arcgisonline/pages/pageUtil arcgisonline/pages/utils/categories arcgisonline/pages/utils/dom arcgisonline/pages/dijit/CategoryPicker arcgisonline/sharing/geow/Account arcgisonline/sharing/util arcgisonline/sharing/geow/Folder esri/geometry/Extent esri/SpatialReference ../../../map/core/sameSpatialReference ../../../map/core/projectExtent dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E,K,I,L,M,N,P,R,Y,ja,aa,da,ra,ca,fa,la,ta,Q,T,O,Z,na,ia){return J("arcgisonline.sharing.dijit.dialog.ItemPropertiesDlg",[e,q,t,K,R],{baseClass:"esriItemPropertiesDlg",templateString:'\x3cdiv data-dojo-attach-point\x3d"contentNode"\x3e\x3cdiv class\x3d"wabdiv"\x3e\x3clabel class\x3d"wab wablbl hide"\x3e\x3cinput class\x3d"wab hide" data-dojo-attach-point\x3d"wab2DRadio" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-props\x3d\'checked:true,name:"wabtype"\' value\x3d"2d" /\x3e${i18n.addItemFrm.2d}\x3c/label\x3e\x3clabel class\x3d"wab wablbl hide"\x3e\x3cinput class\x3d"wab hide" data-dojo-attach-point\x3d"wab3DRadio" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-props\x3d\'name:"wabtype"\' value\x3d"3d" /\x3e${i18n.addItemFrm.3d}\x3c/label\x3e\x3c/div\x3e\x3cp data-dojo-attach-point\x3d"_message" class\x3d"trailer-half"\x3e\x3c/p\x3e\x3cform id\x3d"_createForm" data-dojo-attach-point\x3d"_form" enctype\x3d"multipart/form-data" action\x3d"" method\x3d"POST"\x3e\x3clabel for\x3d"uploader" class\x3d"file"\x3e${i18n.addLayerFromFileDlg.fileLabel}\x3c/label\x3e\x3cdiv data-dojo-attach-point\x3d"_files" class\x3d"file" data-dojo-type\x3d"dojox/form/Uploader" data-dojo-props\x3d\'label:"Browse", name:"file", showInput:"before"\'\x3e\x3c/div\x3e\x3cbr class\x3d"file" /\x3e\x3cdiv data-dojo-attach-point\x3d"_zip" class\x3d"zip esriLeadingMargin80 hide"\x3e\x3clabel for\x3d"archiveSelect"\x3e${i18n.addItemFrm.itemContents}\x3c/label\x3e\x3cselect data-dojo-attach-point\x3d"_zipContents" data-dojo-type\x3d"dijit/form/Select" style\x3d"width:25%;"\x3e\x3coption value\x3d"shapefile" selected\x3e${i18n.addItemFrm.typeShapefile}\x3c/option\x3e\x3coption value\x3d"filegeodatabase"\x3e${i18n.addItemFrm.itemFileGeodatabase}\x3c/option\x3e\x3c/select\x3e\x3c/div\x3e\x3clabel for\x3d"${id}-url" class\x3d"url hide trailer-0"\x3e${i18n.publishWizard.urlItemLbl}\x3c/label\x3e\x3cdiv id\x3d"${id}-url" class\x3d"required url trailer-half hide" data-dojo-attach-point\x3d"_url" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-props\x3d\'disabled:true, name:"url", trim:true, placeHolder:"${i18n.addLayerFromUrlDlg.enterUrl}"\'\x3e\x3c/div\x3e\x3cbr class\x3d"url hide" /\x3e\x3clabel for\x3d"${id}-title" class\x3d"trailer-0"\x3e${i18n.publishWizard.titleLbl}\x3c/label\x3e\x3cdiv id\x3d"${id}-title" tabindex\x3d"0" class\x3d"required title trailer-half" data-dojo-attach-point\x3d"_title" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-props\x3d\'name:"title", trim:true, placeHolder:"${i18n.publishWizard.titlePlaceHolder}"\'\x3e\x3c/div\x3e\x3cbr /\x3e\x3clabel for\x3d"${id}-tags" data-dojo-attach-point\x3d"_tagsDijitLbl" class\x3d"tagsLbl leader-0 trailer-0"\x3e${i18n.publishWizard.tagsLbl}\x3cspan class\x3d"screen-readers-only" id\x3d"tags-required"\x3e${i18n.publishWizard.tagsRequired}\x3c/span\x3e\x3c/label\x3e\x3cdiv class\x3d"position-relative hide js-tags-mask"\x3e\x3cdiv class\x3d"tags-disabled-mask"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"${id}-tags" class\x3d"trailer-half" data-dojo-attach-point\x3d"_tagsDijit" data-dojo-type\x3d"esri/dijit/Tags" data-dojo-props\x3d"name: \'tags\', width:\'100%\', minWidth:\'100%\', maxWidth:\'100%\'"\x3e\x3c/div\x3e\x3cbr /\x3e\x3clabel for\x3d"${id}-summary" class\x3d"trailer-0 leader-half"\x3e${i18n.publishWizard.summaryLbl}\x3c/label\x3e\x3ctextarea id\x3d"${id}-summary" tabindex\x3d"0" class\x3d"required snippet trailer-0" maxlength\x3d"250" data-dojo-attach-point\x3d"_summaryDijit" class\x3d"summaryTextBox dijitPlaceHolder" data-dojo-type\x3d"dijit/form/Textarea" data-dojo-props\x3d\'name:"snippet", trim:true, placeHolder:"${i18n.publishWizard.summaryPlaceHolder}", value: "${i18n.publishWizard.summaryPlaceHolder}"\'\x3e\x3c/textarea\x3e\x3cbr /\x3e\x3cdiv class\x3d"hide categories-container"\x3e\x3clabel class\x3d"trailer-0 leader-half" data-dojo-attach-point\x3d"_categoriesLbl" for\x3d"itemPropCategoryPicker"\x3e${i18n.addItemFrm.categories}${i18n.addItemFrm.colon}\x3c/label\x3e\n\x3cdiv class\x3d"categoriesPickerSection" data-dojo-attach-point\x3d"_categoriesContainer" id\x3d"itemPropCategoryPicker"\x3e\x3c/div\x3e\x3c/div\x3e\x3clabel for\x3d"${id}-folders" data-dojo-attach-point\x3d"_foldersDijitLbl" class\x3d"folderDropdown trailer-0 leader-half hide" style\x3d"clear:both;"\x3e\x3cspan class\x3d"saveFolderLbl"\x3e${i18n.publishWizard.saveFolderLbl}\x3c/span\x3e\x3cselect id\x3d"${id}-folders" tabindex\x3d"0"  class\x3d"folderDropdownSelect folderDropdown hide" data-dojo-attach-point\x3d"_folders" data-dojo-type\x3d"dijit/form/Select" style\x3d"width:77%;" data-dojo-props\x3d\'maxHeight:"200"\'\x3e\x3c/select\x3e\x3c/label\x3e\x3c/form\x3e\x3c/div\x3e',
onOk:function(){},onCancel:function(){},onLoad:function(){},postMixInProperties:function(){this.inherited(arguments);this._errorDlg=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance();this.i18n=a.mixin({},ia);this._maxFileSize=1E9;this._analyzeTypes={csv:1};this._type=this.typeInfo;var X=k("ESRI_Content");this._selectedFolderId=(X?w.parse(X):{}).folderId||null;this._portalUser=(this._portal=aa.portal)&&(this._portal.portalUser||this._portal.user||this._portal.getPortalUser())},
postCreate:function(){this.inherited(arguments);r.add(this._summaryDijit.domNode,"dijitPlaceHolder");var X=this._files.displayInput;r.add(X,"placeHolder");c.set(X,"value","Select File");this._tagsDijit&&this._tagsDijit._inputTextBox&&this._tagsDijit._inputTextBox.set&&this._tagsDijit._inputTextBox.set("aria-describedby","tags-required");this._tagsDijitLbl&&this._tagsDijit._inputTextBox&&c.set(this._tagsDijitLbl,"for",this._tagsDijit._inputTextBox.id);la.getSelf(a.hitch(this,function(ha){this._loadConnections();
this._portal?this._init():(this._portal=new Y.Portal({url:aa.restBaseUrl,self:ha}),this._connect=this._portal.on("load",a.hitch(this,function(V){this._connect.remove();this._portalUser=this._portal.getPortalUser();this._init()})))}))},_init:function(){return v([ta.loadUserTags(this._portalUser.username),this._getFolders()]).then(a.hitch(this,function(X){X&&X[0]&&this._tagsDijit.set("knownTags",X[0]);this.item&&this.item.type&&!this.item.declaredClass&&(this.item=new ja(a.mixin(this.item,{portal:this._portal})));
this._tagsDijit.set("value",this.item&&this.item.tags||"");this._summaryDijit.set("value",ia.publishWizard.summaryPlaceHolder);this._loadFolders(X[1]&&X[1].folders||[],this._folders);this._supportedType=!this.item||"Web Scene"!==this.item.type&&"Web Map"!==this.item.type?null:this.item.type;this.set("showWAB","wab"!==this._type||this._supportedType?!1:!0);this._supportedType&&this.wab2DRadio.set("checked","Web Map"===this._supportedType);this.onLoad()}))},destroy:function(){h(".dijit",this.contentNode).map(D.byNode).forEach(function(X){X.destroyRecursive?
X.destroyRecursive():X.destroy?X.destroy():X=null});this.inherited(arguments);this._grid&&(this._grid.destroy(),this._grid=null);this._tagsDijit&&(this._tagsDijit.destroyRecursive(),this._tagsDijit=null);this._analyzedFile?I.deleteItem(this._analyzedFile,this._portal).then(a.hitch(this,function(X){this._tagsDijit=this._portalUser=this._portal=this._analyzedFile=null})):this._tagsDijit=this._portalUser=this._portal=null;this._errorDlg&&(this._errorDlg._dialog&&this._errorDlg._dialog.destroyRecursive(),
this._errorDlg.destroyRecursive(),this._errorDlg=null)},startup:function(){this.inherited(arguments);this._initializeCategoryPicker(this.categories||[])},disableTagsAndCategories:function(){this._tagsDijit&&this.domNode.querySelector(".js-tags-mask").classList.remove("hide");this._categories&&this._categories.disable()},enableTagsAndCategories:function(){this._tagsDijit&&this.domNode.querySelector(".js-tags-mask").classList.add("hide");this._categories&&this._categories.enable()},_initializeCategoryPicker:function(X){if(aa.self.hasCategorySchema){var ha=
function(V){this._categories=new fa({categories:X||[],schema:V},u.create("div",null,this._categoriesContainer));this._categories.startup();ca.showNodes(h(".categories-container",this.domNode));this._initializingCategoryPicker=!1}.bind(this);this.item&&this.item.portal&&this.item.portal.getCategories&&this.item.portal.getCategories instanceof Function?(this._initializingCategoryPicker=!0,this.item.portal.getCategories().then(ha)):(this._initializingCategoryPicker=!0,ta.request({url:aa.restBaseUrl+
"portals/self/categorySchema"}).then(function(V){ha(V.categorySchema)}.bind(this)))}},_getWebMapAuthoringInfo:function(){return{authoringApp:"WebMapViewer",authoringAppVersion:ta.isPortal()?"10.6":"6.1",version:"2.11"}},addItem:function(){var X=new l,ha,V;this._validate().then(a.hitch(this,function(){P.publish("/esri/disable",!0,ia.addItemFrm.addingItem);if(this._analyzedFile)ha=this._updateItem().then(a.hitch(this,function(U){return U}));else if("webmap"===this._type)ha=this._fetchBaseMap().then(a.hitch(this,
function(U){return V=U})).then(a.hitch(this,"_projectPortalExtent")).then(a.hitch(this,function(U){var ka=this.get("item");ka.text=V?w.stringify(V):ka.text;ka.extent=U;return I.addItem(ka,this.get("folder"),this._portal)}));else if("dashboard_map"===this._type){var ea=this.get("item");ea.text=g.substitute(ea.text,{mapId:this.item.id});ha=I.addItem(ea,this.get("folder"),this._portal)}else ha=I.addItem(this.showFile?this.get("form"):this.get("item"),this.get("folder"),this._portal);ha.then(a.hitch(this,
function(U){P.publish("/esri/disable",!1);X.resolve(U)}),a.hitch(this,function(U){P.publish("/esri/disable",!1);U&&409===U.code&&(U=this.get("item"),U={title:ia.addItemFrm.errors.error.title,message:S.substitute({type:U.type,title:U.title},ia.addItemFrm.errors.itemExists.message)});X.reject(U)}))}),a.hitch(this,function(ea){P.publish("/esri/disable",!1);X.reject(ea)}));return X},_fetchBaseMap:function(){var X=this._portal&&this._portal.defaultBasemap||null,ha=this._getWebMapAuthoringInfo(),V,ea,U,
ka=function(){ea=n.map(X.baseMapLayers||[],a.hitch(this,function(sa,pa){V=a.clone(sa);V=a.mixin(V,{opacity:1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,id:"defaultBasemap_"+pa});U=0===pa?sa.spatialReference||sa.resourceInfo&&sa.resourceInfo.spatialReference:U;delete V.resourceInfo;return V}));return a.mixin({operationalLayers:[],spatialReference:U||this._portal&&this.portal.defaultExtent&&this.portal.defaultExtent.spatialReference,baseMap:a.mixin(X,{baseMapLayers:ea})},ha)};if(X&&X.id)var ma=
Y.PortalUtil.request(this._portal.portalUrl+"content/items/"+X.id+"/data").then(a.hitch(this,function(sa){return sa}),a.hitch(this,function(sa){return ka()}));else X?(ma=new l,ma.resolve(ka())):(ma=new l,ma.resolve());return ma},_projectPortalExtent:function(X){var ha=new l;X=this._portal&&this._portal.defaultExtent||null;var V=new T(X),ea=new O({wkid:102100});X&&V.spatialReference.wkid!==ea.wkid?na(V,ea,a.hitch(this,function(U){U[0]?ha.resolve(I.getPortalDefaultExtentAsGCS({defaultExtent:U[0]})):
ha.resolve(I.getPortalDefaultExtentAsGCS(this._portal))})):ha.resolve(I.getPortalDefaultExtentAsGCS(this._portal));return ha},_extent2String:function(X,ha){ha=ha||4;var V=+X.xmin.toFixed(ha),ea=+X.ymin.toFixed(ha),U=+X.xmax.toFixed(ha);X=+X.ymax.toFixed(ha);return isNaN(V)||isNaN(ea)||isNaN(U)||isNaN(X)?"":V+","+ea+","+U+","+X},_loadConnections:function(){this.own(P.subscribe("/esri/disable",a.hitch(this,function(X){this.set("readOnly",X)})),h(".dijitTextArea",this.contentNode).on("focus",a.hitch(this,
function(X){X=this._summaryDijit;X.get("value")===ia.publishWizard.summaryPlaceHolder&&(r.remove(X.domNode,"dijitPlaceHolder"),X.set("value",""))})),h(".dijitTextArea",this.contentNode).on("blur",a.hitch(this,function(X){X=this._summaryDijit;""===X.get("value")&&(r.add(X.domNode,"dijitPlaceHolder"),X.set("value",ia.publishWizard.summaryPlaceHolder))})),f(this._errorDlg,"hide",a.hitch(this,function(){this._focusNode&&setTimeout(a.hitch(this,function(){y.focus(this._focusNode)}),250)})),f(this._tagsDijitLbl,
"click",a.hitch(this,function(X){this._tagsDijit._inputTextBox.focus();h(".select2-choices",this._tagsDijit.domNode).addClass("focus")})),f(this._tagsDijit.domNode,"focusout",a.hitch(this,function(X){h(".select2-choices",this._tagsDijit.domNode).removeClass("focus")})),f(this._tagsDijit.domNode,"focusin",a.hitch(this,function(X){this._tagsDijit._inputTextBox.focus();h(".select2-choices",this._tagsDijit.domNode).addClass("focus")})),f(this._foldersDijitLbl,"click",a.hitch(this,function(X){this._folders.focus()})))},
_setTitleAttr:function(X){return this._title.set("value",X||"")},_getTitleAttr:function(){return this._title.get("value")},_setShowFileAttr:function(X){X||(h(".file",this.contentNode).style("display","none"),h(".dijitUploader input",this.contentNode).attr("disabled","disabled"),this._files.set("disabled",!0))},_setShowUrlAttr:function(X){X&&(h(".url",this.contentNode).removeClass("hide"),this._url.set("disabled",!1))},_setShowFoldersAttr:function(X){h(".folderDropdown",this.domNode)[X?"removeClass":
"addClass"]("hide")},_setFoldersAttr:function(X){this._userFolders=X;this._folders.set("options",n.map(X,"return {label:item.title, value:item.id};"));this._folders.set("value",this._selectedFolderId||"/")},_setShowWABAttr:function(X){h(".wab",this.domNode)[X?"removeClass":"addClass"]("hide")},_setMessageAttr:{node:"_message",type:"innerHTML"},_setTypeAttr:function(X){c.set(this._type,"value",X)},_setTypeInfoAttr:function(X){this._type=X},_setTagsAttr:function(X){this._tagsDijit.set("value",X||"")},
_setCategoriesAttr:function(X){if(aa.self.hasCategorySchema)if(!this._categories||this._initializingCategoryPicker)var ha=setInterval(function(){this._categories&&!this._initializingCategoryPicker&&(clearInterval(ha),this._categories.setCategories(X||[],!0))}.bind(this),50);else this._categories.setCategories(X||[],!0)},_setSummaryAttr:function(X){r[X?"remove":"add"](this._summaryDijit.domNode,"dijitPlaceHolder");this._summaryDijit.set("value",X||ia.publishWizard.summaryPlaceHolder);this._summaryDijit.resize()},
_setBatchGeocodersAttr:function(X){this._geocoders.set("options",X);this._geocoders.set("value",X[0].value,!1);this._batchGeocoders=X;this._selectedGeocoder=X[0]},_setFocusAttr:function(X){var ha=D.byId(this.id+"-"+X);if(ha)setTimeout(a.hitch(this,function(){ha.focus()}),250);else{var V=h(X,this.domNode);setTimeout(a.hitch(this,function(){y.focus(V&&V.length?V[0]:this._title.domNode)}),250)}},_setDisabledAttr:function(X){this._disable(X)},_setReadOnlyAttr:function(X){h(".dijit",this.domNode).map(D.byNode).forEach(function(ha){ha.set("readOnly",
X)});h(".dijitButtonContents",this._files.domNode).forEach(function(ha){c.set(ha,"readonly",X);r[X?"add":"remove"](ha,"dijitDisabled dijitTextBoxDisabled")});r[X?"add":"remove"](this._tagsDijit.domNode,"dijitDisabled dijitTextBoxDisabled");h("input",this._tagsDijit.domNode).forEach(function(ha){c.set(ha,"readonly",X)});h("a",this.contentNode)[X?"addClass":"removeClass"]("disabledLink");h(".dijitSelect .dijitButtonText",this.contentNode)[X?"addClass":"removeClass"]("dijitTextBoxDisabled");this._folders.set("disabled",
X);this._summaryDijit.set("disabled",X);h(".dijitUploader input",this.contentNode).attr("readonly","readonly")},_getFormAttr:function(){var X=this._checkThumbnailURL(a.mixin({},this.itemInfo[this._type])),ha=u.create("div",null,this._form);X=a.mixin(X,{tags:this._tagsDijit.get("tags"),snippet:this._summaryDijit.get("value")!==ia.publishWizard.summaryPlaceHolder?this._summaryDijit.get("value"):""});X=this._adjustItemInfo(X);for(var V in X)u.place(u.create("input",{name:V,type:"text",value:X[V],"class":"hide"}),
ha);return d.byId("_createForm")},_getItemAttr:function(){var X=this._checkThumbnailURL(a.mixin({},this.itemInfo[this._type]));X=a.mixin(X,{title:this._title.get("value"),tags:this._tagsDijit.get("tags"),snippet:this._summaryDijit.get("value")!==ia.publishWizard.summaryPlaceHolder?this._summaryDijit.get("value"):"",folderId:this.get("folder"),wabType:"wab"===this._type?this.get("WABType"):null});X=this._adjustItemInfo(X);aa.self.hasCategorySchema&&this._categories&&(X.categories=this._categories.getCategories(!0));
this._supportedType&&(X=a.mixin(X,{webmap:this.item.id}));return X},_adjustItemInfo:function(X){var ha=this._type,V=X.text,ea=this._portal&&this._portal.helperServices||[];ea=ea.defaultElevationLayers?a.clone(ea.defaultElevationLayers):[];if(V&&("webscene"===ha||"webscene_portal"===ha)&&ea&&ea.length){var U=JSON.parse(V);ea=ea.map(function(ka){ka=a.mixin(ka,{title:ka.title||ka.name||"Elevation",id:ka.id||ka.name||(new Date).getTime()+""});ka.name&&delete ka.name;return ka});U.baseMap.elevationLayers=
ea;U.ground.layers=ea;X.text=JSON.stringify(U)}if("dashboard"===ha||"dashboard_map"===ha)X.typeKeywords="ArcGIS Dashboards",U=JSON.parse(V||"{}"),U.version=45,X.text=JSON.stringify(U),delete X.thumbnailURL,X.thumbnailUrl="dashboard"===ha?"https://static.arcgis.com/images/dashboards.png":X.thumbnailUrl;return X},_getWABTypeAttr:function(){return this.wab2DRadio.get("checked")?"HTML":"HTML3D"},_getFolderAttr:function(){var X=this._folders.get("value");X=this._portalUser?"/"===X||X===this._portalUser.username?
null:X:"/"===X?null:X;return this.showFolders?X:this._selectedFolderId},_getFolders:function(){var X=new l;this._portalUser.getFolders?this._portalUser.getFolders().then(a.hitch(this,function(ha){X.resolve({folders:ha})}),a.hitch(this,function(ha){X.reject(ha)})):Q.getFolders(a.hitch(this,function(ha){X.resolve(ha)}),a.hitch(this,function(ha){X.reject(ha)}),!1);return X},_getFileInfo:function(X){var ha=new l,V=/(?:\.([^.]+))?$/;X=X&&X.length&&X[0]||{};var ea=X.name.replace(/^.*(\\|\/|:)/,"");V=ea?
V.exec(ea)[1].toLowerCase():"";var U=ea?ea.substring(0,ea.lastIndexOf(".")):"";this._isValidFileType(V)||ha.reject(ia.addItemFrm.errors.unknownType);window&&window.FileReader&&X.size>this._maxFileSize&&ha.reject(ia.addItemFrm.errors.fileToLarge);ha.resolve(a.mixin(X,{title:U,fileType:V,origName:ea}));return ha},_deleteAnalyzedFile:function(){if(this._analyzedFile)var X=I.deleteItem(this._analyzedFile,this._portal).then(a.hitch(this,function(){this._analyzeResult=this._analyzedFile=null}));else X=
new l,X.resolve(!0);return X},_toOptions:function(X,ha){var V=[];ha&&(X=a.mixin({},ia.addItemFrm.notUsed,X));for(var ea in X)V.push({label:X[ea],value:ea});return V},_addFile:function(){var X=this.get("form");if(X)return X=I.addItem(X,this.get("folder"),this._portal),X.then(a.hitch(this,function(ha){P.publish("/esri/disable",!1);return ha}),a.hitch(this,function(ha){P.publish("/esri/disable",!1);this._showError(ha)}))},_updateItem:function(){var X=this._analyzedFile,ha=this.get("item"),V=!1,ea;for(ea in ha)X[ea]&&
X[ea]===ha[ea]?delete ha[ea]:V=!0;V?ha=I.updateItem(a.mixin(ha,{id:X.id,folderId:X.folderId}),this._portal).then(a.hitch(this,function(U){return a.mixin(X,U)})):(ha=new l,ha.resolve(X));return ha},_getPublishParameters:function(X){var ha=this._geocoder||"none";X=this._getDefaultPublishParameters(X);var V=this._analyzeResult&&this._analyzeResult.publishParameters,ea=V&&V.standardizedFieldNames,U=this._grid&&this._grid.store;if(V)if("addressTypes"===ha){var ka=0,ma={},sa=ea;U.query(function(Aa){"unknown"!==
Aa.locationType&&Aa.locationType in sa&&(ma[Aa.locationType]=Aa.name,ka++)});if(1>ka)return{error:this.i18n.errors.noAddressFields};X.publishParameters.locationType="address";X.publishParameters.addressFields=ma}else if("locationTypes"===ha){var pa={locationType:"coordinates",latitudeFieldName:null,longitudeFieldName:null};sa=a.mixin({},this.i18n.addItemFrm[ha]);U.query(function(Aa){"unknown"!==Aa.locationType&&Aa.locationType in sa&&(pa[Aa.locationType+"FieldName"]=Aa.name)});if(!pa.latitudeFieldName||
!pa.longitudeFieldName)return{error:this.i18n.errors.noLocationFields};a.mixin(X,pa)}else X.publishParameters.locationType="none";return X},_getDefaultPublishParameters:function(X){var ha=X.type.toLowerCase(),V={itemId:X.id,filetype:ha},ea=this._analyzeResult&&this._analyzeResult.publishParameters;"tile package"===ha&&(V.filetype="tilePackage",V.buildInitialCache=!0);V.publishParameters=a.mixin(ea||{},{name:X.title.replace(/ /g,"_"),maxRecordCount:2E3});ea&&(V.hasStaticData=!0,V.publishParameters.layerInfo=
a.mixin(ea.layerInfo||{},{capabilities:"Query"}),V.publishParameters.persistErrorRecordsForReview=!0);return V},_analyze:function(){var X={};P.publish("/esri/disable",!0,"Uploading file...");return this._addFile().then(a.hitch(this,function(ha){P.publish("/esri/disable",!0,"Analyzing file...");this._analyzedFile=ha;this._portal._isPortal||!this._selectedGeocoder.isWorldGeocodeServer?X.geocodeServiceUrl=encodeURI(this._selectedGeocoder):this._selectedGeocoder.isWorldGeocodeServer&&(X.sourceCountry=
this._analyzeResult?this._countries.get("value").toLowerCase():"",X.sourceCountryHint=this._analyzeResult?"":this._sourceCountry);return I.analyzeItem(ha,X,this._portal).then(a.hitch(this,function(V){this._analyzeResult=this._analyzedFile.analyzeResult=V;this._createGrid(V);r.remove(this.geocoding,"hide");P.publish("/esri/disable",!1);return this._analyzedFile}))}))},_validate:function(){var X=new l;var ha=this._checkRequired(this.get("item"));ha=ha.then(a.hitch(this,"_itemExists",this.get("item")));
ha=ha.then(a.hitch(this,function(V){X.resolve(V)}),a.hitch(this,function(V){this._focusNode&&y.focus(this._focusNode);X.reject(V)}));return X},_isValidFileType:function(X){var ha=!0;this.showFile&&this.validTypes?(this.validTypes=this.validTypes instanceof Array?this.validTypes:[this.validTypes],-1===n.indexOf(this.validTypes,X)&&(ha=!1)):this.itemInfo[type.toLowerCase()]||(ha=!1);return ha},_checkThumbnailURL:function(X){this.item&&this.item.thumbnail&&this.item.thumbnailUrl?X.thumbnailUrl=this.item.thumbnailUrl:
(X.thumbnailURL&&(X.thumbnailURL=ta.getStaticImagesUrl()+X.thumbnailURL),this._portal.isPortal&&X.thumbnailURL&&0!==X.thumbnailURL.indexOf("http")&&(X.thumbnailURL=window.location.protocol+"//"+window.location.host+X.thumbnailURL));return X},_isEmpty:function(X){return(this.trim?/^\s*$/:/^$/).test(X)},_disable:function(X){this._folders.set("disabled",X);this._summaryDijit.set("disabled",X);!this.showFiles&&X&&h(".dijitUploader input",this.contentNode).attr("disabled","disabled")},_loadFolders:function(X,
ha){var V=k("ESRI_Content");V=V?w.parse(V):{};var ea=V.folderId||null;this._selectedFolderId=V.folderId||null;(!X||!X.length||X&&X.length&&X[0].title!==this._portalUser.username)&&X.unshift({title:this._portalUser.username,id:"/"});ha.options=n.map(X,"return {label:item.title, value:item.id};");ha.set("value",ea||this._portalUser.username)},_loadCountries:function(X,ha){var V=this._portal.getPortalUser(),ea=[];V=(this._portal.region||V.region||portal.ipCntryCode||"world").toLowerCase();V="wo"===V?
"world":V;for(var U in X)ea.push({label:X[U],value:U.toLowerCase()});ea=ea.sort(function(ka,ma){return ka.label<ma.label?-1:ka.label>ma.label?1:0});ha.set("options",ea);ha.set("value",V,!1);this._sourceCountry=V},_checkRequired:function(){var X=new l,ha,V;h(".required",this.contentNode).map(D.byNode).every(a.hitch(this,function(ea){return!r.contains(ea.domNode,"hide")&&this._isEmpty(ea.get("value"))?(V=ea.domNode||ea,this._focusNode=h("input",V)[0],ha=a.mixin({},ia.publishWizard.errors.error,ia.publishWizard.errors.required[ea.get("name")]),
!1):!0}));ha?X.reject(ha):X.resolve(!0);return X},_itemExists:function(X){var ha=new l,V=this._type in{mapserver:1,featureserver:1,sceneserver:1,wfs:1,ogcFeatures:1,vectortileserver:1,imageserver:1},ea="wfs"===this._type||"ogcFeatures"===this._type,U=ea?/[.@#%&*+=\-\\';,\/|\\":<>()\?]/g.test(X.title):V?/[.@#%&*+=\-\\';,\/|\\":<>\?]/g.test(X.title):/[<>]/g.test(X.title),ka=X.title.match(/^\d/)?!0:!1,ma=this.itemInfo[X.type.toLowerCase()]?this.itemInfo[X.type.toLowerCase()].type:X.type;this._itemExistsCheck(X).then(function(sa){U||
V&&120<X.title.length?(this._focusNode=h("input",this._title.domNode)[0],ha.reject(V?ia.addItemFrm.errors.invalidServiceTitle:ia.addItemFrm.errors.invalidItemTitle)):ea&&ka?ha.reject(ia.addItemFrm.errors.invalidCharactersStartsWithNumber):sa?(this._focusNode=h("input",this._title.domNode)[0],sa=S.substitute({type:ma,title:X.title},ia.addItemFrm.errors.itemExists.message),ha.reject({title:ia.addItemFrm.errors.error.title,message:sa})):ha.resolve(!1)}.bind(this));return ha},_itemExistsCheck:function(X){var ha=
X.title,V=this.get("folder"),ea=this.itemInfo[X.type.toLowerCase()]?this.itemInfo[X.type.toLowerCase()].type:X.type,U=this._portalUser.username,ka=new dojo.Deferred;ta.request({url:aa.restBaseUrl+"search",content:{q:'title:"'+ha+'" AND type:"'+ea+'" AND owner:"'+U+'" AND ownerfolder:"'+(V&&"/"!==V?V:"root")+'"',num:1}}).then(dojo.hitch(this,function(ma){ma&&ma.total?ka.resolve(this._isSameTitle(X,ma.results.shift())):ka.resolve(!1)}));return ka},_isSameTitle:function(X,ha){return(X&&X.title)===(ha&&
ha.title)},_showError:function(X){X.messageCode&&"GWM_0011"===X.messageCode&&(X=a.mixin(X,{message:ia.common.errors.spamContentItemCreate}));X=a.mixin(a.mixin({},ia.publishWizard.errors.error),X);this._errorDlg.show(X);this._disable(!1);return!1}})})},"dojox/form/Uploader":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/window dojo/dom-style dojo/dom-class dojo/dom-geometry dojo/dom-attr dojo/dom-construct dojo/dom-form dijit dijit/form/Button ./uploader/_Base ./uploader/_HTML5 ./uploader/_IFrame ./uploader/_Flash dojo/i18n!./nls/Uploader dojo/text!./resources/Uploader.html".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r){return J("dojox.form.Uploader",[v,m,p,l,n],{uploadOnSelect:!1,tabIndex:0,multiple:!1,label:k.label,url:"",name:"uploadedfile",flashFieldName:"",force:"",uploadType:"",showInput:"",focusedClass:"dijitButtonHover",_nameIndex:0,templateString:r,baseClass:"dijitUploader "+m.prototype.baseClass,postMixInProperties:function(){this._inputs=[];this._cons=[];this.force=this.force.toLowerCase();this.supports("multiple")?this.uploadType="form"===this.force?"form":
"html5":this.uploadType="flash"===this.force?"flash":"iframe";this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);b.set(this.domNode,{overflow:"hidden",position:"relative"});this._buildDisplay();q.set(this.titleNode,"tabIndex",-1)},_buildDisplay:function(){this.showInput&&(this.displayInput=t.create("input",{"class":"dijitUploadDisplayInput",tabIndex:-1,autocomplete:"off",role:"presentation"},this.containerNode,this.showInput),this._attachPoints.push("displayInput"),this.connect(this,
"onChange",function(w){for(var x=0,D,G=[];D=w[x++];)D&&D.name&&G.push(D.name);this.displayInput.value=G.join(", ")}),this.connect(this,"reset",function(){this.displayInput.value=""}))},startup:function(){this._buildInitialized||(this._buildInitialized=!0,this._getButtonStyle(this.domNode),this._setButtonStyle(),this.inherited(arguments))},onChange:function(w){},onBegin:function(w){},onProgress:function(w){},onComplete:function(w){this.reset()},onCancel:function(){},onAbort:function(){},onError:function(w){},
upload:function(w){w=w||{};w.uploadType=this.uploadType;this.inherited(arguments)},submit:function(w){w=w?w.tagName?w:this.getForm():this.getForm();w=u.toObject(w);w.uploadType=this.uploadType;this.upload(w)},reset:function(){delete this._files;this._disconnectButton();c.forEach(this._inputs,t.destroy);this._inputs=[];this._nameIndex=0;this._createInput()},getFileList:function(){var w=[];this.supports("multiple")?c.forEach(this._files,function(x,D){w.push({index:D,name:x.name,size:x.size,type:x.type})},
this):c.forEach(this._inputs,function(x,D){x.value&&w.push({index:D,name:x.value.substring(x.value.lastIndexOf("\\")+1),size:0,type:x.value.substring(x.value.lastIndexOf(".")+1)})},this);return w},_getValueAttr:function(){return this.getFileList()},_setValueAttr:function(w){},_setDisabledAttr:function(w){this.disabled!=w&&this.inputNode&&(this.inherited(arguments),b.set(this.inputNode,"display",w?"none":""))},_getButtonStyle:function(w){this.btnSize={w:b.get(w,"width"),h:b.get(w,"height")}},_setButtonStyle:function(){this.inputNodeFontSize=
Math.max(2,Math.max(Math.ceil(this.btnSize.w/60),Math.ceil(this.btnSize.h/15)));this._createInput()},_getFileFieldName:function(){return this.supports("multiple")&&this.multiple?this.name+"s[]":this.name+(this.multiple?this._nameIndex:"")},_createInput:function(){this._inputs.length&&(b.set(this.inputNode,{top:"500px"}),this._disconnectButton(),this._nameIndex++);var w=this._getFileFieldName();this.focusNode=this.inputNode=t.create("input",{type:"file",name:w,"aria-labelledby":this.id+"_label"},this.domNode,
"first");this.supports("multiple")&&this.multiple&&q.set(this.inputNode,"multiple",!0);this._inputs.push(this.inputNode);b.set(this.inputNode,{position:"absolute",fontSize:this.inputNodeFontSize+"em",top:"-3px",right:"-3px",opacity:0});this._connectButton()},_connectButton:function(){this._cons.push(h.connect(this.inputNode,"change",this,function(w){this._files=this.inputNode.files;this.onChange(this.getFileList(w));!this.supports("multiple")&&this.multiple&&this._createInput()}));-1<this.tabIndex&&
(this.inputNode.tabIndex=this.tabIndex,this._cons.push(h.connect(this.inputNode,"focus",this,function(){a.add(this.domNode,this.focusedClass)})),this._cons.push(h.connect(this.inputNode,"blur",this,function(){a.remove(this.domNode,this.focusedClass)})))},_disconnectButton:function(){c.forEach(this._cons,h.disconnect);this._cons.splice(0,this._cons.length)}})})},"dojox/form/uploader/_Base":function(){define("dojo/dom-form dojo/dom-style dojo/dom-construct dojo/dom-attr dojo/has dojo/_base/declare dojo/_base/event dijit/_Widget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin".split(" "),
function(S,J,f,c,h,d,b,a,e,q){h.add("FormData",function(){return!!window.FormData});h.add("xhr-sendAsBinary",function(){var t=window.XMLHttpRequest&&new window.XMLHttpRequest;return t&&!!t.sendAsBinary});h.add("file-multiple",function(){return!!{"true":1,"false":1}[c.get(document.createElement("input",{type:"file"}),"multiple")]});return d("dojox.form.uploader._Base",[a,e,q],{getForm:function(){if(!this.form)for(var t=this.domNode;t&&t.tagName&&t!==document.body;){if("form"==t.tagName.toLowerCase()){this.form=
t;break}t=t.parentNode}return this.form},getUrl:function(){this.uploadUrl&&(this.url=this.uploadUrl);if(this.url)return this.url;this.getForm()&&(this.url=this.form.action);return this.url},connectForm:function(){this.url=this.getUrl();!this._fcon&&this.getForm()&&(this._fcon=!0,this.connect(this.form,"onsubmit",function(t){b.stop(t);this.submit(this.form)}))},supports:function(t){switch(t){case "multiple":if("flash"==this.force||"iframe"==this.force)break;return h("file-multiple");case "FormData":return h(t);
case "sendAsBinary":return h("xhr-sendAsBinary")}return!1},getMimeType:function(){return"application/octet-stream"},getFileType:function(t){return t.substring(t.lastIndexOf(".")+1).toUpperCase()},convertBytes:function(t){var u=Math.round(t/1024*1E5)/1E5,g=Math.round(t/1048576*1E5)/1E5,m=Math.round(t/1073741824*1E5)/1E5,v=t;1<u&&(v=u.toFixed(1)+" kb");1<g&&(v=g.toFixed(1)+" mb");1<m&&(v=m.toFixed(1)+" gb");return{kb:u,mb:g,gb:m,bytes:t,value:v}}})})},"dojox/form/uploader/_HTML5":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo dojo/request dojo/has".split(" "),
function(S,J,f,c,h,d){return S("dojox.form.uploader._HTML5",[],{errMsg:"Error uploading files. Try checking permissions",uploadType:"html5",postMixInProperties:function(){this.inherited(arguments)},postCreate:function(){this.connectForm();this.inherited(arguments);this.uploadOnSelect&&this.connect(this,"onChange",function(b){this.upload(b[0])})},_drop:function(b){c.stopEvent(b);this._files=b.dataTransfer.files;this.onChange(this.getFileList())},upload:function(b){this.onBegin(this.getFileList());
this.uploadWithFormData(b)},addDropTarget:function(b,a){a||(this.connect(b,"dragenter",c.stopEvent),this.connect(b,"dragover",c.stopEvent),this.connect(b,"dragleave",c.stopEvent));this.connect(b,"drop","_drop")},uploadWithFormData:function(b){function a(m){u._xhrProgress(m);"load"===m.type&&(u.onComplete(g.response.data),g.response.xhr.removeEventListener("load",a,!1),g.response.xhr.upload.removeEventListener("progress",a,!1),g=null)}if(this.getUrl()){var e=new FormData,q=this._getFileFieldName();
f.forEach(this._files,function(m,v){e.append(q,m)},this);if(b){b.uploadType=this.uploadType;for(var t in b)e.append(t,b[t])}var u=this,g=h(this.getUrl(),{method:"POST",data:e,handleAs:"json",uploadProgress:!0,headers:{Accept:"application/json"}},!0);g.promise.response.otherwise(function(m){u.onError(m)});d("native-xhr2")?(g.response.xhr.addEventListener("load",a,!1),g.response.xhr.upload.addEventListener("progress",a,!1)):g.promise.then(function(m){u.onComplete(m)})}},_xhrProgress:function(b){if(b.lengthComputable){var a=
{bytesLoaded:b.loaded,bytesTotal:b.total,type:b.type,timeStamp:b.timeStamp};"load"==b.type?(a.percent="100%",a.decimal=1):(a.decimal=b.loaded/b.total,a.percent=Math.ceil(b.loaded/b.total*100)+"%");this.onProgress(a)}}})})},"dojox/form/uploader/_IFrame":function(){define("dojo/query dojo/dom-construct dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-form dojo/request/iframe".split(" "),function(S,J,f,c,h,d,b){return f("dojox.form.uploader._IFrame",[],{postMixInProperties:function(){this.inherited(arguments);
"iframe"===this.uploadType&&(this.uploadType="iframe",this.upload=this.uploadIFrame)},uploadIFrame:function(a){var e={};this.getForm();var q=this.getUrl(),t=this;a=a||{};a.uploadType=this.uploadType;var u=J.place('\x3cform enctype\x3d"multipart/form-data" method\x3d"post"\x3e\x3c/form\x3e',this.domNode);h.forEach(this._inputs,function(g,m){""!==g.value&&(u.appendChild(g),e[g.name]=g.value)},this);if(a)for(nm in a)void 0===e[nm]&&J.create("input",{name:nm,value:a[nm],type:"hidden"},u);b.post(q,{form:u,
handleAs:"json",content:a}).then(function(g){J.destroy(u);if(g.ERROR||g.error)t.onError(g);else t.onComplete(g)},function(g){J.destroy(u);t.onError(g)})}})})},"dojox/form/uploader/_Flash":function(){define("dojo/dom-form dojo/dom-style dojo/dom-construct dojo/dom-attr dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/array dojox/embed/Flash".split(" "),function(S,J,f,c,h,d,b,a,e,q){return h("dojox.form.uploader._Flash",[],{swfPath:d.uploaderPath||require.toUrl("dojox/form/resources/uploader.swf"),
preventCache:!0,skipServerCheck:!0,serverTimeout:2E3,isDebug:!1,devMode:!1,deferredUploading:0,postMixInProperties:function(){"flash"===this.uploadType&&(this._files=[],this._fileMap={},this._createInput=this._createFlashUploader,this.getFileList=this.getFlashFileList,this.reset=this.flashReset,this.upload=this.uploadFlash,this.fieldname="flashUploadFiles");this.inherited(arguments)},onReady:function(t){},onLoad:function(t){},onFileChange:function(t){},onFileProgress:function(t){},getFlashFileList:function(){return this._files},
flashReset:function(){this.flashMovie.reset();this._files=[];this._fileMap={}},uploadFlash:function(t){this.onBegin(this.getFileList());t=t||{};t.returnType="F";t.uploadType=this.uploadType;this.flashMovie.doUpload(t)},_change:function(t){this._files=this._files.concat(t);e.forEach(t,function(u){u.bytesLoaded=0;u.bytesTotal=u.size;this._fileMap[u.name+"_"+u.size]=u},this);this.onChange(this._files);this.onFileChange(t)},_complete:function(t){this._getCustomEvent().type="load";this.onComplete(t)},
_progress:function(t){this._fileMap[t.name+"_"+t.bytesTotal].bytesLoaded=t.bytesLoaded;var u=this._getCustomEvent();this.onFileProgress(t);this.onProgress(u)},_error:function(t){this.onError(t)},_onFlashBlur:function(t){},_getCustomEvent:function(){var t={bytesLoaded:0,bytesTotal:0,type:"progress",timeStamp:(new Date).getTime()},u;for(u in this._fileMap)t.bytesTotal+=this._fileMap[u].bytesTotal,t.bytesLoaded+=this._fileMap[u].bytesLoaded;t.decimal=t.bytesLoaded/t.bytesTotal;t.percent=Math.ceil(t.bytesLoaded/
t.bytesTotal*100)+"%";return t},_connectFlash:function(){this._subs=[];this._cons=[];var t=a.hitch(this,function(u,g){this._subs.push(b.subscribe(this.id+u,this,g))});t("/filesSelected","_change");t("/filesUploaded","_complete");t("/filesProgress","_progress");t("/filesError","_error");t("/filesCanceled","onCancel");t("/stageBlur","_onFlashBlur");this.connect(this.domNode,"focus",function(){this.flashMovie.focus();this.flashMovie.doFocus()});0<=this.tabIndex&&c.set(this.domNode,"tabIndex",this.tabIndex)},
_createFlashUploader:function(){var t=this.btnSize.w,u=this.btnSize.h;if(t){var g=this.getUrl();if(g&&0>g.toLowerCase().indexOf("http")&&0!=g.indexOf("/")){var m=window.location.href.split("/");m.pop();m=m.join("/")+"/";g=m+g}this.inputNode=f.create("div",{className:"dojoxFlashNode"},this.domNode,"first");J.set(this.inputNode,{position:"absolute",top:"-2px",width:t+"px",height:u+"px",opacity:0});t={expressInstall:!0,path:(this.swfPath.uri||this.swfPath)+(this.preventCache?"?cb_"+(new Date).getTime():
""),width:t,height:u,allowScriptAccess:"always",allowNetworking:"all",vars:{uploadDataFieldName:this.flashFieldName||this.name+"Flash",uploadUrl:g,uploadOnSelect:this.uploadOnSelect,deferredUploading:this.deferredUploading||0,selectMultipleFiles:this.multiple,id:this.id,isDebug:this.isDebug,noReturnCheck:this.skipServerCheck,serverTimeout:this.serverTimeout},params:{scale:"noscale",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"}};this.flashObject=new q(t,this.inputNode);this.flashObject.onError=
a.hitch(function(v){});this.flashObject.onReady=a.hitch(this,function(){this.onReady(this)});this.flashObject.onLoad=a.hitch(this,function(v){this.flashMovie=v;this.flashReady=!0;this.onLoad(this)});this._connectFlash()}else setTimeout(dojo.hitch(this,function(){this._getButtonStyle(this.domNode);this._createFlashUploader()}),200)}})})},"dojox/embed/Flash":function(){define("dojo/_base/lang dojo/_base/unload dojo/_base/array dojo/query dojo/has dojo/dom dojo/on dojo/window dojo/string".split(" "),
function(S,J,f,c,h,d,b,a,e){function q(p){p=S.delegate(u,p);if(!("path"in p))return null;"id"in p||(p.id="dojox-embed-flash-"+t++);return p}var t=0,u={expressInstall:!1,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"sameDomain",allowNetworking:"all",style:null,redirect:null};if(h("ie")){var g=function(p){p=q(p);if(!p)return null;var l,n=p.path;if(p.vars){var k=[];for(l in p.vars)k.push(encodeURIComponent(l)+"\x3d"+encodeURIComponent(p.vars[l]));p.params.FlashVars=k.join("\x26");delete p.vars}n=
'\x3cobject id\x3d"'+e.escape(String(p.id))+'" classid\x3d"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width\x3d"'+e.escape(String(p.width))+'" height\x3d"'+e.escape(String(p.height))+'"'+(p.style?' style\x3d"'+e.escape(String(p.style))+'"':"")+'\x3e\x3cparam name\x3d"movie" value\x3d"'+e.escape(String(n))+'" /\x3e';if(p.params)for(l in p.params)n+='\x3cparam name\x3d"'+e.escape(l)+'" value\x3d"'+e.escape(String(p.params[l]))+'" /\x3e';return{id:p.id,markup:n+"\x3c/object\x3e"}};var m=function(){for(var p=
10,l=null;!l&&7<p;)try{l=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+p--)}catch(n){}return l?(p=l.GetVariable("$version").split(" ")[1].split(","),{major:null!=p[0]?parseInt(p[0]):0,minor:null!=p[1]?parseInt(p[1]):0,rev:null!=p[2]?parseInt(p[2]):0}):{major:0,minor:0,rev:0}}();J.addOnWindowUnload(function(){var p=function(){};c("object").reverse().style("display","none").forEach(function(l){for(var n in l)if("FlashVars"!=n&&"function"==typeof l[n])try{l[n]=p}catch(k){}})})}else g=function(p){p=
q(p);if(!p)return null;var l,n=p.path;if(p.vars){var k=[];for(l in p.vars)k.push(encodeURIComponent(l)+"\x3d"+encodeURIComponent(p.vars[l]));p.params.flashVars=k.join("\x26");delete p.vars}n='\x3cembed type\x3d"application/x-shockwave-flash" src\x3d"'+e.escape(String(n))+'" id\x3d"'+e.escape(String(p.id))+'" width\x3d"'+e.escape(String(p.width))+'" height\x3d"'+e.escape(String(p.height))+'"'+(p.style?' style\x3d"'+e.escape(String(p.style))+'" ':"")+'pluginspage\x3d"'+window.location.protocol+'//www.adobe.com/go/getflashplayer" ';
if(p.params)for(l in p.params)n+=" "+e.escape(l)+'\x3d"'+e.escape(String(p.params[l]))+'"';return{id:p.id,markup:n+" /\x3e"}},m=function(){var p=navigator.plugins["Shockwave Flash"];return p&&p.description?(p=p.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."),{major:null!=p[0]?parseInt(p[0]):0,minor:null!=p[1]?parseInt(p[1]):0,rev:null!=p[2]?parseInt(p[2]):0}):{major:0,minor:0,rev:0}}();var v=function(p,l){if(-1<location.href.toLowerCase().indexOf("file://"))throw Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");
this.available=m.major;this.minimumVersion=p.minimumVersion||9;this.domNode=this.movie=this.id=null;l&&(l=d.byId(l));setTimeout(S.hitch(this,function(){if(p.expressInstall||this.available&&this.available>=this.minimumVersion)if(p&&l)this.init(p,l);else this.onError("embed.Flash was not provided with the proper arguments.");else if(this.available)this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion);else this.onError("Flash is not installed.")}),
100)};S.extend(v,{onReady:function(p){},onLoad:function(p){},onError:function(p){},_onload:function(){clearInterval(this._poller);delete this._poller;delete this._pollCount;delete this._pollMax;this.onLoad(this.movie)},init:function(p,l){this.destroy();l=d.byId(l||this.domNode);if(!l)throw Error("dojox.embed.Flash: no domNode reference has been passed.");var n=0;this._poller=null;this._pollCount=0;this._pollMax=15;this.pollTime=100;v.initialized&&(this.id=v.place(p,l),this.domNode=l,setTimeout(S.hitch(this,
function(){this.movie=this.byId(this.id,p.doc);this.onReady(this.movie);this._poller=setInterval(S.hitch(this,function(){try{n=this.movie.PercentLoaded()}catch(k){}if(100==n)this._onload();else if(0==n&&this._pollCount++>this._pollMax)throw clearInterval(this._poller),Error("Building SWF failed.");}),this.pollTime)}),1))},_destroy:function(){try{this.domNode.removeChild(this.movie)}catch(p){}this.id=this.movie=this.domNode=null},destroy:function(){if(this.movie){var p=S.delegate({id:!0,movie:!0,domNode:!0,
onReady:!0,onLoad:!0}),l;for(l in this)p[l]||delete this[l];this._poller?b(this,"Load",this,"_destroy"):this._destroy()}},byId:function(p,l){l=l||document;return l.embeds[p]?l.embeds[p]:l[p]?l[p]:window[p]?window[p]:document[p]?document[p]:null}});S.mixin(v,{minSupported:8,available:m.major,supported:m.major>=m.required,minimumRequired:m.required,version:m,initialized:!1,onInitialize:function(){v.initialized=!0},__ie_markup__:function(p){return g(p)},proxy:function(p,l){f.forEach(l instanceof Array?
l:[l],function(n){this[n]=S.hitch(this,function(){return function(){return eval(this.movie.CallFunction('\x3cinvoke name\x3d"'+n+'" returntype\x3d"javascript"\x3e\x3carguments\x3e'+f.map(arguments,function(k){return __flash__toXML(k)}).join("")+"\x3c/arguments\x3e\x3c/invoke\x3e"))}.apply(this,arguments||[])})},p)}});v.place=function(p,l){p=g(p);l=d.byId(l);l||(l=a.doc.createElement("div"),l.id=p.id+"-container",a.body().appendChild(l));return p?(l.innerHTML=p.markup,p.id):null};v.onInitialize();
S.setObject("dojox.embed.Flash",v);return v})},"dijit/ConfirmDialog":function(){define(["dojo/_base/declare","./Dialog","./_ConfirmDialogMixin"],function(S,J,f){return S("dijit.ConfirmDialog",[J,f],{})})},"dijit/_ConfirmDialogMixin":function(){define(["dojo/_base/declare","./_WidgetsInTemplateMixin","dojo/i18n!./nls/common","dojo/text!./templates/actionBar.html","./form/Button"],function(S,J,f,c){return S("dijit._ConfirmDialogMixin",J,{actionBarTemplate:c,buttonOk:f.buttonOk,_setButtonOkAttr:{node:"okButton",
attribute:"label"},buttonCancel:f.buttonCancel,_setButtonCancelAttr:{node:"cancelButton",attribute:"label"}})})},"dgrid/editor":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/dom-class dojo/on dojo/aspect dojo/has dojo/query dojo/when ./Grid put-selector/put dojo/_base/sniff".split(" "),function(S,J,f,c,h,d,b,a,e,q,t,u){function g(z,B){z.value=B;if("radio"==z.type||"checkbox"==z.type)z.checked=z.defaultChecked=!!B}function m(z,B){"number"==typeof B?
z=isNaN(z)?z:parseFloat(z):"boolean"==typeof B?z="true"==z?!0:"false"==z?!1:z:B instanceof Date&&(B=new Date(z),z=isNaN(B.getTime())?z:B);return z}function v(z,B){return"function"==typeof B.get?m(B.get("value")):m(B["checkbox"==B.type||"radio"==B.type?"checked":"value"])}function p(z,B,C,H,E){if((C&&C.valueOf())!=(H&&H.valueOf())){var K=B.element;var I=B.row;var L=B.column;if(L.field&&I)if(B={grid:z,cell:B,rowId:I.id,oldValue:C,value:H,bubbles:!0,cancelable:!0},E&&E.type&&(B.parentType=E.type),d.emit(K,
"dgrid-datachange",B))z.updateDirty?(z.updateDirty(I.id,L.field,H),L.autoSave&&setTimeout(function(){z._trackError("save")},0)):I.data[L.field]=H;else{var M;(M=K.widget)?(M._dgridIgnoreChange=!0,M.set("value",C),setTimeout(function(){M._dgridIgnoreChange=!1},0)):(M=K.input)&&g(M,C);return C}}return H}function l(z,B,C){var H=z.cell(B.domNode||B),E=H.column,K;var I=z._activeCell;if(!B.isValid||B.isValid())if(C=p(z,H,I?z._activeValue:B._dgridLastValue,v(E,B),C),I?z._activeValue=C:B._dgridLastValue=C,
"radio"===B.type&&B.name&&!E.editOn&&E.field)for(K in I=z.row(B),e("input[type\x3dradio][name\x3d"+B.name+"]",z.contentNode).forEach(function(L){var M=z.row(L);L!==B&&L._dgridLastValue&&(L._dgridLastValue=!1,z.updateDirty?z.updateDirty(M.id,E.field,!1):M.data[E.field]=!1)}),z.dirty)I.id!==K&&z.dirty[K][E.field]&&z.updateDirty(K,E.field,!1)}function n(z){var B=z.parentNode||z.domNode&&z.domNode.parentNode;B&&h.contains(B,y)||(B=z.focusNode||z.domNode||z);return B}function k(z){if(z){var B=z.parentNode||
z.domNode&&z.domNode.parentNode;B&&h.contains(B,y)||(B=z.domNode||z);return B}}function r(z,B){isNaN(B)&&(B=isNaN(z.tabIndex)?-1:z.tabIndex);return u("div",{className:y,tabIndex:B},z)}function w(z){var B=z.editor,C=z.editOn,H=z.grid,E="string"!=typeof B;var K=z.editorArgs||{};"function"==typeof K&&(K=K.call(H,z));if(E){var I=new B(K);E=I.focusNode||I.domNode;E.className+=" dgrid-input";a("mac")&&C&&/checkbox|radio/i.test(E.type)?(z=r(I.domNode,z.tabIndex),d(z,"blur",function(){I._dgridIgnoreChange||
l(H,I,{type:"widget"})})):C||I.connect(I,"onChange",function(){I._dgridIgnoreChange||l(H,I,{type:"widget"})})}else{var L=function(M){var N=M.target;"_dgridLastValue"in N&&-1<N.className.indexOf("dgrid-input")&&l(H,N,M)};z.grid._hasInputListener||(H._hasInputListener=!0,H.on("change",function(M){L(M)}));I=E=u(("textarea"==B?"textarea":"input[type\x3d"+B+"]")+".dgrid-input",J.mixin({name:z.field,tabIndex:isNaN(z.tabIndex)?-1:z.tabIndex},K));a("mac")&&C&&/checkbox|radio/i.test(B)&&(z=r(I),I.tabIndex=
0,I.removeAttribute("tabindex"));if(9>a("ie")||a("ie")&&a("quirks"))"radio"==B||"checkbox"==B?d(I,"click",function(M){L(M)}):d(I,"change",function(M){L(M)})}return I}function x(z,B){function C(){var N=E._activeCell;L.blur();"function"===typeof E.focus&&setTimeout(function(){E.focus(N)},K&&9>a("ie")?15:0)}var H=w(z),E=z.grid,K=H.domNode,I=k(H),L=n(H),M=K?function(){H.set("value",H._dgridLastValue)}:function(){g(H,H._dgridLastValue);l(z.grid,H)};d(L,"keydown",function(N){N=N.keyCode||N.which;27==N?
(M(),E._activeValue=H._dgridLastValue,C()):13==N&&!1!==z.dismissOnEnter&&C()});(z._editorBlurHandle=d.pausable(n(H),"blur",function(N){if(!H.dropDown||!H.dropDown.domNode.contains(N.relatedTarget||document.activeElement)){if(N&&N.target){var P=N.target;if((P=h.contains(P,y)&&P)&&N.relatedTarget===(H.focusNode||H)){P.focus();return}}l(E,H,{type:"widget"});N=I.parentNode;P=N.children.length-1;var R={alreadyHooked:!0},Y=E.cell(I);d.emit(Y.element,"dgrid-editor-hide",{grid:E,cell:Y,column:z,editor:H,
bubbles:!0,cancelable:!1});z._editorBlurHandle.pause();N.removeChild(I);if(Y.row){for(u(Y.element,"!dgrid-cell-editing");P--;)u(N.firstChild,"!");t.appendIfNode(N,z.renderCell(z.grid.row(N).data,E._activeValue,N,E._activeOptions?J.delegate(R,E._activeOptions):R))}E._focusedEditorCell=E._activeCell=E._activeValue=E._activeOptions=null}})).pause();return H}function D(z,B,C,H){var E=z.domNode;E||g(z,H);C.innerHTML="";u(C,".dgrid-cell-editing");u(C,k(z));E&&!B.editOn?B.grid._editorsPendingStartup.push([z,
B,C,H]):G(z,B,C,H)}function G(z,B,C,H){var E=B.grid;z.domNode&&(z._started||z.startup(),z._dgridIgnoreChange=!0,z.set("value",H),setTimeout(function(){z._dgridIgnoreChange=!1},0));z._dgridLastValue=H;E._activeCell&&(E._activeValue=H,d.emit(C,"dgrid-editor-show",{grid:E,cell:E.cell(C),column:B,editor:z,bubbles:!0,cancelable:!1}))}function F(z){for(var B=z._editorsPendingStartup,C=B.length;C--;)G.apply(null,B[C]);z._editorsPendingStartup=[]}function A(z){function B(P){E.grid._activeCell=I;D(E.editorInstance,
E,I,M);E._editTimer=setTimeout(function(){var R=n(H);R.focus&&R.focus();E._editorBlurHandle&&E._editorBlurHandle.resume();E._editTimer=null;P.resolve(H)},0)}var C,H;z.column||(z=this.cell(z));if(!z||!z.element)return null;var E=z.column;var K=E.field;var I=z.element.contents||z.element;if(H=E.editorInstance){if(E.grid._activeCell!=I){var L=z.row;var M=(C=this.dirty&&this.dirty[L.id])&&K in C?C[K]:E.get?E.get(L.data):L.data[K];if(!E.canEdit||E.canEdit(z.row.data,M)){var N=new c;z=n(H);z.offsetWidth?
(z.blur(),setTimeout(function(){B(N)},0)):B(N);return N.promise}}}else if(E.editor&&(H=I.widget||I.input))return N=new c,H.focus&&H.focus(),N.resolve(H),N.promise;return null}var y="dgrid-editor-focus-wrapper";J.getObject("dgrid.editor",!0);return dgrid.editor=function(z,B,C){function H(L){var M=L.grid,N;if(!M.edit){M.edit=A;M._editorsPendingStartup=[];K.push(d(M.domNode,".dgrid-input:focusin",function(){M._focusedEditorCell=M.cell(this)}));var P=M._editorFocusoutHandle=d.pausable(M.domNode,".dgrid-input:focusout",
function(R){M._focusedEditorCell&&M._focusedEditorCell.element.contains(R.target)||(M._focusedEditorCell=null)});K.push(P);K.push(b.before(M,"removeRow",function(R){var Y=M._focusedEditorCell;R=M.row(R);Y&&R&&Y.row.id===R.id&&(N=Y,P.pause(),setTimeout(function(){P.resume();N=null},0))}));K.push(b.after(M,"insertRow",function(R){var Y=M.row(R);N&&N.row.id===Y.id&&M.edit(M.cell(Y,N.column.id));return R}));K.push(b.after(M,"renderArray",function(R){q(R,function(Y){Y.length?F(M):M._editorsPendingStartup=
[]});return R}));K.push(b.after(M,"_onNotification",function(){F(M)}))}}var E=z.renderCell||t.defaultRenderCell,K=[];z||(z={});z.editor=B=B||z.editor||"text";z.editOn=C=C||z.editOn;var I="string"!=typeof B;z.widgetArgs&&(S.deprecated("column.widgetArgs","use column.editorArgs instead","dgrid 0.4"),z.editorArgs=z.widgetArgs);b.after(z,"init",C?function(){H(z);z.editorInstance=x(z,E)}:function(){var L=z.grid;H(z);I&&K.push(b.before(L,"removeRow",function(M){if(M=(M=L.cell(M,z.id).element)&&(M.contents||
M).widget)L._editorFocusoutHandle.pause(),M.destroyRecursive(),L._editorFocusoutHandle.resume()}))});b.after(z,"destroy",function(){f.forEach(K,function(L){L.remove()});z._editorBlurHandle&&z._editorBlurHandle.remove();z._editTimer&&clearTimeout(z._editTimer);C&&I&&z.editorInstance.destroyRecursive();z.grid.edit=null;z.grid._editorsPendingStartup=null});z.renderCell=C?function(L,M,N,P){var R=z.grid;P&&P.alreadyHooked||d("TD"==N.tagName?N:N.parentNode,C,function(){R._activeOptions=P;R.edit(this)});
return E.call(z,L,M,N,P)}:function(L,M,N,P){if(!z.canEdit||z.canEdit(L,M))L=w(z),D(L,z,N,M),N[I?"widget":"input"]=L;else return E.call(z,L,M,N,P)};return z}})},"esri/dijit/Tags":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/has dojo/html dojo/keys dojo/on dojo/query dojo/string dojo/store/Memory dijit/focus dijit/form/TextBox dijit/registry dijit/Tooltip dijit/_OnDijitClickMixin dijit/_TemplatedMixin dijit/_WidgetBase dgrid/OnDemandGrid dgrid/Selection dgrid/Keyboard ../kernel ../lang dojo/i18n!../nls/jsapi dojo/NodeList-traverse dojo/NodeList-manipulate dojo/_base/sniff".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z){r=J([x,r,w],{declaredClass:"esri.dijit.Tags",templateString:'\x3cdiv class\x3d"${baseClass}"\x3e\x3c/div\x3e',baseClass:"esriTags",_attachmentNode:"",_autocompleteList:"",_grid:"",_store:"",_matchParam:"",_idProperty:"",_gridId:"",_filterId:"",_placeHolder:"",_noDataMsg:"",_maxWidth:"",_minWidth:"",_inputTextBox:"",_gridHasFocus:!1,_metaKeyPressed:!1,_shiftKeyPressed:!1,_CSS_STYLES:{CLASS_SELECTOR:".",ALL_SELECTOR:"\x3e",MULTI:"select2-container select2-container-multi",
CHOICES:"select2-choices",CHOICE:"select2-search-choice",SEARCH_CHOICE_FOCUS:"select2-search-choice-focus",SEARCH_FIELD:"select2-search-field",CLOSE_ICON:"select2-search-choice-close"},values:[],_selRows:[],_CHOICE_SELECTOR:"",_CHOICE_FOCUS:"",_CHOICE_FOCUS_ALL:"",tooltipPosition:[],constructor:function(B){this._idProperty=B.idProperty||"tag";this._maxWidth=B.maxWidth||"auto";this._minWidth=B.minWidth||"auto";this._matchParam=B.matchParam||"first";this.values=[];this._selRows=[];this._CHOICE_ALL_SELECTOR=
this._CSS_STYLES.CLASS_SELECTOR+this._CSS_STYLES.CHOICE+this._CSS_STYLES.ALL_SELECTOR;this._CHOICE_FOCUS=this._CSS_STYLES.CLASS_SELECTOR+this._CSS_STYLES.SEARCH_CHOICE_FOCUS;this._CHOICE_FOCUS_ALL=this._CHOICE_FOCUS+this._CSS_STYLES.ALL_SELECTOR},postMixInProperties:function(){this.inherited(arguments);var B=(new Date).getTime();this._tagsId="userTags-"+B;this._gridId="grid-"+B;this._filterId="filter-"+B;this._isIE8=9>e("ie");this.i18n={};f.mixin(this.i18n,z.widgets.tags)},postCreate:function(){if(this._isIE8)this._textTags=
new l({trim:!0,placeHolder:this.i18n.addTags,style:{minWidth:this.minWidth,maxWidth:this.maxWidth}},b.create("div",{id:this._tagsId},this.domNode)),this._textTags.startup(),d.add(this._textTags.domNode,"ie8Style");else{this._attachmentNode=b.create("div",{id:this._tagsId,className:"grid_1"},this.domNode);this._createContainerNode();this._createTagList();this._createDropDownList();this._createInput();var B=f.hitch(this,function(I,L,M){L=this._inputTextBox?this._inputTextBox.get("value")+"":"";if(1>
L.length)return!0;if(!I.tag)return!1;I=(I.tag+"").toLowerCase().match(new RegExp("^"+L.toLowerCase()));return null!==I&&0<I.length?!0:!1}),C=f.hitch(this,function(I,L,M){L=this._inputTextBox?this._inputTextBox.get("value")+"":"";return 1>L.length?!0:I.tag?(I.tag+"").toLowerCase().indexOf(L.toLowerCase())?!0:!1:!1}),H=[{field:this._idProperty}],E=[{attribute:this._idProperty,ascending:!0}];this._store=new v({idProperty:this._idProperty,data:[]});this._grid=new (J([D,G,F]))({store:this._store,showHeader:!1,
noDataMessage:this.i18n.noTagsFound,selectionMode:"extended",allowSelectAll:!0,cellNavigation:!1,columns:H,sort:E,renderRow:this._renderItem},this._dropDownList);this._grid.startup();d.add(this._grid.domNode,"gridHeightLimiter");this._grid.query="first"===this._matchParam?B:C;var K;this.own(this._inputTextBox.watch("value",f.hitch(this,function(I,L,M){K&&(clearTimeout(K),K=null);this._grid.refresh()})));this.own(this._grid.on(".dgrid-row:click",f.hitch(this,function(I){var L="";this._shiftKeyPressed||
this._metaKeyPressed?I.shiftKey||I.metaKey||I.ctrlKey||(L=this._selRows[0],this._createTags(L),this._store.remove(L),this._grid.refresh(),this._resetInputTextBox()):(L=this._grid.row(I).data.tag,this._createTags(L),this._store.remove(L),this._grid.refresh(),this._resetInputTextBox())})));this.own(this._grid.on("dgrid-deselect",f.hitch(this,function(I){this._selRows=[];for(var L in this._grid.selection)this._grid.selection.hasOwnProperty(L)&&this._selRows.push(L)})));this.own(this._grid.on("dgrid-select",
f.hitch(this,function(I){this._selRows=[];for(var L in this._grid.selection)this._grid.selection.hasOwnProperty(L)&&this._selRows.push(L)})));this.own(this.connect(this.domNode,"keydown","_keydownHandler"));window.onkeydown=f.hitch(this,function(I){if(I.shiftKey||I.ctrlKey||224===I.keyCode)this._metaKeyPressed=!0});this.own(this.connect(document,"onkeydown",f.hitch(this,function(I){this._metaKeyPressed=this._shiftKeyPressed=!0})))}},_keydownHandler:function(B){this._clearMessage();if(void 0!==p.curNode.value)var C=
p.curNode.value.length;var H=g(this._CHOICE_FOCUS,c.byId(this.id)),E=g(this._CSS_STYLES.CLASS_SELECTOR+this._CSS_STYLES.CHOICE,c.byId(this.id)).last();switch(B.keyCode){case t.RIGHT_ARROW:this._navigate(H,C,E,"right");this._hideGrid();break;case t.LEFT_ARROW:this._navigate(H,C,E,"left");this._hideGrid();break;case t.DOWN_ARROW:B.preventDefault();this._unhighlightTag(H);"none"===a.get(this._gridId,"display")&&this._showGrid();this._gridHasFocus||(this._grid.focus(this._setFocusOnFirstRow(this._grid,
0)),this._gridHasFocus=!0);break;case t.UP_ARROW:break;case t.BACKSPACE:if(0===C&&0===g(this._CHOICE_FOCUS_ALL).length&&void 0!==g(this._CHOICE_ALL_SELECTOR)[g(this._CHOICE_ALL_SELECTOR).length-1]){var K=g(this._CHOICE_ALL_SELECTOR)[g(this._CHOICE_ALL_SELECTOR).length-1].title;if(0<g("li",this._attachmentNode).length&&(b.destroy(E[0]),void 0!==K))try{this._store.add({tag:K})}catch(L){}}if(0<g(this._CHOICE_FOCUS_ALL).length&&(K=g(this._CHOICE_FOCUS_ALL).text(),b.destroy(H[0]),void 0!==K))try{this._store.add({tag:K})}catch(L){}this._grid.refresh();
0===C&&this._hideGrid();this._removeTag(K);this._emitRemoved(K);this._emitChanged();this.validate();break;case t.CTRL:this._metaKeyPressed=!0;break;case t.META:this._metaKeyPressed=!0;break;case t.SHIFT:this._shiftKeyPressed=!0;break;case t.ENTER:if(0<C){C=this._stripHTML(p.curNode.value);C=C.split(",");var I=[];S.forEach(C,function(L,M){-1===S.indexOf(I,L)&&I.push(m.trim(L))});S.forEach(I,f.hitch(this,function(L,M){this._isEmpty(L)||this._contains(this.values,L)||this._createTags(L)}))}else{for(C=
0;C<this._selRows.length;C++)this._createTags(this._selRows[C]),this._store.remove(this._selRows[C]);this._metaKeyPressed=this._shiftKeyPressed=!1}this._resetInputTextBox();B.preventDefault();p.focus(c.byId(this._filterId));break;case t.TAB:if(p.curNode.id!==this._filterId||0!==C){if(0<C)C=this._stripHTML(p.curNode.value),C=C.split(","),I=[],S.forEach(C,function(L,M){-1===S.indexOf(I,L)&&I.push(m.trim(L))}),S.forEach(I,f.hitch(this,function(L,M){this._isEmpty(L)||this._contains(this.values,L)||this._createTags(L)}));
else{for(C=0;C<this._selRows.length;C++)this._createTags(this._selRows[C]),this._store.remove(this._selRows[C]);this._metaKeyPressed=this._shiftKeyPressed=!1}this._resetInputTextBox();B.preventDefault();p.focus(c.byId(this._filterId))}break;case t.ESCAPE:this._hideGrid();break;default:-1<C&&("none"===a.get(c.byId(this._gridId),"display")&&this._showGrid(),this._unhighlightTag(H)),this._metaKeyPressed=!1}},_blurHandler:function(B,C,H){if(!this.focused){B=this._stripHTML(this._inputTextBox.value);if(0<
B.length){var E=[];B=B.split(",");S.forEach(B,function(K,I){-1===S.indexOf(E,K)&&E.push(m.trim(K))});S.forEach(E,f.hitch(this,function(K,I){this._isEmpty(K)||this._contains(this.values,K)||this._createTags(K)}));this._resetInputTextBox()}this._hideGrid()}this.validate()},isValid:function(){var B=this.get("value");return this.required?y.isDefined(B)&&0<B.length:!0},validate:function(){this._created&&!this.isValid()?(h.set(this.domNode,"aria-invalid","true"),this._displayMessage(this.i18n.required)):
(h.set(this.domNode,"aria-invalid","false"),this._displayMessage(null))},_clearMessage:function(){this._displayMessage(null)},_displayMessage:function(B){var C=this._isIE8?this._textTags.domNode:c.byId(this._tagsId);B&&this.focused?k.show(B,C):k.hide(C)},_resetInputTextBox:function(){n.byId(this._filterId).set("value","")},_isEmpty:function(B){B=B.replace(/^\s+|\s+$/,"");return 0===B.length?!0:!1},_navigate:function(B,C,H,E){0<B.length&&1>C?("right"===E?this._hightlightTag(B.next()):this._hightlightTag(B.prev()),
this._unhighlightTag(B)):1>C&&this._hightlightTag(H)},_contains:function(B,C){return 0<=S.indexOf(B,C)},_hightlightTag:function(B){B.addClass(this._CSS_STYLES.SEARCH_CHOICE_FOCUS)},_unhighlightTag:function(B){B.removeClass(this._CSS_STYLES.SEARCH_CHOICE_FOCUS)},_removeTag:function(B){B&&-1!==S.indexOf(this.values,B)&&this.values.splice(S.indexOf(this.values,B),1)},_hideGrid:function(){c.byId(this._gridId)&&a.set(c.byId(this._gridId),"display","none");this._gridHasFocus=!1},_showGrid:function(){a.set(c.byId(this._gridId),
"display","block");var B=a.get(c.byId(this._attachmentNode),"width");a.set(c.byId(this._gridId),"width",B+"px")},_setFocusOnFirstRow:function(B,C){return g(".dgrid-content .dgrid-cell",this._grid.domNode)[C]||g(".dgrid-content .dgrid-row",this._grid.domNode)[C]},_createTags:function(B){g(this._CHOICE_FOCUS,c.byId(this.id)).removeClass("select2-search-choice-focus");var C=b.create("li",null,this._autocompleteList);d.add(C,this._CSS_STYLES.CHOICE);C=b.create("div",{title:B},C);q.set(C,this._htmlEncode(B));
C=b.create("a",{href:"#"},C);d.add(C,this._CSS_STYLES.CLOSE_ICON);u(C,"click",f.hitch(this,function(H){var E=m.trim(H.target.parentElement.textContent);try{this._store.add({tag:E})}catch(K){}this._grid.refresh();this._removeTag(E);this._emitRemoved(E);this._emitChanged();b.destroy(H.target.parentNode.parentNode);H.preventDefault()}));C=n.byId(this._filterId);b.place(C.domNode,this._autocompleteList,"last");this._hideGrid();this.values.push(B);this._emitAdded(B);this._emitChanged()},_emitAdded:function(B){this.emit("tags-add",
{tag:B})},_emitRemoved:function(B){this.emit("tags-remove",{tag:B})},_emitChanged:function(){this.emit("tags-change",{tags:this.get("tags")})},_renderItem:function(B){return b.create("div",{innerHTML:B.tag})},_createContainerNode:function(){this._containerNode=b.create("div",null,this._attachmentNode);d.add(this._containerNode,this._CSS_STYLES.MULTI);a.set(this._containerNode,"maxWidth",this._maxWidth);a.set(this._containerNode,"minWidth",this._minWidth)},_createTagList:function(){this._autocompleteList=
b.create("ul",null,this._containerNode);d.add(this._autocompleteList,this._CSS_STYLES.CHOICES)},_createInput:function(){var B=b.create("li",null,this._autocompleteList,"last");d.add(B,this._CSS_STYLES.SEARCH_FIELD);this._inputTextBox=new l({id:this._filterId,placeHolder:this.i18n.addTags,intermediateChanges:!0,trim:!0,style:{border:"none"}},B);d.add(this._inputTextBox,"inputTextBox");a.set(this._inputTextBox,"width",this._minWidth);(8<e("ie")||4<e("trident"))&&d.add(this._inputTextBox.domNode,"ieStyle");
this.own(p.watch("curNode",f.hitch(this,this._blurHandler)))},_createDropDownList:function(){this._dropDownList=b.create("div",{id:this._gridId},this._containerNode);d.add(this._dropDownList,"dropDownList");a.set(this._dropDownList,"width",this._minWidth)},focus:function(){p.focus(this.domNode);this._isIE8?this._textTags.focus():this._inputTextBox.focus()},reset:function(){this.clearTags()},prepopulate:function(B){S.forEach(B,f.hitch(this,function(C,H){this._createTags(C);this._store.remove(C)}))},
clearTags:function(){var B=g(this._CSS_STYLES.CLASS_SELECTOR+this._CSS_STYLES.CHOICE,c.byId(this.id)),C=!1,H;0<B.length&&(C=!0,S.forEach(B,f.hitch(this,function(E,K){try{H=g(this._CHOICE_ALL_SELECTOR,c.byId(this.id))[0].title,this._store.add({tag:H})}catch(I){}b.destroy(E);this._emitRemoved(H)})),this.values=[],C&&this._emitChanged())},addStyledTags:function(B,C){d.add(c.byId(C),this._CSS_STYLES.MULTI);var H=b.create("ul",null,c.byId(C));d.add(H,this._CSS_STYLES.CHOICES);a.set(H,"border","none");
S.forEach(B,function(E,K){K=b.create("li",null,H);a.set(K,"padding","3px 5px 3px 5px");d.add(K,"select2-search-resultSet");K=b.create("div",{title:E},K);q.set(K,E)})},_getUniqueTags:function(B){var C=[],H;S.forEach(B,f.hitch(this,function(E){H=this._stripHTML(E);y.isDefined(H)&&0<H.length&&C.push(H)}));return S.filter(C,f.hitch(this,function(E,K){return S.indexOf(C,E)===K}))},_setValueAttr:function(B){this._setTagsAttr(B)},_getValueAttr:function(){return this._getTagsAttr()},_setTagsAttr:function(B){!B||
B instanceof Array||(B=B.split(","));this._isIE8?this._textTags&&this._textTags.set("value",this._getUniqueTags(B).join(",")):(this.clearTags(),this.prepopulate(B?this._getUniqueTags(B):[]))},_getTagsAttr:function(){return this._isIE8?this._textTags?this._textTags.get("value"):"":this.values?this.values.join(","):""},_setRequiredAttr:function(B){this.required=B},_getRequiredAttr:function(){return this.required},_setMinWidthAttr:function(B){this.minWidth=B},_setMaxWidthAttr:function(B){this.maxWidth=
B},_setKnownTagsAttr:function(B){if(!this._isIE8){var C=[],H;for(H=0;H<B.length;H++)0>S.indexOf(this.values,B[H])&&C.push(B[H]);this._store=new v({idProperty:this._idProperty,data:C});this._grid.set("store",this._store);this._grid.refresh()}},_stripHTML:function(B){return B&&B.replace(/<(?:.|\s)*?>/g,"")},_htmlEncode:function(B){return B?B.replace(/&/g,"\x26amp;").replace(/>/g,"\x26gt;").replace(/</g,"\x26lt;").replace(/"/g,"\x26quot;"):B}});f.setObject("dijit.Tags",r,A);return r})},"dojo/NodeList-traverse":function(){define(["./query",
"./_base/lang","./_base/array"],function(S,J,f){var c=S.NodeList;J.extend(c,{_buildArrayFromCallback:function(h){for(var d=[],b=0;b<this.length;b++){var a=h.call(this[b],this[b],d);a&&(d=d.concat(a))}return d},_getUniqueAsNodeList:function(h){for(var d=[],b=0,a;a=h[b];b++)1==a.nodeType&&-1==f.indexOf(d,a)&&d.push(a);return this._wrap(d,null,this._NodeListCtor)},_getUniqueNodeListWithParent:function(h,d){h=this._getUniqueAsNodeList(h);h=d?S._filterResult(h,d):h;return h._stash(this)},_getRelatedUniqueNodes:function(h,
d){return this._getUniqueNodeListWithParent(this._buildArrayFromCallback(d),h)},children:function(h){return this._getRelatedUniqueNodes(h,function(d,b){return J._toArray(d.childNodes)})},closest:function(h,d){return this._getRelatedUniqueNodes(null,function(b,a){do if(S._filterResult([b],h,d).length)return b;while(b!=d&&(b=b.parentNode)&&1==b.nodeType);return null})},parent:function(h){return this._getRelatedUniqueNodes(h,function(d,b){return d.parentNode})},parents:function(h){return this._getRelatedUniqueNodes(h,
function(d,b){for(b=[];d.parentNode;)d=d.parentNode,b.push(d);return b})},siblings:function(h){return this._getRelatedUniqueNodes(h,function(d,b){b=[];for(var a=d.parentNode&&d.parentNode.childNodes,e=0;e<a.length;e++)a[e]!=d&&b.push(a[e]);return b})},next:function(h){return this._getRelatedUniqueNodes(h,function(d,b){for(d=d.nextSibling;d&&1!=d.nodeType;)d=d.nextSibling;return d})},nextAll:function(h){return this._getRelatedUniqueNodes(h,function(d,b){for(b=[];d=d.nextSibling;)1==d.nodeType&&b.push(d);
return b})},prev:function(h){return this._getRelatedUniqueNodes(h,function(d,b){for(d=d.previousSibling;d&&1!=d.nodeType;)d=d.previousSibling;return d})},prevAll:function(h){return this._getRelatedUniqueNodes(h,function(d,b){for(b=[];d=d.previousSibling;)1==d.nodeType&&b.push(d);return b})},andSelf:function(){return this.concat(this._parent)},first:function(){return this._wrap(this[0]&&[this[0]]||[],this)},last:function(){return this._wrap(this.length?[this[this.length-1]]:[],this)},even:function(){return this.filter(function(h,
d){return 0!=d%2})},odd:function(){return this.filter(function(h,d){return 0==d%2})}});return c})},"dijit/form/SimpleTextarea":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(S,J,f,c){return S("dijit.form.SimpleTextarea",c,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"\x3ctextarea ${!nameAttrSetting} data-dojo-attach-point\x3d'focusNode,containerNode,textbox' autocomplete\x3d'off'\x3e\x3c/textarea\x3e",postMixInProperties:function(){!this.value&&
this.srcNodeRef&&(this.value=this.srcNodeRef.value);this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);f("ie")&&this.cols&&J.add(this.textbox,"dijitTextAreaCols")},filter:function(h){h&&(h=h.replace(/\r/g,""));return this.inherited(arguments)},_onInput:function(h){if(this.maxLength){var d=parseInt(this.maxLength),b=this.textbox.value.replace(/\r/g,"");d=b.length-d;if(0<d){var a=this.textbox;if(a.selectionStart){var e=a.selectionStart,q=0;f("opera")&&(q=(this.textbox.value.substring(0,
e).match(/\r/g)||[]).length);this.textbox.value=b.substring(0,e-d-q)+b.substring(e-q);a.setSelectionRange(e-d,e-d)}else this.ownerDocument.selection&&(a.focus(),b=this.ownerDocument.selection.createRange(),b.moveStart("character",-d),b.text="",b.select())}}this.inherited(arguments)}})})},"dijit/form/Textarea":function(){define(["dojo/_base/declare","dojo/dom-style","./_ExpandingTextAreaMixin","./SimpleTextarea"],function(S,J,f,c){return S("dijit.form.Textarea",[c,f],{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",
cols:"",buildRendering:function(){this.inherited(arguments);J.set(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"})}})})},"dijit/form/_ExpandingTextAreaMixin":function(){define("dojo/_base/declare dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/_base/window ../Viewport".split(" "),function(S,J,f,c,h,d,b){f.add("textarea-needs-help-shrinking",function(){var a=d.body(),e=J.create("textarea",
{rows:"5",cols:"20",value:" ",style:{zoom:1,fontSize:"12px",height:"96px",overflow:"hidden",visibility:"hidden",position:"absolute",border:"5px solid white",margin:"0",padding:"0",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"}},a,"last"),q=e.scrollHeight>=e.clientHeight;a.removeChild(e);return q});return S("dijit.form._ExpandingTextAreaMixin",null,{_setValueAttr:function(){this.inherited(arguments);this.resize()},postCreate:function(){this.inherited(arguments);
var a=this.textbox;a.style.overflowY="hidden";this.own(h(a,"focus, resize",c.hitch(this,"_resizeLater")))},startup:function(){this.inherited(arguments);this.own(b.on("resize",c.hitch(this,"_resizeLater")));this._resizeLater()},_onInput:function(a){this.inherited(arguments);this.resize()},_estimateHeight:function(){var a=this.textbox;a.rows=(a.value.match(/\n/g)||[]).length+1},_resizeLater:function(){this.defer("resize")},resize:function(){function a(){var p=!1;""===e.value&&(e.value=" ",p=!0);var l=
e.scrollHeight;p&&(e.value="");return l}var e=this.textbox;"hidden"==e.style.overflowY&&(e.scrollTop=0);if(!this.busyResizing){this.busyResizing=!0;if(a()||e.offsetHeight){var q=a()+Math.max(e.offsetHeight-e.clientHeight,0),t=q+"px";t!=e.style.height&&(e.style.height=t,e.rows=1);if(f("textarea-needs-help-shrinking")){var u=a(),g=e.style.minHeight,m=4,v=e.scrollTop;e.style.minHeight=t;for(e.style.height="auto";0<q;){e.style.minHeight=Math.max(q-m,4)+"px";t=a();u-=t;q-=u;if(u<m)break;u=t;m<<=1}e.style.height=
q+"px";e.style.minHeight=g;e.scrollTop=v}e.style.overflowY=a()>e.clientHeight?"auto":"hidden";"hidden"==e.style.overflowY&&(e.scrollTop=0)}else this._estimateHeight();this.busyResizing=!1}}})})},"dijit/form/Select":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/sniff ./_FormSelectWidget ../_HasDropDown ../DropDownMenu ../MenuItem ../MenuSeparator ../Tooltip ../_KeyNavMixin ../registry dojo/text!./templates/Select.html dojo/i18n!./nls/validate".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k){function r(x){return function(D){this._isLoaded?this.inherited(x,arguments):this.loadDropDown(a.hitch(this,x,D))}}var w=J("dijit.form._SelectMenu",g,{autoFocus:!0,buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("role","listbox")},postCreate:function(){this.inherited(arguments);this.own(e(this.domNode,"selectstart",function(x){x.preventDefault();x.stopPropagation()}))},focus:function(){var x=!1,D=this.parentWidget.value;
a.isArray(D)&&(D=D[D.length-1]);D&&S.forEach(this.parentWidget._getChildren(),function(G){G.option&&D===G.option.value&&(x=!0,this.focusChild(G,!1))},this);x||this.inherited(arguments)}});h=J("dijit.form.Select"+(q("dojo-bidi")?"_NoBidi":""),[t,u,l],{baseClass:"dijitSelect dijitValidationTextBox",templateString:k,_buttonInputDisabled:q("ie")?"disabled":"",required:!1,state:"",message:"",tooltipPosition:[],emptyLabel:"\x26#160;",_isLoaded:!1,_childrenLoaded:!1,labelType:"html",_fillContent:function(){this.inherited(arguments);
if(this.options.length&&!this.value&&this.srcNodeRef){var x=this.srcNodeRef.selectedIndex||0;this._set("value",this.options[0<=x?x:0].value)}this.dropDown=new w({id:this.id+"_menu",parentWidget:this});c.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "))},_getMenuItemForOption:function(x){if(x.value||x.label){var D=a.hitch(this,"_setValueAttr",x);x=new m({option:x,label:("text"===this.labelType?(x.label||"").toString().replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"):x.label)||this.emptyLabel,
onClick:D,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:x.disabled||!1});x.focusNode.setAttribute("role","option");return x}return new v({ownerDocument:this.ownerDocument})},_addOptionItem:function(x){this.dropDown&&this.dropDown.addChild(this._getMenuItemForOption(x))},_getChildren:function(){return this.dropDown?this.dropDown.getChildren():[]},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(x){}},focusChild:function(x){x&&this.set("value",
x.option)},_getFirst:function(){var x=this._getChildren();return x.length?x[0]:null},_getLast:function(){var x=this._getChildren();return x.length?x[x.length-1]:null},childSelector:function(x){return(x=n.byNode(x))&&x.getParent()==this.dropDown},onKeyboardSearch:function(x,D,G,F){x&&this.focusChild(x)},_loadChildren:function(x){if(!0===x)if(this.dropDown&&(delete this.dropDown.focusedChild,this.focusedChild=null),this.options.length)this.inherited(arguments);else{S.forEach(this._getChildren(),function(G){G.destroyRecursive()});
var D=new m({ownerDocument:this.ownerDocument,label:this.emptyLabel});this.dropDown.addChild(D)}else this._updateSelection();this._isLoaded=!1;this._childrenLoaded=!0;this._loadingStore||this._setValueAttr(this.value,!1)},_refreshState:function(){this._started&&this.validate(this.focused)},startup:function(){this.inherited(arguments);this._refreshState()},_setValueAttr:function(x){this.inherited(arguments);f.set(this.valueNode,"value",this.get("value"));this._refreshState()},_setNameAttr:"valueNode",
_setDisabledAttr:function(x){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(x){this._set("required",x);this.focusNode.setAttribute("aria-required",x);this._refreshState()},_setOptionsAttr:function(x){this._isLoaded=!1;this._set("options",x)},_setDisplay:function(x){x=("text"===this.labelType?(x||"").replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;"):x)||this.emptyLabel;this.containerNode.innerHTML='\x3cspan role\x3d"option" aria-selected\x3d"true" class\x3d"dijitReset dijitInline '+
this.baseClass.replace(/\s+|$/g,"Label ")+'"\x3e'+x+"\x3c/span\x3e"},validate:function(x){x=this.disabled||this.isValid(x);this._set("state",x?"":this._hasBeenBlurred?"Error":"Incomplete");this.focusNode.setAttribute("aria-invalid",x?"false":"true");var D=x?"":this._missingMsg;D&&this.focused&&this._hasBeenBlurred?p.show(D,this.domNode,this.tooltipPosition,!this.isLeftToRight()):p.hide(this.domNode);this._set("message",D);return x},isValid:function(){return!this.required||0===this.value||!/^\s*$/.test(this.value||
"")},reset:function(){this.inherited(arguments);p.hide(this.domNode);this._refreshState()},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=d.getLocalization("dijit.form","validate",this.lang).missingMessage},postCreate:function(){this.inherited(arguments);this.own(e(this.domNode,"selectstart",function(D){D.preventDefault();D.stopPropagation()}));this.domNode.setAttribute("aria-expanded","false");var x=this._keyNavCodes;delete x[b.LEFT_ARROW];delete x[b.RIGHT_ARROW]},_setStyleAttr:function(x){this.inherited(arguments);
c.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width)},isLoaded:function(){return this._isLoaded},loadDropDown:function(x){this._loadChildren(!0);this._isLoaded=!0;x()},destroy:function(x){this.dropDown&&!this.dropDown._destroyed&&(this.dropDown.destroyRecursive(x),delete this.dropDown);p.hide(this.domNode);this.inherited(arguments)},_onFocus:function(){this.validate(!0)},_onBlur:function(){p.hide(this.domNode);this.inherited(arguments);this.validate(!1)}});
q("dojo-bidi")&&(h=J("dijit.form.Select",h,{_setDisplay:function(x){this.inherited(arguments);this.applyTextDir(this.containerNode)}}));h._Menu=w;h.prototype._onContainerKeydown=r("_onContainerKeydown");h.prototype._onContainerKeypress=r("_onContainerKeypress");return h})},"dijit/form/_FormSelectWidget":function(){define("dojo/_base/array dojo/_base/Deferred dojo/aspect dojo/data/util/sorter dojo/_base/declare dojo/dom dojo/dom-class dojo/_base/kernel dojo/_base/lang dojo/query dojo/when dojo/store/util/QueryResults ./_FormValueWidget".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g){return h("dijit.form._FormSelectWidget",g,{multiple:!1,options:null,store:null,_setStoreAttr:function(m){this._created&&this._deprecatedSetStore(m)},query:null,_setQueryAttr:function(m){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{query:m})},queryOptions:null,_setQueryOptionsAttr:function(m){this._created&&this._deprecatedSetStore(this.store,this.selectedValue,{queryOptions:m})},labelAttr:"",onFetch:null,sortByLabel:!0,loadChildrenOnOpen:!1,
onLoadDeferred:null,getOptions:function(m){var v=this.options||[];if(null==m)return v;if(e.isArrayLike(m))return S.map(m,function(p){return this.getOptions(p)},this);e.isString(m)&&(m={value:m});e.isObject(m)&&(S.some(v,function(p,l){for(var n in m)if(!(n in p)||p[n]!=m[n])return!1;m=l;return!0})||(m=-1));return 0<=m&&m<v.length?v[m]:null},addOption:function(m){S.forEach(e.isArrayLike(m)?m:[m],function(v){v&&e.isObject(v)&&this.options.push(v)},this);this._loadChildren()},removeOption:function(m){m=
this.getOptions(e.isArrayLike(m)?m:[m]);S.forEach(m,function(v){v&&(this.options=S.filter(this.options,function(p){return p.value!==v.value||p.label!==v.label}),this._removeOptionItem(v))},this);this._loadChildren()},updateOption:function(m){S.forEach(e.isArrayLike(m)?m:[m],function(v){var p=this.getOptions({value:v.value}),l;if(p)for(l in v)p[l]=v[l]},this);this._loadChildren()},setStore:function(m,v,p){a.deprecated(this.declaredClass+"::setStore(store, selectedValue, fetchArgs) is deprecated. Use set('query', fetchArgs.query), set('queryOptions', fetchArgs.queryOptions), set('store', store), or set('value', selectedValue) instead.",
"","2.0");this._deprecatedSetStore(m,v,p)},_deprecatedSetStore:function(m,v,p){var l=this.store;p=p||{};if(l!==m){for(var n;n=this._notifyConnections.pop();)n.remove();m.get||(e.mixin(m,{_oldAPI:!0,get:function(k){var r=new J;this.fetchItemByIdentity({identity:k,onItem:function(w){r.resolve(w)},onError:function(w){r.reject(w)}});return r.promise},query:function(k,r){var w=new J(function(){x.abort&&x.abort()});w.total=new J;var x=this.fetch(e.mixin({query:k,onBegin:function(D){w.total.resolve(D)},
onComplete:function(D){w.resolve(D)},onError:function(D){w.reject(D)}},r));return new u(w)}}),m.getFeatures()["dojo.data.api.Notification"]&&(this._notifyConnections=[f.after(m,"onNew",e.hitch(this,"_onNewItem"),!0),f.after(m,"onDelete",e.hitch(this,"_onDeleteItem"),!0),f.after(m,"onSet",e.hitch(this,"_onSetItem"),!0)]));this._set("store",m)}this.options&&this.options.length&&this.removeOption(this.options);this._queryRes&&this._queryRes.close&&this._queryRes.close();this._observeHandle&&this._observeHandle.remove&&
(this._observeHandle.remove(),this._observeHandle=null);p.query&&this._set("query",p.query);p.queryOptions&&this._set("queryOptions",p.queryOptions);m&&m.query&&(this._loadingStore=!0,this.onLoadDeferred=new J,this._queryRes=m.query(this.query,this.queryOptions),t(this._queryRes,e.hitch(this,function(k){if(this.sortByLabel&&!p.sort&&k.length)if(m.getValue)k.sort(c.createSortFunction([{attribute:m.getLabelAttributes(k[0])[0]}],m));else{var r=this.labelAttr;k.sort(function(w,x){return w[r]>x[r]?1:x[r]>
w[r]?-1:0})}p.onFetch&&(k=p.onFetch.call(this,k,p));S.forEach(k,function(w){this._addOptionForItem(w)},this);this._queryRes.observe&&(this._observeHandle=this._queryRes.observe(e.hitch(this,function(w,x,D){x==D?this._onSetItem(w):(-1!=x&&this._onDeleteItem(w),-1!=D&&this._onNewItem(w))}),!0));this._loadingStore=!1;this.set("value","_pendingValue"in this?this._pendingValue:v);delete this._pendingValue;this.loadChildrenOnOpen?this._pseudoLoadChildren(k):this._loadChildren();this.onLoadDeferred.resolve(!0);
this.onSetStore()}),e.hitch(this,function(k){this.onLoadDeferred.reject(k)})));return l},_setValueAttr:function(m,v){this._onChangeActive||(v=null);if(this._loadingStore)this._pendingValue=m;else if(null!=m){m=e.isArrayLike(m)?S.map(m,function(n){return e.isObject(n)?n:{value:n}}):e.isObject(m)?[m]:[{value:m}];m=S.filter(this.getOptions(m),function(n){return n&&n.value});var p=this.getOptions()||[];this.multiple||m[0]&&m[0].value||!p.length||(m[0]=p[0]);S.forEach(p,function(n){n.selected=S.some(m,
function(k){return k.value===n.value})});p=S.map(m,function(n){return n.value});if("undefined"!=typeof p&&"undefined"!=typeof p[0]){var l=S.map(m,function(n){return n.label});this._setDisplay(this.multiple?l:l[0]);this.inherited(arguments,[this.multiple?p:p[0],v]);this._updateSelection()}}},_getDisplayedValueAttr:function(){var m=S.map([].concat(this.get("selectedOptions")),function(v){return v&&"label"in v?v.label:v?v.value:null},this);return this.multiple?m:m[0]},_setDisplayedValueAttr:function(m){this.set("value",
this.getOptions("string"==typeof m?{label:m}:m))},_loadChildren:function(){this._loadingStore||(S.forEach(this._getChildren(),function(m){m.destroyRecursive()}),S.forEach(this.options,this._addOptionItem,this),this._updateSelection())},_updateSelection:function(){this.focusedChild=null;this._set("value",this._getValueFromOpts());var m=[].concat(this.value);if(m&&m[0]){var v=this;S.forEach(this._getChildren(),function(p){var l=S.some(m,function(n){return p.option&&n===p.option.value});l&&!v.multiple&&
(v.focusedChild=p);b.toggle(p.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),l);p.domNode.setAttribute("aria-selected",l?"true":"false")},this)}},_getValueFromOpts:function(){var m=this.getOptions()||[];if(!this.multiple&&m.length){var v=S.filter(m,function(p){return p.selected})[0];if(v&&v.value)return v.value;m[0].selected=!0;return m[0].value}return this.multiple?S.map(S.filter(m,function(p){return p.selected}),function(p){return p.value})||[]:""},_onNewItem:function(m,v){v&&v.parent||
this._addOptionForItem(m)},_onDeleteItem:function(m){this.removeOption({value:this.store.getIdentity(m)})},_onSetItem:function(m){this.updateOption(this._getOptionObjForItem(m))},_getOptionObjForItem:function(m){var v=this.store,p=this.labelAttr&&this.labelAttr in m?m[this.labelAttr]:v.getLabel(m);return{value:p?v.getIdentity(m):null,label:p,item:m}},_addOptionForItem:function(m){var v=this.store;v.isItemLoaded&&!v.isItemLoaded(m)?v.loadItem({item:m,onItem:function(p){this._addOptionForItem(p)},scope:this}):
(m=this._getOptionObjForItem(m),this.addOption(m))},constructor:function(m){this._oValue=(m||{}).value||null;this._notifyConnections=[]},buildRendering:function(){this.inherited(arguments);d.setSelectable(this.focusNode,!1)},_fillContent:function(){this.options||(this.options=this.srcNodeRef?q("\x3e *",this.srcNodeRef).map(function(m){return"separator"===m.getAttribute("type")?{value:"",label:"",selected:!1,disabled:!1}:{value:m.getAttribute("data-"+a._scopeName+"-value")||m.getAttribute("value"),
label:String(m.innerHTML),selected:m.getAttribute("selected")||!1,disabled:m.getAttribute("disabled")||!1}},this):[]);this.value?this.multiple&&"string"==typeof this.value&&this._set("value",this.value.split(",")):this._set("value",this._getValueFromOpts())},postCreate:function(){this.inherited(arguments);f.after(this,"onChange",e.hitch(this,"_updateSelection"));var m=this.store;m&&(m.getIdentity||m.getFeatures()["dojo.data.api.Identity"])&&(this.store=null,this._deprecatedSetStore(m,this._oValue,
{query:this.query,queryOptions:this.queryOptions}));this._storeInitialized=!0},startup:function(){this._loadChildren();this.inherited(arguments)},destroy:function(){for(var m;m=this._notifyConnections.pop();)m.remove();this._queryRes&&this._queryRes.close&&this._queryRes.close();this._observeHandle&&this._observeHandle.remove&&(this._observeHandle.remove(),this._observeHandle=null);this.inherited(arguments)},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return[]},
_getSelectedOptionsAttr:function(){return this.getOptions({selected:!0})},_pseudoLoadChildren:function(){},onSetStore:function(){}})})},"arcgisonline/map/core/sameSpatialReference":function(){define(["require","exports","tslib","../utils/contains","esri/lang"],function(S,J,f,c,h){Object.defineProperty(J,"__esModule",{value:!0});c=f.__importDefault(c);h=f.__importDefault(h);J.default=function(d,b){var a=[102113,102100,3857];return d&&b&&d.wkt===b.wkt&&(d.wkid===b.wkid||h.default.isDefined(d.latestWkid)&&
d.latestWkid===b.wkid||h.default.isDefined(b.latestWkid)&&d.wkid===b.latestWkid||h.default.isDefined(d.latestWkid)&&d.latestWkid===b.latestWkid)||d&&b&&d.wkid&&b.wkid&&(0,c.default)(a,d.wkid)&&(0,c.default)(a,b.wkid)?!0:!1}})},"arcgisonline/sharing/dijit/dialog/BrowseItemsDlg":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/window dojo/_base/event dojo/dom-class dojo/dom-style dojo/dom-attr dojo/string dojo/on dojo/aspect dojo/dom dojo/dom-construct dojo/mouse dojo/topic dojo/query dojo/parser dijit/registry dijit/TooltipDialog dijit/popup dojo/promise/all dojo/Deferred dgrid/Grid dgrid/extensions/Pagination dgrid/OnDemandGrid dgrid/Selection dgrid/selector dgrid/Keyboard dgrid/util/mouse dgrid/util/touch put-selector/put dojo/store/Observable dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin esri/arcgis/Portal esri/Evented esri/PluginTarget arcgisonline/sharing/util arcgisonline/sharing/geow/Account arcgisonline/esriGeowConfig ./_AppTemplateFiltersMixin dojo/i18n!arcgisonline/nls/arcgisonline ../_RefreshMixin ../_Empty dojo/NodeList-dom".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E,K,I,L,M,N,P,R,Y,ja,aa,da,ra,ca){var fa=S(null,{idProperty:"id",constructor:function(la){S.safeMixin(this,la)},get:function(la,ta){return M.PortalUtil.request(this.portalUrl+"content/items/"+la,ta).then(function(Q){return new M.PortalItem(J.mixin(Q,{portal:this.portal}))})},getIdentity:function(la){return la[this.idProperty]},query:function(la,ta){la=J.isObject(la)?la:{q:la};ta&&(la=J.mixin(la,{num:ta.count,start:(ta.start||0)+
1}),ta.sort&&ta.sort.length&&(ta=ta.sort[0],la=J.mixin(la,{sortField:encodeURIComponent("created"===ta.attribute?"uploaded":ta.attribute),sortOrder:ta.descending?"desc":"asc"})));ta=this.portal.queryItems(la,!0).then(function(Q){Q.results.total=Q.total;return Q.results});return M.PortalResult(ta)}});return S("arcgisonline.sharing.dijit.dialog.BrowseItemsDlg",[K,I,L,P],{templateString:'\x3cdiv\x3e\x3cdiv class\x3d"top-bar clearfix"\x3e\x3cdiv  class\x3d"left instructions"\x3e\x3cspan class\x3d"font-size-0 messageLeft hide" data-dojo-attach-point\x3d"messageNodeLeft"\x3e\x3c/span\x3e\x3ch2 class\x3d"font-size-0 trailer-0 inline-block messageRight"\x3e\x3cspan class\x3d"hide" data-dojo-attach-point\x3d"messageNodeRight"\x3e\x3c/span\x3e\x3ca data-dojo-attach-point\x3d"helpLink" class\x3d"icon-ui-question icon-ui-flush margin-left-half hide" title\x3d"${i18n.common.learnMoreConfigurableApps}" href\x3d"#" target\x3d"_blank"\x3e\x3c/a\x3e\x3c/h2\x3e\x3c/div\x3e\x3cdiv id\x3d"${id}_search"class\x3d"searchBar right"\x3e\x3cinput tabIndex\x3d"0" placeholder\x3d"${i18n.search.searchTitle}" aria-label \x3d"${i18n.search.searchTitle}" class\x3d"esriSearchBox dijitTextBox" type\x3d"search"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"gallery"\x3e\x3cdiv class\x3d"gallery-left  quiet-scroll"\x3e\x3cul class\x3d"filters"\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"templates gallery-right"\x3e\x3cp id\x3d"${id}_filterTitle" class\x3d"filter-title hide" data-dojo-attach-point\x3d"filterDescription"\x3e\x3c/p\x3e\x3cdiv id\x3d"${id}_grid"class\x3d"dgrid-autoheight quiet-scroll"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"loader-wrap"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv  data-dojo-attach-point\x3d"infoPanel" id\x3d"template-info-panel"\x3e\x3c/div\x3e\x3c/div\x3e',
galleryTemplate:'\x3cdiv style\x3d\'opacity:1;\' class\x3d\'grid-item gallery-view\' tabIndex\x3d"0" aria-label\x3d"${item.title}"\x3e\x3cdiv class\x3d\'grid-item-thumbnail-wrap\'\x3e${item:_formatThumbnail}\x3cp class\x3d"template-overlay" style\x3d"display:none;"\x3e${i18n.browseItemsDlg.selectDetails}\x3c/p\x3e\x3c/div\x3e${item:_formatItemTitle}\x3c/div\x3e',infoPanelTemplate:'\x3cdiv class\x3d"template-info-wrapper"\x3e\x3cdiv class\x3d"template-info-showing"\x3e\x3cdiv class\x3d"thumbnail"\x3e\x3cimg src\x3d"${item:_formatInfoPanelImage}"\x3e\x3c/div\x3e\x3ch4\x3e${item.title}\x3c/h4\x3e\x3cdiv class\x3d"template-info"\x3e\x3cp class\x3d"quiet-scroll"\x3e${item.snippet}\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-actions"\x3e\x3cbutton class\x3d"btn blue btn-main" id\x3d"on-next"\x3e${i18n.browseItemsDlg.configure}\x3c/button\x3e\x3cbutton class\x3d"btn btn-cancel" id\x3d"close-panel"\x3e${i18n.common.close}\x3c/button\x3e\x3c/div\x3e\x3cdiv\x3e',
baseClass:"esriBrowseItems",i18n:da,postCreate:function(){this.inherited(arguments);this._portalUser=(this._portal=ja.portal)&&(this._portal.user||this._portal.getPortalUser());Y.getSelf(J.hitch(this,function(la){this._canSearchPublic=la.canSearchPublic;this._currentFilter=J.mixin(this._currentFilter||{},{instantAppsBlocked:this.instantAppsBlocked,get:function(ta){return J.isArray(this[ta])&&1<this[ta].length?"("+this[ta].join(" OR ")+") ":this[ta]?this[ta]+" ":""},toString:function(){return{q:this.get("groups")+
this.get("tags")+this.get("persistentTypekeywords")+this.get("typekeywords")+this.get("types")+(this.query||"")+(this.search||"")+' -type:"Attachment"'+(this.instantAppsBlocked?' -typekeywords:"instantApp"':"")}}});la.canSearchPublic=!0;this._portal?this.itemQuery&&this._fetchData():(this._portal=new M.Portal({url:ja.restBaseUrl,self:la}),this._portal.on("load",J.hitch(this,function(){this.addPlugin(this.plugin).then(J.hitch(this,function(){}))})));p(".templates",this.domNode).addClass("fade");p(".dgrid-footer",
this.domNode).addClass("hide")}))},destroy:function(){this.inherited(arguments);this._grid&&this._grid.destroy();this._img_connect&&(this._img_connect.remove(),this._img_connect_error.remove());this._queryTimer&&clearTimeout(this._queryTimer);this._grid=this._portal=null},addPlugin:function(la){var ta=new x;la?this.inherited(arguments).then(J.hitch(this,function(Q){this.galleryTemplate=this.plugIn&&this.plugIn.galleryTemplate||this.galleryTemplate;(this.helpLinkUrl=this.plugIn&&this.plugIn.helpLinkUrl||
"")?(a.set(this.helpLink,"href",this.helpLinkUrl),d.remove(this.helpLink,"hide")):d.add(this.helpLink,"hide");this._fetchData().then(function(){ta.resolve(Q)})})):ta.resolve(!0);return ta},_setItemQueryAttr:function(la){this.itemQuery=la},_setPluginAttr:function(la){this.plugin=la},_setMessageAttr:function(la){this.set("messageRight",la)},_setMessageRightAttr:function(la){a.set(this.messageNodeRight,"innerHTML",la);d.remove(this.messageNodeRight,"hide")},_setMessageLeftAttr:function(la){a.set(this.messageNodeLeft,
"innerHTML",la);d.remove(this.messageNodeLeft,"hide")},_setDisabledAttr:function(la){var ta=n.findWidgets(this.domNode).concat(n.findWidgets(this._content));f.forEach(ta,function(Q){Q.set("disabled",la)});d[la?"add":"remove"](this._interval.domNode,"dijitTextBoxDisabled")},_setSortAttr:function(la){this.sortAttribute=la},_setSortDescendingAttr:function(la){this.sortDescending=la},_getSelectionAttr:function(){var la=this._grid.selection,ta;for(ta in la)break;return ta&&this._grid.row(ta).data},_getInfoPanelTemplateAttr:function(){return this.plugIn&&
this.plugIn.infoPanelTemplate||this.infoPanelTemplate},_getGalleryTemplateAttr:function(){return this.plugIn&&this.plugIn.galleryTemplate||this.galleryTemplate},_validate:function(){return!!this.get("selection")},_clearQueryTimeout:function(){clearTimeout(this._queryTimer);this._queryTimer=null},_clearClosePanelTimeout:function(){clearTimeout(this._panelClosing);this._panelClosing=null;f.forEach(this._panelClickHandles,"item.remove();");g.empty("template-info-panel")},_createGrid:function(){var la=
S([D,G,A,z,ra]),ta=new E(new fa({portal:this._portal})),Q=this._currentFilter,T=J.hitch(this,function(O){O.snippet=O.snippet||"";O.title=O.title||"";var Z=H("div");O=e.substitute(this.get("galleryTemplate"),{item:O,i18n:da},null,this);g.place(O,Z);return Z});this._grid=new la({store:ta,query:Q.toString(),selectionMode:"single",pagingLinks:2,rowsPerPage:this.plugIn&&this.plugIn.rowsPerPage||8,noDataMessage:e.substitute(ca,{message:da.emptyStates.noContentAvailable,width:256}),showLoadingMessage:!1,
renderRow:T,sort:[{attribute:this.sortAttribute||"title",descending:this.sortDescending||!1}]},this.id+"_grid");this._grid.startup();this.own(q(this.domNode,"click",J.hitch(this,function(O){u.byId("close-panel")&&u.byId("close-panel").click()})),this._grid.addKeyHandler(13,J.hitch(this,function(O){O=O.target;this._grid.select(O);O.click()})),this._grid.addKeyHandler(32,J.hitch(this,function(O){O=O.target;this._grid.select(O);O.click()})),this._grid.on(B.enterRow,J.hitch(this,function(O){!1===d.contains(this.domNode,
"showing")&&this._showOverlay(!0,O)})),this._grid.on(B.leaveRow,J.hitch(this,function(O){this._showOverlay(!1,O)})),this._grid.on(".dgrid-row:click",J.hitch(this,function(O){if(!1===d.contains(this.domNode,"showing")){O.preventDefault();h.stop(O);this._clearClosePanelTimeout();var Z=this.get("selection");this._showOverlay(!1,O);g.place(e.substitute(this.get("infoPanelTemplate"),{item:Z,i18n:da,previewButtonWidth:this._previewButtonWidth(Z),hideDownload:this._hideDownload(Z)},function(na){return esri.isDefined(na)?
na:""},this),this.infoPanel);d.add(this.domNode,"showing");v.publish("/esri/browseitems/showInfoTemplate",!0);setTimeout(J.hitch(this,function(){p("#template-info-panel *",this.domNode).forEach(function(ia){ia.tabIndex=0});var na=this.domNode.querySelector("#create-app");na&&na.focus()}),500);this._panelClickHandles=[p(".template-info-showing .thumbnail img",this.domNode).on("error",J.hitch(this,function(na){a.set(na.target,"src",Z.thumbnailUrl)})),p(".panel-actions .btn").on("click",J.hitch(this,
function(na){na.preventDefault();h.stop(na);"close-panel"===na.target.id?(d.remove(this.domNode,"showing"),p("#template-info-panel *",this.domNode).forEach(function(ia){ia.tabIndex=-1}),v.publish("/esri/browseitems/showInfoTemplate",!1),this._panelClosing=setTimeout(J.hitch(this,function(){f.forEach(void 0,"item.remove();")},250))):v.publish("/esri/browseitems/close",na.target.id,this.get("selection"))})),p("#template-info-panel").on("click",J.hitch(this,function(na){na.preventDefault();h.stop(na)}))]}})),
this._grid.on("dgrid-refresh-complete",J.hitch(this,function(O){p(".templates",this.domNode).removeClass("fade");p("#loader-wrap",this.domNode).addClass("hide");p(".dgrid-footer",this.domNode)[this._grid._total<=this._grid.rowsPerPage?"addClass":"removeClass"]("hide")})),this._grid.on("refresh",J.hitch(this,function(){this._img_connect&&(this._img_connect.remove(),this._img_connect_error.remove(),this._img_connect_error=this._img_connect=null);this._img_connect=p(".grid-item-thumb",this._grid.domNode).on("load",
J.hitch(this,function(O){(O=this._grid.row(O))&&O.element&&p(".grid-item",O.element).addClass("fadeIn").style("opacity","1")}));this._img_connect_error=p(".grid-item-thumb",this._grid.domNode).on("error",J.hitch(this,function(O){a.set(O.target,"src",R.getStaticImagesUrl()+"/desktopapp.png")}))})),q(u.byId(this.id+"_search"),"keyup, input",J.hitch(this,function(O){O.preventDefault();this._clearQueryTimeout();this._queryTimer=setTimeout(J.hitch(this,function(){this._currentFilter.search=a.get(O.target,
"value");this._fetchItems(this._currentFilter).then(J.hitch(this,function(){this._clearQueryTimeout()}))}),this.searchKeypressDelay||450)})),q(u.byId(this.id+"_search"),"search",J.hitch(this,function(O){this._queryTimer||(O.preventDefault(),this._currentFilter.search=a.get(O.target,"value"),this._fetchItems(this._currentFilter))})))},_createFilters:function(){if(this.plugIn&&this.plugIn.filters){var la=this.plugIn.filters,ta=this.plugIn.filterStrings,Q=p(".filters",this.domNode)[0];for(O in la){var T=
"";"instant"===O?T=this.instantAppsBlocked?"hide":"active":"all"===O&&(T=this.instantAppsBlocked?"active":"");g.create("li",{"class":T,innerHTML:"\x3ca id\x3d'"+O+"'  href\x3d'#'\x3e"+ta[O].title+"\x3c/a\x3e"},Q)}var O=J.mixin({},(this.instantAppsBlocked?la.all:la.instant)||{});this._currentFilter.tags=f.map(O.tags||[],function(Z){return'tags:"'+Z+'"'});this._currentFilter.typekeywords=[].concat(f.map(O.typekeywords||[],function(Z){return'typekeywords:"'+Z+'"'}));this.plugIn.filters.instant&&(a.set(this.filterDescription,
"innerHTML",da.appTemplateFilters.instant.description),this.filterDescription.classList.remove("hide"));this.own(q(Q,"li a:click",J.hitch(this,function(Z){Z.preventDefault();var na=Z.target;p(".active",Q).removeClass("active");d.add(na.parentNode,"active");p(".templates",this.domNode).addClass("fade");setTimeout(J.hitch(this,function(){d["all"===na.id?"add":"remove"](this.filterDescription,"hide");var ia=this._portal.isPortal&&ta[na.id].descriptionPortal||ta[na.id].description||"";"narrate"===na.id&&
this._portal.isPortal&&(ia=ja.baseUrl.replace("/home/","/apps/storymaps/"),ia=e.substitute(ta[na.id].descriptionPortal,{linkStart:'\x3ca href\x3d"'+ia+'" target\x3d"_blank"\x3e',linkEnd:"\x3c/a\x3e"}));a.set(this.filterDescription,"innerHTML",ia)}),225);Z=J.mixin({},la[na.id]||{});this._currentFilter.tags=f.map(Z.tags||[],function(ia){return'tags:"'+ia+'"'});this._currentFilter.typekeywords=[].concat(f.map(Z.typekeywords||[],function(ia){return'typekeywords:"'+ia+'"'}));this._fetchItems(this._currentFilter)})));
d.add(this.domNode,"filters")}else d.add(this.domNode,"nofilters"+(this.plugIn&&this.plugIn.extraClasses?" "+this.plugIn.extraClasses.join(" "):""))},_showOverlay:function(la,ta){(ta=this._grid.row(ta))&&p(".template-overlay",ta.element).style("display",la?"":"none")},_fetchData:function(){if(this._portal)return this._user=this._portalUser||this._portal&&this._portal.getPortalUser(),this.plugIn&&this.plugIn.fetchData?this.plugIn.fetchData():this._fetchItems(this.itemQuery);var la=new x;la.resolve(!1);
return la},_fetchItems:function(la,ta){var Q={sort:[{attribute:this.sortAttribute||"title",descending:this.sortDescending||!1}]},T=new x;p(".templates",this.domNode).addClass("fade");p(".dgrid-footer",this.domNode).addClass("hide");p("#loader-wrap",this.domNode).removeClass("hide");setTimeout(J.hitch(this,function(){this._currentFilter=J.mixin(this._currentFilter,la);this._grid?this._grid.set("query",this._currentFilter.toString(),Q):(this._createFilters(),this._createGrid());T.resolve(this._grid)}),
60);return T},_formatThumbnail:function(la){var ta=la.thumbnailUrl||R.getStaticImagesUrl()+"/desktopapp.png";la.thumbnailUrl=ta;return"\x3cimg class\x3d'grid-item-thumb' width\x3d'187px' height\x3d'125px' alt\x3d'' src\x3d'"+ta+"'\x3e"},_formatInfoPanelImage:function(la){var ta=la.screenshots&&la.screenshots.length?la.screenshots[0]:null;return ta?la.itemUrl+"/info/"+ta:la.thumbnailUrl},_formatItemTitle:function(la){return"\x3ch3 class\x3d'font-size-0 trailer-0'\x3e"+(la.title||la.name||"\x3cNo Title\x3e")+
"\x3c/h3\x3e"},_hideDownload:function(la){var ta=la.typeKeywords&&-1<la.typeKeywords.indexOf("indoors"),Q=la.typeKeywords&&-1<la.typeKeywords.indexOf("instantApp"),T=la.typeKeywords&&-1<la.typeKeywords.indexOf("story"),O=la.typeKeywords&&-1<la.typeKeywords.indexOf("Configurable")&&-1<la.typeKeywords.indexOf("createAppWithoutMap");la="/apps/instant/filtergallery/index.html"===la.url&&-1<window.location.pathname.indexOf("group.html");var Z=ja.self.isPortal;return ta||Q||la||Z&&O&&!Q&&!ta&&!T?"hide":
""},_previewButtonWidth:function(la){return"hide"===this._hideDownload(la)?"btn-wide":""}})})},"arcgisonline/sharing/dijit/dialog/_AppTemplateFiltersMixin":function(){define(["dojo/_base/declare"],function(){return{rootNodes:{app:{instant:{typekeywords:["instantApp"]},all:{},collect:{typekeywords:["collect"]},compare:{typekeywords:["compare"]},"3dscene":{typekeywords:["3Dscene","twoDthreeD"]},analyze:{typekeywords:["summarize"]},imagery:{typekeywords:["interpret"]},present:{typekeywords:["gallery"]},
local:{typekeywords:["local"]},route:{typekeywords:["route"]},showcase:{typekeywords:["showcase"]}}}}})},"arcgisonline/map/utils/previewInTemplate":function(){define("require exports tslib ../../sharing/util esri/request dojo/io-query".split(" "),function(S,J,f,c,h,d){Object.defineProperty(J,"__esModule",{value:!0});c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);J.default=function(b,a){(0,h.default)({url:b.itemDataUrl,callbackParamName:"callback"}).promise.always(function(){var e=
c.default.isPortal(),q=a.url,t=q.indexOf("?"),u=-1<t?q.substring(0,t):q;q=-1<t?d.default.queryToObject(q.substring(t+1)):{};t="Web Scene"===b.type?"webscene":"webmap";if(e){e=a.url;u=c.default.parseUrl(e);var g="https:"===window.location.protocol;!1===RegExp("^(?:[a-z]+:)?//","i").test(e)&&(e="".concat(window.location.protocol,"//").concat(window.location.host).concat(c.default.getHomeAppContext()).concat(u.path));e=g?c.default.getSecureUrl(e):c.default.getHttpUrl(e)}else e=u;q[t]=b.id;window.open("".concat(e.replace("/hosted/",
"/apps/"),"?").concat(d.default.objectToQuery(q)))})}})},"arcgisonline/map/utils/openMap":function(){define(["require","exports","tslib","./getMapCookie","../../sharing/dijit/dialog/OpenMapDlg"],function(S,J,f,c,h){Object.defineProperty(J,"__esModule",{value:!0});c=f.__importDefault(c);h=f.__importDefault(h);J.default=function(d,b,a){var e="./webmap/viewer.html?webmap\x3d".concat(d),q="signin.html?returnUrl\x3d".concat(encodeURIComponent(e));b="boolean"===typeof b?b:!1;(0,c.default)().then(function(t){!0===
(null===t||void 0===t?void 0:t.c)?h.default.prototype.statics.getInstance().show(b?q:e,t):document.location.href=b?q:e})}})},"arcgisonline/sharing/dijit/dialog/OpenMapDlg":function(){define(["dojo","dijit","dojox","dojo/require!dijit/Dialog,arcgisonline/sharing/dijit/dialog/GeneralDlg,dijit/_Widget,dijit/_Templated"],function(S,J,f){S.provide("arcgisonline.sharing.dijit.dialog.OpenMapDlg");S.require("dijit.Dialog");S.require("arcgisonline.sharing.dijit.dialog.GeneralDlg");S.require("dijit._Widget");
S.require("dijit._Templated");S.declare("arcgisonline.sharing.dijit.dialog.OpenMapDlg",[J._Widget,J._Templated],{widgetsInTemplate:!0,templateString:'\x3cdiv class\x3d"widgetContent" \x3e\r\n  \x3cdiv dojotype\x3d"dijit.Dialog" dojoAttachPoint\x3d"_dialog" id\x3d"open-map-dialog" title\x3d"${i18n.title}"\x3e\r\n    \x3cdiv id\x3d"open-map-dialog-content"\x3e\r\n    \x3cdiv style\x3d"margin-bottom: 10px;"\x3e${i18n.unsavedChangesMsg}\x3c/div\x3e\r\n      \x3ctable class\x3d"table-layout" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n        \x3ctbody\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd valign\x3d"top"\x3e\x3cdiv\x3e${i18n.titleLabel}\x3c/div\x3e\x3c/td\x3e\r\n            \x3ctd width\x3d"5"\x3e\x26nbsp;\x3c/td\x3e\r\n            \x3ctd\x3e\x3cdiv id\x3d"open-map-dialog-title"\x3e\x3c/div\x3e\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr id\x3d"open-map-dialog-layersRow"\x3e\r\n            \x3ctd valign\x3d"top"\x3e\x3cdiv id\x3d"open-map-dialog-layersLabel"\x3e\x3c/div\x3e\x3c/td\x3e\r\n            \x3ctd width\x3d"5"\x3e\x26nbsp;\x3c/td\x3e\r\n            \x3ctd\x3e\x3cdiv id\x3d"open-map-dialog-layers"\x3e\x3c/div\x3e\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3ctr id\x3d"open-map-dialog-tablesRow"\x3e\r\n            \x3ctd valign\x3d"top"\x3e\x3cdiv id\x3d"open-map-dialog-tablesLabel"\x3e\x3c/div\x3e\x3c/td\x3e\r\n            \x3ctd width\x3d"5"\x3e\x26nbsp;\x3c/td\x3e\r\n            \x3ctd\x3e\x3cdiv id\x3d"open-map-dialog-tables"\x3e\x3c/div\x3e\x3c/td\x3e\r\n          \x3c/tr\x3e\r\n        \x3c/tbody\x3e\r\n      \x3c/table\x3e\r\n      \x3cdiv style\x3d"margin-top: 10px;"\x3e${i18n.openAnotherMapQtn}\x3c/div\x3e\r\n      \x3cbr /\x3e\r\n      \x3cdiv style\x3d"float: right;" class\x3d"clearfix"\x3e\r\n         \x3cbutton id\x3d"button_open-map-no" class\x3d"action-bar-btn jevent cancel right btn-two" dojoType\x3d"dijit.form.Button"\x3e${i18n.notOpen}\x3c/button\x3e\r\n         \x3cbutton id\x3d"button_open-map-yes" class\x3d"padding-right-half jevent primary right" dojoType\x3d"dijit.form.Button"\x3e${i18n.yesOpen}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"clear:both;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
handler:null,newMapUrl:"",i18n:null,statics:{_instance:null,getInstance:function(){null==this._instance&&(this._instance=new arcgisonline.sharing.dijit.dialog.OpenMapDlg);return this._instance}},postMixInProperties:function(){this.inherited(arguments);this.i18n=S.i18n.getLocalization("arcgisonline","arcgisonline").common;S.mixin(this.i18n,S.i18n.getLocalization("arcgisonline","arcgisonline").openMapDlg)},postCreate:function(){this.loadConnections()},show:function(c,h,d,b,a){this.newMapUrl=c;c=document.getElementById("webmap-title-text")&&
document.getElementById("webmap-title-text").innerHTML;S.byId("open-map-dialog-title").innerHTML=f.html.entities.encode(c||a||h&&h.t||this.i18n.untitled);var e=[];h?S.forEach(h.operationalLayers,function(g){e.push(f.html.entities.encode(g.title))}):d&&S.forEach(d,function(g){"user"!==g.type&&"mapNotes"!==g.type||e.push(f.html.entities.encode(g.title))});if(0===e.length)S.style(S.byId("open-map-dialog-layersRow"),"display","none");else{if(1===e.length)S.byId("open-map-dialog-layersLabel").innerHTML=
this.i18n.layerLabel,S.byId("open-map-dialog-layers").innerHTML=e[0];else{S.byId("open-map-dialog-layersLabel").innerHTML=this.i18n.layersLabel;var q="",t="";S.forEach(e,function(g){q+=t+g;t=", "});S.byId("open-map-dialog-layers").innerHTML=q}S.style(S.byId("open-map-dialog-layersRow"),"display","")}var u=[];h?S.forEach(h.tables,function(g){u.push(f.html.entities.encode(g.title))}):b&&S.forEach(b,function(g){u.push(f.html.entities.encode(g.title))});0===u.length?S.style(S.byId("open-map-dialog-tablesRow"),
"display","none"):(1===u.length?(S.byId("open-map-dialog-tablesLabel").innerHTML=this.i18n.tableLabel,S.byId("open-map-dialog-tables").innerHTML=u[0]):(S.byId("open-map-dialog-tablesLabel").innerHTML=this.i18n.tablesLabel,t=q="",S.forEach(u,function(g){q+=t+g;t=", "}),S.byId("open-map-dialog-tables").innerHTML=q),S.style(S.byId("open-map-dialog-tablesRow"),"display",""));J.byId("open-map-dialog").show()},loadConnections:function(){S.query(".jevent").connect("onclick",function(c){c.preventDefault()});
S.query("#button_open-map-no").connect("onclick",function(){J.byId("open-map-dialog").hide()});S.query("#button_open-map-yes").connect("onclick",S.hitch(this,"submitRequest"))},submitRequest:function(c){document.location=this.newMapUrl},hide:function(){J.byId("open-map-dialog").hide()}})})},"arcgisonline/sharing/dijit/dialog/PluginConfigurableAppsViewer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/promise/all dojo/dom-class dojo/query dojo/Deferred ./_AppTemplateFiltersMixin arcgisonline/sharing/util dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),
function(S,J,f,c,h,d,b,a,e,q){var t=S("arcgisonline.sharing.dijit.dialog.PluginConfigurableAppsViewer",null,{infoPanelTemplate:'\x3cdiv\x3e\x3cdiv class\x3d"template-info-showing"\x3e\x3cdiv class\x3d"thumbnail"\x3e\x3cimg src\x3d"${item:_formatInfoPanelImage}"\x3e\x3c/div\x3e\x3ch4\x3e${item.title}\x3c/h4\x3e\x3cdiv class\x3d"template-info"\x3e\x3cp class\x3d"quiet-scroll"\x3e${item.snippet}\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-actions"\x3e\x3cbutton class\x3d"btn blue btn-main" id\x3d"create-app"\x3e${i18n.items.createApp}\x3c/button\x3e\x3cbutton class\x3d"btn btn-secondary ${previewButtonWidth}" id\x3d"preview-app"\x3e${i18n.templatesGridWidget.preview}\x3c/button\x3e\x3cbutton class\x3d"btn btn-secondary ${hideDownload}" id\x3d"download-app"\x3e${i18n.templatesGridWidget.download}\x3c/button\x3e\x3cbutton class\x3d"btn btn-cancel" id\x3d"close-panel"\x3e${i18n.common.close}\x3c/button\x3e\x3c/div\x3e\x3cdiv\x3e',
customGroupInfoPanelTemplate:'\x3cdiv\x3e\x3cdiv class\x3d"template-info-showing"\x3e\x3cdiv class\x3d"thumbnail"\x3e\x3cimg src\x3d"${item:_formatInfoPanelImage}"\x3e\x3c/div\x3e\x3ch4\x3e${item.title}\x3c/h4\x3e\x3cdiv class\x3d"template-info"\x3e\x3cp class\x3d"quiet-scroll"\x3e${item.snippet}\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"panel-actions"\x3e\x3cbutton class\x3d"btn blue btn-main" id\x3d"create-app"\x3e${i18n.items.createApp}\x3c/button\x3e\x3cbutton class\x3d"btn btn-secondary btn-wide" id\x3d"preview-app"\x3e${i18n.templatesGridWidget.preview}\x3c/button\x3e\x3cbutton class\x3d"btn btn-cancel" id\x3d"close-panel"\x3e${i18n.common.close}\x3c/button\x3e\x3c/div\x3e\x3cdiv\x3e',
filters:J.mixin({},a.rootNodes.app),filterStrings:q.appTemplateFilters,rowsPerPage:100,constructor:function(u){J.mixin(this,u);this.helpLinkUrl=esriGeowConfig.self&&esriGeowConfig.self.isPortal?esriGeowConfig.self?esriGeowConfig.self.helpBase+esriGeowConfig.self.helpMap.m["120001018"]:"":esriGeowConfig.self?esriGeowConfig.self.helpBase+esriGeowConfig.self.helpMap.m["120001055"]:"";delete this.filters.present;delete this.filters["3dscene"]},fetchData:function(){var u=[];this.parent._currentFilter.types=
['type:"Web Mapping Application"'];this._portal=this.parent._portal;this._user=this._portal.getPortalUser();return this.checkIndoorsCapabilities(this._portal).then(function(g){this.capabilities=g;return this._fetchGroups().then(function(m){f.forEach(m||[],function(v){v&&v.id&&u.push('group:"'+v.id+'"')});return this._fetchGroupItems(u)}.bind(this))}.bind(this))},_fetchGroups:function(){var u=this._portal.templatesGroupQuery||null;return u&&u.split("id:")[1]?this._fetchOrgConfigurableApps():this._fetchEsriConfigurableApps()},
_fetchGroup:function(u,g){this._groups=this._groups||[];return this._groups[u]||this._portal.queryGroups(g,!0).then(J.hitch(this,function(m){m=m.total&&m.results&&m.results[0]||null;return(this._groups[u]=m)||{}}))},_fetchGroupItems:function(u){return this.parent._fetchItems({groups:u})},_updateIndoorsFilters:function(){var u=this.capabilities.indoors,g=this.capabilities.indoorsmaps,m=this.capabilities.indoorsspaces;u||m||g||this.parent._currentFilter.persistentTypekeywords.push('-typekeywords:"indoors"');
g||u||this.parent._currentFilter.persistentTypekeywords.push('-title:"Indoor Viewer"');m||u||this.parent._currentFilter.persistentTypekeywords.push('-title:"Indoor Space Planner"')},_fetchEsriConfigurableApps:function(){var u=(this._user&&this._user.culture||this._portal&&this._portal.culture||dojoConfig.locale||"en").split("-")[0].toLowerCase(),g={q:'title:"Web Application Templates" AND owner:"esri_'+({id:"ind",uk:"ukr"}[u]||u)+'"'};this.parent._currentFilter.persistentTypekeywords=['-typekeywords:"3Dscene"'];
this._updateIndoorsFilters();return c([this._fetchGroup("esriGallery_"+u,g)]).then(J.hitch(this,function(m){return m||[]}))},_fetchOrgConfigurableApps:function(){var u={q:this._portal.templatesGroupQuery||null};this.filters=null;this.rowsPerPage=8;this.extraClasses=["wide"];this.infoPanelTemplate=this.customGroupInfoPanelTemplate;this.parent._currentFilter.persistentTypekeywords=['-typekeywords:"Web AppBuilder"'];this._updateIndoorsFilters();return c([this._fetchGroup("customGallery",u)]).then(J.hitch(this,
function(g){this.parent.sortDescending=g[0].sortOrder&&"desc"===g[0].sortOrder||!1;this.parent.sortAttribute=g[0].sortField||"asc";return g&&g.length?[g[0]]:[]}))},hasIndoors:function(u){return this.fetchCapabilities(u).then(function(g){return g.some(function(m){return"indoors"===m.id})})},checkIndoorsCapabilities:function(u){return this.fetchCapabilities(u).then(function(g){return g.reduce(function(m,v){m[v.id]=!0;return m},{})})},fetchCapabilities:function(u){var g=new b;e.request({url:esriGeowConfig.restBaseUrl+
"portals/self/subscriptionInfo"}).then(function(m){g.resolve(m&&m.orgCapabilities||[])});return g}});J.mixin(t,{add:function(u,g){u.plugIn||(g=g||{},g.parent=u,u.plugIn=new t(g))},remove:function(u){u.plugIn&&(u.plugIn.destroy(),delete u.plugIn)}});return t})},"arcgisonline/sharing/dijit/dialog/Plugin3DConfigurableAppsViewer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/promise/all dojo/dom-class dojo/query ./_AppTemplateFiltersMixin ./PluginConfigurableAppsViewer dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),
function(S,J,f,c,h,d,b,a,e){var q=S("arcgisonline.sharing.dijit.dialog.Plugin3DConfigurableAppsViewer",[a],{constructor:function(t){this.inherited(arguments);this.filters=null},_fetchEsriConfigurableApps:function(){var t=(this._user&&this._user.culture||this._portal&&this._portal.culture||dojoConfig.locale||"en").split("-")[0].toLowerCase(),u={q:'title:"Web Application Templates" AND owner:"esri_'+({id:"ind",uk:"ukr"}[t]||t)+'"'};this.parent._currentFilter.persistentTypekeywords=['typekeywords:"3Dscene"',
'typekeywords: "twoDthreeD"'];return c([this._fetchGroup("esriGallery_"+t,u)]).then(J.hitch(this,function(g){return g||[]}))},_fetchOrgConfigurableApps:function(){var t={q:this._portal.templatesGroupQuery||null};this.filters=null;this.rowsPerPage=8;this.extraClasses=["wide"];this.infoPanelTemplate=this.customGroupInfoPanelTemplate;this.parent._currentFilter.persistentTypekeywords=['typekeywords:"3Dscene"','-typekeywords:"Web AppBuilder"','typekeywords:"WAB3D"','typekeywords: "twoDthreeD"'];return c([this._fetchGroup("customGallery",
t)]).then(J.hitch(this,function(u){this.parent.sortDescending=u[0].sortOrder&&"desc"===u[0].sortOrder||!1;this.parent.sortAttribute=u[0].sortField||"asc";return u&&u.length?[u[0]]:[]}))}});J.mixin(q,{add:function(t,u){t.plugIn||(u=u||{},u.parent=t,t.plugIn=new q(u))},remove:function(t){t.plugIn&&(t.plugIn.destroy(),delete t.plugIn)}});return q})},"arcgisonline/sharing/dijit/dialog/ExportDlg":function(){define("require exports tslib ../../../esriGeowConfig ../../../pages/pageUtil ../../../pages/serviceUtil ../../../pages/utils/categories ../../../pages/utils/dom ../../util ../SaveItem ../../../tsutils/declareDecorator dijit/a11yclick dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Deferred dojo/promise/all dojo/string dojo/on dojo/topic esri/config esri/lang esri/Evented dojo/i18n!../../../nls/arcgisonline dojo/text!./templates/ExportDlg.html ../ComboBox".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);D=f.__importDefault(D);
G=f.__importDefault(G);F=f.__importDefault(F);var A;(function(y){y.ShapeFile="Shapefile";y.CSV="CSV";y.FileGDB="File Geodatabase";y.GeoJson="GeoJson";y.FeatureCollection="Feature Collection";y.KML="KML";y.Excel="Excel";y.TilePackage="Tile Package";y.GeoPackage="GeoPackage"})(A||(A={}));return function(){function y(){this.declaredClass="arcgisonline.sharing.dijit.dialog.ExportDlg";this.widgetsInTemplate=!0;this.templateString=F.default;this.layerId=-1;this.init=!1;this.checkStatusInterval=null;this.checkingStatus=
!1;this.statusCheckIntervalTime=4E3;this._setMessageAttr={node:"_message",type:"innerHTML"};this.typeLookup={shapefileType:A.ShapeFile,csvType:A.CSV,fileGDB:A.FileGDB,geoJson:A.GeoJson,featureCollection:A.FeatureCollection,kmlType:A.KML,excelType:A.Excel,CSV:"CSV Collection",KML:"KML Collection",Excel:"Microsoft Excel",tilePackage:A.TilePackage};this.requiredBorder="1px dotted orangered";this.normalBorder="1px solid #bbb"}y.prototype.onDone=function(z){};y.prototype.postMixInProperties=function(){this.inherited(arguments);
this.i18n=f.__assign(f.__assign(f.__assign({},G.default.common),G.default.exportDlg),{defaultError:G.default.errorWidget.defaultError,generalize:G.default.addLayerFromFileDlg.generalize,keepOrig:G.default.addLayerFromFileDlg.keepOrig,notEnoughCreditsTitle:G.default.publishTileServiceDlg.notEnoughCreditsTitle,itemProperties:G.default.itemProperties});this._webMercatorValues={3857:1,102113:1,102100:1,900913:1}};y.prototype.postCreate=function(){this.inherited(arguments);this.init||(this.init=!0,this.saveItem=
new q.default({},this.saveItemForm))};y.prototype.startup=function(){this.inherited(arguments);w.default.defaults.io.proxyUrl=c.default.proxyServer;c.default.proxyUrl&&(w.default.defaults.io.proxyUrl=c.default.proxyUrl)};y.prototype.destroy=function(){this._onSaveItemValidateHandle&&(this._onSaveItemValidateHandle.remove(),this._onSaveItemValidateHandle=null);this.exportDialog.destroyRecursive();this._pendingCanceller=this.exportDialog=null;this.inherited(arguments)};y.prototype.show=function(z,B,
C,H){var E=this;this.showDlg(z,B,C);H&&setTimeout(function(){E._message.style.maxWidth=E.saveItem.domNode.clientWidth+"px";E.setWait(!0);H.waitForCredits.then(function(K){E._pendingCanceller=null;if(K.success)return E.set("message",K.message),E.unsetWait();E.displayError(K,E.i18n.notEnoughCreditsTitle)},function(K){E._pendingCanceller=null;E.displayError(K)});E._pendingCanceller=H.canceller},0)};y.prototype.showShapefile=function(z,B){this.showDlg(z,B,A.ShapeFile)};y.prototype.showCSV=function(z,
B){this.showDlg(z,B,A.CSV)};y.prototype.showFileGDB=function(z,B){this.showDlg(z,B,A.FileGDB)};y.prototype.showGeoJson=function(z,B){this.showDlg(z,B,A.GeoJson)};y.prototype.showFeatureCollection=function(z,B){this.showDlg(z,B,A.FeatureCollection)};y.prototype.showDlg=function(z,B,C){this.clear();this.item=z;this.setDialogTitle(C);this.setLayerDetails(B);this.checkForStaleData(z,B);this.initTags();this.initCategories();this.exportDialog.show();z=this.onCancel.bind(this);this.own((0,u.default)(this.exportDialog.closeButtonNode,
z),(0,k.default)(this.cancelBtn,"click",z),(0,k.default)(this.exportBtn,"click",this.onExport.bind(this)));this.exportDialog.closeButtonNode.tabIndex=0};y.prototype.checkForStaleData=function(z,B){var C,H,E,K;(null===(C=z.layers)||void 0===C?0:C.length)&&"Feature Service"===z.type&&-1<z.typeKeywords.indexOf("Hosted Service")&&(B&&!B.length?K=null===(H=B.editingInfo)||void 0===H?void 0:H.lastEditDate:z.layers.forEach(function(I){var L;(E=null===(L=I.editingInfo)||void 0===L?void 0:L.lastEditDate)&&
(!K||K<E)&&(K=E)}))};y.prototype.initTags=function(){var z=this;this.saveItem.loadTags().then(function(){z.saveItem.set("tags",[])})};y.prototype.initCategories=function(){this.saveItem.loadCategories(this.item.categories)};y.prototype.setDialogTitle=function(z){this.exportType=z;z=this.i18n.itemProperties;var B=this.i18n.exportDialogTitle;A.ShapeFile===this.exportType?B=z.exportToShapefile:A.CSV===this.exportType?B=z.exportToCSVFile:A.FileGDB===this.exportType?B=z.exportToFileGDB:A.GeoJson===this.exportType?
B=z.exportToGeoJson:A.FeatureCollection===this.exportType?B=z.exportToFeatureCollection:A.KML===this.exportType?B=z.exportToKML:A.Excel===this.exportType?B=z.exportToExcel:A.TilePackage===this.exportType?B=z.exportToTilePackage:A.GeoPackage===this.exportType&&(B=z.exportToGeoPackage);this.exportDialog.set("title",B)};y.prototype.setLayerDetails=function(z){var B,C,H,E;this._isTableLayer=this._isWebMercator=!1;z&&x.default.isDefined(z.id)?(this.layerId=z.id,this._layers=[z],this._isWebMercator=(null===
(C=null===(B=z.extent)||void 0===B?void 0:B.spatialReference)||void 0===C?void 0:C.wkid)in this._webMercatorValues,this._extent=z.extent):z&&z.length&&(this._layers=z,this._isWebMercator=(null===(E=null===(H=z[0].extent)||void 0===H?void 0:H.spatialReference)||void 0===E?void 0:E.wkid)in this._webMercatorValues,this._isTableLayer=z.every(function(K){return"Table"===K.type}),this._extent=z[0].extent);this.saveItem.set("title",this.item.title);this._isWebMercator&&!this._isTableLayer&&this.exportType===
A.FeatureCollection&&(this.featureCollectionDiv.classList.remove("hide"),this.generalizeChk.checked=!0)};y.prototype.clear=function(){this.exportDialog.set("title",this.i18n.exportDialogTitle);this.item=null;this.layerId=-1;this.checkStatusInterval=this.exportResponse=this.exportType=null;this.checkingStatus=!1;this.saveItem.set("title","");this.saveItem.set("tags",[]);this.saveItem.set("summary","");this.saveItem.set("requires",["title"]);this.exportingLabel.style.visibility="hidden";this.exportBtn.disabled=
!0;this._onSaveItemValidateHandle=r.default.subscribe("onSaveItemValidate",this.validate.bind(this));this.saveItem.hideRow("folder");a.default.forEachNode(this.saveItem.domNode.querySelectorAll(".select2-container.select2-container-multi"),function(z){z.style.minWidth="33px"});this.featureCollectionDiv.classList.add("hide");this.generalizeChk.checked=!1};y.prototype.hide=function(){return this.exportDialog.hide()};y.prototype.validate=function(z){z=this.saveItem.get("title");this.exportBtn.disabled=
!z};y.prototype.validates=function(){return!!this.saveItem.get("title")};y.prototype.setWait=function(z){this.exportDialog.domNode.style.cursor="wait";z?this.set("message",this.i18n.estimatingCredits):this.exportingLabel.style.visibility="visible";this.exportBtn.disabled=!0};y.prototype.unsetWait=function(){this.exportDialog.domNode.style.cursor="default";this.exportingLabel.style.visibility="hidden";this.exportBtn.disabled=!1};y.prototype.exportImageryItem=function(){var z=this,B=this.saveItem.get("title");
B=d.default.exportImageryToTilePackage(this.item,B);var C=B.dfd;this._pendingCanceller=B.canceller;C.then(function(H){var E=H.success;H=H.outputValue;z._pendingCanceller=null;E&&H.itemId?(z.exportResponse={exportItemId:H.itemId},z.updateExportedItemDetails({itemId:H.itemId,statusMessage:""})):z.displayError(z.i18n.defaultError)},function(){z._pendingCanceller=null;z.displayError(z.i18n.defaultError)})};y.prototype.exportItem=function(){var z=this;if(this._moveFailed)this.updateItem(this._moveFailed.itemId,
"/").then(function(I){z.unsetWait();z.onDone(I)});else{this.setWait();if("Image Service"===this.item.type&&A.TilePackage===this.exportType)return this.exportImageryItem();var B=this.saveItem.get("title"),C=this.generalizeChk.checked,H={maxAllowableOffset:1,quantizationParameters:{tolerance:1}},E=A.ShapeFile;A.CSV===this.exportType?E=A.CSV:A.FileGDB===this.exportType?E=A.FileGDB:A.GeoJson===this.exportType?E=A.GeoJson:A.FeatureCollection===this.exportType?E=A.FeatureCollection:A.KML===this.exportType?
E="kml":A.Excel===this.exportType?E="excel":A.GeoPackage===this.exportType&&(E="geoPackage");var K=this._layers.map(function(I){return C?f.__assign({id:I.id},H):{id:I.id}});B={itemId:this.item.id,title:B,exportFormat:E,exportParameters:-1<this.layerId?{layers:K}:C?H:null};this.item.isOwner&&this.item.isDataView&&(B.exportParameters=f.__assign(f.__assign({},B.exportParameters||{}),{enforceFieldVisibility:!0}));A.FileGDB===this.exportType&&(B.exportParameters=f.__assign(f.__assign({},B.exportParameters||
{}),{exportContingentValues:!0}));B.exportParameters&&(B.exportParameters=JSON.stringify(B.exportParameters));E=e.default.getUser();E="".concat(c.default.restBaseUrl,"content/users/").concat(E.username,"/export");e.default.request({url:E,content:B},{usePost:!0}).then(this.handleExport.bind(this),this.displayError.bind(this))}};y.prototype.handleExport=function(z){!z||z.code||z.message?this.displayError(z):(this.exportResponse=z,this.checkStatusInterval=setInterval(this.checkStatus.bind(this),this.statusCheckIntervalTime))};
y.prototype.checkStatus=function(){var z=this;if(this.exportResponse&&!this.checkingStatus){var B={jobId:this.exportResponse.jobId,jobType:"export"},C=e.default.getUser();C="".concat(c.default.restBaseUrl,"content/users/").concat(C.username,"/items/").concat(this.exportResponse.exportItemId,"/status");this.checkingStatus=!0;e.default.request({url:C,content:B}).then(function(H){z.handleStatusCheck(H);z.checkingStatus=!1},function(H){z.displayError(H);z.checkingStatus=!1})}};y.prototype.handleStatusCheck=
function(z){"completed"===(null===z||void 0===z?void 0:z.status)?(clearInterval(this.checkStatusInterval),this.updateExportedItemDetails(z)):"failed"===z.status&&(clearInterval(this.checkStatusInterval),this.updateExportedItemDetailsAndFail(z))};y.prototype.updateExportedItemDetailsAndFail=function(z){var B=this;this.getItemDetails(this.exportResponse.exportItemId).then(function(C){var H=[],E=c.default.self.hasCategorySchema&&B.saveItem.get("categories")||[];0<E.length&&H.push(b.default.setItemCategories([C.id],
E));H.push(B.updateItem(C.id,C.ownerFolder));(0,l.default)(H).then(function(){B.unsetWait();B.displayFailure(z.statusMessage)})})};y.prototype.updateExportedItemDetails=function(z){var B=this;this.getItemDetails(z.itemId).then(function(C){var H=[],E=c.default.self.hasCategorySchema&&B.saveItem.get("categories")||[];0<E.length&&H.push(b.default.setItemCategories([C.id],E));H.push(B.updateItem(C.id,C.ownerFolder));(0,l.default)(H).then(function(){B.unsetWait();B.onDone(z)})})};y.prototype.moveItem=
function(z,B){var C=this,H=new p.default,E=e.default.getUser();E="".concat(c.default.restBaseUrl,"content/users/").concat(E.username,"/items/").concat(z,"/move");var K={folder:B||"/"};this._moveFailed=null;B&&"/"!==B&&""!==B?e.default.request({url:E,content:K},{usePost:!0}).then(function(I){H.resolve(I)},function(I){if(I&&"CONT_0011"===I.messageCode){var L=C.saveItem.get("title"),M=n.default.substitute(C.i18n.duplicateFound,{type:C.exportType,title:L});h.default.createConfirmationDialog({strings:{title:L,
description:M},hideCancel:!0,autoCloseOnOk:!0});C._moveFailed=f.__assign(f.__assign({},I),{itemId:z,folderId:B});C.unsetWait()}}):H.resolve({itemId:z});return H};y.prototype.updateItem=function(z,B){var C=this.saveItem.get("title"),H=this.saveItem.get("tags"),E=this.saveItem.get("summary"),K=this.saveItem.get("folderId"),I="".concat(c.default.restBaseUrl,"content/items/").concat(this.exportResponse.exportItemId,"/data"),L=e.default.getUser();L="".concat(c.default.restBaseUrl,"content/users/").concat(L.username);
B&&0<B.length&&(L+="/".concat(B));L+="/items/".concat(this.exportResponse.exportItemId,"/update");B={title:C,tags:H,snippet:E};this._moveFailed||(B.folderId=K);A.KML===this.exportType&&(B.url=I);return e.default.request({url:L,content:B},{usePost:!0}).then(this.moveItem.bind(this,z,K))};y.prototype.getItemDetails=function(z){z="".concat(c.default.restBaseUrl,"content/items/").concat(z);return e.default.request({url:z})};y.prototype.goToItem=function(z){var B=this;this.hide().then(function(){B.unsetWait();
window.location.href="".concat(c.default.baseUrl,"item.html?id\x3d").concat(z)})};y.prototype.checkTitle=function(){var z=this.saveItem.get("title"),B=this.saveItem.get("folderId"),C=this.typeLookup[this.exportType]||this.exportType,H=e.default.getUser().username;B=B&&"/"!==B?B:"root";z={q:'title:"'.concat(z,'" AND type:"').concat(C,'" AND owner:"').concat(H,'" AND ownerfolder:"').concat(B,'"')};B="".concat(c.default.restBaseUrl,"search");return e.default.request({url:B,content:z})};y.prototype.displayFailure=
function(z){var B=this;"null"===z&&(z=null);if(z)try{var C=JSON.parse(z)}catch(E){C=z}var H=this.i18n.errorTitle;z=z||this.i18n.errors.genericError.message;if(null===C||void 0===C?0:C.message)z=C.message;h.default.createConfirmationDialog({strings:{title:H,description:z},hideCancel:!0,autoCloseOnOk:!0,onOk:function(){B.onCancel()}})};y.prototype.displayError=function(z,B){var C=this;B=B||this.i18n.errorTitle;z&&h.default.createConfirmationDialog({strings:{title:B,description:(null===z||void 0===z?
0:z.code)&&z.message?z.message:z},hideCancel:!0,autoCloseOnOk:!0,onOk:function(){C.onCancel()}})};y.prototype.onExport=function(){var z=this;this.validates()&&this.checkTitle().then(function(B){var C=z.saveItem.get("title"),H=B.results.some(function(E){return E.title===C});0<B.total&&H?(B=n.default.substitute(z.i18n.duplicateFound,{type:z.typeLookup[z.exportType]||z.exportType,title:C}),h.default.createConfirmationDialog({strings:{title:z.i18n.errorTitle,description:B},hideCancel:!0,autoCloseOnOk:!0})):
z.exportItem()})};y.prototype.onCancel=function(z){var B,C;null===(B=null===z||void 0===z?void 0:z.preventDefault)||void 0===B?void 0:B.call(z);null===(C=this._pendingCanceller)||void 0===C?void 0:C.call(this);this.hide();this.destroy()};return y=f.__decorate([(0,t.default)(g.default,m.default,v.default,D.default)],y)}()})},"arcgisonline/sharing/dijit/SaveItem":function(){define("require exports tslib ../../esriGeowConfig ../../pages/pageUtil ../../pages/dijit/CategoryPicker ../../pages/utils/arrays ../../pages/utils/dom ../../pages/utils/storage ../util ../geow/Folder ../../tsutils/declareDecorator arcgis-components/wrappers/Tags dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/Deferred dojo/on dojo/topic dojo/data/ItemFileWriteStore dojo/i18n!../../nls/arcgisonline dojo/text!./templates/SaveItem.html".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);return function(){function D(G,F){this.declaredClass=
"arcgisonline.sharing.dijit.SaveItem";this.widgetsInTemplate=!0;this.templateString=x.default;this.baseClass="esriAGOSaveItemForm";this.init=!1;this.folders={}}D.prototype.postMixInProperties=function(){this.i18n=f.__assign(f.__assign(f.__assign({},w.default.common),w.default.saveItem),{addTags:w.default.itemCompleteness.addTags})};D.prototype.postCreate=function(){this.inherited(arguments);this.init||(this.saveItemTags=new g.TagsWrapper(this.saveItemTagsContainer,{activeTags:[],knownTags:[],maxWidth:"100%",
minWidth:"100%"}),this.getFolders(),this.init=!0)};D.prototype.startup=function(){this.inherited(arguments);this.initHandlers()};D.prototype.hideRow=function(G){a.default.hideNodes(this.domNode.querySelectorAll(".save-item-".concat(G,"-row")))};D.prototype.loadTags=function(G){var F=q.default.getUser();G&&(F=G);return q.default.loadUserTags(F.username)};D.prototype.loadCategories=function(G){var F=this,A=new l.default,y=this.domNode.querySelectorAll(".categories-container");if(c.default.self.hasCategorySchema){var z=
"".concat(c.default.restBaseUrl,"portals/self/categorySchema");q.default.request({url:z}).then(function(B){F.categories=new d.default({categories:G||[],schema:B.categorySchema},F.saveItemCategories);F.categories.startup();a.default.showNodes(y);A.resolve()},function(){a.default.hideNodes(y);A.resolve()})}else a.default.hideNodes(y),A.resolve();return A};D.prototype.initHandlers=function(){var G=this.validate.bind(this);this.own((0,n.default)(this.saveItemFolder,"change",this.onFolderChange.bind(this)),
(0,n.default)(this.saveItemTitle,"change",G),(0,n.default)(this.saveItemSummary,"change",G),h.default.registerKeystrokeHandler(this.saveItemTitle,G),h.default.registerKeystrokeHandler(this.saveItemSummary,G))};D.prototype.validate=function(){var G,F;if(!this.beingDestroyed){var A=!0,y=this.saveItemTitle.get("value"),z=(null===(F=null===(G=this.saveItemTags)||void 0===G?void 0:G.getTags())||void 0===F?void 0:F.join(","))||"";G=this.saveItemSummary.get("value");null===this.requires?A=!!(y&&z&&G):(b.default.includes(this.requires,
"title")&&(A=A&&!!y),b.default.includes(this.requires,"tags")&&(A=A&&0!==z.length),b.default.includes(this.requires,"summary")&&(A=A&&!!G));k.default.publish("onSaveItemValidate",[A])}};D.prototype.getFolders=function(){var G=this,F=q.default.getUser();if(null!==F){var A=new r.default({url:null,data:{identifier:"name",items:[]}});A.newItem({name:F.username,id:""});this.saveItemFolder.set("store",A);this.saveItemFolder.set("value",F.username);t.default.getFolders(function(y){var z=null,B=e.default.getCookie("ESRI_Content");
B&&B.folderId&&(z=B.folderId);G.foldersJson=y.folders;y.folders.forEach(function(C,H){A.newItem({name:C.title,id:C.id});G.folders["id".concat(C.id)]=C.title.replace(/"/g,'\\"');z===C.id&&(G.saveItemFolder.set("value",C.title),G.folderId=z,G.folderName=C.title)});A.save({})},function(y){},null,!0)}};D.prototype.onFolderChange=function(G){var F=this;this.saveItemFolder.get("store").fetch({onComplete:function(A){A.forEach(function(y){y.name[0]===G&&(F.folderId=y.id[0],F.folderName=y.name[0])})}})};D.prototype._setTitleAttr=
function(G){this.saveItemTitle.set("value",G)};D.prototype._getTitleAttr=function(){return this.saveItemTitle.get("value")};D.prototype._setTagsAttr=function(G){this.saveItemTags.setTags(G)};D.prototype._getTagsAttr=function(){return this.saveItemTags.getTags()};D.prototype._setCategoriesAttr=function(G){var F=this;G&&G.forEach(function(A){F.categories.addCategory(A)})};D.prototype._getCategoriesAttr=function(){return this.categories.getCategories(!0)};D.prototype._setSummaryAttr=function(G){this.saveItemSummary.set("value",
G)};D.prototype._getSummaryAttr=function(){return this.saveItemSummary.get("value")};D.prototype._setFolderAttr=function(G){var F=this;this.saveItemFolder.get("store").fetch({onComplete:function(A){A.forEach(function(y){y.name[0]===G&&(F.folderId=y.id[0],F.folderName=y.name[0],F.saveItemFolder.set("value",F.folderName))})}})};D.prototype._getFolderAttr=function(){return this.folderName};D.prototype._setFolderIdAttr=function(G){var F=this;this.saveItemFolder.get("store").fetch({onComplete:function(A){A.forEach(function(y){y.id[0]===
G&&(F.folderId=y.id[0],F.folderName=y.name[0],F.saveItemFolder.set("value",y.name[0]))})}})};D.prototype._getFolderIdAttr=function(){return this.folderId};D.prototype._setRequiresAttr=function(G){this.requires=G?G:null};D.prototype._setTitlePlaceHolderAttr=function(G){this.saveItemTitle.set("placeHolder",G)};D.prototype._setTagsPlaceHolderAttr=function(G){this.saveItemTitle.set("placeHolder",G)};D.prototype._setSummaryPlaceHolderAttr=function(G){this.saveItemSummary.set("placeHolder",G)};return D=
f.__decorate([(0,u.default)(v.default,m.default,p.default)],D)}()})},"arcgisonline/sharing/dijit/dialog/ExtentDlg":function(){define("require dojo/_base/declare dojo/_base/lang dojo/on dojo/topic dijit/Dialog dijit/form/Button dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ../DefineExtent dojo/i18n!../../../nls/arcgisonline dojo/text!./templates/ExtentDlg.html".split(" "),function(S,J,f,c,h,d,b,a,e,q,t,u,g){var m=J("arcgisonline.sharing.dijit.dialog.ExtentDlg",[a,e,q],{declaredClass:"arcgisonline.sharing.dijit.dialog.ExtentDlg",
basePath:S.toUrl("arcgisonline/sharing/dijit/dialog"),templateString:g,widgetsInTemplate:!0,postMixInProperties:function(){this.inherited(arguments);this.i18n=f.mixin({},u.common);this.i18n=f.mixin(this.i18n,u.viewer.geocode);this.i18n=f.mixin(this.i18n,u.generalDlg);this.i18n=f.mixin(this.i18n,u.extentDlg)},postCreate:function(){this.inherited(arguments);this._loadConnections()},_loadConnections:function(){this.own(c(this._cancelBtn,"click",f.hitch(this,"_cancelBtnClick")),c(this._okBtn,"click",
f.hitch(this,"_okBtnClick")),h.subscribe("define-extent/update",f.hitch(this,"_publish")))},_cancelBtnClick:function(v){v.preventDefault();this._extentDialog.hide()},_okBtnClick:function(v){v.preventDefault();this.setExtent()},hide:function(){this._defineExtent._destroyMap();this._extentDialog.hide()},show:function(v){this._defineExtent||(this._defineExtent=new t({id:"defineExtent"},this._extentContainer),this._defineExtent.startup());this._defineExtent.set("extent",v);this._extentDialog.show()},
setExtent:function(){var v=this._defineExtent.get("extent");v&&this._publish(v);this.hide()},_publish:function(v){h.publish("extent/update",v)}});m.prototype.statics={getInstance:function(){this._instance||(this._instance=new m);return this._instance}};return m})},"arcgisonline/sharing/dijit/DefineExtent":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Color dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/query dojo/on dojo/number dojo/topic esri/dijit/Search esri/map esri/layers/ImageParameters esri/layers/ArcGISTiledMapServiceLayer esri/geometry/Extent esri/geometry/Point esri/geometry/webMercatorUtils esri/SpatialReference esri/symbols/SimpleLineSymbol esri/toolbars/draw esri/graphic esri/dijit/Popup dijit/Dialog dijit/form/Button dijit/form/TextBox dijit/layout/BorderContainer dijit/layout/ContentPane dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ../../map/core/projectExtent ../../map/utils/clipOnHorizon ../../map/utils/createExtentSearchOptions ../util ../../pages/pageUtil ../../pages/utils/dom ../../pages/utils/number ../../esriGeowConfig ./dialog/GeneralDlg dojo/i18n!../../nls/arcgisonline dojo/text!./templates/DefineExtent.html".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E,K,I,L,M,N,P,R,Y,ja,aa,da,ra){return J([H,E,K],{declaredClass:"arcgisonline.sharing.dijit.DefineExtent",basePath:S.toUrl("arcgisonline/sharing/dijit"),templateString:ra,widgetsInTemplate:!0,numberPattern:"#.#",_setExtentAttr:function(ca){(this.extent=ca)&&2===ca.length&&2===ca[0].length&&2===ca[1].length?(this._initMap(ca),this._extentTop.set("value",Y.format(Math.round(1E3*this.extent[1][1])/1E3)),this._extentLeft.set("value",
Y.format(Math.round(1E3*this.extent[0][0])/1E3)),this._extentRight.set("value",Y.format(Math.round(1E3*this.extent[1][0])/1E3)),this._extentBottom.set("value",Y.format(Math.round(1E3*this.extent[0][1])/1E3))):(this._initMap(null),this._extentTop.set("value",""),this._extentLeft.set("value",""),this._extentRight.set("value",""),this._extentBottom.set("value",""))},_getExtentAttr:function(){var ca=[[],[]],fa=this._extentTop.get("value"),la=this._extentLeft.get("value"),ta=this._extentBottom.get("value"),
Q=this._extentRight.get("value"),T=u.parse(fa),O=u.parse(la),Z=u.parse(ta),na=u.parse(Q);if(this._isValidExtentInput(fa,la,Q,ta,T,O,na,Z)){ca[1][1]=T;ca[0][0]=O;ca[1][0]=na;ca[0][1]=Z;if(this._isValidWGS84Extent(ca))return ca;P.createSpecifiedDialog(aa).show({title:this.i18n.errorDlgTitle,message:this.i18n.error.errorRange+"\x3cbr\x3e"+this.i18n.error.errorValueBigger})}else P.createSpecifiedDialog(aa).show({title:this.i18n.errorDlgTitle,message:this.i18n.error.errorUseNumeric+"\x3cbr/\x3e"+this.i18n.error.errorRange+
"\x3cbr\x3e"+this.i18n.error.errorValueBigger})},postMixInProperties:function(){this.inherited(arguments);this.i18n=f.mixin({},da.common);this.i18n=f.mixin(this.i18n,da.viewer.geocode);this.i18n=f.mixin(this.i18n,da.generalDlg);this.i18n=f.mixin(this.i18n,da.extentDlg)},postCreate:function(){this.symbol=new x(x.STYLE_SOLID,new h([255,0,0]),2);this.defaultExtent=new n(-121,21.72,-76,61.28,new w({wkid:4326}));this._loadConnections()},destroy:function(){this.inherited(arguments);this._destroyMap()},
_loadConnections:function(){var ca=f.hitch(this,"_checkRange");this.own(t(this._extentTop,"blur",ca),t(this._extentLeft,"blur",ca),t(this._extentRight,"blur",ca),t(this._extentBottom,"blur",ca),t(this._buttonSetExtent,"click",f.hitch(this,"_toggleMapNavigation")))},_isValidWGS84Extent:function(ca){ca=[ca[0].join(","),ca[1].join(",")].join();ca=c.map(ca.split(","),function(fa){return parseFloat(fa)});return-90<=ca[3]&&90>=ca[3]&&-180<=ca[2]&&180>=ca[2]&&-180<=ca[0]&&180>=ca[0]&&-90<=ca[1]&&90>=ca[1]&&
ca[2]>ca[0]&&ca[3]>ca[1]},_isValidExtentInput:function(ca,fa,la,ta,Q,T,O,Z){return!(0===ca.length||0===fa.length||0===la.length||0===ta.length||isNaN(Q)||isNaN(T)||isNaN(O)||isNaN(Z))},_destroyMap:function(){if(this.map){try{this.map.destroy()}catch(fa){}var ca=this.map.infoWindow;ca&&ca.destroy();this.map=null}if(this.geocoder){try{this.geocoder.destroy()}catch(fa){}this.geocoder=null}d.byId("extent-map-container")&&a.empty(d.byId("extent-map-container"))},_setProjectedExtent:function(ca){ca=L(ca[0]);
t.once(this.map,"extent-change",f.hitch(this,"_drawBoundingBox",ca));this.map.setExtent(ca,!0)},_drawBoundingBox:function(ca){this._drawBox(ca)},_checkRange:function(ca){if(ca){var fa=ca.target.value,la=u.parse(fa);ca=ca.target.id;var ta=!1;if("extent-left"===ca){if(0===fa.length||isNaN(la))P.createSpecifiedDialog(aa).show({title:this.i18n.errorDlgTitle,message:this.i18n.error.errorLonNotNumber}),ta=!0;else if(-180>la||180<la)P.createSpecifiedDialog(aa).show({title:this.i18n.errorDlgTitle,message:this.i18n.error.errorRangeLong}),
ta=!0;ta&&(this.extent&&2===this.extent.length&&2==this.extent[0].length&&2===this.extent[1].length?this._extentLeft.set("value",Y.format(Math.round(1E3*this.extent[0][0])/1E3)):this._extentLeft.set("value",""))}else if("extent-right"===ca){if(0===fa.length||isNaN(la))P.createSpecifiedDialog(aa).show({title:this.i18n.errorDlgTitle,message:this.i18n.error.errorLonNotNumber}),ta=!0;else if(-180>la||180<la)P.createSpecifiedDialog(aa).show({title:this.i18n.errorDlgTitle,message:this.i18n.error.errorRangeLong}),
ta=!0;ta&&(this.extent&&2===this.extent.length&&2===this.extent[0].length&&2===this.extent[1].length?this._extentRight.set("value",Y.format(Math.round(1E3*this.extent[1][0])/1E3)):this._extentRight.set("value",""))}else if("extent-top"===ca){if(0===fa.length||isNaN(la))P.createSpecifiedDialog(aa).show({title:this.i18n.errorDlgTitle,message:this.i18n.error.errorLatNotNumber}),ta=!0;else if(-90>la||90<la)P.createSpecifiedDialog(aa).show({title:this.i18n.errorDlgTitle,message:this.i18n.error.errorRangeLat}),
ta=!0;ta&&(this.extent&&2===this.extent.length&&2===this.extent[0].length&&2===this.extent[1].length?this._extentTop.set("value",Y.format(Math.round(1E3*this.extent[1][1])/1E3)):this._extentTop.set("value",""))}else{if(0===fa.length||isNaN(la))P.createSpecifiedDialog(aa).show({title:this.i18n.errorDlgTitle,message:this.i18n.error.errorLatNotNumber}),ta=!0;else if(-90>la||90<la)P.createSpecifiedDialog(aa).show({title:this.i18n.errorDlgTitle,message:this.i18n.error.errorRangeLat}),ta=!0;ta&&(this.extent&&
2==this.extent.length&&2==this.extent[0].length&&2==this.extent[1].length?this._extentBottom.set("value",Y.format(Math.round(1E3*this.extent[0][1])/1E3)):this._extentBottom.set("value",""))}null!=this.map&&0<this._extentTop.get("value").length&&0<this._extentLeft.get("value").length&&0<this._extentRight.get("value").length&&0<this._extentBottom.get("value").length?(fa=[[],[]],fa[1][1]=u.parse(this._extentTop.get("value")),fa[0][0]=u.parse(this._extentLeft.get("value")),fa[1][0]=u.parse(this._extentRight.get("value")),
fa[0][1]=u.parse(this._extentBottom.get("value")),this._isValidWGS84Extent(fa)?(fa=new n(fa[0][0],fa[0][1],fa[1][0],fa[1][1],new w({wkid:4326})),I(fa,this.map.spatialReference,f.hitch(this,"_setProjectedExtent"),null,this.map)):this._deleteBox()):null!=this.map&&this._deleteBox()}},_initMap:function(ca){var fa=this.defaultExtent;null!=ca&&(fa=new n(ca[0][0],ca[0][1],ca[1][0],ca[1][1],new w({wkid:4326})));if(this.map){if(null!=ca)t.once(this.map,"extent-change",f.hitch(this,"_drawBoundingBox",fa));
this.map.setExtent(fa,!0)}else{this.map=new v("extent-map-container",{showAttribution:!1,wrapAround180:!1,center:[-31,10],zoom:1});var la=new p;la.format="png24";la=new l(ja.extentService,{imageParameters:la});this.map.addLayer(la);null!=ca&&this.own(this.map.on("load",f.hitch(this,"_onMapLoad",fa)));this.own(la.on("update",f.hitch(this,"_onUpdate")));this.toolbar=new D(this.map,{showTooltips:!1});this.own(this.toolbar.on("draw-complete",f.hitch(this,"_onDrawEnd")));this.mapNavigation=!0;b.set(this._buttonSetExtent,
"innerHTML",this.i18n.drawExtent);this.geocoder||(ca=M(this.map),ca.showInfoWindowOnSelect=!1,this.geocoder=new m(ca,a.create("div",{id:"extentSearch"},this._extentSearchContainer,"only")),this.geocoder.startup(),this.own(this.geocoder.on("select-result",f.hitch(this,"_onSearchResult"))))}},_onMapLoad:function(ca){q(".action.zoomTo").forEach(R.hideNode);I(ca,this.map.spatialReference,f.hitch(this,"_setProjectedExtent"),null,this.map)},_drawBox:function(ca){this.map.graphics.clear();null!==ca&&this.map.graphics.add(new G(ca,
this.symbol))},_deleteBox:function(){this.map.graphics.clear()},_onUpdate:function(){this.map.reposition()},_toggleMapNavigation:function(){this.mapNavigation?(this.toolbar.activate(D.EXTENT),this.map.showZoomSlider(),this.mapNavigation=!1,b.set(this._buttonSetExtent,"innerHTML",this.i18n.enableMapPanning)):(this.toolbar.deactivate(),this.map.enableMapNavigation(),this.mapNavigation=!0,b.set(this._buttonSetExtent,"innerHTML",this.i18n.drawExtent))},_onSearchResult:function(ca){if(ca.result){ca=ca.result;
var fa=ca.feature.geometry,la=ca.extent;if("polygon"===fa.type){var ta=fa.getExtent().expand(1.1);var Q=fa.getCentroid()}else"polyline"===fa.type?(ta=fa.getExtent().expand(1.1),Q=fa.getPoint(0,0)):"multipoint"===fa.type?(ta=fa.getExtent().expand(1.1),Q=fa.getPoint(0)):(ta=la||arcgisonline.map.main.map.extent.centerAt(fa).expand(.0625),Q=fa);this._deleteBox();this.popup||(this.popup=new F(null,a.create("div",{"class":"blueTheme"},d.byId("extentMapDiv"))),this.popup.resize(150,100),this.popup.map=this.map);
this.popup.setContent("\x3cdiv\x3e\x3cspan\x3e"+ca.name+"\x3c/span\x3e\x3c/div\x3e");t.once(this.map,"extent-change",f.hitch(this,function(){this._drawBox(ta);this.popup.show(Q);setTimeout(f.hitch(this,function(){this.popup.hide()}),3E3)}));this.map.setExtent(ta,!0);ca=ta;4326!==ta.spatialReference.wkid&&(ca=r.webMercatorToGeographic(ta));this._extentTop.set("value",Y.format(Math.round(1E3*ca.ymax)/1E3));this._extentLeft.set("value",Y.format(Math.round(1E3*ca.xmin)/1E3));this._extentRight.set("value",
Y.format(Math.round(1E3*ca.xmax)/1E3));this._extentBottom.set("value",Y.format(Math.round(1E3*ca.ymin)/1E3));this.extent=[[],[]];this.extent[1][1]=parseFloat(ca.ymax);this.extent[0][0]=parseFloat(ca.xmin);this.extent[1][0]=parseFloat(ca.xmax);this.extent[0][1]=parseFloat(ca.ymin);g.publish("define-extent/change",ca)}},_onDrawEnd:function(ca){this._deleteBox();if(.01>ca.width){var fa=.01;ca=new n(ca.xmin-fa,ca.ymin,ca.xmin+fa,ca.ymax,new w({wkid:4326}))}.01>ca.height&&(fa=.01,ca=new n(ca.xmin,ca.ymin-
fa,ca.xmax,ca.ymin+fa,new w({wkid:4326})));ca=L(ca.geographicGeometry);t.once(this.map,"extent-change",f.hitch(this,"_drawBoundingBox",ca));this.map.setExtent(ca,!0);fa=ca;4326!==ca.spatialReference.wkid&&(fa=r.webMercatorToGeographic(ca));this._extentTop.set("value",Y.format(Math.round(1E3*fa.ymax)/1E3));this._extentLeft.set("value",Y.format(Math.round(1E3*fa.xmin)/1E3));this._extentRight.set("value",Y.format(Math.round(1E3*fa.xmax)/1E3));this._extentBottom.set("value",Y.format(Math.round(1E3*fa.ymin)/
1E3));this.extent=[[],[]];this.extent[1][1]=parseFloat(fa.ymax);this.extent[0][0]=parseFloat(fa.xmin);this.extent[1][0]=parseFloat(fa.xmax);this.extent[0][1]=parseFloat(fa.ymin);g.publish("define-extent/change",fa)}})})},"esri/dijit/Search":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Evented dojo/Deferred dojo/keys dojo/on dojo/query dojo/uacss dojo/regexp dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-style dojo/dom-construct dojo/date/locale dojo/i18n!../nls/jsapi dojo/text!./Search/templates/Search.html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_FocusMixin dijit/a11yclick dijit/focus ../lang ../InfoTemplate ../kernel ../SpatialReference ../graphic ../promiseList ../symbols/PictureMarkerSymbol ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/TextSymbol ../symbols/Font ../geometry/Point ../geometry/Extent ../geometry/normalizeUtils ../geometry/scaleUtils ../tasks/locator ../tasks/query ../Color ../styles/basic".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E,K,I,L,M,N,P,R,Y,ja,aa,da,ra){function ca(Q,T){return c.map(c.filter(Q.trim().split(" "),function(O){return!!O.trim()}),function(O){return{onFields:T,searchTerm:O,searchType:"prefix"}})}function fa(Q,T){Q=Q&&Q.indexes;if(!Q||!T||!T.length)return!1;Q=c.filter(Q,function(O){return"FullText"===O.indexType});return c.some(Q,function(O){var Z=O.fields&&c.map(O.fields.split(","),function(na){return na.trim().toLowerCase()})||[];return c.every(T,
function(na){return Z.includes(na.toLowerCase())})})}function la(Q){return!!(Q&&Q.advancedQueryCapabilities&&Q.advancedQueryCapabilities.supportsFullTextSearch)}function ta(Q,T){Q&&T&&(Q._layer=T,Q._sourceLayer=T)}J=J([r,w,x,h],{declaredClass:"esri.dijit.Search",templateString:k,reHostedFS:/https?:\/\/services.*\.arcgis\.com/i,constructor:function(Q,T){this.css={searchGroup:"searchGroup",searchInput:"searchInput",searchInputGroup:"searchInputGroup",searchBtn:"searchBtn",searchSubmit:"searchSubmit",
searchIcon:"searchIcon esri-icon-search",searchButtonText:"searchButtonText",searchToggle:"searchToggle",searchToggleIcon:"searchIcon esri-icon-down-arrow",searchMenu:"searchMenu",searchMenuHeader:"menuHeader",searchClear:"searchClear",searchClearIcon:"searchIcon esri-icon-close searchClose",searchSpinner:"searchIcon esri-icon-loading-indicator searchSpinner",searchSourceName:"sourceName",suggestionsMenu:"suggestionsMenu",sourcesMenu:"sourcesMenu",activeSource:"active",hasValue:"hasValue",hasButtonMode:"hasButtonMode",
hasMultipleSources:"hasMultipleSources",showSuggestions:"showSuggestions",showSources:"showSources",showNoResults:"showNoResults",searchLoading:"searchLoading",latLonHeader:"searchLatLongHeader",searchMoreResults:"moreResults",searchMoreResultsList:"resultsList",searchMoreResultsHeader:"moreHeader",searchMoreResultsItem:"moreItem",searchMoreResultsListHeader:"popupHeader",searchShowMoreResults:"showMoreResults",searchNoResultsMenu:"noResultsMenu",searchNoResultsBody:"noResultsBody",searchNoResultsHeader:"noResultsHeader",
searchNoValueIcon:"noValueIcon esri-icon-notice-triangle",searchNoValueText:"noValueText",searchNoResultsText:"noResultsText",searchExpandContainer:"searchExpandContainer",searchAnimateContainer:"searchAnimate",searchExpanded:"searchExpanded",searchCollapsed:"searchCollapsed",searchClearFloat:"searchClearFloat"};this._allIndex="all";this._objectIdIdentifier="_objectId";this._deferreds=[];this._sourceNames=[];this.defaultSource={locator:new ja("//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer"),
singleLineFieldName:"SingleLine",outFields:["Addr_type","Match_addr","StAddr","City"],name:n.widgets.Search.main.esriLocatorName,localSearchOptions:{minScale:3E5,distance:5E4},placeholder:n.widgets.Search.main.placeholder,highlightSymbol:(new H(S.toUrl("./Search/images/search-pointer.png"),36,36)).setOffset(9,18)};this.options={map:null,theme:"arcgisSearch",visible:!0,value:"",allPlaceholder:"",sources:[this.defaultSource],activeSourceIndex:0,suggestionDelay:350,enableSourcesMenu:!0,enableSuggestionsMenu:!0,
enableInfoWindow:!0,showInfoWindowOnSelect:!0,enableSuggestions:!0,enableButtonMode:!1,autoNavigate:!0,autoSelect:!0,addLayersFromMap:!1,zoomScale:1E3,graphicsLayer:null,enableHighlight:!0,highlightGraphic:null,enableLabel:!1,labelSymbol:(new L).setColor(new da([181,56,46,.9])).setFont(new M("14px",M.STYLE_NORMAL,M.VARIANT_NORMAL,M.WEIGHT_BOLD,"Arial")),labelGraphic:null,infoTemplate:new A(n.widgets.Search.main.searchResult,'\x3cdiv class\x3d"${searchTheme}"\x3e\x3cdiv id\x3d"${searchMoreResultsId}" class\x3d"${searchMoreResults}"\x3e\x3cdiv class\x3d"${searchMoreResultsItem}"\x3e${searchResult}\x3c/div\x3e\x3cdiv\x3e${searchMoreResultsHtml}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),
searchResults:null,suggestResults:null,selectedResult:null,magicKey:null,selectedFeatureId:null,expanded:!1,maxLength:128,maxResults:6,maxSuggestions:6,locationToAddressDistance:1500,minCharacters:3,enableSearchingAll:!0};Q=f.mixin({},this.options,Q);this.set(Q);this._updateActiveSource();this._i18n=n;this._defaultSR=new z(4326);this.domNode=T},startup:function(){this.inherited(arguments);this.sources||(this.sources=[]);this._mapLoaded().then(f.hitch(this,this._init))},postCreate:function(){var Q=
this;this.inherited(arguments);this._moreResultsId=this.id+"_more_results";this.own(a(this.submitNode,D,f.hitch(this,this._searchButton)));this.own(a(this.sourcesBtnNode,D,f.hitch(this,this._toggleSourcesMenu)));this.own(a(this.inputNode,D,f.hitch(this,this._inputClick)));this.own(a(this.clearNode,D,f.hitch(this,this._clearButton)));this.own(a(this.formNode,"submit",f.hitch(this,function(T){T.preventDefault();this._cancelSuggest();this.search()})));this.own(a(this.inputNode,"keyup",f.hitch(this,function(T){this._inputKey(T)})));
this.own(a(this.sourcesBtnNode,"keyup",f.hitch(this,function(T){this._sourceBtnKey(T)})));this.own(a(this.suggestionsNode,"li:click, li:keyup",function(T){Q._suggestionsEvent(T,this)}));this.own(a(this.sourcesNode,"li:click, li:keyup",function(T){Q._sourcesEvent(T,this)}));this.own(a(this.inputNode,"input, paste",f.hitch(this,function(){this._suggestDelay()})));this.map&&this.map.infoWindow&&this.map.infoWindow.domNode&&this.enableInfoWindow&&(this.own(a(this.map.infoWindow.domNode,"#"+this._moreResultsId+
"_show:click",f.hitch(this,function(T){this._showMoreResultsClick(T)}))),this.own(a(this.map.infoWindow.domNode,"#"+this._moreResultsId+"_list li a:click",f.hitch(this,function(T){this._moreResultsClick(T)}))),this.own(a(this.map.infoWindow.domNode,"#"+this._moreResultsId+" [data-switch-coordinates]:click",f.hitch(this,function(T){this._switchCoordinatesClick(T)}))));this.value&&this._checkStatus();this._hideMenus();this._updateVisible();this._insertSources(this.sources);this._setPlaceholder(this.activeSourceIndex);
this._updateButtonMode(this.enableButtonMode);this.toggle(this.expanded)},destroy:function(){this.clear();p.empty(this.domNode);this.inherited(arguments)},clear:function(){this.clearGraphics();g.get(this.inputNode,"value")&&g.set(this.inputNode,"value","");this._changeAttrValue("value","");this.set("searchResults",null);this.set("suggestResults",null);this.set("selectedResult",null);this.set("magicKey",null);this.set("selectedFeatureId",null);m.remove(this.containerNode,this.css.hasValue);g.set(this.clearNode,
"title","");this._hideMenus();this._closePopup();this._hideLoading();this.emit("clear-search")},show:function(){v.set(this.domNode,"display","block")},hide:function(){v.set(this.domNode,"display","none")},expand:function(){this.enableButtonMode&&(m.add(this.containerNode,this.css.searchExpanded),m.remove(this.containerNode,this.css.searchCollapsed),this._hideMenus(),this.set("expanded",!0))},collapse:function(){this.enableButtonMode&&(m.remove(this.containerNode,this.css.searchExpanded),m.add(this.containerNode,
this.css.searchCollapsed),this._hideMenus(),this.set("expanded",!1))},toggle:function(Q){this.enableButtonMode&&("undefined"===typeof Q&&(Q=!this.expanded),Q?this.expand():this.collapse())},search:function(Q){var T=new d;this._mapLoaded().then(f.hitch(this,function(){this._searchDeferred(Q).then(f.hitch(this,function(O){var Z=O.results;this.set("searchResults",Z);0===O.numResults&&(this._noResults(O.value),this._showNoResultsMenu());this._hideLoading();this.emit("search-results",O);this._selectFirstResult(Z,
O.activeSourceIndex);T.resolve(Z)}),f.hitch(this,function(O){T.reject(O)}))}));return T.promise},suggest:function(Q){var T=new d;this._mapLoaded().then(f.hitch(this,function(){this._suggestDeferred(Q).then(f.hitch(this,function(O){if(O){var Z=O.results;this.set("suggestResults",Z);this._insertSuggestions(Z,O.value);this.emit("suggest-results",O);T.resolve(Z)}}),f.hitch(this,function(O){T.reject(O)}))}));return T.promise},select:function(Q){var T=this._getDefaultSymbol(Q),O=this.labelSymbol,Z=this.sources,
na=this.activeSourceIndex,ia=this.enableHighlight,X=this.enableLabel,ha=this.autoNavigate,V=this.showInfoWindowOnSelect,ea=this.enableInfoWindow,U=this.infoTemplate,ka=Q.feature?new B(Q.feature.toJson()):null,ma=ka?Q.feature._sourceLayer:null;ta(ka,ma);if(na===this._allIndex){var sa=this._getSourceIndexOfResult(Q);if(null!==sa){var pa=Z[sa];na=sa}}else pa=Z[na];pa&&(pa.hasOwnProperty("highlightSymbol")&&(T=pa.highlightSymbol),pa.hasOwnProperty("labelSymbol")&&(O=pa.labelSymbol),pa.hasOwnProperty("enableHighlight")&&
(ia=pa.enableHighlight),pa.hasOwnProperty("enableLabel")&&(X=pa.enableLabel),pa.hasOwnProperty("autoNavigate")&&(ha=pa.autoNavigate),pa.hasOwnProperty("showInfoWindowOnSelect")&&(V=pa.showInfoWindowOnSelect),pa.hasOwnProperty("enableInfoWindow")&&(ea=pa.enableInfoWindow),pa.hasOwnProperty("infoTemplate")?U=pa.infoTemplate:pa.featureLayer&&pa.featureLayer.infoTemplate&&(U=pa.featureLayer.infoTemplate));this._hideMenus();this._hideLoading();if(ka){Z=this.highlightGraphic;var Aa=this.graphicsLayer;sa=
this.labelGraphic;var za=f.mixin({},ka.attributes,{searchTheme:this.theme,searchResult:this._searchResultHTML(Q),searchMoreResults:this.css.searchMoreResults,searchMoreResultsItem:this.css.searchMoreResultsItem,searchMoreResultsId:this._moreResultsId,searchMoreResultsHtml:this._moreResultsHTML(Q)}),Ba=null;ea&&(Ba=U);sa?(sa.setGeometry(ka.geometry),sa.setAttributes(za),sa.setSymbol(O),O&&"textsymbol"===O.type&&sa.symbol.setText(Q.name)):(sa=new B(ka.geometry,O,za),ta(sa,ma),O&&"textsymbol"===O.type&&
sa.symbol.setText(Q.name),X&&(Aa?Aa.add(sa):this.map&&this.map.graphics&&this.map.graphics.add(sa)));Z?(Z.setGeometry(ka.geometry),Z.setAttributes(za),Z.setInfoTemplate(Ba),Z.setSymbol(T)):(Z=new B(ka.geometry,T,za,Ba),ta(Z,ma),ia&&(Aa?Aa.add(Z):this.map&&this.map.graphics&&this.map.graphics.add(Z)));Z&&Z.symbol&&"textsymbol"===Z.symbol.type&&Z.symbol.setText(Q.name);this.map&&this.map.infoWindow&&ea&&V&&(this.map.infoWindow.setFeatures([Z]),T=this._getPointFromGeometry(Z.geometry),this.map.infoWindow.show(T));
this.map&&ha&&Q&&Q.hasOwnProperty("extent")&&"function"===typeof this.map.setExtent&&this.map.setExtent(Q.extent,!0);this.set("highlightGraphic",Z);this.set("labelGraphic",sa)}this.set("selectedResult",Q);this.emit("select-result",{result:Q,source:pa,sourceIndex:na})},focus:function(){G.focus(this.inputNode)},blur:function(){this.inputNode.blur();G.curNode&&G.curNode.blur()},clearGraphics:function(){var Q=this.highlightGraphic,T=this.graphicsLayer,O=this.labelGraphic;Q&&(T?T.remove(Q):this.map&&this.map.graphics&&
this.map.graphics.remove(Q));O&&(T?T.remove(O):this.map&&this.map.graphics&&this.map.graphics.remove(O));this.set("labelGraphic",null);this.set("highlightGraphic",null)},_mapLoaded:function(){var Q=new d;if(this.map)if(this.map.loaded)Q.resolve();else a.once(this.map,"load",f.hitch(this,function(){Q.resolve()}));else Q.resolve();return Q.promise},_init:function(){this._getMapLayers().then(f.hitch(this,function(){this.set("loaded",!0);this.emit("load")}))},_clearButton:function(){this.clear();G.focus(this.inputNode)},
_error:function(Q){return Error(this.declaredClass+" "+Q)},_searchDeferred:function(Q){var T=new d,O=this.value,Z=this.activeSourceIndex;Q&&Q.hasOwnProperty("index")&&(Z=Q.index);this._showLoading();this._hideMenus();this._closePopup();this.clearGraphics();var na={magicKey:this.magicKey,text:O};Q?"string"===typeof Q?(na.text=Q,Q=this._searchQueries(na)):Q="object"===typeof Q&&Q.hasOwnProperty("magicKey")?this._searchQueries(Q):"object"===typeof Q&&Q.hasOwnProperty("geometry")?this._searchQueries({geometry:Q}):
"object"===typeof Q&&Q.hasOwnProperty(this._objectIdIdentifier)?this._searchQueries(Q):"object"===typeof Q&&"point"===Q.type?this._searchQueries({point:Q}):Q instanceof Array&&2===Q.length?this._searchQueries({latlon:Q}):this._searchQueries(na):Q=this._searchQueries(na);Q.always(f.hitch(this,function(ia){ia=this._formatResults(ia,Z,O);T.resolve(ia)}));return T.promise},_suggestDeferred:function(Q){var T=new d;this._deferreds.push(T);Q||(Q=this.value);var O=this.activeSourceIndex;this._suggestQueries({text:Q}).always(f.hitch(this,
function(Z){var na;if(Z)for(var ia=0;ia<Z.length;ia++)Z[ia]&&(na=!0);na?(Z=this._formatResults(Z,O,Q),T.resolve(Z)):T.resolve()}));return T.promise},_getDefaultSymbol:function(Q){var T;this.map&&(T=this.map.getBasemap());T||(T="topo");if(Q&&Q.feature&&Q.feature.geometry)var O=Q.feature.geometry.type;"polyline"===O?O="line":"circle"===O||"extent"===O?O="polygon":"multipoint"===O&&(O="point");if(O){if(Q=ra.getSchemes({theme:"default",basemap:T,geometryType:O}))var Z=Q.primaryScheme;if(Z){Z.color&&Z.hasOwnProperty("opacity")&&
(Z.color.a=Z.opacity);var na=Z;Q=Z.color;Z=Z.size;switch(O){case "point":var ia=new E;ia.setColor(Q);ia.setSize(null!==Z?Z:na.size);O=new K;O.setColor(na.outline.color);O.setWidth(na.outline.width);ia.setOutline(O);break;case "line":ia=new K;ia.setColor(Q);ia.setWidth(null!==Z?Z:na.width);break;case "polygon":ia=new I,ia.setColor(Q),O=new K,O.setColor(na.outline.color),O.setWidth(na.outline.width),ia.setOutline(O)}na=ia}}return na},_selectFirstResult:function(Q,T){if(this.autoSelect&&Q){var O;T===
this._allIndex?O=this._getFirstResult(Q):Q[T]&&Q[T][0]&&(O=Q[T][0]);O&&this.select(O)}},_getSourceIndexOfResult:function(Q){var T=this.searchResults;if(T)for(var O in T)if(T[O]&&T[O].length)for(var Z=0;Z<T[O].length;Z++)if(T[O][Z]===Q)return parseInt(O,10);return null},_getFirstResult:function(Q){if(Q)for(var T in Q)if(Q[T]&&Q[T][0])return Q[T][0];return!1},_onFocus:function(){this.map&&"function"===typeof this.map.disableKeyboardNavigation&&this.map.disableKeyboardNavigation();this.emit("focus");
this.inherited(arguments)},_onBlur:function(){this._hideMenus();this.map&&"function"===typeof this.map.enableKeyboardNavigation&&this.map.enableKeyboardNavigation();this.enableButtonMode&&this.loaded&&this.collapse();this.emit("blur");this.inherited(arguments)},_getMapLayers:function(){var Q=new d;if(this.addLayersFromMap&&this.map){var T=[],O=this.map.graphicsLayerIds;if(O&&O.length){for(var Z=0;Z<O.length;Z++){var na=this.map.getLayer(O[Z]);na&&T.push(this._featureLayerLoaded(na))}C(T).always(f.hitch(this,
function(ia){for(var X,ha=this.sources,V=0;V<ia.length;V++)ia[V]&&ia[V].loaded&&"Feature Layer"===ia[V].type&&(ha.push({featureLayer:ia[V],enableSuggestions:!0}),X=!0);X&&this.set("sources",ha);Q.resolve()}))}else Q.resolve()}else Q.resolve();return Q.promise},_switchCoordinatesClick:function(Q){Q.preventDefault();if(Q=g.get(Q.target,"data-switch-coordinates"))this._cancelSuggest(),this.set("value",Q),this.search()},_moreResultsClick:function(Q){Q.preventDefault();var T=Q.target;Q=parseInt(g.get(T,
"data-source-index"),10);T=parseInt(g.get(T,"data-index"),10);var O=this.searchResults;O&&O[Q]&&(Q=O[Q][T])&&this.select(Q)},_showMoreResultsClick:function(Q){Q.preventDefault();if(Q=u.byId(this._moreResultsId)){m.toggle(Q,this.css.searchShowMoreResults);var T=u.byId(this._moreResultsId+"_show");T&&(m.contains(Q,this.css.searchShowMoreResults)?g.set(T,"textContent",n.widgets.Search.main.hideMoreResults):g.set(T,"textContent",n.widgets.Search.main.showMoreResults))}},_featureLayerLoaded:function(Q){var T=
new d;if(Q.loaded)T.resolve(Q);else if(Q.loadError)T.reject(this._error("Layer failed to load."));else{var O=a.once(Q,"load",f.hitch(this,function(){Z.remove();T.resolve(Q)}));var Z=a.once(Q,"error",f.hitch(this,function(){O.remove();T.reject(this._error("Layer could not be loaded."))}))}return T.promise},_getObjectSize:function(Q){var T=0,O;for(O in Q)Q.hasOwnProperty(O)&&T++;return T},_sourcesEvent:function(Q,T){var O=g.get(T,"data-index"),Z=e("li",this.sourcesNode);T=c.indexOf(Z,T);O!==this._allIndex&&
(O=parseInt(O,10));"click"===Q.type||Q.keyCode===b.ENTER?(this.set("activeSourceIndex",O),G.focus(this.inputNode),this._hideSourcesMenu()):Q.keyCode===b.UP_ARROW?(Q.stopPropagation(),Q.preventDefault(),Q=T-1,0>Q?G.focus(this.sourcesBtnNode):G.focus(Z[Q])):Q.keyCode===b.DOWN_ARROW?(Q.stopPropagation(),Q.preventDefault(),Q=T+1,Q>=Z.length?G.focus(this.sourcesBtnNode):G.focus(Z[Q])):Q.keyCode===b.ESCAPE&&(this._hideSourcesMenu(),G.focus(this.inputNode))},_suggestionsEvent:function(Q,T){var O=g.get(T,
"data-source-index"),Z=parseInt(g.get(T,"data-index"),10),na=e("li",this.suggestionsNode),ia=this.sources;T=c.indexOf(na,T);O!==this._allIndex&&(O=parseInt(O,10));var X;this._clearQueryTimeout();"click"===Q.type||Q.keyCode===b.ENTER?((na=this.suggestResults)&&na[O]&&na[O][Z]&&(X=na[O][Z]),X&&(X.index=O,ia[O].featureLayer?(O=ia[O].featureLayer.objectIdField,X[this._objectIdIdentifier]=X.feature.attributes[O],this.set("value",this._getSuggestionName(X)),this.set("selectedFeatureId",X.feature.attributes[O])):
X.magicKey&&X.text&&(this.set("value",X.text),this.set("magicKey",X.magicKey)),this.search(X),G.focus(this.inputNode))):Q.keyCode===b.BACKSPACE||Q.keyCode===b.DELETE?G.focus(this.inputNode):Q.keyCode===b.UP_ARROW?(Q.stopPropagation(),Q.preventDefault(),X=T-1,0>X?G.focus(this.inputNode):G.focus(na[X])):Q.keyCode===b.DOWN_ARROW?(Q.stopPropagation(),Q.preventDefault(),X=T+1,X>=na.length?G.focus(this.inputNode):G.focus(na[X])):Q.keyCode===b.ESCAPE&&(this._hideMenus(),G.focus(this.inputNode))},_getResultName:function(Q){var T;
Q.hasOwnProperty("name")&&null!==Q.name&&(T=Q.name.toString());T||(T=n.widgets.Search.main.untitledResult);return T},_getSuggestionName:function(Q){var T;Q.hasOwnProperty("name")&&null!==Q.name&&(T=Q.name.toString());Q=Q.text||T;Q||(Q=n.widgets.Search.main.untitledResult);return Q},_searchResultHTML:function(Q){var T="";if(Q.feature&&Q.feature.attributes&&Q.feature.attributes.Addr_type&&"LatLong"===Q.feature.attributes.Addr_type){var O=Q.name.split(" ");if(2===O.length){var Z=O[0];var na=O[1]}na&&
Z?(Q=parseFloat(Z),na=parseFloat(na),O=na+", "+Q,T+='\x3cdiv class\x3d"'+this.css.searchMoreResultsItem+'"\x3e',T+='\x3cdiv class\x3d"'+this.css.latLonHeader+'"\x3e'+n.widgets.Search.main.lonlat+"\x3c/div\x3e",T=T+(Q+", "+na)+'\x3c/div\x3e\x3cdiv class\x3d"'+(this.css.searchMoreResultsItem+'"\x3e'),Q===na||90<Q||-90>Q||180<na||-180>na||(T+='\x3cdiv class\x3d"'+this.css.latLonHeader+'"\x3e'+n.widgets.Search.main.reverseLonLatHeader+"\x3c/div\x3e",T+='\x3ca data-switch-coordinates\x3d"'+O+'" tabindex\x3d"0" href\x3d"#"\x3e'+
O+"\x3c/a\x3e\x3c/div\x3e")):T=Q.name}else T=Q.name;return T},_moreResultsHTML:function(Q){var T="",O="",Z=this.searchResults,na=this.sources,ia=0;if(Z){O+='\x3cdiv class\x3d"'+this.css.searchMoreResultsItem+'"\x3e';O+='\x3ca href\x3d"#" id\x3d"'+this._moreResultsId+'_show"\x3e'+n.widgets.Search.main.showMoreResults+"\x3c/a\x3e";O=O+'\x3c/div\x3e\x3cdiv class\x3d"'+(this.css.searchMoreResultsList+'"\x3e');O+='\x3cdiv id\x3d"'+this._moreResultsId+'_list"\x3e';for(var X in Z)if(Z[X]){var ha=Z[X].length;
if(ha){var V=1===ha&&Z[X][0]===Q;if(1<this._getObjectSize(Z)&&!V){var ea=this._getSourceName(X);O+='\x3cdiv class\x3d"'+this.css.searchMoreResultsListHeader+'"\x3e'+ea+"\x3c/div\x3e"}if(ha&&!V){O+="\x3cul\x3e";ea=na[X].maxResults||this.maxResults;for(V=0;V<ha&&V<ea;++V)if(Z[X][V]!==Q){var U=this._getResultName(Z[X][V]);O+='\x3cli\x3e\x3ca tabindex\x3d"0" data-index\x3d"'+V+'" data-source-index\x3d"'+X+'" href\x3d"#"\x3e'+U+"\x3c/a\x3e\x3c/li\x3e";ia++}O+="\x3c/ul\x3e"}}}O+="\x3c/div\x3e\x3c/div\x3e"}ia&&
(T+=O);return T},_validField:function(Q,T){return Q.getField(T)},_validFields:function(Q,T){if(Q&&T&&T.length){for(var O=0;O<T.length;O++)if(!this._validField(Q,T[O]))return!1;return!0}return!1},_getCodedName:function(Q,T){if(Q&&Q.length)for(var O=0,Z=Q.length;O<Z;O++){var na=Q[O];if(na.code===T)return na.name}},_getCodedValue:function(Q,T,O){if(Q&&Q.length)for(var Z=0,na=Q.length;Z<na;Z++){var ia=Q[Z],X=ia.name,ha=T;O||(X=X.toLowerCase(),ha=ha.toLowerCase());if(X===ha)return ia.code}return!1},_whereClause:function(Q,
T,O,Z,na){var ia=null;if(Q){var X="",ha=this.reHostedFS.test(T.url);ha&&this._containsNonLatinCharacter(Q)&&(X="N");if(O&&O.length)for(var V=0,ea=O.length;V<ea;V++){var U="";U=Q.replace(/'/g,"''");var ka=O[V],ma=T.getField(ka),sa=T.getDomain(ka);sa&&"codedValue"===sa.type&&(U=this._getCodedValue(sa.codedValues,U,Z));!1!==U&&(ma=ma.type,"esriFieldTypeString"===ma||"esriFieldTypeDate"===ma?Z&&"search"===na?U=ka+" \x3d "+X+"'"+U+"'":(ka=ha?ka:"LOWER("+ka+")",U=(ha?U:U.toLowerCase())+"%",U=ka+" LIKE "+
X+"'"+U+"'"):"esriFieldTypeOID"===ma||"esriFieldTypeSmallInteger"===ma||"esriFieldTypeInteger"===ma||"esriFieldTypeSingle"===ma||"esriFieldTypeDouble"===ma?(U=parseFloat(U),U=isNaN(U)?!1:ka+" \x3d "+U):U=ka+" \x3d "+U,U&&(ia=ia?ia+" or ":"",ia+=U))}}return ia},_suggest:function(Q){Q||(Q={index:this.activeSourceIndex,text:this.value});var T=new d,O=Q.index,Z=this.sources[O],na=this.enableSuggestions;Z.hasOwnProperty("enableSuggestions")&&(na=Z.enableSuggestions);var ia=0;if(Q.hasOwnProperty("text")&&
Q.text){var X=f.trim(Q.text);ia=Q.text.length}Q=Z.minCharacters||this.minCharacters;if(na&&X&&ia>=Q&&this._supportsPagination(Z)){var ha="";Z.prefix&&(ha+=Z.prefix);ha+=X;Z.suffix&&(ha+=Z.suffix);var V=this._defaultSR;this.map&&(V=this.map.spatialReference);na={};Z.locator?(Z.categories&&(na.categories=Z.categories),Z.locator.outSpatialReference=V,this.map&&Z.localSearchOptions&&Z.localSearchOptions.hasOwnProperty("distance")&&Z.localSearchOptions.hasOwnProperty("minScale")&&(ia=this._getScale(),
!Z.localSearchOptions.minScale||ia&&ia<=parseFloat(Z.localSearchOptions.minScale))&&(na.location=this.map.extent.getCenter(),na.distance=Z.localSearchOptions.distance),na.text=ha,Z.useMapExtent&&this.map&&this.map.extent&&(na.searchExtent=this.map.extent),Z.searchExtent&&(na.searchExtent=Z.searchExtent),na.maxSuggestions=Z.maxSuggestions||this.maxSuggestions,Z.sourceCountry&&(na.countryCode=Z.sourceCountry),Z.countryCode&&(na.countryCode=Z.countryCode),Z.locator.suggestLocations(na).then(f.hitch(this,
function(ea){T.resolve(ea)}),f.hitch(this,function(ea){ea||(ea=this._error("Locator suggestLocations could not be performed."));T.reject(ea)}))):Z.featureLayer?this._featureLayerLoaded(Z.featureLayer).then(f.hitch(this,function(){var ea=this._getDisplayField(Z),U=Z.searchFields||[ea],ka=[];Z.suggestionTemplate?Z.suggestionTemplate.replace(/(?:\$\{([^}]+)\})/g,function(Aa,za){ka.push(za)}):ka=[ea];-1===c.indexOf(ka,Z.featureLayer.objectIdField)&&ka.push(Z.featureLayer.objectIdField);ea=this._validField(Z.featureLayer,
ea);var ma=this._validFields(Z.featureLayer,ka),sa=this._validFields(Z.featureLayer,U);if(ea&&ma&&sa){ea=new aa;Z.hasOwnProperty("suggestQueryParams")&&f.mixin(ea,Z.suggestQueryParams);ea.outSpatialReference=V;ea.returnGeometry=!1;ea.num=Z.maxSuggestions||this.maxSuggestions;ea.outFields=ka;Z.useMapExtent&&this.map&&this.map.extent&&(ea.geometry=this.map.extent);Z.searchExtent&&(ea.geometry=Z.searchExtent);la(Z.featureLayer)&&fa(Z.featureLayer,U)&&!Z.exactMatch&&ha?ea.fullText=ca(ha,U):ea.where=this._whereClause(ha,
Z.featureLayer,U,Z.exactMatch,"suggest");if(ea.fullText||ea.where)var pa=!0;pa?Z.featureLayer.queryFeatures(ea,f.hitch(this,function(Aa){var za;(Aa=Aa.features)&&(za=this._hydrateResults(Aa,O,!0));T.resolve(za)}),f.hitch(this,function(Aa){Aa||(Aa=this._error("FeatureLayer queryFeatures errored with suggestions"));T.reject(Aa)})):T.resolve()}else T.reject(this._error("Invalid FeatureLayer field"))})):T.reject(this._error("Invalid source"))}else T.resolve();return T.promise},_supportsPagination:function(Q){var T;
Q.locator?T=!0:Q.featureLayer&&Q.featureLayer.advancedQueryCapabilities&&Q.featureLayer.advancedQueryCapabilities.supportsPagination&&(T=!0);return T},_suggestQueries:function(Q){var T=this.sources,O=this.activeSourceIndex,Z=[];if(O===this._allIndex)for(O=0;O<T.length;O++){var na=Q;na.index=O;na=this._suggest(na);Z.push(na)}else Q.index=O,na=this._suggest(Q),Z.push(na);return C(Z)},_getPointFromGeometry:function(Q){switch(Q.type){case "extent":var T=Q.getCenter();break;case "multipoint":T=Q.getPoint(0);
break;case "point":T=Q;break;case "polygon":T=Q.getCentroid();break;case "polyline":T=Q.getPoint(0,0)}return T},_searchQueries:function(Q){Q.hasOwnProperty("index")||(Q.index=this.activeSourceIndex);var T=[];if(Q.index===this._allIndex)for(var O=this.sources,Z=0;Z<O.length;Z++){var na=Q;na.index=Z;na=this._search(na);T.push(na)}else Q=this._search(Q),T.push(Q);return C(T)},_searchButton:function(){this.enableButtonMode&&!this.expanded?(this.expand(),G.focus(this.inputNode)):(this._cancelSuggest(),
this.search())},_search:function(Q){Q||(Q={text:this.value,magicKey:null,geometry:null,point:null,index:this.activeSourceIndex,latlon:null});this.selectedFeatureId&&(Q.text=null,Q[this._objectIdIdentifier]=this.selectedFeatureId);var T,O=new d,Z=Q.index,na=this.sources[Z],ia;Q.hasOwnProperty("text")&&Q.text&&(ia=f.trim(Q.text));if(na){var X="";na.prefix&&!Q.magicKey&&(X+=na.prefix);X+=ia;na.suffix&&!Q.magicKey&&(X+=na.suffix);var ha=this._defaultSR;this.map&&(ha=this.map.spatialReference);if(na.locator)if(Q.hasOwnProperty("text")&&
ia){var V={};na.categories&&(V.categories=na.categories);na.locationType&&(V.locationType=na.locationType);ha&&(na.locator.outSpatialReference=ha);if(this.map&&na.localSearchOptions&&na.localSearchOptions.hasOwnProperty("distance")&&na.localSearchOptions.hasOwnProperty("minScale")){var ea=this._getScale();if(!na.localSearchOptions.minScale||ea&&ea<=parseFloat(na.localSearchOptions.minScale))V.location=this.map.extent.getCenter(),V.distance=na.localSearchOptions.distance}V.address={};V.maxLocations=
na.maxResults||this.maxResults;na.useMapExtent&&this.map&&this.map.extent&&(V.searchExtent=this.map.extent);na.searchExtent&&(V.searchExtent=na.searchExtent);na.sourceCountry&&(V.countryCode=na.sourceCountry);na.countryCode&&(V.countryCode=na.countryCode);Q.magicKey&&(V.magicKey=Q.magicKey);na.singleLineFieldName?V.address[na.singleLineFieldName]=X:V.address["Single Line Input"]=X;na.outFields&&(V.outFields=na.outFields);na.locator.addressToLocations(V).then(f.hitch(this,function(U){U=this._hydrateResults(U,
Z,!1);O.resolve(U)}),f.hitch(this,function(U){U||(U=this._error("Locator addressToLocations could not be performed"));O.reject(U)}))}else Q.geometry?(T=this._getPointFromGeometry(Q.geometry.geometry))?this._reverseGeocodePoint(Z,T).then(function(U){O.resolve(U)},function(U){O.reject(U)}):O.reject(this._error("Invalid point to reverse geocode")):Q.point?this._reverseGeocodePoint(Z,Q.point).then(function(U){O.resolve(U)},function(U){O.reject(U)}):Q.latlon?(V=new N(Q.latlon,this._defaultSR),this._reverseGeocodePoint(Z,
V).then(function(U){O.resolve(U)},function(U){O.reject(U)})):Q.hasOwnProperty("text")&&!ia?O.resolve([]):O.reject(this._error("Invalid query type for Locator"));else na.featureLayer?this._featureLayerLoaded(na.featureLayer).then(f.hitch(this,function(){var U=this._getDisplayField(na),ka=na.searchFields||[U];U=this._validField(na.featureLayer,U);var ma=this._validFields(na.featureLayer,ka);if(U&&ma){U=new aa;na.hasOwnProperty("searchQueryParams")&&f.mixin(U,na.searchQueryParams);ha&&(U.outSpatialReference=
ha,ma=this.map&&this.map.getMaxResolution()||1/Y.getUnitValueForSR(ha))&&(U.maxAllowableOffset=ma);U.returnGeometry=!0;na.outFields&&(U.outFields=na.outFields);if(!Q.hasOwnProperty(this._objectIdIdentifier)){this._supportsPagination(na)&&(U.num=na.maxResults||this.maxResults);na.useMapExtent&&this.map&&this.map.extent&&(U.geometry=this.map.extent);na.searchExtent&&(U.geometry=na.searchExtent);var sa=na.exactMatch}Q.hasOwnProperty("text")&&ia?(la(na.featureLayer)&&fa(na.featureLayer,ka)&&!sa&&X?U.fullText=
ca(X,ka):U.where=this._whereClause(X,na.featureLayer,ka,sa,"search"),ka=U.fullText||U.where?!0:!1):Q.hasOwnProperty(this._objectIdIdentifier)?(U.objectIds=[Q[this._objectIdIdentifier]],ka=!0):Q.geometry?(U.geometry=Q.geometry,ka=!0):Q.point?(U.geometry=Q.point,ka=!0):Q.latlon?(T=new N(Q.latlon,this._defaultSR),U.geometry=T,ka=!0):(Q.hasOwnProperty("text")&&!ia?O.resolve([]):O.reject(this._error("Invalid query type for FeatureLayer")),ka=!1);ka?na.featureLayer.queryFeatures(U,f.hitch(this,function(pa){pa=
pa.features;var Aa;pa&&(Aa=this._hydrateResults(pa,Z,!1));O.resolve(Aa)}),f.hitch(this,function(pa){pa||(pa=this._error("FeatureLayer queryFeatures could not be performed"));O.reject(pa)})):O.resolve()}else O.reject(this._error("Invalid FeatureLayer field"))})):O.reject(this._error("Invalid source"))}else O.reject(this._error("Source is undefined"));return O.promise},_clearQueryTimeout:function(){this._queryTimer&&clearTimeout(this._queryTimer)},_formatResults:function(Q,T,O){O={activeSourceIndex:T,
value:O,numResults:0,numErrors:0,errors:null,results:null};var Z={},na={};if(Q)if(T===this._allIndex)for(T=0;T<Q.length;T++)Q[T]&&(Q[T]instanceof Error?(Z[T]=Q[T],O.numErrors++):(na[T]=Q[T],O.numResults+=Q[T].length));else Q[0]&&(Q[0]instanceof Error?(Z[T]=Q[0],O.numErrors++):(na[T]=Q[0],O.numResults+=Q[0].length));O.numErrors&&(O.errors=Z);O.numResults&&(O.results=na);return O},_reverseGeocodePoint:function(Q,T){var O=new d,Z=this.sources[Q];if(T&&Z){var na=Z.locationToAddressDistance||this.locationToAddressDistance;
Z.locator.outSpatialReference=this._defaultSR;this.map&&(Z.locator.outSpatialReference=this.map.spatialReference);Z.locator.locationToAddress(T,na,f.hitch(this,function(ia){ia=this._hydrateResults([ia],Q,!1);O.resolve(ia)}),f.hitch(this,function(ia){ia||(ia=this._error("Locator locationToAddress could not be performed"));O.reject(ia)}))}else O.reject(this._error("No point or source defined for reverse geocoding"));return O.promise},_cancelDeferreds:function(){if(this._deferreds&&this._deferreds.length)for(var Q=
0;Q<this._deferreds.length;Q++)this._deferreds[Q].cancel(this.declaredClass+" cancelling request");this._deferreds=[]},_sourceBtnKey:function(Q){if(Q){var T=e("li",this.sourcesNode);Q.keyCode===b.UP_ARROW?(Q.stopPropagation(),Q.preventDefault(),this._showSourcesMenu(),(Q=T.length)&&G.focus(T[Q-1])):Q.keyCode===b.DOWN_ARROW&&(Q.stopPropagation(),Q.preventDefault(),this._showSourcesMenu(),T[0]&&G.focus(T[0]))}},_inputKey:function(Q){if(Q){var T=e("li",this.suggestionsNode),O=this.suggestResults;if(Q.keyCode===
b.TAB||Q.keyCode===b.ESCAPE)this._cancelSuggest(),this._hideMenus();else if(Q.keyCode===b.UP_ARROW)Q.stopPropagation(),Q.preventDefault(),this._cancelSuggest(),O&&this._showSuggestionsMenu(),(Q=T.length)&&G.focus(T[Q-1]);else if(Q.keyCode===b.DOWN_ARROW)Q.stopPropagation(),Q.preventDefault(),this._cancelSuggest(),O&&this._showSuggestionsMenu(),T[0]&&G.focus(T[0]);else{if(Q.ctrlKey||Q.metaKey||Q.keyCode===b.copyKey||Q.keyCode===b.LEFT_ARROW||Q.keyCode===b.RIGHT_ARROW||Q.keyCode===b.ENTER)return Q;
this._suggestDelay()}}},_cancelSuggest:function(){this._cancelDeferreds();this._clearQueryTimeout()},_suggestDelay:function(){this._cancelSuggest();this._changeValue();this._queryTimer=setTimeout(f.hitch(this,function(){this.suggest()}),this.suggestionDelay)},_changeValue:function(){this.set("magicKey",null);this.set("selectedFeatureId",null);this._changeAttrValue("value",this.inputNode.value);this._checkStatus()},_inputClick:function(){this._hideSourcesMenu();this._hideNoResultsMenu()},_getSourceName:function(Q){return this._sourceNames[Q]},
_loadSources:function(Q){Q=c.filter(Q,function(T){return!!T.featureLayer});Q=c.map(Q,function(T){return this._featureLayerLoaded(T.featureLayer)},this);return C(Q)},_createSourceNameMap:function(Q){return this._loadSources(Q).then(f.hitch(this,function(){var T=c.map(Q,function(O){return O.name||O.featureLayer&&O.featureLayer.name||n.widgets.Search.main.untitledSource});this._preventDuplicateSourceNames(Q,T);return T}))},_getDuplicateSourceNameIndexes:function(Q){var T={},O=[];c.forEach(Q,function(Z,
na){T.hasOwnProperty(Z)?(-1===O.indexOf(T[Z])&&O.push(T[Z]),O.push(na)):Q.lastIndexOf(Z)!==na&&(T[Z]=na)});return O},_preventDuplicateSourceNames:function(Q,T){if(T&&1<T.length){var O=this._getDuplicateSourceNameIndexes(T);c.forEach(O,function(Z){T[Z]+=this._getFieldsString(Q[Z])},this)}},_getFieldsString:function(Q){var T="",O=Q.featureLayer;if(O){Q=Q.searchFields||[this._getDisplayField(Q)];for(var Z=0;Z<Q.length;Z++){T=0===Z?T+": ":T+", ";var na=Q[Z],ia=O.getFieldLabel(na);T+=ia||na}}return T},
_splitResult:function(Q,T){T=t.escapeString(T);return Q.replace(new RegExp("(^|)("+T+")(|$)","ig"),"$1|$2|$3").split("|")},_insertSuggestions:function(Q,T){if(this.enableSuggestionsMenu&&this.suggestionsNode){this._hideSourcesMenu();this._hideNoResultsMenu();var O=this.sources;if(Q){var Z=p.create("div");for(var na in Q)if(Q[na]&&Q[na].length){var ia=this._getSourceName(na);1<O.length&&this.activeSourceIndex===this._allIndex&&p.create("div",{className:this.css.searchMenuHeader,textContent:ia},Z);
ia=p.create("ul",{role:"menu"},Z);for(var X=O[na].maxSuggestions||this.maxSuggestions,ha=0;ha<Q[na].length&&ha<X;++ha){var V=p.create("li",{"data-index":ha,"data-source-index":na,role:"menuitem",tabindex:0},ia),ea=this._getSuggestionName(Q[na][ha]);ea=this._splitResult(ea,T);for(var U=ea.length,ka=0;ka<U;ka++){var ma=ea[ka];ma.toLowerCase()===T.toLowerCase()?p.create("strong",{textContent:ma},V):(ma=document.createTextNode(ma),p.place(ma,V))}}}}Z?(p.place(Z,this.suggestionsNode,"only"),this._showSuggestionsMenu()):
(p.empty(this.suggestionsNode),this._hideSuggestionsMenu())}},_insertSources:function(Q){if(this.enableSourcesMenu&&Q&&1<Q.length){var T,O=this.activeSourceIndex,Z=p.create("ul",{role:"menu"});if(this.enableSearchingAll){var na="";O===this._allIndex&&(na="active");p.create("li",{"data-index":this._allIndex,role:"menuitem",className:na,tabIndex:0,textContent:n.widgets.Search.main.all},Z)}for(T=0;T<Q.length;T++){na="";T===O&&(na=this.css.activeSource);var ia=this._getSourceName(T);p.create("li",{"data-index":T,
role:"menuitem",className:na,tabIndex:0,textContent:ia},Z)}m.add(this.containerNode,this.css.hasMultipleSources);p.place(Z,this.sourcesNode,"only")}else m.remove(this.containerNode,this.css.hasMultipleSources),p.empty(this.sourcesNode)},_showLoading:function(){m.add(this.containerNode,this.css.searchLoading)},_hideLoading:function(){m.remove(this.containerNode,this.css.searchLoading)},_checkStatus:function(){this.value?(m.add(this.containerNode,this.css.hasValue),g.set(this.clearNode,"title",n.widgets.Search.main.clearButtonTitle)):
this.clear()},_closePopup:function(){this.enableInfoWindow&&this.map&&this.map.infoWindow&&this.map.infoWindow.hide()},_noResults:function(Q){var T;Q&&(T=f.trim(Q));var O=p.create("div",{className:this.css.searchNoResultsBody});Q&&T?(p.create("div",{className:this.css.searchNoResultsHeader,textContent:n.widgets.Search.main.noResults},O),p.create("div",{className:this.css.searchNoResultsText,textContent:F.substitute({value:'"'+Q+'"'},n.widgets.Search.main.noResultsFound)},O)):(Q=p.create("div",{},
O),p.create("span",{"aria-hidden":"true",className:this.css.searchNoValueIcon},Q),p.create("span",{className:this.css.searchNoValueText,textContent:n.widgets.Search.main.emptyValue},Q));p.place(O,this.noResultsMenuNode,"only")},_hideMenus:function(){this._hideSourcesMenu();this._hideSuggestionsMenu();this._hideNoResultsMenu()},_hideNoResultsMenu:function(){m.remove(this.containerNode,this.css.showNoResults)},_showNoResultsMenu:function(){this._hideSourcesMenu();this._hideSuggestionsMenu();m.add(this.containerNode,
this.css.showNoResults)},_hideSourcesMenu:function(){m.remove(this.containerNode,this.css.showSources)},_hideSuggestionsMenu:function(){m.remove(this.containerNode,this.css.showSuggestions)},_showSourcesMenu:function(){this._hideSuggestionsMenu();this._hideNoResultsMenu();m.add(this.containerNode,this.css.showSources)},_showSuggestionsMenu:function(){this._hideSourcesMenu();this._hideNoResultsMenu();m.add(this.containerNode,this.css.showSuggestions)},_toggleSourcesMenu:function(){this._hideSuggestionsMenu();
this._hideNoResultsMenu();m.toggle(this.containerNode,this.css.showSources)},_getFirstStringField:function(Q){if(Q&&(Q=Q.fields)&&Q.length)for(var T=0;T<Q.length;T++){var O=Q[T];if("esriFieldTypeString"===O.type)return O.name}return""},_getDisplayField:function(Q){return Q.displayField||Q.featureLayer.displayField||this._getFirstStringField(Q.featureLayer)},_validLocation:function(Q){return Q&&"number"===typeof Q.x&&"number"===typeof Q.y},_validExtent:function(Q){return Q&&"number"===typeof Q.xmin&&
"number"===typeof Q.ymin&&"number"===typeof Q.xmax&&"number"===typeof Q.ymax},_hydrateResult:function(Q,T,O){var Z={},na=this._defaultSR;T=this.sources[T];this.map&&(na=this.map.spatialReference);if(Q.hasOwnProperty("text")&&Q.hasOwnProperty("magicKey"))return Q;if(Q.hasOwnProperty("geometry")){var ia=new B(Q.toJson());Z.feature=ia;(ia=Z.feature.geometry)&&ia.setSpatialReference(na)}else if(Q.hasOwnProperty("location")&&this._validLocation(Q.location)){var X=new N(Q.location.x,Q.location.y,na);ia=
{};Q.hasOwnProperty("attributes")&&(ia=Q.attributes);Q.hasOwnProperty("address")&&"object"===typeof Q.address&&f.mixin(ia,Q.address);Q.hasOwnProperty("score")&&(ia.score=Q.score);Z.feature=new B(X,null,ia,null)}!Z.feature&&O&&(ia={},Q.hasOwnProperty("attributes")&&(ia=Q.attributes),Q.hasOwnProperty("score")&&(ia.score=Q.score),Z.feature=new B(null,null,ia,null));if(Z.feature){if(Q.hasOwnProperty("extent")&&this._validExtent(Q.extent))Z.extent=new P(Q.extent),Z.extent.setSpatialReference(na);else if(Z.feature&&
Z.feature.geometry)switch(Z.feature.geometry.type){case "extent":Z.extent=Z.feature.geometry;break;case "multipoint":Z.extent=R.getDenormalizedExtent(Z.feature.geometry);break;case "polygon":Z.extent=R.getDenormalizedExtent(Z.feature.geometry);break;case "polyline":Z.extent=R.getDenormalizedExtent(Z.feature.geometry);break;case "point":this.map?(na=this.zoomScale,T&&T.zoomScale&&(na=T.zoomScale),this._getScale()>na?Z.extent=Y.getExtentForScale(this.map,na).centerAt(Z.feature.geometry):Z.extent=this.map.extent.centerAt(Z.feature.geometry)):
Z.extent=new P({xmin:Z.feature.geometry.x-.25,ymin:Z.feature.geometry.y-.25,xmax:Z.feature.geometry.x+.25,ymax:Z.feature.geometry.y+.25,spatialReference:this._defaultSR})}else Z.extent=null;Z.name="";T.featureLayer?T.suggestionTemplate&&O?Z.name=F.substitute(Q.attributes,T.suggestionTemplate):T.searchTemplate?Z.name=F.substitute(Q.attributes,T.searchTemplate):(ia=this._getDisplayField(T),O=T.featureLayer.getField(ia),na=T.featureLayer.getDomain(ia),ia&&Q.hasOwnProperty("attributes")&&Q.attributes.hasOwnProperty(ia)&&
(Q=Q.attributes[ia],na&&"codedValue"===na.type?Z.name=this._getCodedName(na.codedValues,Q):O&&"esriFieldTypeDate"===O.type&&!isNaN(Q)?Z.name=l.format(new Date(Q)):Z.name=Q)):Q.address&&T.searchTemplate?Z.name=F.substitute(Q.address,T.searchTemplate):Q.hasOwnProperty("name")?Z.name=Q.name:Q.hasOwnProperty("attributes")&&"object"===typeof Q.attributes&&Q.attributes.LongLabel?Z.name=Q.attributes.LongLabel:Q.hasOwnProperty("attributes")&&"object"===typeof Q.attributes&&Q.attributes.Match_addr?(Z.name=
Q.attributes.Match_addr,Q.attributes.Addr_type&&"POI"===Q.attributes.Addr_type&&Q.attributes.StAddr&&Q.attributes.City?Z.name+=" - "+Q.attributes.StAddr+", "+Q.attributes.City:Q.attributes.Addr_type&&"POI"===Q.attributes.Addr_type&&Q.attributes.City&&(Z.name+=" - "+Q.attributes.City)):Q.hasOwnProperty("address")&&"string"===typeof Q.address?Z.name=Q.address:Q.hasOwnProperty("address")&&"object"===typeof Q.address&&Q.address.hasOwnProperty("Address")?Q.address.hasOwnProperty("Match_addr")?Z.name=Q.address.Match_addr:
Q.address.hasOwnProperty("Address")&&(Z.name=Q.address.Address):Z.feature&&Z.feature.geometry&&(Z.name=Z.feature.geometry.x+","+Z.feature.geometry.y);T.featureLayer&&Z.feature&&ta(Z.feature,T.featureLayer);return Z}},_getScale:function(){var Q;this.map&&"function"===typeof this.map.getScale&&(Q=this.map.getScale());return Q},_hydrateResults:function(Q,T,O){var Z=[],na=0;if(Q&&Q.length)for(na;na<Q.length;na++){var ia=this._hydrateResult(Q[na],T,O);ia&&Z.push(ia)}return Z},_containsNonLatinCharacter:function(Q){for(var T=
0;T<Q.length;T++)if(255<Q.charCodeAt(T))return!0;return!1},_setPlaceholder:function(Q){var T="",O=this.sources[Q];Q===this._allIndex?T=this.allPlaceholder||n.widgets.Search.main.allPlaceholder:O&&O.placeholder&&(T=O.placeholder);var Z=n.widgets.Search.main.all;O&&(Z=this._getSourceName(Q));g.set(this.sourceNameNode,"textContent",Z);g.set(this.inputNode,"placeholder",T);g.set(this.inputNode,"title",T)},_updateActiveSource:function(){var Q=this.sources,T=this.activeSourceIndex,O;Q&&Q[T]&&(O=Q[T]);O?
this.set("activeSource",O):this.set("activeSource",null)},_updateVisible:function(){this.visible?this.show():this.hide()},_updateButtonMode:function(Q){Q?(m.toggle(this.containerNode,this.css.searchExpanded,this.expanded),m.toggle(this.containerNode,this.css.searchCollapsed,!this.expanded),m.add(this.containerNode,this.css.hasButtonMode)):(m.remove(this.containerNode,this.css.searchExpanded),m.remove(this.containerNode,this.css.searchCollapsed),m.remove(this.containerNode,this.css.hasButtonMode))},
_setDefaultActiveSourceIndex:function(Q){Q&&1===Q.length||!this.enableSearchingAll?this.set("activeSourceIndex",0):this.set("activeSourceIndex",this._allIndex)},_setEnableSourcesMenuAttr:function(Q){this._set("enableSourcesMenu",Q);this._created&&this._insertSources(this.sources)},_setEnableSearchingAllAttr:function(Q){this._set("enableSearchingAll",Q);this._created&&(this._setDefaultActiveSourceIndex(this.sources),this._hideMenus(),this._insertSources(this.sources))},_setSourcesAttr:function(Q){this._createSourceNameMap(Q).then(f.hitch(this,
function(T){this._sourceNames=T;this._created&&(this._setDefaultActiveSourceIndex(Q),this._hideMenus(),this._insertSources(Q))}));this._set("sources",Q)},_setAllPlaceholderAttr:function(Q){this._set("allPlaceholder",Q);this._created&&this._setPlaceholder(this.activeSourceIndex)},_setActiveSourceIndexAttr:function(Q){this._set("activeSourceIndex",Q);this._updateActiveSource();this._created&&(this._setPlaceholder(Q),this._hideMenus(),this._insertSources(this.sources))},_setMaxLengthAttr:function(Q){this._set("maxLength",
Q);this._created&&g.set(this.inputNode,"maxLength",Q)},_setValueAttr:function(Q){this.set("magicKey",null);this.set("selectedFeatureId",null);this._set("value",Q);this._created&&(g.set(this.inputNode,"value",Q),this._checkStatus())},_setVisibleAttr:function(Q){this._set("visible",Q);this._created&&this._updateVisible()},_setEnableButtonModeAttr:function(Q){this._set("enableButtonMode",Q);this._created&&this._updateButtonMode(Q)},_setThemeAttr:function(Q){this._created&&(m.remove(this.domNode,this.theme),
m.add(this.domNode,Q));this._set("theme",Q)}});f.setObject("dijit.Search",J,y);return J})},"esri/tasks/locator":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has ../kernel ../request ../deferredUtils ./Task ./AddressCandidate".split(" "),function(S,J,f,c,h,d,b,a,e,q,t){S=S(q,{declaredClass:"esri.tasks.Locator",_eventMap:{"address-to-locations-complete":["addresses"],"addresses-to-locations-complete":["addresses"],"location-to-address-complete":["address"],
"suggest-locations-complete":["suggestions"]},constructor:function(u){this._geocodeHandler=J.hitch(this,this._geocodeHandler);this._geocodeAddressesHandler=J.hitch(this,this._geocodeAddressesHandler);this._reverseGeocodeHandler=J.hitch(this,this._reverseGeocodeHandler);this.registerConnectEvents()},outSpatialReference:null,setOutSpatialReference:function(u){this.outSpatialReference=u},_geocodeHandler:function(u,g,m,v,p){try{var l=u.candidates;g=[];var n,k=l.length,r=u.spatialReference,w;for(n=0;n<
k;n++){var x=l[n];if(w=x.location)w.spatialReference=r;g[n]=new t(x)}this._successHandler([g],"onAddressToLocationsComplete",m,p)}catch(D){this._errorHandler(D,v,p)}},_geocodeAddressesHandler:function(u,g,m,v,p){try{var l=u.locations;g=[];var n,k=l.length,r=u.spatialReference,w;for(n=0;n<k;n++){if(w=l[n].location)w.spatialReference=r;g[n]=new t(l[n])}this._successHandler([g],"onAddressesToLocationsComplete",m,p)}catch(x){this._errorHandler(x,v,p)}},addressToLocations:function(u,g,m,v,p){var l;if(u.address){v=
m;m=g;g=u.outFields;p=u.searchExtent;var n=u.countryCode;var k=u.magicKey;var r=u.distance;var w=u.categories;u.location&&this.normalization&&(l=u.location.normalize());var x=u.locationType;var D=u.maxLocations;var G=u.forStorage;u=u.address}p&&(p=p.shiftCentralMeridian());var F=this.outSpatialReference;u=this._encode(J.mixin({},this._url.query,u,{f:"json",outSR:F&&h.toJson(F.toJson()),outFields:g&&g.join(",")||null,searchExtent:p&&h.toJson(p.toJson()),category:w&&w.join(",")||null,countryCode:n||
null,magicKey:k||null,distance:r||null,location:l||null,locationType:x||null,maxLocations:D||null,forStorage:G||null}));var A=this._geocodeHandler,y=this._errorHandler,z=new c(e._dfdCanceller);z._pendingDfd=a({url:this._url.path+"/findAddressCandidates",content:u,callbackParamName:"callback",load:function(B,C){A(B,C,m,v,z)},error:function(B){y(B,v,z)}});return z},suggestLocations:function(u){var g=new c(e._dfdCanceller);u.hasOwnProperty("location")&&this.normalization&&(u.location=u.location.normalize());
u.searchExtent&&(u.searchExtent=u.searchExtent.shiftCentralMeridian());u=this._encode(J.mixin({},this._url.query,{f:"json",text:u.text,maxSuggestions:u.maxSuggestions,searchExtent:u.searchExtent&&h.toJson(u.searchExtent.toJson()),category:u.categories&&u.categories.join(",")||null,countryCode:u.countryCode||null,location:u.location||null,distance:u.distance||null},{f:"json"}));u=a({url:this._url.path+"/suggest",content:u,callbackParamName:"callback"});g._pendingDfd=u;u.then(J.hitch(this,function(m){m=
m.suggestions||[];this.onSuggestLocationsComplete(m);g.resolve(m)}),J.hitch(this,function(m){this._errorHandler(m);g.reject(m)}));return g},addressesToLocations:function(u,g,m){var v=this.outSpatialReference,p=[],l=u.categories,n=u.locationType,k=u.countryCode;f.forEach(u.addresses,function(D,G){p.push({attributes:D})});u=this._encode(J.mixin({},this._url.query,{category:l&&l.join(",")||null,locationType:n||null,sourceCountry:k||null},{addresses:h.toJson({records:p})},{f:"json",outSR:v&&h.toJson(v.toJson())}));
var r=this._geocodeAddressesHandler,w=this._errorHandler,x=new c(e._dfdCanceller);x._pendingDfd=a({url:this._url.path+"/geocodeAddresses",content:u,callbackParamName:"callback",load:function(D,G){r(D,G,g,m,x)},error:function(D){w(D,m,x)}});return x},_reverseGeocodeHandler:function(u,g,m,v,p){try{var l=new t({address:u.address,location:u.location,score:100});this._successHandler([l],"onLocationToAddressComplete",m,p)}catch(n){this._errorHandler(n,v,p)}},locationToAddress:function(u,g,m,v){u&&this.normalization&&
(u=u.normalize());var p=this.outSpatialReference;u=this._encode(J.mixin({},this._url.query,{outSR:p&&h.toJson(p.toJson()),location:u&&h.toJson(u.toJson()),distance:g,f:"json"}));var l=this._reverseGeocodeHandler,n=this._errorHandler,k=new c(e._dfdCanceller);k._pendingDfd=a({url:this._url.path+"/reverseGeocode",content:u,callbackParamName:"callback",load:function(r,w){l(r,w,m,v,k)},error:function(r){n(r,v,k)}});return k},onSuggestLocationsComplete:function(){},onAddressToLocationsComplete:function(){},
onAddressesToLocationsComplete:function(){},onLocationToAddressComplete:function(){}});J.setObject("tasks.Locator",S,b);return S})},"esri/tasks/AddressCandidate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../geometry/Point"],function(S,J,f,c,h){S=S(null,{declaredClass:"esri.tasks.AddressCandidate",constructor:function(d){J.mixin(this,d);this.location=new h(this.location)}});J.setObject("tasks.AddressCandidate",S,c);return S})},"esri/styles/basic":function(){define(["dojo/_base/array",
"dojo/_base/lang","dojo/has","../kernel","../Color"],function(S,J,f,c,h){function d(q,t){if(q){var u={};u.color=new h(q.color);u.opacity=q.opacity||1;switch(t){case "point":u.outline={color:new h(q.outline.color),width:q.outline.width};u.size=q.size;break;case "line":u.width=q.width;break;case "polygon":u.outline={color:new h(q.outline.color),width:q.outline.width}}}return u}function b(q){if("esriGeometryPoint"===q||"esriGeometryMultipoint"===q)q="point";else if("esriGeometryPolyline"===q)q="line";
else if("esriGeometryPolygon"===q||"esriGeometryMultiPatch"===q)q="polygon";return q}var a={"default":{name:"default",label:"Default",description:"Default theme for basic visualization of features.",basemapGroups:{light:"streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]},pointSchemes:{light:{primary:{color:[77,77,
77,1],outline:{color:[255,255,255,.25],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:1},size:8},{color:[255,255,255,1],outline:{color:[51,51,51,.25],width:1},size:8}]},dark:{primary:{color:[255,255,255,1],outline:{color:[92,92,92,.25],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:1},size:8},{color:[26,26,26,1],outline:{color:[178,178,178,.25],width:1},size:8}]}},lineSchemes:{light:{primary:{color:[77,77,77,1],width:2},
secondary:[{color:[226,119,40,1],width:2},{color:[255,255,255,1],width:2}]},dark:{primary:{color:[255,255,255,1],width:2},secondary:[{color:[226,119,40,1],width:2},{color:[26,26,26,1],width:2}]}},polygonSchemes:{light:{primary:{color:[227,139,79,1],outline:{color:[255,255,255,.25],width:1},opacity:.8},secondary:[{color:[128,128,128,1],outline:{color:[255,255,255,.25],width:1},opacity:.8},{color:[255,255,255,1],outline:{color:[128,128,128,.25],width:1},opacity:.8}]},dark:{primary:{color:[227,139,79,
1],outline:{color:[92,92,92,.25],width:1},opacity:.8},secondary:[{color:[178,178,178,1],outline:{color:[92,92,92,.25],width:1},opacity:.8},{color:[26,26,26,1],outline:{color:[128,128,128,.25],width:1},opacity:.8}]}}}},e={};(function(){var q,t,u;for(q in a){var g=a[q];var m=g.basemapGroups;var v=e[q]={basemaps:[].concat(m.light).concat(m.dark),point:{},line:{},polygon:{}};for(t in m){var p=m[t];for(u=0;u<p.length;u++){var l=p[u];g.pointSchemes&&(v.point[l]=g.pointSchemes[t]);g.lineSchemes&&(v.line[l]=
g.lineSchemes[t]);g.polygonSchemes&&(v.polygon[l]=g.polygonSchemes[t])}}}})();f={getAvailableThemes:function(q){var t=[],u;for(u in a){var g=a[u];var m=e[u];q&&-1===S.indexOf(m.basemaps,q)||t.push({name:g.name,label:g.label,description:g.description,basemaps:m.basemaps.slice(0)})}return t},getSchemes:function(q){var t=q.theme,u=q.basemap,g=b(q.geometryType);q=e[t];var m;(q=(q=q&&q[g])&&q[u])&&(m={primaryScheme:d(q.primary,g),secondarySchemes:S.map(q.secondary,function(v){return d(v,g)})});return m},
cloneScheme:function(q){if(q){var t=J.mixin({},q);t.color&&(t.color=new h(t.color));t.outline&&(t.outline={color:t.outline.color&&new h(t.outline.color),width:t.outline.width})}return t}};J.setObject("styles.basic",f,c);return f})},"esri/toolbars/draw":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Color dojo/_base/window dojo/has dojo/sniff dojo/keys dojo/dom-construct dojo/dom-style dojo/dom-geometry ../kernel ../sniff ./_toolbar ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../graphic ../geometry/jsonUtils ../geometry/webMercatorUtils ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/Rect dojo/i18n!../nls/jsapi".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A){var y=S(v,{declaredClass:"esri.toolbars.Draw",_eventMap:{"draw-complete":!0,"draw-end":["geometry"]},constructor:function(z,B){this.markerSymbol=new p(p.STYLE_SOLID,10,new l(l.STYLE_SOLID,new h([255,0,0]),2),new h([0,0,0,.25]));this.lineSymbol=new l(l.STYLE_SOLID,new h([255,0,0]),2);this.fillSymbol=new n(n.STYLE_SOLID,new l(l.STYLE_SOLID,new h([255,0,0]),2),new h([0,0,0,.25]));this._points=[];this._mouse=!b("esri-touch")&&!b("esri-pointer");
this._defaultOptions={showTooltips:!0,drawTime:75,tolerance:8,tooltipOffset:15};this._options=J.mixin(J.mixin({},this._defaultOptions),B||{});if(a("ios")||a("android"))this._options.showTooltips=!1;this._onKeyDownHandler=J.hitch(this,this._onKeyDownHandler);this._onMouseDownHandler=J.hitch(this,this._onMouseDownHandler);this._onMouseUpHandler=J.hitch(this,this._onMouseUpHandler);this._onClickHandler=J.hitch(this,this._onClickHandler);this._onMouseMoveHandler=J.hitch(this,this._onMouseMoveHandler);
this._onMouseDragHandler=J.hitch(this,this._onMouseDragHandler);this._onDblClickHandler=J.hitch(this,this._onDblClickHandler);this._updateTooltip=J.hitch(this,this._updateTooltip);this._hideTooltip=J.hitch(this,this._hideTooltip);this._redrawGraphic=J.hitch(this,this._redrawGraphic)},_geometryType:null,respectDrawingVertexOrder:!1,setRespectDrawingVertexOrder:function(z){this.respectDrawingVertexOrder=z},setMarkerSymbol:function(z){this.markerSymbol=z},setLineSymbol:function(z){this.lineSymbol=z},
setFillSymbol:function(z){this.fillSymbol=z},activate:function(z,B){this._geometryType&&this.deactivate();var C=this.map,H=c.connect,E=y;this._options=J.mixin(J.mixin({},this._options),B||{});C.navigationManager.setImmediateClick(!1);switch(z){case E.ARROW:case E.LEFT_ARROW:case E.RIGHT_ARROW:case E.UP_ARROW:case E.DOWN_ARROW:case E.TRIANGLE:case E.CIRCLE:case E.ELLIPSE:case E.RECTANGLE:this._deactivateMapTools(!0,!1,!1,!0);this._onClickHandler_connect=H(C,"onClick",this._onClickHandler);this._mouse?
(this._onMouseDownHandler_connect=H(C,"onMouseDown",this._onMouseDownHandler),this._onMouseDragHandler_connect=H(C,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler_connect=H(C,"onMouseUp",this._onMouseUpHandler)):(this._onMouseDownHandler_connect=H(C,"onMouseDragStart",this._onMouseDownHandler),this._onMouseDragHandler_connect=H(C,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler_connect=H(C,"onMouseDragEnd",this._onMouseUpHandler));b("esri-touch")&&(this._onMouseDownHandler2_connect=
H(C,"onSwipeStart",this._onMouseDownHandler),this._onMouseDragHandler2_connect=H(C,"onSwipeMove",this._onMouseDragHandler),this._onMouseUpHandler2_connect=H(C,"onSwipeEnd",this._onMouseUpHandler));break;case E.POINT:this._onClickHandler_connect=H(C,"onClick",this._onClickHandler);break;case E.LINE:case E.EXTENT:case E.FREEHAND_POLYLINE:case E.FREEHAND_POLYGON:this._deactivateMapTools(!0,!1,!1,!0);this._mouse?(this._onMouseDownHandler_connect=H(C,"onMouseDown",this._onMouseDownHandler),this._onMouseDragHandler_connect=
H(C,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler_connect=H(C,"onMouseUp",this._onMouseUpHandler)):(this._onMouseDownHandler_connect=H(C,"onMouseDragStart",this._onMouseDownHandler),this._onMouseDragHandler_connect=H(C,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler_connect=H(C,"onMouseDragEnd",this._onMouseUpHandler));b("esri-touch")&&(this._onMouseDownHandler2_connect=H(C,"onSwipeStart",this._onMouseDownHandler),this._onMouseDragHandler2_connect=H(C,"onSwipeMove",
this._onMouseDragHandler),this._onMouseUpHandler2_connect=H(C,"onSwipeEnd",this._onMouseUpHandler));break;case E.POLYLINE:case E.POLYGON:case E.MULTI_POINT:C.navigationManager.setImmediateClick(!0);this._onClickHandler_connect=H(C,"onClick",this._onClickHandler);this._onDblClickHandler_connect=H(C,"onDblClick",this._onDblClickHandler);this._dblClickZoom=C.isDoubleClickZoom;C.disableDoubleClickZoom();break;default:return}this._onKeyDown_connect=H(C,"onKeyDown",this._onKeyDownHandler);this._redrawConnect=
H(C,"onExtentChange",this._redrawGraphic);this._geometryType=z;this._toggleTooltip(!0);C.snappingManager&&"freehandpolyline"!==this._geometryType&&"freehandpolygon"!==this._geometryType&&(C.snappingManager._startSelectionLayerQuery(),C.snappingManager._setUpSnapping());this.onActivate(this._geometryType)},deactivate:function(){var z=this.map;this._clear();var B=c.disconnect;B(this._onMouseMoveHandler_connect);B(this._onMouseDownHandler_connect);B(this._onMouseDragHandler_connect);B(this._onMouseUpHandler_connect);
B(this._onMouseDownHandler2_connect);B(this._onMouseDragHandler2_connect);B(this._onMouseUpHandler2_connect);B(this._onClickHandler_connect);B(this._onDblClickHandler_connect);B(this._onKeyDown_connect);B(this._redrawConnect);this._onMouseDownHandler_connect=this._onMouseMoveHandler_connect=this._onMouseDragHandler_connect=this._onMouseUpHandler_connect=this._onMouseDownHandler2_connect=this._onMouseDragHandler2_connect=this._onMouseUpHandler2_connect=this._onClickHandler_connect=this._onDblClickHandler_connect=
this._onKeyDown_connect=this._redrawConnect=null;z.snappingManager&&(z.snappingManager._stopSelectionLayerQuery(),z.snappingManager._killOffSnapping());switch(this._geometryType){case y.CIRCLE:case y.ELLIPSE:case y.TRIANGLE:case y.ARROW:case y.LEFT_ARROW:case y.RIGHT_ARROW:case y.UP_ARROW:case y.DOWN_ARROW:case y.RECTANGLE:case y.LINE:case y.EXTENT:case y.FREEHAND_POLYLINE:case y.FREEHAND_POLYGON:this._activateMapTools(!0,!1,!1,!0);break;case y.POLYLINE:case y.POLYGON:case y.MULTI_POINT:this._dblClickZoom&&
z.enableDoubleClickZoom()}B=this._geometryType;this._geometryType=null;z.navigationManager.setImmediateClick(!1);this._toggleTooltip(!1);this.onDeactivate(B)},_clear:function(){this._graphic&&this.map.graphics.remove(this._graphic,!0);this._graphic=null;this.map.snappingManager&&this.map.snappingManager._setGraphic(null);this._points=[]},finishDrawing:function(){var z=this._points,B=this.map.spatialReference,C=y;z=z.slice(0,z.length);switch(this._geometryType){case C.POLYLINE:if(!this._graphic||2>
z.length)return;var H=new x(B);H.addPath([].concat(z));break;case C.POLYGON:if(!this._graphic||3>z.length)return;H=new D(B);z=[].concat(z,[z[0].offset(0,0)]);D.prototype.isClockwise(z)||this.respectDrawingVertexOrder||z.reverse();H.addRing(z);break;case C.MULTI_POINT:H=new G(B),f.forEach(z,function(E){H.addPoint(E)})}c.disconnect(this._onMouseMoveHandler_connect);this._clear();this._setTooltipMessage(0);this._drawEnd(H)},_drawEnd:function(z){if(z){var B=this.map.spatialReference,C;this.onDrawEnd(z);
B&&(B.isWebMercator()?C=w.webMercatorToGeographic(z,!0):4326===B.wkid&&(C=r.fromJson(z.toJson())));this.onDrawComplete({geometry:z,geographicGeometry:C})}},_normalizeRect:function(z,B,C){var H=z.x;z=z.y;var E=B.x;B=B.y;return{x:Math.min(H,E),y:Math.max(z,B),width:Math.abs(H-E),height:Math.abs(z-B),spatialReference:C}},_onMouseDownHandler:function(z){this._dragged=!1;if(this.map.snappingManager)var B=this.map.snappingManager._snappingPoint;var C=B||z.mapPoint,H=y;B=this.map;var E=B.spatialReference;
this._points.push(C.offset(0,0));switch(this._geometryType){case H.LINE:this._graphic=B.graphics.add(new k(new x({paths:[[[C.x,C.y],[C.x,C.y]]],spatialReference:E}),this.lineSymbol),!0);B.snappingManager&&B.snappingManager._setGraphic(this._graphic);break;case H.FREEHAND_POLYLINE:this._oldPoint=z.screenPoint;C=new x(E);C.addPath(this._points);this._graphic=B.graphics.add(new k(C,this.lineSymbol),!0);B.snappingManager&&B.snappingManager._setGraphic(this._graphic);break;case H.CIRCLE:case H.ELLIPSE:case H.TRIANGLE:case H.ARROW:case H.LEFT_ARROW:case H.RIGHT_ARROW:case H.UP_ARROW:case H.DOWN_ARROW:case H.RECTANGLE:case H.FREEHAND_POLYGON:this._oldPoint=
z.screenPoint,C=new D(E),C.addRing(this._points),this._graphic=B.graphics.add(new k(C,this.fillSymbol),!0),B.snappingManager&&B.snappingManager._setGraphic(this._graphic)}b("esri-touch")&&z.preventDefault();if(1===this._points.length)this.onDrawStart()},_onMouseMoveHandler:function(z){if(this.map.snappingManager)var B=this.map.snappingManager._snappingPoint;z=B||z.mapPoint;B=this._graphic.geometry;switch(this._geometryType){case y.POLYLINE:case y.POLYGON:var C=this._points.length,H=!!B.getPoint(0,
C);z=z.offset(0,0);H?B.setPoint(0,C,z):B.insertPoint(0,C,z);this._graphic.setGeometry(B)}},_onMouseDragHandler:function(z){if(this._graphic||this._points.length)if(b("esri-touch")&&!this._points.length)z.preventDefault();else{this._dragged=!0;if(this.map.snappingManager)var B=this.map.snappingManager._snappingPoint;var C=this._points[0],H=B||z.mapPoint,E=this.map,K=E.spatialReference;B=this._graphic;var I=y,L=E.toScreen(C),M=E.toScreen(H),N=[];N=M.x-L.x;M=M.y-L.y;var P=Math.sqrt(N*N+M*M);switch(this._geometryType){case I.CIRCLE:this._hideTooltip();
B.geometry=D.createCircle({center:L,r:P,numberOfPoints:60,map:E});B.setGeometry(B.geometry);break;case I.ELLIPSE:this._hideTooltip();B.geometry=D.createEllipse({center:L,longAxis:N,shortAxis:M,numberOfPoints:60,map:E});B.setGeometry(B.geometry);break;case I.TRIANGLE:this._hideTooltip();N=[[0,-P],[.8660254037844386*P,.5*P],[-.8660254037844386*P,.5*P],[0,-P]];B.geometry=this._toPolygon(N,L.x,L.y);B.setGeometry(B.geometry);break;case I.ARROW:this._hideTooltip();C=M/P;E=N/P;H=.25*E*P;K=.25*P/(M/N);P*=
.25*C;N=[[N,M],[N-H*(1+24/K),M+24*E-P],[N-H*(1+12/K),M+12*E-P],[-12*C,12*E],[12*C,-12*E],[N-H*(1-12/K),M-12*E-P],[N-H*(1-24/K),M-24*E-P],[N,M]];B.geometry=this._toPolygon(N,L.x,L.y);B.setGeometry(B.geometry);break;case I.LEFT_ARROW:this._hideTooltip();N=0>=N?[[N,0],[.75*N,M],[.75*N,.5*M],[0,.5*M],[0,-.5*M],[.75*N,-.5*M],[.75*N,-M],[N,0]]:[[0,0],[.25*N,M],[.25*N,.5*M],[N,.5*M],[N,-.5*M],[.25*N,-.5*M],[.25*N,-M],[0,0]];B.geometry=this._toPolygon(N,L.x,L.y);B.setGeometry(B.geometry);break;case I.RIGHT_ARROW:this._hideTooltip();
N=0<=N?[[N,0],[.75*N,M],[.75*N,.5*M],[0,.5*M],[0,-.5*M],[.75*N,-.5*M],[.75*N,-M],[N,0]]:[[0,0],[.25*N,M],[.25*N,.5*M],[N,.5*M],[N,-.5*M],[.25*N,-.5*M],[.25*N,-M],[0,0]];B.geometry=this._toPolygon(N,L.x,L.y);B.setGeometry(B.geometry);break;case I.UP_ARROW:this._hideTooltip();N=0>=M?[[0,M],[-N,.75*M],[-.5*N,.75*M],[-.5*N,0],[.5*N,0],[.5*N,.75*M],[N,.75*M],[0,M]]:[[0,0],[-N,.25*M],[-.5*N,.25*M],[-.5*N,M],[.5*N,M],[.5*N,.25*M],[N,.25*M],[0,0]];B.geometry=this._toPolygon(N,L.x,L.y);B.setGeometry(B.geometry);
break;case I.DOWN_ARROW:this._hideTooltip();N=0<=M?[[0,M],[-N,.75*M],[-.5*N,.75*M],[-.5*N,0],[.5*N,0],[.5*N,.75*M],[N,.75*M],[0,M]]:[[0,0],[-N,.25*M],[-.5*N,.25*M],[-.5*N,M],[.5*N,M],[.5*N,.25*M],[N,.25*M],[0,0]];B.geometry=this._toPolygon(N,L.x,L.y);B.setGeometry(B.geometry);break;case I.RECTANGLE:this._hideTooltip();N=[[0,0],[N,0],[N,M],[0,M],[0,0]];B.geometry=this._toPolygon(N,L.x,L.y);B.setGeometry(B.geometry);break;case I.LINE:B.setGeometry(J.mixin(B.geometry,{paths:[[[C.x,C.y],[H.x,H.y]]]}));
break;case I.EXTENT:B&&E.graphics.remove(B,!0);B=new F(this._normalizeRect(C,H,K));B._originOnly=!0;this._graphic=E.graphics.add(new k(B,this.fillSymbol),!0);E.snappingManager&&E.snappingManager._setGraphic(this._graphic);break;case I.FREEHAND_POLYLINE:this._hideTooltip();if(!1===this._canDrawFreehandPoint(z)){b("esri-touch")&&z.preventDefault();return}this._points.push(z.mapPoint.offset(0,0));B.geometry._insertPoints([H.offset(0,0)],0);B.setGeometry(B.geometry);break;case I.FREEHAND_POLYGON:this._hideTooltip();
if(!1===this._canDrawFreehandPoint(z)){b("esri-touch")&&z.preventDefault();return}this._points.push(z.mapPoint.offset(0,0));B.geometry._insertPoints([H.offset(0,0)],0);B.setGeometry(B.geometry)}b("esri-touch")&&z.preventDefault()}},_canDrawFreehandPoint:function(z){if(!this._oldPoint)return!1;var B=this._oldPoint.x-z.screenPoint.x,C=this._oldPoint.y-z.screenPoint.y,H=this._options.tolerance;if((0>B?-1*B:B)<H&&(0>C?-1*C:C)<H)return!1;B=new Date;if(B-this._startTime<this._options.drawTime)return!1;
this._startTime=B;this._oldPoint=z.screenPoint;return!0},_onMouseUpHandler:function(z){if(this._dragged&&this._graphic){0===this._points.length&&this._points.push(z.mapPoint.offset(0,0));if(this.map.snappingManager)var B=this.map.snappingManager._snappingPoint;var C=this._points[0];B=B||z.mapPoint;var H=this.map.spatialReference,E=y;switch(this._geometryType){case E.CIRCLE:case E.ELLIPSE:case E.TRIANGLE:case E.ARROW:case E.LEFT_ARROW:case E.RIGHT_ARROW:case E.UP_ARROW:case E.DOWN_ARROW:case E.RECTANGLE:var K=
this._graphic.geometry;break;case E.LINE:K=new x({paths:[[[C.x,C.y],[B.x,B.y]]],spatialReference:H});break;case E.EXTENT:K=(new F(this._normalizeRect(C,B,H))).getExtent();break;case E.FREEHAND_POLYLINE:K=new x(H);K.addPath([].concat(this._points,[B.offset(0,0)]));break;case E.FREEHAND_POLYGON:K=new D(H),C=[].concat(this._points,[B.offset(0,0),this._points[0].offset(0,0)]),D.prototype.isClockwise(C)||this.respectDrawingVertexOrder||C.reverse(),K.addRing(C)}b("esri-touch")&&z.preventDefault();this._clear();
this._drawEnd(K)}else this._clear()},_isPointToPointTool:function(z){switch(z){case y.POLYLINE:case y.POLYGON:case y.MULTI_POINT:return!0;default:return!1}},_onClickHandler:function(z){if(this.map.snappingManager)var B=this.map.snappingManager._snappingPoint;B=B||z.mapPoint;z=this.map;var C=z.toScreen(B),H=y;if(this._isPointToPointTool(this._geometryType)){var E=this._points[this._points.length-1];if(B&&E&&B.x===E.x&&B.y===E.y)return;this._points.push(B.offset(0,0))}switch(this._geometryType){case H.POINT:this.onDrawStart();
this._drawEnd(B.offset(0,0));this._setTooltipMessage(0);break;case H.POLYLINE:1===this._points.length?(B=new x(z.spatialReference),B.addPath(this._points),this._graphic=z.graphics.add(new k(B,this.lineSymbol),!0),z.snappingManager&&z.snappingManager._setGraphic(this._graphic,{snapToLastVertex:!1}),this._onMouseMoveHandler_connect=c.connect(z,"onMouseMove",this._onMouseMoveHandler),this.onDrawStart()):(this._graphic.geometry.setPoint(0,this._points.length-1,B.offset(0,0)),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.lineSymbol));
break;case H.POLYGON:1===this._points.length?(B=new D(z.spatialReference),B.addRing(this._points),this._graphic=z.graphics.add(new k(B,this.fillSymbol),!0),z.snappingManager&&z.snappingManager._setGraphic(this._graphic,{snapToLastVertex:!1}),this._onMouseMoveHandler_connect=c.connect(z,"onMouseMove",this._onMouseMoveHandler),this.onDrawStart()):(this._graphic.geometry.setPoint(0,this._points.length-1,B.offset(0,0)),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.fillSymbol));break;
case H.MULTI_POINT:B=this._points;1===B.length?(C=new G(z.spatialReference),C.addPoint(B[B.length-1]),this._graphic=z.graphics.add(new k(C,this.markerSymbol),!0),z.snappingManager&&z.snappingManager._setGraphic(this._graphic),this.onDrawStart()):(this._graphic.geometry.addPoint(B[B.length-1]),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.markerSymbol));break;case H.ARROW:this._addShape([[0,0],[-24,24],[-24,12],[-96,12],[-96,-12],[-24,-12],[-24,-24],[0,0]],C.x,C.y);break;case H.LEFT_ARROW:this._addShape([[0,
0],[24,24],[24,12],[96,12],[96,-12],[24,-12],[24,-24],[0,0]],C.x,C.y);break;case H.RIGHT_ARROW:this._addShape([[0,0],[-24,24],[-24,12],[-96,12],[-96,-12],[-24,-12],[-24,-24],[0,0]],C.x,C.y);break;case H.UP_ARROW:this._addShape([[0,0],[-24,24],[-12,24],[-12,96],[12,96],[12,24],[24,24],[0,0]],C.x,C.y);break;case H.DOWN_ARROW:this._addShape([[0,0],[-24,-24],[-12,-24],[-12,-96],[12,-96],[12,-24],[24,-24],[0,0]],C.x,C.y);break;case H.TRIANGLE:this._addShape([[0,-48],[41.56921938165306,24],[-41.56921938165306,
24],[0,-48]],C.x,C.y);break;case H.RECTANGLE:this._addShape([[0,-96],[96,-96],[96,0],[0,0],[0,-96]],C.x-48,C.y+48);break;case H.CIRCLE:this._clear();this.onDrawStart();this._drawEnd(D.createCircle({center:C,r:48,numberOfPoints:60,map:z}));break;case H.ELLIPSE:this._clear(),this.onDrawStart(),this._drawEnd(D.createEllipse({center:C,longAxis:48,shortAxis:24,numberOfPoints:60,map:z}))}this._setTooltipMessage(this._points.length)},_addShape:function(z,B,C){this._setTooltipMessage(0);this._clear();this.onDrawStart();
this._drawEnd(this._toPolygon(z,B,C))},_toPolygon:function(z,B,C){var H=this.map,E=new D(H.spatialReference);E.addRing(f.map(z,function(K){return H.toMap({x:K[0]+B,y:K[1]+C})}));return E},_onDblClickHandler:function(z){var B=this._points,C=this.map.spatialReference,H=y;b("esri-touch")&&B.push(z.mapPoint);var E=B[B.length-1],K=B[B.length-2];B=E&&K&&E.x===K.x&&E.y===K.y?B.slice(0,B.length-1):B.slice(0,B.length);switch(this._geometryType){case H.POLYLINE:if(!this._graphic||2>B.length){c.disconnect(this._onMouseMoveHandler_connect);
this._clear();this._onClickHandler(z);return}var I=new x(C);I.addPath([].concat(B));break;case H.POLYGON:if(!this._graphic||3>B.length)return;I=new D(C);z=[].concat(B,[B[0].offset(0,0)]);D.prototype.isClockwise(z)||this.respectDrawingVertexOrder||z.reverse();I.addRing(z);break;case H.MULTI_POINT:I=new G(C),f.forEach(B,function(L){I.addPoint(L)})}c.disconnect(this._onMouseMoveHandler_connect);this._clear();this._setTooltipMessage(0);this._drawEnd(I)},_onKeyDownHandler:function(z){z.keyCode===e.ESCAPE&&
(c.disconnect(this._onMouseMoveHandler_connect),this._clear(),this._setTooltipMessage(0))},_toggleTooltip:function(z){this._options.showTooltips&&(z?this._tooltip||(this._tooltip=q.create("div",{"class":"esriMapTooltip"},this.map.container),u.isBodyLtr()||t.set(this._tooltip,"direction","rtl"),this._tooltip.style.display="none",this._tooltip.style.position="fixed",this._setTooltipMessage(0),this._onTooltipMouseEnterHandler_connect=c.connect(this.map,"onMouseOver",this._updateTooltip),this._onTooltipMouseLeaveHandler_connect=
c.connect(this.map,"onMouseOut",this._hideTooltip),this._onTooltipMouseMoveHandler_connect=c.connect(this.map,"onMouseMove",this._updateTooltip)):this._tooltip&&(c.disconnect(this._onTooltipMouseEnterHandler_connect),c.disconnect(this._onTooltipMouseLeaveHandler_connect),c.disconnect(this._onTooltipMouseMoveHandler_connect),q.destroy(this._tooltip),this._tooltip=null))},_hideTooltip:function(){var z=this._tooltip;z&&(z.style.display="none")},_setTooltipMessage:function(z){var B=this._tooltip;if(B){var C=
"";switch(this._geometryType){case y.POINT:C=A.toolbars.draw.addPoint;break;case y.ARROW:case y.LEFT_ARROW:case y.RIGHT_ARROW:case y.UP_ARROW:case y.DOWN_ARROW:case y.TRIANGLE:case y.RECTANGLE:case y.CIRCLE:case y.ELLIPSE:C=A.toolbars.draw.addShape;break;case y.LINE:case y.EXTENT:case y.FREEHAND_POLYLINE:case y.FREEHAND_POLYGON:C=A.toolbars.draw.freehand;break;case y.POLYLINE:case y.POLYGON:C=A.toolbars.draw.start;1===z?C=A.toolbars.draw.resume:2<=z&&(C=A.toolbars.draw.complete);break;case y.MULTI_POINT:C=
A.toolbars.draw.addMultipoint,1<=z&&(C=A.toolbars.draw.finish)}B.innerHTML=C}},_updateTooltip:function(z){var B=this._tooltip;if(B){if(z.clientX||z.pageY){var C=z.clientX;z=z.clientY}else C=z.clientX+d.body().scrollLeft-d.body().clientLeft,z=z.clientY+d.body().scrollTop-d.body().clientTop;B.style.display="none";t.set(B,{left:C+this._options.tooltipOffset+"px",top:z+"px"});B.style.display=""}},_redrawGraphic:function(z,B,C,H){(C||this.map.wrapAround180)&&(z=this._graphic)&&z.setGeometry(z.geometry)},
onActivate:function(){},onDeactivate:function(){},onDrawComplete:function(){},onDrawStart:function(){},onDrawEnd:function(){}});J.mixin(y,{POINT:"point",MULTI_POINT:"multipoint",LINE:"line",EXTENT:"extent",POLYLINE:"polyline",POLYGON:"polygon",FREEHAND_POLYLINE:"freehandpolyline",FREEHAND_POLYGON:"freehandpolygon",ARROW:"arrow",LEFT_ARROW:"leftarrow",RIGHT_ARROW:"rightarrow",UP_ARROW:"uparrow",DOWN_ARROW:"downarrow",TRIANGLE:"triangle",CIRCLE:"circle",ELLIPSE:"ellipse",RECTANGLE:"rectangle"});J.setObject("toolbars.Draw",
y,g);return y})},"esri/toolbars/_toolbar":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../Evented"],function(S,J,f,c,h){S=S([h],{declaredClass:"esri.toolbars._Toolbar",constructor:function(d){this.map=d},_cursors:{move:"pointer","move-v":"pointer","move-gv":"pointer",box0:"nw-resize",box1:"n-resize",box2:"ne-resize",box3:"e-resize",box4:"se-resize",box5:"s-resize",box6:"sw-resize",box7:"w-resize",box8:"pointer"},_deactivateMapTools:function(d,b,a,e){var q=this.map;
d&&(this._mapNavState={isDoubleClickZoom:q.isDoubleClickZoom,isClickRecenter:q.isClickRecenter,isPan:q.isPan,isRubberBandZoom:q.isRubberBandZoom,isKeyboardNavigation:q.isKeyboardNavigation,isScrollWheelZoom:q.isScrollWheelZoom},q.disableDoubleClickZoom(),q.disableClickRecenter(),q.disablePan(),q.disableRubberBandZoom(),q.disableKeyboardNavigation());b&&q.hideZoomSlider();a&&q.hidePanArrows();e&&q.graphics.disableMouseEvents()},_activateMapTools:function(d,b,a,e){var q=this.map,t=this._mapNavState;
d&&t&&(t.isDoubleClickZoom&&q.enableDoubleClickZoom(),t.isClickRecenter&&q.enableClickRecenter(),t.isPan&&q.enablePan(),t.isRubberBandZoom&&q.enableRubberBandZoom(),t.isKeyboardNavigation&&q.enableKeyboardNavigation(),t.isScrollWheelZoom&&q.enableScrollWheelZoom());b&&q.showZoomSlider();a&&q.showPanArrows();e&&q.graphics.enableMouseEvents()},_deactivateScrollWheel:function(){var d=this.map;this._scrollWheelState={isScrollWheelZoom:d.isScrollWheelZoom,isScrollWheelPan:d.isScrollWheelPan};d.disableScrollWheelZoom();
d.disableScrollWheelPan()},_activateScrollWheel:function(){var d=this.map,b=this._scrollWheelState;b&&(b.isScrollWheelZoom&&d.enableScrollWheelZoom(),b.isScrollWheelPan&&d.enableScrollWheelPan())}});J.setObject("toolbars._Toolbar",S,c);return S})},"dijit/layout/BorderContainer":function(){define("dojo/_base/array dojo/cookie dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/touch ../_WidgetBase ../_Widget ../_TemplatedMixin ./LayoutContainer ./utils".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p){var l=f("dijit.layout._Splitter",[g,m],{live:!0,templateString:'\x3cdiv class\x3d"dijitSplitter" data-dojo-attach-event\x3d"onkeydown:_onKeyDown,press:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse" tabIndex\x3d"0" role\x3d"separator"\x3e\x3cdiv class\x3d"dijitSplitterThumb"\x3e\x3c/div\x3e\x3c/div\x3e',constructor:function(){this._handlers=[]},postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);
this._factor=/top|left/.test(this.region)?1:-1;this._cookieName=this.container.id+"_"+this.region},buildRendering:function(){this.inherited(arguments);c.add(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V"));if(this.container.persist){var k=this._getPersistentSplit();k&&(this.child.domNode.style[this.horizontal?"height":"width"]=k)}},_computeMaxSize:function(){var k=this.horizontal?"h":"w",r=d.getMarginBox(this.child.domNode)[k],w=S.filter(this.container.getChildren(),function(x){return"center"==
x.region})[0];k=d.getContentBox(w.domNode)[k]-10;return Math.min(this.child.maxSize,r+k)},_startDrag:function(k){this.cover||(this.cover=h.place("\x3cdiv class\x3ddijitSplitterCover\x3e\x3c/div\x3e",this.child.domNode,"after"));c.add(this.cover,"dijitSplitterCoverActive");this.fake&&h.destroy(this.fake);(this._resize=this.live)||((this.fake=this.domNode.cloneNode(!0)).removeAttribute("id"),c.add(this.domNode,"dijitSplitterShadow"),h.place(this.fake,this.domNode,"after"));c.add(this.domNode,"dijitSplitterActive dijitSplitter"+
(this.horizontal?"H":"V")+"Active");this.fake&&c.remove(this.fake,"dijitSplitterHover dijitSplitter"+(this.horizontal?"H":"V")+"Hover");var r=this._factor,w=this.horizontal,x=w?"pageY":"pageX",D=k[x],G=this.domNode.style;w=w?"h":"w";var F=b.getComputedStyle(this.child.domNode),A=d.getMarginBox(this.child.domNode,F)[w],y=this._computeMaxSize(),z=Math.max(this.child.minSize,d.getPadBorderExtents(this.child.domNode,F)[w]+10);w=this.region;var B="top"==w||"bottom"==w?"top":"left",C=parseInt(G[B],10),
H=this._resize,E=e.hitch(this.container,"_layoutChildren",this.child.id);w=this.ownerDocument;this._handlers=this._handlers.concat([q(w,t.move,this._drag=function(K,I){K=K[x]-D;var L=r*K+A,M=Math.max(Math.min(L,y),z);(H||I)&&E(M);G[B]=K+C+r*(M-L)+"px"}),q(w,"dragstart",function(K){K.stopPropagation();K.preventDefault()}),q(this.ownerDocumentBody,"selectstart",function(K){K.stopPropagation();K.preventDefault()}),q(w,t.release,e.hitch(this,"_stopDrag"))]);k.stopPropagation();k.preventDefault()},_onMouse:function(k){k=
"mouseover"==k.type||"mouseenter"==k.type;c.toggle(this.domNode,"dijitSplitterHover",k);c.toggle(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",k)},_getPersistentSplit:function(){return J(this._cookieName)},_setPersistentSplit:function(k){J(this._cookieName,k,{expires:365})},_stopDrag:function(k){try{this.cover&&c.remove(this.cover,"dijitSplitterCoverActive"),this.fake&&h.destroy(this.fake),c.remove(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active dijitSplitterShadow"),
this._drag(k),this._drag(k,!0)}finally{this._cleanupHandlers(),delete this._drag}this.container.persist&&this._setPersistentSplit(this.child.domNode.style[this.horizontal?"height":"width"])},_cleanupHandlers:function(){for(var k;k=this._handlers.pop();)k.remove()},_onKeyDown:function(k){this._resize=!0;var r=this.horizontal,w=1;switch(k.keyCode){case r?a.UP_ARROW:a.LEFT_ARROW:w*=-1;case r?a.DOWN_ARROW:a.RIGHT_ARROW:break;default:return}r=d.getMarginSize(this.child.domNode)[r?"h":"w"]+this._factor*
w;this.container._layoutChildren(this.child.id,Math.max(Math.min(r,this._computeMaxSize()),this.child.minSize));k.stopPropagation();k.preventDefault()},destroy:function(){this._cleanupHandlers();delete this.child;delete this.container;delete this.cover;delete this.fake;this.inherited(arguments)}}),n=f("dijit.layout._Gutter",[g,m],{templateString:'\x3cdiv class\x3d"dijitGutter" role\x3d"presentation"\x3e\x3c/div\x3e',postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region)},
buildRendering:function(){this.inherited(arguments);c.add(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"))}});f=f("dijit.layout.BorderContainer",v,{gutters:!0,liveSplitters:!0,persist:!1,baseClass:"dijitBorderContainer",_splitterClass:l,postMixInProperties:function(){this.gutters||(this.baseClass+="NoGutter");this.inherited(arguments)},_setupChild:function(k){this.inherited(arguments);var r=k.region,w=k.isLeftToRight();"leading"==r&&(r=w?"left":"right");"trailing"==r&&(r=w?"right":"left");r&&
"center"!=r&&(k.splitter||this.gutters)&&!k._splitterWidget&&(w=k.splitter?this._splitterClass:n,e.isString(w)&&(w=e.getObject(w)),w=new w({id:k.id+"_splitter",container:this,child:k,region:r,live:this.liveSplitters}),w.isSplitter=!0,k._splitterWidget=w,r="bottom"==r||r==(this.isLeftToRight()?"right":"left"),h.place(w.domNode,k.domNode,r?"before":"after"),w.startup())},layout:function(){this._layoutChildren()},removeChild:function(k){var r=k._splitterWidget;r&&(r.destroy(),delete k._splitterWidget);
this.inherited(arguments)},getChildren:function(){return S.filter(this.inherited(arguments),function(k){return!k.isSplitter})},getSplitter:function(k){return S.filter(this.getChildren(),function(r){return r.region==k})[0]._splitterWidget},resize:function(k,r){if(!this.cs||!this.pe){var w=this.domNode;this.cs=b.getComputedStyle(w);this.pe=d.getPadExtents(w,this.cs);this.pe.r=b.toPixelValue(w,this.cs.paddingRight);this.pe.b=b.toPixelValue(w,this.cs.paddingBottom);b.set(w,"padding","0px")}this.inherited(arguments)},
_layoutChildren:function(k,r){if(this._borderBox&&this._borderBox.h){var w=[];S.forEach(this._getOrderedChildren(),function(x){w.push(x);x._splitterWidget&&w.push(x._splitterWidget)});p.layoutChildren(this.domNode,{l:this.pe.l,t:this.pe.t,w:this._borderBox.w-this.pe.w,h:this._borderBox.h-this.pe.h},w,k,r)}},destroyRecursive:function(){S.forEach(this.getChildren(),function(k){var r=k._splitterWidget;r&&r.destroy();delete k._splitterWidget});this.inherited(arguments)}});f.ChildWidgetProperties={splitter:!1,
minSize:0,maxSize:Infinity};e.mixin(f.ChildWidgetProperties,v.ChildWidgetProperties);e.extend(u,f.ChildWidgetProperties);f._Splitter=l;f._Gutter=n;return f})},"dijit/layout/LayoutContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-style dojo/_base/lang ../_WidgetBase ./_LayoutWidget ./utils".split(" "),function(S,J,f,c,h,d,b,a){J=J("dijit.layout.LayoutContainer",b,{design:"headline",baseClass:"dijitLayoutContainer",startup:function(){this._started||(S.forEach(this.getChildren(),
this._setupChild,this),this.inherited(arguments))},_setupChild:function(e){this.inherited(arguments);e.region&&f.add(e.domNode,this.baseClass+"Pane")},_getOrderedChildren:function(){var e=S.map(this.getChildren(),function(q,t){return{pane:q,weight:["center"==q.region?Infinity:0,q.layoutPriority,("sidebar"==this.design?1:-1)*(/top|bottom/.test(q.region)?1:-1),t]}},this);e.sort(function(q,t){q=q.weight;t=t.weight;for(var u=0;u<q.length;u++)if(q[u]!=t[u])return q[u]-t[u];return 0});return S.map(e,function(q){return q.pane})},
layout:function(){a.layoutChildren(this.domNode,this._contentBox,this._getOrderedChildren())},addChild:function(e,q){this.inherited(arguments);this._started&&this.layout()},removeChild:function(e){this.inherited(arguments);this._started&&this.layout();f.remove(e.domNode,this.baseClass+"Pane");c.set(e.domNode,{top:"auto",bottom:"auto",left:"auto",right:"auto",position:"static"});c.set(e.domNode,/top|bottom/.test(e.region)?"width":"height","auto")}});J.ChildWidgetProperties={region:"",layoutAlign:"",
layoutPriority:0};h.extend(d,J.ChildWidgetProperties);return J})},"arcgisonline/map/utils/clipOnHorizon":function(){define(["require","exports","tslib","./contains"],function(S,J,f,c){c=f.__importDefault(c);return function(h){(0,c.default)([102113,102100,3857],h.spatialReference.wkid)&&(h.xmin=Math.max(h.xmin,-20037507),h.xmax=Math.min(h.xmax,20037507),h.ymin=Math.max(h.ymin,-19971868),h.ymax=Math.min(h.ymax,19971868));return h}})},"arcgisonline/map/utils/createExtentSearchOptions":function(){define("require exports tslib ../../esriGeowConfig ../../pages/utils/clone ../../sharing/util esri/lang esri/tasks/locator dojo/i18n!../../nls/arcgisonline".split(" "),
function(S,J,f,c,h,d,b,a,e){function q(){var t=(0,h.default)((((null===c.default||void 0===c.default?void 0:c.default.self)||{}).helperServices||{}).geocode||[]),u=!1;b.default.isDefined(c.default.geocodeAutoComplete)&&(u=c.default.geocodeAutoComplete);t.forEach(function(g){g.enableSuggestions=!0===g.suggest&&u?!0:!1;delete g.suggest;var m=d.default.isEsriWorldGeocoder(g);if(m||g.enableSuggestions)m&&(g.name=g.name||e.default.common.esriWorldGeocoder,g.enableSuggestions=u,g.placefinding=g.batch=g.esri=
!0,g.outFields=["Match_addr","Addr_type","StAddr","City"]),g.placeholder=g.placeholder||e.default.viewer.findLocationText,g.singleLineFieldName=g.singleLineFieldName||"SingleLine",g.highlightSymbol=null,g.localSearchOptions={minScale:3E5,distance:5E4};g.locator=new a.default(g.url)});return t=t.filter(function(g){return b.default.isDefined(g.singleLineFieldName)&&b.default.isDefined(g.placefinding)&&g.placefinding})}c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);
a=f.__importDefault(a);e=f.__importDefault(e);return function(t,u){var g=b.default.isDefined(c.default.geocodeAutoComplete)?c.default.geocodeAutoComplete:!1,m=q();t={map:t,enableSuggestions:g,minCharacters:3,maxResults:5,suggestionDelay:100,value:u||null,autoNavigate:!1,activeSourceIndex:"all",sources:[].concat(m)};1===t.sources.length&&delete t.activeSourceIndex;return t}})},"arcgisonline/sharing/dijit/dialog/JobStatusDlg":function(){define("require exports tslib ../../../pages/pageUtil ../../../pages/utils/arrays ../../../pages/utils/date ../../../pages/utils/dom ../../../pages/utils/number ../../util ../../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/a11yclick dojo/topic esri/lang moment/moment dojo/i18n!../../../nls/arcgisonline dojo/text!./templates/JobStatusDlg.html".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);return function(){function r(w){this.templateString=k.default;this.i18n=f.__assign(f.__assign({},
n.default.common),n.default.jobStatusDlg);this.linkToJobStatus=!0;this.STATUS_STARTED="Started";this.STATUS_IN_PROGRESS="InProgress";this.STATUS_FAILED="Failed";this.STATUS_COMPLETED="Completed";this.PORTAL_STATUS_STARTED="esriJobSubmitted";this.PORTAL_STATUS_IN_PROGRESS="esriJobExecuting";this.PORTAL_STATUS_FAILED="esriJobFailed";this.PORTAL_STATUS_COMPLETED="esriJobSucceeded";this.PORTAL_STATUS_CANCELLED="esriJobCancelled";this.PORTAL_STATUS_CANCELLING="esriJobCancelling";this.PORTAL_STATUS_TIMED_OUT=
"esriJobTimedOut";this.PORTAL_STATUS_WAITING="esriJobWaiting"}r.prototype.postCreate=function(){this.inherited(arguments);this._initHandlers()};r.prototype.show=function(w,x,D,G,F){this._portal=w;this._portalUser=x;this._jobUrl=D;this._jobInfoUrl=G;this._initUI();this._populateStatus(F);this._dialog.show()};r.prototype.hide=function(){this._dialog.hide()};r.prototype._initUI=function(){var w=this._portal.isPortal;w||b.default.hideNode(this._cancelJobBtn);this.linkToJobStatus||(b.default.hideNode(this._jobIdLinkContainer),
b.default.showNode(this._jobIdText));b.default.showHide(this._jobAdminDetailsContainer,w&&this._portalUser.isOrgAdmin)};r.prototype._initHandlers=function(){this.own((0,m.default)(this._closeBtn,this._closeClick.bind(this)),(0,m.default)(this._cancelJobBtn,this._cancelJobClick.bind(this)),v.default.subscribe("job-status/refresh",this._populateStatus.bind(this)))};r.prototype._cancelJobClick=function(){var w=this,x=this._jobUrl.indexOf("?token\x3d");x=-1<x?this._jobUrl.substr(0,x)+"/cancel"+this._jobUrl.substr(x):
this._jobUrl+"/cancel";b.default.disableNode(this._cancelJobBtn,!0);e.default.request({url:x,content:{cancel:!0}},{usePost:!0}).then(function(D){if(!D||(null===D||void 0===D?0:D.code))c.default.createConfirmationDialog({strings:{title:w.i18n.errorTitle,description:w.i18n.cancelError},hideCancel:!0,autoCloseOnOk:!0}),b.default.disableNode(w._cancelJobBtn,!1)},function(D){c.default.createConfirmationDialog({strings:{title:w.i18n.errorTitle,description:w.i18n.cancelError},hideCancel:!0,autoCloseOnOk:!0});
b.default.disableNode(w._cancelJobBtn,!1)})};r.prototype._closeClick=function(){this.hide()};r.prototype._getStatusString=function(w){switch(w){case this.STATUS_STARTED:return this.i18n.started;case this.STATUS_IN_PROGRESS:return this.i18n.inProgress;case this.STATUS_COMPLETED:return this.i18n.completed;case this.STATUS_FAILED:return this.i18n.failed;case this.PORTAL_STATUS_STARTED:return this.i18n.started;case this.PORTAL_STATUS_IN_PROGRESS:return this.i18n.inProgress;case this.PORTAL_STATUS_FAILED:return this.i18n.failed;
case this.PORTAL_STATUS_COMPLETED:return this.i18n.completed;case this.PORTAL_STATUS_CANCELLED:return this.i18n.cancelled;case this.PORTAL_STATUS_CANCELLING:return this.i18n.cancelling;case this.PORTAL_STATUS_TIMED_OUT:return this.i18n.timedOut;case this.PORTAL_STATUS_WAITING:return this.i18n.waiting;default:return""}};r.prototype._getDurationString=function(w,x){if(w){var D=p.default.isDefined(x)?w+x:Date.now();x=(0,l.default)(D).diff((0,l.default)(w),"seconds");var G=(0,l.default)(D).diff((0,l.default)(w),
"minutes");w=(0,l.default)(D).diff((0,l.default)(w),"hours");var F=D=void 0;if(60>x)return this.i18n.seconds.replace("${num}",a.default.format(x));if(60>G)return D=this.i18n.minutes.replace("${num}",a.default.format(G)),F=this.i18n.seconds.replace("${num}",a.default.format(x-60*G)),"".concat(D," ").concat(F);var A=this.i18n.hours.replace("${num}",a.default.format(w));D=this.i18n.minutes.replace("${num}",a.default.format(G-60*w));F=this.i18n.seconds.replace("${num}",a.default.format(x-60*G));return"".concat(A,
" ").concat(D," ").concat(F)}return""};r.prototype._getStartDateFromString=function(w){if(w=h.default.find(null!==w&&void 0!==w?w:[],function(D){return"esriJobMessageTypeInformative"===D.type&&0===D.description.indexOf("Start Time: ")}))try{var x=w.description.substring(13).trim();return(new Date(x)).getTime()}catch(D){}return 0};r.prototype._getEndTimeFromString=function(w){if(w=h.default.find(null!==w&&void 0!==w?w:[],function(G){return"esriJobMessageTypeInformative"===G.type&&0===G.description.indexOf("Succeeded at ")}))try{var x=
w.description.indexOf(" (Elapsed Time: "),D=w.description.substring(14,x).trim();return(new Date(D)).getTime()}catch(G){}};r.prototype._populateStatus=function(w){var x=this._portal.isPortal,D=this._portalUser.isOrgAdmin;if(w){this._statusInfo.classList.remove("hide");this._statusLoader.classList.remove("is-active");var G=(x?D?w.submittedTime:this._getStartDateFromString(w.messages):w.startTime)||0,F=x?G:1E3*G;G=w.messages?this._getEndTimeFromString(w.messages):void 0;var A=x?D?p.default.isDefined(w.duration)&&
w.duration||void 0:G?G-F:void 0:p.default.isDefined(w.totalTime)?1E3*w.totalTime:void 0;G=x&&!D?this._getStatusString(w.jobStatus):this._getStatusString(w.status);var y=d.default.format(new Date(F),"day-short-month-year-long-time"),z=p.default.isDefined(A)?d.default.format(new Date(F+A),"day-short-month-year-long-time"):"";F=this._getDurationString(F,A);A=x&&D?w.machinename:"";D=x&&D?w.username:"";w=x?w.jobId:w.id;this._jobStatus.innerHTML=G;this._jobStartTime.innerHTML=y;this._jobDuration.innerHTML=
F;this._jobEndTime.innerHTML=z;this._jobMachine.innerHTML=A;this._jobUser.innerHTML=D;this._jobIdLink.href=this._jobInfoUrl;this._jobIdLink.innerHTML=w;this._jobIdText.textContent=w;w=h.default.includes([this.i18n.completed,this.i18n.failed,this.i18n.cancelled,this.i18n.cancelling,this.i18n.timedOut],G);b.default.disableNode(this._cancelJobBtn,w)}else this._statusInfo.classList.add("hide"),this._statusLoader.classList.add("is-active"),b.default.disableNode(this._cancelJobBtn,!0)};return r=f.__decorate([(0,q.default)(u.default,
t.default,g.default)],r)}()})},"arcgisonline/sharing/dijit/dialog/LayerTimeSettings":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/window dojo/dom-construct dojo/dom-class dojo/dom-style dojo/dom-attr dojo/query dojo/on dojo/json dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/registry dijit/Dialog dijit/form/CheckBox dijit/form/RadioButton dijit/form/Select dijit/form/Button dojo/Deferred arcgisonline/sharing/util ../../../pages/serviceUtil arcgisonline/sharing/dijit/dialog/ConfirmDialog esri/Evented dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A){return S("arcgisonline.sharing.dijit.dialog.LayerTimeSettings",[u,F],{baseClass:"esriLayerTimeSettings",postMixInProperties:function(){this.inherited(arguments);this.i18n=J.mixin({},A.common);this.i18n=J.mixin(this.i18n,A.layerTimeSettings);this.portal=this.item&&this.item.portal||{};this._isPortal=x.isPortal()},buildRendering:function(){var y=document.createDocumentFragment();h.create("p",{innerHTML:this.i18n.header},y);this._enableTimeChk=
new l({checked:!1,name:"enableTimeCheckbox"});y.appendChild(this._enableTimeChk.domNode);h.create("label",{"for":"enableTimeCheckbox","class":"esriLeadingMargin1 inline-block trailer-half",innerHTML:this.i18n.enableTimeLbl},y);h.create("br",{},y);h.create("p",{innerHTML:this.i18n.fieldsetLbl,"class":"trailer-half"},y);this._fieldSet=h.create("fieldset",{"class":"esriLeadingMargin2 padding-left-1 trailer-half fieldset-checkbox"},y);this._timeEventsRdio=new n({name:"times",checked:!0},h.create("input",
{},this._fieldSet));h.create("label",{"for":"timeEvents","class":"esriLeadingMargin1 inline-block",innerHTML:this.i18n.timeEventsLbl},this._fieldSet);h.create("br",{},this._fieldSet);this._timeEventsDiv=h.create("div",{"class":"esriLeadingMargin23"},this._fieldSet);h.create("label",{"for":"timeEventsSelect","class":"esriFloatLeading timeEvent",innerHTML:this.i18n.timeFieldLbl},this._timeEventsDiv);this._timeEventsSelect=new k({maxHeight:200,name:"timeEventsSelect"},h.create("select",{},this._timeEventsDiv));
h.create("br",{},this._fieldSet);this._timeRangesRdio=new n({name:"times","class":"timeRangeRdio"},h.create("input",{},this._fieldSet));h.create("label",{"for":"timeRanges","class":"esriLeadingMargin1 inline-block",innerHTML:this.i18n.timeRangesLbl},this._fieldSet);h.create("br",{},this._fieldSet);this._timeRangesDiv=h.create("div",{"class":"esriLeadingMargin23"},this._fieldSet);h.create("label",{"for":"startTimeSelect","class":"esriFloatLeading timeRange",innerHTML:this.i18n.startTimeLbl},this._timeRangesDiv);
this._startTimeSelect=new k({maxHeight:200,name:"startTimeSelect","class":"timeRange",disabled:!0},h.create("select",{},this._timeRangesDiv));h.create("br",{},this._timeRangesDiv);h.create("label",{"for":"endTimeSelect","class":"esriFloatLeading timeRange leader-half",innerHTML:this.i18n.endTimeLbl},this._timeRangesDiv);this._endTimeSelect=new k({maxHeight:200,name:"endTimeSelect","class":"timeRange",disabled:!0},h.create("select",{},this._timeRangesDiv));h.create("br",{},this._timeRangesDiv);this.inherited(arguments);
this.domNode.appendChild(y)},postCreate:function(){this.timeInfo=this.get("timeInfo");this.fields=this.get("dateFields");this._loadConnects();this._loadLayerFields();this._loadTimeInfo()},_loadConnects:function(){this.own(q(this._timeRangesRdio,"change",J.hitch(this,function(y){f.forEach(v.findWidgets(this._timeRangesDiv),function(z){z.set("disabled",!y)})})),q(this._timeEventsRdio,"change",J.hitch(this,function(y){this.options&&1<this.options.length&&f.forEach(v.findWidgets(this._timeEventsDiv),
function(z){z.set("disabled",!y)})})),q(this._enableTimeChk,"change",J.hitch(this,function(y){var z=this.options&&1<this.options.length;f.forEach(v.findWidgets(this._fieldSet),function(B){y=!z&&-1<B["class"].indexOf("timeRange")?!1:y;B.set("disabled",!y)});this[this._timeRangesRdio.get("checked")?"_timeEventsRdio":"_timeRangesRdio"].onChange(!1)})))},_getValueAttr:function(){return this._enableTimeChk.get("checked")?this._timeEventsRdio.get("checked")?{timeInfo:{startTimeField:this._timeEventsSelect.get("value")}}:
{timeInfo:{startTimeField:this._startTimeSelect.get("value"),endTimeField:this._endTimeSelect.get("value")}}:{timeInfo:this._isPortal?null:{}}},_setDisabledAttr:function(y){f.forEach(v.findWidgets(this.domNode),function(z){z.set("disabled",y)});dojo.query(".js-timeOptions-btn").map(dijit.byNode).forEach(function(z){z.set("disabled",y)});dojo.query(".js-timeOptions-msg")[y?"removeClass":"addClass"]("hide")},_getTimeInfoAttr:function(){var y=this.layer;return this.timeInfo||y.timeInfo||{}},_getDateFieldsAttr:function(){return D.getDateFields(this.layer)},
_getValidEndTimeSelections:function(){var y=this.timeInfo||{},z=this._startTimeSelect.get("value"),B=this.options.find(function(H){return H.value===z}).fieldType,C=f.filter(this.options,function(H){return H.fieldType===B});this._endTimeSelect.set("options",J.clone(C));this._endTimeSelect.set("value",y.endTimeField||C[0].value)},_loadLayerFields:function(){this.options=f.map(this.fields,J.hitch(this,function(y){return{label:y.alias||y.name,value:y.name,fieldType:y.type}}));this._timeEventsSelect.set("options",
this.options);this._timeEventsSelect.set("value",this.options[0].value);this.options&&1<this.options.length&&(this._startTimeSelect.set("options",J.clone(this.options)),this._startTimeSelect.set("value",this.options[0].value),this._getValidEndTimeSelections())},_loadTimeInfo:function(){var y=this.timeInfo||{};this._enableTimeChk.set("checked",y.startTimeField);this._timeEventsSelect.set("value",y.startTimeField);this._startTimeSelect.set("value",y.startTimeField);this._endTimeSelect.set("value",y.endTimeField||
this._endTimeSelect.get("value"));this._timeRangesRdio.set("checked",this.timeInfo.startTimeField&&this.timeInfo.endTimeField);this._timeEventsRdio.set("checked",!this.timeInfo.endTimeField)},showModal:function(y){var z=new w,B=new p({style:{width:"450px"}}),C=c.doc.createDocumentFragment();h.place(this.domNode,C);var H=h.create("div",{"class":"esriFloatTrailing esriTimeSettingsButtons right"},C);h.create("span",{"class":"hide margin-right-half js-timeOptions-msg",innerHTML:A.timeSettingsDlg.statusMsg},
H);var E=new r({"class":"calcite primary js-timeOptions-btn",label:this.i18n.ok,type:"button"},h.create("button",{},H));H=new r({"class":"calcite cancel js-timeOptions-btn",label:this.i18n.cancel,type:"button"},h.create("button",{},H));this.own(q(H,"click",J.hitch(this,function(){B.hide()})),q(B,"hide",J.hitch(this,function(){B.destroyRecursive();z.resolve(this.item)})),q(E,"click",J.hitch(this,function(){this.set("disabled",!0);var K=this.get("value"),I={updateDefinition:t.stringify(K)},L=(this.item.adminUrl||
this.item.url.replace("/rest/","/rest/admin/"))+"/"+this.layer.id+"/updateDefinition";K.timeInfo&&K.timeInfo.startTimeField&&K.timeInfo.startTimeField===K.timeInfo.endTimeField?(this.set("disabled",!1),this._showError(A.itemProperties.error.sameTimeField)):x.request({url:L,content:I},{usePost:!0}).then(J.hitch(this,function(M){this.item.set("maxAgeCheck",!0);this.layer=J.mixin(this.layer,K);B.hide();z.resolve(K)}),J.hitch(this,function(M){this.set("disabled",!1);return this._showError(M)}))})),q(this._startTimeSelect,
"change",J.hitch(this,function(){this._getValidEndTimeSelections()})));B.set("title",y&&y.title||A.timeSettingsDlg.timeSettingsDlgTitle);B.setContent(C);B.show();return z},_showError:function(y){y=y&&y.error||y||this.i18n.errors.genericError;y.code=y.messageCode||y.code;y=this.i18n.errors[y.code]||y||this.i18n.errors.error;y.details=y.details&&J.isArray(y.details)&&y.details.length?f.filter(y.details,"return item !\x3d\x3d null"):null;if(y.details&&y.details.length){var z="\x3cul\x3e";f.forEach(y.details,
function(C){z+="\x3cli\x3e"+C+"\x3c/li\x3e"});z+="\x3c/ul\x3e\x3cbr/\x3e";y.message=y.message?"\x3cdiv\x3e"+y.message+"\x3c/div\x3e\x3cbr/\x3e"+z:z}if(y.message&&-1===y.message.indexOf("Request canceled")){y=J.mixin(J.mixin({hideCancel:!0},this.i18n.errors.error),y);var B=new G({});return B.show(y).then(J.hitch(this,function(){B.hide().then(dojo.hitch(this,function(){this.set("disabled",!1)}))}))}}})})},"arcgisonline/sharing/dijit/dialog/ManageSceneCache":function(){define("require esri/declare esri/Evented esri/lang esri/request dojo/_base/lang dojo/on dojo/query dojo/topic dijit/a11yclick dojo/string dojo/promise/all dojo/json dojo/dom-construct dijit/_WidgetBase dijit/_TemplatedMixin dijit/Dialog ../../../pages/pageUtil ../../../pages/utils/dom ../../../pages/utils/number ../../../pages/serviceUtil ../../../pages/statusUtil ../../../sharing/util ../../../esriGeowConfig dojo/i18n!../../../nls/arcgisonline dojo/text!./templates/ManageSceneCache.html".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A){return J([v,p],{declaredClass:"arcgisonline.sharing.dijit.dialog.ManageSceneCache",basePath:S.toUrl("arcgisonline/sharing/dijit/dialog"),baseClass:"esriManageSceneCache",templateString:A,widgetsInTemplate:!0,_serviceStartWait:5E3,postMixInProperties:function(){this.inherited(arguments);this.i18n=d.mixin({},F.common);d.mixin(this.i18n,F.manageSceneCache);d.mixin(this.i18n,{webScene:F.items.webScene,buildingCache:F.itemProperties.buildingCache})},
postCreate:function(){this.inherited(arguments);this._initHandlers()},startup:function(){this.inherited(arguments);var y=D.isPortal();y&&k.hideNode(this._sceneLayerSelectContainer);!y&&this._hasSource()?this._isBuildingSceneLayer()&&(this._rebuildLayersRadioLabel.innerHTML=this.i18n.rebuildFull,this._rebuildPartialRadio.checked=!0):(y&&(k.hideNode(this._optionsContainer),k.showNode(this._portalOptionsContainer),k.checkNode(this._rebuildPortalFullRadio,!0),this._rebuildLayersRadioClick()),k.disableNode(this._rebuildFullRadio));
this._rebuildLayersRadioClick()},_initHandlers:function(){this.own(q(this._rebuildFullRadio,this._rebuildFullRadioClick.bind(this)),q(this._rebuildLayersRadio,this._rebuildLayersRadioClick.bind(this)),q(this._rebuildPartialRadio,this._rebuildLayersRadioClick.bind(this)),q(this._rebuildPortalFullRadio,this._rebuildLayersRadioClick.bind(this)),q(this._rebuildPortalPartialRadio,this._rebuildLayersRadioClick.bind(this)),q(this._rebuildPortalAttributesRadio,this._rebuildLayersRadioClick.bind(this)),q(this._rebuildAttributesRadio,
this._rebuildLayersRadioClick.bind(this)),q(this._rebuildBtn,this._rebuildClick.bind(this)),q(this._cancelBtn,this._cancelClick.bind(this)))},_hasSource:function(){return c.isDefined(this._item.sourceData)},_dialogHidden:function(){this._dialog&&this._dialog.destroyRecursive();this.destroyRecursive()},_fetchSourceItemAdminServiceInfo:function(){return D.request({url:this._featureServiceAdminUrl})},_rebuildFullRadioClick:function(){k.hideNode(this._sceneLayerSelectContainer);k.disableNode(this._rebuildBtn,
!1);this._isBuildingSceneLayer()&&k.hideNode(this._fullRebuildRequired)},_rebuildLayersRadioClick:function(){if(!D.isPortal()&&this._canShowPartialRebuild){var y=k.isChecked(this._rebuildLayersRadio),z=k.isChecked(this._rebuildPartialRadio);if(z&&this._isBuildingSceneLayer()){var B=!1;a(".layer-checkbox",this.domNode).forEach(function(C){"true"===C.getAttribute("data-rebuild-required")?(B=!0,k.checkNode(C,!1)):k.checkNode(C,!0)});B&&k.showNode(this._fullRebuildRequired)}else if(y&&this._isBuildingSceneLayer)a(".layer-checkbox",
this.domNode).forEach(function(C){k.checkNode(C,!0)});else if(y||z)a(".layer-checkbox",this.domNode).map(function(C){var H="true"===C.getAttribute("data-rebuild-required");k.checkNode(C,y&&H);k.disableNode(C,H)}),a(".layer-label",this.domNode).map(function(C){var H="true"===C.getAttribute("data-rebuild-required");C.classList[z&&H?"add":"remove"]("label-disabled")})}D.isPortal()||(this._isBuildingSceneLayer()?(k.hideNode(this._sceneLayerSelectContainer),y&&k.hideNode(this._fullRebuildRequired)):(k.hideNode(this._fullRebuildRequired),
k.showNode(this._sceneLayerSelectContainer)));this._checkBoxClick()},_displayCreditCost:function(y,z,B){var C=D.isPortal(),H=G.self&&G.self.subscriptionInfo||{},E=(G.self&&G.self.user||{}).availableCredits||H.availableCredits||0;u({adminServiceInfo:this._fetchSourceItemAdminServiceInfo()}).then(function(K){C?z():(this._sourceItem.set("adminServiceInfo",K.adminServiceInfo),w.fetchScenePublishingCredits(this._sourceItem,y).then(function(I){var L=this._fullRebuildInProgress?this.i18n.confirmFullProceed:
this.i18n.confirmProceed;confirmMsg="\x3cp\x3e"+[this._fullRebuildInProgress?this.i18n.confirmFullDesc:this.i18n.confirmDesc,t.substitute(this._fullRebuildInProgress?this.i18n.confirmFullCredits:this.i18n.confirmCredits,{credits:r.format(I),availableCredits:r.format(E)}),L].join("\x3c/p\x3e\x3cp\x3e")+"\x3c/p\x3e";E<I&&confirmDlg.okButton.set("disabled",!0);n.createConfirmationDialog({strings:{title:this.i18n.confirmTitle,description:confirmMsg,ok:this.i18n.ok,cancel:this.i18n.cancel},renderHtmlDescription:!0,
autoCloseOnOk:!0,onOk:function(){z()}.bind(this),onCancel:function(){B()}.bind(this)})}.bind(this)))}.bind(this))},_rebuildClick:function(){k.isChecked(this._rebuildFullRadio)&&this._hasSource()?this._rebuildFullCache():this._rebuildLayers()},_rebuildFullCache:function(){var y=this._item.owner,z=this._item.folderId,B=G.restBaseUrl+"content/users/"+y+"/"+(z&&z!==y?z+"/":"")+"publish";publishRequest={buildInitialCache:!1,itemid:this._item.sourceData.id,filetype:"featureService",publishParameters:g.stringify({name:this._item.name?
this._item.name:this._item.title.replace(/ /g,"_"),targetSR:this._item.serviceInfo.layers[0].spatialReference}),outputType:"sceneService",overwrite:!0};selectedLayers=[];rebuildFullFailure=function(C){n.createConfirmationDialog({strings:{title:this.i18n.errorTitle,description:this.i18n.rebuildFullError},hideCancel:!0,autoCloseOnOk:!0});k.deactivateNode(this._caching);k.disableNode(this._rebuildBtn,!1);k.showNodes([this._optionsContainer,this._buttonBar])}.bind(this);this._fullRebuildInProgress=!0;
k.disableNode(this._rebuildBtn,!0);a(".layer-checkbox",this.domNode).map(function(C){k.checkNode(C,!0);selectedLayers.push({id:parseInt(C.getAttribute("data-layer-id"),10)})});this._displayCreditCost(selectedLayers,function(){k.hideNodes([this._optionsContainer,this._buttonBar]);k.activateNode(this._caching);D.request({url:B,content:publishRequest},{usePost:!0}).then(function(C){C&&C.services&&0<C.services.length?(C=C.services.shift(),x.checkAsyncJobStatus(G.restBaseUrl+"content/users/"+y+"/items/"+
C.serviceItemId+"/status?jobId\x3d"+C.jobId).then(function(H){setTimeout(function(){this._rebuildLayers();e.publish("manage-scene-cache/republish",H)}.bind(this),this._serviceStartWait)}.bind(this),rebuildFullFailure)):rebuildFullFailure(C)}.bind(this),rebuildFullFailure)}.bind(this),function(){this._fullRebuildInProgress=!1;k.disableNode(this._rebuildBtn,!1)}.bind(this))},_rebuildLayers:function(){var y=G.self&&G.self.subscriptionInfo||{},z=(G.self&&G.self.user||{}).availableCredits||y.availableCredits||
0,B=[],C=D.isPortal(),H,E;a(".layer-checkbox",this.domNode).map(function(K){k.isChecked(K)&&B.push({id:parseInt(K.getAttribute("data-layer-id"),10)})});0<B.length&&this._adminUrl&&(k.disableNode(this._rebuildBtn,!0),u({adminServiceInfo:this._fetchSourceItemAdminServiceInfo()}).then(function(K){if(C)this._submitPortalSceneCacheJob(B).then(function(M){var N=w.adjustHostedServerForProtocol(this._hostedServer.url)+"/rest/services/System/SceneCachingControllers/GPServer/Manage%20Scene%20Cache/jobs/"+M.jobId;
M.jobUrl=N;e.publish("manage-scene-cache/rebuild",M);k.disableNode(this._rebuildBtn,!1);this.hide()}.bind(this),function(M){k.disableNode(this._rebuildBtn,!1);n.createConfirmationDialog({strings:{title:this.i18n.errorTitle,description:this.i18n.rebuildError},hideCancel:!0,autoCloseOnOk:!0})}.bind(this),function(M){k.disableNode(this._rebuildBtn,!1);n.createConfirmationDialog({strings:{title:this.i18n.errorTitle,description:this.i18n.rebuildError},hideCancel:!0,autoCloseOnOk:!0})}.bind(this));else{this._sourceItem.set("adminServiceInfo",
K.adminServiceInfo);K=k.isChecked(this._rebuildPartialRadio);var I=this._rebuildAttributesRadio.checked,L=this._adminUrl+(I?"/updateAttribute":K?"/updateCache":"/rebuildCache");this._fullRebuildInProgress?D.request({url:L,content:{layers:B.map(function(M){return M.id},this).join(",")}},{usePost:!0}).then(function(M){e.publish("manage-scene-cache/rebuild",M);k.disableNode(this._rebuildBtn,!1);this.hide()}.bind(this),function(M){k.disableNode(this._rebuildBtn,!1);k.deactivateNode(this._caching);k.showNodes([this._optionsContainer,
this._buttonBar]);n.createConfirmationDialog({strings:{title:this.i18n.errorTitle,description:this.i18n.rebuildError},hideCancel:!0,autoCloseOnOk:!0})}.bind(this)):(K||I?this._isBuildingSceneLayer()?w.fetchPartialUpdateBuildingScenePublishingCredits(this._sourceItem,this._item,B):w.fetchPartialUpdateScenePublishingCredits(this._sourceItem,this._item,B):w.fetchScenePublishingCredits(this._sourceItem,B,this._isBuildingSceneLayer())).then(function(M){E=[this.i18n.confirmDesc,t.substitute(this.i18n.confirmCredits,
{credits:r.format(M),availableCredits:r.format(z)}),this.i18n.confirmProceed];H="\x3cp\x3e"+E.join("\x3c/p\x3e\x3cp\x3e")+"\x3c/p\x3e";n.createConfirmationDialog({strings:{title:this.i18n.confirmTitle,description:H,ok:this.i18n.ok,cancel:this.i18n.cancel},autoCloseOnOk:!0,renderHtmlDescription:!0,okDisabled:z<M,onOk:function(){D.request({url:L,content:{layers:B.map(function(N){return N.id},this).join(",")}},{usePost:!0}).then(function(N){e.publish("manage-scene-cache/rebuild",N);k.disableNode(this._rebuildBtn,
!1);this.hide()}.bind(this),function(N){k.disableNode(this._rebuildBtn,!1);n.createConfirmationDialog({strings:{title:this.i18n.errorTitle,description:this.i18n.rebuildError},hideCancel:!0,autoCloseOnOk:!0})}.bind(this))}.bind(this),onCancel:function(){k.disableNode(this._rebuildBtn,!1)}.bind(this)})}.bind(this))}}.bind(this)))},_cancelClick:function(){this._dialog.hide()},_checkBoxClick:function(){var y=a(".layer-checkbox",this.domNode).some(function(z){return k.isChecked(z)});k.disableNode(this._rebuildBtn,
!y)},_createLayerListDisplay:function(y,z){z=m.create("div",{display:"table"},z);y&&0<y.length&&y.forEach(this._createLayerDisplay.bind(this,z))},_createLayerDisplay:function(y,z){var B=z.requiresRebuild&&!0===z.requiresRebuild?"true":"false",C=m.create("div",{display:"table-row"},y);y=m.create("div",{display:"table-cell"},m.create("div",{display:"table-column"},C));C=m.create("div",{display:"table-cell"},m.create("div",{display:"table-column"},C));var H={id:t.substitute("layer-${id}-checkbox",{id:z.id}),
class:"layer-checkbox",type:"checkbox","data-layer-id":z.id,"data-rebuild-required":B};D.isPortal()&&(H.checked=!0);y=m.create("input",H,y);m.create("label",{"for":t.substitute("layer-${id}-checkbox",{id:z.id}),"class":"layer-label trailer-0",innerHTML:z.name,"data-rebuild-required":B},m.create("span",null,C));this.own(q(y,this._checkBoxClick.bind(this)))},_getPortalUpdateMode:function(){return k.isChecked(this._rebuildPortalAttributesRadio)?"PARTIAL_UPDATE_ATTRIBUTES":k.isChecked(this._rebuildPortalPartialRadio)?
"PARTIAL_UPDATE_NODES":"RECREATE_ALL_NODES"},_submitPortalSceneCacheJob:function(y){var z=1<y.length?y.map(function(C){return{id:C.id}}):{},B=this._getPortalUpdateMode();y=w.adjustHostedServerForProtocol(this._hostedServer.url)+"/rest/services/System/SceneCachingControllers/GPServer/Manage%20Scene%20Cache/submitJob";z={service_url:this._item.url,num_of_caching_service_instances:2,layer:g.stringify(z),update_mode:B,update_extent:"DEFAULT",area_of_interest:g.stringify({displayFieldName:"",geometryType:"esriGeometryPolygon",
spatialReference:{wkid:54051,latestWkid:54051},fields:[{name:"OID",type:"esriFieldTypeOID",alias:"OID"},{name:"updateGeom_Length",type:"esriFieldTypeDouble",alias:"updateGeom_Length"},{name:"updateGeom_Area",type:"esriFieldTypeDouble",alias:"updateGeom_Area"}],features:[],exceededTransferLimit:!1}),f:"json",token:this._item.serverToken};return h({url:y,content:z},{usePost:!0})},_isBuildingSceneLayer:function(){return-1<this._item.typeKeywords.indexOf("Building")},_isPointSceneLayer:function(){return-1<
this._item.typeKeywords.indexOf("Point")},_is3DObjectsWithoutUpdateEnabled:function(){return-1<this._item.typeKeywords.indexOf("3DObject")&&!this._hasUpdateEnabled()},_hasUpdateEnabled:function(){return(this._item.serviceInfo.layers||[]).some(function(y){return y&&c.isDefined(y.updateEnabled)&&!0===y.updateEnabled},this)},show:function(y,z,B){var C=D.isPortal();this._sourceItem=y;this._item=z;this._featureServiceUrl=y.url;this._featureServiceAdminUrl=C?z.url:y.url.replace("/rest/","/rest/admin/");
this._adminUrl=z.adminUrl;this._adminServiceInfo=z.serviceInfo||{};this._hostedServer=B;this._canShowPartialRebuild=!C&&!this._isPointSceneLayer()&&!this._is3DObjectsWithoutUpdateEnabled();this._dialog=new l({title:this.i18n.title,"class":this.baseClass});C||this._canShowPartialRebuild||(k.hideNode(this._rebuildPartialContainer),k.hideNode(this._rebuildPartialAttrContainer));C&&this._isPointSceneLayer()&&k.hideNode(this._rebuildPortalPartialContainer);this._createLayerListDisplay(this._adminServiceInfo.layers,
this._sceneLayerContainer);this._dialog.setContent(this.domNode);this.own(b(this._dialog,"hide",function(){this._dialogHidden()}.bind(this)));!C&&this._isBuildingSceneLayer()?(k.hideNode(this._rebuildFullContainer),this._rebuildLayersRadioLabel.innerHTML=this.i18n.rebuildFull,this._rebuildPartialRadio.checked=!0,this._rebuildLayersRadioClick(),this._rebuildFullContainer.parentNode.appendChild(this._rebuildLayersRadio.parentNode)):(this._rebuildLayersRadio.checked=!0,this._rebuildLayersRadioClick());
this._dialog.show()},hide:function(){this._dialog.hide()}})})},"arcgisonline/sharing/dijit/dialog/OverwriteFromCloud":function(){define("require exports tslib esri/Evented dojo/query dojo/on dijit/_TemplatedMixin dijit/_WidgetBase dojo/_base/Deferred ../../../tsutils/declareDecorator dojo/i18n!../../../nls/arcgisonline dijit/_WidgetsInTemplateMixin dojo/_base/lang esri/lang arcgisonline/pages/portal/cloudProvider/BoxConnect arcgisonline/pages/portal/cloudProvider/DropBoxConnect arcgisonline/pages/portal/cloudProvider/GoogleConnect arcgisonline/pages/portal/cloudProvider/OneDriveConnect ../../../sharing/dijit/dialog/ConfirmDialog ./_CreateItemUtilMixin dojo/text!arcgisonline/sharing/dijit/dialog/templates/OverwriteFromCloud.html".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);return function(){function x(){var D=
this;this.templateString=w.default;this.getCloudProviderMimeType=function(){return"zip"===D.cloudProviderInfo.mimeType?D.cloudProviderInfo.zipItemType:D.cloudProviderInfo.mimeType}}x.prototype.postMixInProperties=function(){this.inherited(arguments);g.default.mixin(this,{isBatch:this.items&&1<this.items.length});this.i18n=g.default.mixin({},t.default)};x.prototype.startup=function(D,G,F){var A;this.inherited(arguments);this.portal=D;this.cloudProviderInfo=G;this.originalItemToOverwrite=F;this.addItem=
null;this.currentCloudProvider="";this.cloudConnect={googleConnect:null,dropBoxConnect:null,oneDriveConnect:null,boxConnect:null,none:null};this.cloudDriveText="";this.publishInfo=null;switch(null===(A=this.cloudProviderInfo)||void 0===A?void 0:A.cloudProvider){case "boxConnect":this.currentCloudProvider="boxConnect";this.cloudConnect[this.currentCloudProvider]=new v.default;this.cloudDriveText="Box";break;case "dropBoxConnect":this.currentCloudProvider="dropBoxConnect";this.cloudConnect[this.currentCloudProvider]=
new p.default;this.cloudDriveText="Dropbox";break;case "oneDriveConnect":this.currentCloudProvider="oneDriveConnect";this.cloudConnect[this.currentCloudProvider]=new n.default;this.cloudDriveText="OneDrive";break;case "googleConnect":this.currentCloudProvider="googleConnect";this.cloudConnect[this.currentCloudProvider]=new l.default;this.cloudDriveText="Google Drive";break;default:this.currentCloudProvider="none",this.cloudDriveText=t.default.overwriteFromGeoJSON.sourceGeoJSON}return this.initUI()};
x.prototype.showModal=function(){var D=this,G=new e.default,F=t.default.overwriteFromCloudDlg.overwriteCloudButton+this.cloudDriveText;"none"===this.currentCloudProvider&&(F=t.default.updateItemDlg.updateFeatures);this.dlg=new k.default({title:t.default.overwriteFromCloudDlg.originalDialogTitle+this.cloudDriveText,style:{width:"500px",height:"auto"},buttonOkLabel:F});F="";var A=this.getCloudProviderMimeType();switch(null===A||void 0===A?void 0:A.toLowerCase()){case "google-apps":case "googlesheets":F=
t.default.overwriteFromCloudDlg.cloudFileTypeGoogleSheets;this.cloudProviderInfo.mimeType="googlesheets";break;case "csv":F=t.default.overwriteFromCloudDlg.cloudFileTypeCsv;break;case "excel":case "spreadsheetml":F=t.default.overwriteFromCloudDlg.cloudFileTypeExcel;break;case "shapefile":F=t.default.overwriteFromCloudDlg.cloudFileTypeShapefile;break;case "fgdb":F=t.default.overwriteFromCloudDlg.cloudFileTypeFgdb;break;case "geojson":F=t.default.overwriteFromCloudDlg.cloudFileTypeGeoJson;break;default:F=
t.default.overwriteFromCloudDlg.cloudFileTypeExcel}"none"===this.currentCloudProvider&&A.includes("geojson")?(F=m.default.substitute({title:this.originalItemToOverwrite.title},t.default.overwriteFromGeoJSON.description),(0,h.default)(".overwriteInfoNote",this.domNode).addClass("hide")):F=m.default.substitute({title:this.originalItemToOverwrite.title,fileType:F,cloudDrive:this.cloudDriveText},t.default.overwriteFromCloudDlg.overwriteInfoText);(0,h.default)(".overwriteInfoText",this.domNode).attr("innerHTML",
F);this.dlg.setContent(this.domNode);this.dlg.show();this.own((0,d.default)(this.dlg,"ok",function(){D.set("readOnly",!0);var y="";D.loaderHelper(!0,t.default.overwriteFromCloudDlg.defaultLoading);if("none"!==D.currentCloudProvider){var z="https://".concat(D.portal.portalHostname);D.cloudConnect[D.currentCloudProvider].GetTokenViaOauth(z).then(function(B){y="googleConnect"===D.cloudProviderInfo.cloudProvider?["google-apps","googlesheets"].includes(A)?"https://www.googleapis.com/drive/v3/files/".concat(D.cloudProviderInfo.id,
'/export?mimeType\x3dapplication/vnd.openxmlformats-officedocument.spreadsheetml.sheet\x26httpHeaders\x3d{"Authorization":"Bearer\x26#32;').concat(B,'"}'):"https://www.googleapis.com/drive/v3/files/".concat(D.cloudProviderInfo.id,'?alt\x3dmedia\x26httpHeaders\x3d{"Authorization":"Bearer\x26#32;').concat(B,'"}'):"dropBoxConnect"===D.cloudProviderInfo.cloudProvider?'https://content.dropboxapi.com/2/files/download?httpHeaders\x3d{"Authorization":"Bearer\x26#32;'.concat(B,'","Dropbox-API-Arg":"{\\"path\\":\\"').concat(D.cloudProviderInfo.id,
'\\"}"}'):"oneDriveConnect"===D.cloudProviderInfo.cloudProvider?"https://graph.microsoft.com/v1.0/me/drive/items/".concat(D.cloudProviderInfo.id,'/content?httpHeaders\x3d{"Authorization":"Bearer\x26#32;').concat(B,'"}'):"https://api.box.com/2.0/files/".concat(D.cloudProviderInfo.id,'/content?httpHeaders\x3d{"Authorization":"Bearer\x26#32;').concat(B,'"}');D.overwriteItem(y)});(function(B){"popupBlocked"===B?D.showError(t.default.overwriteFromCloudDlg.errors.popupIssue):"InvalidToken"===B||"windowClosed"===
B?D.loaderHelper(!1,null):D.showError(B)})}else D.overwriteItem(D.cloudProviderInfo.url)}));(0,d.default)(this.dlg,"cancel",function(){D.set("readOnly",!0);D.onCancel()});return G};x.prototype.onCancel=function(){this.dlg&&this.dlg.destroyRecursive()};x.prototype.overwriteItem=function(D){var G=this;this.loaderHelper(!0,t.default.overwriteFromCloudDlg.addingItem);var F=this.getCloudProviderMimeType();this.addExternalItem(D,this.originalItemToOverwrite.title,F).then(function(){G.publishInfo={itemId:G.addItem.id,
filetype:G.getNameForMimeType(F,"publish")};G.getPublishParametersForOverwrite().then(function(A){G.publishInfo.item=G.addItem;G.publishInfo.publishParameters=A;G.publishInfo.overwrite=!0;G.publishInfo.deleteSourceItemUponCompletion=!0;G.loaderHelper(!0,t.default.overwriteFromCloudDlg.overwriting);G.publishExternalItem().then(function(y){G.updateTypeKeyword(y).then(function(){window.location.href="item.html?id\x3d".concat(y[0].serviceItemId,"\x26jobid\x3d").concat(y[0].jobId)})})})});(function(A){G.showError(t.default.overwriteFromCloudDlg.errors.addItemCheckStatusIssue,
!0)})};x.prototype.initUI=function(){return new e.default};x.prototype.addExternalItem=function(D,G,F){var A=this,y=new e.default;D={dataUrl:D,async:!0,type:this.getNameForMimeType(F,"addItemType"),typeKeywords:this.getNameForMimeType(F,"addItemKeywords"),Title:G,filename:G,overwrite:!0};var z=this.portal;r.default.addItem(D,this.originalItemToOverwrite.folderId,z).then(function(B){A.addItem=B;r.default.checkStatus(A.addItem,y,null,z,function(C){y.resolve(C)})});(function(B){A.showError(B);y.reject(B)});
return y};x.prototype.getPublishParametersForOverwrite=function(){var D=this,G=new e.default;r.default.getPublishParametersForOverwrite(this.originalItemToOverwrite,this.getNameForMimeType(this.getCloudProviderMimeType(),"addItem")).then(function(F){G.resolve(F)});(function(F){D.showError(F);G.reject(F)});return G};x.prototype.publishExternalItem=function(){var D=this,G=new e.default;r.default.publishItem(this.publishInfo.item,this.publishInfo,this.portal).then(function(F){G.resolve(F.publishResult)});
(function(F){D.showError(F);G.reject(F)});return G};x.prototype.getNameForMimeType=function(D,G){var F="";D=D.toLowerCase();return F=-1!==G.indexOf("addItem")?-1!==D.indexOf("csv")?"CSV":-1!==D.indexOf("excel")?"Microsoft Excel":-1!==D.indexOf("shapefile")?"Shapefile":-1!==D.indexOf("fgdb")||-1!==D.indexOf("file geodatabase")?"File Geodatabase":-1!==D.indexOf("geojson")?"GeoJson":-1!==D.indexOf("sheets")?"Microsoft Excel":"CSV":-1!==D.indexOf("csv")?"csv":-1!==D.indexOf("excel")?"excel":-1!==D.indexOf("shapefile")?
"shapefile":-1!==D.indexOf("fgdb")||-1!==D.indexOf("file geodatabase")?"fileGeodatabase":-1!==D.indexOf("geojson")?"geojson":-1!==D.indexOf("sheets")?"excel":"csv"};x.prototype.updateTypeKeyword=function(D){var G=this,F=new e.default,A=this.portal,y=this.originalItemToOverwrite.folderId,z="Cloud Drive",B=JSON.parse(this.publishInfo.publishParameters);if("address"===B.locationType||B.layers[0]&&"address"===B.layers[0].locationType)z+=",showUnmatchedAddresses,Involved Lookup";else if("none"===B.locationType||
B.layers[0]&&"none"===B.layers[0].locationType)z+=",Table";r.default.updateItem({folderId:y,id:D[0].serviceItemId,typeKeywords:z},A).then(function(){F.resolve()});(function(C){G.showError(C);F.reject(C)});return F};x.prototype.showError=function(D,G){var F=this;D=g.default.mixin(g.default.mixin({},t.default.overwriteFromCloudDlg.errors.error),D);this._errorDlg=new k.default({showCancel:!1,style:{width:"400px",height:"auto"}});this._errorDlg.show(D).then(function(){F.set("readOnly",!1);F._errorDlg.hide()});
G||null!=this.addItem&&r.default.deleteItem(this.addItem,this.portal);this.loaderHelper(!1,null);return!1};x.prototype.loaderHelper=function(D,G){G=G?G:"Loading...";!0===D?(this.showHideDiv(".loader",!0),(0,h.default)(".loader-text",this.domNode).attr("innerHTML",G),(0,h.default)(".overwriteDialog",this.domNode).style("opacity","0.5"),(0,h.default)(".overwriteDialog",this.domNode).style("pointer-events","none"),this.dlg.okButton.set("disabled",!0),this.dlg.cancelButton.set("disabled",!0)):((0,h.default)(".loader-text",
this.domNode).attr("innerHTML",G),this.showHideDiv(".loader",!1),(0,h.default)(".overwriteDialog",this.domNode).style("opacity","1"),(0,h.default)(".overwriteDialog",this.domNode).style("pointer-events","auto"),this.dlg.okButton.set("disabled",!1),this.dlg.cancelButton.set("disabled",!1))};x.prototype.showHideDiv=function(D,G){!0===G?(0,h.default)(D).removeClass("hide"):(0,h.default)(D).addClass("hide")};return x=f.__decorate([(0,q.default)(a.default,b.default,u.default,c.default)],x)}()})},"arcgisonline/pages/portal/cloudProvider/BoxConnect":function(){define("require exports tslib ../../../esriGeowConfig ./CommonCloudProvider ../../../tsutils/declareDecorator dojo/Deferred dojo/_base/kernel".split(" "),
function(S,J,f,c,h,d,b,a){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);return function(){function e(q){this.boxToken="";this.allPages=[]}e.prototype.postscript=function(){};e.prototype.GetTokenViaOauth=function(q){var t=this,u=new b.default,g="".concat(q,"/home/cloudDriveOauth-callback2.html"),m="".concat("https://account.box.com/api/oauth2/authorize","?redirect_uri\x3d").concat(g,"\x26response_type\x3dcode\x26client_id\x3d").concat(c.default.boxClientId,
"\x26locale\x3d").concat(a.default.locale);this._oauthSignIn(m,q).then(function(v){t._getTokenValue(v,"code").then(function(p){p="grant_type\x3dauthorization_code\x26code\x3d".concat(p,"\x26client_id\x3d").concat(c.default.boxClientId,"\x26client_secret\x3d").concat(c.default.boxClientSecret,"\x26redirect_uri\x3d").concat(g);t._makeExternalRequests("POST","https://api.box.com/oauth2/token",p).then(function(l){t.boxToken=l.access_token;u.resolve(l.access_token)},function(l){u.reject(l)})})},function(v){u.reject(v)});
return u};e.prototype.GetAllFiles=function(q){var t=this,u=new b.default,g=null===q||void 0===q?void 0:q.searchText,m=null===q||void 0===q?void 0:q.dropdownFilter;q=null===q||void 0===q?void 0:q.previousOrNext;var v="Bearer ".concat(this.boxToken);q||(this.allPages=[]);var p="https://api.box.com/2.0/search?fields\x3did,name\x26type\x3dfile\x26limit\x3d10";p=g?p+"\x26query\x3d".concat(g):p+"\x26query\x3dcsv xls";p="all"!==m&&m?"csv"===m?p+"\x26file_extensions\x3dcsv":"excel"===m?p+"\x26file_extensions\x3dxls,xlsx":
p+"\x26file_extensions\x3dcsv,xls,xlsx":p+"\x26file_extensions\x3dcsv,xls,xlsx";q&&"next"===q&&(p+="\x26offset\x3d".concat(this.allPages[this.allPages.length-1].NextToken));q&&"previous"===q&&2<=this.allPages.length&&(this.allPages.pop(),1<this.allPages.length&&(p+="\x26offset\x3d".concat(this.allPages[this.allPages.length-2].NextToken)),this.allPages.pop());this._makeExternalRequests("GET",p,null,v,"application/json").then(function(l){var n={files:[],next:l.total_count>l.limit+l.offset?!0:!1,previous:1<=
t.allPages.length?!0:!1};t.allPages.push({Next:n.next,Previous:n.previous,NextToken:l.total_count>l.limit+l.offset?l.limit+l.offset:!1});for(var k=0;k<l.entries.length;k++){var r=l.entries[k];n.files.push({id:r.id,name:r.name,mimeType:-1!==r.name.indexOf("csv")?"csv":"excel",downloadUrl:"https://api.box.com/2.0/files/".concat(r.id,'/content?httpHeaders\x3d{"Authorization":"Bearer\x26#32;').concat(t.boxToken,'"}')})}u.resolve(n)},function(l){u.reject(l)});return u};return e=f.__decorate([(0,d.default)(h.default)],
e)}()})},"arcgisonline/pages/portal/cloudProvider/CommonCloudProvider":function(){define("require exports tslib ../../../tsutils/declareDecorator dojo/Deferred dojo/Stateful".split(" "),function(S,J,f,c,h,d){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);return function(){function b(a){}b.prototype.postscript=function(){};b.prototype._oauthSignIn=function(a,e){var q=new h.default,t="".concat(window.location.protocol,"//").concat(window.location.hostname);a="?cloudUrl\x3d".concat(a,
"\x26currentSourceUrl\x3d").concat(t,"\x26portalHostName\x3d").concat(e);a="".concat(e,"/home/cloudDriveOauth-callback.html").concat(a);t=document.createElement("iframe");t.src=a;t.className="hide";document.body.appendChild(t);a=window.addEventListener?"addEventListener":"attachEvent";(0,window[a])("attachEvent"===a?"onmessage":"message",function(u){u.origin===e&&("popupBlocked"!==u.data&&"windowClosed"!==u.data||q.reject(u.data),q.resolve(u.data))},!1);return q};b.prototype._getTokenValue=function(a,
e){var q=new h.default;e=e.replace(/[[]/,"[").replace(/[]]/,"]");e="[?\x26#]".concat(e,"\x3d([^\x26#]*)");a=(new RegExp(e)).exec(a);null==a?q.reject("InvalidToken"):q.resolve(a[1]);return q};b.prototype._makeExternalRequests=function(a,e,q,t,u){var g=new h.default,m=new XMLHttpRequest;m.open(a,e,!1);t&&m.setRequestHeader("Authorization",t);u&&m.setRequestHeader("Content-type",u);q?m.send(q):m.send();a=JSON.parse(m.responseText);400<=m.status&&g.reject(JSON.parse(m.responseText));g.resolve(a);return g};
return b=f.__decorate([(0,c.default)(d.default)],b)}()})},"arcgisonline/pages/portal/cloudProvider/DropBoxConnect":function(){define("require exports tslib ../../../esriGeowConfig ./CommonCloudProvider ../../../tsutils/declareDecorator dojo/Deferred dojo/_base/kernel".split(" "),function(S,J,f,c,h,d,b,a){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);return function(){function e(q){this.dropBoxToken="";this.allPages=[]}e.prototype.postscript=
function(){};e.prototype.GetTokenViaOauth=function(q){var t=this,u=new b.default,g="dropbox".concat(Math.floor(Date.now()/1E3)),m="".concat(q,"/home/cloudDriveOauth-callback2.html");m="".concat("https://www.dropbox.com/oauth2/authorize","?redirect_uri\x3d").concat(m,"\x26response_type\x3dtoken\x26client_id\x3d").concat(c.default.dropboxClientId,"\x26locale\x3d").concat(a.default.locale,"\x26state\x3d").concat(g);this._oauthSignIn(m,q).then(function(v){t._getTokenValue(v,"state").then(function(p){g!==
p&&u.reject("invalidState");t._getTokenValue(v,"access_token").then(function(l){t.dropBoxToken=l;u.resolve(l)},function(l){u.reject(l)})})},function(v){u.reject(v)});return u};e.prototype.GetAllFiles=function(q){var t=this,u=new b.default,g=null===q||void 0===q?void 0:q.searchText,m=null===q||void 0===q?void 0:q.dropdownFilter,v=null===q||void 0===q?void 0:q.previousOrNext;q="Bearer ".concat(this.dropBoxToken);v||(this.allPages=[]);var p="";g=g?" ".concat(g):"";var l=0;v&&"next"===v&&(l=this.allPages[this.allPages.length-
1].NextToken);v&&"previous"===v&&2<=this.allPages.length&&(this.allPages.pop(),1<this.allPages.length&&(l=this.allPages[this.allPages.length-2].NextToken),this.allPages.pop());v="";"csv"===m?(v='{"path":"","query":"'.concat(g,' csv","mode": "filename_and_content","max_results":10,"start":').concat(l,"}"),p="csv"):"excel"===m?(v='{"path":"","query":"'.concat(g,' xls","mode": "filename_and_content","max_results":10,"start":').concat(l,"}"),p="excel"):"shapeFile"===m?(v='{"path":"","query":"'.concat(g,
' .zip","mode": "filename_and_content","max_results":10,"start":').concat(l,"}"),p="shapeFile"):"fgdb"===m?(v='{"path":"","query":"'.concat(g,' .zip","mode": "filename_and_content","max_results":10,"start":').concat(l,"}"),p="fgdb"):"geoJson"===m?(v='{"path":"","query":"'.concat(g,' .geojson","mode": "filename_and_content","max_results":10,"start":').concat(l,"}"),p="geojson"):(v='{"path":"","query":"'.concat(g,' csv","mode": "filename_and_content","max_results":10,"start":').concat(l,"}"),p="csv");
this._makeExternalRequests("POST","https://api.dropboxapi.com/2/files/search",v,q,"application/json").then(function(n){var k={files:[],next:n.more?!0:!1,previous:1<=t.allPages.length?!0:!1};t.allPages.push({Next:k.next,Previous:k.previous,NextToken:n.more?n.start:null});for(var r=0;r<n.matches.length;r++){var w=n.matches[r];"file"===w.metadata[".tag"]&&k.files.push({id:w.metadata.id,name:w.metadata.name,mimeType:p,downloadUrl:'https://content.dropboxapi.com/2/files/download?httpHeaders\x3d{"Authorization":"Bearer\x26#32;'.concat(t.dropBoxToken,
'","Dropbox-API-Arg":"{\\"path\\":\\"').concat(w.metadata.id,'\\"}"}')})}u.resolve(k)},function(n){u.reject(n)});return u};return e=f.__decorate([(0,d.default)(h.default)],e)}()})},"arcgisonline/pages/portal/cloudProvider/GoogleConnect":function(){define("require exports tslib ../../../esriGeowConfig ./CommonCloudProvider ../../../tsutils/declareDecorator dojo/Deferred dojo/_base/kernel".split(" "),function(S,J,f,c,h,d,b,a){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);
a=f.__importDefault(a);return function(){function e(q){this.googleToken="";this.allPages=[]}e.prototype.postscript=function(){};e.prototype.GetTokenViaOauth=function(q){var t=this,u=new b.default,g="google".concat(Math.floor(Date.now()/1E3)),m="".concat(q,"/home/cloudDriveOauth-callback2.html");m="".concat("https://accounts.google.com/o/oauth2/v2/auth","?scope\x3d").concat("https://www.googleapis.com/auth/drive.readonly","\x26redirect_uri\x3d").concat(m,"\x26response_type\x3dtoken\x26client_id\x3d").concat(c.default.googleClientId,
"\x26hl\x3d").concat(a.default.locale,"\x26state\x3d").concat(g);this._oauthSignIn(m,q).then(function(v){t._getTokenValue(v,"state").then(function(p){g!==p&&u.reject("invalidState");t._getTokenValue(v,"access_token").then(function(l){t.googleToken=l;u.resolve(l)},function(l){u.reject(l)})})},function(v){u.reject(v)});return u};e.prototype.GetAllFiles=function(q){var t=this,u=new b.default,g=null===q||void 0===q?void 0:q.searchText,m=null===q||void 0===q?void 0:q.dropdownFilter;q=null===q||void 0===
q?void 0:q.previousOrNext;q||(this.allPages=[]);var v="",p="https://www.googleapis.com/drive/v3/files?access_token\x3d".concat(this.googleToken,"\x26pageSize\x3d10\x26q\x3d");g&&(p+="name contains '".concat(g,"'and"));"csv"===m?(p+='(mimeType\x3d"text/csv")',v="csv"):"excel"===m?(p+='(mimeType\x3d"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"ormimeType\x3d"application/vnd.ms-excel")',v="excel"):"shapeFile"===m?(p+='(mimeType\x3d"application/x-zip-compressed"ormimeType\x3d"application/zip")',
v="shapeFile"):"fgdb"===m?(p+='(mimeType\x3d"application/x-zip-compressed"ormimeType\x3d"application/zip")',v="fgdb"):"geoJson"===m?(p+='(name contains "json" or name contains "geojson")and(mimeType\x3d"application/octet-stream"ormimeType\x3d"application/json")',v="geojson"):"sheets"===m?(p+='(mimeType\x3d"application/vnd.google-apps.spreadsheet")',v="googlesheets"):(p+='(mimeType\x3d"text/csv")',v="csv");q&&"next"===q&&(p+="\x26pageToken\x3d".concat(this.allPages[this.allPages.length-1].NextToken));
q&&"previous"===q&&2<=this.allPages.length&&(this.allPages.pop(),1<this.allPages.length&&(p+="\x26pageToken\x3d".concat(this.allPages[this.allPages.length-2].NextToken)),this.allPages.pop());this._makeExternalRequests("GET",p,null,null,"application/json").then(function(l){var n={files:[],next:l.nextPageToken?!0:!1,previous:1<=t.allPages.length?!0:!1};t.allPages.push({Next:n.next,Previous:n.previous,NextToken:l.nextPageToken?l.nextPageToken:null});for(var k=0;k<l.files.length;k++){var r=l.files[k];
n.files.push({id:r.id,name:r.name,mimeType:v,downloadUrl:-1!==r.mimeType.indexOf("google-apps")?"https://www.googleapis.com/drive/v3/files/".concat(r.id,'/export?mimeType\x3dapplication/vnd.openxmlformats-officedocument.spreadsheetml.sheet\x26httpHeaders\x3d{"Authorization":"Bearer\x26#32;').concat(t.googleToken,'"}'):"https://www.googleapis.com/drive/v3/files/".concat(r.id,'?alt\x3dmedia\x26httpHeaders\x3d{"Authorization":"Bearer\x26#32;').concat(t.googleToken,'"}')})}u.resolve(n)},function(l){u.reject(l)});
return u};return e=f.__decorate([(0,d.default)(h.default)],e)}()})},"arcgisonline/pages/portal/cloudProvider/OneDriveConnect":function(){define("require exports tslib ../../../esriGeowConfig ./CommonCloudProvider ../../../tsutils/declareDecorator dojo/Deferred dojo/_base/kernel".split(" "),function(S,J,f,c,h,d,b,a){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);return function(){function e(q){this.oneDriveToken="";this.allPages=[]}
e.prototype.postscript=function(){};e.prototype.GetTokenViaOauth=function(q){var t=this,u=new b.default,g="onedrive".concat(Math.floor(Date.now()/1E3)),m="".concat(q,"/home/cloudDriveOauth-callback2.html");m="".concat("https://login.microsoftonline.com/common/oauth2/v2.0/authorize","?scope\x3d").concat("files.read","\x26redirect_uri\x3d").concat(m,"\x26response_type\x3dtoken\x26client_id\x3d").concat(c.default.oneDriveClientId,"\x26locale\x3d").concat(a.default.locale,"\x26state\x3d").concat(g);this._oauthSignIn(m,
q).then(function(v){t._getTokenValue(v,"state").then(function(p){g!==p&&u.reject("invalidState");t._getTokenValue(v,"access_token").then(function(l){t.oneDriveToken=l;u.resolve(l)},function(l){u.reject(l)})})},function(v){u.reject(v)});return u};e.prototype.GetAllFiles=function(q){var t=this,u=new b.default,g=null===q||void 0===q?void 0:q.searchText,m=null===q||void 0===q?void 0:q.dropdownFilter;q=null===q||void 0===q?void 0:q.previousOrNext;var v="Bearer ".concat(this.oneDriveToken);q||(this.allPages=
[]);var p="",l="https://graph.microsoft.com/v1.0/me/drive/root/search(q\x3d'";g&&(l+="".concat(g," "));"csv"===m?(l+=".csv",p="csv"):"excel"===m?(l+=".xls",p="excel"):"shapeFile"===m?(l+=".zip",p="shapeFile"):"fgdb"===m?(l+=".zip",p="fgdb"):"geoJson"===m?(l+=".geojson .json",p="geojson"):(l+=".csv",p="csv");l+="')?select\x3dname,id,file\x26top\x3d10";q&&"next"===q&&(l+="\x26$skiptoken\x3d".concat(this.allPages[this.allPages.length-1].NextToken));q&&"previous"===q&&2<=this.allPages.length&&(this.allPages.pop(),
1<this.allPages.length&&(l+="\x26$skiptoken\x3d".concat(this.allPages[this.allPages.length-2].NextToken)),this.allPages.pop());this._makeExternalRequests("GET",l,null,v,"application/json").then(function(n){var k={files:[],next:n["@odata.nextLink"]?!0:!1,previous:1<=t.allPages.length?!0:!1},r={Next:k.next,Previous:k.previous,NextToken:n["@odata.nextLink"]?t._getNextTokenFromUrl(n["@odata.nextLink"],"skiptoken"):null};t.allPages.push(r);for(r=0;r<n.value.length;r++){var w=n.value[r];w.file&&("fgdb"!==
p&&"shapeFile"!==p||"application/zip"===w.file.mimeType)&&k.files.push({id:w.id,name:w.name,mimeType:p,downloadUrl:"https://graph.microsoft.com/v1.0/me/drive/items/".concat(w.id,'/content?httpHeaders\x3d{"Authorization":"Bearer\x26#32;').concat(t.oneDriveToken,'"}')})}u.resolve(k)},function(n){u.reject(n)});return u};e.prototype._getNextTokenFromUrl=function(q,t){t=t.replace(/[[]/,"[").replace(/[]]/,"]");t="[?\x26#$]".concat(t,"\x3d([^\x26#]*)");q=(new RegExp(t)).exec(q);return null===q?"":q[1]};
return e=f.__decorate([(0,d.default)(h.default)],e)}()})},"arcgisonline/sharing/dijit/dialog/PublishTileServiceDlg":function(){define("dojo/_base/declare dojo/on dojo/dom-attr dojo/query dojo/dom dojo/dom-style dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/dom-construct dojo/string dojo/_base/window dojo/promise/all dojo/when dojo/Deferred dojo/_base/array dojo/cookie dojo/dom-class dojo/json dijit/registry dijit/form/CheckBox dijit/form/TextBox dijit/form/RadioButton dijit/form/Select ./ConfirmDialog dijit/focus dojo/_base/event dojo/keys ./_CreateItemUtilMixin ./ItemPropertiesDlg dojo/topic esri/IdentityManager esri/lang esri/Evented esri/arcgis/Portal ../../geow/Account ./_PublishTileServiceDlgMixin ../../../esriGeowConfig ../../util ../../../pages/pageUtil ../../../pages/utils/dom ../../../pages/serviceUtil ../../../pages/statusUtil ../../../map/core/canUseForPublish esri/map esri/tasks/Geoprocessor esri/dijit/VisibleScaleRangeSlider ../../../pages/isGeographic preact ../../../pages/components/SelectLayerProperties dojo/i18n!arcgisonline/nls/arcgisonline dojo/text!arcgisonline/sharing/dijit/dialog/templates/PublishTilesDlg.html".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E,K,I,L,M,N,P,R,Y,ja,aa,da,ra,ca,fa,la,ta,Q,T,O,Z,na){return S("arcgisonline.sharing.dijit.dialog.PublishTilesDlg2",[a,e,q,P,L],{baseClass:"esriPublishTilesDlg",showFolders:!1,_typeInfo:"mapserver",userFolders:"",templateString:na,onDone:function(){},postMixInProperties:function(){this.inherited(arguments);this.i18n=b.mixin({},Z);this._portalUser=(this._portal=R.portal)&&this._portal.getPortalUser();switch(this.type){case "tiles":this._typeInfo=
"mapserver";break;case "scenes":this._typeInfo="sceneserver";break;case "features":this._typeInfo="featureserver";break;case "vectorTiles":this._typeInfo="vectortileserver";break;case "tiledImagery":case "dynamicImagery":this._typeInfo="imageserver";break;default:this._typeInfo=this.type}},postCreate:function(){this.inherited(arguments);N.getSelf(b.hitch(this,function(ia){this._loadConnections();this._portal?this._init():(this._portal=new M.Portal({url:R.restBaseUrl,self:ia}),this._portal.on("load",
b.hitch(this,function(){this._connect&&this._connect.remove();this._portalUser=this._portal.getPortalUser();this._init()})))}))},_init:function(){this._restBaseUrl=R.allSSL?this._portal.portalUrl.replace("http:/","https:/"):this._portal.portalUrl;this._contentUrl=this._restBaseUrl+"content";this._publishUrl=this._contentUrl+"/users/"+this._portalUser.username;this.set("message",this.get("message"));this._portal&&!this._portal.isPortal&&(this.cacheStorageInfo.storageFormat="esriMapCacheStorageModeExploded");
this._itemPropertiesDlg.on("load",b.hitch(this,function(){this._loadData().then(b.hitch(this,function(ia){this._itemPropertiesDlg.set("focus","title");"sceneserver"===this._typeInfo&&this._itemPropertiesDlg._title.set("disabled",!0);R.self.hasCategorySchema&&(ia=[],this.fsItem?ia=this.fsItem.categories||ia:this._selectedService&&(ia=this._selectedService.categories||ia),this._itemPropertiesDlg.set("categories",ia))}))}))},destroy:function(){c(".dijit",this.contentNode).map(w.byNode).forEach(function(ia){ia.destroyRecursive?
ia.destroyRecursive():ia.destroy&&ia.destroy();ia=null});this._errorDlg&&(this._errorDlg.destroyRecursive(),this._errorDlg=null);this.inherited(arguments);this._tagsDijit=this._portalUser=this._portal=null},_loadConnections:function(){this.own(E.subscribe("dlg/onOk",b.hitch(this,function(){this._focusNode&&setTimeout(b.hitch(this,function(){y.focus(this._focusNode)}),250)})),E.subscribe("/esri/disable",b.hitch(this,function(ia,X){this.set("disabled",ia,X,!0)})),J(this._agoBasemapRadio,"click",b.hitch(this,
function(){this._isUserDefinedTileInfo=!1;this._customBasemapUrl.set("disabled",!0);this._updateLODs(this.lods)})),J(this._customBasemapRadio,"click",b.hitch(this,function(){c(".visibleScaleRange",this.domNode).addClass("hide");this._isUserDefinedTileInfo=!0;this._customBasemapUrl.set("disabled",!1);this.userDefinedTileInfo&&this._updateLODs(this.userDefinedTileInfo.lods)})),J(this._customBasemapUrl,"keyup",b.hitch(this,function(ia){ia.keyCode===B.ENTER&&(z.stop(ia),this._customBasemapUrl.onChange(this._customBasemapUrl.get("value")))})),
J(this._customBasemapUrl,"change",b.hitch(this,function(ia){ia&&ia.length?(this._customBasemapUrl.set("disabled",!0),this.set("disabled",!0,this.i18n.publishWizard.fetchingServiceInfo),this._fetchTileLayerInfo(ia,this._type).then(b.hitch(this,function(X){this.userDefinedTileInfoUrl=ia;this.userDefinedTileInfo=X;this._updateLODs(X.lods);this._customBasemapUrl.set("disabled",!1);this.set("disabled",this._buildingVisibleRange)}),b.hitch(this,function(X){this.userDefinedTileInfo=null;this._showError(X)}))):
(this.userDefinedTileInfo=null,c(".visibleScaleRange",this.domNode).addClass("hide"))})),J(this._tilesOnDemand,"click",b.hitch(this,"_visibleScaleRangeChange")),J(this._selectAttributesContainer,"click",this._selectAttributesClick.bind(this)),this._enableSceneUpdates.on("change",function(){if("scenes"===this._type&&this.fsItem){var ia=this._enableSceneUpdates.get("checked"),X=!Q(this.spatialReference)&&!this.is3dObjectFeatureLayer(this.fsItem),ha=this._featureServiceJson&&-1<this._featureServiceJson.capabilities.indexOf("ChangeTracking");
ia?c(".sceneProperties .sceneDataDisplay",this.domNode).addClass("hide"):this.fsItem.isMultipatchFeatureService&&!ha&&X&&c(".sceneProperties .sceneDataDisplay",this.domNode).removeClass("hide")}}.bind(this)))},is3dObjectFeatureLayer:function(ia){return"Feature Service"===ia.type&&(ia.layers||[]).some(function(X){return!(!X||!X.infoFor3D)})},_selectAttributesClick:function(){var ia=this.fsItem&&this.fsItem.layers||this._selectedServiceLayers,X=this.vtLayerProperties||this.fsItem&&this.fsItem.adminServiceInfo&&
this.fsItem.adminServiceInfo.layerProperties||[],ha=t.create("div",null,document.body,"last");T.render(T.h(O.default,{layers:ia,layerProperties:X,className:"normalize-modal",onCancel:function(){this._selectAttributesBtn.focus();T.render(null,ha)}.bind(this),onSubmit:function(V){this.vtLayerProperties=V;this.vectorTilePublishParams=b.mixin(this.vectorTilePublishParams||{},{layerProperties:V});this._selectAttributesBtn.focus();T.render(null,ha)}.bind(this)}),ha);ha.firstChild.classList.add("bring-modal-to-front")},
_updateLODs:function(ia){(ia=ia||this.lods)&&this.set("calculatedScales",this._calculateConstraints({layers:[{minScale:ia[0].scale,maxScale:ia[ia.length-1].scale}]}))},_adjustDefaultLODs:function(ia){var X=ia.maxScale||0,ha=ia.minScale||this.lods[0].scale;this.lods=l.filter(this.lods,function(V){return V.scale>=X&&V.scale<=ha});return this._updateLODs(this.lods)},_getLayers:function(ia){return ia&&ia.length?l.map(ia,function(X){X.layerDefinition&&(X=b.mixin(X,X.layerDefinition),delete X.layerDefinition);
return X}):null},_getLayerDefs:function(ia){return ia&&ia.length?l.filter(ia,function(X){return X.layerDefinition}).map(function(X){return{id:X.id,layerDefinition:X.layerDefinition}}):null},_loadData:function(){if("imageserver"===this._typeInfo)return this._loadImageData();var ia=new p;"wfs"!==this._type&&"ogcfeatures"!==this._type&&this.fsItem?(this.set("disabled",!0,this.i18n.publishWizard.fetchingServiceInfo),this._selectedService=b.mixin({},this.fsItem),this._fetchFSInfo(this._selectedService).then(b.hitch(this,
function(X){this._featureServiceJson=X.serviceInfo;this._selectedLayers=(this._selectedService.itemData=X.itemData)&&X.itemData.layers;this._spatialReference=this._featureServiceJson&&this._featureServiceJson.spatialReference||{wkid:4326};102067===this._spatialReference.wkid&&(this._spatialReference.wkid=5514);this._itemPropertiesDlg.set("summary",this._selectedService.snippet||"");this._itemPropertiesDlg.set("tags",this._selectedService.tags);this._itemPropertiesDlg.set("title",this._getSuggestedTitle(this.item,
this._selectedService.title));this._userFolders&&this._itemPropertiesDlg.set("folders",this._userFolders);f.set(this._globalWkidRadioLabel,"innerHTML",u.substitute(this.i18n.publishTileServiceDlg.globalWkid,{wkid:"4326"}));f.set(this._localWkidRadioLabel,"innerHTML",u.substitute(this.i18n.publishTileServiceDlg.localWkid,{wkid:""+this._spatialReference.wkid||4326}));this._selectedServiceLayers=X.layers&&X.layers.layers;this.set("calculatedScales",this._calculateConstraints(X.layers));"tiles"===this._type&&
this._checkTilesOnDemandSupport(X.layers);this.set("disabled",this._buildingVisibleRange);this.fsItem.isMultipatchFeatureService&&(c(".sceneProperties .sceneMultipatch",this.domNode).removeClass("hide"),X=this._featureServiceJson&&-1<this._featureServiceJson.capabilities.indexOf("ChangeTracking"),this._enableSceneUpdates.set("disabled",X));"vectorTiles"===this._type&&this._agoBasemapRadio.get("checked")&&this._customBasemapUrl.set("disabled",!0);ia.resolve(this._selectedService)}),b.hitch(this,function(X){this._showError(X);
ia.reject(X)}))):(this.fsItem&&(this._itemPropertiesDlg.set("summary",this.fsItem.snippet||""),this._itemPropertiesDlg.set("tags",this.fsItem.tags),this._itemPropertiesDlg.set("title",this._getSuggestedTitle(this.item,this.fsItem.title)),this._userFolders&&this._itemPropertiesDlg.set("folders",this._userFolders)),ia.resolve(this.fsItem));return ia},_loadImageData:function(){var ia=new p;this.fsItem?(this._itemPropertiesDlg.set("summary",this.fsItem.snippet||""),this._itemPropertiesDlg.set("tags",
this.fsItem.tags),this._itemPropertiesDlg.set("title",this._getSuggestedTitle(this.item,this.fsItem.title)),this._userFolders&&this._itemPropertiesDlg.set("folders",this._userFolders),ia.resolve(this.fsItem)):ia.reject(Error("Cannot locate image service item"));return ia},_getSuggestedTitle:function(ia,X){if("features"!==this._type)return X;ia=ia&&ia.resultData||[];var ha=this._type.toLowerCase(),V="Feature Service";X=this.sublayer&&this.sublayer.name&&X+"_"+this.sublayer.name||X;switch(ha){case "wfs":V=
"WFS";break;case "ogcfeatures":V="OGCFeatureService";break;case "scenes":V="Scene Service";break;case "features":V="Feature Service";break;default:V="Feature Service"}ia=l.filter(ia,function(ea){return ea.type&&ea.type===V&&-1<ea.title.indexOf(X)});return X+(ia.length?"_"+(ia.length+1):"_1")},_setMessageAttr:{node:"_message",type:"innerHTML"},_getMessageAttr:function(){if(this.message)return this.message;var ia=this._type.toLowerCase(),X=Z.publishTileServiceDlg;switch(ia){case "wfs":return X.wfsServiceDetailsDesc;
case "ogcfeatures":return X.ogcFeatureServiceDetailsDesc;case "scenes":return X.sceneServiceDetailsDesc;case "features":return X.viewServiceDetailsDesc;case "vectortiles":return X.vectorServiceDetailsDesc;default:return X.serviceDetailsDesc}},_setTypeAttr:function(ia){this._type=ia;"tiles"===ia?c(".tileProperties",this.domNode).removeClass("hide"):"vectorTiles"===ia?(c(".vectorTileProperties",this.domNode).removeClass("hide"),aa.showNode(this._tilePropertiesContainer),aa.hideNode(this._tilesOnDemandContainer),
this._customBasemapUrl.set("placeholder",this._customBasemapUrl.get("placeholder").replace("/MapServer","/VectorTileServer"))):"scenes"===ia?c(".sceneProperties",this.domNode).removeClass("hide"):"features"===ia&&(ia=(this.fsItem&&this.fsItem.layers||this._selectedServiceLayers||[]).some(function(X,ha){return X&&X.id!==ha}))&&(this._preserveIds.set("checked",ia),c(".viewProperties",this.domNode).removeClass("hide"))},_checkTilesOnDemandSupport:function(ia){var X=!1;R.tilesOnDemandEnabled&&ia&&ia.layers&&
(X=!l.some(ia.layers,function(ha){return!1===ca(ha,!1)}));k[X?"remove":"add"](this._tilesOnDemandContainer,"hide");this._tilesOnDemand.set("checked",X)},_enableChangeTrackingOnSource:function(){var ia=new p,X=this.fsItem,ha=X.isMultipatchFeatureService,V=this._featureServiceJson,ea=V&&V.capabilities||"";V=0<ea.indexOf("ChangeTracking");X=X.adminUrl+"/updateDefinition";ea={capabilities:V?ea:ea+",ChangeTracking"};ha&&!V&&this._enableSceneUpdates.checked?Y.request({url:X,content:{async:!0,updateDefinition:JSON.stringify(ea)}},
{usePost:!0}).then(function(U){U.statusURL?ra.checkAsyncJobStatus(U.statusURL).then(function(){ia.resolve(!0)},function(){ia.resolve(!0)}):ia.resolve(!0)}):ia.resolve(!0);return ia},_getBusyMessageAttr:function(){var ia=this._type.toLowerCase(),X=Z.publishTileServiceDlg;switch(ia){case "wfs":return X.publishingWfsService;case "ogcfeatures":return X.publishingOGCFeatureService;case "scenes":return X.publishingSceneService;case "features":return X.publishingViewService;case "tiledimagery":return Z.connectDataset.publishing;
case "dynamicimagery":return Z.connectDataset.publishing;default:return X.publishingTileService}},_setShowFoldersAttr:function(ia){this._showFolders=ia},_setItemAttr:function(ia){if(!this.fsItem||this.fsItem&&ia.url!==this.fsItem.url)this.fsItem=b.mixin({},ia),this._created&&this._loadData().then(b.hitch(this,function(X){this._isUserDefinedTileInfo=!1;this._customBasemapUrl.set("disabled",!0);this._agoBasemapRadio.set("checked",!0);this._itemPropertiesDlg.set("focus","title");R.self.hasCategorySchema&&
this._itemPropertiesDlg.set("categories",this.fsItem.categories)}))},_setFoldersAttr:function(ia){var X=this._portalUser&&this._portalUser.username;this._userFolders=ia.map(function(ha){ha&&ha.id===X&&(ha=b.mixin(ha,{id:"/"}));return ha})},_setFocusAttr:function(ia){ia=c(ia,this.domNode);y.focus(ia&&ia.length?ia[0]:this._title.domNode)},_setDisabledAttr:function(ia,X,ha){this.set("readOnly",ia,X,ha)},_setReadOnlyAttr:function(ia,X,ha){c(".dijit",this.domNode).map(w.byNode).forEach(function(V){V.set("disabled",
ia)});c("a",this.domNode)[ia?"addClass":"removeClass"]("disabledLink");c("label",this.domNode)[ia?"addClass":"removeClass"]("disabled");this._itemPropertiesDlg.set("disabled",ia);ha||(ia&&X&&E.publish("/dlg/busyMessage",X),E.publish("/esri/disable",ia,X))},_setCalculatedScalesAttr:function(ia){this._buildingVisibleRange=!0;var X={constraints:ia,minScale:ia.minScale,maxScale:ia.maxScale||18055.954822},ha=this.fsItem&&this.fsItem.url||this._selectedService&&this._selectedService.url,V=this.fsItem&&
this.fsItem.layers||this._selectedServiceLayers,ea=b.clone(this.userDefinedTileInfo&&this.userDefinedTileInfo.lods?this.userDefinedTileInfo.lods:this.tileCacheInfo.lods);"tiles"===this.type?(c(".visibleScaleRange",this.domNode).removeClass("hide"),this._visibleScaleRangeSlider&&(this._visibleScaleRangeSlider.destroyRecursive(),t.empty(this._visibleScaleRangeContainer)),this._visibleScaleRangeChangeHandler&&(this._visibleScaleRangeChangeHandler.remove(),this._visibleScaleRangeChangeHandler=void 0),
ha?(aa.showNodes([this._visibleRangeLoader,this._visibleRangeLoaderMsg]),aa.activateNode(this._visibleRangeLoader),m(l.map(V,b.hitch(this,function(U){return da.getSuggestedScaleRange(ha+"/"+U.id)}))).then(b.hitch(this,function(U){var ka,ma,sa;U.forEach(b.hitch(this,function(pa,Aa){pa&&(ka=I.isDefined(ka)?pa&&pa.minScale>ka?pa.minScale:ka:pa?pa.minScale:ia.minScale,sa=I.isDefined(sa)?pa&&pa.maxScale&&pa.maxScale<sa?pa.maxScale:sa:pa&&pa.maxScale?pa.maxScale:18055.954822,ma=I.isDefined(ma)?pa&&pa.minScale&&
pa.minScale<ma?pa.minScale:ma:(pa&&pa.minScale?pa.minScale:ia.minScale)||this.SCALE_MIN)}));this._maxSupportedMinScale=ia.minScale||this.SCALE_MIN;this._calculatedMinScale=(this._cacheOnDemandMinScale=ma||ka)||ia.minScale;X.minScale=this._calculatedMinScale;X.maxScale=sa||X.maxScale;X.minScale>ia.minScale&&0<ia.minScale&&(X.minScale=ia.minScale);X.maxScale>=X.minScale&&0<X.minScale&&(X.maxScale=this._normalizeMaxScale(X.minScale,X.maxScale,ea));this._visibleScaleRangeSlider=new ta(X,t.create("div",
null,this._visibleScaleRangeContainer));this._visibleScaleRangeSlider.startup();this._visibleScaleRangeChangeHandler=J(this._visibleScaleRangeSlider,"scale-range-change",b.hitch(this,"_visibleScaleRangeChange"));this.own(this._visibleScaleRangeChangeHandler);aa.deactivateNode(this._visibleRangeLoader);aa.hideNodes([this._visibleRangeLoader,this._visibleRangeLoaderMsg]);this._buildingVisibleRange=!1;this.set("disabled",this._buildingVisibleRange);this._agoBasemapRadio.get("checked")&&this._customBasemapUrl.set("disabled",
!0)}),b.hitch(this,function(){this._calculatedMinScale=ia.minScale;this._visibleScaleRangeSlider=new ta(X,t.create("div",null,this._visibleScaleRangeContainer));this._visibleScaleRangeSlider.startup();this._visibleScaleRangeChangeHandler=J(this._visibleScaleRangeSlider,"scale-range-change",b.hitch(this,"_visibleScaleRangeChange"));this.own(this._visibleScaleRangeChangeHandler);aa.deactivateNode(this._visibleRangeLoader);aa.hideNodes([this._visibleRangeLoader,this._visibleRangeLoaderMsg]);this._buildingVisibleRange=
!1;this.set("disabled",this._buildingVisibleRange);this._agoBasemapRadio.get("checked")&&this._customBasemapUrl.set("disabled",!0)}))):(this._calculatedMinScale=void 0,this._visibleScaleRangeSlider=new ta(X,t.create("div",null,this._visibleScaleRangeContainer)),this._visibleScaleRangeSlider.startup(),this._visibleScaleRangeChangeHandler=J(this._visibleScaleRangeSlider,"scale-range-change",b.hitch(this,"_visibleScaleRangeChange")),this.own(this._visibleScaleRangeChangeHandler),aa.deactivateNode(this._visibleRangeLoader),
aa.hideNodes([this._visibleRangeLoader,this._visibleRangeLoaderMsg]),this._buildingVisibleRange=!1,this.set("disabled",this._buildingVisibleRange),this._agoBasemapRadio.get("checked")&&this._customBasemapUrl.set("disabled",!0))):(this._buildingVisibleRange=!1,this._agoBasemapRadio.get("checked")&&this._customBasemapUrl.set("disabled",!0))},_visibleScaleRangeChange:function(){var ia=this._tilesOnDemand.get("checked");if(this._calculatedMinScale&&this._visibleScaleRangeSlider&&this._visibleScaleRangeSlider._started){var X=
this._visibleScaleRangeSlider.get("minScale");(0===X&&0!==this._calculatedMinScale||X>this._calculatedMinScale)&&ia?(aa.showNode(this._increaseScaleWarning),this._increaseScaleWarning.scrollIntoView(!1)):aa.hideNode(this._increaseScaleWarning)}else aa.hideNode(this._increaseScaleWarning)},_getItemAttr:function(){return"wfs"===this._type?this.get("wfsItem"):"ogcfeatures"===this._type?this.get("ogcFeatureItem"):"scenes"===this._type?this.get("sceneItem"):"features"===this._type?this.get("viewItem"):
"vectorTiles"===this._type?this.get("vectorTileItem"):this.get("tileItem")},_getOgcFeatureItemAttr:function(){var ia=this._itemPropertiesDlg.get("item"),X={name:ia.title.replace(/ /g,"_")};return{item:ia,publishContent:{itemid:this.fsItem.id,filetype:"featureService",publishParameters:X,outputType:"OGCFeatureService"},publishParams:X}},_getWfsItemAttr:function(){var ia=this._itemPropertiesDlg.get("item");var X=b.mixin({},{name:ia.title.replace(/ /g,"_"),wfsProperties:{title:ia.title,"abstract":ia.snippet,
keyword:ia.tags}});return{item:ia,publishContent:{itemid:this.fsItem.id,filetype:"featureService",publishParameters:X,outputType:"WFS"},publishParams:X}},_getSceneItemAttr:function(){var ia=this._itemPropertiesDlg.get("item"),X=this._globalWkidRadio.get("checked"),ha=this._featureServiceJson;var V=b.mixin({},{name:ia.title.replace(/ /g,"_")});X||(ha.spatialReference.wkt?V.targetSR={wkt:ha.spatialReference.wkt}:V=b.mixin(V,{targetSR:ha.spatialReference}));return{item:ia,publishContent:{itemid:this.fsItem.id,
filetype:"featureService",publishParameters:V,outputType:"sceneService",buildInitialCache:!1},publishParams:V}},_getTileItemAttr:function(){var ia=this._visibleScaleRangeSlider.get("actualMaxScale"),X=this._visibleScaleRangeSlider.get("minScale")||this._maxSupportedMinScale||this.SCALE_MIN,ha=this._isUserDefinedTileInfo?b.clone(this.userDefinedTileInfo):b.clone(this.tileCacheInfo),V=b.clone(this.cacheStorageInfo),ea={minScale:X,maxScale:ia},U=this._tilesOnDemand.get("checked");var ka=this._itemPropertiesDlg.get("item");
ha.dpi&&!ha.preciseDpi&&(ha.preciseDpi=ha.dpi);for(var ma=0;ma<ha.lods.length;ma++)delete ha.lods[ma].label;if(!ha.lods.some(function(pa){return pa.scale<=X&&pa.scale>=ia},this)){ma=ha.lods.filter(function(pa){return pa.scale>=X},this).reverse().shift();var sa=ha.lods.filter(function(pa){return pa.scale<=ia},this).shift();ma&&(X=ma.scale,ea.minScale=X);sa&&(ia=sa.scale,ea.maxScale=ia)}ha=b.mixin(ea,{name:ka.title.replace(/ /g,"_"),tilingSchema:{tileCacheInfo:ha,tileImageInfo:this.tileImageInfo,cacheStorageInfo:V}});
R.tilesOnDemandEnabled&&(ha.cacheOnDemand=U)&&(ha.cacheOnDemandMinScale=this._cacheOnDemandMinScale,ha.capabilities="Map,ChangeTracking");return{item:ka,publishContent:{itemid:this.fsItem.id,filetype:"featureService",publishParameters:ha,outputType:"tiles",buildInitialCache:!1},publishParams:ha}},_getVectorTileItemAttr:function(){var ia=this._featureServiceJson;ia=ia.layers&&ia.layers.length?ia.layers[0]:{};var X={minScale:ia.minScale||0,maxScale:ia.maxScale||0};ia=this._itemPropertiesDlg.get("item");
var ha=this._isUserDefinedTileInfo?b.clone(this.userDefinedTileInfo):void 0;X=b.mixin(X,{name:ia.title.replace(/ /g,"_")},this.vectorTilePublishParams);ha&&(X.tilingSchema.tileCacheInfo=ha);return{item:ia,publishContent:{itemid:this.fsItem.id,filetype:"featureService",publishParameters:X,outputType:"vectorTiles",buildInitialCache:!1},publishParams:X}},_getViewItemAttr:function(){var ia=this._itemPropertiesDlg.get("item"),X=this._featureServiceJson,ha=this._preserveIds.get("checked"),V=this._selectedLayers||
[],ea;X=b.mixin({},{name:ia.title.replace(/ /g,"_"),isView:!0,sourceSchemaChangesAllowed:!0,isUpdatableView:!0,spatialReference:X.spatialReference,initialExtent:X.initialExtent,capabilities:"Query",preserveLayerIds:ha});this._portal&&this._portal.isPortal&&(ea=this._getDataSourceType(this.fsItem))&&ea.dataSourceType&&(X=b.mixin(X,{options:ea}));ha||V.forEach(function(U,ka){U.id=ka});return{item:ia,createParams:X}},_validate:function(){var ia=new p;this._focusNode=null;var X=this._itemPropertiesDlg._validate();
X=X.then(b.hitch(this,"_checkRequired"));X=X.then(b.hitch(this,function(ha){ia.resolve(ha)}),b.hitch(this,function(ha){this._showError(ha);ia.reject(ha)}));return ia},_checkRequired:function(){var ia=new p;if("tiles"===this._type){if(!this._featureServiceJson)var X=this.i18n.publishWizard.errors.selectedServiceNotExist;this._isUserDefinedTileInfo&&!this.userDefinedTileInfo&&(this._focusNode=c("input",this._customBasemapUrl.domNode)[0],X=this.i18n.publishWizard.errors.customTileBasemapNotSpecified)}"vectorTiles"===
this._type&&(this._featureServiceJson||(X=this.i18n.publishWizard.errors.selectedServiceNotExist),this._isUserDefinedTileInfo&&!this.userDefinedTileInfo&&(this._focusNode=c("input",this._customBasemapUrl.domNode)[0],X=this.i18n.publishWizard.errors.customTileBasemapNotSpecified));if(X)return ia.reject(X),ia;C.serviceNameAvailable(this._itemPropertiesDlg.get("item"),this._portal).then(b.hitch(this,function(ha){ha&&ha.available?ia.resolve(!0):(this._focusNode=c("input",this._itemPropertiesDlg._title.domNode)[0],
ia.reject(Z.addItemFrm.errors.serviceNameExists))}));return ia},publishSceneService:function(){return this._enableChangeTrackingOnSource().then(this.publishService.bind(this))},publishImageService:function(ia){var X=new p,ha=this.fsItem.url,V=b.hitch(this,function(ea){this._showError(ea);throw Error(ea);});K.getCredential(ha).then(function(ea){this._createNewImageServiceItem().then(function(U){this._publishImageServiceGP(ha,U,ea.token).then(function(ka){X.resolve(ka)},V)}.bind(this),V)}.bind(this),
V);return X},publishService:function(){var ia=this.get("item"),X=ia.publishContent,ha=this._tilesOnDemand.get("checked"),V,ea="scenes"===this.type,U=new p,ka=new p;C.publishItem(b.mixin(ia,{owner:this.fsItem.owner}),X,this._portal).then(b.hitch(this,function(ma){var sa=ma&&ma.publishResult?ma.publishResult[0]:null;sa&&sa.error?(sa.serviceItemId&&C.deleteItem({id:sa.serviceItemId,folderId:this.fsItem.ownerFolder},this._portal),this._showError(sa.error||Z.addItemFrm.errors.error),U.reject()):(C.checkStatus({id:sa.serviceItemId,
jobId:sa.jobId},ka,500,this._portal),ka.then(b.hitch(this,function(pa){C.moveItem({id:pa.id,folderId:this.fsItem.ownerFolder,owner:this.fsItem.owner},ia.item.folderId,this._portal).then(b.hitch(this,function(Aa){(V=b.mixin(ia.item,Aa,!ea&&this._selectedService&&this._selectedService.itemData?{text:r.stringify(this._selectedService.itemData)}:{}))&&delete V.typeKeywords;C.updateItem(V,this._portal).then(b.hitch(this,function(){this.set("disable",!1);U.resolve({id:sa.serviceItemId,jobId:sa.jobId,cacheOnDemand:ha})}))}))}),
b.hitch(this,function(pa){C.deleteItem({id:sa.serviceItemId,folderId:this.fsItem.ownerFolder},this._portal);this._showError(pa)})))}),b.hitch(this,function(ma){this._showError(ma)}));return U},createViewService:function(){var ia=this.get("item"),X={createParameters:r.stringify(ia.createParams),outputType:"featureService",isView:!0},ha=this.fsItem&&this.fsItem.serviceInfo||{},V=this.serviceLayers||this.fsItem.layers,ea,U,ka=new p;ha=V.map(function(ma){ea=b.mixin({},ma);delete ea.fields;delete ea.indexes;
delete ea.relationships;return ea}).map(b.hitch(this,this._addAdminLayerInfo,ha));V=l.filter(ha||[],b.hitch(this,function(ma){return ma&&"Table"===ma.type}));ha=l.filter(ha||[],b.hitch(this,function(ma){return ma&&"Feature Layer"===ma.type}));C.createService(b.mixin(ia,{owner:this.fsItem.owner}),X,r.stringify({layers:ha,tables:V}),this._portal).then(b.hitch(this,function(ma){return C.moveItem({id:ma&&ma.createResult&&ma.createResult.itemId,owner:this.fsItem.owner},ia.item.folderId,this._portal)}),
b.hitch(this,function(ma){this._showError(ma);throw Error(ma);})).then(b.hitch(this,function(ma){this._selectedService&&this._selectedService.itemData&&this._selectedService.itemData.layers&&this.sublayer&&(this._selectedService.itemData.layers=this._selectedService.itemData.layers.filter(function(sa){return sa.id===this.sublayer.id}.bind(this)),this._selectedService.itemData.layers[0]&&(this._selectedService.itemData.layers[0].id=0));U=b.mixin(ia.item,ma,this._selectedService&&this._selectedService.itemData?
{text:r.stringify(this._selectedService.itemData)}:{});U=b.mixin(U,{folderId:null});delete U.typeKeywords;delete U.type;delete U.wabType;return C.updateItem(U,this._portal)})).then(b.hitch(this,function(ma){ka.resolve(b.mixin({},U,ma))}));return ka},_addAdminLayerInfo:function(ia,X){ia=/(\/(MapServer|FeatureServer)).*/ig;var ha=this.fsItem.url;ia=ha&&ha.replace(ia,"").replace(/^.*\//,"").replace(/\?.*$/,"");return b.mixin(X,{adminLayerInfo:{viewLayerDefinition:{sourceServiceName:ia||X.name,sourceLayerId:X.id,
sourceLayerFields:"*"}}})},_getDataSourceType:function(ia){ia=ia&&ia.adminServiceInfo&&ia.adminServiceInfo.adminServiceInfo||{};ia=ia.database&&ia.database.datasource||{};return{dataSourceType:ia.name&&(-1<ia.name.indexOf("/nosqlDatabases")?"spatiotemporal":-1<ia.name.indexOf("/enterpriseDatabases")?"relational":null)}},showModal:function(ia){var X=new p,ha,V=this._type,ea=this.dialog=new A({title:"features"===V?this.i18n.itemProperties.publishViewLayer:this.i18n.publishTileServiceDlg.publishTileDialogTitle,
style:{height:"auto"}});ea.setContent(this.domNode);ea.show();this.own(J(ea.okButton,"click",b.hitch(this,function(){E.publish("/esri/disable",!0,this.get("busyMessage"));this._validate().then(b.hitch(this,function(){ha="tiledImagery"===V||"dynamicImagery"===V?this.publishImageService():"features"!==V?"scenes"===V?this.publishSceneService():this.publishService():this.createViewService();ha.then(b.hitch(this,function(U){ea.hide().then(b.hitch(this,function(){X.resolve(U)}))}))}))})),J(ea,"hide",b.hitch(this,
function(){ea.destroyRecursive()})));return X},_createNewImageServiceItem:function(){var ia=new p,X=this._itemPropertiesDlg.get("item"),ha=X.title.replace(/ /g,"_");ha={title:X.title,outputType:"imageService",tags:X.tags,snippet:X.snippet,createParameters:r.stringify("tiledImagery"===this.type?{name:ha,capabilities:"Image, TilesOnly"}:{name:ha,capabilities:"Image, Metadata, Mensuration",properties:{description:"",isManaged:"true",isCached:"true",colormapToRGB:"false",esriImageServiceSourceType:"esriImageServiceSourceTypeDataset",
allowCopy:"true",allowAnalysis:"true",allowFunction:"true"}})};C.createService(b.mixin(X,{owner:this.fsItem.owner}),ha,null,this._portal).then(b.hitch(this,function(V){var ea=V&&V.createResult&&V.createResult.itemId;if(!ea)return ia.reject();V.owner=this.fsItem.owner;V.id=ea;V.url=V.createResult.serviceUrl;V.folderId=X.folderId;delete V.createResult;C.moveItem({id:ea,owner:V.owner},X.folderId,this._portal).then(function(){ia.resolve(V)})}),b.hitch(this,function(V){ia.reject(V)}));return ia},_publishImageServiceGP:function(ia,
X,ha){var V=new p,ea=!1,U="tiledImagery"===this.type,ka=b.hitch(this,function(pa){if(!ea){ea=!0;var Aa={id:X.id,owner:X.owner,folderId:X.folderId,title:X.title,tags:X.tags,snippet:X.snippet,properties:r.stringify({jobUrl:ma+"/CopyRaster/jobs/"+pa.jobId+"?f\x3djson",jobStatus:"processing",jobId:pa.jobId,jobType:"GPServer"})},za=b.hitch(this,function(){this.set("disable",!1);V.resolve({id:X.id,jobId:pa.jobId})});C.updateItem(Aa,this._portal).then(za,za)}}),ma=this._portal.helperServices.rasterAnalytics.url,
sa=ma+"/CopyRaster";ia+=ha?"?token\x3d"+ha:"";U={inputRaster:r.stringify(U?{url:ia}:{tiled_url:ia}),outputName:r.stringify({itemId:X.id})};sa=new la(sa);sa.setUpdateDelay(5E3);sa.submitJob(U,null,ka);sa.onError=b.hitch(this,function(pa){C.deleteItem({id:X.id,folderId:X.folderId},this._portal);V.reject(pa)});return V},_showError:function(ia){ia=b.mixin(b.mixin({},Z.publishWizard.errors.error),ia);var X=b.hitch(this,function(){this.set("disabled",!1);this._errorDlg.hide();this._focusNode&&setTimeout(b.hitch(this,
function(){y.focus(this._focusNode)}),250)});this._errorDlg=new A({showCancel:!1,style:{width:"400px",height:"auto"}});this._errorDlg.own(J(this._errorDlg.closeButtonNode,"click",X));this._errorDlg.show(ia).then(X);return!1}})})},"arcgisonline/sharing/dijit/dialog/_PublishTileServiceDlgMixin":function(){define(["dojo","dijit","dojox","dojo/require!dojo/promise/all,dojo/Deferred,esri/geometry/Extent,arcgisonline/sharing/util"],function(S,J,f){S.provide("arcgisonline.sharing.dijit.dialog._PublishTileServiceDlgMixin");
S.require("dojo.promise.all");S.require("dojo.Deferred");S.require("esri.geometry.Extent");S.require("arcgisonline.sharing.util");S.declare("arcgisonline.sharing.dijit.dialog._PublishTileServiceDlgMixin",null,{_util:arcgisonline.sharing.util,SCALE_MIN:5.91657527591555E8,SCALE_MAX:0,tileCacheInfo:{spatialReference:{wkid:102100,latestWkid:3857},origin:{x:-2.0037508342787E7,y:2.0037508342787E7},rows:256,cols:256,dpi:96,preciseDpi:96,lods:[{level:0,resolution:156543.033928,scale:5.91657527591555E8},{level:1,
resolution:78271.5169639999,scale:2.95828763795777E8},{level:2,resolution:39135.7584820001,scale:1.47914381897889E8},{level:3,resolution:19567.8792409999,scale:7.3957190948944E7},{level:4,resolution:9783.93962049996,scale:3.6978595474472E7},{level:5,resolution:4891.96981024998,scale:1.8489297737236E7},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,
scale:1155581.108577},{level:10,resolution:152.874056570411,scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:.597164283559817,
scale:2256.994353},{level:19,resolution:.298582141647617,scale:1128.497176},{level:20,resolution:.14929107082380833,scale:564.248588},{level:21,resolution:.07464553541190416,scale:282.124294},{level:22,resolution:.03732276770595208,scale:141.062147}]},tileImageInfo:{format:"PNG32",compressionQuality:0,antialiasing:!0},cacheStorageInfo:{storageFormat:"esriMapCacheStorageModeCompactV2",packetSize:128},vectorTilePublishParams:{tilingSchema:{tileCacheInfo:{spatialReference:{wkid:102100,latestWkid:3857},
origin:{x:-2.0037508342787E7,y:2.0037508342787E7},rows:512,cols:512,dpi:96,preciseDpi:96,lods:[{level:0,resolution:78271.51696399994,scale:2.95828763795777E8},{level:1,resolution:39135.75848200009,scale:1.47914381897889E8},{level:2,resolution:19567.87924099992,scale:7.3957190948944E7},{level:3,resolution:9783.93962049996,scale:3.6978595474472E7},{level:4,resolution:4891.96981024998,scale:1.8489297737236E7},{level:5,resolution:2445.98490512499,scale:9244648.868618},{level:6,resolution:1222.992452562495,
scale:4622324.434309},{level:7,resolution:611.4962262813797,scale:2311162.217155},{level:8,resolution:305.74811314055756,scale:1155581.108577},{level:9,resolution:152.87405657041106,scale:577790.554289},{level:10,resolution:76.43702828507324,scale:288895.277144},{level:11,resolution:38.21851414253662,scale:144447.638572},{level:12,resolution:19.10925707126831,scale:72223.819286},{level:13,resolution:9.554628535634155,scale:36111.909643},{level:14,resolution:4.77731426794937,scale:18055.954822},{level:15,
resolution:2.388657133974685,scale:9027.977411},{level:16,resolution:1.1943285668550503,scale:4513.988705},{level:17,resolution:.5971642835598172,scale:2256.994353},{level:18,resolution:.29858214164761665,scale:1128.497176},{level:19,resolution:.14929107082380833,scale:564.248588},{level:20,resolution:.07464553541190416,scale:282.124294},{level:21,resolution:.03732276770595208,scale:141.062147},{level:22,resolution:.01866138385297604,scale:70.5310735},{level:23,resolution:.009330691929342804,scale:35.265536760789715}]},
tileImageInfo:{format:"indexedVector",compressionQuality:0,antialiasing:!1},cacheStorageInfo:{storageFormat:"esriMapCacheStorageModeCompactV2",packetSize:128}}},lods:[{level:0,label:"1:591,657,528",scale:5.91657527591555E8},{level:1,label:"1:295,828,764",scale:2.95828763795777E8},{level:2,label:"1:147,914,382",scale:1.47914381897889E8},{level:3,label:"1:73,957,191",scale:7.3957190948944E7},{level:4,label:"1:36,978,595",scale:3.6978595474472E7},{level:5,label:"1:18,489,298",scale:1.8489297737236E7},
{level:6,label:"1:9,244,649",scale:9244648.868618},{level:7,label:"1:4,622,324",scale:4622324.434309},{level:8,label:"1:2,311,162",scale:2311162.217155},{level:9,label:"1:1,155,581",scale:1155581.108577},{level:10,label:"1:577,791",scale:577790.554289},{level:11,label:"1:288,895",scale:288895.277144},{level:12,label:"1:144,448",scale:144447.638572},{level:13,label:"1:72,224",scale:72223.819286},{level:14,label:"1:36,112",scale:36111.909643},{level:15,label:"1:18,056",scale:18055.954822},{level:16,
label:"1:9,028",scale:9027.977411},{level:17,label:"1:4,514",scale:4513.988705},{level:18,label:"1:2,257",scale:2256.994353},{level:19,label:"1:1,128",scale:1128.497176},{level:20,label:"1:564",scale:564.248588},{level:21,label:"1:282",scale:282.124294},{level:22,label:"1:141",scale:141.062147}],statusCheckIntervalTime:2500,_fetchFSInfo:function(c){var h=new S.Deferred,d=c&&c.url,b=c?esriGeowConfig.restBaseUrl+"content/items/"+c.id+"/data":null;d&&b?S.promise.all({serviceInfo:this._fetchServiceInfo(d),
layers:this._fetchServiceLayers(d),itemData:this._fetchItemData(b,c)}).then(S.hitch(this,function(a){h.resolve(S.mixin({},a))})):h.reject(this.i18n.publishWizard.errors.noItemUrl||{message:"Item does not specify a url."});return h},_fetchServiceInfo:function(c){return this._util.request({url:c})},_fetchServiceLayers:function(c){return this._util.request({url:c+"/layers"}).then(S.hitch(this,function(h){return{layers:h.layers}}))},_fetchItemData:function(c,h){return this._util.request({url:c}).then(S.hitch(this,
function(d){var b=[],a="features"===this._type,e;S.forEach(d&&d.layers||[],S.hitch(this,function(q,t){q&&(e=S.mixin({},a?{id:q.id}:{id:t,layerUrl:h.url+"/"+q.id,layerItemId:h.id,layerDefinition:q.layerDefinition}),q.popupInfo&&(e=S.mixin(e,{popupInfo:q.popupInfo})),!a&&esri.isDefined(q.showLegend)&&(e=S.mixin(e,{showLegend:q.showLegend})));b.push(e)}));return b&&b.length?S.mixin(d,{layers:b}):null}))},_computeScale:function(c,h){c={width:esri.config.defaults.map.width,extent:new esri.geometry.Extent(c),
spatialReference:c.spatialReference||h};return esri.geometry.getScale(c)},_fetchTileLayerInfo:function(c,h){var d=new S.Deferred,b=h&&"vectorTiles"===h;h=function(a){return-1<window.location.href.indexOf("https:")&&a&&-1<a.indexOf("http:")};-1<(b?c.indexOf("/VectorTileServer"):c.indexOf("/MapServer"))?this._util.request({url:c,timeout:1E4},{useProxy:h(c),addToken:!1}).then(S.hitch(this,function(a){a&&a.singleFusedMapCache&&a.tileInfo?d.resolve(this._addScaleLabels(a.tileInfo)):a&&b&&a.tileInfo?d.resolve(a.tileInfo):
d.reject({title:this.i18n.common.notice,message:this.i18n.publishTileServiceDlg.noTilingSchemeFound})}),S.hitch(this,function(a){d.reject({title:this.i18n.common.notice,message:this.i18n.publishTileServiceDlg.mapServiceError})})):d.reject({title:this.i18n.common.notice,message:this.i18n.publishTileServiceDlg.badMapServiceUrl});return d},_addScaleLabels:function(c){if(c&&c.lods)return S.forEach(c&&c.lods||[],S.hitch(this,function(h){h.label="1:"+S.number.format(Math.round(h.scale),{pattern:"#,###,###,##0"})})),
c},_calculateConstraints:function(c){var h={minScale:null,maxScale:null},d=function(b){if(!esri.isDefined(h.minScale))h.minScale=b.minScale;else if(b.minScale>h.minScale||0===b.minScale)h.minScale=b.minScale;esri.isDefined(h.maxScale)?b.maxScale<h.maxScale&&(h.maxScale=b.maxScale):h.maxScale=b.maxScale};c?c.layers&&S.forEach(c.layers,d):(h.minScale=this.SCALE_MIN,h.maxScale=this.SCALE_MAX);return h},_normalizeMaxScale:function(c,h,d){if(c<=h&&d){for(h=d.length-1;0<=h;h--)if(c<d[h].scale){var b=h+
2;break}b=b>d.length-1?d.length-1:b;return d[b].scale}return h}})})},"esri/dijit/VisibleScaleRangeSlider":function(){define("../kernel ./_EventedWidget ./_Tooltip ./VisibleScaleRangeSlider/_RecommendedScaleRangeBounds ./VisibleScaleRangeSlider/_SlideEvent ./VisibleScaleRangeSlider/ScaleMenu ./VisibleScaleRangeSlider/ScalePreview ./VisibleScaleRangeSlider/ScaleRanges dijit/form/DropDownButton dijit/popup dojo/_base/array dojo/_base/lang dojo/aspect dojo/debounce dojo/Deferred dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/on dojo/string dojox/form/HorizontalRangeSlider dojo/i18n!../nls/jsapi".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G){J=J.createSubclass([f],{declaredClass:"esri.dijit.VisibleScaleRangeSlider",baseClass:"esriVisibleScaleRangeSlider",css:{currentScaleIndicator:"esriCurrentScaleIndicator",currentScaleIndicatorContainer:"esriCurrentScaleIndicatorContainer",scaleIndicator:"esriScaleIndicator",scaleIndicatorContainer:"esriScaleIndicatorContainer"},disabled:!1,map:null,layer:null,region:"en-US",minScale:0,maxScale:0,intermediateChanges:!1,labels:G.widgets.visibleScaleRangeSlider,
_slider:null,_currentScaleIndicator:null,_scalePreview:null,_maxScaleButton:null,_minScaleButton:null,_mapUpdateHandler:null,_scaleRanges:null,_scheduleScaleRangeChangeEmit:null,_getSliderIndexRange:function(F){F=Math.floor(F);return{min:F,max:F+.99999}},_setDisabledAttr:function(F){this._slider.set("disabled",F);this._maxScaleButton.set("disabled",F);this._minScaleButton.set("disabled",F);this._set("disabled",F)},_setMapAttr:function(F){this._set("map",F);this._mapUpdateHandler&&this._mapUpdateHandler.remove();
this._slider.set("disabled",!0);this._ensureMap().then(this._updateFromMap)},_setConstraintsAttr:function(F){this._set("constraints",F);this._setUpSlider({minScale:F.minScale,maxScale:F.maxScale})},_updateFromMap:function(F){var A=F.getMinScale(),y=F.getMaxScale();this._setUpSlider({minScale:A,maxScale:y});this._updateCurrentScaleIndicator();F=F.on("zoom-end",u.hitch(this,this._updateCurrentScaleIndicator));this.own(F);this._mapUpdateHandler=F},_setUpSlider:function(F){var A=F.maxScale;F=F.minScale;
this._slider.set("disabled",this.get("disabled"));this._scaleRanges.set("scaleRangeBounds",{minScale:F,maxScale:A});var y=this._getSliderIndexRange(this._scaleRanges.length-1);this._slider.set("maximum",y.max);this._silentSliderUpdate({maxScale:A,minScale:F})},_ensureMap:function(){return this._untilLoaded(this.map)},_untilLoaded:function(F){var A=new v;if(F)if(F.loaded)A.resolve(F);else F.on("load",function(){A.resolve(F)});else A.reject(Error("could not load resource"));return A.promise},_updateCurrentScaleIndicator:function(){var F=
this._scaleRanges.clampScale(this.map.getScale());F=this._mapScaleToSlider(F)/this._slider.maximum;this.isLeftToRight()||(F=1-F);k.set(this._currentScaleIndicator,{left:100*F+"%"})},_setLayerAttr:function(F){this._set("layer",F);this._ensureScaleRangeProvider().then(this._ensureLayer).then(this._updateMinMaxScaleFromLayer)},_ensureLayer:function(){return this._untilLoaded(this.layer)},_updateMinMaxScaleFromLayer:function(F){this.set({minScale:F.minScale,maxScale:F.maxScale})},_mapSliderToScale:function(F){var A=
this._getSliderIndexRange(F),y=this._scaleRanges.findScaleRangeByIndex(F);return this._mapToRange(F,A.min,A.max,y.minScale,y.maxScale)},_mapToRange:function(F,A,y,z,B){return z+(F-A)*(B-z)/(y-A)},_setRegionAttr:function(F){this._set("region",F);this._scalePreview.set("source",a.getScalePreviewSource(F))},_getMinimumAttr:function(){return this._mapSliderToScale(this._slider.minimum)},_getMaximumAttr:function(){return this._mapSliderToScale(this._slider.maximum)},_getActualMaxScaleAttr:function(){return this._scaleRanges.clampMaxScale(this.maxScale)},
_setMaxScaleAttr:function(F){this._set("maxScale",F);this._ensureScaleRangeProvider().then(u.hitch(this,function(){F=this._scaleRanges.clampMaxScale(F);this._set("maxScale",this._layerConstrainedMaxScale(F));this._silentSliderUpdate({maxScale:F});this._scheduleScaleRangeChangeEmit()}))},_silentSliderUpdate:function(F){var A=F.minScale,y=F.maxScale,z=this._scaleRanges;F=this._slider;void 0!==A&&(A=this._mapScaleToSlider(z.clampMinScale(A)),F.set("value",A,!1,!1));void 0!==y&&(A=this._mapScaleToSlider(z.clampMaxScale(y)),
F.set("value",A,!1,!0))},_mapScaleToSlider:function(F){var A=this._scaleRanges.scaleToRangeIndex(F),y=this._getSliderIndexRange(A);A=this._scaleRanges.findScaleRangeByIndex(A);return this._mapToRange(F,A.minScale,A.maxScale,y.min,y.max)},_getActualMinScaleAttr:function(){return this._scaleRanges.clampMinScale(this.minScale)},_setMinScaleAttr:function(F){this._set("minScale",F);this._ensureScaleRangeProvider().then(u.hitch(this,function(){F=this._scaleRanges.clampMinScale(F);this._set("minScale",this._layerConstrainedMinScale(F));
this._silentSliderUpdate({minScale:F});this._scheduleScaleRangeChangeEmit()}))},_ensureScaleRangeProvider:function(){if(this.map)return this._ensureMap();var F=new v;this.constraints&&F.resolve();return F.promise},_emitScaleRangeChange:function(){this.emit("scale-range-change",{minScale:this.minScale,maxScale:this.maxScale})},_layerConstrainedMinScale:function(F){var A=u.getObject("tileInfo.lods",!1,this.layer)||[];var y=this.layer&&("esri.layers.RasterXLayer"===this.layer.declaredClass||"esri.layers.ArcGISImageServiceLayer"===
this.layer.declaredClass);return 0<A.length&&!y?(A=A[0].scale,y=this._scaleRanges.get("firstRange"),(y=.85<this._mapToRange(F,y.maxScale,y.minScale,0,1))?A:F>A?A:F):this._scaleRanges.beyondMinScale(F)?0:F},_layerConstrainedMaxScale:function(F){var A=u.getObject("tileInfo.lods",!1,this.layer)||[],y=this.layer&&("esri.layers.RasterXLayer"===this.layer.declaredClass||"esri.layers.ArcGISImageServiceLayer"===this.layer.declaredClass);return 0<A.length&&!y?(A=A[A.length-1].scale,F<A?A:F):this._scaleRanges.beyondMaxScale(F)?
0:F},constructor:function(){this._scaleRanges=new (a.createSubclass([c]));this._scheduleScaleRangeChangeEmit=m(u.hitch(this,this._emitScaleRangeChange),0);this._ensureMap=u.hitch(this,this._ensureMap);this._ensureScaleRangeProvider=u.hitch(this,this._ensureScaleRangeProvider);this._ensureLayer=u.hitch(this,this._ensureLayer);this._updateMinMaxScaleFromLayer=u.hitch(this,this._updateMinMaxScaleFromLayer);this._updateFromMap=u.hitch(this,this._updateFromMap)},buildRendering:function(){this.inherited(arguments);
this._initSlider();this._initScalePreview();this._initCurrentScaleIndicator();this._initScaleMenus()},_initSlider:function(){var F=new (D.createSubclass([h]))({baseClass:"esriHorizontalSlider",showButtons:!1,intermediateChanges:this.intermediateChanges,disabled:!0});this._slider=F;F.placeAt(this.domNode);F.startup();this.own(F.on("slide-onmousemove, slidemax-onmousemove",u.hitch(this,function(A){this._updateScalePreview(A.movable.handle)})),F.on("slide-onmovestop, slidemax-onmovestop",u.hitch(this,
function(A){p.contains(A.movable.handle,"dijitSliderThumbHover")||this._closeScalePreview()})),F.on("change",u.hitch(this,function(){var A=Math.round(this._mapSliderToScale(this._getSliderMin())),y=Math.round(this._mapSliderToScale(this._getSliderMax()));this.set({minScale:A,maxScale:y})})),g.after(F,"_setValueAttr",u.hitch(this,this._updateLabelMenus)))},_getSliderMin:function(){return this._slider.get("value")[0]},_getSliderMax:function(){return this._slider.get("value")[1]},_updateLabelMenus:function(){var F=
this._maxScaleButton;this._minScaleButton.set("label",this._scaleRanges.getScaleRangeLabel(this._getSliderMin()));F.set("label",this._scaleRanges.getScaleRangeLabel(this._getSliderMax()))},_initScalePreview:function(){var F=new b;F.startup();q.moveOffScreen(F);t.forEach([this._slider._movable.handle,this._slider._movableMax.handle],function(A){A.onmouseenter=u.hitch(this,this._updateScalePreview,A);A.onmouseleave=u.hitch(this,this._closeScalePreview)},this);this.own(F);this._scalePreview=F},_closeScalePreview:function(){q.close(this._scalePreview)},
_updateScalePreview:function(F){if(!this.disabled){var A=this._scalePreview;q.moveOffScreen(A);var y=this._slider,z=F===y.sliderHandle?this._getSliderMin():this._getSliderMax(),B=n.position(F),C=n.position(A.domNode);y=n.position(y.sliderBarContainer);var H=this.isLeftToRight();z=this._scaleRanges.getScalePreviewSpriteBackgroundPosition(z);A.set("backgroundPosition",z);B=B.x-y.x;C=.5*C.w;q.open({parent:this,popup:A,around:F,orient:B<C?H?["above","below"]:["above-alt","below-alt"]:B<y.w-C?["above-centered",
"below-centered"]:H?["above-alt","below-alt"]:["above","below"]})}},_initCurrentScaleIndicator:function(){if(this.map){var F=l.create("div",{className:this.css.scaleIndicatorContainer+" "+this.css.currentScaleIndicatorContainer},this._slider.sliderBarContainer),A=l.create("div",{className:this.css.scaleIndicator+" "+this.css.currentScaleIndicator},F);this._currentScaleIndicator=A;this.createTooltip(A);F=w(A,"mouseover",u.hitch(this,function(){var y=x.substitute(this.labels.currentScaleTooltip,{scaleLabel:this._scaleRanges.getScaleRangeLabel(this._mapScaleToSlider(this.map.getScale()))});
this.findTooltip(A).set("label",y)}));this.own(F)}},_initScaleMenus:function(){var F=new d,A=new d;this.own(F.on("scale-selected",u.hitch(this,function(B){y.closeDropDown();this.set("minScale",B.scale)})));this.own(A.on("scale-selected",u.hitch(this,function(B){z.closeDropDown();this.set("maxScale",B.scale)})));var y=new e({baseClass:"esriScaleMenuButton esriMinScaleMenuButton",dropDown:F,dropDownPosition:["below","above"]});y.toggleDropDown();y.toggleDropDown();var z=new e({baseClass:"esriScaleMenuButton esriMaxScaleMenuButton",
dropDown:A,dropDownPosition:["below","above"]});z.toggleDropDown();z.toggleDropDown();this.own(g.before(y,"openDropDown",u.hitch(this,function(){var B=this._scaleRanges.findScaleRange(this.get("actualMaxScale")).minScale;F.set("options",{label:y.label,scale:{current:this.get("actualMinScale"),map:this._getMapScale(),min:this.get("minimum"),max:B}})})));this.own(g.before(z,"openDropDown",u.hitch(this,function(){var B=this._scaleRanges.findScaleRange(this.get("actualMinScale")).maxScale;A.set("options",
{label:z.label,scale:{current:this.get("actualMaxScale"),map:this._getMapScale(),min:B,max:this.get("maximum")}})})));y.placeAt(this.domNode);z.placeAt(this.domNode);F.startup();A.startup();y.startup();z.startup();this._minScaleButton=y;this._maxScaleButton=z},_getMapScale:function(){return this.map?this.map.getScale():-1},startup:function(){this.inherited(arguments);this.watch("intermediateChanges",function(F,A,y){this._slider.set(F,y)})}});u.setObject("dijit.VisibleScaleRangeSlider",J,S);return J})},
"esri/dijit/_Tooltip":function(){define(["dijit/Tooltip","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/dom"],function(S,J,f,c,h){return f(null,{declaredClass:"esri.dijit._Tooltip",_tooltips:null,constructor:function(){this._tooltips=[]},startup:function(){this.inherited(arguments);this._started||J.forEach(this._tooltips,function(d){d.startup()})},destroy:function(){this.inherited(arguments);J.forEach(this._tooltips,function(d){d.destroy()});this._tooltips=null},createTooltips:function(d){J.forEach(d,
function(b){this.createTooltip(b.node,b.label)},this)},createTooltip:function(d,b){if(d=this._getConnectId(d))b="object"===typeof b?c.mixin({},b,{connectId:d}):{connectId:d,label:b},b=new S(b),this._started&&b.startup(),this._tooltips.push(b)},_getConnectId:function(d){var b;if(d){if(c.isArray(d)){var a=[];J.forEach(d,function(e){(b=this._getNode(e))&&a.push(b)});if(0===a.length)return}else if(a=this._getNode(d),!a)return;return a}},_getNode:function(d){return h.byId(d.domNode||d)},findTooltip:function(d){var b=
this._getNode(d),a;if(d){d=this._tooltips;var e=d.length;for(var q=0;q<e;q++){var t=d[q];if(a=c.isArray(t.connectId)?-1<J.indexOf(t.connectId,b):t.connectId===b)return t}}}})})},"esri/dijit/VisibleScaleRangeSlider/_RecommendedScaleRangeBounds":function(){define(["./recommendedScales","dojo/_base/declare"],function(S,J){return J(null,{declaredClass:"esri.dijit.VisibleScaleRangeSlider._RecommendedScaleRangeBounds",beyondMinScale:function(f){var c=this.get("firstRange"),h=c.minScale;c=S.getRecommendedScale(c.id)||
c.maxScale;return f<=h&&f>c},beyondMaxScale:function(f){var c=this.get("lastRange"),h=c.maxScale;c=S.getRecommendedScale(c.id)||c.minScale;return f<c&&f>=h}})})},"esri/dijit/VisibleScaleRangeSlider/recommendedScales":function(){define(["dojo/_base/lang"],function(S){var J={_recommendedScales:{world:1E8,continent:5E7,countriesBig:25E6,countriesSmall:12E6,statesProvinces:6E6,stateProvince:3E6,counties:15E5,county:75E4,metropolitanArea:32E4,cities:16E4,city:8E4,town:4E4,neighborhood:2E4,streets:1E4,
street:5E3,buildings:2500,building:1250,smallBuilding:800,rooms:400,room:100},getRecommendedScale:function(f){return J._recommendedScales[f]},all:function(){return S.clone(J._recommendedScales)}};return J})},"esri/dijit/VisibleScaleRangeSlider/_SlideEvent":function(){define(["dojo/_base/array","dojo/_base/declare"],function(S,J){return J(null,{declaredClass:"esri.dijit.VisibleScaleRangeSlider._SlideEvent",_events:["onMouseMove","onFirstMove",{name:"onMoveStop",hookTo:"destroy"}],postCreate:function(){this.inherited(arguments);
this._extendMover(this._movable);this._extendMover(this._movableBar,"rangebar");this._extendMover(this._movableMax,"max")},_extendMover:function(f,c){if(f){var h=f.mover,d={};S.forEach(this._events,function(b){if("object"===typeof b){var a=b.name;var e=b.hookTo}else a=b;var q=h.prototype[a]||function(){};var t="slide"+(c||"")+"-"+a.toLowerCase();var u=function(){q.apply(this,arguments);this.widget.emit(t,{movable:f})};if(e){var g=h.prototype[e];d[e]=function(){g.apply(this,arguments);u.apply(this,
arguments)}}d[a]=u});h.extend(d)}}})})},"esri/dijit/VisibleScaleRangeSlider/ScaleMenu":function(){define("../../kernel ../_EventedWidget ../_Tooltip ./recommendedScales ./ScaleRanges dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-prop dojo/dom-style dojo/has dojo/keys dojo/number dojo/on dojo/query dojo/string dojox/html/entities dojox/lang/functional/object dojo/i18n!../../nls/jsapi dojo/text!./templates/ScaleMenu.html dijit/form/TextBox".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G){J=a([J,d,b,f],{declaredClass:"esri.dijit.VisibleScaleRangeSlider.ScaleMenu",templateString:G,baseClass:"esriScaleMenu",labels:D.widgets.visibleScaleRangeSlider,css:{header:"esriHeader",section:"esriSection",content:"esriContent",current:"esriCurrent",input:"esriInput",list:"esriList",item:"esriItem",inline:"esriInline",selectable:"esriSelectable",hidden:"esriHidden"},_elementValueMap:null,_elements:null,_scaleRangeCategories:null,_scaleRanges:null,
_rangeToScaleAndNodeLookup:null,constructor:function(){this._scaleRanges=new h},buildRendering:function(){this.inherited(arguments);this._rangeToScaleAndNodeLookup={map:{scale:null,node:this.dap_mapScaleItem}};var F=this.labels,A=F.featuredScaleLabels,y=c.all(),z=this.css.item+" "+this.css.selectable,B;e.forEach(x.keys(y),function(E){B=A[E];var K=y[E],I=r.substitute(B,{scaleLabel:this._formatScale(K)});I=u.create("li",{innerHTML:I,className:z},this.dap_recommendedScales);this._rangeToScaleAndNodeLookup[E]=
{scale:K,node:I}},this);var C=u.create("span",{innerHTML:F.setTo,className:this.css.inline}),H=u.create("span",{innerHTML:F.selectOne,className:this.css.inline});g.set(this.dap_scaleListHeader,"innerHTML",r.substitute(F.setToSelectOne,{setTo:C.outerHTML,selectOne:H.outerHTML}))},_formatScale:function(F){return"1:"+l.format(F)},postCreate:function(){this.inherited(arguments);this.own(n(this.domNode,n.selector("."+this.css.item+"."+this.css.selectable,"click"),q.hitch(this,function(F){F=F.target===
this.dap_mapScaleItem?this.options.scale.map:this._parseScale(F.target.innerHTML);this._emitScaleSelected(F)})));this.dap_scaleInput.on("keyDown",q.hitch(this,function(F){F.keyCode===p.ENTER&&this._handleCustomScaleInput()}));this.createTooltip(this.dap_scaleInput,this.labels.customScaleInputTooltip)},_emitScaleSelected:function(F){this.emit("scale-selected",{scale:F})},_handleCustomScaleInput:function(){var F=this._parseScale(this.dap_scaleInput.get("value"));isNaN(F)||this._emitScaleSelected(this._scaleRanges.clampScale(F))},
_parseScale:function(F){F=w.decode(F).replace(/.*\(/,"").replace(/\).*$/,"").replace(/.*1:/,"").replace(/[^0-9.\s]/g,"");return l.parse(F)},_setOptionsAttr:function(F){var A=F.scale,y=this._formatScale(A.current);g.set(this.dap_currentScaleLabel,"innerHTML",F.label);this.dap_scaleInput.set("value",y,!1);y=r.substitute(this.labels.featuredScaleLabels.current,{scaleLabel:this._formatScale(A.map)});this._rangeToScaleAndNodeLookup.map.scale=A.map;g.set(this.dap_mapScaleItem,"innerHTML",y);t.toggle(this.dap_mapScaleItem,
this.css.hidden,-1===A.map);this._scaleRanges.set("scaleRangeBounds",{minScale:A.min,maxScale:A.max});this._hideOutOfScaleRanges();this._set("options",F)},_hideOutOfScaleRanges:function(){var F=k("."+this.css.item+"."+this.css.selectable,this.dap_recommendedScales),A=this._scaleRanges;e.forEach(x.keys(this._rangeToScaleAndNodeLookup),function(y){y=this._rangeToScaleAndNodeLookup[y];t.toggle(y.node,this.css.hidden,!A.contains(y.scale))},this);F=F.every(function(y){return"none"===m.get(y,"display")});
t.toggle(this.dap_recommendedScaleSection,this.css.hidden,F)}});q.setObject("dijit.ScaleMenu",J,S);return J})},"esri/dijit/VisibleScaleRangeSlider/ScaleRanges":function(){define(["./scalePreviewUtil","dojo/_base/array","dojo/_base/declare","dojo/Stateful","dojo/i18n!../../nls/jsapi"],function(S,J,f,c,h){f=f(c,{_scaleRangeStops:[{id:"room",minScale:100},{id:"rooms",minScale:400},{id:"smallBuilding",minScale:800},{id:"building",minScale:1999},{id:"buildings",minScale:3999},{id:"street",minScale:7499},
{id:"streets",minScale:14999},{id:"neighborhood",minScale:29999},{id:"town",minScale:59999},{id:"city",minScale:119999},{id:"cities",minScale:249999},{id:"metropolitanArea",minScale:499999},{id:"county",minScale:999999},{id:"counties",minScale:1999999},{id:"state",minScale:3999999},{id:"states",minScale:6999999},{id:"country",minScale:14999999},{id:"countries",minScale:34999999},{id:"continent",minScale:99999999},{id:"world",minScale:147914382}],_allRanges:null,_ranges:null,length:0,constructor:function(){this._allRanges=
this.getScaleRanges()},_scaleRangeBoundsSetter:function(d){this._ranges=d=this.getScaleRanges(d.maxScale,d.minScale);this.length=d.length},getScaleRanges:function(d,b){var a=this._scaleRangeStops,e=a.length;d=0<=d?d:0;b=0<b?b:a[e-1].minScale;var q=d;var t=[];for(var u=0;u<e;u++){var g=Math.min(a[u].minScale,b);var m=Math.min(g,b);d<=g&&q<b&&t.push({id:a[u].id,maxScale:Math.max(q,d),minScale:m});q=m+1}t.reverse();return this._ensureValidBoundaryRanges(t)},_ensureValidBoundaryRanges:function(d){var b=
d[0];b.minScale===b.maxScale&&(d.shift(),d[0].minScale+=1);b=d[d.length-1];b.minScale===b.maxScale&&(d.pop(),--d[d.length-1].maxScale);return d},getScalePreviewSpriteBackgroundPosition:function(d){d=this._toFullRangeIndex(d);return S.getScalePreviewSpriteBackgroundPosition(d)},_toFullRangeIndex:function(d){d=this.findScaleRangeByIndex(Math.floor(d));for(var b=this._allRanges,a=b.length,e=0,q=0;q<a;q++)if(b[q].id===d.id){e=q;break}return e},getScaleRangeLabel:function(d){d=this._ranges[this._clampScaleRangeIndex(d)];
return h.widgets.visibleScaleRangeSlider.scaleRangeLabels[d.id]},findScaleRange:function(d){var b=this._ranges;if(d>=b[0].maxScale)return b[0];if(d<=b[b.length-1].minScale)return b[b.length-1];for(var a=0;a<b.length;a++){var e=b[a];if(d>=e.maxScale&&d<=e.minScale){var q=e;break}}return q},findScaleRangeByIndex:function(d){d=this._clampScaleRangeIndex(d);return this._ranges[d]},clampScale:function(d){return Math.min(this.get("minScale"),Math.max(this.get("maxScale"),d))},_minScaleGetter:function(){return this.get("firstRange").minScale},
_maxScaleGetter:function(){return this.get("lastRange").maxScale},_firstRangeGetter:function(){return this._ranges[0]},_lastRangeGetter:function(){var d=this._ranges;return d[d.length-1]},clampMinScale:function(d){return 0===d?this.get("minScale"):this.clampScale(d)},clampMaxScale:function(d){return this.clampScale(d)},_clampScaleRangeIndex:function(d){if(0>=d)return 0;var b=this._ranges.length-1;return d>b?b:Math.floor(d)},scaleToRangeIndex:function(d){return J.indexOf(this._ranges,this.findScaleRange(d))},
contains:function(d){for(var b=this._ranges,a=!1,e,q=0;q<b.length;q++)if(e=b[q],d>=e.maxScale&&d<=e.minScale){a=!0;break}return a}});f.getScalePreviewSource=function(d){return S.getScalePreviewSource(d)};return f})},"esri/dijit/VisibleScaleRangeSlider/scalePreviewUtil":function(){define(["dojo/_base/array","require"],function(S,J){var f={_supportedRegions:"ar-iq ar-kw bg-bg cs-cz da-dk da-gl da-gl de-at de-ch de-de de-li el-gr en-ae en-au en-ca en-ca en-eg en-gb en-hk en-id en-ie en-ie en-il en-in en-iq en-ke en-lu en-mo en-my en-nz en-rw en-sg en-us en-us en-vi en-vi en-wo en-za es-ar es-ar es-bo es-bo es-cl es-cl es-co es-co es-cr es-cr es-es es-gt es-gt es-mx es-mx es-ni es-ni es-pe es-pe es-pr es-pr es-sv es-sv es-ve et-ee fi-fi fi-fi fr-ci fr-fr fr-ma fr-mg fr-ml fr-tn is-is is-is it-it ja-jp ja-jp ko-kr lt-lt lv-lv nl-be nl-nl nl-sr nl-sr nn-no nn-no pl-pl pt-br pt-br pt-pt ro-ro ru-ru sk-sk sv-se sv-se th-th zh-cn zh-tw".split(" "),
_defaultRegion:"en-us",_getSupportedRegion:function(c){c=c?c.toLowerCase():"";return-1<S.indexOf(f._supportedRegions,c)?c:f._defaultRegion},getScalePreviewSource:function(c){c="./images/scalePreview/"+f._getSupportedRegion(c)+".jpg";return"url("+J.toUrl(c)+")"},getScalePreviewSpriteBackgroundPosition:function(c){return"-"+c%5*128+"px -"+128*Math.floor(c/5)+"px"}};return f})},"esri/dijit/VisibleScaleRangeSlider/ScalePreview":function(){define("../../kernel dijit/_TemplatedMixin dijit/_WidgetBase dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/has dojo/i18n!../../nls/jsapi dojo/text!./templates/ScalePreview.html".split(" "),
function(S,J,f,c,h,d,b,a,e){J=c([f,J],{declaredClass:"esri.dijit.VisibleScaleRangeSlider.ScalePreview",baseClass:"esriScalePreview",templateString:e,labels:a.widgets.visibleScaleRangeSlider,css:{header:"esriHeader",thumbnail:"esriThumbnail"},source:null,_setSourceAttr:function(q){this.source!==q&&(this._set("source",q),d.set(this.dap_scalePreviewThumbnail,"backgroundImage",q))},backgroundPosition:null,_setBackgroundPositionAttr:function(q){this.backgroundPosition!==q&&(this._set("backgroundPosition",
q),d.set(this.dap_scalePreviewThumbnail,"backgroundPosition",q))}});h.setObject("dijit.ScalePreview",J,S);return J})},"dojox/form/HorizontalRangeSlider":function(){define(["dojo/_base/declare","dojox/form/_RangeSliderMixin","dojo/text!./resources/HorizontalRangeSlider.html","dijit/form/HorizontalSlider"],function(S,J,f,c){return S("dojox.form.HorizontalRangeSlider",[c,J],{templateString:f})})},"dojox/form/_RangeSliderMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/fx dojo/_base/event dojo/_base/sniff dojo/dom-style dojo/dom-geometry dojo/keys dijit dojo/dnd/Mover dojo/dnd/Moveable dijit/form/_FormValueWidget dijit/focus dojo/fx dojox/fx".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v){var p=function(k,r){return k-r};q=S("dojox.form._RangeSliderMixin",null,{_setTabIndexAttr:["sliderHandle","sliderHandleMax"],value:[0,100],postMixInProperties:function(){this.inherited(arguments);this.value=f.map(this.value,function(k){return parseInt(k,10)})},postCreate:function(){this.inherited(arguments);this.value.sort(p);var k=this,r=S(l,{constructor:function(){this.widget=k}});this._movableMax=new u(this.sliderHandleMax,{mover:r});this.sliderHandle.setAttribute("aria-valuemin",
this.minimum);this.sliderHandle.setAttribute("aria-valuemax",this.maximum);this.sliderHandleMax.setAttribute("aria-valuemin",this.minimum);this.sliderHandleMax.setAttribute("aria-valuemax",this.maximum);r=S(n,{constructor:function(){this.widget=k}});this._movableBar=new u(this.progressBar,{mover:r});this.focusNode.removeAttribute("aria-valuemin");this.focusNode.removeAttribute("aria-valuemax");this.focusNode.removeAttribute("aria-valuenow")},destroy:function(){this.inherited(arguments);this._movableMax.destroy();
this._movableBar.destroy()},_onKeyPress:function(k){if(!(this.disabled||this.readOnly||k.altKey||k.ctrlKey)){var r=k.target===this.sliderHandleMax,w=k.target===this.progressBar,x=J.delegate(e,this.isLeftToRight()?{PREV_ARROW:e.LEFT_ARROW,NEXT_ARROW:e.RIGHT_ARROW}:{PREV_ARROW:e.RIGHT_ARROW,NEXT_ARROW:e.LEFT_ARROW}),D=0,G=!1;switch(k.keyCode){case x.HOME:this._setValueAttr(this.minimum,!0,r);h.stop(k);return;case x.END:this._setValueAttr(this.maximum,!0,r);h.stop(k);return;case x.PREV_ARROW:case x.DOWN_ARROW:G=
!0;case x.NEXT_ARROW:case x.UP_ARROW:D=1;break;case x.PAGE_DOWN:G=!0;case x.PAGE_UP:D=this.pageIncrement;break;default:this.inherited(arguments);return}G&&(D=-D);D&&(w?this._bumpValue([{change:D,useMaxValue:!1},{change:D,useMaxValue:!0}]):this._bumpValue(D,r),h.stop(k))}},_onHandleClickMax:function(k){this.disabled||this.readOnly||(d("ie")||m.focus(this.sliderHandleMax),h.stop(k))},_onClkIncBumper:function(){this._setValueAttr(!1===this._descending?this.minimum:this.maximum,!0,!0)},_bumpValue:function(k,
r){k=J.isArray(k)?[this._getBumpValue(k[0].change,k[0].useMaxValue),this._getBumpValue(k[1].change,k[1].useMaxValue)]:this._getBumpValue(k,r);this._setValueAttr(k,!0,r)},_getBumpValue:function(k,r){var w=r?1:0;r=b.getComputedStyle(this.sliderBarContainer);var x=a.getContentBox(this.sliderBarContainer,r);r=this.discreteValues;w=this.value[w];if(1>=r||Infinity==r)r=x[this._pixelCount];r--;k=this.maximum>this.minimum?(w-this.minimum)*r/(this.maximum-this.minimum)+k:0;0>k&&(k=0);k>r&&(k=r);return k*(this.maximum-
this.minimum)/r+this.minimum},_onBarClick:function(k){this.disabled||this.readOnly||(d("ie")||m.focus(this.progressBar),h.stop(k))},_onRemainingBarClick:function(k){if(!this.disabled&&!this.readOnly){d("ie")||m.focus(this.progressBar);var r=a.position(this.sliderBarContainer,!0),w=a.position(this.progressBar,!0),x=k[this._mousePixelCoord],D=w[this._startingPixelCoord];w=D+w[this._pixelCount];D=this._isReversed()?x<=D:x>=w;x=this._isReversed()?r[this._pixelCount]-x+r[this._startingPixelCoord]:x-r[this._startingPixelCoord];
this._setPixelValue(x,r[this._pixelCount],!0,D);h.stop(k)}},_setPixelValue:function(k,r,w,x){this.disabled||this.readOnly||(k=this._getValueByPixelValue(k,r),this._setValueAttr(k,w,x))},_getValueByPixelValue:function(k,r){var w=this.discreteValues;if(1>=w||Infinity==w)w=r;w--;return(this.maximum-this.minimum)*Math.round((0>k?0:r<k?r:k)/(r/w))/w+this.minimum},_setValueAttr:function(k,r,w){var x=J.clone(this.value);J.isArray(k)?x=k:x[w?1:0]=k;this._lastValueReported="";this.valueNode.value=k=x;x.sort(p);
this.sliderHandle.setAttribute("aria-valuenow",x[0]);this.sliderHandleMax.setAttribute("aria-valuenow",x[1]);g.prototype._setValueAttr.apply(this,arguments);this._printSliderBar(r,w)},_printSliderBar:function(k,r){r=this.maximum>this.minimum?(this.value[0]-this.minimum)/(this.maximum-this.minimum):0;var w=this.maximum>this.minimum?(this.value[1]-this.minimum)/(this.maximum-this.minimum):0,x=r;r>w&&(r=w,w=x);var D=this._isReversed()?100*(1-r):100*r,G=this._isReversed()?100*(1-w):100*w,F=this._isReversed()?
100*(1-w):100*r;if(k&&0<this.slideDuration&&this.progressBar.style[this._progressPixelSize]){if(parseFloat(this.progressBar.style[this._handleOffsetCoord]),k=this.slideDuration/10,0!==k){0>k&&(k=0-k);var A={},y={};x={};A[this._handleOffsetCoord]={start:this.sliderHandle.parentNode.style[this._handleOffsetCoord],end:D,units:"%"};y[this._handleOffsetCoord]={start:this.sliderHandleMax.parentNode.style[this._handleOffsetCoord],end:G,units:"%"};x[this._handleOffsetCoord]={start:this.progressBar.style[this._handleOffsetCoord],
end:F,units:"%"};x[this._progressPixelSize]={start:this.progressBar.style[this._progressPixelSize],end:100*(w-r),units:"%"};r=c.animateProperty({node:this.sliderHandle.parentNode,duration:k,properties:A});w=c.animateProperty({node:this.sliderHandleMax.parentNode,duration:k,properties:y});k=c.animateProperty({node:this.progressBar,duration:k,properties:x});v.combine([r,w,k]).play()}}else this.sliderHandle.parentNode.style[this._handleOffsetCoord]=D+"%",this.sliderHandleMax.parentNode.style[this._handleOffsetCoord]=
G+"%",this.progressBar.style[this._handleOffsetCoord]=F+"%",this.progressBar.style[this._progressPixelSize]=100*(w-r)+"%"}});var l=S("dijit.form._SliderMoverMax",t,{onMouseMove:function(k){var r=this.widget,w=r._abspos;w||(w=r._abspos=a.position(r.sliderBarContainer,!0),r._setPixelValue_=J.hitch(r,"_setPixelValue"),r._isReversed_=r._isReversed());k=k[r._mousePixelCoord]-w[r._startingPixelCoord];r._setPixelValue_(r._isReversed_?w[r._pixelCount]-k:k,w[r._pixelCount],!1,!0)},destroy:function(k){t.prototype.destroy.apply(this,
arguments);var r=this.widget;r._abspos=null;r._setValueAttr(r.value,!0)}}),n=S("dijit.form._SliderBarMover",t,{onMouseMove:function(k){var r=this.widget;if(!r.disabled&&!r.readOnly){var w=r._abspos,x=r._bar,D=r._mouseOffset;w||(w=r._abspos=a.position(r.sliderBarContainer,!0),r._setPixelValue_=J.hitch(r,"_setPixelValue"),r._getValueByPixelValue_=J.hitch(r,"_getValueByPixelValue"),r._isReversed_=r._isReversed());x||(x=r._bar=a.position(r.progressBar,!0));D||(D=r._mouseOffset=k[r._mousePixelCoord]-x[r._startingPixelCoord]);
k=k[r._mousePixelCoord]-w[r._startingPixelCoord]-D;pixelValues=[k,k+x[r._pixelCount]];pixelValues.sort(p);0>=pixelValues[0]&&(pixelValues[0]=0,pixelValues[1]=x[r._pixelCount]);pixelValues[1]>=w[r._pixelCount]&&(pixelValues[1]=w[r._pixelCount],pixelValues[0]=w[r._pixelCount]-x[r._pixelCount]);w=[r._getValueByPixelValue(r._isReversed_?w[r._pixelCount]-pixelValues[0]:pixelValues[0],w[r._pixelCount]),r._getValueByPixelValue(r._isReversed_?w[r._pixelCount]-pixelValues[1]:pixelValues[1],w[r._pixelCount])];
r._setValueAttr(w,!1,!1)}},destroy:function(){t.prototype.destroy.apply(this,arguments);var k=this.widget;k._abspos=null;k._bar=null;k._mouseOffset=null;k._setValueAttr(k.value,!0)}});return q})},"dojox/fx":function(){define(["./fx/_base"],function(S){return S})},"dojox/fx/_base":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/fx dojo/fx dojo/dom dojo/dom-style dojo/dom-geometry dojo/_base/connect dojo/_base/html".split(" "),function(S,J,f,c,h,d,b,a,e){S=J.getObject("dojox.fx",!0);
J.mixin(S,{anim:f.anim,animateProperty:f.animateProperty,fadeTo:f._fade,fadeIn:f.fadeIn,fadeOut:f.fadeOut,combine:c.combine,chain:c.chain,slideTo:c.slideTo,wipeIn:c.wipeIn,wipeOut:c.wipeOut});S.sizeTo=function(q){var t=q.node=h.byId(q.node),u=q.method||"chain";q.duration||(q.duration=500);"chain"==u&&(q.duration=Math.floor(q.duration/2));var g,m,v,p,l,n=null,k=function(r){return function(){var w=d.getComputedStyle(r),x=w.position,D=w.width,G=w.height;g="absolute"==x?r.offsetTop:parseInt(w.top)||0;
v="absolute"==x?r.offsetLeft:parseInt(w.left)||0;l="auto"==D?0:parseInt(D);n="auto"==G?0:parseInt(G);p=v-Math.floor((q.width-l)/2);m=g-Math.floor((q.height-n)/2);"absolute"!=x&&"relative"!=x&&(w=d.coords(r,!0),g=w.y,v=w.x,r.style.position="absolute",r.style.top=g+"px",r.style.left=v+"px")}}(t);t=f.animateProperty(J.mixin({properties:{height:function(){k();return{end:q.height||0,start:n}},top:function(){return{start:g,end:m}}}},q));u=f.animateProperty(J.mixin({properties:{width:function(){return{start:l,
end:q.width||0}},left:function(){return{start:v,end:p}}}},q));return c["combine"==q.method?"combine":"chain"]([t,u])};S.slideBy=function(q){var t,u,g=function(m){return function(){var v=d.getComputedStyle(m),p=v.position;t="absolute"==p?m.offsetTop:parseInt(v.top)||0;u="absolute"==p?m.offsetLeft:parseInt(v.left)||0;"absolute"!=p&&"relative"!=p&&(v=b.coords(m,!0),t=v.y,u=v.x,m.style.position="absolute",m.style.top=t+"px",m.style.left=u+"px")}}(q.node=h.byId(q.node));g();q=f.animateProperty(J.mixin({properties:{top:t+
(q.top||0),left:u+(q.left||0)}},q));a.connect(q,"beforeBegin",q,g);return q};S.crossFade=function(q){var t=q.nodes[0]=h.byId(q.nodes[0]),u=e.style(t,"opacity"),g=q.nodes[1]=h.byId(q.nodes[1]);e.style(g,"opacity");return c.combine([f[0==u?"fadeIn":"fadeOut"](J.mixin({node:t},q)),f[0==u?"fadeOut":"fadeIn"](J.mixin({node:g},q))])};S.highlight=function(q){var t=q.node=h.byId(q.node);q.duration=q.duration||400;var u=q.color||"#ffff99",g=e.style(t,"backgroundColor");"rgba(0, 0, 0, 0)"==g&&(g="transparent");
q=f.animateProperty(J.mixin({properties:{backgroundColor:{start:u,end:g}}},q));"transparent"==g&&a.connect(q,"onEnd",q,function(){t.style.backgroundColor=g});return q};S.wipeTo=function(q){q.node=h.byId(q.node);var t=q.node,u=t.style,g=q.width?"width":"height",m={};m[g]={start:function(){u.overflow="hidden";if("hidden"==u.visibility||"none"==u.display)return u[g]="1px",u.display="",u.visibility="",1;var v=e.style(t,g);return Math.max(v,1)},end:q[g]};return f.animateProperty(J.mixin({properties:m},
q))};return S})},"arcgisonline/pages/isGeographic":function(){define(["require","exports","tslib","esri/WKIDUnitConversion"],function(S,J,f,c){c=f.__importDefault(c);return function(h){h=h||{};return h.wkid?!c.default.hasOwnProperty(h.wkid):h.wkt?/^\s*GEOGCS/i.test(h.wkt):!1}})},"arcgisonline/pages/components/SelectLayerProperties":function(){define("require exports tslib preact dojo/i18n!../../nls/arcgisonline ../utils/arrays".split(" "),function(S,J,f,c,h,d){Object.defineProperty(J,"__esModule",
{value:!0});h=f.__importDefault(h);d=f.__importDefault(d);S=function(b){function a(){var e=null!==b&&b.apply(this,arguments)||this;e.state={active:!0,layerProperties:e.props.layerProperties};e.excludedFieldTypes=["esriFieldTypeOID","esriFieldTypeGlobalID"];e.toggleLayerPropertyField=function(q,t){var u=f.__spreadArray([],e.state.layerProperties,!0),g=d.default.findIndex(u,function(v){return v.id===q});if(-1<g){var m=u[g];d.default.includes(m.additionalFields,t)?(m.additionalFields=d.default.filterOut(m.additionalFields,
[t]),0===m.additionalFields.length&&u.splice(g,1)):m.additionalFields.push(t)}else u.push({id:q,additionalFields:[t]});e.setState({layerProperties:u})};e.save=function(){e.setState({active:!1});e.props.onSubmit(e.state.layerProperties)};e.cancel=function(){e.setState({active:!1,layerProperties:e.props.layerProperties});setTimeout(function(){e.props.onCancel()},400)};return e}f.__extends(a,b);a.prototype.componentWillUnmount=function(){document.documentElement.classList.remove("overflow-hidden")};
a.prototype.render=function(){var e=this,q,t=this.props,u=t.layers,g=t.onSubmit,m=this.state;t=m.active;var v=m.layerProperties;m=this.props.rebuildMode?h.default.itemProperties.configureAttributes.rebuild:h.default.itemProperties.configureAttributes.description;var p=this.props.rebuildMode?h.default.itemProperties.configureAttributes.rebuildCache:h.default.itemProperties.configureAttributes.select,l=null!==(q=null===u||void 0===u?void 0:u.map(function(n,k){var r,w=n.id,x=n.name;n=n.fields;var D=
null!==(r=null===n||void 0===n?void 0:n.map(function(G,F){var A=G.type,y=G.name;G=G.alias;var z=(v||[]).some(function(B){return(null===B||void 0===B?void 0:B.id)===w&&-1<B.additionalFields.indexOf(y)});return d.default.includes(e.excludedFieldTypes,A)?null:(0,c.h)("label",{class:"font-size--2 trailer-0",key:F},(0,c.h)("input",{type:"checkbox",checked:z,onChange:function(){return e.toggleLayerPropertyField(w,y)}})," ",G||y)}))&&void 0!==r?r:n;return(0,c.h)(c.Fragment,{key:k},(0,c.h)("div",{class:"avenir-demi"},
x),(0,c.h)("div",{class:"margin-left-1"},D))}))&&void 0!==q?q:u;return(0,c.h)("calcite-modal",{open:t,role:"dialog","aria-modal":"true",oncalciteModalClose:this.cancel,outsideCloseDisabled:!0},(0,c.h)("h3",{slot:"header",class:"font-size-2 trailer-0"},h.default.itemProperties.configureAttributes.selectAttributes),(0,c.h)("div",{slot:"content",class:"position-relative"},(0,c.h)("div",{class:"trailer-half"},m),l),(0,c.h)("calcite-button",{slot:"secondary",width:"full",appearance:"outline",kind:"brand",
onClick:function(){return e.cancel()}},h.default.common.cancel),(0,c.h)("calcite-button",{slot:"primary",width:"full",kind:"brand",appearance:"solid",onClick:function(){g(v)}},p))};return a}(c.Component);J.default=S})},"arcgisonline/sharing/dijit/dialog/RateLimiting":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/window dojo/dom-class dojo/dom-style dojo/dom-attr dojo/string dojo/on dojo/aspect dojo/dom dojo/dom-construct dojo/query dojo/parser dojo/ready dijit/registry dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/form/ValidationTextBox dojo/Deferred dijit/Dialog dijit/form/Button dojo/json arcgisonline/pages/pageUtil arcgisonline/sharing/util dojox/validate/regexp esri/Evented dojo/text!arcgisonline/sharing/dijit/dialog/templates/RateLimiting.html dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C){return S("arcgisonline.sharing.dijit.dialog.RateLimiting",[l],{templateString:B,baseClass:"esriRateLimiting",buildRendering:function(){this.inherited(arguments);var H=c.doc.createDocumentFragment();this._templateDijit=new (S([l,n,k],{templateString:a.substitute(this.templateString,{i18n:C},null,this)}));this._content=u.place(this._templateDijit.domNode,H,"first");this.inherited(arguments);this.domNode.appendChild(this._content)},
postMixInProperties:function(){this.inherited(arguments);this.i18n=J.mixin(J.mixin({},C.common),C.itemProperties);this.serviceProxyParams=this.serviceProxyParams&&(this.serviceProxyParams.hitsPerInterval||this.serviceProxyParams.referrers)?this.serviceProxyParams:this.item&&this.item.serviceProxyParams||null},postCreate:function(){this.inherited(arguments);this._enableLimits=this._templateDijit._enableLimits;this._hitRate=this._templateDijit._hitRate;this._hitCount=this._templateDijit._hitCount;this._interval=
this._templateDijit._interval;this._referrerUrl=this._templateDijit._referrerUrl;this._referrers=this._templateDijit._referrers;this._addBtn=this._templateDijit._addBtn;this._delBtn=this._templateDijit._delBtn;this._loadConnections();this.set("value",this.serviceProxyParams)},destroy:function(){this._templateDijit.destroyRecursive();this._templateDijit=null;this.inherited(arguments)},_loadConnections:function(){this.own(e(this._enableLimits,"change",J.hitch(this,function(H){this._hitRate.set("disabled",
!0!==H);this._hitCount.set("disabled",!0!==H);this._interval.set("disabled",!0!==H);g(".canDisable")[!0!==H?"addClass":"removeClass"]("disabled");h[!0!==H?"add":"remove"](this._interval.domNode,"dijitTextBoxDisabled")})),e(this._addBtn,"click",J.hitch(this,function(){this._referrerUrl.isValid()&&(this._addReferralUrl(this._referrerUrl.get("value").split(/[ ,]+/)),this._referrerUrl.set("value",""))})),e(this._delBtn,"click",J.hitch(this,function(){this._referrers.getSelected().orphan();this._delBtn.set("disabled",
!this._referrers.getSelected().length)})),e(this._referrers,"blur, click",J.hitch(this,function(){this._delBtn.set("disabled",!this._referrers.getSelected().length)})))},_setDisabledAttr:function(H){var E=p.findWidgets(this.domNode).concat(p.findWidgets(this._content));f.forEach(E,function(K){K.set("disabled",H)});h[H?"add":"remove"](this._interval.domNode,"dijitTextBoxDisabled")},_addReferralUrl:function(H){var E;f.forEach(H,J.hitch(this,function(K){K&&((E=g("option",this._referrers.containerNode).some(function(I){return I.value.toLowerCase()===
K.toLowerCase()}))||this._referrers.containerNode.appendChild(u.create("option",{value:K,innerHTML:K})))}))},isValid:function(){return this._enableLimits.get("checked")&&!this._hitRate.isValid()?C.rateLimiting.errors.invalidHitRate:!0},_setValueAttr:function(H){this.serviceProxyParams=H;this._enableLimits.set("value",null);H&&(H.hitsPerInterval&&(this._hitRate.set("value",H.hitsPerInterval),this._interval.set("value",H.intervalSeconds),this._enableLimits.set("value","true"),this._extractUnits(H.intervalSeconds)),
this._addReferralUrl(H.referrers))},_extractUnits:function(H){var E=this._interval.options,K=parseInt(H,10);H=1;(E=f.filter(E,function(I){return 0===K%parseInt(I.value,10)}))&&E.length&&(H=E[E.length-1].value,this._interval.set("value",H),this._hitCount.set("value",Math.floor(K/parseInt(H,10))))},_getValueAttr:function(){var H={},E=[];g("option",this._referrers.containerNode).forEach(function(K){E.push(K.value)});this._enableLimits.get("checked")&&(H.hitsPerInterval=parseInt(this._hitRate.get("value"),
10),H.intervalSeconds=parseInt(this._hitCount.get("value"),10)*parseInt(this._interval.get("value"),10));E&&E.length&&(H.referrers=E);return H},showModal:function(H){var E=new w,K=new x({}),I=this.item.folderId,L=c.doc.createDocumentFragment(),M=u.place(this.domNode,L),N=u.create("div",{"class":"esriFloatTrailing esriTimeSettingsButtons"},M);M=new D({"class":"calcite cancel right btn-two",label:this.i18n.cancel,type:"button"},u.create("button",{},N));N=new D({"class":"calcite primary right",label:this.i18n.ok,
type:"button"},u.create("button",{},N));this.own(e(N,"click",J.hitch(this,function(){this.set("disabled",!0);var P=esriGeowConfig.restBaseUrl+"content/users/"+this.item.owner+"/"+(I?I+"/":"")+"items/"+this.item.id,R=this.isValid();if(!0!==R)this._showError(R),this.set("disabled",!1);else{var Y=this.get("value");return A.request({url:P+"/update",content:{serviceProxyParams:G.stringify(Y)}},{usePost:!0}).then(J.hitch(this,function(){this.item.serviceProxyParams=Y;K.hide()}),J.hitch(this,function(ja){this._showError(ja);
this.set("disabled",!1)}))}})),e(M,"click",J.hitch(this,function(){K.hide()})),e(K,"hide",J.hitch(this,function(){K.destroyRecursive();E.resolve(this.item)})));K.set("title",H&&H.title||this.i18n.rateLimitingTitle);K.setContent(L);K.show();return E},_showError:function(H){H=H.error||H||this.i18n.errors.error;H.code=H.messageCode||H.code;H=this.i18n.errors[H.code]||H||this.i18n.errors.error;H.details=H.details&&J.isArray(H.details)&&H.details.length?f.filter(H.details,"return item !\x3d\x3d null"):
null;if(H.details&&H.details.length){var E="\x3cul\x3e";f.forEach(H.details,function(K){E+="\x3cli\x3e"+K+"\x3c/li\x3e"});E+="\x3c/ul\x3e\x3cbr/\x3e";H.message=H.message?"\x3cdiv\x3e"+H.message+"\x3c/div\x3e\x3cbr/\x3e"+E:E}H.message&&-1===H.message.indexOf("Request canceled")&&F.createConfirmationDialog({strings:{title:err.title,description:err.message},hideCancel:!0,autoCloseOnOk:!0,onOk:function(){this.set("disabled",!1)}.bind(this),onCance:function(){this.set("disabled",!1)}.bind(this)})}})})},
"dojox/validate/regexp":function(){define(["dojo/_base/lang","dojo/regexp","dojox/main"],function(S,J,f){var c=S.getObject("validate.regexp",!0,f);return c=f.validate.regexp={ipAddress:function(h){h="object"==typeof h?h:{};"boolean"!=typeof h.allowDottedDecimal&&(h.allowDottedDecimal=!0);"boolean"!=typeof h.allowDottedHex&&(h.allowDottedHex=!0);"boolean"!=typeof h.allowDottedOctal&&(h.allowDottedOctal=!0);"boolean"!=typeof h.allowDecimal&&(h.allowDecimal=!0);"boolean"!=typeof h.allowHex&&(h.allowHex=
!0);"boolean"!=typeof h.allowIPv6&&(h.allowIPv6=!0);"boolean"!=typeof h.allowHybrid&&(h.allowHybrid=!0);var d=[];h.allowDottedDecimal&&d.push("((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])");h.allowDottedHex&&d.push("(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]");h.allowDottedOctal&&d.push("(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]");h.allowDecimal&&d.push("(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])");
h.allowHex&&d.push("0[xX]0*[\\da-fA-F]{1,8}");h.allowIPv6&&d.push("([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}");h.allowHybrid&&d.push("([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])");h="";0<d.length&&(h="("+d.join("|")+")");return h},host:function(h){h="object"==typeof h?h:{};"boolean"!=typeof h.allowIP&&(h.allowIP=!0);"boolean"!=typeof h.allowLocal&&(h.allowLocal=!1);"boolean"!=typeof h.allowPort&&(h.allowPort=!0);"boolean"!=typeof h.allowNamed&&
(h.allowNamed=!1);var d=h.allowPort?"(\\:\\d+)?":"",b="((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.?)";h.allowIP&&(b+="|"+c.ipAddress(h));h.allowLocal&&(b+="|localhost");h.allowNamed&&(b+="|^[^-][a-zA-Z0-9_-]*");return"("+b+")"+d},url:function(h){h="object"==typeof h?h:{};"scheme"in h||(h.scheme=[!0,!1]);return J.buildGroupRE(h.scheme,function(d){return d?"(https?|ftps?)\\://":""})+c.host(h)+"(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]+(?:\\?[^?#\\s/]*)?(?:#[A-Za-z][\\w.:-]*)?)?)?"},
emailAddress:function(h){h="object"==typeof h?h:{};"boolean"!=typeof h.allowCruft&&(h.allowCruft=!1);h.allowPort=!1;var d="([!#-'*+\\-\\/-9\x3d?A-Z^-~]+[.])*[!#-'*+\\-\\/-9\x3d?A-Z^-~]+@"+c.host(h);h.allowCruft&&(d="\x3c?(mailto\\:)?"+d+"\x3e?");return d},emailAddressList:function(h){h="object"==typeof h?h:{};"string"!=typeof h.listSeparator&&(h.listSeparator="\\s;,");var d=c.emailAddress(h);return"("+d+"\\s*["+h.listSeparator+"]\\s*)*"+d+"\\s*["+h.listSeparator+"]?\\s*"},numberFormat:function(h){h=
"object"==typeof h?h:{};"undefined"==typeof h.format&&(h.format="###-###-####");return J.buildGroupRE(h.format,function(d){return J.escapeString(d,"?").replace(/\?/g,"\\d?").replace(/#/g,"\\d")})},ca:{postalCode:function(){return"([A-Z][0-9][A-Z] [0-9][A-Z][0-9])"},province:function(){return"(AB|BC|MB|NB|NL|NS|NT|NU|ON|PE|QC|SK|YT)"}},us:{state:function(h){h="object"==typeof h?h:{};"boolean"!=typeof h.allowTerritories&&(h.allowTerritories=!0);"boolean"!=typeof h.allowMilitary&&(h.allowMilitary=!0);
var d="AL|AK|AZ|AR|CA|CO|CT|DE|DC|FL|GA|HI|ID|IL|IN|IA|KS|KY|LA|ME|MD|MA|MI|MN|MS|MO|MT|NE|NV|NH|NJ|NM|NY|NC|ND|OH|OK|OR|PA|RI|SC|SD|TN|TX|UT|VT|VA|WA|WV|WI|WY";h.allowTerritories&&(d+="|AS|FM|GU|MH|MP|PW|PR|VI");h.allowMilitary&&(d+="|AA|AE|AP");return"("+d+")"}}}})},"arcgisonline/sharing/dijit/dialog/ShareOwnershipDlg":function(){define("dojo/_base/declare dojo/on dojo/dom-attr dojo/query dojo/dom dojo/dom-style dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/dom-construct dojo/string dojo/_base/window dojo/promise/all dojo/when dojo/Deferred dojo/_base/array dojo/cookie dojo/dom-class dojo/json dijit/registry dijit/form/Select dojox/form/TriStateCheckBox ./ConfirmDialog dijit/focus dojo/_base/event dojo/keys dgrid/OnDemandGrid dgrid/Selection dgrid/editor dojo/store/Memory dojo/store/Observable ./_CreateItemUtilMixin dojo/topic esri/Evented esri/arcgis/Portal ../../geow/Account ../../geow/Content ../../util dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E,K,I,L,M,N,P,R,Y){return S("arcgisonline.sharing.dijit.dialog.ShareOwnershipDlg",[a,e,q,L],{baseClass:"esriSharedOwnershipDlg table-layout",templateString:'\x3cdiv data-dojo-attach-point\x3d"contentNode"\x3e\x3cp data-dojo-attach-point\x3d"_message"\x3e${i18n.sharingDlg.sharedOwnershipMsg}\x3c/p\x3e\x3cdiv class\x3d"main"\x3e\x3cdiv id\x3d"${id}-groups" data-dojo-attach-point\x3d"_groups" \x3e\x3c/div\x3e\x3c/div\x3e\x3cp data-dojo-attach-point\x3d"_footerMessage"\x3e${i18n.sharingDlg.settingsMsg}\x3c/p\x3e',
onDone:function(){},postMixInProperties:function(){this.inherited(arguments);this.i18n=b.mixin({},Y)},postCreate:function(){this.inherited(arguments);N.getSelf(b.hitch(this,function(ja){this._loadConnections();this._portal=new M.Portal({url:esriGeowConfig.restBaseUrl,self:ja});this._connect=this._portal.on("load",b.hitch(this,function(){this._connect.remove();this._portalUser=this._portal.getPortalUser();this.set("disabled",!0,this.i18n.sharingDlg.fetchingGroups);return this._loadData().then(b.hitch(this,
function(aa){this._createGrid(aa);this.set("disabled",!1);I.publish("shareOwnership/load")}),b.hitch(this,function(aa){I.publish("shareOwnership/load")}))}))}))},startup:function(){this.inherited(arguments);var ja=new p,aa=I.subscribe("shareOwnership/load",function(){aa.remove();ja.resolve()});return ja},destroy:function(){c(".dijit",this.contentNode).map(dijit.byNode).forEach(function(ja){ja.destroyRecursive?ja.destroyRecursive():ja.destroy&&ja.destroy();ja=null});this._groups.destroy();this._groupsStore=
this._groups=null;this._errorDlg&&(this._errorDlg.destroyRecursive(),this._errorDlg=null);this.inherited(arguments);this._portalUser=this._portal=null},_createGrid:function(ja){ja=[C({field:"visible",autoSave:!0},D),{field:"title"}];this._groups=new (S([z,B]))({selectionMode:"none",store:this._groupsStore,showHeader:!1,showLoadingMessage:!1,columns:ja,sort:[{attribute:"title",descending:!1}]},this._groups);this._groups.startup();this._groups.on(".dgrid-cell.field-visible:click",b.hitch(this,function(aa){aa=
this._groups.cell(aa).element.widget;"mixed"===(aa&&aa.get("checked")||!1)&&aa.set("checked",!0)}))},_loadConnections:function(){this.own(I.subscribe("dlg/onOk",b.hitch(this,function(){this._focusNode&&setTimeout(b.hitch(this,function(){F.focus(this._focusNode)}),250)})),I.subscribe("/esri/disable",b.hitch(this,function(ja,aa){this.set("disabled",ja,aa,!0)})))},_loadData:function(){var ja=new p,aa=l.map(this.items||[],b.hitch(this,function(da){return this._getGroupsItemSharedWith(da)}));this._sharedOwnershipGroups=
this._getSharedOwnershipGroups(this.groups);this._groupsStore=new E(new H({idProperty:"id",data:this._sharedOwnershipGroups}));m(aa).then(b.hitch(this,function(da){ja[this._sharedOwnershipGroups&&this._sharedOwnershipGroups.length?"resolve":"reject"](this._sharedOwnershipGroups)}));return ja},_setValueAttr:function(ja){this.items=ja.items.map(function(aa){return b.mixin({},aa)});this.groups=ja.groups.map(function(aa){return b.mixin({},aa)})},_getValueAttr:function(){return{selected:this._groupsStore.query({visible:"on"}).map(function(ja){return ja.id}),
unselected:this._groupsStore.query({visible:!1}).map(function(ja){return ja.id})}},_setFocusAttr:function(ja){ja=c(ja,this.domNode);F.focus(ja&&ja.length?ja[0]:this._title.domNode)},_setDisabledAttr:function(ja,aa,da){this.set("readOnly",ja,aa,da)},_setReadOnlyAttr:function(ja,aa,da){c(".dijit",this.domNode).map(dijit.byNode).forEach(function(ra){ra.set("disabled",ja)});c("a",this.domNode)[ja?"addClass":"removeClass"]("disabledLink");c("label, p, span",this.domNode)[ja?"addClass":"removeClass"]("disabled");
da||(ja&&aa&&I.publish("/dlg/busyMessage",aa),I.publish("/esri/disable",ja,aa))},shareWithSelectedGroup:function(){var ja=new p,aa=l.map(this.items||[],"return item.id;").join(","),da=this.items&&this.items.length?this.items[0].owner:null,ra={owner:da,items:aa,groups:this.get("value").selected.join(","),confirmItemControl:!0};aa={owner:da,items:aa,groups:this.get("value").unselected.join(",")};this.set("disabled",!0,this.i18n.sharingDlg.sharingItems);m([this._shareItems(ra),this._unshareItems(aa)]).then(b.hitch(this,
function(){this.set("disabled",!1);ja.resolve()}),b.hitch(this,function(ca){this.set("disabled",!1);ja.reject(ca)}));return ja},_shareItems:function(ja){var aa=new p;ja.groups&&ja.groups.length?P.shareItems(ja,b.hitch(this,function(da){this.set("disabled",!1);aa.resolve(da)}),b.hitch(this,function(da){aa.reject(da)})):aa.resolve([]);return aa},_unshareItems:function(ja){var aa=new p;ja.groups&&ja.groups.length?P.unshareItems(ja,b.hitch(this,function(da){this.set("disabled",!1);aa.resolve(da)}),b.hitch(this,
function(da){aa.reject(da)})):aa.resolve([]);return aa},_getGroupsItemSharedWith:function(ja){ja=this._portal.portalUrl+"content/items/"+ja.id+"/groups";var aa=this.items&&this.items.length||0,da,ra=new p;R.request({url:ja}).then(b.hitch(this,function(ca){ca=this._getSharedOwnershipGroups(ca.admin).concat(this._getSharedOwnershipGroups(ca.member)).concat(this._getSharedOwnershipGroups(ca.other));l.forEach(ca||[],b.hitch(this,function(fa){if(da=this._groupsStore.get(fa.id))da.shareCount=da.shareCount?
da.shareCount+1:1,da.visible=da.shareCount===aa?"on":"mixed",this._groupsStore.put(da)}));ra.resolve(ca)}));return ra},_getSharedOwnershipGroups:function(ja){var aa,da=this._portalUser&&this._portalUser.username;return l.filter(ja||[],b.hitch(this,function(ra){aa=ra.capabilities&&ra.capabilities.join(",")||"";return(ra.owner===da||!ra.isViewOnly||ra.userMembership&&"admin"===ra.userMembership.memberType)&&-1<aa.toLowerCase().indexOf("updateitemcontrol")}))},validate:function(){var ja=new p;this._focusNode=
null;var aa=this._checkRequired();aa=aa.then(b.hitch(this,function(da){ja.resolve(da)}),b.hitch(this,function(da){this._showError(da);ja.reject(da)}));return ja},_checkRequired:function(){var ja=new p;ja.resolve(!0);return ja},_showError:function(ja){ja=b.mixin(b.mixin({},Y.publishWizard.errors.error),ja);this._errorDlg=new G({showCancel:!1,style:{width:"400px",height:"auto"}});this._errorDlg.show(ja).then(b.hitch(this,function(){this.set("disabled",!1);this._errorDlg.hide();this._focusNode&&setTimeout(b.hitch(this,
function(){F.focus(this._focusNode)}),250)}));return!1}})})},"dojox/form/TriStateCheckBox":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/event dojo/query dojo/dom-attr dojo/text!./resources/TriStateCheckBox.html dijit/form/Button dijit/form/_ToggleButtonMixin dojo/NodeList-dom".split(" "),function(S,J,f,c,h,d,b,a,e,q){return J("dojox.form.TriStateCheckBox",[e,q],{templateString:a,baseClass:"dojoxTriStateCheckBox",type:"checkbox",states:"",_stateLabels:null,
stateValue:null,_currentState:0,_stateType:"False",readOnly:!1,checked:"",_aria_attr:"aria-checked",constructor:function(){this.states=[!1,"mixed",!0];this.checked=!1;this._stateLabels={False:"\x26#9633;",True:"\x26#8730;",Mixed:"\x26#9632;"};this.stateValues={False:!1,True:"on",Mixed:"mixed"}},_fillContent:function(t){},postCreate:function(){b.set(this.stateLabelNode,"innerHTML",this._stateLabels[this._stateType]);this.inherited(arguments)},startup:function(){this.set("checked",this.params.checked||
this.states[this._currentState]);b.set(this.stateLabelNode,"innerHTML",this._stateLabels[this._stateType]);this.inherited(arguments)},_setIconClassAttr:null,_setCheckedAttr:function(t,u){var g=f.indexOf(this.states,t);0<=g&&(this._currentState=g,this._stateType=this._getStateType(t),b.set(this.focusNode,"value",this.stateValues[this._stateType]),b.set(this.stateLabelNode,"innerHTML",this._stateLabels[this._stateType]),this.inherited(arguments))},setChecked:function(t){S.deprecated("setChecked("+t+
") is deprecated. Use set('checked',"+t+") instead.","","2.0");this.set("checked",t)},_setStatesAttr:function(t){if(c.isArray(t))this._set("states",t);else if(c.isString(t)){var u={"true":!0,"false":!1,mixed:"mixed"};t=t.split(/\s*,\s*/);for(var g=0;g<t.length;g++)t[g]=void 0!==u[t[g]]?u[t[g]]:!1;this._set("states",t)}},_setReadOnlyAttr:function(t){this._set("readOnly",t);b.set(this.focusNode,"readOnly",t)},_setValueAttr:function(t,u){"string"==typeof t&&0>f.indexOf(this.states,t)&&(""==t&&(t="on"),
this.stateValues.True=t,t=!0);this._created&&(this._currentState=f.indexOf(this.states,t),this.set("checked",t,u),b.set(this.focusNode,"value",this.stateValues[this._stateType]))},_setValuesAttr:function(t){this.stateValues.True=t[0]?t[0]:this.stateValues.True;this.stateValues.Mixed=t[1]?t[1]:this.stateValues.Mixed},_getValueAttr:function(){return this.stateValues[this._stateType]},reset:function(){this._hasBeenBlurred=!1;this.set("states",this.params.states||[!1,"mixed",!0]);this.stateValues=this.params.stateValues||
{False:!1,True:"on",Mixed:"mixed"};this.set("values",this.params.values||[]);this.set("checked",this.params.checked||this.states[0])},_onFocus:function(){this.id&&d("label[for\x3d'"+this.id+"']").addClass("dijitFocusedLabel");this.inherited(arguments)},_onBlur:function(){this.id&&d("label[for\x3d'"+this.id+"']").removeClass("dijitFocusedLabel");this.mouseFocus=!1;this.inherited(arguments)},_onClick:function(t){if(this.readOnly||this.disabled)return h.stop(t),!1;this.click();return this.onClick(t)},
click:function(){this._currentState>=this.states.length-1?this._currentState=0:-1==this._currentState?this.fixState():this._currentState++;var t=this._currentState;this.set("checked",this.states[this._currentState]);this._currentState=t;b.set(this.stateLabelNode,"innerHTML",this._stateLabels[this._stateType])},fixState:function(){this._currentState=this.states.length-1},_getStateType:function(t){return t?"mixed"==t?"Mixed":"True":"False"},_onMouseDown:function(){this.mouseFocus=!0}})})},"arcgisonline/sharing/utilShare":function(){define("require exports tslib ../esriGeowConfig ./util ./dijit/dialog/ShareCheckDlg ./dijit/dialog/ConfirmDialog ./geow/Community dojo/promise/all dojo/Deferred dojo/string esri/lang esri/request dojo/i18n!../nls/arcgisonline".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);return function(){function v(){}v.isEmpty=function(p){return p?JSON.stringify(p)===JSON.stringify({}):!1};v.checkWebMapContent=function(p){var l=this,n=function(k){var r={};r.webMapId=k.webMapId;r.mainItemCard=
k.webMapItemCard;delete r.mainItemCard.needsUpdate;r.mainItemSharing=k.webMapItemSharing;r.mainConfig=k.webMapConfig;r.itemCards=k.itemCards||{};for(var w in r.itemCards)delete r.itemCards[w].needsUpdate;r.itemsSharing={};r.newAccess=k.newAccess;r.needUpdateHandler=k.needUpdateHandler;r.dontNeedUpdateHandler=k.dontNeedUpdateHandler;r.confirmItemControl=k.confirmItemControl;l.getMainItemCard(r)};p.useTimer?(this.waitHandler&&clearTimeout(this.waitHandler),this.waitHandler=setTimeout(function(){l.waitHandler=
null;n(p)},2E3)):n(p)};v.checkWebAppContent=function(p){var l={};l.webAppId=p.webAppId;l.mainItemCard=p.webAppItemCard;l.mainItemSharing=p.webAppItemSharing;l.mainConfig=p.webAppConfig;l.itemCards=p.itemCards||{};l.itemsSharing={};this.getMainItemCard(l)};v.getMainItemCard=function(p){var l=this,n=function(r){r.newAccess?(r.mainItemSharing=r.newAccess,l.getMainConfig(r)):"private"!==r.mainItemCard.access&&("shared"===r.mainItemCard.access?l.getMainSharingInfo(r):l.getMainConfig(r))};if(p.mainItemCard)n(p);
else{var k="".concat(c.default.restBaseUrl,"content/items/").concat(p.webMapId||p.webAppId);h.default.request({url:k}).then(function(r){p.mainItemCard=r;n(p);return!0},function(r){return r})}};v.getMainSharingInfo=function(p){var l=this;if(p.mainItemSharing)this.getMainConfig(p);else{var n=h.default.getUser();n="".concat(c.default.restBaseUrl,"content/users/").concat(n.username);p.mainItemCard.ownerFolder&&(n+="/".concat(p.mainItemCard.ownerFolder));n+="/items/".concat(p.webMapId||p.webAppId);var k=
h.default.getToken();n+=k?"?f\x3djson\x26token\x3d".concat(k):"?f\x3djson";(0,g.default)({url:n,callbackParamName:"callback",load:function(r){p.mainItemSharing=r.sharing;l.getMainConfig(p)},error:function(r){l.getMainConfig(p)}},{disableIdentityLookup:!0})}};v.getMainConfig=function(p){var l=this;if(p.mainConfig)p.webMapId?this.readWebMapConfig(p):this.readWebAppConfig(p);else{var n="".concat(c.default.restBaseUrl,"content/items/").concat(p.webMapId||p.webAppId,"/data");return h.default.request({url:n}).then(function(k){p.mainConfig=
k;p.webMapId?l.readWebMapConfig(p):l.readWebAppConfig(p)},function(k){})}};v.checkForItemSharing=function(p){var l=this;if(p.newAccess&&"shared"!==p.newAccess.access||!p.newAccess&&"shared"!==p.mainItemCard.access)this.checkAccessOfItems(p);else{var n=[],k;for(k in p.itemCards){var r=p.itemCards[k];"shared"!==r.access&&"org"!==r.access||!r.ownerFolder&&null!==r.ownerFolder||n.push(this.getItemSharingInfo(r))}n.length?(0,e.default)(n).then(function(w){w.forEach(function(x){x=x.length?x[1]:x;p.itemsSharing[x.item.id]=
x.sharing});l.checkAccessOfItems(p)}):this.checkAccessOfItems(p)}};v.checkAccessOfItems=function(p){var l=this,n=h.default.getUser(),k=p.newAccess?p.newAccess.access:p.mainItemCard.access,r=[],w;for(w in p.itemCards){var x=p.itemCards[w];"shared"===k&&"public"!==x.access&&p.mainItemSharing&&void 0!==x.ownerFolder&&n.username!==x.owner&&r.push(this.getOwnerGroups(x,p))}r.length?(0,e.default)(r).then(function(D){l._checkAccessOfItems(p)}):this._checkAccessOfItems(p)};v._checkAccessOfItems=function(p){var l=
this,n=!1,k=p.newAccess?p.newAccess.access:p.mainItemCard.access,r=[],w;for(w in p.itemCards){var x=p.itemCards[w],D=x.access,G=!1;p.containsPremiumContent=this.isPremiumContent(x);if("public"===k&&"public"!==D)G=!0;else if("org"===k&&"public"!==D&&"org"!==D)G=!0;else if("shared"===k&&"private"===D)G=!0;else if("shared"!==k||"shared"!==D&&"org"!==D)"Web Map"!==x.type&&"Web Scene"!==x.type?delete p.itemCards[w]:p.itemCards[w].needsUpdate=!1;else if(p.mainItemSharing)if(p.itemsSharing[w]&&void 0!==
x.ownerFolder){D=p.mainItemSharing.groups;for(var F=p.itemsSharing[w].groups,A=!1,y=0;y<D.length;y++)if(-1===F.indexOf(D[y])){A=G=!0;break}A||delete p.itemCards[w]}else G=!0;else G=!0;(G&&p.webAppId||"Web Map"===x.type||"Web Scene"===x.type)&&r.push(this.checkWebMapInWebApp(x.id,p));n=n||G}var z=function(B,C){var H=C.newAccess?C.newAccess.access:C.mainItemCard.access;B?C.needUpdateHandler?C.needUpdateHandler(C):d.default.prototype.statics.getInstance().show(C):"public"===H&&"Web Map"===C.mainItemCard.type&&
C.containsPremiumContent?l.showPremiumContentDlg(C):C.dontNeedUpdateHandler&&C.dontNeedUpdateHandler(C)};r.length?(0,e.default)(r).then(function(B){B.forEach(function(C){1<C.length&&u.default.isDefined(C.length?C[1]:C)&&(n=n||C.length?C[1]:C)});z(n,p)}):this.isEmpty(p.itemCards)?p.dontNeedUpdateHandler&&p.dontNeedUpdateHandler(p):z(n,p)};v.isPremiumContent=function(p){p=p.typeKeywords||[];return-1<p.indexOf("Requires Subscription")||-1<p.indexOf("Requires Credits")};v.showPremiumContentDlg=function(p){var l=
this;-1<document.location.href.indexOf("viewer.html")||(p="".concat(c.default.helpBase).concat(c.default.helpMap["120001307"]),this.premiumContentDlg||(this.premiumContentDlg=new b.default({showCancel:!1,buttonOk:m.default.common.ok,style:{width:"200px"}}),this.premiumContentDlg.show({message:t.default.substitute('${i18n.shareMapDlg.premiumLayerMsg} \x3ca href\x3d"${helpLinkPremium}" target\x3d"_blank"\x3e${i18n.shareMapDlg.premiumLayerMsgLearnMore}\x3c/a\x3e',{i18n:m.default,helpLinkPremium:p}),
title:m.default.common.premiumcontent}).then(function(n){l.premiumContentDlg.hide();l.premiumContentDlg=null})))};v.readWebMapConfig=function(p){var l=this,n,k,r=!1,w=[],x=p.mainConfig.operationalLayers;p.mainConfig.tables&&p.mainConfig.tables.length&&(x=x.concat(p.mainConfig.tables));for(var D=x.length-1;0<=D;D--){var G=x[D];if(G.itemId)r=!0,p.itemCards[G.itemId]||w.push(this.getItemCard(G.itemId)),("ArcGISTiledMapServiceLayer"===G.layerType||"ArcGISTiledElevationServiceLayer"===G.layerType||"ArcGISSceneServiceLayer"===
G.layerType)&&(null===(n=G.layers)||void 0===n?0:n.length)&&G.layers.forEach(function(z){z.layerItemId&&!p.itemCards[z.layerItemId]&&w.push(l.getItemCard(z.layerItemId))});else if("GroupLayer"===G.layerType)for(var F=x[D],A=F.layers.length-1;0<=A;A--){var y=F.layers[A];y.itemId&&(r=!0,p.itemCards[y.itemId]||w.push(this.getItemCard(y.itemId)))}G.layers&&G.layers.forEach(function(z){z.layerItemId&&!p.itemCards[z.layerItemId]&&w.push(l.getItemCard(z.layerItemId))})}for(D=p.mainConfig.baseMap.baseMapLayers.length-
1;0<=D;D--)n=p.mainConfig.baseMap.baseMapLayers[D],n.itemId&&(r=!0,p.itemCards[n.itemId]||w.push(this.getItemCard(n.itemId)));if(p.mainConfig.baseMap.elevationLayers)for(D=p.mainConfig.baseMap.elevationLayers.length-1;0<=D;D--)n=p.mainConfig.baseMap.elevationLayers[D],n.itemId&&(r=!0,p.itemCards[n.itemId]||w.push(this.getItemCard(n.itemId)));w.length?(0,e.default)(w).then(function(z){z.forEach(function(H){H=H.length?H[1]:H;H.id&&(p.itemCards[H.id]=H)});var B=[],C=[];z.forEach(function(H){H=H.length?
H[1]:H;H.id&&("Map Service"===H.type||"Scene Service"===H.type)&&-1<H.typeKeywords.indexOf("Hosted Service")&&!p.itemCards[H.id].data&&(B.push(l.getItemData(H.id)),C.push(H.id))});B.length?(0,e.default)(B).then(function(H){H.forEach(function(E,K){K=p.itemCards[C[K]];K.data=E.length?E[1]:E;var I=[];K.data.layers&&K.data.layers.forEach(function(L){L.layerItemId&&(p.itemCards[L.layerItemId]||I.push(l.getItemCard(L.layerItemId)))});I.length?(0,e.default)(I).then(function(L){L.forEach(function(M){M=M.length?
M[1]:M;M.id&&(p.itemCards[M.id]=M)});l.checkForItemSharing(p)},function(L){l.checkForItemSharing(p)}):l.checkForItemSharing(p)},l)},function(H){l.checkForItemSharing(p)}):l.checkForItemSharing(p)},function(z){l.checkForItemSharing(p)}):r?this.checkForItemSharing(p):null===(k=p.dontNeedUpdateHandler)||void 0===k?void 0:k.call(p,p)};v.readWebAppConfig=function(p){var l=this;if(p.mainConfig.values&&p.mainConfig.values.webmap||p.mainConfig.map&&p.mainConfig.map.itemId||p.mainConfig.values&&p.mainConfig.values.webscene){var n=
[];p.mainConfig&&(p.mainConfig.values?p.mainConfig.values.webscene?n=p.mainConfig.values.webscene.split(","):p.mainConfig.values.webmap&&(n=p.mainConfig.values.webmap.split(",")):n=p.mainConfig.map&&p.mainConfig.map.itemId?[p.mainConfig.map.itemId]:[]);var k=[];n.forEach(function(r){p.itemCards[r]||k.push(l.getItemCard(r))});k.length?(0,e.default)(k).then(function(r){r.forEach(function(w){w=w.length?w[1]:w;p.itemCards[w.id]=w});l.checkForItemSharing(p)}):this.checkForItemSharing(p)}};v.checkWebMapInWebApp=
function(p,l){var n=new q.default,k={access:l.mainItemCard.access};l.mainItemSharing&&l.mainItemSharing.groups&&(k.groups=l.mainItemSharing.groups);this.checkWebMapContent({webMapId:p,webMapItemCard:l.itemCards[p],newAccess:k,needUpdateHandler:function(r){l.itemCards[p].webMapInfo=r;n.resolve(!0)},dontNeedUpdateHandler:function(r){n.resolve(!1)}});return n};v.getItemCard=function(p,l){var n=this;l=l||new q.default;if("inProgress"===this.itemCards[p])setTimeout(function(){n.getItemCard(p,l)},1E3);
else if(this.itemCards[p])delete this.itemCards[p].needsUpdate,l.resolve(this.itemCards[p]);else{this.itemCards[p]="inProgress";var k="".concat(c.default.restBaseUrl,"content/items/").concat(p),r=h.default.getToken();k+=r?"?f\x3djson\x26token\x3d".concat(r):"?f\x3djson";(0,g.default)({url:k,callbackParamName:"callback",load:function(w){n.itemCards[p]=w;l.resolve(w)},error:function(w){delete n.itemCards[p];l.reject(w)}},{disableIdentityLookup:!0})}return l};v.getItemData=function(p,l){var n=this,k;
l=l||new q.default;if(this.itemCards[p]&&"inProgress"===this.itemCards[p].data)setTimeout(function(){n.getItemData(p,l)},1E3);else if(null===(k=this.itemCards[p])||void 0===k?0:k.data)l.resolve(this.itemCards[p].data);else{this.itemCards[p].data="inProgress";k="".concat(c.default.restBaseUrl,"content/items/").concat(p,"/data");var r=h.default.getToken();k+=r?"?f\x3djson\x26token\x3d".concat(r):"?f\x3djson";(0,g.default)({url:k,callbackParamName:"callback",load:function(w){n.itemCards[p].data=w;l.resolve(w)},
error:function(w){delete n.itemCards[p].data;l.reject(w)}},{disableIdentityLookup:!0})}return l};v.getItemSharingInfo=function(p){var l="".concat(c.default.restBaseUrl,"content/users/").concat(p.owner);p.ownerFolder&&(l+="/".concat(p.ownerFolder));l+="/items/".concat(p.id);p=h.default.getToken();l+=p?"?f\x3djson\x26token\x3d".concat(p):"?f\x3djson";return(0,g.default)({url:l,callbackParamName:"callback"},{disableIdentityLookup:!0})};v.getOwnerGroups=function(p,l){var n=this,k=new q.default;this.ownerGroups[p.owner]?
k.resolve():a.default.getProfile(p.owner,function(r){r=(r.groups||[]).map(function(w){return w.id});n.ownerGroups[p.owner]=r;k.resolve()},function(){k.resolve()});return k};v.itemCards=[];v.ownerGroups=[];return v}()})},"arcgisonline/sharing/dijit/dialog/ShareCheckDlg":function(){define(["dojo","dijit","dojox","dojo/require!dijit/Dialog,dijit/_Widget,dijit/_Templated,arcgisonline/sharing/util"],function(S,J,f){S.provide("arcgisonline.sharing.dijit.dialog.ShareCheckDlg");S.require("dijit.Dialog");
S.require("dijit._Widget");S.require("dijit._Templated");S.require("arcgisonline.sharing.util");S.declare("arcgisonline.sharing.dijit.dialog.ShareCheckDlg",[J._Widget,J._Templated],{widgetsInTemplate:!0,templateString:'\x3cdiv class\x3d"widgetContent"\x3e\r\n  \x3cdiv dojotype\x3d"dijit.Dialog" id\x3d"shareCheck-dialog" title\x3d"${i18n.shareChecksDlgTitle}" execute\x3d""\x3e\r\n    \x3cstyle type\x3d"text/css"\x3e\r\n      .esri .dojoxGridHeader .dojoxGridCellFocus, .esri .dojoxGridHeader .dojoxGridCell {\r\n        border-bottom: 1px solid #CCC;\r\n      }\r\n    \x3c/style\x3e\r\n    \x3cspan dojoAttachPoint\x3d"shareCheckTopMsg"\x3e\x3c/span\x3e\r\n    \x3cdiv dojotype\x3d"dijit.layout.BorderContainer" design\x3d"headline" gutters\x3d"false" style\x3d"width:100%; height:120px; margin:20px 0 10px 0;"\x3e\r\n      \x3cdiv dojoType\x3d"dijit.layout.ContentPane" dojoAttachPoint\x3d"shareCheckGrid" region\x3d"top" style\x3d"height:118px;"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cspan dojoAttachPoint\x3d"shareCheckBottomMsg"\x3e\x3c/span\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"editableLayerDiv" style\x3d"clear:both; display:none; background-color:rgba(240, 201, 206, 1); border:2px solid rgb(255, 0, 0); margin-top:10px; padding:8px;"\x3e\r\n      \x3cspan dojoAttachPoint\x3d"editableLayerMsg"\x3e\x3c/span\x3e\r\n      \x3ca dojoAttachPoint\x3d"editableLayerHelpLink" href\x3d"JavaScript:void(0);" dojoAttachEvent\x3d"onClick:onLearnHowClick"\x3e\x3c/a\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"clear:both;"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriFloatTrailing clearfix leader-1" style\x3d"padding-top:5px; padding-bottom:5px;"\x3e\r\n      \x3cbutton dojoAttachEvent\x3d"onClick:onCancelClick" dojoAttachPoint\x3d"exitButton" class\x3d"jevent cancel btn-two right" dojoType\x3d"dijit.form.Button"\x3e\r\n        ${i18n.cancel}\r\n      \x3c/button\x3e\r\n      \x3cbutton dojoAttachPoint\x3d"shareGridUpdateButton" dojoAttachEvent\x3d"onClick:onUpdateClick" class\x3d"jevent primary right" dojoType\x3d"dijit.form.Button"\x3e\r\n        ${i18n.UpdateSharingBtn}\r\n      \x3c/button\x3e\r\n      \x3cbutton dojoAttachPoint\x3d"shareGridOkButton" dojoAttachEvent\x3d"onClick:onCancelClick" class\x3d"jevent primary right" dojoType\x3d"dijit.form.Button" style\x3d"display:none;"\x3e\r\n        ${i18n.ok}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"clear:both;"\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
grid:null,gridId:"shareCheckGridNode",oneLayerMissingDataCollection:!1,oneLayerNotMissingDataCollection:!1,oneLayerNotEditable:!1,statics:{_instance:null,getInstance:function(){this._instance&&J.byId("shareCheckGridNode")&&J.byId("shareCheckGridNode").destroy();null==this._instance&&(this._instance=new arcgisonline.sharing.dijit.dialog.ShareCheckDlg);return this._instance}},postMixInProperties:function(){this.inherited(arguments);this.i18n=S.i18n.getLocalization("arcgisonline","arcgisonline").common;
S.mixin(this.i18n,S.i18n.getLocalization("arcgisonline","arcgisonline").myOrganization.creditsTab);S.mixin(this.i18n,S.i18n.getLocalization("arcgisonline","arcgisonline").shareCheckDlg)},show:function(c){var h=S.hitch(this,function(g,m,v){var p=!1,l=!1;if(("public"===g||"org"===g)&&void 0!==v.ownerFolder)return{userCanUpdate:!0,hasItemWithKnownGroupDetails:p,unknownGroupDetails:l};if("shared"===g)if(void 0!==v.ownerFolder){p=!0;g=this.info.itemsSharing[a]?this.info.itemsSharing[a].groups:[];v=arcgisonline.sharing.utilShare.ownerGroups[v.owner];
for(var n=0;n<m.length;n++)if(-1===S.indexOf(g,m[n])&&(!esri.isDefined(v)||esri.isDefined(v)&&-1<S.indexOf(v,m[n])))return{userCanUpdate:!0,hasItemWithKnownGroupDetails:p,unknownGroupDetails:l}}else l=!0;return{userCanUpdate:!1,hasItemWithKnownGroupDetails:p,unknownGroupDetails:l}});this.info=c;c=!1;var d=this.info.mainItemCard.access,b="Web Scene"===this.info.mainItemCard.type,a;for(a in this.info.itemCards){var e=this.info.itemCards[a],q=this.info.mainItemSharing?this.info.mainItemSharing.groups:
[];if(!1===e.needsUpdate){if(e.webMapInfo){for(var t in e.webMapInfo.itemCards){var u=h(d,q,e.webMapInfo.itemCards[t]);c=u.userCanUpdate;0-u.unknownGroupDetails;if(c)break}if(c)break}}else if(u=h(d,q,e),c=u.userCanUpdate,0-u.unknownGroupDetails,c)break}c?(this.shareCheckTopMsg.innerHTML=this.info.webMapId?b?this.i18n.textTopWebScene:this.i18n.textTopWebmap:this.i18n.textTopWebapp,this.shareCheckBottomMsg.innerHTML=this.info.webMapId?b?this.i18n.textBottomWebScene:this.i18n.textBottomWebmap:this.i18n.textBottomWebapp,
S.style(this.exitButton.domNode,"display",""),S.style(this.shareGridUpdateButton.domNode,"display",""),S.style(this.shareGridOkButton.domNode,"display","none")):(this.shareCheckTopMsg.innerHTML=this.info.webMapId?b?this.i18n.textTopWebScene:this.i18n.textTopWebmap:this.i18n.textTopWebapp,this.shareCheckBottomMsg.innerHTML="",S.style(this.exitButton.domNode,"display","none"),S.style(this.shareGridUpdateButton.domNode,"display","none"),S.style(this.shareGridOkButton.domNode,"display",""));this.oneLayerMissingDataCollection=
this.oneLayerNotMissingDataCollection=this.oneLayerNotEditable=!1;this.editableLayerMsg.innerHTML="";S.style(this.editableLayerDiv,"display","none");this.checkEditableLayers();J.byId("shareCheck-dialog").show()},displayLayers:function(){var c=S.create("table",{border:"1",style:"width: 100%; height: 100%"},this.shareCheckItemsDiv),h=S.create("tbody",{},c);h=S.create("tr",{},h);S.create("span",{innerHTML:this.i18n.titleItem},S.create("td",{},h));S.create("span",{innerHTML:this.i18n.titleOwner},S.create("td",
{},h));for(var d in this.info.itemCards){var b=this.info.itemCards[d];h=S.create("tr",{},c);S.create("span",{innerHTML:b.title},S.create("td",{},h));S.create("span",{innerHTML:b.owner},S.create("td",{},h))}},checkEditableLayers:function(){var c=function(e,q){for(var t in e){var u=e[t];u&&!1!==u.needsUpdate&&"Feature Service"===u.type&&("admin"===u.itemControl||"update"===u.itemControl)&&-1<S.indexOf(u.typeKeywords,"Hosted Service")&&(q.push(arcgisonline.sharing.util.getJson(u.url+"/layers")),h.push(u))}};
if("public"===this.info.mainItemCard.access){var h=[],d=[];c(this.info.itemCards,d);for(var b in this.info.itemCards){var a=this.info.itemCards[b];a.webMapInfo&&c(a.webMapInfo.itemCards,d)}d.length?(new S.DeferredList(d)).addCallback(S.hitch(this,function(e){S.forEach(e,function(q,t){q[1].layers&&q[1].layers.length&&q[1].layers[0]&&-1<q[1].layers[0].capabilities.indexOf("Editing")?(q=h[t],q.isEditable=!0,this.editableLayerMsg.innerHTML="* "+this.i18n.layerIsEditable+" \x3cspan class\x3d'esriItemLinks' style\x3d'outline:none;'\x3e\x3cA href\x3d'"+
(esriGeowConfig.helpBase+esriGeowConfig.helpMap["120001293"])+"' target\x3d'_blank'\x3e"+this.i18n.learnHow+"\x3c/a\x3e\x3c/span\x3e",S.style(this.editableLayerDiv,"display",""),-1===S.indexOf(q.typeKeywords,"Public Data Collection")?(this.oneLayerMissingDataCollection=!0,q.missingDataCollection=!0):this.oneLayerNotMissingDataCollection=!0):this.oneLayerNotEditable=!0},this);this.oneLayerMissingDataCollection&&(this.editableLayerMsg.innerHTML=this.oneLayerNotMissingDataCollection?"* "+this.i18n.usePublicDataCollection+
"\x3c/br\x3e** "+this.i18n.layerIsEditable+"\x3c/br\x3e\x3cspan class\x3d'esriItemLinks' style\x3d'outline:none;'\x3e\x3cA href\x3d'"+(esriGeowConfig.helpBase+esriGeowConfig.helpMap["120001293"])+"' target\x3d'_blank'\x3e"+this.i18n.learnHow+"\x3c/a\x3e\x3c/span\x3e":"* "+this.i18n.usePublicDataCollection+" \x3cspan class\x3d'esriItemLinks' style\x3d'outline:none;'\x3e\x3cA href\x3d'"+(esriGeowConfig.helpBase+esriGeowConfig.helpMap["120001293"])+"' target\x3d'_blank'\x3e"+this.i18n.learnHow+"\x3c/a\x3e\x3c/span\x3e",
S.style(this.editableLayerDiv,"display",""),this.oneLayerNotMissingDataCollection||this.oneLayerNotEditable||(this.shareCheckBottomMsg.innerHTML="",S.style(this.exitButton.domNode,"display","none"),S.style(this.shareGridUpdateButton.domNode,"display","none"),S.style(this.shareGridOkButton.domNode,"display","")));this.createGrid()})):this.createGrid()}else this.createGrid()},createGrid:function(){var c=[[{name:this.i18n.titleLayer,field:"name",width:"320px"},{name:this.i18n.titleOwner,field:"owner",
width:"320px"}]],h=[],d;for(d in this.info.itemCards){var b=this.info.itemCards[d];if(!1!==b.needsUpdate){var a=b.isEditable&&"public"===this.info.mainItemCard.access,e=b.missingDataCollection,q="";if("admin"===b.itemControl||"update"===b.itemControl)if(this.oneLayerMissingDataCollection&&this.oneLayerNotMissingDataCollection)q=e?" *":" **";else if(this.oneLayerMissingDataCollection||this.oneLayerNotMissingDataCollection)if(e||a)q=" *";h.push({id:b.id,name:b.title+q,owner:b.owner})}if(b.webMapInfo)for(var t in b.webMapInfo.itemCards)q=
b.webMapInfo.itemCards[t],a=q.isEditable&&"public"===this.info.mainItemCard.access,e=q.missingDataCollection,h.push({id:q.id,name:q.title+(this.oneLayerMissingDataCollection&&e||!this.oneLayerMissingDataCollection&&a?" *":""),owner:q.owner})}this.memory=new S.store.Memory({data:h,idProperty:"id"});this.store=new S.data.ObjectStore({objectStore:this.memory});this.grid=new f.grid.DataGrid({store:this.store,structure:c,id:this.gridId,style:{border:"1px #CCC solid"},selectionMode:"none"},S.create("div",
null,this.shareCheckGrid.domNode));this.grid.startup();J.byId("shareCheck-dialog").resize();esri.isTouchEnabled&&(this.gridScrollBox=this.grid.views.views[0].scrollboxNode,esri.setScrollable(this.gridScrollBox))},updateSharing:function(){var c=this.info.mainItemCard.access,h=[];if("public"===c||"org"===c)for(var d in this.info.itemCards){if(c=this.info.itemCards[d],void 0===c.ownerFolder||!1===c.needsUpdate||c.missingDataCollection||h.push(this.shareItemByID(c)),c.webMapInfo)for(var b in c.webMapInfo.itemCards){var a=
c.webMapInfo.itemCards[b];void 0===a.ownerFolder||c.missingDataCollection||h.push(this.shareItemByID(a))}}else{var e=this.info.mainItemSharing?this.info.mainItemSharing.groups:[];h=[];for(d in this.info.itemCards){c=this.info.itemCards[d];if(void 0!==c.ownerFolder&&!1!==c.needsUpdate){var q="",t="",u=this.info.itemsSharing[d]?this.info.itemsSharing[d].groups:[],g=arcgisonline.sharing.utilShare.ownerGroups[c.owner];S.forEach(e,function(m){-1===S.indexOf(u,m)&&(!esri.isDefined(g)||esri.isDefined(g)&&
-1<S.indexOf(g,m))&&(q+=t+m,t=",")},this);q.length&&h.push(this.shareItemByID(c,q))}if(c.webMapInfo)for(b in c.webMapInfo.itemCards)a=c.webMapInfo.itemCards[b],void 0!==a.ownerFolder&&(t=q="",u=c.webMapInfo.itemsSharing[b]?c.webMapInfo.itemsSharing[b].groups:[],g=arcgisonline.sharing.utilShare.ownerGroups[a.owner],S.forEach(e,function(m){-1===S.indexOf(u,m)&&(!esri.isDefined(g)||esri.isDefined(g)&&-1<S.indexOf(g,m))&&(q+=t+m,t=",")},this),q.length&&h.push(this.shareItemByID(a,q)))}}h.length?(new S.DeferredList(h)).addCallback(S.hitch(this,
function(m){S.forEach(m,function(v){v=v[1];v.itemId&&delete arcgisonline.sharing.utilShare.itemCards[v.itemId]});setTimeout(function(){S.publish("onShareUpdate",null);S.publish("shareCheckDlg/update")},100);this.hide()})):this.hide()},shareItemByID:function(c,h){var d=this.info.mainItemCard.access;d={everyone:"public"===d,account:"org"===d||"org"===c.access,confirmItemControl:this.info&&this.info.confirmItemControl?!0:!1};h&&(d.groups=h);var b=new S.Deferred;arcgisonline.sharing.geow.Content.shareItemByID(c,
d,S.hitch(this,function(a){b.callback(a)}),S.hitch(this,function(a){b.errback(a)}));return b},onLearnHowClick:function(){},onUpdateClick:function(){this.updateSharing()},onCancelClick:function(){this.hide()},hide:function(){this.store.close();delete this.store;delete this.memory;this.grid.destroy();delete this.grid;this.grid=this.store=this.memory=null;J.byId("shareCheck-dialog").hide()}})})},"arcgisonline/pages/components/UpdateViewModal":function(){define("require exports tslib preact preact/hooks preact/compat arcgisonline/esriGeowConfig".split(" "),
function(S,J,f,c,h,d,b){Object.defineProperty(J,"__esModule",{value:!0});b=f.__importDefault(b);J.default=function(a){var e=a.title,q=a.itemId,t=a.hasDerivative,u=a.method,g=a.onClose,m=(0,h.useState)(!1);a=m[0];var v=m[1],p=(0,h.useRef)(null),l=function(n){if(null!==n&&void 0!==n&&n.data){var k=JSON.parse(n.data);n=k.type;k=k.value;"create"===n&&(null===k||void 0===k?0:k.id)?(window.location.href="item.html?id\x3d".concat(null===k||void 0===k?void 0:k.id),g()):"update"!==n&&"close"!==n||!k||g()}};
(0,h.useEffect)(function(){window.addEventListener("message",l);return function(){window.removeEventListener("message",l)}},[]);(0,h.useEffect)(function(){p.current&&v(!0)},[p.current]);q="".concat("join"===u?b.default.joinViewUrl:b.default.createViewUrl).concat(q).concat(t?"\x26hasDerivative\x3dtrue":"");return(0,c.h)(c.Fragment,null,(0,d.createPortal)((0,c.h)("calcite-modal",{ref:p,role:"dialog","aria-modal":"true","aria-lablledby":"update-view-modal-title",open:a,oncalciteModalClose:g,fullscreen:!0,
style:{"--calcite-modal-content-padding":"0"}},(0,c.h)("h3",{slot:"header",class:"font-size-2 trailer-0",id:"update-view-modal-title"},e),(0,c.h)("div",{slot:"content",class:"flex manage-areas"},a&&(0,c.h)("iframe",{class:"flex-1 manage-areas__iframe",src:q,tabIndex:0}))),document.body))}})},"arcgisonline/pages/dijit/MoveItem":function(){define("require exports tslib dojo/string dojo/Deferred dijit/_TemplatedMixin dijit/_WidgetBase ./Overlay ./OverlayConfirm ./ChangeOwner/FolderPicker ../utils/dom ../utils/alerts ../utils/arrays ../../sharing/util ../utils/icons ../../esriGeowConfig dojo/text!./ChangeOwner/templates/MoveItem.html dojo/i18n!../../nls/arcgisonline ../../tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);return function(){function r(w,x){this.title=n.default.itemProperties.moveToFolder;this.i18n=
n.default;this.icons=v.default;this.constrain=!0;this.overlayContents=c.default.substitute(l.default,{i18n:n.default,icons:v.default});this.maxWidth=600;this.loadingText=n.default.common.updating}r.prototype.postMixInProperties=function(){this.inherited(arguments)};r.prototype.postCreate=function(){this.inherited(arguments);this._loader=this.domNode.querySelector(".js-overlay-loader")};r.prototype.open=function(){this.inherited(arguments);this.initUI();this.addListeners()};r.prototype.close=function(w){this.inherited(arguments)};
r.prototype.handlePrimary=function(){var w=this,x;(null===(x=this._folderPicker)||void 0===x?0:x.hasUnsavedChanges())?this._folderPicker.saveNewfolder().then(function(D){w._folder=D;w.updateItems()},this.updateItems.bind(this)):this.updateItems()};r.prototype.addListeners=function(){this.own(this._folderPicker.on("selectUpdate",this.folderSelectUpdate.bind(this)))};r.prototype.initUI=function(){this._folderPicker=new q.default({portal:this.portal,user:this.owner,isMoveItem:!0,items:this.items},this.domNode.querySelector(".js-folder-picker"));
this.memberSelectUpdate(this.owner);this._primaryBtn.disabled=!0};r.prototype.fadeIn=function(){var w=this.domNode.querySelector(".js-change-owner-wrapper");this.domNode.querySelector(".js-change-owner-loader").classList.remove("is-active");w.classList.add("animate-fade-in");t.default.showNode(this._folderPicker.domNode);this._folderPicker.focus()};r.prototype.updateItems=function(){var w=this;this.moveItems(this.items).then(function(x){x=x.results||[];var D=x.filter(function(A){return A.success}).map(function(A){return A.item}),
G=x.filter(function(A){return A.error&&!A.success}),F=x.filter(function(A){return A.moveItems});0<F.length&&(F[0].results||[]).forEach(function(A){var y=g.default.find(w.items,function(z){return z.id===A.itemId});A.success?D.push({success:!0,item:y}):G.push({error:A.error,item:y})});0===G.length&&0<D.length?w.handleSuccess(D):0<G.length&&0===D.length?w.handleError(G[0]):0<G.length&&0<D.length&&w.handlePartialSuccess(D,G[0]);0===x.length&&w.handleSuccess()},this.handleError.bind(this))};r.prototype.moveItems=
function(w){this._loader.classList.add("is-active");var x=this._folder.username===this._folder.id?"/":this._folder.id,D=w.filter(function(F){return(F.ownerFolder||"/")!==x}),G=new h.default;0===D.length?G.resolve({moveItems:!0,results:[]}):m.default.request({url:"".concat(p.default.restBaseUrl,"content/users/").concat(this._owner.username,"/moveItems"),content:{items:D.map(function(F){return F.id}).join(","),folder:x}},{usePost:!0}).then(function(F){return G.resolve({moveItems:!0,results:F.results})},
function(F){return G.resolve({error:F,items:w})});return G};r.prototype.handleSuccess=function(w){this._loader.classList.remove("is-active");w={newOwner:this._owner,newFolder:this._folder,updatedItems:w};u.default.showAlert("success",n.default.itemProperties[1<this.items.length?"itemsMovedSuccess":"itemMovedSuccess"]);this.close(w)};r.prototype.handleError=function(w){var x,D=w.error,G=w.itemId;w=D;"CONT_0014"===D.messageCode?(D=null===(x=this.items.filter(function(F){return F.id===G}))||void 0===
x?void 0:x[0])&&(w=c.default.substitute(n.default.folderDlg.invalid.itemExists,[D.title,this._folder.folderAttributeName||this._folder.title])):500===D.code&&(w=n.default.folderDlg.invalid.itemDoesNotExist);this._loader.classList.remove("is-active");x=new e.default({title:n.default.common.errorTitle,description:this._folder?w:n.default.folderDlg.invalid.selectFolder,showActions:!1,cssClasses:"full-width text-constrain overlay-confirm-pane--error"});x.domNode.classList.add("position-absolute");x.domNode.classList.add("fullscreen");
this._overlay.appendChild(x.domNode);x.show()};r.prototype.handlePartialSuccess=function(w,x){var D,G=x.itemId;x=x.error;this._loader.classList.remove("is-active");w={newOwner:this._owner,updatedItems:w,error:x};var F=null===(D=this.items.filter(function(A){return A.id===G}))||void 0===D?void 0:D[0];u.default.showAlert("success",n.default.itemProperties[1<this.items.length?"itemsMovedSuccess":"itemMovedSuccess"]);"CONT_0014"===x.messageCode&&u.default.showAlert("error",c.default.substitute(n.default.folderDlg.invalid.itemExists,
[F.title,this._folder.folderAttributeName||this._folder.title]));w.newFolder=this._folder;this.close(w)};r.prototype.openFolderSelect=function(w){null===w||void 0===w?void 0:w.preventDefault();t.default.showNode(this._folderPicker.domNode);this._folderPicker.focus()};r.prototype.folderSelectUpdate=function(w){this._folder=w;this.populateCurrentFolder();this._primaryBtn.disabled=!1};r.prototype.memberSelectUpdate=function(w){var x=this;this._owner=w;this._folder=null;w.folders?(this.populateCurrentFolder(),
this._folderPicker.updateUser(w),this.openFolderSelect(),this.fadeIn()):w.getFolders().then(function(D){w.folders=D;x._owner.folders=D;x.populateCurrentFolder();x._folderPicker.updateUser(w);x.fadeIn()})};r.prototype.populateCurrentFolder=function(){if(!this._folder){var w=this.items[0].ownerFolder,x=this.items.every(function(G){return G.ownerFolder===w}),D=g.default.find(this._owner.folders,function(G){return G.id===w});this._folder=x&&D?D:this._owner.folders[0]}};return r=f.__decorate([(0,k.default)(b.default,
d.default,a.default)],r)}()})},"arcgisonline/pages/dijit/ReplaceLayer/ReplaceLayer":function(){define("require exports tslib dojo/text!../ReplaceLayer/templates/ReplaceLayer.html dojo/text!../../../img/Archive_no-text.svg dojo/text!../../../img/Replace_no-text.svg dojo/i18n!../../../nls/arcgisonline dojo/string dojo/dom-attr dojo/dom-construct dojo/query arcgisonline/pages/dijit/Overlay ../../utils/dom ../../utils/icons ../../serviceUtil arcgis-components/wrappers/ItemBrowser ../../portal/Portal esri/request arcgisonline/tsutils/declareDecorator arcgisonline/esriGeowConfig arcgisonline/map/core/sameSpatialReference arcgisonline/map/core/sameTilingScheme arcgisonline/map/layer/getServiceInfo ../../portal/PortalItem ../../../sharing/util ../../utils/alerts dojo/Deferred".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);D=f.__importDefault(D);
G=f.__importDefault(G);F=f.__importDefault(F);A=f.__importDefault(A);y=f.__importDefault(y);return function(){function z(B,C){this.title=b.default.replaceLayer.replaceLayer;this.i18n=b.default;this.icons=m.default;this.overlayContents=a.default.substitute(c.default,{i18n:this.i18n,icons:this.icons});this._showPreviewStylesTab=!0;this.compatibilityErrorCaught=this._replaceItemInformation=!1;this.isVectorTile=!0;this._currentStep=1;this.cacheTypeKeywords=""}z.prototype.postCreate=function(){var B=this,
C;this.inherited(arguments);this.type=this.item.type;this.isTile=this.item.types.includes("is-tile");this.isVectorTile=this.item.types.includes("is-vectorTile");this.isCacheContent=this.item.typeKeywords.includes("ExtractedCache");this.isOwner=this.user.id===this.item.owner;this.isCacheContent&&(this.isTile||this.isVectorTile)&&(this.cacheTypeKeywords=' AND typekeywords:("ExtractedCache" AND "Tiled" AND "'.concat(this.isTile?"Map Service":"Vector Tile Service",'")'));this._itemBrowserConfig={settings:{config:{layoutMode:"adjustable",
dialogTitle:b.default.replaceLayer.selectReplacementLayer,mainActionTitle:b.default.replaceLayer.select,usePrimaryButtonStyle:!1,enableMapAreaFilter:!1,onSelect:this.handleSelectItem.bind(this),baseSections:["myContent","myFavorites","myGroups","myOrganization"],allowedItemTypes:[this.type],singleItemSelect:!0,onBack:this.closeItemBrowser.bind(this),addQueryParameters:function(){return"owner:".concat(B.item.owner," ").concat(B.isCacheContent?"-":"",'typekeywords:"Hosted Service"').concat(B.cacheTypeKeywords,
" NOT id:").concat(B.item.id," ")},showSubResources:{}}},parameters:{section:this.isOwner?"myContent":"myOrganization",sort:{field:"modified",order:"desc"}}};this.telemetry=null===(C=this.page)||void 0===C?void 0:C.telemetry;this._stepperNextButton=this.domNode.querySelector(".js-stepper-next-btn");this._overlayHelpButton=this.domNode.querySelector(".overlay-help");this._stepperLinks=this.domNode.querySelectorAll(".js-step-link");this._selectLayerButton=this.domNode.querySelector(".js-replace-layer-select");
this._changeLayerButton=this.domNode.querySelector(".js-replace-lyr-change-lyr");this._archiveInputContainer=this.domNode.querySelector(".js-replace-lyr-edit-container");this._currentArchiveName=this.domNode.querySelector(".js-replace-lyr-current-arch-name");this._archiveInputName=this.domNode.querySelector(".js-replace-lyr-edit-name");this._archiveInputSave=this.domNode.querySelector(".js-replace-lyr-edit-save");this._archiveInputEdit=this.domNode.querySelector(".js-replace-lyr-current-arch-btn");
this._nameInputError=this.domNode.querySelector(".js-replace-name-input-error");this._nameAvailableError=this.domNode.querySelector(".js-replace-name-available-error");this._itemInformationSwitch=this.domNode.querySelector(".js-replace-lyr-replace-item-switch");this._changeLayerSummaryButton=this.domNode.querySelector(".js-replace-lyr-change-lyr-summary");this._changeLayerOptionButton=this.domNode.querySelector(".js-replace-lyr-change-option");this._availabilityNotice=this.domNode.querySelector(".js-replace-lyr-availabilty-notice");
this._closeAvailabilityNotice=this.domNode.querySelector(".js-replace-lyr-availabilty-notice-close");this._radioOptions=(0,t.default)("input[name\x3djs-replace-lyr-archive-option-radio]",this.domNode);this._archiveSvg=this.domNode.querySelector(".js-archive_svg");this._replaceSvg=this.domNode.querySelector(".js-replace_svg");this._shownPreviewStylesContent=this.domNode.querySelectorAll(".js-replace-lyr-show-preview-step");this._selectedLayerTitle=this.domNode.querySelectorAll(".js-replace-lyr-selected-lyr-name");
this._selectedLayerOwner=this.domNode.querySelectorAll(".js-replace-lyr-selected-owner");this._selectedLayerIcon=this.domNode.querySelectorAll(".js-replace-lyr-selected-icon");this._selectedLayerType=this.domNode.querySelectorAll(".js-replace-lyr-selected-type");this._currentLayerTitle=this.domNode.querySelector(".js-replace-lyr-current-lyr-name");this._currentLayerOwner=this.domNode.querySelector(".js-replace-lyr-current-owner");this._currentLayerIcon=this.domNode.querySelector(".js-replace-lyr-current-icon");
this._currentLayerType=this.domNode.querySelector(".js-replace-lyr-current-type");this._preSelectContainer=this.domNode.querySelector(".pre-select");this._postSelectContainer=this.domNode.querySelector(".post-select");this._checkStyles=this.domNode.querySelector(".js-replace-lyr-check-styles");this._checkStylesSuccess=this.domNode.querySelector(".js-replace-lyr-check-styles-success");this._checkStylesWarnings=this.domNode.querySelectorAll(".js-replace-lyr-check-styles-warning");this._selectedLayerContainer=
this.domNode.querySelector(".js-replace-lyr-selected-layer");this._replaceLayerErrorMessage=this.domNode.querySelector(".js-replace-lyr-error");this._replaceLayerPreviewContainer=this.domNode.querySelector(".js-replace-lyr-preview-container");this._styleDropdown=this.domNode.querySelector(".js-replace-lyr-style-layer-dropdown");this._replaceSingleStyle=this.domNode.querySelector(".js-replace-lyr-single-style");this._replaceMultipleStyles=this.domNode.querySelector(".js-replace-lyr-multiple-styles");
this._replaceSingleStyleLabel=this.domNode.querySelector(".js-replace-lyr-style-layer");this._archiveOptionLayerName=this.domNode.querySelector(".js-replace-lyr-new-layer-name");this._replaceItemInformationLabel=this.domNode.querySelector(".js-replace-lyr-replace-item-information");this._replaceOptionArchiveLabel=this.domNode.querySelector(".js-replace-lyr-archive-option");this._replaceOptionReplacementLabel=this.domNode.querySelector(".js-replace-lyr-replace-option")};z.prototype.addListeners=function(){var B=
this;this._stepperNextButton.addEventListener("click",this.handlePrimary.bind(this),!1);this._overlayHelpButton.addEventListener("click",this.handleHelp.bind(this),!1);for(var C=0;C<this._stepperLinks.length;C++)this._stepperLinks[C].addEventListener("click",this.onStepClick.bind(this));this._radioOptions.on("change",this.onOptionSelect.bind(this));this._selectLayerButton.addEventListener("click",this.openItemBrowser.bind(this));this._changeLayerButton.addEventListener("click",this.openItemBrowser.bind(this));
this._archiveInputName.addEventListener("input",this.handleArchiveInput.bind(this));this._archiveInputSave.addEventListener("click",this.handleArchiveSave.bind(this));this._archiveInputEdit.addEventListener("click",this.handleArchiveEdit.bind(this));this._itemInformationSwitch.addEventListener("click",this.handleReplaceItemInformationSwitch.bind(this));this._changeLayerSummaryButton.addEventListener("click",this.handleChangeLayerSummaryClick.bind(this));this._changeLayerOptionButton.addEventListener("click",
this.handleChangeOptionSummaryClick.bind(this));this._closeAvailabilityNotice.addEventListener("click",this.handleCloseNotice.bind(this));this._styleDropdown.addEventListener("change",this.handleLayerDropdownChange.bind(this));this._overlay.addEventListener("transitionend",function(H){"transform"===H.propertyName&&B._selectLayerButton.focus()})};z.prototype.open=function(){this.domNode.classList.add("overlay-stepper");q.default.place(this.domNode.querySelector(".js-stepper-headers"),this._overlayContentWrapper,
"before");q.default.place(this.domNode.querySelector(".js-step-bars"),this.domNode.querySelector(".js-stepper-headers"),"after");document.body.classList.add("stepper--open");this.initUI();this.inherited(arguments)};z.prototype.close=function(){this.inherited(arguments);this._itemBrowserContainer&&this._itemBrowserContainer.parentNode.removeChild(this._itemBrowserContainer);document.body.classList.remove("stepper--open")};z.prototype.initUI=function(){for(var B=this,C,H,E=1;4>=E;E++)this["_step"+E]=
this.domNode.querySelector(".js-step-"+E),this["_stepHeader"+E]=this.domNode.querySelector(".js-step-header-"+E),this["_stepBar"+E]=this.domNode.querySelector(".js-step-"+E+"-bar");this._selectedOption=this.getSelectedOption();this._archiveName=this.generateArchiveName();this._currentArchiveName.textContent=this._archiveName;this._archiveInputName.value=this._archiveName;this.setPrimaryBtnText(b.default.organizationInvite.step1Create.nextBtn);this._archiveSvg&&(this._archiveSvg.innerHTML=a.default.substitute(h.default,
{i18n:b.default}));this._replaceSvg&&(this._replaceSvg.innerHTML=a.default.substitute(d.default,{i18n:b.default}));g.default.showNode(this._overlayHelpButton);r.default.self.isPortal||g.default.showNode(this._availabilityNotice);this._relatedStyles=this.item.relatedItems.Service2Style_forward;if(!(0<(null===(C=this._relatedStyles)||void 0===C?void 0:C.length)))this._showPreviewStylesTab=!1,g.default.hideNodes(this._shownPreviewStylesContent);else if(null===(H=this._relatedStyles)||void 0===H?0:H[0])this._selectedBaseStyle=
this._relatedStyles[0],v.default.checkForResources(this._selectedBaseStyle).then(function(K){B._selectedBaseStyle.hasResources=K});this.item.serviceInfo||(0,D.default)(this.item.url,null,function(K){B.item.serviceInfo=K});this.createItemBrowser();this.addListeners();this.goToStep(1)};z.prototype.generateArchiveName=function(){function B(L){return 2>String(L).length?"0"+L:L}var C=new Date,H=C.getFullYear(),E=B(C.getMonth()+1),K=B(C.getDate()),I=B(C.getHours());C=B(C.getMinutes());H="".concat(H,"_").concat(E,
"_").concat(K,"_").concat(I,"_").concat(C);return"".concat(this.item.title,"_").concat(H)};z.prototype.replaceSpacesWithUnderscore=function(B){return B.replace(/\s/g,"_")};z.prototype.createItemBrowser=function(){var B=this;this._itemBrowserContainer||(this._itemBrowserContainer=document.createElement("div"),g.default.hideNode(this._itemBrowserContainer),document.body.appendChild(this._itemBrowserContainer),this.portal=new l.default(r.default.restBaseUrl),this.portal.signIn().then(function(){B._itemBrowser=
new p.ItemBrowserWrapper(B._itemBrowserContainer,{apiVersion:3,portal:B.portal,request:n.default,initialState:B._itemBrowserConfig})}))};z.prototype.openItemBrowser=function(){var B=this;this._itemBrowserContainer.querySelector(".mod__overlay-container").addEventListener("animationend",function(){B._itemBrowserContainer.querySelector(".mod__overlay__close").focus({preventScroll:!0})});g.default.isHidden(this._itemBrowserContainer)?g.default.showNode(this._itemBrowserContainer):this._itemBrowserContainer.querySelector("#item-browser-wrapper").children[0].classList.remove("hide")};
z.prototype.handleSelectItem=function(B){this._selectedReplacementItem=new G.default(f.__assign(f.__assign({},B[0]),{portal:this.portal}));this.initiateCompatibilityCheck();this.closeItemBrowser();for(B=0;B<this._selectedLayerTitle.length;B++)this._selectedLayerTitle[B].innerHTML=this._selectedReplacementItem.title,this._selectedLayerOwner[B].innerHTML=this._selectedReplacementItem.owner,this._selectedLayerOwner[B].href="".concat(r.default.baseUrl,"user.html?user\x3d").concat(this._selectedReplacementItem.owner),
this._selectedLayerIcon[B].src=this._selectedReplacementItem.iconUrl,this._selectedLayerType[B].innerHTML=this.getItemDisplayName(this._selectedReplacementItem)};z.prototype.initiateCompatibilityCheck=function(){var B=this;this._primaryBtn.disabled=!0;this._preSelectContainer.classList.add("hide");this._postSelectContainer.classList.remove("hide");this._selectedLayerContainer.classList.remove("stepper__content-pane-error");this._replaceLayerErrorMessage.classList.remove("is-active");g.default.hideNode(this._checkStylesSuccess);
g.default.hideNodes(this._checkStylesWarnings);g.default.showNode(this._checkStyles);this.item.canUpdate?(this.compatibilityErrorCaught=!1,this.checkLayerCompatibility().then(function(){B.checkForCompatibleStyles(B._selectedReplacementItem)},function(C){B.handleLayerSelectionError(C)})):(this._selectedLayerContainer.classList.add("stepper__content-pane-error"),this._replaceLayerErrorMessage.innerHTML=b.default.replaceLayer.error,g.default.activateNode(this._replaceLayerErrorMessage),g.default.hideNode(this._checkStylesSuccess),
g.default.hideNode(this._checkStyles))};z.prototype.checkLayerCompatibility=function(){var B=this,C=new y.default;(0,D.default)(this._selectedReplacementItem.url,null,function(H){-1<B._selectedReplacementItem.url.indexOf("://vectortileservices")?B._selectedReplacementItem.getRelatedItems(B.isCacheContent?"DataStore2ByRefService":"Service2Service","reverse").then(function(E){var K=b.default.replaceLayer.error,I=!0,L=(0,w.default)(B.item.serviceInfo.tileInfo.spatialReference,H.tileInfo.spatialReference),
M=B.item.serviceInfo.tileInfo.layerType===H.tileInfo.layerType;0<E.map(function(N){return N.type}).filter(function(N){return"Feature Service"===N}).length?K=b.default.replaceLayer.tileLayerPackageError:L||M?L?M?I=!1:K=b.default.replaceLayer.replaceSceneLayer.layerTypeError:K=b.default.replaceLayer.differentCoordinateSystem:K=b.default.replaceLayer.replaceSceneLayer.spatialLayerCombinedError;I?(B.compatibilityErrorCaught=!0,C.reject(Error(K))):C.resolve()}):B._selectedReplacementItem.getRelatedItems("Service2Service",
"reverse").then(function(E){var K;B.isTile&&"Feature Service"===(null===(K=E[0])||void 0===K?void 0:K.type)&&(B.compatibilityErrorCaught=!0,C.reject(Error(b.default.replaceLayer.hostedFeatureLayerError)));v.default.checkForResources(B.item).then(function(I){B.item.hasResources=I});v.default.checkForResources(B._selectedReplacementItem).then(function(I){B._selectedReplacementItem.hasResources=I});E=(0,x.default)(B.item.serviceInfo.tileInfo,H.tileInfo);(0,w.default)(B.item.serviceInfo.tileInfo.spatialReference,
H.tileInfo.spatialReference)&&E?C.resolve():(B.compatibilityErrorCaught=!0,C.reject(Error(b.default.replaceLayer.differentSchemeCombined)))})},function(H){B.handleLayerSelectionError(H)});return C};z.prototype.checkForCompatibleStyles=function(B){var C=this,H="".concat(B.url).concat(this.isVectorTile&&!B.url.includes("://vectortileservices")?"/resources/styles/root.json":"");B="".concat(this.item.url).concat(this.isVectorTile&&!this.item.url.includes("://vectortileservices")?"/resources/styles/root.json":
"");F.default.request({url:B,content:{f:"json"}}).then(function(E){C._baseItemJson=E;F.default.request({url:H,content:{f:"json"}}).then(function(K){C._replacementItemJson=K}).then(function(){var K=C._itemBrowserContainer.querySelector("#item-browser-wrapper").children[0].classList.contains("hide");!C.isVectorTile||C.compareLayers(C._baseItemJson.layers,C._replacementItemJson.layers)?(g.default.showNode(C._checkStylesSuccess),g.default.hideNodes(C._checkStylesWarnings),g.default.hideNode(C._checkStyles)):
(g.default.hideNode(C._checkStylesSuccess),g.default.showNodes(C._checkStylesWarnings),g.default.hideNode(C._checkStyles),K&&C._changeLayerButton.focus());C._primaryBtn.disabled=!1;K&&C._primaryBtn.focus()}).catch(function(K){C.handleLayerSelectionError(K)})})};z.prototype.isWebMercator=function(B){return 0<=[102113,102100,3857,3785].indexOf(B)};z.prototype.handleLayerSelectionError=function(B){var C;this._selectedLayerContainer.classList.add("stepper__content-pane-error");this.compatibilityErrorCaught||
(B.message=b.default.replaceLayer.error);this._replaceLayerErrorMessage.innerHTML=0<(null===(C=B.message)||void 0===C?void 0:C.length)?B.message:b.default.replaceLayer.error;g.default.activateNode(this._replaceLayerErrorMessage);g.default.hideNode(this._checkStylesSuccess);g.default.hideNode(this._checkStyles);this._changeLayerButton.focus()};z.prototype.compareLayers=function(B,C){var H=this,E=B.map(function(I){return H.isVectorTile?I.id:I.name}).sort(),K=C.map(function(I){return H.isVectorTile?
I.id:I.name}).sort();return E.every(function(I){return 0<=K.indexOf(I)})||K.every(function(I){return 0<=E.indexOf(I)})};z.prototype.closeItemBrowser=function(){this._itemBrowserContainer.querySelector("#item-browser-wrapper").children[0].classList.add("hide");g.default.isHidden(this._postSelectContainer)?this._selectLayerButton.focus():this._changeLayerButton.focus()};z.prototype.goToStep=function(B){var C=this;g.default.hideNode(this["_step"+this._currentStep]);this["_stepBar"+this._currentStep]&&
g.default.hideNode(this["_stepBar"+this._currentStep]);this._currentStep=B;for(var H=B-1;1<=H;H--)this["_stepHeader"+H].classList.remove("stepper__step-item--active"),this["_stepHeader"+H].classList.add("stepper__step-item--past"),this["_step"+H].parentNode.classList.add("stepper__content--past-step");for(H=B+1;4>=H;H++)this["_stepHeader"+H].classList.remove("stepper__step-item--past"),this["_stepHeader"+H].classList.remove("stepper__step-item--active"),this["_step"+H].parentNode.classList.remove("stepper__content--past-step");
g.default.showNode(this["_step"+this._currentStep]);(B=this.domNode.querySelector(".stepper__content--active-step"))&&B.classList.remove("stepper__content--active-step");this["_step"+this._currentStep].parentNode.classList.remove("stepper__content--past-step");this["_step"+this._currentStep].parentNode.classList.add("stepper__content--active-step");this["_stepHeader"+this._currentStep].classList.remove("stepper__step-item--past");this["_stepHeader"+this._currentStep].classList.add("stepper__step-item--active");
this["_stepBar"+this._currentStep]?(g.default.showNode(this["_stepBar"+this._currentStep]),this.domNode.classList.add("has-step-bar")):this.domNode.classList.remove("has-step-bar");g.default.hideNode(this.domNode.querySelector(".js-compile-error-icon"));this.setPrimaryBtnText(b.default.organizationInvite.step1Create.nextBtn);switch(this._currentStep){case 1:this._primaryBtn.disabled=!this._selectedReplacementItem;break;case 2:this.checkServiceNameAvailable(this._archiveName).then(function(E){E.available||
(C.handleArchiveNameValidationError("unavailable"),C.handleArchiveEdit())});this.alignSvgLabels();break;case 3:this.populateRelatedStyles();this._replaceLayerPreviewContainer.src=this.composePreviewPath();break;case 4:this.populateSummary(),this.setPrimaryBtnText(b.default.replaceLayer.replace)}};z.prototype.populateRelatedStyles=function(){var B=this;if(0!==this._relatedStyles.length)if(1<this._relatedStyles.length){for(;0<this._styleDropdown.options.length;)this._styleDropdown.remove(0);this._relatedStyles.forEach(function(C){C.option=
new Option(C.title);B._styleDropdown.add(C.option);v.default.checkForResources(C).then(function(H){return C.hasResources=H})});g.default.hideNode(this._replaceSingleStyle);g.default.showNode(this._replaceMultipleStyles)}else this._replaceSingleStyleLabel.textContent=this._relatedStyles[0].title,g.default.showNode(this._replaceSingleStyle),g.default.hideNode(this._replaceMultipleStyles)};z.prototype.alignSvgLabels=function(){var B,C,H;null===(B=this.domNode.querySelector(".archive-lyr-current-layer-svg"))||
void 0===B?void 0:B.setAttribute("text-anchor","rtl"===document.dir?"end":"start");null===(C=this.domNode.querySelector(".archive-lyr-archive-svg"))||void 0===C?void 0:C.setAttribute("text-anchor","rtl"===document.dir?"end":"start");null===(H=this.domNode.querySelector(".replace-lyr-current-layer-svg"))||void 0===H?void 0:H.setAttribute("text-anchor","rtl"===document.dir?"end":"start")};z.prototype.onStepClick=function(B){B=+e.default.get(B.target,"data-step-num");B<this._currentStep&&this.goToStep(B)};
z.prototype.onOptionSelect=function(){var B=this.getSelectedOptionContainer();this._selectedOption=this.getSelectedOption();for(var C=this.domNode.querySelectorAll(".stepper__radio-item"),H=0;H<C.length;H++)C[H].classList.remove("stepper__radio-item--selected");B.classList.add("stepper__radio-item--selected")};z.prototype.getSelectedOption=function(){var B;this._radioOptions.some(function(C){C.checked&&(B=C.value);return C.checked});return B};z.prototype.getSelectedOptionContainer=function(){var B=
this._radioOptions.filter(function(C){return C.checked})[0];return B?B.parentNode.parentNode:null};z.prototype.handleArchiveEdit=function(){this._primaryBtn.disabled=!0;g.default.showNode(this._archiveInputContainer);g.default.hideNode(this._archiveInputEdit);this._archiveInputName.focus()};z.prototype.handleArchiveInput=function(B){g.default.deactivateNode(this._nameInputError);g.default.deactivateNode(this._nameAvailableError);var C=/[.@#%&*+=\-\\';,\/|\\":<>\?]/g.test(B.target.value);0===B.target.value.length||
C?this.handleArchiveNameValidationError(C?"invalid":void 0):this._archiveInputSave.disabled=!1};z.prototype.handleArchiveSave=function(){var B=this,C=this._archiveInputName.value;this.checkServiceNameAvailable(this.replaceSpacesWithUnderscore(C)).then(function(H){H.available?B.saveArchiveName(C):B.handleArchiveNameValidationError("unavailable")})};z.prototype.saveArchiveName=function(B){this._archiveName=B;this._currentArchiveName.textContent=B;g.default.hideNode(this._archiveInputContainer);g.default.showNode(this._archiveInputEdit);
this._primaryBtn.disabled=!1};z.prototype.checkServiceNameAvailable=function(B){var C=r.default.self&&r.default.self.user&&(r.default.self.user.accountId||r.default.self.user.orgId);B={url:"".concat(r.default.portal.portalUrl,"portals/").concat(C,"/isServiceNameAvailable"),content:{name:B,type:"Vector Tile Service",f:"json"}};return F.default.request(B)};z.prototype.composePreviewPath=function(){var B="".concat(this._selectedBaseStyle.hasResources?this._selectedBaseStyle.itemUrl:this._selectedBaseStyle.url,
"/resources/styles/root.json");B=this._selectedBaseStyle.viewStyleUrl?this._selectedBaseStyle.viewStyleUrl:B;var C=this._selectedReplacementItem.viewUrl?this._selectedReplacementItem.viewUrl:this._selectedReplacementItem.url;return"".concat(r.default.vectorTileStylePreview,"?vtStyle\x3d").concat(B,"\x26vtLayer\x3d").concat(C).concat(this.isWebMercator(Number(this.item.serviceInfo.tileInfo.spatialReference.wkid))?"\x26basemap\x3dstreets-vector":"")};z.prototype.handleArchiveNameValidationError=function(B){this._archiveInputSave.disabled=
!0;switch(B){case "invalid":g.default.activateNode(this._nameInputError);break;case "unavailable":g.default.activateNode(this._nameAvailableError)}};z.prototype.handleReplaceItemInformationSwitch=function(){this._replaceItemInformation=this._itemInformationSwitch.checked};z.prototype.handleChangeLayerSummaryClick=function(){this.goToStep(1)};z.prototype.handleChangeOptionSummaryClick=function(){this.goToStep(2)};z.prototype.handleLayerDropdownChange=function(){this._selectedBaseStyle=this._relatedStyles.filter(function(B){return B.option.selected})[0];
this._replaceLayerPreviewContainer.src=this.composePreviewPath()};z.prototype.handlePrimary=function(B){var C=this;B.stopPropagation();B.preventDefault();2!==this._currentStep||this._showPreviewStylesTab?4<=this._currentStep?(this.close(),this.replaceLayer().then(function(){var H;null===(H=C.telemetry)||void 0===H?void 0:H.logEvent({category:"archive option",label:"archive"===C._selectedOption?"new layer":"swap"});A.default.showAlert("success",a.default.substitute(b.default.replaceLayer.layerReplaceSuccess,
{srcTitle:"\x3cb\x3e".concat(C.item.title,"\x3c/b\x3e")}),{textIncludesHTML:!0});setTimeout(function(){window.location.reload()},4E3)}).catch(function(H){A.default.showAlert("error",H)})):this.goToStep(this._currentStep+1):this.goToStep(4)};z.prototype.handleHelp=function(){var B;window.open("".concat(r.default.self.helpBase).concat((null===(B=r.default.self.helpMap)||void 0===B?void 0:B.m["120001792"])||""))};z.prototype.handleCloseNotice=function(B){g.default.hideNode(B.target.parentNode)};z.prototype.setPrimaryBtnText=
function(B){this._primaryBtn.innerHTML=B};z.prototype.getItemDisplayName=function(B){return"Vector Tile Service"===B.type?b.default.items.tileLayer:B.displayName};z.prototype.populateSummary=function(){this._currentLayerTitle.innerHTML=this.item.title;this._currentLayerOwner.innerHTML=this.item.owner;this._currentLayerOwner.href="".concat(r.default.baseUrl,"user.html?user\x3d").concat(this.item.owner);this._currentLayerIcon.src=this.item.iconUrl;this._currentLayerType.innerHTML=this.getItemDisplayName(this.item);
"archive"===this._selectedOption?(this._archiveOptionLayerName.innerHTML=this.replaceSpacesWithUnderscore(this._archiveName),g.default.showNode(this._replaceOptionArchiveLabel),g.default.hideNode(this._replaceOptionReplacementLabel)):(g.default.showNode(this._replaceOptionReplacementLabel),g.default.hideNode(this._replaceOptionArchiveLabel));this._replaceItemInformation?g.default.showNode(this._replaceItemInformationLabel):g.default.hideNode(this._replaceItemInformationLabel)};z.prototype.replaceLayer=
function(){var B="archive"===this._selectedOption?{toReplaceItemId:this.item.id,replacementItemId:this._selectedReplacementItem.id,replacedServiceName:this.replaceSpacesWithUnderscore(this._archiveName),replaceMetadata:this._replaceItemInformation,createNewItem:!0,f:"json"}:{toReplaceItemId:this.item.id,replacementItemId:this._selectedReplacementItem.id,replacedServiceName:this.replaceSpacesWithUnderscore(this._selectedReplacementItem.title),replaceMetadata:this._replaceItemInformation,f:"json"};
return F.default.request({url:"".concat(this.portal.portalUrl,"content/users/").concat(this.portal.user.username,"/replaceService"),content:B},{usePost:!0})};return z=f.__decorate([(0,k.default)(u.default)],z)}()})},"arcgis-components/wrappers/ItemBrowser":function(){define("../Component dojo/i18n!../ItemBrowser/nls/resources dojo/Deferred dojo/promise/all dojo/_base/kernel ../ItemBrowser/index".split(" "),function(S,J,f,c,h,d){return function(b){function a(q){if(e[q])return e[q].exports;var t=e[q]=
{i:q,l:!1,exports:{}};return b[q].call(t.exports,t,t.exports,a),t.l=!0,t.exports}var e={};return a.m=b,a.c=e,a.d=function(q,t,u){a.o(q,t)||Object.defineProperty(q,t,{enumerable:!0,get:u})},a.r=function(q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(q,Symbol.toStringTag,{value:"Module"});Object.defineProperty(q,"__esModule",{value:!0})},a.t=function(q,t){if((1&t&&(q=a(q)),8&t)||4&t&&"object"==typeof q&&q&&q.__esModule)return q;var u=Object.create(null);if(a.r(u),Object.defineProperty(u,
"default",{enumerable:!0,value:q}),2&t&&"string"!=typeof q)for(var g in q)a.d(u,g,function(m){return q[m]}.bind(null,g));return u},a.n=function(q){var t=q&&q.__esModule?function(){return q.default}:function(){return q};return a.d(t,"a",t),t},a.o=function(q,t){return Object.prototype.hasOwnProperty.call(q,t)},a.p="",a(a.s=946)}({1:function(b,a,e){function q(n,k){function r(){this.constructor=n}if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");
p(n,k);n.prototype=null===k?Object.create(k):(r.prototype=k.prototype,new r)}function t(n,k){var r={},w;for(w in n)Object.prototype.hasOwnProperty.call(n,w)&&0>k.indexOf(w)&&(r[w]=n[w]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var x=0;for(w=Object.getOwnPropertySymbols(n);x<w.length;x++)0>k.indexOf(w[x])&&Object.prototype.propertyIsEnumerable.call(n,w[x])&&(r[w[x]]=n[w[x]])}return r}function u(n,k,r,w){var x,D=arguments.length,G=3>D?k:null===w?w=Object.getOwnPropertyDescriptor(k,
r):w;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)G=Reflect.decorate(n,k,r,w);else for(var F=n.length-1;0<=F;F--)(x=n[F])&&(G=(3>D?x(G):3<D?x(k,r,G):x(k,r))||G);return 3<D&&G&&Object.defineProperty(k,r,G),G}function g(n,k,r,w){return new (r||(r=Promise))(function(x,D){function G(y){try{A(w.next(y))}catch(z){D(z)}}function F(y){try{A(w.throw(y))}catch(z){D(z)}}function A(y){var z;y.done?x(y.value):(z=y.value,z instanceof r?z:new r(function(B){B(z)})).then(G,F)}A((w=w.apply(n,k||
[])).next())})}function m(n,k){function r(A){return function(y){return function(z){if(w)throw new TypeError("Generator is already executing.");for(;G&&(G=0,z[0]&&(F=0)),F;)try{if(w=1,x&&(D=2&z[0]?x.return:z[0]?x.throw||((D=x.return)&&D.call(x),0):x.next)&&!(D=D.call(x,z[1])).done)return D;switch(x=0,D&&(z=[2&z[0],D.value]),z[0]){case 0:case 1:D=z;break;case 4:return F.label++,{value:z[1],done:!1};case 5:F.label++;x=z[1];z=[0];continue;case 7:z=F.ops.pop();F.trys.pop();continue;default:if(!(D=F.trys,
(D=0<D.length&&D[D.length-1])||6!==z[0]&&2!==z[0])){F=0;continue}if(3===z[0]&&(!D||z[1]>D[0]&&z[1]<D[3]))F.label=z[1];else if(6===z[0]&&F.label<D[1])F.label=D[1],D=z;else if(D&&F.label<D[2])F.label=D[2],F.ops.push(z);else{D[2]&&F.ops.pop();F.trys.pop();continue}}z=k.call(n,F)}catch(B){z=[6,B],x=0}finally{w=D=0}if(5&z[0])throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}([A,y])}}var w,x,D,G,F={label:0,sent:function(){if(1&D[0])throw D[1];return D[1]},trys:[],ops:[]};return G={next:r(0),throw:r(1),
return:r(2)},"function"==typeof Symbol&&(G[Symbol.iterator]=function(){return this}),G}function v(n,k,r){if(r||2===arguments.length)for(var w,x=0,D=k.length;x<D;x++)!w&&x in k||(w||(w=Array.prototype.slice.call(k,0,x)),w[x]=k[x]);return n.concat(w||Array.prototype.slice.call(k))}e.d(a,"d",function(){return q});e.d(a,"a",function(){return l});e.d(a,"f",function(){return t});e.d(a,"c",function(){return u});e.d(a,"b",function(){return g});e.d(a,"e",function(){return m});e.d(a,"g",function(){return v});
var p=function(n,k){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,w){r.__proto__=w}||function(r,w){for(var x in w)Object.prototype.hasOwnProperty.call(w,x)&&(r[x]=w[x])})(n,k)},l=function(){return(l=Object.assign||function(n){for(var k,r=1,w=arguments.length;r<w;r++)for(var x in k=arguments[r])Object.prototype.hasOwnProperty.call(k,x)&&(n[x]=k[x]);return n}).apply(this,arguments)};Object.create;Object.create},114:function(b,a,e){e.d(a,"a",function(){return t});var q=e(1);
b=e(15);var t=Object(b.a)(function(u,g){var m=Object(q.a),v=Object(q.a)({},g),p=g.type;g=g.typeKeywords?g.typeKeywords:[];var l=null==p?void 0:p.toLowerCase(),n=p=!1,k=!1,r=!1;if("ogcfeatureserver"===l)g="featureshosted";else if(0<(null==l?void 0:l.indexOf("service"))||"feature collection"===l||"kml"===l||"wms"===l||"wmts"===l||"wfs"===l){var w=-1<g.indexOf("Hosted Service");"feature service"===l||"feature collection"===l||"kml"===l||"wfs"===l?(r=-1<g.indexOf("Table"),p=-1<g.indexOf("Route Layer"),
n=-1<g.indexOf("Markup"),g=(k=-1!==g.indexOf("Spatiotemporal"))&&r?"spatiotemporaltable":r?"table":p?"routelayer":n?"markup":k?"spatiotemporal":w?"featureshosted":"features"):"map service"===l||"wms"===l||"wmts"===l?g=w||-1<g.indexOf("Tiled")||"wmts"===l?"maptiles":"mapimages":"scene service"===l?g=-1<g.indexOf("Line")?"sceneweblayerline":-1<g.indexOf("3DObject")?"sceneweblayermultipatch":-1<g.indexOf("Point")?"sceneweblayerpoint":-1<g.indexOf("IntegratedMesh")?"sceneweblayermesh":-1<g.indexOf("PointCloud")?
"sceneweblayerpointcloud":-1<g.indexOf("Polygon")?"sceneweblayerpolygon":-1<g.indexOf("Building")?"sceneweblayerbuilding":-1<g.indexOf("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===l?(p=-1<g.indexOf("Elevation 3D Layer"),g=-1<g.indexOf("Tiled Imagery"),g=p?"elevationlayer":g?"tiledimagerylayer":"imagery"):g="stream service"===l?"streamlayer":"vector tile service"===l?"vectortile":"datastore catalog service"===l?"datastorecollection":"geocoding service"===l?"geocodeservice":"geoprocessing service"===
l&&-1<g.indexOf("Web Tool")?"tool":"layers"}else g="web map"===l||"cityengine web scene"===l?"maps":"web scene"===l?-1<g.indexOf("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===l&&-1<(null==g?void 0:g.indexOf("configurableApp"))?"instantapps":"web mapping application"===l||"mobile application"===l||"application"===l||"operation view"===l||"desktop application"===l?"apps":"map document"===l||"map package"===l||"published map"===l||"scene document"===l||"globe document"===
l||"basemap package"===l||"mobile basemap package"===l||"mobile map package"===l||"project package"===l||"project template"===l||"pro map"===l||"layout"===l||"layer"===l&&-1<g.indexOf("ArcGIS Pro")||"explorer map"===l&&-1<g.indexOf("Explorer Document")?"mapsgray":"service definition"===l||"csv"===l||"administrative report"===l||"shapefile"===l||"cad drawing"===l||"geojson"===l||"360 vr experience"===l||"netcdf"===l?"datafiles":"explorer add in"===l||"desktop add in"===l||"windows viewer add in"===
l||"windows viewer configuration"===l?"appsgray":"arcgis pro add in"===l||"arcgis pro configuration"===l?"addindesktop":"rule package"===l||"file geodatabase"===l||"csv collection"===l||"kml collection"===l||"windows mobile package"===l||"map template"===l||"desktop application template"===l||"arcpad package"===l||"code sample"===l||"form"===l||"document link"===l||"vector tile package"===l||"operations dashboard add in"===l||"rules package"===l||"image"===l||"workflow manager package"===l||"explorer map"===
l&&-1<g.indexOf("Explorer Mapping Application")||-1<g.indexOf("Document")?"datafilesgray":"network analysis service"===l||"geoprocessing service"===l||"geodata service"===l||"geometry service"===l||"geoprocessing package"===l||"locator package"===l||"geoprocessing sample"===l||"workflow manager service"===l||"raster function template"===l||"deep learning package"===l?"toolsgray":"layer"===l||"layer package"===l||"explorer layer"===l?"layersgray":"scene package"===l?"scenepackage":"tile package"===
l?"tilepackage":"storymap"===l?"storymap":"storymap theme"===l?"storymaptheme":"web experience"===l?"experiencebuilder":"web experience template"===l?"webexperiencetemplate":"task file"===l?"taskfile":"report template"===l?"report-template":"statistical data collection"===l?"statisticaldatacollection":"insights workbook"===l?"workbook":"insights model"===l?"insightsmodel":"insights page"===l?"insightspage":"hub initiative"===l?"hubinitiative":"hub page"===l?"hubpage":"hub site application"===l?"hubsite":
"relational database connection"===l?"relationaldatabaseconnection":"big data file share"===l||"data store"===l?"datastorecollection":"image collection"===l?"imagecollection":"desktop style"===l?"desktopstyle":"style"===l?"style":"dashboard"===l?"dashboard":"feed"===l?"feed":"real time analytic"===l?"realtimeanalytics":"big data analytic"===l?"bigdataanalytics":"notebook"===l?"notebook":"notebook code snippets"===l||"notebook code snippet library"===l?"notebookcodesnippets":"maps";u="".concat(u,"/").concat(g).concat(16,
".png");return m(v,{iconURI:u})})},117:function(b,a,e){e.d(a,"a",function(){return t});var q=e(1);b=e(15);var t=Object(b.a)(function(u,g){var m=Object(q.a),v=Object(q.a)({},g),p,l,n,k="notebook"!==(null===(p=g.type)||void 0===p?void 0:p.toLowerCase())?"default_thumb.png":"notebook-thumb.png";"notebook code snippets"!==(null===(l=g.type)||void 0===l?void 0:l.toLowerCase())&&"notebook code snippet library"!==(null===(n=g.type)||void 0===n?void 0:n.toLowerCase())||(k="notebook-code-snippet-thumb.png");
p="".concat(u.baseUrl,"/home/js/arcgisonline/css/images/").concat(k);u=(g.thumbnail&&(p="".concat(u.restUrl,"/content/items/").concat(g.id,"/info/").concat(g.thumbnail).concat(u.credential?"?token\x3d".concat(u.credential.token):"")),p);return m(v,{thumbURI:u})})},118:function(b,a,e){e.d(a,"a",function(){return u});var q=e(1);b=e(15);var t=function(g,m){return m.description?m.description.replace(/src=('|")js\/jsapi\/esri\//g,function(v){return"src\x3d".concat('"'===v[4]?'"':"'").concat(g.baseUrl,
"/home/js/jsapi/esri/")}):void 0},u=Object(b.a)(function(g,m){return Object(q.a)(Object(q.a)({},m),{patchedDescription:t(g,m)})})},119:function(b,a,e){e.d(a,"a",function(){return g});var q=e(1),t=e(121);b=e(15);var u=e(61),g=Object(b.a)(function(m,v){var p=Object(q.a),l=Object(q.a)({},v),n,k=v.type,r=v.typeKeywords||[],w=k;m=(null==m?void 0:m.portalUser)||(null==m?void 0:m.user);if("Feature Service"===k||"Feature Collection"===k){if(w=-1<r.indexOf("Table")?"Table":-1<r.indexOf("Route Layer")?"Route Layer":
-1<r.indexOf("Markup")?"Markup":"Feature Layer",m&&Object(u.d)(v,m)&&-1<(null==r?void 0:r.indexOf("Hosted Service")))r=(null===(n=null===document||void 0===document?void 0:document.documentElement)||void 0===n?void 0:n.lang)||"en",n=t.a[r]||t.a[r.split("-")[0]]||t.a.en,w="".concat(w," (").concat(n,")")}else"Image Service"===k?(w=-1<r.indexOf("Elevation 3D Layer"),n=-1<r.indexOf("Tiled Imagery"),w=w?"Elevation Layer":n?"Tiled Imagery Layer":"Imagery Layer"):"Scene Service"===k?w="Scene Layer":"Scene Package"===
k?w="Scene Layer Package":"Stream Service"===k?w="Feature Layer":"Geocoding Service"===k?w="Locator":"Microsoft Powerpoint"===k?w="Microsoft PowerPoint":"OGCFeatureServer"===k?w="OGC Feature Layer":"GeoJson"===k?w="GeoJSON":"Globe Service"===k?w="Globe Layer":"Vector Tile Service"===k?w="Tile Layer":"netCDF"===k?w="NetCDF":"Map Service"===k?w=-1===r.indexOf("Spatiotemporal")&&(-1<r.indexOf("Hosted Service")||-1<r.indexOf("Tiled"))?"Tile Layer":"Map Image Layer":k&&-1<k.toLowerCase().indexOf("add in")?
w=k.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===k?w="Big Data File Share":"Web Mapping Application"===k&&(null==r?0:r.includes("configurableApp"))?w="Instant App":"Data Store"===k&&(r.includes("cloudStore_amazon")||r.includes("cloudStore_azure")?w+=" (Cloud)":(r.includes("fileShare")||r.includes("hdfs")||r.includes("hive")||r.includes("bigDataFileShare")&&r.includes("dataStore"))&&(w+=" (Big Data File Share)"));return p(l,{displayName:w})})},120:function(b,a,e){e.d(a,"a",function(){return u});
var q=e(1);b=e(15);var t=function(g,m){var v,p,l=[],n=null!==(p=null!==(v=g.typeKeywords)&&void 0!==v?v:g.typekeywords)&&void 0!==p?p:[];return g.contentStatus&&("org_authoritative"===g.contentStatus||"public_authoritative"===g.contentStatus?l.push("authoritative"):"deprecated"===g.contentStatus&&l.push("deprecated")),g.origin&&l.push("collaboration"),g.groupDesignations&&-1<g.groupDesignations.indexOf("livingatlas")&&l.push("livingAtlas"),-1<n.indexOf("Requires Credits")?l.push("premium"):-1<n.indexOf("Requires Subscription")&&
l.push("subscriber"),-1<n.indexOf("Public Data Collection")&&((null==m?void 0:m.portalUser)||(null==m?void 0:m.user))&&l.push("publicDataCollection"),"Solution"===g.type&&-1<n.indexOf("ArcGIS Solution")&&l.push("solution"),m.isPortal&&"Web Mapping Application"===g.type&&(-1<n.indexOf("Story Map")&&l.push("retiredStoryMap"),function(k){return"3DInsetMap 3DScene 3DViz AttachmentViewer CapacityAnalysis Compare/storytelling_compare Compare/storytelling_tabbed Compare/storytelling_sidepanel Compare/Multiviewer Compare/Search Compare/Configure Compare/SideBySideViewer_Configure Compare3d CompareAnalysis CompareMaps Directions Edit Editor Elevations ElevationsProfile Embed Filter FilterGallery GeoList GeoTour HeaderFooter Identify ImageInterpretation ImageryViewer ImpactSummary InformationLookup InteractiveFilter InteractiveLegend LayerShowcase Legend LiveMaps LocalPerspective MapAndAppGallery MapCarousel MapTools Media MinimalGallery Minimalist Nearby OnePane Panels PanelsLegend Profile PublicGallery PublicInformation ServiceLookup SimpleMapViewer SimpleViewer SocialMedia Solutions/s2.html?app\x3dapps2/FindEditFilter Solutions/s2.html?app\x3dapps2/Finder StorytellingTextLegend StoryMapBasic Styler SummaryViewer Time TimeAware TwoPane Viewer ZoneLookup".split(" ").some(function(r){var w,
x=-1<r.indexOf(".html");r="/apps/".concat(r).concat(x?"":"/");return-1<(null===(w=k.url)||void 0===w?void 0:w.indexOf(r))})}(g)&&l.push("retiredApp")),-1<n.indexOf("Registered App")&&"API Key"!==g.type&&l.push("registered"),l},u=Object(b.a)(function(g,m){return Object(q.a)(Object(q.a)({},m),{badges:t(m,g)})})},121:function(b,a,e){e.d(a,"a",function(){return q});var q={ar:"\u0645\u0633\u062a\u0636\u0627\u0641",bs:"hostirano",ca:"allotjat",cs:"hostovan\u00e1 polo\u017eka",da:"hostede",de:"gehostet",
el:"hosted",en:"hosted",es:"alojado",et:"majutatud",fi:"is\u00e4nn\u00f6ity",fr:"h\u00e9berg\u00e9",he:"\u05de\u05ea\u05d0\u05e8\u05d7",hr:"hostirano",hu:"t\u00e1rolt",id:"di-host",it:"ospitati",ja:"\u30db\u30b9\u30c8",ko:"\ud638\uc2a4\ud305",lt:"talpinamas",lv:"viesots",nl:"gehoste",nb:"hostet",pl:"hostowane","pt-br":"hospedado","pt-pt":"alojados",ro:"g\u0103zduite",ru:"\u0440\u0430\u0437\u043c\u0435\u0449\u0435\u043d\u043d\u044b\u0439",sl:"gostujo\u010di",sk:"hostil",sr:"hostovani",sv:"driftade",
th:"\u0e2b\u0e25\u0e31\u0e01",tr:"bar\u0131nd\u0131r\u0131lan",uk:"\u0440\u043e\u0437\u043c\u0456\u0449\u0435\u043d\u0438\u0439 \u043d\u0430 \u0445\u043e\u0441\u0442\u0456",vi:"\u0111\u01b0\u1ee3c l\u01b0u tr\u1eef","zh-cn":"\u6258\u7ba1","zh-hk":"\u8a17\u7ba1","zh-tw":"\u8a17\u7ba1"}},123:function(b,a,e){function q(g){var m=Object(t.b)(g.settings.config.customSections,g.parameters.section);return(null==m?0:m.portal)?Object(u.b)(m.portal):g.settings.utils.portal}e.d(a,"a",function(){return q});var t=
e(92),u=e(99)},137:function(b,a,e){e.d(a,"b",function(){return q});e.d(a,"a",function(){return t});var q={maps:'(type:("Project Package" OR "Windows Mobile Package" OR "Map Package" OR "Basemap Package" OR "Mobile Basemap Package" OR "Mobile Map Package" OR "Pro Map" OR "Project Package" OR "Web Map" OR "CityEngine Web Scene" OR "Map Document" OR "Globe Document" OR "Scene Document" OR "Published Map" OR "Explorer Map" OR "ArcPad Package" OR "Map Template") -type:("Web Mapping Application" OR "Layer Package"))',
webMaps:'(type:("Web Map" OR "CityEngine Web Scene") -type:("Web Mapping Application"))',mapFiles:'(type:("Map Document" OR "Windows Mobile Package" OR "Globe Document" OR "Scene Document" OR "Published Map" OR "Explorer Map" OR "ArcPad Package" OR "Map Package" OR "Basemap Package" OR "Mobile Basemap Package" OR "Mobile Map Package" OR "Pro Map" OR "Project Package" OR "Map Template"))',layers:'(type:("OGCFeatureServer" OR "Scene Service" OR "Feature Collection" OR "Route Layer" OR "Layer" OR "Explorer Layer" OR "Tile Package" OR "Vector Tile Package" OR "Scene Package" OR "Layer Package" OR "Feature Service" OR "Stream Service" OR "Map Service" OR "Vector Tile Service" OR "Image Service" OR "WMS" OR "WFS" OR "Feed" OR "WMTS" OR "KML" OR typekeywords:"OGC" OR typekeywords:"Geodata Service" OR "Globe Service" OR "CSV" OR "Shapefile" OR "GeoJson" OR "Service Definition" OR "File Geodatabase" OR "CAD Drawing" OR "Relational Database Connection") -type:("Web Mapping Application" OR "Geodata Service"))',
featureLayers:'(type:("Feature Collection" OR "Feature Service" OR "Stream Service" OR "WFS" OR "Feed" OR "OGCFeatureServer") -typekeywords:"Table")',tileLayers:'(type:("WMTS" OR "Map Service" OR "Vector Tile Service") typekeywords:("Hosted" OR "Tiled"))',mapImageLayers:'(type:("Map Service" OR "WMS") -typekeywords:("Tiled") -type:("Web Map" OR "Web Mapping Application" OR "Shapefile"))',imageryLayers:'(type:"Image Service")',sceneLayers:'(type:"Scene Service")',tiledImageLayers:'(type: "Image Service" typekeywords: "Tiled Imagery")',
elevationLayers:'(type: "Image Service" typekeywords: "Elevation 3D Layer")',tables:"(typekeywords:Table)",layerFiles:'(type:("Layer" OR "Explorer Layer" OR "Tile Package" OR "Vector Tile Package" OR "Scene Package" OR "Layer Package" OR "CSV" OR "Shapefile" OR "GeoJson" OR "Service Definition" OR "File Geodatabase" OR "CAD Drawing" OR "Microsoft Excel") -type:("Explorer Maps" OR "Map Documents"))',scenes:'(-type:"CityEngine Web Scene" type:"Web Scene")',apps:'(type:("Code Sample" OR "Web Mapping Application" OR "StoryMap" OR "Mobile Application" OR "Application" OR "Desktop Application Template" OR "Desktop Application" OR "Operation View" OR "Dashboard" OR "Operations Dashboard Extension" OR "Workforce Project" OR "Insights Workbook" OR "Insights Page" OR "Insights Model" OR "Hub Page" OR "Hub Initiative" OR "Hub Site Application" OR "Web Experience" OR "Web Experience Template" OR "Form"))',
webApps:'(type:("Web Mapping Application" OR "Dashboard"))',sites:'(type:("Hub Site Application" OR "Site Application"))',pages:'(type:("Hub Page" OR "Site Page"))',storyMaps:'(type:"StoryMap")',experienceApps:'(type:("Web Experience" OR "Web Experience Template"))',instantApps:'typekeywords:"configurableApp"',mobileApps:'(type:"Mobile Application")',desktopApps:'(type:"Desktop Application" -type:"Desktop Application Template")',geobimProjects:'type:("GeoBIM Project")',geobimApplications:'type:("GeoBIM Application")',
developerCredentials:'type:("Application" AND typekeywords:"Registered App") OR type:("API Key")',oauth:'type:("Application" AND typekeywords:"Registered App")',apiKey:'type:("API Key")',tools:'((typekeywords:"tool" OR type:"Raster function template" OR type:"Geodata Service" OR type:"Workflow Manager Package" OR type:"Rule Package" OR type:"Operations Dashboard Add In" OR type:"Workflow Manager Service" OR type:"ArcGIS Pro Configuration" OR (type:("Big Data Analytic" OR "Real Time Analytic")) OR (type:"Geoprocessing Service" AND typekeywords: "Web Tool")) -type:"KML")',
analytics:'(type:("Big Data Analytic" OR "Real Time Analytic"))',locators:'(type:("Geocoding Service" OR "Locator Package"))',geodatabaseAccess:'(type:"Geodata Service")',geometricOperations:'(type:"Geometry Service")',geoprocessingTasks:'(type:("Geoprocessing Service" OR "Geoprocessing Package" OR "Geoprocessing Sample"))',networkAnalysis:'(type:"Network Analysis Service")',files:'((typekeywords:"Document" OR type:"CSV" OR type: "Administrative Report" OR type:"Image" OR type:"Layout" OR type:"Desktop Style" OR type:"Project Template" OR type:"Report Template" OR type:"Statistical Data Collection" OR type:"360 VR Experience" OR type:"netCDF") -type:("Map Document" OR "Image Service" OR "Explorer Document" OR "Explorer Map" OR "Globe Document" OR "Scene Document" OR "Microsoft Excel"))',
documents:'(typekeywords:"Document" -type:"PDF")',images:'(type:("Image" OR "360 VR Experience") -type:"Image Service")',pdfs:'(type:"PDF")',csvs:'(type:"CSV")',reports:'(type: "Administrative Report")',webTools:'(type:"Geoprocessing Service" AND typekeywords: "Web Tool")',notebooks:'(type:("Notebook") OR typekeywords:("Notebook" OR "Jupyter Notebook"))',notebookSnippet:'(type:("Notebook Code Snippets" OR "Notebook Code Snippet Library"))',bigDataFileShares:'type:("Big Data File Share")',rasterFunctionTemplates:'type:("Raster function template")',
deepLearningPackages:'type:("Deep Learning Package")',solution:'type:("Solution")',knowledgeGraphs:'(type:"Knowledge Graph")'},t="Web Map;CityEngine Web Scene;Web Scene;360 VR Experience;Pro Map;Feature Service;Map Service;Image Service;KML;KML Collection;WFS;WMTS;Feature Collection;Feature Collection Template;Vector Tile Service;Scene Service;Relational Database Connection;Web Mapping Application;Mobile Application;Code Attachment;Operations Dashboard Add In;Native Application;Native Application Template;Native Application Installer;Workforce Project;Form;Insights Workbook;Insights Data Engineering Workbook;Insights Model;Insights Data Engineering Model;Insights Page;Dashboard;Hub Initiative;Hub Site Application;Hub Page;Site Application;Site Page;AppBuilder Widget Package;Symbol Set;Color Set;Shapefile;File Geodatabase;CSV;Administrative Report;CAD Drawing;Service Definition;Microsoft Word;Microsoft Powerpoint;Microsoft Excel;PDF;Image;Visio Document;iWork Keynote;iWork Pages;iWork Numbers;Report Template;Statistical Data Collection;Map Document;Map Package;Mobile Basemap Package;Mobile Map Package;Tile Package;Vector Tile Package;Project Package;Task File;ArcPad Package;Explorer Map;Globe Document;Scene Document;Published Map;Map Template;Windows Mobile Package;Pro Map;Layout;Project Template;Layer;Layer Package;Explorer Layer;Scene Package;Image Collection;Desktop Style;Geoprocessing Package;Geoprocessing Package (Pro version);Geoprocessing Sample;Locator Package;Rule Package;Raster function template;Deep Learning Package;ArcGIS Pro Configuration;Workflow Manager Package;Desktop Application;Desktop Application Template;Code Sample;Desktop Add In;Explorer Add In;ArcGIS Pro Add In;Geometry Service;Geocoding Service;Network Analysis Service;Geoprocessing Service;Workflow Manager Service;Big Data File Share;Web Tool;Notebook;Notebook Code Snippets;Notebook Code Snippet Library;Web Experience;Web Experience Template;Feed;Real Time Analytic;Big Data Analytic;OGCFeatureServer;Solution;Knowledge Graph;API Key".split(";")},
142:function(b,a,e){e.d(a,"a",function(){return t});var q=e(1);b=e(15);var t=Object(b.a)(function(u,g){var m=Object(q.a),v=Object(q.a)({},g);u=g.thumbnail?"".concat(u.restUrl,"/community/users/").concat(g.username,"/info/").concat(g.thumbnail).concat(u.credential?"?token\x3d".concat(u.credential.token):""):void 0;return m(v,{thumbURI:u})})},143:function(b,a){b.exports=h},15:function(b,a,e){function q(u){return function m(){for(var v=this,p=[],l=0;l<arguments.length;l++)p[l]=arguments[l];return p.length>=
u.length?u.call.apply(u,Object(t.g)([this],p,!1)):function(){for(var n=[],k=0;k<arguments.length;k++)n[k]=arguments[k];return m.call.apply(m,Object(t.g)(Object(t.g)([v],p,!1),n,!1))}}}e.d(a,"a",function(){return q});var t=e(1)},165:function(b,a){a=function(){return this}();try{a=a||(new Function("return this"))()}catch(e){"object"==typeof window&&(a=window)}b.exports=a},168:function(b,a,e){e.d(a,"a",function(){return m});e.d(a,"c",function(){return v});e.d(a,"b",function(){return p});e.d(a,"d",function(){return l});
e.d(a,"h",function(){return n});e.d(a,"i",function(){return k});e.d(a,"j",function(){return r});e.d(a,"e",function(){return w});e.d(a,"g",function(){return x});e.d(a,"f",function(){return D});e.d(a,"l",function(){return G});e.d(a,"k",function(){return A});e.d(a,"m",function(){return y});b=e(65);var q=e.n(b);b=e(60);var t=e.n(b),u=e(33),g=e(55),m="ADD_TO_FAVORITES",v="ADD_TO_FAVORITES_SUCCESS",p="ADD_TO_FAVORITES_FAIL",l="LOADING_USER_INFO",n="UPDATE_GROUP_CATEGORIES",k="UPDATE_USER_INFO",r="UPDATE_USER_INFO_FAILED",
w="REMOVE_FROM_FAVORITES",x="REMOVE_FROM_FAVORITES_SUCCESS",D="REMOVE_FROM_FAVORITES_FAIL",G=function(){return function(z,B){var C=B();B=C.parameters.filter.group;var H=C.results.user.groupCategories;if("loaded"===C.results.user.status)return B&&!H[B.id]?z(F(B.id)):(new t.a).resolve();if("failed"===C.results.user.status)return(new t.a).reject();z({type:l});H=C.settings.utils;C=H.request;H=H.portal;return q()([Object(u.r)(C,H).then(function(E){return E.groups.map(function(K){return{id:K.id,title:K.title}})}),
Object(u.s)(C,H).then(function(E){return E.folders.map(function(K){return{id:K.id,title:K.title}})}),Object(u.t)(C,H,H.user.favGroupId).then(function(E){return E.items.reduce(function(K,I){return K[I.id]=!0,K},{})})].concat(B?[z(F(B.id))]:[])).then(function(E){z({type:k,payload:{groups:E[0],folders:E[1],favorites:E[2]}})},function(E){z({type:r})})}},F=function(z){return function(B,C){C=C().settings.utils;return Object(u.f)(C.request,C.portal,z).then(function(H){B({type:n,payload:{id:z,categorySchema:H.categorySchema}})})}},
A=function(z){return function(B,C){C=C();var H=C.settings.utils.portal,E=H.user.favGroupId;H="".concat(H.restUrl,"/content/items/").concat(z.id,"/share");E={f:"json",everyone:z.access&&"public"===z.access||z.sharing&&z.sharing.access&&"public"===z.sharing.access,org:z.access&&"org"===z.access||z.sharing&&z.sharing.access&&"org"===z.sharing.access||!1,groups:[E],items:[z.id]};B({type:m,payload:z});C.settings.utils.request(H,{method:"post",query:E}).then(function(K){B({type:v,payload:z})},function(K){B({type:p,
payload:z})})}},y=function(z){return function(B,C){var H=C(),E=H.settings.utils.portal,K=E.user.favGroupId,I="".concat(E.restUrl,"/content/items/").concat(z.id,"/unshare"),L={f:"json",everyone:!1,org:!1,groups:[K],items:[z.id]};B({type:w,payload:z});H.settings.utils.request(I,{method:"post",query:L}).then(function(M){function N(){B({type:x,payload:z})}"myFavorites"===(H=C()).parameters.section?function R(){H.settings.utils.request("".concat(E.restUrl,"/search"),{query:{f:"json",q:"(id:".concat(z.id,
") (group:").concat(K,")")},method:"get"}).then(function(Y){0<Y.data.total?setTimeout(function(){R()},250):(N(),B(Object(g.i)()))},function(Y){N()})}():N()},function(M){B({type:D,payload:z})})}}},17:function(b,a){b.exports=S},173:function(b,a,e){function q(F,A){F=["",{method:"get",query:A.settings.config.addRequestParameters?Object(g.a)({f:"json",q:Object(v.b)(A),num:F.num?F.num:A.settings.config.resultsPerQuery,sortOrder:A.parameters.sort.order,start:F.start?F.start:1},A.settings.config.addRequestParameters()):
{f:"json",q:Object(v.b)(A),num:F.num?F.num:A.settings.config.resultsPerQuery,sortOrder:A.parameters.sort.order,start:F.start?F.start:1}}];return Object(m.a)(r(A),w(A),x(A),D(A))(F)}function t(F,A){A=["",{method:"get",query:{f:"json",q:Object(v.a)(F),num:0,countFields:A.join(", "),countSize:200}}];return k(F)(A)}function u(F,A){A=["",{method:"get",query:{f:"json",q:Object(v.c)(F,A),num:0,countFields:"tags",countSize:200}}];return k(F)(A)}e.d(a,"b",function(){return q});e.d(a,"a",function(){return t});
e.d(a,"c",function(){return u});var g=e(1),m=e(64);b=e(15);var v=e(182),p=e(341),l=e(123),n=e(92),k=function(F){return Object(m.a)(D(F),G(F),x(F))},r=Object(b.a)(function(F,A){var y=A[0];A=A[1];F=F.parameters.sort.field;return"relevance"!==F?[y,Object(g.a)(Object(g.a)({},A),{query:Object(g.a)(Object(g.a)({},A.query),{sortField:F})})]:[y,A]}),w=Object(b.a)(function(F,A){var y=A[0];A=A[1];return F.parameters.filter.searchMapArea?(F=F.parameters.extent.area,F="".concat(F.minx,",").concat(F.miny,",").concat(F.maxx,
",").concat(F.maxy),[y,Object(g.a)(Object(g.a)({},A),{query:Object(g.a)(Object(g.a)({},A.query),{bbox:F})})]):[y,A]}),x=Object(b.a)(function(F,A){var y=A[0];A=A[1];return(F=Object(p.a)(F))?[y,Object(g.a)(Object(g.a)({},A),{query:Object(g.a)(Object(g.a)({},A.query),{enriched:F})})]:[y,A]}),D=Object(b.a)(function(F,A){A[0];A=A[1];var y=F.parameters,z=y.section;y=y.filter;var B=Object(l.a)(F),C="".concat(B.restUrl,"/search");if("myGroups"===z&&y.group)C="".concat(B.restUrl,"/content/groups/").concat(y.group.id,
"/search"),y.groupCategories&&(C+="?categories\x3d".concat(encodeURIComponent(JSON.stringify([y.groupCategories.value]))));else if("livingAtlas"!==z&&"Living Atlas"!==z||!F.results.livingAtlas.groupId)if(!y.orgCategories||"myOrganization"!==z&&"myContent"!==z){if(F=Object(n.b)(F.settings.config.customSections,z))Object(n.d)(F)&&y.orgCategories&&(C+="?categories\x3d".concat(encodeURIComponent(JSON.stringify([y.orgCategories.value])))),(F=Object(n.c)(F))&&(C="".concat(B.restUrl,"/content/groups/").concat(F.id,
"/search"),y.groupCategories&&(C+="?categories\x3d".concat(encodeURIComponent(JSON.stringify([y.groupCategories.value])))))}else C+="?categories\x3d".concat(encodeURIComponent(JSON.stringify([y.orgCategories.value])));else C="".concat(B.restUrl,"/content/groups/").concat(F.results.livingAtlas.groupId,"/search"),y.livingAtlasCategories?(C+="?categories\x3d".concat(encodeURIComponent(JSON.stringify([y.livingAtlasCategories.value]))),y.livingAtlasRegion&&(C+="\x26categories\x3d".concat(encodeURIComponent(JSON.stringify([y.livingAtlasRegion.value]))))):
y.livingAtlasRegion&&(C+="?categories\x3d".concat(encodeURIComponent(JSON.stringify([y.livingAtlasRegion.value]))));return[C,A]}),G=Object(b.a)(function(F,A){var y=A[0];A=A[1];var z=F.parameters.section,B=Object(n.b)(F.settings.config.customSections,z);return"myGroups"===z&&F.parameters.filter.group||("livingAtlas"===z||"Living Atlas"===z)&&F.results.livingAtlas.groupId||B&&Object(n.c)(B)?[y,Object(g.a)(Object(g.a)({},A),{query:Object(g.a)(Object(g.a)({},A.query),{countFields:A.query.countFields?
A.query.countFields.replace("categories","groupcategories"):void 0})})]:[y,A]})},182:function(b,a,e){function q(H){return Object(m.a)(v.b,B(H),C(H),Object(p.a)(H.parameters.filter.orgGroup),Object(l.a)(H.parameters.filter.status,H.settings.utils.portal.user),z(H),Object(n.a)(H.parameters.filter.shared),Object(k.a)(H.parameters.filter.dateCreated),Object(k.b)(H.parameters.filter.dateModified),Object(r.a)(F.b,{allowedItemTypes:H.settings.config.allowedItemTypes,itemTypeFilter:H.parameters.filter.itemType,
specialItemQ:H.settings.config.specialItemQ}),Object(w.b)(H.parameters.filter.tags),Object(x.a)(H.parameters.filter.origins))([H.parameters.searchString.current]).join(" ")}function t(H){return Object(m.a)(v.b,B(H),z(H),Object(r.a)(F.b,{allowedItemTypes:H.settings.config.allowedItemTypes,specialItemQ:H.settings.config.specialItemQ}))([H.parameters.searchString.current]).join(" ")}function u(H,E){return Object(m.a)(v.b,B(H),z(H),Object(r.a)(F.b,{allowedItemTypes:H.settings.config.allowedItemTypes,
specialItemQ:H.settings.config.specialItemQ}),Object(w.a)(E))([H.parameters.searchString.current]).join(" ")}e.d(a,"b",function(){return q});e.d(a,"a",function(){return t});e.d(a,"c",function(){return u});var g=e(1),m=e(64),v=e(97),p=e(383),l=e(384),n=e(385),k=e(305),r=e(257),w=e(306),x=e(386);b=e(15);var D=e(7),G=e(183),F=e(137),A=e(123),y=e(92),z=Object(b.a)(function(H,E){var K=H.parameters.filter,I=H.settings.config,L=Object(A.a)(H);switch(H.parameters.section){case "myContent":return L.user?L.user&&
K.folder?Object(g.g)(Object(g.g)([],E,!0),['(owner:"'.concat(L.user.username,'") (ownerfolder:').concat(K.folder.id,")")],!1):Object(g.g)(Object(g.g)([],E,!0),['(owner:"'.concat(L.user.username,'")')],!1):E;case "myFavorites":return L.user?Object(g.g)(Object(g.g)([],E,!0),["(group:".concat(L.user.favGroupId,")")],!1):E;case "myGroups":if(H.results.user.groups){if(H.parameters.filter.group)return Object(g.g)(Object(g.g)([],E,!0),["(group:".concat(H.parameters.filter.group.id,")")],!1);K=H.results.user.groups.map(function(M){return M.id});
return Object(g.g)(Object(g.g)([],E,!0),["(group:".concat(K.join(" OR group:"),")")],!1)}return E;case "myOrganization":return Object(g.g)(Object(g.g)([],E,!0),["(orgid:".concat(L.id,")")],!1);case "subscription":return Object(g.g)(Object(g.g)([],E,!0),["(".concat(H.results.provisionedContent.content.map(function(M){return"id:".concat(M)}).join(" OR "),")")],!1);case "all":return E;default:return(K=I.customSections.filter(function(M){return H.parameters.section===M.name})[0])?Object(g.g)(Object(g.g)([],
E,!0),[K.baseQuery],!1):E}}),B=Object(b.a)(function(H,E){var K=H.settings.config.addQueryParameters;try{if(K&&"function"==typeof K)return Object(g.g)(Object(g.g)([],E,!0),[K(H)],!1)}catch(I){}return E}),C=Object(b.a)(function(H,E){var K=Object(y.b)(H.settings.config.customSections,H.parameters.section);if(K&&!Object(D.b)(H.parameters.filter.customFilter)){var I=Object.keys(H.parameters.filter.customFilter).filter(function(L){return H.parameters.filter.customFilter[L]}).reduce(function(L,M){var N;
M=parseInt(M,10);var P=H.parameters.filter.customFilter[M].value;if(null===(N=null==K?void 0:K.filters)||void 0===N?0:N[M])if(N=Object(G.a)("children","value",K.filters[M],P))return Object(g.g)(Object(g.g)([],L,!0),["(".concat(N.q,")")],!1);return L},[]).join(" AND ");return Object(g.g)(Object(g.g)([],E,!0),["".concat(I)],!1)}return E})},183:function(b,a,e){function q(w,x){return p("children","value",w,x)}function t(w,x){return l("children","value",w,x)}function u(w,x){return function z(G,F,A,y){var B,
C=A[G];return C&&0!==C.length?Object(r.a)(Object(r.a)({},A),((B={})[G]=C.reduce(function(H,E){return-1!==y.indexOf(E[F])&&H.push(z(G,F,E,y)),H},[]),B)):Object(r.a)({},A)}("children","value",w,x)}function g(w){return function(x,D){var G,F=D[x];return F?Object(r.a)(Object(r.a)({},D),((G={})[x]=function z(y){return 0===y.length?[]:1!==y.length||y[0][x]?1<y.length?y.reduce(function(B,C){var H;return C[x]?(B.push(Object(r.a)(Object(r.a)({},C),((H={})[x]=z(C[x]),H))),B):(B.push(C),B)},[]):z(y[0][x]):y}(F),
G)):D}("children",w)}function m(w,x){return n("children",w,x)}function v(w,x){return function y(G,F,A){var z=F[G];z&&z.forEach(function(B){return y(G,B,A)});A(F)}("children",w,x)}function p(w,x,D,G){var F=D[w];return D[x]===G?D:F?F.reduce(function(A,y){return A||p(w,x,y,G)},void 0):void 0}function l(w,x,D,G){if(D=D[w])return D.reduce(function(F,A){return A[x]===G[0]?1===G.length?A:l(w,x,A,G.slice(1)):F},void 0)}function n(w,x,D){var G;return D(Object(r.a)(Object(r.a)({},x),((G={})[w]=x[w]?x[w].map(function(F){return n(w,
F,D)}):void 0,G)))}function k(w,x,D){return n(w,D,function(G){var F=G[x];if(delete G[x],G[w]){var A=G[w];return delete G[w],Object(r.a)(Object(r.a)({},G),{value:F,children:A})}return Object(r.a)(Object(r.a)({},G),{value:F})})}e.d(a,"f",function(){return q});e.d(a,"d",function(){return t});e.d(a,"i",function(){return u});e.d(a,"e",function(){return g});e.d(a,"h",function(){return m});e.d(a,"g",function(){return v});e.d(a,"a",function(){return p});e.d(a,"b",function(){return l});e.d(a,"c",function(){return k});
var r=e(1)},189:function(b,a){function e(){throw Error("setTimeout has not been defined");}function q(){throw Error("clearTimeout has not been defined");}function t(x){if(p===setTimeout)return setTimeout(x,0);if((p===e||!p)&&setTimeout)return p=setTimeout,setTimeout(x,0);try{return p(x,0)}catch(D){try{return p.call(null,x,0)}catch(G){return p.call(this,x,0)}}}function u(){r&&n&&(r=!1,n.length?k=n.concat(k):w=-1,k.length&&g())}function g(){if(!r){var x=t(u);r=!0;for(var D=k.length;D;){n=k;for(k=[];++w<
D;)n&&n[w].run();w=-1;D=k.length}n=null;r=!1;(function(G){if(l===clearTimeout)return clearTimeout(G);if((l===q||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(G);try{l(G)}catch(F){try{return l.call(null,G)}catch(A){return l.call(this,G)}}})(x)}}function m(x,D){this.fun=x;this.array=D}function v(){}b=b.exports={};try{var p="function"==typeof setTimeout?setTimeout:e}catch(x){p=e}try{var l="function"==typeof clearTimeout?clearTimeout:q}catch(x){l=q}!0;var n,k=[],r=!1,w=-1;b.nextTick=function(x){var D=
Array(arguments.length-1);if(1<arguments.length)for(var G=1;G<arguments.length;G++)D[G-1]=arguments[G];k.push(new m(x,D));1!==k.length||r||t(g)};m.prototype.run=function(){this.fun.apply(null,this.array)};b.title="browser";b.browser=!0;b.env={};b.argv=[];b.version="";b.versions={};b.on=v;b.addListener=v;b.once=v;b.off=v;b.removeListener=v;b.removeAllListeners=v;b.emit=v;b.prependListener=v;b.prependOnceListener=v;b.listeners=function(x){return[]};b.binding=function(x){throw Error("process.binding is not supported");
};b.cwd=function(){return"/"};b.chdir=function(x){throw Error("process.chdir is not supported");};b.umask=function(){return 0}},195:function(b,a,e){function q(g){var m,v;return null!==(m=g.orgId)&&void 0!==m?m:null===(v=g.portal)||void 0===v?void 0:v.id}function t(g){var m;if(!g)return!1;var v=q(g),p=null===(m=g.portal)||void 0===m?void 0:m.isPortal;return!!v&&!p&&"public_authoritative"===g.contentStatus}function u(g,m,v){return new Promise(function(p){var l=g.map(function(n){return function(k,r,
w){var x="https://".concat(r.portalHostname,"/sharing/rest/portals/").concat(k);return new Promise(function(D){w(x,{method:"get",query:{f:"json"}}).then(function(G){var F=G.data,A=F.urlKey,y=F.customBaseUrl,z=F.thumbnail;G=F.name;F="".concat(F.allSSL?"https://":"http://").concat(A||"",".").concat(y,"/");z=z?"".concat(F,"sharing/rest/portals/self/resources/").concat(z):"./images/group-no-image.png";D({name:G,url:"".concat(F,"home/"),thumbnail:z,id:k})})})}(n,m,v)});Promise.all(l).then(function(n){p(n.filter(function(k){return k}))})})}
e.d(a,"b",function(){return q});e.d(a,"c",function(){return t});e.d(a,"a",function(){return u})},198:function(b,a,e){function q(k,r,w){return k.filter(function(x,D,G){return G.indexOf(x)===D&&!r.hasOwnProperty(x)&&-1===w.indexOf(x)})}e.d(a,"c",function(){return m});e.d(a,"d",function(){return v});e.d(a,"a",function(){return p});e.d(a,"b",function(){return l});e.d(a,"e",function(){return n});var t=e(1),u=e(195),g=e(293),m="USER_THUMBNAILS_LOAD_START",v="USER_THUMBNAILS_LOAD_SUCCESS",p="ORG_THUMBNAILS_LOAD_START",
l="ORG_THUMBNAILS_LOAD_SUCCESS",n=function(k,r){var w=r(),x=w.settings.utils;r=x.request;x=x.portal;var D=w.ui.pagination;w=D.displayItems;var G=D.userThumbnailCache,F=D.pendingUserThumbRequests,A=D.orgThumbnailCache;D=D.pendingOrgThumbRequests;A=q(w.filter(u.c).map(u.b),A,D);w=q(w.map(function(y){return y.owner}),G,F);if(0!==w.length||0!==A.length)k({type:m,payload:w}),k({type:p,payload:A}),w=Object(g.a)(w,x,r),r=Object(u.a)(A,x,r),Promise.all([w,r]).then(function(y){var z=y[0];y=y[1];z=(null==z?
void 0:z.reduce(function(B,C){var H;return Object(t.a)(Object(t.a)({},B),((H={})[C.username]={thumbnail:C.thumbURI||C.thumbnail,username:C.username,fullName:C.fullName,id:C.id},H))},{}))||{};y=(null==y?void 0:y.reduce(function(B,C){var H;return Object(t.a)(Object(t.a)({},B),((H={})[C.id]=C,H))},{}))||{};k({type:v,payload:z});k({type:l,payload:y})})}},215:function(b,a,e){e.d(a,"a",function(){return l});var q=e(1);b=e(60);var t=e.n(b);b=e(65);var u=e.n(b);b=e(15);var g=e(97),m=e(33),v=e(307),p=e(123),
l=Object(b.a)(function(n,k){var r=n.settings.utils.request,w=Object(p.a)(n),x=new t.a,D=k.data.results.filter(function(G){return G.orgId&&!n.results.allOrganizations[G.orgId]}).map(function(G){return G.orgId}).filter(g.e).map(function(G){return Object(m.m)(r,w,G)});return u()(D).then(function(G){x.resolve(Object(q.a)(Object(q.a)({},k),{data:Object(q.a)(Object(q.a)({},k.data),{organizations:G.reduce(function(F,A){var y;return Object(q.a)(Object(q.a)({},F),((y={})[A.id]=Object(v.a)(A),y))},{})})}))},
function(G){x.reject(G)}),x})},223:function(b,a,e){e.d(a,"a",function(){return u});var q=e(1),t=e(99),u=function(g){var m=Object(q.a),v=Object(q.a)({},g),p=Object(t.a)(g);g=g.thumbnail?"".concat(p,"/sharing/rest/portals/").concat(g.id,"/resources/").concat(g.thumbnail):"".concat(p,"/home/images/group-no-image.png");return m(v,{thumbURI:g})}},224:function(b,a,e){e.d(a,"a",function(){return u});var q=e(1),t=e(99),u=function(g){return Object(q.a)(Object(q.a)({},g),{orgUrl:"".concat(Object(t.a)(g),"/home/index.html")})}},
227:function(b,a){b.exports=d},250:function(b,a,e){e.d(a,"a",function(){return g});e.d(a,"b",function(){return m});e.d(a,"c",function(){return v});e.d(a,"d",function(){return p});b=e(60);var q=e.n(b),t=e(33),u=e(80),g="UPDATE_PROVISIONED_CONTENT",m="UPDATE_PROVISIONED_CONTENT_FAILED",v="UPDATE_PROVISIONED_CONTENT_SUCCESS",p=function(){return function(l,n){var k=n();if("loaded"===k.results.provisionedContent.status)return(new q.a).resolve();if("failed"===k.results.provisionedContent.status)return(new q.a).reject();
l({type:g});n=k.settings.utils;var r=n.portal;return Object(t.d)(n.request,r,r.user.username).then(function(w){var x,D,G=k.settings.config.allowedItemTypes;0===(null===(x=k.settings.config.allowedItemTypes)||void 0===x?void 0:x.length)&&0<(null===(D=k.settings.config.availableItemTypeFilters)||void 0===D?void 0:D.length)&&k.settings.config.availableItemTypeFilters.every(function(F){return null==F?void 0:F.toLowerCase().includes("layer")})&&(G="Map Service;Image Service;Feature Service;Stream Service;Vector Tile Service;WMS;WFS;WMTS;KML;Feature Collection;Feed".split(";"));
l({type:v,payload:w.filter(function(F){F=F.type;return-1<(null==G?void 0:G.indexOf(F))}).map(function(F){return Object(u.a)(r,k.settings.utils.iconDir,F)})})},function(w){l({type:m})})}}},256:function(b,a,e){e.d(a,"a",function(){return p});e.d(a,"c",function(){return l});e.d(a,"d",function(){return n});e.d(a,"b",function(){return k});e.d(a,"e",function(){return r});var q=e(1);b=e(65);var t=e.n(b);b=e(60);var u=e.n(b),g=e(97),m=e(33);b=e(15);var v=e(92),p="LOADING_CUSTOM_SECTION_INFO",l="UPDATE_CUSTOM_SECTION_SCHEMAS",
n="UPDATE_CUSTOM_SECTION_INFO_FAILED",k="UPDATE_CUSTOM_SECTION_GROUPS",r=function(){return function(D,G){function F(z){D({type:n})}var A=G();if("loaded"===A.results.customSections.status)return(new u.a).resolve();if("failed"===A.results.customSections.status)return(new u.a).reject();D({type:p});var y=Object(g.f)("id",A.settings.config.customSections.filter(v.f).map(v.a).reduce(function(z,B){return Object(q.g)(Object(q.g)([],z,!0),B,!0)},[]));return w(D,G,y).then(function(){return A=G(),t()(y.map(function(z){return x(A,
z).then(function(B){return{id:z.id,type:z.type,response:B}})}))},F).then(function(z){return D({type:l,payload:z})},F)}},w=function(D,G,F){var A=G(),y=new u.a;if(0<F.length){A=A.settings.utils;var z=A.request,B=A.portal;F=F.filter(function(C){return"group"===C.type}).map(function(C){var H=C.id;return Object(m.e)(z,B,C.fetchGroupIdByQuery||"id:".concat(H)).then(function(E){return E.results[0]||{}})});t()(F).then(function(C){var H=G();D({type:k,payload:{currentSection:H.parameters.section,customSections:H.settings.config.customSections,
groups:C}});y.resolve()})}else y.resolve();return y},x=Object(b.a)(function(D,G){var F=D.settings.utils;D=F.request;F=F.portal;return G.staticSchema?(D=new u.a,D.resolve({categorySchema:G.staticSchema}),D.then(function(A){return A})):"group"===G.type?Object(m.f)(D,F,G.id):Object(m.j)(D,F,G.id)})},257:function(b,a,e){function q(m){if(0<m.length){var v=u.a.filter(function(p){return-1===m.indexOf(p)}).filter(function(p){return m.reduce(function(l,n){return-1<p.indexOf(n)||l},!1)});return'((type:"'.concat(m.join('" OR type:"'),
'")').concat(0<v.length?' AND (-type:"'.concat(v.join('" AND -type:"'),'")'):"",")")}return""}e.d(a,"a",function(){return g});var t=e(1),u=e(137);b=e(15);var g=Object(b.a)(function(m,v,p){var l=v.itemTypeFilter,n=v.allowedItemTypes;v=v.specialItemQ;return l?0<n.length&&v?Object(t.g)(Object(t.g)([],p,!0),["".concat(m[l.value]," AND (").concat(v," OR (").concat(q(n),"))")],!1):0<n.length||v?Object(t.g)(Object(t.g)([],p,!0),["".concat(m[l.value]," AND (").concat("".concat(v||q(n)),")")],!1):Object(t.g)(Object(t.g)([],
p,!0),["".concat(m[l.value])],!1):v?Object(t.g)(Object(t.g)([],p,!0),["(".concat(v,") ").concat(0<n.length?"OR (".concat(q(n),")"):"")],!1):Object(t.g)(Object(t.g)([],p,!0),[q(n)],!1)})},258:function(b,a,e){e.d(a,"a",function(){return g});e.d(a,"b",function(){return m});e.d(a,"c",function(){return v});e.d(a,"d",function(){return p});b=e(65);var q=e.n(b);b=e(60);var t=e.n(b),u=e(33),g="LOADING_ORG_INFO",m="UPDATE_ORG_INFO",v="UPDATE_ORG_INFO_FAILED",p=function(){return function(l,n){n=n();if("loaded"===
n.results.organization.status)return(new t.a).resolve();if("failed"===n.results.organization.status)return(new t.a).reject();l({type:g});var k=n.settings.utils;n=k.request;k=k.portal;var r=[Object(u.j)(n,k).then(function(w){return w.categorySchema}),Object(u.c)(n,k).then(function(w){return w.data.results})];return k.isPortal&&r.push(Object(u.o)(n,k).then(function(w){return w.servers})),q()(r).then(function(w){l({type:m,payload:{schema:w[0],groups:w[1],servers:w[2]}})},function(w){l({type:v})})}}},
273:function(b,a,e){e.d(a,"b",function(){return l});e.d(a,"a",function(){return n});e.d(a,"c",function(){return k});var q=e(1);b=e(65);var t=e.n(b);b=e(60);var u=e.n(b),g=e(33),m=e(47),v=e(80),p=e(123),l="UPDATE_FULL_ITEM_DETAILS",n="FETCH_FULL_ITEM_DETAILS_FAILED",k=function(r){return function(w,x){var D=x(),G=Object(p.a)(D),F=D.settings.utils.request;x=[];x.push(Object(g.r)(F,G,r.owner).then(function(y){return Object(m.n)(G,y)},function(y){throw y;}));var A="".concat(G.restUrl,"/content/items/").concat(r.id);
G.user&&r.owner===G.user.username&&(A=G.user.username,A="".concat(G.restUrl,"/content/users/").concat(A,"/items/").concat(r.id));x.push(Object(g.v)(F,A).then(function(y){if(y.item&&y.sharing){var z=new u.a;return Object(g.v)(F,"".concat(G.restUrl,"/community/groups"),{q:"id: ".concat(y.sharing.groups.map(function(B){return'"'.concat(B,'"')}).join(" OR "))}).then(function(B){return z.resolve(Object(q.a)(Object(q.a)({},Object(v.a)(G,D.settings.utils.iconDir,y.item)),{sharing:y.sharing,sharedToGroups:B.results}))},
function(B){return z.reject(B)}),z}return Object(v.a)(G,D.settings.utils.iconDir,y)},function(y){throw r.id;}));t()(x).then(function(y){w({type:l,payload:{item:y[1],owner:y[0]}})},function(y){w({type:n,payload:y})})}}},275:function(b,a,e){e.d(a,"a",function(){return q});e.d(a,"b",function(){return t});var q="CHANGE_SEARCH_SECTION",t=function(u){return function(g,m){m=m();g({type:q,payload:{newSection:u,customSections:m.settings.config.customSections,customSectionGroupSort:m.results.customSections.groupSort}})}}},
277:function(b,a,e){e.d(a,"b",function(){return q});e.d(a,"a",function(){return t});e.d(a,"d",function(){return u});e.d(a,"c",function(){return g});var q="CHANGE_SORT_ORDER",t="CHANGE_SORT_FIELD",u=function(m){return{type:q,payload:m}},g=function(m){return{type:t,payload:m}}},28:function(b,a,e){(function(q,t){b.exports=function(){function u(){var ca=setTimeout;return function(){return ca(g,1)}}function g(){for(var ca=0;ca<y;ca+=2)(0,L[ca])(L[ca+1]),L[ca]=void 0,L[ca+1]=void 0;y=0}function m(ca,fa){var la=
this,ta=new this.constructor(p);void 0===ta[ja]&&F(ta);var Q=la._state;if(Q){var T=arguments[Q-1];C(function(){return G(Q,ta,T,la._result)})}else x(la,ta,ca,fa);return ta}function v(ca){if(ca&&"object"==typeof ca&&ca.constructor===this)return ca;var fa=new this(p);return n(fa,ca),fa}function p(){}function l(ca,fa,la){fa.constructor===ca.constructor&&la===m&&fa.constructor.resolve===v?function(ta,Q){1===Q._state?r(ta,Q._result):2===Q._state?w(ta,Q._result):x(Q,void 0,function(T){return n(ta,T)},function(T){return w(ta,
T)})}(ca,fa):void 0===la?r(ca,fa):"function"==typeof la?function(ta,Q,T){C(function(O){var Z=!1,na=function(ia,X,ha,V){try{ia.call(X,ha,V)}catch(ea){return ea}}(T,Q,function(ia){Z||(Z=!0,Q!==ia?n(O,ia):r(O,ia))},function(ia){Z||(Z=!0,w(O,ia))},O._label);!Z&&na&&(Z=!0,w(O,na))},ta)}(ca,fa,la):r(ca,fa)}function n(ca,fa){if(ca===fa)w(ca,new TypeError("You cannot resolve a promise with itself"));else if(ta=typeof(la=fa),null===la||"object"!==ta&&"function"!==ta)r(ca,fa);else{la=void 0;try{la=fa.then}catch(Q){return void w(ca,
Q)}l(ca,fa,la)}var la,ta}function k(ca){ca._onerror&&ca._onerror(ca._result);D(ca)}function r(ca,fa){void 0===ca._state&&(ca._result=fa,ca._state=1,0!==ca._subscribers.length&&C(D,ca))}function w(ca,fa){void 0===ca._state&&(ca._state=2,ca._result=fa,C(k,ca))}function x(ca,fa,la,ta){var Q=ca._subscribers,T=Q.length;ca._onerror=null;Q[T]=fa;Q[T+1]=la;Q[T+2]=ta;0===T&&ca._state&&C(D,ca)}function D(ca){var fa=ca._subscribers,la=ca._state;if(0!==fa.length){for(var ta=void 0,Q=void 0,T=ca._result,O=0;O<
fa.length;O+=3)ta=fa[O],Q=fa[O+la],ta?G(la,ta,Q,T):Q(T);ca._subscribers.length=0}}function G(ca,fa,la,ta){var Q="function"==typeof la,T=void 0,O=void 0,Z=!0;if(Q){try{T=la(ta)}catch(na){Z=!1,O=na}if(fa===T)return void w(fa,new TypeError("A promises callback cannot return that same promise."))}else T=ta;void 0!==fa._state||(Q&&Z?n(fa,T):!1===Z?w(fa,O):1===ca?r(fa,T):2===ca&&w(fa,T))}function F(ca){ca[ja]=aa++;ca._state=void 0;ca._result=void 0;ca._subscribers=[]}var A=Array.isArray?Array.isArray:function(ca){return"[object Array]"===
Object.prototype.toString.call(ca)},y=0,z=void 0,B=void 0,C=function(ca,fa){L[y]=ca;L[y+1]=fa;2===(y+=2)&&(B?B(g):Y())},H="undefined"!=typeof window?window:void 0,E=H||{};E=E.MutationObserver||E.WebKitMutationObserver;var K="undefined"==typeof self&&void 0!==q&&"[object process]"==={}.toString.call(q),I="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,L=Array(1E3),M,N,P,R,Y=void 0;K?Y=function(){return q.nextTick(g)}:E?(N=0,P=new E(g),R=
document.createTextNode(""),P.observe(R,{characterData:!0}),Y=function(){R.data=N=++N%2}):I?((M=new MessageChannel).port1.onmessage=g,Y=function(){return M.port2.postMessage(0)}):Y=void 0===H?function(){try{var ca=Function("return this")().require("vertx");return void 0!==(z=ca.runOnLoop||ca.runOnContext)?function(){z(g)}:u()}catch(fa){return u()}}():u();var ja=Math.random().toString(36).substring(2),aa=0,da=function(){function ca(fa,la){this._instanceConstructor=fa;this.promise=new fa(p);this.promise[ja]||
F(this.promise);A(la)?(this.length=la.length,this._remaining=la.length,this._result=Array(this.length),0===this.length?r(this.promise,this._result):(this.length=this.length||0,this._enumerate(la),0===this._remaining&&r(this.promise,this._result))):w(this.promise,Error("Array Methods must be provided an Array"))}return ca.prototype._enumerate=function(fa){for(var la=0;void 0===this._state&&la<fa.length;la++)this._eachEntry(fa[la],la)},ca.prototype._eachEntry=function(fa,la){var ta=this._instanceConstructor,
Q=ta.resolve;if(Q===v){var T=Q=void 0,O=!1;try{Q=fa.then}catch(Z){O=!0,T=Z}Q===m&&void 0!==fa._state?this._settledAt(fa._state,la,fa._result):"function"!=typeof Q?(this._remaining--,this._result[la]=fa):ta===ra?(ta=new ta(p),O?w(ta,T):l(ta,fa,Q),this._willSettleAt(ta,la)):this._willSettleAt(new ta(function(Z){return Z(fa)}),la)}else this._willSettleAt(Q(fa),la)},ca.prototype._settledAt=function(fa,la,ta){var Q=this.promise;void 0===Q._state&&(this._remaining--,2===fa?w(Q,ta):this._result[la]=ta);
0===this._remaining&&r(Q,this._result)},ca.prototype._willSettleAt=function(fa,la){var ta=this;x(fa,void 0,function(Q){return ta._settledAt(1,la,Q)},function(Q){return ta._settledAt(2,la,Q)})},ca}(),ra=function(){function ca(fa){this[ja]=aa++;this._result=this._state=void 0;this._subscribers=[];if(p!==fa){if("function"!=typeof fa)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof ca)(function(la,ta){try{ta(function(Q){n(la,
Q)},function(Q){w(la,Q)})}catch(Q){w(la,Q)}})(this,fa);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}}return ca.prototype.catch=function(fa){return this.then(null,fa)},ca.prototype.finally=function(fa){var la=this.constructor;return"function"==typeof fa?this.then(function(ta){return la.resolve(fa()).then(function(){return ta})},function(ta){return la.resolve(fa()).then(function(){throw ta;})}):this.then(fa,
fa)},ca}();return ra.prototype.then=m,ra.all=function(ca){return(new da(this,ca)).promise},ra.race=function(ca){var fa=this;return A(ca)?new fa(function(la,ta){for(var Q=ca.length,T=0;T<Q;T++)fa.resolve(ca[T]).then(la,ta)}):new fa(function(la,ta){return ta(new TypeError("You must pass an array to race."))})},ra.resolve=v,ra.reject=function(ca){var fa=new this(p);return w(fa,ca),fa},ra._setScheduler=function(ca){B=ca},ra._setAsap=function(ca){C=ca},ra._asap=C,ra.polyfill=function(){var ca=void 0;if(void 0!==
t)ca=t;else if("undefined"!=typeof self)ca=self;else try{ca=Function("return this")()}catch(ta){throw Error("polyfill failed because global object is unavailable in this environment");}var fa=ca.Promise;if(fa){var la=null;try{la=Object.prototype.toString.call(fa.resolve())}catch(ta){}if("[object Promise]"===la&&!fa.cast)return}ca.Promise=ra},ra.Promise=ra,ra}()}).call(this,e(189),e(165))},280:function(b,a,e){e.d(a,"b",function(){return m});e.d(a,"a",function(){return v});e.d(a,"c",function(){return p});
e.d(a,"d",function(){return l});var q=e(173),t=e(80),u=e(215),g=e(198),m="CHANGE_PAGE_SUCCESS",v="CHANGE_PAGE_FAIL",p="CHANGING_PAGE",l=function(n){return function(k,r){r=r();k({type:p,payload:n});var w=r.settings.utils,x=w.portal,D=w.iconDir;w=r.settings.utils.request;var G=r.settings.config.resultsPerQuery;G=Object(q.b)({num:G,start:(n-1)*G+1},r);w(G[0],G[1]).then(Object(u.a)(r),function(F){return k({type:v,payload:{err:F}})}).then(function(F){k({type:m,payload:{organizations:F.data.organizations,
displayItems:F.data.results.map(function(A){return Object(t.a)(x,D,A)}),page:n}});k(g.e)},function(F){return k({type:v,payload:{err:F}})})}}},293:function(b,a,e){function q(t,u,g){return Promise.all(t.map(function(m){return function(v,p,l){return new Promise(function(n,k){l("".concat(p.restUrl,"/community/users/").concat(v),{method:"get",query:{f:"json"}}).then(function(r){return n(null==r?void 0:r.data)},k)})}(m,u,g)}))}e.d(a,"a",function(){return q})},305:function(b,a,e){e.d(a,"b",function(){return t});
e.d(a,"a",function(){return u});var q=e(1);b=e(15);b=Object(b.a)(function(g,m,v){if(m){var p=Object(q.g);v=Object(q.g)([],v,!0);g="(".concat(g,":");var l=g.concat;m="[".concat(m.start," TO ").concat(m.end,"]");p=p(v,[l.call(g,m,")")],!1)}else p=v;return p});var t=b("modified"),u=b("uploaded")},306:function(b,a,e){e.d(a,"b",function(){return t});e.d(a,"a",function(){return u});var q=e(1);b=e(15);var t=Object(b.a)(function(g,m){return g&&(g=Object.keys(g),0<g.length)?Object(q.g)(Object(q.g)([],m,!0),
["tags:(".concat(g.join(" AND "),")")],!1):m}),u=Object(b.a)(function(g,m){return 2<g.length?Object(q.g)(Object(q.g)([],m,!0),["tags:(".concat(g,"* OR ").concat(g,")")],!1):m})},307:function(b,a,e){e.d(a,"a",function(){return t});b=e(64);a=e(99);var q=e(223);e=e(224);var t=Object(b.a)(q.a,e.a,a.b)},308:function(b,a,e){e.d(a,"a",function(){return m});e.d(a,"b",function(){return v});b=e(60);var q=e.n(b),t=e(33),u=e(307),g=e(143),m="UPDATE_PORTAL_SELF",v=function(){return function(p,l){var n=l(),k=n.settings.utils;
l=k.portal;k=k.request;var r=l.user&&l.user.culture?l.user.culture:g.locale;return n.settings.utils.self?(new q.a).resolve(n.settings.utils.self):Object(t.n)(k,l,r).then(function(w){w=Object(u.a)(w);return p({type:m,payload:{self:w,config:n.settings.config}}),w})}}},309:function(b,a,e){e.d(a,"a",function(){return v});e.d(a,"b",function(){return p});e.d(a,"c",function(){return l});e.d(a,"d",function(){return n});var q=e(1),t=e(37);b=e(60);var u=e.n(b),g=e(143),m=e(387),v="LOADING_LIVING_ATLAS_INFO",
p="UPDATE_LIVING_ATLAS_INFO",l="FETCH_LIVING_ATLAS_INFO_FAILED",n=function(k){return function(r,w){w=w();if("loaded"===w.results.livingAtlas.status)return(new u.a).resolve();if("failed"===w.results.livingAtlas.status)return(new u.a).reject();r({type:v});w=w.settings.utils;var x=w.portal;return Object(m.a)(w.request,x,k,x.user&&x.user.culture?x.user.culture:g.locale).then(function(D){r({type:p,payload:Object(q.a)(Object(q.a)({},D),{schema:D.schema.map(function(G){return"region"===G.title?Object(q.a)(Object(q.a)({},
G),{displayName:t.regions}):G})})})},function(D){r({type:l})})}}},310:function(b,a,e){e.d(a,"a",function(){return m});var q=e(33),t=e(56);b=e(65);var u=e.n(b),g=function(v,p,l){v({type:"LOADING_COLLABORATIONS"});var n=[];Object.keys(l).forEach(function(r){n[r]=[];0<l[r].participants.length&&l[r].participants.forEach(function(w){n[w.value]=[]})});var k=Object.keys(n).map(function(r){r=r.split("__");var w=r[0],x=r[1]?r[1]:"";return Object(q.k)(p.settings.utils.request,p.settings.utils.portal,p.settings.utils.portal.id,
{query:""!==x?{collaborationId:w,participantId:x,f:"json"}:{collaborationId:w,f:"json"}}).then(function(D){(D.data.collaboratedItems||D.collaboratedItems).forEach(function(G){if(x){var F=w+"__"+x;l[w].participants.filter(function(A){return A.value===F})[0].items.push(Object.keys(G)[0])}else l[w].items.push(Object.keys(G)[0])})},function(){return v({type:"LOADING_COLLABORATIONS_FAILED"})})});return u()(k).then(function(){v(Object(t.s)(l));v({type:"LOADING_COLLABORATIONS_SUCCESS",payload:l})})},m=function(v,
p){if(v({type:"LOADING_COLLABORATIONS"}),p&&p.parameters&&p.parameters.filter&&p.parameters.filter.origins&&0<Object.keys(p.parameters.filter.origins).length){var l=p.parameters.filter.origins;return v(Object(t.s)(l)),{type:"LOADING_COLLABORATIONS_SUCCESS",payload:l}}return Object(q.l)(p.settings.utils.request,p.settings.utils.portal,p.settings.utils.portal.id,{query:{includeParticipantInfo:"true",f:"json"}}).then(function(n){var k=[];n.data&&n.data.collaborations&&n.data.collaborations.forEach(function(r){var w=
r.collaborationId,x=r.collaborationName.trim();k[w]={value:w,label:x,addClass:"",childOf:"",selected:!1,participants:[],items:[]};r.participants&&(k[w].participants=r.participants.map(function(D){return 1===(D=Object.keys(D).map(function(G){var F=D[G].trim();return{value:w+"__"+G,label:F,childOf:w,addClass:"filter-tree-item-child",selected:!1,items:[]}})).length?D[0]:D}))});g(v,p,k).then(function(){return v(Object(t.s)(k))},function(){return v({type:"LOADING_COLLABORATIONS_FAILED"})})},function(n){return v({type:"LOADING_COLLABORATIONS_FAILED",
payload:n})})}},319:function(b,a,e){(function(q,t){function u(Ca,qa){return Ca.set(qa[0],qa[1]),Ca}function g(Ca,qa){return Ca.add(qa),Ca}function m(Ca,qa,W,ba){var oa=-1,wa=Ca?Ca.length:0;for(ba&&wa&&(W=Ca[++oa]);++oa<wa;)W=qa(W,Ca[oa],oa,Ca);return W}function v(Ca){var qa=!1;if(null!=Ca&&"function"!=typeof Ca.toString)try{qa=!!(Ca+"")}catch(W){}return qa}function p(Ca){var qa=-1,W=Array(Ca.size);return Ca.forEach(function(ba,oa){W[++qa]=[oa,ba]}),W}function l(Ca,qa){return function(W){return Ca(qa(W))}}
function n(Ca){var qa=-1,W=Array(Ca.size);return Ca.forEach(function(ba){W[++qa]=ba}),W}function k(Ca){var qa=-1,W=Ca?Ca.length:0;for(this.clear();++qa<W;){var ba=Ca[qa];this.set(ba[0],ba[1])}}function r(Ca){var qa=-1,W=Ca?Ca.length:0;for(this.clear();++qa<W;){var ba=Ca[qa];this.set(ba[0],ba[1])}}function w(Ca){var qa=-1,W=Ca?Ca.length:0;for(this.clear();++qa<W;){var ba=Ca[qa];this.set(ba[0],ba[1])}}function x(Ca){this.__data__=new r(Ca)}function D(Ca,qa){var W=xa(Ca)||function(Ea){return!!Ea&&"object"==
typeof Ea&&I(Ea)&&T.call(Ea,"callee")&&(!ha.call(Ea,"callee")||"[object Arguments]"==O.call(Ea))}(Ca)?function(Ea,Ga){for(var Ja=-1,ya=Array(Ea);++Ja<Ea;)ya[Ja]=Ga(Ja);return ya}(Ca.length,String):[],ba=W.length,oa=!!ba,wa;for(wa in Ca)!qa&&!T.call(Ca,wa)||oa&&("length"==wa||H(wa,ba))||W.push(wa);return W}function G(Ca,qa,W){var ba=Ca[qa];T.call(Ca,qa)&&(ba===W||ba!=ba&&W!=W)&&(void 0!==W||qa in Ca)||(Ca[qa]=W)}function F(Ca,qa){for(var W=Ca.length;W--;){var ba=Ca[W][0];if(ba===qa||ba!=ba&&qa!=qa)return W}return-1}
function A(Ca,qa,W,ba,oa,wa,Ea){var Ga;if(ba&&(Ga=wa?ba(Ca,oa,wa,Ea):ba(Ca)),void 0!==Ga)return Ga;if(!M(Ca))return Ca;if(oa=xa(Ca)){if(Ga=function(Ia){var Ka=Ia.length,Ma=Ia.constructor(Ka);Ka&&"string"==typeof Ia[0]&&T.call(Ia,"index")&&(Ma.index=Ia.index,Ma.input=Ia.input);return Ma}(Ca),!qa)return function(Ia,Ka){var Ma=-1,Na=Ia.length;for(Ka||(Ka=Array(Na));++Ma<Na;)Ka[Ma]=Ia[Ma];return Ka}(Ca,Ga)}else{var Ja=va(Ca),ya="[object Function]"==Ja||"[object GeneratorFunction]"==Ja;if(Da(Ca))return function(Ia,
Ka){if(Ka)return Ia.slice();Ka=new Ia.constructor(Ia.length);return Ia.copy(Ka),Ka}(Ca,qa);if("[object Object]"==Ja||"[object Arguments]"==Ja||ya&&!wa){if(v(Ca))return wa?Ca:{};if(Ga=function(Ia){return"function"!=typeof Ia.constructor||E(Ia)?{}:(Ka=ia(Ia),M(Ka)?X(Ka):{});var Ka}(ya?{}:Ca),!qa)return function(Ia,Ka){return z(Ia,Fa(Ia),Ka)}(Ca,function(Ia,Ka){return Ia&&z(Ka,N(Ka),Ia)}(Ga,Ca))}else{if(!ja[Ja])return wa?Ca:{};Ga=function(Ia,Ka,Ma,Na){var La=Ia.constructor;switch(Ka){case "[object ArrayBuffer]":return y(Ia);
case "[object Boolean]":case "[object Date]":return new La(+Ia);case "[object DataView]":return function(Oa,Qa){Qa=Qa?y(Oa.buffer):Oa.buffer;return new Oa.constructor(Qa,Oa.byteOffset,Oa.byteLength)}(Ia,Na);case "[object Float32Array]":case "[object Float64Array]":case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return function(Oa,Qa){Qa=Qa?y(Oa.buffer):
Oa.buffer;return new Oa.constructor(Qa,Oa.byteOffset,Oa.length)}(Ia,Na);case "[object Map]":return function(Oa,Qa,Ra){return m(Qa?Ra(p(Oa),!0):p(Oa),u,new Oa.constructor)}(Ia,Na,Ma);case "[object Number]":case "[object String]":return new La(Ia);case "[object RegExp]":return function(Oa){var Qa=new Oa.constructor(Oa.source,P.exec(Oa));return Qa.lastIndex=Oa.lastIndex,Qa}(Ia);case "[object Set]":return function(Oa,Qa,Ra){return m(Qa?Ra(n(Oa),!0):n(Oa),g,new Oa.constructor)}(Ia,Na,Ma);case "[object Symbol]":return Pa=
Ia,ua?Object(ua.call(Pa)):{}}var Pa}(Ca,Ja,A,qa)}}Ea||(Ea=new x);if(wa=Ea.get(Ca))return wa;if(Ea.set(Ca,Ga),!oa)var Ha=W?function(Ia){var Ka=Fa,Ma=N(Ia);if(!xa(Ia)){Ia=Ka(Ia);Ka=-1;for(var Na=Ia.length,La=Ma.length;++Ka<Na;)Ma[La+Ka]=Ia[Ka]}return Ma}(Ca):N(Ca);return function(Ia,Ka){for(var Ma=-1,Na=Ia?Ia.length:0;++Ma<Na&&!1!==Ka(Ia[Ma],Ma,Ia););}(Ha||Ca,function(Ia,Ka){Ha&&(Ia=Ca[Ka=Ia]);G(Ga,Ka,A(Ia,qa,W,ba,Ka,Ca,Ea))}),Ga}function y(Ca){var qa=new Ca.constructor(Ca.byteLength);return(new na(qa)).set(new na(Ca)),
qa}function z(Ca,qa,W,ba){W||(W={});for(var oa=-1,wa=qa.length;++oa<wa;){var Ea=qa[oa],Ga=ba?ba(W[Ea],Ca[Ea],Ea,W,Ca):void 0;G(W,Ea,void 0===Ga?Ca[Ea]:Ga)}return W}function B(Ca,qa){var W;Ca=Ca.__data__;return("string"==(W=typeof qa)||"number"==W||"symbol"==W||"boolean"==W?"__proto__"!==qa:null===qa)?Ca["string"==typeof qa?"string":"hash"]:Ca.map}function C(Ca,qa){Ca=null==Ca?void 0:Ca[qa];a:{qa=!(!M(Ca)||(W=Ca,ta&&ta in W))&&(L(Ca)||v(Ca)?Z:R).test(K(Ca));break a;var W}return qa?Ca:void 0}function H(Ca,
qa){return!!(qa=null==qa?9007199254740991:qa)&&("number"==typeof Ca||Y.test(Ca))&&-1<Ca&&0==Ca%1&&Ca<qa}function E(Ca){var qa=Ca&&Ca.constructor;return Ca===("function"==typeof qa&&qa.prototype||fa)}function K(Ca){if(null!=Ca){try{return Q.call(Ca)}catch(qa){}return Ca+""}return""}function I(Ca){var qa;if(qa=null!=Ca)qa=Ca.length,qa="number"==typeof qa&&-1<qa&&0==qa%1&&9007199254740991>=qa;return qa&&!L(Ca)}function L(Ca){Ca=M(Ca)?O.call(Ca):"";return"[object Function]"==Ca||"[object GeneratorFunction]"==
Ca}function M(Ca){var qa=typeof Ca;return!!Ca&&("object"==qa||"function"==qa)}function N(Ca){if(I(Ca))Ca=D(Ca);else if(E(Ca)){var qa=[],W;for(W in Object(Ca))T.call(Ca,W)&&"constructor"!=W&&qa.push(W);Ca=qa}else Ca=ea(Ca);return Ca}var P=/\w*$/,R=/^\[object .+?Constructor\]$/,Y=/^(?:0|[1-9]\d*)$/,ja={};ja["[object Arguments]"]=ja["[object Array]"]=ja["[object ArrayBuffer]"]=ja["[object DataView]"]=ja["[object Boolean]"]=ja["[object Date]"]=ja["[object Float32Array]"]=ja["[object Float64Array]"]=ja["[object Int8Array]"]=
ja["[object Int16Array]"]=ja["[object Int32Array]"]=ja["[object Map]"]=ja["[object Number]"]=ja["[object Object]"]=ja["[object RegExp]"]=ja["[object Set]"]=ja["[object String]"]=ja["[object Symbol]"]=ja["[object Uint8Array]"]=ja["[object Uint8ClampedArray]"]=ja["[object Uint16Array]"]=ja["[object Uint32Array]"]=!0;ja["[object Error]"]=ja["[object Function]"]=ja["[object WeakMap]"]=!1;var aa="object"==typeof self&&self&&self.Object===Object&&self;q="object"==typeof q&&q&&q.Object===Object&&q||aa||
Function("return this")();var da=(aa=a&&!a.nodeType&&a)&&"object"==typeof t&&t&&!t.nodeType&&t;da=da&&da.exports===aa;var ra;aa=Array.prototype;var ca=Function.prototype,fa=Object.prototype,la=q["__core-js_shared__"],ta=(ra=/[^.]+$/.exec(la&&la.keys&&la.keys.IE_PROTO||""))?"Symbol(src)_1."+ra:"",Q=ca.toString,T=fa.hasOwnProperty,O=fa.toString,Z=RegExp("^"+Q.call(T).replace(/[\\^$.*+?()[\]{}|]/g,"\\$\x26").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");da=da?q.Buffer:
void 0;ra=q.Symbol;var na=q.Uint8Array,ia=l(Object.getPrototypeOf,Object),X=Object.create,ha=fa.propertyIsEnumerable,V=aa.splice;aa=Object.getOwnPropertySymbols;da=da?da.isBuffer:void 0;var ea=l(Object.keys,Object);ca=C(q,"DataView");var U=C(q,"Map");la=C(q,"Promise");var ka=C(q,"Set");q=C(q,"WeakMap");var ma=C(Object,"create"),sa=K(ca),pa=K(U),Aa=K(la),za=K(ka),Ba=K(q),ua=(ra=ra?ra.prototype:void 0)?ra.valueOf:void 0;k.prototype.clear=function(){this.__data__=ma?ma(null):{}};k.prototype.delete=function(Ca){return this.has(Ca)&&
delete this.__data__[Ca]};k.prototype.get=function(Ca){var qa=this.__data__;return ma?(Ca=qa[Ca],"__lodash_hash_undefined__"===Ca?void 0:Ca):T.call(qa,Ca)?qa[Ca]:void 0};k.prototype.has=function(Ca){var qa=this.__data__;return ma?void 0!==qa[Ca]:T.call(qa,Ca)};k.prototype.set=function(Ca,qa){return this.__data__[Ca]=ma&&void 0===qa?"__lodash_hash_undefined__":qa,this};r.prototype.clear=function(){this.__data__=[]};r.prototype.delete=function(Ca){var qa=this.__data__;Ca=F(qa,Ca);return!(0>Ca)&&(Ca==
qa.length-1?qa.pop():V.call(qa,Ca,1),!0)};r.prototype.get=function(Ca){var qa=this.__data__;Ca=F(qa,Ca);return 0>Ca?void 0:qa[Ca][1]};r.prototype.has=function(Ca){return-1<F(this.__data__,Ca)};r.prototype.set=function(Ca,qa){var W=this.__data__,ba=F(W,Ca);return 0>ba?W.push([Ca,qa]):W[ba][1]=qa,this};w.prototype.clear=function(){this.__data__={hash:new k,map:new (U||r),string:new k}};w.prototype.delete=function(Ca){return B(this,Ca).delete(Ca)};w.prototype.get=function(Ca){return B(this,Ca).get(Ca)};
w.prototype.has=function(Ca){return B(this,Ca).has(Ca)};w.prototype.set=function(Ca,qa){return B(this,Ca).set(Ca,qa),this};x.prototype.clear=function(){this.__data__=new r};x.prototype.delete=function(Ca){return this.__data__.delete(Ca)};x.prototype.get=function(Ca){return this.__data__.get(Ca)};x.prototype.has=function(Ca){return this.__data__.has(Ca)};x.prototype.set=function(Ca,qa){var W=this.__data__;if(W instanceof r){W=W.__data__;if(!U||199>W.length)return W.push([Ca,qa]),this;W=this.__data__=
new w(W)}return W.set(Ca,qa),this};var Fa=aa?l(aa,Object):function(){return[]},va=function(Ca){return O.call(Ca)};(ca&&"[object DataView]"!=va(new ca(new ArrayBuffer(1)))||U&&"[object Map]"!=va(new U)||la&&"[object Promise]"!=va(la.resolve())||ka&&"[object Set]"!=va(new ka)||q&&"[object WeakMap]"!=va(new q))&&(va=function(Ca){var qa=O.call(Ca);if(Ca=(Ca="[object Object]"==qa?Ca.constructor:void 0)?K(Ca):void 0)switch(Ca){case sa:return"[object DataView]";case pa:return"[object Map]";case Aa:return"[object Promise]";
case za:return"[object Set]";case Ba:return"[object WeakMap]"}return qa});var xa=Array.isArray,Da=da||function(){return!1};t.exports=function(Ca){return A(Ca,!0,!0)}}).call(this,e(165),e(352)(b))},33:function(b,a,e){function q(L){return L.reduce(function(M,N){return N&&N.relatedItems?M.concat(N.relatedItems.map(function(P){return P})):M},[])}function t(L,M,N){return L(M,{query:Object(m.a)({f:"json"},N)}).then(function(P){return P.data})}function u(L,M){void 0===M&&(M=100);for(var N=[],P=0;P<Math.ceil(L.length/
M);P++)N.push(L.slice(P*M,(P+1)*M));return N.filter(function(R){return 0<R.length})}function g(L){var M=L.itemIds,N=L.request,P=L.groupIds,R="".concat(L.portal.restUrl,"/content/itemsgroups");return new v.Promise(function(Y,ja){N(R,{method:"get",query:{f:"json",items:M,groups:P}}).then(function(aa){Y(aa.data)},ja)})}e.d(a,"u",function(){return p});e.d(a,"n",function(){return l});e.d(a,"h",function(){return n});e.d(a,"e",function(){return k});e.d(a,"f",function(){return r});e.d(a,"j",function(){return w});
e.d(a,"o",function(){return x});e.d(a,"l",function(){return D});e.d(a,"k",function(){return G});e.d(a,"m",function(){return F});e.d(a,"c",function(){return A});e.d(a,"d",function(){return y});e.d(a,"r",function(){return z});e.d(a,"s",function(){return B});e.d(a,"t",function(){return C});e.d(a,"g",function(){return H});e.d(a,"p",function(){return E});e.d(a,"q",function(){return K});e.d(a,"v",function(){return t});e.d(a,"a",function(){return u});e.d(a,"i",function(){return g});e.d(a,"b",function(){return I});
var m=e(1),v=e(28),p=function(L){return function(M,N){return L({url:M,content:N.query},{usePost:"post"===N.method}).then(function(P){return{data:P}})}},l=function(L,M,N){return t(L,"".concat(M.restUrl,"/portals/self"),{culture:N,default:!0})},n=function(L,M,N){return t(L,"".concat(M.restUrl,"/content/items/").concat(N,"/data"))},k=function(L,M,N,P){return t(L,"".concat(M.restUrl,"/community/groups"),Object(m.a)({q:N},P))},r=function(L,M,N){return t(L,"".concat(M.restUrl,"/community/groups/").concat(N,
"/categorySchema"))},w=function(L,M,N){return t(L,"".concat(M.restUrl,"/portals/").concat(N||M.id,"/categorySchema"))},x=function(L,M){return t(L,"".concat(M.restUrl,"/portals/").concat(M.id,"/servers"))},D=function(L,M,N,P){return L("".concat(M.restUrl,"/portals/").concat(N||M.id,"/collaborationsSummary"),P)},G=function(L,M,N,P){return L("".concat(M.restUrl,"/portals/").concat(N||M.id,"/collaboratedItems"),P)},F=function(L,M,N){return t(L,"".concat(location.protocol,"//").concat(M.portalHostname,
"/sharing/rest/portals/").concat(N||"self"))},A=function(L,M,N){return L("".concat(M.restUrl,"/community/groups"),{query:{f:"json",q:"orgid:".concat(M.id," AND access:public"),num:100,start:N||1,sortField:"title",sortOrder:"asc"}}).then(function(P){return P.data.total>P.data.start+P.data.num?A(L,M,P.data.start+P.data.num).then(function(R){return Object(m.a)(Object(m.a)({},R),{data:Object(m.a)(Object(m.a)({},R.data),{results:P.data.results.concat(R.data.results)})})}):P})},y=function(L,M,N,P){return L("".concat(M.restUrl,
"/community/users/").concat(N,"/provisionedListings"),{query:{f:"json",num:100,start:P||1}}).then(function(R){var Y=v.Promise.all(R.data.provisionedListings.filter(function(aa){return aa.itemId}).map(function(aa){return(new v.Promise(function(da,ra){L("".concat(M.restUrl,"/content/items/").concat(aa.itemId),{method:"get",query:{f:"json"}}).then(function(ca){da(ca.data)},ra)})).catch(function(da){return 0})})),ja=R.data.provisionedListings.map(function(aa){return t(L,"".concat(M.restUrl,"/content/items/").concat(aa.id||
aa.itemId,"/relatedItems?relationshipType\x3dListed2ImplicitlyListed\x26direction\x3dforward")).then(function(da){return da},function(da){})});return R.data.total>R.data.start+R.data.num?y(L,M,N,R.data.start+R.data.num).then(function(aa){return v.Promise.all([Y].concat(ja)).then(function(da){return da[0].results.concat(q(da.slice(1))).concat(aa)})}):v.Promise.all([Y].concat(ja)).then(function(aa){return aa[0].filter(function(da){return void 0!==da}).concat(q(aa.slice(1)))})})},z=function(L,M,N){return t(L,
"".concat(M.restUrl,"/community/users/").concat(N||M.user.username))},B=function(L,M,N){return t(L,"".concat(M.restUrl,"/content/users/").concat(N||M.user.username),{num:1})},C=function(L,M,N){return t(L,"".concat(M.restUrl,"/content/groups/").concat(N))},H=function(L,M,N){return t(L,"".concat(M.restUrl,"/community/groups"),N)},E=function(L,M){return t(L,"".concat(M.restUrl,"/portals/self/settings"))},K=function(L,M){return t(L,"".concat(M.restUrl,"/portals/self/trustedOrgs"),{num:100})},I=function(L,
M){return void 0===M&&(M=","),L.map(function(N){return N.id}).join(M)}},341:function(b,a,e){function q(u){var g;u=Object(t.a)(u);return!0===(null===(g=u.portalProperties)||void 0===g?void 0:g.semanticSearchEnabled)||u.portalUser&&!u.portalUser.orgId}e.d(a,"a",function(){return q});var t=e(123)},342:function(b,a,e){e.d(a,"a",function(){return t});e.d(a,"b",function(){return u});var q=e(273),t="VIEW_ITEM_DETAILS",u=function(g){return function(m){m({type:t,payload:g});m(Object(q.c)(g))}}},352:function(b,
a){b.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},37:function(b,a){b.exports=J},372:function(b,a,e){(function(q,t){function u(qa,W,ba){switch(ba.length){case 0:return qa.call(W);case 1:return qa.call(W,ba[0]);case 2:return qa.call(W,ba[0],ba[1]);case 3:return qa.call(W,
ba[0],ba[1],ba[2])}return qa.apply(W,ba)}function g(qa){var W=-1,ba=null==qa?0:qa.length;for(this.clear();++W<ba;){var oa=qa[W];this.set(oa[0],oa[1])}}function m(qa){var W=-1,ba=null==qa?0:qa.length;for(this.clear();++W<ba;){var oa=qa[W];this.set(oa[0],oa[1])}}function v(qa){var W=-1,ba=null==qa?0:qa.length;for(this.clear();++W<ba;){var oa=qa[W];this.set(oa[0],oa[1])}}function p(qa){this.size=(this.__data__=new m(qa)).size}function l(qa,W,ba){(void 0===ba||z(qa[W],ba))&&(void 0!==ba||W in qa)||k(qa,
W,ba)}function n(qa,W){for(var ba=qa.length;ba--;)if(z(qa[ba][0],W))return ba;return-1}function k(qa,W,ba){"__proto__"==W&&ka?ka(qa,W,{configurable:!0,enumerable:!0,value:ba,writable:!0}):qa[W]=ba}function r(qa){if(null==qa)qa=void 0===qa?"[object Undefined]":"[object Null]";else if(U&&U in Object(qa)){var W=ta.call(qa,U),ba=qa[U];try{qa[U]=void 0;var oa=!0}catch(Ea){}var wa=T.call(qa);oa&&(W?qa[U]=ba:delete qa[U]);qa=wa}else qa=T.call(qa);return qa}function w(qa){return K(qa)&&"[object Arguments]"==
r(qa)}function x(qa,W,ba,oa,wa){qa!==W&&Ba(W,function(Ea,Ga){if(wa||(wa=new p),E(Ea))!function(ya,Ha,Ia,Ka,Ma,Na,La){var Pa=y(ya,Ia),Oa=y(Ha,Ia),Qa=La.get(Oa);if(Qa)return void l(ya,Ia,Qa);Ha=Na?Na(Pa,Oa,Ia+"",ya,Ha,La):void 0;if(Qa=void 0===Ha){var Ra=va(Oa),Sa=!Ra&&xa(Oa),Ua=!Ra&&!Sa&&Da(Oa);Ha=Oa;Ra||Sa||Ua?va(Pa)?Ha=Pa:K(Ta=Pa)&&B(Ta)?Ha=function(Xa,Za){var bb=-1,db=Xa.length;for(Za||(Za=Array(db));++bb<db;)Za[bb]=Xa[bb];return Za}(Pa):Sa?(Qa=!1,Ha=function(Xa,Za){if(Za)return Xa.slice();Za=Xa.length;
Za=ia?ia(Za):new Xa.constructor(Za);return Xa.copy(Za),Za}(Oa,!0)):Ua?(Qa=!1,Va=Oa,Ya=(Wa=Va.buffer,$a=new Wa.constructor(Wa.byteLength),(new na($a)).set(new na(Wa)),$a),Ha=new Va.constructor(Ya,Va.byteOffset,Va.length)):Ha=[]:function(Xa){if(!K(Xa)||"[object Object]"!=r(Xa))return!1;Xa=X(Xa);if(null===Xa)return!0;Xa=ta.call(Xa,"constructor")&&Xa.constructor;return"function"==typeof Xa&&Xa instanceof Xa&&la.call(Xa)==O}(Oa)||Fa(Oa)?(Ha=Pa,Fa(Pa)?Ha=function(Xa){var Za=I(Xa),bb=void 0,db=!bb;bb||(bb=
{});for(var cb=-1,gb=Za.length;++cb<gb;){var ab=Za[cb],hb=void 0;void 0===hb&&(hb=Xa[ab]);if(db)k(bb,ab,hb);else{var fb=bb,ib=fb[ab];ta.call(fb,ab)&&z(ib,hb)&&(void 0!==hb||ab in fb)||k(fb,ab,hb)}}return bb}(Pa):E(Pa)&&!C(Pa)||(Ha=function(Xa){return"function"!=typeof Xa.constructor||A(Xa)?{}:za(X(Xa))}(Oa))):Qa=!1}var Va,Ya,Wa,$a,Ta;Qa&&(La.set(Oa,Ha),Ma(Ha,Oa,Ka,Na,La),La.delete(Oa));l(ya,Ia,Ha)}(qa,W,Ga,ba,x,oa,wa);else{var Ja=oa?oa(y(qa,Ga),Ea,Ga+"",qa,W,wa):void 0;void 0===Ja&&(Ja=Ea);l(qa,Ga,
Ja)}},I)}function D(qa,W){var ba;qa=qa.__data__;return("string"==(ba=typeof W)||"number"==ba||"symbol"==ba||"boolean"==ba?"__proto__"!==W:null===W)?qa["string"==typeof W?"string":"hash"]:qa.map}function G(qa,W){qa=null==qa?void 0:qa[W];if(W=!(!E(qa)||Q&&Q in qa)){W=C(qa)?Z:M;var ba=W.test;a:if(null!=qa){try{var oa=la.call(qa);break a}catch(wa){}oa=qa+""}else oa="";W=ba.call(W,oa)}return W?qa:void 0}function F(qa,W){var ba=typeof qa;return!!(W=null==W?9007199254740991:W)&&("number"==ba||"symbol"!=
ba&&N.test(qa))&&-1<qa&&0==qa%1&&qa<W}function A(qa){var W=qa&&qa.constructor;return qa===("function"==typeof W&&W.prototype||fa)}function y(qa,W){if(("constructor"!==W||"function"!=typeof qa[W])&&"__proto__"!=W)return qa[W]}function z(qa,W){return qa===W||qa!=qa&&W!=W}function B(qa){return null!=qa&&H(qa.length)&&!C(qa)}function C(qa){if(!E(qa))return!1;qa=r(qa);return"[object Function]"==qa||"[object GeneratorFunction]"==qa||"[object AsyncFunction]"==qa||"[object Proxy]"==qa}function H(qa){return"number"==
typeof qa&&-1<qa&&0==qa%1&&9007199254740991>=qa}function E(qa){var W=typeof qa;return null!=qa&&("object"==W||"function"==W)}function K(qa){return null!=qa&&"object"==typeof qa}function I(qa){if(B(qa)){var W=va(qa),ba=!W&&Fa(qa),oa=!W&&!ba&&xa(qa),wa=!W&&!ba&&!oa&&Da(qa);if(W=W||ba||oa||wa){ba=qa.length;for(var Ea=String,Ga=-1,Ja=Array(ba);++Ga<ba;)Ja[Ga]=Ea(Ga);ba=Ja}else ba=[];Ea=ba.length;for(var ya in qa)W&&("length"==ya||oa&&("offset"==ya||"parent"==ya)||wa&&("buffer"==ya||"byteLength"==ya||
"byteOffset"==ya)||F(ya,Ea))||ba.push(ya);qa=ba}else if(E(qa)){ya=A(qa);wa=[];for(oa in qa)("constructor"!=oa||!ya&&ta.call(qa,oa))&&wa.push(oa);qa=wa}else{ya=[];if(null!=qa)for(wa in Object(qa))ya.push(wa);qa=ya}return qa}function L(qa){return qa}var M=/^\[object .+?Constructor\]$/,N=/^(?:0|[1-9]\d*)$/,P={};P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=
P["[object Uint32Array]"]=!0;P["[object Arguments]"]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object Boolean]"]=P["[object DataView]"]=P["[object Date]"]=P["[object Error]"]=P["[object Function]"]=P["[object Map]"]=P["[object Number]"]=P["[object Object]"]=P["[object RegExp]"]=P["[object Set]"]=P["[object String]"]=P["[object WeakMap]"]=!1;var R="object"==typeof q&&q&&q.Object===Object&&q;q="object"==typeof self&&self&&self.Object===Object&&self;q=R||q||Function("return this")();var Y=a&&
!a.nodeType&&a,ja=Y&&"object"==typeof t&&t&&!t.nodeType&&t;R=(Y=ja&&ja.exports===Y)&&R.process;a:{try{var aa=ja&&ja.require&&ja.require("util").types||R&&R.binding&&R.binding("util");break a}catch(qa){}aa=void 0}aa=aa&&aa.isTypedArray;var da,ra,ca;R=Array.prototype;var fa=Object.prototype;ja=q["__core-js_shared__"];var la=Function.prototype.toString,ta=fa.hasOwnProperty,Q=(da=/[^.]+$/.exec(ja&&ja.keys&&ja.keys.IE_PROTO||""))?"Symbol(src)_1."+da:"",T=fa.toString,O=la.call(Object),Z=RegExp("^"+la.call(ta).replace(/[\\^$.*+?()[\]{}|]/g,
"\\$\x26").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");da=Y?q.Buffer:void 0;Y=q.Symbol;var na=q.Uint8Array,ia=da?da.allocUnsafe:void 0,X=(ra=Object.getPrototypeOf,ca=Object,function(qa){return ra(ca(qa))}),ha=Object.create,V=fa.propertyIsEnumerable,ea=R.splice,U=Y?Y.toStringTag:void 0,ka=function(){try{var qa=G(Object,"defineProperty");return qa({},"",{}),qa}catch(W){}}();da=da?da.isBuffer:void 0;var ma=Math.max,sa=Date.now,pa=G(q,"Map"),Aa=G(Object,"create"),za=
function(){function qa(){}return function(W){if(!E(W))return{};if(ha)return ha(W);qa.prototype=W;W=new qa;return qa.prototype=void 0,W}}();g.prototype.clear=function(){this.__data__=Aa?Aa(null):{};this.size=0};g.prototype.delete=function(qa){qa=this.has(qa)&&delete this.__data__[qa];return this.size-=qa?1:0,qa};g.prototype.get=function(qa){var W=this.__data__;return Aa?(qa=W[qa],"__lodash_hash_undefined__"===qa?void 0:qa):ta.call(W,qa)?W[qa]:void 0};g.prototype.has=function(qa){var W=this.__data__;
return Aa?void 0!==W[qa]:ta.call(W,qa)};g.prototype.set=function(qa,W){var ba=this.__data__;return this.size+=this.has(qa)?0:1,ba[qa]=Aa&&void 0===W?"__lodash_hash_undefined__":W,this};m.prototype.clear=function(){this.__data__=[];this.size=0};m.prototype.delete=function(qa){var W=this.__data__;qa=n(W,qa);return!(0>qa)&&(qa==W.length-1?W.pop():ea.call(W,qa,1),--this.size,!0)};m.prototype.get=function(qa){var W=this.__data__;qa=n(W,qa);return 0>qa?void 0:W[qa][1]};m.prototype.has=function(qa){return-1<
n(this.__data__,qa)};m.prototype.set=function(qa,W){var ba=this.__data__,oa=n(ba,qa);return 0>oa?(++this.size,ba.push([qa,W])):ba[oa][1]=W,this};v.prototype.clear=function(){this.size=0;this.__data__={hash:new g,map:new (pa||m),string:new g}};v.prototype.delete=function(qa){qa=D(this,qa).delete(qa);return this.size-=qa?1:0,qa};v.prototype.get=function(qa){return D(this,qa).get(qa)};v.prototype.has=function(qa){return D(this,qa).has(qa)};v.prototype.set=function(qa,W){var ba=D(this,qa),oa=ba.size;
return ba.set(qa,W),this.size+=ba.size==oa?0:1,this};p.prototype.clear=function(){this.__data__=new m;this.size=0};p.prototype.delete=function(qa){var W=this.__data__;qa=W.delete(qa);return this.size=W.size,qa};p.prototype.get=function(qa){return this.__data__.get(qa)};p.prototype.has=function(qa){return this.__data__.has(qa)};p.prototype.set=function(qa,W){var ba=this.__data__;if(ba instanceof m){var oa=ba.__data__;if(!pa||199>oa.length)return oa.push([qa,W]),this.size=++ba.size,this;ba=this.__data__=
new v(oa)}return ba.set(qa,W),this.size=ba.size,this};var Ba=function(qa,W,ba){var oa=-1,wa=Object(qa);ba=ba(qa);for(var Ea=ba.length;Ea--;){var Ga=ba[++oa];if(!1===W(wa[Ga],Ga,wa))break}return qa},ua=function(qa){var W=0,ba=0;return function(){var oa=sa(),wa=16-(oa-ba);if(ba=oa,0<wa){if(800<=++W)return arguments[0]}else W=0;return qa.apply(void 0,arguments)}}(ka?function(qa,W){return ka(qa,"toString",{configurable:!0,enumerable:!1,value:(ba=W,function(){return ba}),writable:!0});var ba}:L),Fa=w(function(){return arguments}())?
w:function(qa){return K(qa)&&ta.call(qa,"callee")&&!V.call(qa,"callee")},va=Array.isArray,xa=da||function(){return!1},Da=aa?function(qa){return function(W){return qa(W)}}(aa):function(qa){return K(qa)&&H(qa.length)&&!!P[r(qa)]},Ca;q=(Ca=function(qa,W,ba,oa){x(qa,W,ba,oa)},function(qa,W){return ua(function(ba,oa,wa){return oa=ma(void 0===oa?ba.length-1:oa,0),function(){for(var Ea=arguments,Ga=-1,Ja=ma(Ea.length-oa,0),ya=Array(Ja);++Ga<Ja;)ya[Ga]=Ea[oa+Ga];Ga=-1;for(Ja=Array(oa+1);++Ga<oa;)Ja[Ga]=Ea[Ga];
return Ja[oa]=wa(ya),u(ba,this,Ja)}}(qa,W,L),qa+"")}(function(qa,W){var ba=-1,oa=W.length,wa=1<oa?W[oa-1]:void 0,Ea=2<oa?W[2]:void 0;wa=3<Ca.length&&"function"==typeof wa?(oa--,wa):void 0;var Ga;if(Ga=Ea){Ga=W[0];var Ja=W[1];if(E(Ea)){var ya=typeof Ja;Ga=!!("number"==ya?B(Ea)&&F(Ja,Ea.length):"string"==ya&&Ja in Ea)&&z(Ea[Ja],Ga)}else Ga=!1}Ga&&(wa=3>oa?void 0:wa,oa=1);for(qa=Object(qa);++ba<oa;)(Ea=W[ba])&&Ca(qa,Ea,ba,wa);return qa}));t.exports=q}).call(this,e(165),e(352)(b))},383:function(b,a,e){e.d(a,
"a",function(){return t});var q=e(1);b=e(15);var t=Object(b.a)(function(u,g){return u?Object(q.g)(Object(q.g)([],g,!0),["(group:".concat(u.id,")")],!1):g})},384:function(b,a,e){e.d(a,"a",function(){return t});var q=e(1);b=e(15);var t=Object(b.a)(function(u,g,m){if(u)switch(u.value){case "authoritative":return g&&g.orgId&&!g.portal.isPortal?Object(q.g)(Object(q.g)([],m,!0),["((contentstatus:org_authoritative orgid:".concat(g.orgId,") OR contentstatus:public_authoritative)")],!1):g&&g.orgId&&g.portal.isPortal?
Object(q.g)(Object(q.g)([],m,!0),["((contentstatus:org_authoritative) OR contentstatus:public_authoritative)"],!1):Object(q.g)(Object(q.g)([],m,!0),["(contentstatus:public_authoritative)"],!1);case "deprecated":return Object(q.g)(Object(q.g)([],m,!0),["(contentstatus:deprecated)"],!1)}return m})},385:function(b,a,e){e.d(a,"a",function(){return t});var q=e(1);b=e(15);var t=Object(b.a)(function(u,g){return u?Object(q.g)(Object(q.g)([],g,!0),["(access:".concat(u.value,")")],!1):g})},386:function(b,a,
e){e.d(a,"a",function(){return t});var q=e(1);b=e(15);var t=Object(b.a)(function(u,g){return u&&(u=function(m){for(var v,p=0,l=Object.keys(m);p<l.length;p++){var n=m[l[p]];if(n.selected){v=n.items;break}n=n.participants.filter(function(k){return k.selected});if(0<n.length){v=n[0].items;break}}return v}(u))?(u=u.join(" OR "),Object(q.g)(Object(q.g)([],g,!0),["id:(".concat(u,")")],!1)):g})},387:function(b,a,e){e.d(a,"a",function(){return u});b=e(60);var q=e.n(b),t=e(33),u=function(g,m,v,p){function l(B){F=
B.categorySchema[0].source.split(".")[1];Object(t.e)(g,m,v.contentCategorySetsGroupQuery).then(n,D);B=p;Object(t.v)(g,"".concat(m.restUrl,"/portals/regions"),{culture:B}).then(w,D)}function n(B){if(B.results[0]){B=B.results[0].id;var C=F;Object(t.v)(g,"".concat(m.restUrl,"/content/groups/").concat(B,"/search"),{q:"typekeywords: ".concat(C)}).then(k,D)}else D("The content category sets group could not be found.")}function k(B){1===B.results.length&&B.results[0]?Object(t.h)(g,m,B.results[0].id).then(r,
D):D("The item containing the living atlas categories could not be determined.")}function r(B){A=B.categorySchema[0];v.isPortal&&y?x([A]):y&&x([A,y])}function w(B){y={categories:B.map(function(C){return{displayName:C.localizedName,title:C.region}}).sort(function(C,H){return"wo"===C.title.toLowerCase()?-1:C.displayName.localeCompare(H.displayName)}),description:"2.0",displayName:"Regions",title:"region"};v.isPortal&&A?x([A]):A&&x([A,y])}function x(B){z.resolve({schema:B,id:G})}function D(B){z.reject(B)}
void 0===p&&(p="en");var G,F,A,y,z=new q.a;return Object(t.e)(g,m,v.livingAtlasGroupQuery,(null==m?0:m.isPortal)?{sortField:"title",sortOrder:"asc"}:{}).then(function(B){B.results[0]&&B.results[0].id?(G=B.results[0].id,Object(t.f)(g,m,G).then(l,D)):D("The living atlas group could not be found.")},D),z}},392:function(b,a,e){e.d(a,"a",function(){return q});e.d(a,"b",function(){return t});var q="CHANGE_SEARCH_STRING",t=function(u){return{type:q,payload:u}}},393:function(b,a,e){e.d(a,"b",function(){return q});
e.d(a,"a",function(){return t});var q="SHOW_EMPTY_RESULTS",t="CHANGE_RESULT_DISPLAY"},47:function(b,a,e){function q(C){return!(!C.urlKey||!C.customBaseUrl)||C.isPortal}function t(C){return C.role===x.admin||C.role===x.accountAdmin}function u(C){return Object(F.a)(C.roleId)&&0<(C.roleId||"").length}function g(C){return"Developer Subscription"===C}function m(C){return!u(C)||u(C)&&-1<(C.privileges||[]).indexOf("portal:admin:viewItems")}function v(C){return-1<(C.privileges||[]).indexOf("portal:user:shareToOrg")}
function p(C){return-1<(C.privileges||[]).indexOf("portal:user:shareToGroup")}function l(C){return-1<(C.privileges||[]).indexOf("portal:user:shareToPublic")}function n(C,H){return k(C)||r(C)||w(C)}function k(C){return-1<(C.privileges||[]).indexOf("portal:admin:shareToGroup")}function r(C){return-1<(C.privileges||[]).indexOf("portal:admin:shareToOrg")}function w(C){return-1<(C.privileges||[]).indexOf("portal:admin:shareToPublic")}e.d(a,"m",function(){return y});e.d(a,"h",function(){return z});e.d(a,
"n",function(){return B});e.d(a,"l",function(){return q});e.d(a,"i",function(){return t});e.d(a,"j",function(){return u});e.d(a,"k",function(){return g});e.d(a,"g",function(){return m});e.d(a,"b",function(){return v});e.d(a,"a",function(){return p});e.d(a,"c",function(){return l});e.d(a,"d",function(){return k});e.d(a,"e",function(){return r});e.d(a,"f",function(){return w});var x,D=e(64),G=e(142),F=e(7),A=e(61);!function(C){C.user="org_user";C.accountUser="account_user";C.publisher="org_publisher";
C.accountPublisher="account_publisher";C.admin="org_admin";C.accountAdmin="account_admin";C.viewer="iAAAAAAAAAAAAAAA";C.dataEditor="iBBBBBBBBBBBBBBB"}(x||(x={}));var y=function(C){var H=C.items;return!!C.user.orgId&&H.every(function(E){return E.isOrgItem})},z=function(C){var H=C.items,E=C.user,K=C.portal;C=H[0];var I=Object(A.c)(C,E),L=u(E),M=n(E,K);if(L=Object(A.a)(C,E)&&-1<(E.privileges||[]).indexOf("portal:admin:updateItems")&&!L)L=!q(K)||p(E)||v(E)||K.canSharePublic&&l(E)||n(E,K);K=L;L=C.owner;
return!(C.portal.isPortal&&L!==E.username&&L.includes("esri_")&&!["esri_livingatlas"].includes(L))&&(I||K||y({items:H,user:E})&&M)},B=function(C,H){return Object(D.a)(Object(G.a)(C))(H)}},55:function(b,a,e){function q(P,R,Y){var ja=R.settings.utils.request,aa=Object(g.b)({},R);aa=ja(aa[0],aa[1]).then(Object(m.a)(R),function(ra){return P({type:B,payload:ra})});if(Y){Y=Object(g.a)(R,["access","contentstatus","categories"]);var da=ja(Y[0],Y[1])}ja=[aa,da].filter(function(ra){return ra});v()(ja).then(function(ra){P(function(ca,
fa){var la,ta,Q=fa[0],T=fa[1];fa=fa[2];var O=Object(G.a)(ca),Z=ca.settings.utils.iconDir;return{type:z,payload:{search:Object(t.a)(Object(t.a)({},Q.data),{results:Q.data.results.map(function(na){return Object(p.a)(O,Z,na)})}),aggregations:(null===(la=null==T?void 0:T.data)||void 0===la?0:la.aggregations)?{counts:Object(t.g)([],T.data.aggregations.counts,!0).concat((null===(ta=null==fa?void 0:fa.data)||void 0===ta?0:ta.aggregations)?Object(t.g)([],fa.data.aggregations.counts,!0):[]),countInfo:{section:ca.parameters.section,
group:ca.parameters.filter.group,custom:ca.settings.config.customSections.filter(function(na){return na.name===ca.parameters.section})[0]}}:void 0}}}(R,ra));P(A.e)},function(ra){return P({type:B,payload:ra})})}e.d(a,"a",function(){return y});e.d(a,"c",function(){return z});e.d(a,"b",function(){return B});e.d(a,"d",function(){return C});e.d(a,"f",function(){return H});e.d(a,"e",function(){return E});e.d(a,"g",function(){return K});e.d(a,"h",function(){return I});e.d(a,"i",function(){return L});var t=
e(1),u=e(98),g=e(173),m=e(215);b=e(65);var v=e.n(b),p=e(80),l=e(308),n=e(309),k=e(168),r=e(258),w=e(310),x=e(256),D=e(92),G=e(123),F=e(250),A=e(198),y="LOADING_CONTENT",z="LOADING_CONTENT_SUCCESS",B="LOADING_CONTENT_FAILED",C="LOADING_NEXT",H="LOADING_NEXT_SUCCESS",E="LOADING_NEXT_FAILED",K="SUBSCRIPTION_CONTENT_SUCCESS",I=function(P){return function(R,Y){var ja=Y();Y=ja.settings.utils.request;var aa=ja.parameters.nextQuery.nextStart;R({type:C});aa=Object(g.b)({num:P,start:aa},ja);Y(aa[0],aa[1]).then(Object(m.a)(ja),
function(da){return R({type:E,payload:da})}).then(function(da){return R(N(ja,da))},function(da){return R({type:E,payload:da})})}},L=function(P){return function(R,Y){Y=Y();R({type:y});Y.settings.config.clearSelectionBetweenSearches&&R({type:u.b});R(M(P))}},M=function(P){return function(R,Y){var ja=Y(),aa=ja.parameters.section,da=ja.settings.utils.portal.user,ra=!!da,ca=ja.settings.utils.portal,fa=ca.isPortal,la=da&&"org_admin"===da.role,ta=da&&da.privileges&&-1<da.privileges.indexOf("portal:admin:manageCollaborations"),
Q=da&&!fa&&da.orgId&&ca.subscriptionInfo&&-1<["Trial","Trial Press","Trial Developer","Evaluation"].indexOf(ca.subscriptionInfo.type);R(Object(l.b)()).then(function(T){"livingAtlas"===aa||"Living Atlas"===aa?R(Object(n.d)(T)).then(function(){return q(R,Y(),P)},function(){return R({type:B,payload:"Couldn't load the living atlas info."})}):"myContent"!==aa&&"myGroups"!==aa&&"myFavorites"!==aa&&"subscription"!==aa||!ra?"myOrganization"===aa&&ra?v()([R(Object(r.d)())].concat(la&&ta&&!Q?[R(Object(w.a)(R,
Y()))]:[])).then(function(){return q(R,Y(),P)},function(){return R({type:B,payload:"Couldn't load the organization info."})}):Object(D.e)(ja.settings.config.customSections,aa)?R(Object(x.e)()).then(function(){return q(R,Y(),P)},function(){return R({type:B,payload:"Couldn't load the custom section info."})}):q(R,ja,P):v()([R(Object(k.l)())].concat(ra&&da.orgId?[R(Object(r.d)())]:[]).concat(la&&ta&&!Q?[R(Object(w.a)(R,Y()))]:[])).then(function(){return"subscription"===aa?R(Object(F.d)()).then(function(){return R({type:K,
payload:Y().results.provisionedContent.content})},function(){return R({type:B,payload:"Couldn't load provisioned content info."})}):q(R,Y(),P)},function(){return R({type:B,payload:"Couldn't load the user info."})})})}},N=function(P,R){var Y=P.settings.utils.iconDir,ja=Object(G.a)(P);return{type:H,payload:Object(t.a)(Object(t.a)({},R.data),{results:R.data.results.map(function(aa){return Object(p.a)(ja,Y,aa)})})}}},56:function(b,a,e){e.d(a,"d",function(){return q});e.d(a,"n",function(){return t});e.d(a,
"i",function(){return u});e.d(a,"j",function(){return g});e.d(a,"m",function(){return m});e.d(a,"f",function(){return v});e.d(a,"h",function(){return p});e.d(a,"l",function(){return l});e.d(a,"c",function(){return n});e.d(a,"p",function(){return k});e.d(a,"g",function(){return r});e.d(a,"e",function(){return w});e.d(a,"q",function(){return x});e.d(a,"k",function(){return D});e.d(a,"o",function(){return G});e.d(a,"r",function(){return F});e.d(a,"b",function(){return A});e.d(a,"a",function(){return y});
e.d(a,"u",function(){return z});e.d(a,"E",function(){return B});e.d(a,"y",function(){return C});e.d(a,"D",function(){return H});e.d(a,"z",function(){return E});e.d(a,"A",function(){return K});e.d(a,"w",function(){return I});e.d(a,"C",function(){return L});e.d(a,"t",function(){return M});e.d(a,"G",function(){return N});e.d(a,"v",function(){return P});e.d(a,"x",function(){return R});e.d(a,"H",function(){return Y});e.d(a,"B",function(){return ja});e.d(a,"F",function(){return aa});e.d(a,"I",function(){return da});
e.d(a,"s",function(){return ra});var q="UPDATE_CUSTOM_FILTER",t="UPDATE_ORG_GROUP_FILTER",u="UPDATE_LIVING_ATLAS_CATEGORIES_FILTER",g="UPDATE_LIVING_ATLAS_REGION_FILTER",m="UPDATE_ORG_CATEGORIES_FILTER",v="UPDATE_GROUP_CATEGORIES_FILTER",p="UPDATE_ITEM_TYPE_FILTER",l="UPDATE_MODIFIED_FILTER",n="UPDATE_CREATED_FILTER",k="UPDATE_SHARED_FILTER",r="UPDATE_GROUP_FILTER",w="UPDATE_FOLDER_FILTER",x="UPDATE_STATUS_FILTER",D="UPDATE_MAP_AREA_FILTER",G="UPDATE_SEARCH_ORG_FILTER",F="UPDATE_TAGS_FILTER",A="UPDATE_COLLABORATIONS_FILTER",
y="CLEAR_ALL_FILTERS",z=function(ca,fa){return{type:q,payload:{index:ca,filter:fa}}},B=function(ca){return{type:t,payload:ca}},C=function(ca){return{type:p,payload:ca}},H=function(ca){return{type:m,payload:ca}},E=function(ca){return{type:u,payload:ca}},K=function(ca){return{type:g,payload:ca}},I=function(ca){return{type:v,payload:ca}},L=function(ca,fa){return{type:l,payload:{section:ca,modified:fa}}},M=function(ca,fa){return{type:n,payload:{section:ca,created:fa}}},N=function(ca){return{type:k,payload:ca}},
P=function(ca){return{type:w,payload:ca}},R=function(ca){return{type:r,payload:ca}},Y=function(ca){return{type:x,payload:ca}},ja=function(ca){return{type:D,payload:ca}},aa=function(ca){return{type:G,payload:ca}},da=function(ca){return{type:F,payload:ca}},ra=function(ca){return{type:A,payload:ca}}},60:function(b,a){b.exports=f},61:function(b,a,e){function q(p,l){return(null==p?void 0:p.owner)===l.username}function t(p,l){var n;if(!(n=q(p,l)))if(Object(g.a)(p.isAdmin))n=!!p.isAdmin;else{n=p.owner;var k=
"admin"===p.itemControl;n=!(p.portal.isPortal&&!q(p,l)&&k&&-1<n.indexOf("esri_")&&0>["esri_livingatlas","esri_demographics","esri_boundaries"].indexOf(n))&&k}return n}function u(p,l){return t(p,l)||"update"===p.itemControl}e.d(a,"d",function(){return q});e.d(a,"c",function(){return t});e.d(a,"a",function(){return u});e.d(a,"b",function(){return v});var g=e(7),m=e(47),v=function(p){var l=p.user,n=p.items;p=p.portal;return Object(m.m)({items:n,user:l})&&Object(m.h)({items:n,user:l,portal:p})&&Object(m.g)(l)&&
n[0].itemOwner||l}},64:function(b,a,e){function q(){for(var t=[],u=0;u<arguments.length;u++)t[u]=arguments[u];return function(g){return t.reduceRight(function(m,v){return v(m)},g)}}e.d(a,"a",function(){return q})},65:function(b,a){b.exports=c},680:function(b,a,e){function q(G,F){var A,y,z=F.settings.utils.telemetry,B={pageName:F.settings.utils.appName||window.location.href,facetValue:{myContent:"my content",myFavorites:"my fav",myGroups:"my groups",myOrganization:"my org",livingAtlas:"living atlas",
all:"arcgis online"}[F.parameters.section]||"other"};if(G.type===g.a)return(null==z?void 0:z.getWorkflow("item browser"))&&z.cancelWorkflow("item browser"),void(null==z||z.startWorkflow("item browser",B));var C=null==z?void 0:z.getWorkflow("item browser");if(z&&C)switch(G.type){case m.a:case v.a:z.stepWorkflow("item browser","search",Object(t.a)(Object(t.a)({},B),{details:(null===(A=F.parameters.searchString)||void 0===A?void 0:A.current)||"",attribute:Object(x.a)(F)?"enriched":void 0,searchQuery:Object(D.b)(F)}));
break;case p.a:z.stepWorkflow("item browser","sort",Object(t.a)(Object(t.a)({},B),{details:G.payload}));break;case l.a:z.stepWorkflow("item browser","list"===F.ui.resultPanel.display?"list view":"compact view",Object(t.a)({},B));break;case n.c:z.stepWorkflow("item browser","pagination",Object(t.a)(Object(t.a)({},B),{details:G.payload}));break;case k.e:case k.h:case k.l:case k.c:case k.r:case k.p:z.stepWorkflow("item browser","filter",Object(t.a)(Object(t.a)({},B),{details:G.type.split("_").join(" ").toLowerCase()}));
break;case r.f:z.stepWorkflow("item browser","select all on page",Object(t.a)({},B));break;case w.a:z.stepWorkflow("item browser","card action",Object(t.a)(Object(t.a)({},B),{details:"view item details"}));break;case u.SELECT_ITEM:z.stepWorkflow("item browser","card action",Object(t.a)(Object(t.a)({},B),{details:"add"}));break;case u.DESELECT_ITEM:z.stepWorkflow("item browser","card action",Object(t.a)(Object(t.a)({},B),{details:"remove"}));break;case r.k:G=F.results.selectedItems[G.payload.id]?"select":
"deselect";z.stepWorkflow("item browser","card action",Object(t.a)(Object(t.a)({},B),{details:G}));break;case r.d:z.endWorkflow("item browser",Object(t.a)(Object(t.a)({},B),{count:null===(y=G.payload)||void 0===y?void 0:y.length}));break;case r.a:z.cancelWorkflow("item browser",Object(t.a)({},B))}}e.d(a,"a",function(){return q});var t=e(1),u=e(227),g=e(308),m=e(275),v=e(392),p=e(277),l=e(393),n=e(280),k=e(56),r=e(98),w=e(342),x=e(341),D=e(182)},7:function(b,a,e){function q(n){return 0===Object.keys(n).length&&
n.constructor===Object}function t(n){return null!=n}function u(n,k){return p.apply(null,arguments)}function g(n,k){return l.apply(null,arguments)}e.d(a,"b",function(){return q});e.d(a,"a",function(){return t});e.d(a,"e",function(){return v});e.d(a,"c",function(){return u});e.d(a,"d",function(){return g});var m=e(1);b=e(15);var v=Object(b.a)(function(n,k){k=Object(m.a)({},k);return delete k[n],k}),p=Object(b.a)(function(n,k){return Object.keys(k).reduce(function(r,w){return r[w]=n(k[w],w,k),r},{})}),
l=Object(b.a)(function(n,k){return Object.keys(k).reduce(function(r,w){return n(k[w],w,k)&&(r[w]=k[w]),r},{})})},80:function(b,a,e){e.d(a,"a",function(){return p});e.d(a,"b",function(){return l});var q=e(64);b=e(7);var t=e(120),u=e(119),g=e(114),m=e(118),v=e(117),p=function(n,k,r){return Object(q.a)(Object(v.a)(n),Object(m.a)(n),Object(g.a)(k),Object(u.a)(n),Object(t.a)(n))(r)},l=Object(q.a)(Object(b.e)("patchedDescription"),Object(b.e)("thumbURI"),Object(b.e)("iconURI"),Object(b.e)("displayName"),
Object(b.e)("badges"))},92:function(b,a,e){function q(p){return!(!m(p)&&!v(p))}function t(p,l){return p.filter(function(n){return n.name===l})[0]}function u(p,l){return!!t(p,l)}e.d(a,"a",function(){return g});e.d(a,"c",function(){return m});e.d(a,"d",function(){return v});e.d(a,"f",function(){return q});e.d(a,"b",function(){return t});e.d(a,"e",function(){return u});b=e(15);var g=function(p){return p.filters?p.filters.filter(function(l){return"object"==typeof l&&("group"===l.type||"org"===l.type)}):
[]};b=Object(b.a)(function(p,l){if(l.filters)return l.filters.reduce(function(n,k){return"object"==typeof k&&k.type===p?k:n},void 0)});var m=b("group"),v=b("org")},946:function(b,a,e){e.r(a);e.d(a,"ItemBrowserWrapper",function(){return r});var q=e(1),t=e(227),u=e.n(t),g=e(17);b=e(372);var m=e.n(b);b=e(319);var v=e.n(b),p=e(33),l=e(114),n=e(98),k=e(680);e.d(a,"changeSearchSection",function(){return t.changeSearchSection});e.d(a,"initialState",function(){return t.initialState});e.d(a,"search",function(){return t.search});
e.d(a,"updateExtent",function(){return t.updateExtent});e.d(a,"viewItemDetails",function(){return t.viewItemDetails});var r=function(){function w(x,D){var G,F;this.options=D;this.listener=this.listener.bind(this);this.renderContainer=document.createElement("div");this.renderContainer.style.width="100%";this.renderContainer.style.height="100%";this.renderContainer.id="item-browser-wrapper";x.appendChild(this.renderContainer);x=v()(t.initialState);var A=v()(D.initialState);x=m()(x,A,function(y,z){if(Array.isArray(y)&&
z)return z});this.initialState=Object(q.a)(Object(q.a)({},x),{settings:Object(q.a)(Object(q.a)({},x.settings),{utils:{telemetry:D.telemetry,appName:D.appName,request:4===D.apiVersion?D.request:Object(p.u)(D.request),portal:4===D.apiVersion?D.portal:Object(q.a)(Object(q.a)({},D.portal),{restUrl:D.portal.portalUrl.slice(0,-1),credential:null===(G=D.portal.user)||void 0===G?void 0:G.credential}),iconDir:4===D.apiVersion?window.require.toUrl("esri/images/portal"):window.require.toUrl("esri/css/images/item_type_icons")}})});
G=D.middlewares||[];(null===(F=D.telemetry)||void 0===F?0:F.getWorkflow("item browser"))&&D.telemetry.cancelWorkflow("item browser");this.store=g.applyMiddleware.apply(void 0,Object(q.g)([g.thunk,Object(g.addListener)(k.a),Object(g.addListener)(this.listener)],G,!1))(g.createStore)(t.reducers,this.initialState);this.projector=Object(g.createProjector)(this.store,function(y){return y(u.a,{key:"ib"})},this.renderContainer);this.store.dispatch(Object(t.search)(!0));this.handleInitiallySelectedItemsDfd()}
return w.prototype.handleInitiallySelectedItemsDfd=function(){var x=this,D=this.getState().settings,G=D.config.initiallySelectedItemsDfd,F=D.utils.iconDir;G?G.then(function(A){var y=Object.keys(A).map(function(z){return Object(l.a)(F,Object(q.a)({},A[z]))}).reduce(function(z,B){var C;return Object(q.a)(Object(q.a)({},z),((C={})[B.id]=B,C))},{});x.store.dispatch(Object(n.p)(y))}):this.store.dispatch(Object(n.p)({}))},w.prototype.shimmedRequest=function(x,D){var G,F=Object(q.a)({},D.query);return(null===
(G=this.options.portal.user)||void 0===G?void 0:G.credential)&&-1<x.indexOf(this.options.portal.restUrl)&&(F.token=this.options.portal.user.credential.token),this.options.request({url:x,content:D.query},{usePost:"post"===D.method}).then(function(A){return{data:A}})},w.prototype.dispatch=function(x){var D;null===(D=this.store)||void 0===D||D.dispatch(x)},w.prototype.getState=function(){var x;return(null===(x=this.store)||void 0===x?void 0:x.getState())||this.initialState},w.prototype.listener=function(x,
D){var G,F;null===(F=null===(G=this.options)||void 0===G?void 0:G.listener)||void 0===F||F.call(G,x,D)},w}()},97:function(b,a,e){function q(p,l){if(null==p?0:p.length)for(var n=void 0,k=0;k<p.length;k++)if(l(n=p[k]))return n}function t(p){return p.filter(function(l){return 0<l.length})}function u(p,l,n){var k=[];return l.forEach(function(r){(n?r[n].toLowerCase()===p.toLowerCase():r.toLowerCase()===p.toLowerCase())?k.unshift(r):k.push(r)}),k}e.d(a,"e",function(){return g});e.d(a,"f",function(){return m});
e.d(a,"c",function(){return q});e.d(a,"b",function(){return t});e.d(a,"a",function(){return v});e.d(a,"d",function(){return u});b=e(15);var g=function(p,l,n){return n.indexOf(p)===l},m=Object(b.a)(function(p,l){var n={};return l.filter(function(k){return!n[k[p]]&&(n[k[p]]=!0,!0)})}),v=function(p,l){return p.length===l.length&&p.reduce(function(n,k){return n&&-1<l.indexOf(k)},!0)}},98:function(b,a,e){e.d(a,"g",function(){return u});e.d(a,"k",function(){return g});e.d(a,"j",function(){return m});e.d(a,
"h",function(){return v});e.d(a,"i",function(){return p});e.d(a,"c",function(){return l});e.d(a,"b",function(){return n});e.d(a,"f",function(){return k});e.d(a,"e",function(){return r});e.d(a,"d",function(){return w});e.d(a,"a",function(){return x});e.d(a,"r",function(){return D});e.d(a,"n",function(){return G});e.d(a,"s",function(){return F});e.d(a,"o",function(){return A});e.d(a,"q",function(){return y});e.d(a,"p",function(){return z});e.d(a,"l",function(){return B});e.d(a,"m",function(){return C});
var q=e(80),t=e(55),u="SELECT_ITEM",g="TOGGLE_ITEM",m="SELECT_ITEM_SINGLE",v="SELECT_ITEM_ASYNC",p="SELECT_ITEM_ASYNC_FAILED",l="DESELECT_ITEM",n="DESELECT_ALL",k="SELECT_ALL",r="SELECT_ALL_FROM_QUERY_SUCCESS",w="END_BULK_WORKFLOW",x="CANCEL_BULK_WORKFLOW",D=function(H){return function(E,K){var I=K();I.settings.config.asynchronousItemSelect?(E({type:v,payload:H}),K=I.settings.config.onSelect([Object(q.b)(H)]),(null==K?0:K.then)&&K.then(function(){I.settings.config.singleItemSelect?E({type:m,payload:H}):
E({type:u,payload:H})},function(){E({type:p,payload:H})})):I.settings.config.singleItemSelect?(E({type:m,payload:H}),I.settings.config.onSelect([Object(q.b)(H)])):(E({type:u,payload:H}),I.settings.config.onSelect([Object(q.b)(H)]))}},G=function(H,E){E=E();if(E.settings.config.disableInitiallySelectedItems){E=E.results;var K=E.selectedItems,I=E.initiallySelectedItems;Object.keys(K).map(function(L){return K[L]}).filter(function(L){return!I[L.id]}).forEach(function(L){H({type:l,payload:L})})}else H({type:n})},
F=function(H){return{type:g,payload:H}},A=function(H){return function(E,K){K=K();E({type:l,payload:H});K.settings.config.onDeselect([Object(q.b)(H)])}},y=function(){return function(H,E){E=E();H({type:k,payload:E.ui.pagination.displayItems})}},z=function(H){return{type:r,payload:H}},B=function(H,E){E=null==E?void 0:E();H({type:x});null==E||E.settings.config.onBack()},C=function(H,E){var K=null==E?void 0:E();if(null==K?0:K.settings.config.onBulkAction){E=K.settings.config.onBulkAction;K=K.results;var I=
K.selectedItems,L=K.initiallySelectedItems;K=Object.keys(L).map(function(R){return L[R]});var M=Object.keys(I).map(function(R){return I[R]}),N=K.filter(function(R){return!I[R.id]}),P=M.filter(function(R){return!L[R.id]});H({type:t.a});H({type:w,payload:P});E({initiallySelectedItems:K,allSelectedItems:M,newlySelectedItems:P,deselectedItems:N})}}},99:function(b,a,e){e.d(a,"a",function(){return t});e.d(a,"b",function(){return u});var q=e(1),t=function(g){return g?g.urlKey?"".concat(location.protocol,
"//").concat(g.urlKey,".").concat(g.customBaseUrl):"".concat(location.protocol,"//").concat(g.portalHostname):""},u=function(g){return Object(q.a)(Object(q.a)({},g),{baseUrl:t(g)})}}})})},"arcgis-components/ItemBrowser/index":function(){define("../Component dojo/i18n!../ItemBrowser/nls/resources dojo/Deferred dojo/promise/all dojo/i18n!../GroupBrowser/nls/resources dojo/_base/kernel dojo/date/locale dojo/number ../Loaders/LoaderBars ../Buttons/SvgButton ../Buttons/Toggle dojo/debounce ../Dropdowns/AccordionDropdown/index ../Buttons/IconButton ../Modals/Overlay ../Navigation/TabNav ../Filters/CategoriesFilter/index ../Navigation/Pager/index ../Modals/MobileWrap ../Dropdowns/SortDropdown/index ../Filters/CreatedFilter/index ../Dropdowns/TextOptionDropdown ../Badges/Retired ../Filters/MapAreaFilter ../Filters/ItemTypeFilter/index ../Filters/ModifiedFilter/index ../Filters/SharedFilter/index ../Filters/StatusFilter/index ../Filters/FolderFilter/index ../Filters/GroupFilter/index ../Filters/TagsFilter/index ../Filters/CollaborationFilter/index ../Dropdowns/FilterController/index ../Management/LazyLoader ../ItemCards/AnalysisCard/index ../Badges/Authoritative ../Badges/Collaboration ../Badges/Deprecated ../Badges/LivingAtlas ../Badges/Marketplace ../Badges/OpenData ../Badges/Premium ../Badges/Subscriber ../Badges/Solution ../Badges/Registered ../Badges/PublicDataCollection ../ItemCards/MiniCard/index ../ItemCards/MiniCardRow/index".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E,K,I,L,M,N,P,R,Y,ja,aa,da,ra,ca,fa,la,ta){return function(Q){function T(Z){if(O[Z])return O[Z].exports;var na=O[Z]={i:Z,l:!1,exports:{}};return Q[Z].call(na.exports,na,na.exports,T),na.l=!0,na.exports}var O={};return T.m=Q,T.c=O,T.d=function(Z,na,ia){T.o(Z,na)||Object.defineProperty(Z,na,{enumerable:!0,get:ia})},T.r=function(Z){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Z,Symbol.toStringTag,{value:"Module"});
Object.defineProperty(Z,"__esModule",{value:!0})},T.t=function(Z,na){if((1&na&&(Z=T(Z)),8&na)||4&na&&"object"==typeof Z&&Z&&Z.__esModule)return Z;var ia=Object.create(null);if(T.r(ia),Object.defineProperty(ia,"default",{enumerable:!0,value:Z}),2&na&&"string"!=typeof Z)for(var X in Z)T.d(ia,X,function(ha){return Z[ha]}.bind(null,X));return ia},T.n=function(Z){var na=Z&&Z.__esModule?function(){return Z.default}:function(){return Z};return T.d(na,"a",na),na},T.o=function(Z,na){return Object.prototype.hasOwnProperty.call(Z,
na)},T.p="",T(T.s=823)}([,function(Q,T,O){function Z(ka,ma){function sa(){this.constructor=ka}if("function"!=typeof ma&&null!==ma)throw new TypeError("Class extends value "+String(ma)+" is not a constructor or null");ea(ka,ma);ka.prototype=null===ma?Object.create(ma):(sa.prototype=ma.prototype,new sa)}function na(ka,ma){var sa={},pa;for(pa in ka)Object.prototype.hasOwnProperty.call(ka,pa)&&0>ma.indexOf(pa)&&(sa[pa]=ka[pa]);if(null!=ka&&"function"==typeof Object.getOwnPropertySymbols){var Aa=0;for(pa=
Object.getOwnPropertySymbols(ka);Aa<pa.length;Aa++)0>ma.indexOf(pa[Aa])&&Object.prototype.propertyIsEnumerable.call(ka,pa[Aa])&&(sa[pa[Aa]]=ka[pa[Aa]])}return sa}function ia(ka,ma,sa,pa){var Aa,za=arguments.length,Ba=3>za?ma:null===pa?pa=Object.getOwnPropertyDescriptor(ma,sa):pa;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ba=Reflect.decorate(ka,ma,sa,pa);else for(var ua=ka.length-1;0<=ua;ua--)(Aa=ka[ua])&&(Ba=(3>za?Aa(Ba):3<za?Aa(ma,sa,Ba):Aa(ma,sa))||Ba);return 3<za&&Ba&&Object.defineProperty(ma,
sa,Ba),Ba}function X(ka,ma,sa,pa){return new (sa||(sa=Promise))(function(Aa,za){function Ba(va){try{Fa(pa.next(va))}catch(xa){za(xa)}}function ua(va){try{Fa(pa.throw(va))}catch(xa){za(xa)}}function Fa(va){var xa;va.done?Aa(va.value):(xa=va.value,xa instanceof sa?xa:new sa(function(Da){Da(xa)})).then(Ba,ua)}Fa((pa=pa.apply(ka,ma||[])).next())})}function ha(ka,ma){function sa(Fa){return function(va){return function(xa){if(pa)throw new TypeError("Generator is already executing.");for(;Ba&&(Ba=0,xa[0]&&
(ua=0)),ua;)try{if(pa=1,Aa&&(za=2&xa[0]?Aa.return:xa[0]?Aa.throw||((za=Aa.return)&&za.call(Aa),0):Aa.next)&&!(za=za.call(Aa,xa[1])).done)return za;switch(Aa=0,za&&(xa=[2&xa[0],za.value]),xa[0]){case 0:case 1:za=xa;break;case 4:return ua.label++,{value:xa[1],done:!1};case 5:ua.label++;Aa=xa[1];xa=[0];continue;case 7:xa=ua.ops.pop();ua.trys.pop();continue;default:if(!(za=ua.trys,(za=0<za.length&&za[za.length-1])||6!==xa[0]&&2!==xa[0])){ua=0;continue}if(3===xa[0]&&(!za||xa[1]>za[0]&&xa[1]<za[3]))ua.label=
xa[1];else if(6===xa[0]&&ua.label<za[1])ua.label=za[1],za=xa;else if(za&&ua.label<za[2])ua.label=za[2],ua.ops.push(xa);else{za[2]&&ua.ops.pop();ua.trys.pop();continue}}xa=ma.call(ka,ua)}catch(Da){xa=[6,Da],Aa=0}finally{pa=za=0}if(5&xa[0])throw xa[1];return{value:xa[0]?xa[1]:void 0,done:!0}}([Fa,va])}}var pa,Aa,za,Ba,ua={label:0,sent:function(){if(1&za[0])throw za[1];return za[1]},trys:[],ops:[]};return Ba={next:sa(0),throw:sa(1),return:sa(2)},"function"==typeof Symbol&&(Ba[Symbol.iterator]=function(){return this}),
Ba}function V(ka,ma,sa){if(sa||2===arguments.length)for(var pa,Aa=0,za=ma.length;Aa<za;Aa++)!pa&&Aa in ma||(pa||(pa=Array.prototype.slice.call(ma,0,Aa)),pa[Aa]=ma[Aa]);return ka.concat(pa||Array.prototype.slice.call(ma))}O.d(T,"d",function(){return Z});O.d(T,"a",function(){return U});O.d(T,"f",function(){return na});O.d(T,"c",function(){return ia});O.d(T,"b",function(){return X});O.d(T,"e",function(){return ha});O.d(T,"g",function(){return V});var ea=function(ka,ma){return(ea=Object.setPrototypeOf||
{__proto__:[]}instanceof Array&&function(sa,pa){sa.__proto__=pa}||function(sa,pa){for(var Aa in pa)Object.prototype.hasOwnProperty.call(pa,Aa)&&(sa[Aa]=pa[Aa])})(ka,ma)},U=function(){return(U=Object.assign||function(ka){for(var ma,sa=1,pa=arguments.length;sa<pa;sa++)for(var Aa in ma=arguments[sa])Object.prototype.hasOwnProperty.call(ma,Aa)&&(ka[Aa]=ma[Aa]);return ka}).apply(this,arguments)};Object.create;Object.create},,,,,,function(Q,T,O){function Z(ka){return 0===Object.keys(ka).length&&ka.constructor===
Object}function na(ka){return null!=ka}function ia(ka,ma){return ea.apply(null,arguments)}function X(ka,ma){return U.apply(null,arguments)}O.d(T,"b",function(){return Z});O.d(T,"a",function(){return na});O.d(T,"e",function(){return V});O.d(T,"c",function(){return ia});O.d(T,"d",function(){return X});var ha=O(1);Q=O(15);var V=Object(Q.a)(function(ka,ma){ma=Object(ha.a)({},ma);return delete ma[ka],ma}),ea=Object(Q.a)(function(ka,ma){return Object.keys(ma).reduce(function(sa,pa){return sa[pa]=ka(ma[pa],
pa,ma),sa},{})}),U=Object(Q.a)(function(ka,ma){return Object.keys(ma).reduce(function(sa,pa){return ka(ma[pa],pa,ma)&&(sa[pa]=ma[pa]),sa},{})})},,,,,,,,function(Q,T,O){function Z(ia){return function ha(){for(var V=this,ea=[],U=0;U<arguments.length;U++)ea[U]=arguments[U];return ea.length>=ia.length?ia.call.apply(ia,Object(na.g)([this],ea,!1)):function(){for(var ka=[],ma=0;ma<arguments.length;ma++)ka[ma]=arguments[ma];return ha.call.apply(ha,Object(na.g)(Object(na.g)([V],ea,!1),ka,!1))}}}O.d(T,"a",
function(){return Z});var na=O(1)},,function(Q,T){Q.exports=S},,,,,,,,,,,function(Q,T,O){(function(Z,na){Q.exports=function(){function ia(){var La=setTimeout;return function(){return La(X,1)}}function X(){for(var La=0;La<va;La+=2)(0,wa[La])(wa[La+1]),wa[La]=void 0,wa[La+1]=void 0;va=0}function ha(La,Pa){var Oa=this,Qa=new this.constructor(ea);void 0===Qa[Ia]&&ua(Qa);var Ra=Oa._state;if(Ra){var Sa=arguments[Ra-1];Ca(function(){return Ba(Ra,Qa,Sa,Oa._result)})}else Aa(Oa,Qa,La,Pa);return Qa}function V(La){if(La&&
"object"==typeof La&&La.constructor===this)return La;var Pa=new this(ea);return ka(Pa,La),Pa}function ea(){}function U(La,Pa,Oa){Pa.constructor===La.constructor&&Oa===ha&&Pa.constructor.resolve===V?function(Qa,Ra){1===Ra._state?sa(Qa,Ra._result):2===Ra._state?pa(Qa,Ra._result):Aa(Ra,void 0,function(Sa){return ka(Qa,Sa)},function(Sa){return pa(Qa,Sa)})}(La,Pa):void 0===Oa?sa(La,Pa):"function"==typeof Oa?function(Qa,Ra,Sa){Ca(function(Ua){var Va=!1,Ya=function(Wa,$a,Ta,Xa){try{Wa.call($a,Ta,Xa)}catch(Za){return Za}}(Sa,
Ra,function(Wa){Va||(Va=!0,Ra!==Wa?ka(Ua,Wa):sa(Ua,Wa))},function(Wa){Va||(Va=!0,pa(Ua,Wa))},Ua._label);!Va&&Ya&&(Va=!0,pa(Ua,Ya))},Qa)}(La,Pa,Oa):sa(La,Pa)}function ka(La,Pa){if(La===Pa)pa(La,new TypeError("You cannot resolve a promise with itself"));else if(Qa=typeof(Oa=Pa),null===Oa||"object"!==Qa&&"function"!==Qa)sa(La,Pa);else{Oa=void 0;try{Oa=Pa.then}catch(Ra){return void pa(La,Ra)}U(La,Pa,Oa)}var Oa,Qa}function ma(La){La._onerror&&La._onerror(La._result);za(La)}function sa(La,Pa){void 0===
La._state&&(La._result=Pa,La._state=1,0!==La._subscribers.length&&Ca(za,La))}function pa(La,Pa){void 0===La._state&&(La._state=2,La._result=Pa,Ca(ma,La))}function Aa(La,Pa,Oa,Qa){var Ra=La._subscribers,Sa=Ra.length;La._onerror=null;Ra[Sa]=Pa;Ra[Sa+1]=Oa;Ra[Sa+2]=Qa;0===Sa&&La._state&&Ca(za,La)}function za(La){var Pa=La._subscribers,Oa=La._state;if(0!==Pa.length){for(var Qa=void 0,Ra=void 0,Sa=La._result,Ua=0;Ua<Pa.length;Ua+=3)Qa=Pa[Ua],Ra=Pa[Ua+Oa],Qa?Ba(Oa,Qa,Ra,Sa):Ra(Sa);La._subscribers.length=
0}}function Ba(La,Pa,Oa,Qa){var Ra="function"==typeof Oa,Sa=void 0,Ua=void 0,Va=!0;if(Ra){try{Sa=Oa(Qa)}catch(Ya){Va=!1,Ua=Ya}if(Pa===Sa)return void pa(Pa,new TypeError("A promises callback cannot return that same promise."))}else Sa=Qa;void 0!==Pa._state||(Ra&&Va?ka(Pa,Sa):!1===Va?pa(Pa,Ua):1===La?sa(Pa,Sa):2===La&&pa(Pa,Sa))}function ua(La){La[Ia]=Ka++;La._state=void 0;La._result=void 0;La._subscribers=[]}var Fa=Array.isArray?Array.isArray:function(La){return"[object Array]"===Object.prototype.toString.call(La)},
va=0,xa=void 0,Da=void 0,Ca=function(La,Pa){wa[va]=La;wa[va+1]=Pa;2===(va+=2)&&(Da?Da(X):Ha())},qa="undefined"!=typeof window?window:void 0,W=qa||{};W=W.MutationObserver||W.WebKitMutationObserver;var ba="undefined"==typeof self&&void 0!==Z&&"[object process]"==={}.toString.call(Z),oa="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,wa=Array(1E3),Ea,Ga,Ja,ya,Ha=void 0;ba?Ha=function(){return Z.nextTick(X)}:W?(Ga=0,Ja=new W(X),ya=document.createTextNode(""),
Ja.observe(ya,{characterData:!0}),Ha=function(){ya.data=Ga=++Ga%2}):oa?((Ea=new MessageChannel).port1.onmessage=X,Ha=function(){return Ea.port2.postMessage(0)}):Ha=void 0===qa?function(){try{var La=Function("return this")().require("vertx");return void 0!==(xa=La.runOnLoop||La.runOnContext)?function(){xa(X)}:ia()}catch(Pa){return ia()}}():ia();var Ia=Math.random().toString(36).substring(2),Ka=0,Ma=function(){function La(Pa,Oa){this._instanceConstructor=Pa;this.promise=new Pa(ea);this.promise[Ia]||
ua(this.promise);Fa(Oa)?(this.length=Oa.length,this._remaining=Oa.length,this._result=Array(this.length),0===this.length?sa(this.promise,this._result):(this.length=this.length||0,this._enumerate(Oa),0===this._remaining&&sa(this.promise,this._result))):pa(this.promise,Error("Array Methods must be provided an Array"))}return La.prototype._enumerate=function(Pa){for(var Oa=0;void 0===this._state&&Oa<Pa.length;Oa++)this._eachEntry(Pa[Oa],Oa)},La.prototype._eachEntry=function(Pa,Oa){var Qa=this._instanceConstructor,
Ra=Qa.resolve;if(Ra===V){var Sa=Ra=void 0,Ua=!1;try{Ra=Pa.then}catch(Va){Ua=!0,Sa=Va}Ra===ha&&void 0!==Pa._state?this._settledAt(Pa._state,Oa,Pa._result):"function"!=typeof Ra?(this._remaining--,this._result[Oa]=Pa):Qa===Na?(Qa=new Qa(ea),Ua?pa(Qa,Sa):U(Qa,Pa,Ra),this._willSettleAt(Qa,Oa)):this._willSettleAt(new Qa(function(Va){return Va(Pa)}),Oa)}else this._willSettleAt(Ra(Pa),Oa)},La.prototype._settledAt=function(Pa,Oa,Qa){var Ra=this.promise;void 0===Ra._state&&(this._remaining--,2===Pa?pa(Ra,
Qa):this._result[Oa]=Qa);0===this._remaining&&sa(Ra,this._result)},La.prototype._willSettleAt=function(Pa,Oa){var Qa=this;Aa(Pa,void 0,function(Ra){return Qa._settledAt(1,Oa,Ra)},function(Ra){return Qa._settledAt(2,Oa,Ra)})},La}(),Na=function(){function La(Pa){this[Ia]=Ka++;this._result=this._state=void 0;this._subscribers=[];if(ea!==Pa){if("function"!=typeof Pa)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof La)(function(Oa,
Qa){try{Qa(function(Ra){ka(Oa,Ra)},function(Ra){pa(Oa,Ra)})}catch(Ra){pa(Oa,Ra)}})(this,Pa);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}}return La.prototype.catch=function(Pa){return this.then(null,Pa)},La.prototype.finally=function(Pa){var Oa=this.constructor;return"function"==typeof Pa?this.then(function(Qa){return Oa.resolve(Pa()).then(function(){return Qa})},function(Qa){return Oa.resolve(Pa()).then(function(){throw Qa;
})}):this.then(Pa,Pa)},La}();return Na.prototype.then=ha,Na.all=function(La){return(new Ma(this,La)).promise},Na.race=function(La){var Pa=this;return Fa(La)?new Pa(function(Oa,Qa){for(var Ra=La.length,Sa=0;Sa<Ra;Sa++)Pa.resolve(La[Sa]).then(Oa,Qa)}):new Pa(function(Oa,Qa){return Qa(new TypeError("You must pass an array to race."))})},Na.resolve=V,Na.reject=function(La){var Pa=new this(ea);return pa(Pa,La),Pa},Na._setScheduler=function(La){Da=La},Na._setAsap=function(La){Ca=La},Na._asap=Ca,Na.polyfill=
function(){var La=void 0;if(void 0!==na)La=na;else if("undefined"!=typeof self)La=self;else try{La=Function("return this")()}catch(Qa){throw Error("polyfill failed because global object is unavailable in this environment");}var Pa=La.Promise;if(Pa){var Oa=null;try{Oa=Object.prototype.toString.call(Pa.resolve())}catch(Qa){}if("[object Promise]"===Oa&&!Pa.cast)return}La.Promise=Na},Na.Promise=Na,Na}()}).call(this,O(189),O(165))},,,,,function(Q,T,O){function Z(wa){return wa.reduce(function(Ea,Ga){return Ga&&
Ga.relatedItems?Ea.concat(Ga.relatedItems.map(function(Ja){return Ja})):Ea},[])}function na(wa,Ea,Ga){return wa(Ea,{query:Object(ha.a)({f:"json"},Ga)}).then(function(Ja){return Ja.data})}function ia(wa,Ea){void 0===Ea&&(Ea=100);for(var Ga=[],Ja=0;Ja<Math.ceil(wa.length/Ea);Ja++)Ga.push(wa.slice(Ja*Ea,(Ja+1)*Ea));return Ga.filter(function(ya){return 0<ya.length})}function X(wa){var Ea=wa.itemIds,Ga=wa.request,Ja=wa.groupIds,ya="".concat(wa.portal.restUrl,"/content/itemsgroups");return new V.Promise(function(Ha,
Ia){Ga(ya,{method:"get",query:{f:"json",items:Ea,groups:Ja}}).then(function(Ka){Ha(Ka.data)},Ia)})}O.d(T,"u",function(){return ea});O.d(T,"n",function(){return U});O.d(T,"h",function(){return ka});O.d(T,"e",function(){return ma});O.d(T,"f",function(){return sa});O.d(T,"j",function(){return pa});O.d(T,"o",function(){return Aa});O.d(T,"l",function(){return za});O.d(T,"k",function(){return Ba});O.d(T,"m",function(){return ua});O.d(T,"c",function(){return Fa});O.d(T,"d",function(){return va});O.d(T,"r",
function(){return xa});O.d(T,"s",function(){return Da});O.d(T,"t",function(){return Ca});O.d(T,"g",function(){return qa});O.d(T,"p",function(){return W});O.d(T,"q",function(){return ba});O.d(T,"v",function(){return na});O.d(T,"a",function(){return ia});O.d(T,"i",function(){return X});O.d(T,"b",function(){return oa});var ha=O(1),V=O(28),ea=function(wa){return function(Ea,Ga){return wa({url:Ea,content:Ga.query},{usePost:"post"===Ga.method}).then(function(Ja){return{data:Ja}})}},U=function(wa,Ea,Ga){return na(wa,
"".concat(Ea.restUrl,"/portals/self"),{culture:Ga,default:!0})},ka=function(wa,Ea,Ga){return na(wa,"".concat(Ea.restUrl,"/content/items/").concat(Ga,"/data"))},ma=function(wa,Ea,Ga,Ja){return na(wa,"".concat(Ea.restUrl,"/community/groups"),Object(ha.a)({q:Ga},Ja))},sa=function(wa,Ea,Ga){return na(wa,"".concat(Ea.restUrl,"/community/groups/").concat(Ga,"/categorySchema"))},pa=function(wa,Ea,Ga){return na(wa,"".concat(Ea.restUrl,"/portals/").concat(Ga||Ea.id,"/categorySchema"))},Aa=function(wa,Ea){return na(wa,
"".concat(Ea.restUrl,"/portals/").concat(Ea.id,"/servers"))},za=function(wa,Ea,Ga,Ja){return wa("".concat(Ea.restUrl,"/portals/").concat(Ga||Ea.id,"/collaborationsSummary"),Ja)},Ba=function(wa,Ea,Ga,Ja){return wa("".concat(Ea.restUrl,"/portals/").concat(Ga||Ea.id,"/collaboratedItems"),Ja)},ua=function(wa,Ea,Ga){return na(wa,"".concat(location.protocol,"//").concat(Ea.portalHostname,"/sharing/rest/portals/").concat(Ga||"self"))},Fa=function(wa,Ea,Ga){return wa("".concat(Ea.restUrl,"/community/groups"),
{query:{f:"json",q:"orgid:".concat(Ea.id," AND access:public"),num:100,start:Ga||1,sortField:"title",sortOrder:"asc"}}).then(function(Ja){return Ja.data.total>Ja.data.start+Ja.data.num?Fa(wa,Ea,Ja.data.start+Ja.data.num).then(function(ya){return Object(ha.a)(Object(ha.a)({},ya),{data:Object(ha.a)(Object(ha.a)({},ya.data),{results:Ja.data.results.concat(ya.data.results)})})}):Ja})},va=function(wa,Ea,Ga,Ja){return wa("".concat(Ea.restUrl,"/community/users/").concat(Ga,"/provisionedListings"),{query:{f:"json",
num:100,start:Ja||1}}).then(function(ya){var Ha=V.Promise.all(ya.data.provisionedListings.filter(function(Ka){return Ka.itemId}).map(function(Ka){return(new V.Promise(function(Ma,Na){wa("".concat(Ea.restUrl,"/content/items/").concat(Ka.itemId),{method:"get",query:{f:"json"}}).then(function(La){Ma(La.data)},Na)})).catch(function(Ma){return 0})})),Ia=ya.data.provisionedListings.map(function(Ka){return na(wa,"".concat(Ea.restUrl,"/content/items/").concat(Ka.id||Ka.itemId,"/relatedItems?relationshipType\x3dListed2ImplicitlyListed\x26direction\x3dforward")).then(function(Ma){return Ma},
function(Ma){})});return ya.data.total>ya.data.start+ya.data.num?va(wa,Ea,Ga,ya.data.start+ya.data.num).then(function(Ka){return V.Promise.all([Ha].concat(Ia)).then(function(Ma){return Ma[0].results.concat(Z(Ma.slice(1))).concat(Ka)})}):V.Promise.all([Ha].concat(Ia)).then(function(Ka){return Ka[0].filter(function(Ma){return void 0!==Ma}).concat(Z(Ka.slice(1)))})})},xa=function(wa,Ea,Ga){return na(wa,"".concat(Ea.restUrl,"/community/users/").concat(Ga||Ea.user.username))},Da=function(wa,Ea,Ga){return na(wa,
"".concat(Ea.restUrl,"/content/users/").concat(Ga||Ea.user.username),{num:1})},Ca=function(wa,Ea,Ga){return na(wa,"".concat(Ea.restUrl,"/content/groups/").concat(Ga))},qa=function(wa,Ea,Ga){return na(wa,"".concat(Ea.restUrl,"/community/groups"),Ga)},W=function(wa,Ea){return na(wa,"".concat(Ea.restUrl,"/portals/self/settings"))},ba=function(wa,Ea){return na(wa,"".concat(Ea.restUrl,"/portals/self/trustedOrgs"),{num:100})},oa=function(wa,Ea){return void 0===Ea&&(Ea=","),wa.map(function(Ga){return Ga.id}).join(Ea)}},
,,,function(Q,T){Q.exports=J},,,,,,,,,,function(Q,T,O){function Z(Ca){return!(!Ca.urlKey||!Ca.customBaseUrl)||Ca.isPortal}function na(Ca){return Ca.role===Aa.admin||Ca.role===Aa.accountAdmin}function ia(Ca){return Object(ua.a)(Ca.roleId)&&0<(Ca.roleId||"").length}function X(Ca){return"Developer Subscription"===Ca}function ha(Ca){return!ia(Ca)||ia(Ca)&&-1<(Ca.privileges||[]).indexOf("portal:admin:viewItems")}function V(Ca){return-1<(Ca.privileges||[]).indexOf("portal:user:shareToOrg")}function ea(Ca){return-1<
(Ca.privileges||[]).indexOf("portal:user:shareToGroup")}function U(Ca){return-1<(Ca.privileges||[]).indexOf("portal:user:shareToPublic")}function ka(Ca,qa){return ma(Ca)||sa(Ca)||pa(Ca)}function ma(Ca){return-1<(Ca.privileges||[]).indexOf("portal:admin:shareToGroup")}function sa(Ca){return-1<(Ca.privileges||[]).indexOf("portal:admin:shareToOrg")}function pa(Ca){return-1<(Ca.privileges||[]).indexOf("portal:admin:shareToPublic")}O.d(T,"m",function(){return va});O.d(T,"h",function(){return xa});O.d(T,
"n",function(){return Da});O.d(T,"l",function(){return Z});O.d(T,"i",function(){return na});O.d(T,"j",function(){return ia});O.d(T,"k",function(){return X});O.d(T,"g",function(){return ha});O.d(T,"b",function(){return V});O.d(T,"a",function(){return ea});O.d(T,"c",function(){return U});O.d(T,"d",function(){return ma});O.d(T,"e",function(){return sa});O.d(T,"f",function(){return pa});var Aa,za=O(64),Ba=O(142),ua=O(7),Fa=O(61);!function(Ca){Ca.user="org_user";Ca.accountUser="account_user";Ca.publisher=
"org_publisher";Ca.accountPublisher="account_publisher";Ca.admin="org_admin";Ca.accountAdmin="account_admin";Ca.viewer="iAAAAAAAAAAAAAAA";Ca.dataEditor="iBBBBBBBBBBBBBBB"}(Aa||(Aa={}));var va=function(Ca){var qa=Ca.items;return!!Ca.user.orgId&&qa.every(function(W){return W.isOrgItem})},xa=function(Ca){var qa=Ca.items,W=Ca.user,ba=Ca.portal;Ca=qa[0];var oa=Object(Fa.c)(Ca,W),wa=ia(W),Ea=ka(W,ba);if(wa=Object(Fa.a)(Ca,W)&&-1<(W.privileges||[]).indexOf("portal:admin:updateItems")&&!wa)wa=!Z(ba)||ea(W)||
V(W)||ba.canSharePublic&&U(W)||ka(W,ba);ba=wa;wa=Ca.owner;return!(Ca.portal.isPortal&&wa!==W.username&&wa.includes("esri_")&&!["esri_livingatlas"].includes(wa))&&(oa||ba||va({items:qa,user:W})&&Ea)},Da=function(Ca,qa){return Object(za.a)(Object(Ba.a)(Ca))(qa)}},,,,,,,,function(Q,T,O){function Z(Ja,ya,Ha){var Ia=ya.settings.utils.request,Ka=Object(X.b)({},ya);Ka=Ia(Ka[0],Ka[1]).then(Object(ha.a)(ya),function(Na){return Ja({type:Da,payload:Na})});if(Ha){Ha=Object(X.a)(ya,["access","contentstatus","categories"]);
var Ma=Ia(Ha[0],Ha[1])}Ia=[Ka,Ma].filter(function(Na){return Na});V()(Ia).then(function(Na){Ja(function(La,Pa){var Oa,Qa,Ra=Pa[0],Sa=Pa[1];Pa=Pa[2];var Ua=Object(Ba.a)(La),Va=La.settings.utils.iconDir;return{type:xa,payload:{search:Object(na.a)(Object(na.a)({},Ra.data),{results:Ra.data.results.map(function(Ya){return Object(ea.a)(Ua,Va,Ya)})}),aggregations:(null===(Oa=null==Sa?void 0:Sa.data)||void 0===Oa?0:Oa.aggregations)?{counts:Object(na.g)([],Sa.data.aggregations.counts,!0).concat((null===(Qa=
null==Pa?void 0:Pa.data)||void 0===Qa?0:Qa.aggregations)?Object(na.g)([],Pa.data.aggregations.counts,!0):[]),countInfo:{section:La.parameters.section,group:La.parameters.filter.group,custom:La.settings.config.customSections.filter(function(Ya){return Ya.name===La.parameters.section})[0]}}:void 0}}}(ya,Na));Ja(Fa.e)},function(Na){return Ja({type:Da,payload:Na})})}O.d(T,"a",function(){return va});O.d(T,"c",function(){return xa});O.d(T,"b",function(){return Da});O.d(T,"d",function(){return Ca});O.d(T,
"f",function(){return qa});O.d(T,"e",function(){return W});O.d(T,"g",function(){return ba});O.d(T,"h",function(){return oa});O.d(T,"i",function(){return wa});var na=O(1),ia=O(98),X=O(173),ha=O(215);Q=O(65);var V=O.n(Q),ea=O(80),U=O(308),ka=O(309),ma=O(168),sa=O(258),pa=O(310),Aa=O(256),za=O(92),Ba=O(123),ua=O(250),Fa=O(198),va="LOADING_CONTENT",xa="LOADING_CONTENT_SUCCESS",Da="LOADING_CONTENT_FAILED",Ca="LOADING_NEXT",qa="LOADING_NEXT_SUCCESS",W="LOADING_NEXT_FAILED",ba="SUBSCRIPTION_CONTENT_SUCCESS",
oa=function(Ja){return function(ya,Ha){var Ia=Ha();Ha=Ia.settings.utils.request;var Ka=Ia.parameters.nextQuery.nextStart;ya({type:Ca});Ka=Object(X.b)({num:Ja,start:Ka},Ia);Ha(Ka[0],Ka[1]).then(Object(ha.a)(Ia),function(Ma){return ya({type:W,payload:Ma})}).then(function(Ma){return ya(Ga(Ia,Ma))},function(Ma){return ya({type:W,payload:Ma})})}},wa=function(Ja){return function(ya,Ha){Ha=Ha();ya({type:va});Ha.settings.config.clearSelectionBetweenSearches&&ya({type:ia.b});ya(Ea(Ja))}},Ea=function(Ja){return function(ya,
Ha){var Ia=Ha(),Ka=Ia.parameters.section,Ma=Ia.settings.utils.portal.user,Na=!!Ma,La=Ia.settings.utils.portal,Pa=La.isPortal,Oa=Ma&&"org_admin"===Ma.role,Qa=Ma&&Ma.privileges&&-1<Ma.privileges.indexOf("portal:admin:manageCollaborations"),Ra=Ma&&!Pa&&Ma.orgId&&La.subscriptionInfo&&-1<["Trial","Trial Press","Trial Developer","Evaluation"].indexOf(La.subscriptionInfo.type);ya(Object(U.b)()).then(function(Sa){"livingAtlas"===Ka||"Living Atlas"===Ka?ya(Object(ka.d)(Sa)).then(function(){return Z(ya,Ha(),
Ja)},function(){return ya({type:Da,payload:"Couldn't load the living atlas info."})}):"myContent"!==Ka&&"myGroups"!==Ka&&"myFavorites"!==Ka&&"subscription"!==Ka||!Na?"myOrganization"===Ka&&Na?V()([ya(Object(sa.d)())].concat(Oa&&Qa&&!Ra?[ya(Object(pa.a)(ya,Ha()))]:[])).then(function(){return Z(ya,Ha(),Ja)},function(){return ya({type:Da,payload:"Couldn't load the organization info."})}):Object(za.e)(Ia.settings.config.customSections,Ka)?ya(Object(Aa.e)()).then(function(){return Z(ya,Ha(),Ja)},function(){return ya({type:Da,
payload:"Couldn't load the custom section info."})}):Z(ya,Ia,Ja):V()([ya(Object(ma.l)())].concat(Na&&Ma.orgId?[ya(Object(sa.d)())]:[]).concat(Oa&&Qa&&!Ra?[ya(Object(pa.a)(ya,Ha()))]:[])).then(function(){return"subscription"===Ka?ya(Object(ua.d)()).then(function(){return ya({type:ba,payload:Ha().results.provisionedContent.content})},function(){return ya({type:Da,payload:"Couldn't load provisioned content info."})}):Z(ya,Ha(),Ja)},function(){return ya({type:Da,payload:"Couldn't load the user info."})})})}},
Ga=function(Ja,ya){var Ha=Ja.settings.utils.iconDir,Ia=Object(Ba.a)(Ja);return{type:qa,payload:Object(na.a)(Object(na.a)({},ya.data),{results:ya.data.results.map(function(Ka){return Object(ea.a)(Ia,Ha,Ka)})})}}},function(Q,T,O){O.d(T,"d",function(){return Z});O.d(T,"n",function(){return na});O.d(T,"i",function(){return ia});O.d(T,"j",function(){return X});O.d(T,"m",function(){return ha});O.d(T,"f",function(){return V});O.d(T,"h",function(){return ea});O.d(T,"l",function(){return U});O.d(T,"c",function(){return ka});
O.d(T,"p",function(){return ma});O.d(T,"g",function(){return sa});O.d(T,"e",function(){return pa});O.d(T,"q",function(){return Aa});O.d(T,"k",function(){return za});O.d(T,"o",function(){return Ba});O.d(T,"r",function(){return ua});O.d(T,"b",function(){return Fa});O.d(T,"a",function(){return va});O.d(T,"u",function(){return xa});O.d(T,"E",function(){return Da});O.d(T,"y",function(){return Ca});O.d(T,"D",function(){return qa});O.d(T,"z",function(){return W});O.d(T,"A",function(){return ba});O.d(T,"w",
function(){return oa});O.d(T,"C",function(){return wa});O.d(T,"t",function(){return Ea});O.d(T,"G",function(){return Ga});O.d(T,"v",function(){return Ja});O.d(T,"x",function(){return ya});O.d(T,"H",function(){return Ha});O.d(T,"B",function(){return Ia});O.d(T,"F",function(){return Ka});O.d(T,"I",function(){return Ma});O.d(T,"s",function(){return Na});var Z="UPDATE_CUSTOM_FILTER",na="UPDATE_ORG_GROUP_FILTER",ia="UPDATE_LIVING_ATLAS_CATEGORIES_FILTER",X="UPDATE_LIVING_ATLAS_REGION_FILTER",ha="UPDATE_ORG_CATEGORIES_FILTER",
V="UPDATE_GROUP_CATEGORIES_FILTER",ea="UPDATE_ITEM_TYPE_FILTER",U="UPDATE_MODIFIED_FILTER",ka="UPDATE_CREATED_FILTER",ma="UPDATE_SHARED_FILTER",sa="UPDATE_GROUP_FILTER",pa="UPDATE_FOLDER_FILTER",Aa="UPDATE_STATUS_FILTER",za="UPDATE_MAP_AREA_FILTER",Ba="UPDATE_SEARCH_ORG_FILTER",ua="UPDATE_TAGS_FILTER",Fa="UPDATE_COLLABORATIONS_FILTER",va="CLEAR_ALL_FILTERS",xa=function(La,Pa){return{type:Z,payload:{index:La,filter:Pa}}},Da=function(La){return{type:na,payload:La}},Ca=function(La){return{type:ea,payload:La}},
qa=function(La){return{type:ha,payload:La}},W=function(La){return{type:ia,payload:La}},ba=function(La){return{type:X,payload:La}},oa=function(La){return{type:V,payload:La}},wa=function(La,Pa){return{type:U,payload:{section:La,modified:Pa}}},Ea=function(La,Pa){return{type:ka,payload:{section:La,created:Pa}}},Ga=function(La){return{type:ma,payload:La}},Ja=function(La){return{type:pa,payload:La}},ya=function(La){return{type:sa,payload:La}},Ha=function(La){return{type:Aa,payload:La}},Ia=function(La){return{type:za,
payload:La}},Ka=function(La){return{type:Ba,payload:La}},Ma=function(La){return{type:ua,payload:La}},Na=function(La){return{type:Fa,payload:La}}},,,,function(Q,T){Q.exports=f},function(Q,T,O){function Z(ea,U){return(null==ea?void 0:ea.owner)===U.username}function na(ea,U){var ka;if(!(ka=Z(ea,U)))if(Object(X.a)(ea.isAdmin))ka=!!ea.isAdmin;else{ka=ea.owner;var ma="admin"===ea.itemControl;ka=!(ea.portal.isPortal&&!Z(ea,U)&&ma&&-1<ka.indexOf("esri_")&&0>["esri_livingatlas","esri_demographics","esri_boundaries"].indexOf(ka))&&
ma}return ka}function ia(ea,U){return na(ea,U)||"update"===ea.itemControl}O.d(T,"d",function(){return Z});O.d(T,"c",function(){return na});O.d(T,"a",function(){return ia});O.d(T,"b",function(){return V});var X=O(7),ha=O(47),V=function(ea){var U=ea.user,ka=ea.items;ea=ea.portal;return Object(ha.m)({items:ka,user:U})&&Object(ha.h)({items:ka,user:U,portal:ea})&&Object(ha.g)(U)&&ka[0].itemOwner||U}},,,function(Q,T,O){function Z(){for(var na=[],ia=0;ia<arguments.length;ia++)na[ia]=arguments[ia];return function(X){return na.reduceRight(function(ha,
V){return V(ha)},X)}}O.d(T,"a",function(){return Z})},function(Q,T){Q.exports=c},,,,,,function(Q,T){Q.exports=h},,,function(Q,T,O){O.d(T,"a",function(){return Z});var Z="CLEAR_SELECTION_STATE"},,,,,,function(Q,T,O){O.d(T,"a",function(){return ea});O.d(T,"b",function(){return U});var Z=O(64);Q=O(7);var na=O(120),ia=O(119),X=O(114),ha=O(118),V=O(117),ea=function(ka,ma,sa){return Object(Z.a)(Object(V.a)(ka),Object(ha.a)(ka),Object(X.a)(ma),Object(ia.a)(ka),Object(na.a)(ka))(sa)},U=Object(Z.a)(Object(Q.e)("patchedDescription"),
Object(Q.e)("thumbURI"),Object(Q.e)("iconURI"),Object(Q.e)("displayName"),Object(Q.e)("badges"))},,,,,,,,,function(Q,T,O){O.d(T,"a",function(){return Z});O.d(T,"b",function(){return na});O.d(T,"c",function(){return ia});O.d(T,"d",function(){return X});O.d(T,"e",function(){return ha});O.d(T,"h",function(){return V});O.d(T,"i",function(){return ea});O.d(T,"j",function(){return U});O.d(T,"k",function(){return ka});O.d(T,"g",function(){return ma});O.d(T,"f",function(){return sa});var Z="M15.5 5l-7 7-7-7zM3.914 6L8.5 10.586 13.086 6z",
na="M15.707 20h-1.414l-7.5-7.5 7.5-7.5h1.414l-7.5 7.5z",ia="M13.802 4.306a.683.683 0 0 1 .708.76.528.528 0 0 1 .357.467c.055.888-1.127.8-1.014-.09l-.005-.002a.575.575 0 0 1-.046-1.135zM11.5 23A11.5 11.5 0 0 1 0 11.5v-.021a11.738 11.738 0 0 1 2.057-6.534 12.15 12.15 0 0 1 4.12-3.637h.005A11.595 11.595 0 0 1 13.618.202l.002.002a11.525 11.525 0 0 1 9.325 10.188v.004A11.497 11.497 0 0 1 11.5 23zm9.795-7.748a7.604 7.604 0 0 1-.666-1.746 4.55 4.55 0 0 1-.651-1.655 1.383 1.383 0 0 1-.857-.063l-.332.46c-1.962 0-2.952-.953-3.048-1.636a2.144 2.144 0 0 0-.992.133l-.113.177-.794.021a2.538 2.538 0 0 1-.483-.213 7.396 7.396 0 0 0-.628.541 1.463 1.463 0 0 1-.941.97 1.544 1.544 0 0 0-.961 1.24 2.264 2.264 0 0 1-.449 1.34 2.446 2.446 0 0 1 .811 1.108c.406 1.373 1.703.122 3.24.622.843.277 1.569.18 1.832 1.177a1.695 1.695 0 0 1 .028.937 1.452 1.452 0 0 1-.025.098 2.11 2.11 0 0 1 .327 1.883 10.447 10.447 0 0 0 4.702-5.394zm-1.709-7.096l.25.15c.058.072.16.194.208.265a1.699 1.699 0 0 1 1.517 2.251 3.648 3.648 0 0 1 .435.592 10.477 10.477 0 0 0-3.824-8.016h-.103a1.768 1.768 0 0 1-1.938 2.838 4.716 4.716 0 0 1-.723.7 1.525 1.525 0 0 1 .97.078l.183-.654a6.478 6.478 0 0 1 2.115 1.527c.295.369-.659 1.364.91.27zm2.17 5.578q.026-.121.049-.243a5.462 5.462 0 0 0-.843-1.825 18.554 18.554 0 0 0 .793 2.068zM11.405 1.147c.155.004.424.03.574.029l.093-.147c-.189-.01-.375-.029-.566-.029a1.863 1.863 0 0 1-.102.147zm-8.209 16.74a1.557 1.557 0 0 1 .244-.252c-.26-.196-.54-.372-.808-.545q.263.41.564.797zm11.737 3.525c.434-.81.812-.526.724-1.629a.802.802 0 0 0-.327-.551c-.2-.205-.155-.428-.051-.682.254-.64-.126-.81-.608-.914a3.809 3.809 0 0 0-2.22-.08 1.602 1.602 0 0 1-1.633-.391c-.608-.489-.383-.895-.91-1.416-1.3-1.218-.08-1.268-.08-2.268a2.63 2.63 0 0 1 1.416-2.11c.302-.106.437-.127.541-.427.236-.604.565-.578.988-1.055.145-.164.257-.285.48-.285a.723.723 0 0 1 .384.135s.282.166.372.2l.074-.002a3.411 3.411 0 0 1 2.208-.269.557.557 0 0 1 .432.7c.017.441 1.488 1.005 1.588.837a.745.745 0 0 0 .066-.184.48.48 0 0 1 .562-.362c.2.01.514.231.703.231a4.382 4.382 0 0 0 .786-.238c.332-.095.21-.532.067-.847-.078-.207-.375-.237-.595-.237-.266.003-.498-.021-.616-.307a.433.433 0 0 0-.161-.218c.007.01-.022.034-.042.068a.52.52 0 0 1-.871.07c-.272-.394-.011-.289-.317-.67a3.283 3.283 0 0 0-.72-.63.545.545 0 0 1-.525.387c-.265 0-.36-.155-.594-.303-.245-.142-.625-.1-.929.324a2.663 2.663 0 0 1-.49.436c-.211.264-.036.313-.4.628-.342.317-.623.179-1.069.059-.477-.111-.42-.747-.347-1.246.078-.5.294-.712.802-.58.729.178.762.038.579-.475-.17-.378-.042-.636.215-.748.78-.317 1.183-1.443 1.906-1.125a.766.766 0 0 0 .887-1.249.868.868 0 0 1-.316-.254.095.095 0 0 0-.07-.033c-.219 0-.155.495-.138.713a.492.492 0 0 1-.49.525c-.281 0-.753-.454-.953-.653-.385-.387-.119-.603.087-1.004a5.425 5.425 0 0 1 .34-.69 1.71 1.71 0 0 1 .588-.442 10.406 10.406 0 0 0-3.028-.996c-.332.335-.51.95-.954 1.01-.302.054-.912-.059-1.193-.006-.391.08-1.292.553-1.396.553-.57 0-.81-.74.197-1.574a10.398 10.398 0 0 0-1.884.475 7.258 7.258 0 0 1-1.042 1.57c-.299.372-.662.062-1.088.016-.565-.056-.325 1.011-1.198.915a5.775 5.775 0 0 0-.588-.039A10.467 10.467 0 0 0 1 11.5c0 .054.007.107.008.161.061.103.41.9.588 1.252.944 1.962.527 1.457.562 2.457.01.238.202.343.42.493a10.28 10.28 0 0 1 2.006 1.477.495.495 0 0 1 .111.525c-.07.264-.346.34-.568.502a.431.431 0 0 0-.21.376 10.425 10.425 0 0 0 11.017 2.669z",
X="M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM7.5 5.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM7 7h1v5H7zm2 5H6v-1h3z",ha="M15 16h4v-4h-4zm1-3h2v2h-2zM5 11h4V7H5zm1-3h2v2H6zm16 14V4H12V2H5v2H2v18H0v1h11v-5h2v5h11v-1zm-8 0v-5h-4v5H3V5h3V3h5v2h10v17zm-9-6h4v-4H5zm1-3h2v2H6zm4-2h4V7h-4zm1-3h2v2h-2zm-1 8h4v-4h-4zm1-3h2v2h-2zm4-2h4V7h-4zm1-3h2v2h-2z",V="M16 4a4 4 0 1 0-4 4 4 4 0 0 0 4-4zm-4 3a3 3 0 1 1 3-3 3.003 3.003 0 0 1-3 3zm4.75 1h-9.5A2.25 2.25 0 0 0 5 10.25v9.25A1.5 1.5 0 0 0 6.5 21H8v2.25a.75.75 0 0 0 .75.75h6.5a.75.75 0 0 0 .75-.75V21h1.5a1.5 1.5 0 0 0 1.5-1.5v-9.25A2.25 2.25 0 0 0 16.75 8zM18 19.5a.501.501 0 0 1-.5.5H16v-8h-1v11H9V12H8v8H6.5a.501.501 0 0 1-.5-.5v-9.25A1.251 1.251 0 0 1 7.25 9h9.5A1.251 1.251 0 0 1 18 10.25z",
ea="M11 4a3 3 0 1 0-3 3 3 3 0 0 0 3-3zM8.001 6A2 2 0 1 1 10 4a2 2 0 0 1-1.999 2zM10 10h1v.921a3.23 3.23 0 0 0-1 2.329zm0 8.5a2.487 2.487 0 0 0 .055.5H5.75a.75.75 0 0 1-.75-.75V16h-.5A1.5 1.5 0 0 1 3 14.5V9.25A2.25 2.25 0 0 1 5.25 7h5.5a2.232 2.232 0 0 1 1.308.426A3.95 3.95 0 0 0 12 8a3.96 3.96 0 0 0 .593 2.067 3.21 3.21 0 0 0-.593.189V9.25A1.251 1.251 0 0 0 10.75 8h-5.5A1.251 1.251 0 0 0 4 9.25v5.25a.5.5 0 0 0 .5.5H5v-5h1v8h4zM19 8a3 3 0 1 0-3 3 3 3 0 0 0 3-3zm-2.999 2A2 2 0 1 1 18 8a2 2 0 0 1-1.999 2zm2.749 1h-5.5A2.25 2.25 0 0 0 11 13.25v5.25a1.5 1.5 0 0 0 1.5 1.5h.5v2.25a.75.75 0 0 0 .75.75h4.5a.75.75 0 0 0 .75-.75V20h.5a1.5 1.5 0 0 0 1.5-1.5v-5.25A2.25 2.25 0 0 0 18.75 11zM20 18.5a.5.5 0 0 1-.5.5H19v-5h-1v8h-4v-8h-1v5h-.5a.5.5 0 0 1-.5-.5v-5.25A1.251 1.251 0 0 1 13.25 12h5.5A1.251 1.251 0 0 1 20 13.25z",
U="M8.718 8l5.303 5.303-.707.707L8.01 8.707 2.707 14.01 2 13.303 7.303 8 2 2.697l.707-.707L8.01 7.293l5.304-5.303.707.707z",ka="M13.207 12.5l7.778 7.778-.707.707-7.778-7.778-7.778 7.778-.707-.707 7.778-7.778-7.778-7.778.707-.707 7.778 7.778 7.778-7.778.707.707z",ma="M21 10v7a3.003 3.003 0 0 1-3 3H4v-1h14a2.003 2.003 0 0 0 2-2v-7a2.003 2.003 0 0 0-2-2H6.691l2.649 2.648-.707.707-3.89-3.89 3.832-3.833.707.707L6.622 7H18a3.003 3.003 0 0 1 3 3z",sa="M149.375 182.444l56.463-56.471-25.376-25.376 5.523-14.541-59.827-22.726L110.828 48H56v124h18.365l12.437 4.724 34.182 34.101 15.33-15.294 7.07 2.686 5.164-13.597zm50.806-56.472l-47.34 47.35 26.064-68.626zM112 54.828L141.172 84H112zM60 52h48v36h36v80H60zm60.984 153.17L95.95 180.199l36.263 13.775zm20.081-12.113L85.632 172H148V85.172L133.059 70.23l47.766 18.144-34.628 91.171z"},
,,function(Q,T,O){function Z(ea){return!(!ha(ea)&&!V(ea))}function na(ea,U){return ea.filter(function(ka){return ka.name===U})[0]}function ia(ea,U){return!!na(ea,U)}O.d(T,"a",function(){return X});O.d(T,"c",function(){return ha});O.d(T,"d",function(){return V});O.d(T,"f",function(){return Z});O.d(T,"b",function(){return na});O.d(T,"e",function(){return ia});Q=O(15);var X=function(ea){return ea.filters?ea.filters.filter(function(U){return"object"==typeof U&&("group"===U.type||"org"===U.type)}):[]};
Q=Object(Q.a)(function(ea,U){if(U.filters)return U.filters.reduce(function(ka,ma){return"object"==typeof ma&&ma.type===ea?ma:ka},void 0)});var ha=Q("group"),V=Q("org")},,,,,function(Q,T,O){function Z(ea,U){if(null==ea?0:ea.length)for(var ka=void 0,ma=0;ma<ea.length;ma++)if(U(ka=ea[ma]))return ka}function na(ea){return ea.filter(function(U){return 0<U.length})}function ia(ea,U,ka){var ma=[];return U.forEach(function(sa){(ka?sa[ka].toLowerCase()===ea.toLowerCase():sa.toLowerCase()===ea.toLowerCase())?
ma.unshift(sa):ma.push(sa)}),ma}O.d(T,"e",function(){return X});O.d(T,"f",function(){return ha});O.d(T,"c",function(){return Z});O.d(T,"b",function(){return na});O.d(T,"a",function(){return V});O.d(T,"d",function(){return ia});Q=O(15);var X=function(ea,U,ka){return ka.indexOf(ea)===U},ha=Object(Q.a)(function(ea,U){var ka={};return U.filter(function(ma){return!ka[ma[ea]]&&(ka[ma[ea]]=!0,!0)})}),V=function(ea,U){return ea.length===U.length&&ea.reduce(function(ka,ma){return ka&&-1<U.indexOf(ma)},!0)}},
function(Q,T,O){O.d(T,"g",function(){return ia});O.d(T,"k",function(){return X});O.d(T,"j",function(){return ha});O.d(T,"h",function(){return V});O.d(T,"i",function(){return ea});O.d(T,"c",function(){return U});O.d(T,"b",function(){return ka});O.d(T,"f",function(){return ma});O.d(T,"e",function(){return sa});O.d(T,"d",function(){return pa});O.d(T,"a",function(){return Aa});O.d(T,"r",function(){return za});O.d(T,"n",function(){return Ba});O.d(T,"s",function(){return ua});O.d(T,"o",function(){return Fa});
O.d(T,"q",function(){return va});O.d(T,"p",function(){return xa});O.d(T,"l",function(){return Da});O.d(T,"m",function(){return Ca});var Z=O(80),na=O(55),ia="SELECT_ITEM",X="TOGGLE_ITEM",ha="SELECT_ITEM_SINGLE",V="SELECT_ITEM_ASYNC",ea="SELECT_ITEM_ASYNC_FAILED",U="DESELECT_ITEM",ka="DESELECT_ALL",ma="SELECT_ALL",sa="SELECT_ALL_FROM_QUERY_SUCCESS",pa="END_BULK_WORKFLOW",Aa="CANCEL_BULK_WORKFLOW",za=function(qa){return function(W,ba){var oa=ba();oa.settings.config.asynchronousItemSelect?(W({type:V,
payload:qa}),ba=oa.settings.config.onSelect([Object(Z.b)(qa)]),(null==ba?0:ba.then)&&ba.then(function(){oa.settings.config.singleItemSelect?W({type:ha,payload:qa}):W({type:ia,payload:qa})},function(){W({type:ea,payload:qa})})):oa.settings.config.singleItemSelect?(W({type:ha,payload:qa}),oa.settings.config.onSelect([Object(Z.b)(qa)])):(W({type:ia,payload:qa}),oa.settings.config.onSelect([Object(Z.b)(qa)]))}},Ba=function(qa,W){W=W();if(W.settings.config.disableInitiallySelectedItems){W=W.results;var ba=
W.selectedItems,oa=W.initiallySelectedItems;Object.keys(ba).map(function(wa){return ba[wa]}).filter(function(wa){return!oa[wa.id]}).forEach(function(wa){qa({type:U,payload:wa})})}else qa({type:ka})},ua=function(qa){return{type:X,payload:qa}},Fa=function(qa){return function(W,ba){ba=ba();W({type:U,payload:qa});ba.settings.config.onDeselect([Object(Z.b)(qa)])}},va=function(){return function(qa,W){W=W();qa({type:ma,payload:W.ui.pagination.displayItems})}},xa=function(qa){return{type:sa,payload:qa}},
Da=function(qa,W){W=null==W?void 0:W();qa({type:Aa});null==W||W.settings.config.onBack()},Ca=function(qa,W){var ba=null==W?void 0:W();if(null==ba?0:ba.settings.config.onBulkAction){W=ba.settings.config.onBulkAction;ba=ba.results;var oa=ba.selectedItems,wa=ba.initiallySelectedItems;ba=Object.keys(wa).map(function(ya){return wa[ya]});var Ea=Object.keys(oa).map(function(ya){return oa[ya]}),Ga=ba.filter(function(ya){return!oa[ya.id]}),Ja=Ea.filter(function(ya){return!wa[ya.id]});qa({type:na.a});qa({type:pa,
payload:Ja});W({initiallySelectedItems:ba,allSelectedItems:Ea,newlySelectedItems:Ja,deselectedItems:Ga})}}},function(Q,T,O){O.d(T,"a",function(){return na});O.d(T,"b",function(){return ia});var Z=O(1),na=function(X){return X?X.urlKey?"".concat(location.protocol,"//").concat(X.urlKey,".").concat(X.customBaseUrl):"".concat(location.protocol,"//").concat(X.portalHostname):""},ia=function(X){return Object(Z.a)(Object(Z.a)({},X),{baseUrl:na(X)})}},,,,,,,,,,,,,,,function(Q,T,O){O.d(T,"a",function(){return na});
var Z=O(1);Q=O(15);var na=Object(Q.a)(function(ia,X){var ha=Object(Z.a),V=Object(Z.a)({},X),ea=X.type;X=X.typeKeywords?X.typeKeywords:[];var U=null==ea?void 0:ea.toLowerCase(),ka=ea=!1,ma=!1,sa=!1;if("ogcfeatureserver"===U)X="featureshosted";else if(0<(null==U?void 0:U.indexOf("service"))||"feature collection"===U||"kml"===U||"wms"===U||"wmts"===U||"wfs"===U){var pa=-1<X.indexOf("Hosted Service");"feature service"===U||"feature collection"===U||"kml"===U||"wfs"===U?(sa=-1<X.indexOf("Table"),ea=-1<
X.indexOf("Route Layer"),ka=-1<X.indexOf("Markup"),X=(ma=-1!==X.indexOf("Spatiotemporal"))&&sa?"spatiotemporaltable":sa?"table":ea?"routelayer":ka?"markup":ma?"spatiotemporal":pa?"featureshosted":"features"):"map service"===U||"wms"===U||"wmts"===U?X=pa||-1<X.indexOf("Tiled")||"wmts"===U?"maptiles":"mapimages":"scene service"===U?X=-1<X.indexOf("Line")?"sceneweblayerline":-1<X.indexOf("3DObject")?"sceneweblayermultipatch":-1<X.indexOf("Point")?"sceneweblayerpoint":-1<X.indexOf("IntegratedMesh")?"sceneweblayermesh":
-1<X.indexOf("PointCloud")?"sceneweblayerpointcloud":-1<X.indexOf("Polygon")?"sceneweblayerpolygon":-1<X.indexOf("Building")?"sceneweblayerbuilding":-1<X.indexOf("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===U?(ea=-1<X.indexOf("Elevation 3D Layer"),X=-1<X.indexOf("Tiled Imagery"),X=ea?"elevationlayer":X?"tiledimagerylayer":"imagery"):X="stream service"===U?"streamlayer":"vector tile service"===U?"vectortile":"datastore catalog service"===U?"datastorecollection":"geocoding service"===
U?"geocodeservice":"geoprocessing service"===U&&-1<X.indexOf("Web Tool")?"tool":"layers"}else X="web map"===U||"cityengine web scene"===U?"maps":"web scene"===U?-1<X.indexOf("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===U&&-1<(null==X?void 0:X.indexOf("configurableApp"))?"instantapps":"web mapping application"===U||"mobile application"===U||"application"===U||"operation view"===U||"desktop application"===U?"apps":"map document"===U||"map package"===U||"published map"===
U||"scene document"===U||"globe document"===U||"basemap package"===U||"mobile basemap package"===U||"mobile map package"===U||"project package"===U||"project template"===U||"pro map"===U||"layout"===U||"layer"===U&&-1<X.indexOf("ArcGIS Pro")||"explorer map"===U&&-1<X.indexOf("Explorer Document")?"mapsgray":"service definition"===U||"csv"===U||"administrative report"===U||"shapefile"===U||"cad drawing"===U||"geojson"===U||"360 vr experience"===U||"netcdf"===U?"datafiles":"explorer add in"===U||"desktop add in"===
U||"windows viewer add in"===U||"windows viewer configuration"===U?"appsgray":"arcgis pro add in"===U||"arcgis pro configuration"===U?"addindesktop":"rule package"===U||"file geodatabase"===U||"csv collection"===U||"kml collection"===U||"windows mobile package"===U||"map template"===U||"desktop application template"===U||"arcpad package"===U||"code sample"===U||"form"===U||"document link"===U||"vector tile package"===U||"operations dashboard add in"===U||"rules package"===U||"image"===U||"workflow manager package"===
U||"explorer map"===U&&-1<X.indexOf("Explorer Mapping Application")||-1<X.indexOf("Document")?"datafilesgray":"network analysis service"===U||"geoprocessing service"===U||"geodata service"===U||"geometry service"===U||"geoprocessing package"===U||"locator package"===U||"geoprocessing sample"===U||"workflow manager service"===U||"raster function template"===U||"deep learning package"===U?"toolsgray":"layer"===U||"layer package"===U||"explorer layer"===U?"layersgray":"scene package"===U?"scenepackage":
"tile package"===U?"tilepackage":"storymap"===U?"storymap":"storymap theme"===U?"storymaptheme":"web experience"===U?"experiencebuilder":"web experience template"===U?"webexperiencetemplate":"task file"===U?"taskfile":"report template"===U?"report-template":"statistical data collection"===U?"statisticaldatacollection":"insights workbook"===U?"workbook":"insights model"===U?"insightsmodel":"insights page"===U?"insightspage":"hub initiative"===U?"hubinitiative":"hub page"===U?"hubpage":"hub site application"===
U?"hubsite":"relational database connection"===U?"relationaldatabaseconnection":"big data file share"===U||"data store"===U?"datastorecollection":"image collection"===U?"imagecollection":"desktop style"===U?"desktopstyle":"style"===U?"style":"dashboard"===U?"dashboard":"feed"===U?"feed":"real time analytic"===U?"realtimeanalytics":"big data analytic"===U?"bigdataanalytics":"notebook"===U?"notebook":"notebook code snippets"===U||"notebook code snippet library"===U?"notebookcodesnippets":"maps";ia=
"".concat(ia,"/").concat(X).concat(16,".png");return ha(V,{iconURI:ia})})},,,function(Q,T,O){O.d(T,"a",function(){return na});var Z=O(1);Q=O(15);var na=Object(Q.a)(function(ia,X){var ha=Object(Z.a),V=Object(Z.a)({},X),ea,U,ka,ma="notebook"!==(null===(ea=X.type)||void 0===ea?void 0:ea.toLowerCase())?"default_thumb.png":"notebook-thumb.png";"notebook code snippets"!==(null===(U=X.type)||void 0===U?void 0:U.toLowerCase())&&"notebook code snippet library"!==(null===(ka=X.type)||void 0===ka?void 0:ka.toLowerCase())||
(ma="notebook-code-snippet-thumb.png");ea="".concat(ia.baseUrl,"/home/js/arcgisonline/css/images/").concat(ma);ia=(X.thumbnail&&(ea="".concat(ia.restUrl,"/content/items/").concat(X.id,"/info/").concat(X.thumbnail).concat(ia.credential?"?token\x3d".concat(ia.credential.token):"")),ea);return ha(V,{thumbURI:ia})})},function(Q,T,O){O.d(T,"a",function(){return ia});var Z=O(1);Q=O(15);var na=function(X,ha){return ha.description?ha.description.replace(/src=('|")js\/jsapi\/esri\//g,function(V){return"src\x3d".concat('"'===
V[4]?'"':"'").concat(X.baseUrl,"/home/js/jsapi/esri/")}):void 0},ia=Object(Q.a)(function(X,ha){return Object(Z.a)(Object(Z.a)({},ha),{patchedDescription:na(X,ha)})})},function(Q,T,O){O.d(T,"a",function(){return X});var Z=O(1),na=O(121);Q=O(15);var ia=O(61),X=Object(Q.a)(function(ha,V){var ea=Object(Z.a),U=Object(Z.a)({},V),ka,ma=V.type,sa=V.typeKeywords||[],pa=ma;ha=(null==ha?void 0:ha.portalUser)||(null==ha?void 0:ha.user);if("Feature Service"===ma||"Feature Collection"===ma){if(pa=-1<sa.indexOf("Table")?
"Table":-1<sa.indexOf("Route Layer")?"Route Layer":-1<sa.indexOf("Markup")?"Markup":"Feature Layer",ha&&Object(ia.d)(V,ha)&&-1<(null==sa?void 0:sa.indexOf("Hosted Service")))sa=(null===(ka=null===document||void 0===document?void 0:document.documentElement)||void 0===ka?void 0:ka.lang)||"en",ka=na.a[sa]||na.a[sa.split("-")[0]]||na.a.en,pa="".concat(pa," (").concat(ka,")")}else"Image Service"===ma?(pa=-1<sa.indexOf("Elevation 3D Layer"),ka=-1<sa.indexOf("Tiled Imagery"),pa=pa?"Elevation Layer":ka?"Tiled Imagery Layer":
"Imagery Layer"):"Scene Service"===ma?pa="Scene Layer":"Scene Package"===ma?pa="Scene Layer Package":"Stream Service"===ma?pa="Feature Layer":"Geocoding Service"===ma?pa="Locator":"Microsoft Powerpoint"===ma?pa="Microsoft PowerPoint":"OGCFeatureServer"===ma?pa="OGC Feature Layer":"GeoJson"===ma?pa="GeoJSON":"Globe Service"===ma?pa="Globe Layer":"Vector Tile Service"===ma?pa="Tile Layer":"netCDF"===ma?pa="NetCDF":"Map Service"===ma?pa=-1===sa.indexOf("Spatiotemporal")&&(-1<sa.indexOf("Hosted Service")||
-1<sa.indexOf("Tiled"))?"Tile Layer":"Map Image Layer":ma&&-1<ma.toLowerCase().indexOf("add in")?pa=ma.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===ma?pa="Big Data File Share":"Web Mapping Application"===ma&&(null==sa?0:sa.includes("configurableApp"))?pa="Instant App":"Data Store"===ma&&(sa.includes("cloudStore_amazon")||sa.includes("cloudStore_azure")?pa+=" (Cloud)":(sa.includes("fileShare")||sa.includes("hdfs")||sa.includes("hive")||sa.includes("bigDataFileShare")&&sa.includes("dataStore"))&&
(pa+=" (Big Data File Share)"));return ea(U,{displayName:pa})})},function(Q,T,O){O.d(T,"a",function(){return ia});var Z=O(1);Q=O(15);var na=function(X,ha){var V,ea,U=[],ka=null!==(ea=null!==(V=X.typeKeywords)&&void 0!==V?V:X.typekeywords)&&void 0!==ea?ea:[];return X.contentStatus&&("org_authoritative"===X.contentStatus||"public_authoritative"===X.contentStatus?U.push("authoritative"):"deprecated"===X.contentStatus&&U.push("deprecated")),X.origin&&U.push("collaboration"),X.groupDesignations&&-1<X.groupDesignations.indexOf("livingatlas")&&
U.push("livingAtlas"),-1<ka.indexOf("Requires Credits")?U.push("premium"):-1<ka.indexOf("Requires Subscription")&&U.push("subscriber"),-1<ka.indexOf("Public Data Collection")&&((null==ha?void 0:ha.portalUser)||(null==ha?void 0:ha.user))&&U.push("publicDataCollection"),"Solution"===X.type&&-1<ka.indexOf("ArcGIS Solution")&&U.push("solution"),ha.isPortal&&"Web Mapping Application"===X.type&&(-1<ka.indexOf("Story Map")&&U.push("retiredStoryMap"),function(ma){return"3DInsetMap 3DScene 3DViz AttachmentViewer CapacityAnalysis Compare/storytelling_compare Compare/storytelling_tabbed Compare/storytelling_sidepanel Compare/Multiviewer Compare/Search Compare/Configure Compare/SideBySideViewer_Configure Compare3d CompareAnalysis CompareMaps Directions Edit Editor Elevations ElevationsProfile Embed Filter FilterGallery GeoList GeoTour HeaderFooter Identify ImageInterpretation ImageryViewer ImpactSummary InformationLookup InteractiveFilter InteractiveLegend LayerShowcase Legend LiveMaps LocalPerspective MapAndAppGallery MapCarousel MapTools Media MinimalGallery Minimalist Nearby OnePane Panels PanelsLegend Profile PublicGallery PublicInformation ServiceLookup SimpleMapViewer SimpleViewer SocialMedia Solutions/s2.html?app\x3dapps2/FindEditFilter Solutions/s2.html?app\x3dapps2/Finder StorytellingTextLegend StoryMapBasic Styler SummaryViewer Time TimeAware TwoPane Viewer ZoneLookup".split(" ").some(function(sa){var pa,
Aa=-1<sa.indexOf(".html");sa="/apps/".concat(sa).concat(Aa?"":"/");return-1<(null===(pa=ma.url)||void 0===pa?void 0:pa.indexOf(sa))})}(X)&&U.push("retiredApp")),-1<ka.indexOf("Registered App")&&"API Key"!==X.type&&U.push("registered"),U},ia=Object(Q.a)(function(X,ha){return Object(Z.a)(Object(Z.a)({},ha),{badges:na(ha,X)})})},function(Q,T,O){O.d(T,"a",function(){return Z});var Z={ar:"\u0645\u0633\u062a\u0636\u0627\u0641",bs:"hostirano",ca:"allotjat",cs:"hostovan\u00e1 polo\u017eka",da:"hostede",de:"gehostet",
el:"hosted",en:"hosted",es:"alojado",et:"majutatud",fi:"is\u00e4nn\u00f6ity",fr:"h\u00e9berg\u00e9",he:"\u05de\u05ea\u05d0\u05e8\u05d7",hr:"hostirano",hu:"t\u00e1rolt",id:"di-host",it:"ospitati",ja:"\u30db\u30b9\u30c8",ko:"\ud638\uc2a4\ud305",lt:"talpinamas",lv:"viesots",nl:"gehoste",nb:"hostet",pl:"hostowane","pt-br":"hospedado","pt-pt":"alojados",ro:"g\u0103zduite",ru:"\u0440\u0430\u0437\u043c\u0435\u0449\u0435\u043d\u043d\u044b\u0439",sl:"gostujo\u010di",sk:"hostil",sr:"hostovani",sv:"driftade",
th:"\u0e2b\u0e25\u0e31\u0e01",tr:"bar\u0131nd\u0131r\u0131lan",uk:"\u0440\u043e\u0437\u043c\u0456\u0449\u0435\u043d\u0438\u0439 \u043d\u0430 \u0445\u043e\u0441\u0442\u0456",vi:"\u0111\u01b0\u1ee3c l\u01b0u tr\u1eef","zh-cn":"\u6258\u7ba1","zh-hk":"\u8a17\u7ba1","zh-tw":"\u8a17\u7ba1"}},function(Q,T,O){O.d(T,"a",function(){return ha});O.d(T,"d",function(){return V});O.d(T,"c",function(){return ea});O.d(T,"b",function(){return U});O.d(T,"f",function(){return ka});O.d(T,"h",function(){return ma});O.d(T,
"g",function(){return sa});O.d(T,"i",function(){return pa});O.d(T,"e",function(){return Aa});O.d(T,"m",function(){return za});O.d(T,"l",function(){return Ba});O.d(T,"k",function(){return ua});O.d(T,"o",function(){return Fa});O.d(T,"j",function(){return va});O.d(T,"p",function(){return xa});O.d(T,"n",function(){return Da});var Z=O(1);Q=O(65);var na=O.n(Q),ia=O(33),X=O(47),ha="CHANGE_PAGE",V="CHANGE_SORT_ORDER",ea="CHANGE_SORT_FIELD",U="CHANGE_SEARCH_STRING",ka="FETCH_RESOURCES",ma="FETCH_RESOURCES_SUCCESS",
sa="FETCH_RESOURCES_FAILED",pa="UPDATE_ACTIVE_FILTERS",Aa="CLEAR_ALL_FILTERS",za=function(Ca){return{type:V,payload:Ca}},Ba=function(Ca){return{type:ea,payload:Ca}},ua=function(Ca){return{type:U,payload:Ca}},Fa=function(){return function(Ca,qa){var W=qa();if(!1===W.ui.resourceSectionVisible)Ca({type:sa});else{Ca({type:ka});qa=Object(ia.v)(W.request,W.item.url);var ba=Object(ia.r)(W.request,W.portal,W.item.owner);na()([qa,ba]).then(function(oa){if("Geoprocessing Service"===W.item.type&&oa[0].tasks&&
0<oa[0].tasks.length){var wa=oa[0].tasks.map(function(Ea){return Object(ia.v)(W.request,"".concat(W.item.url,"/").concat(Ea))});na()(wa).then(function(Ea){Ca({type:ma,payload:{resources:Ea.map(function(Ga){return Object(Z.a)({type:"task"},Ga)}).filter(W.config.allowed),resourcesPerPage:W.config.resourcesPerPage,owner:Object(X.n)(W.portal,oa[1]),service:Object(Z.a)({},oa[0])}})},function(){Ca({type:sa})})}else"Big Data File Share"===W.item.type&&oa[0].children&&0<oa[0].children.length?(wa=oa[0].children.map(function(Ea){return Object(ia.v)(W.request,
"".concat(W.item.url,"/").concat(Ea.name))}),na()(wa).then(function(Ea){Ca({type:ma,payload:{resources:Ea.map(function(Ga,Ja){return Object(Z.a)(Object(Z.a)({},oa[0].children[Ja]),Ga)}).filter(W.config.allowed),resourcesPerPage:W.config.resourcesPerPage,owner:Object(X.n)(W.portal,oa[1]),service:Object(Z.a)({},oa[0])}})},function(){Ca({type:sa})})):oa[0].layers&&0<oa[0].layers.length||oa[0].tables&&0<oa[0].tables.length?(oa[0].layers=oa[0].layers.concat(oa[0].tables),wa=oa[0].layers.map(function(Ea){return Object(ia.v)(W.request,
"".concat(W.item.url,"/").concat(Ea.id))}),na()(wa).then(function(Ea){Ca({type:ma,payload:{resources:Ea.map(function(Ga,Ja){return Object(Z.a)(Object(Z.a)({},oa[0].layers[Ja]),Ga)}).filter(W.config.allowed),resourcesPerPage:W.config.resourcesPerPage,owner:Object(X.n)(W.portal,oa[1]),service:Object(Z.a)({},oa[0])}})},function(){Ca({type:sa})})):Object(ia.v)(W.request,W.item.url).then(function(Ea){Ca({type:ma,payload:{resources:[Ea].map(function(Ga){return Object(Z.a)(Object(Z.a)({},W.item),Ga)}).filter(W.config.allowed),
resourcesPerPage:W.config.resourcesPerPage,owner:Object(X.n)(W.portal,oa[1]),service:Object(Z.a)({},oa[0])}})},function(){Ca({type:sa})})},function(oa){Ca({type:sa})})}}},va=function(Ca){return{type:ha,payload:Ca}},xa=function(Ca,qa){return{type:pa,payload:{index:Ca,filter:qa}}},Da=function(){return{type:Aa}}},function(Q,T,O){function Z(X){var ha=Object(na.b)(X.settings.config.customSections,X.parameters.section);return(null==ha?0:ha.portal)?Object(ia.b)(ha.portal):X.settings.utils.portal}O.d(T,"a",
function(){return Z});var na=O(92),ia=O(99)},,,,,,,,,,,,,,function(Q,T,O){O.d(T,"b",function(){return Z});O.d(T,"a",function(){return na});var Z={maps:'(type:("Project Package" OR "Windows Mobile Package" OR "Map Package" OR "Basemap Package" OR "Mobile Basemap Package" OR "Mobile Map Package" OR "Pro Map" OR "Project Package" OR "Web Map" OR "CityEngine Web Scene" OR "Map Document" OR "Globe Document" OR "Scene Document" OR "Published Map" OR "Explorer Map" OR "ArcPad Package" OR "Map Template") -type:("Web Mapping Application" OR "Layer Package"))',
webMaps:'(type:("Web Map" OR "CityEngine Web Scene") -type:("Web Mapping Application"))',mapFiles:'(type:("Map Document" OR "Windows Mobile Package" OR "Globe Document" OR "Scene Document" OR "Published Map" OR "Explorer Map" OR "ArcPad Package" OR "Map Package" OR "Basemap Package" OR "Mobile Basemap Package" OR "Mobile Map Package" OR "Pro Map" OR "Project Package" OR "Map Template"))',layers:'(type:("OGCFeatureServer" OR "Scene Service" OR "Feature Collection" OR "Route Layer" OR "Layer" OR "Explorer Layer" OR "Tile Package" OR "Vector Tile Package" OR "Scene Package" OR "Layer Package" OR "Feature Service" OR "Stream Service" OR "Map Service" OR "Vector Tile Service" OR "Image Service" OR "WMS" OR "WFS" OR "Feed" OR "WMTS" OR "KML" OR typekeywords:"OGC" OR typekeywords:"Geodata Service" OR "Globe Service" OR "CSV" OR "Shapefile" OR "GeoJson" OR "Service Definition" OR "File Geodatabase" OR "CAD Drawing" OR "Relational Database Connection") -type:("Web Mapping Application" OR "Geodata Service"))',
featureLayers:'(type:("Feature Collection" OR "Feature Service" OR "Stream Service" OR "WFS" OR "Feed" OR "OGCFeatureServer") -typekeywords:"Table")',tileLayers:'(type:("WMTS" OR "Map Service" OR "Vector Tile Service") typekeywords:("Hosted" OR "Tiled"))',mapImageLayers:'(type:("Map Service" OR "WMS") -typekeywords:("Tiled") -type:("Web Map" OR "Web Mapping Application" OR "Shapefile"))',imageryLayers:'(type:"Image Service")',sceneLayers:'(type:"Scene Service")',tiledImageLayers:'(type: "Image Service" typekeywords: "Tiled Imagery")',
elevationLayers:'(type: "Image Service" typekeywords: "Elevation 3D Layer")',tables:"(typekeywords:Table)",layerFiles:'(type:("Layer" OR "Explorer Layer" OR "Tile Package" OR "Vector Tile Package" OR "Scene Package" OR "Layer Package" OR "CSV" OR "Shapefile" OR "GeoJson" OR "Service Definition" OR "File Geodatabase" OR "CAD Drawing" OR "Microsoft Excel") -type:("Explorer Maps" OR "Map Documents"))',scenes:'(-type:"CityEngine Web Scene" type:"Web Scene")',apps:'(type:("Code Sample" OR "Web Mapping Application" OR "StoryMap" OR "Mobile Application" OR "Application" OR "Desktop Application Template" OR "Desktop Application" OR "Operation View" OR "Dashboard" OR "Operations Dashboard Extension" OR "Workforce Project" OR "Insights Workbook" OR "Insights Page" OR "Insights Model" OR "Hub Page" OR "Hub Initiative" OR "Hub Site Application" OR "Web Experience" OR "Web Experience Template" OR "Form"))',
webApps:'(type:("Web Mapping Application" OR "Dashboard"))',sites:'(type:("Hub Site Application" OR "Site Application"))',pages:'(type:("Hub Page" OR "Site Page"))',storyMaps:'(type:"StoryMap")',experienceApps:'(type:("Web Experience" OR "Web Experience Template"))',instantApps:'typekeywords:"configurableApp"',mobileApps:'(type:"Mobile Application")',desktopApps:'(type:"Desktop Application" -type:"Desktop Application Template")',geobimProjects:'type:("GeoBIM Project")',geobimApplications:'type:("GeoBIM Application")',
developerCredentials:'type:("Application" AND typekeywords:"Registered App") OR type:("API Key")',oauth:'type:("Application" AND typekeywords:"Registered App")',apiKey:'type:("API Key")',tools:'((typekeywords:"tool" OR type:"Raster function template" OR type:"Geodata Service" OR type:"Workflow Manager Package" OR type:"Rule Package" OR type:"Operations Dashboard Add In" OR type:"Workflow Manager Service" OR type:"ArcGIS Pro Configuration" OR (type:("Big Data Analytic" OR "Real Time Analytic")) OR (type:"Geoprocessing Service" AND typekeywords: "Web Tool")) -type:"KML")',
analytics:'(type:("Big Data Analytic" OR "Real Time Analytic"))',locators:'(type:("Geocoding Service" OR "Locator Package"))',geodatabaseAccess:'(type:"Geodata Service")',geometricOperations:'(type:"Geometry Service")',geoprocessingTasks:'(type:("Geoprocessing Service" OR "Geoprocessing Package" OR "Geoprocessing Sample"))',networkAnalysis:'(type:"Network Analysis Service")',files:'((typekeywords:"Document" OR type:"CSV" OR type: "Administrative Report" OR type:"Image" OR type:"Layout" OR type:"Desktop Style" OR type:"Project Template" OR type:"Report Template" OR type:"Statistical Data Collection" OR type:"360 VR Experience" OR type:"netCDF") -type:("Map Document" OR "Image Service" OR "Explorer Document" OR "Explorer Map" OR "Globe Document" OR "Scene Document" OR "Microsoft Excel"))',
documents:'(typekeywords:"Document" -type:"PDF")',images:'(type:("Image" OR "360 VR Experience") -type:"Image Service")',pdfs:'(type:"PDF")',csvs:'(type:"CSV")',reports:'(type: "Administrative Report")',webTools:'(type:"Geoprocessing Service" AND typekeywords: "Web Tool")',notebooks:'(type:("Notebook") OR typekeywords:("Notebook" OR "Jupyter Notebook"))',notebookSnippet:'(type:("Notebook Code Snippets" OR "Notebook Code Snippet Library"))',bigDataFileShares:'type:("Big Data File Share")',rasterFunctionTemplates:'type:("Raster function template")',
deepLearningPackages:'type:("Deep Learning Package")',solution:'type:("Solution")',knowledgeGraphs:'(type:"Knowledge Graph")'},na="Web Map;CityEngine Web Scene;Web Scene;360 VR Experience;Pro Map;Feature Service;Map Service;Image Service;KML;KML Collection;WFS;WMTS;Feature Collection;Feature Collection Template;Vector Tile Service;Scene Service;Relational Database Connection;Web Mapping Application;Mobile Application;Code Attachment;Operations Dashboard Add In;Native Application;Native Application Template;Native Application Installer;Workforce Project;Form;Insights Workbook;Insights Data Engineering Workbook;Insights Model;Insights Data Engineering Model;Insights Page;Dashboard;Hub Initiative;Hub Site Application;Hub Page;Site Application;Site Page;AppBuilder Widget Package;Symbol Set;Color Set;Shapefile;File Geodatabase;CSV;Administrative Report;CAD Drawing;Service Definition;Microsoft Word;Microsoft Powerpoint;Microsoft Excel;PDF;Image;Visio Document;iWork Keynote;iWork Pages;iWork Numbers;Report Template;Statistical Data Collection;Map Document;Map Package;Mobile Basemap Package;Mobile Map Package;Tile Package;Vector Tile Package;Project Package;Task File;ArcPad Package;Explorer Map;Globe Document;Scene Document;Published Map;Map Template;Windows Mobile Package;Pro Map;Layout;Project Template;Layer;Layer Package;Explorer Layer;Scene Package;Image Collection;Desktop Style;Geoprocessing Package;Geoprocessing Package (Pro version);Geoprocessing Sample;Locator Package;Rule Package;Raster function template;Deep Learning Package;ArcGIS Pro Configuration;Workflow Manager Package;Desktop Application;Desktop Application Template;Code Sample;Desktop Add In;Explorer Add In;ArcGIS Pro Add In;Geometry Service;Geocoding Service;Network Analysis Service;Geoprocessing Service;Workflow Manager Service;Big Data File Share;Web Tool;Notebook;Notebook Code Snippets;Notebook Code Snippet Library;Web Experience;Web Experience Template;Feed;Real Time Analytic;Big Data Analytic;OGCFeatureServer;Solution;Knowledge Graph;API Key".split(";")},
,,,,function(Q,T,O){O.d(T,"a",function(){return na});var Z=O(1);Q=O(15);var na=Object(Q.a)(function(ia,X){var ha=Object(Z.a),V=Object(Z.a)({},X);ia=X.thumbnail?"".concat(ia.restUrl,"/community/users/").concat(X.username,"/info/").concat(X.thumbnail).concat(ia.credential?"?token\x3d".concat(ia.credential.token):""):void 0;return ha(V,{thumbURI:ia})})},function(Q,T){Q.exports=d},function(Q,T){Q.exports=b},,,,,,,,,,,,,,,,,,,,,function(Q,T){T=function(){return this}();try{T=T||(new Function("return this"))()}catch(O){"object"==
typeof window&&(T=window)}Q.exports=T},,,function(Q,T,O){O.d(T,"a",function(){return ha});O.d(T,"c",function(){return V});O.d(T,"b",function(){return ea});O.d(T,"d",function(){return U});O.d(T,"h",function(){return ka});O.d(T,"i",function(){return ma});O.d(T,"j",function(){return sa});O.d(T,"e",function(){return pa});O.d(T,"g",function(){return Aa});O.d(T,"f",function(){return za});O.d(T,"l",function(){return Ba});O.d(T,"k",function(){return Fa});O.d(T,"m",function(){return va});Q=O(65);var Z=O.n(Q);
Q=O(60);var na=O.n(Q),ia=O(33),X=O(55),ha="ADD_TO_FAVORITES",V="ADD_TO_FAVORITES_SUCCESS",ea="ADD_TO_FAVORITES_FAIL",U="LOADING_USER_INFO",ka="UPDATE_GROUP_CATEGORIES",ma="UPDATE_USER_INFO",sa="UPDATE_USER_INFO_FAILED",pa="REMOVE_FROM_FAVORITES",Aa="REMOVE_FROM_FAVORITES_SUCCESS",za="REMOVE_FROM_FAVORITES_FAIL",Ba=function(){return function(xa,Da){var Ca=Da();Da=Ca.parameters.filter.group;var qa=Ca.results.user.groupCategories;if("loaded"===Ca.results.user.status)return Da&&!qa[Da.id]?xa(ua(Da.id)):
(new na.a).resolve();if("failed"===Ca.results.user.status)return(new na.a).reject();xa({type:U});qa=Ca.settings.utils;Ca=qa.request;qa=qa.portal;return Z()([Object(ia.r)(Ca,qa).then(function(W){return W.groups.map(function(ba){return{id:ba.id,title:ba.title}})}),Object(ia.s)(Ca,qa).then(function(W){return W.folders.map(function(ba){return{id:ba.id,title:ba.title}})}),Object(ia.t)(Ca,qa,qa.user.favGroupId).then(function(W){return W.items.reduce(function(ba,oa){return ba[oa.id]=!0,ba},{})})].concat(Da?
[xa(ua(Da.id))]:[])).then(function(W){xa({type:ma,payload:{groups:W[0],folders:W[1],favorites:W[2]}})},function(W){xa({type:sa})})}},ua=function(xa){return function(Da,Ca){Ca=Ca().settings.utils;return Object(ia.f)(Ca.request,Ca.portal,xa).then(function(qa){Da({type:ka,payload:{id:xa,categorySchema:qa.categorySchema}})})}},Fa=function(xa){return function(Da,Ca){Ca=Ca();var qa=Ca.settings.utils.portal,W=qa.user.favGroupId;qa="".concat(qa.restUrl,"/content/items/").concat(xa.id,"/share");W={f:"json",
everyone:xa.access&&"public"===xa.access||xa.sharing&&xa.sharing.access&&"public"===xa.sharing.access,org:xa.access&&"org"===xa.access||xa.sharing&&xa.sharing.access&&"org"===xa.sharing.access||!1,groups:[W],items:[xa.id]};Da({type:ha,payload:xa});Ca.settings.utils.request(qa,{method:"post",query:W}).then(function(ba){Da({type:V,payload:xa})},function(ba){Da({type:ea,payload:xa})})}},va=function(xa){return function(Da,Ca){var qa=Ca(),W=qa.settings.utils.portal,ba=W.user.favGroupId,oa="".concat(W.restUrl,
"/content/items/").concat(xa.id,"/unshare"),wa={f:"json",everyone:!1,org:!1,groups:[ba],items:[xa.id]};Da({type:pa,payload:xa});qa.settings.utils.request(oa,{method:"post",query:wa}).then(function(Ea){function Ga(){Da({type:Aa,payload:xa})}"myFavorites"===(qa=Ca()).parameters.section?function ya(){qa.settings.utils.request("".concat(W.restUrl,"/search"),{query:{f:"json",q:"(id:".concat(xa.id,") (group:").concat(ba,")")},method:"get"}).then(function(Ha){0<Ha.data.total?setTimeout(function(){ya()},
250):(Ga(),Da(Object(X.i)()))},function(Ha){Ga()})}():Ga()},function(Ea){Da({type:za,payload:xa})})}}},,,,,function(Q,T,O){function Z(ua,Fa){ua=["",{method:"get",query:Fa.settings.config.addRequestParameters?Object(X.a)({f:"json",q:Object(V.b)(Fa),num:ua.num?ua.num:Fa.settings.config.resultsPerQuery,sortOrder:Fa.parameters.sort.order,start:ua.start?ua.start:1},Fa.settings.config.addRequestParameters()):{f:"json",q:Object(V.b)(Fa),num:ua.num?ua.num:Fa.settings.config.resultsPerQuery,sortOrder:Fa.parameters.sort.order,
start:ua.start?ua.start:1}}];return Object(ha.a)(sa(Fa),pa(Fa),Aa(Fa),za(Fa))(ua)}function na(ua,Fa){Fa=["",{method:"get",query:{f:"json",q:Object(V.a)(ua),num:0,countFields:Fa.join(", "),countSize:200}}];return ma(ua)(Fa)}function ia(ua,Fa){Fa=["",{method:"get",query:{f:"json",q:Object(V.c)(ua,Fa),num:0,countFields:"tags",countSize:200}}];return ma(ua)(Fa)}O.d(T,"b",function(){return Z});O.d(T,"a",function(){return na});O.d(T,"c",function(){return ia});var X=O(1),ha=O(64);Q=O(15);var V=O(182),ea=
O(341),U=O(123),ka=O(92),ma=function(ua){return Object(ha.a)(za(ua),Ba(ua),Aa(ua))},sa=Object(Q.a)(function(ua,Fa){var va=Fa[0];Fa=Fa[1];ua=ua.parameters.sort.field;return"relevance"!==ua?[va,Object(X.a)(Object(X.a)({},Fa),{query:Object(X.a)(Object(X.a)({},Fa.query),{sortField:ua})})]:[va,Fa]}),pa=Object(Q.a)(function(ua,Fa){var va=Fa[0];Fa=Fa[1];return ua.parameters.filter.searchMapArea?(ua=ua.parameters.extent.area,ua="".concat(ua.minx,",").concat(ua.miny,",").concat(ua.maxx,",").concat(ua.maxy),
[va,Object(X.a)(Object(X.a)({},Fa),{query:Object(X.a)(Object(X.a)({},Fa.query),{bbox:ua})})]):[va,Fa]}),Aa=Object(Q.a)(function(ua,Fa){var va=Fa[0];Fa=Fa[1];return(ua=Object(ea.a)(ua))?[va,Object(X.a)(Object(X.a)({},Fa),{query:Object(X.a)(Object(X.a)({},Fa.query),{enriched:ua})})]:[va,Fa]}),za=Object(Q.a)(function(ua,Fa){Fa[0];Fa=Fa[1];var va=ua.parameters,xa=va.section;va=va.filter;var Da=Object(U.a)(ua),Ca="".concat(Da.restUrl,"/search");if("myGroups"===xa&&va.group)Ca="".concat(Da.restUrl,"/content/groups/").concat(va.group.id,
"/search"),va.groupCategories&&(Ca+="?categories\x3d".concat(encodeURIComponent(JSON.stringify([va.groupCategories.value]))));else if("livingAtlas"!==xa&&"Living Atlas"!==xa||!ua.results.livingAtlas.groupId)if(!va.orgCategories||"myOrganization"!==xa&&"myContent"!==xa){if(ua=Object(ka.b)(ua.settings.config.customSections,xa))Object(ka.d)(ua)&&va.orgCategories&&(Ca+="?categories\x3d".concat(encodeURIComponent(JSON.stringify([va.orgCategories.value])))),(ua=Object(ka.c)(ua))&&(Ca="".concat(Da.restUrl,
"/content/groups/").concat(ua.id,"/search"),va.groupCategories&&(Ca+="?categories\x3d".concat(encodeURIComponent(JSON.stringify([va.groupCategories.value])))))}else Ca+="?categories\x3d".concat(encodeURIComponent(JSON.stringify([va.orgCategories.value])));else Ca="".concat(Da.restUrl,"/content/groups/").concat(ua.results.livingAtlas.groupId,"/search"),va.livingAtlasCategories?(Ca+="?categories\x3d".concat(encodeURIComponent(JSON.stringify([va.livingAtlasCategories.value]))),va.livingAtlasRegion&&
(Ca+="\x26categories\x3d".concat(encodeURIComponent(JSON.stringify([va.livingAtlasRegion.value]))))):va.livingAtlasRegion&&(Ca+="?categories\x3d".concat(encodeURIComponent(JSON.stringify([va.livingAtlasRegion.value]))));return[Ca,Fa]}),Ba=Object(Q.a)(function(ua,Fa){var va=Fa[0];Fa=Fa[1];var xa=ua.parameters.section,Da=Object(ka.b)(ua.settings.config.customSections,xa);return"myGroups"===xa&&ua.parameters.filter.group||("livingAtlas"===xa||"Living Atlas"===xa)&&ua.results.livingAtlas.groupId||Da&&
Object(ka.c)(Da)?[va,Object(X.a)(Object(X.a)({},Fa),{query:Object(X.a)(Object(X.a)({},Fa.query),{countFields:Fa.query.countFields?Fa.query.countFields.replace("categories","groupcategories"):void 0})})]:[va,Fa]})},,,,,,,,function(Q,T){Q.exports=a},function(Q,T,O){function Z(qa){return Object(ha.a)(V.b,Da(qa),Ca(qa),Object(ea.a)(qa.parameters.filter.orgGroup),Object(U.a)(qa.parameters.filter.status,qa.settings.utils.portal.user),xa(qa),Object(ka.a)(qa.parameters.filter.shared),Object(ma.a)(qa.parameters.filter.dateCreated),
Object(ma.b)(qa.parameters.filter.dateModified),Object(sa.a)(ua.b,{allowedItemTypes:qa.settings.config.allowedItemTypes,itemTypeFilter:qa.parameters.filter.itemType,specialItemQ:qa.settings.config.specialItemQ}),Object(pa.b)(qa.parameters.filter.tags),Object(Aa.a)(qa.parameters.filter.origins))([qa.parameters.searchString.current]).join(" ")}function na(qa){return Object(ha.a)(V.b,Da(qa),xa(qa),Object(sa.a)(ua.b,{allowedItemTypes:qa.settings.config.allowedItemTypes,specialItemQ:qa.settings.config.specialItemQ}))([qa.parameters.searchString.current]).join(" ")}
function ia(qa,W){return Object(ha.a)(V.b,Da(qa),xa(qa),Object(sa.a)(ua.b,{allowedItemTypes:qa.settings.config.allowedItemTypes,specialItemQ:qa.settings.config.specialItemQ}),Object(pa.a)(W))([qa.parameters.searchString.current]).join(" ")}O.d(T,"b",function(){return Z});O.d(T,"a",function(){return na});O.d(T,"c",function(){return ia});var X=O(1),ha=O(64),V=O(97),ea=O(383),U=O(384),ka=O(385),ma=O(305),sa=O(257),pa=O(306),Aa=O(386);Q=O(15);var za=O(7),Ba=O(183),ua=O(137),Fa=O(123),va=O(92),xa=Object(Q.a)(function(qa,
W){var ba=qa.parameters.filter,oa=qa.settings.config,wa=Object(Fa.a)(qa);switch(qa.parameters.section){case "myContent":return wa.user?wa.user&&ba.folder?Object(X.g)(Object(X.g)([],W,!0),['(owner:"'.concat(wa.user.username,'") (ownerfolder:').concat(ba.folder.id,")")],!1):Object(X.g)(Object(X.g)([],W,!0),['(owner:"'.concat(wa.user.username,'")')],!1):W;case "myFavorites":return wa.user?Object(X.g)(Object(X.g)([],W,!0),["(group:".concat(wa.user.favGroupId,")")],!1):W;case "myGroups":if(qa.results.user.groups){if(qa.parameters.filter.group)return Object(X.g)(Object(X.g)([],
W,!0),["(group:".concat(qa.parameters.filter.group.id,")")],!1);ba=qa.results.user.groups.map(function(Ea){return Ea.id});return Object(X.g)(Object(X.g)([],W,!0),["(group:".concat(ba.join(" OR group:"),")")],!1)}return W;case "myOrganization":return Object(X.g)(Object(X.g)([],W,!0),["(orgid:".concat(wa.id,")")],!1);case "subscription":return Object(X.g)(Object(X.g)([],W,!0),["(".concat(qa.results.provisionedContent.content.map(function(Ea){return"id:".concat(Ea)}).join(" OR "),")")],!1);case "all":return W;
default:return(ba=oa.customSections.filter(function(Ea){return qa.parameters.section===Ea.name})[0])?Object(X.g)(Object(X.g)([],W,!0),[ba.baseQuery],!1):W}}),Da=Object(Q.a)(function(qa,W){var ba=qa.settings.config.addQueryParameters;try{if(ba&&"function"==typeof ba)return Object(X.g)(Object(X.g)([],W,!0),[ba(qa)],!1)}catch(oa){}return W}),Ca=Object(Q.a)(function(qa,W){var ba=Object(va.b)(qa.settings.config.customSections,qa.parameters.section);if(ba&&!Object(za.b)(qa.parameters.filter.customFilter)){var oa=
Object.keys(qa.parameters.filter.customFilter).filter(function(wa){return qa.parameters.filter.customFilter[wa]}).reduce(function(wa,Ea){var Ga;Ea=parseInt(Ea,10);var Ja=qa.parameters.filter.customFilter[Ea].value;if(null===(Ga=null==ba?void 0:ba.filters)||void 0===Ga?0:Ga[Ea])if(Ga=Object(Ba.a)("children","value",ba.filters[Ea],Ja))return Object(X.g)(Object(X.g)([],wa,!0),["(".concat(Ga.q,")")],!1);return wa},[]).join(" AND ");return Object(X.g)(Object(X.g)([],W,!0),["".concat(oa)],!1)}return W})},
function(Q,T,O){function Z(pa,Aa){return ea("children","value",pa,Aa)}function na(pa,Aa){return U("children","value",pa,Aa)}function ia(pa,Aa){return function xa(Ba,ua,Fa,va){var Da,Ca=Fa[Ba];return Ca&&0!==Ca.length?Object(sa.a)(Object(sa.a)({},Fa),((Da={})[Ba]=Ca.reduce(function(qa,W){return-1!==va.indexOf(W[ua])&&qa.push(xa(Ba,ua,W,va)),qa},[]),Da)):Object(sa.a)({},Fa)}("children","value",pa,Aa)}function X(pa){return function(Aa,za){var Ba,ua=za[Aa];return ua?Object(sa.a)(Object(sa.a)({},za),((Ba=
{})[Aa]=function xa(va){return 0===va.length?[]:1!==va.length||va[0][Aa]?1<va.length?va.reduce(function(Da,Ca){var qa;return Ca[Aa]?(Da.push(Object(sa.a)(Object(sa.a)({},Ca),((qa={})[Aa]=xa(Ca[Aa]),qa))),Da):(Da.push(Ca),Da)},[]):xa(va[0][Aa]):va}(ua),Ba)):za}("children",pa)}function ha(pa,Aa){return ka("children",pa,Aa)}function V(pa,Aa){return function va(Ba,ua,Fa){var xa=ua[Ba];xa&&xa.forEach(function(Da){return va(Ba,Da,Fa)});Fa(ua)}("children",pa,Aa)}function ea(pa,Aa,za,Ba){var ua=za[pa];return za[Aa]===
Ba?za:ua?ua.reduce(function(Fa,va){return Fa||ea(pa,Aa,va,Ba)},void 0):void 0}function U(pa,Aa,za,Ba){if(za=za[pa])return za.reduce(function(ua,Fa){return Fa[Aa]===Ba[0]?1===Ba.length?Fa:U(pa,Aa,Fa,Ba.slice(1)):ua},void 0)}function ka(pa,Aa,za){var Ba;return za(Object(sa.a)(Object(sa.a)({},Aa),((Ba={})[pa]=Aa[pa]?Aa[pa].map(function(ua){return ka(pa,ua,za)}):void 0,Ba)))}function ma(pa,Aa,za){return ka(pa,za,function(Ba){var ua=Ba[Aa];if(delete Ba[Aa],Ba[pa]){var Fa=Ba[pa];return delete Ba[pa],Object(sa.a)(Object(sa.a)({},
Ba),{value:ua,children:Fa})}return Object(sa.a)(Object(sa.a)({},Ba),{value:ua})})}O.d(T,"f",function(){return Z});O.d(T,"d",function(){return na});O.d(T,"i",function(){return ia});O.d(T,"e",function(){return X});O.d(T,"h",function(){return ha});O.d(T,"g",function(){return V});O.d(T,"a",function(){return ea});O.d(T,"b",function(){return U});O.d(T,"c",function(){return ma});var sa=O(1)},,function(Q,T,O){function Z(V){return Object(ha.h)(V,function(ea){return ea.count&&delete ea.count,ea})}function na(V,
ea,U){if(ea)return V.counts.filter(function(ka){return ka.fieldName===U})[0].fieldValues.forEach(function(ka){var ma=ka.count;ka=ka.value.split("/").slice(1);(ka=Object(ha.d)(ea,ka))&&(ka.count=ma)}),ea}function ia(V){V=Object(ha.c)("categories","title",{title:"root",categories:V});return Object(ha.h)(V,function(ea){return Object(X.a)(Object(X.a)({},ea),{value:ea.value.toLowerCase(),displayName:ea.displayName?ea.displayName:ea.value,tooltip:ea.description?ea.description:void 0})}).children}O.d(T,
"a",function(){return Z});O.d(T,"c",function(){return na});O.d(T,"b",function(){return ia});var X=O(1),ha=O(183)},,,,function(Q,T){function O(){throw Error("setTimeout has not been defined");}function Z(){throw Error("clearTimeout has not been defined");}function na(Aa){if(ea===setTimeout)return setTimeout(Aa,0);if((ea===O||!ea)&&setTimeout)return ea=setTimeout,setTimeout(Aa,0);try{return ea(Aa,0)}catch(za){try{return ea.call(null,Aa,0)}catch(Ba){return ea.call(this,Aa,0)}}}function ia(){sa&&ka&&
(sa=!1,ka.length?ma=ka.concat(ma):pa=-1,ma.length&&X())}function X(){if(!sa){var Aa=na(ia);sa=!0;for(var za=ma.length;za;){ka=ma;for(ma=[];++pa<za;)ka&&ka[pa].run();pa=-1;za=ma.length}ka=null;sa=!1;(function(Ba){if(U===clearTimeout)return clearTimeout(Ba);if((U===Z||!U)&&clearTimeout)return U=clearTimeout,clearTimeout(Ba);try{U(Ba)}catch(ua){try{return U.call(null,Ba)}catch(Fa){return U.call(this,Ba)}}})(Aa)}}function ha(Aa,za){this.fun=Aa;this.array=za}function V(){}Q=Q.exports={};try{var ea="function"==
typeof setTimeout?setTimeout:O}catch(Aa){ea=O}try{var U="function"==typeof clearTimeout?clearTimeout:Z}catch(Aa){U=Z}!0;var ka,ma=[],sa=!1,pa=-1;Q.nextTick=function(Aa){var za=Array(arguments.length-1);if(1<arguments.length)for(var Ba=1;Ba<arguments.length;Ba++)za[Ba-1]=arguments[Ba];ma.push(new ha(Aa,za));1!==ma.length||sa||na(X)};ha.prototype.run=function(){this.fun.apply(null,this.array)};Q.title="browser";Q.browser=!0;Q.env={};Q.argv=[];Q.version="";Q.versions={};Q.on=V;Q.addListener=V;Q.once=
V;Q.off=V;Q.removeListener=V;Q.removeAllListeners=V;Q.emit=V;Q.prependListener=V;Q.prependOnceListener=V;Q.listeners=function(Aa){return[]};Q.binding=function(Aa){throw Error("process.binding is not supported");};Q.cwd=function(){return"/"};Q.chdir=function(Aa){throw Error("process.chdir is not supported");};Q.umask=function(){return 0}},,,,,,function(Q,T,O){function Z(X){var ha,V;return null!==(ha=X.orgId)&&void 0!==ha?ha:null===(V=X.portal)||void 0===V?void 0:V.id}function na(X){var ha;if(!X)return!1;
var V=Z(X),ea=null===(ha=X.portal)||void 0===ha?void 0:ha.isPortal;return!!V&&!ea&&"public_authoritative"===X.contentStatus}function ia(X,ha,V){return new Promise(function(ea){var U=X.map(function(ka){return function(ma,sa,pa){var Aa="https://".concat(sa.portalHostname,"/sharing/rest/portals/").concat(ma);return new Promise(function(za){pa(Aa,{method:"get",query:{f:"json"}}).then(function(Ba){var ua=Ba.data,Fa=ua.urlKey,va=ua.customBaseUrl,xa=ua.thumbnail;Ba=ua.name;ua="".concat(ua.allSSL?"https://":
"http://").concat(Fa||"",".").concat(va,"/");xa=xa?"".concat(ua,"sharing/rest/portals/self/resources/").concat(xa):"./images/group-no-image.png";za({name:Ba,url:"".concat(ua,"home/"),thumbnail:xa,id:ma})})})}(ka,ha,V)});Promise.all(U).then(function(ka){ea(ka.filter(function(ma){return ma}))})})}O.d(T,"b",function(){return Z});O.d(T,"c",function(){return na});O.d(T,"a",function(){return ia})},,,function(Q,T,O){function Z(ma,sa,pa){return ma.filter(function(Aa,za,Ba){return Ba.indexOf(Aa)===za&&!sa.hasOwnProperty(Aa)&&
-1===pa.indexOf(Aa)})}O.d(T,"c",function(){return ha});O.d(T,"d",function(){return V});O.d(T,"a",function(){return ea});O.d(T,"b",function(){return U});O.d(T,"e",function(){return ka});var na=O(1),ia=O(195),X=O(293),ha="USER_THUMBNAILS_LOAD_START",V="USER_THUMBNAILS_LOAD_SUCCESS",ea="ORG_THUMBNAILS_LOAD_START",U="ORG_THUMBNAILS_LOAD_SUCCESS",ka=function(ma,sa){var pa=sa(),Aa=pa.settings.utils;sa=Aa.request;Aa=Aa.portal;var za=pa.ui.pagination;pa=za.displayItems;var Ba=za.userThumbnailCache,ua=za.pendingUserThumbRequests,
Fa=za.orgThumbnailCache;za=za.pendingOrgThumbRequests;Fa=Z(pa.filter(ia.c).map(ia.b),Fa,za);pa=Z(pa.map(function(va){return va.owner}),Ba,ua);if(0!==pa.length||0!==Fa.length)ma({type:ha,payload:pa}),ma({type:ea,payload:Fa}),pa=Object(X.a)(pa,Aa,sa),sa=Object(ia.a)(Fa,Aa,sa),Promise.all([pa,sa]).then(function(va){var xa=va[0];va=va[1];xa=(null==xa?void 0:xa.reduce(function(Da,Ca){var qa;return Object(na.a)(Object(na.a)({},Da),((qa={})[Ca.username]={thumbnail:Ca.thumbURI||Ca.thumbnail,username:Ca.username,
fullName:Ca.fullName,id:Ca.id},qa))},{}))||{};va=(null==va?void 0:va.reduce(function(Da,Ca){var qa;return Object(na.a)(Object(na.a)({},Da),((qa={})[Ca.id]=Ca,qa))},{}))||{};ma({type:V,payload:xa});ma({type:U,payload:va})})}},,,,,function(Q,T){Q.exports=e},function(Q,T){Q.exports=q},,,,,,,,,,function(Q,T){Q.exports=t},function(Q,T,O){O.d(T,"a",function(){return U});var Z=O(1);Q=O(60);var na=O.n(Q);Q=O(65);var ia=O.n(Q);Q=O(15);var X=O(97),ha=O(33),V=O(307),ea=O(123),U=Object(Q.a)(function(ka,ma){var sa=
ka.settings.utils.request,pa=Object(ea.a)(ka),Aa=new na.a,za=ma.data.results.filter(function(Ba){return Ba.orgId&&!ka.results.allOrganizations[Ba.orgId]}).map(function(Ba){return Ba.orgId}).filter(X.e).map(function(Ba){return Object(ha.m)(sa,pa,Ba)});return ia()(za).then(function(Ba){Aa.resolve(Object(Z.a)(Object(Z.a)({},ma),{data:Object(Z.a)(Object(Z.a)({},ma.data),{organizations:Ba.reduce(function(ua,Fa){var va;return Object(Z.a)(Object(Z.a)({},ua),((va={})[Fa.id]=Object(V.a)(Fa),va))},{})})}))},
function(Ba){Aa.reject(Ba)}),Aa})},,,,,,,function(Q,T,O){O.d(T,"c",function(){return Z});O.d(T,"d",function(){return na});O.d(T,"e",function(){return ia});O.d(T,"b",function(){return X});O.d(T,"f",function(){return ha});O.d(T,"g",function(){return V});O.d(T,"a",function(){return ea});O.d(T,"h",function(){return U});O.d(T,"i",function(){return ka});O.d(T,"j",function(){return ma});var Z="MAXIMIZE_DLG",na="MINIMIZE_DLG",ia="TOGGLE_EXPANDED_FILTERS",X="CLOSE_FULLSCREEN_BROWSER",ha="TOGGLE_EXPANDED_SORT",
V="UPDATE_SUBLAYER_CARD_STATE",ea="CLOSE_EXPANDED_SORT",U=function(){return{type:ea}},ka=function(){return{type:ia}},ma=function(){return{type:ha}}},function(Q,T,O){O.d(T,"a",function(){return ia});var Z=O(1),na=O(99),ia=function(X){var ha=Object(Z.a),V=Object(Z.a)({},X),ea=Object(na.a)(X);X=X.thumbnail?"".concat(ea,"/sharing/rest/portals/").concat(X.id,"/resources/").concat(X.thumbnail):"".concat(ea,"/home/images/group-no-image.png");return ha(V,{thumbURI:X})}},function(Q,T,O){O.d(T,"a",function(){return ia});
var Z=O(1),na=O(99),ia=function(X){return Object(Z.a)(Object(Z.a)({},X),{orgUrl:"".concat(Object(na.a)(X),"/home/index.html")})}},,,,,,,,,,,,,,,,,,,,,,,,function(Q,T){Q.exports=u},function(Q,T){Q.exports=g},function(Q,T,O){O.d(T,"a",function(){return X});O.d(T,"b",function(){return ha});O.d(T,"c",function(){return V});O.d(T,"d",function(){return ea});Q=O(60);var Z=O.n(Q),na=O(33),ia=O(80),X="UPDATE_PROVISIONED_CONTENT",ha="UPDATE_PROVISIONED_CONTENT_FAILED",V="UPDATE_PROVISIONED_CONTENT_SUCCESS",
ea=function(){return function(U,ka){var ma=ka();if("loaded"===ma.results.provisionedContent.status)return(new Z.a).resolve();if("failed"===ma.results.provisionedContent.status)return(new Z.a).reject();U({type:X});ka=ma.settings.utils;var sa=ka.portal;return Object(na.d)(ka.request,sa,sa.user.username).then(function(pa){var Aa,za,Ba=ma.settings.config.allowedItemTypes;0===(null===(Aa=ma.settings.config.allowedItemTypes)||void 0===Aa?void 0:Aa.length)&&0<(null===(za=ma.settings.config.availableItemTypeFilters)||
void 0===za?void 0:za.length)&&ma.settings.config.availableItemTypeFilters.every(function(ua){return null==ua?void 0:ua.toLowerCase().includes("layer")})&&(Ba="Map Service;Image Service;Feature Service;Stream Service;Vector Tile Service;WMS;WFS;WMTS;KML;Feature Collection;Feed".split(";"));U({type:V,payload:pa.filter(function(ua){ua=ua.type;return-1<(null==Ba?void 0:Ba.indexOf(ua))}).map(function(ua){return Object(ia.a)(sa,ma.settings.utils.iconDir,ua)})})},function(pa){U({type:ha})})}}},,,,,,function(Q,
T,O){O.d(T,"a",function(){return ea});O.d(T,"c",function(){return U});O.d(T,"d",function(){return ka});O.d(T,"b",function(){return ma});O.d(T,"e",function(){return sa});var Z=O(1);Q=O(65);var na=O.n(Q);Q=O(60);var ia=O.n(Q),X=O(97),ha=O(33);Q=O(15);var V=O(92),ea="LOADING_CUSTOM_SECTION_INFO",U="UPDATE_CUSTOM_SECTION_SCHEMAS",ka="UPDATE_CUSTOM_SECTION_INFO_FAILED",ma="UPDATE_CUSTOM_SECTION_GROUPS",sa=function(){return function(za,Ba){function ua(xa){za({type:ka})}var Fa=Ba();if("loaded"===Fa.results.customSections.status)return(new ia.a).resolve();
if("failed"===Fa.results.customSections.status)return(new ia.a).reject();za({type:ea});var va=Object(X.f)("id",Fa.settings.config.customSections.filter(V.f).map(V.a).reduce(function(xa,Da){return Object(Z.g)(Object(Z.g)([],xa,!0),Da,!0)},[]));return pa(za,Ba,va).then(function(){return Fa=Ba(),na()(va.map(function(xa){return Aa(Fa,xa).then(function(Da){return{id:xa.id,type:xa.type,response:Da}})}))},ua).then(function(xa){return za({type:U,payload:xa})},ua)}},pa=function(za,Ba,ua){var Fa=Ba(),va=new ia.a;
if(0<ua.length){Fa=Fa.settings.utils;var xa=Fa.request,Da=Fa.portal;ua=ua.filter(function(Ca){return"group"===Ca.type}).map(function(Ca){var qa=Ca.id;return Object(ha.e)(xa,Da,Ca.fetchGroupIdByQuery||"id:".concat(qa)).then(function(W){return W.results[0]||{}})});na()(ua).then(function(Ca){var qa=Ba();za({type:ma,payload:{currentSection:qa.parameters.section,customSections:qa.settings.config.customSections,groups:Ca}});va.resolve()})}else va.resolve();return va},Aa=Object(Q.a)(function(za,Ba){var ua=
za.settings.utils;za=ua.request;ua=ua.portal;return Ba.staticSchema?(za=new ia.a,za.resolve({categorySchema:Ba.staticSchema}),za.then(function(Fa){return Fa})):"group"===Ba.type?Object(ha.f)(za,ua,Ba.id):Object(ha.j)(za,ua,Ba.id)})},function(Q,T,O){function Z(ha){if(0<ha.length){var V=ia.a.filter(function(ea){return-1===ha.indexOf(ea)}).filter(function(ea){return ha.reduce(function(U,ka){return-1<ea.indexOf(ka)||U},!1)});return'((type:"'.concat(ha.join('" OR type:"'),'")').concat(0<V.length?' AND (-type:"'.concat(V.join('" AND -type:"'),
'")'):"",")")}return""}O.d(T,"a",function(){return X});var na=O(1),ia=O(137);Q=O(15);var X=Object(Q.a)(function(ha,V,ea){var U=V.itemTypeFilter,ka=V.allowedItemTypes;V=V.specialItemQ;return U?0<ka.length&&V?Object(na.g)(Object(na.g)([],ea,!0),["".concat(ha[U.value]," AND (").concat(V," OR (").concat(Z(ka),"))")],!1):0<ka.length||V?Object(na.g)(Object(na.g)([],ea,!0),["".concat(ha[U.value]," AND (").concat("".concat(V||Z(ka)),")")],!1):Object(na.g)(Object(na.g)([],ea,!0),["".concat(ha[U.value])],!1):
V?Object(na.g)(Object(na.g)([],ea,!0),["(".concat(V,") ").concat(0<ka.length?"OR (".concat(Z(ka),")"):"")],!1):Object(na.g)(Object(na.g)([],ea,!0),[Z(ka)],!1)})},function(Q,T,O){O.d(T,"a",function(){return X});O.d(T,"b",function(){return ha});O.d(T,"c",function(){return V});O.d(T,"d",function(){return ea});Q=O(65);var Z=O.n(Q);Q=O(60);var na=O.n(Q),ia=O(33),X="LOADING_ORG_INFO",ha="UPDATE_ORG_INFO",V="UPDATE_ORG_INFO_FAILED",ea=function(){return function(U,ka){ka=ka();if("loaded"===ka.results.organization.status)return(new na.a).resolve();
if("failed"===ka.results.organization.status)return(new na.a).reject();U({type:X});var ma=ka.settings.utils;ka=ma.request;ma=ma.portal;var sa=[Object(ia.j)(ka,ma).then(function(pa){return pa.categorySchema}),Object(ia.c)(ka,ma).then(function(pa){return pa.data.results})];return ma.isPortal&&sa.push(Object(ia.o)(ka,ma).then(function(pa){return pa.servers})),Z()(sa).then(function(pa){U({type:ha,payload:{schema:pa[0],groups:pa[1],servers:pa[2]}})},function(pa){U({type:V})})}}},,,,,,,,,,,,,,function(Q,
T){Q.exports=m},function(Q,T,O){O.d(T,"b",function(){return U});O.d(T,"a",function(){return ka});O.d(T,"c",function(){return ma});var Z=O(1);Q=O(65);var na=O.n(Q);Q=O(60);var ia=O.n(Q),X=O(33),ha=O(47),V=O(80),ea=O(123),U="UPDATE_FULL_ITEM_DETAILS",ka="FETCH_FULL_ITEM_DETAILS_FAILED",ma=function(sa){return function(pa,Aa){var za=Aa(),Ba=Object(ea.a)(za),ua=za.settings.utils.request;Aa=[];Aa.push(Object(X.r)(ua,Ba,sa.owner).then(function(va){return Object(ha.n)(Ba,va)},function(va){throw va;}));var Fa=
"".concat(Ba.restUrl,"/content/items/").concat(sa.id);Ba.user&&sa.owner===Ba.user.username&&(Fa=Ba.user.username,Fa="".concat(Ba.restUrl,"/content/users/").concat(Fa,"/items/").concat(sa.id));Aa.push(Object(X.v)(ua,Fa).then(function(va){if(va.item&&va.sharing){var xa=new ia.a;return Object(X.v)(ua,"".concat(Ba.restUrl,"/community/groups"),{q:"id: ".concat(va.sharing.groups.map(function(Da){return'"'.concat(Da,'"')}).join(" OR "))}).then(function(Da){return xa.resolve(Object(Z.a)(Object(Z.a)({},Object(V.a)(Ba,
za.settings.utils.iconDir,va.item)),{sharing:va.sharing,sharedToGroups:Da.results}))},function(Da){return xa.reject(Da)}),xa}return Object(V.a)(Ba,za.settings.utils.iconDir,va)},function(va){throw sa.id;}));na()(Aa).then(function(va){pa({type:U,payload:{item:va[1],owner:va[0]}})},function(va){pa({type:ka,payload:va})})}}},,function(Q,T,O){O.d(T,"a",function(){return Z});O.d(T,"b",function(){return na});var Z="CHANGE_SEARCH_SECTION",na=function(ia){return function(X,ha){ha=ha();X({type:Z,payload:{newSection:ia,
customSections:ha.settings.config.customSections,customSectionGroupSort:ha.results.customSections.groupSort}})}}},,function(Q,T,O){O.d(T,"b",function(){return Z});O.d(T,"a",function(){return na});O.d(T,"d",function(){return ia});O.d(T,"c",function(){return X});var Z="CHANGE_SORT_ORDER",na="CHANGE_SORT_FIELD",ia=function(ha){return{type:Z,payload:ha}},X=function(ha){return{type:na,payload:ha}}},,function(Q,T){Q.exports=v},function(Q,T,O){O.d(T,"b",function(){return ha});O.d(T,"a",function(){return V});
O.d(T,"c",function(){return ea});O.d(T,"d",function(){return U});var Z=O(173),na=O(80),ia=O(215),X=O(198),ha="CHANGE_PAGE_SUCCESS",V="CHANGE_PAGE_FAIL",ea="CHANGING_PAGE",U=function(ka){return function(ma,sa){sa=sa();ma({type:ea,payload:ka});var pa=sa.settings.utils,Aa=pa.portal,za=pa.iconDir;pa=sa.settings.utils.request;var Ba=sa.settings.config.resultsPerQuery;Ba=Object(Z.b)({num:Ba,start:(ka-1)*Ba+1},sa);pa(Ba[0],Ba[1]).then(Object(ia.a)(sa),function(ua){return ma({type:V,payload:{err:ua}})}).then(function(ua){ma({type:ha,
payload:{organizations:ua.data.organizations,displayItems:ua.data.results.map(function(Fa){return Object(na.a)(Aa,za,Fa)}),page:ka}});ma(X.e)},function(ua){return ma({type:V,payload:{err:ua}})})}}},,,,,,,,,,,function(Q,T,O){var Z=O(1);Q=O(17);var na=O(89);O=function(ia){function X(){return null!==ia&&ia.apply(this,arguments)||this}return Object(Z.d)(X,ia),X.prototype.render=function(ha){return ha("div",{class:"ib-ex-results__item-list"},ha("div",{class:"ib-ex-results__no-items-container"},ha("div",
{class:"ib-ex-results__no-items-centered"},ha("svg",{role:"img",viewBox:"0 0 256 256",width:"256"},ha("path",{fill:"#ccc",d:na.f})),ha("p",{class:"ib-ex-results__no-items-text"},this.props.text))))},X}(Q.Component);T.a=O},,function(Q,T,O){function Z(na,ia,X){return Promise.all(na.map(function(ha){return function(V,ea,U){return new Promise(function(ka,ma){U("".concat(ea.restUrl,"/community/users/").concat(V),{method:"get",query:{f:"json"}}).then(function(sa){return ka(null==sa?void 0:sa.data)},ma)})}(ha,
ia,X)}))}O.d(T,"a",function(){return Z})},,,,,,,,,,,,function(Q,T,O){O.d(T,"b",function(){return na});O.d(T,"a",function(){return ia});var Z=O(1);Q=O(15);Q=Object(Q.a)(function(X,ha,V){if(ha){var ea=Object(Z.g);V=Object(Z.g)([],V,!0);X="(".concat(X,":");var U=X.concat;ha="[".concat(ha.start," TO ").concat(ha.end,"]");ea=ea(V,[U.call(X,ha,")")],!1)}else ea=V;return ea});var na=Q("modified"),ia=Q("uploaded")},function(Q,T,O){O.d(T,"b",function(){return na});O.d(T,"a",function(){return ia});var Z=O(1);
Q=O(15);var na=Object(Q.a)(function(X,ha){return X&&(X=Object.keys(X),0<X.length)?Object(Z.g)(Object(Z.g)([],ha,!0),["tags:(".concat(X.join(" AND "),")")],!1):ha}),ia=Object(Q.a)(function(X,ha){return 2<X.length?Object(Z.g)(Object(Z.g)([],ha,!0),["tags:(".concat(X,"* OR ").concat(X,")")],!1):ha})},function(Q,T,O){O.d(T,"a",function(){return na});Q=O(64);T=O(99);var Z=O(223);O=O(224);var na=Object(Q.a)(Z.a,O.a,T.b)},function(Q,T,O){O.d(T,"a",function(){return ha});O.d(T,"b",function(){return V});Q=
O(60);var Z=O.n(Q),na=O(33),ia=O(307),X=O(143),ha="UPDATE_PORTAL_SELF",V=function(){return function(ea,U){var ka=U(),ma=ka.settings.utils;U=ma.portal;ma=ma.request;var sa=U.user&&U.user.culture?U.user.culture:X.locale;return ka.settings.utils.self?(new Z.a).resolve(ka.settings.utils.self):Object(na.n)(ma,U,sa).then(function(pa){pa=Object(ia.a)(pa);return ea({type:ha,payload:{self:pa,config:ka.settings.config}}),pa})}}},function(Q,T,O){O.d(T,"a",function(){return V});O.d(T,"b",function(){return ea});
O.d(T,"c",function(){return U});O.d(T,"d",function(){return ka});var Z=O(1),na=O(37);Q=O(60);var ia=O.n(Q),X=O(143),ha=O(387),V="LOADING_LIVING_ATLAS_INFO",ea="UPDATE_LIVING_ATLAS_INFO",U="FETCH_LIVING_ATLAS_INFO_FAILED",ka=function(ma){return function(sa,pa){pa=pa();if("loaded"===pa.results.livingAtlas.status)return(new ia.a).resolve();if("failed"===pa.results.livingAtlas.status)return(new ia.a).reject();sa({type:V});pa=pa.settings.utils;var Aa=pa.portal;return Object(ha.a)(pa.request,Aa,ma,Aa.user&&
Aa.user.culture?Aa.user.culture:X.locale).then(function(za){sa({type:ea,payload:Object(Z.a)(Object(Z.a)({},za),{schema:za.schema.map(function(Ba){return"region"===Ba.title?Object(Z.a)(Object(Z.a)({},Ba),{displayName:na.regions}):Ba})})})},function(za){sa({type:U})})}}},function(Q,T,O){O.d(T,"a",function(){return ha});var Z=O(33),na=O(56);Q=O(65);var ia=O.n(Q),X=function(V,ea,U){V({type:"LOADING_COLLABORATIONS"});var ka=[];Object.keys(U).forEach(function(sa){ka[sa]=[];0<U[sa].participants.length&&
U[sa].participants.forEach(function(pa){ka[pa.value]=[]})});var ma=Object.keys(ka).map(function(sa){sa=sa.split("__");var pa=sa[0],Aa=sa[1]?sa[1]:"";return Object(Z.k)(ea.settings.utils.request,ea.settings.utils.portal,ea.settings.utils.portal.id,{query:""!==Aa?{collaborationId:pa,participantId:Aa,f:"json"}:{collaborationId:pa,f:"json"}}).then(function(za){(za.data.collaboratedItems||za.collaboratedItems).forEach(function(Ba){if(Aa){var ua=pa+"__"+Aa;U[pa].participants.filter(function(Fa){return Fa.value===
ua})[0].items.push(Object.keys(Ba)[0])}else U[pa].items.push(Object.keys(Ba)[0])})},function(){return V({type:"LOADING_COLLABORATIONS_FAILED"})})});return ia()(ma).then(function(){V(Object(na.s)(U));V({type:"LOADING_COLLABORATIONS_SUCCESS",payload:U})})},ha=function(V,ea){if(V({type:"LOADING_COLLABORATIONS"}),ea&&ea.parameters&&ea.parameters.filter&&ea.parameters.filter.origins&&0<Object.keys(ea.parameters.filter.origins).length){var U=ea.parameters.filter.origins;return V(Object(na.s)(U)),{type:"LOADING_COLLABORATIONS_SUCCESS",
payload:U}}return Object(Z.l)(ea.settings.utils.request,ea.settings.utils.portal,ea.settings.utils.portal.id,{query:{includeParticipantInfo:"true",f:"json"}}).then(function(ka){var ma=[];ka.data&&ka.data.collaborations&&ka.data.collaborations.forEach(function(sa){var pa=sa.collaborationId,Aa=sa.collaborationName.trim();ma[pa]={value:pa,label:Aa,addClass:"",childOf:"",selected:!1,participants:[],items:[]};sa.participants&&(ma[pa].participants=sa.participants.map(function(za){return 1===(za=Object.keys(za).map(function(Ba){var ua=
za[Ba].trim();return{value:pa+"__"+Ba,label:ua,childOf:pa,addClass:"filter-tree-item-child",selected:!1,items:[]}})).length?za[0]:za}))});X(V,ea,ma).then(function(){return V(Object(na.s)(ma))},function(){return V({type:"LOADING_COLLABORATIONS_FAILED"})})},function(ka){return V({type:"LOADING_COLLABORATIONS_FAILED",payload:ka})})}},,,,,,function(Q,T){Q.exports=p},,,,,,,,,function(Q,T){Q.exports=l},,,,,,,,,function(Q,T,O){var Z=O(1),na=O(37);Q=O(17);var ia=O(183),X=O(534),ha=O(56),V=O(55),ea=O(396),
U=O(525),ka=O.n(U);U=O(361);var ma=O.n(U);U=O(526);var sa=O.n(U);U=O(527);var pa=O.n(U);U=O(528);var Aa=O.n(U);U=O(529);var za=O.n(U);U=O(530);var Ba=O.n(U);U=O(531);var ua=O.n(U);U=O(532);var Fa=O.n(U);U=O(533);var va=O.n(U);U=O(325);var xa=O.n(U),Da=O(535);O=function(Ca){function qa(W){W=Ca.call(this,W)||this;return W.handleCustomFilterToggle=W.handleCustomFilterToggle.bind(W),W.handleMapAreaToggle=W.handleMapAreaToggle.bind(W),W.handleMapAreaKeyUp=W.handleMapAreaKeyUp.bind(W),W.handleSearchOrgToggle=
W.handleSearchOrgToggle.bind(W),W.handleCreatedFilterChange=W.handleCreatedFilterChange.bind(W),W.handleItemTypeFilterChange=W.handleItemTypeFilterChange.bind(W),W.handleModifiedFilterChange=W.handleModifiedFilterChange.bind(W),W.handleSharedFilterChange=W.handleSharedFilterChange.bind(W),W.handleStatusFilterChange=W.handleStatusFilterChange.bind(W),W.handleFolderFilterChange=W.handleFolderFilterChange.bind(W),W.handleGroupFilterChange=W.handleGroupFilterChange.bind(W),W.handleOrgGroupFilterChange=
W.handleOrgGroupFilterChange.bind(W),W.handleTagsFilterChange=W.handleTagsFilterChange.bind(W),W.handleCollaborationFilterChange=W.handleCollaborationFilterChange.bind(W),W.handleOrgCategorySelect=W.handleOrgCategorySelect.bind(W),W.handleClearOrgCategories=W.handleClearOrgCategories.bind(W),W.handleGroupCategorySelect=W.handleGroupCategorySelect.bind(W),W.handleClearGroupCategories=W.handleClearGroupCategories.bind(W),W.handleLACategorySelect=W.handleLACategorySelect.bind(W),W.handleClearLACategories=
W.handleClearLACategories.bind(W),W.handleLARegionSelect=W.handleLARegionSelect.bind(W),W.handleClearLARegion=W.handleClearLARegion.bind(W),W.handleTagsFilterStringChange=W.handleTagsFilterStringChange.bind(W),W}return Object(Z.d)(qa,Ca),qa.prototype.render=function(W){var ba=this,oa=this.props.stateTree.settings.config,wa=this.props.stateTree.parameters.filter,Ea=this.props.stateTree.settings.utils.portal.user,Ga=this.props.stateTree.settings.utils.portal,Ja=this.props.stateTree.parameters.section,
ya=Object(X.a)(this.props.stateTree),Ha=oa.availableItemTypeFilters.filter(function(Ia){var Ka,Ma;if("geobimApplications"===Ia||"geobimProjects"===Ia)return!(null===(Ma=null===(Ka=null==Ga?void 0:Ga.communitySelf)||void 0===Ka?void 0:Ka.userLicensedItems)||void 0===Ma||!Ma.find(function(Na){var La;return null===(La=null==Na?void 0:Na.entitlements)||void 0===La?void 0:La.includes("geobim")}));Ka=ba.props.stateTree.results.organization.servers||[];Ka="livingAtlas"!==Ja&&Ga.isPortal&&Ka.some(function(Na){return"KnowledgeServer"===
Na.serverFunction});return"knowledgeGraphs"!==Ia||Ka});oa=oa.enableMapAreaFilter?W(ka.a,{key:"map-area-filter",handleMapAreaToggle:this.handleMapAreaToggle,handleMapAreaKeyUp:this.handleMapAreaKeyUp,searchMapArea:this.props.stateTree.parameters.filter.searchMapArea,text:this.props.stateTree.settings.config.mapAreaFilterText?this.props.stateTree.settings.config.mapAreaFilterText:na.filterPane.mapArea}):null;ya=ya.map(function(Ia,Ka){switch(Ia){case "group":return W(ua.a,{key:"group-filter",onGroupSelect:ba.handleGroupFilterChange,
availableGroups:ba.props.stateTree.results.user.groups,groupFilter:ba.props.stateTree.parameters.filter.group});case "folder":Ia=ba.props.stateTree.results.user.folders;var Ma={title:ba.props.stateTree.settings.utils.portal.user.username,id:"root"};return W(Ba.a,{key:"folder-filter",onFolderSelect:ba.handleFolderFilterChange,availableFolders:Ia?Object(Z.g)([Ma],Ia,!0):[Ma],folderFilter:ba.props.stateTree.parameters.filter.folder});case "itemType":return W(sa.a,{key:"item-type-filter",onItemTypeSelect:ba.handleItemTypeFilterChange,
availableItemTypes:Ha,itemTypeFilter:ba.props.stateTree.parameters.filter.itemType});case "orgCategories":if((Ma=ba.props.stateTree.results.organization.categorySchema)&&Ma.children&&Ma.children[0]&&Ma.children[0].children)return W(xa.a,{key:"org-categories-filter",onCategorySelect:ba.handleOrgCategorySelect,onClearCategories:ba.handleClearOrgCategories,availableCategories:Ma.children[0].children,categoriesFilter:ba.props.stateTree.parameters.filter.orgCategories,title:na.filterPane.categories,prependValue:"/".concat(Ma.children[0].value,
"/")});break;case "livingAtlasCategories":if((Ma=ba.props.stateTree.results.livingAtlas.categorySchema)&&Ma.children&&Ma.children[0]&&Ma.children[0].children)return W(xa.a,{key:"la-categories-filter",onCategorySelect:ba.handleLACategorySelect,onClearCategories:ba.handleClearLACategories,availableCategories:Ma.children[0].children,categoriesFilter:ba.props.stateTree.parameters.filter.livingAtlasCategories,title:Ma.children[0].displayName,prependValue:"/categories/",showTooltips:!0,startActive:!0});
break;case "livingAtlasRegion":if((Ma=ba.props.stateTree.results.livingAtlas.categorySchema)&&Ma.children&&Ma.children[1]&&Ma.children[1].children)return W(xa.a,{key:"la-region-filter",onCategorySelect:ba.handleLARegionSelect,onClearCategories:ba.handleClearLARegion,availableCategories:Ma.children[1].children,categoriesFilter:ba.props.stateTree.parameters.filter.livingAtlasRegion,title:Ma.children[1].displayName,prependValue:"/region/",startActive:!0});break;case "groupCategories":if(wa.group&&(Ma=
ba.props.stateTree.results.user.groupCategories[wa.group.id])&&Ma.children&&Ma.children[0]&&Ma.children[0].children)return W(xa.a,{key:"group-categories-filter",onCategorySelect:ba.handleGroupCategorySelect,onClearCategories:ba.handleClearGroupCategories,availableCategories:Ma.children[0].children,categoriesFilter:ba.props.stateTree.parameters.filter.groupCategories,title:na.filterPane.groupCategories,prependValue:"/".concat(Ma.children[0].value,"/")});break;case "orgGroups":break;case "modified":return W(pa.a,
{key:"modified-filters",onDateModifiedSelect:ba.handleModifiedFilterChange,dateModifiedFilter:ba.props.stateTree.parameters.filter.dateModified,dateModifiedSection:ba.props.stateTree.ui.filters.modifiedSection});case "created":return W(ma.a,{key:"created-filters",onDateCreatedSelect:ba.handleCreatedFilterChange,dateCreatedFilter:ba.props.stateTree.parameters.filter.dateCreated,dateCreatedSection:ba.props.stateTree.ui.filters.createdSection});case "shared":return W(Aa.a,{counts:ba.props.stateTree.results.counts.access,
key:"shared-filters",onSharedSelect:ba.handleSharedFilterChange,sharedFilter:ba.props.stateTree.parameters.filter.shared,hideOrgGroupFilters:Ea&&!Ea.orgId});case "status":return Ia=ba.props.stateTree.results.counts.contentStatus,Ma=Ia.orgAuthoritative,Ka=Ia.publicAuthoritative,W(za.a,{counts:{authoritative:Ea&&Ea.orgId?Ma+Ka:Ka,deprecated:Ia.deprecated},key:"status-filters",onStatusSelect:ba.handleStatusFilterChange,statusFilter:ba.props.stateTree.parameters.filter.status});case "tags":return W(Fa.a,
{availableTags:ba.props.stateTree.ui.tagsFilter.visibleTags,filterString:ba.props.stateTree.ui.tagsFilter.filterString,key:"ib-tags-filter",onFilterStringChange:ba.handleTagsFilterStringChange,onTagSelect:ba.handleTagsFilterChange,tagsFilter:ba.props.stateTree.parameters.filter.tags});case "collaboration":var Na=ba.props.stateTree.settings.utils.portal;Na=Ea&&!Na.isPortal&&Ea.orgId&&Na.subscriptionInfo&&-1<["Trial","Trial Press","Trial Developer","Evaluation"].indexOf(Na.subscriptionInfo.type);var La=
Ea&&"org_admin"===Ea.role,Pa=Ea&&Ea.privileges&&-1<Ea.privileges.indexOf("portal:admin:manageCollaborations");if(La&&Pa&&!Na)return W(va.a,{key:"ib-collaborations-filter",onCollaborationSelect:ba.handleCollaborationFilterChange,collaborationsFilter:ba.props.stateTree.parameters.filter.origins?ba.props.stateTree.parameters.filter.origins:[]});default:if("object"==typeof Ia)if("group"===Ia.type){if((Ma=ba.props.stateTree.results.customSections.groupSchemas[Ia.id])&&Ma.children&&Ma.children[0]&&Ma.children[0].children&&
(Ka=void 0,Ia.path))return Ka=(Oa=Object(ia.b)("children","value",Ma,Ia.path))?Oa.children:void 0,Oa=Ia.path,W(xa.a,{key:"custom-group-categories-filter",onCategorySelect:ba.handleGroupCategorySelect,onClearCategories:ba.handleClearGroupCategories,availableCategories:Ia.path&&Ka?Ka:Ma.children,categoriesFilter:ba.props.stateTree.parameters.filter.groupCategories,title:Ia.name,prependValue:"/".concat(Oa?Oa.join("/")+"/":"")})}else if("org"===Ia.type){if((Ma=ba.props.stateTree.results.customSections.orgSchemas[Ia.id])&&
Ma.children&&Ma.children[0]&&Ma.children[0].children&&(Ka=void 0,Ia.path)){var Oa;Ka=(Oa=Object(ia.b)("children","value",Ma,Ia.path))?Oa.children:void 0;Oa=Ia.path;return W(xa.a,{key:"custom-org-categories-filter",onCategorySelect:ba.handleOrgCategorySelect,onClearCategories:ba.handleClearOrgCategories,availableCategories:Ia.path&&Ka?Ka:Ma.children,categoriesFilter:ba.props.stateTree.parameters.filter.orgCategories,title:Ia.name,prependValue:"/".concat(Oa?Oa.join("/")+"/":"")})}}else if(Ia.children)return Ma=
ba.props.stateTree.parameters.filter.customFilter[Ka],W(Da.a,{key:"".concat(Ia.displayName,"-filter-accordion"),filter:Ia,index:Ka,onClear:ba.handleCustomFilterToggle,onClick:ba.handleCustomFilterToggle,selectedOption:Ma?Ma.value:void 0})}return null});return oa?[oa,W("div",{key:"filter-accordion",class:"ib-filter-pane__accordion"},ya)]:W("div",{key:"filter-accordion",class:"ib-filter-pane__accordion"},ya)},qa.prototype.handleCustomFilterToggle=function(W,ba,oa){this.props.dispatch(Object(ha.u)(W,
ba?{value:ba,text:oa}:void 0));this.props.dispatch(Object(V.i)())},qa.prototype.handleMapAreaToggle=function(){this.props.dispatch(Object(ha.B)(!this.props.stateTree.parameters.filter.searchMapArea));this.props.dispatch(Object(V.i)())},qa.prototype.handleMapAreaKeyUp=function(W){switch(W.key){case "Enter":this.handleMapAreaToggle()}},qa.prototype.handleSearchOrgToggle=function(){this.props.dispatch(Object(ha.F)(!this.props.stateTree.parameters.filter.searchOrg));this.props.dispatch(Object(V.i)())},
qa.prototype.handleItemTypeFilterChange=function(W){this.props.dispatch(Object(ha.y)(W));this.props.dispatch(Object(V.i)())},qa.prototype.handleModifiedFilterChange=function(W,ba){this.props.dispatch(Object(ha.C)(W,ba));this.props.dispatch(Object(V.i)())},qa.prototype.handleCreatedFilterChange=function(W,ba){this.props.dispatch(Object(ha.t)(W,ba));this.props.dispatch(Object(V.i)())},qa.prototype.handleSharedFilterChange=function(W){this.props.dispatch(Object(ha.G)(W));this.props.dispatch(Object(V.i)())},
qa.prototype.handleStatusFilterChange=function(W){this.props.dispatch(Object(ha.H)(W));this.props.dispatch(Object(V.i)())},qa.prototype.handleFolderFilterChange=function(W){this.props.dispatch(Object(ha.v)(W));this.props.dispatch(Object(V.i)(!0))},qa.prototype.handleGroupFilterChange=function(W){this.props.dispatch(Object(ha.x)(W));this.props.dispatch(Object(V.i)(!0))},qa.prototype.handleOrgGroupFilterChange=function(W){this.props.dispatch(Object(ha.E)(W));this.props.dispatch(Object(V.i)())},qa.prototype.handleTagsFilterChange=
function(W){this.props.dispatch(Object(ha.I)(W));this.props.dispatch(Object(V.i)())},qa.prototype.handleCollaborationFilterChange=function(W){this.props.dispatch(Object(ha.s)(W));this.props.dispatch(Object(V.i)())},qa.prototype.handleOrgCategorySelect=function(W){var ba=this.props.stateTree.parameters.filter.orgCategories;ba&&ba.value===W.value?this.props.dispatch(Object(ha.D)()):this.props.dispatch(Object(ha.D)(W));this.props.dispatch(Object(V.i)())},qa.prototype.handleClearOrgCategories=function(){this.props.dispatch(Object(ha.D)());
this.props.dispatch(Object(V.i)())},qa.prototype.handleLACategorySelect=function(W){var ba=this.props.stateTree.parameters.filter.livingAtlasCategories;ba&&ba.value===W.value?this.props.dispatch(Object(ha.z)()):this.props.dispatch(Object(ha.z)(W));this.props.dispatch(Object(V.i)())},qa.prototype.handleClearLACategories=function(){this.props.dispatch(Object(ha.z)());this.props.dispatch(Object(V.i)())},qa.prototype.handleLARegionSelect=function(W){var ba=this.props.stateTree.parameters.filter.livingAtlasRegion;
ba&&ba.value===W.value?this.props.dispatch(Object(ha.A)()):this.props.dispatch(Object(ha.A)(W));this.props.dispatch(Object(V.i)())},qa.prototype.handleClearLARegion=function(){this.props.dispatch(Object(ha.A)());this.props.dispatch(Object(V.i)())},qa.prototype.handleGroupCategorySelect=function(W){var ba=this.props.stateTree.parameters.filter.groupCategories;ba&&ba.value===W.value?this.props.dispatch(Object(ha.w)()):this.props.dispatch(Object(ha.w)(W));this.props.dispatch(Object(V.i)())},qa.prototype.handleClearGroupCategories=
function(){this.props.dispatch(Object(ha.w)());this.props.dispatch(Object(V.i)())},qa.prototype.handleTagsFilterStringChange=function(W){this.props.dispatch(Object(ea.e)(W))},qa}(Q.Component);T.a=Object(Q.connect)(function(Ca){return{stateTree:Ca}},function(Ca){return{dispatch:Ca}})(O)},,,,,,,function(Q,T,O){function Z(ia){var X;ia=Object(na.a)(ia);return!0===(null===(X=ia.portalProperties)||void 0===X?void 0:X.semanticSearchEnabled)||ia.portalUser&&!ia.portalUser.orgId}O.d(T,"a",function(){return Z});
var na=O(123)},function(Q,T,O){O.d(T,"a",function(){return na});O.d(T,"b",function(){return ia});var Z=O(273),na="VIEW_ITEM_DETAILS",ia=function(X){return function(ha){ha({type:na,payload:X});ha(Object(Z.c)(X))}}},,,,,,,function(Q,T,O){O.d(T,"b",function(){return Z});O.d(T,"a",function(){return na});O.d(T,"c",function(){return ia});var Z="CLOSING_DETAILS_PANE",na="CLOSE_DETAILS_PANE",ia=function(){return{type:Z}}},,,,,,,,function(Q,T){Q.exports=n},function(Q,T){Q.exports=k},function(Q,T){Q.exports=
r},function(Q,T,O){O.d(T,"a",function(){return ha});var Z=O(1),na=O(71);Q=O(248);var ia=O.n(Q);Q=O(17);var X=O(89),ha=function(V){function ea(U){var ka=V.call(this,U)||this;return ka.state.searchTerm=ka.props.currentSearchString||"",ka.debouncedInput=ia()(function(){ka.props.changeSearchString.apply(ka,[ka.state.searchTerm])},400),ka.handleInputChange=ka.handleInputChange.bind(ka),ka.handleClear=ka.handleClear.bind(ka),ka}return Object(Z.d)(ea,V),ea.prototype.componentWillReceiveProps=function(U){U.currentSearchString!==
this.props.currentSearchString&&this.setState({searchTerm:U.currentSearchString})},ea.prototype.render=function(U){var ka=this.props,ma=ka.title,sa=ka.placeholder;ka=ka.controls;var pa=this.state.searchTerm||"";return U("div",{class:"ac-search-area"},U("svg",{role:"img",width:"20",height:"20",viewBox:"0 0 20 20",key:"search-input-icon"},U("path",{d:"M19.205 18.295l-7.036-7.035A6.874 6.874 0 0 0 6.875 0 6.874 6.874 0 0 0 0 6.875a6.874 6.874 0 0 0 11.286 5.27l7.035 7.034.884-.884zM1.25 6.875A5.632 5.632 0 0 1 6.875 1.25 5.632 5.632 0 0 1 12.5 6.875 5.632 5.632 0 0 1 6.875 12.5 5.632 5.632 0 0 1 1.25 6.875z",
fill:"currentColor"})),U("input",{class:"ac-search-area__input",key:"search-input",title:ma,"aria-label":ma,type:"search",oninput:this.handleInputChange,value:pa,placeholder:sa,"aria-controls":ka}),pa&&U("button",{class:"ac-search-area__clear",onclick:this.handleClear,key:"search-input-button","aria-label":na.clearSearch},U("svg",{role:"img",width:"20",height:"20",viewBox:"0 0 24 24"},U("path",{d:X.k,fill:"currentColor"}))))},ea.prototype.handleInputChange=function(U){this.setState({searchTerm:U.target.value});
this.debouncedInput()},ea.prototype.handleClear=function(){this.setState({searchTerm:""});this.props.changeSearchString("")},ea}(Q.Component)},function(Q,T){Q.exports=w},,function(Q,T){Q.exports=x},,,,,,,,,,,,,,,,,,,,function(Q,T,O){O.d(T,"a",function(){return na});var Z=O(1);Q=O(15);var na=Object(Q.a)(function(ia,X){return ia?Object(Z.g)(Object(Z.g)([],X,!0),["(group:".concat(ia.id,")")],!1):X})},function(Q,T,O){O.d(T,"a",function(){return na});var Z=O(1);Q=O(15);var na=Object(Q.a)(function(ia,X,
ha){if(ia)switch(ia.value){case "authoritative":return X&&X.orgId&&!X.portal.isPortal?Object(Z.g)(Object(Z.g)([],ha,!0),["((contentstatus:org_authoritative orgid:".concat(X.orgId,") OR contentstatus:public_authoritative)")],!1):X&&X.orgId&&X.portal.isPortal?Object(Z.g)(Object(Z.g)([],ha,!0),["((contentstatus:org_authoritative) OR contentstatus:public_authoritative)"],!1):Object(Z.g)(Object(Z.g)([],ha,!0),["(contentstatus:public_authoritative)"],!1);case "deprecated":return Object(Z.g)(Object(Z.g)([],
ha,!0),["(contentstatus:deprecated)"],!1)}return ha})},function(Q,T,O){O.d(T,"a",function(){return na});var Z=O(1);Q=O(15);var na=Object(Q.a)(function(ia,X){return ia?Object(Z.g)(Object(Z.g)([],X,!0),["(access:".concat(ia.value,")")],!1):X})},function(Q,T,O){O.d(T,"a",function(){return na});var Z=O(1);Q=O(15);var na=Object(Q.a)(function(ia,X){return ia&&(ia=function(ha){for(var V,ea=0,U=Object.keys(ha);ea<U.length;ea++){var ka=ha[U[ea]];if(ka.selected){V=ka.items;break}ka=ka.participants.filter(function(ma){return ma.selected});
if(0<ka.length){V=ka[0].items;break}}return V}(ia))?(ia=ia.join(" OR "),Object(Z.g)(Object(Z.g)([],X,!0),["id:(".concat(ia,")")],!1)):X})},function(Q,T,O){O.d(T,"a",function(){return ia});Q=O(60);var Z=O.n(Q),na=O(33),ia=function(X,ha,V,ea){function U(Da){ua=Da.categorySchema[0].source.split(".")[1];Object(na.e)(X,ha,V.contentCategorySetsGroupQuery).then(ka,za);Da=ea;Object(na.v)(X,"".concat(ha.restUrl,"/portals/regions"),{culture:Da}).then(pa,za)}function ka(Da){if(Da.results[0]){Da=Da.results[0].id;
var Ca=ua;Object(na.v)(X,"".concat(ha.restUrl,"/content/groups/").concat(Da,"/search"),{q:"typekeywords: ".concat(Ca)}).then(ma,za)}else za("The content category sets group could not be found.")}function ma(Da){1===Da.results.length&&Da.results[0]?Object(na.h)(X,ha,Da.results[0].id).then(sa,za):za("The item containing the living atlas categories could not be determined.")}function sa(Da){Fa=Da.categorySchema[0];V.isPortal&&va?Aa([Fa]):va&&Aa([Fa,va])}function pa(Da){va={categories:Da.map(function(Ca){return{displayName:Ca.localizedName,
title:Ca.region}}).sort(function(Ca,qa){return"wo"===Ca.title.toLowerCase()?-1:Ca.displayName.localeCompare(qa.displayName)}),description:"2.0",displayName:"Regions",title:"region"};V.isPortal&&Fa?Aa([Fa]):Fa&&Aa([Fa,va])}function Aa(Da){xa.resolve({schema:Da,id:Ba})}function za(Da){xa.reject(Da)}void 0===ea&&(ea="en");var Ba,ua,Fa,va,xa=new Z.a;return Object(na.e)(X,ha,V.livingAtlasGroupQuery,(null==ha?0:ha.isPortal)?{sortField:"title",sortOrder:"asc"}:{}).then(function(Da){Da.results[0]&&Da.results[0].id?
(Ba=Da.results[0].id,Object(na.f)(X,ha,Ba).then(U,za)):za("The living atlas group could not be found.")},za),xa}},,,,,function(Q,T,O){O.d(T,"a",function(){return Z});O.d(T,"b",function(){return na});var Z="CHANGE_SEARCH_STRING",na=function(ia){return{type:Z,payload:ia}}},function(Q,T,O){O.d(T,"b",function(){return Z});O.d(T,"a",function(){return na});var Z="SHOW_EMPTY_RESULTS",na="CHANGE_RESULT_DISPLAY"},,,function(Q,T,O){O.d(T,"a",function(){return na});O.d(T,"c",function(){return ia});O.d(T,"b",
function(){return X});O.d(T,"d",function(){return ha});O.d(T,"e",function(){return V});Q=O(248);Q=O.n(Q);var Z=O(173),na="LOADING_TAGS",ia="LOADING_TAGS_SUCCESS",X="LOADING_TAGS_FAILED",ha="UPDATE_TAGS_FILTER_STRING",V=function(U){return function(ka,ma){ka({type:ha,payload:U});2<U.length&&ea(ka,ma(),U)}},ea=Q()(function(U,ka,ma){U({type:na});var sa=ka.settings.utils.request;ka=Object(Z.c)(ka,ma);sa(ka[0],ka[1]).then(function(pa){U({type:ia,payload:pa.data})},function(pa){return U({type:X,payload:pa})})},
400)},,function(Q,T,O){O.d(T,"a",function(){return ia});O.d(T,"b",function(){return X});O.d(T,"c",function(){return ha});Q=O(17);T=O(411);var Z=O(433),na=O(441);O=O(458);var ia=T.b.config,X={parameters:Z.b,settings:T.b,results:na.b,ui:O.b},ha=Object(Q.combineReducers)({settings:T.a,parameters:Z.a,results:na.a,ui:O.a})},,,function(Q,T,O){var Z=O(1),na=O(37);Q=O(17);var ia=O(56),X=O(55),ha=O(539),V=O.n(ha),ea=O(92),U=O(7),ka={itemType:Object(ia.y)(),modified:Object(ia.C)(),created:Object(ia.t)(),shared:Object(ia.G)(),
folder:Object(ia.v)(),group:Object(ia.x)(),status:Object(ia.H)(),orgGroup:Object(ia.E)()};O=function(ma){function sa(pa){pa=ma.call(this,pa)||this;return pa.handleRemoveMapAreaFilter=pa.handleRemoveMapAreaFilter.bind(pa),pa.handleRemoveSearchOrgFilter=pa.handleRemoveSearchOrgFilter.bind(pa),pa.handleRemoveGeneralFilter=pa.handleRemoveGeneralFilter.bind(pa),pa.handleRemoveOrgCategoriesFilter=pa.handleRemoveOrgCategoriesFilter.bind(pa),pa.handleRemoveLACategoriesFilter=pa.handleRemoveLACategoriesFilter.bind(pa),
pa.handleRemoveLARegionFilter=pa.handleRemoveLARegionFilter.bind(pa),pa.handleRemoveGroupCategoriesFilter=pa.handleRemoveGroupCategoriesFilter.bind(pa),pa.handleClearAll=pa.handleClearAll.bind(pa),pa.handleRemoveTagsFilter=pa.handleRemoveTagsFilter.bind(pa),pa.handleRemoveCollaborationFilter=pa.handleRemoveCollaborationFilter.bind(pa),pa.handleRemoveCustomFilter=pa.handleRemoveCustomFilter.bind(pa),pa}return Object(Z.d)(sa,ma),sa.prototype.render=function(pa){var Aa,za,Ba=this,ua=this.props.stateTree.parameters.filter,
Fa=[];if(null===(Aa=this.props.staticFilters)||void 0===Aa||Aa.forEach(function(Da){Fa.push({filterId:Da,text:Da,static:!0})}),ua.searchOrg&&"all"===this.props.stateTree.parameters.section&&(null===(za=this.props.stateTree.settings.utils.portal.user)||void 0===za?void 0:za.credential)&&this.props.stateTree.settings.utils.portal.name&&Fa.push({filterId:"searchOrg",onRemove:this.handleRemoveSearchOrgFilter,text:"Organization: ".concat(this.props.stateTree.settings.utils.portal.name)}),ua.searchMapArea&&
Fa.push({filterId:"searchMapArea",onRemove:this.handleRemoveMapAreaFilter,text:this.props.stateTree.settings.config.mapAreaFilterChipText?this.props.stateTree.settings.config.mapAreaFilterChipText:na.filterChips.mapArea}),ua.itemType&&Fa.push({filterId:"itemType",onRemove:this.handleRemoveGeneralFilter,text:"".concat(na.filterChips.type,": ").concat(ua.itemType.text)}),ua.dateModified&&Fa.push({filterId:"modified",onRemove:this.handleRemoveGeneralFilter,text:"".concat(na.filterChips.dateModified,
": ").concat(ua.dateModified.label)}),ua.dateCreated&&Fa.push({filterId:"created",onRemove:this.handleRemoveGeneralFilter,text:"".concat(na.filterChips.dateCreated,": ").concat(ua.dateCreated.label)}),ua.shared&&Fa.push({filterId:"shared",onRemove:this.handleRemoveGeneralFilter,text:"".concat(na.filterChips.access,": ").concat(ua.shared.text)}),ua.group&&"myGroups"===this.props.stateTree.parameters.section?Fa.push({filterId:"group",onRemove:this.handleRemoveGeneralFilter,text:"".concat(na.filterChips.group,
": ").concat(ua.group.title)}):ua.orgGroup&&"myOrganization"===this.props.stateTree.parameters.section&&Fa.push({filterId:"orgGroup",onRemove:this.handleRemoveGeneralFilter,text:"".concat(na.filterChips.group,": ").concat(ua.orgGroup.title)}),ua.folder&&"myContent"===this.props.stateTree.parameters.section&&Fa.push({filterId:"folder",onRemove:this.handleRemoveGeneralFilter,text:"".concat(na.filterChips.folder,": ").concat(ua.folder.title)}),ua.status&&Fa.push({filterId:"status",onRemove:this.handleRemoveGeneralFilter,
text:"".concat(na.filterChips.status,": ").concat(ua.status.text)}),ua.orgCategories)Aa=ua.orgCategories,Fa.push({filterId:Aa.value,onRemove:this.handleRemoveOrgCategoriesFilter,text:"".concat(na.filterChips.category,": ").concat(Aa.text)});ua.livingAtlasCategories&&(Aa=ua.livingAtlasCategories,Fa.push({filterId:Aa.value,onRemove:this.handleRemoveLACategoriesFilter,text:"".concat(na.filterChips.category,": ").concat(Aa.text)}));ua.groupCategories&&(Aa=ua.groupCategories,Fa.push({filterId:Aa.value,
onRemove:this.handleRemoveGroupCategoriesFilter,text:"".concat(na.filterChips.category,": ").concat(Aa.text)}));ua.livingAtlasRegion&&(Aa=ua.livingAtlasRegion,Fa.push({filterId:Aa.value,onRemove:this.handleRemoveLARegionFilter,text:"".concat(na.filterChips.region,": ").concat(Aa.text)}));ua.tags&&Object.keys(ua.tags).forEach(function(Da){Fa.push({filterId:Da,onRemove:Ba.handleRemoveTagsFilter,text:"".concat(na.filterChips.tagged,": ").concat(Da)})});if(ua.origins){var va=ua.origins;Object.keys(ua.origins).forEach(function(Da){var Ca;
va[Da].selected?Fa.push({filterId:va[Da].value,onRemove:Ba.handleRemoveCollaborationFilter,text:"".concat(na.filterChips.collaboration,": ").concat(va[Da].label)}):null===(Ca=va[Da].participants)||void 0===Ca||Ca.forEach(function(qa){qa.selected&&Fa.push({filterId:qa.value,onRemove:Ba.handleRemoveCollaborationFilter,text:"".concat(na.filterChips.collaboration,": ").concat(qa.label)})})})}var xa=Object(ea.b)(this.props.stateTree.settings.config.customSections,this.props.stateTree.parameters.section);
if(xa&&!Object(U.b)(ua.customFilter)&&Object.keys(ua.customFilter).filter(function(Da){return ua.customFilter[Da]}).forEach(function(Da){var Ca,qa=parseInt(Da,10);if(null===(Ca=null==xa?void 0:xa.filters)||void 0===Ca?0:Ca[qa])Ca=xa.filters[qa],Fa.push({filterId:"".concat(qa),onRemove:Ba.handleRemoveCustomFilter,text:"".concat(Ca.displayName,": ").concat(ua.customFilter[Da].text)})}),0<Fa.length)return pa("div",{key:"active-filter-area",class:"ib__active-filters filter-chip-wrap"},pa(V.a,{key:"item-browser-filter-controller",
filters:Fa,onClear:this.handleClearAll,mode:"fullscreen"===this.props.stateTree.settings.config.layoutMode?"expanding":"full-width",startOpen:"fullscreen"===this.props.stateTree.settings.config.layoutMode,theme:this.props.theme,showLabel:this.props.showLabel}))},sa.prototype.handleRemoveCustomFilter=function(pa){this.props.dispatch(Object(ia.u)(parseInt(pa.target.value,10)));this.props.dispatch(Object(X.i)())},sa.prototype.handleRemoveGeneralFilter=function(pa){this.props.dispatch(ka[pa.target.value]);
this.props.dispatch(Object(X.i)("folder"===pa.target.value))},sa.prototype.handleRemoveMapAreaFilter=function(pa){this.props.dispatch(Object(ia.B)(!1));this.props.dispatch(Object(X.i)())},sa.prototype.handleRemoveSearchOrgFilter=function(pa){this.props.dispatch(Object(ia.F)(!1));this.props.dispatch(Object(X.i)())},sa.prototype.handleClearAll=function(){var pa=!!this.props.stateTree.parameters.filter.folder;this.props.dispatch({type:ia.a});this.props.dispatch(Object(X.i)(pa))},sa.prototype.handleRemoveOrgCategoriesFilter=
function(pa){this.props.dispatch(Object(ia.D)());this.props.dispatch(Object(X.i)())},sa.prototype.handleRemoveLACategoriesFilter=function(pa){this.props.dispatch(Object(ia.z)());this.props.dispatch(Object(X.i)())},sa.prototype.handleRemoveGroupCategoriesFilter=function(pa){this.props.dispatch(Object(ia.w)());this.props.dispatch(Object(X.i)())},sa.prototype.handleRemoveLARegionFilter=function(pa){this.props.dispatch(Object(ia.A)());this.props.dispatch(Object(X.i)())},sa.prototype.handleRemoveTagsFilter=
function(pa){var Aa=this.props.stateTree.parameters.filter.tags;if(null==Aa?0:Aa[pa.target.value])Aa=Object(Z.a)({},Aa),delete Aa[pa.target.value],0<Object.keys(Aa).length?this.props.dispatch(Object(ia.I)(Aa)):this.props.dispatch(Object(ia.I)()),this.props.dispatch(Object(X.i)())},sa.prototype.handleRemoveCollaborationFilter=function(pa){this.props.dispatch(Object(ia.s)());this.props.dispatch(Object(X.i)())},sa}(Q.Component);T.a=Object(Q.connect)(function(ma){return{stateTree:ma}},function(ma){return{dispatch:ma}})(O)},
,,,,,,,,,function(Q,T,O){O.d(T,"b",function(){return na});Q=O(17);var Z=O(431);O=O(432);var na={config:Z.b,utils:O.b};T.a=Object(Q.combineReducers)({config:Z.a,utils:O.a})},,,,,,function(Q,T,O){O.d(T,"b",function(){return na});O.d(T,"a",function(){return ia});O.d(T,"c",function(){return X});var Z=O(80),na="START_CUSTOM_ACTION",ia="END_CUSTOM_ACTION",X=function(ha,V){return function(ea,U){(U=U().settings.config.customActions.filter(function(ka){return ka.name===ha})[0])&&(U.asynchronous?(ea({type:na,
payload:V}),U.onAction(Object(Z.b)(V)).then(function(){ea({type:ia,payload:V})},function(){ea({type:ia,payload:V})})):U.onAction(Object(Z.b)(V)))}}},,,,,,,,,,,,,,function(Q,T,O){O.d(T,"b",function(){return ea});var Z=O(1);Q=O(37);var na=O(98),ia=O(256),X=O(137),ha=O(97),V=O(92),ea={asynchronousItemSelect:!1,usePrimaryButtonStyle:!0,dialogTitle:"Item Browser",disableMainAction:!1,mainActionTitle:Q.itemDetails.addToMap,mainInverseActionTitle:Q.itemDetails.removeFromMap,onSelect:function(){},onDeselect:function(){},
onBulkAction:function(){},preSelect:function(){},disableOnSelect:!1,baseSections:"myContent myFavorites myGroups myOrganization livingAtlas all".split(" "),layoutMode:"adjustable",detailsPaneType:"flyout",singleItemSelect:!1,enableMapAreaFilter:!0,mapAreaThrottleTime:2500,enableSelectAllItemsFromQuery:!1,showSubmitButton:!0,submitButtonText:"Submit Selection",cancelButtonText:"Cancel",clearSelectionBetweenSearches:!1,resultsPerQuery:16,allowedItemTypes:X.a,availableItemTypeFilters:"maps webMaps mapFiles layers featureLayers tileLayers mapImageLayers imageryLayers sceneLayers tables layerFiles scenes apps webApps experienceApps instantApps sites pages storyMaps mobileApps desktopApps geobimApplications geobimProjects developerCredentials oauth apiKey tools analytics locators geodatabaseAccess geometricOperations geoprocessingTasks networkAnalysis files documents images pdfs csvs reports webTools notebooks tiledImageLayers elevationLayers rasterFunctionTemplates knowledgeGraphs".split(" "),
disableItemTypeFilters:!1,customActions:[],customSections:[],showCloseBtn:!1,showBackBtn:!0,onBack:function(){},hideEllipses:!1,replaceSectionDropdownWithTitle:!1,disabledSubResources:{},noItemsFoundText:Q.results.noItemsFound,itemSelectionEnabled:!1,disableInitiallySelectedItems:!1};T.a=function(U,ka){switch(void 0===U&&(U=ea),ka.type){case ia.b:return Object(ha.f)("id",U.customSections.filter(V.f).map(V.a).reduce(function(ma,sa){return Object(Z.g)(Object(Z.g)([],ma,!0),sa,!0)},[]).filter(function(ma){return"object"==
typeof ma&&"group"===ma.type})).forEach(function(ma,sa){ma.id=ka.payload.groups[sa].id;delete ma.fetchGroupIdByQuery}),U;case na.e:return Object(Z.a)(Object(Z.a)({},U),{itemSelectionEnabled:!0});default:return U}}},function(Q,T,O){O.d(T,"b",function(){return X});var Z=O(1),na=O(308),ia=O(99),X={iconDir:"",portal:{},request:function(ha){return null}};T.a=function(ha,V){switch(void 0===ha&&(ha=X),V.type){case na.a:return Object(Z.a)(Object(Z.a)({},ha),{self:V.payload.self});default:return ha.portal.portalHostname&&
!ha.portal.baseUrl&&(ha.portal.baseUrl=Object(ia.a)(ha.portal)),ha}}},function(Q,T,O){O.d(T,"b",function(){return V});Q=O(17);var Z=O(434),na=O(436),ia=O(437),X=O(440),ha=O(438);O=O(439);var V={extent:Z.b,filter:na.b,nextQuery:ia.b,searchString:ha.b,section:O.b,sort:X.b};T.a=Object(Q.combineReducers)({extent:Z.a,filter:na.a,nextQuery:ia.a,searchString:ha.a,section:O.a,sort:X.a})},function(Q,T,O){O.d(T,"b",function(){return ia});var Z=O(1),na=O(435),ia={area:{minx:-180,miny:-90,maxx:180,maxy:90},throttling:!1};
T.a=function(X,ha){switch(void 0===X&&(X=ia),ha.type){case na.a:return Object(Z.a)(Object(Z.a)({},X),{throttling:!1});case na.b:return{area:ha.payload,throttling:!0};default:return X}}},function(Q,T,O){O.d(T,"b",function(){return na});O.d(T,"a",function(){return ia});O.d(T,"c",function(){return X});var Z=O(55),na="UPDATE_EXTENT",ia="UNTHROTTLE_EXTENT",X=function(ha){return function(V,ea){ea=ea();ea.parameters.extent.throttling||(V({type:na,payload:ha}),ea.parameters.filter.searchMapArea&&V(Object(Z.i)()),
setTimeout(function(){V({type:ia})},ea.settings.config.mapAreaThrottleTime))}}},function(Q,T,O){O.d(T,"b",function(){return X});var Z=O(1),na=O(56),ia=O(275),X={customFilter:{},searchMapArea:!1};T.a=function(ha,V){var ea;switch(void 0===ha&&(ha=X),V.type){case na.a:return{customFilter:{},searchMapArea:!1};case na.n:return Object(Z.a)(Object(Z.a)({},ha),{orgGroup:V.payload});case na.j:return Object(Z.a)(Object(Z.a)({},ha),{livingAtlasRegion:V.payload});case na.i:return Object(Z.a)(Object(Z.a)({},ha),
{livingAtlasCategories:V.payload});case na.m:return Object(Z.a)(Object(Z.a)({},ha),{orgCategories:V.payload});case na.f:return Object(Z.a)(Object(Z.a)({},ha),{groupCategories:V.payload});case na.h:return Object(Z.a)(Object(Z.a)({},ha),{itemType:V.payload});case na.l:return Object(Z.a)(Object(Z.a)({},ha),{dateModified:V.payload.modified});case na.c:return Object(Z.a)(Object(Z.a)({},ha),{dateCreated:V.payload.created});case na.p:return Object(Z.a)(Object(Z.a)({},ha),{shared:V.payload});case na.e:return Object(Z.a)(Object(Z.a)({},
ha),{folder:V.payload});case na.g:return Object(Z.a)(Object(Z.a)({},ha),{groupCategories:void 0,group:V.payload});case na.q:return Object(Z.a)(Object(Z.a)({},ha),{status:V.payload});case na.k:return Object(Z.a)(Object(Z.a)({},ha),{searchMapArea:V.payload});case na.o:return Object(Z.a)(Object(Z.a)({},ha),{searchOrg:V.payload,orgCategories:void 0});case na.r:return Object(Z.a)(Object(Z.a)({},ha),{tags:V.payload});case na.b:return Object(Z.a)(Object(Z.a)({},ha),{origins:V.payload});case na.d:return Object(Z.a)(Object(Z.a)({},
ha),{customFilter:Object(Z.a)(Object(Z.a)({},ha.customFilter),(ea={},ea[V.payload.index]=V.payload.filter,ea))});case ia.a:return{customFilter:{},searchMapArea:!1};default:return ha}}},function(Q,T,O){O.d(T,"b",function(){return ia});var Z=O(1),na=O(55),ia={nextStart:-1,total:0};T.a=function(X,ha){switch(void 0===X&&(X=ia),ha.type){case na.a:return Object(Z.a)(Object(Z.a)({},X),{total:0});case na.c:return{nextStart:ha.payload.search.nextStart,total:ha.payload.search.total};case na.f:return{nextStart:ha.payload.nextStart,
total:ha.payload.total};case na.g:return{nextStart:-1,total:ha.payload.length};default:return X}}},function(Q,T,O){O.d(T,"b",function(){return X});var Z=O(1),na=O(55),ia=O(392),X={current:"",previous:""};T.a=function(ha,V){switch(void 0===ha&&(ha=X),V.type){case na.a:return Object(Z.a)(Object(Z.a)({},ha),{previous:ha.current});case ia.a:return Object(Z.a)(Object(Z.a)({},ha),{current:V.payload});default:return ha}}},function(Q,T,O){O.d(T,"b",function(){return ia});var Z=O(275),na=O(308),ia="all";T.a=
function(X,ha){switch(void 0===X&&(X=ia),ha.type){case Z.a:return ha.payload.newSection;case na.a:var V=ha.payload.config.baseSections;ha=ha.payload.config.customSections.map(function(ea){return ea.name});return-1<V.indexOf(X)||-1<ha.indexOf(X)?X:0<V.length?V[0]:0<ha.length?ha[0]:"all";default:return X}}},function(Q,T,O){O.d(T,"b",function(){return ea});var Z=O(1),na=O(277),ia=O(275),X=O(256),ha=O(92),V=O(97),ea={field:"relevance",order:"desc"},U={myContent:"modified",myFavorites:"modified",myGroups:"modified",
myOrganization:"modified",livingAtlas:"relevance",all:"relevance"},ka={relevance:"desc",title:"asc",created:"desc",owner:"asc",modified:"desc",numviews:"desc",avgrating:"desc"};T.a=function(ma,sa){switch(void 0===ma&&(ma=ea),sa.type){case na.b:return Object(Z.a)(Object(Z.a)({},ma),{order:sa.payload});case na.a:return sa=sa.payload,{field:sa,order:ka[sa]||ma.order};case ia.a:ma=Object(ha.b)(sa.payload.customSections,sa.payload.newSection);if(null==ma?0:ma.filters){var pa=ma.filters.filter(function(za){return"object"==
typeof za&&"group"===za.type})[0];if(null==pa?0:pa.id)if(pa=sa.payload.customSectionGroupSort[pa.id])return pa}sa=U[sa.payload.newSection]||(null==ma?void 0:ma.sortField);return{field:sa||"relevance",order:ka[sa]||"desc"};case X.b:var Aa=sa.payload;pa=Aa.customSections;Aa=Object(ha.b)(pa,Aa.currentSection);if(null==Aa?0:Aa.filters)if(pa=Object(V.f)("id",pa.filter(ha.f).map(ha.a).reduce(function(za,Ba){return Object(Z.g)(Object(Z.g)([],za,!0),Ba,!0)},[]).filter(function(za){return"object"==typeof za&&
"group"===za.type})),Aa=Aa.filters.filter(function(za){return"object"==typeof za&&"group"===za.type})[0],sa=sa.payload.groups[pa.indexOf(Aa)])return{field:sa.sortField||"relevance",order:sa.sortOrder||"desc"};return ma;default:return ma}}},function(Q,T,O){O.d(T,"b",function(){return za});Q=O(17);var Z=O(442),na=O(445),ia=O(446),X=O(447),ha=O(448),V=O(449),ea=O(451),U=O(450),ka=O(452),ma=O(453),sa=O(454),pa=O(455),Aa=O(456);O=O(457);var za={counts:Z.b,displayItems:na.b,livingAtlas:ia.b,loadingItems:X.b,
selectedItems:ha.b,initiallySelectedItems:V.b,failedItemDetails:U.b,fullItemDetails:ea.b,organization:ka.b,user:ma.b,customSections:sa.b,allOrganizations:pa.b,users:Aa.b,provisionedContent:O.b};T.a=Object(Q.combineReducers)({counts:Z.a,displayItems:na.a,loadingItems:X.a,selectedItems:ha.a,failedItemDetails:U.a,fullItemDetails:ea.a,initiallySelectedItems:V.a,livingAtlas:ia.a,organization:ka.a,user:ma.a,customSections:sa.a,allOrganizations:pa.a,users:Aa.a,provisionedContent:O.a})},function(Q,T,O){O.d(T,
"b",function(){return na});Q=O(17);var Z=O(443);O=O(444);var na={access:Z.b,contentStatus:O.b};T.a=Object(Q.combineReducers)({access:Z.a,contentStatus:O.a})},function(Q,T,O){O.d(T,"b",function(){return na});var Z=O(55),na={org:void 0,private:void 0,public:void 0,shared:void 0};T.a=function(ia,X){switch(void 0===ia&&(ia=na),X.type){case Z.c:if(X.payload.aggregations&&X.payload.aggregations.counts&&(X=X.payload.aggregations.counts.filter(function(ea){return"access"===ea.fieldName})[0])){ia=X.fieldValues.filter(function(ea){return"org"===
ea.value})[0];var ha=X.fieldValues.filter(function(ea){return"private"===ea.value})[0],V=X.fieldValues.filter(function(ea){return"public"===ea.value})[0];X=X.fieldValues.filter(function(ea){return"shared"===ea.value})[0];return{org:ia?ia.count:void 0,private:ha?ha.count:void 0,public:V?V.count:void 0,shared:X?X.count:void 0}}return ia;default:return ia}}},function(Q,T,O){O.d(T,"b",function(){return na});var Z=O(55),na={publicAuthoritative:0,orgAuthoritative:0,deprecated:0};T.a=function(ia,X){switch(void 0===
ia&&(ia=na),X.type){case Z.c:if(X.payload.aggregations&&X.payload.aggregations.counts&&(X=X.payload.aggregations.counts.filter(function(V){return"contentstatus"===V.fieldName})[0])){ia=X.fieldValues.filter(function(V){return"org_authoritative"===V.value})[0];var ha=X.fieldValues.filter(function(V){return"public_authoritative"===V.value})[0];X=X.fieldValues.filter(function(V){return"deprecated"===V.value})[0];return{publicAuthoritative:ha?ha.count:0,orgAuthoritative:ia?ia.count:0,deprecated:X?X.count:
0}}return ia;default:return ia}}},function(Q,T,O){O.d(T,"b",function(){return ia});var Z=O(1),na=O(55),ia=[];T.a=function(X,ha){switch(void 0===X&&(X=[]),ha.type){case na.c:return ha.payload.search.results;case na.g:return ha.payload;case na.f:return Object(Z.g)(Object(Z.g)([],X,!0),ha.payload.results,!0);default:return X}}},function(Q,T,O){O.d(T,"b",function(){return ha});var Z=O(1),na=O(309),ia=O(55),X=O(185),ha={categorySchema:void 0,groupId:void 0,status:"initial"};T.a=function(V,ea){switch(void 0===
V&&(V=ha),ea.type){case na.a:return Object(Z.a)(Object(Z.a)({},V),{status:"loading"});case na.b:return Object(Z.a)(Object(Z.a)({},V),{categorySchema:{displayName:ea.payload.id,value:ea.payload.id,children:Object(X.b)(ea.payload.schema)},groupId:ea.payload.id,status:"loaded"});case ia.c:return V.categorySchema&&ea.payload.aggregations&&ea.payload.aggregations.countInfo&&"livingAtlas"===ea.payload.aggregations.countInfo.section?Object(Z.a)(Object(Z.a)({},V),{categorySchema:Object(X.c)(ea.payload.aggregations,
Object(X.a)(V.categorySchema),"groupCategories")}):V;case na.c:return Object(Z.a)(Object(Z.a)({},V),{status:"failed"});default:return V}}},function(Q,T,O){O.d(T,"b",function(){return V});var Z=O(1),na=O(98),ia=O(417),X=O(74),ha=O(168),V={};T.a=function(ea,U){var ka,ma,sa,pa,Aa,za,Ba,ua,Fa,va,xa,Da;switch(void 0===ea&&(ea={}),U.type){case na.h:return Object(Z.a)(Object(Z.a)({},ea),((ka={})[U.payload.id]=U.payload,ka));case na.g:return Object(Z.a)(Object(Z.a)({},ea),((ma={})[U.payload.id]=void 0,ma));
case na.j:return Object(Z.a)(Object(Z.a)({},ea),((sa={})[U.payload.id]=void 0,sa));case na.i:return Object(Z.a)(Object(Z.a)({},ea),((pa={})[U.payload.id]=void 0,pa));case ia.b:return Object(Z.a)(Object(Z.a)({},ea),((Aa={})[U.payload.id]=U.payload,Aa));case ia.a:return Object(Z.a)(Object(Z.a)({},ea),((za={})[U.payload.id]=void 0,za));case X.a:return{};case ha.a:return Object(Z.a)(Object(Z.a)({},ea),((Ba={})[U.payload.id]=U.payload,Ba));case ha.c:return Object(Z.a)(Object(Z.a)({},ea),((ua={})[U.payload.id]=
void 0,ua));case ha.b:return Object(Z.a)(Object(Z.a)({},ea),((Fa={})[U.payload.id]=void 0,Fa));case ha.e:return Object(Z.a)(Object(Z.a)({},ea),((va={})[U.payload.id]=U.payload,va));case ha.g:return Object(Z.a)(Object(Z.a)({},ea),((xa={})[U.payload.id]=void 0,xa));case ha.f:return Object(Z.a)(Object(Z.a)({},ea),((Da={})[U.payload.id]=void 0,Da));default:return ea}}},function(Q,T,O){O.d(T,"b",function(){return X});var Z=O(1),na=O(98),ia=O(74),X={};T.a=function(ha,V){var ea,U,ka;switch(void 0===ha&&
(ha={}),V.type){case na.b:return{};case na.f:return Object(Z.a)(Object(Z.a)({},ha),V.payload.reduce(function(ma,sa){var pa;return Object(Z.a)(Object(Z.a)({},ma),((pa={})[sa.id]=sa,pa))},{}));case na.c:return V=V.payload.id,ha[V],Object(Z.f)(ha,["symbol"==typeof V?V:V+""]);case na.g:return Object(Z.a)(Object(Z.a)({},ha),((ea={})[V.payload.id]=V.payload,ea));case na.k:return ha[V.payload.id]?(V=V.payload.id,ha[V],Object(Z.f)(ha,["symbol"==typeof V?V:V+""])):Object(Z.a)(Object(Z.a)({},ha),((U={})[V.payload.id]=
V.payload,U));case na.j:return(ka={})[V.payload.id]=V.payload,ka;case na.e:return Object(Z.a)(Object(Z.a)({},ha),V.payload);case ia.a:return{};default:return ha}}},function(Q,T,O){O.d(T,"b",function(){return ia});var Z=O(1),na=O(98),ia={};T.a=function(X,ha){switch(void 0===X&&(X={}),ha.type){case na.e:return Object(Z.a)(Object(Z.a)({},X),ha.payload);default:return X}}},function(Q,T,O){O.d(T,"b",function(){return X});var Z=O(1),na=O(273),ia=O(342),X={};T.a=function(ha,V){var ea;switch(void 0===ha&&
(ha=X),V.type){case na.b:return ha[V.payload.item.id]?(delete (U=Object(Z.a)({},ha))[V.payload.item.id],U):ha;case ia.a:var U;return ha[V.payload.id]?(delete (U=Object(Z.a)({},ha))[V.payload.id],U):ha;case na.a:return Object(Z.a)(Object(Z.a)({},ha),((ea={})[V.payload]=!0,ea));default:return ha}}},function(Q,T,O){O.d(T,"b",function(){return ia});var Z=O(1),na=O(273),ia={};T.a=function(X,ha){var V;switch(void 0===X&&(X=ia),ha.type){case na.b:return Object(Z.a)(Object(Z.a)({},X),((V={})[ha.payload.item.id]=
ha.payload.item,V));case na.a:return X[ha.payload]?(X=Object(Z.a)({},X),delete X[ha.payload],X):X;default:return X}}},function(Q,T,O){O.d(T,"b",function(){return ha});var Z=O(1),na=O(258),ia=O(55),X=O(185),ha={categorySchema:void 0,groups:void 0,status:"initial",servers:[]};T.a=function(V,ea){switch(void 0===V&&(V=ha),ea.type){case na.a:return Object(Z.a)(Object(Z.a)({},V),{status:"loading"});case na.b:return Object(Z.a)(Object(Z.a)({},V),{groups:ea.payload.groups,categorySchema:{displayName:"##orgCatRoot--1337!",
value:"##orgCatRoot--1337!",children:Object(X.b)(ea.payload.schema)},status:"loaded",servers:ea.payload.servers||[]});case ia.c:return V.categorySchema&&ea.payload.aggregations&&ea.payload.aggregations.countInfo&&("myOrganization"===ea.payload.aggregations.countInfo.section||"myContent"===ea.payload.aggregations.countInfo.section||"all"===ea.payload.aggregations.countInfo.section)?Object(Z.a)(Object(Z.a)({},V),{categorySchema:Object(X.c)(ea.payload.aggregations,Object(X.a)(V.categorySchema),"categories")}):
V;case na.c:return Object(Z.a)(Object(Z.a)({},V),{status:"failed"});default:return V}}},function(Q,T,O){O.d(T,"b",function(){return ha});var Z=O(1),na=O(168),ia=O(55),X=O(185),ha={favorites:void 0,folders:void 0,groups:void 0,groupCategories:{},status:"initial"};T.a=function(V,ea){var U,ka,ma,sa,pa;switch(void 0===V&&(V=ha),ea.type){case na.d:return Object(Z.a)(Object(Z.a)({},V),{status:"loading"});case na.i:return Object(Z.a)(Object(Z.a)({},V),{favorites:ea.payload.favorites,folders:ea.payload.folders,
groups:ea.payload.groups,status:"loaded"});case na.h:return Object(Z.a)(Object(Z.a)({},V),{groupCategories:Object(Z.a)(Object(Z.a)({},V.groupCategories),(U={},U[ea.payload.id]={value:ea.payload.id,children:Object(X.b)(ea.payload.categorySchema)},U))});case ia.c:return ea.payload.aggregations&&ea.payload.aggregations.countInfo&&"myGroups"===ea.payload.aggregations.countInfo.section&&ea.payload.aggregations.countInfo.group&&(U=ea.payload.aggregations.countInfo.group.id,V.groupCategories[U])?Object(Z.a)(Object(Z.a)({},
V),{groupCategories:Object(Z.a)(Object(Z.a)({},V.groupCategories),(ka={},ka[U]=Object(X.c)(ea.payload.aggregations,Object(X.a)(V.groupCategories[U]),"groupCategories"),ka))}):V;case na.j:return Object(Z.a)(Object(Z.a)({},V),{status:"failed"});case na.c:return Object(Z.a)(Object(Z.a)({},V),{favorites:V.favorites?Object(Z.a)(Object(Z.a)({},V.favorites),(ma={},ma[ea.payload.id]=!0,ma)):(sa={},sa[ea.payload.id]=!0,sa)});case na.g:return Object(Z.a)(Object(Z.a)({},V),{favorites:V.favorites?Object(Z.a)(Object(Z.a)({},
V.favorites),(pa={},pa[ea.payload.id]=!1,pa)):{}});default:return V}}},function(Q,T,O){function Z(ea,U,ka){return U.filter(function(ma){return ma.type===ea}).reduce(function(ma,sa){return ma[sa.id]||(ma[sa.id]={value:sa.id,children:Object(ha.b)(sa.response.categorySchema)}),ma},Object(na.a)({},ka))}O.d(T,"b",function(){return V});var na=O(1),ia=O(256),X=O(55),ha=O(185),V={groupSchemas:{},groupSort:{},orgSchemas:{},status:"initial"};T.a=function(ea,U){switch(void 0===ea&&(ea=V),U.type){case ia.a:return Object(na.a)(Object(na.a)({},
ea),{status:"loading"});case ia.b:return Object(na.a)(Object(na.a)({},ea),{groupSort:U.payload.groups.reduce(function(ma,sa){return ma[sa.id]={field:sa.sortField,order:sa.sortOrder},ma},ea.groupSort)});case ia.c:return Object(na.a)(Object(na.a)({},ea),{orgSchemas:Z("org",U.payload,ea.orgSchemas),groupSchemas:Z("group",U.payload,ea.groupSchemas),status:"loaded"});case ia.d:return Object(na.a)(Object(na.a)({},ea),{status:"failed"});case X.c:if(U.payload.aggregations){var ka=U.payload.aggregations.countInfo;
if(ka.custom&&ka.custom.filters)return ka.custom.filters.filter(function(ma){return"object"==typeof ma}).reduce(function(ma,sa){var pa,Aa;return"group"===sa.type?Object(na.a)(Object(na.a)({},ea),{groupSchemas:Object(na.a)(Object(na.a)({},ea.groupSchemas),(pa={},pa[sa.id]=Object(ha.c)(U.payload.aggregations,Object(ha.a)(ea.groupSchemas[sa.id]),"groupCategories"),pa))}):"org"===sa.type?Object(na.a)(Object(na.a)({},ea),{orgSchemas:Object(na.a)(Object(na.a)({},ea.orgSchemas),(Aa={},Aa[sa.id]=Object(ha.c)(U.payload.aggregations,
Object(ha.a)(ea.orgSchemas[sa.id]),"categories"),Aa))}):ma},ea)}return ea;default:return ea}}},function(Q,T,O){O.d(T,"b",function(){return X});var Z=O(1),na=O(55),ia=O(280),X={};T.a=function(ha,V){switch(void 0===ha&&(ha=X),V.type){case na.c:return Object(Z.a)(Object(Z.a)({},ha),V.payload.search.organizations);case na.f:case ia.b:return Object(Z.a)(Object(Z.a)({},ha),V.payload.organizations);default:return ha}}},function(Q,T,O){O.d(T,"b",function(){return ia});var Z=O(1),na=O(273),ia={};T.a=function(X,
ha){var V;switch(void 0===X&&(X=ia),ha.type){case na.b:return Object(Z.a)(Object(Z.a)({},X),((V={})[ha.payload.owner.username]=ha.payload.owner,V));default:return X}}},function(Q,T,O){O.d(T,"b",function(){return ia});var Z=O(1),na=O(250),ia={content:[],status:"initial"};T.a=function(X,ha){switch(void 0===X&&(X=ia),ha.type){case na.a:return Object(Z.a)(Object(Z.a)({},X),{status:"loading"});case na.b:return Object(Z.a)(Object(Z.a)({},X),{status:"failed"});case na.c:return Object(Z.a)(Object(Z.a)({},
X),{status:"loaded",content:ha.payload});default:return X}}},function(Q,T,O){O.d(T,"b",function(){return V});Q=O(17);var Z=O(459),na=O(460),ia=O(464),X=O(465),ha=O(466);O=O(467);var V={sidePanel:Z.b,expanded:na.b,resultPanel:ia.b,filters:X.b,tagsFilter:ha.b,pagination:O.b};T.a=Object(Q.combineReducers)({sidePanel:Z.a,expanded:na.a,resultPanel:ia.a,filters:X.a,tagsFilter:ha.a,pagination:O.a})},function(Q,T,O){O.d(T,"b",function(){return ea});var Z=O(1),na=O(349),ia=O(342),X=O(767),ha=O(768),V=O(55),
ea={closing:!1,type:"hidden"};T.a=function(U,ka){switch(void 0===U&&(U=ea),ka.type){case na.b:return Object(Z.a)(Object(Z.a)({},U),{closing:!0});case na.a:return Object(Z.a)(Object(Z.a)({},U),{closing:!1,type:"hidden",item:void 0});case ia.a:return Object(Z.a)(Object(Z.a)({},U),{type:"item",item:ka.payload});case X.a:return Object(Z.a)(Object(Z.a)({},U),{type:"filter",item:void 0});case ha.a:return Object(Z.a)(Object(Z.a)({},U),{type:"sort",item:void 0});case V.c:return"item"===U.type&&U.item&&!ka.payload.search.results.filter(function(ma){return U.item&&
ma.id===U.item.id})[0]?Object(Z.a)(Object(Z.a)({},U),{closing:!0}):U;case V.g:return"item"===U.type&&U.item&&!ka.payload.filter(function(ma){return U.item&&ma.id===U.item.id})[0]?Object(Z.a)(Object(Z.a)({},U),{closing:!0}):U;default:return U}}},function(Q,T,O){O.d(T,"b",function(){return ha});Q=O(461);var Z=O(462),na=O(463),ia=O(17),X=O(222),ha={filters:Q.b,sort:Z.b,sublayerCards:na.b,maximized:!1,closing:!1};T.a=Object(ia.combineReducers)({filters:Q.a,sort:Z.a,sublayerCards:na.a,maximized:function(V,
ea){switch(ea.type){case X.c:return!0;case X.d:return!1;default:return V}},closing:function(V,ea){switch(ea.type){case X.b:return!0;default:return V}}})},function(Q,T,O){O.d(T,"b",function(){return na});var Z=O(222),na=!1;T.a=function(ia,X){switch(X.type){case Z.e:return!ia;default:return ia}}},function(Q,T,O){O.d(T,"b",function(){return ia});var Z=O(222),na=O(277),ia=!1;T.a=function(X,ha){switch(ha.type){case Z.f:return!X;case Z.a:return!1;case na.a:case na.b:return!X;default:return X}}},function(Q,
T,O){O.d(T,"b",function(){return ia});var Z=O(1),na=O(222),ia={cardStates:{},overlayOpen:!1};T.a=function(X,ha){var V;switch(ha.type){case na.g:return Object(Z.a)(Object(Z.a)({},X),{cardStates:Object(Z.a)(Object(Z.a)({},X.cardStates),(V={},V[ha.payload.item.id]=ha.payload,V)),overlayOpen:ha.payload.overlay.visible&&!ha.payload.overlay.closing});default:return X}}},function(Q,T,O){O.d(T,"b",function(){return X});var Z=O(1),na=O(55),ia=O(393),X={display:"list",status:"empty"};T.a=function(ha,V){switch(void 0===
ha&&(ha=X),V.type){case na.g:case na.c:case na.f:return Object(Z.a)(Object(Z.a)({},ha),{status:"success"});case na.b:case na.e:return Object(Z.a)(Object(Z.a)({},ha),{status:"failed"});case na.a:return Object(Z.a)(Object(Z.a)({},ha),{status:"loading"});case na.d:return Object(Z.a)(Object(Z.a)({},ha),{status:"loadingNext"});case ia.a:return Object(Z.a)(Object(Z.a)({},ha),{display:"table"===ha.display?"list":"table"});case ia.b:return Object(Z.a)(Object(Z.a)({},ha),{status:"empty"});default:return ha}}},
function(Q,T,O){O.d(T,"b",function(){return X});var Z=O(1),na=O(56),ia=O(275),X={};T.a=function(ha,V){switch(void 0===ha&&(ha=X),V.type){case na.a:return{};case na.l:return Object(Z.a)(Object(Z.a)({},ha),{modifiedSection:V.payload.section});case na.c:return Object(Z.a)(Object(Z.a)({},ha),{createdSection:V.payload.section});case ia.a:return{};default:return ha}}},function(Q,T,O){O.d(T,"b",function(){return V});var Z=O(1);Q=O(64);var na=O(97),ia=O(275),X=O(396),ha=O(55),V={allTags:[],filterString:"",
visibleTags:[]};T.a=function(U,ka){switch(void 0===U&&(U=V),ka.type){case ia.a:return Object(Z.a)(Object(Z.a)({},U),{filterString:""});case X.d:return Object(Z.a)(Object(Z.a)({},U),{filterString:ka.payload,visibleTags:U.allTags.filter(function(za){return 0===ka.payload.length||-1<za.value.indexOf(ka.payload)})});case X.a:return U;case X.c:if(ka.payload.aggregations&&(sa=ka.payload.aggregations.counts.filter(function(za){return"tags"===za.fieldName})[0])){var ma=(pa=U.allTags,Aa=sa.fieldValues,ea(pa.concat(Aa)));
return Object(Z.a)(Object(Z.a)({},U),{allTags:ma,visibleTags:ma.filter(function(za){return 0===U.filterString.length||-1<za.value.indexOf(U.filterString)})})}return U;case X.b:return U;case ha.c:var sa;return ka.payload.aggregations&&(sa=ka.payload.aggregations.counts.filter(function(za){return"tags"===za.fieldName})[0])?(ma=ea(sa.fieldValues),Object(Z.a)(Object(Z.a)({},U),{allTags:ma,visibleTags:ma.filter(function(za){return 0===U.filterString.length||-1<za.value.indexOf(U.filterString)})})):U;default:return U}var pa,
Aa};T=Object(na.f)("value");var ea=Object(Q.a)(T,function(U){return U.map(function(ka){var ma=ka.count;return{value:ka.value.trim(),count:ma}})},function(U){return U.sort(function(ka,ma){return ma.count-ka.count})})},function(Q,T,O){O.d(T,"b",function(){return ha});var Z=O(1),na=O(280),ia=O(55),X=O(198),ha={page:1,displayItems:[],userThumbnailCache:{},pendingUserThumbRequests:[],orgThumbnailCache:{},pendingOrgThumbRequests:[],status:"loading"};T.a=function(V,ea){switch(void 0===V&&(V=ha),ea.type){case na.c:return Object(Z.a)(Object(Z.a)({},
V),{status:"loading"});case na.b:return Object(Z.a)(Object(Z.a)({},V),{displayItems:ea.payload.displayItems,page:ea.payload.page,status:"success"});case na.a:return Object(Z.a)(Object(Z.a)({},V),{status:"failed"});case ia.c:return Object(Z.a)(Object(Z.a)({},V),{displayItems:ea.payload.search.results,status:"success",page:1});case ia.g:return Object(Z.a)(Object(Z.a)({},V),{displayItems:ea.payload,status:"success",page:1});case X.c:return Object(Z.a)(Object(Z.a)({},V),{pendingUserThumbRequests:Object(Z.g)(Object(Z.g)([],
V.pendingUserThumbRequests,!0),ea.payload,!0).filter(function(U,ka,ma){return ma.indexOf(U)===ka})});case X.d:return Object(Z.a)(Object(Z.a)({},V),{userThumbnailCache:Object(Z.a)(Object(Z.a)({},V.userThumbnailCache),ea.payload),pendingUserThumbRequests:V.pendingUserThumbRequests.filter(function(U){return!ea.payload[U]})});case X.a:return Object(Z.a)(Object(Z.a)({},V),{pendingOrgThumbRequests:Object(Z.g)(Object(Z.g)([],V.pendingOrgThumbRequests,!0),ea.payload,!0).filter(function(U,ka,ma){return ma.indexOf(U)===
ka})});case X.b:return Object(Z.a)(Object(Z.a)({},V),{orgThumbnailCache:Object(Z.a)(Object(Z.a)({},V.orgThumbnailCache),ea.payload),pendingOrgThumbRequests:V.pendingOrgThumbRequests.filter(function(U){return!ea.payload[U]})});default:return V}}},function(Q,T,O){var Z=O(1);Q=O(17);var na=O(520),ia=O(521),X=O(544),ha=O(279),V=O.n(ha),ea=O(98);O=function(U){function ka(){return null!==U&&U.apply(this,arguments)||this}return Object(Z.d)(ka,U),ka.prototype.render=function(ma){var sa=!this.props.filtersVisible&&
!this.props.sortVisible&&!this.props.sublayerOverlayOpen||!window.matchMedia("(max-width: 860px)").matches&&!this.props.sublayerOverlayOpen;return ma("div",{id:"item-browser-container",classes:this.props.containerClasses,key:"ib-expanded"},ma(V.a,{closing:this.props.closing,key:"ib-big-overlay",scrollable:sa,adjustable:this.props.adjustable,flex:!0,headerId:"ib__big-header-title"},ma(na.a,{key:"big-browser-header"}),ma(ia.a,{key:"big-browser-body"}),this.props.renderFooter&&ma(X.a,{handleSecondaryClick:this.props.handleCancelClick,
handlePrimaryClick:this.props.handleSubmitClick,key:"big-browser-footer",primaryText:this.props.submitButtonText,secondaryText:this.props.cancelButtonText})))},ka}(Q.Component);T.a=Object(Q.connect)(function(U){return{closing:U.ui.expanded.closing,filtersVisible:U.ui.expanded.filters,sortVisible:U.ui.expanded.sort,sublayerOverlayOpen:U.ui.expanded.sublayerCards.overlayOpen,adjustable:"adjustable"===U.settings.config.layoutMode,renderFooter:!!U.settings.config.multiSelect,submitButtonText:U.settings.config.submitButtonText,
cancelButtonText:U.settings.config.cancelButtonText}},function(U){return{handleSubmitClick:function(){U(ea.m)},handleCancelClick:function(){U(ea.l)}}})(O)},function(Q,T){Q.exports=D},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(Q,T,O){var Z=O(1),na=O(37);Q=O(17);var ia=O(89);O=function(X){function ha(V){V=X.call(this,V)||this;return V.handleContract=V.handleContract.bind(V),V.handleClose=V.handleClose.bind(V),V.handleTitleCreate=V.handleTitleCreate.bind(V),V}return Object(Z.d)(ha,X),
ha.prototype.componentWillReceiveProps=function(V){V.page!==this.props.page&&this.titleNode&&this.titleNode.scrollIntoView()},ha.prototype.render=function(V){return V("header",{class:"ib__big-header"},V("div",{class:"ib__big-header-title-section"},V("h3",{class:"ib__big-header-title",id:"ib__big-header-title",afterCreate:this.handleTitleCreate},this.props.dialogTitle),V("button",{key:"main-close-btn",class:"mod__overlay__close","aria-label":na.close,onclick:this.handleClose},V("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",
height:"24",width:"24",viewBox:"0 0 24 24",fill:"currentColor"},V("path",{d:ia.k})))))},ha.prototype.handleContract=function(){this.props.onBack()},ha.prototype.handleClose=function(){this.props.onBack()},ha.prototype.handleTitleCreate=function(V){this.titleNode=V},ha}(Q.Component);T.a=Object(Q.connect)(function(X){return{dialogTitle:X.settings.config.dialogTitle,onBack:function(){var ha,V;null===(V=null===(ha=X.settings.config)||void 0===ha?void 0:ha.onBack)||void 0===V||V.call(ha)},page:X.ui.pagination.page}},
function(){return{}})(O)},function(Q,T,O){var Z=O(1),na=O(37);Q=O(17);var ia=O(524),X=O(536),ha=O(540),V=O(523),ea=O(357),U=O.n(ea),ka=O(280);ea=O(203);var ma=O.n(ea);ea=O(358);var sa=O.n(ea),pa=O(334),Aa=O(222),za=O(316),Ba=O(522);O=function(ua){function Fa(va){va=ua.call(this,va)||this;return va.handlePageChange=va.handlePageChange.bind(va),va.handleCloseMobileFilters=va.handleCloseMobileFilters.bind(va),va}return Object(Z.d)(Fa,ua),Fa.prototype.render=function(va){var xa=this,Da=this.props.expandedFiltersActive,
Ca={"ib__big-section":!0,"ib__big-filters":!0,"ib__big-filters--hidden":!Da,"ib__big-filters--visible":Da},qa="loading"===this.props.resultStatus||"loading"===this.props.paginationStatus,W={"ib__big-wrapper":!0,"ib__big-wrapper--faded":qa,"ib__big-wrapper--transparent":qa&&0===this.props.pageDisplayItems.length},ba=Math.ceil(1E4<this.props.itemTotal?1E4/this.props.resultsPerQuery:this.props.itemTotal/this.props.resultsPerQuery);return va("div",{class:"ib__big-body","aria-labelledby":Object(za.slugifySectionName)(this.props.section),
role:"tabpanel"},va("div",{class:"ib-nav-container"},va(Ba.a,{key:"big-browser-section-tabs"}),"subscription"!==this.props.section&&va(V.a,{key:"ib__big-search-area"})),va("div",{class:"ib__big-row",afterCreate:function(oa){oa&&!xa.scrollContainer&&(xa.scrollContainer=oa)}},va("section",{classes:Ca,key:"fullscreen-filters"},va("div",{class:Da?"":"hide"},va("div",{class:"ib-ex-input__container"},va("span",{class:"ib__big-filter-label"},na.filterPane.filter)),va(ia.a,null))),va("div",{class:"ib__big-overlay-filters"},
va(sa.a,{key:"mobile-filter-wrap",maxHeight:!0,open:Da,onClose:this.handleCloseMobileFilters,title:na.filterPane.filter,footer:va("button",{class:"ib__big-filter-results-btn",onclick:this.handleCloseMobileFilters},na.viewResults)},va(pa.a,{key:"mobile-filters"}))),va("section",{class:"ib__big-section ib__big-results",key:"results-section"},va("div",{classes:W},va("div",{class:"ib-ex-alert-container hide",key:"ib-ex-alert-container"},va("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",width:"16",
height:"16",viewBox:"0 0 16 16",style:"\n                                    fill: currentColor;\n                                    pointer-events: none;\n                                    width: 16px;\n                                    height: 16px;\n                                    vertical-align: middle;\n                                    padding: 0rem .2rem .1rem;\n                                    "},va("path",{d:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM7.5 5.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM7 7h1v5H7zm2 5H6v-1h3z"})),
va("span",{class:"ib-ex-alert-text"},na.groupAddDisclaimer)),va(X.a,{key:"big-browser-input-area"}),va(ha.a,{key:"big-browser-result-panel"}),1<ba&&"subscription"!==this.props.section&&va(U.a,{key:"big-browser-pager",onPageChange:this.handlePageChange,numPages:ba,currentPage:this.props.currentPage,paginationLimitReached:1E4<this.props.itemTotal})),qa&&va("div",{class:"ib-ex__load-container",key:"ib-ex__load-container"},va(ma.a,{key:"item-ex-loading"})))))},Fa.prototype.handlePageChange=function(va){this.scrollContainer&&
(this.scrollContainer.scrollTop=0);this.props.changePage(va)},Fa.prototype.handleCloseMobileFilters=function(){this.props.toggleExpandedFilters()},Fa}(Q.Component);T.a=Object(Q.connect)(function(ua){return{expandedFiltersActive:ua.ui.expanded.filters,resultStatus:ua.ui.resultPanel.status,paginationStatus:ua.ui.pagination.status,pageDisplayItems:ua.ui.pagination.displayItems,currentPage:ua.ui.pagination.page,itemTotal:ua.parameters.nextQuery.total,resultsPerQuery:ua.settings.config.resultsPerQuery,
section:ua.parameters.section}},function(ua){return{changePage:function(Fa){ua(Object(ka.d)(Fa))},toggleExpandedFilters:function(){ua(Object(Aa.i)())}}})(O)},function(Q,T,O){var Z=O(1),na=O(37);Q=O(17);var ia=O(275),X=O(55),ha=O(316),V=O.n(ha),ea=O(122);O=function(U){function ka(ma){ma=U.call(this,ma)||this;return ma.state={options:(ma.props.user?ma.props.baseSections:ma.props.baseSections.filter(function(sa){return"livingAtlas"===sa||"all"===sa})).map(function(sa){return{value:sa,text:na.header.sectionTitles[sa]}}).concat(ma.props.customSections.map(function(sa){return{value:sa.name,
text:sa.name}}))},ma.handleTabSelect=ma.handleTabSelect.bind(ma),ma}return Object(Z.d)(ka,U),ka.prototype.render=function(ma){return ma(V.a,{key:"ib-expanded-nav",options:this.state.options,onSelect:this.handleTabSelect,selectedOptionValue:this.props.currentSection,dropdownOnly:!0})},ka.prototype.handleTabSelect=function(ma){this.props.changeSearchSection(ma);this.props.search(!0)},ka}(Q.Component);T.a=Object(Q.connect)(function(U){return{user:U.settings.utils.portal.user,baseSections:U.settings.config.baseSections,
customSections:U.settings.config.customSections,currentSection:U.parameters.section}},function(U){return{changeSearchSection:function(ka){U(Object(ea.k)(""));U(Object(ia.b)(ka))},search:function(ka){U(Object(X.i)(ka))}}})(O)},function(Q,T,O){var Z=O(1),na=O(37);Q=O(17);var ia=O(272),X=O.n(ia),ha=O(222),V=O(277),ea=O(392),U=O(55);ia=O(359);var ka=O.n(ia),ma=O(360),sa="relevance title owner created modified numviews".split(" "),pa={myContent:["relevance","modified","title"],myFavorites:["relevance",
"modified","title","numviews","owner"],myGroups:["relevance","modified","title","numviews","owner"],myOrganization:["relevance","modified","title","numviews","owner"],livingAtlas:["relevance","modified","title","numviews","owner"],all:["relevance","title","owner","modified","numviews"]};O=function(Aa){function za(Ba){Ba=Aa.call(this,Ba)||this;return Ba.handleToggleFilters=Ba.handleToggleFilters.bind(Ba),Ba.handleSearchChange=Ba.handleSearchChange.bind(Ba),Ba.handleSortFieldChange=Ba.handleSortFieldChange.bind(Ba),
Ba.handleSortOrderChange=Ba.handleSortOrderChange.bind(Ba),Ba.handleSortClick=Ba.handleSortClick.bind(Ba),Ba.handleSortBlur=Ba.handleSortBlur.bind(Ba),Ba}return Object(Z.d)(za,Aa),za.prototype.render=function(Ba){var ua=na.header.sectionTitles[this.props.section];ua=this.props.searchPlaceholderText?this.props.searchPlaceholderText:"".concat(na.search," ").concat(ua||this.props.section);var Fa=this.props.section;Fa=pa[Fa]?Object(Z.g)([],pa[Fa],!0):Object(Z.g)([],sa,!0);return-1===Fa.indexOf(this.props.sortField)&&
(this.props.sortField=Fa[0]),Ba("div",{class:"ib-ex-search-area__container",key:"search-area"},Ba(ma.a,{key:"ib-ex-search-area-input",title:na.header.search,placeholder:ua,currentSearchString:this.props.searchString,changeSearchString:this.handleSearchChange}),Ba("div",{class:"ib-ex-search-area__btn-section"},Ba(ka.a,{active:this.props.sortActive,key:"ib-ex-sort-dropdown",field:this.props.sortField,order:this.props.sortOrder,availableFields:Fa,onFieldChange:this.handleSortFieldChange,onOrderChange:this.handleSortOrderChange,
onClick:this.handleSortClick,handleMenuBlur:this.handleSortBlur}),Ba(X.a,{key:"ib-ex-filter-btn",active:this.props.expandedFiltersActive,handleClick:this.handleToggleFilters},Ba("div",{class:"drp-sort__btn-body"},Ba("svg",{role:"img",viewBox:"0 0 16 16",width:"16px",height:"16px"},Ba("path",{d:"M3 8h1v1H3v7H2V9H1V8h1V0h1zm6-8H8v4H7v1h1v11h1V5h1V4H9zm6 12V0h-1v12h-1v1h1v3h1v-3h1v-1z"})),Ba("span",{class:"drp-sort__btn-label"},na.filterPane.filter)))))},za.prototype.handleToggleFilters=function(){this.props.toggleExpandedFilters()},
za.prototype.handleSearchChange=function(Ba){this.props.changeSearchString(Ba);this.props.search(!0)},za.prototype.handleSortFieldChange=function(Ba){this.props.changeSortField(Ba);this.props.search()},za.prototype.handleSortOrderChange=function(Ba){this.props.changeSortOrder(Ba);this.props.search()},za.prototype.handleSortClick=function(){this.props.toggleExpandedSort()},za.prototype.handleSortBlur=function(){this.props.closeExpandedSort()},za}(Q.Component);T.a=Object(Q.connect)(function(Aa){return{searchPlaceholderText:Aa.settings.config.searchPlaceholderText,
section:Aa.parameters.section,searchString:Aa.parameters.searchString.current,previousSearchString:Aa.parameters.searchString.previous,sortActive:Aa.ui.expanded.sort,sortField:Aa.parameters.sort.field,sortOrder:Aa.parameters.sort.order,expandedFiltersActive:Aa.ui.expanded.filters}},function(Aa){return{toggleExpandedFilters:function(){Aa(Object(ha.i)())},toggleExpandedSort:function(){Aa(Object(ha.j)())},changeSortField:function(za){Aa(Object(V.c)(za))},changeSortOrder:function(za){Aa(Object(V.d)(za))},
changeSearchString:function(za){Aa(Object(ea.b)(za))},search:function(za){Aa(Object(U.i)(za))},closeExpandedSort:function(){Aa(Object(ha.h)())}}})(O)},function(Q,T,O){var Z=O(334);T.a=function(na,ia){return ia(Z.a,{key:"big-browser-filters"})}},function(Q,T){Q.exports=G},function(Q,T){Q.exports=F},function(Q,T){Q.exports=A},function(Q,T){Q.exports=y},function(Q,T){Q.exports=z},function(Q,T){Q.exports=B},function(Q,T){Q.exports=C},function(Q,T){Q.exports=H},function(Q,T){Q.exports=E},function(Q,T,
O){function Z(ia){var X,ha=ia.settings.utils.portal.user,V=!ha;ha=!V&&!ha.orgId;if(V||ha)if(ha)V=function(ea){switch(ea.parameters.section){case "myContent":return"folder itemType modified created tags shared".split(" ");case "myFavorites":return["itemType","modified","created","tags","status"];case "myGroups":return"groupCategories group itemType modified created tags".split(" ");case "livingAtlas":return["livingAtlasCategories","livingAtlasRegion","itemType","tags","status"];case "all":return["itemType",
"modified","status"];default:return na(ea)}}(ia);else a:switch(ia.parameters.section){case "livingAtlas":V=["livingAtlasCategories","livingAtlasRegion","itemType","tags","status"];break a;case "all":V=["itemType","modified","status"];break a;default:V=na(ia)}else V=function(ea){switch(ea.parameters.section){case "myContent":return"folder orgCategories itemType modified created tags shared status collaboration".split(" ");case "myFavorites":return"itemType modified created tags shared status collaboration".split(" ");
case "myGroups":return"group groupCategories itemType modified created tags shared status collaboration".split(" ");case "myOrganization":return"orgCategories itemType modified created tags shared status collaboration".split(" ");case "livingAtlas":return["livingAtlasCategories","livingAtlasRegion","itemType","tags","status"];case "all":return["itemType","modified","shared","status"];default:return na(ea)}}(ia);return X=V,function(ea,U){var ka=U.indexOf("itemType");ea&&-1<ka&&U.splice(ka,1);return U}(ia.settings.config.disableItemTypeFilters,
X)}function na(ia){return ia.settings.config.customSections.reduce(function(X,ha){return ha.name===ia.parameters.section&&ha.filters?ha.filters:X},["itemType","modified","shared"])}O.d(T,"a",function(){return Z})},function(Q,T,O){var Z=O(1);Q=O(17);var na=O(214),ia=O.n(na);na=O(249);var X=O.n(na);O=function(ha){function V(ea){ea=ha.call(this,ea)||this;return ea.handleClear=ea.handleClear.bind(ea),ea.handleClick=ea.handleClick.bind(ea),ea}return Object(Z.d)(V,ha),V.prototype.render=function(ea){var U=
this,ka=this.props.filter;return ea(X.a,{key:"".concat(ka.displayName,"-filter-accordion"),clearable:!1,onClear:this.handleClear,title:ka.displayName},ea("ul",{"aria-label":ka.displayName,id:"".concat(ka.displayName,"-filter-accordion-tree"),class:"ftr-custom__tree",role:"tree"},ka.children?ka.children.map(function(ma){return ea(ia.a,{key:ma.value,value:ma.value,name:ma.displayName,onToggleClick:U.handleClick,selectedToggle:U.props.selectedOption,childOptions:ma.children})}):null))},V.prototype.handleClear=
function(){this.props.onClear(this.props.index)},V.prototype.handleClick=function(ea,U){ea===this.props.selectedOption?this.props.onClick(this.props.index,void 0):this.props.onClick(this.props.index,ea,U)},V}(Q.Component);T.a=O},function(Q,T,O){var Z=O(1),na=O(37),ia=O(181);Q=O(17);var X=O(401),ha=O(537),V=O(98);O=function(ea){function U(){return null!==ea&&ea.apply(this,arguments)||this}return Object(Z.d)(U,ea),U.prototype.render=function(ka){var ma=this,sa=this.props,pa=sa.itemTotal,Aa=sa.itemName,
za=sa.dropdownItems,Ba=sa.staticFilters,ua=sa.handleItemClick,Fa=sa.handleClearAllClick,va=sa.handleSelectPageClick,xa=sa.multiselect,Da=sa.maxSelected,Ca=sa.showSelectAllOnPage,qa=sa.itemsPerPage,W=sa.pageNumber;sa=sa.showDeselectTooltip;var ba=1E4<=pa?na.itemLimitReached.replace("${limit}",ia.format(1E4)):ia.format(pa),oa=Math.min((W-1)*qa+1,pa);pa=Math.min(W*qa,pa);Aa=Aa?"".concat(ba," ").concat(Aa):na.itemTotalInfo.replace("${from}",oa).replace("${to}",pa).replace("${total}",ba).replace("-"," - ");
ua=xa&&0<za.length&&ka(ha.a,{key:"ib-item-dropdown",items:za,maxSelected:Da,handleItemClick:ua,showDeselectTooltip:sa});za=xa&&0<za.length&&ka("button",{key:"clear-selection-button",class:"ib-ex-input__bulk-btn ib-ex-input__bulk-btn--clear-all",onclick:function(wa){ma.handleFocus();Fa()}},na.filterPane.clearSelection);Ca=Ca&&ka("button",{key:"select-all-button",class:"ib-ex-input__bulk-btn ib-ex-input__bulk-btn--select-page",onclick:function(wa){ma.handleFocus();va()}},na.filterPane.selectAll);return ka("div",
{class:"ib-ex-input__container",key:"ib-result-count-container"},ka("div",{class:"ib-ex-input__container__controls"},ka("span",{key:"input-area-results",class:"ib-ex-input-area__result-count"},Aa),ua,za,Ca),ka(X.a,{staticFilters:Ba,key:"ib-ex__active-filters",theme:"dark",showLabel:"".concat(na.filterPane.filters,":")}))},U.prototype.handleFocus=function(){window.setTimeout(function(){var ka;null===(ka=document.querySelector(".ib-ex-input__container button"))||void 0===ka||ka.focus()},20)},U}(Q.Component);
T.a=Object(Q.connect)(function(ea){return{itemName:ea.settings.config.itemName,itemTotal:ea.parameters.nextQuery.total,pageNumber:ea.ui.pagination.page,staticFilters:ea.settings.config.staticFilters,itemsPerPage:ea.settings.config.resultsPerQuery,dropdownItems:Object.keys(ea.results.selectedItems).map(function(U){return ea.results.selectedItems[U]}).filter(function(U){return!ea.settings.config.disableInitiallySelectedItems||!ea.results.initiallySelectedItems[U.id]}),multiselect:!!ea.settings.config.multiSelect,
maxSelected:ea.settings.config.maxSelected,showDeselectTooltip:ea.settings.config.showDeselectTooltip,showSelectAllOnPage:!!ea.settings.config.multiSelect&&0<ea.parameters.nextQuery.total&&!ea.ui.pagination.displayItems.every(function(U){return ea.results.selectedItems[U.id]})&&(!ea.settings.config.maxSelected||ea.ui.pagination.displayItems.filter(function(U){return!ea.results.selectedItems[U.id]}).length+Object.keys(ea.results.selectedItems).length<=ea.settings.config.maxSelected)}},function(ea){return{handleItemClick:function(U){ea({type:V.c,
payload:U})},handleClearAllClick:function(){ea(V.n)},handleSelectPageClick:function(){ea(Object(V.q)())}}})(O)},function(Q,T,O){var Z=O(1),na=O(37),ia=O(143);Q=O(17);var X=O(89),ha=O(538),V={open:!1};O=function(ea){function U(){var ka=null!==ea&&ea.apply(this,arguments)||this;return ka.state=V,ka.handleBlur=function(ma){var sa;(ma=ma.relatedTarget)&&(null===(sa=ka.dropdown)||void 0===sa?0:sa.contains(ma))||ka.setState({open:!1})},ka.handleClick=function(ma){var sa,pa;ma=ma.target;null!==(sa=ka.dropdown)&&
void 0!==sa&&sa.contains(ma)||((sa=null===(pa=ka.toggleButton)||void 0===pa?void 0:pa.contains(ma))?ka.setState({open:!ka.state.open}):ka.state.open&&!sa&&ka.setState({open:!1}))},ka}return Object(Z.d)(U,ea),U.prototype.render=function(ka){var ma=this,sa=this.props,pa=sa.items,Aa=sa.maxSelected,za=sa.showDeselectTooltip;sa=Aa?na.itemsSelectedMax:na.itemsSelected;var Ba=1<pa.length?sa.enPlural:sa.en;"en"!==ia.locale.slice(0,2)&&(Ba=sa.other);Aa=Aa?Ba.replace("${num}",pa.length).replace("${max}",Aa):
Ba.replace("${num}",pa.length);return ka("div",{key:"selected-dropdown",class:"selected-dropdown",afterCreate:function(){document.addEventListener("click",ma.handleClick)},afterRemoved:function(){document.removeEventListener("click",ma.handleClick);ma.setState(V)}},ka("button",{class:"selected-dropdown__toggle-button",key:"selected-dropdown__toggle-button","aria-haspopup":"true",afterCreate:function(ua){ma.toggleButton=ua},afterRemoved:function(){ma.toggleButton=void 0}},ka("span",{class:"selected-dropdown__toggle-button__text"},
Aa),ka("svg",{role:"img",style:"\n              padding: 0 9px;\n              width: 16px;\n              height: 16px;\n              fill: white;"},ka("path",{d:X.a}))),this.state.open&&ka("div",{class:"selected-dropdown__list__container",key:"selected-dropdown__list__container",afterCreate:function(ua){ma.dropdown=ua},afterRemoved:function(){ma.dropdown=void 0}},ka("ul",{id:"selected-dropdown__list",class:"selected-dropdown__list",key:"selected-dropdown__list",role:"menu"},pa.map(function(ua){return ka(ha.a,
{item:ua,handleCloseClick:ma.props.handleItemClick,handleBlur:ma.handleBlur,showDeselectTooltip:za,key:ua.id})}))))},U}(Q.Component);T.a=O},function(Q,T,O){var Z=O(1);Q=O(17);var na=O(37),ia=O(89);O=function(X){function ha(){return null!==X&&X.apply(this,arguments)||this}return Object(Z.d)(ha,X),ha.prototype.render=function(V){var ea=this.props,U=ea.item,ka=ea.handleCloseClick,ma=ea.handleBlur;ea=ea.showDeselectTooltip;var sa="selected-".concat(U.id),pa="deselect-item-".concat(U.id),Aa=function(){return V("button",
{id:pa,class:"selected-dropdown__list-item__button",onclick:function(){ka(U)},"aria-labelledby":sa,"aria-label":na.deselect,onblur:ma},V("svg",null,V("path",{d:ia.j})))};return V("li",{class:"selected-dropdown__list-item",role:"menuitem",key:U.id},V("img",{src:U.iconURI,alt:U.type,class:"selected-dropdown__list-item__icon"}),V("span",{class:"selected-dropdown__list-item__description",id:sa},U.title),ea?V("div",null,Aa(),V("calcite-tooltip",{"reference-element":pa},na.deselect)):Aa())},ha}(Q.Component);
T.a=O},function(Q,T){Q.exports=K},function(Q,T,O){var Z=O(1),na=O(37);Q=O(17);var ia=O(542),X=O(541),ha=O.n(X).a;O=function(V){function ea(){return null!==V&&V.apply(this,arguments)||this}return Object(Z.d)(ea,V),ea.prototype.render=function(U){return"success"!==this.props.resultStatus&&"loading"!==this.props.resultStatus||"success"!==this.props.pageStatus&&"loading"!==this.props.pageStatus?this.props.tooManyGroups?U("div",{key:"request-error",class:"ib__results"},U("div",{class:"ib-results__message-container"},
U("span",{class:"ib-results__message"},na.results.tooManyGroups))):U("div",{key:"request-error",class:"ib__results"},U("div",{class:"ib-results__message-container"},U("span",{class:"ib-results__message"},na.results.requestError))):this.props.showSubResources?U(ha,{key:"lazy-sublayers",path:"ItemBrowser/SubResourceItemList",componentProps:{key:"subresource-item-list"}},"loading..."):U(ia.a,{key:"ib-ex-item-list"})},ea}(Q.Component);T.a=Object(Q.connect)(function(V){return{resultStatus:V.ui.resultPanel.status,
pageStatus:V.ui.pagination.status,showSubResources:V.settings.config.showSubResources,tooManyGroups:!(!("myGroups"===V.parameters.section&&V.results.user.groups&&175<V.results.user.groups.length)||V.parameters.filter.group)}},function(){return{}})(O)},function(Q,T){Q.exports=I},function(Q,T,O){var Z=O(1);Q=O(17);var na=O(543),ia=O.n(na),X=O(123),ha=O(291);O=function(V){function ea(){return null!==V&&V.apply(this,arguments)||this}return Object(Z.d)(ea,V),ea.prototype.render=function(U){var ka=this,
ma=Object(X.a)(this.props.stateTree),sa=this.props.stateTree.ui.pagination.displayItems.map(function(pa){return U(ia.a,{key:pa.id,item:pa,organization:"public_authoritative"===pa.contentStatus&&ka.props.stateTree.results.allOrganizations[pa.orgId]?ka.props.stateTree.results.allOrganizations[pa.orgId]:void 0,portal:ma,mainAction:ka.props.stateTree.settings.config.onSelect,mainInverseAction:ka.props.stateTree.settings.config.onDeselect,mainActionTitle:ka.props.stateTree.settings.config.mainActionTitle,
mainInverseActionTitle:ka.props.stateTree.settings.config.mainInverseActionTitle,loadOnMainAction:ka.props.stateTree.settings.config.asynchronousItemSelect,usePrimaryButtonStyle:ka.props.stateTree.settings.config.usePrimaryButtonStyle,isSelected:ka.props.stateTree.settings.config.preSelect,customActions:ka.props.stateTree.settings.config.customActions,sortField:ka.props.stateTree.parameters.sort.field})});return 0<sa.length?U("div",{key:this.props.key,class:"ib-ex-results__item-list"},sa):U(ha.a,
{key:this.props.key,text:this.props.stateTree.settings.config.noItemsFoundText||""})},ea}(Q.Component);T.a=Object(Q.connect)(function(V){return{stateTree:V}},function(){return{}})(O)},function(Q,T){Q.exports=L},function(Q,T,O){var Z=O(1);Q=function(na){function ia(){return null!==na&&na.apply(this,arguments)||this}return Object(Z.d)(ia,na),ia.prototype.render=function(X){var ha=this;return X("footer",{class:"ib__big-footer"},X("button",{class:"ib__big-footer-btn ib__big-footer-btn--secondary",onclick:function(){return ha.props.handleSecondaryClick()}},
this.props.secondaryText),X("button",{class:"ib__big-footer-btn ib__big-footer-btn--primary",onclick:function(){var V,ea;return null===(ea=(V=ha.props).handlePrimaryClick)||void 0===ea?void 0:ea.call(V)}},this.props.primaryText))},ia}(O(17).Component);T.a=Q},function(Q,T,O){var Z=O(1),na=O(37);Q=O(17);var ia=O(349),X=O(547),ha=O(548),V=O(546),ea=O(563);O=function(U){function ka(ma){ma=U.call(this,ma)||this;return ma.handleCloseDetailsPane=ma.handleCloseDetailsPane.bind(ma),ma}return Object(Z.d)(ka,
U),ka.prototype.render=function(ma){var sa=this.props.detailsPaneType,pa=this.props.sidePanelType,Aa=this.props.closing,za={"ib-side__container--fade-in":!Aa,"ib-side__container--fade-out":Aa,"ib-side__container--flyout":"flyout"===sa,"ib-side__container--flyover":"flyover"===sa};sa={"ib-side__content--flyout":"flyout"===sa,"ib-side__content--in-right":!Aa&&"flyout"===sa,"ib-side__content--out-left":Aa&&"flyout"===sa,"ib-side__content--flyover":"flyover"===sa,"ib-side__content--in-left":!Aa&&"flyover"===
sa,"ib-side__content--out-right":Aa&&"flyover"===sa};if("sort"===pa){var Ba=ma(V.a,{key:"sort-pane"});var ua=na.sortOptions.sort}else if("filter"===pa)Ba=ma(X.a,{key:"filter-pane"}),ua=na.filterPane.filter;else if("item"===pa&&this.props.sidePanelItem)Ba=ma(ha.a,{key:this.props.sidePanelItem.id,item:this.props.sidePanelItem});else if("hidden"===pa)return;return ma(ea.a,{key:"item"===pa&&this.props.sidePanelItem?"".concat(this.props.sidePanelItem.id):pa,containerClasses:za,contentClasses:sa,handleClose:this.handleCloseDetailsPane,
i18n:na,type:pa,title:ua},Ba)},ka.prototype.componentWillReceiveProps=function(ma){var sa=this;!this.props.closing&&ma.closing&&("item"===this.props.sidePanelType&&this.props.sidePanelItem?(ma=document.getElementById("item-".concat(this.props.sidePanelItem.id,"-card-title")))&&ma.focus():"filter"===this.props.sidePanelType?(ma=document.getElementById("filter-button"))&&ma.focus():"sort"===this.props.sidePanelType&&(ma=document.getElementById("sort-button"))&&ma.focus(),setTimeout(function(){sa.props.closeDetailsPaneImmediately()},
300))},ka.prototype.handleCloseDetailsPane=function(){this.props.closeDetailsPane()},ka}(Q.Component);T.a=Object(Q.connect)(function(U){return{detailsPaneType:U.settings.config.detailsPaneType,sidePanelType:U.ui.sidePanel.type,sidePanelItem:U.ui.sidePanel.item}},function(U){return{closeDetailsPane:function(){U(Object(ia.c)())},closeDetailsPaneImmediately:function(){U({type:ia.a})}}})(O)},function(Q,T,O){var Z=O(1),na=O(37);Q=O(17);var ia=O(277),X=O(55),ha=O(214),V=O.n(ha),ea="relevance title owner created modified numviews".split(" "),
U={myContent:["modified","title"],myFavorites:["relevance","modified","title","numviews","owner"],myGroups:["relevance","modified","title","numviews","owner"],myOrganization:["relevance","modified","title","numviews","owner"],livingAtlas:["relevance","modified","title","numviews","owner"],all:["relevance","title","owner","modified","numviews"]};O=function(ka){function ma(sa){sa=ka.call(this,sa)||this;return sa.handleChangeSortField=sa.handleChangeSortField.bind(sa),sa.handleChangeSortAsc=sa.handleChangeSortAsc.bind(sa),
sa.handleChangeSortDesc=sa.handleChangeSortDesc.bind(sa),sa}return Object(Z.d)(ma,ka),ma.prototype.render=function(sa){var pa=this,Aa=this.props.section;Aa=(U[Aa]?Object(Z.g)([],U[Aa],!0):Object(Z.g)([],ea,!0)).map(function(ua){return sa(V.a,{key:ua,name:na.sortOptions[ua],value:ua,selectedToggle:pa.props.sortField,onToggleClick:pa.handleChangeSortField})});var za=this.props.sortField,Ba=this.props.sortOrder;return sa("div",{id:"sort-pane-container",key:"sort-pane-container",class:"ib-sort-pane__container"},
sa("div",{class:"ib-sort-pane__body"},sa("h3",{id:"sort-options-title",class:"drp-sort__menu-title"},na.sortOptions.sortBy),sa("ul",{key:"sort-option-section",class:"ib-sort-pane__option-section",role:"radiogroup","aria-labelledby":"sort-options-title","aria-activedescendent":"".concat(this.props.sortField,"-option")},Aa),"relevance"!==za?sa("div",null,sa("h3",{class:"drp-sort__menu-title drp-sort__menu-direction"},na.sortOptions.sortDir),sa("ul",{key:"sort-direction-section",class:"ib-sort-pane__dir-section",
role:"radiogroup","aria-labelledby":"sort-dir-title","aria-activedescendent":"".concat(Ba,"-option")},sa(V.a,{key:"sort-asc-toggle",name:na.sortOptions.ascending[za],value:"asc",onToggleClick:this.handleChangeSortAsc,selectedToggle:Ba}),sa(V.a,{key:"sort-desc-toggle",name:na.sortOptions.descending[za],value:"desc",onToggleClick:this.handleChangeSortDesc,selectedToggle:Ba}))):null))},ma.prototype.handleChangeSortField=function(sa){this.props.changeSortField(sa);this.props.search()},ma.prototype.handleChangeSortAsc=
function(sa){"desc"===this.props.sortOrder&&(this.props.changeSortOrder("asc"),this.props.search())},ma.prototype.handleChangeSortDesc=function(sa){"asc"===this.props.sortOrder&&(this.props.changeSortOrder("desc"),this.props.search())},ma}(Q.Component);T.a=Object(Q.connect)(function(ka){return{section:ka.parameters.section,sortField:ka.parameters.sort.field,sortOrder:ka.parameters.sort.order}},function(ka){return{changeSortField:function(ma){ka(Object(ia.c)(ma))},changeSortOrder:function(ma){ka(Object(ia.d)(ma))},
search:function(ma){ka(Object(X.i)(ma))}}})(O)},function(Q,T,O){var Z=O(1);Q=O(17);var na=O(334);O=function(ia){function X(){return null!==ia&&ia.apply(this,arguments)||this}return Object(Z.d)(X,ia),X.prototype.render=function(ha){return ha("div",{id:"filter-pane-container",key:"filter-pane-container",class:"ib-filter-pane__container"},ha(na.a,{key:"filter-options"}))},X}(Q.Component);T.a=O},function(Q,T,O){var Z=O(1),na=O(37),ia=O(181);Q=O(17);var X=O(168),ha=O(123),V=O(203),ea=O.n(V),U=O(561);V=
O(549);var ka=O.n(V);V=O(550);var ma=O.n(V);V=O(551);var sa=O.n(V);V=O(552);var pa=O.n(V);V=O(553);var Aa=O.n(V);V=O(554);var za=O.n(V);V=O(555);var Ba=O.n(V);V=O(556);var ua=O.n(V);V=O(557);var Fa=O.n(V);V=O(469);var va=O.n(V);V=O(558);var xa=O.n(V);V=O(559);var Da=O.n(V);V=O(204);var Ca=O.n(V),qa=O(560),W=O(562),ba=O(144);O=function(oa){function wa(Ea){Ea=oa.call(this,Ea)||this;return Ea.handleItemDetails=Ea.handleItemDetails.bind(Ea),Ea.handleFavorites=Ea.handleFavorites.bind(Ea),Ea}return Object(Z.d)(wa,
oa),wa.prototype.render=function(Ea){if(!(this.props.stateTree.results.fullItemDetails[this.props.item.id]&&this.props.stateTree.results.users[this.props.item.owner]||this.props.stateTree.results.failedItemDetails[this.props.item.id]))return Ea(ea.a,{key:"loading-item-details"});if(this.props.stateTree.results.failedItemDetails[this.props.item.id])return Ea("div",{class:"ib-item-pane__message-container"},Ea("span",{class:"ib-results__message"},na.results.requestError));var Ga=this.props.stateTree.results.fullItemDetails[this.props.item.id],
Ja=this.props.stateTree.results.users[Ga.owner],ya=Object(ha.a)(this.props.stateTree),Ha=Ga&&this.props.stateTree.results.loadingItems[Ga.id],Ia={"ib-item-pane__fader":!0,"ib-item-pane__fader--loading":Ha},Ka=new Date(Ga.modified),Ma=new Date(Ga.created),Na=this.props.stateTree.results.allOrganizations[Ga.orgId],La="public_authoritative"===Ga.contentStatus&&Ga.orgId&&Na,Pa=!("Raster function template"===Ga.type&&Ga.owner.includes("esri_"));return[Ea("div",{class:"ib-item-pane__thumb-container",key:"ib-item-pane__thumb-container"},
Ea("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",class:"ib-item-pane__thumbnail",style:"\n                            display: block;\n                            padding: none;\n                            margin: none;\n                            background-image: url(".concat(Ga.thumbURI,");\n                            width: 15rem;\n                            height: 10rem;\n                        "),alt:""}),Ea(qa.a,{favorites:this.props.stateTree.results.user.favorites,
item:Ga,onToggleFavorite:this.handleFavorites})),Ea("div",{id:"item-pane-container",class:"ib-item-pane__container",key:"".concat(Ga.id,"-container")},Ea("div",{classes:Ia},Ea("div",{key:"item-details"},Ea("h4",{class:"ib-item-pane__title"},Ga.title,"\u00a0",Pa&&Ea(Ca.a,{key:"view-full-item-details",title:na.viewFullDetails,handleClick:this.handleItemDetails,focusable:!0},Ea("svg",{xmlns:"http://www.w3.org/2000/svg",role:"img",height:"16",width:"16",viewBox:"0 0 16 16",style:"transform: translate(0, -2px);"},
Ea("path",{d:"M1 1h8v1H2v12h12V7h1v8H1zm7.325 7.382L14 2.707V5h1V1h-4v1h2.293L7.618 7.675z"})))),Ea("span",{key:"item-owner",class:"ib-item-pane__owner-text"},Ea("img",{src:Ga.iconURI,class:"ib-item-pane__type-icon",title:Ga.displayName}),Ga.displayName," ",na.itemDetails.by,"\u00a0",Ea("a",{class:"ib-item-pane__owner-link",title:La?na.itemDetails.viewOrg:na.itemDetails.viewUser,target:"_blank",href:La?Na.orgUrl:"".concat(ya.baseUrl,"/home/user.html?user\x3d").concat(Ga.owner)},La?Na.name:Ga.owner)),
Ea("span",{key:"modified-date",class:"ib-item-pane__modified"},na.itemDetails.lastModified,": ".concat(ba.format(Ka,{selector:"date",formatLength:"long"}))),Ea("div",{class:"ib-item-pane__badges"},this.renderBadges(Ga,Ea)),Ea("div",{class:"ib-item-pane__line",style:"width: 100%; border-bottom: 1px solid #ccc"}),Ea("span",{key:"snippet",class:"ib-item-pane__snippet"},Ga.snippet?Ga.snippet:na.itemDetails.noSnippet),Ea("h5",{class:"ib-item-pane__details"},na.itemDetails.details),Ga.patchedDescription?
Ea("span",{key:"item-description",innerHTML:Ga.patchedDescription,class:"ib-item-pane__description"}):Ea("span",{key:"item-no-description",class:"ib-item-pane__description"},na.itemDetails.noDescription),Ea("h5",{class:"ib-item-pane__terms-of-use"},na.itemDetails.termsOfUse),Ga.licenseInfo?Ea("span",{key:"item-terms-of-use",innerHTML:Ga.licenseInfo,class:"ib-item-pane__license-info"}):Ea("span",{key:"item-no-terms-of-use",class:"ib-item-pane__license-info"},na.itemDetails.noTermsOfUse),Ea("h5",{class:"ib-item-pane__credits"},
na.itemDetails.attribution),Ga.accessInformation?Ea("span",{key:"item-access-information",innerHTML:Ga.accessInformation,class:"ib-item-pane__attribution"}):Ea("span",{key:"item-no-access-information",class:"ib-item-pane__attribution"},na.itemDetails.noAttribution),La?Ea("p",null,Ea("h5",{class:"ib-item-pane__pa-owner"},na.sortOptions.owner),Ea("div",{class:"ib-item-pane__pa-org"},Ea("img",{src:Na.thumbURI,alt:Na.name,class:"ib-item-pane__pa-org-thumb user-image-small-inline padding-right-half display-block js-owner-thumbnail"}),
Na.name),Ea("div",{class:"ib-item-pane__pa-managed"},Ea("span",{class:"ib-item-pane__pa-managed-label"},na.itemDetails.managedBy),Ea("div",{class:"ib-item-pane__pa-manager"},Ja.thumbURI?Ea("img",{src:Ja.thumbURI,class:"ib-item-pane__pa-managed-thumb"}):Ea(U.a,{class:"ib-item-pane__pa-managed-thumb"}),Ga.owner))):null,Ea("span",{key:"num-views",class:"ib-item-pane__num-views"},Ea("strong",null,na.itemDetails.views),": ".concat(ia.format(Ga.numViews))),Ea("span",{key:"created-date",class:"ib-item-pane__num-views"},
Ea("strong",null,na.itemDetails.created),": ".concat(ba.format(Ma,{selector:"date",formatLength:"long"}))),Ea(W.a,{baseUrl:ya.baseUrl,item:Ga}))),Ha?Ea(ea.a,{key:"item-pane-loading"}):null)]},wa.prototype.renderBadges=function(Ea,Ga){var Ja=this,ya=this.props.stateTree.settings.utils.portal.user;return Ea.badges.map(function(Ha){switch(Ha){case "authoritative":return Ga(ka.a,{altOrg:"public_authoritative"===Ea.contentStatus&&Ja.props.stateTree.results.allOrganizations[Ea.orgId]?Ja.props.stateTree.results.allOrganizations[Ea.orgId].name:
void 0});case "deprecated":return Ga(sa.a,null);case "collaboration":return Ga(ma.a,null);case "livingAtlas":return Ga(pa.a,null);case "marketplace":return Ga(Aa.a,null);case "openData":return Ga(za.a,null);case "premium":return Ga(Ba.a,{user:ya});case "subscriber":return Ga(ua.a,{user:ya});case "solution":return Ga(Fa.a,null);case "publicDataCollection":return Ga(Da.a,null);case "retiredStoryMap":return Ga(va.a,{isRetiredStoryMap:!0});case "retiredApp":return Ga(va.a,null);case "registered":return Ga(xa.a,
null)}return null})},wa.prototype.handleItemDetails=function(){var Ea=Object(ha.a)(this.props.stateTree),Ga=this.props.stateTree.ui.sidePanel.item;Ga&&window.open("".concat(Ea.baseUrl,"/home/item.html?id\x3d").concat(Ga.id),"_blank")},wa.prototype.handleFavorites=function(){var Ea=this.props.stateTree.ui.sidePanel.item,Ga=this.props.stateTree.results.user.favorites;Ea&&Ga&&Ga[Ea.id]?this.props.removeFromFavorites(Ea):Ea&&Ga&&!Ga[Ea.id]&&this.props.addToFavorites(Ea)},wa}(Q.Component);T.a=Object(Q.connect)(function(oa){return{stateTree:oa}},
function(oa){return{addToFavorites:function(wa){oa(Object(X.k)(wa))},removeFromFavorites:function(wa){oa(Object(X.m)(wa))}}})(O)},function(Q,T){Q.exports=M},function(Q,T){Q.exports=N},function(Q,T){Q.exports=P},function(Q,T){Q.exports=R},function(Q,T){Q.exports=Y},function(Q,T){Q.exports=ja},function(Q,T){Q.exports=aa},function(Q,T){Q.exports=da},function(Q,T){Q.exports=ra},function(Q,T){Q.exports=ca},function(Q,T){Q.exports=fa},function(Q,T,O){var Z=O(37);T.a=function(na,ia){var X=na.favorites;if(!X)return null;
X=X[na.item.id];return ia("button",{onclick:na.onToggleFavorite,classes:{"ib-item-pane__favorites-btn":!0,"ib-item-pane__favorites-btn--active":X}},ia("span",{class:"screen-readers-only"},X?Z.itemDetails.isFavorite:Z.itemDetails.notFavorite),ia("svg",{xmlns:"http://www.w3.org/2000/svg",role:"img",width:"32",height:"32",viewBox:"0 0 32 32"},ia("path",{d:"M16.043.367L19.813 12H32l-9.859 7.172 3.789 11.625-9.887-7.193-9.889 7.193 3.787-11.625L0 12h12.271z"})),X?Z.itemDetails.removeFromFavorites:Z.itemDetails.addToFavorites)}},
function(Q,T,O){T.a=function(Z,na){return na("div",{class:Z.class},na("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 150 150",height:"100%",width:"100%"},na("path",{id:"path3727",d:"m 52,148.35766 c -2.475,-0.18484 -10.8,-0.45343 -18.5,-0.59687 L 19.5,147.5 19.194994,142.1708 C 18.780069,134.92106 24.675201,110.99518 28,106.43495 c 2.119734,-2.90738 3.184268,-3.40501 11.820245,-5.52557 14.015326,-3.441464 12.799724,-4.197584 21.447495,13.34062 4.135724,8.3875 8.291761,16.93353 9.235637,18.99118 0.943876,2.05765 2.065683,3.52516 2.492905,3.26112 0.427221,-0.26404 4.718162,-8.47257 9.535425,-18.24118 4.817262,-9.76862 9.137298,-18.24997 9.600081,-18.847444 1.07417,-1.386813 10.747512,-0.129937 19.839562,2.577794 7.37115,2.19522 11.16896,5.44708 12.85677,11.00853 6.69283,22.05341 7.84944,32.33763 3.67188,32.64913 -1.1,0.082 -6.95,0.62022 -13,1.19598 -11.23048,1.06878 -55.365488,2.12006 -63.5,1.51255 z m 20,-17.37753 c 0,-0.56093 -1.107043,-2.77354 -2.460095,-4.91692 -1.353052,-2.14337 -2.772339,-5.17193 -3.153972,-6.73012 C 66.0043,117.77489 65.377929,116.275 64.993998,116 c -0.383932,-0.275 -2.303235,-3.7147 -4.265118,-7.64379 -2.997369,-6.00286 -3.476188,-7.83951 -2.998076,-11.499996 0.312942,-2.395918 0.973535,-4.62137 1.467986,-4.94545 0.494451,-0.32408 2.959173,0.453755 5.47716,1.728522 2.517988,1.274768 6.181951,2.618632 8.142141,2.986366 3.484798,0.653752 4.619546,0.375908 12.565461,-3.076659 3.34951,-1.455391 3.803432,-1.47865 3.300927,-0.169142 -0.398242,1.037802 -0.124039,1.342318 0.866449,0.962233 C 92.04719,93.384178 91.914975,93.739792 82.242203,114 79.747646,119.225 76.801902,125.4125 75.696105,127.75 73.817142,131.72187 72,133.30992 72,130.98013 Z M 70.29923,93.893977 C 68.538807,93.384871 66.824749,92.525456 66.490213,91.984165 66.155677,91.442874 65.211939,91 64.393017,91 c -1.502433,0 -6.302871,-4.784056 -6.361416,-6.339707 -0.01738,-0.461839 -0.887451,-1.586839 -1.933489,-2.5 C 50.802328,77.537229 48.879628,58.999483 52.441931,46.909154 54.720369,39.176219 55.37403,38.7615 68,37.038257 72.675,36.400195 79.341587,35.480846 82.814638,34.995261 86.28769,34.509675 89.663822,34.317502 90.317154,34.568209 91.693801,35.096478 97,43.197939 97,44.771524 c 0,0.583995 0.454771,1.2134 1.010602,1.398677 1.503878,0.501292 2.439668,18.675087 1.175539,22.829799 -2.185196,7.181885 -3.87855,11.047986 -5.800118,13.242269 -1.087422,1.241752 -2.586953,3.479873 -3.332291,4.973602 -0.745338,1.493728 -1.684447,2.51236 -2.086909,2.263625 -0.402462,-0.248735 -1.79714,0.347041 -3.099286,1.323947 -5.368623,4.027692 -8.806128,4.756927 -14.568307,3.090534 z M 47.015313,60.25 C 47.006891,59.5625 46.333573,59 45.519052,59 43.283015,59 42.644845,54.707151 43.38075,44.616059 44.166271,33.844619 44.896556,30 46.15707,30 c 1.316225,0 7.090208,-4.174219 8.645304,-6.25 0.721069,-0.9625 1.890773,-1.75 2.599342,-1.75 0.70857,0 2.102798,-0.9 3.098284,-2 1.625205,-1.795832 3.079967,-2 14.250617,-2 14.795202,0 15.235286,0.195009 24.330624,10.781341 1.078019,1.254737 2.667599,4.179737 3.532399,6.5 0.86481,2.320262 1.94546,5.118659 2.40144,6.218659 1.51768,3.661163 2.10273,13.653118 0.88532,15.120015 -2.35184,2.833785 -3.74627,1.464615 -4.45065,-4.370015 -0.68461,-5.670783 -5.785078,-16.623556 -8.973492,-19.269704 -1.58533,-1.315707 -2.444358,-1.239512 -24.630153,2.184678 -15.102822,2.330992 -14.275738,1.799234 -17.29574,11.119973 -0.852701,2.631721 -1.557256,6.456721 -1.565678,8.5 C 48.976265,56.828226 48.533156,59.175 48,60 c -0.64625,1 -0.974479,1.083333 -0.984687,0.25 z",
fill:"#fff"})))}},function(Q,T,O){var Z=O(37);T.a=function(na,ia){var X=na.item,ha=na.baseUrl;na=Z.itemDetails.shared[X.access?X.access:X.sharing&&X.sharing.access];if(X.sharedToGroups&&0<X.sharedToGroups.length){var V=X.sharedToGroups.map(function(ea){return ia("a",{class:"ib-item-pane__group-link",href:"".concat(ha,"/home/group.html?owner\x3d").concat(ea.owner,"\x26title\x3d").concat(ea.title),key:ea.id,target:"_blank"},ea.title)}).reduce(function(ea,U,ka){return ea[ka-1]&&ea.push(", "),ea.push(U),
ea},[]);na="public"===X.access||"org"===X.access?["".concat(na,", "),V]:V}else if("shared"===X.access&&(!X.sharedToGroups||0===X.sharedToGroups.length))return null;return ia("span",{key:"shared-with",class:"ib-item-pane__shared"},ia("strong",null,Z.itemDetails.sharedWith),": ",na)}},function(Q,T,O){function Z(X){X.focus()}Q=O(204);var na=O.n(Q),ia=O(564);T.a=function(X,ha){var V=X.key,ea=X.containerClasses,U=X.contentClasses,ka=X.handleClose,ma=X.i18n,sa=X.title,pa=X.children,Aa=null;return"item"===
X.type&&(Aa=ha(ia.a,{key:"item-details-footer"})),ha("div",{key:"details-pane",classes:ea,"aria-expanded":"true"},ha("div",{key:"content-container",classes:U},ha("header",{class:"ib-side-body__header"},ha("span",{class:"ib-side-body__title"},sa),ha("div",{class:"ib-side-body__btn-container"},ha(na.a,{afterCreate:Z,focusable:!0,handleClick:ka,key:"side-panel-close-btn",title:ma.close},ha("svg",{role:"img",width:"16",height:"16",viewBox:"0 0 16 16",style:"transform: translate(0, -1px);"},ha("path",
{d:"M13.314 1.99l0.707 0.707-11.314 11.313-0.707-0.707 11.314-11.313z"}),ha("path",{d:"M2 2.697l0.707-0.707 11.313 11.314-0.707 0.707-11.313-11.314z"}))))),ha("section",{key:V,class:"ib-side-body__content"},pa),Aa))}},function(Q,T,O){var Z=O(1);Q=O(17);var na=O(98),ia=O(417);O=function(X){function ha(V){V=X.call(this,V)||this;return V.handleAddBtnClick=V.handleAddBtnClick.bind(V),V.handleCustomActionClick=V.handleCustomActionClick.bind(V),V}return Object(Z.d)(ha,X),ha.prototype.render=function(V){var ea=
this,U=this.props.stateTree.ui.sidePanel.item,ka=U&&!!this.props.stateTree.results.selectedItems[U.id],ma={"ib-item-pane__btn--disabled":U&&!!this.props.stateTree.results.loadingItems[U.id]},sa=Object(Z.a)(Object(Z.a)({},ma),{"ib-item-pane__btn--active":ka}),pa=this.props.stateTree.settings.config.customActions.filter(function(Aa){return Aa.allowed(U||{})});return V("footer",{class:"ib-item-pane__footer"},this.props.stateTree.settings.config.disableMainAction?null:V("button",{key:"select-btn",class:"ib-item-pane__select-btn",
classes:sa,onclick:this.handleAddBtnClick},ka?this.props.stateTree.settings.config.mainInverseActionTitle:this.props.stateTree.settings.config.mainActionTitle),pa.map(function(Aa){return V("button",{key:"usage",class:"ib-item-pane__btn",classes:ma,value:Aa.name,onclick:ea.handleCustomActionClick},Aa.name)}))},ha.prototype.handleAddBtnClick=function(){var V=this.props.stateTree.ui.sidePanel.item;V&&(this.props.stateTree.results.selectedItems[V.id]?this.props.deselectItem(V):this.props.selectItem(V))},
ha.prototype.handleCustomActionClick=function(V){var ea=this.props.stateTree.ui.sidePanel.item;ea&&this.props.customAction(V.target.value,ea)},ha}(Q.Component);T.a=Object(Q.connect)(function(X){return{stateTree:X}},function(X){return{deselectItem:function(ha){X(Object(na.o)(ha))},selectItem:function(ha){X(Object(na.r)(ha))},customAction:function(ha,V){X(Object(ia.c)(ha,V))}}})(O)},function(Q,T,O){var Z=O(1),na=O(37);Q=O(17);var ia=O(566),X=O(204),ha=O.n(X);O=function(V){function ea(){return null!==
V&&V.apply(this,arguments)||this}return Object(Z.d)(ea,V),ea.prototype.render=function(U){var ka=U("div",{class:"ib-header__spacer"});this.props.showBackBtn&&(ka=U(ha.a,{handleClick:this.props.onBack,key:"main-back-btn",title:na.back,focusable:!0},U("svg",{role:"img",width:"16",height:"16",viewBox:"0 0 16 16",style:"transform: translate(0, -1px);"},U("path",{d:"M8 1.288l-7.212 7.212 7.212 7.212v-1.414l-5.288-5.297h13.288v-0.99h-13.307l5.307-5.307z"}))));var ma=U("div",{class:"ib-header__spacer"});
return this.props.showCloseBtn&&(ma=U(ha.a,{key:"main-close-btn",title:na.close,focusable:!0,handleClick:this.props.onBack},U("svg",{role:"img",width:"16",height:"16",viewBox:"0 0 32 32"},U("path",{d:"M31.047 28h-5l-12-12 12-12h5l-12 12 12 12zm-26-12l12-12h-5l-12 12 12 12h5l-12-12z"})))),U("div",{classes:{ib__header:!0},key:"header"},U("div",{key:"section-title-container",class:"ib-header__search-section"},ka,U(ia.a,{key:"section-dropdown"}),ma))},ea}(Q.Component);T.a=Object(Q.connect)(function(V){return{showBackBtn:V.settings.config.showBackBtn,
showCloseBtn:V.settings.config.showCloseBtn,onBack:function(){V.settings.config.onBack()}}},function(){return{}})(O)},function(Q,T,O){var Z=O(1),na=O(37);Q=O(17);var ia=O(275),X=O(55),ha=O(363),V=O.n(ha);ha=O(204);var ea=O.n(ha);O=function(U){function ka(ma){ma=U.call(this,ma)||this;var sa=(ma.props.portal.user?ma.props.baseSections:ma.props.baseSections.filter(function(pa){return"livingAtlas"===pa||"all"===pa})).map(function(pa){return{value:pa,text:na.header.sectionTitles[pa]}});return ma.props.customSections.forEach(function(pa){var Aa=
{value:pa.name,text:pa.name};pa.addToFront?sa.splice(0,0,Aa):sa.push(Aa)}),ma.state={options:sa},ma.handleOptionSelect=ma.handleOptionSelect.bind(ma),ma}return Object(Z.d)(ka,U),ka.prototype.render=function(ma){var sa=this.props.section,pa=na.header.sectionTitles[sa];return 2>this.state.options.length||this.props.replaceSectionDropdownWithTitle?ma("h3",{id:"ib-dialog-title",class:"ib-header__dialog-title"},this.props.dialogTitle):ma(V.a,{key:"section-dropdown-base",options:this.state.options,onSelect:this.handleOptionSelect,
selectedOptionValue:this.props.section},ma("h3",{key:"search-".concat(sa,"-dropdown"),id:"section-dropdown-toggle",class:"ib-section-dropdown__toggle"},pa||sa,"\u00a0",ma("span",{class:"btn-svg__button-noevent flex"},ma(ea.a,{key:"section-dropdown-button"},ma("svg",{role:"img",width:"12",height:"12",viewBox:"0 0 16 16"},ma("path",{d:"M1.5,4 L8,11 L14.5,4 C11.893,4 4.101,4 1.5,4 Z"}))))))},ka.prototype.handleOptionSelect=function(ma){this.props.changeSearchSection(ma);this.props.search(!0)},ka}(Q.Component);
T.a=Object(Q.connect)(function(U){return{baseSections:U.settings.config.baseSections,customSections:U.settings.config.customSections,portal:U.settings.utils.portal,replaceSectionDropdownWithTitle:!!U.settings.config.replaceSectionDropdownWithTitle,dialogTitle:U.settings.config.dialogTitle,section:U.parameters.section}},function(U){return{changeSearchSection:function(ka){U(Object(ia.b)(ka))},search:function(ka){U(Object(X.i)(ka))}}})(O)},function(Q,T,O){var Z=O(1),na=O(37),ia=O(181);Q=O(17);var X=
O(272),ha=O.n(X),V=O(401),ea=O(55),U=O(393),ka=O(392),ma=O(349),sa=O(767),pa=O(768);O=function(Aa){function za(Ba){Ba=Aa.call(this,Ba)||this;return Ba.handleSearchChange=Ba.handleSearchChange.bind(Ba),Ba.handleSearchKeyDown=Ba.handleSearchKeyDown.bind(Ba),Ba.handleListClick=Ba.handleListClick.bind(Ba),Ba.handleTableClick=Ba.handleTableClick.bind(Ba),Ba.handleSortClick=Ba.handleSortClick.bind(Ba),Ba.handleFilterClick=Ba.handleFilterClick.bind(Ba),Ba}return Object(Z.d)(za,Aa),za.prototype.render=function(Ba){var ua=
1E4<=this.props.nextTotal?na.itemLimitReached.replace("${limit}",ia.format(1E4)):ia.format(this.props.nextTotal);ua="function"==typeof this.props.replacementItemName?this.props.replacementItemName(ua):this.props.replacementItemName?"".concat(ua," ").concat(this.props.replacementItemName):"".concat(na.resultCount,": ").concat(ua);var Fa=na.header.sectionTitles[this.props.section];Fa=this.props.placeholderText?this.props.placeholderText:"".concat(na.search," ").concat(Fa||this.props.section);var va=
{"ib-input-area__result-bar-container":!0,"ib-input-area__result-bar-container--solo":"subscription"===this.props.section};return Ba("div",null,Ba("div",{key:"search-input-area",class:"ib__input-area"},"subscription"!==this.props.section?Ba("div",{key:"search-bar-container",class:"ib-input-area__search-bar"},Ba("input",{id:"item-browser-search-input",class:"ib-input-area__search-input",type:"search",oninput:this.handleSearchChange,onkeydown:this.handleSearchKeyDown,placeholder:Fa,"aria-label":Fa,
value:this.props.searchString})):null,Ba("div",{classes:va},Ba("span",{class:"ib-input-area__result-count"},ua),Ba("div",{class:"ib-input-area__icon-button-container"},Ba(ha.a,{active:"table"===this.props.resultPanelType,key:"table-button",handleClick:this.handleTableClick,title:na.compactView},Ba("svg",{role:"img",width:"16px",height:"16px",viewBox:"0 0 16 16"},Ba("g",{stroke:"none","stroke-width":"1"},Ba("g",null,Ba("path",{d:"M4 14h11v1H4v-1zm0-4h11v1H4v-1zm0-3h11V6H4v1zm0-4h11V2H4v1zM3 14H1v1h2v-1zm0-4H1v1h2v-1zm0-4H1v1h2V6zm0-4H1v1h2V2z"}))))),
Ba(ha.a,{active:"list"===this.props.resultPanelType,handleClick:this.handleListClick,key:"list-button",title:na.listView},Ba("svg",{role:"img",width:"16px",height:"16px",viewBox:"0 0 16 16"},Ba("g",{stroke:"none","stroke-width":"1"},Ba("g",null,Ba("path",{d:"M7 13h8v1H7zm-2-1H2v3h3zm2-8h8V3H7zm0 5h8V8H7zM5 2H2v3h3zm0 5H2v3h3z"}))))),"subscription"!==this.props.section?[Ba("div",{key:"spacer",class:"ib-input-area__spacer"}),Ba(ha.a,{active:"filter"===this.props.sidePanelType,handleClick:this.handleFilterClick,
key:"filter-button",title:"filter"===this.props.sidePanelType?na.close:na.filterPane.filter},Ba("svg",{role:"img",viewBox:"0 0 16 16",width:"16px",height:"16px"},Ba("path",{d:"M3 8h1v1H3v7H2V9H1V8h1V0h1zm6-8H8v4H7v1h1v11h1V5h1V4H9zm6 12V0h-1v12h-1v1h1v3h1v-3h1v-1z"}))),Ba(ha.a,{active:"sort"===this.props.sidePanelType,handleClick:this.handleSortClick,key:"sort-button",title:"sort"===this.props.sidePanelType?na.close:na.sortOptions.sort},Ba("svg",{role:"img",width:"16px",height:"16px",viewBox:"0 0 16 16"},
Ba("g",{stroke:"none","stroke-width":"1"},Ba("g",null,Ba("path",{d:"M1,1 L15,1 L15,2 L1,2 L1,1 Z M4,5 L15,5 L15,6 L4,6 L4,5 Z M7,9 L15,9 L15,10 L7,10 L7,9 Z M11,13 L15,13 L15,14 L11,14 L11,13 Z"})))))]:null))),Ba(V.a,{key:"active-filters",theme:"dark"}))},za.prototype.handleSearchChange=function(Ba){this.props.changeSearchString(Ba.target.value);""===Ba.target.value&&""!==this.props.previousSearchString&&this.props.search(!0)},za.prototype.handleSearchKeyDown=function(Ba){"Enter"===Ba.key&&this.props.search(!0)},
za.prototype.handleTableClick=function(Ba){Ba.preventDefault();"list"===this.props.resultPanelType&&this.props.changeResultDisplay()},za.prototype.handleListClick=function(Ba){Ba.preventDefault();"table"===this.props.resultPanelType&&this.props.changeResultDisplay()},za.prototype.handleFilterClick=function(Ba){Ba.preventDefault();"filter"===this.props.sidePanelType?this.props.closeDetailsPane():this.props.viewFilters()},za.prototype.handleSortClick=function(Ba){Ba.preventDefault();"sort"===this.props.sidePanelType?
this.props.closeDetailsPane():this.props.viewSort()},za}(Q.Component);T.a=Object(Q.connect)(function(Aa){return{nextTotal:Aa.parameters.nextQuery.total,placeholderText:Aa.settings.config.searchPlaceholderText,previousSearchString:Aa.parameters.searchString.previous,replacementItemName:Aa.settings.config.itemName,resultPanelType:Aa.ui.resultPanel.display,searchString:Aa.parameters.searchString.current,sidePanelType:Aa.ui.sidePanel.type,section:Aa.parameters.section}},function(Aa){return{search:function(za){Aa(Object(ea.i)(za))},
changeResultDisplay:function(){Aa({type:U.a})},changeSearchString:function(za){Aa(Object(ka.b)(za))},closeDetailsPane:function(){Aa(Object(ma.c)())},viewFilters:function(){Aa(Object(sa.b)())},viewSort:function(){Aa(Object(pa.b)())}}})(O)},function(Q,T,O){var Z=O(1),na=O(37);Q=O(17);var ia=O(55),X=O(569),ha=O(570),V=O(203),ea=O.n(V);O=function(U){function ka(){var ma=null!==U&&U.apply(this,arguments)||this;return ma.handleScroll=function(sa){.99<=(sa.target.scrollTop+sa.target.offsetHeight)/sa.target.scrollHeight&&
"loadingNext"!==ma.props.resultPanelStatus&&-1!==ma.props.nextStart&&ma.props.loadMoreContent()},ma.handleCreate=function(sa){setTimeout(function(){sa.scrollHeight<=sa.clientHeight&&"loadingNext"!==ma.props.resultPanelStatus&&-1!==ma.props.nextStart&&ma.props.loadMoreContent(50)},10)},ma}return Object(Z.d)(ka,U),ka.prototype.render=function(ma){var sa=this.props,pa=sa.resultPanelStatus,Aa=sa.displayItems,za=sa.showSubmitButton,Ba=sa.resultPanelDisplayType;sa=sa.tooManyGroups;switch(pa){case "success":case "loadingNext":return ma(X.a,
{key:"item-list-".concat(Ba),i18n:na,showSubmitButton:za,results:Aa,loadingNext:"loadingNext"===pa,handleScroll:this.handleScroll,handleCreate:this.handleCreate},ma(ha.a,{key:"result-items"}));case "loading":return ma("div",{key:"loading-items",class:"ib__results"},ma(ea.a,{key:"item-loader",text:na.results.loadingItems}));case "empty":return ma("div",{key:"empty-state",class:"ib__results"},ma("div",{class:"ib-results__message-container"},ma("span",{class:"ib-results__message"},na.results.empty)))}return sa?
ma("div",{key:"too-many-groups",class:"ib__results"},ma("div",{class:"ib-results__message-container"},ma("span",{class:"ib-results__message"},na.results.tooManyGroups))):ma("div",{key:"request-error",class:"ib__results"},ma("div",{class:"ib-results__message-container"},ma("span",{class:"ib-results__message"},na.results.requestError)))},ka}(Q.Component);T.a=Object(Q.connect)(function(U){return{displayItems:U.results.displayItems,nextStart:U.parameters.nextQuery.nextStart,showSubmitButton:U.settings.config.showSubmitButton,
resultPanelDisplayType:U.ui.resultPanel.display,resultPanelStatus:U.ui.resultPanel.status,tooManyGroups:!(!("myGroups"===U.parameters.section&&U.results.user.groups&&175<U.results.user.groups.length)||U.parameters.filter.group)}},function(U){return{loadMoreContent:function(ka){U(Object(ia.h)(ka))}}})(O)},function(Q,T,O){Q=O(203);var Z=O.n(Q);T.a=function(na,ia){var X=na.key,ha=na.i18n,V=na.loadingNext,ea=na.handleScroll,U=na.handleCreate,ka=na.children;return 0<na.results.length?ia("div",{key:X,class:"ib-results__item-list",
onscroll:ea,afterCreate:U},ka,V?ia("div",{class:"ib-results__load-container"},ia(Z.a,{key:"more-items-loader"})):null):ia("div",{key:"no-items-found",class:"ib-results__item-list ib-results__item-list--none"},ia("span",{style:"font-size: 0.9375rem;"},ha.results.noItemsFound))}},function(Q,T,O){var Z=O(1);Q=O(17);var na=O(123),ia=O(349),X=O(342),ha=O(98),V=O(417),ea=O(571),U=O.n(ea);ea=O(572);var ka=O.n(ea);O=function(ma){function sa(pa){pa=ma.call(this,pa)||this;return pa.handleShowItemDetails=pa.handleShowItemDetails.bind(pa),
pa.handleSelectionClick=pa.handleSelectionClick.bind(pa),pa.handleCustomActionClick=pa.handleCustomActionClick.bind(pa),pa.startResizePoll=pa.startResizePoll.bind(pa),pa.resizePoll=pa.resizePoll.bind(pa),pa}return Object(Z.d)(sa,ma),sa.prototype.render=function(pa){var Aa=this.props.stateTree.results;if(0<Aa.displayItems.length)return pa("div",{key:"item-wrapper",id:"resize-detector",afterCreate:this.startResizePoll},this.mapItemsToChildren(Aa.displayItems,pa))},sa.prototype.mapItemsToChildren=function(pa,
Aa){var za=this;return pa.map(function(Ba){var ua=Object(na.a)(za.props.stateTree);if("list"===za.props.stateTree.ui.resultPanel.display){var Fa="public_authoritative"===Ba.contentStatus&&za.props.stateTree.results.allOrganizations[Ba.orgId]?za.props.stateTree.results.allOrganizations[Ba.orgId]:void 0;return Aa(U.a,{constrained:za.state.constrained,key:"".concat(Ba.id,"-card"),item:Ba,loadingItems:za.props.stateTree.results.loadingItems,selectedItems:za.props.stateTree.results.selectedItems,activeItem:za.props.stateTree.ui.sidePanel.item,
portal:ua,onShowItemDetails:za.handleShowItemDetails,onSelectionClick:za.handleSelectionClick,customActions:za.props.stateTree.settings.config.customActions,onCustomActionClick:za.handleCustomActionClick,disableMainAction:za.props.stateTree.settings.config.disableMainAction,sortField:za.props.stateTree.parameters.sort.field,hideEllipses:za.props.stateTree.settings.config.hideEllipses,organization:Fa})}return Aa(ka.a,{key:"".concat(Ba.id,"-cardrow"),item:Ba,loadingItems:za.props.stateTree.results.loadingItems,
selectedItems:za.props.stateTree.results.selectedItems,activeItem:za.props.stateTree.ui.sidePanel.item,portal:ua,onShowItemDetails:za.handleShowItemDetails,onSelectionClick:za.handleSelectionClick,customActions:za.props.stateTree.settings.config.customActions,onCustomActionClick:za.handleCustomActionClick,disableMainAction:za.props.stateTree.settings.config.disableMainAction,sortField:za.props.stateTree.parameters.sort.field,hideEllipses:za.props.stateTree.settings.config.hideEllipses})})},sa.prototype.handleShowItemDetails=
function(pa){var Aa=this.props.stateTree.ui.sidePanel;Aa.item&&Aa.item.id===pa.id?this.props.closeDetailsPane():this.props.viewItemDetails(pa)},sa.prototype.handleSelectionClick=function(pa){this.props.stateTree.results.selectedItems[pa.id]?this.props.deselectItem(pa):this.props.selectItem(pa)},sa.prototype.handleCustomActionClick=function(pa,Aa){this.props.customAction(pa,Aa)},sa.prototype.startResizePoll=function(pa){this.resizePoll(pa)},sa.prototype.resizePoll=function(pa){var Aa=this;pa&&0<pa.clientWidth&&
(300>pa.clientWidth&&!this.state.constrained?this.setState({constrained:!0}):300<pa.clientWidth&&this.state.constrained&&this.setState({constrained:!1}),setTimeout(function(){Aa.resizePoll(pa)},250))},sa}(Q.Component);T.a=Object(Q.connect)(function(ma){return{stateTree:ma}},function(ma){return{closeDetailsPane:function(){ma(Object(ia.c)())},viewItemDetails:function(sa){ma(Object(X.b)(sa))},deselectItem:function(sa){ma(Object(ha.o)(sa))},selectItem:function(sa){ma(Object(ha.r)(sa))},customAction:function(sa,
pa){ma(Object(V.c)(sa,pa))}}})(O)},function(Q,T){Q.exports=la},function(Q,T){Q.exports=ta},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(Q,T,O){O.d(T,"a",function(){return Z});O.d(T,"b",function(){return na});var Z="VIEW_FILTERS",na=function(){return{type:Z}}},function(Q,T,O){O.d(T,"a",function(){return Z});O.d(T,"b",function(){return na});var Z=
"VIEW_SORT",na=function(){return{type:Z}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(Q,T,O){O.r(T);var Z=O(1);Q=O(17);var na=O(398);O.d(T,"defaultConfig",function(){return na.a});O.d(T,"reducers",function(){return na.c});O.d(T,"initialState",function(){return na.b});var ia=O(98);O.d(T,"SELECT_ITEM_SINGLE",function(){return ia.j});O.d(T,"SELECT_ITEM",function(){return ia.g});O.d(T,"DESELECT_ITEM",function(){return ia.c});O.d(T,"SELECT_ITEM_ASYNC",function(){return ia.h});O.d(T,
"SELECT_ITEM_ASYNC_FAILED",function(){return ia.i});var X=O(55);O.d(T,"search",function(){return X.i});var ha=O(435);O.d(T,"updateExtent",function(){return ha.c});var V=O(342);O.d(T,"viewItemDetails",function(){return V.b});var ea=O(275);O.d(T,"changeSearchSection",function(){return ea.b});var U=O(565),ka=O(567),ma=O(568),sa=O(545),pa=O(468);O=function(Aa){function za(){return null!==Aa&&Aa.apply(this,arguments)||this}return Object(Z.d)(za,Aa),za.prototype.render=function(Ba){var ua=this.props.layoutMode,
Fa={ib__container:!0,"ib__container--expanded":"fullscreen"===ua,"ib__container--adjustable":"adjustable"===ua};switch(ua){case "fullscreen":return Ba(pa.a,{key:"big-browser",containerClasses:Fa});case "adjustable":return Ba("div",null,Ba(pa.a,{key:"big-browser",containerClasses:Fa}),Ba("div",{class:"ib__container--underlay"}));default:return Ba("div",{id:"item-browser-container",classes:Fa},Ba(sa.a,{key:"side-panel",closing:this.props.sidePanelClosing}),Ba(U.a,{key:"header"}),Ba(ka.a,{key:"input-area"}),
Ba(ma.a,{key:"result-panel"}))}},za}(Q.Component);T.default=Object(Q.connect)(function(Aa){return{layoutMode:Aa.settings.config.layoutMode,expanded:Aa.ui.expanded.maximized,sidePanelClosing:Aa.ui.sidePanel.closing}},function(){return{}})(O)}])})},"arcgis-components/Modals/Overlay":function(){define(["../Component"],function(S){return function(J){function f(h){if(c[h])return c[h].exports;var d=c[h]={i:h,l:!1,exports:{}};return J[h].call(d.exports,d,d.exports,f),d.l=!0,d.exports}var c={};return f.m=
J,f.c=c,f.d=function(h,d,b){f.o(h,d)||Object.defineProperty(h,d,{enumerable:!0,get:b})},f.r=function(h){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"});Object.defineProperty(h,"__esModule",{value:!0})},f.t=function(h,d){if((1&d&&(h=f(h)),8&d)||4&d&&"object"==typeof h&&h&&h.__esModule)return h;var b=Object.create(null);if(f.r(b),Object.defineProperty(b,"default",{enumerable:!0,value:h}),2&d&&"string"!=typeof h)for(var a in h)f.d(b,a,function(e){return h[e]}.bind(null,
a));return b},f.n=function(h){var d=h&&h.__esModule?function(){return h.default}:function(){return h};return f.d(d,"a",d),d},f.o=function(h,d){return Object.prototype.hasOwnProperty.call(h,d)},f.p="",f(f.s=837)}({1:function(J,f,c){function h(g,m){function v(){this.constructor=g}if("function"!=typeof m&&null!==m)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");t(g,m);g.prototype=null===m?Object.create(m):(v.prototype=m.prototype,new v)}function d(g,m){var v={},
p;for(p in g)Object.prototype.hasOwnProperty.call(g,p)&&0>m.indexOf(p)&&(v[p]=g[p]);if(null!=g&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(p=Object.getOwnPropertySymbols(g);l<p.length;l++)0>m.indexOf(p[l])&&Object.prototype.propertyIsEnumerable.call(g,p[l])&&(v[p[l]]=g[p[l]])}return v}function b(g,m,v,p){var l,n=arguments.length,k=3>n?m:null===p?p=Object.getOwnPropertyDescriptor(m,v):p;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)k=Reflect.decorate(g,m,v,p);else for(var r=
g.length-1;0<=r;r--)(l=g[r])&&(k=(3>n?l(k):3<n?l(m,v,k):l(m,v))||k);return 3<n&&k&&Object.defineProperty(m,v,k),k}function a(g,m,v,p){return new (v||(v=Promise))(function(l,n){function k(x){try{w(p.next(x))}catch(D){n(D)}}function r(x){try{w(p.throw(x))}catch(D){n(D)}}function w(x){var D;x.done?l(x.value):(D=x.value,D instanceof v?D:new v(function(G){G(D)})).then(k,r)}w((p=p.apply(g,m||[])).next())})}function e(g,m){function v(w){return function(x){return function(D){if(p)throw new TypeError("Generator is already executing.");
for(;k&&(k=0,D[0]&&(r=0)),r;)try{if(p=1,l&&(n=2&D[0]?l.return:D[0]?l.throw||((n=l.return)&&n.call(l),0):l.next)&&!(n=n.call(l,D[1])).done)return n;switch(l=0,n&&(D=[2&D[0],n.value]),D[0]){case 0:case 1:n=D;break;case 4:return r.label++,{value:D[1],done:!1};case 5:r.label++;l=D[1];D=[0];continue;case 7:D=r.ops.pop();r.trys.pop();continue;default:if(!(n=r.trys,(n=0<n.length&&n[n.length-1])||6!==D[0]&&2!==D[0])){r=0;continue}if(3===D[0]&&(!n||D[1]>n[0]&&D[1]<n[3]))r.label=D[1];else if(6===D[0]&&r.label<
n[1])r.label=n[1],n=D;else if(n&&r.label<n[2])r.label=n[2],r.ops.push(D);else{n[2]&&r.ops.pop();r.trys.pop();continue}}D=m.call(g,r)}catch(G){D=[6,G],l=0}finally{p=n=0}if(5&D[0])throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}([w,x])}}var p,l,n,k,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return k={next:v(0),throw:v(1),return:v(2)},"function"==typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k}function q(g,m,v){if(v||2===arguments.length)for(var p,l=
0,n=m.length;l<n;l++)!p&&l in m||(p||(p=Array.prototype.slice.call(m,0,l)),p[l]=m[l]);return g.concat(p||Array.prototype.slice.call(m))}c.d(f,"d",function(){return h});c.d(f,"a",function(){return u});c.d(f,"f",function(){return d});c.d(f,"c",function(){return b});c.d(f,"b",function(){return a});c.d(f,"e",function(){return e});c.d(f,"g",function(){return q});var t=function(g,m){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,p){v.__proto__=p}||function(v,p){for(var l in p)Object.prototype.hasOwnProperty.call(p,
l)&&(v[l]=p[l])})(g,m)},u=function(){return(u=Object.assign||function(g){for(var m,v=1,p=arguments.length;v<p;v++)for(var l in m=arguments[v])Object.prototype.hasOwnProperty.call(m,l)&&(g[l]=m[l]);return g}).apply(this,arguments)};Object.create;Object.create},17:function(J,f){J.exports=S},296:function(J,f,c){function h(a){return b[a.vnodeSelector]&&(!a.properties||!a.properties.disabled&&-1!==a.properties.tabindex)||a.properties&&a.properties.tabindex&&-1<parseInt(a.properties.tabindex,10)}var d=
c(1),b={a:!0,area:!0,input:!0,select:!0,textarea:!0,button:!0,iframe:!0};J=function(a){function e(q){q=a.call(this,q)||this;return q.registerFirstFocusable=q.registerFirstFocusable.bind(q),q.registerLastFocusable=q.registerLastFocusable.bind(q),q.handleFocusChange=q.handleFocusChange.bind(q),q}return Object(d.d)(e,a),e.prototype.render=function(){var q=this.findFirstFocusable(this.props.children),t=this.findLastFocusable(this.props.children);return q&&t&&(q.properties?q.properties.afterCreate=this.registerFirstFocusable:
q.properties={afterCreate:this.registerFirstFocusable},t.properties?t.properties.afterCreate=this.registerLastFocusable:t.properties={afterCreate:this.registerLastFocusable}),this.props.children},e.prototype.findFirstFocusable=function(q){if(q)for(var t=0;t<q.length;t++){var u=q[t];if(h(u)||u.children&&(u=this.findFirstFocusable(u.children)))return u}},e.prototype.findLastFocusable=function(q){if(q)for(var t=q.length-1;0<=t;t--){var u=q[t];if(h(u)||u.children&&(u=this.findLastFocusable(u.children)))return u}},
e.prototype.registerFirstFocusable=function(q){this.firstFocusableElement&&this.firstFocusableElement!==q&&this.firstFocusableElement.removeEventListener("keydown",this.handleFocusChange);q.addEventListener("keydown",this.handleFocusChange);this.firstFocusableElement=q;setTimeout(function(){q&&q.focus()},10)},e.prototype.registerLastFocusable=function(q){this.lastFocusableElement&&this.lastFocusableElement!==q&&this.lastFocusableElement.removeEventListener("keydown",this.handleFocusChange);this.lastFocusableElement=
q;this.lastFocusableElement.addEventListener("keydown",this.handleFocusChange)},e.prototype.handleFocusChange=function(q){"Tab"!==q.key&&9!==q.keyCode||(q.shiftKey?document.activeElement===this.firstFocusableElement&&this.lastFocusableElement&&(this.lastFocusableElement.focus(),q.preventDefault()):document.activeElement===this.lastFocusableElement&&this.firstFocusableElement&&(this.firstFocusableElement.focus(),q.preventDefault()))},e}(c(17).Component);f.a=J},837:function(J,f,c){c.r(f);var h=c(1);
J=c(17);var d=c(296);c=function(b){function a(){return null!==b&&b.apply(this,arguments)||this}return Object(h.d)(a,b),a.prototype.componentWillReceiveProps=function(e){!1!==this.props.scrollable&&!1===e.scrollable&&(e=document.getElementsByClassName("mod__overlay-container"),e[0]&&(e[0].scrollTop=0))},a.prototype.render=function(e){var q={"mod__overlay-container":!0,"mod__overlay-container--adjustable":this.props.adjustable,"mod__overlay-container--closing":this.props.closing,"mod__overlay-container--no-scroll":!1===
this.props.scrollable,"mod__overlay-container--slide-left":"left"===this.props.slide,"mod__overlay-container--slide-right":"right"===this.props.slide,"mod__overlay-container--size-small":"small"===this.props.size||"large"===this.props.size,"mod__overlay-container--size-large":"large"===this.props.size,"mod__overlay-container--flex":this.props.flex},t=Object(h.a)({role:"dialog"},this.props.headerId?{"aria-describedby":this.props.headerId}:{});return e(d.a,{key:"overlay-focus-trap"},e("div",Object(h.a)({classes:q,
key:this.props.key},t),this.props.children))},a}(J.Component);f.default=c}})})},"arcgis-components/Navigation/TabNav":function(){define(["../Component","../Buttons/SvgButton","../Dropdowns/TextOptionDropdown"],function(S,J,f){return function(c){function h(b){if(d[b])return d[b].exports;var a=d[b]={i:b,l:!1,exports:{}};return c[b].call(a.exports,a,a.exports,h),a.l=!0,a.exports}var d={};return h.m=c,h.c=d,h.d=function(b,a,e){h.o(b,a)||Object.defineProperty(b,a,{enumerable:!0,get:e})},h.r=function(b){"undefined"!=
typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});Object.defineProperty(b,"__esModule",{value:!0})},h.t=function(b,a){if((1&a&&(b=h(b)),8&a)||4&a&&"object"==typeof b&&b&&b.__esModule)return b;var e=Object.create(null);if(h.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:b}),2&a&&"string"!=typeof b)for(var q in b)h.d(e,q,function(t){return b[t]}.bind(null,q));return e},h.n=function(b){var a=b&&b.__esModule?function(){return b.default}:function(){return b};
return h.d(a,"a",a),a},h.o=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)},h.p="",h(h.s=839)}({1:function(c,h,d){function b(v,p){function l(){this.constructor=v}if("function"!=typeof p&&null!==p)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");g(v,p);v.prototype=null===p?Object.create(p):(l.prototype=p.prototype,new l)}function a(v,p){var l={},n;for(n in v)Object.prototype.hasOwnProperty.call(v,n)&&0>p.indexOf(n)&&(l[n]=v[n]);if(null!=v&&"function"==
typeof Object.getOwnPropertySymbols){var k=0;for(n=Object.getOwnPropertySymbols(v);k<n.length;k++)0>p.indexOf(n[k])&&Object.prototype.propertyIsEnumerable.call(v,n[k])&&(l[n[k]]=v[n[k]])}return l}function e(v,p,l,n){var k,r=arguments.length,w=3>r?p:null===n?n=Object.getOwnPropertyDescriptor(p,l):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)w=Reflect.decorate(v,p,l,n);else for(var x=v.length-1;0<=x;x--)(k=v[x])&&(w=(3>r?k(w):3<r?k(p,l,w):k(p,l))||w);return 3<r&&w&&Object.defineProperty(p,
l,w),w}function q(v,p,l,n){return new (l||(l=Promise))(function(k,r){function w(G){try{D(n.next(G))}catch(F){r(F)}}function x(G){try{D(n.throw(G))}catch(F){r(F)}}function D(G){var F;G.done?k(G.value):(F=G.value,F instanceof l?F:new l(function(A){A(F)})).then(w,x)}D((n=n.apply(v,p||[])).next())})}function t(v,p){function l(D){return function(G){return function(F){if(n)throw new TypeError("Generator is already executing.");for(;w&&(w=0,F[0]&&(x=0)),x;)try{if(n=1,k&&(r=2&F[0]?k.return:F[0]?k.throw||
((r=k.return)&&r.call(k),0):k.next)&&!(r=r.call(k,F[1])).done)return r;switch(k=0,r&&(F=[2&F[0],r.value]),F[0]){case 0:case 1:r=F;break;case 4:return x.label++,{value:F[1],done:!1};case 5:x.label++;k=F[1];F=[0];continue;case 7:F=x.ops.pop();x.trys.pop();continue;default:if(!(r=x.trys,(r=0<r.length&&r[r.length-1])||6!==F[0]&&2!==F[0])){x=0;continue}if(3===F[0]&&(!r||F[1]>r[0]&&F[1]<r[3]))x.label=F[1];else if(6===F[0]&&x.label<r[1])x.label=r[1],r=F;else if(r&&x.label<r[2])x.label=r[2],x.ops.push(F);
else{r[2]&&x.ops.pop();x.trys.pop();continue}}F=p.call(v,x)}catch(A){F=[6,A],k=0}finally{n=r=0}if(5&F[0])throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}([D,G])}}var n,k,r,w,x={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return w={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w}function u(v,p,l){if(l||2===arguments.length)for(var n,k=0,r=p.length;k<r;k++)!n&&k in p||(n||(n=Array.prototype.slice.call(p,0,k)),
n[k]=p[k]);return v.concat(n||Array.prototype.slice.call(p))}d.d(h,"d",function(){return b});d.d(h,"a",function(){return m});d.d(h,"f",function(){return a});d.d(h,"c",function(){return e});d.d(h,"b",function(){return q});d.d(h,"e",function(){return t});d.d(h,"g",function(){return u});var g=function(v,p){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,n){l.__proto__=n}||function(l,n){for(var k in n)Object.prototype.hasOwnProperty.call(n,k)&&(l[k]=n[k])})(v,p)},m=function(){return(m=
Object.assign||function(v){for(var p,l=1,n=arguments.length;l<n;l++)for(var k in p=arguments[l])Object.prototype.hasOwnProperty.call(p,k)&&(v[k]=p[k]);return v}).apply(this,arguments)};Object.create;Object.create},17:function(c,h){c.exports=S},204:function(c,h){c.exports=J},363:function(c,h){c.exports=f},839:function(c,h,d){d.r(h);d.d(h,"slugifySectionName",function(){return t});var b=d(1);c=d(17);var a=d(363),e=d.n(a);a=d(204);var q=d.n(a),t=function(u){return"nav-tabnav-".concat(u.replace(" ","-").toLowerCase())};
d=function(u){function g(m){m=u.call(this,m)||this;return m.optionElements=[],m.handleBtnClick=m.handleBtnClick.bind(m),m.handleMobileClick=m.handleMobileClick.bind(m),m.handleKeyDown=m.handleKeyDown.bind(m),m}return Object(b.d)(g,u),g.prototype.render=function(m){var v=this;if(!(1>=this.props.options.length)){var p=this.props.options.map(function(n,k){var r=n.value;n=n.text;var w=v.props.selectedOptionValue===r;return m("button",{key:r,classes:{"nav-tabnav__btn":!0,"nav-tabnav__btn--active":w},value:r,
onclick:v.handleBtnClick,id:t(r),"aria-selected":w.toString(),role:"tab",afterCreate:function(x){x&&(v.optionElements[k]=x)}},n)}),l=this.props.options.filter(function(n){return n.value===v.props.selectedOptionValue})[0].text;return m("nav",{class:"nav-tabnav__nav",role:"tablist","aria-labelledby":"ib__big-header-title",onkeydown:this.handleKeyDown},this.props.dropdownOnly?"":p,m("div",{classes:{"nav-tabnav__mobile-menu":!0,"nav-tabnav__mobile-menu--always-available":this.props.dropdownOnly}},m(e.a,
{key:"ib-ex__section-dropdown",options:this.props.options,onSelect:this.handleMobileClick,selectedOptionValue:this.props.selectedOptionValue},m("h3",{key:"search-".concat(l,"-dropdown"),id:"section-dropdown-toggle",class:"nav-tabnav__section-dropdown-title"},m("span",{class:"nav-tabnav__section-dropdown-text"},l),m("span",{class:"btn-svg__button-noevent"},m(q.a,{key:"section-dropdown-button"},m("svg",{role:"img",width:"20",height:"20",viewBox:"0 0 16 16",fill:"#323232"},m("path",{d:"M8 11.207l-4-4V5.793l4 4 4-4v1.414z"}))))))))}},
g.prototype.handleBtnClick=function(m){m.target.value!==this.props.selectedOptionValue&&this.props.onSelect(m.target.value)},g.prototype.handleKeyDown=function(m){m=m.keyCode;var v=this.optionElements,p=v.indexOf(document.activeElement);if((39===m||37===m)&&0<=p){var l=v[p+1]||v[0];v=v[p-1]||v[v.length-1];(m=39===m?l:v)&&m.focus()}},g.prototype.handleMobileClick=function(m){m!==this.props.selectedOptionValue&&this.props.onSelect(m)},g}(c.Component);h.default=d}})})},"arcgis-components/Dropdowns/TextOptionDropdown":function(){define(["../Component",
"../Dropdowns/BasicDropdown"],function(S,J){return function(f){function c(d){if(h[d])return h[d].exports;var b=h[d]={i:d,l:!1,exports:{}};return f[d].call(b.exports,b,b.exports,c),b.l=!0,b.exports}var h={};return c.m=f,c.c=h,c.d=function(d,b,a){c.o(d,b)||Object.defineProperty(d,b,{enumerable:!0,get:a})},c.r=function(d){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"});Object.defineProperty(d,"__esModule",{value:!0})},c.t=function(d,b){if((1&
b&&(d=c(d)),8&b)||4&b&&"object"==typeof d&&d&&d.__esModule)return d;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:d}),2&b&&"string"!=typeof d)for(var e in d)c.d(a,e,function(q){return d[q]}.bind(null,e));return a},c.n=function(d){var b=d&&d.__esModule?function(){return d.default}:function(){return d};return c.d(b,"a",b),b},c.o=function(d,b){return Object.prototype.hasOwnProperty.call(d,b)},c.p="",c(c.s=804)}({1:function(f,c,h){function d(m,v){function p(){this.constructor=
m}if("function"!=typeof v&&null!==v)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");u(m,v);m.prototype=null===v?Object.create(v):(p.prototype=v.prototype,new p)}function b(m,v){var p={},l;for(l in m)Object.prototype.hasOwnProperty.call(m,l)&&0>v.indexOf(l)&&(p[l]=m[l]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(l=Object.getOwnPropertySymbols(m);n<l.length;n++)0>v.indexOf(l[n])&&Object.prototype.propertyIsEnumerable.call(m,l[n])&&
(p[l[n]]=m[l[n]])}return p}function a(m,v,p,l){var n,k=arguments.length,r=3>k?v:null===l?l=Object.getOwnPropertyDescriptor(v,p):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(m,v,p,l);else for(var w=m.length-1;0<=w;w--)(n=m[w])&&(r=(3>k?n(r):3<k?n(v,p,r):n(v,p))||r);return 3<k&&r&&Object.defineProperty(v,p,r),r}function e(m,v,p,l){return new (p||(p=Promise))(function(n,k){function r(D){try{x(l.next(D))}catch(G){k(G)}}function w(D){try{x(l.throw(D))}catch(G){k(G)}}
function x(D){var G;D.done?n(D.value):(G=D.value,G instanceof p?G:new p(function(F){F(G)})).then(r,w)}x((l=l.apply(m,v||[])).next())})}function q(m,v){function p(x){return function(D){return function(G){if(l)throw new TypeError("Generator is already executing.");for(;r&&(r=0,G[0]&&(w=0)),w;)try{if(l=1,n&&(k=2&G[0]?n.return:G[0]?n.throw||((k=n.return)&&k.call(n),0):n.next)&&!(k=k.call(n,G[1])).done)return k;switch(n=0,k&&(G=[2&G[0],k.value]),G[0]){case 0:case 1:k=G;break;case 4:return w.label++,{value:G[1],
done:!1};case 5:w.label++;n=G[1];G=[0];continue;case 7:G=w.ops.pop();w.trys.pop();continue;default:if(!(k=w.trys,(k=0<k.length&&k[k.length-1])||6!==G[0]&&2!==G[0])){w=0;continue}if(3===G[0]&&(!k||G[1]>k[0]&&G[1]<k[3]))w.label=G[1];else if(6===G[0]&&w.label<k[1])w.label=k[1],k=G;else if(k&&w.label<k[2])w.label=k[2],w.ops.push(G);else{k[2]&&w.ops.pop();w.trys.pop();continue}}G=v.call(m,w)}catch(F){G=[6,F],n=0}finally{l=k=0}if(5&G[0])throw G[1];return{value:G[0]?G[1]:void 0,done:!0}}([x,D])}}var l,n,
k,r,w={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return r={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r}function t(m,v,p){if(p||2===arguments.length)for(var l,n=0,k=v.length;n<k;n++)!l&&n in v||(l||(l=Array.prototype.slice.call(v,0,n)),l[n]=v[n]);return m.concat(l||Array.prototype.slice.call(v))}h.d(c,"d",function(){return d});h.d(c,"a",function(){return g});h.d(c,"f",function(){return b});h.d(c,"c",function(){return a});
h.d(c,"b",function(){return e});h.d(c,"e",function(){return q});h.d(c,"g",function(){return t});var u=function(m,v){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,l){p.__proto__=l}||function(p,l){for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(p[n]=l[n])})(m,v)},g=function(){return(g=Object.assign||function(m){for(var v,p=1,l=arguments.length;p<l;p++)for(var n in v=arguments[p])Object.prototype.hasOwnProperty.call(v,n)&&(m[n]=v[n]);return m}).apply(this,arguments)};
Object.create;Object.create},17:function(f,c){f.exports=S},353:function(f,c){f.exports=J},804:function(f,c,h){h.r(c);var d=h(1);f=h(17);var b=h(353),a=h.n(b);h=function(e){function q(t){t=e.call(this,t)||this;return t.state={optionElements:[],numOptions:-1,active:!1},t.navId="".concat(t.props.key,"-option-dropdown"),t.handleOptionBlur=t.handleOptionBlur.bind(t),t.handleOptionClick=t.handleOptionClick.bind(t),t.mapOptionsToButtons=t.mapOptionsToButtons.bind(t),t.registerOptionElement=t.registerOptionElement.bind(t),
t.handleOptionKeyDown=t.handleOptionKeyDown.bind(t),t.handleButtonKeyDown=t.handleButtonKeyDown.bind(t),t}return Object(d.d)(q,e),q.prototype.render=function(t){var u=this,g={"drp-text-option__menu--left":!this.props.justify||"left"===this.props.justify,"drp-text-option__menu--right":"right"===this.props.justify};if(this.props.children&&this.props.children[0])return t(a.a,{key:"".concat(this.props.key,"-dropdown-base"),handleButtonKeyDown:this.handleButtonKeyDown,active:this.state.active,onToggle:function(){u.setState({active:!u.state.active})}},
this.props.children[0],t("nav",{id:this.navId,class:"drp-text-option__menu",classes:g,style:"\n                        background-color: white;\n                        z-index: 9999999;\n                        margin: 0px;\n                        display: block;\n                        pointer-events: all;\n                        box-shadow: 0 0 16px 0 rgba(0,0,0,0.2);\n                        border: 0;\n                    ",role:"listbox","aria-activedescendant":"".concat(this.props.selectedOptionValue,
"-option")},this.mapOptionsToButtons(t)))},q.prototype.mapOptionsToButtons=function(t){var u=this;return this.props.options.map(function(g,m){var v={"drp-text-option__link":!0,"drp-text-option__link--active":g.value===u.props.selectedOptionValue};return t("button",{id:"".concat(g.value,"-option"),classes:v,key:g.value,onclick:u.handleOptionClick,onkeydown:u.handleOptionKeyDown,value:g.value,dataIndex:m,afterCreate:u.registerOptionElement,role:"option","aria-selected":"".concat(g.value===u.props.selectedOptionValue),
onblur:u.handleOptionBlur},g.text)})},q.prototype.handleOptionBlur=function(t){var u;(null===(u=document.querySelector("#".concat(this.navId)))||void 0===u?0:u.contains(t.relatedTarget))||this.setState({active:!1})},q.prototype.handleOptionClick=function(t){this.setState({active:!1});this.props.onSelect(t.target.value)},q.prototype.registerOptionElement=function(t){var u;this.setState({optionElements:Object(d.a)(Object(d.a)({},this.state.optionElements),(u={},u[t.dataIndex]=t,u)),numOptions:this.state.numOptions+
1})},q.prototype.handleButtonKeyDown=function(t){t.keyCode&&40===t.keyCode&&this.state.optionElements[0]&&this.state.optionElements[0].focus()},q.prototype.handleOptionKeyDown=function(t){var u=t.target.dataIndex;switch(t.keyCode){case 40:this.state.optionElements[u+1]?this.state.optionElements[u+1].focus():this.state.optionElements[0]&&this.state.optionElements[0].focus();break;case 38:this.state.optionElements[u-1]?this.state.optionElements[u-1].focus():this.state.optionElements[this.state.numOptions]&&
this.state.optionElements[this.state.numOptions].focus()}},q}(f.Component);c.default=h}})})},"arcgis-components/Filters/CategoriesFilter/index":function(){define(["../../Component","../../Dropdowns/AccordionDropdown/index","../../Buttons/Toggle"],function(S,J,f){return function(c){function h(b){if(d[b])return d[b].exports;var a=d[b]={i:b,l:!1,exports:{}};return c[b].call(a.exports,a,a.exports,h),a.l=!0,a.exports}var d={};return h.m=c,h.c=d,h.d=function(b,a,e){h.o(b,a)||Object.defineProperty(b,a,{enumerable:!0,
get:e})},h.r=function(b){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});Object.defineProperty(b,"__esModule",{value:!0})},h.t=function(b,a){if((1&a&&(b=h(b)),8&a)||4&a&&"object"==typeof b&&b&&b.__esModule)return b;var e=Object.create(null);if(h.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:b}),2&a&&"string"!=typeof b)for(var q in b)h.d(e,q,function(t){return b[t]}.bind(null,q));return e},h.n=function(b){var a=b&&b.__esModule?
function(){return b.default}:function(){return b};return h.d(a,"a",a),a},h.o=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)},h.p="",h(h.s=805)}({1:function(c,h,d){function b(v,p){function l(){this.constructor=v}if("function"!=typeof p&&null!==p)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");g(v,p);v.prototype=null===p?Object.create(p):(l.prototype=p.prototype,new l)}function a(v,p){var l={},n;for(n in v)Object.prototype.hasOwnProperty.call(v,
n)&&0>p.indexOf(n)&&(l[n]=v[n]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var k=0;for(n=Object.getOwnPropertySymbols(v);k<n.length;k++)0>p.indexOf(n[k])&&Object.prototype.propertyIsEnumerable.call(v,n[k])&&(l[n[k]]=v[n[k]])}return l}function e(v,p,l,n){var k,r=arguments.length,w=3>r?p:null===n?n=Object.getOwnPropertyDescriptor(p,l):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)w=Reflect.decorate(v,p,l,n);else for(var x=v.length-1;0<=x;x--)(k=v[x])&&(w=(3>r?
k(w):3<r?k(p,l,w):k(p,l))||w);return 3<r&&w&&Object.defineProperty(p,l,w),w}function q(v,p,l,n){return new (l||(l=Promise))(function(k,r){function w(G){try{D(n.next(G))}catch(F){r(F)}}function x(G){try{D(n.throw(G))}catch(F){r(F)}}function D(G){var F;G.done?k(G.value):(F=G.value,F instanceof l?F:new l(function(A){A(F)})).then(w,x)}D((n=n.apply(v,p||[])).next())})}function t(v,p){function l(D){return function(G){return function(F){if(n)throw new TypeError("Generator is already executing.");for(;w&&
(w=0,F[0]&&(x=0)),x;)try{if(n=1,k&&(r=2&F[0]?k.return:F[0]?k.throw||((r=k.return)&&r.call(k),0):k.next)&&!(r=r.call(k,F[1])).done)return r;switch(k=0,r&&(F=[2&F[0],r.value]),F[0]){case 0:case 1:r=F;break;case 4:return x.label++,{value:F[1],done:!1};case 5:x.label++;k=F[1];F=[0];continue;case 7:F=x.ops.pop();x.trys.pop();continue;default:if(!(r=x.trys,(r=0<r.length&&r[r.length-1])||6!==F[0]&&2!==F[0])){x=0;continue}if(3===F[0]&&(!r||F[1]>r[0]&&F[1]<r[3]))x.label=F[1];else if(6===F[0]&&x.label<r[1])x.label=
r[1],r=F;else if(r&&x.label<r[2])x.label=r[2],x.ops.push(F);else{r[2]&&x.ops.pop();x.trys.pop();continue}}F=p.call(v,x)}catch(A){F=[6,A],k=0}finally{n=r=0}if(5&F[0])throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}([D,G])}}var n,k,r,w,x={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return w={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w}function u(v,p,l){if(l||2===arguments.length)for(var n,k=0,r=p.length;k<
r;k++)!n&&k in p||(n||(n=Array.prototype.slice.call(p,0,k)),n[k]=p[k]);return v.concat(n||Array.prototype.slice.call(p))}d.d(h,"d",function(){return b});d.d(h,"a",function(){return m});d.d(h,"f",function(){return a});d.d(h,"c",function(){return e});d.d(h,"b",function(){return q});d.d(h,"e",function(){return t});d.d(h,"g",function(){return u});var g=function(v,p){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,n){l.__proto__=n}||function(l,n){for(var k in n)Object.prototype.hasOwnProperty.call(n,
k)&&(l[k]=n[k])})(v,p)},m=function(){return(m=Object.assign||function(v){for(var p,l=1,n=arguments.length;l<n;l++)for(var k in p=arguments[l])Object.prototype.hasOwnProperty.call(p,k)&&(v[k]=p[k]);return v}).apply(this,arguments)};Object.create;Object.create},130:function(c,h){c.exports=J},160:function(c,h){c.exports=f},18:function(c,h){c.exports=S},805:function(c,h,d){d.r(h);var b=d(1);c=d(18);var a=d(130),e=d.n(a);a=d(160);var q=d.n(a);d=function(t){function u(g){g=t.call(this,g)||this;return g.mapCategoriesToToggles=
g.mapCategoriesToToggles.bind(g),g.handleToggleClick=g.handleToggleClick.bind(g),g.handleClearFilter=g.handleClearFilter.bind(g),g}return Object(b.d)(u,t),u.prototype.render=function(g){return g(e.a,{key:this.props.key,title:this.props.title,clearable:!!this.props.categoriesFilter,onClear:this.handleClearFilter,startActive:this.props.startActive},g("ul",{"aria-label":this.props.title,class:"ftr-categories__tree",role:"tree"},this.mapCategoriesToToggles(g)))},u.prototype.mapCategoriesToToggles=function(g){var m=
this;return this.props.availableCategories.map(function(v){return g(q.a,{count:v.count,key:v.value,name:v.displayName,value:v.value,selectedToggle:m.props.categoriesFilter?m.props.categoriesFilter.value:void 0,childOptions:v.children,onToggleClick:m.handleToggleClick,useFullPathAsValue:!0,prependValue:m.props.prependValue,showTooltip:m.props.showTooltips,tooltip:v.tooltip})})},u.prototype.handleToggleClick=function(g,m){this.props.onCategorySelect({value:g,text:m})},u.prototype.handleClearFilter=
function(){this.props.onClearCategories()},u}(c.Component);h.default=d}})})},"arcgis-components/Badges/Retired":function(){define(["dojo/i18n!../Badges/nls/resources","../Badges/Badge"],function(S,J){return function(f){function c(d){if(h[d])return h[d].exports;var b=h[d]={i:d,l:!1,exports:{}};return f[d].call(b.exports,b,b.exports,c),b.l=!0,b.exports}var h={};return c.m=f,c.c=h,c.d=function(d,b,a){c.o(d,b)||Object.defineProperty(d,b,{enumerable:!0,get:a})},c.r=function(d){"undefined"!=typeof Symbol&&
Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"});Object.defineProperty(d,"__esModule",{value:!0})},c.t=function(d,b){if((1&b&&(d=c(d)),8&b)||4&b&&"object"==typeof d&&d&&d.__esModule)return d;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:d}),2&b&&"string"!=typeof d)for(var e in d)c.d(a,e,function(q){return d[q]}.bind(null,e));return a},c.n=function(d){var b=d&&d.__esModule?function(){return d.default}:function(){return d};
return c.d(b,"a",b),b},c.o=function(d,b){return Object.prototype.hasOwnProperty.call(d,b)},c.p="",c(c.s=787)}({115:function(f,c){f.exports=J},68:function(f,c){f.exports=S},787:function(f,c,h){h.r(c);var d=h(68);f=h(115);var b=h.n(f);c.default=function(a,e){var q=a.isRetiredStoryMap?d.tooltips.retiredStoryMap:d.tooltips.retiredApp;return e(b.a,{backgroundColor:"#efe397",textColor:"#786d1c",key:"retired-badge",size:a.size,text:d.retired,title:q,tooltip:a.tooltip?q:void 0,tooltipDirection:a.tooltipDirection},
e("path",{fill:"#786d1c",d:"M14.78 14.645L8.255 1.52a.938.938 0 0 0-.84-.52.938.938 0 0 0-.84.522L.092 14.647A.938.938 0 0 0 .932 16h13.009a.937.937 0 0 0 .838-1.355zm-.724.49a.137.137 0 0 1-.115.065H.933a.137.137 0 0 1-.116-.063.139.139 0 0 1-.008-.135L7.293 1.876a.14.14 0 0 1 .123-.076.138.138 0 0 1 .125.077l6.521 13.124a.138.138 0 0 1-.006.135zM7.495 11.5a.988.988 0 0 1 1 .976v.048a1 1 0 0 1-2 0v-.048a.988.988 0 0 1 1-.976zM7.018 6h.977v4h-.977z"}))}}})})},"arcgis-components/Badges/Badge":function(){define(function(){return function(S){function J(c){if(f[c])return f[c].exports;
var h=f[c]={i:c,l:!1,exports:{}};return S[c].call(h.exports,h,h.exports,J),h.l=!0,h.exports}var f={};return J.m=S,J.c=f,J.d=function(c,h,d){J.o(c,h)||Object.defineProperty(c,h,{enumerable:!0,get:d})},J.r=function(c){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});Object.defineProperty(c,"__esModule",{value:!0})},J.t=function(c,h){if((1&h&&(c=J(c)),8&h)||4&h&&"object"==typeof c&&c&&c.__esModule)return c;var d=Object.create(null);if(J.r(d),
Object.defineProperty(d,"default",{enumerable:!0,value:c}),2&h&&"string"!=typeof c)for(var b in c)J.d(d,b,function(a){return c[a]}.bind(null,b));return d},J.n=function(c){var h=c&&c.__esModule?function(){return c.default}:function(){return c};return J.d(h,"a",h),h},J.o=function(c,h){return Object.prototype.hasOwnProperty.call(c,h)},J.p="",J(J.s=776)}({776:function(S,J,f){f.r(J);J.default=function(c,h){var d=c.key,b=c.size,a=c.text,e=c.title,q=c.tooltip,t=c.tooltipDirection,u=c.backgroundColor,g=c.textColor;
c=c.children;t={"qual-badge__container":!0,"qual-badge__container--small":"small"===b,"qual-badge__container--tooltip":q,"qual-badge__container--tooltip-left":"left"===t,"qual-badge__container--tooltip-top":"top"===t,"qual-badge__container--tooltip-right":"right"===t,"tooltip-bottom":!t||"bottom"===t,"tooltip-left":"left"===t,"tooltip-top":"top"===t,"tooltip-right":"right"===t};return"small"===b?h("span",{key:"".concat(d,"-small"),classes:t,class:"qual-badge__container--small","aria-label":q,style:"background-color: ".concat(u,
"; color: ").concat(g,";"),title:q?void 0:e},c):h("span",{key:"".concat(d,"-regular"),classes:t,class:"qual-badge__container--regular","aria-label":q,style:"background-color: ".concat(u,"; color: ").concat(g,";"),title:e},h("svg",{xmlns:"http://www.w3.org/2000/svg",role:"img",width:"16",height:"16",viewBox:"0 0 16 16"},c),h("span",{class:"qual-badge__text"},a))}}})})},"arcgis-components/Filters/MapAreaFilter":function(){define(["../Buttons/ToggleSwitch"],function(S){return function(J){function f(h){if(c[h])return c[h].exports;
var d=c[h]={i:h,l:!1,exports:{}};return J[h].call(d.exports,d,d.exports,f),d.l=!0,d.exports}var c={};return f.m=J,f.c=c,f.d=function(h,d,b){f.o(h,d)||Object.defineProperty(h,d,{enumerable:!0,get:b})},f.r=function(h){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"});Object.defineProperty(h,"__esModule",{value:!0})},f.t=function(h,d){if((1&d&&(h=f(h)),8&d)||4&d&&"object"==typeof h&&h&&h.__esModule)return h;var b=Object.create(null);if(f.r(b),
Object.defineProperty(b,"default",{enumerable:!0,value:h}),2&d&&"string"!=typeof h)for(var a in h)f.d(b,a,function(e){return h[e]}.bind(null,a));return b},f.n=function(h){var d=h&&h.__esModule?function(){return h.default}:function(){return h};return f.d(d,"a",d),d},f.o=function(h,d){return Object.prototype.hasOwnProperty.call(h,d)},f.p="",f(f.s=815)}({501:function(J,f){J.exports=S},815:function(J,f,c){c.r(f);J=c(501);var h=c.n(J);f.default=function(d,b){return b(h.a,{key:"map-area-filter",label:d.text,
handleToggleClick:d.handleMapAreaToggle,handleKeyUp:d.handleMapAreaKeyUp,value:d.searchMapArea})}}})})},"arcgis-components/Filters/ItemTypeFilter/index":function(){define(["../../Component","../../Dropdowns/AccordionDropdown/index","../../Buttons/Toggle","dojo/i18n!../../Filters/ItemTypeFilter/nls/resources"],function(S,J,f,c){return function(h){function d(a){if(b[a])return b[a].exports;var e=b[a]={i:a,l:!1,exports:{}};return h[a].call(e.exports,e,e.exports,d),e.l=!0,e.exports}var b={};return d.m=
h,d.c=b,d.d=function(a,e,q){d.o(a,e)||Object.defineProperty(a,e,{enumerable:!0,get:q})},d.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},d.t=function(a,e){if((1&e&&(a=d(a)),8&e)||4&e&&"object"==typeof a&&a&&a.__esModule)return a;var q=Object.create(null);if(d.r(q),Object.defineProperty(q,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var t in a)d.d(q,t,function(u){return a[u]}.bind(null,
t));return q},d.n=function(a){var e=a&&a.__esModule?function(){return a.default}:function(){return a};return d.d(e,"a",e),e},d.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},d.p="",d(d.s=809)}({1:function(h,d,b){function a(p,l){function n(){this.constructor=p}if("function"!=typeof l&&null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");m(p,l);p.prototype=null===l?Object.create(l):(n.prototype=l.prototype,new n)}function e(p,l){var n={},
k;for(k in p)Object.prototype.hasOwnProperty.call(p,k)&&0>l.indexOf(k)&&(n[k]=p[k]);if(null!=p&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(k=Object.getOwnPropertySymbols(p);r<k.length;r++)0>l.indexOf(k[r])&&Object.prototype.propertyIsEnumerable.call(p,k[r])&&(n[k[r]]=p[k[r]])}return n}function q(p,l,n,k){var r,w=arguments.length,x=3>w?l:null===k?k=Object.getOwnPropertyDescriptor(l,n):k;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)x=Reflect.decorate(p,l,n,k);else for(var D=
p.length-1;0<=D;D--)(r=p[D])&&(x=(3>w?r(x):3<w?r(l,n,x):r(l,n))||x);return 3<w&&x&&Object.defineProperty(l,n,x),x}function t(p,l,n,k){return new (n||(n=Promise))(function(r,w){function x(F){try{G(k.next(F))}catch(A){w(A)}}function D(F){try{G(k.throw(F))}catch(A){w(A)}}function G(F){var A;F.done?r(F.value):(A=F.value,A instanceof n?A:new n(function(y){y(A)})).then(x,D)}G((k=k.apply(p,l||[])).next())})}function u(p,l){function n(G){return function(F){return function(A){if(k)throw new TypeError("Generator is already executing.");
for(;x&&(x=0,A[0]&&(D=0)),D;)try{if(k=1,r&&(w=2&A[0]?r.return:A[0]?r.throw||((w=r.return)&&w.call(r),0):r.next)&&!(w=w.call(r,A[1])).done)return w;switch(r=0,w&&(A=[2&A[0],w.value]),A[0]){case 0:case 1:w=A;break;case 4:return D.label++,{value:A[1],done:!1};case 5:D.label++;r=A[1];A=[0];continue;case 7:A=D.ops.pop();D.trys.pop();continue;default:if(!(w=D.trys,(w=0<w.length&&w[w.length-1])||6!==A[0]&&2!==A[0])){D=0;continue}if(3===A[0]&&(!w||A[1]>w[0]&&A[1]<w[3]))D.label=A[1];else if(6===A[0]&&D.label<
w[1])D.label=w[1],w=A;else if(w&&D.label<w[2])D.label=w[2],D.ops.push(A);else{w[2]&&D.ops.pop();D.trys.pop();continue}}A=l.call(p,D)}catch(y){A=[6,y],r=0}finally{k=w=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([G,F])}}var k,r,w,x,D={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return x={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(x[Symbol.iterator]=function(){return this}),x}function g(p,l,n){if(n||2===arguments.length)for(var k,r=
0,w=l.length;r<w;r++)!k&&r in l||(k||(k=Array.prototype.slice.call(l,0,r)),k[r]=l[r]);return p.concat(k||Array.prototype.slice.call(l))}b.d(d,"d",function(){return a});b.d(d,"a",function(){return v});b.d(d,"f",function(){return e});b.d(d,"c",function(){return q});b.d(d,"b",function(){return t});b.d(d,"e",function(){return u});b.d(d,"g",function(){return g});var m=function(p,l){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,k){n.__proto__=k}||function(n,k){for(var r in k)Object.prototype.hasOwnProperty.call(k,
r)&&(n[r]=k[r])})(p,l)},v=function(){return(v=Object.assign||function(p){for(var l,n=1,k=arguments.length;n<k;n++)for(var r in l=arguments[n])Object.prototype.hasOwnProperty.call(l,r)&&(p[r]=l[r]);return p}).apply(this,arguments)};Object.create;Object.create},130:function(h,d){h.exports=J},160:function(h,d){h.exports=f},18:function(h,d){h.exports=S},183:function(h,d,b){function a(k,r){return m("children","value",k,r)}function e(k,r){return v("children","value",k,r)}function q(k,r){return function A(x,
D,G,F){var y,z=G[x];return z&&0!==z.length?Object(n.a)(Object(n.a)({},G),((y={})[x]=z.reduce(function(B,C){return-1!==F.indexOf(C[D])&&B.push(A(x,D,C,F)),B},[]),y)):Object(n.a)({},G)}("children","value",k,r)}function t(k){return function(r,w){var x,D=w[r];return D?Object(n.a)(Object(n.a)({},w),((x={})[r]=function A(F){return 0===F.length?[]:1!==F.length||F[0][r]?1<F.length?F.reduce(function(y,z){var B;return z[r]?(y.push(Object(n.a)(Object(n.a)({},z),((B={})[r]=A(z[r]),B))),y):(y.push(z),y)},[]):
A(F[0][r]):F}(D),x)):w}("children",k)}function u(k,r){return p("children",k,r)}function g(k,r){return function F(x,D,G){var A=D[x];A&&A.forEach(function(y){return F(x,y,G)});G(D)}("children",k,r)}function m(k,r,w,x){var D=w[k];return w[r]===x?w:D?D.reduce(function(G,F){return G||m(k,r,F,x)},void 0):void 0}function v(k,r,w,x){if(w=w[k])return w.reduce(function(D,G){return G[r]===x[0]?1===x.length?G:v(k,r,G,x.slice(1)):D},void 0)}function p(k,r,w){var x;return w(Object(n.a)(Object(n.a)({},r),((x={})[k]=
r[k]?r[k].map(function(D){return p(k,D,w)}):void 0,x)))}function l(k,r,w){return p(k,w,function(x){var D=x[r];if(delete x[r],x[k]){var G=x[k];return delete x[k],Object(n.a)(Object(n.a)({},x),{value:D,children:G})}return Object(n.a)(Object(n.a)({},x),{value:D})})}b.d(d,"f",function(){return a});b.d(d,"d",function(){return e});b.d(d,"i",function(){return q});b.d(d,"e",function(){return t});b.d(d,"h",function(){return u});b.d(d,"g",function(){return g});b.d(d,"a",function(){return m});b.d(d,"b",function(){return v});
b.d(d,"c",function(){return l});var n=b(1)},322:function(h,d){h.exports=c},427:function(h,d,b){h=b(322);d.a=[{value:"maps",displayName:"Maps",children:[{value:"webMaps",displayName:"Web maps"},{value:"mapFiles",displayName:"Map files"}]},{value:"layers",displayName:"Layers",children:[{value:"featureLayers",displayName:"Feature layers"},{value:"tileLayers",displayName:"Tile layers"},{value:"mapImageLayers",displayName:"Map image layers"},{value:"imageryLayers",displayName:"Imagery layers"},{value:"tiledImageLayers",
displayName:"Tiled imagery layers"},{value:"elevationLayers",displayName:"Elevation layers"},{value:"sceneLayers",displayName:"Scene layers"},{value:"tables",displayName:"Tables"},{value:"layerFiles",displayName:"Layer files"},{value:"bigDataFileShares",displayName:"Big data file shares"}]},{value:"scenes",displayName:"Scenes"},{value:"apps",displayName:"Apps",children:[{value:"webApps",displayName:"Web apps"},{value:"experienceApps",displayName:"Experience Builder"},{value:"instantApps",displayName:"Instant Apps"},
{value:"sites",displayName:"Sites"},{value:"pages",displayName:"Pages"},{value:"storyMaps",displayName:"StoryMaps"},{value:"mobileApps",displayName:"Mobile apps"},{value:"desktopApps",displayName:"Desktop apps"},{value:"geobimProjects",displayName:h.filters.geobimProjects},{value:"geobimApplications",displayName:h.filters.geobimApplications}]},{value:"developerCredentials",displayName:"Developer credentials",children:[{value:"oauth",displayName:"OAuth 2.0 applications"}]},{value:"tools",displayName:"Tools",
children:[{value:"locators",displayName:"Locators"},{value:"geodatabaseAccess",displayName:"Geodatabase access"},{value:"geometricOperations",displayName:"Geometric operations"},{value:"geoprocessingTasks",displayName:"Geoprocessing tasks"},{value:"networkAnalysis",displayName:"Network analysis"},{value:"webTools",displayName:h.filters.webTools},{value:"rasterFunctionTemplates",displayName:"Raster function templates"},{value:"deepLearningPackages",displayName:"Deep learning packages"},{value:"analytics",
displayName:"Analytics"}]},{value:"files",displayName:"Files",children:[{value:"documents",displayName:"Documents"},{value:"images",displayName:"Images"},{value:"pdfs",displayName:"PDFs"},{value:"csvs",displayName:"CSVs"},{value:"reports",displayName:"Administrative reports"},{value:"rasterFunctionTemplates",displayName:"Raster function templates"}]},{value:"notebooks",displayName:"Notebooks"},{value:"knowledgeGraphs",displayName:"Knowledge graphs"}]},809:function(h,d,b){b.r(d);var a=b(1),e=b(322);
h=b(18);var q=b(130),t=b.n(q);q=b(160);var u=b.n(q),g=b(427),m=b(183);b=function(v){function p(l){var n=v.call(this,l)||this;return n.state={availableFilters:Object(m.e)(Object(m.i)({value:"##itemTypeOptionsRoot",children:g.a},l.availableItemTypes)).children},n.mapItemTypesToToggles=n.mapItemTypesToToggles.bind(n),n.handleToggleClick=n.handleToggleClick.bind(n),n.handleClearFilter=n.handleClearFilter.bind(n),n}return Object(a.d)(p,v),p.prototype.render=function(l){return l(t.a,{key:"item-type-accordion",
title:e.itemType,clearable:!!this.props.itemTypeFilter,onClear:this.handleClearFilter},l("ul",{"aria-label":e.itemType,class:"ftr-item-type__tree",role:"tree"},this.mapItemTypesToToggles(l)))},p.prototype.mapItemTypesToToggles=function(l){var n=this;return Object(m.e)(Object(m.i)({value:"##itemTypeOptionsRoot",children:g.a},this.props.availableItemTypes)).children.map(function(k){return l(u.a,{key:k.value,name:k.displayName,value:k.value,selectedToggle:n.props.itemTypeFilter?n.props.itemTypeFilter.value:
void 0,childOptions:k.children,onToggleClick:n.handleToggleClick})})},p.prototype.handleToggleClick=function(l,n){var k=this.props.itemTypeFilter;k&&k.value===l?this.props.onItemTypeSelect():this.props.onItemTypeSelect({value:l,text:n})},p.prototype.handleClearFilter=function(){this.props.onItemTypeSelect()},p}(h.Component);d.default=b}})})},"arcgis-components/Filters/ModifiedFilter/index":function(){define(["../../Component","../../Dropdowns/AccordionDropdown/index","../../DateSelection/DateRangeSelector/index",
"dojo/i18n!../../Filters/ModifiedFilter/nls/resources"],function(S,J,f,c){return function(h){function d(a){if(b[a])return b[a].exports;var e=b[a]={i:a,l:!1,exports:{}};return h[a].call(e.exports,e,e.exports,d),e.l=!0,e.exports}var b={};return d.m=h,d.c=b,d.d=function(a,e,q){d.o(a,e)||Object.defineProperty(a,e,{enumerable:!0,get:q})},d.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},
d.t=function(a,e){if((1&e&&(a=d(a)),8&e)||4&e&&"object"==typeof a&&a&&a.__esModule)return a;var q=Object.create(null);if(d.r(q),Object.defineProperty(q,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var t in a)d.d(q,t,function(u){return a[u]}.bind(null,t));return q},d.n=function(a){var e=a&&a.__esModule?function(){return a.default}:function(){return a};return d.d(e,"a",e),e},d.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},d.p="",d(d.s=810)}({1:function(h,d,b){function a(p,
l){function n(){this.constructor=p}if("function"!=typeof l&&null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");m(p,l);p.prototype=null===l?Object.create(l):(n.prototype=l.prototype,new n)}function e(p,l){var n={},k;for(k in p)Object.prototype.hasOwnProperty.call(p,k)&&0>l.indexOf(k)&&(n[k]=p[k]);if(null!=p&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(k=Object.getOwnPropertySymbols(p);r<k.length;r++)0>l.indexOf(k[r])&&Object.prototype.propertyIsEnumerable.call(p,
k[r])&&(n[k[r]]=p[k[r]])}return n}function q(p,l,n,k){var r,w=arguments.length,x=3>w?l:null===k?k=Object.getOwnPropertyDescriptor(l,n):k;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)x=Reflect.decorate(p,l,n,k);else for(var D=p.length-1;0<=D;D--)(r=p[D])&&(x=(3>w?r(x):3<w?r(l,n,x):r(l,n))||x);return 3<w&&x&&Object.defineProperty(l,n,x),x}function t(p,l,n,k){return new (n||(n=Promise))(function(r,w){function x(F){try{G(k.next(F))}catch(A){w(A)}}function D(F){try{G(k.throw(F))}catch(A){w(A)}}
function G(F){var A;F.done?r(F.value):(A=F.value,A instanceof n?A:new n(function(y){y(A)})).then(x,D)}G((k=k.apply(p,l||[])).next())})}function u(p,l){function n(G){return function(F){return function(A){if(k)throw new TypeError("Generator is already executing.");for(;x&&(x=0,A[0]&&(D=0)),D;)try{if(k=1,r&&(w=2&A[0]?r.return:A[0]?r.throw||((w=r.return)&&w.call(r),0):r.next)&&!(w=w.call(r,A[1])).done)return w;switch(r=0,w&&(A=[2&A[0],w.value]),A[0]){case 0:case 1:w=A;break;case 4:return D.label++,{value:A[1],
done:!1};case 5:D.label++;r=A[1];A=[0];continue;case 7:A=D.ops.pop();D.trys.pop();continue;default:if(!(w=D.trys,(w=0<w.length&&w[w.length-1])||6!==A[0]&&2!==A[0])){D=0;continue}if(3===A[0]&&(!w||A[1]>w[0]&&A[1]<w[3]))D.label=A[1];else if(6===A[0]&&D.label<w[1])D.label=w[1],w=A;else if(w&&D.label<w[2])D.label=w[2],D.ops.push(A);else{w[2]&&D.ops.pop();D.trys.pop();continue}}A=l.call(p,D)}catch(y){A=[6,y],r=0}finally{k=w=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([G,F])}}var k,r,
w,x,D={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return x={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(x[Symbol.iterator]=function(){return this}),x}function g(p,l,n){if(n||2===arguments.length)for(var k,r=0,w=l.length;r<w;r++)!k&&r in l||(k||(k=Array.prototype.slice.call(l,0,r)),k[r]=l[r]);return p.concat(k||Array.prototype.slice.call(l))}b.d(d,"d",function(){return a});b.d(d,"a",function(){return v});b.d(d,"f",function(){return e});b.d(d,"c",function(){return q});
b.d(d,"b",function(){return t});b.d(d,"e",function(){return u});b.d(d,"g",function(){return g});var m=function(p,l){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,k){n.__proto__=k}||function(n,k){for(var r in k)Object.prototype.hasOwnProperty.call(k,r)&&(n[r]=k[r])})(p,l)},v=function(){return(v=Object.assign||function(p){for(var l,n=1,k=arguments.length;n<k;n++)for(var r in l=arguments[n])Object.prototype.hasOwnProperty.call(l,r)&&(p[r]=l[r]);return p}).apply(this,arguments)};
Object.create;Object.create},130:function(h,d){h.exports=J},18:function(h,d){h.exports=S},355:function(h,d){h.exports=f},428:function(h,d){h.exports=c},810:function(h,d,b){b.r(d);var a=b(1),e=b(428);h=b(18);var q=b(130),t=b.n(q);q=b(355);var u=b.n(q);b=function(g){function m(v){v=g.call(this,v)||this;return v.handleDateRangeSelect=v.handleDateRangeSelect.bind(v),v.handleClearFilter=v.handleClearFilter.bind(v),v}return Object(a.d)(m,g),m.prototype.render=function(v){return v(t.a,{key:"modified-filter-accordion",
title:e.dateModified,clearable:!!this.props.dateModifiedFilter,onClear:this.handleClearFilter},v("ul",{"aria-label":e.dateModified,class:"ftr-modified__tree",role:"tree"},v(u.a,{key:"date-range-selector",selectedOption:this.props.dateModifiedSection,range:this.props.dateModifiedFilter,onDateRangeSelect:this.handleDateRangeSelect,preventFutureDate:!0,minDateConstraint:12334752E5})))},m.prototype.handleDateRangeSelect=function(v,p){this.props.onDateModifiedSelect(v,p)},m.prototype.handleClearFilter=
function(){this.props.onDateModifiedSelect()},m}(h.Component);d.default=b}})})},"arcgis-components/Filters/SharedFilter/index":function(){define(["../../Component","../../Dropdowns/AccordionDropdown/index","../../Buttons/Toggle","dojo/i18n!../../Filters/SharedFilter/nls/resources"],function(S,J,f,c){return function(h){function d(a){if(b[a])return b[a].exports;var e=b[a]={i:a,l:!1,exports:{}};return h[a].call(e.exports,e,e.exports,d),e.l=!0,e.exports}var b={};return d.m=h,d.c=b,d.d=function(a,e,q){d.o(a,
e)||Object.defineProperty(a,e,{enumerable:!0,get:q})},d.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},d.t=function(a,e){if((1&e&&(a=d(a)),8&e)||4&e&&"object"==typeof a&&a&&a.__esModule)return a;var q=Object.create(null);if(d.r(q),Object.defineProperty(q,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var t in a)d.d(q,t,function(u){return a[u]}.bind(null,t));
return q},d.n=function(a){var e=a&&a.__esModule?function(){return a.default}:function(){return a};return d.d(e,"a",e),e},d.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},d.p="",d(d.s=811)}({1:function(h,d,b){function a(p,l){function n(){this.constructor=p}if("function"!=typeof l&&null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");m(p,l);p.prototype=null===l?Object.create(l):(n.prototype=l.prototype,new n)}function e(p,l){var n={},k;for(k in p)Object.prototype.hasOwnProperty.call(p,
k)&&0>l.indexOf(k)&&(n[k]=p[k]);if(null!=p&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(k=Object.getOwnPropertySymbols(p);r<k.length;r++)0>l.indexOf(k[r])&&Object.prototype.propertyIsEnumerable.call(p,k[r])&&(n[k[r]]=p[k[r]])}return n}function q(p,l,n,k){var r,w=arguments.length,x=3>w?l:null===k?k=Object.getOwnPropertyDescriptor(l,n):k;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)x=Reflect.decorate(p,l,n,k);else for(var D=p.length-1;0<=D;D--)(r=p[D])&&(x=(3>w?
r(x):3<w?r(l,n,x):r(l,n))||x);return 3<w&&x&&Object.defineProperty(l,n,x),x}function t(p,l,n,k){return new (n||(n=Promise))(function(r,w){function x(F){try{G(k.next(F))}catch(A){w(A)}}function D(F){try{G(k.throw(F))}catch(A){w(A)}}function G(F){var A;F.done?r(F.value):(A=F.value,A instanceof n?A:new n(function(y){y(A)})).then(x,D)}G((k=k.apply(p,l||[])).next())})}function u(p,l){function n(G){return function(F){return function(A){if(k)throw new TypeError("Generator is already executing.");for(;x&&
(x=0,A[0]&&(D=0)),D;)try{if(k=1,r&&(w=2&A[0]?r.return:A[0]?r.throw||((w=r.return)&&w.call(r),0):r.next)&&!(w=w.call(r,A[1])).done)return w;switch(r=0,w&&(A=[2&A[0],w.value]),A[0]){case 0:case 1:w=A;break;case 4:return D.label++,{value:A[1],done:!1};case 5:D.label++;r=A[1];A=[0];continue;case 7:A=D.ops.pop();D.trys.pop();continue;default:if(!(w=D.trys,(w=0<w.length&&w[w.length-1])||6!==A[0]&&2!==A[0])){D=0;continue}if(3===A[0]&&(!w||A[1]>w[0]&&A[1]<w[3]))D.label=A[1];else if(6===A[0]&&D.label<w[1])D.label=
w[1],w=A;else if(w&&D.label<w[2])D.label=w[2],D.ops.push(A);else{w[2]&&D.ops.pop();D.trys.pop();continue}}A=l.call(p,D)}catch(y){A=[6,y],r=0}finally{k=w=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([G,F])}}var k,r,w,x,D={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return x={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(x[Symbol.iterator]=function(){return this}),x}function g(p,l,n){if(n||2===arguments.length)for(var k,r=0,w=l.length;r<
w;r++)!k&&r in l||(k||(k=Array.prototype.slice.call(l,0,r)),k[r]=l[r]);return p.concat(k||Array.prototype.slice.call(l))}b.d(d,"d",function(){return a});b.d(d,"a",function(){return v});b.d(d,"f",function(){return e});b.d(d,"c",function(){return q});b.d(d,"b",function(){return t});b.d(d,"e",function(){return u});b.d(d,"g",function(){return g});var m=function(p,l){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,k){n.__proto__=k}||function(n,k){for(var r in k)Object.prototype.hasOwnProperty.call(k,
r)&&(n[r]=k[r])})(p,l)},v=function(){return(v=Object.assign||function(p){for(var l,n=1,k=arguments.length;n<k;n++)for(var r in l=arguments[n])Object.prototype.hasOwnProperty.call(l,r)&&(p[r]=l[r]);return p}).apply(this,arguments)};Object.create;Object.create},130:function(h,d){h.exports=J},160:function(h,d){h.exports=f},18:function(h,d){h.exports=S},323:function(h,d){h.exports=c},811:function(h,d,b){b.r(d);var a=b(1),e=b(323);h=b(18);var q=b(130),t=b.n(q);q=b(160);var u=b.n(q);b=function(g){function m(v){v=
g.call(this,v)||this;return v.state={options:[{value:"public",displayName:e.options.public},{value:"org",displayName:e.options.org},{value:"shared",displayName:e.options.shared},{value:"private",displayName:e.options.private}]},v.mapOptionsToToggles=v.mapOptionsToToggles.bind(v),v.handleToggleClick=v.handleToggleClick.bind(v),v.handleClearFilter=v.handleClearFilter.bind(v),v}return Object(a.d)(m,g),m.prototype.render=function(v){return v(t.a,{key:"shared-accordion",title:e.shared,clearable:!!this.props.sharedFilter,
onClear:this.handleClearFilter},v("ul",{class:"ftr-shared__tree",role:"tree","aria-label":e.shared},this.mapOptionsToToggles(v)))},m.prototype.mapOptionsToToggles=function(v){var p=this,l=this.state.options;return this.props.hideOrgGroupFilters&&(l=[this.state.options[0],this.state.options[3]]),l.map(function(n){return v(u.a,{count:p.props.counts[n.value],key:n.value,name:n.displayName,value:n.value,selectedToggle:p.props.sharedFilter?p.props.sharedFilter.value:void 0,childOptions:n.childOptions,
onToggleClick:p.handleToggleClick})})},m.prototype.handleToggleClick=function(v,p){var l=this.props.sharedFilter;l&&l.value===v?this.props.onSharedSelect():this.props.onSharedSelect({value:v,text:p})},m.prototype.handleClearFilter=function(){this.props.onSharedSelect()},m}(h.Component);d.default=b}})})},"arcgis-components/Filters/StatusFilter/index":function(){define(["../../Component","../../Dropdowns/AccordionDropdown/index","../../Buttons/Toggle","dojo/i18n!../../Filters/StatusFilter/nls/resources"],
function(S,J,f,c){return function(h){function d(a){if(b[a])return b[a].exports;var e=b[a]={i:a,l:!1,exports:{}};return h[a].call(e.exports,e,e.exports,d),e.l=!0,e.exports}var b={};return d.m=h,d.c=b,d.d=function(a,e,q){d.o(a,e)||Object.defineProperty(a,e,{enumerable:!0,get:q})},d.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},d.t=function(a,e){if((1&e&&(a=d(a)),8&e)||4&e&&
"object"==typeof a&&a&&a.__esModule)return a;var q=Object.create(null);if(d.r(q),Object.defineProperty(q,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var t in a)d.d(q,t,function(u){return a[u]}.bind(null,t));return q},d.n=function(a){var e=a&&a.__esModule?function(){return a.default}:function(){return a};return d.d(e,"a",e),e},d.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},d.p="",d(d.s=812)}({1:function(h,d,b){function a(p,l){function n(){this.constructor=p}
if("function"!=typeof l&&null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");m(p,l);p.prototype=null===l?Object.create(l):(n.prototype=l.prototype,new n)}function e(p,l){var n={},k;for(k in p)Object.prototype.hasOwnProperty.call(p,k)&&0>l.indexOf(k)&&(n[k]=p[k]);if(null!=p&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(k=Object.getOwnPropertySymbols(p);r<k.length;r++)0>l.indexOf(k[r])&&Object.prototype.propertyIsEnumerable.call(p,k[r])&&(n[k[r]]=
p[k[r]])}return n}function q(p,l,n,k){var r,w=arguments.length,x=3>w?l:null===k?k=Object.getOwnPropertyDescriptor(l,n):k;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)x=Reflect.decorate(p,l,n,k);else for(var D=p.length-1;0<=D;D--)(r=p[D])&&(x=(3>w?r(x):3<w?r(l,n,x):r(l,n))||x);return 3<w&&x&&Object.defineProperty(l,n,x),x}function t(p,l,n,k){return new (n||(n=Promise))(function(r,w){function x(F){try{G(k.next(F))}catch(A){w(A)}}function D(F){try{G(k.throw(F))}catch(A){w(A)}}function G(F){var A;
F.done?r(F.value):(A=F.value,A instanceof n?A:new n(function(y){y(A)})).then(x,D)}G((k=k.apply(p,l||[])).next())})}function u(p,l){function n(G){return function(F){return function(A){if(k)throw new TypeError("Generator is already executing.");for(;x&&(x=0,A[0]&&(D=0)),D;)try{if(k=1,r&&(w=2&A[0]?r.return:A[0]?r.throw||((w=r.return)&&w.call(r),0):r.next)&&!(w=w.call(r,A[1])).done)return w;switch(r=0,w&&(A=[2&A[0],w.value]),A[0]){case 0:case 1:w=A;break;case 4:return D.label++,{value:A[1],done:!1};case 5:D.label++;
r=A[1];A=[0];continue;case 7:A=D.ops.pop();D.trys.pop();continue;default:if(!(w=D.trys,(w=0<w.length&&w[w.length-1])||6!==A[0]&&2!==A[0])){D=0;continue}if(3===A[0]&&(!w||A[1]>w[0]&&A[1]<w[3]))D.label=A[1];else if(6===A[0]&&D.label<w[1])D.label=w[1],w=A;else if(w&&D.label<w[2])D.label=w[2],D.ops.push(A);else{w[2]&&D.ops.pop();D.trys.pop();continue}}A=l.call(p,D)}catch(y){A=[6,y],r=0}finally{k=w=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([G,F])}}var k,r,w,x,D={label:0,sent:function(){if(1&
w[0])throw w[1];return w[1]},trys:[],ops:[]};return x={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(x[Symbol.iterator]=function(){return this}),x}function g(p,l,n){if(n||2===arguments.length)for(var k,r=0,w=l.length;r<w;r++)!k&&r in l||(k||(k=Array.prototype.slice.call(l,0,r)),k[r]=l[r]);return p.concat(k||Array.prototype.slice.call(l))}b.d(d,"d",function(){return a});b.d(d,"a",function(){return v});b.d(d,"f",function(){return e});b.d(d,"c",function(){return q});b.d(d,"b",function(){return t});
b.d(d,"e",function(){return u});b.d(d,"g",function(){return g});var m=function(p,l){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,k){n.__proto__=k}||function(n,k){for(var r in k)Object.prototype.hasOwnProperty.call(k,r)&&(n[r]=k[r])})(p,l)},v=function(){return(v=Object.assign||function(p){for(var l,n=1,k=arguments.length;n<k;n++)for(var r in l=arguments[n])Object.prototype.hasOwnProperty.call(l,r)&&(p[r]=l[r]);return p}).apply(this,arguments)};Object.create;Object.create},
130:function(h,d){h.exports=J},160:function(h,d){h.exports=f},18:function(h,d){h.exports=S},390:function(h,d){h.exports=c},812:function(h,d,b){b.r(d);var a=b(1),e=b(390);h=b(18);var q=b(130),t=b.n(q);q=b(160);var u=b.n(q);b=function(g){function m(v){v=g.call(this,v)||this;return v.state={options:[{value:"authoritative",displayName:e.options.authoritative},{value:"deprecated",displayName:e.options.deprecated}]},v.mapOptionsToToggles=v.mapOptionsToToggles.bind(v),v.handleToggleClick=v.handleToggleClick.bind(v),
v.handleClearFilter=v.handleClearFilter.bind(v),v}return Object(a.d)(m,g),m.prototype.render=function(v){return v(t.a,{key:"status-accordion",title:e.status,clearable:!!this.props.statusFilter,onClear:this.handleClearFilter},v("ul",{"aria-label":e.status,class:"ftr-status__tree",role:"tree"},this.mapOptionsToToggles(v)))},m.prototype.mapOptionsToToggles=function(v){var p=this;return this.state.options.map(function(l){return v(u.a,{key:l.value,name:l.displayName,value:l.value,selectedToggle:p.props.statusFilter?
p.props.statusFilter.value:void 0,childOptions:l.childOptions,onToggleClick:p.handleToggleClick})})},m.prototype.handleToggleClick=function(v,p){var l=this.props.statusFilter;l&&l.value===v?this.props.onStatusSelect():this.props.onStatusSelect({value:v,text:p})},m.prototype.handleClearFilter=function(){this.props.onStatusSelect()},m}(h.Component);d.default=b}})})},"arcgis-components/Filters/FolderFilter/index":function(){define(["../../Component","../../Dropdowns/AccordionDropdown/index","dojo/i18n!../../Filters/FolderFilter/nls/resources"],
function(S,J,f){return function(c){function h(b){if(d[b])return d[b].exports;var a=d[b]={i:b,l:!1,exports:{}};return c[b].call(a.exports,a,a.exports,h),a.l=!0,a.exports}var d={};return h.m=c,h.c=d,h.d=function(b,a,e){h.o(b,a)||Object.defineProperty(b,a,{enumerable:!0,get:e})},h.r=function(b){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});Object.defineProperty(b,"__esModule",{value:!0})},h.t=function(b,a){if((1&a&&(b=h(b)),8&a)||4&a&&"object"==
typeof b&&b&&b.__esModule)return b;var e=Object.create(null);if(h.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:b}),2&a&&"string"!=typeof b)for(var q in b)h.d(e,q,function(t){return b[t]}.bind(null,q));return e},h.n=function(b){var a=b&&b.__esModule?function(){return b.default}:function(){return b};return h.d(a,"a",a),a},h.o=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)},h.p="",h(h.s=807)}({1:function(c,h,d){function b(v,p){function l(){this.constructor=v}if("function"!=
typeof p&&null!==p)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");g(v,p);v.prototype=null===p?Object.create(p):(l.prototype=p.prototype,new l)}function a(v,p){var l={},n;for(n in v)Object.prototype.hasOwnProperty.call(v,n)&&0>p.indexOf(n)&&(l[n]=v[n]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var k=0;for(n=Object.getOwnPropertySymbols(v);k<n.length;k++)0>p.indexOf(n[k])&&Object.prototype.propertyIsEnumerable.call(v,n[k])&&(l[n[k]]=v[n[k]])}return l}
function e(v,p,l,n){var k,r=arguments.length,w=3>r?p:null===n?n=Object.getOwnPropertyDescriptor(p,l):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)w=Reflect.decorate(v,p,l,n);else for(var x=v.length-1;0<=x;x--)(k=v[x])&&(w=(3>r?k(w):3<r?k(p,l,w):k(p,l))||w);return 3<r&&w&&Object.defineProperty(p,l,w),w}function q(v,p,l,n){return new (l||(l=Promise))(function(k,r){function w(G){try{D(n.next(G))}catch(F){r(F)}}function x(G){try{D(n.throw(G))}catch(F){r(F)}}function D(G){var F;G.done?
k(G.value):(F=G.value,F instanceof l?F:new l(function(A){A(F)})).then(w,x)}D((n=n.apply(v,p||[])).next())})}function t(v,p){function l(D){return function(G){return function(F){if(n)throw new TypeError("Generator is already executing.");for(;w&&(w=0,F[0]&&(x=0)),x;)try{if(n=1,k&&(r=2&F[0]?k.return:F[0]?k.throw||((r=k.return)&&r.call(k),0):k.next)&&!(r=r.call(k,F[1])).done)return r;switch(k=0,r&&(F=[2&F[0],r.value]),F[0]){case 0:case 1:r=F;break;case 4:return x.label++,{value:F[1],done:!1};case 5:x.label++;
k=F[1];F=[0];continue;case 7:F=x.ops.pop();x.trys.pop();continue;default:if(!(r=x.trys,(r=0<r.length&&r[r.length-1])||6!==F[0]&&2!==F[0])){x=0;continue}if(3===F[0]&&(!r||F[1]>r[0]&&F[1]<r[3]))x.label=F[1];else if(6===F[0]&&x.label<r[1])x.label=r[1],r=F;else if(r&&x.label<r[2])x.label=r[2],x.ops.push(F);else{r[2]&&x.ops.pop();x.trys.pop();continue}}F=p.call(v,x)}catch(A){F=[6,A],k=0}finally{n=r=0}if(5&F[0])throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}([D,G])}}var n,k,r,w,x={label:0,sent:function(){if(1&
r[0])throw r[1];return r[1]},trys:[],ops:[]};return w={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w}function u(v,p,l){if(l||2===arguments.length)for(var n,k=0,r=p.length;k<r;k++)!n&&k in p||(n||(n=Array.prototype.slice.call(p,0,k)),n[k]=p[k]);return v.concat(n||Array.prototype.slice.call(p))}d.d(h,"d",function(){return b});d.d(h,"a",function(){return m});d.d(h,"f",function(){return a});d.d(h,"c",function(){return e});d.d(h,"b",function(){return q});
d.d(h,"e",function(){return t});d.d(h,"g",function(){return u});var g=function(v,p){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,n){l.__proto__=n}||function(l,n){for(var k in n)Object.prototype.hasOwnProperty.call(n,k)&&(l[k]=n[k])})(v,p)},m=function(){return(m=Object.assign||function(v){for(var p,l=1,n=arguments.length;l<n;l++)for(var k in p=arguments[l])Object.prototype.hasOwnProperty.call(p,k)&&(v[k]=p[k]);return v}).apply(this,arguments)};Object.create;Object.create},
130:function(c,h){c.exports=J},18:function(c,h){c.exports=S},321:function(c,h,d){d.d(h,"a",function(){return b});var b=function(a){return function(e){13===e.keyCode&&a(e)}}},343:function(c,h){c.exports=f},807:function(c,h,d){d.r(h);var b=d(1),a=d(343);c=d(18);var e=d(130),q=d.n(e),t=d(321);d=function(u){function g(m){m=u.call(this,m)||this;return m.handleToggleKeyDown=Object(t.a)(m.handleToggleFilter.bind(m)),m.handleClearKeyDown=Object(t.a)(m.handleClearFilter.bind(m)),m.state={filterString:""},
m.handleFilterStringChange=m.handleFilterStringChange.bind(m),m.handleToggleFilter=m.handleToggleFilter.bind(m),m.handleClearFilter=m.handleClearFilter.bind(m),m.mapFoldersToLinks=m.mapFoldersToLinks.bind(m),m}return Object(b.d)(g,u),g.prototype.render=function(m){return m(q.a,{key:"folder-accordion",title:a.folders,clearable:!!this.props.folderFilter,onClear:this.handleClearFilter,padding:!1},m("div",{class:"ftr-folder__input-area"},m("input",{class:"ftr-folder__input",type:"search",placeholder:a.filterFolders,
"aria-label":a.filterFolders,oninput:this.handleFilterStringChange,value:this.state.filterString})),m("ul",{class:"ftr-folder__list"},this.mapFoldersToLinks(m)))},g.prototype.handleFilterStringChange=function(m){this.setState({filterString:m.target.value})},g.prototype.handleToggleFilter=function(m){var v=m.target.dataset;m=v.id;v=v.title;this.props.folderFilter&&this.props.folderFilter.id===m||this.props.onFolderSelect({id:m,title:v})},g.prototype.handleClearFilter=function(){this.props.folderFilter&&
this.props.onFolderSelect()},g.prototype.preventCloseDropdown=function(m){m.stopPropagation()},g.prototype.mapFoldersToLinks=function(m){var v=this,p={"ftr-folder__link":!0,"ftr-folder__link--active":!this.props.folderFilter};return this.props.availableFolders?[m("li",{class:"ftr-folder__item",key:"all-user-content"},m("a",{classes:p,"data-id":"all-folder-content","data-title":a.allFolders,onclick:this.handleClearFilter,onkeydown:this.handleClearKeyDown,tabindex:"0"},this.props.folderFilter?m("svg",
{role:"img",viewBox:"0 0 16 16",width:"16",height:"16"},m("path",{fill:"currentColor",d:"M7.3 3.002L5.98 2H3L1.7 3H0v11h15V3zM14 6H1V4h1.04l1.3-1h2.304l1.319 1H14zm0 7H1V7h13z"})):m("svg",{role:"img",viewBox:"0 0 16 16",width:"16",height:"16"},m("path",{fill:"currentColor",d:"M14 6V3l-6.7.002L5.98 2H3L1.7 3H0v11h14l2-8zM1 4h1.041L3.34 3h2.304l1.319 1.002L13 4v2H9L7.7 7h-5L1 11.408zm2.387 4H8.04l1.3-1h5.379l-1.5 6H1.458z"})),a.allFolders))].concat(this.props.availableFolders.filter(function(l){return-1!==
l.title.toLowerCase().indexOf(v.state.filterString.toLowerCase())}).map(function(l){var n,k=Object(b.a)(Object(b.a)({},p),{"ftr-folder__link--active":v.props.folderFilter&&v.props.folderFilter.id===l.id,"ftr-folder__link--home":"root"===l.id});return n="root"===l.id?m("svg",{role:"img",viewBox:"0 0 16 16",width:"16",height:"16"},m("path",{fill:"currentColor",d:"M8 0L6 2V0H3v5L0 8h1v8h5v-6h4v6h5V7.978h1zm6 15h-3V9H5v6H2V7.414l2-2V1h1v3.414l3.001-3L14 7.395z"})):v.props.folderFilter&&v.props.folderFilter.id===
l.id?m("svg",{role:"img",viewBox:"0 0 16 16",width:"16",height:"16"},m("path",{fill:"currentColor",d:"M14 6V3l-6.7.002L5.98 2H3L1.7 3H0v11h14l2-8zM1 4h1.041L3.34 3h2.304l1.319 1.002L13 4v2H9L7.7 7h-5L1 11.408zm2.387 4H8.04l1.3-1h5.379l-1.5 6H1.458z"})):m("svg",{role:"img",viewBox:"0 0 16 16",width:"16",height:"16"},m("path",{fill:"currentColor",d:"M7.3 3.002L5.98 2H3L1.7 3H0v11h15V3zM14 6H1V4h1.04l1.3-1h2.304l1.319 1H14zm0 7H1V7h13z"})),m("li",{class:"ftr-folder__item",key:l.id},m("a",{classes:k,
"data-id":l.id,"data-title":l.title,onclick:v.handleToggleFilter,onkeydown:v.handleToggleKeyDown,tabindex:"0"},n,m("span",{class:"ftr-folder__title"},l.title)))})):null},g}(c.Component);h.default=d}})})},"arcgis-components/Filters/GroupFilter/index":function(){define(["../../Component","../../Dropdowns/AccordionDropdown/index","dojo/i18n!../../Filters/GroupFilter/nls/resources"],function(S,J,f){return function(c){function h(b){if(d[b])return d[b].exports;var a=d[b]={i:b,l:!1,exports:{}};return c[b].call(a.exports,
a,a.exports,h),a.l=!0,a.exports}var d={};return h.m=c,h.c=d,h.d=function(b,a,e){h.o(b,a)||Object.defineProperty(b,a,{enumerable:!0,get:e})},h.r=function(b){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});Object.defineProperty(b,"__esModule",{value:!0})},h.t=function(b,a){if((1&a&&(b=h(b)),8&a)||4&a&&"object"==typeof b&&b&&b.__esModule)return b;var e=Object.create(null);if(h.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:b}),
2&a&&"string"!=typeof b)for(var q in b)h.d(e,q,function(t){return b[t]}.bind(null,q));return e},h.n=function(b){var a=b&&b.__esModule?function(){return b.default}:function(){return b};return h.d(a,"a",a),a},h.o=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)},h.p="",h(h.s=808)}({1:function(c,h,d){function b(v,p){function l(){this.constructor=v}if("function"!=typeof p&&null!==p)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");g(v,p);v.prototype=null===
p?Object.create(p):(l.prototype=p.prototype,new l)}function a(v,p){var l={},n;for(n in v)Object.prototype.hasOwnProperty.call(v,n)&&0>p.indexOf(n)&&(l[n]=v[n]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var k=0;for(n=Object.getOwnPropertySymbols(v);k<n.length;k++)0>p.indexOf(n[k])&&Object.prototype.propertyIsEnumerable.call(v,n[k])&&(l[n[k]]=v[n[k]])}return l}function e(v,p,l,n){var k,r=arguments.length,w=3>r?p:null===n?n=Object.getOwnPropertyDescriptor(p,l):n;if("object"==typeof Reflect&&
"function"==typeof Reflect.decorate)w=Reflect.decorate(v,p,l,n);else for(var x=v.length-1;0<=x;x--)(k=v[x])&&(w=(3>r?k(w):3<r?k(p,l,w):k(p,l))||w);return 3<r&&w&&Object.defineProperty(p,l,w),w}function q(v,p,l,n){return new (l||(l=Promise))(function(k,r){function w(G){try{D(n.next(G))}catch(F){r(F)}}function x(G){try{D(n.throw(G))}catch(F){r(F)}}function D(G){var F;G.done?k(G.value):(F=G.value,F instanceof l?F:new l(function(A){A(F)})).then(w,x)}D((n=n.apply(v,p||[])).next())})}function t(v,p){function l(D){return function(G){return function(F){if(n)throw new TypeError("Generator is already executing.");
for(;w&&(w=0,F[0]&&(x=0)),x;)try{if(n=1,k&&(r=2&F[0]?k.return:F[0]?k.throw||((r=k.return)&&r.call(k),0):k.next)&&!(r=r.call(k,F[1])).done)return r;switch(k=0,r&&(F=[2&F[0],r.value]),F[0]){case 0:case 1:r=F;break;case 4:return x.label++,{value:F[1],done:!1};case 5:x.label++;k=F[1];F=[0];continue;case 7:F=x.ops.pop();x.trys.pop();continue;default:if(!(r=x.trys,(r=0<r.length&&r[r.length-1])||6!==F[0]&&2!==F[0])){x=0;continue}if(3===F[0]&&(!r||F[1]>r[0]&&F[1]<r[3]))x.label=F[1];else if(6===F[0]&&x.label<
r[1])x.label=r[1],r=F;else if(r&&x.label<r[2])x.label=r[2],x.ops.push(F);else{r[2]&&x.ops.pop();x.trys.pop();continue}}F=p.call(v,x)}catch(A){F=[6,A],k=0}finally{n=r=0}if(5&F[0])throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}([D,G])}}var n,k,r,w,x={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return w={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w}function u(v,p,l){if(l||2===arguments.length)for(var n,k=
0,r=p.length;k<r;k++)!n&&k in p||(n||(n=Array.prototype.slice.call(p,0,k)),n[k]=p[k]);return v.concat(n||Array.prototype.slice.call(p))}d.d(h,"d",function(){return b});d.d(h,"a",function(){return m});d.d(h,"f",function(){return a});d.d(h,"c",function(){return e});d.d(h,"b",function(){return q});d.d(h,"e",function(){return t});d.d(h,"g",function(){return u});var g=function(v,p){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,n){l.__proto__=n}||function(l,n){for(var k in n)Object.prototype.hasOwnProperty.call(n,
k)&&(l[k]=n[k])})(v,p)},m=function(){return(m=Object.assign||function(v){for(var p,l=1,n=arguments.length;l<n;l++)for(var k in p=arguments[l])Object.prototype.hasOwnProperty.call(p,k)&&(v[k]=p[k]);return v}).apply(this,arguments)};Object.create;Object.create},130:function(c,h){c.exports=J},18:function(c,h){c.exports=S},321:function(c,h,d){d.d(h,"a",function(){return b});var b=function(a){return function(e){13===e.keyCode&&a(e)}}},344:function(c,h){c.exports=f},808:function(c,h,d){d.r(h);var b=d(1),
a=d(344);c=d(18);var e=d(130),q=d.n(e),t=d(321);d=function(u){function g(m){m=u.call(this,m)||this;return m.handleToggleKeyDown=Object(t.a)(m.handleToggleFilter.bind(m)),m.handleClearKeyDown=Object(t.a)(m.handleClearFilter.bind(m)),m.state={filterString:""},m.handleToggleFilter=m.handleToggleFilter.bind(m),m.handleClearFilter=m.handleClearFilter.bind(m),m.mapGroupsToLinks=m.mapGroupsToLinks.bind(m),m}return Object(b.d)(g,u),g.prototype.render=function(m){var v=this;return m(q.a,{key:"group-accordion",
title:this.props.title||a.groups,clearable:!!this.props.groupFilter,onClear:this.handleClearFilter,padding:!1},m("div",{class:"ftr-group__input-area"},m("input",{class:"ftr-group__input",type:"search",placeholder:a.filterGroups,"aria-label":a.filterGroups,oninput:function(p){v.setState({filterString:p.target.value})},value:this.state.filterString})),m("ul",{class:"ftr-group__list"},this.mapGroupsToLinks(m)))},g.prototype.handleToggleFilter=function(m){var v=m.id;m=m.title;this.props.groupFilter&&
this.props.groupFilter.id===v||this.props.onGroupSelect({id:v,title:m})},g.prototype.handleClearFilter=function(){this.props.groupFilter&&this.props.onGroupSelect()},g.prototype.preventCloseDropdown=function(m){m.stopPropagation()},g.prototype.mapGroupsToLinks=function(m){var v=this;if(!this.props.availableGroups)return null;var p={"ftr-group__link":!0,"ftr-group__link--active":!this.props.groupFilter};return[m("li",{class:"ftr-group__item",key:"all-user-groups"},m("a",{classes:p,"data-id":"all-group-content",
"data-title":a.allGroups,onclick:this.handleClearFilter,onkeydown:this.handleClearKeyDown,tabindex:"0"},m("svg",{role:"img",viewBox:"0 0 16 16",width:"16",height:"16"},m("path",{fill:"currentColor",d:"M8 1.998a2 2 0 1 0-2 2 2 2 0 0 0 2-2zm-2 1a1 1 0 1 1 1-1 1.001 1.001 0 0 1-1 1zm-2 4h1v5a1 1 0 0 1-1-1H3a1 1 0 0 1-1-1v-4a2 2 0 0 1 2-2h3.78a3.05 3.05 0 0 0-.596 1H4a1 1 0 0 0-1 1v4h1zm8-1a2 2 0 1 0-2 2 2 2 0 0 0 2-2zm-2 1a1 1 0 1 1 1-1 1.001 1.001 0 0 1-1 1zm2 1H8a2 2 0 0 0-2 2v4a1 1 0 0 0 1 1h1a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1h1a1 1 0 0 0 1-1v-4a2 2 0 0 0-2-2zm1 3v3h-1v-3h-1v4H9v-4H8v3H7v-4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1z"})),
m("span",{class:"ftr-group__link__text"},a.allGroups)))].concat(this.props.availableGroups.filter(function(l){return-1!==l.title.toLowerCase().indexOf(v.state.filterString.toLowerCase())}).map(function(l){var n,k=Object(b.a)(Object(b.a)({},p),{"ftr-group__link--active":(null===(n=v.props.groupFilter)||void 0===n?void 0:n.id)===l.id});return m("li",{class:"ftr-group__item",key:l.id},m("a",{classes:k,onclick:function(){v.handleToggleFilter(l)},onkeydown:v.handleToggleKeyDown,tabindex:"0"},m("svg",{role:"img",
viewBox:"0 0 16 16",width:"16",height:"16"},m("path",{fill:"currentColor",d:"M8 1.998a2 2 0 1 0-2 2 2 2 0 0 0 2-2zm-2 1a1 1 0 1 1 1-1 1.001 1.001 0 0 1-1 1zm-2 4h1v5a1 1 0 0 1-1-1H3a1 1 0 0 1-1-1v-4a2 2 0 0 1 2-2h3.78a3.05 3.05 0 0 0-.596 1H4a1 1 0 0 0-1 1v4h1zm8-1a2 2 0 1 0-2 2 2 2 0 0 0 2-2zm-2 1a1 1 0 1 1 1-1 1.001 1.001 0 0 1-1 1zm2 1H8a2 2 0 0 0-2 2v4a1 1 0 0 0 1 1h1a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1h1a1 1 0 0 0 1-1v-4a2 2 0 0 0-2-2zm1 3v3h-1v-3h-1v4H9v-4H8v3H7v-4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1z"})),
m("span",{class:"ftr-group__link__text"},l.title)))}))},g}(c.Component);h.default=d}})})},"arcgis-components/Filters/TagsFilter/index":function(){define(["../../Component","../../Dropdowns/AccordionDropdown/index","dojo/i18n!../../Filters/TagsFilter/nls/resources","../../Buttons/CheckToggle"],function(S,J,f,c){return function(h){function d(a){if(b[a])return b[a].exports;var e=b[a]={i:a,l:!1,exports:{}};return h[a].call(e.exports,e,e.exports,d),e.l=!0,e.exports}var b={};return d.m=h,d.c=b,d.d=function(a,
e,q){d.o(a,e)||Object.defineProperty(a,e,{enumerable:!0,get:q})},d.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},d.t=function(a,e){if((1&e&&(a=d(a)),8&e)||4&e&&"object"==typeof a&&a&&a.__esModule)return a;var q=Object.create(null);if(d.r(q),Object.defineProperty(q,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var t in a)d.d(q,t,function(u){return a[u]}.bind(null,
t));return q},d.n=function(a){var e=a&&a.__esModule?function(){return a.default}:function(){return a};return d.d(e,"a",e),e},d.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},d.p="",d(d.s=813)}({1:function(h,d,b){function a(p,l){function n(){this.constructor=p}if("function"!=typeof l&&null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");m(p,l);p.prototype=null===l?Object.create(l):(n.prototype=l.prototype,new n)}function e(p,l){var n={},
k;for(k in p)Object.prototype.hasOwnProperty.call(p,k)&&0>l.indexOf(k)&&(n[k]=p[k]);if(null!=p&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(k=Object.getOwnPropertySymbols(p);r<k.length;r++)0>l.indexOf(k[r])&&Object.prototype.propertyIsEnumerable.call(p,k[r])&&(n[k[r]]=p[k[r]])}return n}function q(p,l,n,k){var r,w=arguments.length,x=3>w?l:null===k?k=Object.getOwnPropertyDescriptor(l,n):k;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)x=Reflect.decorate(p,l,n,k);else for(var D=
p.length-1;0<=D;D--)(r=p[D])&&(x=(3>w?r(x):3<w?r(l,n,x):r(l,n))||x);return 3<w&&x&&Object.defineProperty(l,n,x),x}function t(p,l,n,k){return new (n||(n=Promise))(function(r,w){function x(F){try{G(k.next(F))}catch(A){w(A)}}function D(F){try{G(k.throw(F))}catch(A){w(A)}}function G(F){var A;F.done?r(F.value):(A=F.value,A instanceof n?A:new n(function(y){y(A)})).then(x,D)}G((k=k.apply(p,l||[])).next())})}function u(p,l){function n(G){return function(F){return function(A){if(k)throw new TypeError("Generator is already executing.");
for(;x&&(x=0,A[0]&&(D=0)),D;)try{if(k=1,r&&(w=2&A[0]?r.return:A[0]?r.throw||((w=r.return)&&w.call(r),0):r.next)&&!(w=w.call(r,A[1])).done)return w;switch(r=0,w&&(A=[2&A[0],w.value]),A[0]){case 0:case 1:w=A;break;case 4:return D.label++,{value:A[1],done:!1};case 5:D.label++;r=A[1];A=[0];continue;case 7:A=D.ops.pop();D.trys.pop();continue;default:if(!(w=D.trys,(w=0<w.length&&w[w.length-1])||6!==A[0]&&2!==A[0])){D=0;continue}if(3===A[0]&&(!w||A[1]>w[0]&&A[1]<w[3]))D.label=A[1];else if(6===A[0]&&D.label<
w[1])D.label=w[1],w=A;else if(w&&D.label<w[2])D.label=w[2],D.ops.push(A);else{w[2]&&D.ops.pop();D.trys.pop();continue}}A=l.call(p,D)}catch(y){A=[6,y],r=0}finally{k=w=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([G,F])}}var k,r,w,x,D={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return x={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(x[Symbol.iterator]=function(){return this}),x}function g(p,l,n){if(n||2===arguments.length)for(var k,r=
0,w=l.length;r<w;r++)!k&&r in l||(k||(k=Array.prototype.slice.call(l,0,r)),k[r]=l[r]);return p.concat(k||Array.prototype.slice.call(l))}b.d(d,"d",function(){return a});b.d(d,"a",function(){return v});b.d(d,"f",function(){return e});b.d(d,"c",function(){return q});b.d(d,"b",function(){return t});b.d(d,"e",function(){return u});b.d(d,"g",function(){return g});var m=function(p,l){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,k){n.__proto__=k}||function(n,k){for(var r in k)Object.prototype.hasOwnProperty.call(k,
r)&&(n[r]=k[r])})(p,l)},v=function(){return(v=Object.assign||function(p){for(var l,n=1,k=arguments.length;n<k;n++)for(var r in l=arguments[n])Object.prototype.hasOwnProperty.call(l,r)&&(p[r]=l[r]);return p}).apply(this,arguments)};Object.create;Object.create},130:function(h,d){h.exports=J},18:function(h,d){h.exports=S},345:function(h,d){h.exports=f},356:function(h,d){h.exports=c},813:function(h,d,b){b.r(d);var a=b(1),e=b(345);h=b(18);var q=b(130),t=b.n(q);q=b(356);var u=b.n(q);b=function(g){function m(v){v=
g.call(this,v)||this;return v.handleFilterStringChange=v.handleFilterStringChange.bind(v),v.handleToggleClick=v.handleToggleClick.bind(v),v.handleClearFilter=v.handleClearFilter.bind(v),v}return Object(a.d)(m,g),m.prototype.render=function(v){return v(t.a,{key:"".concat(this.props.key,"-accordion"),title:this.props.title?this.props.title:e.tags,clearable:!!this.props.tagsFilter,onClear:this.handleClearFilter,padding:!1},v("div",{class:"ftr-tags__input-area"},v("input",{class:"ftr-tags__input",type:"search",
placeholder:e.filterTags,"aria-label":e.filterTags,oninput:this.handleFilterStringChange,value:this.props.filterString})),v("ul",{class:"ftr-tags__tree",role:"tree","aria-label":e.tags},0<this.props.availableTags.length?this.mapTagsToToggles(v):this.props.filterString?v("p",{class:"ftr-tags__none"},e.noTags):null))},m.prototype.mapTagsToToggles=function(v){var p=this;return this.props.availableTags.map(function(l){return v(u.a,{key:l.value,name:l.value,value:l.value,selectedToggles:p.props.tagsFilter?
p.props.tagsFilter:void 0,onToggleClick:p.handleToggleClick})})},m.prototype.handleToggleClick=function(v,p){var l;if((p=this.props.tagsFilter)&&p[v]){var n=Object(a.a)({},p);delete n[v];0<Object.keys(n).length?this.props.onTagSelect(n):this.props.onTagSelect()}else p?this.props.onTagSelect(Object(a.a)(Object(a.a)({},p),((n={})[v]=!0,n))):this.props.onTagSelect(((l={})[v]=!0,l))},m.prototype.handleFilterStringChange=function(v){v.preventDefault();this.props.onFilterStringChange(v.target.value)},m.prototype.handleClearFilter=
function(){this.props.tagsFilter&&this.props.onTagSelect()},m}(h.Component);d.default=b}})})},"arcgis-components/Buttons/CheckToggle":function(){define(["../Component"],function(S){return function(J){function f(h){if(c[h])return c[h].exports;var d=c[h]={i:h,l:!1,exports:{}};return J[h].call(d.exports,d,d.exports,f),d.l=!0,d.exports}var c={};return f.m=J,f.c=c,f.d=function(h,d,b){f.o(h,d)||Object.defineProperty(h,d,{enumerable:!0,get:b})},f.r=function(h){"undefined"!=typeof Symbol&&Symbol.toStringTag&&
Object.defineProperty(h,Symbol.toStringTag,{value:"Module"});Object.defineProperty(h,"__esModule",{value:!0})},f.t=function(h,d){if((1&d&&(h=f(h)),8&d)||4&d&&"object"==typeof h&&h&&h.__esModule)return h;var b=Object.create(null);if(f.r(b),Object.defineProperty(b,"default",{enumerable:!0,value:h}),2&d&&"string"!=typeof h)for(var a in h)f.d(b,a,function(e){return h[e]}.bind(null,a));return b},f.n=function(h){var d=h&&h.__esModule?function(){return h.default}:function(){return h};return f.d(d,"a",d),
d},f.o=function(h,d){return Object.prototype.hasOwnProperty.call(h,d)},f.p="",f(f.s=791)}({1:function(J,f,c){function h(g,m){function v(){this.constructor=g}if("function"!=typeof m&&null!==m)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");t(g,m);g.prototype=null===m?Object.create(m):(v.prototype=m.prototype,new v)}function d(g,m){var v={},p;for(p in g)Object.prototype.hasOwnProperty.call(g,p)&&0>m.indexOf(p)&&(v[p]=g[p]);if(null!=g&&"function"==typeof Object.getOwnPropertySymbols){var l=
0;for(p=Object.getOwnPropertySymbols(g);l<p.length;l++)0>m.indexOf(p[l])&&Object.prototype.propertyIsEnumerable.call(g,p[l])&&(v[p[l]]=g[p[l]])}return v}function b(g,m,v,p){var l,n=arguments.length,k=3>n?m:null===p?p=Object.getOwnPropertyDescriptor(m,v):p;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)k=Reflect.decorate(g,m,v,p);else for(var r=g.length-1;0<=r;r--)(l=g[r])&&(k=(3>n?l(k):3<n?l(m,v,k):l(m,v))||k);return 3<n&&k&&Object.defineProperty(m,v,k),k}function a(g,m,v,p){return new (v||
(v=Promise))(function(l,n){function k(x){try{w(p.next(x))}catch(D){n(D)}}function r(x){try{w(p.throw(x))}catch(D){n(D)}}function w(x){var D;x.done?l(x.value):(D=x.value,D instanceof v?D:new v(function(G){G(D)})).then(k,r)}w((p=p.apply(g,m||[])).next())})}function e(g,m){function v(w){return function(x){return function(D){if(p)throw new TypeError("Generator is already executing.");for(;k&&(k=0,D[0]&&(r=0)),r;)try{if(p=1,l&&(n=2&D[0]?l.return:D[0]?l.throw||((n=l.return)&&n.call(l),0):l.next)&&!(n=n.call(l,
D[1])).done)return n;switch(l=0,n&&(D=[2&D[0],n.value]),D[0]){case 0:case 1:n=D;break;case 4:return r.label++,{value:D[1],done:!1};case 5:r.label++;l=D[1];D=[0];continue;case 7:D=r.ops.pop();r.trys.pop();continue;default:if(!(n=r.trys,(n=0<n.length&&n[n.length-1])||6!==D[0]&&2!==D[0])){r=0;continue}if(3===D[0]&&(!n||D[1]>n[0]&&D[1]<n[3]))r.label=D[1];else if(6===D[0]&&r.label<n[1])r.label=n[1],n=D;else if(n&&r.label<n[2])r.label=n[2],r.ops.push(D);else{n[2]&&r.ops.pop();r.trys.pop();continue}}D=m.call(g,
r)}catch(G){D=[6,G],l=0}finally{p=n=0}if(5&D[0])throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}([w,x])}}var p,l,n,k,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return k={next:v(0),throw:v(1),return:v(2)},"function"==typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k}function q(g,m,v){if(v||2===arguments.length)for(var p,l=0,n=m.length;l<n;l++)!p&&l in m||(p||(p=Array.prototype.slice.call(m,0,l)),p[l]=m[l]);return g.concat(p||Array.prototype.slice.call(m))}
c.d(f,"d",function(){return h});c.d(f,"a",function(){return u});c.d(f,"f",function(){return d});c.d(f,"c",function(){return b});c.d(f,"b",function(){return a});c.d(f,"e",function(){return e});c.d(f,"g",function(){return q});var t=function(g,m){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,p){v.__proto__=p}||function(v,p){for(var l in p)Object.prototype.hasOwnProperty.call(p,l)&&(v[l]=p[l])})(g,m)},u=function(){return(u=Object.assign||function(g){for(var m,v=1,p=arguments.length;v<
p;v++)for(var l in m=arguments[v])Object.prototype.hasOwnProperty.call(m,l)&&(g[l]=m[l]);return g}).apply(this,arguments)};Object.create;Object.create},17:function(J,f){J.exports=S},791:function(J,f,c){function h(a,e,q,t,u){return q?q.map(function(g){return a(b,{key:g.value,name:g.displayName,value:"".concat(e,"/").concat(g.value),selectedToggles:u,childOptions:g.children,onToggleClick:t})}):null}c.r(f);var d=c(1),b=function(a){function e(q){q=a.call(this,q)||this;return q.hovered=!1,q.handleToggleClick=
q.handleToggleClick.bind(q),q}return Object(d.d)(e,a),e.prototype.render=function(q){var t=this,u=this.props,g=u.name,m=u.value,v=u.selectedToggles,p=u.childOptions,l=u.onToggleClick;u=u.showChildren;var n=!(!v||!v[m]),k={"btn-check-toggle__item":!0,"btn-check-toggle__item--active":n,"btn-check-toggle__item--hover":this.hovered},r={"btn-check-toggle__button":!0,"btn-check-toggle__button--active":n},w=null;return p&&(w=q("ul",{class:"btn-check-toggle__sub-list"},h(q,m,p,l,v))),q("li",{key:m,classes:k},
q("button",{id:"toggle-".concat(m),key:m,classes:r,value:m,onmousedown:this.preventDefault,onclick:this.handleToggleClick,onmouseover:function(x){x.stopPropagation();t.hovered=!0},onmouseout:function(){t.hovered=!1},tabindex:"0"},q("span",{class:"btn-check-toggle__text",key:"text"},g),this.props.count?q("span",{class:"btn-check-toggle__count",key:"count"},"\u00a0","(".concat(this.props.count,")")):null),u||n?w:null)},e.prototype.preventDefault=function(q){q.preventDefault()},e.prototype.handleToggleClick=
function(q){q.preventDefault();this.props.onToggleClick(this.props.value,this.props.name)},e}(c(17).Component);f.default=b}})})},"arcgis-components/Filters/CollaborationFilter/index":function(){define(["../../Component","../../Dropdowns/AccordionDropdown/index","../../Buttons/CheckToggle","dojo/i18n!../../Filters/CollaborationFilter/nls/resources"],function(S,J,f,c){return function(h){function d(a){if(b[a])return b[a].exports;var e=b[a]={i:a,l:!1,exports:{}};return h[a].call(e.exports,e,e.exports,
d),e.l=!0,e.exports}var b={};return d.m=h,d.c=b,d.d=function(a,e,q){d.o(a,e)||Object.defineProperty(a,e,{enumerable:!0,get:q})},d.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},d.t=function(a,e){if((1&e&&(a=d(a)),8&e)||4&e&&"object"==typeof a&&a&&a.__esModule)return a;var q=Object.create(null);if(d.r(q),Object.defineProperty(q,"default",{enumerable:!0,value:a}),2&e&&"string"!=
typeof a)for(var t in a)d.d(q,t,function(u){return a[u]}.bind(null,t));return q},d.n=function(a){var e=a&&a.__esModule?function(){return a.default}:function(){return a};return d.d(e,"a",e),e},d.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},d.p="",d(d.s=814)}({1:function(h,d,b){function a(p,l){function n(){this.constructor=p}if("function"!=typeof l&&null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");m(p,l);p.prototype=null===l?Object.create(l):
(n.prototype=l.prototype,new n)}function e(p,l){var n={},k;for(k in p)Object.prototype.hasOwnProperty.call(p,k)&&0>l.indexOf(k)&&(n[k]=p[k]);if(null!=p&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(k=Object.getOwnPropertySymbols(p);r<k.length;r++)0>l.indexOf(k[r])&&Object.prototype.propertyIsEnumerable.call(p,k[r])&&(n[k[r]]=p[k[r]])}return n}function q(p,l,n,k){var r,w=arguments.length,x=3>w?l:null===k?k=Object.getOwnPropertyDescriptor(l,n):k;if("object"==typeof Reflect&&"function"==
typeof Reflect.decorate)x=Reflect.decorate(p,l,n,k);else for(var D=p.length-1;0<=D;D--)(r=p[D])&&(x=(3>w?r(x):3<w?r(l,n,x):r(l,n))||x);return 3<w&&x&&Object.defineProperty(l,n,x),x}function t(p,l,n,k){return new (n||(n=Promise))(function(r,w){function x(F){try{G(k.next(F))}catch(A){w(A)}}function D(F){try{G(k.throw(F))}catch(A){w(A)}}function G(F){var A;F.done?r(F.value):(A=F.value,A instanceof n?A:new n(function(y){y(A)})).then(x,D)}G((k=k.apply(p,l||[])).next())})}function u(p,l){function n(G){return function(F){return function(A){if(k)throw new TypeError("Generator is already executing.");
for(;x&&(x=0,A[0]&&(D=0)),D;)try{if(k=1,r&&(w=2&A[0]?r.return:A[0]?r.throw||((w=r.return)&&w.call(r),0):r.next)&&!(w=w.call(r,A[1])).done)return w;switch(r=0,w&&(A=[2&A[0],w.value]),A[0]){case 0:case 1:w=A;break;case 4:return D.label++,{value:A[1],done:!1};case 5:D.label++;r=A[1];A=[0];continue;case 7:A=D.ops.pop();D.trys.pop();continue;default:if(!(w=D.trys,(w=0<w.length&&w[w.length-1])||6!==A[0]&&2!==A[0])){D=0;continue}if(3===A[0]&&(!w||A[1]>w[0]&&A[1]<w[3]))D.label=A[1];else if(6===A[0]&&D.label<
w[1])D.label=w[1],w=A;else if(w&&D.label<w[2])D.label=w[2],D.ops.push(A);else{w[2]&&D.ops.pop();D.trys.pop();continue}}A=l.call(p,D)}catch(y){A=[6,y],r=0}finally{k=w=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([G,F])}}var k,r,w,x,D={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return x={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(x[Symbol.iterator]=function(){return this}),x}function g(p,l,n){if(n||2===arguments.length)for(var k,r=
0,w=l.length;r<w;r++)!k&&r in l||(k||(k=Array.prototype.slice.call(l,0,r)),k[r]=l[r]);return p.concat(k||Array.prototype.slice.call(l))}b.d(d,"d",function(){return a});b.d(d,"a",function(){return v});b.d(d,"f",function(){return e});b.d(d,"c",function(){return q});b.d(d,"b",function(){return t});b.d(d,"e",function(){return u});b.d(d,"g",function(){return g});var m=function(p,l){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,k){n.__proto__=k}||function(n,k){for(var r in k)Object.prototype.hasOwnProperty.call(k,
r)&&(n[r]=k[r])})(p,l)},v=function(){return(v=Object.assign||function(p){for(var l,n=1,k=arguments.length;n<k;n++)for(var r in l=arguments[n])Object.prototype.hasOwnProperty.call(l,r)&&(p[r]=l[r]);return p}).apply(this,arguments)};Object.create;Object.create},130:function(h,d){h.exports=J},18:function(h,d){h.exports=S},356:function(h,d){h.exports=f},410:function(h,d){h.exports=c},814:function(h,d,b){b.r(d);var a=b(1),e=b(410);h=b(18);var q=b(130),t=b.n(q);q=b(356);var u=b.n(q);b=function(g){function m(v){v=
g.call(this,v)||this;return v.handleToggleClick=v.handleToggleClick.bind(v),v.handleClearFilter=v.handleClearFilter.bind(v),v}return Object(a.d)(m,g),m.prototype.render=function(v){return v(t.a,{key:"".concat(this.props.key,"-accordion"),title:this.props.title?this.props.title:e.collaboration,clearable:this.getSelected(),onClear:this.handleClearFilter},v("ul",{class:"ftr-collaborations__tree",role:"tree","aria-label":e.collaborations},0<Object.keys(this.props.collaborationsFilter).length?this.mapCollaborationsToToggles(v):
v("p",{class:"ftr-collaborations__none"},e.noCollaborations)))},m.prototype.getSelected=function(){var v=this.props.collaborationsFilter;return Object.keys(this.props.collaborationsFilter).some(function(p){var l;return!!v[p].selected||(null===(l=v[p].participants)||void 0===l?void 0:l.some(function(n){return!!n.selected}))})},m.prototype.mapCollaborationsToToggles=function(v){var p=this;this.props.collaborationsFilter.sort(function(k,r){return k.label<r.label?-1:k.label>r.label?1:0});var l=this.props.collaborationsFilter,
n=Object.keys(this.props.collaborationsFilter).map(function(k){var r,w=((r={})[k]=l[k].selected,r);r=l[k].participants?l[k].participants.map(function(x){var D;return w=Object(a.a)(Object(a.a)({},w),((D={})["".concat(k,"/").concat(x.value)]=x.selected,D)),{value:x.value,displayName:x.label,onToggleClick:p.handleToggleClick,selectedToggles:w}}):[];return v(u.a,{key:l[k].value,name:l[k].label,value:l[k].value,childOptions:r,selectedToggles:w,onToggleClick:p.handleToggleClick,showChildren:!0})});return n.sort(function(k,
r){if(k.children[0].children[0].text&&r.children[0].children[0].text){k=k.children[0].children[0].text.toLowerCase();r=r.children[0].children[0].text.toLowerCase();if(k<r)return-1;if(k>r)return 1}return 0}),n},m.prototype.handleToggleClick=function(v,p){var l=this.props.collaborationsFilter;if(l){if(l[v])l[v].selected||Object.keys(l).forEach(function(k){return l[k].selected=!1}),Object.keys(l).forEach(function(k){l[k].participants.forEach(function(r){r.selected=!1})}),l[v].selected=!l[v].selected;
else{var n=v.split("/")[1];Object.keys(l).forEach(function(k){l[k].selected=!1;l[k].participants.forEach(function(r){r.value===n?r.selected=!r.selected:r.selected=!1})})}this.props.onCollaborationSelect(l)}},m.prototype.handleFilterStringChange=function(v){},m.prototype.handleClearFilter=function(){if(this.props.collaborationsFilter){var v=this.props.collaborationsFilter;Object.keys(v).forEach(function(p){v[p].selected=!1;v[p].participants.forEach(function(l){return l.selected=!1})});this.props.onCollaborationSelect(v)}},
m}(h.Component);d.default=b}})})},"arcgis-components/Dropdowns/FilterController/index":function(){define(["../../Component","../../Buttons/FilterChip/index","dojo/i18n!../../Dropdowns/FilterController/nls/resources"],function(S,J,f){return function(c){function h(b){if(d[b])return d[b].exports;var a=d[b]={i:b,l:!1,exports:{}};return c[b].call(a.exports,a,a.exports,h),a.l=!0,a.exports}var d={};return h.m=c,h.c=d,h.d=function(b,a,e){h.o(b,a)||Object.defineProperty(b,a,{enumerable:!0,get:e})},h.r=function(b){"undefined"!=
typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});Object.defineProperty(b,"__esModule",{value:!0})},h.t=function(b,a){if((1&a&&(b=h(b)),8&a)||4&a&&"object"==typeof b&&b&&b.__esModule)return b;var e=Object.create(null);if(h.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:b}),2&a&&"string"!=typeof b)for(var q in b)h.d(e,q,function(t){return b[t]}.bind(null,q));return e},h.n=function(b){var a=b&&b.__esModule?function(){return b.default}:function(){return b};
return h.d(a,"a",a),a},h.o=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)},h.p="",h(h.s=802)}({1:function(c,h,d){function b(v,p){function l(){this.constructor=v}if("function"!=typeof p&&null!==p)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");g(v,p);v.prototype=null===p?Object.create(p):(l.prototype=p.prototype,new l)}function a(v,p){var l={},n;for(n in v)Object.prototype.hasOwnProperty.call(v,n)&&0>p.indexOf(n)&&(l[n]=v[n]);if(null!=v&&"function"==
typeof Object.getOwnPropertySymbols){var k=0;for(n=Object.getOwnPropertySymbols(v);k<n.length;k++)0>p.indexOf(n[k])&&Object.prototype.propertyIsEnumerable.call(v,n[k])&&(l[n[k]]=v[n[k]])}return l}function e(v,p,l,n){var k,r=arguments.length,w=3>r?p:null===n?n=Object.getOwnPropertyDescriptor(p,l):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)w=Reflect.decorate(v,p,l,n);else for(var x=v.length-1;0<=x;x--)(k=v[x])&&(w=(3>r?k(w):3<r?k(p,l,w):k(p,l))||w);return 3<r&&w&&Object.defineProperty(p,
l,w),w}function q(v,p,l,n){return new (l||(l=Promise))(function(k,r){function w(G){try{D(n.next(G))}catch(F){r(F)}}function x(G){try{D(n.throw(G))}catch(F){r(F)}}function D(G){var F;G.done?k(G.value):(F=G.value,F instanceof l?F:new l(function(A){A(F)})).then(w,x)}D((n=n.apply(v,p||[])).next())})}function t(v,p){function l(D){return function(G){return function(F){if(n)throw new TypeError("Generator is already executing.");for(;w&&(w=0,F[0]&&(x=0)),x;)try{if(n=1,k&&(r=2&F[0]?k.return:F[0]?k.throw||
((r=k.return)&&r.call(k),0):k.next)&&!(r=r.call(k,F[1])).done)return r;switch(k=0,r&&(F=[2&F[0],r.value]),F[0]){case 0:case 1:r=F;break;case 4:return x.label++,{value:F[1],done:!1};case 5:x.label++;k=F[1];F=[0];continue;case 7:F=x.ops.pop();x.trys.pop();continue;default:if(!(r=x.trys,(r=0<r.length&&r[r.length-1])||6!==F[0]&&2!==F[0])){x=0;continue}if(3===F[0]&&(!r||F[1]>r[0]&&F[1]<r[3]))x.label=F[1];else if(6===F[0]&&x.label<r[1])x.label=r[1],r=F;else if(r&&x.label<r[2])x.label=r[2],x.ops.push(F);
else{r[2]&&x.ops.pop();x.trys.pop();continue}}F=p.call(v,x)}catch(A){F=[6,A],k=0}finally{n=r=0}if(5&F[0])throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}([D,G])}}var n,k,r,w,x={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return w={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w}function u(v,p,l){if(l||2===arguments.length)for(var n,k=0,r=p.length;k<r;k++)!n&&k in p||(n||(n=Array.prototype.slice.call(p,0,k)),
n[k]=p[k]);return v.concat(n||Array.prototype.slice.call(p))}d.d(h,"d",function(){return b});d.d(h,"a",function(){return m});d.d(h,"f",function(){return a});d.d(h,"c",function(){return e});d.d(h,"b",function(){return q});d.d(h,"e",function(){return t});d.d(h,"g",function(){return u});var g=function(v,p){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,n){l.__proto__=n}||function(l,n){for(var k in n)Object.prototype.hasOwnProperty.call(n,k)&&(l[k]=n[k])})(v,p)},m=function(){return(m=
Object.assign||function(v){for(var p,l=1,n=arguments.length;l<n;l++)for(var k in p=arguments[l])Object.prototype.hasOwnProperty.call(p,k)&&(v[k]=p[k]);return v}).apply(this,arguments)};Object.create;Object.create},18:function(c,h){c.exports=S},409:function(c,h){c.exports=J},425:function(c,h){c.exports=f},802:function(c,h,d){function b(u){u.preventDefault()}d.r(h);var a=d(1),e=d(425);c=d(18);var q=d(409),t=d.n(q);d=function(u){function g(m){m=u.call(this,m)||this;return m.toggleFilterDisplay=m.toggleFilterDisplay.bind(m),
m.state={open:!!m.props.startOpen},m}return Object(a.d)(g,u),g.prototype.render=function(m){var v,p=Object(a.g)([],this.props.filters,!0),l={"filter-controller__expand-btn":!0,"filter-controller__expand-btn--active":this.state.open,"filter-controller__expand-btn--dark":"light"===this.props.theme},n={"filter-controller__container":!0,"filter-controller__container--light":"light"===this.props.theme},k={"filter-controller__chip-container":!0,"margin-right-half":!0,"filter-controller__chip-container--full-width":"full-width"===
this.props.mode},r="light"===this.props.theme?"dark":"light";1<this.props.filters.length&&(v=m("button",{key:"filter-controller-toggle-btn",classes:l,onclick:this.toggleFilterDisplay,onmousedown:b},"".concat(this.state.open?"-":"+"," ").concat(this.props.filters.length-1)));if(l=p.shift())return this.state.open?m("div",{classes:n},m("span",{class:"filter-controller__label margin-right-half"},this.props.showLabel),m("div",{classes:k},m(t.a,{filterId:l.filterId,handleRemoveFilter:l.onRemove,key:l.filterId,
text:l.text,theme:r,static:l.static}),p.map(function(w){return m(t.a,{filterId:w.filterId,handleRemoveFilter:w.onRemove,key:w.filterId,text:w.text,theme:r,static:w.static})}),v,this.clearableFilters(Object(a.g)([l],p,!0))?m("button",{class:"filter-controller__clear-btn",onclick:this.props.onClear},e.clearAll):null)):m("div",{classes:n},m("span",{class:"filter-controller__label"},this.props.showLabel),m("div",{classes:k},m(t.a,{filterId:l.filterId,handleRemoveFilter:l.onRemove,key:l.filterId,text:l.text,
theme:r,static:l.static}),v,this.clearableFilters(Object(a.g)([l],p,!0))?m("button",{class:"filter-controller__clear-btn",onclick:this.props.onClear},e.clearAll):null))},g.prototype.toggleFilterDisplay=function(){this.setState({open:!this.state.open})},g.prototype.clearableFilters=function(m){return m.some(function(v){return!v.static})},g}(c.Component);h.default=d}})})},"arcgis-components/Management/LazyLoader":function(){define(["../Component"],function(S){return function(J){function f(h){if(c[h])return c[h].exports;
var d=c[h]={i:h,l:!1,exports:{}};return J[h].call(d.exports,d,d.exports,f),d.l=!0,d.exports}var c={};return f.m=J,f.c=c,f.d=function(h,d,b){f.o(h,d)||Object.defineProperty(h,d,{enumerable:!0,get:b})},f.r=function(h){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"});Object.defineProperty(h,"__esModule",{value:!0})},f.t=function(h,d){if((1&d&&(h=f(h)),8&d)||4&d&&"object"==typeof h&&h&&h.__esModule)return h;var b=Object.create(null);if(f.r(b),
Object.defineProperty(b,"default",{enumerable:!0,value:h}),2&d&&"string"!=typeof h)for(var a in h)f.d(b,a,function(e){return h[e]}.bind(null,a));return b},f.n=function(h){var d=h&&h.__esModule?function(){return h.default}:function(){return h};return f.d(d,"a",d),d},f.o=function(h,d){return Object.prototype.hasOwnProperty.call(h,d)},f.p="",f(f.s=834)}({1:function(J,f,c){function h(g,m){function v(){this.constructor=g}if("function"!=typeof m&&null!==m)throw new TypeError("Class extends value "+String(m)+
" is not a constructor or null");t(g,m);g.prototype=null===m?Object.create(m):(v.prototype=m.prototype,new v)}function d(g,m){var v={},p;for(p in g)Object.prototype.hasOwnProperty.call(g,p)&&0>m.indexOf(p)&&(v[p]=g[p]);if(null!=g&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(p=Object.getOwnPropertySymbols(g);l<p.length;l++)0>m.indexOf(p[l])&&Object.prototype.propertyIsEnumerable.call(g,p[l])&&(v[p[l]]=g[p[l]])}return v}function b(g,m,v,p){var l,n=arguments.length,k=3>n?m:null===p?
p=Object.getOwnPropertyDescriptor(m,v):p;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)k=Reflect.decorate(g,m,v,p);else for(var r=g.length-1;0<=r;r--)(l=g[r])&&(k=(3>n?l(k):3<n?l(m,v,k):l(m,v))||k);return 3<n&&k&&Object.defineProperty(m,v,k),k}function a(g,m,v,p){return new (v||(v=Promise))(function(l,n){function k(x){try{w(p.next(x))}catch(D){n(D)}}function r(x){try{w(p.throw(x))}catch(D){n(D)}}function w(x){var D;x.done?l(x.value):(D=x.value,D instanceof v?D:new v(function(G){G(D)})).then(k,
r)}w((p=p.apply(g,m||[])).next())})}function e(g,m){function v(w){return function(x){return function(D){if(p)throw new TypeError("Generator is already executing.");for(;k&&(k=0,D[0]&&(r=0)),r;)try{if(p=1,l&&(n=2&D[0]?l.return:D[0]?l.throw||((n=l.return)&&n.call(l),0):l.next)&&!(n=n.call(l,D[1])).done)return n;switch(l=0,n&&(D=[2&D[0],n.value]),D[0]){case 0:case 1:n=D;break;case 4:return r.label++,{value:D[1],done:!1};case 5:r.label++;l=D[1];D=[0];continue;case 7:D=r.ops.pop();r.trys.pop();continue;
default:if(!(n=r.trys,(n=0<n.length&&n[n.length-1])||6!==D[0]&&2!==D[0])){r=0;continue}if(3===D[0]&&(!n||D[1]>n[0]&&D[1]<n[3]))r.label=D[1];else if(6===D[0]&&r.label<n[1])r.label=n[1],n=D;else if(n&&r.label<n[2])r.label=n[2],r.ops.push(D);else{n[2]&&r.ops.pop();r.trys.pop();continue}}D=m.call(g,r)}catch(G){D=[6,G],l=0}finally{p=n=0}if(5&D[0])throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}([w,x])}}var p,l,n,k,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return k=
{next:v(0),throw:v(1),return:v(2)},"function"==typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k}function q(g,m,v){if(v||2===arguments.length)for(var p,l=0,n=m.length;l<n;l++)!p&&l in m||(p||(p=Array.prototype.slice.call(m,0,l)),p[l]=m[l]);return g.concat(p||Array.prototype.slice.call(m))}c.d(f,"d",function(){return h});c.d(f,"a",function(){return u});c.d(f,"f",function(){return d});c.d(f,"c",function(){return b});c.d(f,"b",function(){return a});c.d(f,"e",function(){return e});c.d(f,"g",
function(){return q});var t=function(g,m){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,p){v.__proto__=p}||function(v,p){for(var l in p)Object.prototype.hasOwnProperty.call(p,l)&&(v[l]=p[l])})(g,m)},u=function(){return(u=Object.assign||function(g){for(var m,v=1,p=arguments.length;v<p;v++)for(var l in m=arguments[v])Object.prototype.hasOwnProperty.call(m,l)&&(g[l]=m[l]);return g}).apply(this,arguments)};Object.create;Object.create},17:function(J,f){J.exports=S},834:function(J,
f,c){c.r(f);var h=c(1);J=function(d){function b(){return null!==d&&d.apply(this,arguments)||this}return Object(h.d)(b,d),b.prototype.componentDidConnect=function(){var a=this;try{var e=window.require.on("error",function(q){throw Error("Could not lazy-load the '".concat(a.props.path,"' component. The 'arcgis-components' submodule MUST be registered as 'arcgis-components' in dojoConfig packages in order for lazy component loading to function properly."));});window.require(["arcgis-components/".concat(this.props.path)],
function(q){e.remove();a.setState({Cmp:q.default})})}catch(q){this.props.onFail&&this.props.onFail(q)}},b.prototype.render=function(a){return this.state.Cmp?a(this.state.Cmp,Object(h.a)({},this.props.componentProps)):this.props.children&&this.props.children[0]?this.props.children[0]:a("div")},b}(c(17).Component);f.default=J}})})},"arcgis-components/ItemCards/AnalysisCard/index":function(){define("../../Component dojo/i18n!../../ItemCards/nls/resources dojo/date/locale dojo/number ../../Badges/Retired ../../Loaders/LoaderIcon ../../Dropdowns/Ago2018Dropdown ../../Badges/Authoritative ../../Badges/Collaboration ../../Badges/Deprecated ../../Badges/LivingAtlas ../../Badges/Marketplace ../../Badges/OpenData ../../Badges/Premium ../../Badges/Subscriber ../../Badges/PublicDataCollection ../../Badges/Solution ../../Badges/Registered".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n){return function(k){function r(x){if(w[x])return w[x].exports;var D=w[x]={i:x,l:!1,exports:{}};return k[x].call(D.exports,D,D.exports,r),D.l=!0,D.exports}var w={};return r.m=k,r.c=w,r.d=function(x,D,G){r.o(x,D)||Object.defineProperty(x,D,{enumerable:!0,get:G})},r.r=function(x){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(x,Symbol.toStringTag,{value:"Module"});Object.defineProperty(x,"__esModule",{value:!0})},r.t=function(x,D){if((1&
D&&(x=r(x)),8&D)||4&D&&"object"==typeof x&&x&&x.__esModule)return x;var G=Object.create(null);if(r.r(G),Object.defineProperty(G,"default",{enumerable:!0,value:x}),2&D&&"string"!=typeof x)for(var F in x)r.d(G,F,function(A){return x[A]}.bind(null,F));return G},r.n=function(x){var D=x&&x.__esModule?function(){return x.default}:function(){return x};return r.d(D,"a",D),D},r.o=function(x,D){return Object.prototype.hasOwnProperty.call(x,D)},r.p="",r(r.s=825)}({1:function(k,r,w){function x(C,H){function E(){this.constructor=
C}if("function"!=typeof H&&null!==H)throw new TypeError("Class extends value "+String(H)+" is not a constructor or null");z(C,H);C.prototype=null===H?Object.create(H):(E.prototype=H.prototype,new E)}function D(C,H){var E={},K;for(K in C)Object.prototype.hasOwnProperty.call(C,K)&&0>H.indexOf(K)&&(E[K]=C[K]);if(null!=C&&"function"==typeof Object.getOwnPropertySymbols){var I=0;for(K=Object.getOwnPropertySymbols(C);I<K.length;I++)0>H.indexOf(K[I])&&Object.prototype.propertyIsEnumerable.call(C,K[I])&&
(E[K[I]]=C[K[I]])}return E}function G(C,H,E,K){var I,L=arguments.length,M=3>L?H:null===K?K=Object.getOwnPropertyDescriptor(H,E):K;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)M=Reflect.decorate(C,H,E,K);else for(var N=C.length-1;0<=N;N--)(I=C[N])&&(M=(3>L?I(M):3<L?I(H,E,M):I(H,E))||M);return 3<L&&M&&Object.defineProperty(H,E,M),M}function F(C,H,E,K){return new (E||(E=Promise))(function(I,L){function M(R){try{P(K.next(R))}catch(Y){L(Y)}}function N(R){try{P(K.throw(R))}catch(Y){L(Y)}}
function P(R){var Y;R.done?I(R.value):(Y=R.value,Y instanceof E?Y:new E(function(ja){ja(Y)})).then(M,N)}P((K=K.apply(C,H||[])).next())})}function A(C,H){function E(P){return function(R){return function(Y){if(K)throw new TypeError("Generator is already executing.");for(;M&&(M=0,Y[0]&&(N=0)),N;)try{if(K=1,I&&(L=2&Y[0]?I.return:Y[0]?I.throw||((L=I.return)&&L.call(I),0):I.next)&&!(L=L.call(I,Y[1])).done)return L;switch(I=0,L&&(Y=[2&Y[0],L.value]),Y[0]){case 0:case 1:L=Y;break;case 4:return N.label++,
{value:Y[1],done:!1};case 5:N.label++;I=Y[1];Y=[0];continue;case 7:Y=N.ops.pop();N.trys.pop();continue;default:if(!(L=N.trys,(L=0<L.length&&L[L.length-1])||6!==Y[0]&&2!==Y[0])){N=0;continue}if(3===Y[0]&&(!L||Y[1]>L[0]&&Y[1]<L[3]))N.label=Y[1];else if(6===Y[0]&&N.label<L[1])N.label=L[1],L=Y;else if(L&&N.label<L[2])N.label=L[2],N.ops.push(Y);else{L[2]&&N.ops.pop();N.trys.pop();continue}}Y=H.call(C,N)}catch(ja){Y=[6,ja],I=0}finally{K=L=0}if(5&Y[0])throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}([P,
R])}}var K,I,L,M,N={label:0,sent:function(){if(1&L[0])throw L[1];return L[1]},trys:[],ops:[]};return M={next:E(0),throw:E(1),return:E(2)},"function"==typeof Symbol&&(M[Symbol.iterator]=function(){return this}),M}function y(C,H,E){if(E||2===arguments.length)for(var K,I=0,L=H.length;I<L;I++)!K&&I in H||(K||(K=Array.prototype.slice.call(H,0,I)),K[I]=H[I]);return C.concat(K||Array.prototype.slice.call(H))}w.d(r,"d",function(){return x});w.d(r,"a",function(){return B});w.d(r,"f",function(){return D});
w.d(r,"c",function(){return G});w.d(r,"b",function(){return F});w.d(r,"e",function(){return A});w.d(r,"g",function(){return y});var z=function(C,H){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,K){E.__proto__=K}||function(E,K){for(var I in K)Object.prototype.hasOwnProperty.call(K,I)&&(E[I]=K[I])})(C,H)},B=function(){return(B=Object.assign||function(C){for(var H,E=1,K=arguments.length;E<K;E++)for(var I in H=arguments[E])Object.prototype.hasOwnProperty.call(H,I)&&(C[I]=
H[I]);return C}).apply(this,arguments)};Object.create;Object.create},111:function(k,r){k.exports=J},114:function(k,r,w){w.d(r,"a",function(){return D});var x=w(1);k=w(15);var D=Object(k.a)(function(G,F){var A=Object(x.a),y=Object(x.a)({},F),z=F.type;F=F.typeKeywords?F.typeKeywords:[];var B=null==z?void 0:z.toLowerCase(),C=z=!1,H=!1,E=!1;if("ogcfeatureserver"===B)F="featureshosted";else if(0<(null==B?void 0:B.indexOf("service"))||"feature collection"===B||"kml"===B||"wms"===B||"wmts"===B||"wfs"===
B){var K=-1<F.indexOf("Hosted Service");"feature service"===B||"feature collection"===B||"kml"===B||"wfs"===B?(E=-1<F.indexOf("Table"),z=-1<F.indexOf("Route Layer"),C=-1<F.indexOf("Markup"),F=(H=-1!==F.indexOf("Spatiotemporal"))&&E?"spatiotemporaltable":E?"table":z?"routelayer":C?"markup":H?"spatiotemporal":K?"featureshosted":"features"):"map service"===B||"wms"===B||"wmts"===B?F=K||-1<F.indexOf("Tiled")||"wmts"===B?"maptiles":"mapimages":"scene service"===B?F=-1<F.indexOf("Line")?"sceneweblayerline":
-1<F.indexOf("3DObject")?"sceneweblayermultipatch":-1<F.indexOf("Point")?"sceneweblayerpoint":-1<F.indexOf("IntegratedMesh")?"sceneweblayermesh":-1<F.indexOf("PointCloud")?"sceneweblayerpointcloud":-1<F.indexOf("Polygon")?"sceneweblayerpolygon":-1<F.indexOf("Building")?"sceneweblayerbuilding":-1<F.indexOf("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===B?(z=-1<F.indexOf("Elevation 3D Layer"),F=-1<F.indexOf("Tiled Imagery"),F=z?"elevationlayer":F?"tiledimagerylayer":"imagery"):F="stream service"===
B?"streamlayer":"vector tile service"===B?"vectortile":"datastore catalog service"===B?"datastorecollection":"geocoding service"===B?"geocodeservice":"geoprocessing service"===B&&-1<F.indexOf("Web Tool")?"tool":"layers"}else F="web map"===B||"cityengine web scene"===B?"maps":"web scene"===B?-1<F.indexOf("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===B&&-1<(null==F?void 0:F.indexOf("configurableApp"))?"instantapps":"web mapping application"===B||"mobile application"===
B||"application"===B||"operation view"===B||"desktop application"===B?"apps":"map document"===B||"map package"===B||"published map"===B||"scene document"===B||"globe document"===B||"basemap package"===B||"mobile basemap package"===B||"mobile map package"===B||"project package"===B||"project template"===B||"pro map"===B||"layout"===B||"layer"===B&&-1<F.indexOf("ArcGIS Pro")||"explorer map"===B&&-1<F.indexOf("Explorer Document")?"mapsgray":"service definition"===B||"csv"===B||"administrative report"===
B||"shapefile"===B||"cad drawing"===B||"geojson"===B||"360 vr experience"===B||"netcdf"===B?"datafiles":"explorer add in"===B||"desktop add in"===B||"windows viewer add in"===B||"windows viewer configuration"===B?"appsgray":"arcgis pro add in"===B||"arcgis pro configuration"===B?"addindesktop":"rule package"===B||"file geodatabase"===B||"csv collection"===B||"kml collection"===B||"windows mobile package"===B||"map template"===B||"desktop application template"===B||"arcpad package"===B||"code sample"===
B||"form"===B||"document link"===B||"vector tile package"===B||"operations dashboard add in"===B||"rules package"===B||"image"===B||"workflow manager package"===B||"explorer map"===B&&-1<F.indexOf("Explorer Mapping Application")||-1<F.indexOf("Document")?"datafilesgray":"network analysis service"===B||"geoprocessing service"===B||"geodata service"===B||"geometry service"===B||"geoprocessing package"===B||"locator package"===B||"geoprocessing sample"===B||"workflow manager service"===B||"raster function template"===
B||"deep learning package"===B?"toolsgray":"layer"===B||"layer package"===B||"explorer layer"===B?"layersgray":"scene package"===B?"scenepackage":"tile package"===B?"tilepackage":"storymap"===B?"storymap":"storymap theme"===B?"storymaptheme":"web experience"===B?"experiencebuilder":"web experience template"===B?"webexperiencetemplate":"task file"===B?"taskfile":"report template"===B?"report-template":"statistical data collection"===B?"statisticaldatacollection":"insights workbook"===B?"workbook":
"insights model"===B?"insightsmodel":"insights page"===B?"insightspage":"hub initiative"===B?"hubinitiative":"hub page"===B?"hubpage":"hub site application"===B?"hubsite":"relational database connection"===B?"relationaldatabaseconnection":"big data file share"===B||"data store"===B?"datastorecollection":"image collection"===B?"imagecollection":"desktop style"===B?"desktopstyle":"style"===B?"style":"dashboard"===B?"dashboard":"feed"===B?"feed":"real time analytic"===B?"realtimeanalytics":"big data analytic"===
B?"bigdataanalytics":"notebook"===B?"notebook":"notebook code snippets"===B||"notebook code snippet library"===B?"notebookcodesnippets":"maps";G="".concat(G,"/").concat(F).concat(16,".png");return A(y,{iconURI:G})})},117:function(k,r,w){w.d(r,"a",function(){return D});var x=w(1);k=w(15);var D=Object(k.a)(function(G,F){var A=Object(x.a),y=Object(x.a)({},F),z,B,C,H="notebook"!==(null===(z=F.type)||void 0===z?void 0:z.toLowerCase())?"default_thumb.png":"notebook-thumb.png";"notebook code snippets"!==
(null===(B=F.type)||void 0===B?void 0:B.toLowerCase())&&"notebook code snippet library"!==(null===(C=F.type)||void 0===C?void 0:C.toLowerCase())||(H="notebook-code-snippet-thumb.png");z="".concat(G.baseUrl,"/home/js/arcgisonline/css/images/").concat(H);G=(F.thumbnail&&(z="".concat(G.restUrl,"/content/items/").concat(F.id,"/info/").concat(F.thumbnail).concat(G.credential?"?token\x3d".concat(G.credential.token):"")),z);return A(y,{thumbURI:G})})},118:function(k,r,w){w.d(r,"a",function(){return G});
var x=w(1);k=w(15);var D=function(F,A){return A.description?A.description.replace(/src=('|")js\/jsapi\/esri\//g,function(y){return"src\x3d".concat('"'===y[4]?'"':"'").concat(F.baseUrl,"/home/js/jsapi/esri/")}):void 0},G=Object(k.a)(function(F,A){return Object(x.a)(Object(x.a)({},A),{patchedDescription:D(F,A)})})},119:function(k,r,w){w.d(r,"a",function(){return F});var x=w(1),D=w(121);k=w(15);var G=w(61),F=Object(k.a)(function(A,y){var z=Object(x.a),B=Object(x.a)({},y),C,H=y.type,E=y.typeKeywords||
[],K=H;A=(null==A?void 0:A.portalUser)||(null==A?void 0:A.user);if("Feature Service"===H||"Feature Collection"===H){if(K=-1<E.indexOf("Table")?"Table":-1<E.indexOf("Route Layer")?"Route Layer":-1<E.indexOf("Markup")?"Markup":"Feature Layer",A&&Object(G.d)(y,A)&&-1<(null==E?void 0:E.indexOf("Hosted Service")))E=(null===(C=null===document||void 0===document?void 0:document.documentElement)||void 0===C?void 0:C.lang)||"en",C=D.a[E]||D.a[E.split("-")[0]]||D.a.en,K="".concat(K," (").concat(C,")")}else"Image Service"===
H?(K=-1<E.indexOf("Elevation 3D Layer"),C=-1<E.indexOf("Tiled Imagery"),K=K?"Elevation Layer":C?"Tiled Imagery Layer":"Imagery Layer"):"Scene Service"===H?K="Scene Layer":"Scene Package"===H?K="Scene Layer Package":"Stream Service"===H?K="Feature Layer":"Geocoding Service"===H?K="Locator":"Microsoft Powerpoint"===H?K="Microsoft PowerPoint":"OGCFeatureServer"===H?K="OGC Feature Layer":"GeoJson"===H?K="GeoJSON":"Globe Service"===H?K="Globe Layer":"Vector Tile Service"===H?K="Tile Layer":"netCDF"===
H?K="NetCDF":"Map Service"===H?K=-1===E.indexOf("Spatiotemporal")&&(-1<E.indexOf("Hosted Service")||-1<E.indexOf("Tiled"))?"Tile Layer":"Map Image Layer":H&&-1<H.toLowerCase().indexOf("add in")?K=H.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===H?K="Big Data File Share":"Web Mapping Application"===H&&(null==E?0:E.includes("configurableApp"))?K="Instant App":"Data Store"===H&&(E.includes("cloudStore_amazon")||E.includes("cloudStore_azure")?K+=" (Cloud)":(E.includes("fileShare")||E.includes("hdfs")||
E.includes("hive")||E.includes("bigDataFileShare")&&E.includes("dataStore"))&&(K+=" (Big Data File Share)"));return z(B,{displayName:K})})},120:function(k,r,w){w.d(r,"a",function(){return G});var x=w(1);k=w(15);var D=function(F,A){var y,z,B=[],C=null!==(z=null!==(y=F.typeKeywords)&&void 0!==y?y:F.typekeywords)&&void 0!==z?z:[];return F.contentStatus&&("org_authoritative"===F.contentStatus||"public_authoritative"===F.contentStatus?B.push("authoritative"):"deprecated"===F.contentStatus&&B.push("deprecated")),
F.origin&&B.push("collaboration"),F.groupDesignations&&-1<F.groupDesignations.indexOf("livingatlas")&&B.push("livingAtlas"),-1<C.indexOf("Requires Credits")?B.push("premium"):-1<C.indexOf("Requires Subscription")&&B.push("subscriber"),-1<C.indexOf("Public Data Collection")&&((null==A?void 0:A.portalUser)||(null==A?void 0:A.user))&&B.push("publicDataCollection"),"Solution"===F.type&&-1<C.indexOf("ArcGIS Solution")&&B.push("solution"),A.isPortal&&"Web Mapping Application"===F.type&&(-1<C.indexOf("Story Map")&&
B.push("retiredStoryMap"),function(H){return"3DInsetMap 3DScene 3DViz AttachmentViewer CapacityAnalysis Compare/storytelling_compare Compare/storytelling_tabbed Compare/storytelling_sidepanel Compare/Multiviewer Compare/Search Compare/Configure Compare/SideBySideViewer_Configure Compare3d CompareAnalysis CompareMaps Directions Edit Editor Elevations ElevationsProfile Embed Filter FilterGallery GeoList GeoTour HeaderFooter Identify ImageInterpretation ImageryViewer ImpactSummary InformationLookup InteractiveFilter InteractiveLegend LayerShowcase Legend LiveMaps LocalPerspective MapAndAppGallery MapCarousel MapTools Media MinimalGallery Minimalist Nearby OnePane Panels PanelsLegend Profile PublicGallery PublicInformation ServiceLookup SimpleMapViewer SimpleViewer SocialMedia Solutions/s2.html?app\x3dapps2/FindEditFilter Solutions/s2.html?app\x3dapps2/Finder StorytellingTextLegend StoryMapBasic Styler SummaryViewer Time TimeAware TwoPane Viewer ZoneLookup".split(" ").some(function(E){var K,
I=-1<E.indexOf(".html");E="/apps/".concat(E).concat(I?"":"/");return-1<(null===(K=H.url)||void 0===K?void 0:K.indexOf(E))})}(F)&&B.push("retiredApp")),-1<C.indexOf("Registered App")&&"API Key"!==F.type&&B.push("registered"),B},G=Object(k.a)(function(F,A){return Object(x.a)(Object(x.a)({},A),{badges:D(A,F)})})},121:function(k,r,w){w.d(r,"a",function(){return x});var x={ar:"\u0645\u0633\u062a\u0636\u0627\u0641",bs:"hostirano",ca:"allotjat",cs:"hostovan\u00e1 polo\u017eka",da:"hostede",de:"gehostet",
el:"hosted",en:"hosted",es:"alojado",et:"majutatud",fi:"is\u00e4nn\u00f6ity",fr:"h\u00e9berg\u00e9",he:"\u05de\u05ea\u05d0\u05e8\u05d7",hr:"hostirano",hu:"t\u00e1rolt",id:"di-host",it:"ospitati",ja:"\u30db\u30b9\u30c8",ko:"\ud638\uc2a4\ud305",lt:"talpinamas",lv:"viesots",nl:"gehoste",nb:"hostet",pl:"hostowane","pt-br":"hospedado","pt-pt":"alojados",ro:"g\u0103zduite",ru:"\u0440\u0430\u0437\u043c\u0435\u0449\u0435\u043d\u043d\u044b\u0439",sl:"gostujo\u010di",sk:"hostil",sr:"hostovani",sv:"driftade",
th:"\u0e2b\u0e25\u0e31\u0e01",tr:"bar\u0131nd\u0131r\u0131lan",uk:"\u0440\u043e\u0437\u043c\u0456\u0449\u0435\u043d\u0438\u0439 \u043d\u0430 \u0445\u043e\u0441\u0442\u0456",vi:"\u0111\u01b0\u1ee3c l\u01b0u tr\u1eef","zh-cn":"\u6258\u7ba1","zh-hk":"\u8a17\u7ba1","zh-tw":"\u8a17\u7ba1"}},142:function(k,r,w){w.d(r,"a",function(){return D});var x=w(1);k=w(15);var D=Object(k.a)(function(G,F){var A=Object(x.a),y=Object(x.a)({},F);G=F.thumbnail?"".concat(G.restUrl,"/community/users/").concat(F.username,
"/info/").concat(F.thumbnail).concat(G.credential?"?token\x3d".concat(G.credential.token):""):void 0;return A(y,{thumbURI:G})})},144:function(k,r){k.exports=f},15:function(k,r,w){function x(G){return function A(){for(var y=this,z=[],B=0;B<arguments.length;B++)z[B]=arguments[B];return z.length>=G.length?G.call.apply(G,Object(D.g)([this],z,!1)):function(){for(var C=[],H=0;H<arguments.length;H++)C[H]=arguments[H];return A.call.apply(A,Object(D.g)(Object(D.g)([y],z,!1),C,!1))}}}w.d(r,"a",function(){return x});
var D=w(1)},18:function(k,r){k.exports=S},181:function(k,r){k.exports=c},229:function(k,r){k.exports=h},244:function(k,r){k.exports=d},261:function(k,r){k.exports=b},262:function(k,r){k.exports=a},263:function(k,r){k.exports=e},264:function(k,r){k.exports=q},265:function(k,r){k.exports=t},266:function(k,r){k.exports=u},267:function(k,r){k.exports=g},268:function(k,r){k.exports=m},269:function(k,r){k.exports=v},270:function(k,r){k.exports=p},294:function(k,r){k.exports=l},295:function(k,r){k.exports=
n},47:function(k,r,w){function x(aa){return!(!aa.urlKey||!aa.customBaseUrl)||aa.isPortal}function D(aa){return aa.role===I.admin||aa.role===I.accountAdmin}function G(aa){return Object(N.a)(aa.roleId)&&0<(aa.roleId||"").length}function F(aa){return"Developer Subscription"===aa}function A(aa){return!G(aa)||G(aa)&&-1<(aa.privileges||[]).indexOf("portal:admin:viewItems")}function y(aa){return-1<(aa.privileges||[]).indexOf("portal:user:shareToOrg")}function z(aa){return-1<(aa.privileges||[]).indexOf("portal:user:shareToGroup")}
function B(aa){return-1<(aa.privileges||[]).indexOf("portal:user:shareToPublic")}function C(aa,da){return H(aa)||E(aa)||K(aa)}function H(aa){return-1<(aa.privileges||[]).indexOf("portal:admin:shareToGroup")}function E(aa){return-1<(aa.privileges||[]).indexOf("portal:admin:shareToOrg")}function K(aa){return-1<(aa.privileges||[]).indexOf("portal:admin:shareToPublic")}w.d(r,"m",function(){return R});w.d(r,"h",function(){return Y});w.d(r,"n",function(){return ja});w.d(r,"l",function(){return x});w.d(r,
"i",function(){return D});w.d(r,"j",function(){return G});w.d(r,"k",function(){return F});w.d(r,"g",function(){return A});w.d(r,"b",function(){return y});w.d(r,"a",function(){return z});w.d(r,"c",function(){return B});w.d(r,"d",function(){return H});w.d(r,"e",function(){return E});w.d(r,"f",function(){return K});var I,L=w(64),M=w(142),N=w(7),P=w(61);!function(aa){aa.user="org_user";aa.accountUser="account_user";aa.publisher="org_publisher";aa.accountPublisher="account_publisher";aa.admin="org_admin";
aa.accountAdmin="account_admin";aa.viewer="iAAAAAAAAAAAAAAA";aa.dataEditor="iBBBBBBBBBBBBBBB"}(I||(I={}));var R=function(aa){var da=aa.items;return!!aa.user.orgId&&da.every(function(ra){return ra.isOrgItem})},Y=function(aa){var da=aa.items,ra=aa.user,ca=aa.portal;aa=da[0];var fa=Object(P.c)(aa,ra),la=G(ra),ta=C(ra,ca);if(la=Object(P.a)(aa,ra)&&-1<(ra.privileges||[]).indexOf("portal:admin:updateItems")&&!la)la=!x(ca)||z(ra)||y(ra)||ca.canSharePublic&&B(ra)||C(ra,ca);ca=la;la=aa.owner;return!(aa.portal.isPortal&&
la!==ra.username&&la.includes("esri_")&&!["esri_livingatlas"].includes(la))&&(fa||ca||R({items:da,user:ra})&&ta)},ja=function(aa,da){return Object(L.a)(Object(M.a)(aa))(da)}},61:function(k,r,w){function x(z,B){return(null==z?void 0:z.owner)===B.username}function D(z,B){var C;if(!(C=x(z,B)))if(Object(F.a)(z.isAdmin))C=!!z.isAdmin;else{C=z.owner;var H="admin"===z.itemControl;C=!(z.portal.isPortal&&!x(z,B)&&H&&-1<C.indexOf("esri_")&&0>["esri_livingatlas","esri_demographics","esri_boundaries"].indexOf(C))&&
H}return C}function G(z,B){return D(z,B)||"update"===z.itemControl}w.d(r,"d",function(){return x});w.d(r,"c",function(){return D});w.d(r,"a",function(){return G});w.d(r,"b",function(){return y});var F=w(7),A=w(47),y=function(z){var B=z.user,C=z.items;z=z.portal;return Object(A.m)({items:C,user:B})&&Object(A.h)({items:C,user:B,portal:z})&&Object(A.g)(B)&&C[0].itemOwner||B}},64:function(k,r,w){function x(){for(var D=[],G=0;G<arguments.length;G++)D[G]=arguments[G];return function(F){return D.reduceRight(function(A,
y){return y(A)},F)}}w.d(r,"a",function(){return x})},7:function(k,r,w){function x(C){return 0===Object.keys(C).length&&C.constructor===Object}function D(C){return null!=C}function G(C,H){return z.apply(null,arguments)}function F(C,H){return B.apply(null,arguments)}w.d(r,"b",function(){return x});w.d(r,"a",function(){return D});w.d(r,"e",function(){return y});w.d(r,"c",function(){return G});w.d(r,"d",function(){return F});var A=w(1);k=w(15);var y=Object(k.a)(function(C,H){H=Object(A.a)({},H);return delete H[C],
H}),z=Object(k.a)(function(C,H){return Object.keys(H).reduce(function(E,K){return E[K]=C(H[K],K,H),E},{})}),B=Object(k.a)(function(C,H){return Object.keys(H).reduce(function(E,K){return C(H[K],K,H)&&(E[K]=H[K]),E},{})})},80:function(k,r,w){w.d(r,"a",function(){return z});w.d(r,"b",function(){return B});var x=w(64);k=w(7);var D=w(120),G=w(119),F=w(114),A=w(118),y=w(117),z=function(C,H,E){return Object(x.a)(Object(y.a)(C),Object(A.a)(C),Object(F.a)(H),Object(G.a)(C),Object(D.a)(C))(E)},B=Object(x.a)(Object(k.e)("patchedDescription"),
Object(k.e)("thumbURI"),Object(k.e)("iconURI"),Object(k.e)("displayName"),Object(k.e)("badges"))},825:function(k,r,w){w.r(r);var x=w(1),D=w(111);k=w(18);var G=w(144),F=w(181),A=w(244),y=w.n(A);A=w(262);var z=w.n(A);A=w(263);var B=w.n(A);A=w(264);var C=w.n(A);A=w(265);var H=w.n(A);A=w(266);var E=w.n(A);A=w(267);var K=w.n(A);A=w(268);var I=w.n(A);A=w(269);var L=w.n(A);A=w(294);var M=w.n(A);A=w(270);var N=w.n(A);A=w(229);var P=w.n(A);A=w(295);var R=w.n(A);A=w(261);var Y=w.n(A),ja=w(80);w=function(aa){function da(ra){var ca=
aa.call(this,ra)||this;return ca.state={customActionsOpen:!1,inversedAction:ra.isSelected&&ra.isSelected(Object(ja.b)(ca.props.item)),isLoading:!1},ca.handleActionDropdownToggle=ca.handleActionDropdownToggle.bind(ca),ca.handleCustomActionClick=ca.handleCustomActionClick.bind(ca),ca.handleMainActionClick=ca["handleMainActionClick".concat(ca.props.loadOnMainAction?"Async":"")].bind(ca),ca}return Object(x.d)(da,aa),da.prototype.render=function(ra){var ca,fa=this,la=this.props,ta=la.item;la=la.sortField;
var Q=this.props.customActions?this.props.customActions.filter(function(na){return na.allowed(fa.props.item)}):[],T={"card-ac__container":!0,"card-ac__container-inverse-action":this.state.inversedAction,"card-mc__fader":this.props.loadOnMainAction,"card-mc__fader--loading":this.state.isLoading},O={"card-ac__custom-actions":!0,"card-ac__btn":this.props.usePrimaryButtonStyle,"card-ac__secondary-btn":!this.props.usePrimaryButtonStyle},Z={"card-ac__custom-action-btn":!0,"card-ac__btn":this.props.usePrimaryButtonStyle,
"card-ac__secondary-btn":!this.props.usePrimaryButtonStyle};return ca="numviews"===la?"".concat(D.viewCount,": ").concat(F.format(ta.numViews)):"avgrating"===la?"".concat(D.rating,": ").concat(ta.avgRating.toFixed(2)):"created"===la?"".concat(D.created,": ").concat(G.format(new Date(ta.created),{selector:"date",formatLength:"short"})):"".concat(D.updated,": ").concat(G.format(new Date(ta.modified),{selector:"date",formatLength:"short"})),ra("div",{classes:T,key:this.props.key},ra("div",{class:"card-ac__details-container"},
ra("div",{class:"card-ac__thumb-container"},ra("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",alt:"",class:"card-ac__thumbnail",style:"\n                                background-image: url(".concat(ta.thumbURI,");\n                            ")})),ra("div",{class:"card-ac__details"},ra("h4",{class:"card-ac__title"},ta.title),ra("div",{class:"card-ac__info-row"},ra("div",{class:"card-ac__icon-title-container"},ra("img",{src:ta.iconURI,class:"content-search-item-icon",
alt:""}),ra("span",{class:"card-ac__author-text"},"".concat(ta.displayName," ").concat(D.by),ra("a",{class:"content-search-selectable card-mc__author-link",title:this.props.organization?D.viewOrg:D.viewProfile,href:this.props.organization?this.props.organization.orgUrl:"".concat(this.props.portal.baseUrl,"/home/user.html?user\x3d").concat(ta.owner),target:"_blank"}," ".concat(this.props.organization?this.props.organization.name:ta.owner)))),ra("span",{class:"card-ac__info-bullet","aria-hidden":"true"},
"\u2022"),ra("span",{class:"card-ac__info-string"},ca)),ra("p",{class:"card-ac__snippet"},ra("span",{class:"card-ac__snippet-text"},ta.snippet," "),ra("a",{class:"card-ac__side-action card-ac__no-wrap",href:"".concat(this.props.portal.baseUrl,"/home/item.html?id\x3d").concat(ta.id),target:"_blank"},D.viewItem,ra("svg",{role:"img",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},ra("path",{d:"M10 1v1h3.293l-6.646 6.646 0.707 0.707 6.646-6.646v3.293h1v-5z"}),
ra("path",{d:"M14 8v6h-12v-12h6v-1h-7v14h14v-7z"})))))),ra("div",{class:"card-ac__sub-container"},ra("div",{class:"card-ac__badge-container card-ac__badge-container--regular card-ac__sub-group"},this.renderBadges(ra)),ra("div",{class:"card-ac__badge-container card-ac__badge-container--small card-ac__sub-group"},this.renderBadges(ra,!0)),ra("div",{class:"card-ac__action-container card-ac__sub-group"},ra("div",{class:"card-ac__no-wrap"},this.renderMainActionButton(ra),0<Q.length?ra(Y.a,{key:"".concat(ta.id,
"-action-dropdown"),active:this.state.customActionsOpen,onToggle:this.handleActionDropdownToggle},ra("span",{classes:O,title:D.actions},ra("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 32 32"},ra("path",{d:"M28 9v5L16 26 4 14V9l12 12L28 9z"}))),ra("div",null,Q.map(function(na,ia){return ra("button",{key:na.name,class:Z,value:ia,onclick:fa.handleCustomActionClick},na.name)}))):null))))},da.prototype.renderLoaderIcon=function(ra){return this.props.loadOnMainAction&&this.state.isLoading?
ra(y.a,{color:"#ffffff"}):null},da.prototype.renderMainActionButton=function(ra){return ra("button",{class:"card-ac__btn ".concat(this.props.usePrimaryButtonStyle?"card-ac__primary-btn":"card-ac__secondary-btn"),onclick:this.handleMainActionClick.bind(this,this.state.inversedAction?"Inverse":"")},this.renderLoaderIcon(ra),this.props[this.state.inversedAction?"mainInverseActionTitle":"mainActionTitle"])},da.prototype.renderBadges=function(ra,ca){var fa=this,la=ca?"small":"regular";return this.props.item.badges.map(function(ta){switch(ta){case "authoritative":return ra(z.a,
{size:la,altOrg:fa.props.organization?fa.props.organization.name:void 0});case "deprecated":return ra(C.a,{size:la});case "collaboration":return ra(B.a,{size:la});case "livingAtlas":return ra(H.a,{size:la});case "marketplace":return ra(E.a,{size:la});case "openData":return ra(K.a,{size:la});case "premium":return ra(I.a,{size:la,user:fa.props.portal.user});case "subscriber":return ra(L.a,{size:la,user:fa.props.portal.user});case "solution":return ra(M.a,{size:la});case "publicDataCollection":return ra(N.a,
{size:la});case "retiredStoryMap":return ra(P.a,{size:la,isRetiredStoryMap:!0});case "retiredApp":return ra(P.a,{size:la});case "registered":return ra(R.a,{size:la})}return null})},da.prototype.handleActionDropdownToggle=function(){this.setState({customActionsOpen:!this.state.customActionsOpen})},da.prototype.handleMainActionClick=function(ra){this.props.mainAction([Object(ja.b)(this.props.item)])},da.prototype.handleCustomActionClick=function(ra){this.setState({customActionsOpen:!this.state.customActionsOpen});
this.props.customActions&&this.props.customActions[ra.target.value]&&this.props.customActions[ra.target.value].onAction(Object(ja.b)(this.props.item))},da}(k.Component);r.default=w}})})},"arcgis-components/Loaders/LoaderIcon":function(){define(function(){return function(S){function J(c){if(f[c])return f[c].exports;var h=f[c]={i:c,l:!1,exports:{}};return S[c].call(h.exports,h,h.exports,J),h.l=!0,h.exports}var f={};return J.m=S,J.c=f,J.d=function(c,h,d){J.o(c,h)||Object.defineProperty(c,h,{enumerable:!0,
get:d})},J.r=function(c){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"});Object.defineProperty(c,"__esModule",{value:!0})},J.t=function(c,h){if((1&h&&(c=J(c)),8&h)||4&h&&"object"==typeof c&&c&&c.__esModule)return c;var d=Object.create(null);if(J.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:c}),2&h&&"string"!=typeof c)for(var b in c)J.d(d,b,function(a){return c[a]}.bind(null,b));return d},J.n=function(c){var h=c&&c.__esModule?
function(){return c.default}:function(){return c};return J.d(h,"a",h),h},J.o=function(c,h){return Object.prototype.hasOwnProperty.call(c,h)},J.p="",J(J.s=832)}({832:function(S,J,f){f.r(J);J.default=function(c,h){return h("div",{key:c.key||"loader-icon",class:"load-icon__icon"},h("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",style:"\n                fill: currentColor;\n                pointer-events: none;\n                display: inline-block;\n                width: 1em;\n                height: 1em;\n                vertical-align: -0.15em;\n                color: ".concat(c.color||
"#0079c1",";\n                transition-property: transform;\n                transition-duration: 0.5s;\n                animation-name: rotate;\n                animation-duration: 1s;\n                animation-iteration-count: infinite;\n                animation-timing-function: linear;\n                transform-origin: 50% 50%;\n            ")},h("path",{d:"M16 8A8 8 0 1 1 7 .07v.909a7.1 7.1 0 1 0 2 0v-.91A7.996 7.996 0 0 1 16 8z"})))}}})})},"arcgis-components/Badges/Authoritative":function(){define(["dojo/i18n!../Badges/nls/resources",
"../Badges/Badge"],function(S,J){return function(f){function c(d){if(h[d])return h[d].exports;var b=h[d]={i:d,l:!1,exports:{}};return f[d].call(b.exports,b,b.exports,c),b.l=!0,b.exports}var h={};return c.m=f,c.c=h,c.d=function(d,b,a){c.o(d,b)||Object.defineProperty(d,b,{enumerable:!0,get:a})},c.r=function(d){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"});Object.defineProperty(d,"__esModule",{value:!0})},c.t=function(d,b){if((1&b&&(d=c(d)),
8&b)||4&b&&"object"==typeof d&&d&&d.__esModule)return d;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:d}),2&b&&"string"!=typeof d)for(var e in d)c.d(a,e,function(q){return d[q]}.bind(null,e));return a},c.n=function(d){var b=d&&d.__esModule?function(){return d.default}:function(){return d};return c.d(b,"a",b),b},c.o=function(d,b){return Object.prototype.hasOwnProperty.call(d,b)},c.p="",c(c.s=775)}({115:function(f,c){f.exports=J},68:function(f,c){f.exports=
S},775:function(f,c,h){h.r(c);var d=h(68);f=h(115);var b=h.n(f);c.default=function(a,e){var q=a.tooltip,t=a.tooltipDirection,u=a.altOrg;return e(b.a,{backgroundColor:"#DDEEDB",textColor:"#2B622B",key:"authoritative-badge",size:a.size,text:d.authoritative,title:u?"".concat(d.tooltips.altAuthoritative," ").concat(u):d.tooltips.authoritative,tooltip:q?d.tooltips.authoritative:void 0,tooltipDirection:t},e("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},
e("path",{fill:"none",d:"M0 0h16v16H0z"}),e("g",{fill:"#2B622B"},e("path",{d:"M8 0a8 8 0 1 0 8 8 8.01 8.01 0 0 0-8-8zm0 15a7 7 0 1 1 7-7 7.008 7.008 0 0 1-7 7z"}),e("path",{d:"M11.834 5.146l-5.646 5.647-2.334-2.334a.5.5 0 0 0-.708.707l3.042 3.041 6.353-6.353a.5.5 0 1 0-.707-.707z"}))))}}})})},"arcgis-components/Badges/Collaboration":function(){define(["dojo/i18n!../Badges/nls/resources","../Badges/Badge"],function(S,J){return function(f){function c(d){if(h[d])return h[d].exports;var b=h[d]={i:d,l:!1,
exports:{}};return f[d].call(b.exports,b,b.exports,c),b.l=!0,b.exports}var h={};return c.m=f,c.c=h,c.d=function(d,b,a){c.o(d,b)||Object.defineProperty(d,b,{enumerable:!0,get:a})},c.r=function(d){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"});Object.defineProperty(d,"__esModule",{value:!0})},c.t=function(d,b){if((1&b&&(d=c(d)),8&b)||4&b&&"object"==typeof d&&d&&d.__esModule)return d;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,
"default",{enumerable:!0,value:d}),2&b&&"string"!=typeof d)for(var e in d)c.d(a,e,function(q){return d[q]}.bind(null,e));return a},c.n=function(d){var b=d&&d.__esModule?function(){return d.default}:function(){return d};return c.d(b,"a",b),b},c.o=function(d,b){return Object.prototype.hasOwnProperty.call(d,b)},c.p="",c(c.s=778)}({115:function(f,c){f.exports=J},68:function(f,c){f.exports=S},778:function(f,c,h){h.r(c);var d=h(68);f=h(115);var b=h.n(f);c.default=function(a,e){return e(b.a,{backgroundColor:"#DBEDFA",
textColor:"#196FA6",key:"collaboration-badge",size:a.size,text:d.collaboration,title:d.tooltips.collaboration,tooltip:a.tooltip?d.tooltips.collaboration:void 0,tooltipDirection:a.tooltipDirection},e("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},e("g",{fill:"#196FA6"},e("path",{d:"M5.42,11.36a2.7,2.7,0,0,0-.25-.61A2.31,2.31,0,0,1,5.42,11.36Z"}),e("path",{d:"M12.64,15.42a2.7,2.7,0,0,0,.61-.25A2.31,2.31,0,0,1,12.64,15.42Z"}),e("path",{d:"M11.36,5.42a2.31,2.31,0,0,1-.61-.25A2.7,2.7,0,0,0,11.36,5.42Z"}),
e("path",{d:"M13.25.83a2.7,2.7,0,0,0-.61-.25A2.31,2.31,0,0,1,13.25.83Z"}),e("path",{d:"M5.42,11.36a2.7,2.7,0,0,0-.25-.61A2.31,2.31,0,0,1,5.42,11.36Z"}),e("path",{d:"M12.64,15.42a2.7,2.7,0,0,0,.61-.25A2.31,2.31,0,0,1,12.64,15.42Z"}),e("path",{d:"M4.78,13.75A2.62,2.62,0,0,0,5,13.5,2.53,2.53,0,0,0,5.5,12a2.74,2.74,0,0,0-.08-.64,2.7,2.7,0,0,0-.25-.61,2.48,2.48,0,0,0-2.64-1.2A4.93,4.93,0,0,1,2.5,9,5.52,5.52,0,0,1,5.71,4a2.5,2.5,0,0,0,4.58,0A5.52,5.52,0,0,1,13.5,9a4.93,4.93,0,0,1,0,.55,2.48,2.48,0,0,0-2.64,1.2,2.7,2.7,0,0,0-.25.61,2.74,2.74,0,0,0-.08.64,2.53,2.53,0,0,0,.5,1.5,2.62,2.62,0,0,0,.22.25,2.45,2.45,0,0,0,.53.42,2.51,2.51,0,0,0,3.42-.92,2.7,2.7,0,0,0,.25-.61A2.74,2.74,0,0,0,15.5,12a2.53,2.53,0,0,0-.5-1.5,2.62,2.62,0,0,0-.22-.25,2,2,0,0,0-.35-.3A6,6,0,0,0,14.5,9a6.52,6.52,0,0,0-4-6,2.5,2.5,0,0,0-5,0,6.52,6.52,0,0,0-4,6,6,6,0,0,0,.07.95,2,2,0,0,0-.35.3A2.62,2.62,0,0,0,1,10.5,2.53,2.53,0,0,0,.5,12a2.74,2.74,0,0,0,.08.64,2.7,2.7,0,0,0,.25.61,2.51,2.51,0,0,0,3.42.92A2.45,2.45,0,0,0,4.78,13.75Zm8.5-3.22a1.66,1.66,0,0,1,.47.17,1.61,1.61,0,0,1,.42.36,1.51,1.51,0,0,1,.33.94,1.53,1.53,0,0,1-.2.75,1.46,1.46,0,0,1-.91.7A1.5,1.5,0,0,1,11.5,12a1.53,1.53,0,0,1,.2-.75,1.46,1.46,0,0,1,.91-.7A1.38,1.38,0,0,1,13.28,10.53ZM6.5,3a1.19,1.19,0,0,1,0-.33,1.5,1.5,0,0,1,2.92,0A1.19,1.19,0,0,1,9.5,3a1.39,1.39,0,0,1-.17.67,1.48,1.48,0,0,1-2.66,0A1.39,1.39,0,0,1,6.5,3ZM2.61,13.45a1.46,1.46,0,0,1-.91-.7A1.53,1.53,0,0,1,1.5,12a1.51,1.51,0,0,1,.33-.94,1.61,1.61,0,0,1,.42-.36,1.66,1.66,0,0,1,.47-.17,1.38,1.38,0,0,1,.67,0,1.46,1.46,0,0,1,.91.7,1.5,1.5,0,0,1-.55,2.05A1.51,1.51,0,0,1,2.61,13.45Z"}),
e("path",{d:"M11.36,5.42a2.31,2.31,0,0,1-.61-.25A2.7,2.7,0,0,0,11.36,5.42Z"}),e("path",{d:"M13.25.83a2.7,2.7,0,0,0-.61-.25A2.31,2.31,0,0,1,13.25.83Z"}))))}}})})},"arcgis-components/Badges/Deprecated":function(){define(["dojo/i18n!../Badges/nls/resources","../Badges/Badge"],function(S,J){return function(f){function c(d){if(h[d])return h[d].exports;var b=h[d]={i:d,l:!1,exports:{}};return f[d].call(b.exports,b,b.exports,c),b.l=!0,b.exports}var h={};return c.m=f,c.c=h,c.d=function(d,b,a){c.o(d,b)||Object.defineProperty(d,
b,{enumerable:!0,get:a})},c.r=function(d){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"});Object.defineProperty(d,"__esModule",{value:!0})},c.t=function(d,b){if((1&b&&(d=c(d)),8&b)||4&b&&"object"==typeof d&&d&&d.__esModule)return d;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:d}),2&b&&"string"!=typeof d)for(var e in d)c.d(a,e,function(q){return d[q]}.bind(null,e));return a},c.n=function(d){var b=
d&&d.__esModule?function(){return d.default}:function(){return d};return c.d(b,"a",b),b},c.o=function(d,b){return Object.prototype.hasOwnProperty.call(d,b)},c.p="",c(c.s=779)}({115:function(f,c){f.exports=J},68:function(f,c){f.exports=S},779:function(f,c,h){h.r(c);var d=h(68);f=h(115);var b=h.n(f);c.default=function(a,e){return e(b.a,{backgroundColor:"#F3DED7",textColor:"#8C2907",key:"deprecated-badge",size:a.size,text:d.deprecated,title:d.tooltips.deprecated,tooltip:a.tooltip?d.tooltips.deprecated:
void 0,tooltipDirection:a.tooltipDirection},e("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},e("path",{fill:"none",d:"M0 0h16v16H0z"}),e("path",{fill:"#8C2907",d:"M8 0a8 8 0 1 0 8 8 8.01 8.01 0 0 0-8-8zM1 8a6.99 6.99 0 0 1 11.577-5.284l-9.861 9.861A6.964 6.964 0 0 1 1 8zm7 7a6.964 6.964 0 0 1-4.577-1.716l9.861-9.861A6.99 6.99 0 0 1 8 15z"})))}}})})},"arcgis-components/Badges/LivingAtlas":function(){define(["dojo/i18n!../Badges/nls/resources","../Badges/Badge"],
function(S,J){return function(f){function c(d){if(h[d])return h[d].exports;var b=h[d]={i:d,l:!1,exports:{}};return f[d].call(b.exports,b,b.exports,c),b.l=!0,b.exports}var h={};return c.m=f,c.c=h,c.d=function(d,b,a){c.o(d,b)||Object.defineProperty(d,b,{enumerable:!0,get:a})},c.r=function(d){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"});Object.defineProperty(d,"__esModule",{value:!0})},c.t=function(d,b){if((1&b&&(d=c(d)),8&b)||4&b&&"object"==
typeof d&&d&&d.__esModule)return d;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:d}),2&b&&"string"!=typeof d)for(var e in d)c.d(a,e,function(q){return d[q]}.bind(null,e));return a},c.n=function(d){var b=d&&d.__esModule?function(){return d.default}:function(){return d};return c.d(b,"a",b),b},c.o=function(d,b){return Object.prototype.hasOwnProperty.call(d,b)},c.p="",c(c.s=780)}({115:function(f,c){f.exports=J},68:function(f,c){f.exports=S},780:function(f,
c,h){h.r(c);var d=h(68);f=h(115);var b=h.n(f);c.default=function(a,e){return e(b.a,{backgroundColor:"#DBEDFA",textColor:"#196FA6",key:"living-atlas-badge",size:a.size,text:d.livingAtlas,title:d.tooltips.livingAtlas,tooltip:a.tooltip?d.tooltips.livingAtlas:void 0,tooltipDirection:a.tooltipDirection},e("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},e("rect",{width:"16",height:"16",fill:"none"}),e("rect",{width:"16",height:"16",fill:"none"}),e("g",null,
e("path",{d:"M14.75342,4.57031a.50021.50021,0,0,0-.84277-.53906,5.85956,5.85956,0,0,1-1.04541,1.12939A27.86114,27.86114,0,0,1,8.5,8.19922a27.48671,27.48671,0,0,1-4.81445,2.26172,5.9062,5.9062,0,0,1-1.50049.34033.5.5,0,0,0,.022.99951L2.23,11.80029a6.51338,6.51338,0,0,0,1.46027-.30341A5.97993,5.97993,0,0,0,7.5,13.30646V15H5a.5.5,0,0,0,0,1h6a.5.5,0,0,0,0-1H8.5V13.301a5.95318,5.95318,0,0,0,5.25336-7.601A6.38549,6.38549,0,0,0,14.75342,4.57031ZM10.5,11.66357A4.99888,4.99888,0,0,1,4.75793,11.129,30.77175,30.77175,0,0,0,9,9.06543a30.80143,30.80143,0,0,0,3.9082-2.642A5.00026,5.00026,0,0,1,10.5,11.66357Z",
fill:"#196fa6"}),e("path",{d:"M7.06836,2.41943a5.00709,5.00709,0,0,1,4.71045,1.63867.50023.50023,0,1,0,.75684-.6543A6.01019,6.01019,0,0,0,6.88184,1.437a.5.5,0,0,0,.18652.98242Z",fill:"#196fa6"}),e("path",{d:"M2.80176,9.63281a.50023.50023,0,0,0,.47217-.66406A4.98907,4.98907,0,0,1,5.08917,3.29163l.22772.39441a.50008.50008,0,0,0,.86621-.5l-1-1.73193a.50008.50008,0,0,0-.86621.5l.27222.47144A5.988,5.988,0,0,0,2.32959,9.29688.49991.49991,0,0,0,2.80176,9.63281Z",fill:"#196fa6"}))))}}})})},"arcgis-components/Badges/Marketplace":function(){define(["dojo/i18n!../Badges/nls/resources",
"../Badges/Badge"],function(S,J){return function(f){function c(d){if(h[d])return h[d].exports;var b=h[d]={i:d,l:!1,exports:{}};return f[d].call(b.exports,b,b.exports,c),b.l=!0,b.exports}var h={};return c.m=f,c.c=h,c.d=function(d,b,a){c.o(d,b)||Object.defineProperty(d,b,{enumerable:!0,get:a})},c.r=function(d){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"});Object.defineProperty(d,"__esModule",{value:!0})},c.t=function(d,b){if((1&b&&(d=c(d)),
8&b)||4&b&&"object"==typeof d&&d&&d.__esModule)return d;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:d}),2&b&&"string"!=typeof d)for(var e in d)c.d(a,e,function(q){return d[q]}.bind(null,e));return a},c.n=function(d){var b=d&&d.__esModule?function(){return d.default}:function(){return d};return c.d(b,"a",b),b},c.o=function(d,b){return Object.prototype.hasOwnProperty.call(d,b)},c.p="",c(c.s=781)}({115:function(f,c){f.exports=J},68:function(f,c){f.exports=
S},781:function(f,c,h){h.r(c);var d=h(68);f=h(115);var b=h.n(f);c.default=function(a,e){return e(b.a,{backgroundColor:"#DDEEDB",textColor:"#2B622B",key:"marketplace-badge",size:a.size,text:d.marketplace,title:d.tooltips.marketplace,tooltip:a.tooltip?d.tooltips.marketplace:void 0,tooltipDirection:a.tooltipDirection},e("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},e("path",{fill:"#196FA6",d:"M15.939 13L12.832 3h-3.65L8.033 6.68 6.811 3H3.16L.054 13H4.13l.96-3.21L6.192 13h3.594l1.104-3.17.993 3.17h4.056zM3.386 12H1.41l2.486-8h1.881l-2.391 8zm2.196-3.856l.893-2.983 1.048 3.156-.895 2.871-1.046-3.044zM9.075 12H7.422l2.496-8h1.943l-2.786 8zm3.409-6.749L14.583 12h-1.966l-1.176-3.755 1.043-2.994z"})))}}})})},
"arcgis-components/Badges/OpenData":function(){define(["dojo/i18n!../Badges/nls/resources","../Badges/Badge"],function(S,J){return function(f){function c(d){if(h[d])return h[d].exports;var b=h[d]={i:d,l:!1,exports:{}};return f[d].call(b.exports,b,b.exports,c),b.l=!0,b.exports}var h={};return c.m=f,c.c=h,c.d=function(d,b,a){c.o(d,b)||Object.defineProperty(d,b,{enumerable:!0,get:a})},c.r=function(d){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"});
Object.defineProperty(d,"__esModule",{value:!0})},c.t=function(d,b){if((1&b&&(d=c(d)),8&b)||4&b&&"object"==typeof d&&d&&d.__esModule)return d;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:d}),2&b&&"string"!=typeof d)for(var e in d)c.d(a,e,function(q){return d[q]}.bind(null,e));return a},c.n=function(d){var b=d&&d.__esModule?function(){return d.default}:function(){return d};return c.d(b,"a",b),b},c.o=function(d,b){return Object.prototype.hasOwnProperty.call(d,
b)},c.p="",c(c.s=782)}({115:function(f,c){f.exports=J},68:function(f,c){f.exports=S},782:function(f,c,h){h.r(c);var d=h(68);f=h(115);var b=h.n(f);c.default=function(a,e){return e(b.a,{backgroundColor:"#DDEEDB",textColor:"#2B622B",key:"open-data-badge",size:a.size,text:d.openData,title:d.tooltips.openData,tooltip:a.tooltip?d.tooltips.openData:void 0,tooltipDirection:a.tooltipDirection},e("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},e("path",{fill:"none",
d:"M0 0h16v16H0z"}),e("g",{fill:"#196fa6"},e("path",{d:"M8 1C4.58 1 2 2.29 2 4s2.58 3 6 3a8.628 8.628 0 0 0 5-1.297v5.334a.5.5 0 0 0 1 0V4c0-1.71-2.58-3-6-3zm0 5C5.138 6 3 4.944 3 4s2.138-2 5-2 5 1.056 5 2-2.138 2-5 2zM13.5 12.5a.5.5 0 0 0-.5.5v.064C13 13.96 10.816 15 8 15s-5-1.04-5-1.936V8.85a11.968 11.968 0 0 0 5 .984.5.5 0 0 0 0-1A10.146 10.146 0 0 1 2.815 7.62a.484.484 0 0 0-.799.3c-.002.013-.006.025-.007.037C2.007 7.972 2 7.985 2 8v5.064C2 14.902 5.05 16 8 16s6-1.098 6-2.936V13a.5.5 0 0 0-.5-.5z"}))))}}})})},
"arcgis-components/Badges/Premium":function(){define(["dojo/i18n!../Badges/nls/resources","../Badges/Badge"],function(S,J){return function(f){function c(d){if(h[d])return h[d].exports;var b=h[d]={i:d,l:!1,exports:{}};return f[d].call(b.exports,b,b.exports,c),b.l=!0,b.exports}var h={};return c.m=f,c.c=h,c.d=function(d,b,a){c.o(d,b)||Object.defineProperty(d,b,{enumerable:!0,get:a})},c.r=function(d){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"});
Object.defineProperty(d,"__esModule",{value:!0})},c.t=function(d,b){if((1&b&&(d=c(d)),8&b)||4&b&&"object"==typeof d&&d&&d.__esModule)return d;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:d}),2&b&&"string"!=typeof d)for(var e in d)c.d(a,e,function(q){return d[q]}.bind(null,e));return a},c.n=function(d){var b=d&&d.__esModule?function(){return d.default}:function(){return d};return c.d(b,"a",b),b},c.o=function(d,b){return Object.prototype.hasOwnProperty.call(d,
b)},c.p="",c(c.s=783)}({115:function(f,c){f.exports=J},68:function(f,c){f.exports=S},783:function(f,c,h){h.r(c);var d=h(68);f=h(115);var b=h.n(f);c.default=function(a,e){var q=a.tooltip,t=a.tooltipDirection,u=a.user;u=u?u.orgId?"Org":"Public":"Anon";return e(b.a,{backgroundColor:"#DBEDFA",textColor:"#196FA6",key:"premium-badge",size:a.size,text:d.premium,title:d.tooltips["premium".concat(u)],tooltip:q?d.tooltips["premium".concat(u)]:void 0,tooltipDirection:t},e("svg",{xmlns:"http://www.w3.org/2000/svg",
width:"16",height:"16",viewBox:"0 0 16 16"},e("path",{fill:"none",d:"M0 0h16v16H0z"}),e("path",{fill:"none",d:"M0 0h16v16H0z"}),e("path",{d:"M8.05 15.5a.497.497 0 0 1-.25-.067C.6 11.275 1.542 2.038 1.552 1.944a.5.5 0 0 1 .259-.382.507.507 0 0 1 .463-.009 5.15 5.15 0 0 0 5.459-.94.5.5 0 0 1 .64.006c1.817 1.54 3.601 1.844 5.457.932a.5.5 0 0 1 .718.394 16.944 16.944 0 0 1-.344 4.965.5.5 0 1 1-.978-.211 16.952 16.952 0 0 0 .367-3.962 5.57 5.57 0 0 1-5.55-1.098A6.178 6.178 0 0 1 2.51 2.706c-.057 2.086.231 8.651 5.79 11.86a.5.5 0 0 1-.25.934z",
fill:"#196fa6"}),e("path",{d:"M12 15.5a4 4 0 1 1 4-4 4.005 4.005 0 0 1-4 4zm0-7a3 3 0 1 0 3 3 3.003 3.003 0 0 0-3-3z",fill:"#196fa6"})))}}})})},"arcgis-components/Badges/Subscriber":function(){define(["dojo/i18n!../Badges/nls/resources","../Badges/Badge"],function(S,J){return function(f){function c(d){if(h[d])return h[d].exports;var b=h[d]={i:d,l:!1,exports:{}};return f[d].call(b.exports,b,b.exports,c),b.l=!0,b.exports}var h={};return c.m=f,c.c=h,c.d=function(d,b,a){c.o(d,b)||Object.defineProperty(d,
b,{enumerable:!0,get:a})},c.r=function(d){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"});Object.defineProperty(d,"__esModule",{value:!0})},c.t=function(d,b){if((1&b&&(d=c(d)),8&b)||4&b&&"object"==typeof d&&d&&d.__esModule)return d;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:d}),2&b&&"string"!=typeof d)for(var e in d)c.d(a,e,function(q){return d[q]}.bind(null,e));return a},c.n=function(d){var b=
d&&d.__esModule?function(){return d.default}:function(){return d};return c.d(b,"a",b),b},c.o=function(d,b){return Object.prototype.hasOwnProperty.call(d,b)},c.p="",c(c.s=784)}({115:function(f,c){f.exports=J},68:function(f,c){f.exports=S},784:function(f,c,h){h.r(c);var d=h(68);f=h(115);var b=h.n(f);c.default=function(a,e){var q=a.tooltip,t=a.tooltipDirection,u=a.user;u=u?u.orgId?"Org":"Public":"Anon";return e(b.a,{backgroundColor:"#DBEDFA",textColor:"#196FA6",key:"subscriber-badge",size:a.size,text:d.subscriber,
title:d.tooltips["subscriber".concat(u)],tooltip:q?d.tooltips["subscriber".concat(u)]:void 0,tooltipDirection:t},e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},e("path",{d:"M8.05371,15.5H8.0498a.49939.49939,0,0,1-.25-.06689C.59961,11.27539,1.542,2.0376,1.55225,1.94434A.49966.49966,0,0,1,1.811,1.56152a.50721.50721,0,0,1,.46338-.0083A5.15007,5.15007,0,0,0,7.73291.61328a.51762.51762,0,0,1,.6377,0,5.14642,5.14642,0,0,0,5.4585.93994.50711.50711,0,0,1,.46338.0083.49966.49966,0,0,1,.25879.38281c.01025.09326.95264,9.33105-6.24756,13.48877A.49939.49939,0,0,1,8.05371,15.5Zm0-.5h0ZM2.50977,2.70557c-.05615,2.05469.22266,8.45508,5.542,11.71387,5.31934-3.25879,5.59814-9.65967,5.542-11.71387a6.17691,6.17691,0,0,1-5.542-1.07324A6.18289,6.18289,0,0,1,2.50977,2.70557Z",
fill:"#196fa6"})))}}})})},"arcgis-components/Badges/PublicDataCollection":function(){define(["dojo/i18n!../Badges/nls/resources","../Badges/Badge"],function(S,J){return function(f){function c(d){if(h[d])return h[d].exports;var b=h[d]={i:d,l:!1,exports:{}};return f[d].call(b.exports,b,b.exports,c),b.l=!0,b.exports}var h={};return c.m=f,c.c=h,c.d=function(d,b,a){c.o(d,b)||Object.defineProperty(d,b,{enumerable:!0,get:a})},c.r=function(d){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(d,
Symbol.toStringTag,{value:"Module"});Object.defineProperty(d,"__esModule",{value:!0})},c.t=function(d,b){if((1&b&&(d=c(d)),8&b)||4&b&&"object"==typeof d&&d&&d.__esModule)return d;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:d}),2&b&&"string"!=typeof d)for(var e in d)c.d(a,e,function(q){return d[q]}.bind(null,e));return a},c.n=function(d){var b=d&&d.__esModule?function(){return d.default}:function(){return d};return c.d(b,"a",b),b},c.o=function(d,b){return Object.prototype.hasOwnProperty.call(d,
b)},c.p="",c(c.s=786)}({115:function(f,c){f.exports=J},68:function(f,c){f.exports=S},786:function(f,c,h){h.r(c);var d=h(68);f=h(115);var b=h.n(f);c.default=function(a,e){return e(b.a,{backgroundColor:"#efe397",textColor:"#786d1c",key:"public-data-collection-badge",size:a.size,text:d.publicDataCollection,title:d.tooltips.publicDataCollection,tooltip:a.tooltip?d.tooltips.publicDataCollection:void 0,tooltipDirection:a.tooltipDirection},e("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",width:"16",
height:"16",viewBox:"0 0 16 16"},e("path",{fill:"none",d:"M0 0h16v16H0z"}),e("path",{fill:"#786d1c",d:"M15.721 4.007a.965.965 0 0 0-.03-1.385l-1.413-1.414a.965.965 0 0 0-1.385-.03L2.841 11.23l-1.756 4.097a.371.371 0 0 0 .488.487L5.67 14.06l8.607-8.609zM2.624 14.276l.554-1.294.74.74zm2.338-.924L3.55 11.937l8.007-8.008 1.414 1.415zm8.716-8.716l-1.414-1.414 1.09-1.09a.306.306 0 0 1 .433 0l.981.98a.306.306 0 0 1 0 .434z"})))}}})})},"arcgis-components/Badges/Solution":function(){define(["dojo/i18n!../Badges/nls/resources",
"../Badges/Badge"],function(S,J){return function(f){function c(d){if(h[d])return h[d].exports;var b=h[d]={i:d,l:!1,exports:{}};return f[d].call(b.exports,b,b.exports,c),b.l=!0,b.exports}var h={};return c.m=f,c.c=h,c.d=function(d,b,a){c.o(d,b)||Object.defineProperty(d,b,{enumerable:!0,get:a})},c.r=function(d){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"});Object.defineProperty(d,"__esModule",{value:!0})},c.t=function(d,b){if((1&b&&(d=c(d)),
8&b)||4&b&&"object"==typeof d&&d&&d.__esModule)return d;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:d}),2&b&&"string"!=typeof d)for(var e in d)c.d(a,e,function(q){return d[q]}.bind(null,e));return a},c.n=function(d){var b=d&&d.__esModule?function(){return d.default}:function(){return d};return c.d(b,"a",b),b},c.o=function(d,b){return Object.prototype.hasOwnProperty.call(d,b)},c.p="",c(c.s=785)}({115:function(f,c){f.exports=J},68:function(f,c){f.exports=
S},785:function(f,c,h){h.r(c);var d=h(68);f=h(115);var b=h.n(f);c.default=function(a,e){return e(b.a,{backgroundColor:"#e2deee",textColor:"#312b43",key:"solution-badge",size:a.size,text:d.solution,title:d.tooltips.solution,tooltip:a.tooltip?d.tooltips.solution:void 0,tooltipDirection:a.tooltipDirection},e("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 32 32"},e("path",{fill:"#312b43",d:"M29.963 7.672a1.586 1.586 0 0 0-1.584-1.585h-5.274a.187.187 0 0 1-.188-.187V3.977A2 2 0 0 0 20.825 2h-9.672A2.095 2.095 0 0 0 9.06 4.093V5.9a.187.187 0 0 1-.187.187H3.598a1.586 1.586 0 0 0-1.584 1.585v4.016a.281.281 0 0 0 .281.28H4.9l.014-.013V9.153a.177.177 0 0 1 .177-.177h21.46a.456.456 0 0 1 .449.45v13.742A1.832 1.832 0 0 1 25.168 25h-8.892a.568.568 0 0 1-.534-.373 3.98 3.98 0 0 0-7.6.373H5.657a.757.757 0 0 1-.757-.757v-3.055A.188.188 0 0 0 4.714 21H2.028l-.014.014v4.58a2.35 2.35 0 0 0 2.347 2.346h4.161a3.963 3.963 0 0 0 6.8.256.569.569 0 0 1 .475-.256h12.065a2.102 2.102 0 0 0 2.101-2.101zM21 5.625a.375.375 0 0 1-.375.375h-9.25A.375.375 0 0 1 11 5.625V4.45a.456.456 0 0 1 .45-.45h9.1a.456.456 0 0 1 .45.45zM12 28a2 2 0 1 1 2-2 2 2 0 0 1-2 2z"}),
e("path",{class:"cls-1",d:"M13.273 17.994a.57.57 0 0 1 .479.262A3.73 3.73 0 0 0 17 20a3.74 3.74 0 0 0 3.403-2.006h3.41a.188.188 0 0 0 .187-.188v-2.589a.187.187 0 0 0-.188-.188H20.8A3.8 3.8 0 0 0 17 12a4.058 4.058 0 0 0-3.69 2.647.568.568 0 0 1-.537.383H1.093a.094.094 0 0 0-.093.093V17.9a.094.094 0 0 0 .094.094zM17 13.9a2.1 2.1 0 1 1-2.1 2.1 2.1 2.1 0 0 1 2.1-2.1z"})))}}})})},"arcgis-components/Badges/Registered":function(){define(["dojo/i18n!../Badges/nls/resources","../Badges/Badge"],function(S,
J){return function(f){function c(d){if(h[d])return h[d].exports;var b=h[d]={i:d,l:!1,exports:{}};return f[d].call(b.exports,b,b.exports,c),b.l=!0,b.exports}var h={};return c.m=f,c.c=h,c.d=function(d,b,a){c.o(d,b)||Object.defineProperty(d,b,{enumerable:!0,get:a})},c.r=function(d){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"});Object.defineProperty(d,"__esModule",{value:!0})},c.t=function(d,b){if((1&b&&(d=c(d)),8&b)||4&b&&"object"==typeof d&&
d&&d.__esModule)return d;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:d}),2&b&&"string"!=typeof d)for(var e in d)c.d(a,e,function(q){return d[q]}.bind(null,e));return a},c.n=function(d){var b=d&&d.__esModule?function(){return d.default}:function(){return d};return c.d(b,"a",b),b},c.o=function(d,b){return Object.prototype.hasOwnProperty.call(d,b)},c.p="",c(c.s=788)}({115:function(f,c){f.exports=J},68:function(f,c){f.exports=S},788:function(f,c,h){h.r(c);
var d=h(68);f=h(115);var b=h.n(f);c.default=function(a,e){var q=d.tooltips.registered;return e(b.a,{backgroundColor:"#dfeffa",textColor:"#00619b",key:"registered-badge",size:a.size,text:d.registered,title:q,tooltip:a.tooltip?q:void 0,tooltipDirection:a.tooltipDirection},e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},e("path",{fill:"#00619b",d:"M11 1a5 5 0 0 0-5 5 4.947 4.947 0 0 0 .53 2.197L1 13.727V16h3.222l.022-.01.756-.756V14h1.233L7 13.233V12h1.232l1.258-1.258A4.943 4.943 0 0 0 11 11a5 5 0 0 0 0-10zm0 9a3.95 3.95 0 0 1-1.758-.425L7.818 11H6v1.82l-.18.18H4v1.82l-.18.18H2v-.86l5.784-5.784A3.964 3.964 0 0 1 7 6a4 4 0 1 1 4 4zm1.5-7A1.5 1.5 0 1 0 14 4.5 1.5 1.5 0 0 0 12.5 3zm0 2a.5.5 0 1 1 .5-.5.501.501 0 0 1-.5.5z"}),
e("path",{fill:"none",d:"M0 0h16v16H0z"})))}}})})},"arcgis-components/ItemCards/MiniCard/index":function(){define("../../Component dojo/i18n!../../ItemCards/nls/resources dojo/_base/kernel dojo/date/locale dojo/number ../../Badges/Retired ../../Buttons/SvgButton ../../Loaders/LoaderIcon ../../Badges/Authoritative ../../Badges/Collaboration ../../Badges/Deprecated ../../Badges/LivingAtlas ../../Badges/Marketplace ../../Badges/OpenData ../../Badges/Premium ../../Badges/Subscriber ../../Badges/PublicDataCollection ../../Badges/Solution ../../Badges/Registered ../../Dropdowns/TextOptionDropdown".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r){return function(w){function x(G){if(D[G])return D[G].exports;var F=D[G]={i:G,l:!1,exports:{}};return w[G].call(F.exports,F,F.exports,x),F.l=!0,F.exports}var D={};return x.m=w,x.c=D,x.d=function(G,F,A){x.o(G,F)||Object.defineProperty(G,F,{enumerable:!0,get:A})},x.r=function(G){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(G,Symbol.toStringTag,{value:"Module"});Object.defineProperty(G,"__esModule",{value:!0})},x.t=function(G,
F){if((1&F&&(G=x(G)),8&F)||4&F&&"object"==typeof G&&G&&G.__esModule)return G;var A=Object.create(null);if(x.r(A),Object.defineProperty(A,"default",{enumerable:!0,value:G}),2&F&&"string"!=typeof G)for(var y in G)x.d(A,y,function(z){return G[z]}.bind(null,y));return A},x.n=function(G){var F=G&&G.__esModule?function(){return G.default}:function(){return G};return x.d(F,"a",F),F},x.o=function(G,F){return Object.prototype.hasOwnProperty.call(G,F)},x.p="",x(x.s=826)}({1:function(w,x,D){function G(E,K){function I(){this.constructor=
E}if("function"!=typeof K&&null!==K)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");C(E,K);E.prototype=null===K?Object.create(K):(I.prototype=K.prototype,new I)}function F(E,K){var I={},L;for(L in E)Object.prototype.hasOwnProperty.call(E,L)&&0>K.indexOf(L)&&(I[L]=E[L]);if(null!=E&&"function"==typeof Object.getOwnPropertySymbols){var M=0;for(L=Object.getOwnPropertySymbols(E);M<L.length;M++)0>K.indexOf(L[M])&&Object.prototype.propertyIsEnumerable.call(E,L[M])&&
(I[L[M]]=E[L[M]])}return I}function A(E,K,I,L){var M,N=arguments.length,P=3>N?K:null===L?L=Object.getOwnPropertyDescriptor(K,I):L;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)P=Reflect.decorate(E,K,I,L);else for(var R=E.length-1;0<=R;R--)(M=E[R])&&(P=(3>N?M(P):3<N?M(K,I,P):M(K,I))||P);return 3<N&&P&&Object.defineProperty(K,I,P),P}function y(E,K,I,L){return new (I||(I=Promise))(function(M,N){function P(ja){try{Y(L.next(ja))}catch(aa){N(aa)}}function R(ja){try{Y(L.throw(ja))}catch(aa){N(aa)}}
function Y(ja){var aa;ja.done?M(ja.value):(aa=ja.value,aa instanceof I?aa:new I(function(da){da(aa)})).then(P,R)}Y((L=L.apply(E,K||[])).next())})}function z(E,K){function I(Y){return function(ja){return function(aa){if(L)throw new TypeError("Generator is already executing.");for(;P&&(P=0,aa[0]&&(R=0)),R;)try{if(L=1,M&&(N=2&aa[0]?M.return:aa[0]?M.throw||((N=M.return)&&N.call(M),0):M.next)&&!(N=N.call(M,aa[1])).done)return N;switch(M=0,N&&(aa=[2&aa[0],N.value]),aa[0]){case 0:case 1:N=aa;break;case 4:return R.label++,
{value:aa[1],done:!1};case 5:R.label++;M=aa[1];aa=[0];continue;case 7:aa=R.ops.pop();R.trys.pop();continue;default:if(!(N=R.trys,(N=0<N.length&&N[N.length-1])||6!==aa[0]&&2!==aa[0])){R=0;continue}if(3===aa[0]&&(!N||aa[1]>N[0]&&aa[1]<N[3]))R.label=aa[1];else if(6===aa[0]&&R.label<N[1])R.label=N[1],N=aa;else if(N&&R.label<N[2])R.label=N[2],R.ops.push(aa);else{N[2]&&R.ops.pop();R.trys.pop();continue}}aa=K.call(E,R)}catch(da){aa=[6,da],M=0}finally{L=N=0}if(5&aa[0])throw aa[1];return{value:aa[0]?aa[1]:
void 0,done:!0}}([Y,ja])}}var L,M,N,P,R={label:0,sent:function(){if(1&N[0])throw N[1];return N[1]},trys:[],ops:[]};return P={next:I(0),throw:I(1),return:I(2)},"function"==typeof Symbol&&(P[Symbol.iterator]=function(){return this}),P}function B(E,K,I){if(I||2===arguments.length)for(var L,M=0,N=K.length;M<N;M++)!L&&M in K||(L||(L=Array.prototype.slice.call(K,0,M)),L[M]=K[M]);return E.concat(L||Array.prototype.slice.call(K))}D.d(x,"d",function(){return G});D.d(x,"a",function(){return H});D.d(x,"f",function(){return F});
D.d(x,"c",function(){return A});D.d(x,"b",function(){return y});D.d(x,"e",function(){return z});D.d(x,"g",function(){return B});var C=function(E,K){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,L){I.__proto__=L}||function(I,L){for(var M in L)Object.prototype.hasOwnProperty.call(L,M)&&(I[M]=L[M])})(E,K)},H=function(){return(H=Object.assign||function(E){for(var K,I=1,L=arguments.length;I<L;I++)for(var M in K=arguments[I])Object.prototype.hasOwnProperty.call(K,M)&&(E[M]=
K[M]);return E}).apply(this,arguments)};Object.create;Object.create},111:function(w,x){w.exports=J},143:function(w,x){w.exports=f},144:function(w,x){w.exports=c},18:function(w,x){w.exports=S},181:function(w,x){w.exports=h},229:function(w,x){w.exports=d},231:function(w,x){w.exports=b},244:function(w,x){w.exports=a},262:function(w,x){w.exports=e},263:function(w,x){w.exports=q},264:function(w,x){w.exports=t},265:function(w,x){w.exports=u},266:function(w,x){w.exports=g},267:function(w,x){w.exports=m},
268:function(w,x){w.exports=v},269:function(w,x){w.exports=p},270:function(w,x){w.exports=l},294:function(w,x){w.exports=n},295:function(w,x){w.exports=k},364:function(w,x){w.exports=r},574:function(w,x,D){function G(B){B.stopPropagation()}var F=D(1);w=D(18);var A=D(144),y=D(143),z=D(181);D=function(B){function C(){return null!==B&&B.apply(this,arguments)||this}return Object(F.d)(C,B),C.prototype.formatDate=function(H){return"".concat(A.format(new Date(H),{selector:"date",formatLength:"short",locale:y.locale}))},
C.prototype.render=function(H){var E,K=this.props,I=K.active,L=K.classes,M=(K.handleShowItemDetails,K.item),N=K.iconUrl,P=K.userUrl,R=(K.portal,K.sortField);K=K.i18n;return E="numviews"===R?"".concat(K.viewCount,": ").concat(z.format(M.numViews)):"avgrating"===R?"".concat(K.rating,": ").concat(M.avgRating.toFixed(2)):"created"===R?"".concat(K.created,": ").concat(this.formatDate(M.created)):"".concat(K.updated,": ").concat(this.formatDate(M.modified)),H("header",{classes:L},H("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
alt:"",class:"card-mc__thumbnail",style:"\n                        background-image: url(".concat(this.props.thumbURI,");\n                    ")}),H("div",{class:"card-mc__title-container"},H("button",{id:"item-".concat(M.id,"-card-title"),class:"card-mc__title",title:I?K.hideItem:K.viewItem,tabindex:"0"},M.title),H("div",{class:"card-mc__author-row"},H("img",{src:N,class:"content-search-item-icon",title:M.displayName}),H("span",{class:"card-mc__author-text"},K.by,H("a",{class:"content-search-selectable card-mc__author-link",
title:this.props.organization?K.viewOrg:K.viewProfile,href:this.props.organization?this.props.organization.orgUrl:P,target:"_blank",onclick:G}," ".concat(this.props.organization?this.props.organization.name:M.owner)))),H("p",{class:"card-mc__info"},E)))},C}(w.Component);x.a=D},575:function(w,x,D){w=D(364);var G=D.n(w);w=D(231);var F=D.n(w);w=D(244);var A=D.n(w);x.a=function(y,z){var B=y.selected,C=y.handleSelectionClick,H=y.handleIconActionClick,E=y.handleCustomActionClick,K=y.availableMiscActions,
I=y.availableIconActions,L=y.loading,M=y.children,N=y.id,P=y.hideEllipses,R=y.i18n,Y=null;y.disableMainAction||(Y=L?z(A.a,null):z(F.a,{focusable:!0,handleClick:C,key:"".concat(N,"-selection-btn"),title:B?R.remove:R.add},z("svg",{role:"img",width:"16px",height:"16px",viewBox:"0 0 16 16"},z("g",{id:"16px",stroke:"none","stroke-width":"1"},z("g",null,z("g",null,z("polygon",B?{points:"3 7 12 7 12 8 3 8"}:{points:"12 7 7.999 7 8 3 7.001 3 7 7 2.999 7 2.999 8 7 8 6.999 12 7.998 12 7.999 8 12 8"}),z("path",
{d:"M7.501,0 C3.365,0 0,3.364 0,7.5 C0,11.636 3.365,15 7.501,15 C11.636,15 15,11.636 15,7.5 C15,3.364 11.636,0 7.501,0 Z M7.501,14 C3.916,14 1,11.084 1,7.5 C1,3.916 3.916,1 7.501,1 C11.085,1 14,3.916 14,7.5 C14,11.084 11.085,14 7.501,14 Z"})))))));y=I.map(function(ja){return z(F.a,{focusable:!0,handleClick:H,key:"".concat(N,"-").concat(ja.text),title:ja.text,value:ja.value},z("div",{class:"card-mc__custom-icon-container",innerHTML:ja.icon}))});return z("div",{id:"item-".concat(N,"-action-row"),class:"content-search-item-action-row card-mc__action-row"},
M,z("div",{key:"action-container",class:"card-mc__action-container"},z(F.a,{key:"".concat(N,"-spacer")},z("svg",{height:"16px",width:"0px"})),Y,y,0<K.length&&!P?z(G.a,{key:"".concat(N,"-actions"),options:K,onSelect:E,selectedOptionValue:void 0,justify:"right"},z(F.a,{focusable:!1,key:"".concat(N,"-action-btn"),title:R.actions},z("svg",{role:"img",width:"16px",height:"16px",style:"transform: translate(0, -2px);"},z("g",{stroke:"none","stroke-width":"1"},z("g",null,z("path",{d:"M1,7 L3,7 L3,9 L1,9 L1,7 Z M7,7 L9,7 L9,9 L7,9 L7,7 Z M13,7 L15,7 L15,9 L13,9 L13,7 Z"})))))):
null))}},826:function(w,x,D){D.r(x);var G=D(1),F=D(111);w=D(18);var A=D(574),y=D(575),z=D(262),B=D.n(z);z=D(263);var C=D.n(z);z=D(264);var H=D.n(z);z=D(265);var E=D.n(z);z=D(266);var K=D.n(z);z=D(267);var I=D.n(z);z=D(268);var L=D.n(z);z=D(269);var M=D.n(z);z=D(294);var N=D.n(z);z=D(270);var P=D.n(z);z=D(229);var R=D.n(z);z=D(295);var Y=D.n(z);D=function(ja){function aa(da){da=ja.call(this,da)||this;return da.handleShowItemDetails=da.handleShowItemDetails.bind(da),da.handleSelectionClick=da.handleSelectionClick.bind(da),
da.handleCustomActionClick=da.handleCustomActionClick.bind(da),da.handleIconActionClick=da.handleIconActionClick.bind(da),da}return Object(G.d)(aa,ja),aa.prototype.render=function(da){var ra=this,ca=!!this.props.selectedItems[this.props.item.id],fa=!!this.props.loadingItems[this.props.item.id],la=!(!this.props.activeItem||this.props.activeItem.id!==this.props.item.id),ta=this.props.customActions.filter(function(T){return T.allowed(ra.props.item)}).map(function(T){return{value:T.name,text:T.name,icon:T.icon}}),
Q=ta.filter(function(T){return T.icon});ta=ta.filter(function(T){return!T.icon});return da("section",{key:this.props.item.id,classes:{"card-mc__container":!0,"card-mc__container--selected":ca,"card-mc__container--active":la}},da("div",{classes:{"card-mc__fader":!0,"card-mc__fader--loading":fa},onclick:this.handleShowItemDetails},da(A.a,{active:la,classes:{"card-mc__header":!0,"card-mc__header--constrained":!!this.props.constrained},handleShowItemDetails:this.handleShowItemDetails,i18n:F,iconUrl:this.props.item.iconURI,
item:this.props.item,key:"mini-card-header",portal:this.props.portal,sortField:this.props.sortField,thumbURI:this.props.item.thumbURI,userUrl:"".concat(this.props.portal.baseUrl,"/home/user.html?user\x3d").concat(this.props.item.owner),organization:this.props.organization}),da(y.a,{selected:ca,handleSelectionClick:this.handleSelectionClick,loading:fa,id:this.props.item.id,i18n:F,availableMiscActions:ta,availableIconActions:Q,handleIconActionClick:this.handleIconActionClick,handleCustomActionClick:this.handleCustomActionClick,
disableMainAction:this.props.disableMainAction,hideEllipses:this.props.hideEllipses},da("div",{key:"badges"},this.renderBadges(da)))))},aa.prototype.renderBadges=function(da){var ra=this;return this.props.item.badges.map(function(ca){switch(ca){case "authoritative":return da(B.a,{size:"small",altOrg:ra.props.organization?ra.props.organization.name:void 0});case "deprecated":return da(H.a,{size:"small"});case "collaboration":return da(C.a,{size:"small"});case "livingAtlas":return da(E.a,{size:"small"});
case "marketplace":return da(K.a,{size:"small"});case "openData":return da(I.a,{size:"small"});case "premium":return da(L.a,{size:"small",user:ra.props.portal.user});case "subscriber":return da(M.a,{size:"small",user:ra.props.portal.user});case "publicDataCollection":return da(P.a,{size:"small"});case "solution":return da(N.a,{size:"small"});case "retiredStoryMap":return da(R.a,{size:"small",isRetiredStoryMap:!0});case "retiredApp":return da(R.a,{size:"small"});case "registered":return da(Y.a,{size:"small"})}return null})},
aa.prototype.handleShowItemDetails=function(da){this.props.onShowItemDetails(this.props.item)},aa.prototype.handleSelectionClick=function(da){da.stopPropagation();this.props.onSelectionClick(this.props.item)},aa.prototype.handleIconActionClick=function(da){da.stopPropagation();da.target.value&&this.props.onCustomActionClick(da.target.value,this.props.item)},aa.prototype.handleCustomActionClick=function(da){this.props.onCustomActionClick(da,this.props.item)},aa}(w.Component);x.default=D}})})},"arcgis-components/ItemCards/MiniCardRow/index":function(){define(["../../Component",
"dojo/i18n!../../ItemCards/nls/resources","../../Buttons/SvgButton","../../Loaders/LoaderIcon","../../Dropdowns/TextOptionDropdown"],function(S,J,f,c,h){return function(d){function b(e){if(a[e])return a[e].exports;var q=a[e]={i:e,l:!1,exports:{}};return d[e].call(q.exports,q,q.exports,b),q.l=!0,q.exports}var a={};return b.m=d,b.c=a,b.d=function(e,q,t){b.o(e,q)||Object.defineProperty(e,q,{enumerable:!0,get:t})},b.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,
Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})},b.t=function(e,q){if((1&q&&(e=b(e)),8&q)||4&q&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(b.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&q&&"string"!=typeof e)for(var u in e)b.d(t,u,function(g){return e[g]}.bind(null,u));return t},b.n=function(e){var q=e&&e.__esModule?function(){return e.default}:function(){return e};return b.d(q,"a",q),q},b.o=function(e,q){return Object.prototype.hasOwnProperty.call(e,
q)},b.p="",b(b.s=827)}({1:function(d,b,a){function e(l,n){function k(){this.constructor=l}if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");v(l,n);l.prototype=null===n?Object.create(n):(k.prototype=n.prototype,new k)}function q(l,n){var k={},r;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&0>n.indexOf(r)&&(k[r]=l[r]);if(null!=l&&"function"==typeof Object.getOwnPropertySymbols){var w=0;for(r=Object.getOwnPropertySymbols(l);w<
r.length;w++)0>n.indexOf(r[w])&&Object.prototype.propertyIsEnumerable.call(l,r[w])&&(k[r[w]]=l[r[w]])}return k}function t(l,n,k,r){var w,x=arguments.length,D=3>x?n:null===r?r=Object.getOwnPropertyDescriptor(n,k):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)D=Reflect.decorate(l,n,k,r);else for(var G=l.length-1;0<=G;G--)(w=l[G])&&(D=(3>x?w(D):3<x?w(n,k,D):w(n,k))||D);return 3<x&&D&&Object.defineProperty(n,k,D),D}function u(l,n,k,r){return new (k||(k=Promise))(function(w,x){function D(A){try{F(r.next(A))}catch(y){x(y)}}
function G(A){try{F(r.throw(A))}catch(y){x(y)}}function F(A){var y;A.done?w(A.value):(y=A.value,y instanceof k?y:new k(function(z){z(y)})).then(D,G)}F((r=r.apply(l,n||[])).next())})}function g(l,n){function k(F){return function(A){return function(y){if(r)throw new TypeError("Generator is already executing.");for(;D&&(D=0,y[0]&&(G=0)),G;)try{if(r=1,w&&(x=2&y[0]?w.return:y[0]?w.throw||((x=w.return)&&x.call(w),0):w.next)&&!(x=x.call(w,y[1])).done)return x;switch(w=0,x&&(y=[2&y[0],x.value]),y[0]){case 0:case 1:x=
y;break;case 4:return G.label++,{value:y[1],done:!1};case 5:G.label++;w=y[1];y=[0];continue;case 7:y=G.ops.pop();G.trys.pop();continue;default:if(!(x=G.trys,(x=0<x.length&&x[x.length-1])||6!==y[0]&&2!==y[0])){G=0;continue}if(3===y[0]&&(!x||y[1]>x[0]&&y[1]<x[3]))G.label=y[1];else if(6===y[0]&&G.label<x[1])G.label=x[1],x=y;else if(x&&G.label<x[2])G.label=x[2],G.ops.push(y);else{x[2]&&G.ops.pop();G.trys.pop();continue}}y=n.call(l,G)}catch(z){y=[6,z],w=0}finally{r=x=0}if(5&y[0])throw y[1];return{value:y[0]?
y[1]:void 0,done:!0}}([F,A])}}var r,w,x,D,G={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return D={next:k(0),throw:k(1),return:k(2)},"function"==typeof Symbol&&(D[Symbol.iterator]=function(){return this}),D}function m(l,n,k){if(k||2===arguments.length)for(var r,w=0,x=n.length;w<x;w++)!r&&w in n||(r||(r=Array.prototype.slice.call(n,0,w)),r[w]=n[w]);return l.concat(r||Array.prototype.slice.call(n))}a.d(b,"d",function(){return e});a.d(b,"a",function(){return p});a.d(b,"f",
function(){return q});a.d(b,"c",function(){return t});a.d(b,"b",function(){return u});a.d(b,"e",function(){return g});a.d(b,"g",function(){return m});var v=function(l,n){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,r){k.__proto__=r}||function(k,r){for(var w in r)Object.prototype.hasOwnProperty.call(r,w)&&(k[w]=r[w])})(l,n)},p=function(){return(p=Object.assign||function(l){for(var n,k=1,r=arguments.length;k<r;k++)for(var w in n=arguments[k])Object.prototype.hasOwnProperty.call(n,
w)&&(l[w]=n[w]);return l}).apply(this,arguments)};Object.create;Object.create},111:function(d,b){d.exports=J},18:function(d,b){d.exports=S},231:function(d,b){d.exports=f},244:function(d,b){d.exports=c},364:function(d,b){d.exports=h},827:function(d,b,a){a.r(b);var e=a(1),q=a(111);d=a(18);var t=a(364),u=a.n(t);t=a(231);var g=a.n(t);t=a(244);var m=a.n(t);a=function(v){function p(l){l=v.call(this,l)||this;return l.handleShowItemDetails=l.handleShowItemDetails.bind(l),l.handleSelectionClick=l.handleSelectionClick.bind(l),
l.handleIconActionClick=l.handleIconActionClick.bind(l),l.handleCustomActionClick=l.handleCustomActionClick.bind(l),l}return Object(e.d)(p,v),p.prototype.render=function(l){var n,k=this,r=!!this.props.selectedItems[this.props.item.id],w=!!this.props.loadingItems[this.props.item.id],x=this.props.activeItem&&this.props.activeItem.id===this.props.item.id,D=this.props.customActions.filter(function(F){return F.allowed(k.props.item)}).map(function(F){return{value:F.name,text:F.name,icon:F.icon}}),G=D.filter(function(F){return!!F.icon});
D=D.filter(function(F){return!F.icon});this.props.disableMainAction||(n=w?l(m.a,null):l(g.a,{focusable:!0,handleClick:this.handleSelectionClick,key:"".concat(this.props.item.id,"-selection-btn"),title:r?q.remove:q.add},l("svg",{role:"img",width:"16px",height:"16px",viewBox:"0 0 16 16"},l("g",{stroke:"none","stroke-width":"1"},r?l("g",{id:"minus-circled-1px-16"},l("g",null,l("polygon",{points:"3 7 12 7 12 8 3 8"}),l("path",{d:"M7.501,0 C3.365,0 0,3.364 0,7.5 C0,11.636 3.365,15 7.501,15 C11.636,15 15,11.636 15,7.5 C15,3.364 11.636,0 7.501,0 Z M7.501,14 C3.916,14 1,11.084 1,7.5 C1,3.916 3.916,1 7.501,1 C11.085,1 14,3.916 14,7.5 C14,11.084 11.085,14 7.501,14 Z"}))):
l("g",{id:"plus-circled-1px-16"},l("g",null,l("polygon",{points:"12 7 7.999 7 8 3 7.001 3 7 7 2.999 7 2.999 8 7 8 6.999 12 7.998 12 7.999 8 12 8"}),l("path",{d:"M7.501,0 C3.365,0 0,3.364 0,7.5 C0,11.636 3.365,15 7.501,15 C11.636,15 15,11.636 15,7.5 C15,3.364 11.636,0 7.501,0 Z M7.501,14 C3.916,14 1,11.084 1,7.5 C1,3.916 3.916,1 7.501,1 C11.085,1 14,3.916 14,7.5 C14,11.084 11.085,14 7.501,14 Z"})))))));w=G.map(function(F){return l(g.a,{focusable:!0,handleClick:k.handleIconActionClick,key:"".concat(k.props.item.id,
"-").concat(F.text),title:F.text,value:F.value},l("div",{class:"card-mcr__custom-icon-container",innerHTML:F.icon}))});return l("div",{key:this.props.item.id,classes:{"card-mcr__container":!0,"card-mcr__container--selected":r,"card-mcr__container--active":x},onclick:this.handleShowItemDetails},l("img",{src:this.props.item.iconURI,class:"card-mcr__item-icon",title:this.props.item.displayName,alt:""}),l("button",{id:"item-".concat(this.props.item.id,"-card-title"),class:"card-mcr__item-title",title:x?
q.hideItem:q.viewItem,tabindex:"0"},this.props.item.title),l("div",{class:"card-mcr__spacer"}),l("div",{class:"card-mcr__action-container"},n,w,0<D.length&&!this.props.hideEllipses?l(u.a,{key:"".concat(this.props.item.id,"-actions"),options:D,onSelect:this.handleCustomActionClick,selectedOptionValue:void 0,justify:"right"},l(g.a,{key:"".concat(this.props.item.id,"-action-btn"),focusable:!1,title:q.actions},l("svg",{role:"img",width:"16px",height:"16px",viewBox:"0 0 16 16",style:"transform: translate(0, -2px);"},
l("g",{stroke:"none","stroke-width":"1"},l("g",{id:"ellipses-1px-16"},l("path",{d:"M1,7 L3,7 L3,9 L1,9 L1,7 Z M7,7 L9,7 L9,9 L7,9 L7,7 Z M13,7 L15,7 L15,9 L13,9 L13,7 Z"})))))):null))},p.prototype.handleShowItemDetails=function(l){this.props.onShowItemDetails(this.props.item)},p.prototype.handleSelectionClick=function(l){l.stopPropagation();this.props.onSelectionClick(this.props.item)},p.prototype.handleIconActionClick=function(l){l.stopPropagation();l.target.value&&this.props.onCustomActionClick(l.target.value,
this.props.item)},p.prototype.handleCustomActionClick=function(l){this.props.onCustomActionClick(l,this.props.item)},p}(d.Component);b.default=a}})})},"arcgisonline/map/core/sameTilingScheme":function(){define(["require","exports"],function(S,J){Object.defineProperty(J,"__esModule",{value:!0});J.default=function(f,c){for(var h=!1,d=!1,b=0;b<f.lods.length;b++){var a=f.lods[b].scale;f.dpi!==c.dpi&&(a=f.lods[b].scale/f.dpi);for(var e=0;e<c.lods.length;e++){var q=c.lods[e].scale;f.dpi!==c.dpi&&(q=c.lods[e].scale/
c.dpi);if(.01>Math.abs(q-a)/q)if(h){d=!0;break}else h=!0;if(q<a)break}if(d)break}return d||h&&(1===f.lods.length||1===c.lods.length)?!0:!1}})},"arcgisonline/pages/dijit/ReplaceLayer/ReplaceSceneLayer":function(){define("require exports tslib dojo/text!../ReplaceLayer/templates/ReplaceSceneLayer.html dojo/i18n!../../../nls/arcgisonline dojo/string ../../utils/dom ../../../sharing/util arcgisonline/tsutils/declareDecorator arcgisonline/map/core/sameSpatialReference arcgisonline/map/layer/getServiceInfo ./ReplaceLayer dojo/Deferred arcgisonline/esriGeowConfig".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);return function(){function v(p,l){this.overlayContents=d.default.substitute(c.default,{i18n:this.i18n,icons:this.icons})}v.prototype.initUI=function(){var p,l;this.inherited(arguments);this.layerType=null!==(l=
null===(p=this.item.serviceInfo.layers)||void 0===p?void 0:p[0].layerType)&&void 0!==l?l:this.item.serviceInfo.layerType;this._showPreviewStylesTab=!1;b.default.hideNodes(this._shownPreviewStylesContent)};v.prototype.createItemBrowser=function(){var p=this;this._itemBrowserConfig={settings:{config:{layoutMode:"adjustable",dialogTitle:h.default.replaceLayer.selectReplacementLayer,mainActionTitle:h.default.replaceLayer.select,usePrimaryButtonStyle:!1,enableMapAreaFilter:!1,onSelect:this.handleSelectItem.bind(this),
baseSections:["myContent","myFavorites","myGroups","myOrganization"],allowedItemTypes:[this.type],singleItemSelect:!0,onBack:this.closeItemBrowser.bind(this),addQueryParameters:function(){return"owner:".concat(p.item.owner," ").concat(p.isCacheContent?'typekeywords:"ExtractedCache" -':"",'typekeywords:"Hosted Service" NOT id:').concat(p.item.id)},showSubResources:{}}},parameters:{section:this.isOwner?"myContent":"myOrganization",sort:{field:"modified",order:"desc"}}};this.inherited(arguments)};v.prototype.checkLayerCompatibility=
function(){var p=this,l=new g.default;if(this.isTile)this.inherited(arguments).then(function(){l.resolve()},function(w){p.handleLayerSelectionError(w)});else{var n=this.isCacheContent,k=h.default.replaceLayer.error,r=!0;(0,t.default)(this._selectedReplacementItem.url,null,function(w){p._selectedReplacementItem.getRelatedItems(n?"DataStore2ByRefService":"Service2Service","reverse").then(function(x){var D;if(null===(D=p.item.serviceInfo.layers)||void 0===D?0:D[0]){D=(0,q.default)(p.item.serviceInfo.layers[0].spatialReference,
w.layers[0].spatialReference);var G=p.layerType===w.layers[0].layerType;x=0>=x.length;n||x?D||G?D?n||G?r=!1:k=h.default.replaceLayer.replaceSceneLayer.layerTypeError:k=h.default.replaceLayer.differentCoordinateSystem:k=h.default.replaceLayer.replaceSceneLayer.spatialLayerCombinedError:k=h.default.replaceLayer.replaceSceneLayer.sceneLayerPackageError;r?(p.compatibilityErrorCaught=!0,l.reject(Error(k))):l.resolve()}else l.resolve()})},function(w){p.handleLayerSelectionError(w)})}return l};v.prototype.checkForCompatibleStyles=
function(p){p=this._itemBrowserContainer.querySelector("#item-browser-wrapper").children[0].classList.contains("hide");b.default.showNode(this._checkStylesSuccess);b.default.hideNodes(this._checkStylesWarnings);b.default.hideNode(this._checkStyles);this._primaryBtn.disabled=!1;p&&this._primaryBtn.focus()};v.prototype.handleHelp=function(){var p;window.open("".concat(m.default.self.helpBase).concat((null===(p=m.default.self.helpMap)||void 0===p?void 0:p.m["120001916"])||""))};v.prototype.replaceLayer=
function(){var p={toReplaceItemId:this.item.id,replacementItemId:this._selectedReplacementItem.id,replacedServiceName:this.replaceSpacesWithUnderscore(this._archiveName),replaceMetadata:this._replaceItemInformation,createNewItem:!0,f:"json"};return a.default.request({url:"".concat(this.portal.portalUrl,"content/users/").concat(this.portal.user.username,"/replaceService"),content:p},{usePost:!0})};return v=f.__decorate([(0,e.default)(u.default)],v)}()})},"arcgis-components/wrappers/Share":function(){define(["../Component",
"dojo/i18n!../Share/nls/resources","../Share/index"],function(S,J,f){return function(c){function h(b){if(d[b])return d[b].exports;var a=d[b]={i:b,l:!1,exports:{}};return c[b].call(a.exports,a,a.exports,h),a.l=!0,a.exports}var d={};return h.m=c,h.c=d,h.d=function(b,a,e){h.o(b,a)||Object.defineProperty(b,a,{enumerable:!0,get:e})},h.r=function(b){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});Object.defineProperty(b,"__esModule",{value:!0})},
h.t=function(b,a){if((1&a&&(b=h(b)),8&a)||4&a&&"object"==typeof b&&b&&b.__esModule)return b;var e=Object.create(null);if(h.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:b}),2&a&&"string"!=typeof b)for(var q in b)h.d(e,q,function(t){return b[t]}.bind(null,q));return e},h.n=function(b){var a=b&&b.__esModule?function(){return b.default}:function(){return b};return h.d(a,"a",a),a},h.o=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)},h.p="",h(h.s=948)}({1:function(c,h,d){function b(v,
p){function l(){this.constructor=v}if("function"!=typeof p&&null!==p)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");g(v,p);v.prototype=null===p?Object.create(p):(l.prototype=p.prototype,new l)}function a(v,p){var l={},n;for(n in v)Object.prototype.hasOwnProperty.call(v,n)&&0>p.indexOf(n)&&(l[n]=v[n]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var k=0;for(n=Object.getOwnPropertySymbols(v);k<n.length;k++)0>p.indexOf(n[k])&&Object.prototype.propertyIsEnumerable.call(v,
n[k])&&(l[n[k]]=v[n[k]])}return l}function e(v,p,l,n){var k,r=arguments.length,w=3>r?p:null===n?n=Object.getOwnPropertyDescriptor(p,l):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)w=Reflect.decorate(v,p,l,n);else for(var x=v.length-1;0<=x;x--)(k=v[x])&&(w=(3>r?k(w):3<r?k(p,l,w):k(p,l))||w);return 3<r&&w&&Object.defineProperty(p,l,w),w}function q(v,p,l,n){return new (l||(l=Promise))(function(k,r){function w(G){try{D(n.next(G))}catch(F){r(F)}}function x(G){try{D(n.throw(G))}catch(F){r(F)}}
function D(G){var F;G.done?k(G.value):(F=G.value,F instanceof l?F:new l(function(A){A(F)})).then(w,x)}D((n=n.apply(v,p||[])).next())})}function t(v,p){function l(D){return function(G){return function(F){if(n)throw new TypeError("Generator is already executing.");for(;w&&(w=0,F[0]&&(x=0)),x;)try{if(n=1,k&&(r=2&F[0]?k.return:F[0]?k.throw||((r=k.return)&&r.call(k),0):k.next)&&!(r=r.call(k,F[1])).done)return r;switch(k=0,r&&(F=[2&F[0],r.value]),F[0]){case 0:case 1:r=F;break;case 4:return x.label++,{value:F[1],
done:!1};case 5:x.label++;k=F[1];F=[0];continue;case 7:F=x.ops.pop();x.trys.pop();continue;default:if(!(r=x.trys,(r=0<r.length&&r[r.length-1])||6!==F[0]&&2!==F[0])){x=0;continue}if(3===F[0]&&(!r||F[1]>r[0]&&F[1]<r[3]))x.label=F[1];else if(6===F[0]&&x.label<r[1])x.label=r[1],r=F;else if(r&&x.label<r[2])x.label=r[2],x.ops.push(F);else{r[2]&&x.ops.pop();x.trys.pop();continue}}F=p.call(v,x)}catch(A){F=[6,A],k=0}finally{n=r=0}if(5&F[0])throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}([D,G])}}var n,k,
r,w,x={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return w={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w}function u(v,p,l){if(l||2===arguments.length)for(var n,k=0,r=p.length;k<r;k++)!n&&k in p||(n||(n=Array.prototype.slice.call(p,0,k)),n[k]=p[k]);return v.concat(n||Array.prototype.slice.call(p))}d.d(h,"d",function(){return b});d.d(h,"a",function(){return m});d.d(h,"f",function(){return a});d.d(h,"c",function(){return e});
d.d(h,"b",function(){return q});d.d(h,"e",function(){return t});d.d(h,"g",function(){return u});var g=function(v,p){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,n){l.__proto__=n}||function(l,n){for(var k in n)Object.prototype.hasOwnProperty.call(n,k)&&(l[k]=n[k])})(v,p)},m=function(){return(m=Object.assign||function(v){for(var p,l=1,n=arguments.length;l<n;l++)for(var k in p=arguments[l])Object.prototype.hasOwnProperty.call(p,k)&&(v[k]=p[k]);return v}).apply(this,arguments)};
Object.create;Object.create},114:function(c,h,d){d.d(h,"a",function(){return a});var b=d(1);c=d(15);var a=Object(c.a)(function(e,q){var t=Object(b.a),u=Object(b.a)({},q),g=q.type;q=q.typeKeywords?q.typeKeywords:[];var m=null==g?void 0:g.toLowerCase(),v=g=!1,p=!1,l=!1;if("ogcfeatureserver"===m)q="featureshosted";else if(0<(null==m?void 0:m.indexOf("service"))||"feature collection"===m||"kml"===m||"wms"===m||"wmts"===m||"wfs"===m){var n=-1<q.indexOf("Hosted Service");"feature service"===m||"feature collection"===
m||"kml"===m||"wfs"===m?(l=-1<q.indexOf("Table"),g=-1<q.indexOf("Route Layer"),v=-1<q.indexOf("Markup"),q=(p=-1!==q.indexOf("Spatiotemporal"))&&l?"spatiotemporaltable":l?"table":g?"routelayer":v?"markup":p?"spatiotemporal":n?"featureshosted":"features"):"map service"===m||"wms"===m||"wmts"===m?q=n||-1<q.indexOf("Tiled")||"wmts"===m?"maptiles":"mapimages":"scene service"===m?q=-1<q.indexOf("Line")?"sceneweblayerline":-1<q.indexOf("3DObject")?"sceneweblayermultipatch":-1<q.indexOf("Point")?"sceneweblayerpoint":
-1<q.indexOf("IntegratedMesh")?"sceneweblayermesh":-1<q.indexOf("PointCloud")?"sceneweblayerpointcloud":-1<q.indexOf("Polygon")?"sceneweblayerpolygon":-1<q.indexOf("Building")?"sceneweblayerbuilding":-1<q.indexOf("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===m?(g=-1<q.indexOf("Elevation 3D Layer"),q=-1<q.indexOf("Tiled Imagery"),q=g?"elevationlayer":q?"tiledimagerylayer":"imagery"):q="stream service"===m?"streamlayer":"vector tile service"===m?"vectortile":"datastore catalog service"===
m?"datastorecollection":"geocoding service"===m?"geocodeservice":"geoprocessing service"===m&&-1<q.indexOf("Web Tool")?"tool":"layers"}else q="web map"===m||"cityengine web scene"===m?"maps":"web scene"===m?-1<q.indexOf("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===m&&-1<(null==q?void 0:q.indexOf("configurableApp"))?"instantapps":"web mapping application"===m||"mobile application"===m||"application"===m||"operation view"===m||"desktop application"===m?"apps":"map document"===
m||"map package"===m||"published map"===m||"scene document"===m||"globe document"===m||"basemap package"===m||"mobile basemap package"===m||"mobile map package"===m||"project package"===m||"project template"===m||"pro map"===m||"layout"===m||"layer"===m&&-1<q.indexOf("ArcGIS Pro")||"explorer map"===m&&-1<q.indexOf("Explorer Document")?"mapsgray":"service definition"===m||"csv"===m||"administrative report"===m||"shapefile"===m||"cad drawing"===m||"geojson"===m||"360 vr experience"===m||"netcdf"===
m?"datafiles":"explorer add in"===m||"desktop add in"===m||"windows viewer add in"===m||"windows viewer configuration"===m?"appsgray":"arcgis pro add in"===m||"arcgis pro configuration"===m?"addindesktop":"rule package"===m||"file geodatabase"===m||"csv collection"===m||"kml collection"===m||"windows mobile package"===m||"map template"===m||"desktop application template"===m||"arcpad package"===m||"code sample"===m||"form"===m||"document link"===m||"vector tile package"===m||"operations dashboard add in"===
m||"rules package"===m||"image"===m||"workflow manager package"===m||"explorer map"===m&&-1<q.indexOf("Explorer Mapping Application")||-1<q.indexOf("Document")?"datafilesgray":"network analysis service"===m||"geoprocessing service"===m||"geodata service"===m||"geometry service"===m||"geoprocessing package"===m||"locator package"===m||"geoprocessing sample"===m||"workflow manager service"===m||"raster function template"===m||"deep learning package"===m?"toolsgray":"layer"===m||"layer package"===m||
"explorer layer"===m?"layersgray":"scene package"===m?"scenepackage":"tile package"===m?"tilepackage":"storymap"===m?"storymap":"storymap theme"===m?"storymaptheme":"web experience"===m?"experiencebuilder":"web experience template"===m?"webexperiencetemplate":"task file"===m?"taskfile":"report template"===m?"report-template":"statistical data collection"===m?"statisticaldatacollection":"insights workbook"===m?"workbook":"insights model"===m?"insightsmodel":"insights page"===m?"insightspage":"hub initiative"===
m?"hubinitiative":"hub page"===m?"hubpage":"hub site application"===m?"hubsite":"relational database connection"===m?"relationaldatabaseconnection":"big data file share"===m||"data store"===m?"datastorecollection":"image collection"===m?"imagecollection":"desktop style"===m?"desktopstyle":"style"===m?"style":"dashboard"===m?"dashboard":"feed"===m?"feed":"real time analytic"===m?"realtimeanalytics":"big data analytic"===m?"bigdataanalytics":"notebook"===m?"notebook":"notebook code snippets"===m||"notebook code snippet library"===
m?"notebookcodesnippets":"maps";e="".concat(e,"/").concat(q).concat(16,".png");return t(u,{iconURI:e})})},117:function(c,h,d){d.d(h,"a",function(){return a});var b=d(1);c=d(15);var a=Object(c.a)(function(e,q){var t=Object(b.a),u=Object(b.a)({},q),g,m,v,p="notebook"!==(null===(g=q.type)||void 0===g?void 0:g.toLowerCase())?"default_thumb.png":"notebook-thumb.png";"notebook code snippets"!==(null===(m=q.type)||void 0===m?void 0:m.toLowerCase())&&"notebook code snippet library"!==(null===(v=q.type)||
void 0===v?void 0:v.toLowerCase())||(p="notebook-code-snippet-thumb.png");g="".concat(e.baseUrl,"/home/js/arcgisonline/css/images/").concat(p);e=(q.thumbnail&&(g="".concat(e.restUrl,"/content/items/").concat(q.id,"/info/").concat(q.thumbnail).concat(e.credential?"?token\x3d".concat(e.credential.token):"")),g);return t(u,{thumbURI:e})})},118:function(c,h,d){d.d(h,"a",function(){return e});var b=d(1);c=d(15);var a=function(q,t){return t.description?t.description.replace(/src=('|")js\/jsapi\/esri\//g,
function(u){return"src\x3d".concat('"'===u[4]?'"':"'").concat(q.baseUrl,"/home/js/jsapi/esri/")}):void 0},e=Object(c.a)(function(q,t){return Object(b.a)(Object(b.a)({},t),{patchedDescription:a(q,t)})})},119:function(c,h,d){d.d(h,"a",function(){return q});var b=d(1),a=d(121);c=d(15);var e=d(61),q=Object(c.a)(function(t,u){var g=Object(b.a),m=Object(b.a)({},u),v,p=u.type,l=u.typeKeywords||[],n=p;t=(null==t?void 0:t.portalUser)||(null==t?void 0:t.user);if("Feature Service"===p||"Feature Collection"===
p){if(n=-1<l.indexOf("Table")?"Table":-1<l.indexOf("Route Layer")?"Route Layer":-1<l.indexOf("Markup")?"Markup":"Feature Layer",t&&Object(e.d)(u,t)&&-1<(null==l?void 0:l.indexOf("Hosted Service")))l=(null===(v=null===document||void 0===document?void 0:document.documentElement)||void 0===v?void 0:v.lang)||"en",v=a.a[l]||a.a[l.split("-")[0]]||a.a.en,n="".concat(n," (").concat(v,")")}else"Image Service"===p?(n=-1<l.indexOf("Elevation 3D Layer"),v=-1<l.indexOf("Tiled Imagery"),n=n?"Elevation Layer":v?
"Tiled Imagery Layer":"Imagery Layer"):"Scene Service"===p?n="Scene Layer":"Scene Package"===p?n="Scene Layer Package":"Stream Service"===p?n="Feature Layer":"Geocoding Service"===p?n="Locator":"Microsoft Powerpoint"===p?n="Microsoft PowerPoint":"OGCFeatureServer"===p?n="OGC Feature Layer":"GeoJson"===p?n="GeoJSON":"Globe Service"===p?n="Globe Layer":"Vector Tile Service"===p?n="Tile Layer":"netCDF"===p?n="NetCDF":"Map Service"===p?n=-1===l.indexOf("Spatiotemporal")&&(-1<l.indexOf("Hosted Service")||
-1<l.indexOf("Tiled"))?"Tile Layer":"Map Image Layer":p&&-1<p.toLowerCase().indexOf("add in")?n=p.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===p?n="Big Data File Share":"Web Mapping Application"===p&&(null==l?0:l.includes("configurableApp"))?n="Instant App":"Data Store"===p&&(l.includes("cloudStore_amazon")||l.includes("cloudStore_azure")?n+=" (Cloud)":(l.includes("fileShare")||l.includes("hdfs")||l.includes("hive")||l.includes("bigDataFileShare")&&l.includes("dataStore"))&&(n+=" (Big Data File Share)"));
return g(m,{displayName:n})})},120:function(c,h,d){d.d(h,"a",function(){return e});var b=d(1);c=d(15);var a=function(q,t){var u,g,m=[],v=null!==(g=null!==(u=q.typeKeywords)&&void 0!==u?u:q.typekeywords)&&void 0!==g?g:[];return q.contentStatus&&("org_authoritative"===q.contentStatus||"public_authoritative"===q.contentStatus?m.push("authoritative"):"deprecated"===q.contentStatus&&m.push("deprecated")),q.origin&&m.push("collaboration"),q.groupDesignations&&-1<q.groupDesignations.indexOf("livingatlas")&&
m.push("livingAtlas"),-1<v.indexOf("Requires Credits")?m.push("premium"):-1<v.indexOf("Requires Subscription")&&m.push("subscriber"),-1<v.indexOf("Public Data Collection")&&((null==t?void 0:t.portalUser)||(null==t?void 0:t.user))&&m.push("publicDataCollection"),"Solution"===q.type&&-1<v.indexOf("ArcGIS Solution")&&m.push("solution"),t.isPortal&&"Web Mapping Application"===q.type&&(-1<v.indexOf("Story Map")&&m.push("retiredStoryMap"),function(p){return"3DInsetMap 3DScene 3DViz AttachmentViewer CapacityAnalysis Compare/storytelling_compare Compare/storytelling_tabbed Compare/storytelling_sidepanel Compare/Multiviewer Compare/Search Compare/Configure Compare/SideBySideViewer_Configure Compare3d CompareAnalysis CompareMaps Directions Edit Editor Elevations ElevationsProfile Embed Filter FilterGallery GeoList GeoTour HeaderFooter Identify ImageInterpretation ImageryViewer ImpactSummary InformationLookup InteractiveFilter InteractiveLegend LayerShowcase Legend LiveMaps LocalPerspective MapAndAppGallery MapCarousel MapTools Media MinimalGallery Minimalist Nearby OnePane Panels PanelsLegend Profile PublicGallery PublicInformation ServiceLookup SimpleMapViewer SimpleViewer SocialMedia Solutions/s2.html?app\x3dapps2/FindEditFilter Solutions/s2.html?app\x3dapps2/Finder StorytellingTextLegend StoryMapBasic Styler SummaryViewer Time TimeAware TwoPane Viewer ZoneLookup".split(" ").some(function(l){var n,
k=-1<l.indexOf(".html");l="/apps/".concat(l).concat(k?"":"/");return-1<(null===(n=p.url)||void 0===n?void 0:n.indexOf(l))})}(q)&&m.push("retiredApp")),-1<v.indexOf("Registered App")&&"API Key"!==q.type&&m.push("registered"),m},e=Object(c.a)(function(q,t){return Object(b.a)(Object(b.a)({},t),{badges:a(t,q)})})},121:function(c,h,d){d.d(h,"a",function(){return b});var b={ar:"\u0645\u0633\u062a\u0636\u0627\u0641",bs:"hostirano",ca:"allotjat",cs:"hostovan\u00e1 polo\u017eka",da:"hostede",de:"gehostet",
el:"hosted",en:"hosted",es:"alojado",et:"majutatud",fi:"is\u00e4nn\u00f6ity",fr:"h\u00e9berg\u00e9",he:"\u05de\u05ea\u05d0\u05e8\u05d7",hr:"hostirano",hu:"t\u00e1rolt",id:"di-host",it:"ospitati",ja:"\u30db\u30b9\u30c8",ko:"\ud638\uc2a4\ud305",lt:"talpinamas",lv:"viesots",nl:"gehoste",nb:"hostet",pl:"hostowane","pt-br":"hospedado","pt-pt":"alojados",ro:"g\u0103zduite",ru:"\u0440\u0430\u0437\u043c\u0435\u0449\u0435\u043d\u043d\u044b\u0439",sl:"gostujo\u010di",sk:"hostil",sr:"hostovani",sv:"driftade",
th:"\u0e2b\u0e25\u0e31\u0e01",tr:"bar\u0131nd\u0131r\u0131lan",uk:"\u0440\u043e\u0437\u043c\u0456\u0449\u0435\u043d\u0438\u0439 \u043d\u0430 \u0445\u043e\u0441\u0442\u0456",vi:"\u0111\u01b0\u1ee3c l\u01b0u tr\u1eef","zh-cn":"\u6258\u7ba1","zh-hk":"\u8a17\u7ba1","zh-tw":"\u8a17\u7ba1"}},125:function(c,h,d){d.d(h,"a",function(){return a});d.d(h,"b",function(){return e});var b=d(1);c=d(15);var a=function(q,t){var u;return t.thumbnail&&(u="".concat(q.restUrl,"/community/groups/").concat(t.id,"/info/").concat(t.thumbnail).concat(q.credential?
"?token\x3d".concat(q.credential.token):"")),u},e=Object(c.a)(function(q,t){return Object(b.a)(Object(b.a)({},t),{thumbURI:a(q,t)})})},133:function(c,h,d){d.d(h,"a",function(){return b});d.d(h,"d",function(){return q});d.d(h,"c",function(){return t});d.d(h,"e",function(){return u});d.d(h,"f",function(){return g});var b,a=d(1),e=d(27);!function(m){m.LOADING="loading";m.LOADED="loaded";m.FAILED="failed"}(b||(b={}));var q=function(m){var v=m.selectedGroups,p=m.selectorItems;return 0===p.length?Object.keys(v).map(function(l){return v[l].group}):
Object.keys(v).filter(function(l){return u(v[l],p)}).map(function(l){return v[l].group})},t=function(m){var v=m.initialSelectedGroups,p=m.selectedGroups,l=Object.keys(p).map(function(n){return p[n].group.id});return Object.keys(v).map(function(n){return v[n].group.id}).filter(function(n){return 0>l.indexOf(n)}).map(function(n){return v[n].group})},u=function(m,v){return!m.selectedByIds||m.selectedByIds.length===v.length},g={selectorItems:[],displayGroups:[],selectedGroups:{},initialSelectedGroups:{},
status:b.LOADING,total:0,hasGroups:!0};h.b=function(m,v){switch(void 0===m&&(m=g),v.type){case e.a.DESELECT_GROUPS:return Object(a.a)(Object(a.a)({},m),{selectedGroups:v.payload.reduce(function(l,n){n=n.id;l[n];return Object(a.f)(l,["symbol"==typeof n?n:n+""])},m.selectedGroups)});case e.a.REVERT_GROUPS:return v.payload?Object(a.a)(Object(a.a)({},m),{selectedGroups:v.payload.reduce(function(l,n){var k;if(m.initialSelectedGroups[n.id])return Object(a.a)(Object(a.a)({},l),((k={})[n.id]=m.initialSelectedGroups[n.id],
k));n=n.id;l[n];return Object(a.f)(l,["symbol"==typeof n?n:n+""])},m.selectedGroups)}):Object(a.a)(Object(a.a)({},m),{selectedGroups:Object(a.a)({},m.initialSelectedGroups)});case e.a.SELECT_GROUPS:var p=m.selectorItems.map(function(l){return l.id});return Object(a.a)(Object(a.a)({},m),{selectedGroups:v.payload.reduce(function(l,n){var k;return Object(a.a)(Object(a.a)({},l),((k={})[n.group.id]=Object(a.a)({selectedByIds:p},n),k))},m.selectedGroups)});case e.a.SET_INITIAL_GROUPS:return v=v.payload.reduce(function(l,
n){var k;return Object(a.a)(Object(a.a)({},l),((k={})[n.group.id]=n,k))},{}),Object(a.a)(Object(a.a)({},m),{selectedGroups:v,initialSelectedGroups:Object(a.a)({},v)});case e.a.SET_SELECTOR_ITEMS:return Object(a.a)(Object(a.a)({},m),{selectorItems:v.payload});case e.a.CLEAR_SELECTION:return Object(a.a)(Object(a.a)({},m),{selectedGroups:{}});case e.a.LOADING_GROUPS:return Object(a.a)(Object(a.a)({},m),{status:b.LOADING});case e.a.LOAD_GROUPS_SUCCESS:return Object(a.a)(Object(a.a)({},m),{displayGroups:v.payload.results,
total:v.payload.total,status:b.LOADED});case e.a.LOAD_GROUPS_FAIL:return Object(a.a)(Object(a.a)({},m),{displayGroups:[],status:b.FAILED});case e.a.SET_HAS_GROUPS:return Object(a.a)(Object(a.a)({},m),{hasGroups:v.payload});default:return m}}},135:function(c,h,d){function b(M,N){var P=N();N=P.utilities.request;var R=P.resources;P=R.selectedOptions;var Y=R.selectedOptionsDirty;R=Object(r.b)(R.items);P=Y&&P.public===P.total;M(z(G.a.LOADING));0<R.length&&P?Object(r.a)({items:R,request:N}).then(function(ja){ja.length?
(ja=ja.some(function(aa){return-1===aa.typeKeywords.indexOf("Public Data Collection")}),M(A(ja?G.c.PUBLIC_DATA_COLLECTION_DISABLED:G.c.PUBLIC_DATA_COLLECTION_ENABLED))):M(a)}).catch(function(){M(a)}):M(a)}function a(M,N){var P=N(),R=P.utilities,Y=R.portal,ja=R.request,aa=R.onComplete;R=P.resources;var da=R.items,ra=R.selectedOptions,ca=R.portalUser;R=P.gbState.groups;P=R.selectedGroups;R=R.initialSelectedGroups;var fa=Object(p.d)({selectedGroups:P,selectorItems:da});P=Object(p.c)({initialSelectedGroups:R,
selectedGroups:P});var la=[];Object(l.i)({items:da,groups:P,portalUser:ca,restUrl:Y.restUrl,request:ja}).then(function(){return Object(l.h)({items:da,groups:fa,portalUser:ca,request:ja,restUrl:Y.restUrl,selectedOptions:ra})}).catch(function(ta){ta.results?la=la.concat(Object(w.a)(ta.results,da)):ta.message&&la.push({error:ta})}).then(function(){return M(C)}).then(function(){var ta=N().resources,Q=ta.items,T=ta.dependentItems,O=T.needGroupSharingUpdate,Z=T.notEditable,na=T.premium,ia=T.needPubliclyEditableWarning,
X=T.needEditableWarning,ha=T.needDataCollectionEnabled,V=T.needGroupDependentApplicationWarning,ea=T.needBDFSDatastoreUpdate,U=ta.selectedOptions,ka=(ta=ta.selectedOptionsDirty)&&U.public===U.total;0!==T.needShareLevelUpdate.length||0!==O.length||0!==Z.length||0!==na.length||0!==ia.length||0!==X.length||0!==ha.length||0!==V.length&&ka||0!==ea.length||0!==Object(l.c)(Q,U,ta).length?M({type:u.SET_CURRENT_VIEW,payload:G.a.DEPENDENT_ITEM_CONFIRMATION}):aa(0<la.length?{errors:la,selectedOptions:U}:{selectedOptions:U})}).catch(console.error)}
function e(M){return M.filter(function(N){return-1===N.typeKeywords.indexOf("bigDataFileShare")})}function q(M,N){var P=N(),R=P.utilities;M=R.portal;N=R.request;var Y=R.onComplete;R=P.resources;var ja=R.dependentItems,aa=ja.needBDFSDatastoreUpdate,da=ja.needShareLevelUpdate,ra=ja.needGroupSharingUpdate,ca=ja.needEditableWarning,fa=R.selectedOptions;R=R.portalUser;ja=P.gbState.groups;P=ja.selectedGroups;var la=ja.selectorItems;if(0!==aa.length||0!==da.length||0!==ra.length||0!==ca.length){ja=Object(l.h)({items:e(aa),
groups:[],portalUser:R,request:N,restUrl:M.restUrl,selectedOptions:fa});var ta=Object(l.h)({items:Object(g.g)(Object(g.g)([],e(da),!0),ca,!0),groups:[],portalUser:R,request:N,restUrl:M.restUrl,selectedOptions:fa});M=Object(l.h)({items:ra,groups:Object(p.d)({selectedGroups:P,selectorItems:la}),portalUser:R,request:N,restUrl:M.restUrl,selectedOptions:fa,ignoreShareLevel:!0});n.Promise.all([ja,ta,M]).then(function(){var Q=Object(g.g)(Object(g.g)(Object(g.g)(Object(g.g)([],aa,!0),da,!0),ra,!0),ca,!0),
T=Q.map(function(O){return O.id});Q=Q.filter(function(O,Z){return T.indexOf(O.id)===Z});Y({dependentItems:Q,selectedOptions:fa})}).catch(function(Q){throw Q;})}else Y({selectedOptions:fa})}function t(M,N){switch(N().resources.currentMiniDlg){case G.c.OPEN_GROUP_BROWSER:M(F(G.b.public));M(z(G.a.GROUP_BROWSER));break;case G.c.REVERT_SHARE_LEVEL:M({type:u.SET_INITIAL_SHARE_LEVEL});M(Object(v.c)());break;case G.c.REVERT_GROUPS:M(F(G.b.public));M(Object(v.c)());break;case G.c.EDITABLE_LAYERS:M(a);break;
case G.c.SET_SHARE_TO_PRIVATE:M(F(G.b.private));M(Object(v.a)());break;case G.c.PUBLIC_DATA_COLLECTION_DISABLED:M(z(G.a.SHARE));break;case G.c.PUBLIC_DATA_COLLECTION_ENABLED:M(a)}M({type:u.SET_MINI_DIALOG,payload:G.c.NONE})}d.d(h,"a",function(){return u});d.d(h,"k",function(){return A});d.d(h,"g",function(){return y});d.d(h,"j",function(){return z});d.d(h,"d",function(){return b});d.d(h,"i",function(){return q});d.d(h,"h",function(){return t});d.d(h,"c",function(){return E});d.d(h,"b",function(){return K});
d.d(h,"e",function(){return I});d.d(h,"f",function(){return L});var u,g=d(1),m=d(180),v=d(139),p=d(133),l=d(62),n=d(28),k=d(317),r=d(196),w=d(365),x=d(47),D=d(61),G=d(25);!function(M){M.SET_SELECTED_SHARE_LEVEL="SET_SELECTED_SHARE_LEVEL";M.SET_INITIAL_SHARE_LEVEL="SET_INITIAL_SHARE_LEVEL";M.SET_CURRENT_VIEW="SET_CURRENT_VIEW";M.SET_AND_FOCUS_VIEW="SET_AND_FOCUS_VIEW";M.SET_DEPENDENT_ITEMS="SET_DEPENDENT_ITEMS";M.SET_MINI_DIALOG="SET_MINI_DIALOG";M.SET_SHARE_MODE="SET_SHARE_MODE";M.SET_USER_TYPE="SET_USER_TYPE";
M.SET_HELP_MAP="SET_HELP_MAP"}(u||(u={}));var F=function(M){return{type:u.SET_SELECTED_SHARE_LEVEL,payload:M}},A=function(M){return{type:u.SET_MINI_DIALOG,payload:M}},y=function(){return function(M,N){var P=N(),R=P.utilities,Y=R.portal,ja=R.request;R=P.resources.items;P=B(P);var aa=Y.urlKey||Y.isPortal?G.e.ORG:G.e.PUBLIC;M({type:u.SET_INITIAL_SHARE_LEVEL});M({type:u.SET_SHARE_MODE,payload:P});M({type:u.SET_USER_TYPE,payload:aa});M(Object(m.a)({selectorItems:R,anySelectorItemsPrivate:0<N().resources.selectedOptions[G.b.private],
shareMode:P,userType:aa})).then(function(){return Object(l.a)(Y,ja)}).then(function(da){M({type:u.SET_HELP_MAP,payload:da});M(z(G.a.SHARE))})}},z=function(M){return function(N){N({type:u.SET_CURRENT_VIEW,payload:M})}},B=function(M){var N=M.resources,P=N.items;N=N.portalUser;M=M.utilities.portal;var R=P[0];if(Object(D.d)(R,N))return G.d.DEFAULT;R=!R.orgId||R.orgId===N.orgId;return Object(x.h)({items:P,user:N,portal:M})&&R?G.d.ADMIN:G.d.GROUP},C=function(M,N){var P=N();N=P.resources;var R=N.selectedOptions,
Y=P.utilities,ja=Y.portal,aa=Y.request,da=Y.iconDir;P=P.gbState.groups;var ra=P.selectedGroups,ca=P.selectorItems;N=N.items.map(function(fa){return Object(k.b)({item:fa,portal:ja,request:aa,iconDir:da})});return n.Promise.all(N).then(function(fa){return H({dependentItems:fa,selectedGroups:ra,selectorItems:ca,selectedOptions:R,request:aa,portal:ja})}).then(function(fa){M({type:u.SET_DEPENDENT_ITEMS,payload:fa})})},H=function(M){var N=M.dependentItems,P=M.selectedGroups,R=M.selectorItems,Y=M.selectedOptions,
ja=M.request,aa=M.portal;return new n.Promise(function(da,ra){ra=Object(l.b)(N).filter(function(la){return la});var ca=ra.map(function(la){return la.id}),fa=ra.filter(function(la,ta){return ca.indexOf(la.id)===ta});n.Promise.all(fa.map(function(la){return Object(k.a)({item:la,selectedOptions:Y,selectedGroups:Object(p.d)({selectedGroups:P,selectorItems:R}),request:ja,portal:aa})})).then(function(la){var ta=[],Q=[],T=[],O=[],Z=[],na=[],ia=[],X=[],ha=[],V=!Object(l.e)(Y)&&Object(l.d)(Y)===G.b.public;
la.forEach(function(ea,U){U=fa[U];if(ea.premium)O.push(U);else if(ea.groupDependentApplication)X.push(U);else{if(!ea.bdfsDatastore)return V&&ea.editable&&Object(r.c)(U)&&U.isUpdateLayer?U.access===G.b.public?void na.push(U):-1<U.typeKeywords.indexOf("Public Data Collection")?void Z.push(U):void ia.push(U):void((ea.needsShareLevelUpdate||ea.needsGroupSharingUpdate)&&(ea.editable?(ea.needsShareLevelUpdate&&Q.push(U),ea.needsGroupSharingUpdate&&ta.push(U)):T.push(U)));ha.push(U)}});da({needGroupSharingUpdate:ta,
needShareLevelUpdate:Q,notEditable:T,premium:O,needPubliclyEditableWarning:na,needEditableWarning:Z,needDataCollectionEnabled:ia,needGroupDependentApplicationWarning:X,needBDFSDatastoreUpdate:ha})}).catch(function(la){throw la;})})},E=function(M,N){N=N();var P=N.gbState.groups.initialSelectedGroups,R=N.resources.selectedOptions;N.config.userType===G.e.PUBLIC&&0<R.private&&0<Object.keys(P).length?M(A(G.c.REVERT_GROUPS)):M(Object(v.c)())},K=function(M,N){N=N();var P=N.resources,R=P.portalUser;P=P.selectedOptions;
Object(x.l)(N.utilities.portal)||Object(x.a)(R)||!Object(l.e)(P)&&Object(l.d)(P)!==G.b.private?M(z(G.a.GROUP_BROWSER)):M(A(G.c.OPEN_GROUP_BROWSER))},I=function(M,N){N=N();var P=N.resources,R=P.portalUser;P=P.items;var Y=N.gbState.groups.selectedGroups;Object(x.l)(N.utilities.portal)||Object(x.b)(R)||!Object(r.d)({items:P,groupDatas:Object.keys(Y).map(function(ja){return Y[ja]})})?M({type:u.SET_INITIAL_SHARE_LEVEL}):M(A(G.c.REVERT_SHARE_LEVEL))},L=function(M){return function(N,P){P=P();var R=P.resources.portalUser,
Y=P.gbState.groups.selectedGroups;!Object(x.l)(P.utilities.portal)&&!Object(x.b)(R)&&M===G.b.private&&0<Object.keys(Y).length?N(A(G.c.SET_SHARE_TO_PRIVATE)):N(F(M))}}},139:function(c,h,d){d.d(h,"d",function(){return t});d.d(h,"e",function(){return u});d.d(h,"b",function(){return g});d.d(h,"c",function(){return m});d.d(h,"a",function(){return v});d.d(h,"f",function(){return p});var b=d(1),a=d(184),e=d(156),q=d(69),t=function(l){return 1<l.length&&Object(e.a)(),{type:q.a.SELECT_GROUPS,payload:l.map(function(n){return{group:Object(a.c)(n)}})}},
u=function(l){return{type:q.a.SET_INITIAL_GROUPS,payload:l.map(function(n){return Object(b.a)(Object(b.a)({},n),{group:Object(a.c)(n.group)})})}},g=function(l){return 1<l.length&&Object(e.b)(),{type:q.a.DESELECT_GROUPS,payload:l}},m=function(l){return{type:q.a.REVERT_GROUPS,payload:l}},v=function(){return Object(e.c)(),{type:q.a.CLEAR_SELECTION}},p=function(l){return{type:q.a.SET_SELECTOR_ITEMS,payload:l}}},142:function(c,h,d){d.d(h,"a",function(){return a});var b=d(1);c=d(15);var a=Object(c.a)(function(e,
q){var t=Object(b.a),u=Object(b.a)({},q);e=q.thumbnail?"".concat(e.restUrl,"/community/users/").concat(q.username,"/info/").concat(q.thumbnail).concat(e.credential?"?token\x3d".concat(e.credential.token):""):void 0;return t(u,{thumbURI:e})})},15:function(c,h,d){function b(e){return function t(){for(var u=this,g=[],m=0;m<arguments.length;m++)g[m]=arguments[m];return g.length>=e.length?e.call.apply(e,Object(a.g)([this],g,!1)):function(){for(var v=[],p=0;p<arguments.length;p++)v[p]=arguments[p];return t.call.apply(t,
Object(a.g)(Object(a.g)([u],g,!1),v,!1))}}}d.d(h,"a",function(){return b});var a=d(1)},151:function(c,h,d){d.d(h,"b",function(){return l});d.d(h,"a",function(){return k});var b=d(1),a=d(184),e=d(33),q=d(156),t=d(59),u=d(69),g=d(28),m=d(62),v=d(41),p=d(25),l=function(y,z){n(z()).then(function(B){var C=z();C=Object(t.b)(C)?C:C.gbState;var H=C.utils;C.ui.focus.focusSelectAll&&Object(q.c)();y({type:u.a.LOAD_GROUPS_SUCCESS,payload:Object(b.a)(Object(b.a)({},B),{results:B.results.map(function(E){return Object(a.b)(H.portal,
E)})})})}).catch(function(B){var C=z();(Object(t.b)(C)?C:C.gbState).ui.focus.focusSelectAll&&Object(q.c)();y({type:u.a.LOAD_GROUPS_FAIL,payload:B})})},n=function(y){y=Object(t.b)(y)?y:y.gbState;var z=y.utils,B=z.request,C=z.portal,H=y.config;z=H.groupsPerPage;var E=H.withinShare,K=(H.withinAppConfig,y.parameters);H=K.filter;K=K.sort;var I=y.ui.page.currentPageNumber,L={q:A(y),num:z,sortField:K.field,sortOrder:K.order,start:(I-1)*z+1};return E&&(L.searchUserAccess="groupMember",L.searchUserName=H.currentUsername),
H.designationFilter!==v.b.orgSettings||x(C)?new g.Promise(function(M,N){Object(e.g)(B,C,L).then(M,N)}):new g.Promise(function(M){M({query:L.q,total:0,start:1,num:100,nextStart:-1,results:[]})})},k=function(y){var z=y.user;y=y.state;y=Object(t.b)(y)?y:y.gbState;var B=y.utils,C=B.request,H=B.portal;y=Object(b.a)(Object(b.a)({},y),{parameters:Object(b.a)(Object(b.a)({},y.parameters),{filter:Object(b.a)(Object(b.a)({},y.parameters.filter),{currentUsername:z.username})})});var E={q:A(y),num:100,searchUserAccess:"groupMember",
searchUserName:z.username};return(new g.Promise(function(K,I){return Object(e.g)(C,H,E).then(function(L){if(-1!==L.nextStart){var M=Math.ceil(L.total/100)-1,N=[L.results];L=function(R){N.push(new g.Promise(function(Y,ja){var aa=100*(R+1)+1;Object(e.g)(C,H,Object(b.a)(Object(b.a)({},E),{start:aa})).then(function(da){Y(da.results)},ja)}))};for(var P=0;P<M;P++)L(P);g.Promise.all(N).then(function(R){K(Object(m.b)(R))})}else K(L.results)},I)})).catch(function(K){throw K;})},r=function(y){var z,B,C=y.shareMode,
H=y.currentUsername,E=y.portalUser,K=y.userGroups;y=y.isPrivate;var I=[];if(K){var L=[];C===p.d.ADMIN&&(null===(z=K[H])||void 0===z?0:z.length)&&H!==E.username&&(L=Object(b.g)([],K[H],!0));C===p.d.ADMIN&&y||K[E.username].forEach(function(M){L.some(function(N){return N.id===M.id})||L.push(M)});null==L||L.forEach(function(M){var N,P=null===(N=M.userMembership)||void 0===N?void 0:N.memberType;!M.isViewOnly||"owner"!==P&&"admin"!==P||I.push(M.id)})}I.length&&(B="(isviewonly:false OR id:(".concat(I.join(" OR "),
"))"));z=I.length?" OR id:(".concat(I.join(" OR "),")"):"";switch(C){case p.d.DEFAULT:return B||"(owner:".concat(H," OR isviewonly:false)");case p.d.GROUP:return"owner:".concat(H," -capabilities:updateitemcontrol");case p.d.ADMIN:return E.username===H?"(isviewonly:false".concat(z," OR owner:").concat(E.username,") -capabilities:updateitemcontrol"):"(owner:".concat(H," OR isviewonly:false").concat(z,")");default:return""}},w=function(y,z){0!==(null==y?void 0:y.indexOf("id:"))||-1<z.indexOf(y)||z.push(y)},
x=function(y){var z,B,C,H,E,K=[],I=[y.featuredItemsGroupQuery,y.basemapGalleryGroupQuery,y.templatesGroupQuery,y["2DStylesGroupQuery"],y.stylesGroupQuery,y.analysisLayersGroupQuery,y.galleryTemplatesGroupQuery];if(y.hasModernHomePageEnabled){var L=(null===(B=null===(z=y.homePageConfig)||void 0===z?void 0:z.content)||void 0===B?void 0:B.filter(function(M){return"gallery"===M.type&&!!M.groupId}))||[];0<L.length&&L.forEach(function(M){M="id:".concat(M.groupId);w(M,K)})}else I.push(y.homePageFeaturedContent);
return I.forEach(function(M){w(M,K)}),null===(C=y.featuredGroups)||void 0===C||C.forEach(function(M){if(M=M.id)M="id:".concat(M),w(M,K)}),null===(E=null===(H=y.userDefaults)||void 0===H?void 0:H.groups)||void 0===E||E.forEach(function(M){M="id:".concat(M);w(M,K)}),0<K.length?"(".concat(K.join(" OR "),")"):""},D=function(y){var z=y.portal;switch(y.designationFilter){case v.b.openData:return"isopendata:true";case v.b.updateGroups:return"capabilities:updateitemcontrol";case v.b.distributed:return"capabilities:distributed";
case v.b.administrative:return"isleavingdisallowed:true";case v.b.orgSettings:return x(z)||"";default:return""}},G=function(y){var z=y.portal,B=y.username,C=y.currentUsername,H=y.userType,E=y.withinAppConfig;B=y.shareMode===p.d.ADMIN&&C||B;E=z.isPortal&&E?"-owner:esri_livingatlas -owner:esri_boundaries -owner:esri_demographics":"";switch(y.ownerFilter){case v.d.itemOwner:return"owner:".concat(B," ").concat(E);case v.d.inOrg:return"-owner:".concat(B," orgid:").concat(z.id," ").concat(E);case v.d.outsideOrg:return H===
p.e.PUBLIC?"-owner:".concat(B," ").concat(E):"".concat("(orgid: [0 TO \\{])"," -orgid:").concat(z.id," ").concat(E);default:return E}},F=function(y){return y?"".concat((z="created",C=(B=y).start,H=B.end,"".concat(z,": [").concat(C," TO ").concat(H,"]"))):"";var z,B,C,H},A=function(y){var z,B,C,H=y.utils,E=H.portal;H=H.portalUser;var K=y.config,I=K.shareMode,L=K.userType,M=K.withinAppConfig,N=K.hasIndoorsSpaces,P=K.userGroups,R=y.parameters.filter,Y=R.searchString,ja=R.designationFilter,aa=R.membershipFilter,
da=R.dateCreatedFilter,ra=R.currentUsername;R=R.ownerFilter;return["".concat(K.baseQ," ").concat(Y),r({shareMode:I,currentUsername:ra,portalUser:H,userGroups:P,isPrivate:"private"===(null===(C=null===(B=null===(z=y.groups)||void 0===z?void 0:z.selectorItems)||void 0===B?void 0:B[0])||void 0===C?void 0:C.access)}),N?"-capabilities:distributed":D({designationFilter:ja,portal:E}),N?"membershipaccess:org":aa?"anyOrg"===aa?"-membershipaccess:org -membershipaccess:collaboration":"membershipaccess:".concat(aa):
"",F(da),G({ownerFilter:R,portal:E,username:H.username,currentUsername:ra,shareMode:I,userType:L,withinAppConfig:M})].filter(function(ca){return ca}).join(" ").trim()}},156:function(c,h,d){function b(){q("gb__select-all-input")}function a(){q("gb__clear-selection-btn")}function e(){setTimeout(function(){var t=document.querySelector(".gcard-gcc__container");t&&(t=t.querySelector(".btn-2018check__input"))&&t.focus()},50)}function q(t){setTimeout(function(){var u=document.querySelector("#".concat(t));
u&&u.focus()},50)}d.d(h,"c",function(){return b});d.d(h,"a",function(){return a});d.d(h,"b",function(){return e})},165:function(c,h){h=function(){return this}();try{h=h||(new Function("return this"))()}catch(d){"object"==typeof window&&(h=window)}c.exports=h},17:function(c,h){c.exports=S},172:function(c,h,d){var b;d.d(h,"a",function(){return b});(b||(b={})).TRUSTED_ORGS_LOADED="TRUSTED_ORGS_LOADED"},180:function(c,h,d){d.d(h,"a",function(){return w});var b=d(1),a=d(59),e=d(139),q=d(151),t=d(297),
u=d(298),g=d(186),m=d(33),v=d(28),p=d(27),l=d(62),n=d(69),k=d(192),r=d(61),w=function(D){return function(G,F){var A=F(),y=(Object(a.b)(A)?A:A.gbState).utils,z=y.portal;y=y.portalUser;if(!(D&&D.selectorItems&&0<D.selectorItems.length))return G(q.b),v.Promise.resolve();var B=D.selectorItems,C=D.userType;G({type:p.a.SET_SHARE_MODE,payload:D.shareMode});G({type:p.a.SET_USER_TYPE,payload:C});G(Object(e.f)(B));z=Object(r.b)({user:y,items:B,portal:z});var H=y.username===z.username?[y]:[y,z];return 1<H.length&&
!D.anySelectorItemsPrivate&&G({type:p.a.ENABLE_USER_TOGGLE}),G(Object(g.c)(H)),G(Object(g.h)(z.username)),void 0===A.config.hasTrustedOrgs&&G(t.a),Object(u.a)(F(),z).then(function(E){return E&&G({type:k.a.USER_DETAILS_LOADED,payload:E}),G(q.b),v.Promise.all(H.map(function(K){return Object(q.a)({user:K,state:F()})})).then(function(K){K=Object(l.b)(K);var I=K.map(function(L){return L.id});K=K.filter(function(L,M){return I.indexOf(L.id)===M});return G(x(K))})})}},x=function(D){return function(G,F){return new v.Promise(function(A,
y){var z=F();z=Object(a.b)(z)?z:z.gbState;var B=z.utils,C=B.portal,H=B.request,E=Object(m.b)(z.groups.selectorItems);z=Object(m.a)(D).map(function(K){return Object(m.i)({itemIds:E,groupIds:Object(m.b)(K),portal:C,request:H})});v.Promise.all(z).then(function(K){var I=K.reduce(function(M,N){return Object(b.a)(Object(b.a)({},M),N)},{}),L=Object.keys(I);K=D.filter(function(M){return 0<=L.indexOf(M.id)}).map(function(M){return{group:M,selectedByIds:I[M.id].items.map(function(N){return N.itemId})}});G({type:n.a.SET_HAS_GROUPS,
payload:0<D.length});G(Object(e.e)(K));A()}).catch(y)})}}},184:function(c,h,d){d.d(h,"b",function(){return q});d.d(h,"c",function(){return t});d.d(h,"a",function(){return u});var b=d(64);c=d(7);var a=d(97),e=d(125),q=function(g,m){return Object(b.a)(Object(e.b)(g))(m)},t=Object(b.a)(Object(c.e)("thumbURI")),u=function(g){var m=g.initialSelectedByIds;return!Object(a.a)(g.selectedBy.map(function(v){return v.id}),m)}},186:function(c,h,d){d.d(h,"b",function(){return a});d.d(h,"g",function(){return e});
d.d(h,"h",function(){return q});d.d(h,"e",function(){return t});d.d(h,"f",function(){return u});d.d(h,"d",function(){return g});d.d(h,"c",function(){return m});d.d(h,"a",function(){return v});var b=d(86),a=function(p){return{type:b.a.SET_SEARCH_STRING,payload:p}},e=function(p){return{type:b.a.UPDATE_OWNER_FILTER,payload:p}},q=function(p){return{type:b.a.UPDATE_USERNAME_FILTER,payload:p}},t=function(p){return{type:b.a.UPDATE_GROUP_DESIGNATION_FILTER,payload:p}},u=function(p){return{type:b.a.UPDATE_MEMBERSHIP_FILTER,
payload:p}},g=function(p){return{type:b.a.UPDATE_CREATED_ON_FILTER,payload:{section:p.section,created:p.created}}},m=function(p){return{type:b.a.SET_USERS,payload:p}},v=function(p){return{type:b.a.CLEAR_FILTERS,payload:p}}},189:function(c,h){function d(){throw Error("setTimeout has not been defined");}function b(){throw Error("clearTimeout has not been defined");}function a(k){if(g===setTimeout)return setTimeout(k,0);if((g===d||!g)&&setTimeout)return g=setTimeout,setTimeout(k,0);try{return g(k,0)}catch(r){try{return g.call(null,
k,0)}catch(w){return g.call(this,k,0)}}}function e(){l&&v&&(l=!1,v.length?p=v.concat(p):n=-1,p.length&&q())}function q(){if(!l){var k=a(e);l=!0;for(var r=p.length;r;){v=p;for(p=[];++n<r;)v&&v[n].run();n=-1;r=p.length}v=null;l=!1;(function(w){if(m===clearTimeout)return clearTimeout(w);if((m===b||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(w);try{m(w)}catch(x){try{return m.call(null,w)}catch(D){return m.call(this,w)}}})(k)}}function t(k,r){this.fun=k;this.array=r}function u(){}c=c.exports=
{};try{var g="function"==typeof setTimeout?setTimeout:d}catch(k){g=d}try{var m="function"==typeof clearTimeout?clearTimeout:b}catch(k){m=b}!0;var v,p=[],l=!1,n=-1;c.nextTick=function(k){var r=Array(arguments.length-1);if(1<arguments.length)for(var w=1;w<arguments.length;w++)r[w-1]=arguments[w];p.push(new t(k,r));1!==p.length||l||a(q)};t.prototype.run=function(){this.fun.apply(null,this.array)};c.title="browser";c.browser=!0;c.env={};c.argv=[];c.version="";c.versions={};c.on=u;c.addListener=u;c.once=
u;c.off=u;c.removeListener=u;c.removeAllListeners=u;c.emit=u;c.prependListener=u;c.prependOnceListener=u;c.listeners=function(k){return[]};c.binding=function(k){throw Error("process.binding is not supported");};c.cwd=function(){return"/"};c.chdir=function(k){throw Error("process.chdir is not supported");};c.umask=function(){return 0}},192:function(c,h,d){var b;d.d(h,"a",function(){return b});(b||(b={})).USER_DETAILS_LOADED="USER_LOADED"},196:function(c,h,d){function b(v){return"Feature Service"===
v.type&&-1<v.typeKeywords.indexOf("Hosted Service")}function a(v){return v.filter(function(p){return p.access!==u.b.public&&b(p)})}function e(v){var p=v.request;v=v.items.map(function(l){return function(n,k){return new q.Promise(function(r){b(n)?Object(t.v)(k,"".concat(n.url,"/layers")).then(function(w){w=w.layers;r((null==w?void 0:w.reduce(function(x,D){return x||D&&-1<D.capabilities.indexOf("Editing")},!1))&&n)},function(){return r(!1)}):r(!1)})}(l,p)});return q.Promise.all(v).then(function(l){return l.filter(function(n){return n})})}
d.d(h,"d",function(){return g});d.d(h,"c",function(){return b});d.d(h,"b",function(){return a});d.d(h,"a",function(){return e});var q=d(28),t=d(33),u=d(25),g=function(v){var p=v.groupDatas;return v.items.filter(function(l){l=l.access?l.access:l.sharing&&l.sharing.access;return l===u.b.private||l===u.b.shared}).reduce(function(l,n){return l||m({item:n,groupDatas:p})},!1)},m=function(v){var p=v.item;return v.groupDatas.reduce(function(l,n){return l||!!n.selectedByIds&&0<=n.selectedByIds.indexOf(p.id)},
!1)}},202:function(c,h,d){var b;d.d(h,"a",function(){return b});(function(a){a.SET_PAGE="SET_PAGE";a.TOGGLE_SORT_DROPDOWN="TOGGLE_SORT_DROPDOWN";a.TOGGLE_EXPANDED_FILTERS="TOGGLE_EXPANDED_FILTERS"})(b||(b={}))},205:function(c,h,d){d.d(h,"b",function(){return e});var b=d(1),a=d(27),e={groupsPerPage:100,baseQ:"",withinShare:!1,withinAppConfig:!1,enableFiltering:!1,enableUserToggle:!1,enableSingleSelection:!1,hasIndoorsSpaces:!1};h.a=function(q,t){switch(void 0===q&&(q=e),t.type){case a.a.ENABLE_USER_TOGGLE:return Object(b.a)(Object(b.a)({},
q),{enableUserToggle:!0});case a.a.SET_SHARE_MODE:return Object(b.a)(Object(b.a)({},q),{shareMode:t.payload});case a.a.SET_USER_TYPE:return Object(b.a)(Object(b.a)({},q),{userType:t.payload});case a.a.TRUSTED_ORGS_LOADED:return Object(b.a)(Object(b.a)({},q),{hasTrustedOrgs:0<t.payload.length});case a.a.USER_DETAILS_LOADED:return Object(b.a)(Object(b.a)({},q),{userGroups:t.payload});case a.a.SET_SELECTOR_ITEMS:return t=!!t.payload.find(function(u){var g;return-1<(null===(g=null==u?void 0:u.typeKeywords)||
void 0===g?void 0:g.indexOf("EditExtensionIndoorsSpaces"))}),Object(b.a)(Object(b.a)({},q),{hasIndoorsSpaces:t});default:return q}}},206:function(c,h,d){d.d(h,"b",function(){return a});c=d(17);var b=d(207);d=d(41);var a={sort:b.b,filter:d.f};h.a=Object(c.combineReducers)({sort:b.a,filter:d.e})},207:function(c,h,d){d.d(h,"b",function(){return e});var b=d(1),a=d(27),e={field:"title",order:"asc"},q={relevance:"desc",title:"asc",created:"desc",owner:"asc",modified:"desc",numviews:"desc",avgrating:"desc"};
h.a=function(t,u){switch(void 0===t&&(t=e),u.type){case a.a.CHANGE_SORT_FIELD:return Object(b.a)(Object(b.a)({},t),{field:u.payload,order:q[u.payload]});case a.a.CHANGE_SORT_ORDER:return Object(b.a)(Object(b.a)({},t),{order:u.payload});default:return t}}},208:function(c,h,d){d.d(h,"b",function(){return q});c=d(17);var b=d(209),a=d(210),e=d(211);d=d(212);var q={page:b.b,sort:a.b,focus:e.b,filter:d.b};h.a=Object(c.combineReducers)({page:b.a,sort:a.a,focus:e.a,filter:d.a})},209:function(c,h,d){d.d(h,
"b",function(){return e});var b=d(1),a=d(27),e={currentPageNumber:1};h.a=function(q,t){switch(void 0===q&&(q=e),t.type){case a.a.CLEAR_FILTERS:case a.a.UPDATE_USERNAME_FILTER:case a.a.UPDATE_OWNER_FILTER:case a.a.UPDATE_CREATED_ON_FILTER:case a.a.UPDATE_GROUP_DESIGNATION_FILTER:return Object(b.a)(Object(b.a)({},q),{currentPageNumber:1});case a.a.SET_PAGE:return Object(b.a)(Object(b.a)({},q),{currentPageNumber:t.payload});case a.a.LOAD_GROUPS_SUCCESS:return Object(b.a)(Object(b.a)({},q),{currentPageNumber:t.payload.num>
t.payload.total?1:Math.ceil(t.payload.start/t.payload.num)});case a.a.LOAD_GROUPS_FAIL:return Object(b.a)(Object(b.a)({},q),{currentPageNumber:1});default:return q}}},210:function(c,h,d){d.d(h,"b",function(){return a});var b=d(27),a=!1;h.a=function(e,q){switch(void 0===e&&(e=a),q.type){case b.a.CHANGE_SORT_FIELD:case b.a.CHANGE_SORT_ORDER:case b.a.TOGGLE_SORT_DROPDOWN:return!e;default:return e}}},211:function(c,h,d){d.d(h,"b",function(){return e});var b=d(1),a=d(27),e={focusSelectAll:!1};h.a=function(q,
t){switch(t.type){case a.a.LOAD_GROUPS_FAIL:case a.a.LOAD_GROUPS_SUCCESS:return Object(b.a)(Object(b.a)({},q),{focusSelectAll:!1});case a.a.CHANGE_SORT_FIELD:case a.a.CHANGE_SORT_ORDER:return Object(b.a)(Object(b.a)({},q),{focusSelectAll:!0});default:return q}}},212:function(c,h,d){d.d(h,"b",function(){return q});var b=d(1),a=d(27),e=d(41),q={expanded:!1};h.a=function(t,u){switch(u.type){case a.a.CLEAR_FILTERS:switch(u.payload){case void 0:case e.a.DATE_CREATED:return Object(b.a)(Object(b.a)({},t),
{dateCreatedSelectedSection:void 0});default:return t}case a.a.TOGGLE_EXPANDED_FILTERS:return Object(b.a)(Object(b.a)({},t),{expanded:!t.expanded});case a.a.UPDATE_CREATED_ON_FILTER:return Object(b.a)(Object(b.a)({},t),{dateCreatedSelectedSection:u.payload.section});default:return t}}},213:function(c,h,d){d.d(h,"b",function(){return a});var b=d(99),a={portal:{},portalUser:{},request:function(e){return null}};h.a=function(e,q){return void 0===e&&(e=a),q.type,e.portal.portalHostname&&!e.portal.baseUrl&&
(e.portal.baseUrl=Object(b.a)(e.portal)),e}},25:function(c,h,d){var b,a,e,q,t;d.d(h,"b",function(){return b});d.d(h,"a",function(){return a});d.d(h,"c",function(){return e});d.d(h,"e",function(){return q});d.d(h,"d",function(){return t});(function(u){u.org="org";u.private="private";u.public="public";u.shared="shared"})(b||(b={}));(function(u){u.LOADING="LOADING";u.SHARE="SHARE";u.GROUP_BROWSER="GROUP_BROWSER";u.DEPENDENT_ITEM_CONFIRMATION="DEPENDENT_ITEM_CONFIRMATION"})(a||(a={}));(function(u){u.SET_SHARE_TO_PRIVATE=
"SET_SHARE_TO_PRIVATE";u.REVERT_SHARE_LEVEL="REVERT_SHARE_LEVEL";u.REVERT_GROUPS="REVERT_GROUPS";u.EDITABLE_LAYERS="EDITABLE_LAYERS";u.OPEN_GROUP_BROWSER="OPEN_GROUP_BROWSER";u.NONE="NONE";u.PUBLIC_DATA_COLLECTION_DISABLED="PUBLIC_DATA_COLLECTION_DISABLED";u.PUBLIC_DATA_COLLECTION_ENABLED="PUBLIC_DATA_COLLECTION_ENABLED"})(e||(e={}));(function(u){u.ORG="ORG";u.PUBLIC="PUBLIC"})(q||(q={}));(function(u){u.DEFAULT="DEFAULT";u.ADMIN="ADMIN";u.GROUP="GROUP";u.INVITE="INVITE"})(t||(t={}))},27:function(c,
h,d){d.d(h,"a",function(){return t});var b;c=d(1);h=d(202);var a=d(69),e=d(172),q=d(86);d=d(192);!function(u){u.ENABLE_USER_TOGGLE="ENABLE_USER_TOGGLE";u.SET_SHARE_MODE="SET_SHARE_MODE";u.SET_USER_TYPE="SET_USER_TYPE"}(b||(b={}));var t=Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)({},h.a),a.a),q.a),b),e.a),d.a)},28:function(c,h,d){(function(b,a){c.exports=function(){function e(){var aa=setTimeout;return function(){return aa(q,1)}}function q(){for(var aa=0;aa<G;aa+=2)(0,E[aa])(E[aa+
1]),E[aa]=void 0,E[aa+1]=void 0;G=0}function t(aa,da){var ra=this,ca=new this.constructor(g);void 0===ca[P]&&x(ca);var fa=ra._state;if(fa){var la=arguments[fa-1];y(function(){return w(fa,ca,la,ra._result)})}else k(ra,ca,aa,da);return ca}function u(aa){if(aa&&"object"==typeof aa&&aa.constructor===this)return aa;var da=new this(g);return v(da,aa),da}function g(){}function m(aa,da,ra){da.constructor===aa.constructor&&ra===t&&da.constructor.resolve===u?function(ca,fa){1===fa._state?l(ca,fa._result):2===
fa._state?n(ca,fa._result):k(fa,void 0,function(la){return v(ca,la)},function(la){return n(ca,la)})}(aa,da):void 0===ra?l(aa,da):"function"==typeof ra?function(ca,fa,la){y(function(ta){var Q=!1,T=function(O,Z,na,ia){try{O.call(Z,na,ia)}catch(X){return X}}(la,fa,function(O){Q||(Q=!0,fa!==O?v(ta,O):l(ta,O))},function(O){Q||(Q=!0,n(ta,O))},ta._label);!Q&&T&&(Q=!0,n(ta,T))},ca)}(aa,da,ra):l(aa,da)}function v(aa,da){if(aa===da)n(aa,new TypeError("You cannot resolve a promise with itself"));else if(ca=
typeof(ra=da),null===ra||"object"!==ca&&"function"!==ca)l(aa,da);else{ra=void 0;try{ra=da.then}catch(fa){return void n(aa,fa)}m(aa,da,ra)}var ra,ca}function p(aa){aa._onerror&&aa._onerror(aa._result);r(aa)}function l(aa,da){void 0===aa._state&&(aa._result=da,aa._state=1,0!==aa._subscribers.length&&y(r,aa))}function n(aa,da){void 0===aa._state&&(aa._state=2,aa._result=da,y(p,aa))}function k(aa,da,ra,ca){var fa=aa._subscribers,la=fa.length;aa._onerror=null;fa[la]=da;fa[la+1]=ra;fa[la+2]=ca;0===la&&
aa._state&&y(r,aa)}function r(aa){var da=aa._subscribers,ra=aa._state;if(0!==da.length){for(var ca=void 0,fa=void 0,la=aa._result,ta=0;ta<da.length;ta+=3)ca=da[ta],fa=da[ta+ra],ca?w(ra,ca,fa,la):fa(la);aa._subscribers.length=0}}function w(aa,da,ra,ca){var fa="function"==typeof ra,la=void 0,ta=void 0,Q=!0;if(fa){try{la=ra(ca)}catch(T){Q=!1,ta=T}if(da===la)return void n(da,new TypeError("A promises callback cannot return that same promise."))}else la=ca;void 0!==da._state||(fa&&Q?v(da,la):!1===Q?n(da,
ta):1===aa?l(da,la):2===aa&&n(da,la))}function x(aa){aa[P]=R++;aa._state=void 0;aa._result=void 0;aa._subscribers=[]}var D=Array.isArray?Array.isArray:function(aa){return"[object Array]"===Object.prototype.toString.call(aa)},G=0,F=void 0,A=void 0,y=function(aa,da){E[G]=aa;E[G+1]=da;2===(G+=2)&&(A?A(q):N())},z="undefined"!=typeof window?window:void 0,B=z||{};B=B.MutationObserver||B.WebKitMutationObserver;var C="undefined"==typeof self&&void 0!==b&&"[object process]"==={}.toString.call(b),H="undefined"!=
typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,E=Array(1E3),K,I,L,M,N=void 0;C?N=function(){return b.nextTick(q)}:B?(I=0,L=new B(q),M=document.createTextNode(""),L.observe(M,{characterData:!0}),N=function(){M.data=I=++I%2}):H?((K=new MessageChannel).port1.onmessage=q,N=function(){return K.port2.postMessage(0)}):N=void 0===z?function(){try{var aa=Function("return this")().require("vertx");return void 0!==(F=aa.runOnLoop||aa.runOnContext)?function(){F(q)}:
e()}catch(da){return e()}}():e();var P=Math.random().toString(36).substring(2),R=0,Y=function(){function aa(da,ra){this._instanceConstructor=da;this.promise=new da(g);this.promise[P]||x(this.promise);D(ra)?(this.length=ra.length,this._remaining=ra.length,this._result=Array(this.length),0===this.length?l(this.promise,this._result):(this.length=this.length||0,this._enumerate(ra),0===this._remaining&&l(this.promise,this._result))):n(this.promise,Error("Array Methods must be provided an Array"))}return aa.prototype._enumerate=
function(da){for(var ra=0;void 0===this._state&&ra<da.length;ra++)this._eachEntry(da[ra],ra)},aa.prototype._eachEntry=function(da,ra){var ca=this._instanceConstructor,fa=ca.resolve;if(fa===u){var la=fa=void 0,ta=!1;try{fa=da.then}catch(Q){ta=!0,la=Q}fa===t&&void 0!==da._state?this._settledAt(da._state,ra,da._result):"function"!=typeof fa?(this._remaining--,this._result[ra]=da):ca===ja?(ca=new ca(g),ta?n(ca,la):m(ca,da,fa),this._willSettleAt(ca,ra)):this._willSettleAt(new ca(function(Q){return Q(da)}),
ra)}else this._willSettleAt(fa(da),ra)},aa.prototype._settledAt=function(da,ra,ca){var fa=this.promise;void 0===fa._state&&(this._remaining--,2===da?n(fa,ca):this._result[ra]=ca);0===this._remaining&&l(fa,this._result)},aa.prototype._willSettleAt=function(da,ra){var ca=this;k(da,void 0,function(fa){return ca._settledAt(1,ra,fa)},function(fa){return ca._settledAt(2,ra,fa)})},aa}(),ja=function(){function aa(da){this[P]=R++;this._result=this._state=void 0;this._subscribers=[];if(g!==da){if("function"!=
typeof da)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof aa)(function(ra,ca){try{ca(function(fa){v(ra,fa)},function(fa){n(ra,fa)})}catch(fa){n(ra,fa)}})(this,da);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}}return aa.prototype.catch=function(da){return this.then(null,da)},aa.prototype.finally=function(da){var ra=this.constructor;
return"function"==typeof da?this.then(function(ca){return ra.resolve(da()).then(function(){return ca})},function(ca){return ra.resolve(da()).then(function(){throw ca;})}):this.then(da,da)},aa}();return ja.prototype.then=t,ja.all=function(aa){return(new Y(this,aa)).promise},ja.race=function(aa){var da=this;return D(aa)?new da(function(ra,ca){for(var fa=aa.length,la=0;la<fa;la++)da.resolve(aa[la]).then(ra,ca)}):new da(function(ra,ca){return ca(new TypeError("You must pass an array to race."))})},ja.resolve=
u,ja.reject=function(aa){var da=new this(g);return n(da,aa),da},ja._setScheduler=function(aa){A=aa},ja._setAsap=function(aa){y=aa},ja._asap=y,ja.polyfill=function(){var aa=void 0;if(void 0!==a)aa=a;else if("undefined"!=typeof self)aa=self;else try{aa=Function("return this")()}catch(ca){throw Error("polyfill failed because global object is unavailable in this environment");}var da=aa.Promise;if(da){var ra=null;try{ra=Object.prototype.toString.call(da.resolve())}catch(ca){}if("[object Promise]"===ra&&
!da.cast)return}aa.Promise=ja},ja.Promise=ja,ja}()}).call(this,d(189),d(165))},297:function(c,h,d){d.d(h,"a",function(){return q});var b=d(33),a=d(59),e=d(172),q=function(t,u){u=u();u=(Object(a.b)(u)?u:u.gbState).utils;Object(b.q)(u.request,u.portal).then(function(g){var m;g=(null===(m=null==g?void 0:g.trustedOrgs)||void 0===m?void 0:m.filter(function(v){return-1<v.from.established&&-1<v.to.established}))||[];t({type:e.a.TRUSTED_ORGS_LOADED,payload:g})},function(){t({type:e.a.TRUSTED_ORGS_LOADED,
payload:[]})})}},298:function(c,h,d){function b(m,v,p){return new t.Promise(function(l,n){Object(e.r)(m,v,p).then(function(k){l(k)},function(){l()})})}d.d(h,"a",function(){return g});var a=d(1),e=d(33),q=d(59),t=d(28),u=d(25),g=function(m,v){var p=Object(q.b)(m)?m:m.gbState,l=p.utils;m=l.request;var n=l.portal,k=l.portalUser,r=p.config.shareMode;p=[b(m,n,k.username)];return r===u.d.ADMIN&&v.username!==k.username&&p.push(b(m,n,v.username)),t.Promise.all(p).then(function(w){var x,D;if(w[0])return Object(a.a)(((x=
{})[k.username]=w[0].groups,x),r===u.d.ADMIN&&!!w[1]&&((D={})[v.username]=w[1].groups,D))})}},317:function(c,h,d){d.d(h,"b",function(){return v});d.d(h,"a",function(){return A});var b=d(1),a=d(28),e=d(33),q=d(80),t=d(47),u=d(62),g=d(196),m=d(25),v=function(C){if(C.depth&&4<C.depth)return a.Promise.resolve([]);switch(C.depth=C.depth?C.depth+1:1,C.item.type){case "Web Map":case "Web Scene":return D(C);case "Web Mapping Application":return n(C);case "Web Experience":case "Web Experience Template":return l(C);
case "Big Data File Share":return k(C);case "Data Store":return r(C);default:return a.Promise.resolve([])}},p=function(C){var H=C.item,E=C.request,K=C.portal,I=C.iconDir;return H.itemId?new a.Promise(function(L){Object(e.v)(E,"".concat(K.restUrl,"/content/items/").concat(H.itemId)).then(function(M){0<Object(g.b)([M]).length?Object(g.a)({items:[M],request:E}).then(function(N){M.isUpdateLayer=0<N.length;L(Object(q.a)(K,I,M))},function(){return L(Object(q.a)(K,I,M))}):L(Object(q.a)(K,I,M))},function(){return L(null)})}):
a.Promise.resolve(null)},l=function(C){var H=C.item,E=C.request,K=C.portal,I=C.iconDir;return new a.Promise(function(L){var M="".concat(K.restUrl,"/content/items/").concat(H.id);M=H.typeKeywords.includes("status: Draft")?"".concat(M,"/resources/config/config.json"):"".concat(M,"/data");Object(e.v)(E,M).then(function(N){(null==N?0:N.dataSources)||(null==N?0:N.utilities)||L([]);N=function(P){var R=P.utilities||{};return Object(b.g)(Object(b.g)([],Object.values(P.dataSources||{}),!0),Object.values(R),
!0).map(function(Y){return Y.itemId}).filter(function(Y){return Y})}(N).map(function(P){return p({item:{itemId:P},request:E,portal:K,iconDir:I})});a.Promise.all(N).then(function(P){var R=P.filter(function(Y){return Y});P=R.map(function(Y){return v({item:Y,request:E,portal:K,iconDir:I})});a.Promise.all(P).then(function(Y){Y=Object(b.g)(Object(b.g)([],R,!0),Object(u.b)(Y),!0);L(Y)})})})})},n=function(C){var H=C.item,E=C.request,K=C.portal,I=C.iconDir;return new a.Promise(function(L){Object(e.v)(E,"".concat(K.restUrl,
"/content/items/").concat(H.id,"/data")).then(function(M){M||L([]);var N=function(P){var R,Y,ja,aa,da,ra,ca,fa,la,ta,Q=(null===(R=null==P?void 0:P.map)||void 0===R?0:R.itemId)?[P.map.itemId]:[];R=null!==(aa=null===(ja=null===(Y=P.values)||void 0===Y?void 0:Y.itemCollection)||void 0===ja?void 0:ja.map(function(T){return T.id}))&&void 0!==aa?aa:[];Y=null!==(ca=null===(ra=null===(da=P.values)||void 0===da?void 0:da.webmap)||void 0===ra?void 0:ra.split(","))&&void 0!==ca?ca:[];P=null!==(ta=null===(la=
null===(fa=P.values)||void 0===fa?void 0:fa.webscene)||void 0===la?void 0:la.split(","))&&void 0!==ta?ta:[];return Object(b.g)(Object(b.g)(Object(b.g)(Object(b.g)([],Q,!0),R,!0),Y,!0),P,!0)}(M).map(function(P){return p({item:{itemId:P},request:E,portal:K,iconDir:I})});a.Promise.all(N).then(function(P){var R=P.filter(function(Y){return Y});P=R.map(function(Y){return v({item:Y,request:E,portal:K,iconDir:I})});a.Promise.all(P).then(function(Y){var ja;Y=Object(b.g)(Object(b.g)([],R,!0),Object(u.b)(Y),
!0);(null===(ja=M.values)||void 0===ja?0:ja.group)&&(H.itemData=M,Y.push(H));L(Y)})})})})},k=function(C){var H=C.item,E=C.request,K=C.portal,I=C.iconDir;return new a.Promise(function(L){Object(e.v)(E,"".concat(K.restUrl,"/content/items/").concat(H.id,"/relatedItems"),{relationshipType:"BDFSDataStore2BDFSCatalogService",direction:"reverse"}).then(function(M){if(-1<M.relatedItems[0].typeKeywords.indexOf("bigDataFileShare")&&-1<M.relatedItems[0].typeKeywords.indexOf("dataStore"))Object(e.v)(E,"".concat(K.restUrl,
"/content/items/").concat(M.relatedItems[0].id,"/relatedItems"),{relationshipType:"CloudDataStore2BDFSDataStore",direction:"reverse"}).then(function(P){P.relatedItems.push(M.relatedItems[0]);P=w(P.relatedItems,E,K,I);a.Promise.all(P).then(function(R){L(R)})});else{var N=w(M.relatedItems,E,K,I);a.Promise.all(N).then(function(P){L(P)})}})})},r=function(C){var H=C.item,E=C.request,K=C.portal,I=C.iconDir;return new a.Promise(function(L){Object(e.v)(E,"".concat(K.restUrl,"/content/items/").concat(H.id,
"/relatedItems"),{relationshipType:"CloudDataStore2BDFSDataStore",direction:"reverse"}).then(function(M){M=w(M.relatedItems,E,K,I);a.Promise.all(M).then(function(N){L(N)})})})},w=function(C,H,E,K){return C.map(function(I){return x(I,H,E,K)})},x=function(C,H,E,K){return new a.Promise(function(I){Object(e.v)(H,"".concat(E.restUrl,"/content/items/").concat(C.id)).then(function(L){I(Object(q.a)(E,K,L))})})},D=function(C){var H=C.item,E=C.request,K=C.portal,I=C.iconDir;return new a.Promise(function(L){return function(M){var N=
M.portal,P=M.item,R=M.request;return new a.Promise(function(Y){if(P.itemData){var ja=P.itemData,aa=ja.operationalLayers,da=ja.baseMap,ra=ja.tables;ja=ja.ground;return Y(Object(b.g)(Object(b.g)(Object(b.g)(Object(b.g)([],(null==da?void 0:da.baseMapLayers)||[],!0),(null==ja?void 0:ja.layers)||[],!0),aa||[],!0),ra||[],!0))}return Object(e.v)(R,"".concat(N.restUrl,"/content/items/").concat(P.id,"/data")).then(function(ca){var fa=ca.baseMap,la=ca.tables,ta=ca.ground;return Y(Object(b.g)(Object(b.g)(Object(b.g)(Object(b.g)([],
ca.operationalLayers||[],!0),(null==fa?void 0:fa.baseMapLayers)||[],!0),(null==ta?void 0:ta.layers)||[],!0),la||[],!0))},function(){return Y([])})})}({request:E,item:H,portal:K}).then(function(M){a.Promise.all(G(M).map(function(N){return p({item:N,request:E,portal:K,iconDir:I})})).then(L)})})},G=function(C){return C.reduce(function(H,E){return(null==E?0:E.itemId)?H.concat(E):(null==E?0:E.layers)&&"GroupLayer"===E.layerType?H.concat(E.layers):H},[])},F={needsShareLevelUpdate:!1,needsGroupSharingUpdate:!1,
editable:!0,premium:!1,groupDependentApplication:!1,bdfsDatastore:!1},A=function(C){var H=C.item,E=C.selectedOptions,K=C.selectedGroups,I=C.request;C=C.portal;return y({item:H,selectedOptions:E})?a.Promise.resolve(Object(b.a)(Object(b.a)({},F),{editable:!1,premium:!0})):z({item:H,selectedGroups:K,request:I,portal:C,selectedOptions:E}).then(function(L){return{needsGroupSharingUpdate:L.needsGroupSharingUpdate,needsShareLevelUpdate:L.needsShareLevelUpdate||B({item:H,selectedOptions:E}),editable:L.editable,
premium:!1,groupDependentApplication:L.groupDependentApplication,bdfsDatastore:L.bdfsDatastore}})},y=function(C){var H=C.selectedOptions;C=C.item;return Object(u.e)(H)?!1:Object(u.d)(H)===m.b.public?(H=C.typeKeywords,-1<C.owner.toLowerCase().indexOf("esri")&&(-1<(null==H?void 0:H.indexOf("Requires Credits"))||-1<(null==H?void 0:H.indexOf("Requires Subscription")))):!1},z=function(C){var H=C.item,E=C.selectedGroups,K=C.selectedOptions,I=C.request,L=C.portal;return new a.Promise(function(M,N){var P,
R;"Web Mapping Application"===H.type&&(null===(R=null===(P=H.itemData)||void 0===P?void 0:P.values)||void 0===R?0:R.group)?M(Object(b.a)(Object(b.a)({},F),{groupDependentApplication:!0})):"Data Store"!==H.type?(N=H.ownerFolder?"/".concat(H.ownerFolder):"",N="".concat(L.restUrl,"/content/users/").concat(H.owner).concat(N,"/items/").concat(H.itemId||H.id),Object(e.v)(I,N).then(function(Y){var ja,aa,da=Y.item.itemControl,ra=Y.sharing.groups;Y=H.access||(null===(ja=H.sharing)||void 0===ja?void 0:ja.access);
ja=Object(t.k)(null===(aa=null==L?void 0:L.subscriptionInfo)||void 0===aa?void 0:aa.type)&&Object(u.f)(H);!Object(u.g)(H)&&!ja||K.total!==K.public?da&&"admin"!==da&&"update"!==da?M(Object(b.a)(Object(b.a)({},F),{editable:!1})):Y!==m.b.public?(aa=B({item:H,selectedOptions:K}),E.length>ra.length?M(Object(b.a)(Object(b.a)({},F),{needsGroupSharingUpdate:!0,needsShareLevelUpdate:aa})):(da=E.some(function(ca){return 0>ra.indexOf(ca.id)}),M(Object(b.a)(Object(b.a)({},F),{needsGroupSharingUpdate:da,needsShareLevelUpdate:aa})))):
M(Object(b.a)({},F)):M(Object(b.a)(Object(b.a)({},F),{needsShareLevelUpdate:!0,editable:!1}))},function(Y){Object(e.v)(I,"".concat(L.restUrl,"/content/items/").concat(H.itemId||H.id)).then(function(ja){ja=ja.access;ja===m.b.public||ja===m.b.org&&K.total===K.org+K.private?M(Object(b.a)(Object(b.a)({},F),{editable:!1})):M(Object(b.a)(Object(b.a)({},F),{needsShareLevelUpdate:!0,editable:!1}))},function(ja){M(Object(b.a)(Object(b.a)({},F),{needsShareLevelUpdate:!0,editable:!1}))})})):M(Object(b.a)(Object(b.a)({},
F),{bdfsDatastore:!0}))})},B=function(C){var H,E=C.item,K=C.selectedOptions;C=!0;Object(u.e)(K)&&(C=!1);K=Object(u.d)(K);K!==m.b.private&&K!==m.b.shared||(C=!1);E=E.access||(null===(H=E.sharing)||void 0===H?void 0:H.access);return E===m.b.public&&(C=!1),E===K&&(C=!1),K===m.b.private&&(E===m.b.shared&&(C=!1),E===m.b.org&&(C=!1)),C}},319:function(c,h,d){(function(b,a){function e(va,xa){return va.set(xa[0],xa[1]),va}function q(va,xa){return va.add(xa),va}function t(va,xa,Da,Ca){var qa=-1,W=va?va.length:
0;for(Ca&&W&&(Da=va[++qa]);++qa<W;)Da=xa(Da,va[qa],qa,va);return Da}function u(va){var xa=!1;if(null!=va&&"function"!=typeof va.toString)try{xa=!!(va+"")}catch(Da){}return xa}function g(va){var xa=-1,Da=Array(va.size);return va.forEach(function(Ca,qa){Da[++xa]=[qa,Ca]}),Da}function m(va,xa){return function(Da){return va(xa(Da))}}function v(va){var xa=-1,Da=Array(va.size);return va.forEach(function(Ca){Da[++xa]=Ca}),Da}function p(va){var xa=-1,Da=va?va.length:0;for(this.clear();++xa<Da;){var Ca=va[xa];
this.set(Ca[0],Ca[1])}}function l(va){var xa=-1,Da=va?va.length:0;for(this.clear();++xa<Da;){var Ca=va[xa];this.set(Ca[0],Ca[1])}}function n(va){var xa=-1,Da=va?va.length:0;for(this.clear();++xa<Da;){var Ca=va[xa];this.set(Ca[0],Ca[1])}}function k(va){this.__data__=new l(va)}function r(va,xa){var Da=ua(va)||function(ba){return!!ba&&"object"==typeof ba&&H(ba)&&la.call(ba,"callee")&&(!na.call(ba,"callee")||"[object Arguments]"==ta.call(ba))}(va)?function(ba,oa){for(var wa=-1,Ea=Array(ba);++wa<ba;)Ea[wa]=
oa(wa);return Ea}(va.length,String):[],Ca=Da.length,qa=!!Ca,W;for(W in va)!xa&&!la.call(va,W)||qa&&("length"==W||z(W,Ca))||Da.push(W);return Da}function w(va,xa,Da){var Ca=va[xa];la.call(va,xa)&&(Ca===Da||Ca!=Ca&&Da!=Da)&&(void 0!==Da||xa in va)||(va[xa]=Da)}function x(va,xa){for(var Da=va.length;Da--;){var Ca=va[Da][0];if(Ca===xa||Ca!=Ca&&xa!=xa)return Da}return-1}function D(va,xa,Da,Ca,qa,W,ba){var oa;if(Ca&&(oa=W?Ca(va,qa,W,ba):Ca(va)),void 0!==oa)return oa;if(!K(va))return va;if(qa=ua(va)){if(oa=
function(Ja){var ya=Ja.length,Ha=Ja.constructor(ya);ya&&"string"==typeof Ja[0]&&la.call(Ja,"index")&&(Ha.index=Ja.index,Ha.input=Ja.input);return Ha}(va),!xa)return function(Ja,ya){var Ha=-1,Ia=Ja.length;for(ya||(ya=Array(Ia));++Ha<Ia;)ya[Ha]=Ja[Ha];return ya}(va,oa)}else{var wa=Ba(va),Ea="[object Function]"==wa||"[object GeneratorFunction]"==wa;if(Fa(va))return function(Ja,ya){if(ya)return Ja.slice();ya=new Ja.constructor(Ja.length);return Ja.copy(ya),ya}(va,xa);if("[object Object]"==wa||"[object Arguments]"==
wa||Ea&&!W){if(u(va))return W?va:{};if(oa=function(Ja){return"function"!=typeof Ja.constructor||B(Ja)?{}:(ya=O(Ja),K(ya)?Z(ya):{});var ya}(Ea?{}:va),!xa)return function(Ja,ya){return F(Ja,za(Ja),ya)}(va,function(Ja,ya){return Ja&&F(ya,I(ya),Ja)}(oa,va))}else{if(!P[wa])return W?va:{};oa=function(Ja,ya,Ha,Ia){var Ka=Ja.constructor;switch(ya){case "[object ArrayBuffer]":return G(Ja);case "[object Boolean]":case "[object Date]":return new Ka(+Ja);case "[object DataView]":return function(Na,La){La=La?
G(Na.buffer):Na.buffer;return new Na.constructor(La,Na.byteOffset,Na.byteLength)}(Ja,Ia);case "[object Float32Array]":case "[object Float64Array]":case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return function(Na,La){La=La?G(Na.buffer):Na.buffer;return new Na.constructor(La,Na.byteOffset,Na.length)}(Ja,Ia);case "[object Map]":return function(Na,La,Pa){return t(La?
Pa(g(Na),!0):g(Na),e,new Na.constructor)}(Ja,Ia,Ha);case "[object Number]":case "[object String]":return new Ka(Ja);case "[object RegExp]":return function(Na){var La=new Na.constructor(Na.source,L.exec(Na));return La.lastIndex=Na.lastIndex,La}(Ja);case "[object Set]":return function(Na,La,Pa){return t(La?Pa(v(Na),!0):v(Na),q,new Na.constructor)}(Ja,Ia,Ha);case "[object Symbol]":return Ma=Ja,Aa?Object(Aa.call(Ma)):{}}var Ma}(va,wa,D,xa)}}ba||(ba=new k);if(W=ba.get(va))return W;if(ba.set(va,oa),!qa)var Ga=
Da?function(Ja){var ya=za,Ha=I(Ja);if(!ua(Ja)){Ja=ya(Ja);ya=-1;for(var Ia=Ja.length,Ka=Ha.length;++ya<Ia;)Ha[Ka+ya]=Ja[ya]}return Ha}(va):I(va);return function(Ja,ya){for(var Ha=-1,Ia=Ja?Ja.length:0;++Ha<Ia&&!1!==ya(Ja[Ha],Ha,Ja););}(Ga||va,function(Ja,ya){Ga&&(Ja=va[ya=Ja]);w(oa,ya,D(Ja,xa,Da,Ca,ya,va,ba))}),oa}function G(va){var xa=new va.constructor(va.byteLength);return(new T(xa)).set(new T(va)),xa}function F(va,xa,Da,Ca){Da||(Da={});for(var qa=-1,W=xa.length;++qa<W;){var ba=xa[qa],oa=Ca?Ca(Da[ba],
va[ba],ba,Da,va):void 0;w(Da,ba,void 0===oa?va[ba]:oa)}return Da}function A(va,xa){var Da;va=va.__data__;return("string"==(Da=typeof xa)||"number"==Da||"symbol"==Da||"boolean"==Da?"__proto__"!==xa:null===xa)?va["string"==typeof xa?"string":"hash"]:va.map}function y(va,xa){va=null==va?void 0:va[xa];a:{xa=!(!K(va)||(Da=va,ca&&ca in Da))&&(E(va)||u(va)?Q:M).test(C(va));break a;var Da}return xa?va:void 0}function z(va,xa){return!!(xa=null==xa?9007199254740991:xa)&&("number"==typeof va||N.test(va))&&-1<
va&&0==va%1&&va<xa}function B(va){var xa=va&&va.constructor;return va===("function"==typeof xa&&xa.prototype||da)}function C(va){if(null!=va){try{return fa.call(va)}catch(xa){}return va+""}return""}function H(va){var xa;if(xa=null!=va)xa=va.length,xa="number"==typeof xa&&-1<xa&&0==xa%1&&9007199254740991>=xa;return xa&&!E(va)}function E(va){va=K(va)?ta.call(va):"";return"[object Function]"==va||"[object GeneratorFunction]"==va}function K(va){var xa=typeof va;return!!va&&("object"==xa||"function"==
xa)}function I(va){if(H(va))va=r(va);else if(B(va)){var xa=[],Da;for(Da in Object(va))la.call(va,Da)&&"constructor"!=Da&&xa.push(Da);va=xa}else va=X(va);return va}var L=/\w*$/,M=/^\[object .+?Constructor\]$/,N=/^(?:0|[1-9]\d*)$/,P={};P["[object Arguments]"]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object DataView]"]=P["[object Boolean]"]=P["[object Date]"]=P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Map]"]=
P["[object Number]"]=P["[object Object]"]=P["[object RegExp]"]=P["[object Set]"]=P["[object String]"]=P["[object Symbol]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0;P["[object Error]"]=P["[object Function]"]=P["[object WeakMap]"]=!1;var R="object"==typeof self&&self&&self.Object===Object&&self;b="object"==typeof b&&b&&b.Object===Object&&b||R||Function("return this")();var Y=(R=h&&!h.nodeType&&h)&&"object"==typeof a&&a&&!a.nodeType&&
a;Y=Y&&Y.exports===R;var ja;R=Array.prototype;var aa=Function.prototype,da=Object.prototype,ra=b["__core-js_shared__"],ca=(ja=/[^.]+$/.exec(ra&&ra.keys&&ra.keys.IE_PROTO||""))?"Symbol(src)_1."+ja:"",fa=aa.toString,la=da.hasOwnProperty,ta=da.toString,Q=RegExp("^"+fa.call(la).replace(/[\\^$.*+?()[\]{}|]/g,"\\$\x26").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");Y=Y?b.Buffer:void 0;ja=b.Symbol;var T=b.Uint8Array,O=m(Object.getPrototypeOf,Object),Z=Object.create,na=da.propertyIsEnumerable,
ia=R.splice;R=Object.getOwnPropertySymbols;Y=Y?Y.isBuffer:void 0;var X=m(Object.keys,Object);aa=y(b,"DataView");var ha=y(b,"Map");ra=y(b,"Promise");var V=y(b,"Set");b=y(b,"WeakMap");var ea=y(Object,"create"),U=C(aa),ka=C(ha),ma=C(ra),sa=C(V),pa=C(b),Aa=(ja=ja?ja.prototype:void 0)?ja.valueOf:void 0;p.prototype.clear=function(){this.__data__=ea?ea(null):{}};p.prototype.delete=function(va){return this.has(va)&&delete this.__data__[va]};p.prototype.get=function(va){var xa=this.__data__;return ea?(va=
xa[va],"__lodash_hash_undefined__"===va?void 0:va):la.call(xa,va)?xa[va]:void 0};p.prototype.has=function(va){var xa=this.__data__;return ea?void 0!==xa[va]:la.call(xa,va)};p.prototype.set=function(va,xa){return this.__data__[va]=ea&&void 0===xa?"__lodash_hash_undefined__":xa,this};l.prototype.clear=function(){this.__data__=[]};l.prototype.delete=function(va){var xa=this.__data__;va=x(xa,va);return!(0>va)&&(va==xa.length-1?xa.pop():ia.call(xa,va,1),!0)};l.prototype.get=function(va){var xa=this.__data__;
va=x(xa,va);return 0>va?void 0:xa[va][1]};l.prototype.has=function(va){return-1<x(this.__data__,va)};l.prototype.set=function(va,xa){var Da=this.__data__,Ca=x(Da,va);return 0>Ca?Da.push([va,xa]):Da[Ca][1]=xa,this};n.prototype.clear=function(){this.__data__={hash:new p,map:new (ha||l),string:new p}};n.prototype.delete=function(va){return A(this,va).delete(va)};n.prototype.get=function(va){return A(this,va).get(va)};n.prototype.has=function(va){return A(this,va).has(va)};n.prototype.set=function(va,
xa){return A(this,va).set(va,xa),this};k.prototype.clear=function(){this.__data__=new l};k.prototype.delete=function(va){return this.__data__.delete(va)};k.prototype.get=function(va){return this.__data__.get(va)};k.prototype.has=function(va){return this.__data__.has(va)};k.prototype.set=function(va,xa){var Da=this.__data__;if(Da instanceof l){Da=Da.__data__;if(!ha||199>Da.length)return Da.push([va,xa]),this;Da=this.__data__=new n(Da)}return Da.set(va,xa),this};var za=R?m(R,Object):function(){return[]},
Ba=function(va){return ta.call(va)};(aa&&"[object DataView]"!=Ba(new aa(new ArrayBuffer(1)))||ha&&"[object Map]"!=Ba(new ha)||ra&&"[object Promise]"!=Ba(ra.resolve())||V&&"[object Set]"!=Ba(new V)||b&&"[object WeakMap]"!=Ba(new b))&&(Ba=function(va){var xa=ta.call(va);if(va=(va="[object Object]"==xa?va.constructor:void 0)?C(va):void 0)switch(va){case U:return"[object DataView]";case ka:return"[object Map]";case ma:return"[object Promise]";case sa:return"[object Set]";case pa:return"[object WeakMap]"}return xa});
var ua=Array.isArray,Fa=Y||function(){return!1};a.exports=function(va){return D(va,!0,!0)}}).call(this,d(165),d(352)(c))},33:function(c,h,d){function b(E){return E.reduce(function(K,I){return I&&I.relatedItems?K.concat(I.relatedItems.map(function(L){return L})):K},[])}function a(E,K,I){return E(K,{query:Object(t.a)({f:"json"},I)}).then(function(L){return L.data})}function e(E,K){void 0===K&&(K=100);for(var I=[],L=0;L<Math.ceil(E.length/K);L++)I.push(E.slice(L*K,(L+1)*K));return I.filter(function(M){return 0<
M.length})}function q(E){var K=E.itemIds,I=E.request,L=E.groupIds,M="".concat(E.portal.restUrl,"/content/itemsgroups");return new u.Promise(function(N,P){I(M,{method:"get",query:{f:"json",items:K,groups:L}}).then(function(R){N(R.data)},P)})}d.d(h,"u",function(){return g});d.d(h,"n",function(){return m});d.d(h,"h",function(){return v});d.d(h,"e",function(){return p});d.d(h,"f",function(){return l});d.d(h,"j",function(){return n});d.d(h,"o",function(){return k});d.d(h,"l",function(){return r});d.d(h,
"k",function(){return w});d.d(h,"m",function(){return x});d.d(h,"c",function(){return D});d.d(h,"d",function(){return G});d.d(h,"r",function(){return F});d.d(h,"s",function(){return A});d.d(h,"t",function(){return y});d.d(h,"g",function(){return z});d.d(h,"p",function(){return B});d.d(h,"q",function(){return C});d.d(h,"v",function(){return a});d.d(h,"a",function(){return e});d.d(h,"i",function(){return q});d.d(h,"b",function(){return H});var t=d(1),u=d(28),g=function(E){return function(K,I){return E({url:K,
content:I.query},{usePost:"post"===I.method}).then(function(L){return{data:L}})}},m=function(E,K,I){return a(E,"".concat(K.restUrl,"/portals/self"),{culture:I,default:!0})},v=function(E,K,I){return a(E,"".concat(K.restUrl,"/content/items/").concat(I,"/data"))},p=function(E,K,I,L){return a(E,"".concat(K.restUrl,"/community/groups"),Object(t.a)({q:I},L))},l=function(E,K,I){return a(E,"".concat(K.restUrl,"/community/groups/").concat(I,"/categorySchema"))},n=function(E,K,I){return a(E,"".concat(K.restUrl,
"/portals/").concat(I||K.id,"/categorySchema"))},k=function(E,K){return a(E,"".concat(K.restUrl,"/portals/").concat(K.id,"/servers"))},r=function(E,K,I,L){return E("".concat(K.restUrl,"/portals/").concat(I||K.id,"/collaborationsSummary"),L)},w=function(E,K,I,L){return E("".concat(K.restUrl,"/portals/").concat(I||K.id,"/collaboratedItems"),L)},x=function(E,K,I){return a(E,"".concat(location.protocol,"//").concat(K.portalHostname,"/sharing/rest/portals/").concat(I||"self"))},D=function(E,K,I){return E("".concat(K.restUrl,
"/community/groups"),{query:{f:"json",q:"orgid:".concat(K.id," AND access:public"),num:100,start:I||1,sortField:"title",sortOrder:"asc"}}).then(function(L){return L.data.total>L.data.start+L.data.num?D(E,K,L.data.start+L.data.num).then(function(M){return Object(t.a)(Object(t.a)({},M),{data:Object(t.a)(Object(t.a)({},M.data),{results:L.data.results.concat(M.data.results)})})}):L})},G=function(E,K,I,L){return E("".concat(K.restUrl,"/community/users/").concat(I,"/provisionedListings"),{query:{f:"json",
num:100,start:L||1}}).then(function(M){var N=u.Promise.all(M.data.provisionedListings.filter(function(R){return R.itemId}).map(function(R){return(new u.Promise(function(Y,ja){E("".concat(K.restUrl,"/content/items/").concat(R.itemId),{method:"get",query:{f:"json"}}).then(function(aa){Y(aa.data)},ja)})).catch(function(Y){return 0})})),P=M.data.provisionedListings.map(function(R){return a(E,"".concat(K.restUrl,"/content/items/").concat(R.id||R.itemId,"/relatedItems?relationshipType\x3dListed2ImplicitlyListed\x26direction\x3dforward")).then(function(Y){return Y},
function(Y){})});return M.data.total>M.data.start+M.data.num?G(E,K,I,M.data.start+M.data.num).then(function(R){return u.Promise.all([N].concat(P)).then(function(Y){return Y[0].results.concat(b(Y.slice(1))).concat(R)})}):u.Promise.all([N].concat(P)).then(function(R){return R[0].filter(function(Y){return void 0!==Y}).concat(b(R.slice(1)))})})},F=function(E,K,I){return a(E,"".concat(K.restUrl,"/community/users/").concat(I||K.user.username))},A=function(E,K,I){return a(E,"".concat(K.restUrl,"/content/users/").concat(I||
K.user.username),{num:1})},y=function(E,K,I){return a(E,"".concat(K.restUrl,"/content/groups/").concat(I))},z=function(E,K,I){return a(E,"".concat(K.restUrl,"/community/groups"),I)},B=function(E,K){return a(E,"".concat(K.restUrl,"/portals/self/settings"))},C=function(E,K){return a(E,"".concat(K.restUrl,"/portals/self/trustedOrgs"),{num:100})},H=function(E,K){return void 0===K&&(K=","),E.map(function(I){return I.id}).join(K)}},339:function(c,h){c.exports=f},352:function(c,h){c.exports=function(d){return d.webpackPolyfill||
(d.deprecate=function(){},d.paths=[],d.children||(d.children=[]),Object.defineProperty(d,"loaded",{enumerable:!0,get:function(){return d.l}}),Object.defineProperty(d,"id",{enumerable:!0,get:function(){return d.i}}),d.webpackPolyfill=1),d}},365:function(c,h,d){function b(q,t){var u=q.filter(function(g){var m;return!g.success&&500===(null===(m=null==g?void 0:g.error)||void 0===m?void 0:m.code)}).map(function(g){var m=Object(e.c)(t,function(v){return v.id===g.itemId});return(null==m?void 0:m.title)||
g.itemId});return q.map(function(g){g.error=g.error||{};var m=g.error,v=m.messageCode;m=m.code;return v&&a.errors[v]&&(g.error.message=a.errors[v]),m&&a.errors[m]&&(g.error.message=a.errors[m]),(500===v||500===m&&u)&&(g.error.details=u,g.error.message="".concat(a.errors[500]," ").concat(null==u?void 0:u.join(", "))),g}).filter(function(g){return!g.success})}d.d(h,"a",function(){return b});var a=d(40),e=d(97)},372:function(c,h,d){(function(b,a){function e(xa,Da,Ca){switch(Ca.length){case 0:return xa.call(Da);
case 1:return xa.call(Da,Ca[0]);case 2:return xa.call(Da,Ca[0],Ca[1]);case 3:return xa.call(Da,Ca[0],Ca[1],Ca[2])}return xa.apply(Da,Ca)}function q(xa){var Da=-1,Ca=null==xa?0:xa.length;for(this.clear();++Da<Ca;){var qa=xa[Da];this.set(qa[0],qa[1])}}function t(xa){var Da=-1,Ca=null==xa?0:xa.length;for(this.clear();++Da<Ca;){var qa=xa[Da];this.set(qa[0],qa[1])}}function u(xa){var Da=-1,Ca=null==xa?0:xa.length;for(this.clear();++Da<Ca;){var qa=xa[Da];this.set(qa[0],qa[1])}}function g(xa){this.size=
(this.__data__=new t(xa)).size}function m(xa,Da,Ca){(void 0===Ca||F(xa[Da],Ca))&&(void 0!==Ca||Da in xa)||p(xa,Da,Ca)}function v(xa,Da){for(var Ca=xa.length;Ca--;)if(F(xa[Ca][0],Da))return Ca;return-1}function p(xa,Da,Ca){"__proto__"==Da&&V?V(xa,Da,{configurable:!0,enumerable:!0,value:Ca,writable:!0}):xa[Da]=Ca}function l(xa){if(null==xa)xa=void 0===xa?"[object Undefined]":"[object Null]";else if(ha&&ha in Object(xa)){var Da=ca.call(xa,ha),Ca=xa[ha];try{xa[ha]=void 0;var qa=!0}catch(ba){}var W=la.call(xa);
qa&&(Da?xa[ha]=Ca:delete xa[ha]);xa=W}else xa=la.call(xa);return xa}function n(xa){return C(xa)&&"[object Arguments]"==l(xa)}function k(xa,Da,Ca,qa,W){xa!==Da&&pa(Da,function(ba,oa){if(W||(W=new g),B(ba))!function(Ea,Ga,Ja,ya,Ha,Ia,Ka){var Ma=G(Ea,Ja),Na=G(Ga,Ja),La=Ka.get(Na);if(La)return void m(Ea,Ja,La);Ga=Ia?Ia(Ma,Na,Ja+"",Ea,Ga,Ka):void 0;if(La=void 0===Ga){var Pa=Ba(Na),Oa=!Pa&&ua(Na),Qa=!Pa&&!Oa&&Fa(Na);Ga=Na;Pa||Oa||Qa?Ba(Ma)?Ga=Ma:C(Ya=Ma)&&A(Ya)?Ga=function(Wa,$a){var Ta=-1,Xa=Wa.length;
for($a||($a=Array(Xa));++Ta<Xa;)$a[Ta]=Wa[Ta];return $a}(Ma):Oa?(La=!1,Ga=function(Wa,$a){if($a)return Wa.slice();$a=Wa.length;$a=O?O($a):new Wa.constructor($a);return Wa.copy($a),$a}(Na,!0)):Qa?(La=!1,Ra=Na,Sa=(Ua=Ra.buffer,Va=new Ua.constructor(Ua.byteLength),(new T(Va)).set(new T(Ua)),Va),Ga=new Ra.constructor(Sa,Ra.byteOffset,Ra.length)):Ga=[]:function(Wa){if(!C(Wa)||"[object Object]"!=l(Wa))return!1;Wa=Z(Wa);if(null===Wa)return!0;Wa=ca.call(Wa,"constructor")&&Wa.constructor;return"function"==
typeof Wa&&Wa instanceof Wa&&ra.call(Wa)==ta}(Na)||za(Na)?(Ga=Ma,za(Ma)?Ga=function(Wa){var $a=H(Wa),Ta=void 0,Xa=!Ta;Ta||(Ta={});for(var Za=-1,bb=$a.length;++Za<bb;){var db=$a[Za],cb=void 0;void 0===cb&&(cb=Wa[db]);if(Xa)p(Ta,db,cb);else{var gb=Ta,ab=gb[db];ca.call(gb,db)&&F(ab,cb)&&(void 0!==cb||db in gb)||p(gb,db,cb)}}return Ta}(Ma):B(Ma)&&!y(Ma)||(Ga=function(Wa){return"function"!=typeof Wa.constructor||D(Wa)?{}:sa(Z(Wa))}(Na))):La=!1}var Ra,Sa,Ua,Va,Ya;La&&(Ka.set(Na,Ga),Ha(Ga,Na,ya,Ia,Ka),Ka.delete(Na));
m(Ea,Ja,Ga)}(xa,Da,oa,Ca,k,qa,W);else{var wa=qa?qa(G(xa,oa),ba,oa+"",xa,Da,W):void 0;void 0===wa&&(wa=ba);m(xa,oa,wa)}},H)}function r(xa,Da){var Ca;xa=xa.__data__;return("string"==(Ca=typeof Da)||"number"==Ca||"symbol"==Ca||"boolean"==Ca?"__proto__"!==Da:null===Da)?xa["string"==typeof Da?"string":"hash"]:xa.map}function w(xa,Da){xa=null==xa?void 0:xa[Da];if(Da=!(!B(xa)||fa&&fa in xa)){Da=y(xa)?Q:K;var Ca=Da.test;a:if(null!=xa){try{var qa=ra.call(xa);break a}catch(W){}qa=xa+""}else qa="";Da=Ca.call(Da,
qa)}return Da?xa:void 0}function x(xa,Da){var Ca=typeof xa;return!!(Da=null==Da?9007199254740991:Da)&&("number"==Ca||"symbol"!=Ca&&I.test(xa))&&-1<xa&&0==xa%1&&xa<Da}function D(xa){var Da=xa&&xa.constructor;return xa===("function"==typeof Da&&Da.prototype||da)}function G(xa,Da){if(("constructor"!==Da||"function"!=typeof xa[Da])&&"__proto__"!=Da)return xa[Da]}function F(xa,Da){return xa===Da||xa!=xa&&Da!=Da}function A(xa){return null!=xa&&z(xa.length)&&!y(xa)}function y(xa){if(!B(xa))return!1;xa=l(xa);
return"[object Function]"==xa||"[object GeneratorFunction]"==xa||"[object AsyncFunction]"==xa||"[object Proxy]"==xa}function z(xa){return"number"==typeof xa&&-1<xa&&0==xa%1&&9007199254740991>=xa}function B(xa){var Da=typeof xa;return null!=xa&&("object"==Da||"function"==Da)}function C(xa){return null!=xa&&"object"==typeof xa}function H(xa){if(A(xa)){var Da=Ba(xa),Ca=!Da&&za(xa),qa=!Da&&!Ca&&ua(xa),W=!Da&&!Ca&&!qa&&Fa(xa);if(Da=Da||Ca||qa||W){Ca=xa.length;for(var ba=String,oa=-1,wa=Array(Ca);++oa<
Ca;)wa[oa]=ba(oa);Ca=wa}else Ca=[];ba=Ca.length;for(var Ea in xa)Da&&("length"==Ea||qa&&("offset"==Ea||"parent"==Ea)||W&&("buffer"==Ea||"byteLength"==Ea||"byteOffset"==Ea)||x(Ea,ba))||Ca.push(Ea);xa=Ca}else if(B(xa)){Ea=D(xa);W=[];for(qa in xa)("constructor"!=qa||!Ea&&ca.call(xa,qa))&&W.push(qa);xa=W}else{Ea=[];if(null!=xa)for(W in Object(xa))Ea.push(W);xa=Ea}return xa}function E(xa){return xa}var K=/^\[object .+?Constructor\]$/,I=/^(?:0|[1-9]\d*)$/,L={};L["[object Float32Array]"]=L["[object Float64Array]"]=
L["[object Int8Array]"]=L["[object Int16Array]"]=L["[object Int32Array]"]=L["[object Uint8Array]"]=L["[object Uint8ClampedArray]"]=L["[object Uint16Array]"]=L["[object Uint32Array]"]=!0;L["[object Arguments]"]=L["[object Array]"]=L["[object ArrayBuffer]"]=L["[object Boolean]"]=L["[object DataView]"]=L["[object Date]"]=L["[object Error]"]=L["[object Function]"]=L["[object Map]"]=L["[object Number]"]=L["[object Object]"]=L["[object RegExp]"]=L["[object Set]"]=L["[object String]"]=L["[object WeakMap]"]=
!1;var M="object"==typeof b&&b&&b.Object===Object&&b;b="object"==typeof self&&self&&self.Object===Object&&self;b=M||b||Function("return this")();var N=h&&!h.nodeType&&h,P=N&&"object"==typeof a&&a&&!a.nodeType&&a;M=(N=P&&P.exports===N)&&M.process;a:{try{var R=P&&P.require&&P.require("util").types||M&&M.binding&&M.binding("util");break a}catch(xa){}R=void 0}R=R&&R.isTypedArray;var Y,ja,aa;M=Array.prototype;var da=Object.prototype;P=b["__core-js_shared__"];var ra=Function.prototype.toString,ca=da.hasOwnProperty,
fa=(Y=/[^.]+$/.exec(P&&P.keys&&P.keys.IE_PROTO||""))?"Symbol(src)_1."+Y:"",la=da.toString,ta=ra.call(Object),Q=RegExp("^"+ra.call(ca).replace(/[\\^$.*+?()[\]{}|]/g,"\\$\x26").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");Y=N?b.Buffer:void 0;N=b.Symbol;var T=b.Uint8Array,O=Y?Y.allocUnsafe:void 0,Z=(ja=Object.getPrototypeOf,aa=Object,function(xa){return ja(aa(xa))}),na=Object.create,ia=da.propertyIsEnumerable,X=M.splice,ha=N?N.toStringTag:void 0,V=function(){try{var xa=
w(Object,"defineProperty");return xa({},"",{}),xa}catch(Da){}}();Y=Y?Y.isBuffer:void 0;var ea=Math.max,U=Date.now,ka=w(b,"Map"),ma=w(Object,"create"),sa=function(){function xa(){}return function(Da){if(!B(Da))return{};if(na)return na(Da);xa.prototype=Da;Da=new xa;return xa.prototype=void 0,Da}}();q.prototype.clear=function(){this.__data__=ma?ma(null):{};this.size=0};q.prototype.delete=function(xa){xa=this.has(xa)&&delete this.__data__[xa];return this.size-=xa?1:0,xa};q.prototype.get=function(xa){var Da=
this.__data__;return ma?(xa=Da[xa],"__lodash_hash_undefined__"===xa?void 0:xa):ca.call(Da,xa)?Da[xa]:void 0};q.prototype.has=function(xa){var Da=this.__data__;return ma?void 0!==Da[xa]:ca.call(Da,xa)};q.prototype.set=function(xa,Da){var Ca=this.__data__;return this.size+=this.has(xa)?0:1,Ca[xa]=ma&&void 0===Da?"__lodash_hash_undefined__":Da,this};t.prototype.clear=function(){this.__data__=[];this.size=0};t.prototype.delete=function(xa){var Da=this.__data__;xa=v(Da,xa);return!(0>xa)&&(xa==Da.length-
1?Da.pop():X.call(Da,xa,1),--this.size,!0)};t.prototype.get=function(xa){var Da=this.__data__;xa=v(Da,xa);return 0>xa?void 0:Da[xa][1]};t.prototype.has=function(xa){return-1<v(this.__data__,xa)};t.prototype.set=function(xa,Da){var Ca=this.__data__,qa=v(Ca,xa);return 0>qa?(++this.size,Ca.push([xa,Da])):Ca[qa][1]=Da,this};u.prototype.clear=function(){this.size=0;this.__data__={hash:new q,map:new (ka||t),string:new q}};u.prototype.delete=function(xa){xa=r(this,xa).delete(xa);return this.size-=xa?1:0,
xa};u.prototype.get=function(xa){return r(this,xa).get(xa)};u.prototype.has=function(xa){return r(this,xa).has(xa)};u.prototype.set=function(xa,Da){var Ca=r(this,xa),qa=Ca.size;return Ca.set(xa,Da),this.size+=Ca.size==qa?0:1,this};g.prototype.clear=function(){this.__data__=new t;this.size=0};g.prototype.delete=function(xa){var Da=this.__data__;xa=Da.delete(xa);return this.size=Da.size,xa};g.prototype.get=function(xa){return this.__data__.get(xa)};g.prototype.has=function(xa){return this.__data__.has(xa)};
g.prototype.set=function(xa,Da){var Ca=this.__data__;if(Ca instanceof t){var qa=Ca.__data__;if(!ka||199>qa.length)return qa.push([xa,Da]),this.size=++Ca.size,this;Ca=this.__data__=new u(qa)}return Ca.set(xa,Da),this.size=Ca.size,this};var pa=function(xa,Da,Ca){var qa=-1,W=Object(xa);Ca=Ca(xa);for(var ba=Ca.length;ba--;){var oa=Ca[++qa];if(!1===Da(W[oa],oa,W))break}return xa},Aa=function(xa){var Da=0,Ca=0;return function(){var qa=U(),W=16-(qa-Ca);if(Ca=qa,0<W){if(800<=++Da)return arguments[0]}else Da=
0;return xa.apply(void 0,arguments)}}(V?function(xa,Da){return V(xa,"toString",{configurable:!0,enumerable:!1,value:(Ca=Da,function(){return Ca}),writable:!0});var Ca}:E),za=n(function(){return arguments}())?n:function(xa){return C(xa)&&ca.call(xa,"callee")&&!ia.call(xa,"callee")},Ba=Array.isArray,ua=Y||function(){return!1},Fa=R?function(xa){return function(Da){return xa(Da)}}(R):function(xa){return C(xa)&&z(xa.length)&&!!L[l(xa)]},va;b=(va=function(xa,Da,Ca,qa){k(xa,Da,Ca,qa)},function(xa,Da){return Aa(function(Ca,
qa,W){return qa=ea(void 0===qa?Ca.length-1:qa,0),function(){for(var ba=arguments,oa=-1,wa=ea(ba.length-qa,0),Ea=Array(wa);++oa<wa;)Ea[oa]=ba[qa+oa];oa=-1;for(wa=Array(qa+1);++oa<qa;)wa[oa]=ba[oa];return wa[qa]=W(Ea),e(Ca,this,wa)}}(xa,Da,E),xa+"")}(function(xa,Da){var Ca=-1,qa=Da.length,W=1<qa?Da[qa-1]:void 0,ba=2<qa?Da[2]:void 0;W=3<va.length&&"function"==typeof W?(qa--,W):void 0;var oa;if(oa=ba){oa=Da[0];var wa=Da[1];if(B(ba)){var Ea=typeof wa;oa=!!("number"==Ea?A(ba)&&x(wa,ba.length):"string"==
Ea&&wa in ba)&&F(ba[wa],oa)}else oa=!1}oa&&(W=3>qa?void 0:W,qa=1);for(xa=Object(xa);++Ca<qa;)(ba=Da[Ca])&&va(xa,ba,Ca,W);return xa}));a.exports=b}).call(this,d(165),d(352)(c))},40:function(c,h){c.exports=J},41:function(c,h,d){d.d(h,"b",function(){return b});d.d(h,"d",function(){return e});d.d(h,"c",function(){return q});d.d(h,"a",function(){return t});d.d(h,"f",function(){return m});var b,a,e,q,t,u=d(1),g=d(27);!function(v){v.openData="openData";v.updateGroups="updateGroups";v.distributed="distributed";
v.administrative="administrative";v.orgSettings="orgSettings"}(b||(b={}));(a||(a={})).owner="owner";(function(v){v.itemOwner="itemOwner";v.inOrg="inOrg";v.outsideOrg="outsideOrg"})(e||(e={}));(function(v){v.myOrg="org";v.partnered="collaboration";v.anyOrg="anyOrg"})(q||(q={}));(function(v){v.USER="USER";v.OWNER="OWNER";v.DESIGNATION="DESIGNATION";v.DATE_CREATED="DATE_CREATED";v.MEMBERSHIP="MEMBERSHIP"})(t||(t={}));var m={currentUsername:"",allUsers:{},searchString:"",availableFilters:[]};h.e=function(v,
p){switch(void 0===v&&(v=m),p.type){case g.a.CLEAR_FILTERS:switch(p.payload){case t.DESIGNATION:return Object(u.a)(Object(u.a)({},v),{designationFilter:void 0});case t.DATE_CREATED:return Object(u.a)(Object(u.a)({},v),{dateCreatedFilter:void 0});case t.OWNER:return Object(u.a)(Object(u.a)({},v),{ownerFilter:void 0});case t.USER:return v;case t.MEMBERSHIP:return Object(u.a)(Object(u.a)({},v),{membershipFilter:void 0});default:return Object(u.a)(Object(u.a)({},v),{designationFilter:void 0,dateCreatedFilter:void 0,
membershipFilter:void 0,ownerFilter:void 0})}case g.a.UPDATE_OWNER_FILTER:return Object(u.a)(Object(u.a)({},v),{ownerFilter:p.payload===v.ownerFilter?void 0:p.payload});case g.a.UPDATE_USERNAME_FILTER:return Object(u.a)(Object(u.a)({},v),{currentUsername:p.payload});case g.a.UPDATE_CREATED_ON_FILTER:return Object(u.a)(Object(u.a)({},v),{dateCreatedFilter:p.payload.created});case g.a.UPDATE_GROUP_DESIGNATION_FILTER:return Object(u.a)(Object(u.a)({},v),{designationFilter:p.payload===v.designationFilter?
void 0:p.payload});case g.a.UPDATE_MEMBERSHIP_FILTER:return Object(u.a)(Object(u.a)({},v),{membershipFilter:p.payload===v.membershipFilter?void 0:p.payload});case g.a.SET_USERS:return Object(u.a)(Object(u.a)({},v),{allUsers:p.payload.reduce(function(l,n){var k;return Object(u.a)(Object(u.a)({},l),((k={})[n.username]=n,k))},{})});case g.a.SET_SEARCH_STRING:return Object(u.a)(Object(u.a)({},v),{searchString:p.payload});default:return v}}},47:function(c,h,d){function b(y){return!(!y.urlKey||!y.customBaseUrl)||
y.isPortal}function a(y){return y.role===k.admin||y.role===k.accountAdmin}function e(y){return Object(x.a)(y.roleId)&&0<(y.roleId||"").length}function q(y){return"Developer Subscription"===y}function t(y){return!e(y)||e(y)&&-1<(y.privileges||[]).indexOf("portal:admin:viewItems")}function u(y){return-1<(y.privileges||[]).indexOf("portal:user:shareToOrg")}function g(y){return-1<(y.privileges||[]).indexOf("portal:user:shareToGroup")}function m(y){return-1<(y.privileges||[]).indexOf("portal:user:shareToPublic")}
function v(y,z){return p(y)||l(y)||n(y)}function p(y){return-1<(y.privileges||[]).indexOf("portal:admin:shareToGroup")}function l(y){return-1<(y.privileges||[]).indexOf("portal:admin:shareToOrg")}function n(y){return-1<(y.privileges||[]).indexOf("portal:admin:shareToPublic")}d.d(h,"m",function(){return G});d.d(h,"h",function(){return F});d.d(h,"n",function(){return A});d.d(h,"l",function(){return b});d.d(h,"i",function(){return a});d.d(h,"j",function(){return e});d.d(h,"k",function(){return q});d.d(h,
"g",function(){return t});d.d(h,"b",function(){return u});d.d(h,"a",function(){return g});d.d(h,"c",function(){return m});d.d(h,"d",function(){return p});d.d(h,"e",function(){return l});d.d(h,"f",function(){return n});var k,r=d(64),w=d(142),x=d(7),D=d(61);!function(y){y.user="org_user";y.accountUser="account_user";y.publisher="org_publisher";y.accountPublisher="account_publisher";y.admin="org_admin";y.accountAdmin="account_admin";y.viewer="iAAAAAAAAAAAAAAA";y.dataEditor="iBBBBBBBBBBBBBBB"}(k||(k=
{}));var G=function(y){var z=y.items;return!!y.user.orgId&&z.every(function(B){return B.isOrgItem})},F=function(y){var z=y.items,B=y.user,C=y.portal;y=z[0];var H=Object(D.c)(y,B),E=e(B),K=v(B,C);if(E=Object(D.a)(y,B)&&-1<(B.privileges||[]).indexOf("portal:admin:updateItems")&&!E)E=!b(C)||g(B)||u(B)||C.canSharePublic&&m(B)||v(B,C);C=E;E=y.owner;return!(y.portal.isPortal&&E!==B.username&&E.includes("esri_")&&!["esri_livingatlas"].includes(E))&&(H||C||G({items:z,user:B})&&K)},A=function(y,z){return Object(r.a)(Object(w.a)(y))(z)}},
59:function(c,h,d){d.d(h,"b",function(){return q});d.d(h,"a",function(){return t});d.d(h,"c",function(){return u});c=d(17);h=d(213);var b=d(206),a=d(133),e=d(208);d=d(205);var q=function(g){return!g.gbState},t={config:d.b,parameters:b.b,groups:a.f,ui:e.b,utils:h.b},u=Object(c.combineReducers)({config:d.a,parameters:b.a,groups:a.b,ui:e.a,utils:h.a})},61:function(c,h,d){function b(g,m){return(null==g?void 0:g.owner)===m.username}function a(g,m){var v;if(!(v=b(g,m)))if(Object(q.a)(g.isAdmin))v=!!g.isAdmin;
else{v=g.owner;var p="admin"===g.itemControl;v=!(g.portal.isPortal&&!b(g,m)&&p&&-1<v.indexOf("esri_")&&0>["esri_livingatlas","esri_demographics","esri_boundaries"].indexOf(v))&&p}return v}function e(g,m){return a(g,m)||"update"===g.itemControl}d.d(h,"d",function(){return b});d.d(h,"c",function(){return a});d.d(h,"a",function(){return e});d.d(h,"b",function(){return u});var q=d(7),t=d(47),u=function(g){var m=g.user,v=g.items;g=g.portal;return Object(t.m)({items:v,user:m})&&Object(t.h)({items:v,user:m,
portal:g})&&Object(t.g)(m)&&v[0].itemOwner||m}},62:function(c,h,d){function b(A){var y=A.groupIds,z=A.shareLevelOptions,B=A.restUrl,C=A.request,H=A.unshare;return u.Promise.all(A.items.map(function(E,K){return new u.Promise(function(I,L){C("".concat(B,"/content/items/").concat(E.itemId||E.id,"/").concat(H?"unshare":"share"),{method:"post",query:Object(q.a)({f:"json",groups:y,confirmItemControl:!0},z||{})}).then(I,L)})})).catch(function(E){throw E;})}function a(A,y){return new u.Promise(function(z,
B){var C,H=null===(C=A.helpMap)||void 0===C?void 0:C.m;H?z(H):y("".concat(A.restUrl,"/portals/helpmap"),{query:{f:"json",format:"json"}}).then(function(E){var K;z(null===(K=E.data.helpMap)||void 0===K?void 0:K.m)},B)})}d.d(h,"i",function(){return m});d.d(h,"h",function(){return v});d.d(h,"b",function(){return p});d.d(h,"e",function(){return l});d.d(h,"d",function(){return n});d.d(h,"g",function(){return D});d.d(h,"f",function(){return G});d.d(h,"c",function(){return F});d.d(h,"a",function(){return a});
var e,q=d(1),t=d(33),u=d(28);c=d(25);var g=d(61),m=function(A){var y=A.items,z=A.groups,B=A.restUrl,C=A.request,H=A.portalUser;if(0===y.length)return u.Promise.resolve();var E=Object(t.b)(z);return y.every(function(K){return Object(g.d)(K,H)})?new u.Promise(function(K,I){if(!z||0===z.length)return K();var L={f:"json",items:Object(t.b)(y),groups:E};C("".concat(B,"/content/users/").concat(H.username,"/unshareItems"),{method:"post",query:L}).then(K,I)}):b({items:y,groupIds:E,restUrl:B,request:C,unshare:!0})},
v=function(A){var y=A.items,z=A.groups,B=A.restUrl,C=A.request,H=A.portalUser,E=A.selectedOptions;A=A.ignoreShareLevel;if(0===y.length)return u.Promise.resolve();if(!A&&!E)throw"Selected options must be provided unless share level is ignored.";var K=Object(t.b)(z),I=A?{}:k(E);return y.every(function(L){return Object(g.d)(L,H)})?new u.Promise(function(L,M){C("".concat(B,"/content/users/").concat(H.username,"/shareItems"),{method:"post",query:Object(q.a)({f:"json",items:Object(t.b)(y),groups:K,confirmItemControl:!0},
I)}).then(function(N){N=N.data;N.results.every(function(P){return P.success})?L():M(N)},M)}):b({items:y,groupIds:K,shareLevelOptions:I,restUrl:B,request:C})},p=function(A){return A.reduce(function(y,z){return Object(q.g)(Object(q.g)([],y,!0),z,!0)},[])},l=function(A){return 1<Object.keys(A).filter(function(y){return"total"!==y&&0<A[y]}).length},n=function(A){return Object.keys(A).filter(function(y){return"total"!==y}).reduce(function(y,z){return A[z]===A.total?z:y})},k=function(A){return l(A)?{}:
r[n(A)]},r=((e={})[c.b.public]={org:!1,everyone:!0},e[c.b.org]={org:!0,everyone:!1},e[c.b.private]={org:!1,everyone:!1},e[c.b.shared]={org:!1,everyone:!1},e),w="Location Tracking Service;Location Tracking View;IoTFeed;IoTRealTimeAnalytic;IoTBigDataAnalytic;IoTFeatureLayer;IoTMapImageLayer;IoTStreamLayer;Administrative Report;EditExtensionIndoorsSpaces;ArcgisWorkflowJobLocation".split(";"),x=["Knowledge Graph","Pro Project"],D=function(A){var y,z,B=A.typeKeywords,C=A.type;C=w.some(function(E){return-1<
B.indexOf(E)})&&"Real Time Analytic"!==C&&"Big Data Analytic"!==C;var H=!(null===(y=null==A?void 0:A.portal)||void 0===y?0:y.isPortal)&&"Image Service"===A.type&&-1<(null===(z=A.url)||void 0===z?void 0:z.indexOf("://iservices"))&&-1<A.url.indexOf("arcgis.com");A=x.includes(A.type);return C||H||A},G=function(A){var y,z=null===(y=A.typeKeywords)||void 0===y?void 0:y.includes("Hosted Service");return["Vector Tile Service","Map Service","Scene Service","Feature Service"].includes(A.type)&&z},F=function(A,
y,z){return z&&y.public===y.total?A.filter(function(B){return-1<B.typeKeywords.indexOf("DeveloperBasemap")}):[]}},64:function(c,h,d){function b(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];return function(q){return a.reduceRight(function(t,u){return u(t)},q)}}d.d(h,"a",function(){return b})},69:function(c,h,d){var b;d.d(h,"a",function(){return b});(function(a){a.LOADING_GROUPS="LOADING_GROUPS";a.LOAD_GROUPS_SUCCESS="LOAD_GROUPS_SUCCESS";a.LOAD_GROUPS_FAIL="LOAD_GROUPS_FAIL";a.SELECT_GROUPS=
"SELECT_GROUPS";a.SET_INITIAL_GROUPS="SET_INITIAL_GROUPS";a.DESELECT_GROUPS="DESELECT_GROUPS";a.REVERT_GROUPS="REVERT_GROUPS";a.CLEAR_SELECTION="CLEAR_SELECTION";a.SET_SELECTOR_ITEMS="SET_SELECTOR_ITEMS";a.SET_HAS_GROUPS="SET_HAS_GROUPS"})(b||(b={}))},7:function(c,h,d){function b(v){return 0===Object.keys(v).length&&v.constructor===Object}function a(v){return null!=v}function e(v,p){return g.apply(null,arguments)}function q(v,p){return m.apply(null,arguments)}d.d(h,"b",function(){return b});d.d(h,
"a",function(){return a});d.d(h,"e",function(){return u});d.d(h,"c",function(){return e});d.d(h,"d",function(){return q});var t=d(1);c=d(15);var u=Object(c.a)(function(v,p){p=Object(t.a)({},p);return delete p[v],p}),g=Object(c.a)(function(v,p){return Object.keys(p).reduce(function(l,n){return l[n]=v(p[n],n,p),l},{})}),m=Object(c.a)(function(v,p){return Object.keys(p).reduce(function(l,n){return v(p[n],n,p)&&(l[n]=p[n]),l},{})})},80:function(c,h,d){d.d(h,"a",function(){return g});d.d(h,"b",function(){return m});
var b=d(64);c=d(7);var a=d(120),e=d(119),q=d(114),t=d(118),u=d(117),g=function(v,p,l){return Object(b.a)(Object(u.a)(v),Object(t.a)(v),Object(q.a)(p),Object(e.a)(v),Object(a.a)(v))(l)},m=Object(b.a)(Object(c.e)("patchedDescription"),Object(c.e)("thumbURI"),Object(c.e)("iconURI"),Object(c.e)("displayName"),Object(c.e)("badges"))},86:function(c,h,d){var b;d.d(h,"a",function(){return b});(function(a){a.SET_SEARCH_STRING="SET_SEARCH_STRING";a.CHANGE_SORT_ORDER="CHANGE_SORT_ORDER";a.CHANGE_SORT_FIELD=
"CHANGE_SORT_FIELD";a.UPDATE_USERNAME_FILTER="UPDATE_USERNAME_FILTER";a.UPDATE_OWNER_FILTER="UPDATE_OWNER_FILTER";a.UPDATE_GROUP_DESIGNATION_FILTER="UPDATE_GROUP_DESIGNATION_FILTER";a.UPDATE_CREATED_ON_FILTER="UPDATE_CREATED_ON_FILTER";a.UPDATE_MEMBERSHIP_FILTER="UPDATE_MEMBERSHIP_ON_FILTER";a.SET_USERS="SET_USERS";a.CLEAR_FILTERS="CLEAR_FILTERS"})(b||(b={}))},948:function(c,h,d){d.r(h);d.d(h,"ShareWrapper",function(){return p});var b=d(1),a=d(339),e=d.n(a),q=d(17),t=d(33);c=d(372);var u=d.n(c);c=
d(319);var g=d.n(c),m=d(135),v=d(62);d.d(h,"unshareItems",function(){return v.i});d.d(h,"shareItems",function(){return v.h});d.d(h,"getShimmedRequest",function(){return t.u});d.d(h,"initialState",function(){return a.initialState});var p=function(){function l(n,k){this.options=k;this.listener=this.listener.bind(this);this.renderContainer=document.createElement("div");this.renderContainer.id="share-wrapper";n.appendChild(this.renderContainer);n=g()(a.initialState);var r=g()(k.initialState);n=u()(n,
r,function(G,F){if(Array.isArray(G)&&F)return F});r=k.initialState&&k.initialState.resources&&k.initialState.resources.items;var w=4===k.apiVersion?k.request:Object(t.u)(k.request),x=4===k.apiVersion?k.portal:Object(b.a)(Object(b.a)({},k.portal),{restUrl:k.portal.portalUrl.slice(0,-1),credential:k.portal.user&&k.portal.user.credential?k.portal.user.credential:void 0}),D=4===k.apiVersion?window.require.toUrl("esri/images/portal"):window.require.toUrl("esri/css/images/item_type_icons");this.initialState=
Object(b.a)(Object(b.a)({},n),{resources:Object(b.a)(Object(b.a)({},n.resources),{portalUser:k.portalUser,items:r}),utilities:Object(b.a)(Object(b.a)({},n.utilities),{request:w,portal:x,iconDir:D}),gbState:Object(b.a)(Object(b.a)({},n.gbState),{utils:Object(b.a)(Object(b.a)({},n.gbState.utils),{request:w,portal:x,portalUser:k.portalUser}),config:Object(b.a)(Object(b.a)({},n.gbState.config),{groupsPerPage:n.config.groupsPerPage,withinShare:!0,enableFiltering:!0,hasTrustedOrgs:n.config.hasTrustedOrgs})})});
this.store=Object(q.applyMiddleware)(q.thunk,Object(q.addListener)(this.listener))(q.createStore)(a.reducers,this.initialState);this.dispatch(Object(m.g)());this.projector=Object(q.createProjector)(this.store,function(G){return G(e.a,{key:"share"})},this.renderContainer)}return l.prototype.remove=function(){document&&document.documentElement&&document.documentElement.classList.remove("overflow-hidden");this.renderContainer&&this.renderContainer.parentElement&&this.renderContainer.parentElement.removeChild(this.renderContainer)},
l.prototype.dispatch=function(n){this.store&&this.store.dispatch(n)},l.prototype.getState=function(){return this.store?this.store.getState():this.initialState},l.prototype.listener=function(n,k){this.options.listener&&this.options.listener(n,k)},l}()},97:function(c,h,d){function b(g,m){if(null==g?0:g.length)for(var v=void 0,p=0;p<g.length;p++)if(m(v=g[p]))return v}function a(g){return g.filter(function(m){return 0<m.length})}function e(g,m,v){var p=[];return m.forEach(function(l){(v?l[v].toLowerCase()===
g.toLowerCase():l.toLowerCase()===g.toLowerCase())?p.unshift(l):p.push(l)}),p}d.d(h,"e",function(){return q});d.d(h,"f",function(){return t});d.d(h,"c",function(){return b});d.d(h,"b",function(){return a});d.d(h,"a",function(){return u});d.d(h,"d",function(){return e});c=d(15);var q=function(g,m,v){return v.indexOf(g)===m},t=Object(c.a)(function(g,m){var v={};return m.filter(function(p){return!v[p[g]]&&(v[p[g]]=!0,!0)})}),u=function(g,m){return g.length===m.length&&g.reduce(function(v,p){return v&&
-1<m.indexOf(p)},!0)}},99:function(c,h,d){d.d(h,"a",function(){return a});d.d(h,"b",function(){return e});var b=d(1),a=function(q){return q?q.urlKey?"".concat(location.protocol,"//").concat(q.urlKey,".").concat(q.customBaseUrl):"".concat(location.protocol,"//").concat(q.portalHostname):""},e=function(q){return Object(b.a)(Object(b.a)({},q),{baseUrl:a(q)})}}})})},"arcgis-components/Share/index":function(){define("../Component dojo/i18n!../ItemBrowser/nls/resources dojo/i18n!../Share/nls/resources ../Loaders/LoaderBars ../GroupBrowser/index ../Modals/Overlay".split(" "),
function(S,J,f,c,h,d){return function(b){function a(q){if(e[q])return e[q].exports;var t=e[q]={i:q,l:!1,exports:{}};return b[q].call(t.exports,t,t.exports,a),t.l=!0,t.exports}var e={};return a.m=b,a.c=e,a.d=function(q,t,u){a.o(q,t)||Object.defineProperty(q,t,{enumerable:!0,get:u})},a.r=function(q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(q,Symbol.toStringTag,{value:"Module"});Object.defineProperty(q,"__esModule",{value:!0})},a.t=function(q,t){if((1&t&&(q=a(q)),8&t)||4&
t&&"object"==typeof q&&q&&q.__esModule)return q;var u=Object.create(null);if(a.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:q}),2&t&&"string"!=typeof q)for(var g in q)a.d(u,g,function(m){return q[m]}.bind(null,g));return u},a.n=function(q){var t=q&&q.__esModule?function(){return q.default}:function(){return q};return a.d(t,"a",t),t},a.o=function(q,t){return Object.prototype.hasOwnProperty.call(q,t)},a.p="",a(a.s=840)}({1:function(b,a,e){function q(n,k){function r(){this.constructor=
n}if("function"!=typeof k&&null!==k)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");p(n,k);n.prototype=null===k?Object.create(k):(r.prototype=k.prototype,new r)}function t(n,k){var r={},w;for(w in n)Object.prototype.hasOwnProperty.call(n,w)&&0>k.indexOf(w)&&(r[w]=n[w]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var x=0;for(w=Object.getOwnPropertySymbols(n);x<w.length;x++)0>k.indexOf(w[x])&&Object.prototype.propertyIsEnumerable.call(n,w[x])&&
(r[w[x]]=n[w[x]])}return r}function u(n,k,r,w){var x,D=arguments.length,G=3>D?k:null===w?w=Object.getOwnPropertyDescriptor(k,r):w;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)G=Reflect.decorate(n,k,r,w);else for(var F=n.length-1;0<=F;F--)(x=n[F])&&(G=(3>D?x(G):3<D?x(k,r,G):x(k,r))||G);return 3<D&&G&&Object.defineProperty(k,r,G),G}function g(n,k,r,w){return new (r||(r=Promise))(function(x,D){function G(y){try{A(w.next(y))}catch(z){D(z)}}function F(y){try{A(w.throw(y))}catch(z){D(z)}}
function A(y){var z;y.done?x(y.value):(z=y.value,z instanceof r?z:new r(function(B){B(z)})).then(G,F)}A((w=w.apply(n,k||[])).next())})}function m(n,k){function r(A){return function(y){return function(z){if(w)throw new TypeError("Generator is already executing.");for(;G&&(G=0,z[0]&&(F=0)),F;)try{if(w=1,x&&(D=2&z[0]?x.return:z[0]?x.throw||((D=x.return)&&D.call(x),0):x.next)&&!(D=D.call(x,z[1])).done)return D;switch(x=0,D&&(z=[2&z[0],D.value]),z[0]){case 0:case 1:D=z;break;case 4:return F.label++,{value:z[1],
done:!1};case 5:F.label++;x=z[1];z=[0];continue;case 7:z=F.ops.pop();F.trys.pop();continue;default:if(!(D=F.trys,(D=0<D.length&&D[D.length-1])||6!==z[0]&&2!==z[0])){F=0;continue}if(3===z[0]&&(!D||z[1]>D[0]&&z[1]<D[3]))F.label=z[1];else if(6===z[0]&&F.label<D[1])F.label=D[1],D=z;else if(D&&F.label<D[2])F.label=D[2],F.ops.push(z);else{D[2]&&F.ops.pop();F.trys.pop();continue}}z=k.call(n,F)}catch(B){z=[6,B],x=0}finally{w=D=0}if(5&z[0])throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}([A,y])}}var w,x,
D,G,F={label:0,sent:function(){if(1&D[0])throw D[1];return D[1]},trys:[],ops:[]};return G={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(G[Symbol.iterator]=function(){return this}),G}function v(n,k,r){if(r||2===arguments.length)for(var w,x=0,D=k.length;x<D;x++)!w&&x in k||(w||(w=Array.prototype.slice.call(k,0,x)),w[x]=k[x]);return n.concat(w||Array.prototype.slice.call(k))}e.d(a,"d",function(){return q});e.d(a,"a",function(){return l});e.d(a,"f",function(){return t});e.d(a,"c",function(){return u});
e.d(a,"b",function(){return g});e.d(a,"e",function(){return m});e.d(a,"g",function(){return v});var p=function(n,k){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,w){r.__proto__=w}||function(r,w){for(var x in w)Object.prototype.hasOwnProperty.call(w,x)&&(r[x]=w[x])})(n,k)},l=function(){return(l=Object.assign||function(n){for(var k,r=1,w=arguments.length;r<w;r++)for(var x in k=arguments[r])Object.prototype.hasOwnProperty.call(k,x)&&(n[x]=k[x]);return n}).apply(this,arguments)};
Object.create;Object.create},114:function(b,a,e){e.d(a,"a",function(){return t});var q=e(1);b=e(15);var t=Object(b.a)(function(u,g){var m=Object(q.a),v=Object(q.a)({},g),p=g.type;g=g.typeKeywords?g.typeKeywords:[];var l=null==p?void 0:p.toLowerCase(),n=p=!1,k=!1,r=!1;if("ogcfeatureserver"===l)g="featureshosted";else if(0<(null==l?void 0:l.indexOf("service"))||"feature collection"===l||"kml"===l||"wms"===l||"wmts"===l||"wfs"===l){var w=-1<g.indexOf("Hosted Service");"feature service"===l||"feature collection"===
l||"kml"===l||"wfs"===l?(r=-1<g.indexOf("Table"),p=-1<g.indexOf("Route Layer"),n=-1<g.indexOf("Markup"),g=(k=-1!==g.indexOf("Spatiotemporal"))&&r?"spatiotemporaltable":r?"table":p?"routelayer":n?"markup":k?"spatiotemporal":w?"featureshosted":"features"):"map service"===l||"wms"===l||"wmts"===l?g=w||-1<g.indexOf("Tiled")||"wmts"===l?"maptiles":"mapimages":"scene service"===l?g=-1<g.indexOf("Line")?"sceneweblayerline":-1<g.indexOf("3DObject")?"sceneweblayermultipatch":-1<g.indexOf("Point")?"sceneweblayerpoint":
-1<g.indexOf("IntegratedMesh")?"sceneweblayermesh":-1<g.indexOf("PointCloud")?"sceneweblayerpointcloud":-1<g.indexOf("Polygon")?"sceneweblayerpolygon":-1<g.indexOf("Building")?"sceneweblayerbuilding":-1<g.indexOf("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===l?(p=-1<g.indexOf("Elevation 3D Layer"),g=-1<g.indexOf("Tiled Imagery"),g=p?"elevationlayer":g?"tiledimagerylayer":"imagery"):g="stream service"===l?"streamlayer":"vector tile service"===l?"vectortile":"datastore catalog service"===
l?"datastorecollection":"geocoding service"===l?"geocodeservice":"geoprocessing service"===l&&-1<g.indexOf("Web Tool")?"tool":"layers"}else g="web map"===l||"cityengine web scene"===l?"maps":"web scene"===l?-1<g.indexOf("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===l&&-1<(null==g?void 0:g.indexOf("configurableApp"))?"instantapps":"web mapping application"===l||"mobile application"===l||"application"===l||"operation view"===l||"desktop application"===l?"apps":"map document"===
l||"map package"===l||"published map"===l||"scene document"===l||"globe document"===l||"basemap package"===l||"mobile basemap package"===l||"mobile map package"===l||"project package"===l||"project template"===l||"pro map"===l||"layout"===l||"layer"===l&&-1<g.indexOf("ArcGIS Pro")||"explorer map"===l&&-1<g.indexOf("Explorer Document")?"mapsgray":"service definition"===l||"csv"===l||"administrative report"===l||"shapefile"===l||"cad drawing"===l||"geojson"===l||"360 vr experience"===l||"netcdf"===
l?"datafiles":"explorer add in"===l||"desktop add in"===l||"windows viewer add in"===l||"windows viewer configuration"===l?"appsgray":"arcgis pro add in"===l||"arcgis pro configuration"===l?"addindesktop":"rule package"===l||"file geodatabase"===l||"csv collection"===l||"kml collection"===l||"windows mobile package"===l||"map template"===l||"desktop application template"===l||"arcpad package"===l||"code sample"===l||"form"===l||"document link"===l||"vector tile package"===l||"operations dashboard add in"===
l||"rules package"===l||"image"===l||"workflow manager package"===l||"explorer map"===l&&-1<g.indexOf("Explorer Mapping Application")||-1<g.indexOf("Document")?"datafilesgray":"network analysis service"===l||"geoprocessing service"===l||"geodata service"===l||"geometry service"===l||"geoprocessing package"===l||"locator package"===l||"geoprocessing sample"===l||"workflow manager service"===l||"raster function template"===l||"deep learning package"===l?"toolsgray":"layer"===l||"layer package"===l||
"explorer layer"===l?"layersgray":"scene package"===l?"scenepackage":"tile package"===l?"tilepackage":"storymap"===l?"storymap":"storymap theme"===l?"storymaptheme":"web experience"===l?"experiencebuilder":"web experience template"===l?"webexperiencetemplate":"task file"===l?"taskfile":"report template"===l?"report-template":"statistical data collection"===l?"statisticaldatacollection":"insights workbook"===l?"workbook":"insights model"===l?"insightsmodel":"insights page"===l?"insightspage":"hub initiative"===
l?"hubinitiative":"hub page"===l?"hubpage":"hub site application"===l?"hubsite":"relational database connection"===l?"relationaldatabaseconnection":"big data file share"===l||"data store"===l?"datastorecollection":"image collection"===l?"imagecollection":"desktop style"===l?"desktopstyle":"style"===l?"style":"dashboard"===l?"dashboard":"feed"===l?"feed":"real time analytic"===l?"realtimeanalytics":"big data analytic"===l?"bigdataanalytics":"notebook"===l?"notebook":"notebook code snippets"===l||"notebook code snippet library"===
l?"notebookcodesnippets":"maps";u="".concat(u,"/").concat(g).concat(16,".png");return m(v,{iconURI:u})})},117:function(b,a,e){e.d(a,"a",function(){return t});var q=e(1);b=e(15);var t=Object(b.a)(function(u,g){var m=Object(q.a),v=Object(q.a)({},g),p,l,n,k="notebook"!==(null===(p=g.type)||void 0===p?void 0:p.toLowerCase())?"default_thumb.png":"notebook-thumb.png";"notebook code snippets"!==(null===(l=g.type)||void 0===l?void 0:l.toLowerCase())&&"notebook code snippet library"!==(null===(n=g.type)||
void 0===n?void 0:n.toLowerCase())||(k="notebook-code-snippet-thumb.png");p="".concat(u.baseUrl,"/home/js/arcgisonline/css/images/").concat(k);u=(g.thumbnail&&(p="".concat(u.restUrl,"/content/items/").concat(g.id,"/info/").concat(g.thumbnail).concat(u.credential?"?token\x3d".concat(u.credential.token):"")),p);return m(v,{thumbURI:u})})},118:function(b,a,e){e.d(a,"a",function(){return u});var q=e(1);b=e(15);var t=function(g,m){return m.description?m.description.replace(/src=('|")js\/jsapi\/esri\//g,
function(v){return"src\x3d".concat('"'===v[4]?'"':"'").concat(g.baseUrl,"/home/js/jsapi/esri/")}):void 0},u=Object(b.a)(function(g,m){return Object(q.a)(Object(q.a)({},m),{patchedDescription:t(g,m)})})},119:function(b,a,e){e.d(a,"a",function(){return g});var q=e(1),t=e(121);b=e(15);var u=e(61),g=Object(b.a)(function(m,v){var p=Object(q.a),l=Object(q.a)({},v),n,k=v.type,r=v.typeKeywords||[],w=k;m=(null==m?void 0:m.portalUser)||(null==m?void 0:m.user);if("Feature Service"===k||"Feature Collection"===
k){if(w=-1<r.indexOf("Table")?"Table":-1<r.indexOf("Route Layer")?"Route Layer":-1<r.indexOf("Markup")?"Markup":"Feature Layer",m&&Object(u.d)(v,m)&&-1<(null==r?void 0:r.indexOf("Hosted Service")))r=(null===(n=null===document||void 0===document?void 0:document.documentElement)||void 0===n?void 0:n.lang)||"en",n=t.a[r]||t.a[r.split("-")[0]]||t.a.en,w="".concat(w," (").concat(n,")")}else"Image Service"===k?(w=-1<r.indexOf("Elevation 3D Layer"),n=-1<r.indexOf("Tiled Imagery"),w=w?"Elevation Layer":n?
"Tiled Imagery Layer":"Imagery Layer"):"Scene Service"===k?w="Scene Layer":"Scene Package"===k?w="Scene Layer Package":"Stream Service"===k?w="Feature Layer":"Geocoding Service"===k?w="Locator":"Microsoft Powerpoint"===k?w="Microsoft PowerPoint":"OGCFeatureServer"===k?w="OGC Feature Layer":"GeoJson"===k?w="GeoJSON":"Globe Service"===k?w="Globe Layer":"Vector Tile Service"===k?w="Tile Layer":"netCDF"===k?w="NetCDF":"Map Service"===k?w=-1===r.indexOf("Spatiotemporal")&&(-1<r.indexOf("Hosted Service")||
-1<r.indexOf("Tiled"))?"Tile Layer":"Map Image Layer":k&&-1<k.toLowerCase().indexOf("add in")?w=k.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===k?w="Big Data File Share":"Web Mapping Application"===k&&(null==r?0:r.includes("configurableApp"))?w="Instant App":"Data Store"===k&&(r.includes("cloudStore_amazon")||r.includes("cloudStore_azure")?w+=" (Cloud)":(r.includes("fileShare")||r.includes("hdfs")||r.includes("hive")||r.includes("bigDataFileShare")&&r.includes("dataStore"))&&(w+=" (Big Data File Share)"));
return p(l,{displayName:w})})},120:function(b,a,e){e.d(a,"a",function(){return u});var q=e(1);b=e(15);var t=function(g,m){var v,p,l=[],n=null!==(p=null!==(v=g.typeKeywords)&&void 0!==v?v:g.typekeywords)&&void 0!==p?p:[];return g.contentStatus&&("org_authoritative"===g.contentStatus||"public_authoritative"===g.contentStatus?l.push("authoritative"):"deprecated"===g.contentStatus&&l.push("deprecated")),g.origin&&l.push("collaboration"),g.groupDesignations&&-1<g.groupDesignations.indexOf("livingatlas")&&
l.push("livingAtlas"),-1<n.indexOf("Requires Credits")?l.push("premium"):-1<n.indexOf("Requires Subscription")&&l.push("subscriber"),-1<n.indexOf("Public Data Collection")&&((null==m?void 0:m.portalUser)||(null==m?void 0:m.user))&&l.push("publicDataCollection"),"Solution"===g.type&&-1<n.indexOf("ArcGIS Solution")&&l.push("solution"),m.isPortal&&"Web Mapping Application"===g.type&&(-1<n.indexOf("Story Map")&&l.push("retiredStoryMap"),function(k){return"3DInsetMap 3DScene 3DViz AttachmentViewer CapacityAnalysis Compare/storytelling_compare Compare/storytelling_tabbed Compare/storytelling_sidepanel Compare/Multiviewer Compare/Search Compare/Configure Compare/SideBySideViewer_Configure Compare3d CompareAnalysis CompareMaps Directions Edit Editor Elevations ElevationsProfile Embed Filter FilterGallery GeoList GeoTour HeaderFooter Identify ImageInterpretation ImageryViewer ImpactSummary InformationLookup InteractiveFilter InteractiveLegend LayerShowcase Legend LiveMaps LocalPerspective MapAndAppGallery MapCarousel MapTools Media MinimalGallery Minimalist Nearby OnePane Panels PanelsLegend Profile PublicGallery PublicInformation ServiceLookup SimpleMapViewer SimpleViewer SocialMedia Solutions/s2.html?app\x3dapps2/FindEditFilter Solutions/s2.html?app\x3dapps2/Finder StorytellingTextLegend StoryMapBasic Styler SummaryViewer Time TimeAware TwoPane Viewer ZoneLookup".split(" ").some(function(r){var w,
x=-1<r.indexOf(".html");r="/apps/".concat(r).concat(x?"":"/");return-1<(null===(w=k.url)||void 0===w?void 0:w.indexOf(r))})}(g)&&l.push("retiredApp")),-1<n.indexOf("Registered App")&&"API Key"!==g.type&&l.push("registered"),l},u=Object(b.a)(function(g,m){return Object(q.a)(Object(q.a)({},m),{badges:t(m,g)})})},121:function(b,a,e){e.d(a,"a",function(){return q});var q={ar:"\u0645\u0633\u062a\u0636\u0627\u0641",bs:"hostirano",ca:"allotjat",cs:"hostovan\u00e1 polo\u017eka",da:"hostede",de:"gehostet",
el:"hosted",en:"hosted",es:"alojado",et:"majutatud",fi:"is\u00e4nn\u00f6ity",fr:"h\u00e9berg\u00e9",he:"\u05de\u05ea\u05d0\u05e8\u05d7",hr:"hostirano",hu:"t\u00e1rolt",id:"di-host",it:"ospitati",ja:"\u30db\u30b9\u30c8",ko:"\ud638\uc2a4\ud305",lt:"talpinamas",lv:"viesots",nl:"gehoste",nb:"hostet",pl:"hostowane","pt-br":"hospedado","pt-pt":"alojados",ro:"g\u0103zduite",ru:"\u0440\u0430\u0437\u043c\u0435\u0449\u0435\u043d\u043d\u044b\u0439",sl:"gostujo\u010di",sk:"hostil",sr:"hostovani",sv:"driftade",
th:"\u0e2b\u0e25\u0e31\u0e01",tr:"bar\u0131nd\u0131r\u0131lan",uk:"\u0440\u043e\u0437\u043c\u0456\u0449\u0435\u043d\u0438\u0439 \u043d\u0430 \u0445\u043e\u0441\u0442\u0456",vi:"\u0111\u01b0\u1ee3c l\u01b0u tr\u1eef","zh-cn":"\u6258\u7ba1","zh-hk":"\u8a17\u7ba1","zh-tw":"\u8a17\u7ba1"}},125:function(b,a,e){e.d(a,"a",function(){return t});e.d(a,"b",function(){return u});var q=e(1);b=e(15);var t=function(g,m){var v;return m.thumbnail&&(v="".concat(g.restUrl,"/community/groups/").concat(m.id,"/info/").concat(m.thumbnail).concat(g.credential?
"?token\x3d".concat(g.credential.token):"")),v},u=Object(b.a)(function(g,m){return Object(q.a)(Object(q.a)({},m),{thumbURI:t(g,m)})})},133:function(b,a,e){e.d(a,"a",function(){return q});e.d(a,"d",function(){return g});e.d(a,"c",function(){return m});e.d(a,"e",function(){return v});e.d(a,"f",function(){return p});var q,t=e(1),u=e(27);!function(l){l.LOADING="loading";l.LOADED="loaded";l.FAILED="failed"}(q||(q={}));var g=function(l){var n=l.selectedGroups,k=l.selectorItems;return 0===k.length?Object.keys(n).map(function(r){return n[r].group}):
Object.keys(n).filter(function(r){return v(n[r],k)}).map(function(r){return n[r].group})},m=function(l){var n=l.initialSelectedGroups,k=l.selectedGroups,r=Object.keys(k).map(function(w){return k[w].group.id});return Object.keys(n).map(function(w){return n[w].group.id}).filter(function(w){return 0>r.indexOf(w)}).map(function(w){return n[w].group})},v=function(l,n){return!l.selectedByIds||l.selectedByIds.length===n.length},p={selectorItems:[],displayGroups:[],selectedGroups:{},initialSelectedGroups:{},
status:q.LOADING,total:0,hasGroups:!0};a.b=function(l,n){switch(void 0===l&&(l=p),n.type){case u.a.DESELECT_GROUPS:return Object(t.a)(Object(t.a)({},l),{selectedGroups:n.payload.reduce(function(r,w){w=w.id;r[w];return Object(t.f)(r,["symbol"==typeof w?w:w+""])},l.selectedGroups)});case u.a.REVERT_GROUPS:return n.payload?Object(t.a)(Object(t.a)({},l),{selectedGroups:n.payload.reduce(function(r,w){var x;if(l.initialSelectedGroups[w.id])return Object(t.a)(Object(t.a)({},r),((x={})[w.id]=l.initialSelectedGroups[w.id],
x));w=w.id;r[w];return Object(t.f)(r,["symbol"==typeof w?w:w+""])},l.selectedGroups)}):Object(t.a)(Object(t.a)({},l),{selectedGroups:Object(t.a)({},l.initialSelectedGroups)});case u.a.SELECT_GROUPS:var k=l.selectorItems.map(function(r){return r.id});return Object(t.a)(Object(t.a)({},l),{selectedGroups:n.payload.reduce(function(r,w){var x;return Object(t.a)(Object(t.a)({},r),((x={})[w.group.id]=Object(t.a)({selectedByIds:k},w),x))},l.selectedGroups)});case u.a.SET_INITIAL_GROUPS:return n=n.payload.reduce(function(r,
w){var x;return Object(t.a)(Object(t.a)({},r),((x={})[w.group.id]=w,x))},{}),Object(t.a)(Object(t.a)({},l),{selectedGroups:n,initialSelectedGroups:Object(t.a)({},n)});case u.a.SET_SELECTOR_ITEMS:return Object(t.a)(Object(t.a)({},l),{selectorItems:n.payload});case u.a.CLEAR_SELECTION:return Object(t.a)(Object(t.a)({},l),{selectedGroups:{}});case u.a.LOADING_GROUPS:return Object(t.a)(Object(t.a)({},l),{status:q.LOADING});case u.a.LOAD_GROUPS_SUCCESS:return Object(t.a)(Object(t.a)({},l),{displayGroups:n.payload.results,
total:n.payload.total,status:q.LOADED});case u.a.LOAD_GROUPS_FAIL:return Object(t.a)(Object(t.a)({},l),{displayGroups:[],status:q.FAILED});case u.a.SET_HAS_GROUPS:return Object(t.a)(Object(t.a)({},l),{hasGroups:n.payload});default:return l}}},135:function(b,a,e){function q(R,Y){var ja=Y();Y=ja.utilities.request;var aa=ja.resources;ja=aa.selectedOptions;var da=aa.selectedOptionsDirty;aa=Object(D.b)(aa.items);ja=da&&ja.public===ja.total;R(H(y.a.LOADING));0<aa.length&&ja?Object(D.a)({items:aa,request:Y}).then(function(ra){ra.length?
(ra=ra.some(function(ca){return-1===ca.typeKeywords.indexOf("Public Data Collection")}),R(B(ra?y.c.PUBLIC_DATA_COLLECTION_DISABLED:y.c.PUBLIC_DATA_COLLECTION_ENABLED))):R(t)}).catch(function(){R(t)}):R(t)}function t(R,Y){var ja=Y(),aa=ja.utilities,da=aa.portal,ra=aa.request,ca=aa.onComplete;aa=ja.resources;var fa=aa.items,la=aa.selectedOptions,ta=aa.portalUser;aa=ja.gbState.groups;ja=aa.selectedGroups;aa=aa.initialSelectedGroups;var Q=Object(k.d)({selectedGroups:ja,selectorItems:fa});ja=Object(k.c)({initialSelectedGroups:aa,
selectedGroups:ja});var T=[];Object(r.i)({items:fa,groups:ja,portalUser:ta,restUrl:da.restUrl,request:ra}).then(function(){return Object(r.h)({items:fa,groups:Q,portalUser:ta,request:ra,restUrl:da.restUrl,selectedOptions:la})}).catch(function(O){O.results?T=T.concat(Object(G.a)(O.results,fa)):O.message&&T.push({error:O})}).then(function(){return R(K)}).then(function(){var O=Y().resources,Z=O.items,na=O.dependentItems,ia=na.needGroupSharingUpdate,X=na.notEditable,ha=na.premium,V=na.needPubliclyEditableWarning,
ea=na.needEditableWarning,U=na.needDataCollectionEnabled,ka=na.needGroupDependentApplicationWarning,ma=na.needBDFSDatastoreUpdate,sa=O.selectedOptions,pa=(O=O.selectedOptionsDirty)&&sa.public===sa.total;0!==na.needShareLevelUpdate.length||0!==ia.length||0!==X.length||0!==ha.length||0!==V.length||0!==ea.length||0!==U.length||0!==ka.length&&pa||0!==ma.length||0!==Object(r.c)(Z,sa,O).length?R({type:v.SET_CURRENT_VIEW,payload:y.a.DEPENDENT_ITEM_CONFIRMATION}):ca(0<T.length?{errors:T,selectedOptions:sa}:
{selectedOptions:sa})}).catch(console.error)}function u(R){return R.filter(function(Y){return-1===Y.typeKeywords.indexOf("bigDataFileShare")})}function g(R,Y){var ja=Y(),aa=ja.utilities;R=aa.portal;Y=aa.request;var da=aa.onComplete;aa=ja.resources;var ra=aa.dependentItems,ca=ra.needBDFSDatastoreUpdate,fa=ra.needShareLevelUpdate,la=ra.needGroupSharingUpdate,ta=ra.needEditableWarning,Q=aa.selectedOptions;aa=aa.portalUser;ra=ja.gbState.groups;ja=ra.selectedGroups;var T=ra.selectorItems;if(0!==ca.length||
0!==fa.length||0!==la.length||0!==ta.length){ra=Object(r.h)({items:u(ca),groups:[],portalUser:aa,request:Y,restUrl:R.restUrl,selectedOptions:Q});var O=Object(r.h)({items:Object(p.g)(Object(p.g)([],u(fa),!0),ta,!0),groups:[],portalUser:aa,request:Y,restUrl:R.restUrl,selectedOptions:Q});R=Object(r.h)({items:la,groups:Object(k.d)({selectedGroups:ja,selectorItems:T}),portalUser:aa,request:Y,restUrl:R.restUrl,selectedOptions:Q,ignoreShareLevel:!0});w.Promise.all([ra,O,R]).then(function(){var Z=Object(p.g)(Object(p.g)(Object(p.g)(Object(p.g)([],
ca,!0),fa,!0),la,!0),ta,!0),na=Z.map(function(ia){return ia.id});Z=Z.filter(function(ia,X){return na.indexOf(ia.id)===X});da({dependentItems:Z,selectedOptions:Q})}).catch(function(Z){throw Z;})}else da({selectedOptions:Q})}function m(R,Y){switch(Y().resources.currentMiniDlg){case y.c.OPEN_GROUP_BROWSER:R(z(y.b.public));R(H(y.a.GROUP_BROWSER));break;case y.c.REVERT_SHARE_LEVEL:R({type:v.SET_INITIAL_SHARE_LEVEL});R(Object(n.c)());break;case y.c.REVERT_GROUPS:R(z(y.b.public));R(Object(n.c)());break;
case y.c.EDITABLE_LAYERS:R(t);break;case y.c.SET_SHARE_TO_PRIVATE:R(z(y.b.private));R(Object(n.a)());break;case y.c.PUBLIC_DATA_COLLECTION_DISABLED:R(H(y.a.SHARE));break;case y.c.PUBLIC_DATA_COLLECTION_ENABLED:R(t)}R({type:v.SET_MINI_DIALOG,payload:y.c.NONE})}e.d(a,"a",function(){return v});e.d(a,"k",function(){return B});e.d(a,"g",function(){return C});e.d(a,"j",function(){return H});e.d(a,"d",function(){return q});e.d(a,"i",function(){return g});e.d(a,"h",function(){return m});e.d(a,"c",function(){return L});
e.d(a,"b",function(){return M});e.d(a,"e",function(){return N});e.d(a,"f",function(){return P});var v,p=e(1),l=e(180),n=e(139),k=e(133),r=e(62),w=e(28),x=e(317),D=e(196),G=e(365),F=e(47),A=e(61),y=e(25);!function(R){R.SET_SELECTED_SHARE_LEVEL="SET_SELECTED_SHARE_LEVEL";R.SET_INITIAL_SHARE_LEVEL="SET_INITIAL_SHARE_LEVEL";R.SET_CURRENT_VIEW="SET_CURRENT_VIEW";R.SET_AND_FOCUS_VIEW="SET_AND_FOCUS_VIEW";R.SET_DEPENDENT_ITEMS="SET_DEPENDENT_ITEMS";R.SET_MINI_DIALOG="SET_MINI_DIALOG";R.SET_SHARE_MODE="SET_SHARE_MODE";
R.SET_USER_TYPE="SET_USER_TYPE";R.SET_HELP_MAP="SET_HELP_MAP"}(v||(v={}));var z=function(R){return{type:v.SET_SELECTED_SHARE_LEVEL,payload:R}},B=function(R){return{type:v.SET_MINI_DIALOG,payload:R}},C=function(){return function(R,Y){var ja=Y(),aa=ja.utilities,da=aa.portal,ra=aa.request;aa=ja.resources.items;ja=E(ja);var ca=da.urlKey||da.isPortal?y.e.ORG:y.e.PUBLIC;R({type:v.SET_INITIAL_SHARE_LEVEL});R({type:v.SET_SHARE_MODE,payload:ja});R({type:v.SET_USER_TYPE,payload:ca});R(Object(l.a)({selectorItems:aa,
anySelectorItemsPrivate:0<Y().resources.selectedOptions[y.b.private],shareMode:ja,userType:ca})).then(function(){return Object(r.a)(da,ra)}).then(function(fa){R({type:v.SET_HELP_MAP,payload:fa});R(H(y.a.SHARE))})}},H=function(R){return function(Y){Y({type:v.SET_CURRENT_VIEW,payload:R})}},E=function(R){var Y=R.resources,ja=Y.items;Y=Y.portalUser;R=R.utilities.portal;var aa=ja[0];if(Object(A.d)(aa,Y))return y.d.DEFAULT;aa=!aa.orgId||aa.orgId===Y.orgId;return Object(F.h)({items:ja,user:Y,portal:R})&&
aa?y.d.ADMIN:y.d.GROUP},K=function(R,Y){var ja=Y();Y=ja.resources;var aa=Y.selectedOptions,da=ja.utilities,ra=da.portal,ca=da.request,fa=da.iconDir;ja=ja.gbState.groups;var la=ja.selectedGroups,ta=ja.selectorItems;Y=Y.items.map(function(Q){return Object(x.b)({item:Q,portal:ra,request:ca,iconDir:fa})});return w.Promise.all(Y).then(function(Q){return I({dependentItems:Q,selectedGroups:la,selectorItems:ta,selectedOptions:aa,request:ca,portal:ra})}).then(function(Q){R({type:v.SET_DEPENDENT_ITEMS,payload:Q})})},
I=function(R){var Y=R.dependentItems,ja=R.selectedGroups,aa=R.selectorItems,da=R.selectedOptions,ra=R.request,ca=R.portal;return new w.Promise(function(fa,la){la=Object(r.b)(Y).filter(function(T){return T});var ta=la.map(function(T){return T.id}),Q=la.filter(function(T,O){return ta.indexOf(T.id)===O});w.Promise.all(Q.map(function(T){return Object(x.a)({item:T,selectedOptions:da,selectedGroups:Object(k.d)({selectedGroups:ja,selectorItems:aa}),request:ra,portal:ca})})).then(function(T){var O=[],Z=[],
na=[],ia=[],X=[],ha=[],V=[],ea=[],U=[],ka=!Object(r.e)(da)&&Object(r.d)(da)===y.b.public;T.forEach(function(ma,sa){sa=Q[sa];if(ma.premium)ia.push(sa);else if(ma.groupDependentApplication)ea.push(sa);else{if(!ma.bdfsDatastore)return ka&&ma.editable&&Object(D.c)(sa)&&sa.isUpdateLayer?sa.access===y.b.public?void ha.push(sa):-1<sa.typeKeywords.indexOf("Public Data Collection")?void X.push(sa):void V.push(sa):void((ma.needsShareLevelUpdate||ma.needsGroupSharingUpdate)&&(ma.editable?(ma.needsShareLevelUpdate&&
Z.push(sa),ma.needsGroupSharingUpdate&&O.push(sa)):na.push(sa)));U.push(sa)}});fa({needGroupSharingUpdate:O,needShareLevelUpdate:Z,notEditable:na,premium:ia,needPubliclyEditableWarning:ha,needEditableWarning:X,needDataCollectionEnabled:V,needGroupDependentApplicationWarning:ea,needBDFSDatastoreUpdate:U})}).catch(function(T){throw T;})})},L=function(R,Y){Y=Y();var ja=Y.gbState.groups.initialSelectedGroups,aa=Y.resources.selectedOptions;Y.config.userType===y.e.PUBLIC&&0<aa.private&&0<Object.keys(ja).length?
R(B(y.c.REVERT_GROUPS)):R(Object(n.c)())},M=function(R,Y){Y=Y();var ja=Y.resources,aa=ja.portalUser;ja=ja.selectedOptions;Object(F.l)(Y.utilities.portal)||Object(F.a)(aa)||!Object(r.e)(ja)&&Object(r.d)(ja)!==y.b.private?R(H(y.a.GROUP_BROWSER)):R(B(y.c.OPEN_GROUP_BROWSER))},N=function(R,Y){Y=Y();var ja=Y.resources,aa=ja.portalUser;ja=ja.items;var da=Y.gbState.groups.selectedGroups;Object(F.l)(Y.utilities.portal)||Object(F.b)(aa)||!Object(D.d)({items:ja,groupDatas:Object.keys(da).map(function(ra){return da[ra]})})?
R({type:v.SET_INITIAL_SHARE_LEVEL}):R(B(y.c.REVERT_SHARE_LEVEL))},P=function(R){return function(Y,ja){ja=ja();var aa=ja.resources.portalUser,da=ja.gbState.groups.selectedGroups;!Object(F.l)(ja.utilities.portal)&&!Object(F.b)(aa)&&R===y.b.private&&0<Object.keys(da).length?Y(B(y.c.SET_SHARE_TO_PRIVATE)):Y(z(R))}}},139:function(b,a,e){e.d(a,"d",function(){return m});e.d(a,"e",function(){return v});e.d(a,"b",function(){return p});e.d(a,"c",function(){return l});e.d(a,"a",function(){return n});e.d(a,"f",
function(){return k});var q=e(1),t=e(184),u=e(156),g=e(69),m=function(r){return 1<r.length&&Object(u.a)(),{type:g.a.SELECT_GROUPS,payload:r.map(function(w){return{group:Object(t.c)(w)}})}},v=function(r){return{type:g.a.SET_INITIAL_GROUPS,payload:r.map(function(w){return Object(q.a)(Object(q.a)({},w),{group:Object(t.c)(w.group)})})}},p=function(r){return 1<r.length&&Object(u.b)(),{type:g.a.DESELECT_GROUPS,payload:r}},l=function(r){return{type:g.a.REVERT_GROUPS,payload:r}},n=function(){return Object(u.c)(),
{type:g.a.CLEAR_SELECTION}},k=function(r){return{type:g.a.SET_SELECTOR_ITEMS,payload:r}}},142:function(b,a,e){e.d(a,"a",function(){return t});var q=e(1);b=e(15);var t=Object(b.a)(function(u,g){var m=Object(q.a),v=Object(q.a)({},g);u=g.thumbnail?"".concat(u.restUrl,"/community/users/").concat(g.username,"/info/").concat(g.thumbnail).concat(u.credential?"?token\x3d".concat(u.credential.token):""):void 0;return m(v,{thumbURI:u})})},15:function(b,a,e){function q(u){return function m(){for(var v=this,
p=[],l=0;l<arguments.length;l++)p[l]=arguments[l];return p.length>=u.length?u.call.apply(u,Object(t.g)([this],p,!1)):function(){for(var n=[],k=0;k<arguments.length;k++)n[k]=arguments[k];return m.call.apply(m,Object(t.g)(Object(t.g)([v],p,!1),n,!1))}}}e.d(a,"a",function(){return q});var t=e(1)},151:function(b,a,e){e.d(a,"b",function(){return r});e.d(a,"a",function(){return x});var q=e(1),t=e(184),u=e(33),g=e(156),m=e(59),v=e(69),p=e(28),l=e(62),n=e(41),k=e(25),r=function(C,H){w(H()).then(function(E){var K=
H();K=Object(m.b)(K)?K:K.gbState;var I=K.utils;K.ui.focus.focusSelectAll&&Object(g.c)();C({type:v.a.LOAD_GROUPS_SUCCESS,payload:Object(q.a)(Object(q.a)({},E),{results:E.results.map(function(L){return Object(t.b)(I.portal,L)})})})}).catch(function(E){var K=H();(Object(m.b)(K)?K:K.gbState).ui.focus.focusSelectAll&&Object(g.c)();C({type:v.a.LOAD_GROUPS_FAIL,payload:E})})},w=function(C){C=Object(m.b)(C)?C:C.gbState;var H=C.utils,E=H.request,K=H.portal,I=C.config;H=I.groupsPerPage;var L=I.withinShare,
M=(I.withinAppConfig,C.parameters);I=M.filter;M=M.sort;var N=C.ui.page.currentPageNumber,P={q:B(C),num:H,sortField:M.field,sortOrder:M.order,start:(N-1)*H+1};return L&&(P.searchUserAccess="groupMember",P.searchUserName=I.currentUsername),I.designationFilter!==n.b.orgSettings||F(K)?new p.Promise(function(R,Y){Object(u.g)(E,K,P).then(R,Y)}):new p.Promise(function(R){R({query:P.q,total:0,start:1,num:100,nextStart:-1,results:[]})})},x=function(C){var H=C.user;C=C.state;C=Object(m.b)(C)?C:C.gbState;var E=
C.utils,K=E.request,I=E.portal;C=Object(q.a)(Object(q.a)({},C),{parameters:Object(q.a)(Object(q.a)({},C.parameters),{filter:Object(q.a)(Object(q.a)({},C.parameters.filter),{currentUsername:H.username})})});var L={q:B(C),num:100,searchUserAccess:"groupMember",searchUserName:H.username};return(new p.Promise(function(M,N){return Object(u.g)(K,I,L).then(function(P){if(-1!==P.nextStart){var R=Math.ceil(P.total/100)-1,Y=[P.results];P=function(aa){Y.push(new p.Promise(function(da,ra){var ca=100*(aa+1)+1;
Object(u.g)(K,I,Object(q.a)(Object(q.a)({},L),{start:ca})).then(function(fa){da(fa.results)},ra)}))};for(var ja=0;ja<R;ja++)P(ja);p.Promise.all(Y).then(function(aa){M(Object(l.b)(aa))})}else M(P.results)},N)})).catch(function(M){throw M;})},D=function(C){var H,E,K=C.shareMode,I=C.currentUsername,L=C.portalUser,M=C.userGroups;C=C.isPrivate;var N=[];if(M){var P=[];K===k.d.ADMIN&&(null===(H=M[I])||void 0===H?0:H.length)&&I!==L.username&&(P=Object(q.g)([],M[I],!0));K===k.d.ADMIN&&C||M[L.username].forEach(function(R){P.some(function(Y){return Y.id===
R.id})||P.push(R)});null==P||P.forEach(function(R){var Y,ja=null===(Y=R.userMembership)||void 0===Y?void 0:Y.memberType;!R.isViewOnly||"owner"!==ja&&"admin"!==ja||N.push(R.id)})}N.length&&(E="(isviewonly:false OR id:(".concat(N.join(" OR "),"))"));H=N.length?" OR id:(".concat(N.join(" OR "),")"):"";switch(K){case k.d.DEFAULT:return E||"(owner:".concat(I," OR isviewonly:false)");case k.d.GROUP:return"owner:".concat(I," -capabilities:updateitemcontrol");case k.d.ADMIN:return L.username===I?"(isviewonly:false".concat(H,
" OR owner:").concat(L.username,") -capabilities:updateitemcontrol"):"(owner:".concat(I," OR isviewonly:false").concat(H,")");default:return""}},G=function(C,H){0!==(null==C?void 0:C.indexOf("id:"))||-1<H.indexOf(C)||H.push(C)},F=function(C){var H,E,K,I,L,M=[],N=[C.featuredItemsGroupQuery,C.basemapGalleryGroupQuery,C.templatesGroupQuery,C["2DStylesGroupQuery"],C.stylesGroupQuery,C.analysisLayersGroupQuery,C.galleryTemplatesGroupQuery];if(C.hasModernHomePageEnabled){var P=(null===(E=null===(H=C.homePageConfig)||
void 0===H?void 0:H.content)||void 0===E?void 0:E.filter(function(R){return"gallery"===R.type&&!!R.groupId}))||[];0<P.length&&P.forEach(function(R){R="id:".concat(R.groupId);G(R,M)})}else N.push(C.homePageFeaturedContent);return N.forEach(function(R){G(R,M)}),null===(K=C.featuredGroups)||void 0===K||K.forEach(function(R){if(R=R.id)R="id:".concat(R),G(R,M)}),null===(L=null===(I=C.userDefaults)||void 0===I?void 0:I.groups)||void 0===L||L.forEach(function(R){R="id:".concat(R);G(R,M)}),0<M.length?"(".concat(M.join(" OR "),
")"):""},A=function(C){var H=C.portal;switch(C.designationFilter){case n.b.openData:return"isopendata:true";case n.b.updateGroups:return"capabilities:updateitemcontrol";case n.b.distributed:return"capabilities:distributed";case n.b.administrative:return"isleavingdisallowed:true";case n.b.orgSettings:return F(H)||"";default:return""}},y=function(C){var H=C.portal,E=C.username,K=C.currentUsername,I=C.userType,L=C.withinAppConfig;E=C.shareMode===k.d.ADMIN&&K||E;L=H.isPortal&&L?"-owner:esri_livingatlas -owner:esri_boundaries -owner:esri_demographics":
"";switch(C.ownerFilter){case n.d.itemOwner:return"owner:".concat(E," ").concat(L);case n.d.inOrg:return"-owner:".concat(E," orgid:").concat(H.id," ").concat(L);case n.d.outsideOrg:return I===k.e.PUBLIC?"-owner:".concat(E," ").concat(L):"".concat("(orgid: [0 TO \\{])"," -orgid:").concat(H.id," ").concat(L);default:return L}},z=function(C){return C?"".concat((H="created",K=(E=C).start,I=E.end,"".concat(H,": [").concat(K," TO ").concat(I,"]"))):"";var H,E,K,I},B=function(C){var H,E,K,I=C.utils,L=I.portal;
I=I.portalUser;var M=C.config,N=M.shareMode,P=M.userType,R=M.withinAppConfig,Y=M.hasIndoorsSpaces,ja=M.userGroups,aa=C.parameters.filter,da=aa.searchString,ra=aa.designationFilter,ca=aa.membershipFilter,fa=aa.dateCreatedFilter,la=aa.currentUsername;aa=aa.ownerFilter;return["".concat(M.baseQ," ").concat(da),D({shareMode:N,currentUsername:la,portalUser:I,userGroups:ja,isPrivate:"private"===(null===(K=null===(E=null===(H=C.groups)||void 0===H?void 0:H.selectorItems)||void 0===E?void 0:E[0])||void 0===
K?void 0:K.access)}),Y?"-capabilities:distributed":A({designationFilter:ra,portal:L}),Y?"membershipaccess:org":ca?"anyOrg"===ca?"-membershipaccess:org -membershipaccess:collaboration":"membershipaccess:".concat(ca):"",z(fa),y({ownerFilter:aa,portal:L,username:I.username,currentUsername:la,shareMode:N,userType:P,withinAppConfig:R})].filter(function(ta){return ta}).join(" ").trim()}},156:function(b,a,e){function q(){g("gb__select-all-input")}function t(){g("gb__clear-selection-btn")}function u(){setTimeout(function(){var m=
document.querySelector(".gcard-gcc__container");m&&(m=m.querySelector(".btn-2018check__input"))&&m.focus()},50)}function g(m){setTimeout(function(){var v=document.querySelector("#".concat(m));v&&v.focus()},50)}e.d(a,"c",function(){return q});e.d(a,"a",function(){return t});e.d(a,"b",function(){return u})},165:function(b,a){a=function(){return this}();try{a=a||(new Function("return this"))()}catch(e){"object"==typeof window&&(a=window)}b.exports=a},17:function(b,a){b.exports=S},172:function(b,a,e){var q;
e.d(a,"a",function(){return q});(q||(q={})).TRUSTED_ORGS_LOADED="TRUSTED_ORGS_LOADED"},180:function(b,a,e){e.d(a,"a",function(){return G});var q=e(1),t=e(59),u=e(139),g=e(151),m=e(297),v=e(298),p=e(186),l=e(33),n=e(28),k=e(27),r=e(62),w=e(69),x=e(192),D=e(61),G=function(A){return function(y,z){var B=z(),C=(Object(t.b)(B)?B:B.gbState).utils,H=C.portal;C=C.portalUser;if(!(A&&A.selectorItems&&0<A.selectorItems.length))return y(g.b),n.Promise.resolve();var E=A.selectorItems,K=A.userType;y({type:k.a.SET_SHARE_MODE,
payload:A.shareMode});y({type:k.a.SET_USER_TYPE,payload:K});y(Object(u.f)(E));H=Object(D.b)({user:C,items:E,portal:H});var I=C.username===H.username?[C]:[C,H];return 1<I.length&&!A.anySelectorItemsPrivate&&y({type:k.a.ENABLE_USER_TOGGLE}),y(Object(p.c)(I)),y(Object(p.h)(H.username)),void 0===B.config.hasTrustedOrgs&&y(m.a),Object(v.a)(z(),H).then(function(L){return L&&y({type:x.a.USER_DETAILS_LOADED,payload:L}),y(g.b),n.Promise.all(I.map(function(M){return Object(g.a)({user:M,state:z()})})).then(function(M){M=
Object(r.b)(M);var N=M.map(function(P){return P.id});M=M.filter(function(P,R){return N.indexOf(P.id)===R});return y(F(M))})})}},F=function(A){return function(y,z){return new n.Promise(function(B,C){var H=z();H=Object(t.b)(H)?H:H.gbState;var E=H.utils,K=E.portal,I=E.request,L=Object(l.b)(H.groups.selectorItems);H=Object(l.a)(A).map(function(M){return Object(l.i)({itemIds:L,groupIds:Object(l.b)(M),portal:K,request:I})});n.Promise.all(H).then(function(M){var N=M.reduce(function(R,Y){return Object(q.a)(Object(q.a)({},
R),Y)},{}),P=Object.keys(N);M=A.filter(function(R){return 0<=P.indexOf(R.id)}).map(function(R){return{group:R,selectedByIds:N[R.id].items.map(function(Y){return Y.itemId})}});y({type:w.a.SET_HAS_GROUPS,payload:0<A.length});y(Object(u.e)(M));B()}).catch(C)})}}},184:function(b,a,e){e.d(a,"b",function(){return g});e.d(a,"c",function(){return m});e.d(a,"a",function(){return v});var q=e(64);b=e(7);var t=e(97),u=e(125),g=function(p,l){return Object(q.a)(Object(u.b)(p))(l)},m=Object(q.a)(Object(b.e)("thumbURI")),
v=function(p){var l=p.initialSelectedByIds;return!Object(t.a)(p.selectedBy.map(function(n){return n.id}),l)}},186:function(b,a,e){e.d(a,"b",function(){return t});e.d(a,"g",function(){return u});e.d(a,"h",function(){return g});e.d(a,"e",function(){return m});e.d(a,"f",function(){return v});e.d(a,"d",function(){return p});e.d(a,"c",function(){return l});e.d(a,"a",function(){return n});var q=e(86),t=function(k){return{type:q.a.SET_SEARCH_STRING,payload:k}},u=function(k){return{type:q.a.UPDATE_OWNER_FILTER,
payload:k}},g=function(k){return{type:q.a.UPDATE_USERNAME_FILTER,payload:k}},m=function(k){return{type:q.a.UPDATE_GROUP_DESIGNATION_FILTER,payload:k}},v=function(k){return{type:q.a.UPDATE_MEMBERSHIP_FILTER,payload:k}},p=function(k){return{type:q.a.UPDATE_CREATED_ON_FILTER,payload:{section:k.section,created:k.created}}},l=function(k){return{type:q.a.SET_USERS,payload:k}},n=function(k){return{type:q.a.CLEAR_FILTERS,payload:k}}},189:function(b,a){function e(){throw Error("setTimeout has not been defined");
}function q(){throw Error("clearTimeout has not been defined");}function t(x){if(p===setTimeout)return setTimeout(x,0);if((p===e||!p)&&setTimeout)return p=setTimeout,setTimeout(x,0);try{return p(x,0)}catch(D){try{return p.call(null,x,0)}catch(G){return p.call(this,x,0)}}}function u(){r&&n&&(r=!1,n.length?k=n.concat(k):w=-1,k.length&&g())}function g(){if(!r){var x=t(u);r=!0;for(var D=k.length;D;){n=k;for(k=[];++w<D;)n&&n[w].run();w=-1;D=k.length}n=null;r=!1;(function(G){if(l===clearTimeout)return clearTimeout(G);
if((l===q||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(G);try{l(G)}catch(F){try{return l.call(null,G)}catch(A){return l.call(this,G)}}})(x)}}function m(x,D){this.fun=x;this.array=D}function v(){}b=b.exports={};try{var p="function"==typeof setTimeout?setTimeout:e}catch(x){p=e}try{var l="function"==typeof clearTimeout?clearTimeout:q}catch(x){l=q}!0;var n,k=[],r=!1,w=-1;b.nextTick=function(x){var D=Array(arguments.length-1);if(1<arguments.length)for(var G=1;G<arguments.length;G++)D[G-1]=arguments[G];
k.push(new m(x,D));1!==k.length||r||t(g)};m.prototype.run=function(){this.fun.apply(null,this.array)};b.title="browser";b.browser=!0;b.env={};b.argv=[];b.version="";b.versions={};b.on=v;b.addListener=v;b.once=v;b.off=v;b.removeListener=v;b.removeAllListeners=v;b.emit=v;b.prependListener=v;b.prependOnceListener=v;b.listeners=function(x){return[]};b.binding=function(x){throw Error("process.binding is not supported");};b.cwd=function(){return"/"};b.chdir=function(x){throw Error("process.chdir is not supported");
};b.umask=function(){return 0}},192:function(b,a,e){var q;e.d(a,"a",function(){return q});(q||(q={})).USER_DETAILS_LOADED="USER_LOADED"},196:function(b,a,e){function q(n){return"Feature Service"===n.type&&-1<n.typeKeywords.indexOf("Hosted Service")}function t(n){return n.filter(function(k){return k.access!==v.b.public&&q(k)})}function u(n){var k=n.request;n=n.items.map(function(r){return function(w,x){return new g.Promise(function(D){q(w)?Object(m.v)(x,"".concat(w.url,"/layers")).then(function(G){G=
G.layers;D((null==G?void 0:G.reduce(function(F,A){return F||A&&-1<A.capabilities.indexOf("Editing")},!1))&&w)},function(){return D(!1)}):D(!1)})}(r,k)});return g.Promise.all(n).then(function(r){return r.filter(function(w){return w})})}e.d(a,"d",function(){return p});e.d(a,"c",function(){return q});e.d(a,"b",function(){return t});e.d(a,"a",function(){return u});var g=e(28),m=e(33),v=e(25),p=function(n){var k=n.groupDatas;return n.items.filter(function(r){r=r.access?r.access:r.sharing&&r.sharing.access;
return r===v.b.private||r===v.b.shared}).reduce(function(r,w){return r||l({item:w,groupDatas:k})},!1)},l=function(n){var k=n.item;return n.groupDatas.reduce(function(r,w){return r||!!w.selectedByIds&&0<=w.selectedByIds.indexOf(k.id)},!1)}},202:function(b,a,e){var q;e.d(a,"a",function(){return q});(function(t){t.SET_PAGE="SET_PAGE";t.TOGGLE_SORT_DROPDOWN="TOGGLE_SORT_DROPDOWN";t.TOGGLE_EXPANDED_FILTERS="TOGGLE_EXPANDED_FILTERS"})(q||(q={}))},203:function(b,a){b.exports=c},205:function(b,a,e){e.d(a,
"b",function(){return u});var q=e(1),t=e(27),u={groupsPerPage:100,baseQ:"",withinShare:!1,withinAppConfig:!1,enableFiltering:!1,enableUserToggle:!1,enableSingleSelection:!1,hasIndoorsSpaces:!1};a.a=function(g,m){switch(void 0===g&&(g=u),m.type){case t.a.ENABLE_USER_TOGGLE:return Object(q.a)(Object(q.a)({},g),{enableUserToggle:!0});case t.a.SET_SHARE_MODE:return Object(q.a)(Object(q.a)({},g),{shareMode:m.payload});case t.a.SET_USER_TYPE:return Object(q.a)(Object(q.a)({},g),{userType:m.payload});case t.a.TRUSTED_ORGS_LOADED:return Object(q.a)(Object(q.a)({},
g),{hasTrustedOrgs:0<m.payload.length});case t.a.USER_DETAILS_LOADED:return Object(q.a)(Object(q.a)({},g),{userGroups:m.payload});case t.a.SET_SELECTOR_ITEMS:return m=!!m.payload.find(function(v){var p;return-1<(null===(p=null==v?void 0:v.typeKeywords)||void 0===p?void 0:p.indexOf("EditExtensionIndoorsSpaces"))}),Object(q.a)(Object(q.a)({},g),{hasIndoorsSpaces:m});default:return g}}},206:function(b,a,e){e.d(a,"b",function(){return t});b=e(17);var q=e(207);e=e(41);var t={sort:q.b,filter:e.f};a.a=Object(b.combineReducers)({sort:q.a,
filter:e.e})},207:function(b,a,e){e.d(a,"b",function(){return u});var q=e(1),t=e(27),u={field:"title",order:"asc"},g={relevance:"desc",title:"asc",created:"desc",owner:"asc",modified:"desc",numviews:"desc",avgrating:"desc"};a.a=function(m,v){switch(void 0===m&&(m=u),v.type){case t.a.CHANGE_SORT_FIELD:return Object(q.a)(Object(q.a)({},m),{field:v.payload,order:g[v.payload]});case t.a.CHANGE_SORT_ORDER:return Object(q.a)(Object(q.a)({},m),{order:v.payload});default:return m}}},208:function(b,a,e){e.d(a,
"b",function(){return g});b=e(17);var q=e(209),t=e(210),u=e(211);e=e(212);var g={page:q.b,sort:t.b,focus:u.b,filter:e.b};a.a=Object(b.combineReducers)({page:q.a,sort:t.a,focus:u.a,filter:e.a})},209:function(b,a,e){e.d(a,"b",function(){return u});var q=e(1),t=e(27),u={currentPageNumber:1};a.a=function(g,m){switch(void 0===g&&(g=u),m.type){case t.a.CLEAR_FILTERS:case t.a.UPDATE_USERNAME_FILTER:case t.a.UPDATE_OWNER_FILTER:case t.a.UPDATE_CREATED_ON_FILTER:case t.a.UPDATE_GROUP_DESIGNATION_FILTER:return Object(q.a)(Object(q.a)({},
g),{currentPageNumber:1});case t.a.SET_PAGE:return Object(q.a)(Object(q.a)({},g),{currentPageNumber:m.payload});case t.a.LOAD_GROUPS_SUCCESS:return Object(q.a)(Object(q.a)({},g),{currentPageNumber:m.payload.num>m.payload.total?1:Math.ceil(m.payload.start/m.payload.num)});case t.a.LOAD_GROUPS_FAIL:return Object(q.a)(Object(q.a)({},g),{currentPageNumber:1});default:return g}}},210:function(b,a,e){e.d(a,"b",function(){return t});var q=e(27),t=!1;a.a=function(u,g){switch(void 0===u&&(u=t),g.type){case q.a.CHANGE_SORT_FIELD:case q.a.CHANGE_SORT_ORDER:case q.a.TOGGLE_SORT_DROPDOWN:return!u;
default:return u}}},211:function(b,a,e){e.d(a,"b",function(){return u});var q=e(1),t=e(27),u={focusSelectAll:!1};a.a=function(g,m){switch(m.type){case t.a.LOAD_GROUPS_FAIL:case t.a.LOAD_GROUPS_SUCCESS:return Object(q.a)(Object(q.a)({},g),{focusSelectAll:!1});case t.a.CHANGE_SORT_FIELD:case t.a.CHANGE_SORT_ORDER:return Object(q.a)(Object(q.a)({},g),{focusSelectAll:!0});default:return g}}},212:function(b,a,e){e.d(a,"b",function(){return g});var q=e(1),t=e(27),u=e(41),g={expanded:!1};a.a=function(m,
v){switch(v.type){case t.a.CLEAR_FILTERS:switch(v.payload){case void 0:case u.a.DATE_CREATED:return Object(q.a)(Object(q.a)({},m),{dateCreatedSelectedSection:void 0});default:return m}case t.a.TOGGLE_EXPANDED_FILTERS:return Object(q.a)(Object(q.a)({},m),{expanded:!m.expanded});case t.a.UPDATE_CREATED_ON_FILTER:return Object(q.a)(Object(q.a)({},m),{dateCreatedSelectedSection:v.payload.section});default:return m}}},213:function(b,a,e){e.d(a,"b",function(){return t});var q=e(99),t={portal:{},portalUser:{},
request:function(u){return null}};a.a=function(u,g){return void 0===u&&(u=t),g.type,u.portal.portalHostname&&!u.portal.baseUrl&&(u.portal.baseUrl=Object(q.a)(u.portal)),u}},243:function(b,a,e){var q=e(125);a.a=function(t,u){var g=t.group,m=t.stacked,v=t.portal;t={"gcard-thumbnail__container":!0,"gcard-thumbnail__svg-container":!g.thumbURI,"gcard-thumbnail--stacked":void 0!==m&&m,"gcard-thumbnail--transparent":t.transparent};if(g.thumbnail&&!g.thumbURI&&v&&(g.thumbURI=Object(q.a)(v,g)),g.thumbURI)return u("img",
{src:g.thumbURI,classes:t,alt:g.title});v=!(!g.title.charAt(0)||!g.title.charAt(0).match(/^\w+$/));return u("div",{key:"group-thumbnail-".concat(g.id),classes:t},u("svg",{xmlns:"http://www.w3.org/2000/svg",role:"img",width:"65",height:"65",viewBox:"0 0 65 65"},u("path",{fill:"#".concat(g.id.substr(g.id.length-6)),d:"M0 0h65v65H0z"}),u("path",{fill:"#ccc",d:"M0 0h65v65H0z","fill-opacity":"0.8"}),v?u("text",{x:"50%",y:/(MSIE |Trident\/|Edge\/)/.test(navigator.userAgent)?"70%":"50%",fill:"white","dominant-baseline":"central",
"text-anchor":"middle"},g.title.slice(0,1).toUpperCase()):u("path",{fill:"#FFF",d:"M24.25 15.625a6.875 6.875 0 1 0-.008 13.75 6.875 6.875 0 0 0 .008-13.75zm0 11c-2.272 0-4.125-1.851-4.125-4.125s1.848-4.125 4.125-4.125c2.279 0 4.125 1.846 4.125 4.125s-1.846 4.125-4.125 4.125zm3.118 16.5H14.774c.596-4.641 4.647-8.25 9.473-8.25 2.855 0 5.426 1.283 7.188 3.316a15.168 15.168 0 0 1 2.311-1.518 12.22 12.22 0 0 0-9.496-4.549c-6.369 0-11.551 4.82-12.238 11l-.137 2.75h14.424a15.49 15.49 0 0 1 1.066-2.75h.003zm25.62 5.5c-.693-6.18-5.873-11-12.238-11s-11.545 4.82-12.238 11l-.137 2.75h24.75l-.137-2.75zm-21.711 0c.596-4.641 4.647-8.25 9.473-8.25a9.578 9.578 0 0 1 9.464 8.25H31.277zm9.473-27.5a6.875 6.875 0 1 0-.008 13.75c3.797.003 6.877-3.072 6.88-6.87s-3.072-6.877-6.869-6.88h-.003zm0 11c-2.271 0-4.125-1.851-4.125-4.125s1.848-4.125 4.125-4.125a4.125 4.125 0 0 1 0 8.25z"})))}},
25:function(b,a,e){var q,t,u,g,m;e.d(a,"b",function(){return q});e.d(a,"a",function(){return t});e.d(a,"c",function(){return u});e.d(a,"e",function(){return g});e.d(a,"d",function(){return m});(function(v){v.org="org";v.private="private";v.public="public";v.shared="shared"})(q||(q={}));(function(v){v.LOADING="LOADING";v.SHARE="SHARE";v.GROUP_BROWSER="GROUP_BROWSER";v.DEPENDENT_ITEM_CONFIRMATION="DEPENDENT_ITEM_CONFIRMATION"})(t||(t={}));(function(v){v.SET_SHARE_TO_PRIVATE="SET_SHARE_TO_PRIVATE";v.REVERT_SHARE_LEVEL=
"REVERT_SHARE_LEVEL";v.REVERT_GROUPS="REVERT_GROUPS";v.EDITABLE_LAYERS="EDITABLE_LAYERS";v.OPEN_GROUP_BROWSER="OPEN_GROUP_BROWSER";v.NONE="NONE";v.PUBLIC_DATA_COLLECTION_DISABLED="PUBLIC_DATA_COLLECTION_DISABLED";v.PUBLIC_DATA_COLLECTION_ENABLED="PUBLIC_DATA_COLLECTION_ENABLED"})(u||(u={}));(function(v){v.ORG="ORG";v.PUBLIC="PUBLIC"})(g||(g={}));(function(v){v.DEFAULT="DEFAULT";v.ADMIN="ADMIN";v.GROUP="GROUP";v.INVITE="INVITE"})(m||(m={}))},252:function(b,a){b.exports=h},27:function(b,a,e){e.d(a,
"a",function(){return m});var q;b=e(1);a=e(202);var t=e(69),u=e(172),g=e(86);e=e(192);!function(v){v.ENABLE_USER_TOGGLE="ENABLE_USER_TOGGLE";v.SET_SHARE_MODE="SET_SHARE_MODE";v.SET_USER_TYPE="SET_USER_TYPE"}(q||(q={}));var m=Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)({},a.a),t.a),g.a),q),u.a),e.a)},278:function(b,a,e){var q=e(1);b=e(17);var t=e(608);e=function(u){function g(){return null!==u&&u.apply(this,arguments)||this}return Object(q.d)(g,u),g.prototype.render=function(m){var v=
this.props,p=v.items,l=v.text,n=v.title,k=v.portal;v=v.error;return 0<p.length&&m("div",{key:"need-update-list",classes:{"dependent-items":!0,"dependent-items--error":v}},m("h4",{class:"dependent-items__title"},n.replace("${num}",p.length.toString())),l&&m("p",{class:"dependent-items__count"},l),m("ul",{class:"dependent-items__list"},p.map(function(r){return m(t.a,{key:r.id,item:r,portal:k})})))},g}(b.Component);a.a=e},279:function(b,a){b.exports=d},28:function(b,a,e){(function(q,t){b.exports=function(){function u(){var ca=
setTimeout;return function(){return ca(g,1)}}function g(){for(var ca=0;ca<y;ca+=2)(0,L[ca])(L[ca+1]),L[ca]=void 0,L[ca+1]=void 0;y=0}function m(ca,fa){var la=this,ta=new this.constructor(p);void 0===ta[ja]&&F(ta);var Q=la._state;if(Q){var T=arguments[Q-1];C(function(){return G(Q,ta,T,la._result)})}else x(la,ta,ca,fa);return ta}function v(ca){if(ca&&"object"==typeof ca&&ca.constructor===this)return ca;var fa=new this(p);return n(fa,ca),fa}function p(){}function l(ca,fa,la){fa.constructor===ca.constructor&&
la===m&&fa.constructor.resolve===v?function(ta,Q){1===Q._state?r(ta,Q._result):2===Q._state?w(ta,Q._result):x(Q,void 0,function(T){return n(ta,T)},function(T){return w(ta,T)})}(ca,fa):void 0===la?r(ca,fa):"function"==typeof la?function(ta,Q,T){C(function(O){var Z=!1,na=function(ia,X,ha,V){try{ia.call(X,ha,V)}catch(ea){return ea}}(T,Q,function(ia){Z||(Z=!0,Q!==ia?n(O,ia):r(O,ia))},function(ia){Z||(Z=!0,w(O,ia))},O._label);!Z&&na&&(Z=!0,w(O,na))},ta)}(ca,fa,la):r(ca,fa)}function n(ca,fa){if(ca===fa)w(ca,
new TypeError("You cannot resolve a promise with itself"));else if(ta=typeof(la=fa),null===la||"object"!==ta&&"function"!==ta)r(ca,fa);else{la=void 0;try{la=fa.then}catch(Q){return void w(ca,Q)}l(ca,fa,la)}var la,ta}function k(ca){ca._onerror&&ca._onerror(ca._result);D(ca)}function r(ca,fa){void 0===ca._state&&(ca._result=fa,ca._state=1,0!==ca._subscribers.length&&C(D,ca))}function w(ca,fa){void 0===ca._state&&(ca._state=2,ca._result=fa,C(k,ca))}function x(ca,fa,la,ta){var Q=ca._subscribers,T=Q.length;
ca._onerror=null;Q[T]=fa;Q[T+1]=la;Q[T+2]=ta;0===T&&ca._state&&C(D,ca)}function D(ca){var fa=ca._subscribers,la=ca._state;if(0!==fa.length){for(var ta=void 0,Q=void 0,T=ca._result,O=0;O<fa.length;O+=3)ta=fa[O],Q=fa[O+la],ta?G(la,ta,Q,T):Q(T);ca._subscribers.length=0}}function G(ca,fa,la,ta){var Q="function"==typeof la,T=void 0,O=void 0,Z=!0;if(Q){try{T=la(ta)}catch(na){Z=!1,O=na}if(fa===T)return void w(fa,new TypeError("A promises callback cannot return that same promise."))}else T=ta;void 0!==fa._state||
(Q&&Z?n(fa,T):!1===Z?w(fa,O):1===ca?r(fa,T):2===ca&&w(fa,T))}function F(ca){ca[ja]=aa++;ca._state=void 0;ca._result=void 0;ca._subscribers=[]}var A=Array.isArray?Array.isArray:function(ca){return"[object Array]"===Object.prototype.toString.call(ca)},y=0,z=void 0,B=void 0,C=function(ca,fa){L[y]=ca;L[y+1]=fa;2===(y+=2)&&(B?B(g):Y())},H="undefined"!=typeof window?window:void 0,E=H||{};E=E.MutationObserver||E.WebKitMutationObserver;var K="undefined"==typeof self&&void 0!==q&&"[object process]"==={}.toString.call(q),
I="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,L=Array(1E3),M,N,P,R,Y=void 0;K?Y=function(){return q.nextTick(g)}:E?(N=0,P=new E(g),R=document.createTextNode(""),P.observe(R,{characterData:!0}),Y=function(){R.data=N=++N%2}):I?((M=new MessageChannel).port1.onmessage=g,Y=function(){return M.port2.postMessage(0)}):Y=void 0===H?function(){try{var ca=Function("return this")().require("vertx");return void 0!==(z=ca.runOnLoop||ca.runOnContext)?
function(){z(g)}:u()}catch(fa){return u()}}():u();var ja=Math.random().toString(36).substring(2),aa=0,da=function(){function ca(fa,la){this._instanceConstructor=fa;this.promise=new fa(p);this.promise[ja]||F(this.promise);A(la)?(this.length=la.length,this._remaining=la.length,this._result=Array(this.length),0===this.length?r(this.promise,this._result):(this.length=this.length||0,this._enumerate(la),0===this._remaining&&r(this.promise,this._result))):w(this.promise,Error("Array Methods must be provided an Array"))}
return ca.prototype._enumerate=function(fa){for(var la=0;void 0===this._state&&la<fa.length;la++)this._eachEntry(fa[la],la)},ca.prototype._eachEntry=function(fa,la){var ta=this._instanceConstructor,Q=ta.resolve;if(Q===v){var T=Q=void 0,O=!1;try{Q=fa.then}catch(Z){O=!0,T=Z}Q===m&&void 0!==fa._state?this._settledAt(fa._state,la,fa._result):"function"!=typeof Q?(this._remaining--,this._result[la]=fa):ta===ra?(ta=new ta(p),O?w(ta,T):l(ta,fa,Q),this._willSettleAt(ta,la)):this._willSettleAt(new ta(function(Z){return Z(fa)}),
la)}else this._willSettleAt(Q(fa),la)},ca.prototype._settledAt=function(fa,la,ta){var Q=this.promise;void 0===Q._state&&(this._remaining--,2===fa?w(Q,ta):this._result[la]=ta);0===this._remaining&&r(Q,this._result)},ca.prototype._willSettleAt=function(fa,la){var ta=this;x(fa,void 0,function(Q){return ta._settledAt(1,la,Q)},function(Q){return ta._settledAt(2,la,Q)})},ca}(),ra=function(){function ca(fa){this[ja]=aa++;this._result=this._state=void 0;this._subscribers=[];if(p!==fa){if("function"!=typeof fa)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");
if(this instanceof ca)(function(la,ta){try{ta(function(Q){n(la,Q)},function(Q){w(la,Q)})}catch(Q){w(la,Q)}})(this,fa);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}}return ca.prototype.catch=function(fa){return this.then(null,fa)},ca.prototype.finally=function(fa){var la=this.constructor;return"function"==typeof fa?this.then(function(ta){return la.resolve(fa()).then(function(){return ta})},function(ta){return la.resolve(fa()).then(function(){throw ta;
})}):this.then(fa,fa)},ca}();return ra.prototype.then=m,ra.all=function(ca){return(new da(this,ca)).promise},ra.race=function(ca){var fa=this;return A(ca)?new fa(function(la,ta){for(var Q=ca.length,T=0;T<Q;T++)fa.resolve(ca[T]).then(la,ta)}):new fa(function(la,ta){return ta(new TypeError("You must pass an array to race."))})},ra.resolve=v,ra.reject=function(ca){var fa=new this(p);return w(fa,ca),fa},ra._setScheduler=function(ca){B=ca},ra._setAsap=function(ca){C=ca},ra._asap=C,ra.polyfill=function(){var ca=
void 0;if(void 0!==t)ca=t;else if("undefined"!=typeof self)ca=self;else try{ca=Function("return this")()}catch(ta){throw Error("polyfill failed because global object is unavailable in this environment");}var fa=ca.Promise;if(fa){var la=null;try{la=Object.prototype.toString.call(fa.resolve())}catch(ta){}if("[object Promise]"===la&&!fa.cast)return}ca.Promise=ra},ra.Promise=ra,ra}()}).call(this,e(189),e(165))},296:function(b,a,e){function q(g){return u[g.vnodeSelector]&&(!g.properties||!g.properties.disabled&&
-1!==g.properties.tabindex)||g.properties&&g.properties.tabindex&&-1<parseInt(g.properties.tabindex,10)}var t=e(1),u={a:!0,area:!0,input:!0,select:!0,textarea:!0,button:!0,iframe:!0};b=function(g){function m(v){v=g.call(this,v)||this;return v.registerFirstFocusable=v.registerFirstFocusable.bind(v),v.registerLastFocusable=v.registerLastFocusable.bind(v),v.handleFocusChange=v.handleFocusChange.bind(v),v}return Object(t.d)(m,g),m.prototype.render=function(){var v=this.findFirstFocusable(this.props.children),
p=this.findLastFocusable(this.props.children);return v&&p&&(v.properties?v.properties.afterCreate=this.registerFirstFocusable:v.properties={afterCreate:this.registerFirstFocusable},p.properties?p.properties.afterCreate=this.registerLastFocusable:p.properties={afterCreate:this.registerLastFocusable}),this.props.children},m.prototype.findFirstFocusable=function(v){if(v)for(var p=0;p<v.length;p++){var l=v[p];if(q(l)||l.children&&(l=this.findFirstFocusable(l.children)))return l}},m.prototype.findLastFocusable=
function(v){if(v)for(var p=v.length-1;0<=p;p--){var l=v[p];if(q(l)||l.children&&(l=this.findLastFocusable(l.children)))return l}},m.prototype.registerFirstFocusable=function(v){this.firstFocusableElement&&this.firstFocusableElement!==v&&this.firstFocusableElement.removeEventListener("keydown",this.handleFocusChange);v.addEventListener("keydown",this.handleFocusChange);this.firstFocusableElement=v;setTimeout(function(){v&&v.focus()},10)},m.prototype.registerLastFocusable=function(v){this.lastFocusableElement&&
this.lastFocusableElement!==v&&this.lastFocusableElement.removeEventListener("keydown",this.handleFocusChange);this.lastFocusableElement=v;this.lastFocusableElement.addEventListener("keydown",this.handleFocusChange)},m.prototype.handleFocusChange=function(v){"Tab"!==v.key&&9!==v.keyCode||(v.shiftKey?document.activeElement===this.firstFocusableElement&&this.lastFocusableElement&&(this.lastFocusableElement.focus(),v.preventDefault()):document.activeElement===this.lastFocusableElement&&this.firstFocusableElement&&
(this.firstFocusableElement.focus(),v.preventDefault()))},m}(e(17).Component);a.a=b},297:function(b,a,e){e.d(a,"a",function(){return g});var q=e(33),t=e(59),u=e(172),g=function(m,v){v=v();v=(Object(t.b)(v)?v:v.gbState).utils;Object(q.q)(v.request,v.portal).then(function(p){var l;p=(null===(l=null==p?void 0:p.trustedOrgs)||void 0===l?void 0:l.filter(function(n){return-1<n.from.established&&-1<n.to.established}))||[];m({type:u.a.TRUSTED_ORGS_LOADED,payload:p})},function(){m({type:u.a.TRUSTED_ORGS_LOADED,
payload:[]})})}},298:function(b,a,e){function q(l,n,k){return new m.Promise(function(r,w){Object(u.r)(l,n,k).then(function(x){r(x)},function(){r()})})}e.d(a,"a",function(){return p});var t=e(1),u=e(33),g=e(59),m=e(28),v=e(25),p=function(l,n){var k=Object(g.b)(l)?l:l.gbState,r=k.utils;l=r.request;var w=r.portal,x=r.portalUser,D=k.config.shareMode;k=[q(l,w,x.username)];return D===v.d.ADMIN&&n.username!==x.username&&k.push(q(l,w,n.username)),m.Promise.all(k).then(function(G){var F,A;if(G[0])return Object(t.a)(((F=
{})[x.username]=G[0].groups,F),D===v.d.ADMIN&&!!G[1]&&((A={})[n.username]=G[1].groups,A))})}},304:function(b,a,e){var q=e(1),t=e(37),u=e(40);b=e(17);var g=e(89);e=function(m){function v(){return null!==m&&m.apply(this,arguments)||this}return Object(q.d)(v,m),v.prototype.render=function(p){var l=this.props,n=l.onCancel,k=l.title,r=l.onBack;return p("div",{class:"share-dlg__container-header",key:"share-view-header"},p("h2",{key:"share-view-header-title",id:"sharing-modal-title",class:"share-dlg__title"},
l.back?p("button",{key:"share-dlg-header-back",class:"share-dlg__back",onclick:r,"aria-label":u.backToShare},p("svg",{viewbox:"0 0 24 24",role:"img"},p("path",{d:g.b})),k):k),p("button",{class:"mod__overlay__close","aria-label":t.close,onclick:n},p("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24",viewBox:"0 0 24 24",fill:"currentColor"},p("path",{d:g.k}))))},v}(b.Component);a.a=e},317:function(b,a,e){e.d(a,"b",function(){return n});e.d(a,"a",function(){return B});var q=
e(1),t=e(28),u=e(33),g=e(80),m=e(47),v=e(62),p=e(196),l=e(25),n=function(K){if(K.depth&&4<K.depth)return t.Promise.resolve([]);switch(K.depth=K.depth?K.depth+1:1,K.item.type){case "Web Map":case "Web Scene":return A(K);case "Web Mapping Application":return w(K);case "Web Experience":case "Web Experience Template":return r(K);case "Big Data File Share":return x(K);case "Data Store":return D(K);default:return t.Promise.resolve([])}},k=function(K){var I=K.item,L=K.request,M=K.portal,N=K.iconDir;return I.itemId?
new t.Promise(function(P){Object(u.v)(L,"".concat(M.restUrl,"/content/items/").concat(I.itemId)).then(function(R){0<Object(p.b)([R]).length?Object(p.a)({items:[R],request:L}).then(function(Y){R.isUpdateLayer=0<Y.length;P(Object(g.a)(M,N,R))},function(){return P(Object(g.a)(M,N,R))}):P(Object(g.a)(M,N,R))},function(){return P(null)})}):t.Promise.resolve(null)},r=function(K){var I=K.item,L=K.request,M=K.portal,N=K.iconDir;return new t.Promise(function(P){var R="".concat(M.restUrl,"/content/items/").concat(I.id);
R=I.typeKeywords.includes("status: Draft")?"".concat(R,"/resources/config/config.json"):"".concat(R,"/data");Object(u.v)(L,R).then(function(Y){(null==Y?0:Y.dataSources)||(null==Y?0:Y.utilities)||P([]);Y=function(ja){var aa=ja.utilities||{};return Object(q.g)(Object(q.g)([],Object.values(ja.dataSources||{}),!0),Object.values(aa),!0).map(function(da){return da.itemId}).filter(function(da){return da})}(Y).map(function(ja){return k({item:{itemId:ja},request:L,portal:M,iconDir:N})});t.Promise.all(Y).then(function(ja){var aa=
ja.filter(function(da){return da});ja=aa.map(function(da){return n({item:da,request:L,portal:M,iconDir:N})});t.Promise.all(ja).then(function(da){da=Object(q.g)(Object(q.g)([],aa,!0),Object(v.b)(da),!0);P(da)})})})})},w=function(K){var I=K.item,L=K.request,M=K.portal,N=K.iconDir;return new t.Promise(function(P){Object(u.v)(L,"".concat(M.restUrl,"/content/items/").concat(I.id,"/data")).then(function(R){R||P([]);var Y=function(ja){var aa,da,ra,ca,fa,la,ta,Q,T,O,Z=(null===(aa=null==ja?void 0:ja.map)||
void 0===aa?0:aa.itemId)?[ja.map.itemId]:[];aa=null!==(ca=null===(ra=null===(da=ja.values)||void 0===da?void 0:da.itemCollection)||void 0===ra?void 0:ra.map(function(na){return na.id}))&&void 0!==ca?ca:[];da=null!==(ta=null===(la=null===(fa=ja.values)||void 0===fa?void 0:fa.webmap)||void 0===la?void 0:la.split(","))&&void 0!==ta?ta:[];ja=null!==(O=null===(T=null===(Q=ja.values)||void 0===Q?void 0:Q.webscene)||void 0===T?void 0:T.split(","))&&void 0!==O?O:[];return Object(q.g)(Object(q.g)(Object(q.g)(Object(q.g)([],
Z,!0),aa,!0),da,!0),ja,!0)}(R).map(function(ja){return k({item:{itemId:ja},request:L,portal:M,iconDir:N})});t.Promise.all(Y).then(function(ja){var aa=ja.filter(function(da){return da});ja=aa.map(function(da){return n({item:da,request:L,portal:M,iconDir:N})});t.Promise.all(ja).then(function(da){var ra;da=Object(q.g)(Object(q.g)([],aa,!0),Object(v.b)(da),!0);(null===(ra=R.values)||void 0===ra?0:ra.group)&&(I.itemData=R,da.push(I));P(da)})})})})},x=function(K){var I=K.item,L=K.request,M=K.portal,N=K.iconDir;
return new t.Promise(function(P){Object(u.v)(L,"".concat(M.restUrl,"/content/items/").concat(I.id,"/relatedItems"),{relationshipType:"BDFSDataStore2BDFSCatalogService",direction:"reverse"}).then(function(R){if(-1<R.relatedItems[0].typeKeywords.indexOf("bigDataFileShare")&&-1<R.relatedItems[0].typeKeywords.indexOf("dataStore"))Object(u.v)(L,"".concat(M.restUrl,"/content/items/").concat(R.relatedItems[0].id,"/relatedItems"),{relationshipType:"CloudDataStore2BDFSDataStore",direction:"reverse"}).then(function(ja){ja.relatedItems.push(R.relatedItems[0]);
ja=G(ja.relatedItems,L,M,N);t.Promise.all(ja).then(function(aa){P(aa)})});else{var Y=G(R.relatedItems,L,M,N);t.Promise.all(Y).then(function(ja){P(ja)})}})})},D=function(K){var I=K.item,L=K.request,M=K.portal,N=K.iconDir;return new t.Promise(function(P){Object(u.v)(L,"".concat(M.restUrl,"/content/items/").concat(I.id,"/relatedItems"),{relationshipType:"CloudDataStore2BDFSDataStore",direction:"reverse"}).then(function(R){R=G(R.relatedItems,L,M,N);t.Promise.all(R).then(function(Y){P(Y)})})})},G=function(K,
I,L,M){return K.map(function(N){return F(N,I,L,M)})},F=function(K,I,L,M){return new t.Promise(function(N){Object(u.v)(I,"".concat(L.restUrl,"/content/items/").concat(K.id)).then(function(P){N(Object(g.a)(L,M,P))})})},A=function(K){var I=K.item,L=K.request,M=K.portal,N=K.iconDir;return new t.Promise(function(P){return function(R){var Y=R.portal,ja=R.item,aa=R.request;return new t.Promise(function(da){if(ja.itemData){var ra=ja.itemData,ca=ra.operationalLayers,fa=ra.baseMap,la=ra.tables;ra=ra.ground;
return da(Object(q.g)(Object(q.g)(Object(q.g)(Object(q.g)([],(null==fa?void 0:fa.baseMapLayers)||[],!0),(null==ra?void 0:ra.layers)||[],!0),ca||[],!0),la||[],!0))}return Object(u.v)(aa,"".concat(Y.restUrl,"/content/items/").concat(ja.id,"/data")).then(function(ta){var Q=ta.baseMap,T=ta.tables,O=ta.ground;return da(Object(q.g)(Object(q.g)(Object(q.g)(Object(q.g)([],ta.operationalLayers||[],!0),(null==Q?void 0:Q.baseMapLayers)||[],!0),(null==O?void 0:O.layers)||[],!0),T||[],!0))},function(){return da([])})})}({request:L,
item:I,portal:M}).then(function(R){t.Promise.all(y(R).map(function(Y){return k({item:Y,request:L,portal:M,iconDir:N})})).then(P)})})},y=function(K){return K.reduce(function(I,L){return(null==L?0:L.itemId)?I.concat(L):(null==L?0:L.layers)&&"GroupLayer"===L.layerType?I.concat(L.layers):I},[])},z={needsShareLevelUpdate:!1,needsGroupSharingUpdate:!1,editable:!0,premium:!1,groupDependentApplication:!1,bdfsDatastore:!1},B=function(K){var I=K.item,L=K.selectedOptions,M=K.selectedGroups,N=K.request;K=K.portal;
return C({item:I,selectedOptions:L})?t.Promise.resolve(Object(q.a)(Object(q.a)({},z),{editable:!1,premium:!0})):H({item:I,selectedGroups:M,request:N,portal:K,selectedOptions:L}).then(function(P){return{needsGroupSharingUpdate:P.needsGroupSharingUpdate,needsShareLevelUpdate:P.needsShareLevelUpdate||E({item:I,selectedOptions:L}),editable:P.editable,premium:!1,groupDependentApplication:P.groupDependentApplication,bdfsDatastore:P.bdfsDatastore}})},C=function(K){var I=K.selectedOptions;K=K.item;return Object(v.e)(I)?
!1:Object(v.d)(I)===l.b.public?(I=K.typeKeywords,-1<K.owner.toLowerCase().indexOf("esri")&&(-1<(null==I?void 0:I.indexOf("Requires Credits"))||-1<(null==I?void 0:I.indexOf("Requires Subscription")))):!1},H=function(K){var I=K.item,L=K.selectedGroups,M=K.selectedOptions,N=K.request,P=K.portal;return new t.Promise(function(R,Y){var ja,aa;"Web Mapping Application"===I.type&&(null===(aa=null===(ja=I.itemData)||void 0===ja?void 0:ja.values)||void 0===aa?0:aa.group)?R(Object(q.a)(Object(q.a)({},z),{groupDependentApplication:!0})):
"Data Store"!==I.type?(Y=I.ownerFolder?"/".concat(I.ownerFolder):"",Y="".concat(P.restUrl,"/content/users/").concat(I.owner).concat(Y,"/items/").concat(I.itemId||I.id),Object(u.v)(N,Y).then(function(da){var ra,ca,fa=da.item.itemControl,la=da.sharing.groups;da=I.access||(null===(ra=I.sharing)||void 0===ra?void 0:ra.access);ra=Object(m.k)(null===(ca=null==P?void 0:P.subscriptionInfo)||void 0===ca?void 0:ca.type)&&Object(v.f)(I);!Object(v.g)(I)&&!ra||M.total!==M.public?fa&&"admin"!==fa&&"update"!==fa?
R(Object(q.a)(Object(q.a)({},z),{editable:!1})):da!==l.b.public?(ca=E({item:I,selectedOptions:M}),L.length>la.length?R(Object(q.a)(Object(q.a)({},z),{needsGroupSharingUpdate:!0,needsShareLevelUpdate:ca})):(fa=L.some(function(ta){return 0>la.indexOf(ta.id)}),R(Object(q.a)(Object(q.a)({},z),{needsGroupSharingUpdate:fa,needsShareLevelUpdate:ca})))):R(Object(q.a)({},z)):R(Object(q.a)(Object(q.a)({},z),{needsShareLevelUpdate:!0,editable:!1}))},function(da){Object(u.v)(N,"".concat(P.restUrl,"/content/items/").concat(I.itemId||
I.id)).then(function(ra){ra=ra.access;ra===l.b.public||ra===l.b.org&&M.total===M.org+M.private?R(Object(q.a)(Object(q.a)({},z),{editable:!1})):R(Object(q.a)(Object(q.a)({},z),{needsShareLevelUpdate:!0,editable:!1}))},function(ra){R(Object(q.a)(Object(q.a)({},z),{needsShareLevelUpdate:!0,editable:!1}))})})):R(Object(q.a)(Object(q.a)({},z),{bdfsDatastore:!0}))})},E=function(K){var I,L=K.item,M=K.selectedOptions;K=!0;Object(v.e)(M)&&(K=!1);M=Object(v.d)(M);M!==l.b.private&&M!==l.b.shared||(K=!1);L=L.access||
(null===(I=L.sharing)||void 0===I?void 0:I.access);return L===l.b.public&&(K=!1),L===M&&(K=!1),M===l.b.private&&(L===l.b.shared&&(K=!1),L===l.b.org&&(K=!1)),K}},33:function(b,a,e){function q(L){return L.reduce(function(M,N){return N&&N.relatedItems?M.concat(N.relatedItems.map(function(P){return P})):M},[])}function t(L,M,N){return L(M,{query:Object(m.a)({f:"json"},N)}).then(function(P){return P.data})}function u(L,M){void 0===M&&(M=100);for(var N=[],P=0;P<Math.ceil(L.length/M);P++)N.push(L.slice(P*
M,(P+1)*M));return N.filter(function(R){return 0<R.length})}function g(L){var M=L.itemIds,N=L.request,P=L.groupIds,R="".concat(L.portal.restUrl,"/content/itemsgroups");return new v.Promise(function(Y,ja){N(R,{method:"get",query:{f:"json",items:M,groups:P}}).then(function(aa){Y(aa.data)},ja)})}e.d(a,"u",function(){return p});e.d(a,"n",function(){return l});e.d(a,"h",function(){return n});e.d(a,"e",function(){return k});e.d(a,"f",function(){return r});e.d(a,"j",function(){return w});e.d(a,"o",function(){return x});
e.d(a,"l",function(){return D});e.d(a,"k",function(){return G});e.d(a,"m",function(){return F});e.d(a,"c",function(){return A});e.d(a,"d",function(){return y});e.d(a,"r",function(){return z});e.d(a,"s",function(){return B});e.d(a,"t",function(){return C});e.d(a,"g",function(){return H});e.d(a,"p",function(){return E});e.d(a,"q",function(){return K});e.d(a,"v",function(){return t});e.d(a,"a",function(){return u});e.d(a,"i",function(){return g});e.d(a,"b",function(){return I});var m=e(1),v=e(28),p=
function(L){return function(M,N){return L({url:M,content:N.query},{usePost:"post"===N.method}).then(function(P){return{data:P}})}},l=function(L,M,N){return t(L,"".concat(M.restUrl,"/portals/self"),{culture:N,default:!0})},n=function(L,M,N){return t(L,"".concat(M.restUrl,"/content/items/").concat(N,"/data"))},k=function(L,M,N,P){return t(L,"".concat(M.restUrl,"/community/groups"),Object(m.a)({q:N},P))},r=function(L,M,N){return t(L,"".concat(M.restUrl,"/community/groups/").concat(N,"/categorySchema"))},
w=function(L,M,N){return t(L,"".concat(M.restUrl,"/portals/").concat(N||M.id,"/categorySchema"))},x=function(L,M){return t(L,"".concat(M.restUrl,"/portals/").concat(M.id,"/servers"))},D=function(L,M,N,P){return L("".concat(M.restUrl,"/portals/").concat(N||M.id,"/collaborationsSummary"),P)},G=function(L,M,N,P){return L("".concat(M.restUrl,"/portals/").concat(N||M.id,"/collaboratedItems"),P)},F=function(L,M,N){return t(L,"".concat(location.protocol,"//").concat(M.portalHostname,"/sharing/rest/portals/").concat(N||
"self"))},A=function(L,M,N){return L("".concat(M.restUrl,"/community/groups"),{query:{f:"json",q:"orgid:".concat(M.id," AND access:public"),num:100,start:N||1,sortField:"title",sortOrder:"asc"}}).then(function(P){return P.data.total>P.data.start+P.data.num?A(L,M,P.data.start+P.data.num).then(function(R){return Object(m.a)(Object(m.a)({},R),{data:Object(m.a)(Object(m.a)({},R.data),{results:P.data.results.concat(R.data.results)})})}):P})},y=function(L,M,N,P){return L("".concat(M.restUrl,"/community/users/").concat(N,
"/provisionedListings"),{query:{f:"json",num:100,start:P||1}}).then(function(R){var Y=v.Promise.all(R.data.provisionedListings.filter(function(aa){return aa.itemId}).map(function(aa){return(new v.Promise(function(da,ra){L("".concat(M.restUrl,"/content/items/").concat(aa.itemId),{method:"get",query:{f:"json"}}).then(function(ca){da(ca.data)},ra)})).catch(function(da){return 0})})),ja=R.data.provisionedListings.map(function(aa){return t(L,"".concat(M.restUrl,"/content/items/").concat(aa.id||aa.itemId,
"/relatedItems?relationshipType\x3dListed2ImplicitlyListed\x26direction\x3dforward")).then(function(da){return da},function(da){})});return R.data.total>R.data.start+R.data.num?y(L,M,N,R.data.start+R.data.num).then(function(aa){return v.Promise.all([Y].concat(ja)).then(function(da){return da[0].results.concat(q(da.slice(1))).concat(aa)})}):v.Promise.all([Y].concat(ja)).then(function(aa){return aa[0].filter(function(da){return void 0!==da}).concat(q(aa.slice(1)))})})},z=function(L,M,N){return t(L,
"".concat(M.restUrl,"/community/users/").concat(N||M.user.username))},B=function(L,M,N){return t(L,"".concat(M.restUrl,"/content/users/").concat(N||M.user.username),{num:1})},C=function(L,M,N){return t(L,"".concat(M.restUrl,"/content/groups/").concat(N))},H=function(L,M,N){return t(L,"".concat(M.restUrl,"/community/groups"),N)},E=function(L,M){return t(L,"".concat(M.restUrl,"/portals/self/settings"))},K=function(L,M){return t(L,"".concat(M.restUrl,"/portals/self/trustedOrgs"),{num:100})},I=function(L,
M){return void 0===M&&(M=","),L.map(function(N){return N.id}).join(M)}},365:function(b,a,e){function q(g,m){var v=g.filter(function(p){var l;return!p.success&&500===(null===(l=null==p?void 0:p.error)||void 0===l?void 0:l.code)}).map(function(p){var l=Object(u.c)(m,function(n){return n.id===p.itemId});return(null==l?void 0:l.title)||p.itemId});return g.map(function(p){p.error=p.error||{};var l=p.error,n=l.messageCode;l=l.code;return n&&t.errors[n]&&(p.error.message=t.errors[n]),l&&t.errors[l]&&(p.error.message=
t.errors[l]),(500===n||500===l&&v)&&(p.error.details=v,p.error.message="".concat(t.errors[500]," ").concat(null==v?void 0:v.join(", "))),p}).filter(function(p){return!p.success})}e.d(a,"a",function(){return q});var t=e(40),u=e(97)},37:function(b,a){b.exports=J},40:function(b,a){b.exports=f},405:function(b,a,e){var q,t=e(1);b=e(40);var u=e(17),g=e(603),m=e(135),v=e(25);e=function(l){function n(){var k=null!==l&&l.apply(this,arguments)||this;return k.handleKeyUp=function(r){"Escape"===r.key&&k.props.handleSecondaryClick()},
k}return Object(t.d)(n,l),n.prototype.render=function(k){var r=this,w=this.props,x=w.handleSecondaryClick,D=w.handlePrimaryClick,G=w.text;if(w.dialogExists&&G)return k("div",{key:"share-mini-dlg__wrapper",afterCreate:function(){window.addEventListener("keyup",r.handleKeyUp)},afterRemoved:function(){window.removeEventListener("keyup",r.handleKeyUp)}},k(g.a,{key:"share-mini-dlg__component",isError:null==G?void 0:G.isError,render:function(){return k("div",{key:"share-mini-dlg",class:"share-mini-dlg"},
k("h2",{class:"share-mini-dlg__title"},G.title),k("p",{class:"share-mini-dlg__body"},G.body),k("div",{class:"share-mini-dlg__buttons"},k("button",{onclick:D,id:"share-mini-dlg-primary",class:"share-dlg__button--primary share-mini-dlg__remove-button"},G.primaryButton),G.secondaryButton&&k("button",{appearance:"outline",onclick:x,id:"share-mini-dlg-secondary",class:"share-dlg__button--secondary share-mini-dlg__cancel-button"},G.secondaryButton)))}}))},n}(u.Component);a.a=Object(u.connect)(function(l){l=
l.resources.currentMiniDlg;return{text:p[l],dialogExists:l!==v.c.NONE}},function(l){return{handleSecondaryClick:function(){l(Object(m.k)(v.c.NONE));l(Object(m.j)(v.a.SHARE))},handlePrimaryClick:function(){l(m.h)}}})(e);var p=((q={})[v.c.OPEN_GROUP_BROWSER]={title:b.MiniDlg.changeShareLevelTitle,body:b.MiniDlg.changeShareLevelBody,primaryButton:b.update,secondaryButton:b.cancel},q[v.c.SET_SHARE_TO_PRIVATE]={title:b.MiniDlg.setShareToPrivateTitle,body:b.MiniDlg.setShareToPrivateBody,primaryButton:b.update,
secondaryButton:b.cancel},q[v.c.REVERT_SHARE_LEVEL]={title:b.MiniDlg.revertShareLevelTitle,body:b.MiniDlg.revertShareLevelBody,primaryButton:b.update,secondaryButton:b.cancel},q[v.c.REVERT_GROUPS]={title:b.MiniDlg.revertGroupsTitle,body:b.MiniDlg.revertGroupsBody,primaryButton:b.update,secondaryButton:b.cancel},q[v.c.EDITABLE_LAYERS]={title:b.MiniDlg.editableLayersTitle,body:b.MiniDlg.editableLayersBody,primaryButton:b.update,secondaryButton:b.cancel,isError:!0},q[v.c.PUBLIC_DATA_COLLECTION_ENABLED]=
{title:b.MiniDlg.publicDataCollectionEnabledTitle,body:b.MiniDlg.publicDataCollectionEnabledBody,primaryButton:b.update,secondaryButton:b.cancel,isError:!0},q[v.c.PUBLIC_DATA_COLLECTION_DISABLED]={title:b.MiniDlg.publicDataCollectionDisabledTitle,body:b.MiniDlg.publicDataCollectionDisabledBody,primaryButton:b.ok,isError:!0},q)},41:function(b,a,e){e.d(a,"b",function(){return q});e.d(a,"d",function(){return u});e.d(a,"c",function(){return g});e.d(a,"a",function(){return m});e.d(a,"f",function(){return l});
var q,t,u,g,m,v=e(1),p=e(27);!function(n){n.openData="openData";n.updateGroups="updateGroups";n.distributed="distributed";n.administrative="administrative";n.orgSettings="orgSettings"}(q||(q={}));(t||(t={})).owner="owner";(function(n){n.itemOwner="itemOwner";n.inOrg="inOrg";n.outsideOrg="outsideOrg"})(u||(u={}));(function(n){n.myOrg="org";n.partnered="collaboration";n.anyOrg="anyOrg"})(g||(g={}));(function(n){n.USER="USER";n.OWNER="OWNER";n.DESIGNATION="DESIGNATION";n.DATE_CREATED="DATE_CREATED";
n.MEMBERSHIP="MEMBERSHIP"})(m||(m={}));var l={currentUsername:"",allUsers:{},searchString:"",availableFilters:[]};a.e=function(n,k){switch(void 0===n&&(n=l),k.type){case p.a.CLEAR_FILTERS:switch(k.payload){case m.DESIGNATION:return Object(v.a)(Object(v.a)({},n),{designationFilter:void 0});case m.DATE_CREATED:return Object(v.a)(Object(v.a)({},n),{dateCreatedFilter:void 0});case m.OWNER:return Object(v.a)(Object(v.a)({},n),{ownerFilter:void 0});case m.USER:return n;case m.MEMBERSHIP:return Object(v.a)(Object(v.a)({},
n),{membershipFilter:void 0});default:return Object(v.a)(Object(v.a)({},n),{designationFilter:void 0,dateCreatedFilter:void 0,membershipFilter:void 0,ownerFilter:void 0})}case p.a.UPDATE_OWNER_FILTER:return Object(v.a)(Object(v.a)({},n),{ownerFilter:k.payload===n.ownerFilter?void 0:k.payload});case p.a.UPDATE_USERNAME_FILTER:return Object(v.a)(Object(v.a)({},n),{currentUsername:k.payload});case p.a.UPDATE_CREATED_ON_FILTER:return Object(v.a)(Object(v.a)({},n),{dateCreatedFilter:k.payload.created});
case p.a.UPDATE_GROUP_DESIGNATION_FILTER:return Object(v.a)(Object(v.a)({},n),{designationFilter:k.payload===n.designationFilter?void 0:k.payload});case p.a.UPDATE_MEMBERSHIP_FILTER:return Object(v.a)(Object(v.a)({},n),{membershipFilter:k.payload===n.membershipFilter?void 0:k.payload});case p.a.SET_USERS:return Object(v.a)(Object(v.a)({},n),{allUsers:k.payload.reduce(function(r,w){var x;return Object(v.a)(Object(v.a)({},r),((x={})[w.username]=w,x))},{})});case p.a.SET_SEARCH_STRING:return Object(v.a)(Object(v.a)({},
n),{searchString:k.payload});default:return n}}},422:function(b,a,e){e.d(a,"a",function(){return u});e.d(a,"b",function(){return g});b=e(475);a=e(476);var q=e(59),t=e(477);e=e(17);q.a.ui.filter.expanded=860<window.innerWidth;var u={resources:b.b,utilities:a.b,gbState:q.a,config:t.b},g=Object(e.combineReducers)({resources:b.a,utilities:a.a,gbState:q.c,config:t.a})},47:function(b,a,e){function q(C){return!(!C.urlKey||!C.customBaseUrl)||C.isPortal}function t(C){return C.role===x.admin||C.role===x.accountAdmin}
function u(C){return Object(F.a)(C.roleId)&&0<(C.roleId||"").length}function g(C){return"Developer Subscription"===C}function m(C){return!u(C)||u(C)&&-1<(C.privileges||[]).indexOf("portal:admin:viewItems")}function v(C){return-1<(C.privileges||[]).indexOf("portal:user:shareToOrg")}function p(C){return-1<(C.privileges||[]).indexOf("portal:user:shareToGroup")}function l(C){return-1<(C.privileges||[]).indexOf("portal:user:shareToPublic")}function n(C,H){return k(C)||r(C)||w(C)}function k(C){return-1<
(C.privileges||[]).indexOf("portal:admin:shareToGroup")}function r(C){return-1<(C.privileges||[]).indexOf("portal:admin:shareToOrg")}function w(C){return-1<(C.privileges||[]).indexOf("portal:admin:shareToPublic")}e.d(a,"m",function(){return y});e.d(a,"h",function(){return z});e.d(a,"n",function(){return B});e.d(a,"l",function(){return q});e.d(a,"i",function(){return t});e.d(a,"j",function(){return u});e.d(a,"k",function(){return g});e.d(a,"g",function(){return m});e.d(a,"b",function(){return v});
e.d(a,"a",function(){return p});e.d(a,"c",function(){return l});e.d(a,"d",function(){return k});e.d(a,"e",function(){return r});e.d(a,"f",function(){return w});var x,D=e(64),G=e(142),F=e(7),A=e(61);!function(C){C.user="org_user";C.accountUser="account_user";C.publisher="org_publisher";C.accountPublisher="account_publisher";C.admin="org_admin";C.accountAdmin="account_admin";C.viewer="iAAAAAAAAAAAAAAA";C.dataEditor="iBBBBBBBBBBBBBBB"}(x||(x={}));var y=function(C){var H=C.items;return!!C.user.orgId&&
H.every(function(E){return E.isOrgItem})},z=function(C){var H=C.items,E=C.user,K=C.portal;C=H[0];var I=Object(A.c)(C,E),L=u(E),M=n(E,K);if(L=Object(A.a)(C,E)&&-1<(E.privileges||[]).indexOf("portal:admin:updateItems")&&!L)L=!q(K)||p(E)||v(E)||K.canSharePublic&&l(E)||n(E,K);K=L;L=C.owner;return!(C.portal.isPortal&&L!==E.username&&L.includes("esri_")&&!["esri_livingatlas"].includes(L))&&(I||K||y({items:H,user:E})&&M)},B=function(C,H){return Object(D.a)(Object(G.a)(C))(H)}},475:function(b,a,e){function q(l){var n=
Object(u.a)(Object(u.a)({},v),{total:l.length});return l.forEach(function(k){switch(k.access?k.access:k.sharing&&k.sharing.access){case m.b.public:n[m.b.public]++;break;case m.b.org:n[m.b.org]++;break;case m.b.shared:case m.b.private:n[m.b.private]++}}),n}e.d(a,"b",function(){return p});var t,u=e(1),g=e(135),m=e(25),v=((t={total:0})[m.b.private]=0,t[m.b.org]=0,t[m.b.public]=0,t),p={items:[],portalUser:{},selectedOptions:Object(u.a)({},v),selectedOptionsDirty:!1,dependentItems:{needShareLevelUpdate:[],
needGroupSharingUpdate:[],notEditable:[],premium:[],needEditableWarning:[],needPubliclyEditableWarning:[],needDataCollectionEnabled:[],needGroupDependentApplicationWarning:[],needBDFSDatastoreUpdate:[]},currentMiniDlg:m.c.NONE,isLoading:!1};a.a=function(l,n){var k;switch(void 0===l&&(l=p),n.type){case g.a.SET_HELP_MAP:return Object(u.a)(Object(u.a)({},l),{helpMap:n.payload});case g.a.SET_SELECTED_SHARE_LEVEL:var r=l.selectedOptions.total,w=Object(u.a)(Object(u.a)(Object(u.a)({},v),((k={})[n.payload]=
r,k)),{total:r}),x=q(l.items);n=!Object.keys(w).reduce(function(D,G){return D&&w[G]===x[G]},!0);return Object(u.a)(Object(u.a)({},l),{selectedOptions:w,selectedOptionsDirty:n});case g.a.SET_INITIAL_SHARE_LEVEL:return Object(u.a)(Object(u.a)({},l),{selectedOptions:q(l.items),selectedOptionsDirty:!1});case g.a.SET_DEPENDENT_ITEMS:return Object(u.a)(Object(u.a)({},l),{dependentItems:n.payload});case g.a.SET_MINI_DIALOG:return Object(u.a)(Object(u.a)({},l),{currentMiniDlg:n.payload});default:return l}}},
476:function(b,a,e){e.d(a,"b",function(){return q});var q={onCancel:function(){return null},onComplete:function(){return null},request:function(t){return null},portal:{},iconDir:""};a.a=function(t,u){return void 0===t&&(t=q),u.type,t}},477:function(b,a,e){e.d(a,"b",function(){return u});var q=e(1),t=e(135);b=e(25);var u={groupsPerPage:10,currentView:b.a.LOADING,shareMode:b.d.DEFAULT,userType:b.e.ORG};a.a=function(g,m){switch(void 0===g&&(g=u),m.type){case t.a.SET_CURRENT_VIEW:return Object(q.a)(Object(q.a)({},
g),{currentView:m.payload});case t.a.SET_SHARE_MODE:return Object(q.a)(Object(q.a)({},g),{shareMode:m.payload});case t.a.SET_USER_TYPE:return Object(q.a)(Object(q.a)({},g),{userType:m.payload});default:return g}}},59:function(b,a,e){e.d(a,"b",function(){return g});e.d(a,"a",function(){return m});e.d(a,"c",function(){return v});b=e(17);a=e(213);var q=e(206),t=e(133),u=e(208);e=e(205);var g=function(p){return!p.gbState},m={config:e.b,parameters:q.b,groups:t.f,ui:u.b,utils:a.b},v=Object(b.combineReducers)({config:e.a,
parameters:q.a,groups:t.b,ui:u.a,utils:a.a})},597:function(b,a,e){e.d(a,"a",function(){return g});var q;b=e(598);a=e(605);var t=e(606),u=e(604);e=e(25);var g=((q={})[e.a.SHARE]=b.a,q[e.a.LOADING]=u.a,q[e.a.GROUP_BROWSER]=a.a,q[e.a.DEPENDENT_ITEM_CONFIRMATION]=t.a,q)},598:function(b,a,e){var q=e(1),t=e(40);b=e(17);var u=e(304),g=e(599),m=e(135),v=e(405),p=e(25);e=function(l){function n(){return null!==l&&l.apply(this,arguments)||this}return Object(q.d)(n,l),n.prototype.render=function(k){var r=this.props,
w=r.miniDialogOpen,x=r.onCancel,D=r.attemptToSaveShareState;return[k(u.a,{key:"share-dlg-header",onCancel:x,title:t.share}),k("div",{key:"share-view-content",class:"share-dlg__contents"},k(g.a,{key:"share-dialog"}),k(v.a,{key:"share-mini-dlg"})),k("div",{class:"share-dlg__container-footer",key:"share-view-footer"},k("button",{class:"share-dlg__button--primary",key:"share-view-save",id:"share-modal-primary",disabled:w,onclick:function(){D()}},t.save),k("button",{class:"share-dlg__button--secondary",
key:"share-view-close",id:"share-modal-secondary",disabled:w,onclick:x},t.cancel))]},n}(b.Component);a.a=Object(b.connect)(function(l){return{miniDialogOpen:l.resources.currentMiniDlg!==p.c.NONE,onCancel:l.utilities.onCancel}},function(l){return{attemptToSaveShareState:function(){l(m.d)}}})(e)},599:function(b,a,e){var q=e(1),t=e(40);b=e(17);var u=e(89),g=e(600),m=e(602),v=e(135);e=function(p){function l(){return null!==p&&p.apply(this,arguments)||this}return Object(q.d)(l,p),l.prototype.render=function(n){var k=
this.props,r=k.portal,w=k.resetShareLevel;k=k.selectedOptionsDirty;return n("div",{class:"share-level__wrap",key:"share-level__wrap"},n("div",{class:"share-dlg__header",key:"share-dlg__header"},n("h3",{id:"share-options-title",class:"share-options__title"},t.ShareDialog.setSharingLevel),k&&n("button",{onclick:w,class:"btn-svg share-options__reset share-dlg__btn-svg"},n("svg",{xmlns:"http://www.w3.org/2000/svg",role:"img",width:"16",height:"16",viewBox:"0 0 24 24"},n("path",{d:u.g})),t.ShareOptions.revert)),
n(g.a,{key:"share-options"}),n("hr",{class:"share-dlg__divider"}),n(m.a,{key:"share-groups-section",portal:r}))},l}(b.Component);a.a=Object(b.connect)(function(p){return{portal:p.utilities.portal,selectedOptionsDirty:p.resources.selectedOptionsDirty}},function(p){return{resetShareLevel:function(){p(v.e)}}})(e)},600:function(b,a,e){var q,t=e(1),u=e(40);b=e(17);var g=e(25),m=e(601),v=e(135),p=e(47),l=e(62);e=function(x){function D(){return null!==x&&x.apply(this,arguments)||this}return Object(t.d)(D,
x),D.prototype.render=function(G){var F=this.props,A=F.handleOptionClick,y=F.selectedOptions,z=F.availableShareLevels,B=F.showOptions,C=F.userType,H=F.portal,E=F.possibleShareLevels,K=F.items;return G("fieldset",{class:"share-options"},B&&E.map(function(I){var L,M=g.b[I];I=Object(l.g)(K[0])||Object(p.k)(null===(L=null==H?void 0:H.subscriptionInfo)||void 0===L?void 0:L.type)&&Object(l.f)(K[0])?u.ShareDialog.sharingLimitedItemDisclaimer:u.ShareDialog.cannotShareToLevelDisclaimer;return G(m.a,{key:M,
level:M,handleLevelClick:function(){A(M)},disabledText:I,total:y.total,count:y[M],userType:C,disabled:-1===z.indexOf(M)})}),B&&z.length<E.length&&!Object(l.g)(K[0])&&G("p",{key:"share-options__disclaimer--limited",class:"share-options__disclaimer"},u.ShareDialog.sharingLimitedDisclaimer),!B&&G("p",{key:"share-options__disclaimer--none",class:"share-options__disclaimer"},u.ShareDialog.noShareDisclaimer))},D}(b.Component);a.a=Object(b.connect)(function(x){var D=x.utilities.portal,G=x.resources,F=G.portalUser,
A=G.items;G=G.selectedOptions;var y=x.config;x=y.userType;var z={portal:D,user:F,items:A,userType:x};y=y.shareMode!==g.d.GROUP;F=r({portal:D,portalUser:F,selectedOptions:G,userType:x});return{selectedOptions:G,showOptions:y,userType:x,availableShareLevels:F.filter(function(B){return w[B](z)}),possibleShareLevels:F,portal:D,items:A}},function(x){return{handleOptionClick:function(D){x(Object(v.f)(D))}}})(e);var n=function(x,D){return D.every(function(G){return G.owner===x.username})},k=function(x,D){return D.every(function(G){return G.owner===
x.username||G.portal.id===(null==x?void 0:x.orgId)})},r=function(x){var D=x.portal,G=x.portalUser,F=x.selectedOptions;return x.userType===g.e.PUBLIC?[g.b.private,g.b.public]:D.canSharePublic||0!==F.public||Object(p.i)(G)?[g.b.private,g.b.org,g.b.public]:[g.b.private,g.b.org]},w=((q={})[g.b.private]=function(x){return!0},q[g.b.org]=function(x){var D=x.user,G=x.items;if(x.userType===g.e.PUBLIC)return!1;x=n(D,G);var F=k(D,G);G=Object(p.i)(D)&&!Object(p.j)(D)&&F;F=Object(p.i)(D)&&Object(p.j)(D)&&F;return Object(p.b)(D)&&
(x||G)||Object(p.e)(D)&&(G||F)},q[g.b.public]=function(x){var D,G=x.portal,F=x.user,A=x.items;x=x.userType;var y=Object(p.k)(null===(D=null==G?void 0:G.subscriptionInfo)||void 0===D?void 0:D.type);if(1===A.length&&(Object(l.g)(A[0])||y&&Object(l.f)(A[0])))return!1;D=G.canSharePublic;G=n(F,A);y=k(F,A);A=Object(p.i)(F)&&!Object(p.j)(F)&&y;y=Object(p.i)(F)&&Object(p.j)(F)&&y;return x===g.e.PUBLIC||Object(p.c)(F)&&(G&&D||A)||Object(p.f)(F)&&(A||y)},q)},601:function(b,a,e){var q,t,u=e(1),g=e(40);b=e(17);
var m=e(89),v=e(25);e=function(k){function r(){return null!==k&&k.apply(this,arguments)||this}return Object(u.d)(r,k),r.prototype.render=function(w){var x=this.props,D=x.level,G=x.count,F=x.total,A=x.handleLevelClick,y=x.disabled,z=x.disabledText,B=n[D],C=B.description;B=B.title;x.userType===v.e.PUBLIC&&D===v.b.public&&(C=g.ShareDialog.everyoneDescriptionPublic);x=G===F;var H=0<G&&!x,E=p(g.ShareOptions[D],G,F);G=p(g.ShareOptions.numItems,G,F);return w("label",{key:B,id:"share-level-".concat(D),classes:{"share-options__label":!0,
"share-options__label--selected":x,"share-options__label--indeterminate":H,"share-options__label--disabled":y},"aria-label":y&&z?z:void 0},w("input",{type:"radio",name:"sharing-type",key:B,class:"share-options__input",checked:x,disabled:y,indeterminate:H,onclick:function(K){K.preventDefault();y||A()}}),w("svg",{style:"\n              width: 24px;\n              height: 24px;\n              fill: currentColor;\n            ",role:"none","aria-hidden":"true",focusable:"false"},w("path",{d:l[D]})),w("span",
{class:"share-options__content"},w("h4",{class:"share-options__header"},B,H&&w("span",{class:"share-options__indeterminate-text","aria-label":y?void 0:E},w("svg",{style:"\n                      width: 1rem;\n                      height: 1rem;\n                      margin: 0 0.25rem;\n                      display: inline-block;\n                      vertical-align: -0.25rem;\n                      fill: #959595;\n                    "},w("path",{d:m.d})),w("span",null,G))),w("p",{class:"share-options__description"},
C)))},r}(b.Component);a.a=e;var p=function(k,r,w){return void 0===k&&(k=""),k.replace("${num}","".concat(r)).replace("${total}","".concat(w))},l=((q={})[v.b.public]=m.c,q[v.b.org]=m.e,q[v.b.private]=m.h,q[v.b.shared]=m.h,q),n=((t={})[v.b.private]={title:g.ShareDialog.owner,description:g.ShareDialog.ownerDescription},t[v.b.shared]={title:g.ShareDialog.owner,description:g.ShareDialog.ownerDescription},t[v.b.org]={title:g.ShareDialog.organization,description:g.ShareDialog.organizationDescription},t[v.b.public]=
{title:g.ShareDialog.everyone,description:g.ShareDialog.everyoneDescription},t)},602:function(b,a,e){var q=e(1),t=e(40);b=e(17);var u=e(243),g=e(89),m=e(135),v=e(47),p=e(184),l=e(69),n=e(61);e=function(k){function r(){return null!==k&&k.apply(this,arguments)||this}return Object(q.d)(r,k),r.prototype.render=function(w){var x=this.props,D=x.selectedGroupsDatas,G=x.portal,F=x.handleRemoveGroupsClick,A=x.handleRevertGroupsClick,y=x.handleEditGroupSharingClick,z=x.groupSharingMixed,B=x.hasGroups,C=x.groupsDirty,
H=x.canShareItemToGroup,E=x.selectorItemsLength;x.isPrivate;x.isDefaultAdmin;x.isItemOwner;return w("div",{class:"share-groups"},w("h3",{class:"share-groups__header"},t.groups.setGroupSharing,H&&0<D.length&&!C&&w("button",{class:"share-dlg__button--transparent btn-svg share-dlg__btn-svg",id:"share-groups__remove",onclick:F,"aria-haspopup":"true"},w("svg",{xmlns:"http://www.w3.org/2000/svg",role:"img",width:"16",height:"16",viewBox:"0 0 24 24"},w("path",{d:g.k})),t.groups.remove),C&&w("button",{onclick:A,
class:"btn-svg share-options__reset share-dlg__btn-svg"},w("svg",{xmlns:"http://www.w3.org/2000/svg",role:"img",width:"16",height:"16",viewBox:"0 0 24 24"},w("path",{d:g.g})),t.ShareOptions.revert)),w("div",{class:"share-groups__body"},0<D.length?this.getGroupIcons({needsWarning:z,groupDatas:D,portal:G,selectorItemsLength:E,tsx:w}):w("p",{class:"share-groups__empty"},B?t.groups.noneYet:t.groups.noGroupsToShare),B&&H&&w("button",{onclick:y,id:"edit-group-sharing-button",class:"share-dlg__button--secondary btn-svg share-groups__edit share-dlg__btn-svg"},
w("svg",{xmlns:"http://www.w3.org/2000/svg",role:"img",width:"16",height:"16",viewBox:"0 0 24 24"},w("path",{d:g.i})),t.groups.editGroupSharing)))},r.prototype.getGroupIcons=function(w){var x=w.groupDatas,D=w.portal,G=w.tsx,F=w.needsWarning,A=w.selectorItemsLength;w=Math.max(x.length-3,0);return G("div",null,G("div",{key:"group-thumbnails",class:"share-groups__thumbnails"},x.slice(0,3).map(function(y){return G(u.a,{transparent:y.selectedByIds&&y.selectedByIds.length!==A,group:y.group,stacked:!0,portal:D})}),
0<w&&G("span",{class:"share-groups__plus"},"+".concat(w))),F&&G("p",{class:"share-groups__empty"},t.groups.mixedGroupSharing))},r}(b.Component);a.a=Object(b.connect)(function(k){var r,w,x,D,G=k.utilities.portal,F=k.resources.portalUser,A=k.gbState.groups,y=A.selectedGroups,z=A.initialSelectedGroups;k=A.selectorItems;A=A.hasGroups;var B=Object.keys(y).map(function(I){return y[I]}).sort(function(I,L){return I.selectedByIds&&L.selectedByIds?L.selectedByIds.length-I.selectedByIds.length:0}),C=B[B.length-
1];C=(C&&C.selectedByIds&&C.selectedByIds.length||0)<(k&&k.length||0);var H=!Object(v.l)(G)||Object(v.a)(F)||Object(v.d)(F)&&(x=F.username,D=F.orgId,Object.keys(y).every(function(I){I=y[I].group;var L=D&&D===(null==I?void 0:I.orgId);return x===(null==I?void 0:I.owner)||L})),E=Object.keys(y).length,K=Object.keys(z);E=K.length!==E||K.reduce(function(I,L){return I||!y[L]||Object(p.a)({selectedBy:(y[L].selectedByIds||[]).map(function(M){return{id:M}}),initialSelectedByIds:z[L].selectedByIds||[]})},!1);
K="private"===(null===(r=null==k?void 0:k[0])||void 0===r?void 0:r.access);r=Object(v.i)(F)&&!Object(v.j)(F);return{selectedGroupsDatas:B,groupSharingMixed:C,hasGroups:A,canShareItemToGroup:H,selectorItemsLength:k.length,groupsDirty:E,isDefaultAdmin:r,isPrivate:K,isItemOwner:(null===(w=Object(n.b)({user:F,items:k,portal:G}))||void 0===w?void 0:w.username)===F.username}},function(k){return{handleRemoveGroupsClick:function(){k({type:l.a.CLEAR_SELECTION})},handleRevertGroupsClick:function(){k(m.c)},
handleEditGroupSharingClick:function(){k(m.b)}}})(e)},603:function(b,a,e){var q=e(296);a.a=function(t,u){var g=t.render;return u("div",{class:"mini-dlg__wrapper",key:"mini-dlg__wrapper"},u("div",{classes:{"mini-dlg":!0,"min-dlg--error":!!t.isError}},u(q.a,{key:"mini-dlg-trap"},g())),u("div",{class:"mini-dlg__scrim"}))}},604:function(b,a,e){var q=e(1),t=e(40);b=e(17);var u=e(304),g=e(203),m=e.n(g),v=e(405);e=function(p){function l(){return null!==p&&p.apply(this,arguments)||this}return Object(q.d)(l,
p),l.prototype.render=function(n){return[n(u.a,{key:"share-dlg-header-loading",onCancel:this.props.handleCancelClick,title:t.share}),n("div",{key:"loading-view-content",class:"share-dlg__contents share-loader__container"},n(m.a,{key:"share-loader",text:t.loading}),n(v.a,{key:"share-mini-dlg"})),n("div",{class:"share-dlg__container-footer",key:"share-view-footer"},n("button",{class:"share-dlg__button--primary",key:"loading-view-save",id:"share-modal-primary",disabled:""},t.update),n("button",{class:"share-dlg__button--secondary",
key:"loading-view-close",id:"share-modal-secondary",onclick:this.props.handleCancelClick},t.cancel))]},l}(b.Component);a.a=Object(b.connect)(function(p){return{handleCancelClick:p.utilities.onCancel}},function(p){return{}})(e)},605:function(b,a,e){var q=e(1),t=e(40);b=e(17);var u=e(135),g=e(252),m=e.n(g),v=e(304),p=e(25);e=function(l){function n(){return null!==l&&l.apply(this,arguments)||this}return Object(q.d)(n,l),n.prototype.render=function(k){return[k(v.a,{key:"share-dlg-header-loading",onCancel:this.props.onCancel,
onBack:this.props.closeGroupBrowser,back:!0,title:t.groupSharing}),k("div",{key:"group-browser-view-content-gb",class:"share-dlg__contents share-dlg__contents--wide"},k(m.a,{key:"share-group-browser"})),k("div",{class:"share-dlg__container-footer",key:"share-view-footer"},k("button",{class:"share-dlg__button--primary",key:"group-browser-view-save",id:"share-modal-primary",onclick:this.props.closeGroupBrowser},t.ok))]},n}(b.Component);a.a=Object(b.connect)(function(l){return{onCancel:l.utilities.onCancel}},
function(l){return{closeGroupBrowser:function(){l(Object(u.j)(p.a.SHARE))}}})(e)},606:function(b,a,e){var q=e(1),t=e(40);b=e(17);var u=e(304),g=e(607),m=e(135);e=function(v){function p(l){l=v.call(this,l)||this;return l.state={loading:!1},l}return Object(q.d)(p,v),p.prototype.render=function(l){var n=this,k=this.props,r=k.handlePrimaryClick,w=k.handleCancelClick;k=k.updatable;var x=this.state.loading;return[l(u.a,{key:"share-dlg-header-loading",onCancel:w,title:t.DependentItems.updateSharing}),l("div",
{key:"dependent-item-view-content",class:"share-dlg__contents"},l(g.a,{key:"dependent-items"})),l("div",{class:"share-dlg__container-footer",key:"share-view-footer"},l("button",{class:"share-dlg__button--primary",key:"dependent-item-view-save",id:"share-modal-primary",loading:x,onclick:function(){n.setState({loading:!0});r()}},k?t.update:t.ok),k&&l("button",{class:"share-dlg__button--secondary",key:"dependent-item-view-close",id:"share-modal-secondary",onclick:w},t.cancel))]},p}(b.Component);a.a=
Object(b.connect)(function(v){var p=v.utilities;v=v.resources;var l=v.dependentItems,n=l.needShareLevelUpdate,k=l.needGroupSharingUpdate,r=l.needEditableWarning,w=v.selectedOptions;return{updatable:0<Object(q.g)(Object(q.g)(Object(q.g)(Object(q.g)([],l.needBDFSDatastoreUpdate,!0),n,!0),k,!0),r,!0).length,handleCancelClick:function(){p.onComplete({selectedOptions:w})}}},function(v){return{handlePrimaryClick:function(){v(m.i)}}})(e)},607:function(b,a,e){var q=e(1),t=e(40);b=e(17);var u=e(278),g=e(62);
e=function(m){function v(){return null!==m&&m.apply(this,arguments)||this}return Object(q.d)(v,m),v.prototype.render=function(p){var l=this.props,n=l.dependentItems,k=n.needGroupSharingUpdate,r=n.notEditable,w=n.premium,x=n.needEditableWarning,D=n.needPubliclyEditableWarning,G=n.needDataCollectionEnabled,F=n.needGroupDependentApplicationWarning,A=n.needBDFSDatastoreUpdate,y=l.portal,z=l.items,B=l.helpMap;l=l.authenticatedItems;n=Object(q.g)(Object(q.g)([],n.needShareLevelUpdate,!0),k,!0);var C=n.map(function(E){return E.id});
n=n.filter(function(E,K){return C.indexOf(E.id)===K});var H=1===z.length&&"Web Map"===z[0].type;z=t.DependentItems[H?"premiumItemsWebMap":"premiumItems"];k=B&&[p("p",{class:"dependent-items__count__text"},t.DependentItems.needDataCollectionEnabledText),p("a",{href:"".concat(y.helpBase).concat(B[120004130]),target:"_blank",rel:"noopener noreferrer"},t.DependentItems.needDataCollectionEnabledLearnMoreText)];B=B&&[p("p",{class:"dependent-items__count__text"},t.DependentItems.premiumText),p("a",{href:"".concat(y.helpBase).concat(B[120001307]),
target:"_blank",rel:"noopener noreferrer"},t.DependentItems[H?"premiumLearnMoreTextMap":"premiumLearnMoreText"])];return p("div",{class:"dependent-items-confirmation",key:"dependent-items-confirmation"},p(u.a,{key:"need-editable-warning-list",items:x,title:t.DependentItems.needEditableTitle,text:t.DependentItems.needEditableText,portal:y,error:!0}),p(u.a,{key:"need-editable-warning-public-list",items:D,title:t.DependentItems.needPubliclyEditableTitle,text:t.DependentItems.needPubliclyEditableText,
portal:y,error:!0}),p(u.a,{key:"authenticated-items-warning",items:l,title:t.DependentItems.authenticatedItemsTitle,text:t.DependentItems.authenticatedItemsText,portal:y,error:!0}),p(u.a,{key:"need-data-collection-endabled-list",items:G,title:t.DependentItems.needDataCollectionEnabledTitle,text:k,portal:y,error:!0}),p(u.a,{key:"group-dependent",items:F,title:t.DependentItems.groupDependentApplicationTitle,text:t.DependentItems.groupDependentApplicationText,portal:y,error:!0}),p(u.a,{key:"needs-update-list",
items:n,title:t.DependentItems.updateItemsCount,text:t.DependentItems.confirmationDescription,portal:y}),p(u.a,{key:"premium-items-list",items:w,title:z,text:B,portal:y}),p(u.a,{key:"not-editable-list",items:r,title:t.DependentItems.uneditableItemsCount,text:t.DependentItems.uneditableItemsText,portal:y}),p(u.a,{key:"bdfs-datastore-dependent",items:A,title:t.DependentItems.updateItemsCount,text:t.DependentItems.needBDFSDatastoreUpdateText,portal:y,error:!0}))},v}(b.Component);a.a=Object(b.connect)(function(m){var v=
m.resources,p=v.items,l=v.helpMap;m=m.utilities.portal;return{dependentItems:v.dependentItems,authenticatedItems:Object(g.c)(p,v.selectedOptions,v.selectedOptionsDirty),portal:m,helpMap:l,items:p}},function(){return{}})(e)},608:function(b,a,e){var q=e(1),t=e(40);b=e(17);var u=e(99);e=function(g){function m(){return null!==g&&g.apply(this,arguments)||this}return Object(q.d)(m,g),m.prototype.render=function(v){var p=this.props,l=p.item;p=p.portal;var n=l.title||l.name,k=Object(u.a)(p);k="".concat(k,
"/home/item.html?id\x3d").concat(l.id);return v("li",{key:l.id,class:"dependent-item"},v("h3",{class:"dependent-item__title"},p?v("a",{href:k,target:"_blank",rel:"noreferrer"},n):v("span",null,n)),v("span",{class:"dependent-item__details"},l.iconURI&&v("img",{class:"dependent-item__icon",src:l.iconURI}),v("p",{class:"dependent-item__description"},t.DependentItems.itemDescription.replace("${type}",l.displayName||l.type).replace("${owner}",l.owner?l.owner:""))))},m}(b.Component);a.a=e},61:function(b,
a,e){function q(p,l){return(null==p?void 0:p.owner)===l.username}function t(p,l){var n;if(!(n=q(p,l)))if(Object(g.a)(p.isAdmin))n=!!p.isAdmin;else{n=p.owner;var k="admin"===p.itemControl;n=!(p.portal.isPortal&&!q(p,l)&&k&&-1<n.indexOf("esri_")&&0>["esri_livingatlas","esri_demographics","esri_boundaries"].indexOf(n))&&k}return n}function u(p,l){return t(p,l)||"update"===p.itemControl}e.d(a,"d",function(){return q});e.d(a,"c",function(){return t});e.d(a,"a",function(){return u});e.d(a,"b",function(){return v});
var g=e(7),m=e(47),v=function(p){var l=p.user,n=p.items;p=p.portal;return Object(m.m)({items:n,user:l})&&Object(m.h)({items:n,user:l,portal:p})&&Object(m.g)(l)&&n[0].itemOwner||l}},62:function(b,a,e){function q(B){var C=B.groupIds,H=B.shareLevelOptions,E=B.restUrl,K=B.request,I=B.unshare;return v.Promise.all(B.items.map(function(L,M){return new v.Promise(function(N,P){K("".concat(E,"/content/items/").concat(L.itemId||L.id,"/").concat(I?"unshare":"share"),{method:"post",query:Object(g.a)({f:"json",
groups:C,confirmItemControl:!0},H||{})}).then(N,P)})})).catch(function(L){throw L;})}function t(B,C){return new v.Promise(function(H,E){var K,I=null===(K=B.helpMap)||void 0===K?void 0:K.m;I?H(I):C("".concat(B.restUrl,"/portals/helpmap"),{query:{f:"json",format:"json"}}).then(function(L){var M;H(null===(M=L.data.helpMap)||void 0===M?void 0:M.m)},E)})}e.d(a,"i",function(){return l});e.d(a,"h",function(){return n});e.d(a,"b",function(){return k});e.d(a,"e",function(){return r});e.d(a,"d",function(){return w});
e.d(a,"g",function(){return A});e.d(a,"f",function(){return y});e.d(a,"c",function(){return z});e.d(a,"a",function(){return t});var u,g=e(1),m=e(33),v=e(28);b=e(25);var p=e(61),l=function(B){var C=B.items,H=B.groups,E=B.restUrl,K=B.request,I=B.portalUser;if(0===C.length)return v.Promise.resolve();var L=Object(m.b)(H);return C.every(function(M){return Object(p.d)(M,I)})?new v.Promise(function(M,N){if(!H||0===H.length)return M();var P={f:"json",items:Object(m.b)(C),groups:L};K("".concat(E,"/content/users/").concat(I.username,
"/unshareItems"),{method:"post",query:P}).then(M,N)}):q({items:C,groupIds:L,restUrl:E,request:K,unshare:!0})},n=function(B){var C=B.items,H=B.groups,E=B.restUrl,K=B.request,I=B.portalUser,L=B.selectedOptions;B=B.ignoreShareLevel;if(0===C.length)return v.Promise.resolve();if(!B&&!L)throw"Selected options must be provided unless share level is ignored.";var M=Object(m.b)(H),N=B?{}:x(L);return C.every(function(P){return Object(p.d)(P,I)})?new v.Promise(function(P,R){K("".concat(E,"/content/users/").concat(I.username,
"/shareItems"),{method:"post",query:Object(g.a)({f:"json",items:Object(m.b)(C),groups:M,confirmItemControl:!0},N)}).then(function(Y){Y=Y.data;Y.results.every(function(ja){return ja.success})?P():R(Y)},R)}):q({items:C,groupIds:M,shareLevelOptions:N,restUrl:E,request:K})},k=function(B){return B.reduce(function(C,H){return Object(g.g)(Object(g.g)([],C,!0),H,!0)},[])},r=function(B){return 1<Object.keys(B).filter(function(C){return"total"!==C&&0<B[C]}).length},w=function(B){return Object.keys(B).filter(function(C){return"total"!==
C}).reduce(function(C,H){return B[H]===B.total?H:C})},x=function(B){return r(B)?{}:D[w(B)]},D=((u={})[b.b.public]={org:!1,everyone:!0},u[b.b.org]={org:!0,everyone:!1},u[b.b.private]={org:!1,everyone:!1},u[b.b.shared]={org:!1,everyone:!1},u),G="Location Tracking Service;Location Tracking View;IoTFeed;IoTRealTimeAnalytic;IoTBigDataAnalytic;IoTFeatureLayer;IoTMapImageLayer;IoTStreamLayer;Administrative Report;EditExtensionIndoorsSpaces;ArcgisWorkflowJobLocation".split(";"),F=["Knowledge Graph","Pro Project"],
A=function(B){var C,H,E=B.typeKeywords,K=B.type;K=G.some(function(L){return-1<E.indexOf(L)})&&"Real Time Analytic"!==K&&"Big Data Analytic"!==K;var I=!(null===(C=null==B?void 0:B.portal)||void 0===C?0:C.isPortal)&&"Image Service"===B.type&&-1<(null===(H=B.url)||void 0===H?void 0:H.indexOf("://iservices"))&&-1<B.url.indexOf("arcgis.com");B=F.includes(B.type);return K||I||B},y=function(B){var C,H=null===(C=B.typeKeywords)||void 0===C?void 0:C.includes("Hosted Service");return["Vector Tile Service",
"Map Service","Scene Service","Feature Service"].includes(B.type)&&H},z=function(B,C,H){return H&&C.public===C.total?B.filter(function(E){return-1<E.typeKeywords.indexOf("DeveloperBasemap")}):[]}},64:function(b,a,e){function q(){for(var t=[],u=0;u<arguments.length;u++)t[u]=arguments[u];return function(g){return t.reduceRight(function(m,v){return v(m)},g)}}e.d(a,"a",function(){return q})},69:function(b,a,e){var q;e.d(a,"a",function(){return q});(function(t){t.LOADING_GROUPS="LOADING_GROUPS";t.LOAD_GROUPS_SUCCESS=
"LOAD_GROUPS_SUCCESS";t.LOAD_GROUPS_FAIL="LOAD_GROUPS_FAIL";t.SELECT_GROUPS="SELECT_GROUPS";t.SET_INITIAL_GROUPS="SET_INITIAL_GROUPS";t.DESELECT_GROUPS="DESELECT_GROUPS";t.REVERT_GROUPS="REVERT_GROUPS";t.CLEAR_SELECTION="CLEAR_SELECTION";t.SET_SELECTOR_ITEMS="SET_SELECTOR_ITEMS";t.SET_HAS_GROUPS="SET_HAS_GROUPS"})(q||(q={}))},7:function(b,a,e){function q(n){return 0===Object.keys(n).length&&n.constructor===Object}function t(n){return null!=n}function u(n,k){return p.apply(null,arguments)}function g(n,
k){return l.apply(null,arguments)}e.d(a,"b",function(){return q});e.d(a,"a",function(){return t});e.d(a,"e",function(){return v});e.d(a,"c",function(){return u});e.d(a,"d",function(){return g});var m=e(1);b=e(15);var v=Object(b.a)(function(n,k){k=Object(m.a)({},k);return delete k[n],k}),p=Object(b.a)(function(n,k){return Object.keys(k).reduce(function(r,w){return r[w]=n(k[w],w,k),r},{})}),l=Object(b.a)(function(n,k){return Object.keys(k).reduce(function(r,w){return n(k[w],w,k)&&(r[w]=k[w]),r},{})})},
80:function(b,a,e){e.d(a,"a",function(){return p});e.d(a,"b",function(){return l});var q=e(64);b=e(7);var t=e(120),u=e(119),g=e(114),m=e(118),v=e(117),p=function(n,k,r){return Object(q.a)(Object(v.a)(n),Object(m.a)(n),Object(g.a)(k),Object(u.a)(n),Object(t.a)(n))(r)},l=Object(q.a)(Object(b.e)("patchedDescription"),Object(b.e)("thumbURI"),Object(b.e)("iconURI"),Object(b.e)("displayName"),Object(b.e)("badges"))},840:function(b,a,e){e.r(a);var q=e(1);b=e(17);var t=e(422);e.d(a,"reducers",function(){return t.b});
e.d(a,"initialState",function(){return t.a});var u=e(597),g=e(279),m=e.n(g),v=e(25);e=function(p){function l(){return null!==p&&p.apply(this,arguments)||this}return Object(q.d)(l,p),l.prototype.render=function(n){var k=this.props.currentView;return n("div",{key:"share-container",class:"share-dlg__container"},n(m.a,{key:"sharing-overlay",scrollable:!0,size:k===v.a.GROUP_BROWSER?"large":"small",headerId:"sharing-modal-title"},n(u.a[k],{key:k})))},l}(b.Component);a.default=Object(b.connect)(function(p){return{currentView:p.config.currentView}},
function(p){return{}})(e)},86:function(b,a,e){var q;e.d(a,"a",function(){return q});(function(t){t.SET_SEARCH_STRING="SET_SEARCH_STRING";t.CHANGE_SORT_ORDER="CHANGE_SORT_ORDER";t.CHANGE_SORT_FIELD="CHANGE_SORT_FIELD";t.UPDATE_USERNAME_FILTER="UPDATE_USERNAME_FILTER";t.UPDATE_OWNER_FILTER="UPDATE_OWNER_FILTER";t.UPDATE_GROUP_DESIGNATION_FILTER="UPDATE_GROUP_DESIGNATION_FILTER";t.UPDATE_CREATED_ON_FILTER="UPDATE_CREATED_ON_FILTER";t.UPDATE_MEMBERSHIP_FILTER="UPDATE_MEMBERSHIP_ON_FILTER";t.SET_USERS=
"SET_USERS";t.CLEAR_FILTERS="CLEAR_FILTERS"})(q||(q={}))},89:function(b,a,e){e.d(a,"a",function(){return q});e.d(a,"b",function(){return t});e.d(a,"c",function(){return u});e.d(a,"d",function(){return g});e.d(a,"e",function(){return m});e.d(a,"h",function(){return v});e.d(a,"i",function(){return p});e.d(a,"j",function(){return l});e.d(a,"k",function(){return n});e.d(a,"g",function(){return k});e.d(a,"f",function(){return r});var q="M15.5 5l-7 7-7-7zM3.914 6L8.5 10.586 13.086 6z",t="M15.707 20h-1.414l-7.5-7.5 7.5-7.5h1.414l-7.5 7.5z",
u="M13.802 4.306a.683.683 0 0 1 .708.76.528.528 0 0 1 .357.467c.055.888-1.127.8-1.014-.09l-.005-.002a.575.575 0 0 1-.046-1.135zM11.5 23A11.5 11.5 0 0 1 0 11.5v-.021a11.738 11.738 0 0 1 2.057-6.534 12.15 12.15 0 0 1 4.12-3.637h.005A11.595 11.595 0 0 1 13.618.202l.002.002a11.525 11.525 0 0 1 9.325 10.188v.004A11.497 11.497 0 0 1 11.5 23zm9.795-7.748a7.604 7.604 0 0 1-.666-1.746 4.55 4.55 0 0 1-.651-1.655 1.383 1.383 0 0 1-.857-.063l-.332.46c-1.962 0-2.952-.953-3.048-1.636a2.144 2.144 0 0 0-.992.133l-.113.177-.794.021a2.538 2.538 0 0 1-.483-.213 7.396 7.396 0 0 0-.628.541 1.463 1.463 0 0 1-.941.97 1.544 1.544 0 0 0-.961 1.24 2.264 2.264 0 0 1-.449 1.34 2.446 2.446 0 0 1 .811 1.108c.406 1.373 1.703.122 3.24.622.843.277 1.569.18 1.832 1.177a1.695 1.695 0 0 1 .028.937 1.452 1.452 0 0 1-.025.098 2.11 2.11 0 0 1 .327 1.883 10.447 10.447 0 0 0 4.702-5.394zm-1.709-7.096l.25.15c.058.072.16.194.208.265a1.699 1.699 0 0 1 1.517 2.251 3.648 3.648 0 0 1 .435.592 10.477 10.477 0 0 0-3.824-8.016h-.103a1.768 1.768 0 0 1-1.938 2.838 4.716 4.716 0 0 1-.723.7 1.525 1.525 0 0 1 .97.078l.183-.654a6.478 6.478 0 0 1 2.115 1.527c.295.369-.659 1.364.91.27zm2.17 5.578q.026-.121.049-.243a5.462 5.462 0 0 0-.843-1.825 18.554 18.554 0 0 0 .793 2.068zM11.405 1.147c.155.004.424.03.574.029l.093-.147c-.189-.01-.375-.029-.566-.029a1.863 1.863 0 0 1-.102.147zm-8.209 16.74a1.557 1.557 0 0 1 .244-.252c-.26-.196-.54-.372-.808-.545q.263.41.564.797zm11.737 3.525c.434-.81.812-.526.724-1.629a.802.802 0 0 0-.327-.551c-.2-.205-.155-.428-.051-.682.254-.64-.126-.81-.608-.914a3.809 3.809 0 0 0-2.22-.08 1.602 1.602 0 0 1-1.633-.391c-.608-.489-.383-.895-.91-1.416-1.3-1.218-.08-1.268-.08-2.268a2.63 2.63 0 0 1 1.416-2.11c.302-.106.437-.127.541-.427.236-.604.565-.578.988-1.055.145-.164.257-.285.48-.285a.723.723 0 0 1 .384.135s.282.166.372.2l.074-.002a3.411 3.411 0 0 1 2.208-.269.557.557 0 0 1 .432.7c.017.441 1.488 1.005 1.588.837a.745.745 0 0 0 .066-.184.48.48 0 0 1 .562-.362c.2.01.514.231.703.231a4.382 4.382 0 0 0 .786-.238c.332-.095.21-.532.067-.847-.078-.207-.375-.237-.595-.237-.266.003-.498-.021-.616-.307a.433.433 0 0 0-.161-.218c.007.01-.022.034-.042.068a.52.52 0 0 1-.871.07c-.272-.394-.011-.289-.317-.67a3.283 3.283 0 0 0-.72-.63.545.545 0 0 1-.525.387c-.265 0-.36-.155-.594-.303-.245-.142-.625-.1-.929.324a2.663 2.663 0 0 1-.49.436c-.211.264-.036.313-.4.628-.342.317-.623.179-1.069.059-.477-.111-.42-.747-.347-1.246.078-.5.294-.712.802-.58.729.178.762.038.579-.475-.17-.378-.042-.636.215-.748.78-.317 1.183-1.443 1.906-1.125a.766.766 0 0 0 .887-1.249.868.868 0 0 1-.316-.254.095.095 0 0 0-.07-.033c-.219 0-.155.495-.138.713a.492.492 0 0 1-.49.525c-.281 0-.753-.454-.953-.653-.385-.387-.119-.603.087-1.004a5.425 5.425 0 0 1 .34-.69 1.71 1.71 0 0 1 .588-.442 10.406 10.406 0 0 0-3.028-.996c-.332.335-.51.95-.954 1.01-.302.054-.912-.059-1.193-.006-.391.08-1.292.553-1.396.553-.57 0-.81-.74.197-1.574a10.398 10.398 0 0 0-1.884.475 7.258 7.258 0 0 1-1.042 1.57c-.299.372-.662.062-1.088.016-.565-.056-.325 1.011-1.198.915a5.775 5.775 0 0 0-.588-.039A10.467 10.467 0 0 0 1 11.5c0 .054.007.107.008.161.061.103.41.9.588 1.252.944 1.962.527 1.457.562 2.457.01.238.202.343.42.493a10.28 10.28 0 0 1 2.006 1.477.495.495 0 0 1 .111.525c-.07.264-.346.34-.568.502a.431.431 0 0 0-.21.376 10.425 10.425 0 0 0 11.017 2.669z",
g="M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM7.5 5.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM7 7h1v5H7zm2 5H6v-1h3z",m="M15 16h4v-4h-4zm1-3h2v2h-2zM5 11h4V7H5zm1-3h2v2H6zm16 14V4H12V2H5v2H2v18H0v1h11v-5h2v5h11v-1zm-8 0v-5h-4v5H3V5h3V3h5v2h10v17zm-9-6h4v-4H5zm1-3h2v2H6zm4-2h4V7h-4zm1-3h2v2h-2zm-1 8h4v-4h-4zm1-3h2v2h-2zm4-2h4V7h-4zm1-3h2v2h-2z",v="M16 4a4 4 0 1 0-4 4 4 4 0 0 0 4-4zm-4 3a3 3 0 1 1 3-3 3.003 3.003 0 0 1-3 3zm4.75 1h-9.5A2.25 2.25 0 0 0 5 10.25v9.25A1.5 1.5 0 0 0 6.5 21H8v2.25a.75.75 0 0 0 .75.75h6.5a.75.75 0 0 0 .75-.75V21h1.5a1.5 1.5 0 0 0 1.5-1.5v-9.25A2.25 2.25 0 0 0 16.75 8zM18 19.5a.501.501 0 0 1-.5.5H16v-8h-1v11H9V12H8v8H6.5a.501.501 0 0 1-.5-.5v-9.25A1.251 1.251 0 0 1 7.25 9h9.5A1.251 1.251 0 0 1 18 10.25z",
p="M11 4a3 3 0 1 0-3 3 3 3 0 0 0 3-3zM8.001 6A2 2 0 1 1 10 4a2 2 0 0 1-1.999 2zM10 10h1v.921a3.23 3.23 0 0 0-1 2.329zm0 8.5a2.487 2.487 0 0 0 .055.5H5.75a.75.75 0 0 1-.75-.75V16h-.5A1.5 1.5 0 0 1 3 14.5V9.25A2.25 2.25 0 0 1 5.25 7h5.5a2.232 2.232 0 0 1 1.308.426A3.95 3.95 0 0 0 12 8a3.96 3.96 0 0 0 .593 2.067 3.21 3.21 0 0 0-.593.189V9.25A1.251 1.251 0 0 0 10.75 8h-5.5A1.251 1.251 0 0 0 4 9.25v5.25a.5.5 0 0 0 .5.5H5v-5h1v8h4zM19 8a3 3 0 1 0-3 3 3 3 0 0 0 3-3zm-2.999 2A2 2 0 1 1 18 8a2 2 0 0 1-1.999 2zm2.749 1h-5.5A2.25 2.25 0 0 0 11 13.25v5.25a1.5 1.5 0 0 0 1.5 1.5h.5v2.25a.75.75 0 0 0 .75.75h4.5a.75.75 0 0 0 .75-.75V20h.5a1.5 1.5 0 0 0 1.5-1.5v-5.25A2.25 2.25 0 0 0 18.75 11zM20 18.5a.5.5 0 0 1-.5.5H19v-5h-1v8h-4v-8h-1v5h-.5a.5.5 0 0 1-.5-.5v-5.25A1.251 1.251 0 0 1 13.25 12h5.5A1.251 1.251 0 0 1 20 13.25z",
l="M8.718 8l5.303 5.303-.707.707L8.01 8.707 2.707 14.01 2 13.303 7.303 8 2 2.697l.707-.707L8.01 7.293l5.304-5.303.707.707z",n="M13.207 12.5l7.778 7.778-.707.707-7.778-7.778-7.778 7.778-.707-.707 7.778-7.778-7.778-7.778.707-.707 7.778 7.778 7.778-7.778.707.707z",k="M21 10v7a3.003 3.003 0 0 1-3 3H4v-1h14a2.003 2.003 0 0 0 2-2v-7a2.003 2.003 0 0 0-2-2H6.691l2.649 2.648-.707.707-3.89-3.89 3.832-3.833.707.707L6.622 7H18a3.003 3.003 0 0 1 3 3z",r="M149.375 182.444l56.463-56.471-25.376-25.376 5.523-14.541-59.827-22.726L110.828 48H56v124h18.365l12.437 4.724 34.182 34.101 15.33-15.294 7.07 2.686 5.164-13.597zm50.806-56.472l-47.34 47.35 26.064-68.626zM112 54.828L141.172 84H112zM60 52h48v36h36v80H60zm60.984 153.17L95.95 180.199l36.263 13.775zm20.081-12.113L85.632 172H148V85.172L133.059 70.23l47.766 18.144-34.628 91.171z"},
97:function(b,a,e){function q(p,l){if(null==p?0:p.length)for(var n=void 0,k=0;k<p.length;k++)if(l(n=p[k]))return n}function t(p){return p.filter(function(l){return 0<l.length})}function u(p,l,n){var k=[];return l.forEach(function(r){(n?r[n].toLowerCase()===p.toLowerCase():r.toLowerCase()===p.toLowerCase())?k.unshift(r):k.push(r)}),k}e.d(a,"e",function(){return g});e.d(a,"f",function(){return m});e.d(a,"c",function(){return q});e.d(a,"b",function(){return t});e.d(a,"a",function(){return v});e.d(a,
"d",function(){return u});b=e(15);var g=function(p,l,n){return n.indexOf(p)===l},m=Object(b.a)(function(p,l){var n={};return l.filter(function(k){return!n[k[p]]&&(n[k[p]]=!0,!0)})}),v=function(p,l){return p.length===l.length&&p.reduce(function(n,k){return n&&-1<l.indexOf(k)},!0)}},99:function(b,a,e){e.d(a,"a",function(){return t});e.d(a,"b",function(){return u});var q=e(1),t=function(g){return g?g.urlKey?"".concat(location.protocol,"//").concat(g.urlKey,".").concat(g.customBaseUrl):"".concat(location.protocol,
"//").concat(g.portalHostname):""},u=function(g){return Object(q.a)(Object(q.a)({},g),{baseUrl:t(g)})}}})})},"arcgisonline/pages/item/widgets/AdvancedOfflineOptions/AdvancedOfflineOptions":function(){define("require exports tslib calcite-web/js/calcite-web dojo/topic dojo/_base/lang dojo/string dojo/text!./templates/AdvancedOfflineOptions.html dojo/i18n!../../../../nls/arcgisonline dijit/_TemplatedMixin dijit/_WidgetBase ../../../../sharing/util ../../../../esriGeowConfig ../../../utils/dom ../../../dijit/Overlay ../../../dijit/InfoTooltip ./TilePackageBrowser ../../../../tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);return function(){function k(r,w){this.title=e.default.itemProperties.advancedOptions.overlayTitle;this.i18n=e.default;
this.overlayContents=b.default.substitute(a.default,{i18n:this.i18n});this._fileNameEdited=!1}k.prototype.open=function(){this.inherited(arguments);this.domNode.classList.add("overlay--top");this._editableFeaturesAndAttachmentsOption=this.domNode.querySelector(".js-edit-features-and-attachments");this._editableFeaturesOnlyOption=this.domNode.querySelector(".js-edit-features-only");this._editableFeaturesNoneOption=this.domNode.querySelector(".js-edit-none");this._readonlyFeaturesAndAttachmentsOption=
this.domNode.querySelector(".js-readonly-features-and-attachments");this._readonlyFeaturesOnlyOption=this.domNode.querySelector(".js-readonly-features-only");this._tileWebmapOption=this.domNode.querySelector(".js-tile-webmap");this._tileMobileOption=this.domNode.querySelector(".js-tile-mobile");this._tileMobileFileNameContainer=this.domNode.querySelector(".js-file-name-container");this._tileMobileFilename=this.domNode.querySelector(".js-tile-mobile-file-name");this._fileNameError=this.domNode.querySelector(".js-tile-mobile-file-name-error");
this._tileOrgOption=this.domNode.querySelector(".js-tile-org");this._tileOrgSearchContainer=this.domNode.querySelector(".js-tile-search-container");this._searchResults=this.domNode.querySelector(".js-search-results");this._updateLoader=this.domNode.querySelector(".js-update-loader");this._learnMoreLink=this.domNode.querySelector(".js-learn-more");this.browsePackageBtn=this.domNode.querySelector(".js-browse-package-btn");this.selectedPackageEl=this.domNode.querySelector(".js-selected-package");this._overlay.insertBefore(this.domNode.querySelector(".js-update-loader-container"),
this.domNode.querySelector(".overlay-title-bar"));var r=this.page.portal.helpMap.m["120000899"];this._learnMoreLink.href=this.page.portal.helpBase+(r?r:"");this._overlayActionBar.insertBefore(this._learnMoreLink,this._overlayActionBar.querySelector("nav"));this._attachmentsInfo=new p.default({content:this.i18n.itemProperties.advancedOptions.attachmentTooltip},this.domNode.querySelector(".js-attachments-info"));r=(this._itemData=d.default.clone(this.item.itemData))&&this._itemData.applicationProperties&&
this._itemData.applicationProperties.offline||{};this._editableLayers=r.editableLayers;this._readonlyLayers=r.readonlyLayers;this._offlineBasemap=r.offlinebasemap;c.default.accordion();this._selectOptions();m.default.showNode(this.domNode.querySelector(".js-tile-org-container"));this.page.portal.isPortal&&g.default.utilNetworkOfflineOptionsEnabled&&this.renderCapabilitiesSection();this._addListeners()};k.prototype.close=function(){this.inherited(arguments)};k.prototype.renderCapabilitiesSection=function(){var r,
w,x,D,G;m.default.showNode(this.domNode.querySelector(".js-capabilities-section"));var F=this.i18n.itemProperties.advancedOptions,A=F.downloadSimpleInfo,y=F.downloadEditingInfo,z=F.downloadTracingInfo;this.createInfoTooltip(F.offlineCapabilitiesTooltip,".js-capabilities-info",!0);this.createInfoTooltip(A,".js-util-simple-info");this.createInfoTooltip(y,".js-util-editing-info");this.createInfoTooltip(z,".js-util-tracing-info");F=(null===(x=null===(w=null===(r=this._itemData)||void 0===r?void 0:r.applicationProperties)||
void 0===w?void 0:w.offline)||void 0===x?void 0:x.syncDataOptions)||(0<(null===(G=null===(D=this._itemData)||void 0===D?void 0:D.utilityNetworks)||void 0===G?void 0:G.length)?156:12);12===F?this.domNode.querySelector(".js-network-simple-features").checked=!0:156===F?this.domNode.querySelector(".js-network-editing").checked=!0:1036===F&&(this.domNode.querySelector(".js-network-tracing").checked=!0)};k.prototype.createInfoTooltip=function(r,w,x){r=new p.default({content:r},this.domNode.querySelector(w));
x||r.domNode.classList.add("margin-left-quarter");return r};k.prototype._addListeners=function(){var r=this;[].slice.call(this.domNode.querySelectorAll(".js-tile-option")).forEach(function(w){w.addEventListener("change",function(){m.default.showHide(r._tileMobileFileNameContainer,r._tileMobileOption.checked);m.default.showHide(r._tileOrgSearchContainer,r._tileOrgOption.checked)})});this._tileMobileFilename.addEventListener("change",function(){r._fileNameEdited=!0;r._onFilenameKeyup()});this._tileMobileFilename.addEventListener("keyup",
this._onFilenameKeyup.bind(this));this.browsePackageBtn.addEventListener("click",function(){var w=new l.default({portal:r.page.portal});w.openItemBrowser();r.domNode.classList.remove("overlay--top");r.own(w.on("close",function(){w.destroy();r.domNode.classList.add("overlay--top")}),w.on("select",function(x){r.selectedTilePackageId=x.id;r.renderSelectedPackage(x)}))})};k.prototype.renderSelectedPackage=function(r){this.selectedPackageEl.innerHTML='\x3ca href\x3d"item.html?id\x3d'.concat(r.id,'" target\x3d"_blank"\x3e').concat(r.title,
"\x3c/a\x3e")};k.prototype._onFilenameKeyup=function(){if(this._fileNameEdited){var r=this._tileMobileFilename.value;this._fileNameError.textContent="";0===r.length?this._fileNameError.textContent=this.i18n.itemProperties.advancedOptions.emptyFileNameError:this._isValidFileExtension(r)?(this._fileNameError.classList.remove("is-active"),this._tileMobileFilename.classList.remove("input-error")):this._fileNameError.textContent=this.i18n.itemProperties.advancedOptions.invalidFileExtension;0<this._fileNameError.textContent.length&&
(this._fileNameError.classList.add("is-active"),this._tileMobileFilename.classList.add("input-error"))}};k.prototype.handlePrimary=function(){var r=this;if(this._isValid()){var w=this.domNode.querySelector(".js-editable-features:checked");w={applicationProperties:f.__assign(f.__assign({},this._itemData.applicationProperties||{}),{offline:{editableLayers:{download:w.value,sync:w.dataset.sync},readonlyLayers:{downloadAttachments:this._readonlyFeaturesAndAttachmentsOption.checked}}})};this._tileMobileOption.checked?
w.applicationProperties.offline.offlinebasemap={referenceBasemapName:this._tileMobileFilename.value}:this._tileOrgOption.checked&&(w.applicationProperties.offline.offlinebasemap={referenceBasemapName:this.selectedTilePackageId});var x=this.domNode.querySelector(".js-util-network-option:checked");x&&this.page.portal.isPortal&&(w.applicationProperties.offline.syncDataOptions=+x.value);this._itemData=f.__assign(f.__assign({},this._itemData),w);w={text:JSON.stringify(this._itemData)};this._updateLoader.classList.add("is-active");
this._primaryBtn.disabled=!0;this._cancelBtn.disabled=!0;this.closeBtn.disabled=!0;this.page.updateItem(w).then(function(D){r.close();D&&D.code&&D.message?h.default.publish("settings/error",D):h.default.publish("settings/update")},function(D){r.close();h.default.publish("settings/error",D)})}};k.prototype._isValidFileExtension=function(r){return/\.(vtpk|tpk|tpkx)$/i.test(r)};k.prototype._isValid=function(){var r=this._tileMobileFilename.value;this._fileNameEdited=!0;if(this._tileMobileOption.checked&&
(this._fileNameError.textContent="",0===r.length?this._fileNameError.textContent=this.i18n.itemProperties.advancedOptions.emptyFileNameError:this._isValidFileExtension(r)||(this._fileNameError.textContent=this.i18n.itemProperties.advancedOptions.invalidFileExtension),0<this._fileNameError.textContent.length))return this._fileNameError.classList.add("is-active"),this._tileMobileFilename.classList.add("input-error"),!1;this._fileNameError.classList.remove("is-active");this._tileMobileFilename.classList.remove("input-error");
return!0};k.prototype._selectOptions=function(){return f.__awaiter(this,void 0,void 0,function(){var r;return f.__generator(this,function(w){switch(w.label){case 0:this._editableLayers&&"featuresAndAttachments"!==this._editableLayers.download?"features"===this._editableLayers.download?this._editableFeaturesOnlyOption.checked=!0:this._editableFeaturesNoneOption.checked=!0:this._editableFeaturesAndAttachmentsOption.checked=!0;!this._readonlyLayers||this._readonlyLayers.downloadAttachments?this._readonlyFeaturesAndAttachmentsOption.checked=
!0:this._readonlyFeaturesOnlyOption.checked=!0;if(this._offlineBasemap&&0!==this._offlineBasemap.referenceBasemapName.length)return[3,1];this._tileWebmapOption.checked=!0;return[3,4];case 1:if(!(0<this._offlineBasemap.referenceBasemapName.length)||this.hasTilePackageExtension(this._offlineBasemap.referenceBasemapName))return[3,3];this._tileOrgOption.checked=!0;this.selectedTilePackageId=this._offlineBasemap.referenceBasemapName;return[4,this.getItemById(this.selectedTilePackageId)];case 2:return r=
w.sent(),this.renderSelectedPackage(r),m.default.showNode(this._tileOrgSearchContainer),[3,4];case 3:0<this._offlineBasemap.referenceBasemapName.length&&(this._tileMobileOption.checked=!0,this._tileMobileFilename.value=this._offlineBasemap.referenceBasemapName,m.default.showNode(this._tileMobileFileNameContainer)),w.label=4;case 4:return[2]}})})};k.prototype.hasTilePackageExtension=function(r){return[".vtpk",".tpk",".tpkx"].some(function(w){return-1<r.indexOf(w)})};k.prototype.getItemById=function(r){return f.__awaiter(this,
void 0,void 0,function(){var w;return f.__generator(this,function(x){switch(x.label){case 0:return x.trys.push([0,2,,3]),[4,u.default.request({url:"".concat(g.default.restBaseUrl,"content/items/").concat(r)})];case 1:return w=x.sent(),[2,w];case 2:return x.sent(),[2,{id:r,title:r}];case 3:return[2]}})})};return k=f.__decorate([(0,n.default)(t.default,q.default,v.default)],k)}()})},"arcgisonline/pages/item/widgets/AdvancedOfflineOptions/TilePackageBrowser":function(){define("require exports tslib esri/request esri/Evented dojo/i18n!../../../../nls/arcgisonline dijit/_TemplatedMixin dijit/_WidgetBase arcgis-components/wrappers/ItemBrowser ../../../../tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q){Object.defineProperty(J,"__esModule",{value:!0});c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);q=f.__importDefault(q);S=function(){function t(u,g){this.templateString="\x3cdiv\x3e\x3c/div\x3e";this.i18n=f.__assign(f.__assign({},d.default.common),d.default.itemProperties.advancedOptions)}t.prototype.openItemBrowser=function(){var u=this;this.itemBrowserContainer||(this.itemBrowserContainer=document.createElement("div"),
document.body.appendChild(this.itemBrowserContainer));this.itemBrowser?this.itemBrowser.renderContainer.children[0].classList.remove("hide"):this.itemBrowser=new e.ItemBrowserWrapper(this.itemBrowserContainer,{apiVersion:3,portal:this.portal,request:c.default,initialState:{settings:{config:{layoutMode:"adjustable",allowedItemTypes:["Vector Tile Package","Raster Tile Package","Tile Package"],resultsPerQuery:20,usePrimaryButtonStyle:!1,noItemsFoundText:this.i18n.noItemsFound,dialogTitle:this.i18n.selectTilePackage,
mainActionTitle:this.i18n.selectAction,onSelect:function(g){u.emit("select",null===g||void 0===g?void 0:g[0]);u.closeItemBrowser()},baseSections:["myOrganization"],onBack:function(){u.closeItemBrowser()},enableMapAreaFilter:!1,showSubResources:{},multiSelect:!1,addQueryParameters:function(){return' -type:"Map Area" -typekeywords:"MapAreaPackage"'}}},parameters:{section:"myOrganization",sort:{field:"modified",order:"desc"}}}})};t.prototype.closeItemBrowser=function(){this.itemBrowser.renderContainer.children[0].classList.add("hide");
this.itemBrowserContainer.innerHTML="";this.itemBrowser=null;this.emit("close")};return t=f.__decorate([(0,q.default)(a.default,b.default,h.default)],t)}();J.default=S})},"arcgisonline/pages/item/widgets/_metadata":function(){define("require exports tslib dojo/_base/lang dojo/Deferred esri/lang dojo/topic ../../../esriGeowConfig ../../../sharing/util ../../utils/arrays ../../statusUtil dojo/i18n!../../../nls/arcgisonline arcgisonline/pages/utils/metadata".split(" "),function(S,J,f,c,h,d,b,a,e,q,t,
u,g){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);return{_isLoading:!1,_gxeContext:null,_editor:null,_gxeAdaptor:null,_portalItemContext:null,_portalItemAdaptor:null,_formats:{formatDefault:"default",formatArcGIS:"arcgis",formatFGDC:"fgdc",formatINSPIRE:"inspire",formatISO19139:"iso19139",formatISO1913932:"iso19139-3.2",formatISO19115:"iso19115"},
configureGeocoders:function(m,v){m=m?c.default.clone(m):[];for(var p=0;p<m.length;p++){var l=m[p];if(e.default.isEsriWorldGeocoder(l)){l.suggest=!0;l.name=u.default.common.esriWorldGeocoder;l.singleLineFieldName="SingleLine";d.default.isDefined(l.placefinding)||(l.placefinding=!0);d.default.isDefined(l.batch)||(l.batch=!0);break}}m=m.filter(function(n){return(null===n||void 0===n?void 0:n.placefinding)&&(null===n||void 0===n?void 0:n.singleLineFieldName)});0<m.length&&(v.arcgisGeocoder=!1,v.geocoders=
m)},openLayerEditor:function(m,v){var p=this,l,n,k=new h.default,r=e.default.getToken(),w=a.default.self,x=0<(null===(l=w.metadataFormats)||void 0===l?void 0:l.length)?c.default.clone(w.metadataFormats):null,D=(null===(n=w.helperServices)||void 0===n?0:n.geocode)?c.default.clone(w.helperServices.geocode):[],G=q.default.find(m.layers||[],function(F){return F.id.toString()===v.toString()});if(null===G||void 0===G?0:G.layerMetadataUrl)G.rawMetadataUrl=G.layerMetadataUrl.split("?")[0];else if(null===
G||void 0===G?0:G.url)G.rawMetadataUrl="".concat(G.url.split("?")[0],"/metadata");this._isLoading?k.reject():(this._isLoading=!0,window.require(["arcgisonline/metadata"],function(){window.require(["esri/dijit/metadata/context/GxeContext","esri/dijit/metadata/context/GxeAdaptor","esri/dijit/metadata/editor/EditorDialog","esri/dijit/metadata/editor/Editor","dojo/domReady!"],function(F,A,y){var z=u.default.itemProperties.metadataISO1913932,B={allowSaveAndClose:!1,allowViewHtml:!0,allowedTypeKeys:["arcgis"],
arcgisMode:!0,defaultArcGISStyle:null,basemapUrl:null,basemap:null,getOriginalXml:void 0},C={getAllowDeleteMetadata:function(){return!0},getAllowEditMetadata:function(){return!0},getOriginalXml:void 0,deleteMetadata:function(){var E=new h.default;e.default.request({url:"".concat(G.rawMetadataUrl,"/update/"),content:{metadata:"",metadataUploadFormat:"xml"}},{usePost:!0}).then(function(K){(null===K||void 0===K?0:K.statusUrl)?t.default.checkAsyncJobStatus(K.statusUrl).then(function(){b.default.publish("metadata/layerEditor/updated",
{deleted:!0});E.resolve()},function(){b.default.publish("metadata/layerEditor/updated",{deleted:!0});E.resolve()}):(E.resolve(),b.default.publish("metadata/layerEditor/updated",{deleted:!0}))},function(K){return E.resolve()});return E},saveXml:function(E,K){var I=new h.default;e.default.request({url:"".concat(G.rawMetadataUrl,"/update/"),content:{metadata:K,metadataUploadFormat:"xml"}},{usePost:!0}).then(function(L){(null===L||void 0===L?0:L.statusUrl)?t.default.checkAsyncJobStatus(L.statusUrl).then(function(){b.default.publish("metadata/layerEditor/updated",
{changed:!0});I.resolve()},function(){setTimeout(function(){b.default.publish("metadata/layerEditor/updated",{changed:!0});I.resolve()},3E3)}):(b.default.publish("metadata/layerEditor/updated",{changed:!0}),I.resolve())},function(L){return I.resolve()});return I},viewHtml:function(){var E=r?"\x26token\x3d".concat(r):"",K=new h.default;E="?format\x3ddefault\x26f\x3dhtml".concat(E);(null===G||void 0===G?0:G.rawMetadataUrl)?e.default.openPage(G.rawMetadataUrl+E,!1):e.default.openPage("".concat(G.url.split("?")[0],
"/metadata").concat(E),!1);K.resolve();return K}},H=function(){p._editor=new y({title:G.name,gxeAdaptor:p._gxeAdaptor,gxeContext:p._gxeContext});p._editor.show();p._isLoading=!1;k.resolve(p._editor)};if(0<(null===x||void 0===x?void 0:x.length))switch(x[0]){case p._formats.formatFGDC:z=u.default.itemProperties.metadataFGDC;break;case p._formats.formatINSPIRE:z=u.default.itemProperties.metadataINSPIRE;break;case p._formats.formatISO19139:z=u.default.itemProperties.metadataISO19139;break;case p._formats.formatISO19115:z=
u.default.itemProperties.metadataISO19115}B.defaultArcGISStyle=z;a.default.extentService?B.basemapUrl=a.default.extentService:B.basemap="hybrid";p.configureGeocoders(D,B);p._gxeContext=new F(B);(null===G||void 0===G?0:G.hasMetadata)?(0,g.retrieveArcGISXml)(G.rawMetadataUrl).then(function(E){C.getOriginalXml=function(){return E};p._gxeAdaptor=new A(C);H()},function(E){C.getOriginalXml=function(){return null};p._gxeAdaptor=new A(C);H()}):(C.getOriginalXml=function(){return null},p._gxeAdaptor=new A(C),
H())});(function(F){k.reject()})}),function(F){k.reject()});return k},openEditor:function(m){var v=this,p,l,n=new h.default,k=a.default.self,r=0<(null===(p=k.metadataFormats)||void 0===p?void 0:p.length)?c.default.clone(k.metadataFormats):null,w=(null===(l=k.helperServices)||void 0===l?0:l.geocode)?c.default.clone(k.helperServices.geocode):[];this._isLoading?n.reject():(this._isLoading=!0,window.require(["arcgisonline/metadata"],function(){window.require("esri/dijit/metadata/context/GxeContext esri/dijit/metadata/arcgis/portal/PortalItemContext esri/dijit/metadata/arcgis/portal/PortalItemAdaptor esri/dijit/metadata/editor/EditorDialog esri/dijit/metadata/editor/Editor dojo/domReady!".split(" "),
function(x,D,G,F){var A=u.default.itemProperties.metadataISO1913932,y={allowSaveAndClose:!1,allowViewHtml:!0,allowedTypeKeys:["arcgis"],defaultArcGISStyle:"",basemapUrl:"",basemap:""};if(0<(null===r||void 0===r?void 0:r.length)){var z=r[0];switch(z){case v._formats.formatFGDC:A=u.default.itemProperties.metadataFGDC;break;case v._formats.formatINSPIRE:A=u.default.itemProperties.metadataINSPIRE;break;case v._formats.formatISO19139:A=u.default.itemProperties.metadataISO19139;break;case v._formats.formatISO19115:A=
u.default.itemProperties.metadataISO19115}}y.defaultArcGISStyle=A;a.default.extentService?y.basemapUrl=a.default.extentService:y.basemap="hybrid";v.configureGeocoders(w,y);v._gxeContext=new x(y);v._portalItemContext=new D({isForPortalItemPage:!0,allowEditMetadata:!0,allowPushToItem:!0,autoPullItem:!0,portalItem:m,portal:k,restBaseUrl:a.default.restBaseUrl,token:e.default.getToken(),originalXml:null});v._portalItemAdaptor=new G({portalItemContext:v._portalItemContext,viewHtml:function(){var B=new h.default,
C="".concat(m.itemUrl,"/info/metadata/metadata.xml"),H=e.default.getToken();H=H?"\x26token\x3d".concat(H):"";e.default.openPage("".concat(C,"?format\x3ddefault").concat("\x26output\x3dhtml").concat(H),!1);B.resolve();return B}});q.default.includes(m.typeKeywords,"Metadata")?v._portalItemAdaptor.readXml("text").then(function(B){v._portalItemContext.originalXml=(0,g.cleanXml)(B);v._editor=new F({title:m.title,gxeAdaptor:v._portalItemAdaptor,gxeContext:v._gxeContext});v._editor.show();v._isLoading=!1;
n.resolve(v._editor)}):(v._editor=new F({title:m.title,gxeAdaptor:v._portalItemAdaptor,gxeContext:v._gxeContext}),v._editor.show(),v._isLoading=!1,n.resolve(v._editor));v._editor.dialog.closeButtonNode.tabIndex=0});(function(x){n.reject()})}),function(x){n.reject()});return n}}})},"arcgisonline/pages/utils/metadata":function(){define("require exports tslib dojo/_base/Deferred ../../sharing/util esri/request dojo/i18n!../../nls/arcgisonline".split(" "),function(S,J,f,c,h,d,b){function a(k){var r;return k?
"1.0"===(null===(r=k.querySelector("metadata \x3e Esri \x3e ArcGISFormat"))||void 0===r?void 0:r.textContent):!1}function e(k){return"string"!==typeof k?null:null!==k?0===k.length?null:k.trim():k}function q(k){var r=document.createElement("textarea");r.innerHTML=k;return r.value}function t(k){var r=document.createElement("textarea");r.textContent=k;return r.innerHTML}function u(k,r){k=k.querySelector(r);return q((null===k||void 0===k?void 0:k.innerHTML)||"")}function g(k,r,w){if(!a(k))return k;var x=
k.querySelector("metadata");x=x.querySelector("dataIdInfo")||x.appendChild(k.createElement("dataIdInfo"));var D=x.querySelector("idCitation")||x.appendChild(k.createElement("idCitation"));x=r===l.title?D:x;(x.querySelector(r)||x.appendChild(k.createElement(r))).textContent=q(w);return k}function m(k,r,w,x,D){var G=new c;D=(new XMLSerializer).serializeToString(r);x&&(D='\x3c?xml version\x3d"1.0" encoding\x3d"utf-8"?\x3e'.concat(D));h.default.request({url:k,content:{metadataUploadFormat:"xml",metadata:D}},
{usePost:!0}).then(function(F){return v(F.statusUrl,w)},function(F){return G.reject(F)}).then(function(F){return G.resolve(r)},function(F){return G.reject(F)});return G}function v(k,r){var w=new c,x,D=0,G=setInterval(function(){D++;(0,d.default)({url:k,content:{token:r,f:"json"}}).then(function(F){x=((null===F||void 0===F?void 0:F.status)||"failed").toLowerCase();F=F||{status:"Failed"};if("completed"===x)clearInterval(G),w.resolve(F);else if("failed"===x||400<F.code)clearInterval(G),w.reject(F)},
function(F){if("Invalid JSON primitive: ."!==(null===F||void 0===F?void 0:F.message)||10<D)clearInterval(G),w.reject(F)})},1E3);return w}function p(k){return("0"+(k||0)).slice(-2)}Object.defineProperty(J,"__esModule",{value:!0});J.createLayerXML=J.updateLayerXML=J.updateLayerXMLProperty=J.parseEsriXML=J.setXMLTagValue=J.getXMLTagValue=J.encodeHTMLEntities=J.decodeHTMLEntities=J.cleanXml=J.isValidArcGISMetadata=J.retrieveArcGISXml=void 0;h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);
J.retrieveArcGISXml=function(k,r){var w=new c,x=h.default.getUser(),D=h.default.getToken(),G={f:"xml"};!r&&x&&(G.token=D);r&&r.token&&(G.token=r.token);(0,d.default)({url:k,content:G,handleAs:"text",preventCache:!0},{usePost:!0}).then(function(F){return w.resolve(e(F))},function(F){w.resolve(null)});return w};J.isValidArcGISMetadata=a;J.cleanXml=e;J.decodeHTMLEntities=q;J.encodeHTMLEntities=t;J.getXMLTagValue=u;J.setXMLTagValue=g;J.parseEsriXML=function(k){var r={};if(!k)return r;r=[].slice.call(k.querySelectorAll(l.keywords)).map(function(w){return w.textContent}).reduce(function(w,
x){return w.concat(x.split(/\n/))},[]);return{title:u(k,l.title),abstract:u(k,l.abstract),summary:u(k,l.summary),credits:u(k,l.credits),use:u(k,l.use),keywords:r}};J.updateLayerXMLProperty=function(k){var r=k.url,w=k.token;k=g(k.xml,l[k.prop],t(k.value));return m(r,k,w)};J.updateLayerXML=m;J.createLayerXML=function(k){var r=k.url,w=k.portal,x=k.prop,D=k.layer,G=k.value;k=k.token;var F=new Date,A=F.getFullYear(),y=p(F.getMonth()+1),z=p(F.getDate()),B=p(F.getHours()),C=p(F.getMinutes());F=p(F.getSeconds());
B='\n    \x3cmetadata xml:lang\x3d"en"\x3e\n      \x3cEsri\x3e\n        \x3cCreaDate\x3e'.concat(A).concat(y).concat(z,"\x3c/CreaDate\x3e\n        \x3cCreaTime\x3e").concat(B).concat(C).concat(F,"00\x3c/CreaTime\x3e\n        \x3cArcGISFormat\x3e1.0\x3c/ArcGISFormat\x3e\n        \x3cModDate\x3e").concat(A).concat(y).concat(z,"\x3c/ModDate\x3e\n        \x3cModTime\x3e").concat(B).concat(C).concat(F,"00\x3c/ModTime\x3e\n        ");C=B.concat;var H=(w=null===(H=null===w||void 0===w?void 0:w.metadataFormats)||
void 0===H?void 0:H[0])&&n[w]?"\x3cArcGISstyle\x3e".concat(n[w],"\x3c/ArcGISstyle\x3e"):"";D=C.call(B,H,"\n      \x3c/Esri\x3e\n      \x3cdataIdInfo\x3e\n        \x3cidCitation\x3e\n          \x3cresTitle\x3e").concat(D.name,'\x3c/resTitle\x3e\n        \x3c/idCitation\x3e\n      \x3c/dataIdInfo\x3e\n      \x3cmdDateSt Sync\x3d"TRUE"\x3e').concat(A).concat(y).concat(z,"\x3c/mdDateSt\x3e\n    \x3c/metadata\x3e\n  ");D=(new DOMParser).parseFromString(D,"text/xml");D.querySelector("dataIdInfo").appendChild(D.createElement(l[x]));
x=g(D,l[x],t(G));return m(r,x,k,!0)};var l;(function(k){k.title="resTitle";k["abstract"]="idAbs";k.summary="idPurp";k.credits="idCredit";k.use="resConst Consts useLimit";k.keywords="searchKeys keyword"})(l||(l={}));var n={arcgis:b.default.myOrganization.itemDetailsTab.formats.arcgis,fgdc:b.default.myOrganization.itemDetailsTab.formats.fgdc,inspire:b.default.myOrganization.itemDetailsTab.formats.inspire,iso19139:b.default.myOrganization.itemDetailsTab.formats.iso19139,"iso19139-3.2":b.default.myOrganization.itemDetailsTab.formats.iso1913932,
iso19115:b.default.myOrganization.itemDetailsTab.formats.iso19115}})},"arcgisonline/pages/item/widgets/typeOptions/mapOptions/domainUpdate":function(){define("require exports tslib ../../../../../map/core/urlUtils ../../../../pageUtil ../../../../utils/dom ../../../../utils/strings ../../../../../tsutils/declareDecorator dijit/_WidgetBase dijit/_TemplatedMixin dijit/a11yclick dojo/dom-construct dojo/on dojo/string dojo/topic esri/lang dojo/i18n!../../../../../nls/arcgisonline dojo/text!./domainUpdate.html".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);return function(){function k(r,w){this.templateString=n.default;this.i18n=l.default}k.prototype.startup=function(){this.inherited(arguments);
this.initUI()};k.prototype.initUI=function(){this.initHandlers();this.initDomains()};k.prototype.initHandlers=function(){this.own((0,t.default)(this.doneBtn,this.doneClick.bind(this)),(0,g.default)(this.domainSelect,"change",this.selectedDomainChange.bind(this)),(0,t.default)(this.replaceDomainBtn,this.replaceDomainClick.bind(this)),h.default.registerKeystrokeHandler(this.domainReplace,this.replaceDomainChange.bind(this)),v.default.subscribe("item-data/change-complete",this.itemDataChange.bind(this)))};
k.prototype.initDomains=function(){var r=this,w=this.domainSelect.value,x=!1;c.default.getUniqueDomains(this.item.itemData).then(function(D){u.default.empty(r.domainSelect);D.forEach(function(G){var F={value:G.domain,innerHTML:G.domain};!r.autoSelectReplacementValue||G.domain!==r.autoSelectReplacementValue&&G.domain!==w||(x=F.selected=!0,r.autoSelectReplacementValue=void 0);u.default.create("option",F,r.domainSelect)});r.domainSelect.options&&r.domainSelect.options.length?(x||(d.default.selectOption(r.domainSelect.options,
r.domainSelect.options[0].value),r.lastSelectedDomain=r.domainSelect.options[0].value),r.selectedDomainChange()):(d.default.hideNodes([r.updateDomainDesc,r.updateDomainContainer,r.replaceDomainLoading,r.replaceDomainFailure,r.layerDetailsContainer]),u.default.empty(r.replaceDomainSuccess),r.replaceDomainSuccess.innerHTML=r.i18n.itemProperties.noLayersToUpdateDomain,d.default.showNode(r.replaceDomainSuccess))})};k.prototype.filterForIssues=function(r){return r.filter(function(w){return"failure"===
w.layerUrlChange||w.layerRenderingFailures||w.layerQueryUrlFailures||w.itemAccess&&("failure"===w.itemUrlChange||w.itemRenderingFailures||w.itemQueryUrlFailures)})};k.prototype.filterForUpdated=function(r){return r.filter(function(w){return("success"===w.layerUrlChange||w.layerRenderingChanged||w.layerQueryUrlChanged)&&!w.layerRenderingFailures&&!w.layerQueryUrlFailures||w.itemAccess&&("success"===w.itemUrlChange||w.itemRenderingChanged||w.itemQueryUrlChanged)&&!w.itemRenderingFailures&&!w.itemQueryUrlFailures})};
k.prototype.containsInvalidProtocol=function(r){return-1===(null===r||void 0===r?void 0:r.indexOf("://"))&&!(b.default.startsWith(r,"http://")||b.default.startsWith(r,"https://"))};k.prototype.ensureProtocol=function(r){return this.containsInvalidProtocol(r)?"http://"+r:r};k.prototype.validateDomain=function(r){var w=this.domainSelect.value,x=!!w,D=RegExp("/","g"),G=!0;r?(this.containsInvalidProtocol(r)&&(G=!1),x&&(w.match(D)||[]).length!==(r.match(D)||[]).length&&(G=!1)):G=!1;return G};k.prototype.doneClick=
function(){v.default.publish("update-domain/done")};k.prototype.setInputError=function(r){this.domainReplace.classList.add("input-error");this.domainReplaceError.classList.add("is-active");this.domainReplaceError.classList.remove("hide")};k.prototype.clearInputError=function(){this.domainReplace.classList.remove("input-error");this.domainReplaceError.classList.remove("is-active");this.domainReplaceError.classList.add("hide")};k.prototype.selectedDomainChange=function(){var r=this,w=this.domainSelect.value,
x=!!w,D="",G;c.default.getUniqueDomains(this.item.itemData).then(function(F){r.refreshingDomains?r.refreshingDomains=void 0:w!==r.lastSelectedDomain&&(d.default.hideNode(r.replaceDomainFailure),d.default.hideNode(r.replaceDomainSuccess));if(x){if(G=F.filter(function(A){return A.domain===w}))G=G.shift(),r.domainReplace.value=G.domain,r.lastSelectedDomain=G.domain,G.layers.forEach(function(A){D+=A.title+"\x3cbr\x3e"}),r.layerDetails.innerHTML=D;r.clearInputError();d.default.showHide(r.layerDetailsContainer,
G);r.domainReplace.focus()}else d.default.hideNode(r.layerDetailsContainer);r.replaceDomainChange()})};k.prototype.replaceDomainClick=function(){var r=this,w=this.domainSelect.value,x=this.ensureProtocol(this.domainReplace.value.trim());this.clearInputError();this.validateDomain(x)?(d.default.hideNodes([this.layerDetailsContainer,this.replaceDomainFailure,this.replaceDomainSuccess]),d.default.showNode(this.replaceDomainLoading),c.default.switchDomain(this.item.itemData,this.item,w,x).then(function(D){d.default.hideNode(r.replaceDomainLoading);
var G=r.filterForIssues(D.layers),F=r.filterForUpdated(D.layers);p.default.isDefined(D.configChange)&&"failure"===D.configChange?(r.replaceDomainFailureMessage.innerHTML=r.i18n.itemProperties.errorUpdateHTTPS,d.default.showNode(r.replaceDomainFailure)):G.length?(r.replaceDomainFailureMessage.innerHTML=m.default.substitute(r.i18n.itemProperties.someLayerDomainsFailed,{domainName:x,n:G.length}),d.default.showNode(r.replaceDomainFailure),F.length&&(r.replaceDomainSuccessMessage.innerHTML=m.default.substitute(r.i18n.itemProperties.someLayerDomainsUpdated,
{domainName:x,n:F.length}),d.default.showNode(r.replaceDomainSuccess))):(r.replaceDomainSuccessMessage.innerHTML=m.default.substitute(r.i18n.itemProperties.domainUpdateSuccess,{domainName:x}),d.default.showNode(r.replaceDomainSuccess));r.autoSelectReplacementValue=x;r.domainReplace.value="";r.refreshingDomains=!0;r.replaceDomainChange();v.default.publish("item-data/change")},function(D){r.setInputError(D)})):this.setInputError()};k.prototype.replaceDomainChange=function(){var r=this.domainReplace.value.trim(),
w=this.domainSelect.value;w=w&&r&&0<r.length&&r!==w;d.default.disableNode(this.replaceDomainBtn,!w||w&&!this.validateDomain(r));this.clearInputError()};k.prototype.itemDataChange=function(r){"type-options/map"===r.source&&(this.item.itemData=r.itemData,this.initDomains())};return k=f.__decorate([(0,a.default)(e.default,q.default)],k)}()})},"arcgisonline/map/core/urlUtils":function(){define("require exports tslib ../../esriGeowConfig ./isEmpty ../../pages/utils/clone ../../sharing/util dojo/_base/connect dojo/dom dojo/dom-construct dojo/Deferred dojo/DeferredList esri/request esri/IdentityManager esri/layers/VectorTileLayer esri/layers/CSVLayer esri/layers/KMLLayer esri/layers/GeoRSSLayer esri/layers/WMSLayer esri/layers/WFSLayer esri/layers/WMTSLayer".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w){function x(U){var ka,ma,sa=[],pa=[],Aa=new t.default,za=function(Fa,va,xa,Da,Ca){var qa,W;if(!(-1<(null===(qa=Fa.url)||void 0===qa?void 0:qa.indexOf(c.default.self.portalHostname))||-1<(null===(W=Fa.styleUrl)||void 0===W?void 0:W.indexOf(c.default.self.portalHostname)))){var ba=!1;(Da||[]).forEach(function(oa){var wa,Ea;if(-1<(null===(wa=Fa.url)||void 0===wa?void 0:wa.indexOf(oa))||-1<(null===(Ea=Fa.styleUrl)||void 0===Ea?void 0:Ea.indexOf(oa)))ba=
!0});!ba&&(ka=O(Fa,Ca))&&(-1<va.indexOf(ka)?(ma=va.indexOf(ka),xa[ma].layers.push({id:Fa.id,title:Fa.title})):(va.push(ka),xa.push({domain:ka,layers:[{id:Fa.id,title:Fa.title}]})))}},Ba=function(Fa,va){return Fa.title.toLowerCase()<va.title.toLowerCase()?-1:1},ua=function(Fa,va){Fa.layers=Fa.layers.sort(Ba);va.layers=va.layers.sort(Ba);return Fa.domain.toLowerCase()<va.domain.toLowerCase()?-1:1};Q().then(function(Fa){Z(U).forEach(function(va){za(va.layer,sa,pa,Fa,"tables"===va.type?"table":null)});
pa=pa.sort(ua);Aa.resolve(pa)});return Aa}function D(U,ka,ma,sa){var pa=new t.default,Aa=[];if(!(U&&ka&&ma&&sa))return pa.resolve({layers:[]}),pa;var za=(0,d.default)(U),Ba={from:ma,to:sa,type:null,checkedItemsList:{}};Z(U).forEach(function(ua){var Fa={configLayer:ua.layer};"tables"===ua.type&&(Fa.type="table");ua=Fa=f.__assign(f.__assign({},Fa),Ba);O(ua.configLayer,ua.type)===ua.from&&Aa.push(A(ua))});Aa.length?(new u.default(Aa)).then(function(ua){var Fa=[];(ua||[]).forEach(function(va){V();va=
va[1];var xa=T(U,va.layerId),Da={id:va.layerId,title:xa.title};-1<["layer_001"].indexOf(va.code)?Da.layerUrlChange="success":-1<["layer_002","layer_003"].indexOf(va.code)?Da.layerUrlChange="none":Da.layerUrlChange="failure";xa.itemId&&(Da.itemAccess=va.itemAccess)&&(-1<["layer_001"].indexOf(va.item.code)?Da.itemUrlChange="success":-1<["layer_020"].indexOf(va.item.code)?(Da.itemUrlChange="success",Da.itemAccess=!1):-1<["layer_002","layer_003"].indexOf(va.item.code)?Da.itemUrlChange="none":Da.itemUrlChange=
"failure");Fa.push(Da)});V();ua=JSON.stringify(za)===JSON.stringify(U);V();ua||"noSave"===V()?pa.resolve({layers:Fa,configChange:"none"}):F(U,ka).then(function(){pa.resolve({layers:Fa,configChange:"success"})},function(va){pa.resolve({layers:Fa,configChange:"failure"})})}):pa.resolve({layers:[]});return pa}function G(U,ka){V();var ma=new t.default,sa=(0,d.default)(U),pa={from:"http://",to:"https://",checkRenderer:!0,type:null,checkedItemsList:{}},Aa=[],za=[];Z(U).forEach(function(Ba){var ua={config:U,
configLayer:Ba.layer};"tables"===Ba.type&&(ua.type="table");ua=f.__assign(f.__assign({},ua),pa);za.push(Ba.layer.id);Aa.push(A(ua))});Aa.length?(new u.default(Aa)).then(function(Ba){var ua,Fa=[];(Ba||[]).forEach(function(va){V();va=va[1];if("notTested"!==va.type){var xa=T(U,va.layerId),Da={id:va.layerId,title:xa.title};-1<["layer_001"].indexOf(va.code)?Da.layerUrlChange="success":-1<["layer_002","layer_003"].indexOf(va.code)?Da.layerUrlChange="none":Da.layerUrlChange="failure";va.queryLayers&&(Da.layerQueryUrlChanged=
!1,Da.layerQueryUrlFailures=!1,(va.queryLayers||[]).forEach(function(Ca){-1<["layer_001"].indexOf(Ca.code)?Da.layerQueryUrlChanged=!0:-1<["layer_002","layer_003"].indexOf(Ca.code)||(Da.layerQueryUrlFailures=!0)}));if(va.renderers||va.symbols)Da.layerRenderingChanged=!1,Da.layerRenderingFailures=!1,(va.renderers||[]).forEach(function(Ca){(Ca.symbols||[]).forEach(function(qa){-1<["sym_010"].indexOf(qa.code)&&(Da.layerRenderingFailures=!0);-1<["sym_001"].indexOf(qa.code)&&(Da.layerRenderingChanged=!0)})}),
(va.symbols||[]).forEach(function(Ca){-1<["sym_010"].indexOf(Ca.code)&&(Da.layerRenderingFailures=!0);-1<["sym_001"].indexOf(Ca.code)&&(Da.layerRenderingChanged=!0)});xa.itemId&&(Da.itemAccess=va.itemAccess)&&(-1<["layer_001"].indexOf(va.item.code)?Da.itemUrlChange="success":-1<["layer_020"].indexOf(va.item.code)?(Da.itemUrlChange="success",Da.itemAccess=!1):-1<["layer_002","layer_003"].indexOf(va.item.code)?Da.itemUrlChange="none":Da.itemUrlChange="failure",va.item.queryLayers&&(Da.itemQueryUrlChanged=
!1,Da.itemQueryUrlFailures=!1,(va.item.queryLayers||[]).forEach(function(Ca){-1<["layer_001"].indexOf(Ca.code)?Da.itemQueryUrlChanged=!0:-1<["layer_002","layer_003"].indexOf(Ca.code)||(Da.itemQueryUrlFailures=!0)})),va.item.renderers||va.item.symbols)&&(Da.itemRenderingChanged=!1,Da.itemRenderingFailures=!1,(va.item.renderers||[]).forEach(function(Ca){(Ca.symbols||[]).forEach(function(qa){-1<["sym_010"].indexOf(qa.code)&&(Da.itemRenderingFailures=!0);-1<["sym_001"].indexOf(qa.code)&&(Da.itemRenderingChanged=
!0)})}),(va.item.symbols||[]).forEach(function(Ca){-1<["sym_010"].indexOf(Ca.code)&&(Da.itemRenderingFailures=!0);-1<["sym_001"].indexOf(Ca.code)&&(Da.itemRenderingChanged=!0)}));Fa.push(Da)}});(null===(ua=U.presentation)||void 0===ua?0:ua.slides)&&U.presentation.slides.forEach(function(va){var xa,Da;null===(Da=null===(xa=va.baseMap)||void 0===xa?void 0:xa.baseMapLayers)||void 0===Da?void 0:Da.forEach(function(Ca,qa){-1<za.indexOf(Ca.id)&&(Ca=T(U,Ca.id),va.baseMap.baseMapLayers[qa]=Ca)})});V();Ba=
JSON.stringify(sa)===JSON.stringify(U);V();Ba||"noSave"===V()?ma.resolve({layers:Fa,configChange:"none"}):F(U,ka).then(function(){ma.resolve({layers:Fa,configChange:"success"})},function(){ma.resolve({layers:Fa,configChange:"failure"})})}):ma.resolve({layers:[]});return ma}function F(U,ka){var ma=new t.default;U._ssl&&delete U._ssl;var sa="".concat(c.default.restBaseUrl,"content/users/").concat(ka.owner);sa+="".concat(ka.ownerFolder?"/".concat(ka.ownerFolder):"");sa+="/items/".concat(ka.id,"/update");
U={text:JSON.stringify(U),f:"json"};ka={usePost:!0};"http:"===window.location.protocol&&-1<sa.indexOf("https://")&&(ka.useProxy=!0);(0,g.default)({url:sa,content:U},{options:ka}).then(function(){ma.resolve()},function(pa){ma.reject(pa)});return ma}function A(U){var ka=U.configLayer,ma=U.from,sa=U.to,pa=U.type,Aa=U.checkRenderer,za=new t.default;switch(ka.layerType||ka.type){case "ArcGISFeatureLayer":case void 0:if(ka.url)return y(U);if(Aa)return z(U);za.resolve({type:"notTested",msg:"No URL"});break;
case "ArcGISImageServiceLayer":case "ArcGISImageServiceVectorLayer":case "ArcGISMapServiceLayer":case "ArcGISStreamLayer":case "ArcGISTiledImageServiceLayer":case "ArcGISTiledMapServiceLayer":case "ArcGISTiledElevationServiceLayer":case "ArcGISSceneServiceLayer":case "PointCloudLayer":case "IntegratedMeshLayer":return y(U);case "VectorTileLayer":return B(U);case "CSV":return C(U);case "GeoRSS":return H(U);case "KML":return E(U);case "WebTiledLayer":return ka.wmtsInfo?K(U):I(U);case "WFS":return L(U);
case "WMS":return M(U);case "BingMapsAerial":case "BingMapsRoad":case "BingMapsHybrid":Aa={url:"",origUrl:"",msg:"Layer has no URL.",code:"layer_003",layerId:ka.id,type:"layer"},ka.portalUrl&&(ma=ka.portalUrl.replace(ma,sa),ma!==ka.portalUrl?(ka.portalUrl=ma,Aa.msg="Portal URL switched to ".concat(sa,"."),Aa.code="layer_001"):(Aa.msg="Portal URL is already ".concat(sa,"."),Aa.code="layer_002")),za.resolve(Aa);case "OpenStreetMap":za.resolve({url:"",origUrl:"",msg:"Layer has no URL.",code:"layer_003",
layerId:ka.id,type:"layer"});default:if("table"===pa)return y(U);za.resolve({type:"notTested",msg:"Unknown type"})}return za}function y(U){var ka=U.configLayer,ma=U.from,sa=U.to,pa=U.checkRenderer,Aa=new t.default,za=ka.url,Ba=ka.url.replace(ma,sa),ua={url:za,origUrl:za,layerId:ka.id,type:"layer"};if(za===Ba)return ua.url=Ba,ua.msg="Layer URL is already ".concat(sa,"."),ua.code="layer_002",pa?N(ka,U,ua).then(function(xa){R(ka,xa).then(function(Da){ra(U,Da).then(function(Ca){Aa.resolve(Ca)})})}):N(ka,
U,ua).then(function(xa){ra(U,xa).then(function(Da){Aa.resolve(Da)})}),Aa;if("http://"===ma&&"https://"===sa&&-1===za.indexOf("sampleserver")&&(-1<za.indexOf(".arcgis.com")||-1<za.indexOf(".arcgisonline.com")))return ka.url=Ba,ua.url=Ba,ua.msg="Layer URL switched to ".concat(sa,"."),ua.code="layer_001",pa?N(ka,U,ua).then(function(xa){R(ka,xa).then(function(Da){ra(U,Da).then(function(Ca){Aa.resolve(Ca)})})}):N(ka,U,ua).then(function(xa){ra(U,xa).then(function(Da){Aa.resolve(Da)})}),Aa;var Fa=1,va=setInterval(function(){m.default.isBusy()&&
3>Fa?Fa++:(m.default.isBusy()&&m.default.dialog.destroy(),ua.msg="Timeout",ua.code="layer_021",N(ka,U,ua).then(function(xa){ra(U,xa).then(function(Da){Aa.reject(Da)})}),clearInterval(va),va=void 0)},2E4);ma="".concat(Ba).concat(-1<Ba.indexOf("?")?"\x26f\x3djson":"?f\x3djson");(0,g.default)({url:ma,callbackParamName:"callback"}).then(function(){va&&(clearTimeout(va),ka.url=Ba,ua.url=Ba,ua.msg="Layer URL switched to ".concat(sa,"."),ua.code="layer_001",pa?N(ka,U,ua).then(function(xa){R(ka,xa).then(function(Da){ra(U,
Da).then(function(Ca){Aa.resolve(Ca)})})}):N(ka,U,ua).then(function(xa){ra(U,xa).then(function(Da){Aa.resolve(Da)})}))},function(xa){var Da;va&&(clearTimeout(va),m.default.isBusy()?-1<(null===(Da=null===xa||void 0===xa?void 0:xa.message)||void 0===Da?void 0:Da.toLowerCase().indexOf("aborted"))?(ua.msg="Aborted the Sign-In process.",ua.code="layer_012",N(ka,U,ua).then(function(Ca){ra(U,Ca).then(function(qa){Aa.reject(qa)})})):(ua.msg=xa.message,ua.code="layer_010",N(ka,U,ua).then(function(Ca){ra(U,
Ca).then(function(qa){Aa.reject(qa)})})):(ua.msg=xa.message,ua.code="layer_010",N(ka,U,ua).then(function(Ca){ra(U,Ca).then(function(qa){Aa.reject(qa)})})))});return Aa}function z(U){var ka=U.configLayer,ma=new t.default,sa={url:"",origUrl:"",layerId:ka.id,msg:"Layer has no URL.",code:"layer_003",type:"layer",renderers:[],symbols:[]};if(ka.featureCollection)if(ka.featureCollection.layers){var pa=[];ka.featureCollection.layers.forEach(function(Aa,za){var Ba,ua,Fa,va;if(null===(ua=null===(Ba=Aa.layerDefinition)||
void 0===Ba?void 0:Ba.drawingInfo)||void 0===ua?0:ua.renderer){var xa=new t.default;ja(ka,Aa.layerDefinition.drawingInfo.renderer).then(function(Da){ka.featureCollection.layers[za].layerDefinition.drawingInfo.renderer=Da.renderer;xa.resolve(Da)});pa.push(xa)}(null===(va=null===(Fa=Aa.featureSet)||void 0===Fa?void 0:Fa.features)||void 0===va?0:va.length)&&Aa.featureSet.features[0].symbol&&Aa.featureSet.features.forEach(function(Da){var Ca=new t.default;aa(ka,Da.symbol).then(function(qa){sa.symbols=
[qa];Ca.resolve(sa)});pa.push(Ca)})});pa.length?(new u.default(pa)).then(function(Aa){var za=[],Ba=[];(Aa||[]).forEach(function(ua){"renderer"===ua[1].type?za.push(ua[1]):"symbol"===ua[1].type&&Ba.push(ua[1])});sa.renderers=za.length?za:[];sa.symbols=Ba.length?Ba:[];ra(U,sa).then(function(ua){ma.resolve(ua)})}):ra(U,sa).then(function(Aa){ma.resolve(Aa)})}else ra(U,sa).then(function(Aa){ma.resolve(Aa)});else ra(U,sa).then(function(Aa){ma.resolve(Aa)});return ma}function B(U){var ka=U.configLayer,ma=
U.from,sa=U.to,pa=new t.default,Aa=ka.styleUrl;if(!ka.styleUrl&&ka.itemId){var za="".concat(c.default.restBaseUrl,"content/items/").concat(ka.itemId,"/resources");if(!c.default.self.isPortal){var Ba=za.indexOf("://"),ua=za.indexOf("/",Ba+3);za="".concat(za.substring(0,Ba+3)).concat(c.default.self.portalHostname).concat(za.substring(ua))}ka.styleUrl="".concat(za,"/styles/root.json")}var Fa=ka.styleUrl.replace(ma,sa);ma=new v.default(Fa);a.default.connect(ma,"onLoad",function(){var va={url:Fa,origUrl:Aa,
layerId:ka.id,type:"layer"};ka.styleUrl===Fa?(va.msg="Layer URL is already ".concat(sa,"."),va.code="layer_002"):(ka.styleUrl=Fa,va.msg="Layer URL switched to ".concat(sa,"."),va.code="layer_001");ra(U,va).then(function(xa){pa.resolve(xa)})});a.default.connect(ma,"onError",function(va){ra(U,{url:ka.styleUrl,origUrl:ka.styleUrl,layerId:ka.id,msg:va.message,code:"layer_010",type:"layer"}).then(function(xa){pa.reject(xa)})});return pa}function C(U){var ka=U.configLayer,ma=U.from,sa=U.to,pa=U.checkRenderer,
Aa=new t.default,za=ka.url.replace(ma,sa),Ba=ka.url;if(Ba===za)return U={url:za,origUrl:Ba,layerId:ka.id,msg:"Layer URL is already https.",code:"layer_002",type:"layer"},pa?R(ka,U).then(function(ua){Aa.resolve(ua)}):Aa.resolve(U),Aa;U=new p.default(za,{columnDelimiter:ka.columnDelimiter,latitudeFieldName:ka.locationInfo.latitudeFieldName,longitudeFieldName:ka.locationInfo.longitudeFieldName});a.default.connect(U,"onLoad",function(){ka.url=za;var ua={url:za,origUrl:Ba,layerId:ka.id,msg:"Layer URL switched to https.",
code:"layer_001",type:"layer"};pa?R(ka,ua).then(function(Fa){Aa.resolve(Fa)}):Aa.resolve(ua)});a.default.connect(U,"onError",function(ua){Aa.reject({url:ka.url,origUrl:ka.url,layerId:ka.id,msg:ua.message,code:"layer_010",type:"layer"})});return Aa}function H(U){var ka=U.configLayer,ma=U.from,sa=U.to,pa=U.checkRenderer,Aa=new t.default,za=ka.url.replace(ma,sa),Ba=ka.url;if(Ba===za){var ua={url:za,origUrl:Ba,layerId:ka.id,msg:"Layer URL is already https.",code:"layer_002",type:"layer"};(null===pa||
void 0===pa?0:pa.pointSymbol)?aa(ka,ka.pointSymbol).then(function(Fa){ua.symbols=[Fa];Aa.resolve(ua)}):Aa.resolve(ua);return Aa}U=new n.default(za);a.default.connect(U,"onLoad",function(){ka.url=za;var Fa={url:za,origUrl:Ba,layerId:ka.id,msg:"Layer URL switched to https.",code:"layer_001",type:"layer"};(null===pa||void 0===pa?0:pa.pointSymbol)?aa(ka,ka.pointSymbol).then(function(va){Fa.symbols=[va];Aa.resolve(Fa)}):Aa.resolve(Fa)});a.default.connect(U,"onError",function(Fa){Aa.reject({url:ka.url,
origUrl:ka.url,layerId:ka.id,msg:Fa.message,code:"layer_010",type:"layer"})});return Aa}function E(U){var ka=U.configLayer,ma=U.from,sa=U.to,pa=new t.default,Aa=ka.url.replace(ma,sa),za=ka.url;if(za===Aa)return pa.resolve({url:Aa,origUrl:za,layerId:ka.id,msg:"Layer URL is already https.",code:"layer_002",type:"layer"}),pa;ma=Aa;sa=b.default.getUser();var Ba=c.default.self.urlKey?c.default.self.customBaseUrl:c.default.self.portalHostname,ua=ma.indexOf(Ba);sa&&ka.itemId&&-1<ua&&(ma="https://".concat(c.default.self.portalHostname).concat(ma.substring(ua+
Ba.length)));sa&&(-1<ma.indexOf(c.default.self.portalHostname)||-1<ma.indexOf(Ba))&&(sa=b.default.getToken())&&(ma+="?token\x3d".concat(sa));ma=new l.default(ma);a.default.connect(ma,"onLoad",function(){ka.url=Aa;var Fa={url:Aa,origUrl:za,layerId:ka.id,msg:"Layer URL switched to https.",code:"layer_001",type:"layer"};ka.itemId?(U.checkRenderer=!1,ra(U,Fa).then(function(va){pa.resolve(va)})):pa.resolve(Fa)});a.default.connect(ma,"onError",function(Fa){pa.reject({url:ka.url,origUrl:ka.url,layerId:ka.id,
msg:Fa.message,code:"layer_010",type:"layer"})});return pa}function K(U){var ka=U.configLayer,ma=U.from;U=U.to;var sa=new t.default,pa={};ka.wmtsInfo.customParameters&&(pa.customParameters=ka.wmtsInfo.customParameters);ka.wmtsInfo.customLayerParameters&&(pa.customLayerParameters=ka.wmtsInfo.customLayerParameters);var Aa=ka.wmtsInfo.url.replace(ma,U),za=ka.wmtsInfo.url;if(za===Aa)return sa.resolve({url:Aa,origUrl:za,layerId:ka.id,msg:"Layer URL is already https.",code:"layer_002",type:"layer"}),sa;
var Ba=new w.default(Aa,pa),ua=function(){var xa=!1;Ba.layers.forEach(function(Da){Da.identifier===ka.wmtsInfo.layerIdentifier&&(Da.tileMatrixSetInfos||[]).forEach(function(Ca){if(Ca.tileMatrixSet===ka.wmtsInfo.tileMatrixSet){xa=!0;Ba.copyright&&"none"!==Ba.copyright.toLowerCase()&&(ka.copyright=Ba.copyright,180<Ba.copyright.length&&(ka.copyright=Ba.copyright.substring(0,180)+"..."));var qa=-1<Da.formats.indexOf("image/png")?"image/png":Da.formats[0];ka.templateUrl=Ba.getTileUrlTemplate({identifier:Da.identifier,
tileMatrixSet:Ca.tileMatrixSet,format:qa});-1<ka.templateUrl.indexOf("http://")&&ia(Aa,ka.templateUrl)&&(ka.templateUrl=ka.templateUrl.replace("http://","https://"));-1<ka.templateUrl.indexOf("http://")?sa.reject({url:ka.wmtsInfo.url,origUrl:ka.wmtsInfo.url,layerId:ka.id,msg:"WTMS does not return https URLs.",code:"layer_013",type:"layer"}):(ka.wmtsInfo.url=Aa,sa.resolve({url:Aa,origUrl:za,layerId:ka.id,msg:"Layer URL switched to https.",code:"layer_001",type:"layer"}))}})});xa||sa.reject({url:ka.wmtsInfo.url,
origUrl:ka.wmtsInfo.url,layerId:ka.id,msg:"WMTS is missing layer or tileMatrixSet.",code:"wmts_011",type:"layer"})},Fa=a.default.connect(Ba,"onError",function(xa){a.default.disconnect(Fa);a.default.disconnect(va);pa.serviceMode="KVP";Ba=new w.default(Aa,pa);a.default.connect(Ba,"onError",function(Da){sa.reject({url:ka.wmtsInfo.url,origUrl:ka.wmtsInfo.url,layerId:ka.id,msg:Da.message,code:"layer_010",type:"layer"})});a.default.connect(Ba,"onLoad",function(){ua()})}),va=a.default.connect(Ba,"onLoad",
function(){a.default.disconnect(Fa);a.default.disconnect(va);ua()});return sa}function I(U){var ka=U.configLayer,ma=U.from;U=U.to;var sa=new t.default,pa=ka.templateUrl.replace(ma,U),Aa=ka.templateUrl;if(Aa===pa)return sa.resolve({url:pa,origUrl:Aa,layerId:ka.id,msg:"Layer URL is already https.",code:"layer_002",type:"layer"}),sa;var za=setTimeout(function(){clearTimeout(za);za=null;sa.reject({url:ka.templateUrl,origUrl:ka.templateUrl,layerId:ka.id,msg:"WebTiledLayer timeout error.",code:"WTL_012",
type:"layer"})},1E4);ma=pa;ka.subDomains&&ka.subDomains.length&&(ma=ma.replace("{subDomain}",ka.subDomains[0]));ma=ma.replace("{level}",0).replace("{row}",0).replace("{col}",0);(0,g.default)({url:ma}).then(function(){za&&(clearTimeout(za),ka.templateUrl=pa,sa.resolve({url:pa,origUrl:Aa,layerId:ka.id,msg:"Layer URL switched to https.",code:"layer_001",type:"layer"}))},function(){za&&(clearTimeout(za),sa.reject({url:ka.templateUrl,origUrl:ka.templateUrl,layerId:ka.id,msg:"WebTiledLayer access error.",
code:"WTL_011",type:"layer"}))});return sa}function L(U){var ka=U.config.spatialReference,ma=U.configLayer,sa=U.from,pa=U.to,Aa=U.checkRenderer,za=new t.default,Ba=ma.url.replace(sa,pa),ua=ma.url;if(ua===Ba)return U={url:Ba,origUrl:ua,layerId:ma.id,msg:"Layer URL is already https.",code:"layer_002",type:"layer"},Aa?R(ma,U).then(function(xa){za.resolve(xa)}):za.resolve(U),za;var Fa=new r.default;a.default.connect(Fa,"onError",function(xa){za.reject({url:ma.url,origUrl:ma.url,layerId:ma.id,msg:xa.message,
code:"layer_010",type:"layer"})});var va={url:Ba,version:ma.wfsInfo.version,customParameters:ma.wfsInfo.customParameters};Fa.initialize(va,function(xa){for(var Da,Ca,qa,W=0;W<xa.length;W++)if(xa[W].name===ma.wfsInfo.name){qa=xa[W];break}qa?(va={layerName:ma.wfsInfo.name,visible:ma.defaultVisibility,maxFeatures:ma.wfsInfo.maxFeatures||3E3,swapXY:ma.wfsInfo.swapXY,geometryType:ma.layerDefinition?ma.layerDefinition.geometryType:null,wkid:(null===(Da=ma.layerDefinition)||void 0===Da?void 0:Da.spatialReference.wkid)||
(null===(Ca=ma.wfsInfo.supportedSpatialReferences)||void 0===Ca?void 0:Ca[0])||4326,mode:"snapshot"},Fa.selectLayer(va,function(ba){ma.wfsInfo.wfsNamespace=Fa.layerNamespace;ma.wfsInfo.featureUrl=Fa.getFeatureUrl;-1<ma.wfsInfo.wfsNamespace.indexOf("http://")||-1<ma.wfsInfo.featureUrl.indexOf("http://")?za.reject({url:ma.url,origUrl:ma.url,layerId:ma.id,msg:"WFS does not return https URLs.",code:"WFS_012",type:"layer"}):(ma.wfsInfo.supportedSpatialReferences=qa.spatialReferences,-1===[3857,102100].indexOf(ka.wkid)&&
4326!==ka.wkid&&-1===Fa.spatialReferences.indexOf(ka.wkid)?za.reject({url:ma.url,origUrl:ma.url,layerId:ma.id,msg:"WFS does not contain map spatial reference.",code:"WFS_013",type:"layer"}):(ma.url=Ba,ba={url:Ba,origUrl:ua,layerId:ma.id,msg:"Layer URL switched to https.",code:"layer_001",type:"layer"},Aa?R(ma,ba).then(function(oa){za.resolve(oa)}):za.resolve(ba)))})):za.reject({url:ma.url,origUrl:ma.url,layerId:ma.id,msg:"WFS does not contain layer.",code:"WFS_011",type:"layer"})});return za}function M(U){var ka=
U.configLayer,ma=U.from;U=U.to;var sa=new t.default,pa=ka.url.replace(ma,U),Aa=ka.url;if(Aa===pa)return sa.resolve({url:pa,origUrl:Aa,layerId:ka.id,msg:"Layer URL is already https.",code:"layer_002",type:"layer"}),sa;var za=new k.default(pa,{visibleLayers:ka.visibleLayers,customLayerParameters:ka.customLayerParameters,customParameters:ka.customParameters});a.default.connect(za,"onLoad",function(){-1<za.getMapURL.indexOf("http://")&&ia(pa,za.getMapURL)&&(za.getMapURL=za.getMapURL.replace("http://",
"https://"));-1<za.getFeatureInfoURL.indexOf("http://")&&ia(pa,za.getFeatureInfoURL)&&(za.getFeatureInfoURL=za.getFeatureInfoURL.replace("http://","https://"));-1<za.copyright.indexOf("http://")&&ia(pa,za.copyright)&&(za.copyright=za.copyright.replace("http://","https://"));if(-1<za.getMapURL.indexOf("http://")||-1<za.getFeatureInfoURL.indexOf("http://"))sa.reject({url:ka.url,origUrl:ka.url,layerId:ka.id,msg:"WMS does not return https URLs.",code:"WMS_011",type:"layer"});else if(-1<za.getMapURL.indexOf("https://localhost/")||
-1<za.getFeatureInfoURL.indexOf("https://localhost/"))sa.reject({url:ka.url,origUrl:ka.url,layerId:ka.id,msg:"WMS does not return valid https URLs.",code:"WMS_012",type:"layer"});else{for(var Ba=[],ua=function(xa){xa=(0,d.default)(ka.layers[xa]);var Da=function(ba,oa){ba.forEach(function(wa){wa.subLayers&&0<wa.subLayers.length?Da(wa.subLayers,oa):oa.push(wa)})};if(za.layerInfos){var Ca=[];Da(za.layerInfos,Ca);za.layerInfos=Ca}Ca=!1;for(var qa=0;qa<za.layerInfos.length;qa++){var W=za.layerInfos[qa];
if(xa.name===W.name)if(Ca=!0,xa.legendURL&&W.legendURL){if(xa.legendURL=W.legendURL,-1<xa.legendURL.indexOf("http://")&&ia(pa,xa.legendURL)&&(xa.legendURL=xa.legendURL.replace("http://","https://")),-1<xa.legendURL.indexOf("http://"))return sa.reject({url:ka.url,origUrl:ka.url,layerId:ka.id,msg:"WMS does not return https URLs.",code:"WMS_011",type:"layer"}),{value:void 0}}else xa.legendURL=W.legendURL}if(!Ca)return sa.reject({url:ka.url,origUrl:ka.url,layerId:ka.id,msg:"WMS layer is missing.",code:"WMS_013",
type:"layer"}),{value:void 0};Ba.push(xa)},Fa=0;Fa<ka.layers.length;Fa++){var va=ua(Fa);if("object"===typeof va)return va.value}ka.url=pa;ka.mapUrl=za.getMapURL;ka.featureInfoUrl=za.getFeatureInfoURL;ka.copyright=za.copyright;ka.layers=Ba;sa.resolve({url:pa,origUrl:Aa,layerId:ka.id,msg:"Layer URL switched to https.",code:"layer_001",type:"layer"})}});a.default.connect(za,"onError",function(Ba){sa.reject({url:ka.url,origUrl:ka.url,layerId:ka.id,msg:Ba.message,code:"layer_010",type:"layer"})});return sa}
function N(U,ka,ma){var sa=new t.default,pa=[];U.layers&&U.layers.forEach(function(za,Ba){if(za.layerUrl){var ua=new t.default;Ba={configLayer:{url:za.layerUrl,id:"".concat(U.id,"_").concat(Ba)},from:ka.from,to:ka.to,checkRenderer:!1};y(Ba).then(function(Fa){za.layerUrl=Fa.url;ua.resolve(Fa)},function(Fa){ua.resolve(Fa)});pa.push(ua)}});if(pa.length){var Aa=[];(new u.default(pa)).then(function(za){(za||[]).forEach(function(Ba){Aa.push(Ba[1])});ma.queryLayers=Aa;sa.resolve(ma)})}else sa.resolve(ma);
return sa}function P(U,ka,ma,sa){var pa=new t.default,Aa=[];ma.layers&&ma.layers.forEach(function(Ba,ua){if(Ba.layerUrl){var Fa=new t.default;ua={configLayer:{url:Ba.layerUrl,id:"".concat(U.id,"_item_").concat(ua)},from:ka.from,to:ka.to,checkRenderer:!1};y(ua).then(function(va){Ba.layerUrl=va.url;Fa.resolve(va)},function(va){Fa.resolve(va)});Aa.push(Fa)}});if(Aa.length){var za=[];(new u.default(Aa)).then(function(Ba){(Ba||[]).forEach(function(ua){za.push(ua[1])});sa.item.queryLayers=za;pa.resolve(sa)})}else pa.resolve(sa);
return pa}function R(U,ka){var ma,sa,pa=new t.default,Aa=[];if(null===(sa=null===(ma=U.layerDefinition)||void 0===ma?void 0:ma.drawingInfo)||void 0===sa?0:sa.renderer){var za=new t.default;ja(U,U.layerDefinition.drawingInfo.renderer).then(function(ua){U.layerDefinition.drawingInfo.renderer=ua.renderer;za.resolve(ua)},function(ua){za.resolve(ua)});Aa.push(za)}U.layers&&U.layers.forEach(function(ua){var Fa,va;if(null===(va=null===(Fa=ua.layerDefinition)||void 0===Fa?void 0:Fa.drawingInfo)||void 0===
va?0:va.renderer){var xa=new t.default;ja(U,ua.layerDefinition.drawingInfo.renderer).then(function(Da){ua.layerDefinition.drawingInfo.renderer=Da.renderer;xa.resolve(Da)},function(Da){xa.resolve(Da)});Aa.push(xa)}});if(Aa.length){var Ba=[];(new u.default(Aa)).then(function(ua){(ua||[]).forEach(function(Fa){Ba.push(Fa[1])});ka.renderers=Ba;pa.resolve(ka)})}else pa.resolve(ka);return pa}function Y(U,ka,ma){var sa=new t.default,pa=[];ka.layers&&ka.layers.forEach(function(za){var Ba,ua;if(null===(ua=
null===(Ba=za.layerDefinition)||void 0===Ba?void 0:Ba.drawingInfo)||void 0===ua?0:ua.renderer){var Fa=new t.default;ja(U,za.layerDefinition.drawingInfo.renderer).then(function(va){za.layerDefinition.drawingInfo.renderer=va.renderer;Fa.resolve(va)},function(va){Fa.resolve(va)});pa.push(Fa)}});if(pa.length){var Aa=[];(new u.default(pa)).then(function(za){(za||[]).forEach(function(Ba){Aa.push(Ba[1])});ma.item.renderers=Aa;sa.resolve(ma)})}else sa.resolve(ma);return sa}function ja(U,ka){for(var ma=new t.default,
sa=[],pa=JSON.stringify(ka),Aa=pa.indexOf("http://");-1<Aa;){var za=pa.indexOf('"',Aa+1);za=pa.substring(Aa,za);sa.push(da(U,za));Aa=pa.indexOf("http://",Aa+1)}sa.length?(new u.default(sa)).then(function(Ba){var ua=[];(Ba||[]).forEach(function(Fa){var va=Fa[1];ua.push(va);!0===Fa[0]&&(pa=pa.replace(va.origUrl,va.url))});ma.resolve({renderer:JSON.parse(pa),origRenderer:ka,layerId:U.id,type:"renderer",symbols:ua})}):ma.resolve({renderer:ka,origRenderer:ka,layerId:U.id,type:"renderer",symbols:[]});return ma}
function aa(U,ka){var ma=new t.default;ka?ka.url?da(U,ka.url).then(function(sa){ka.url=sa.url;ma.resolve(sa)},function(sa){ma.resolve(sa)}):ma.resolve({url:"",origUrl:"",layerId:U.id,msg:"Symbol has no URL.",code:"sym_003",type:"symbol"}):ma.resolve({url:"",origUrl:"",layerId:U.id,msg:"No symbol.",code:"sym_005",type:"symbol"});return ma}function da(U,ka){var ma=new t.default,sa=ka;if(ka.startsWith("https://"))return ma.resolve({url:ka,origUrl:sa,layerId:U.id,msg:"symbol URL already https",code:"sym_002",
type:"symbol"}),ma;if(ka.startsWith("http://")){if(ka=ka.replace("http://","https://"),-1<ka.indexOf(c.default.self.portalHostname))return ma.resolve({url:ka,origUrl:sa,layerId:U.id,msg:"symbol URL switched to https",code:"sym_001",type:"symbol"}),ma}else return ma.resolve({url:ka,origUrl:sa,layerId:U.id,msg:"symbol URL is relative path",code:"sym_004",type:"symbol"}),ma;ea=ea||[];for(var pa,Aa=function(xa){if(ea[xa].url===ka){pa=ea[xa];if("success"===pa.status)ma.resolve({url:ka,origUrl:sa,layerId:U.id,
msg:"symbol URL switched to https",code:"sym_001",type:"symbol"});else if("error"===pa.status)ma.reject({url:ka,origUrl:sa,layerId:U.id,msg:"symbol URL can't be switched to https",code:"sym_010",type:"symbol"});else if("inProgress"===pa.status)var Da=setInterval(function(Ca){"success"===Ca.status?(clearInterval(Da),ma.resolve({url:ka,origUrl:sa,layerId:U.id,msg:"symbol URL switched to https",code:"sym_001",type:"symbol"})):"error"===Ca.status&&(clearInterval(Da),ma.reject({url:sa,origUrl:sa,layerId:U.id,
msg:"symbol URL can't be switched to https",code:"sym_010",type:"symbol"}))},1E3);return{value:ma}}},za=0;za<ea.length;za++){var Ba=Aa(za);if("object"===typeof Ba)return Ba.value}pa||(pa={url:ka,status:"inProgress"},ea.push(pa));e.default.byId("imageTesterDiv")||q.default.create("div",{id:"imageTesterDiv",style:"position:absolute;top:-1000px;left:-1000px"},document.body);var ua="".concat(Math.random(),"_testImage");q.default.create("img",{id:"".concat(ua,"_testImage")},e.default.byId("imageTesterDiv"));
var Fa=a.default.connect(e.default.byId("".concat(ua,"_testImage")),"onload",function(){a.default.disconnect(Fa);clearTimeout(va);q.default.destroy("".concat(ua,"_testImage"));pa.status="success";ma.resolve({url:ka,origUrl:sa,layerId:U.id,msg:"symbol URL switched to https",code:"sym_001",type:"symbol"})}),va=setTimeout(function(){a.default.disconnect(Fa);q.default.destroy("".concat(ua,"_testImage"));clearTimeout(va);pa.status="error";ma.reject({url:sa,origUrl:sa,layerId:U.id,msg:"symbol URL can't be switched to https",
code:"sym_010",type:"symbol"})},5E3);e.default.byId("".concat(ua,"_testImage")).src=ka;return ma}function ra(U,ka){var ma=U.configLayer,sa=U.from,pa=U.to,Aa=U.checkedItemsList,za=new t.default;if(ma.itemId&&!ka.item)if(Aa[ma.itemId])if("inProgress"===Aa[ma.itemId].status)var Ba=setInterval(function(){"inProgress"!==Aa[ma.itemId].status&&(clearInterval(Ba),ka.itemAccess=Aa[ma.itemId].refObj.itemAccess,ka.item=Aa[ma.itemId].refObj.item,za.resolve(ka))},1E3);else ka.itemAccess=Aa[ma.itemId].refObj.itemAccess,
ka.item=Aa[ma.itemId].refObj.item,za.resolve(ka);else Aa[ma.itemId]={status:"inProgress",refObj:ka},fa(ma.itemId).then(function(ua){ka.itemAccess=!0;var Fa={};if(null===ua||void 0===ua?0:ua.url){ka.item={url:ua.url,origUrl:ua.url,type:"layer"};if(X(ka.origUrl,ua.url)&&!X(ka.origUrl,ka.url))ka.item=f.__assign(f.__assign({},ka.item),{url:ka.url,msg:ka.msg,code:ka.code}),Fa.url=ua.url.replace(sa,pa);else if(X(ka.origUrl,ua.url)&&X(ka.origUrl,ka.url))ka.item=f.__assign(f.__assign({},ka.item),{msg:ka.msg,
code:ka.code});else if(X(ka.url,ua.url))ka.item=f.__assign(f.__assign({},ka.item),{msg:"Layer URL is already ".concat(pa,"."),code:"layer_002"});else if(!X(ka.origUrl,ua.url)&&!X(ka.url,ua.url))if(-1<"CSV GeoRSS KML WebTiledLayer WFS WMS".split(" ").indexOf(ma.layerType||ma.type))Aa[ma.itemId].status="done",za.resolve(ka);else{var va=(0,d.default)(ma);delete va.itemId;ma.url?va.url=ua.url:ma.styleUrl&&(va.styleUrl=ua.url);var xa=(0,d.default)(U);xa.configLayer=va;A(xa).then(function(Da){Fa.url=Da.url;
ka.item=Da;ca(U,ua,ka,Fa).then(function(Ca){Aa[ma.itemId].status="done";za.resolve(Ca)})},function(Da){ka.item=Da;ca(U,ua,ka,Fa).then(function(Ca){Aa[ma.itemId].status="done";za.resolve(Ca)})});return}ca(U,ua,ka,Fa).then(function(Da){Aa[ma.itemId].status="done";za.resolve(Da)})}else ua?(ka.item={url:"",origUrl:"",type:"layer"},ca(U,ua,ka,Fa).then(function(Da){Aa[ma.itemId].status="done";za.resolve(Da)})):(ka.itemAccess=!1,Aa[ma.itemId].status="done",za.resolve(ka))},function(){ka.itemAccess=!1;Aa[ma.itemId].status=
"done";za.resolve(ka)});else za.resolve(ka);return za}function ca(U,ka,ma,sa){var pa=U.configLayer,Aa=U.checkRenderer,za=new t.default;la(ka.id).then(function(Ba){if(Ba&&"Feature Collection"===ka.type)if(Aa&&Ba.layers){var ua=(0,d.default)(pa);delete ua.itemId;ua.featureCollection={layers:Ba.layers};z({configLayer:ua,from:"http://",to:"https://",checkRenderer:Aa,type:null}).then(function(va){ma.item=f.__assign(f.__assign({},ma.item),va);sa.text=JSON.stringify(Ba);ta(ka,sa).then(function(){za.resolve(ma)},
function(){ma.item.msg="Item update failure.";ma.item.code="layer_020";za.resolve(ma)})},function(){za.resolve(ma)})}else za.resolve(ma);else if(null===Ba||void 0===Ba?0:Ba.layers){var Fa=!1;P(pa,U,Ba,ma).then(function(va){va.item.queryLayers&&va.item.queryLayers.forEach(function(xa){xa.url!==xa.origUrl&&(Fa=!0)});Aa?Y(pa,Ba,va).then(function(xa){xa.item.renderers&&!Fa?xa.item.renderers.forEach(function(Da){Da.renderer!==Da.origRenderer&&(Fa=!0)}):xa.item.symbols&&!Fa&&xa.item.symbols.forEach(function(Da){Da.url!==
Da.origUrl&&(Fa=!0)});Fa&&(sa.text=JSON.stringify(Ba));ta(ka,sa).then(function(){za.resolve(xa)},function(){xa.item=f.__assign(f.__assign({},xa.item),{msg:"Item update failure.",code:"layer_020"});za.resolve(xa)})}):(Fa&&(sa.text=JSON.stringify(Ba)),ta(ka,sa).then(function(){za.resolve(va)},function(){va.item=f.__assign(f.__assign({},va.item),{msg:"Item update failure.",code:"layer_020"});za.resolve(va)}))})}else ta(ka,sa).then(function(){za.resolve(ma)},function(){ma.item=f.__assign(f.__assign({},
ma.item),{msg:"Item update failure.",code:"layer_020"});za.resolve(ma)})},function(){ta(ka,sa).then(function(){za.resolve(ma)},function(){ma.item=f.__assign(f.__assign({},ma.item),{msg:"Item update failure.",code:"layer_020"});za.resolve(ma)})});return za}function fa(U){var ka=new t.default;U="".concat(c.default.restBaseUrl,"content/items/").concat(U);(0,g.default)({url:U,content:{f:"json"},callbackParamName:"callback"}).then(function(ma){"update"===ma.itemControl||"admin"===ma.itemControl?ka.resolve(ma):
ka.reject(Error("No write access"))},function(ma){ka.reject(ma)});return ka}function la(U){var ka=new t.default;U="".concat(c.default.restBaseUrl,"content/items/").concat(U,"/data");(0,g.default)({url:U,content:{f:"json"},callbackParamName:"callback"}).then(function(ma){ma&&delete ma._ssl;V();ka.resolve(ma)},function(){ka.reject()});return ka}function ta(U,ka){var ma=new t.default;if((0,h.default)(ka))ma.resolve({});else{V();var sa=U.ownerFolder?"/".concat(U.ownerFolder):"";U="".concat(c.default.restBaseUrl,
"content/users/").concat(U.owner).concat(sa,"/items/").concat(U.id,"/update");"noSave"===V()?ma.resolve({}):(sa={usePost:!0},"http:"===window.location.protocol&&-1<U.indexOf("https://")&&(sa.useProxy=!0),(0,g.default)({url:U,content:f.__assign(f.__assign({},ka),{f:"json"}),callbackParamName:"callback"},sa).then(function(pa){ma.resolve(pa)},function(pa){ma.reject(pa)}))}return ma}function Q(){var U=new t.default,ka=[];if(c.default.self.isPortal){var ma="".concat(c.default.restBaseUrl,"portals/self/servers");
(0,g.default)({url:ma,content:{f:"json"},callbackParamName:"callback"}).then(function(sa){sa.servers&&(b.default.setFederatedServers(sa.servers||[]),(sa.servers||[]).forEach(function(pa){pa.url&&ka.push(pa.url.substring(pa.url.indexOf("//")))}));U.resolve(ka)},function(){U.resolve(ka)})}else U.resolve(ka);return U}function T(U,ka){var ma,sa;for(ma=0;ma<U.operationalLayers.length;ma++){if(U.operationalLayers[ma].id===ka)return U.operationalLayers[ma];if("GroupLayer"===U.operationalLayers[ma].layerType){var pa=
U.operationalLayers[ma].layers;for(sa=0;sa<pa.length;sa++)if(pa[sa].id===ka)return pa[sa]}}if(U.baseMap.baseMapLayers)for(ma=0;ma<U.baseMap.baseMapLayers.length;ma++){if(U.baseMap.baseMapLayers[ma].id===ka)return U.baseMap.baseMapLayers[ma];if("GroupLayer"===U.baseMap.baseMapLayers[ma].layerType)for(pa=U.baseMap.baseMapLayers[ma].layers,sa=0;sa<pa.length;sa++)if(pa[sa].id===ka)return pa[sa]}if(U.baseMap.elevationLayers)for(ma=0;ma<U.baseMap.elevationLayers.length;ma++)if(U.baseMap.elevationLayers[ma].id===
ka)return U.baseMap.elevationLayers[ma];if(U.ground&&U.ground.layers)for(ma=0;ma<U.ground.layers.length;ma++)if(U.ground.layers[ma].id===ka)return U.ground.layers[ma];if(U.tables)for(ma=0;ma<U.tables.length;ma++)if(U.tables[ma].id===ka)return U.tables[ma];if(U.presentation&&U.presentation.slides)for(sa=0;sa<U.presentation.slides.length;sa++){var Aa=U.presentation.slides[sa];if(Aa.baseMap&&Aa.baseMap.baseMapLayers)for(ma=0;ma<Aa.baseMap.baseMapLayers.length;ma++){if(Aa.baseMap.baseMapLayers[ma].id===
ka)return Aa.baseMap.baseMapLayers[ma];if("GroupLayer"===Aa.baseMap.baseMapLayers[ma].layerType)for(pa=Aa.baseMap.baseMapLayers[ma].layers,sa=0;sa<pa.length;sa++)if(pa[sa].id===ka)return pa[sa]}}}function O(U,ka){switch(U.layerType||U.type){case "ArcGISFeatureLayer":case "ArcGISImageServiceLayer":case "ArcGISImageServiceVectorLayer":case "ArcGISMapServiceLayer":case "ArcGISStreamLayer":case "ArcGISTiledImageServiceLayer":case "ArcGISTiledMapServiceLayer":case "ArcGISTiledElevationServiceLayer":case "ArcGISSceneServiceLayer":case "PointCloudLayer":case "IntegratedMeshLayer":case void 0:return!U.url||
-1<U.url.indexOf("://services")&&(-1<U.url.indexOf(".arcgis.com")||-1<U.url.indexOf(".arcgisonline.com"))||(-1<U.url.indexOf("://tiles")||-1<U.url.indexOf("://utility"))&&-1<U.url.indexOf(".arcgis.com")?null:na(U.url);case "VectorTileLayer":return!U.styleUrl||-1<U.styleUrl.indexOf(c.default.self.portalHostname)||-1<U.styleUrl.indexOf(c.default.self.customBaseUrl)||-1<U.styleUrl.indexOf("/items/")||-1<U.styleUrl.indexOf("://tiles")&&-1<U.url.indexOf(".arcgis.com")?null:na(U.styleUrl);case "CSV":case "GeoRSS":case "KML":case "WebTiledLayer":case "WFS":case "WMS":case "BingMapsAerial":case "BingMapsRoad":case "BingMapsHybrid":case "OpenStreetMap":return null;
default:return"table"===ka?-1<U.url.indexOf(".arcgis.com")||-1<U.url.indexOf(".arcgisonline.com")?null:na(U.url):null}}function Z(U){var ka,ma=[];(U.operationalLayers||[]).forEach(function(sa){"GroupLayer"===sa.layerType?sa.layers.forEach(function(pa){ma.push({layer:pa,type:"operationalLayers.groupLayer"})}):ma.push({layer:sa,type:"operationalLayers"})});U.baseMap&&((U.baseMap.baseMapLayers||[]).forEach(function(sa){"GroupLayer"===sa.layerType?sa.layers.forEach(function(pa){ma.push({layer:pa,type:"baseMapLayers.groupLayer"})}):
(sa.title=sa.title||U.baseMap.title,ma.push({layer:sa,type:"baseMapLayers"}))}),(U.baseMap.elevationLayers||[]).forEach(function(sa){sa.title=sa.title||U.baseMap.title;ma.push({layer:sa,type:"elevationLayers"})}));U.ground&&(U.ground.layers||[]).forEach(function(sa){sa.title=sa.title||U.baseMap.title;ma.push({layer:sa,type:"ground"})});(U.tables||[]).forEach(function(sa){ma.push({layer:sa,type:"tables"})});(null===(ka=U.presentation)||void 0===ka?0:ka.slides)&&U.presentation.slides.forEach(function(sa){var pa;
(null===(pa=sa.baseMap)||void 0===pa?0:pa.baseMapLayers)&&sa.baseMap.baseMapLayers.forEach(function(Aa){"GroupLayer"===Aa.layerType?Aa.layers.forEach(function(za){ma.push({layer:za,type:"slides.baseMapLayers.groupLayer"})}):(Aa.title=Aa.title||sa.baseMap.title,ma.push({layer:Aa,type:"slides.baseMapLayers"}))})});return ma}function na(U){U=ha(U);var ka="".concat(U.protocol,"://").concat(U.domain);U.port&&(ka+=":".concat(U.port));return ka+="/".concat(U.instance)}function ia(U,ka){U=ha(U);ka=ha(ka);
return U.domain===ka.domain?!0:!1}function X(U,ka){if(U&&ka){var ma=U.toLowerCase().indexOf("/featureserver/");-1<ma&&(U=U.substring(0,ma+14));ma=ka.toLowerCase().indexOf("/featureserver/");-1<ma&&(ka=ka.substring(0,ma+14));ma=U.toLowerCase().indexOf("/mapserver/");-1<ma&&(U=U.substring(0,ma+10));ma=ka.toLowerCase().indexOf("/mapserver/");-1<ma&&(ka=ka.substring(0,ma+10));ma=U.toLowerCase().indexOf("/sceneserver/");-1<ma&&(U=U.substring(0,ma+12));ma=ka.toLowerCase().indexOf("/sceneserver/");-1<ma&&
(ka=ka.substring(0,ma+12));if(U===ka)return!0}return!1}function ha(U){var ka={};if(!U||!U.length)return ka;var ma=U.indexOf("://");ka.protocol=U.substr(0,ma);U=U.substr(ma+3,U.length);ma=U.indexOf("/");ma=-1===ma?U.length-1:ma;ka.domain=U.substr(0,ma);-1<ka.domain.indexOf(":")&&(ka.port=ka.domain.substr(ka.domain.indexOf(":")+1),ka.domain=ka.domain.substr(0,ka.domain.indexOf(":")));ka.path=-1===ma||ma+1===U.length?null:U.substr(ma+1,U.length);ka.instance=ka.path.split("/")[0];U=ka.domain.split(".");
switch(U.length){case 2:ka.subdomain=null;ka.host=U[0];ka.tld=U[1];break;case 3:ka.subdomain=U[0];ka.host=U[1];ka.tld=U[2];break;case 4:ka.subdomain=U[0],ka.host=U[1],ka.tld="".concat(U[2],".").concat(U[3])}ka.host&&ka.tld&&(ka.parentDomain="".concat(ka.host,".").concat(ka.tld));return ka}function V(){var U=b.default.urlToObject(document.URL);U.query=U.query||{};return U.query.debug}Object.defineProperty(J,"__esModule",{value:!0});J.parseURL=J.sameURL=J.isSameDomain=J.getDomainInstance=J.getConfigLayers=
J.getDomainOfLayer=J.findConfigLayer=J.getFederatedServers=J.updateItem=J.getItemData=J.getItemCard=J.processItemData=J.processItem=J.checkUrlForHttps=J.checkSymbolForHttps=J.checkRendererForHttps=J.processRendererOfItem=J.processRenderer=J.processQueryLayersOfItem=J.processQueryLayers=J.testWMS=J.testWFS=J.testWebTiledLayer=J.testWMTS=J.testKML=J.testGeoRSS=J.testCSV=J.testVectorTileLayer=J.testFeatureCollection=J.checkLayer=J.saveconfig=J.switchToHTTPS=J.switchDomain=J.getUniqueDomains=void 0;c=
f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);var ea=[];J.getUniqueDomains=x;J.switchDomain=D;J.switchToHTTPS=G;J.saveconfig=F;J.checkLayer=
A;J.testFeatureCollection=z;J.testVectorTileLayer=B;J.testCSV=C;J.testGeoRSS=H;J.testKML=E;J.testWMTS=K;J.testWebTiledLayer=I;J.testWFS=L;J.testWMS=M;J.processQueryLayers=N;J.processQueryLayersOfItem=P;J.processRenderer=R;J.processRendererOfItem=Y;J.checkRendererForHttps=ja;J.checkSymbolForHttps=aa;J.checkUrlForHttps=da;J.processItem=ra;J.processItemData=ca;J.getItemCard=fa;J.getItemData=la;J.updateItem=ta;J.getFederatedServers=Q;J.findConfigLayer=T;J.getDomainOfLayer=O;J.getConfigLayers=Z;J.getDomainInstance=
na;J.isSameDomain=ia;J.sameURL=X;J.parseURL=ha;J.default={getUniqueDomains:x,switchToHTTPS:G,switchDomain:D}})},"arcgisonline/map/core/isEmpty":function(){define(["require","exports"],function(S,J){Object.defineProperty(J,"__esModule",{value:!0});J.default=function(f){return f?JSON.stringify(f)===JSON.stringify({}):!1}})},"esri/layers/VectorTileLayer":function(){(function(){var S=function(){try{var f=window.WebGLRenderingContext}catch(e){f=!1}try{for(var c=document.createElement("canvas"),h=["webgl",
"experimental-webgl","webkit-3d","moz-webgl"],d=null,b=0;b<h.length;++b){try{d=c.getContext(h[b])}catch(e){}if(d)break}var a=d}catch(e){a=!1}return f&&a?!0:!1}(),J=["dojo/_base/lang","dojo/has","dojo/Deferred","../sniff","./layer"];S&&J.push("./VectorTileLayerImpl");define(J,function(f,c,h,d,b,a){c=a?a:b.createSubclass({declaredClass:"esri.layers.VectorTileLayer",constructor:function(){var e=new h;e.reject(Error("esri.layers.VectorTileLayer is not supported"));e.promise.otherwise(f.hitch(this,function(q){this._errorHandler(q)}))}});
c.ACCESS_TOKEN=null;c.supported=function(){return S};f.setObject("layers.VectorTileLayer",c,d);return c})})()},"esri/layers/CSVLayer":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../arcgis/csv ./FeatureLayer ../geometry/Extent ../tasks/FeatureSet".split(" "),function(S,J,f,c,h,d,b,a,e){J=J(b,{declaredClass:"esri.layers.CSVLayer",_preventInit:!0,_fieldTypeMap:{Date:"esriFieldTypeDate",Number:"esriFieldTypeDouble",String:"esriFieldTypeString"},constructor:function(q,
t){this.url=q;t=f.mixin({},t);this.columnDelimiter=t.columnDelimiter;this.latitudeFieldName=t.latitudeFieldName;this.longitudeFieldName=t.longitudeFieldName;q=t.layerDefinition;q||(q={fields:t.fields||[],geometryType:"esriGeometryPoint",copyrightText:t.copyright},t.fields&&S.forEach(t.fields,function(u){u.type=this._fieldTypeMap[u.type||"String"];u.alias||(u.alias=u.name)},this));this._buildCsvFcParam={url:this.url,columnDelimiter:this.columnDelimiter,layerDefinition:q,outFields:t.outFields};this.latitudeFieldName&&
this.longitudeFieldName&&(this._buildCsvFcParam.locationInfo={locationType:"coordinates",latitudeFieldName:this.latitudeFieldName,longitudeFieldName:this.longitudeFieldName});this._projectFeatures=f.hitch(this,this._projectFeatures);this._addFeatures=f.hitch(this,this._addFeatures);this._initCSVLayer(t)},refresh:function(){this._fireUpdateStart();this.applyEdits(null,null,this.graphics);this._loadFeatures()},_isWebGLCompatible:function(){return!1},_setMap:function(q){var t=this.inherited(arguments);
this._fireUpdateStart();this._projectFeatures(this._csvFC).then(this._addFeatures).otherwise(this._errorHandler);this._csvFC=null;return t},_initCSVLayer:function(q){var t=this;d.buildCSVFeatureCollection(this._buildCsvFcParam).then(function(u){!t._buildCsvFcParam.locationInfo||t.latitudeFieldName&&t.longitudeFieldName||(t.latitudeFieldName=t._buildCsvFcParam.locationInfo.latitudeFieldName,t.longitudeFieldName=t._buildCsvFcParam.locationInfo.longitudeFieldName);t._csvFC=u;var g=u.layerDefinition;
g.extent=t._getFCExtent(u);q.outFields||(q.outFields=["*"]);q.timeInfo&&(g.timeInfo=q.timeInfo);t._initFeatureLayer({layerDefinition:g},q)}).otherwise(this._errorHandler)},_loadFeatures:function(){d.buildCSVFeatureCollection(this._buildCsvFcParam).then(this._projectFeatures).then(this._addFeatures).otherwise(this._errorHandler)},_projectFeatures:function(q){return d.projectFeatureCollection(q,this._map.spatialReference)},_addFeatures:function(q){q=new e(q.featureSet);this.applyEdits(q.features,null,
null);this._fireUpdateEnd()},_getFCExtent:function(q){if(q&&q.featureSet&&q.featureSet.features){q=q.featureSet.features;var t=q.length;if(1<t){var u=q[0].geometry;var g=new a(u.x,u.y,u.x,u.y);for(--t;0<t;t--)u=q[t].geometry,g.xmin=Math.min(g.xmin,u.x),g.ymin=Math.min(g.ymin,u.y),g.xmax=Math.max(g.xmax,u.x),g.ymax=Math.max(g.ymax,u.y);0>=g.getWidth()&&0>=g.getHeight()&&(g=null)}}return g}});f.setObject("layers.CSVLayer",J,h);return J})},"esri/arcgis/csv":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/sniff dojo/number dojox/data/CsvStore ../kernel ../config ../request ../SpatialReference ../geometry/jsonUtils ../geometry/webMercatorUtils".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u){function g(x){var D=0,G="";J.forEach([","," ",";","|","\t"],function(F){var A=x.split(F).length;A>D&&(D=A,G=F)});return G}function m(x,D){if(!x||"[object Date]"!==Object.prototype.toString.call(x)||isNaN(x.getTime()))return!1;x=!0;if(c("chrome")&&/\d+\W*$/.test(D)){if(D.match(/[^0-9a-zA-Z\s]/))return!1;if(D=D.match(/[a-zA-Z]{2,}/)){x=!1;for(var G=0,F=D.length,A=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i;!x&&
G<=F&&!(x=!A.test(D[G]));)G++;x=!x}}return x}function v(x,D,G){var F=x.indexOf("\n");F=S.trim(x.substr(0,F));var A=D.columnDelimiter;A||(A=g(F));var y=new d({data:x,separator:A});y.fetch({onComplete:function(z,B){B=0;var C={layerDefinition:D.layerDefinition,featureSet:{features:[],geometryType:"esriGeometryPoint"}},H=C.layerDefinition.objectIdField,E=C.layerDefinition.fields;H||J.some(E,function(ra){return"esriFieldTypeOID"===ra.type?(H=ra.name,!0):!1})||(E.push({name:"__OBJECTID",alias:"__OBJECTID",
type:"esriFieldTypeOID",editable:!1}),H="__OBJECTID");var K=y._attributes,I=[],L=[];J.forEach(E,function(ra){"esriFieldTypeDate"===ra.type?I.push(ra.name):("esriFieldTypeDouble"===ra.type||"esriFieldTypeInteger"===ra.type)&&L.push(ra.name)});if(D.locationInfo&&"coordinates"===D.locationInfo.locationType){var M=D.locationInfo.latitudeFieldName;var N=D.locationInfo.longitudeFieldName}else J.forEach(K,function(ra){var ca=J.indexOf(k,ra.toLowerCase());-1!==ca&&(M=ra);ca=J.indexOf(r,ra.toLowerCase());
-1!==ca&&(N=ra)}),M&&N&&(D.locationInfo={locationType:"coordinates",latitudeFieldName:M,longitudeFieldName:N});if(M&&N){-1===J.indexOf(L,M)&&L.push(M);-1===J.indexOf(L,N)&&L.push(N);if(S.isArray(D.outFields)&&-1===J.indexOf(D.outFields,"*"))var P=D.outFields;J.forEach(K,function(ra){J.some(E,function(ca){return ra===ca.name})||E.push({name:ra,alias:ra,type:ra===M||ra===N?"esriFieldTypeDouble":"esriFieldTypeString"})});K=0;var R=z.length;for(K;K<R;K++){var Y=z[K],ja=y.getAttributes(Y),aa={};J.forEach(ja,
function(ra){if(ra&&(ra===M||ra===N||!P||-1<J.indexOf(P,ra))){var ca=ra;0===ra.length&&J.forEach(E,function(la,ta){la.name==="attribute_"+(ta-1)&&(ra="attribute_"+(ta-1))});if(-1<J.indexOf(I,ra)){ca=y.getValue(Y,ca);var fa=new Date(ca);aa[ra]=m(fa,ca)?fa.getTime():null}else-1<J.indexOf(L,ra)?(fa=h.parse(y.getValue(Y,ca)),ra!==M&&ra!==N||!(isNaN(fa)||181<Math.abs(fa))||(fa=parseFloat(y.getValue(Y,ca))),isNaN(fa)?aa[ra]=null:aa[ra]=fa):aa[ra]=y.getValue(Y,ca)}});aa[H]=B;B++;ja=aa[M];var da=aa[N];null==
da||null==ja||isNaN(ja)||isNaN(da)||(P&&-1===J.indexOf(P,M)&&delete aa[M],P&&-1===J.indexOf(P,N)&&delete aa[N],C.featureSet.features.push({geometry:{x:da,y:ja,spatialReference:{wkid:4326}},attributes:aa}))}C.layerDefinition.name="csv";G&&G(C)}else setTimeout(function(){},1),G&&G(null,Error("File does not seem to contain fields with point coordinates."))},onError:function(z){G&&G(null,z)}});return!0}function p(x,D,G,F,A,y){0===x.length&&A(null);var z=t.getGeometryType(D),B=[];J.forEach(x,function(C){C=
new z(C);C.spatialReference=G;B.push(C)},this);D=[102113,102100,3857];G.wkid&&4326===G.wkid&&F.wkid&&-1<J.indexOf(D,F.wkid)?(J.forEach(B,function(C){C.xmin?(C.xmin=Math.max(C.xmin,-180),C.xmax=Math.min(C.xmax,180),C.ymin=Math.max(C.ymin,-89.99),C.ymax=Math.min(C.ymax,89.99)):C.rings?J.forEach(C.rings,function(H){J.forEach(H,function(E){E[0]=Math.min(Math.max(E[0],-180),180);E[1]=Math.min(Math.max(E[1],-89.99),89.99)},this)},this):C.paths?J.forEach(C.paths,function(H){J.forEach(H,function(E){E[0]=
Math.min(Math.max(E[0],-180),180);E[1]=Math.min(Math.max(E[1],-89.99),89.99)},this)},this):C.x&&(C.x=Math.min(Math.max(C.x,-180),180),C.y=Math.min(Math.max(C.y,-89.99),89.99))},this),x=[],J.forEach(B,function(C){C=u.geographicToWebMercator(C);102100!==F.wkid&&(C.spatialReference=F);x.push(C.toJson())},this),A(x)):null!==G.wkid&&-1<J.indexOf(D,G.wkid)&&null!==F.wkid&&4326===F.wkid?(x=[],J.forEach(B,function(C){x.push(u.webMercatorToGeographic(C).toJson())},this),A(x)):(D=function(C,H){C&&C.length===
x.length?(x=[],J.forEach(C,function(E){E&&(E.rings&&0<E.rings.length&&0<E.rings[0].length&&0<E.rings[0][0].length&&!isNaN(E.rings[0][0][0])&&!isNaN(E.rings[0][0][1])||E.paths&&0<E.paths.length&&0<E.paths[0].length&&0<E.paths[0][0].length&&!isNaN(E.paths[0][0][0])&&!isNaN(E.paths[0][0][1])||E.xmin&&!isNaN(E.xmin)&&E.ymin&&!isNaN(E.ymin)||E.x&&!isNaN(E.x)&&E.y&&!isNaN(E.y))?x.push(E.toJson()):x.push(null)},this),A(x)):y(C,H)},a.defaults.geometryService?a.defaults.geometryService.project(B,F,S.hitch(this,
D),y):A(null))}function l(x,D){var G=[102113,102100,3857];return x&&D&&x.wkid===D.wkid&&x.wkt===D.wkt||x&&D&&x.wkid&&D.wkid&&-1<J.indexOf(G,x.wkid)&&-1<J.indexOf(G,D.wkid)?!0:!1}function n(x,D,G,F){if(x.featureSet&&0!==x.featureSet.features.length)if(l(G,D))F(x);else{var A=function(C){var H=[];J.forEach(x.featureSet.features,function(E,K){C[K]&&(E.geometry=C[K],H.push(E))},this);F(x)},y=function(C,H){F(x)},z=function(C,H){p(B,x.featureSet.geometryType,D,G,S.hitch(this,A),S.hitch(this,y))};if(x.featureSet.features&&
0<x.featureSet.features.length){var B=[];J.forEach(x.featureSet.features,function(C){if(C.geometry.toJson)B.push(C.geometry);else{var H=t.getGeometryType(x.featureSet.geometryType);B.push(new H(C.geometry))}});D.toJson||(D=new q(D));G.toJson||(G=new q(G));p(B,x.featureSet.geometryType,D,G,S.hitch(this,A),S.hitch(this,z))}else F(x)}}var k="lat latitude y ycenter latitude83 latdecdeg point-y lat_dd".split(" "),r="lon lng long longitude x xcenter longitude83 longdecdeg point-x long_dd".split(" "),w=
{latFieldStrings:k,longFieldStrings:r,buildCSVFeatureCollection:function(x){var D=new f,G=function(A,y){y?D.errback(y):D.callback(A)},F={url:x.url,handleAs:"text",load:function(A){v(A,x,S.hitch(this,G))},error:function(A){D.errback(A)}};-1<x.url.indexOf("arcgis.com")&&-1<x.url.indexOf("/content/items")&&-1<x.url.indexOf("/data")&&(F.headers={"Content-Type":""});e(F,{usePost:!1});return D},projectFeatureCollection:function(x,D,G){var F=new f;G||(G=new q({wkid:4326}));n(x,G,D,S.hitch(this,function(A){F.callback(A)}));
return F},generateDefaultPopupInfo:function(x){var D={esriFieldTypeDouble:1,esriFieldTypeSingle:1},G={esriFieldTypeInteger:1,esriFieldTypeSmallInteger:1},F={esriFieldTypeDate:1},A=null;x=J.map(x.layerDefinition.fields,S.hitch(this,function(y){"NAME"===y.name.toUpperCase()&&(A=y.name);var z="esriFieldTypeOID"!==y.type&&"esriFieldTypeGlobalID"!==y.type&&"esriFieldTypeGeometry"!==y.type,B=null;if(z){var C=y.name.toLowerCase();if(-1<",stretched value,fnode_,tnode_,lpoly_,rpoly_,poly_,subclass,subclass_,rings_ok,rings_nok,".indexOf(","+
C+",")||-1<C.indexOf("area")||-1<C.indexOf("length")||-1<C.indexOf("shape")||-1<C.indexOf("perimeter")||-1<C.indexOf("objectid")||C.indexOf("_")===C.length-1||C.indexOf("_i")===C.length-2&&1<C.length)z=!1;y.type in G?B={places:0,digitSeparator:!0}:y.type in D?B={places:2,digitSeparator:!0}:y.type in F&&(B={dateFormat:"shortDateShortTime"})}return S.mixin({},{fieldName:y.name,label:y.alias,isEditable:!0,tooltip:"",visible:z,format:B,stringFieldOption:"textbox"})}));return{title:A?"{"+A+"}":"",fieldInfos:x,
description:null,showAttachments:!1,mediaInfos:[]}},_getSeparator:g,_isValidDate:m,_processCsvData:v,_projectGeometries:p,_sameSpatialReference:l,_projectFeatureSet:n};S.setObject("arcgis.csv",w,b);return w})},"esri/layers/KMLLayer":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/sniff dojo/io-query dojo/dom-construct dojo/dom-style ../kernel ../config ../lang ../request ../urlUtils ../SpatialReference ../geometry/webMercatorUtils ../dijit/PopupTemplate ./layer ./KMLFolder ./KMLGroundOverlay ./MapImageLayer ./FeatureLayer".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D){var G=J([k],{declaredClass:"esri.layers.KMLLayer",serviceUrl:v.getProtocolForWebResource()+"//utility.arcgis.com/sharing/kml",constructor:function(F,A){this._url=v.urlToObject(this.url=F);this._outSR=A&&A.outSR||new p({wkid:4326});this._options=c.mixin({},A);u.defaults.kmlService&&(this.serviceUrl=u.defaults.kmlService);if(F=this.linkInfo=A&&A.linkInfo)this.visible=!!F.visibility,this._waitingForMap=!!F.viewFormat;(!F||F&&F.visibility&&!this._waitingForMap)&&
this._parseKml();this.refresh=c.hitch(this,this.refresh);this.registerConnectEvents("esri.layers.KMLLayer",!0)},getFeature:function(F){if(F){var A=F.type,y=F.id,z;switch(A){case "esriGeometryPoint":case "esriGeometryPolyline":case "esriGeometryPolygon":(F=this["_"+A])&&(z=c.getObject("_mode._featureMap."+y,!1,F));break;case "GroundOverlay":if(F=this._groundLyr){var B=F.getImages();A=B.length;for(F=0;F<A;F++)if(B[F].id===y){z=B[F];break}}break;case "NetworkLink":h.some(this._links,function(C){return C.linkInfo&&
C.linkInfo.id===y?(z=C,!0):!1});break;case "Folder":for(A=(B=this.folders)?B.length:0,F=0;F<A;F++)if(B[F].id===y){z=B[F];break}}return z}},getLayers:function(){var F=[];this._groundLyr&&F.push(this._groundLyr);this._fLayers&&(F=F.concat(this._fLayers));this._links&&h.forEach(this._links,function(A){A.declaredClass&&F.push(A)});return F},setFolderVisibility:function(F,A){F&&(this._fireUpdateStart(),(F.visible=A)&&(A=this._areLocalAncestorsVisible(F)),this._setState(F,A),this._fireUpdateEnd())},_eventMap:{"network-link-error":["error"]},
onRefresh:function(){},onOpacityChange:function(){},onNetworkLinkError:function(){},_parseKml:function(F){var A=this;this._fireUpdateStart();this._io=m({url:this.serviceUrl,content:{url:this._url.path+this._getQueryParameters(F),model:"simple",folders:"",refresh:this.loaded?!0:void 0,outSR:d.toJson(this._outSR.toJson())},callbackParamName:"callback",load:function(y){A._io=null;A._initLayer(y)},error:function(y){A._io=null;y=c.mixin(Error(),y);y.message="Unable to load KML: "+(y.message||"");A._fireUpdateEnd(y);
A._errorHandler(y)}})},_initLayer:function(F){if(this.loaded){var A=[];h.forEach(this.folders,function(K){K.visible&&A.push(K.id)});this._options.minScale=this.minScale;this._options.maxScale=this.maxScale;this._options.opacity=this.opacity;this._removeInternalLayers()}this.name=F.name;this.description=F.description;this.snippet=F.snippet;this.visibility=F.visibility;this.featureInfos=F.featureInfos;var y,z=this.folders=F.folders,B=[];if(z){var C=z.length;for(y=0;y<C;y++){var H=z[y]=new r(z[y]);-1===
H.parentFolderId&&B.push(H)}}z=this._links=F.networkLinks;C=z?z.length:0;for(y=0;y<C;y++)if(!z[y].viewRefreshMode||-1===z[y].viewRefreshMode.toLowerCase().indexOf("onregion")){var E=c.mixin({},this._options);E.linkInfo=z[y];E.id&&(E.id=E.id+"_"+y);H=z[y]=new G(z[y].href,E);H._parentLayer=this;H._parentFolderId=this._getLinkParentId(H.linkInfo.id);H._linkErrorHandle=H.on("error,network-link-error",c.hitch(H,function(K){this._parentLayer.onNetworkLinkError(K.error)}))}if((z=F.groundOverlays)&&0<z.length)for(E=
c.mixin({},this._options),E.id&&(E.id+="_mapImage"),H=this._groundLyr=new x(E),C=z.length,y=0;y<C;y++)H.addImage(new w(z[y]));(F=c.getObject("featureCollection.layers",!1,F))&&0<F.length&&(this._fLayers=[],h.forEach(F,function(K,I){var L=c.getObject("featureSet.features",!1,K);L&&0<L.length&&(E=c.mixin({outFields:["*"],infoTemplate:K.popupInfo?new n(K.popupInfo):null,editable:!1},this._options),E.id&&(E.id=E.id+"_"+I),E.webgl=!1,K.layerDefinition.capabilities="Query,Data",K=new D(K,E),K.geometryType&&
(this["_"+K.geometryType]=K),this._fLayers.push(K))},this),0===this._fLayers.length&&delete this._fLayers);if(!this.loaded)for(C=B.length,y=0;y<C;y++)H=B[y],this._setState(H,H.visible);this._fireUpdateEnd();this.loaded?(this._addInternalLayers(),h.forEach(this.folders,function(K){-1<h.indexOf(A,K.id)?this.setFolderVisibility(K,!0):this.setFolderVisibility(K,!1)},this),this.onRefresh()):(this.loaded=!0,this.onLoad(this))},_addInternalLayers:function(){var F=this._map;this._fireUpdateStart();this._links&&
h.forEach(this._links,function(B){B.declaredClass&&(F.addLayer(B),B._waitingForMap&&(B._waitingForMap=null,B.visible?B._parseKml(F):B._wMap=F))});var A=F.spatialReference,y=this._outSR;if(!A.equals(y))if(A.isWebMercator()&&4326===y.wkid)var z=l.geographicToWebMercator;else if(y.isWebMercator()&&4326===A.wkid)z=l.webMercatorToGeographic;else return;this._groundLyr&&(z&&h.forEach(this._groundLyr.getImages(),function(B){B.extent=z(B.extent)}),F.addLayer(this._groundLyr));(A=this._fLayers)&&0<A.length&&
h.forEach(A,function(B){if(z){var C=B.graphics,H,E,K=C?C.length:0;for(H=0;H<K;H++)(E=C[H].geometry)&&C[H].setGeometry(z(E))}F.addLayer(B)});this.onVisibilityChange(this.visible)},_removeInternalLayers:function(){var F=this._map;this._links&&h.forEach(this._links,function(A){A.declaredClass&&A._io&&A._io.cancel();A._linkErrorHandle&&(A._linkErrorHandle.remove(),A._linkErrorHandle=null)});F&&h.forEach(this.getLayers(),F.removeLayer,F)},_setState:function(F,A){F=F.featureInfos;var y,z,B=F?F.length:0,
C=A?"show":"hide",H=A?"_resume":"_suspend";for(z=0;z<B;z++){var E=F[z];if(y=this.getFeature(E))if("Folder"===E.type)this._setState(y,A&&y.visible);else if("NetworkLink"===E.type)this._setInternalVisibility(y,A);else if(y[H])y[H]();else y[C]()}},_areLocalAncestorsVisible:function(F){var A=F.parentFolderId;for(F=F.visible;F&&-1!==A;)A=this.getFeature({type:"Folder",id:A}),F=F&&A.visible,A=A.parentFolderId;return F},_setInternalVisibility:function(F,A){var y=F._parentLayer,z=F._parentFolderId;for(A=
A&&F.visible;A&&y;)A=A&&y.visible,-1<z&&(A=A&&y._areLocalAncestorsVisible(y.getFeature({type:"Folder",id:z}))),z=y._parentFolderId,y=y._parentLayer;this._setIntState(F,A)},_setIntState:function(F,A){F&&h.forEach(F.getLayers(),function(y){y.linkInfo?F._setIntState(y,A&&y.visible&&F._areLocalAncestorsVisible(F.getFeature({type:"Folder",id:y._parentFolderId}))):y.setVisibility(A)})},_getLinkParentId:function(F){var A=-1;this.folders&&h.some(this.folders,function(y){return y.networkLinkIds&&-1!==h.indexOf(y.networkLinkIds,
F)?(A=y.id,!0):!1});return A},_checkAutoRefresh:function(){var F=this.linkInfo;if(F)if(this.visible){if(this.loaded&&this._map){var A=F.refreshMode,y=F.refreshInterval,z=F.viewRefreshMode;F=F.viewRefreshTime;A&&-1!==A.toLowerCase().indexOf("oninterval")&&0<y&&(this._stopAutoRefresh(),this._timeoutHandle=setTimeout(this.refresh,1E3*y));z&&-1!==z.toLowerCase().indexOf("onstop")&&0<F&&!this._extChgHandle&&(this._extChgHandle=f.connect(this._map,"onExtentChange",this,this._extentChanged))}}else this._stopAutoRefresh(),
f.disconnect(this._extChgHandle),delete this._extChgHandle},_stopAutoRefresh:function(){clearTimeout(this._timeoutHandle);this._timeoutHandle=null},_getQueryParameters:function(F){F=F||this._map;var A={},y=this.linkInfo,z=F&&F.extent;if(this._url.query){c.mixin(A,this._url.query);var B=!!this._url.query.token}t.id&&!B&&(B=t.id.findCredential(this._url.path))&&(A.token=B.token);if(y){B=y.viewFormat;var C=y.httpQuery;y=y.viewBoundScale;if(z&&B){var H=z,E=z,K=z.spatialReference;K&&(K.isWebMercator()?
H=l.webMercatorToGeographic(z):4326===K.wkid&&(E=l.geographicToWebMercator(z)));z=H.getCenter();E=Math.max(E.getWidth(),E.getHeight());y&&(H=H.expand(y));B=B.replace(/\[bboxWest\]/ig,H.xmin).replace(/\[bboxEast\]/ig,H.xmax).replace(/\[bboxSouth\]/ig,H.ymin).replace(/\[bboxNorth\]/ig,H.ymax).replace(/\[lookatLon\]/ig,z.x).replace(/\[lookatLat\]/ig,z.y).replace(/\[lookatRange\]/ig,E).replace(/\[lookatTilt\]/ig,0).replace(/\[lookatHeading\]/ig,0).replace(/\[lookatTerrainLon\]/ig,z.x).replace(/\[lookatTerrainLat\]/ig,
z.y).replace(/\[lookatTerrainAlt\]/ig,0).replace(/\[cameraLon\]/ig,z.x).replace(/\[cameraLat\]/ig,z.y).replace(/\[cameraAlt\]/ig,E).replace(/\[horizFov\]/ig,60).replace(/\[vertFov\]/ig,60).replace(/\[horizPixels\]/ig,F.width).replace(/\[vertPixels\]/ig,F.height).replace(/\[terrainEnabled\]/ig,0);c.mixin(A,a.queryToObject(B))}C&&(C=C.replace(/\[clientVersion\]/ig,t.version).replace(/\[kmlVersion\]/ig,2.2).replace(/\[clientName\]/ig,"ArcGIS API for JavaScript").replace(/\[language\]/ig,S.locale),c.mixin(A,
a.queryToObject(C)))}F=[];for(var I in A)g.isDefined(A[I])&&F.push(I+"\x3d"+A[I]);return(F=F.join("\x26"))?"?"+F:""},setScaleRange:function(F,A){this.inherited(arguments);h.forEach(this.getLayers(),function(y){y.setScaleRange(F,A)})},setOpacity:function(F){this.opacity!=F&&(h.forEach(this.getLayers(),function(A){A.setOpacity(F)}),this.opacity=F,this.onOpacityChange(F))},_setMap:function(F,A){this.inherited(arguments);this._map=F;var y=this._div=e.create("div",null,A);q.set(y,"position","absolute");
this._addInternalLayers();this.evaluateSuspension();return y},_unsetMap:function(F,A){this._io&&this._io.cancel();this._stopAutoRefresh();f.disconnect(this._extChgHandle);delete this._extChgHandle;this._removeInternalLayers();var y=this._div;y&&(A.removeChild(y),e.destroy(y));this._wMap=this._div=null;this.inherited(arguments)},onVisibilityChange:function(F){this.loaded?(this._fireUpdateStart(),this._setInternalVisibility(this,F),this._checkAutoRefresh(),this._fireUpdateEnd()):this.linkInfo&&F&&(this._waitingForMap||
this._parseKml(this._wMap))},refresh:function(){this.loaded&&this._map&&!this._io&&this.visible&&this._parseKml()},getFeatureCollection:function(F){var A,y=[];(F=this.getFeature({type:"Folder",id:F}))&&(A=h.map(F.featureInfos,function(z){if("esriGeometryPoint"===z.type||"esriGeometryPolyline"===z.type||"esriGeometryPolygon"===z.type)return z.id},this))&&0<A.length&&h.forEach(this._fLayers,function(z){var B;var C=z.toJson();C.featureSet.features&&0<C.featureSet.features.length&&(B=h.filter(C.featureSet.features,
function(H){if(-1!==h.indexOf(A,H.attributes[z.objectIdField]))return H},this));B&&0<B.length&&(C.featureSet.features=B,y.push(C))},this);return y},getFeatureCount:function(F){F=this.getFeature({type:"Folder",id:F});var A={points:0,polylines:0,polygons:0};F&&h.forEach(F.featureInfos,function(y){"esriGeometryPoint"===y.type&&(A.points+=1);"esriGeometryPolyline"===y.type&&(A.polylines+=1);"esriGeometryPolygon"===y.type&&(A.polygons+=1)});return A},_extentChanged:function(){this._stopAutoRefresh();this._timeoutHandle=
setTimeout(this.refresh,1E3*this.linkInfo.viewRefreshTime)}});c.setObject("layers.KMLLayer",G,t);return G})},"esri/layers/KMLFolder":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(S,J,f,c,h){S=S(null,{declaredClass:"esri.layers.KMLFolder",constructor:function(d){J.mixin(this,d);h.isDefined(this.visibility)&&(this.visible=!!this.visibility)}});J.setObject("layers.KMLFolder",S,c);return S})},"esri/layers/KMLGroundOverlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./MapImage".split(" "),
function(S,J,f,c,h,d){S=S([d],{declaredClass:"esri.layers.KMLGroundOverlay",constructor:function(b){h.isDefined(this.visibility)&&(this.visible=!!this.visibility)}});J.setObject("layers.KMLGroundOverlay",S,c);return S})},"esri/layers/GeoRSSLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../config ../request ../urlUtils ./ServiceGeneratedFeatureCollection".split(" "),function(S,J,f,c,h,d,b,a,e){S=S([e],{declaredClass:"esri.layers.GeoRSSLayer",serviceUrl:a.getProtocolForWebResource()+
"//utility.arcgis.com/sharing/rss",constructor:function(q,t){this._url=a.urlToObject(this.url=q);d.defaults.geoRSSService&&(this.serviceUrl=d.defaults.geoRSSService);this._createLayer()},parse:function(){return this._io=b({url:this.serviceUrl,content:{url:this.url,refresh:this.loaded?!0:void 0,outSR:this._outSR?f.toJson(this._outSR.toJson()):void 0},callbackParamName:"callback"})},_initLayer:function(q){this.inherited(arguments);this.loaded||(this.loaded=!0,this.onLoad(this))}});J.setObject("layers.GeoRSSLayer",
S,h);return S})},"esri/layers/ServiceGeneratedFeatureCollection":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-style dojo/has ../kernel ../SpatialReference ../geometry/Extent ../geometry/webMercatorUtils ../renderers/SimpleRenderer ./layer ./FeatureLayer ../dijit/PopupTemplate".split(" "),function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v){S=S([g],{declaredClass:"esri.layers._ServiceGeneratedFeatureCollection",constructor:function(p,l){this.pointSymbol=
l&&l.pointSymbol;this.polylineSymbol=l&&l.polylineSymbol;this.polygonSymbol=l&&l.polygonSymbol;this._outSR=l&&(l.outSpatialReference||l.outSR)||new e({wkid:4326});this._options=f.mixin({},l)},parse:function(){},getFeatureLayers:function(){var p=[];this._fLayers&&(p=p.concat(this._fLayers));return p},onRefresh:function(){},onOpacityChange:function(){},refresh:function(){this.loaded&&this._map&&!this._io&&this.visible&&this._createLayer()},_createLayer:function(p){var l=this;this._fireUpdateStart();
p=this.parse(p);p.addCallback(function(n){l._io=null;l._initLayer(n)});p.addErrback(function(n){l._io=null;n=f.mixin(Error(),n);n.message="Unable to load resource: "+l.url+" "+(n.message||"");l._fireUpdateEnd(n);l.onError(n)})},_initLayer:function(p){this.loaded&&this._removeInternalLayers();this.name=p.name;this.description=p.description;this.snippet=p.snippet;this.featureInfos=p.featureInfos;this.fullExtent=this.initialExtent=new q(p.lookAtExtent);this.copyright=p.author||p.copyright;var l;(p=f.getObject("featureCollection.layers",
!1,p))&&0<p.length&&(this._fLayers=[],c.forEach(p,function(n,k){var r=f.getObject("featureSet.features",!1,n);r&&0<r.length&&(l=f.mixin({outFields:["*"],infoTemplate:n.popupInfo?new v(n.popupInfo):null,editable:!1},this._options),l.id&&(l.id=l.id+"_"+k),l.webgl=!1,n.layerDefinition.capabilities="Query,Data",n=new m(n,l),n.geometryType&&(this["_"+n.geometryType]=n),this._fLayers.push(n))},this),0===this._fLayers.length&&delete this._fLayers);this.items=[];this._esriGeometryPoint&&(this.items=this.items.concat(this._esriGeometryPoint.graphics),
this.pointSymbol&&(p=new u(this.pointSymbol),this._esriGeometryPoint.setRenderer(p)));this._esriGeometryPolyline&&(this.items=this.items.concat(this._esriGeometryPolyline.graphics),this.polylineSymbol&&(p=new u(this.polylineSymbol),this._esriGeometryPolyline.setRenderer(p)));this._esriGeometryPolygon&&(this.items=this.items.concat(this._esriGeometryPolygon.graphics),this.polygonSymbol&&(p=new u(this.polygonSymbol),this._esriGeometryPolygon.setRenderer(p)));this._fireUpdateEnd();this.loaded&&(this._addInternalLayers(),
this.onRefresh())},_addInternalLayers:function(){var p=this._map;this._fireUpdateStart();var l=p.spatialReference,n=this._outSR;if(l.wkid)var k=l._isWebMercator()&&n._isWebMercator()||l.wkid===n.wkid;else if(l.wkt)k=l.wkt===n.wkt;else return;if(!k)if(l._isWebMercator()&&4326===n.wkid)this._converter=t.geographicToWebMercator;else if(n._isWebMercator()&&4326===l.wkid)this._converter=t.webMercatorToGeographic;else return;(l=this._fLayers)&&0<l.length&&c.forEach(l,function(r){if(this._converter){var w=
r.graphics,x,D,G=w?w.length:0;for(x=0;x<G;x++)(D=w[x].geometry)&&w[x].setGeometry(this._converter(D))}p.addLayer(r)},this);this.setVisibility(this.visible);this._fireUpdateEnd()},_removeInternalLayers:function(){var p=this._map;p&&c.forEach(this.getFeatureLayers(),p.removeLayer,p)},setScaleRange:function(p,l){this.inherited(arguments);c.forEach(this.getFeatureLayers(),function(n){n.setScaleRange(p,l)});this._options.minScale=this.minScale;this._options.maxScale=this.maxScale},setOpacity:function(p){this.opacity!=
p&&(c.forEach(this.getFeatureLayers(),function(l){l.setOpacity(p)}),this.opacity=this._options.opacity=p,this.onOpacityChange(p))},onVisibilityChange:function(p){this._fireUpdateStart();c.forEach(this.getFeatureLayers(),function(l){l.setVisibility(p)});this._fireUpdateEnd()},_setMap:function(p,l){this.inherited(arguments);this._map=p;var n=this._div=h.create("div",null,l);d.set(n,"position","absolute");this._addInternalLayers();this.evaluateSuspension();return n},_unsetMap:function(p,l){this._io&&
this._io.cancel();J.disconnect(this._extChgHandle);delete this._extChgHandle;this._removeInternalLayers();var n=this._div;n&&(l.removeChild(n),h.destroy(n));this._div=null;this.inherited(arguments)}});f.setObject("layers._ServiceGeneratedFeatureCollection",S,a);return S})},"esri/layers/WMSLayer":function(){define("require dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/sniff ../config ../graphic ../kernel ../request ../urlUtils ../dijit/PopupTemplate ../SpatialReference ../geometry/Extent ../geometry/Point ./DynamicMapServiceLayer ./WMSLayerInfo dojo/query".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l){f=f([p],{declaredClass:"esri.layers.WMSLayer",_CRS_TO_EPSG:{84:4326,83:4269,27:4267},_REVERSED_LAT_LONG_RANGES:[[4001,4999],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3300,3301],[3328,3335],[3346,3346],[3350,3352],
[3366,3366],[3416,3416],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]],_WEB_MERCATOR:[102100,3857,102113,900913],_WORLD_MERCATOR:[3395,54004],allExtents:[],version:null,constructor:function(n,k){var r=t.urlToObject(n);r.query&&(r.query.version||r.query.Version||r.query.VERSION)&&
(this.version=r.query.version||r.query.Version||r.query.VERSION);this.url=n=this._stripParameters(n,"version service request bbox format height width layers srs crs styles transparent bgcolor exceptions time elevation sld wfs".split(" "));this._url=t.urlToObject(n);this._getCapabilitiesURL=n;this._initLayer=c.hitch(this,this._initLayer);this._parseCapabilities=c.hitch(this,this._parseCapabilities);this._getCapabilitiesError=c.hitch(this,this._getCapabilitiesError);k?(this.customParameters=k.customParameters,
this.customLayerParameters=k.customLayerParameters,this.imageFormat=this._getImageFormat(k.format),this.imageTransparency=!1!==k.transparent,this.visibleLayers=k.visibleLayers?k.visibleLayers:[],this.version=k.version||this.version,k.resourceInfo?this._readResourceInfo(k.resourceInfo):this._getCapabilities()):(this.imageFormat="image/png",this.imageTransparency=!0,this.visibleLayers=[],this._getCapabilities());this._blankImageURL=S.toUrl("../images/pixel.png");this.extentProcessor=this._createExtentProcessor(0);
this._createChildLayer()},setVisibleLayers:function(n){this.visibleLayers=(n=this._checkVisibleLayersList(n))?n:[];this.refresh(!0)},setImageFormat:function(n){this.imageFormat=this._getImageFormat(n);this.refresh(!0)},setImageTransparency:function(n){this.imageTransparency=n;this.refresh(!0)},setCustomParameters:function(n,k){this.customParameters=n;this.customLayerParameters=k;this.refresh(!0)},refresh:function(){this._refreshTS=Date.now();this.inherited(arguments);this._childLayer&&this._childLayer.refresh.apply(this._childLayer,
arguments)},getImageUrl:function(n,k,r,w){if(this.visibleLayers&&0!==this.visibleLayers.length){n=this._getImageParams(n,k,r);n=this._mixinCustomLayerParameters(n);k=this.getMapURL;var x;k+=-1===k.indexOf("?")?"?":"";for(x in n)n.hasOwnProperty(x)&&(k+="?"===k.substring(k.length-1,k.length)?"":"\x26",k+=x+"\x3d"+n[x]);k=this.addTimestampToURL(k);w(t.addProxy(k))}else w(this._blankImageURL)},_setMap:function(n,k,r){var w=this.inherited(arguments);n.wrapAround180?this._childLayer&&(this.suspended&&
this._childLayer.suspend(),this._childLayer._setMap(n,w)):this._childLayer=this.extentProcessor=null;return w},_unsetMap:function(n,k){this._childLayer&&this._childLayer._unsetMap(n,this._div);this.inherited(arguments)},onSuspend:function(){this.inherited(arguments);this._childLayer&&this._childLayer.suspend()},onResume:function(){this.inherited(arguments);this._childLayer&&this._childLayer.resume()},_createChildLayer:function(){this._childLayer=new p(null,{extentProcessor:this._createExtentProcessor(1)});
this._childLayer._isChildLayer=!0;this._childLayer.getImageUrl=c.hitch(this,this.getImageUrl);this._childLayer.loaded=!0},_createExtentProcessor:function(n){return c.hitch(this,this._extentProcessor,n)},_extentProcessor:function(n,k){var r=k.extent,w=k.width,x=0;if(r){k=r.getWidth()/w;var D=r.bisect();r=D.extents;var G=r[n];G&&(w=D.marginLeft/k,x=0===n?w:w+r[0].getWidth()/k,w=Math.ceil(G.getWidth()/k),x=Math.ceil(x));r=G}return{extent:r,width:w,marginLeft:x}},_getImageParams:function(n,k,r){var w=
n.spatialReference.wkid;-1===h.indexOf(this.spatialReferences,w)&&n.spatialReference.latestWkid&&(w=n.spatialReference.latestWkid);if(h.some(this._WEB_MERCATOR,function(A){return A==w})){var x=h.filter(this.spatialReferences,function(A){return h.some(this._WEB_MERCATOR,function(y){return y==A})},this);0===x.length&&(x=h.filter(this.spatialReferences,function(A){return h.some(this._WORLD_MERCATOR,function(y){return y==A})},this));w=0<x.length?x[0]:this._WEB_MERCATOR[1]}this.spatialReferences=h.filter(this.spatialReferences,
function(A){return A!==w});this.spatialReferences.unshift(w);x=n.xmin;var D=n.xmax,G=n.ymin;n=n.ymax;var F={SERVICE:"WMS",REQUEST:"GetMap"};F.FORMAT=this.imageFormat;F.TRANSPARENT=this.imageTransparency?"TRUE":"FALSE";F.STYLES="";F.VERSION=this.version;F.LAYERS=this.visibleLayers?this.visibleLayers.toString():null;F.WIDTH=k;F.HEIGHT=r;this.maxWidth<k&&(F.WIDTH=this.maxWidth);this.maxHeight<r&&(F.HEIGHT=this.maxHeight);k=w?w:NaN;isNaN(k)||("1.3.0"==this.version?F.CRS="EPSG:"+k:F.SRS="EPSG:"+k);"1.3.0"==
this.version&&this._useLatLong(k)?F.BBOX=G+","+x+","+n+","+D:F.BBOX=x+","+G+","+D+","+n;return F},_initLayer:function(n,k){this.spatialReference=new g(this.extent.spatialReference);this.initialExtent=new m(this.extent);this.fullExtent=new m(this.extent);this.visibleLayers=this._checkVisibleLayersList(this.visibleLayers);var r=c.hitch(this,function(){this.loaded=!0;this.onLoad(this);var w=this._loadCallback;w&&(delete this._loadCallback,w(this))});d("chrome")?(n=b.defaults.io,k="with-credentials"===
n.useCors?t.canUseXhr(this.getMapURL,!0):-1,(n=-1<k?n.corsEnabledServers[k]:null)&&n.withCredentials?q({url:this.getMapURL,handleAs:"text",content:{SERVICE:"WMS",REQUEST:"GetMap"}}).addBoth(function(){r()}):r()):r()},_readResourceInfo:function(n){n.extent?n.layerInfos?(this.extent=n.extent,this.allExtents[0]=n.extent,this.layerInfos=n.layerInfos,this.description=n.description?n.description:"",this.copyright=n.copyright?n.copyright:"",this.title=n.title?n.title:"",this.getMapURL=n.getMapURL?n.getMapURL:
this._getCapabilitiesURL,this.getFeatureInfoURL=n.getFeatureInfoURL,this.featureInfoFormat=n.featureInfoFormat,this.version=n.version?n.version:"1.3.0",this.maxWidth=n.maxWidth?n.maxWidth:5E3,this.maxHeight=n.maxHeight?n.maxHeight:5E3,this.spatialReferences=n.spatialReferences?n.spatialReferences:[],this.imageFormat=this._getImageFormat(n.format),this.setScaleRange(n.minScale,n.maxScale),this.customLayerParameters=n.customLayerParameters||this.customLayerParameters,this.customParameters=n.customParameters||
this.customParameters,this._initLayer()):this._errorHandler(Error("esri.layers.WMSLayer: unable to find the 'layerInfos' property in resourceInfo")):this._errorHandler(Error("esri.layers.WMSLayer: Unable to find the 'extent' property in resourceInfo."))},_getCapabilities:function(n){var k=this._url.query?this._url.query:{};k.SERVICE="WMS";k.REQUEST="GetCapabilities";this.version&&(k.VERSION=this.version);k=this._mixinCustomParameters(k);var r=this._url.path+"?",w;for(w in k)k.hasOwnProperty(w)&&(r+=
"?"==r.substring(r.length-1,r.length)?"":"\x26",r+=w+"\x3d"+k[w]);q({url:r,handleAs:n||"xml",headers:{"Content-Type":null},load:this._parseCapabilities,error:this._getCapabilitiesError},{usePost:!1})},_parseCapabilities:function(n,k){if(n){if("text"===k.handleAs){try{var r=(new DOMParser).parseFromString(n,"application/xml")}catch(y){}r&&!r.getElementsByTagName("parsererror").length||this._errorHandler(Error("GetCapabilities request for "+this._getCapabilitiesURL+" failed. (XML Parse error.)"))}else r=
n;var w=this;this.version=this._getAttributeValue("WMS_Capabilities","version",r,null);this.version||(this.version=this._getAttributeValue("WMT_MS_Capabilities","version",r,"1.3.0"));n=this._getTag("Service",r);this.title=this._getTagValue("Title",n,"");this.title||(this.title=this._getTagValue("Name",n,""));this.copyright=this._getTagValue("AccessConstraints",n,"");this.description=this._getTagValue("Abstract",n,"");this.maxWidth=parseInt(this._getTagValue("MaxWidth",n,5E3),10);this.maxHeight=parseInt(this._getTagValue("MaxHeight",
n,5E3),10);if(n=this._getTag("Layer",r)){var x=this._getLayerInfo(n),D=0,G=null;n=this._getTag("Capability",r);h.forEach(n.childNodes,function(y){"Layer"==y.nodeName&&(0===D?G=y:(1===D&&x.name&&(x.name="",x.subLayers=[],x.subLayers.push(this._getLayerInfo(G))),x.subLayers.push(this._getLayerInfo(y))),D++)},this);if(x&&(this.layerInfos=x.subLayers,this.layerInfos&&0!==this.layerInfos.length||(this.layerInfos=[x]),this.extent=x.extent,this.extent||(x.extent=new m(this.layerInfos[0].extent.toJson()),
this.extent=x.extent),this.allExtents=x.allExtents,this.allExtents&&this.allExtents.length||(x.allExtents=[],h.forEach(this.layerInfos[0].allExtents,function(y,z){y&&(x.allExtents[z]=new m(y.toJson()))}),this.allExtents=x.allExtents),this.spatialReferences=x.spatialReferences,!this.spatialReferences.length&&0<this.layerInfos.length)){var F=function(y){var z;for(z=0;z<y.subLayers.length;z++){var B=y.subLayers[z],C=B.spatialReferences;!C.length&&B.subLayers&&0<B.subLayers.length&&(C=F(B));if(C.length)return C}return[]};
for(n=0;n<this.layerInfos.length&&(k=this.layerInfos[n],this.spatialReferences=this.layerInfos[0].spatialReferences,!this.spatialReferences.length&&k.subLayers&&0<k.subLayers.length&&(this.spatialReferences=F(k)),!this.spatialReferences.length);n++);}n=function(y){return(y=J.query("DCPType",w._getTag(y,r)))&&0<y.length&&(y=J.query("HTTP",y[0]))&&0<y.length&&(y=J.query("Get",y[0]))&&0<y.length&&(y=w._getAttributeValue("OnlineResource","xlink:href",y[0],null))?(y.indexOf("\x26")===y.length-1&&(y=y.substring(0,
y.length-1)),w._stripParameters(y,["service","request"])):null};k=function(y){var z=[];0===J.query("Operation",r).length?h.forEach(J.query("Format",w._getTag(y,r)),function(B){z.push(B.text?B.text:B.textContent)}):(h.forEach(J.query("Operation",r),function(B){B.getAttribute("name")===y&&h.forEach(J.query("Format",B),function(C){z.push(C.text?C.text:C.textContent)})}),z.length||h.forEach(J.query("Format",w._getTag(y,r)),function(B){z.push(B.text?B.text:B.textContent)}));return z};this.getMapURL=n("GetMap")||
this._getCapabilitiesURL;this.getMapFormats=k("GetMap");this.getMapFormats.length&&!h.some(this.getMapFormats,function(y){return-1<y.indexOf(this.imageFormat)},this)&&(this.imageFormat=this.getMapFormats[0]);if(this.getFeatureInfoURL=n("GetFeatureInfo"))this.getFeatureInfoFormats=k("GetFeatureInfo"),-1<h.indexOf(this.getFeatureInfoFormats,"text/html")?this.featureInfoFormat="text/html":-1<h.indexOf(this.getFeatureInfoFormats,"text/plain")&&(this.featureInfoFormat="text/plain");if(!this.featureInfoFormat){var A=
function(y){if(y&&(y.queryable=!1,y.subLayers))for(var z=0;z<y.subLayers.length;z++)A(y.subLayers[z])};A(x)}this._initLayer()}else this._errorHandler(Error("esri.layers.WMSLayer: Response does not contain any layers."))}else"xml"===k.handleAs?this._getCapabilities("text"):this._errorHandler(Error("GetCapabilities request for "+this._getCapabilitiesURL+" failed. (Response is null.)"))},_getCapabilitiesError:function(n){n&&n.message&&(n.message="GetCapabilities request for "+this._getCapabilitiesURL+
" failed. ("+n.message+")");this._errorHandler(n)},_getLayerInfo:function(n){if(!n)return null;var k=new l;k.name="";k.title="";k.description="";k.allExtents=[];k.spatialReferences=[];k.queryable="1"===n.getAttribute("queryable");k.subLayers=[];var r=this._getTag("LatLonBoundingBox",n);r&&(k.allExtents[0]=this._getExtent(r,4326));var w=this._getTag("EX_GeographicBoundingBox",n);if(w){var x=new m(0,0,0,0,new g({wkid:4326}));x.xmin=parseFloat(this._getTagValue("westBoundLongitude",w,0));x.ymin=parseFloat(this._getTagValue("southBoundLatitude",
w,0));x.xmax=parseFloat(this._getTagValue("eastBoundLongitude",w,0));x.ymax=parseFloat(this._getTagValue("northBoundLatitude",w,0));k.allExtents[0]=x}r||w||(x=new m(-180,-90,180,90,new g({wkid:4326})),k.allExtents[0]=x);k.extent=k.allExtents[0];var D=-1<h.indexOf(["1.0.0","1.1.0","1.1.1"],this.version)?"SRS":"CRS";h.forEach(n.childNodes,function(G){if("Name"==G.nodeName)k.name=(G.text?G.text:G.textContent)||"";else if("Title"==G.nodeName)k.title=(G.text?G.text:G.textContent)||"";else if("Abstract"==
G.nodeName)k.description=(G.text?G.text:G.textContent)||"";else if("BoundingBox"==G.nodeName){var F=G.getAttribute(D);F&&0===F.indexOf("EPSG:")?(F=parseInt(F.substring(5),10),0===F||isNaN(F)||(G="1.3.0"==this.version?this._getExtent(G,F,this._useLatLong(F)):this._getExtent(G,F),k.allExtents[F]=G,k.extent||(k.extent=G))):F&&0===F.indexOf("CRS:")?(F=parseInt(F.substring(4),10),0===F||isNaN(F)||(this._CRS_TO_EPSG[F]&&(F=this._CRS_TO_EPSG[F]),k.allExtents[F]=this._getExtent(G,F))):(F=parseInt(F,10),0===
F||isNaN(F)||(k.allExtents[F]=this._getExtent(G,F)))}else if(G.nodeName==D)G=(G.text?G.text:G.textContent).split(" "),h.forEach(G,function(A){A=-1<A.indexOf(":")?parseInt(A.split(":")[1],10):parseInt(A,10);0===A||isNaN(A)||(this._CRS_TO_EPSG[A]&&(A=this._CRS_TO_EPSG[A]),-1==h.indexOf(k.spatialReferences,A)&&k.spatialReferences.push(A))},this);else if("Style"!=G.nodeName||k.legendURL)"Layer"===G.nodeName&&k.subLayers.push(this._getLayerInfo(G));else if(G=this._getTag("LegendURL",G))if(G=this._getTag("OnlineResource",
G))k.legendURL=G.getAttribute("xlink:href")},this);k.title=k.title||k.name;return k},_getImageFormat:function(n){switch(n?n.toLowerCase():""){case "jpg":return"image/jpeg";case "bmp":return"image/bmp";case "gif":return"image/gif";case "svg":return"image/svg+xml";default:return"image/png"}},getImageFormat:function(){switch(this.imageFormat?this.imageFormat.toLowerCase():""){case "image/jpeg":return"jpg";case "image/bmp":return"bmp";case "image/gif":return"gif";case "image/svg+xml":return"svg";default:return"png"}},
_getExtent:function(n,k,r){if(n){var w=new m;var x=parseFloat(n.getAttribute("minx")),D=parseFloat(n.getAttribute("miny")),G=parseFloat(n.getAttribute("maxx"));n=parseFloat(n.getAttribute("maxy"));r?(w.xmin=isNaN(D)?-1*Number.MAX_VALUE:D,w.ymin=isNaN(x)?-1*Number.MAX_VALUE:x,w.xmax=isNaN(n)?Number.MAX_VALUE:n,w.ymax=isNaN(G)?Number.MAX_VALUE:G):(w.xmin=isNaN(x)?-1*Number.MAX_VALUE:x,w.ymin=isNaN(D)?-1*Number.MAX_VALUE:D,w.xmax=isNaN(G)?Number.MAX_VALUE:G,w.ymax=isNaN(n)?Number.MAX_VALUE:n);w.spatialReference=
new g({wkid:k})}return w},_useLatLong:function(n){var k;for(k=0;k<this._REVERSED_LAT_LONG_RANGES.length;k++){var r=this._REVERSED_LAT_LONG_RANGES[k];if(n>=r[0]&&n<=r[1]){var w=!0;break}}return w},_getTag:function(n,k){return(n=J.query(n,k))&&0<n.length?n[0]:null},_getTagValue:function(n,k,r){return(n=J.query(n,k))&&0<n.length?n[0].text?n[0].text:n[0].textContent:r},_getAttributeValue:function(n,k,r,w){return(n=J.query(n,r))&&0<n.length?n[0].getAttribute(k):w},_checkVisibleLayersList:function(n){if(n&&
0<n.length&&this.layerInfos&&0<this.layerInfos.length&&"number"==typeof n[0]){var k=[];h.forEach(n,function(r){r<this.layerInfos.length&&k.push(this.layerInfos[r].name)},this);n=k}return n},_stripParameters:function(n,k){n=t.urlToObject(n);var r,w=[];for(r in n.query)n.query.hasOwnProperty(r)&&-1===h.indexOf(k,r.toLowerCase())&&w.push(r+"\x3d"+n.query[r]);return n.path+(w.length?"?"+w.join("\x26"):"")},_getPopupGraphic:function(n,k){var r=this.visibleLayers;if(!r||0===r.length)return null;var w=this._popupGraphic;
w||(w=new u({title:this.title||""}),w.setContent(function(A){var y=document.createElement("div");if(A=A&&A.attributes&&A.attributes.QUERY_URL)y.style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;max-width:100%;",y.innerHTML='\x3ciframe sandbox src\x3d"'+A+'" width\x3d"250" height\x3d"147" frameborder\x3d"0" marginwidth\x3d"0" marginheight\x3d"0" style\x3d"position:absolute;top:0;left:0;width:100%;height:100%;border:0;background:url(\''+S.toUrl("../dijit/images/loading-throb.gif")+
"') transparent center no-repeat;\" onload\x3d\"(event.target || event.srcElement).style.background \x3d 'none';\"\x3e\x3c/iframe\x3e";return y}),w=this._popupGraphic=new a(null,null,{},w),w._layer=this);var x=function(A){var y=[];if(A&&(A.queryable&&A.showPopup&&A.name&&y.push(A.name),A.subLayers))for(var z=0;z<A.subLayers.length;z++){var B=x(A.subLayers[z]);B.length&&(y=y.concat(B))}return y},D=x({subLayers:this.layerInfos});D=h.filter(D,function(A){return-1<h.indexOf(r,A)});if(D.length){var G=
this.getFeatureInfoURL;n=this._getImageParams(n.extent,n.width,n.height);n=this._mixinCustomLayerParameters(n);n.REQUEST="GetFeatureInfo";n.INFO_FORMAT=this.featureInfoFormat;n.QUERY_LAYERS=D.join();n.FEATURE_COUNT=25;"1.3.0"===this.version?(n.I=Math.round(k.x),n.J=Math.round(k.y)):(n.X=Math.round(k.x),n.Y=Math.round(k.y));G+=-1===G.indexOf("?")?"?":"";for(var F in n)n.hasOwnProperty(F)&&(G+="?"===G.substring(G.length-1,G.length)?"":"\x26",G+=F+"\x3d"+n[F]);w.attributes.QUERY_URL=G;return w}return null},
_mixinCustomParameters:function(n){if(this.customParameters)for(var k in this.customParameters)n[k]=encodeURIComponent(this.customParameters[k]);return n},_mixinCustomLayerParameters:function(n){if(this.customLayerParameters||this.customParameters){var k=c.clone(this.customParameters||{});c.mixin(k,this.customLayerParameters||{});for(var r in k)"styles"===r.toLowerCase()&&delete n.STYLES,n[r]=encodeURIComponent(k[r])}return n}});c.setObject("layers.WMSLayer",f,e);return f})},"esri/layers/WMSLayerInfo":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/_base/array","dojo/has","../kernel"],function(S,J,f,c,h){S=S(null,{declaredClass:"esri.layers.WMSLayerInfo",name:null,title:null,description:null,extent:null,legendURL:null,subLayers:[],allExtents:[],spatialReferences:[],queryable:!1,showPopup:!1,constructor:function(d){d&&(this.name=d.name,this.title=d.title,this.description=d.description,this.extent=d.extent,this.legendURL=d.legendURL,this.subLayers=d.subLayers?d.subLayers:[],this.allExtents=d.allExtents?d.allExtents:[],
this.spatialReferences=d.spatialReferences?d.spatialReferences:[],this.queryable=!!d.queryable,this.showPopup=!!d.showPopup)},clone:function(){var d={name:this.name,title:this.title,description:this.description,legendURL:this.legendURL};this.extent&&(d.extent=this.extent.getExtent());d.subLayers=[];f.forEach(this.subLayers,function(a){d.subLayers.push(a.clone())});d.allExtents=[];for(b in this.allExtents){var b=parseInt(b,10);isNaN(b)||(d.allExtents[b]=this.allExtents[b].getExtent())}d.spatialReferences=
[];f.forEach(this.spatialReferences,function(a){d.spatialReferences.push(a)});d.queryable=this.queryable;d.showPopup=this.showPopup;return d}});J.setObject("layers.WMSLayerInfo",S,h);return S})},"esri/layers/WFSLayer":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/has dojo/on ../request ../kernel ../graphic ../renderers/jsonUtils ../symbols/jsonUtils ../Color ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../SpatialReference ../geometry/webMercatorUtils ../geometry/Extent ../geometry/Point ../geometry/Multipoint ../geometry/Polyline ../geometry/Polygon ./LabelClass ./GraphicsLayer".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F){S=S([F],{declaredClass:"esri.layers.WFSLayer",constructor:function(A){this.geometryType=this.describeFeatureTypeUrl=this.getFeatureUrl=this.layerNamespace="";this.fields=[];this.spatialReferences=[];this.fullExtent=null;this.visible=!0;this.renderer=null;this.id="WFSLayer";this._url="";this._version="1.1.0";this._layerName="";this._nsLayerNames={};this._layerDefinedGeometryType="esriGeometryComplex";this._wkid=3857;this._mode="snapshot";
this._maxFeatures=100;this._inverseResponse=this._inverseFilter=!1;this._nsGeometryFieldName=this._getFeatureRequest=this._nsFields="";this._graphicArray=[];this._gmlNS="http://www.opengis.net/gml";this._layerEventHandlers=[];this.customParameters=this._describeFeatureTypeCallback=this._getCapabilitiesCallback=null;this.showLabels=!0;this.labelingInfo=null;A&&(A.id&&(this.id=A.id),this.showLabels=null!==A.showLabels?A.showLabels:!0);this.onError=f.hitch(this,this.onError);this._errorSupport=f.hitch(this,
this._errorSupport);this._parseGml=f.hitch(this,this._parseGml);this._getCapabilities=f.hitch(this,this._getCapabilities);this._getCapabilitiesResponse=f.hitch(this,this._getCapabilitiesResponse);this._describeFeatureTypeResponse=f.hitch(this,this._describeFeatureTypeResponse);this._pointSymbol=new m(m.STYLE_CIRCLE,6,new v(v.STYLE_SOLID,new g([0,255,0]),1),new g([255,0,0]));this._lineSymbol=new v(v.STYLE_SOLID,new g([0,255,0]),3);this._polygonSymbol=new p(p.STYLE_SOLID,new v(v.STYLE_SOLID,new g([255,
0,0]),2),new g([255,255,0,.25]));this.loaded=!1;this._isProjectedOk=!0},initialize:function(A,y){A.id&&(this.id=A.id);A.url&&(this._url=A.url);A.version&&(this._version=A.version);this.customParameters=A.customParameters;this._getCapabilities(y)},selectLayer:function(A,y){this._layerName=A.layerName;this._wkid=A.wkid;this._mode=A.mode;this._maxFeatures=A.maxFeatures;this._inverseResponse=A.swapXY;this._inverseFilter=A.swapXYFilter;this.geometryType=A.geometryType;this._describeFeatureType(y);this.loaded=
!0},toJson:function(){var A={};A.id=this.id;A.url=this._url;A.version=this._version;A.mode="snapshot"===this._mode?0:1;A.name=this._layerName;A.geometryType=this.geometryType;A.wkid=this._wkid;A.maxFeatures=this._maxFeatures;A.swapXY=this._inverseResponse;A.swapXYFilter=this._inverseFilter;A.pointSymbol=this._pointSymbol.toJson();A.lineSymbol=this._lineSymbol.toJson();A.polygonSymbol=this._polygonSymbol.toJson();A.showLabels=this.showLabels;this.labelingInfo&&(A.labelingInfo=c.map(this.labelingInfo,
function(y){return y.toJson()}));this.customParameters&&(A.customParameters=this.customParameters);return A},fromJson:function(A,y){A.id&&(this.id=A.id);A.url&&(this._url=A.url);A.version&&(this._version=A.version);A.mode&&(this._mode=0===A.mode?"snapshot":"onDemand");A.name&&(this._layerName=A.name);A.geometryType&&(this.geometryType=A.geometryType);A.wkid&&(this._wkid=A.wkid);A.maxFeatures&&(this._maxFeatures=A.maxFeatures);A.swapXY&&(this._inverseResponse=A.swapXY);A.swapXYFilter&&(this._inverseFilter=
A.swapXYFilter);A.pointSymbol&&(this._pointSymbol=u.fromJson(A.pointSymbol));A.lineSymbol&&(this._lineSymbol=u.fromJson(A.lineSymbol));A.polygonSymbol&&(this._polygonSymbol=u.fromJson(A.polygonSymbol));this.showLabels=null!=A.showLabels?A.showLabels:!0;A.labelingInfo&&(this.labelingInfo=c.map(A.labelingInfo,function(z){return new G(z)}));this.customParameters=A.customParameters;this._getCapabilities(y);this.loaded=!0},setPointSymbol:function(A){this._pointSymbol=A},setLineSymbol:function(A){this._lineSymbol=
A},setPolygonSymbol:function(A){this._polygonSymbol=A},_setMap:function(A){this._map=A;var y=this.inherited(arguments);this._map&&(this._layerEventHandlers.push(this._map.on("extent-change",f.hitch(this,"refresh"))),this._layerEventHandlers.push(this.on("visibility-change",f.hitch(this,"_visibilityChange"))));this._getFeature();this.refresh();return y},_unsetMap:function(){for(var A=0;A<this._layerEventHandlers.length;A++)h.disconnect(this._layerEventHandlers[A]);this.refresh();this.inherited(arguments)},
refresh:function(){this.clear();this.redraw();"ondemand"===this._mode.toLowerCase()&&this._fireUpdateStart()},redraw:function(){if(this.visible)for(var A=0;A<this._graphicArray.length;A++){var y=this._graphicArray[A],z=y.geometry,B=null;"point"===z.type?B=this.renderer?this.renderer.getSymbol(y):this._pointSymbol:"multipoint"===z.type?B=this.renderer?this.renderer.getSymbol(y):this._pointSymbol:"polyline"===z.type?B=this.renderer?this.renderer.getSymbol(y):this._lineSymbol:"polygon"===z.type&&(B=
this.renderer?this.renderer.getSymbol(y):this._polygonSymbol);y.setSymbol(B);this.add(y)}},_visibilityChange:function(A){this.visible=A.visible;this.redraw()},onUpdateStart:function(){this._getFeature()},onUpdateEnd:function(){this.clear();this.redraw()},setLabelingInfo:function(A){A?(this.labelingInfo=A,this._fixLabelExpr()):delete this.labelingInfo;this.onLabelingInfoChange()},onLabelingInfoChange:function(){},_fixLabelExpr:function(){var A=/\[([^\[\]]+)\]/ig,y,z=this,B=function(C,H){C=z._getField(H,
!0);return"["+(C&&C.name||H)+"]"};c.forEach(this.labelingInfo,function(C){if(y=C.labelExpression)C.labelExpression=y.replace(A,B)})},_getField:function(A,y){var z=this.fields;if(!z||0===z.length)return null;var B;y&&(A=A.toLowerCase());c.some(z,function(C){var H=!1;(H=y?C&&C.name.toLowerCase()===A?!0:!1:C&&C.name===A?!0:!1)&&(B=C);return H});return B},setCustomParameters:function(A){this.customParameters=A;this._getFeature();this.refresh()},_getCapabilities:function(A){this._getCapabilitiesCallback=
A;A=f.trim(this._url);if(""===A)this.onError("WFSLayer: url is invalid");else if("1.0.0"!==this._version&&"1.1.0"!==this._version&&"2.0.0"!==this._version)this.onError("WFSLayer: version is invalid");else if(""!==A){var y=A.indexOf("?");y=this._checkForUrlInUrl(A,y);y="?"===A.charAt(A.length-1)?"":-1===y?"?":"\x26";A=A+y+"service\x3dWFS\x26request\x3dGetCapabilities\x26version\x3d"+this._version;A=this._appendCustomParameters(A);a({url:A,handleAs:"text",headers:{"Content-Type":null}},{usePost:!1}).then(this._getCapabilitiesResponse,
this._errorSupport)}},_errorSupport:function(A){this.onError(A)},_getCapabilitiesResponse:function(A){var y,z,B,C=new DOMParser;try{var H=C.parseFromString(A,"text/xml"),E=this._readExceptionReport(H,A);if(E)this.onError("WFSLayer: getCapabilities - returns exception: "+E);else{var K=H.documentElement.attributes.getNamedItem("version");if(K){this._version=K.value;var I="2.0.0"===this._version?"http://www.opengis.net/wfs/2.0":"http://www.opengis.net/wfs";if("2.0.0"===this._version){var L=H.getElementsByTagNameNS("http://www.opengis.net/ows/1.1",
"Operation");for(y=0;y<L.length;y++){if((B=L[y].attributes.getNamedItem("name"))&&"DescribeFeatureType"===B.value){var M=L[y].getElementsByTagNameNS("http://www.opengis.net/ows/1.1","Get");this.describeFeatureTypeUrl=M[0].attributes.getNamedItem("xlink:href").value}if(B&&"GetFeature"===B.value){var N=L[y].getElementsByTagNameNS("http://www.opengis.net/ows/1.1","Post");this.getFeatureUrl=N[0].attributes.getNamedItem("xlink:href").value}}}else if("1.1.0"===this._version)for(L=H.getElementsByTagNameNS("http://www.opengis.net/ows",
"Operation"),y=0;y<L.length;y++)(B=L[y].attributes.getNamedItem("name"))&&"DescribeFeatureType"===B.value&&(M=L[y].getElementsByTagNameNS("http://www.opengis.net/ows","Get"),this.describeFeatureTypeUrl=M[0].attributes.getNamedItem("xlink:href").value),B&&"GetFeature"===B.value&&(N=L[y].getElementsByTagNameNS("http://www.opengis.net/ows","Post"))&&N.length&&(this.getFeatureUrl=N[0].attributes.getNamedItem("xlink:href").value);else if("1.0.0"===this._version){var P=H.getElementsByTagNameNS(I,"DescribeFeatureType");
if(!P||!P.length){this.onError("WFSLayer: getCapabilities - no describeFeatureType info");return}M=P[0].getElementsByTagNameNS(I,"Get");this.describeFeatureTypeUrl=M[0].attributes.getNamedItem("onlineResource").value;var R=H.getElementsByTagNameNS(I,"GetFeature");if(!R||!R.length){this.onError("WFSLayer: getCapabilities - no GetFeature info");return}(N=R[0].getElementsByTagNameNS(I,"Post"))&&N.length&&(this.getFeatureUrl=N[0].attributes.getNamedItem("onlineResource").value)}this._nsLayerNames={};
A=[];var Y=H.getElementsByTagNameNS(I,"FeatureTypeList");for(y=0;y<Y.length;y++){var ja=Y[y].getElementsByTagNameNS(I,"FeatureType");for(z=0;z<ja.length;z++){var aa=ja[z],da=aa.getElementsByTagNameNS(I,"Name")[0],ra=da.textContent,ca=ra.indexOf(":"),fa=ra.substring(0,ca),la=ra.substring(ca+1),ta=da.lookupNamespaceURI(fa);null===ta&&(ta=da.lookupNamespaceURI(null));this._nsLayerNames[la]={prefix:fa,namespace:ta};var Q=aa.getElementsByTagNameNS(I,"Title"),T=0<Q.length?Q[0].textContent:"";""===T&&(T=
la);this.spatialReferences=this._readFactoryCodes(this._version,aa);var O=this._readDefaultBBOX(this._version,aa);A.push({name:la,title:T,spatialReferences:this.spatialReferences,extent:O})}}this._describeFeatureType();var Z=this._getCapabilitiesCallback;Z&&Z(A)}else this.onError("WFSLayer: getCapabilities - document not recognized.")}}catch(na){this.onError("WFSLayer: getCapabilities - parsing error")}},_readFactoryCodes:function(A,y){var z,B=[];if("2.0.0"===A||"1.1.0"===A){A=y.getElementsByTagNameNS("*",
"DefaultSRS");this._addCodeList(B,A[0]);A=y.getElementsByTagNameNS("*","DefaultCRS");this._addCodeList(B,A[0]);A=y.getElementsByTagNameNS("*","OtherSRS");for(z=0;z<A.length;z++)this._addCodeList(B,A[z]);A=y.getElementsByTagNameNS("*","OtherCRS");for(z=0;z<A.length;z++)this._addCodeList(B,A[z])}else"1.0.0"===A&&(A=y.getElementsByTagNameNS("*","SRS"),this._addCodeList(B,A[0]));for(y=!1;0<B.length;){4326===B[0]&&(y=!0);break}y||B.push(4326);return B},_addCodeList:function(A,y){y&&(y=y.textContent.match(/\d+/g),
0<y.length&&(y=parseInt(y[y.length-1],10),84===y&&(y=4326),A.push(y)))},_readDefaultBBOX:function(A,y){if("2.0.0"===A||"1.1.0"===A){var z=y.getElementsByTagNameNS("*","WGS84BoundingBox");if(!z[0]||!z[0].attributes)return[];var B=z[0].getElementsByTagNameNS("*","LowerCorner");var C=z[0].getElementsByTagNameNS("*","UpperCorner");if(0>=B.length||0>=C.length)return[];var H=B[0].textContent;z=H.indexOf(" ");B=H.substring(0,z);H=H.substring(z+1);z=C[0].textContent;A=z.indexOf(" ");C=z.substring(0,A);z=
z.substring(A+1)}else if("1.0.0"===A){z=y.getElementsByTagNameNS("*","LatLongBoundingBox");if(!z[0]||!z[0].attributes)return[];B=z[0].attributes.getNamedItem("minx").value;H=z[0].attributes.getNamedItem("miny").value;C=z[0].attributes.getNamedItem("maxx").value;z=z[0].attributes.getNamedItem("maxy").value}B=parseFloat(B,10);H=parseFloat(H,10);C=parseFloat(C,10);z=parseFloat(z,10);return[B,H,C,z]},_describeFeatureType:function(A){if(""!==this._layerName)if(""===this.describeFeatureTypeUrl)this.onError("WFSLayer: invalid describeFeatureType url");
else if(""===this._wkid)this.onError("WFSLayer: invalid wkid");else if("snapshot"!==this._mode&&"onDemand"!==this._mode)this.onError("WFSLayer: invalid mode");else if(""===this._maxFeatures||0>this._maxFeatures||1E6<this._maxFeatures)this.onError("WFSLayer: invalid maxFeatures");else if(this._describeFeatureTypeCallback=A,A=f.trim(this.describeFeatureTypeUrl),""!==A){var y=A.indexOf("?");y=this._checkForUrlInUrl(A,y);var z="?"===A.charAt(A.length-1)?"":-1===y?"?":"\x26",B=this._nsLayerNames[this._layerName];
if(void 0===B)this.onError("WFSLayer: invalid layerName");else y=B.prefix,B=B.namespace,A=A+z+"service\x3dWFS\x26request\x3dDescribeFeatureType\x26version\x3d"+this._version,A+="\x26typeName\x3d",""!==y&&(A+=y+":"),A+=encodeURIComponent(this._layerName),""!==y&&(A+="\x26namespace\x3dxmlns("+y+"\x3d"+encodeURIComponent(B)+")"),A=this._appendCustomParameters(A),a({url:A,handleAs:"text",headers:{"Content-Type":null}},{usePost:!1}).then(this._describeFeatureTypeResponse,this._errorSupport)}},_describeFeatureTypeResponse:function(A){var y=
(new DOMParser).parseFromString(A,"text/xml");if(A=this._readExceptionReport(y,A))this.onError("WFSLayer: DescribeFeatureType - returns exception: "+A);else{this.fields=[];A=y.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","schema");for(y=0;y<A.length;y++){var z=this._readAllFields(A[y]);null!==z&&(this._layerDefinedGeometryType=z[0],this.fields=z[1])}this.geometryType&&""!==this.geometryType||(this.geometryType=this._layerDefinedGeometryType);for(y=0;y<this.fields.length;y++)A=this.fields[y],
"esriFieldTypeGeometry"===A.type&&(this._nsGeometryFieldName=A.name);this.layerNamespace=this._nsLayerNames[this._layerName].namespace;if(0===this.fields.length)this.onError("WFSLayer: DescribeFeatureType - can't get fields");else this._getFeature(),(y=this._describeFeatureTypeCallback)&&y(this.fields)}},_readAllFields:function(A){for(var y=A.childNodes,z=0;z<y.length;z++){var B=y[z];if("element"===B.localName){var C=B.attributes;if(C.name.value===this._layerName)return(y=C.type)?(B=y.value,y=B.indexOf(":"),
B=B.substring(y+1),this._readFieldsFromGlobalComplextType(A,B)):this._readFieldsFromLocalComplextType(B)}}return null},_readFieldsFromGlobalComplextType:function(A,y){A=A.childNodes;for(var z=0;z<A.length;z++){var B=A[z];if("complexType"===B.localName&&B.attributes.name.value===y)return this._readFieldsFromLocalComplextType(B)}return null},_readFieldsFromLocalComplextType:function(A){for(var y=[],z="esriGeometryComplex",B=A.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","element"),C=0;C<
B.length;C++){var H=B[C],E="",K=H.attributes.getNamedItem("name");K&&(E=K.value);if(""!==E){var I=A="",L=H.attributes.getNamedItem("type");K="unknown";if(null!==L){I=L.value;var M=I.indexOf(":");A=I.substring(0,M);I=I.substring(M+1);K=L.lookupNamespaceURI(A);null===K&&(K=L.lookupNamespaceURI(null))}if(""===I){H=H.childNodes;for(var N=0;N<H.length;N++)if(A=H[N],"simpleType"===A.localName){A=A.childNodes;for(N=0;N<A.length;N++)if(node2=A[N],"restriction"===node2.localName){L=node2.attributes.getNamedItem("base");
I=L.value;M=I.indexOf(":");A=I.substring(0,M);I=I.substring(M+1);break}if(""!==I)break}}H="Unknown";switch(I){case "integer":case "nonPositiveInteger":case "negativeInteger":case "long":case "int":case "short":case "byte":case "nonNegativeInteger":case "unsignedLong":case "unsignedInt":case "unsignedShort":case "unsignedByte":case "positiveInteger":H="esriFieldTypeInteger";y.push({name:E,alias:E,type:H,wfsNamespace:K});break;case "float":case "double":case "decimal":H="esriFieldTypeDouble";y.push({name:E,
alias:E,type:H,wfsNamespace:K});break;case "boolean":case "string":case "gYearMonth":case "gYear":case "gMonthDay":case "gDay":case "gMonth":case "anyURI":case "QName":case "NOTATION":case "normalizedString":case "token":case "language":case "IDREFS":case "ENTITIES":case "NMTOKEN":case "NMTOKENS":case "Name":case "NCName":case "ID":case "IDREF":case "ENTITY":H="esriFieldTypeString";y.push({name:E,alias:E,type:H,wfsNamespace:K});break;case "duration":case "dateTime":case "time":case "date":H="esriFieldTypeDate";
y.push({name:E,alias:E,type:H,wfsNamespace:K});break;case "PointPropertyType":case "MultiPointPropertyType":H="esriFieldTypeGeometry";z="esriGeometryPoint";y.push({name:E,alias:E,type:H,wfsNamespace:K});break;case "MultiCurvePropertyType":case "MultiLineStringPropertyType":H="esriFieldTypeGeometry";z="esriGeometryPolyline";y.push({name:E,alias:E,type:H,wfsNamespace:K});break;case "MultiSurfacePropertyType":case "MultiPolygonPropertyType":H="esriFieldTypeGeometry";z="esriGeometryPolygon";y.push({name:E,
alias:E,type:H,wfsNamespace:K});break;case "GeometryPropertyType":case "MultiGeometryPropertyType":H="esriFieldTypeGeometry",z="esriGeometryComplex",y.push({name:E,alias:E,type:H,wfsNamespace:K})}}}return[z,y]},_getFeature:function(){var A="\x3c?xml version\x3d'1.0' encoding\x3d'utf-8'?\x3e\n\x3cGetFeature \n xmlns:xsi\x3d'http://www.w3.org/2001/XMLSchema-instance'\n xmlns:gml\x3d'http://www.opengis.net/gml'\n xmlns:ogc\x3d'http://www.opengis.net/ogc'\n xmlns:wfs\x3d'http://www.opengis.net/wfs'\n";
A="2.0.0"===this._version?A+" xmlns\x3d'http://www.opengis.net/wfs/2.0'\n":A+" xmlns\x3d'http://www.opengis.net/wfs'\n";var y=this._nsLayerNames[this._layerName];if(void 0===y)this.onError("WFSLayer: invalid layerName");else{var z=y.prefix;y=y.namespace;if("ondemand"===this._mode.toLowerCase()&&""===this._nsGeometryFieldName)this.onError("WFSLayer: GetFeature - can't use 'onDemand' mode as geometryFieldName is unknown.");else if(A+=" xmlns:"+z+"\x3d'"+y+"'\n",A="2.0.0"===this._version?A+(" version\x3d'"+
this._version+"' service\x3d'WFS' count\x3d'"+this._maxFeatures+"'\x3e\n"):A+(" version\x3d'"+this._version+"' service\x3d'WFS' maxFeatures\x3d'"+this._maxFeatures+"'\x3e\n"),A="2.0.0"===this._version?A+(" \x3cQuery typeNames\x3d'"+z+":"+this._layerName+"' srsName\x3d'EPSG:"+this._wkid+"'\x3e\n"):A+(" \x3cwfs:Query typeName\x3d'"+z+":"+this._layerName+"' srsName\x3d'EPSG:"+this._wkid+"'\x3e\n"),"ondemand"===this._mode.toLowerCase()&&(A=A+"  \x3cogc:Filter xmlns:ogc\x3d'http://www.opengis.net/ogc'\x3e\n   \x3cogc:BBOX\x3e\n    \x3cogc:PropertyName\x3e"+
(z+":"+this._nsGeometryFieldName+"\x3c/ogc:PropertyName\x3e\n"),A+="    \x3cgml:Box srsName\x3d'EPSG:"+this._wkid+"'\x3e\n",A=this._inverseFilter?A+"      \x3cgml:coordinates\x3e{ymin},{xmin} {ymax},{xmax}\x3c/gml:coordinates\x3e\n":A+"      \x3cgml:coordinates\x3e{xmin},{ymin} {xmax},{ymax}\x3c/gml:coordinates\x3e\n",A+="    \x3c/gml:Box\x3e\n   \x3c/ogc:BBOX\x3e\n  \x3c/ogc:Filter\x3e\n"),A="2.0.0"===this._version?A+" \x3c/Query\x3e\n":A+" \x3c/wfs:Query\x3e\n",this._getFeatureRequest=A+"\x3c/GetFeature\x3e\n",
""===this.getFeatureUrl)this.onError("WFSLayer: getFeature - server doesn't support POST method.");else if(""!==this._getFeatureRequest&&this._map&&null!==this._map.spatialReference.wkid){A=this._getFeatureRequest;if("ondemand"===this._mode.toLowerCase()){A=this._map.extent.xmin;z=this._map.extent.ymin;y=this._map.extent.xmax;var B=this._map.extent.ymax,C={},H=this._map.spatialReference,E=new l(this._wkid);this._projectFromSRToSR(H,E,A,z,C)&&(A=C.x,z=C.y);this._projectFromSRToSR(H,E,y,B,C)&&(y=C.x,
B=C.y);A=this._getFeatureRequest.replace(/{xmin}/,A).replace(/{ymin}/,z).replace(/{xmax}/,y).replace(/{ymax}/,B)}z=this._appendCustomParameters(this.getFeatureUrl);a({url:z,handleAs:"text",headers:{"Content-Type":"text/xml"},postData:A},{usePost:!0}).then(this._parseGml,this._errorSupport)}}},_parseGml:function(A){if(this._map&&this._map.spatialReference&&this._map.spatialReference.wkid){var y=(new DOMParser).parseFromString(A,"text/xml");if(A=this._readExceptionReport(y,A))this.onError("WFSLayer: GetFeature - returns exception: "+
A);else this._gmlNS="2.0.0"===this._version?"http://www.opengis.net/gml/3.2":"http://www.opengis.net/gml",""===this._wkid&&(this._wkid=this._map.spatialReference.wkid),this._graphicArray=this._readFeatureMembers(y,this._wkid,2,this._nsLayerNames[this._layerName].namespace,this._layerName),this.fullExtent=this._createFullExtent(this._graphicArray),this.onLabelingInfoChange(),"ondemand"===this._mode.toLowerCase()?this._fireUpdateEnd():this.refresh()}},_limit4326:function(A){for(var y=0;y<A.length;y++){var z=
A[y].geometry;4326===z.spatialReference.wkid&&(z.x=this._limit4326X(z.x),z.y=this._limit4326Y(z.y))}},_limit4326X:function(A){180<=A&&(A=179.99);-180>=A&&(A=-179.99);return A},_limit4326Y:function(A){90<=A&&(A=89.99);-90>=A&&(A=-89.99);return A},_createFullExtent:function(A){for(var y=null,z=0;z<A.length;z++){var B=A[z].geometry,C=null;(C="point"===B.geometryType?new k(B.x,B.y,B.x,B.y,B.spatialReference):B.getExtent())&&(y=null===y?C:y.union(C))}return y},_readExceptionReport:function(A,y){return 0<
A.getElementsByTagNameNS("*","ExceptionReport").length||0<A.getElementsByTagNameNS("*","ServiceExceptionReport").length?y:""},_readFeatureMembers:function(A,y,z,B,C){var H=this._readWkidFromNode(A);-1!=H&&(y=H);H=this._readSrsDimension(A);0!==H&&(z=H);var E=[];var K=A.getElementsByTagNameNS("*","featureMembers");for(H=0;H<K.length;H++){var I=K[H];var L=I.getElementsByTagNameNS(B,C);0===L.length&&(L=I.getElementsByTagNameNS(null,C));0===L.length&&(L=I.getElementsByTagNameNS("*",C));for(I=0;I<L.length;I++)this._readLayer(E,
L[I],y,z)}K=A.getElementsByTagNameNS("*","featureMember");for(H=0;H<K.length;H++)for(I=K[H],L=I.getElementsByTagNameNS(B,C),0===L.length&&(L=I.getElementsByTagNameNS(null,C)),0===L.length&&(L=I.getElementsByTagNameNS("*",C)),I=0;I<L.length;I++)this._readLayer(E,L[I],y,z);K=A.getElementsByTagNameNS("*","member");for(H=0;H<K.length;H++)for(I=K[H],L=I.getElementsByTagNameNS(B,C),0===L.length&&(L=I.getElementsByTagNameNS(null,C)),0===L.length&&(L=I.getElementsByTagNameNS("*",C)),I=0;I<L.length;I++)this._readLayer(E,
L[I],y,z);return E},_readLayer:function(A,y,z,B){var C=this._readSrsDimension(y);0!==C&&(B=C);var H=y.childNodes,E="",K=null;for(y=0;y<H.length;y++){var I=H[y];if(1==I.nodeType&&(C=I.localName,"boundedBy"!==C)){I=this._readGeometry(I,z,B);if(!this._isProjectedOk){this._isProjectedOk=!0;break}if(null!==I&&(K=I,E=C,"point"!==K.geometryType||"esriGeometryPolygon"!==this.geometryType&&"esriGeometryPolyline"!==this.geometryType))break}}if(K){z={};for(y=0;y<H.length;y++)if(I=H[y],C=I.localName,B=I.textContent,
C!==E)for(I=0;I<this.fields.length;I++){var L=this.fields[I];L.name==C&&(z[C]="esriFieldTypeDouble"===L.type?parseFloat(B,10):"esriFieldTypeInteger"===L.type?parseInt(B,10):B.trim())}this._convertWFSGeometryToGraphicObjects(A,K,z)}},_convertWFSGeometryToGraphicObjects:function(A,y,z){if("point"===y.geometryType&&("esriGeometryPoint"===this.geometryType||"esriGeometryComplex"===this.geometryType)){var B=new q;y=new r(y);B.setGeometry(y);B.setAttributes(z);A.push(B)}else if("multipoint"===y.geometryType&&
("esriGeometryPoint"===this.geometryType||"esriGeometryComplex"===this.geometryType))B=new q,y=new w(y),B.setGeometry(y),B.setAttributes(z),A.push(B);else if("polyline"===y.geometryType&&("esriGeometryPolyline"===this.geometryType||"esriGeometryComplex"===this.geometryType))B=new q,y=new x(y),B.setGeometry(y),B.setAttributes(z),A.push(B);else if("polygon"===y.geometryType&&("esriGeometryPolygon"===this.geometryType||"esriGeometryComplex"===this.geometryType))B=new q,y=new D(y),B.setGeometry(y),B.setAttributes(z),
A.push(B);else if("multigeometry"===y.geometryType)for(B=0;B<y.length;B++)this._convertWFSGeometryToGraphicObjects(A,y[B],z)},_readGeometry:function(A,y,z){var B=this._readWkidFromNode(A);-1!=B&&(y=B);B=this._readSrsDimension(A);0!==B&&(z=B);var C=A.getElementsByTagNameNS(this._gmlNS,"MultiSurface");if(1<=C.length)for(B=0;B<C.length;)return this._readMultiSurface(C[B],y,z);C=A.getElementsByTagNameNS(this._gmlNS,"MultiCurve");if(1<=C.length){var H=[];for(B=0;B<C.length;B++){var E=this._readMultiCurve(C[B],
y,z);for(A=0;A<E.length;A++)H.push(E[A])}return{geometryType:"polyline",paths:H,spatialReference:{wkid:this._map.spatialReference.wkid}}}C=A.getElementsByTagNameNS(this._gmlNS,"MultiGeometry");for(B=0;B<C.length;)return this._readMultiGeometry(C[B],y,z);C=A.getElementsByTagNameNS(this._gmlNS,"Geometry");for(B=0;B<C.length;)return this._readGeometry(C[B],y,z);C=A.getElementsByTagNameNS(this._gmlNS,"GeometryCollection");for(B=0;B<C.length;)return this._readGeometryCollection(C[B],y,z);C=A.getElementsByTagNameNS(this._gmlNS,
"Surface");for(B=0;B<C.length;)return this._readSurface(C[B],y,z);C=A.getElementsByTagNameNS(this._gmlNS,"Curve");for(B=0;B<C.length;)return this._readCurve(C[B],y,z);C=A.getElementsByTagNameNS(this._gmlNS,"MultiPolygon");for(B=0;B<C.length;)return this._readMultiPolygon(C[B],y,z);C=A.getElementsByTagNameNS(this._gmlNS,"Polygon");for(B=0;B<C.length;)return this._readPolygon(C[B],y,z);C=A.getElementsByTagNameNS(this._gmlNS,"MultiLineString");for(B=0;B<C.length;)return this._readMultiLineString(C[B],
y,z);C=A.getElementsByTagNameNS(this._gmlNS,"LineString");for(B=0;B<C.length;){y=this._readLineString(C[B],y,z);z={geometryType:"polyline",paths:[],spatialReference:{wkid:this._map.spatialReference.wkid}};B=[];for(A=0;A<y.length;A++)B.push(y[A]);z.paths.push(B);return z}C=A.getElementsByTagNameNS(this._gmlNS,"LinearRing");for(B=0;B<C.length;)return this._readLinearRing(C[B],y,z);C=A.getElementsByTagNameNS(this._gmlNS,"Box");if(1<=C.length)for(B=0;B<C.length;)return this._readBox(C[B],y,z);C=A.getElementsByTagNameNS(this._gmlNS,
"Envelope");for(B=0;B<C.length;)return this._readEnvelope(C[B],y,z);C=A.getElementsByTagNameNS(this._gmlNS,"MultiPoint");if(1<=C.length)for(B=0;B<C.length;)return this._readMultiPoint(C[B],y,z);C=A.getElementsByTagNameNS(this._gmlNS,"Point");for(B=0;B<C.length;)return this._readPoint(C[B],y,z);return null},_readGeometryCollection:function(A,y,z){var B=this._readWkidFromNode(A);-1!=B&&(y=B);B=this._readSrsDimension(A);0!==B&&(z=B);B=[];B.geometryType="multigeometry";B.spatialReference={wkid:this._map.spatialReference.wkid};
var C=A.getElementsByTagNameNS(this._gmlNS,"geometryMember");for(A=0;A<C.length;A++){var H=this._readGeometryMember(C[A],y,z);B.push(H)}return B},_readMultiGeometry:function(A,y,z){var B=this._readWkidFromNode(A);-1!=B&&(y=B);B=this._readSrsDimension(A);0!==B&&(z=B);B=[];B.geometryType="multigeometry";B.spatialReference={wkid:this._map.spatialReference.wkid};var C=A.getElementsByTagNameNS(this._gmlNS,"geometryMember");for(A=0;A<C.length;A++){var H=this._readGeometryMember(C[A],y,z);B.push(H)}return B},
_readSurface:function(A,y,z){var B=this._readWkidFromNode(A);-1!=B&&(y=B);B=this._readSrsDimension(A);0!==B&&(z=B);var C=[];C.geometryType="multigeometry";C.spatialReference={wkid:this._map.spatialReference.wkid};var H=A.getElementsByTagNameNS(this._gmlNS,"Point");for(B=0;B<H.length;B++)C.push(this._readPoint(H[B],y,z));H=A.getElementsByTagNameNS(this._gmlNS,"patches");for(B=0;B<H.length;B++){A=this._readPatches(H[B],y,z);for(var E=0;E<A.length;E++)C.push(A[E])}return C},_readMultiSurface:function(A,
y,z){var B;var C=this._readWkidFromNode(A);-1!=C&&(y=C);C=this._readSrsDimension(A);0!==C&&(z=C);var H=[];H.geometryType="multigeometry";H.spatialReference={wkid:this._map.spatialReference.wkid};var E=A.getElementsByTagNameNS(this._gmlNS,"surfaceMember");for(C=0;C<E.length;C++){var K=this._readSurfaceMember(E[C],y,z);for(B=0;B<K.length;B++)H.push(K[B])}E=A.getElementsByTagNameNS(this._gmlNS,"surfaceMembers");for(C=0;C<E.length;C++)for(A=this._readSurfaceMembers(E[C],y,z),B=0;B<A.length;B++)H.push(A[B]);
return H},_readCurve:function(A,y,z){var B=this._readWkidFromNode(A);-1!=B&&(y=B);B=this._readSrsDimension(A);0!==B&&(z=B);B={geometryType:"polyline",paths:[],spatialReference:{wkid:this._map.spatialReference.wkid}};var C=A.getElementsByTagNameNS(this._gmlNS,"segments");for(A=0;A<C.length;A++)for(var H=this._readSegments(C[A],y,z),E=0;E<H.length;E++)B.paths.push(H[E]);return B},_readSegments:function(A,y,z){var B=this._readWkidFromNode(A);-1!=B&&(y=B);B=this._readSrsDimension(A);0!==B&&(z=B);B=[];
B.geometryType="multigeometry";B.spatialReference={wkid:this._map.spatialReference.wkid};var C=A.getElementsByTagNameNS(this._gmlNS,"LineStringSegment");for(A=0;A<C.length;A++){var H=this._readLineStringSegment(C[A],y,z);B.push(H)}return B},_readLineStringSegment:function(A,y,z){var B=this._readWkidFromNode(A);-1!=B&&(y=B);B=this._readSrsDimension(A);0!==B&&(z=B);for(A=A.getElementsByTagNameNS(this._gmlNS,"posList");0<A.length;)return this._readPosList(A[0],y,z)},_readMultiCurve:function(A,y,z){var B;
var C=this._readWkidFromNode(A);-1!=C&&(y=C);C=this._readSrsDimension(A);0!==C&&(z=C);var H=[];H.spatialReference={wkid:this._map.spatialReference.wkid};var E=A.getElementsByTagNameNS(this._gmlNS,"curveMember");for(C=0;C<E.length;C++){var K=this._readCurveMember(E[C],y,z);for(B=0;B<K.length;B++)H.push(K[B])}E=A.getElementsByTagNameNS(this._gmlNS,"curveMembers");for(C=0;C<E.length;C++)for(K=this._readCurveMembers(E[C],y,z),B=0;B<K.length;B++)H.push(K[B]);return H},_readGeometryMember:function(A,y,
z){var B=this._readWkidFromNode(A);-1!=B&&(y=B);B=this._readSrsDimension(A);0!==B&&(z=B);var C=A.getElementsByTagNameNS(this._gmlNS,"Point");for(B=0;B<C.length;)return this._readPoint(C[B],y,z);C=A.getElementsByTagNameNS(this._gmlNS,"LineString");for(B=0;B<C.length;){y=this._readLineString(C[B],y,z);z={geometryType:"polyline",paths:[],spatialReference:{wkid:this._map.spatialReference.wkid}};B=[];for(A=0;A<y.length;A++)B.push(y[A]);z.paths.push(B);return z}C=A.getElementsByTagNameNS(this._gmlNS,"Polygon");
for(B=0;B<C.length;)return this._readPolygon(C[B],y,z);return null},_readSurfaceMember:function(A,y,z){var B=this._readWkidFromNode(A);-1!=B&&(y=B);B=this._readSrsDimension(A);0!==B&&(z=B);B=[];B.geometryType="multigeometry";B.spatialReference={wkid:this._map.spatialReference.wkid};var C=A.getElementsByTagNameNS(this._gmlNS,"Polygon");for(A=0;A<C.length;A++){var H=this._readPolygon(C[A],y,z);B.push(H)}return B},_readSurfaceMembers:function(A,y,z){var B=this._readWkidFromNode(A);-1!=B&&(y=B);B=this._readSrsDimension(A);
0!==B&&(z=B);B=[];B.geometryType="multigeometry";B.spatialReference={wkid:this._map.spatialReference.wkid};var C=A.getElementsByTagNameNS(this._gmlNS,"Polygon");for(A=0;A<C.length;A++){var H=this._readPolygon(C[A],y,z);B.push(H)}return B},_readCurveMember:function(A,y,z){var B=this._readWkidFromNode(A);-1!=B&&(y=B);B=this._readSrsDimension(A);0!==B&&(z=B);B=[];B.geometryType="multigeometry";B.spatialReference={wkid:this._map.spatialReference.wkid};var C=A.getElementsByTagNameNS(this._gmlNS,"LineString");
for(A=0;A<C.length;A++){var H=this._readLineString(C[A],y,z);B.push(H)}return B},_readCurveMembers:function(A,y,z){var B=this._readWkidFromNode(A);-1!=B&&(y=B);B=this._readSrsDimension(A);0!==B&&(z=B);B=[];B.geometryType="multigeometry";B.spatialReference={wkid:this._map.spatialReference.wkid};var C=A.getElementsByTagNameNS(this._gmlNS,"LineString");for(A=0;A<C.length;A++){var H=this._readLineString(C[A],y,z);B.push(H)}return B},_readBox:function(A,y,z){var B,C,H,E,K=this._readWkidFromNode(A);-1!=
K&&(y=K);K=this._readSrsDimension(A);0!==K&&(z=K);K={geometryType:"polygon",rings:[],spatialReference:{wkid:this._map.spatialReference.wkid}};var I=A.getElementsByTagNameNS(this._gmlNS,"coordinates");for(B=0;B<I.length;B++)if(C=this._readCoordinates(I[B],y,z)){if(1<=C.length){var L=H=C[0][0];var M=E=C[0][1]}1<=C.length&&(H=C[1][0],E=C[1][1]);K.rings.push([[L,M],[L,E],[H,E],[H,M],[L,M]]);return K}I=A.getElementsByTagNameNS(this._gmlNS,"coord");return 2<=I.length?((A=this._readCoord(I[0],y,z))&&1<=
A.length&&(L=H=A[0][0],M=E=A[0][1]),(y=this._readCoord(I[1],y,z))&&1<=y.length&&(H=y[0][0],E=y[0][1]),K.rings.push([[L,M],[L,E],[H,E],[H,M],[L,M]]),K):null},_readEnvelope:function(A,y,z){var B,C;var H=this._readWkidFromNode(A);-1!=H&&(y=H);H=this._readSrsDimension(A);0!==H&&(z=H);var E=A.getElementsByTagNameNS(this._gmlNS,"lowerCorner");for(H=0;H<E.length;H++){var K=this._readCoordinates(E[H],y,z);K&&(B=K[0])}E=A.getElementsByTagNameNS(this._gmlNS,"upperCorner");for(H=0;H<E.length;H++)(A=this._readCoordinates(E[H],
y,z))&&(C=A[0]);return B&&C?{geometryType:"polygon",rings:[[[B[0],B[1]],[B[0],C[1]],[C[0],C[1]],[C[0],B[1]],[B[0],B[1]]]],spatialReference:{wkid:this._map.spatialReference.wkid}}:null},_readPolygon:function(A,y,z){var B=this._readWkidFromNode(A);-1!=B&&(y=B);B=this._readSrsDimension(A);0!==B&&(z=B);var C={geometryType:"polygon",rings:[],spatialReference:{wkid:this._map.spatialReference.wkid}};var H=A.getElementsByTagNameNS(this._gmlNS,"outerBoundaryIs");for(B=0;B<H.length;B++){var E=this._readOuterBoundaryIs(H[B],
y,z);C.rings.push(E)}H=A.getElementsByTagNameNS(this._gmlNS,"innerBoundaryIs");for(B=0;B<H.length;B++)E=this._readInnerBoundaryIs(H[B],y,z),C.rings.push(E);H=A.getElementsByTagNameNS(this._gmlNS,"exterior");for(B=0;B<H.length;B++)E=this._readExterior(H[B],y,z),C.rings.push(E);H=A.getElementsByTagNameNS(this._gmlNS,"interior");for(B=0;B<H.length;B++)E=this._readInterior(H[B],y,z),C.rings.push(E);return C},_readPolygonMember:function(A,y,z){var B=this._readWkidFromNode(A);-1!=B&&(y=B);B=this._readSrsDimension(A);
0!==B&&(z=B);for(A=A.getElementsByTagNameNS(this._gmlNS,"Polygon");0<A.length;)return this._readPolygon(A[0],y,z);return null},_readMultiPolygon:function(A,y,z){var B=this._readWkidFromNode(A);-1!=B&&(y=B);B=this._readSrsDimension(A);0!==B&&(z=B);B=[];B.geometryType="multigeometry";B.spatialReference={wkid:this._map.spatialReference.wkid};var C=A.getElementsByTagNameNS(this._gmlNS,"polygonMember");for(A=0;A<C.length;A++){var H=this._readPolygonMember(C[A],y,z);B.push(H)}return B},_readOuterBoundaryIs:function(A,
y,z){var B=this._readWkidFromNode(A);-1!=B&&(y=B);B=this._readSrsDimension(A);0!==B&&(z=B);for(A=A.getElementsByTagNameNS(this._gmlNS,"LinearRing");0<A.length;)return this._readLinearRing(A[0],y,z);return null},_readInnerBoundaryIs:function(A,y,z){var B=this._readWkidFromNode(A);-1!=B&&(y=B);B=this._readSrsDimension(A);0!==B&&(z=B);for(A=A.getElementsByTagNameNS(this._gmlNS,"LinearRing");0<A.length;)return this._readLinearRing(A[0],y,z);return null},_readExterior:function(A,y,z){var B=this._readWkidFromNode(A);
-1!=B&&(y=B);B=this._readSrsDimension(A);0!==B&&(z=B);for(A=A.getElementsByTagNameNS(this._gmlNS,"LinearRing");0<A.length;)return this._readLinearRing(A[0],y,z);return null},_readInterior:function(A,y,z){var B=this._readWkidFromNode(A);-1!=B&&(y=B);B=this._readSrsDimension(A);0!==B&&(z=B);for(A=A.getElementsByTagNameNS(this._gmlNS,"LinearRing");0<A.length;)return this._readLinearRing(A[0],y,z);return null},_readPatches:function(A,y,z){var B=this._readWkidFromNode(A);-1!=B&&(y=B);B=this._readSrsDimension(A);
0!==B&&(z=B);B=[];B.spatialReference={wkid:this._map.spatialReference.wkid};var C=A.getElementsByTagNameNS(this._gmlNS,"PolygonPatch");for(A=0;A<C.length;A++)B.push(this._readPolygon(C[A],y,z));return B},_readLineString:function(A,y,z){var B,C;var H=this._readWkidFromNode(A);-1!=H&&(y=H);H=this._readSrsDimension(A);0!==H&&(z=H);var E=[];E.spatialReference={wkid:this._map.spatialReference.wkid};var K=A.getElementsByTagNameNS(this._gmlNS,"coordinates");for(H=0;H<K.length;H++)if(C=this._readCoordinates(K[H],
y,z))for(B=0;B<C.length;B++){var I=C[B];E.push(I)}K=A.getElementsByTagNameNS(this._gmlNS,"coord");for(H=0;H<K.length;H++)if(C=this._readCoord(K[H],y,z))for(B=0;B<C.length;B++)I=C[B],E.push(I);K=A.getElementsByTagNameNS(this._gmlNS,"posList");for(H=0;H<K.length;H++)if(C=this._readPosList(K[H],y,z))for(B=0;B<C.length;B++)I=C[B],E.push(I);return E},_readLineStringMember:function(A,y,z){var B=this._readWkidFromNode(A);-1!=B&&(y=B);B=this._readSrsDimension(A);0!==B&&(z=B);for(A=A.getElementsByTagNameNS(this._gmlNS,
"LineString");0<A.length;)return this._readLineString(A[0],y,z);return null},_readMultiLineString:function(A,y,z){var B=this._readWkidFromNode(A);-1!=B&&(y=B);B=this._readSrsDimension(A);0!==B&&(z=B);B={geometryType:"polyline",paths:[],spatialReference:{wkid:this._map.spatialReference.wkid}};var C=A.getElementsByTagNameNS(this._gmlNS,"lineStringMember");for(A=0;A<C.length;A++){var H=this._readLineStringMember(C[A],y,z);H&&B.paths.push(H)}return 1<=B.paths.length?B:null},_readPoint:function(A,y,z){var B;
var C=this._readWkidFromNode(A);-1!=C&&(y=C);C=this._readSrsDimension(A);0!==C&&(z=C);var H=A.getElementsByTagNameNS(this._gmlNS,"coordinates");for(C=0;C<H.length;C++)if(B=this._readCoordinates(H[C],y,z))return{geometryType:"point",x:B[0][0],y:B[0][1],spatialReference:{wkid:this._map.spatialReference.wkid}};H=A.getElementsByTagNameNS(this._gmlNS,"pos");for(C=0;C<H.length;C++)if((B=this._readPos(H[C],y,z))&&0<B.length)return{geometryType:"point",x:B[0][0],y:B[0][1],spatialReference:{wkid:this._map.spatialReference.wkid}};
H=A.getElementsByTagNameNS(this._gmlNS,"coord");for(C=0;C<H.length;C++)if(A=this._readCoord(H[C],y,z))return{geometryType:"point",x:A[0][0],y:A[0][1],spatialReference:{wkid:this._map.spatialReference.wkid}};return null},_readPointMember:function(A,y,z){var B=this._readWkidFromNode(A);-1!=B&&(y=B);B=this._readSrsDimension(A);0!==B&&(z=B);for(A=A.getElementsByTagNameNS(this._gmlNS,"Point");0<A.length;)return this._readPoint(A[0],y,z);return null},_readMultiPoint:function(A,y,z){var B=this._readWkidFromNode(A);
-1!=B&&(y=B);B=this._readSrsDimension(A);0!==B&&(z=B);B={geometryType:"multipoint",points:[],spatialReference:{wkid:this._map.spatialReference.wkid}};var C=A.getElementsByTagNameNS(this._gmlNS,"pointMember");for(A=0;A<C.length;A++){var H=this._readPointMember(C[A],y,z);H&&B.points.push([H.x,H.y])}return 1<=B.points.length?B:null},_readLinearRing:function(A,y,z){var B=this._readWkidFromNode(A);-1!=B&&(y=B);B=this._readSrsDimension(A);0!==B&&(z=B);var C=A.getElementsByTagNameNS(this._gmlNS,"coordinates");
for(B=0;B<C.length;)return this._readCoordinates(C[B],y,z);C=A.getElementsByTagNameNS(this._gmlNS,"posList");for(B=0;B<C.length;)return this._readCoordinates(C[B],y,z);C=A.getElementsByTagNameNS(this._gmlNS,"pos");for(B=0;B<C.length;)return this._readPos(C[B],y,z)},_readCoordinatesBody:function(A,y,z){var B=new l(A);y=y.trim();var C=[];C.spatialReference={wkid:this._map.spatialReference.wkid};A=this._isReverse(A,this.version);if(y)if(2===z){if((y=y.match(/[0123456789.\-\+eE]+/g))&&2<=y.length)for(z=
0;z<y.length;z+=2){var H=parseFloat(y[z]);var E=parseFloat(y[z+1]);if(A){var K=E;E=H;H=K}K={};this._projectFromSRToSR(B,this._map.spatialReference,H,E,K)&&(H=K.x,E=K.y);C.push([H,E])}}else if(3===z&&(y=y.match(/[0123456789.\-\+eE]+/g))&&3<=y.length)for(z=0;z<y.length;z+=3)H=parseFloat(y[z]),E=parseFloat(y[z+1]),A&&(K=E,E=H,H=K),K={},this._projectFromSRToSR(B,this._map.spatialReference,H,E,K)&&(H=K.x,E=K.y),C.push([H,E]);return C},_readCoord:function(A,y,z){var B,C=this._readWkidFromNode(A);-1!=C&&
(y=C);C=new l(y);var H=this._readSrsDimension(A);0!==H&&(z=H);var E=this._isReverse(y,this.version),K=[];K.spatialReference={wkid:this._map.spatialReference.wkid};H=0;var I=A.getElementsByTagNameNS(this._gmlNS,"X");for(B=0;B<I.length;){H=this._readFloat(I[B],y,z);break}var L=0;I=A.getElementsByTagNameNS(this._gmlNS,"Y");for(B=0;B<I.length;){L=this._readFloat(I[B],y,z);break}E&&(A=L,L=H,H=A);A={};this._projectFromSRToSR(C,this._map.spatialReference,H,L,A)&&(H=A.x,L=A.y);K.push(E?[L,H]:[H,L]);return K},
_readCoordinates:function(A,y,z){var B=this._readWkidFromNode(A);-1!=B&&(y=B);B=this._readSrsDimension(A);0!==B&&(z=B);return this._readCoordinatesBody(y,A.textContent,z)},_readPos:function(A,y,z){var B=this._readWkidFromNode(A);-1!=B&&(y=B);B=this._readSrsDimension(A);0!==B&&(z=B);return this._readCoordinatesBody(y,A.textContent,z)},_readPosList:function(A,y,z){var B=this._readWkidFromNode(A);-1!=B&&(y=B);B=this._readSrsDimension(A);0!==B&&(z=B);return this._readCoordinatesBody(y,A.textContent,z)},
_projectFromSRToSR:function(A,y,z,B,C){if(n.canProject(A,y))return A=new r(z,B,A),y=n.project(A,y),C.x=y.x,C.y=y.y,!0;C.x=z;C.y=B;return this._isProjectedOk=!1},_readFloat:function(A){return(A=A.textContent)?parseFloat(A):0},_readSrsDimension:function(A){return A.attributes&&(A=A.attributes.getNamedItem("srsDimension"))?parseInt(A.value,10):0},_readWkidFromNode:function(A){return A.attributes&&(A=A.attributes.getNamedItem("srsName"))&&(A=A.value.match(/\d+/g))&&0<A.length?(A=parseInt(A[A.length-1],
10),84===A&&(A=4326),parseInt(A,10)):-1},_isReverse:function(A,y){return this._inverseResponse},_appendCustomParameters:function(A){if(this.customParameters)for(var y in this.customParameters)A+=(-1===A.indexOf("?")?"?":"\x26")+y+"\x3d"+encodeURIComponent(this.customParameters[y]);return A},_checkForUrlInUrl:function(A,y){var z=A.toLowerCase().lastIndexOf("http");-1<y&&z>y&&(-1<A.indexOf("?",z)||-1!==A.indexOf("\x26",z)||(y=-1));return y}});f.setObject("layers.WFSLayer",S,e);return S})},"esri/layers/WMTSLayer":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/sniff dojox/xml/parser ../kernel ../lang ../request ../urlUtils ../WKIDUnitConversion ../SpatialReference ../geometry/Point ../geometry/Extent ../geometry/webMercatorUtils ./TiledMapServiceLayer ./TileInfo ./WMTSLayerInfo dojo/query".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n){J=J([p],{declaredClass:"esri.layers.WMTSLayer",copyright:null,extent:null,tileUrl:null,spatialReference:null,tileInfo:null,constructor:function(k,r){this.version="1.0.0";this.tileUrl=this._url=k;this.serviceMode="RESTful";this._parseCapabilities=f.hitch(this,this._parseCapabilities);this._getCapabilitiesError=f.hitch(this,this._getCapabilitiesError);this._formatDictionary={"image/png":".png","image/png8":".png","image/png24":".png","image/png32":".png",
"image/jpg":".jpg","image/jpeg":".jpeg","image/gif":".gif","image/bmp":".bmp","image/tiff":".tif","image/jpgpng":"","image/jpegpng":"","image/unknown":""};r||(r={});if(r.serviceMode)if("KVP"===r.serviceMode||"RESTful"===r.serviceMode)this.serviceMode=r.serviceMode;else return;this.customParameters=r.customParameters;this.customLayerParameters=r.customLayerParameters;this.layerInfo=new n;r.layerInfo&&(this.layerInfo=r.layerInfo,this._identifier=r.layerInfo.identifier,this._tileMatrixSetId=r.layerInfo.tileMatrixSet,
r.layerInfo.format&&(this.format="image/"+r.layerInfo.format),this._style=r.layerInfo.style,this.title=r.layerInfo.title,this._dimension=r.layerInfo.dimension,this._dimension2=r.layerInfo.dimension2);r.resourceInfo?(this.version=r.resourceInfo.version,r.resourceInfo.getTileUrl&&(this._url=this.tileUrl=r.resourceInfo.getTileUrl),this.copyright=r.resourceInfo.copyright,this.layerInfos=r.resourceInfo.layerInfos,this.customParameters=r.resourceInfo.customParameters||this.customParameters,this.customLayerParameters=
r.resourceInfo.customLayerParameters||this.customLayerParameters,this._parseResourceInfo(),this.loaded=!0,this.onLoad(this)):this._getCapabilities()},setActiveLayer:function(k){this.setVisibleLayer(k)},setVisibleLayer:function(k){this._setActiveLayer(k);this.refresh(!0)},setCustomParameters:function(k,r){this.customParameters=k;this.customLayerParameters=r;this.refresh(!0)},getTileUrl:function(k,r,w){k=this._levelToLevelValue[k];k=this.resourceUrls&&0<this.resourceUrls.length?this.resourceUrls[r%
this.resourceUrls.length].template.replace(/\{Style\}/gi,this._style).replace(/\{TileMatrixSet\}/gi,this._tileMatrixSetId).replace(/\{TileMatrix\}/gi,k).replace(/\{TileRow\}/gi,r).replace(/\{TileCol\}/gi,w).replace(/\{dimensionValue\}/gi,this._dimension).replace(/\{dimensionValue2\}/gi,this._dimension2):this.UrlTemplate.replace(/\{level\}/gi,k).replace(/\{row\}/gi,r).replace(/\{col\}/gi,w);k=this._appendCustomLayerParameters(k);k=this.addTimestampToURL(k);return q.addProxy(k)},getTileUrlTemplate:function(k){var r=
k.identifier,w=k.tileMatrixSet,x=k.format,D=k.style,G=k.dimension,F=k.dimension2;r?k=c.filter(this.layers,function(y){return y.identifier===r})[0]:(k=this.layers[0],r=this.layers[0].identifier);if(k){if(!x)x=k.formats[0];else if(!(-1===x.indexOf("image/")&&-1<c.indexOf(k.formats,x))&&(-1===x.indexOf("image/")&&(x="image/"+x),-1===c.indexOf(k.formats,x))){this.onError(Error("The layer doesn't support the format of "+x));return}if(!D)D=k.styles[0];else if(-1===c.indexOf(k.styles,D)){this.onError(Error("The layer doesn't support the style of "+
D));return}if(!G&&k.dimensions)G=k.dimensions[0];else if(-1===c.indexOf(k.dimensions,G)){this.onError(Error("The layer doesn't support the dimension of "+G));return}if(!F&&k.dimensions2)F=k.dimensions2[0];else if(-1===c.indexOf(k.dimensions2,F)){this.onError(Error("The layer doesn't support the dimension of "+F));return}if(w){var A=c.filter(k.tileMatrixSetInfos,function(y){return y.tileMatrixSet===w})[0];if(!A){this.onError(Error("The tileMatrixSetId "+w+" is not supported by the layer of "+r));return}}else(A=
c.filter(k.tileMatrixSetInfos,function(y){return"GoogleMapsCompatible"===y.tileMatrixSet})[0])||(A=k.tileMatrixSetInfos[0]),w=A.tileMatrixSet;return this._getTileUrlTemplate(r,w,x,D,G,F)}this.onError(Error("couldn't find the layer "+r))},_getTileUrlTemplate:function(k,r,w,x,D,G){k||(k=this._identifier);r||(r=this._tileMatrixSetId);w||(w=this.format);x||""===x||(x=this._style);if(this.resourceUrls&&0<this.resourceUrls.length){var F=this.resourceUrls[0].template;F.indexOf(".xxx")===F.length-4&&(F=F.slice(0,
F.length-4));F=F.replace(/\{Style\}/gi,x);F=F.replace(/\{TileMatrixSet\}/gi,r);F=F.replace(/\{TileMatrix\}/gi,"{level}");F=F.replace(/\{TileRow\}/gi,"{row}");F=F.replace(/\{TileCol\}/gi,"{col}");F=F.replace(/\{dimensionValue\}/gi,D);return F=F.replace(/\{dimensionValue2\}/gi,G)}"KVP"===this.serviceMode?F=this._url+"SERVICE\x3dWMTS\x26VERSION\x3d"+this.version+"\x26REQUEST\x3dGetTile\x26LAYER\x3d"+k+"\x26STYLE\x3d"+x+"\x26FORMAT\x3d"+w+"\x26TILEMATRIXSET\x3d"+r+"\x26TILEMATRIX\x3d{level}\x26TILEROW\x3d{row}\x26TILECOL\x3d{col}":
"RESTful"===this.serviceMode&&(D="",this._formatDictionary[w.toLowerCase()]&&(D=this._formatDictionary[w.toLowerCase()]),F=this._url+k+"/"+x+"/"+r+"/{level}/{row}/{col}"+D);return F},_parseResourceInfo:function(){var k=this.layerInfos,r;"KVP"===this.serviceMode&&(this._url+=-1<this._url.indexOf("?")?"":"?");for(r=0;r<k.length;r++)if(!(this._identifier&&k[r].identifier!==this._identifier||this.title&&k[r].title!==this.title||this._tileMatrixSetId&&k[r].tileMatrixSet!==this._tileMatrixSetId||this.format&&
"image/"+k[r].format!==this.format||this._style&&k[r].style!==this._style)){f.mixin(this,{description:k[r].description,tileInfo:k[r].tileInfo,spatialReference:k[r].tileInfo.spatialReference,fullExtent:k[r].fullExtent,initialExtent:k[r].initialExtent,_identifier:k[r].identifier,_tileMatrixSetId:k[r].tileMatrixSet,format:"image/"+k[r].format,_style:k[r].style});break}for(r=0;r<k.length;r++){var w=k[r].tileInfo;96!==w.dpi&&(c.forEach(w.lods,function(x){x.scale=96*x.scale/w.dpi}),w.dpi=96);c.forEach(w.lods,
function(x){x.resolution=this._getResolution(w.spatialReference.wkid,90.71428571428571*x.scale/96,k[r].tileMatrixSet)},this)}this._setActiveLayer();this.UrlTemplate=this._getTileUrlTemplate();this._levelToLevelValue=[];c.forEach(this.tileInfo.lods,function(x){this._levelToLevelValue[x.level]=x.levelValue?x.levelValue:x.level},this)},_getCapabilities:function(){var k;"KVP"===this.serviceMode?k=-1<this._url.indexOf("?")?this._url+"\x26request\x3dGetCapabilities\x26service\x3dWMTS\x26version\x3d"+this.version:
this._url+"?request\x3dGetCapabilities\x26service\x3dWMTS\x26version\x3d"+this.version:"RESTful"===this.serviceMode&&(k=this._url+"/"+this.version+"/WMTSCapabilities.xml");k=this._appendCustomParameters(k);e({url:k,handleAs:"text",load:this._parseCapabilities,error:this._getCapabilitiesError})},_parseCapabilities:function(k){k=k.replace(/ows:/gi,"");k=d.parse(k);var r=S.query("Contents",k)[0];if(r){var w=S.query("OperationsMetadata",k)[0],x=S.query("[name\x3d'GetTile']",w)[0];w=this._url;x=S.query("Get",
x);var D,G=!1;for(D=0;D<x.length;D++){var F=S.query("Constraint",x[D])[0];if(!F||this._getTagWithChildTagValue("AllowedValues","Value",this.serviceMode,F)){w=x[D].attributes[0].nodeValue;G=!0;break}else if(!F||this._getTagWithChildTagValue("AllowedValues","Value","RESTful",F))var A=x[D].attributes[0].nodeValue;else if(!F||this._getTagWithChildTagValue("AllowedValues","Value","KVP",F))var y=x[D].attributes[0].nodeValue}G||("KVP"===this.serviceMode&&A?(w=A,this.serviceMode="RESTful"):"RESTful"===this.serviceMode&&
y&&(w=y,this.serviceMode="KVP"));-1===w.indexOf("/1.0.0/")&&"RESTful"===this.serviceMode&&(w+="/");"KVP"===this.serviceMode&&(w+=-1<w.indexOf("?")?"":"?");this._url=w;this.copyright=this._getTagValues("Capabilities\x3eServiceIdentification\x3eAccessConstraints",k)[0];A=S.query("Layer",r);var z,B=[];this.layers=[];c.forEach(A,function(C){z=this._getTagValues("Identifier",C)[0];B.push(z);this.layers.push(this._getWMTSLayerInfo(z,C,r))},this);this._setActiveLayer();this.loaded=!0;this.onLoad(this)}else this.onError(Error("The WMTS capabilities XML is not valid"))},
_setActiveLayer:function(k){k||(k={});k.identifier&&(this._identifier=k.identifier);k.tileMatrixSet&&(this._tileMatrixSetId=k.tileMatrixSet);k.format&&(this.format=k.format);k.style&&(this._style=k.style);k.dimension&&(this._dimension=k.dimension);k.dimension2&&(this._dimension2=k.dimension2);if(this.layers)if(this._identifier?k=c.filter(this.layers,function(w){return w.identifier===this._identifier},this)[0]:(k=this.layers[0],this._identifier=this.layers[0].identifier),k){if(this.format){if(-1===
this.format.indexOf("image/")&&(this.format="image/"+this.format),-1===c.indexOf(k.formats,this.format)){this.onError(Error("The layer doesn't support the format of "+this.format));return}}else this.format=k.formats[0],-1===this.format.indexOf("image/")&&(this.format="image/"+this.format);if(!this._style)this._style=k.styles[0];else if(-1===c.indexOf(k.styles,this._style)){this.onError(Error("The layer doesn't support the style of "+this._style));return}if(!this._dimension&&k.dimensions)this._dimension=
k.dimensions[0];else if(-1===c.indexOf(k.dimensions,this._dimension)){this.onError(Error("The layer doesn't support the dimension of "+this._dimension));return}if(!this._dimension2&&k.dimensions2)this._dimension2=k.dimensions2[0];else if(-1===c.indexOf(k.dimensions2,this._dimension2)){this.onError(Error("The layer doesn't support the dimension of "+this._dimension2));return}if(this._tileMatrixSetId){var r=c.filter(k.tileMatrixSetInfos,function(w){return w.tileMatrixSet===this._tileMatrixSetId},this)[0];
if(!r){this.onError(Error("The tileMatrixSetId "+this._tileMatrixSetId+" is not supported by the layer of "+this._identifier));return}}else(r=c.filter(k.tileMatrixSetInfos,function(w){return"GoogleMapsCompatible"===w.tileMatrixSet})[0])||(r=k.tileMatrixSetInfos[0]),this._tileMatrixSetId=r.tileMatrixSet;this.description=k.description;this.title=k.title;this.spatialReference=r.tileInfo.spatialReference;this.tileInfo=r.tileInfo;this._levelToLevelValue=[];c.forEach(this.tileInfo.lods,function(w){this._levelToLevelValue[w.level]=
w.levelValue?w.levelValue:w.level},this);102100===this.spatialReference.wkid||102113===this.spatialReference.wkid?this.fullExtent=this.initialExtent=v.geographicToWebMercator(k.gcsExtent):4326===this.spatialReference.wkid?this.fullExtent=this.initialExtent=k.gcsExtent:(this.fullExtent=r.fullExtent,this.initialExtent=r.initialExtent);this.resourceUrls=k.resourceUrls;this.UrlTemplate=this._getTileUrlTemplate();this.layerInfo={identifier:this._identifier,tileMatrixSet:this._tileMatrixSetId,format:this.format,
style:this._style,fullExtent:this.fullExtent,initialExtent:this.initialExtent,tileInfo:this.tileInfo,title:this.title,description:this.description}}else this.onError(Error("couldn't find the layer "+this._identifier))},_getWMTSLayerInfo:function(k,r,w){var x=this._getTagValues("Abstract",r)[0],D=this._getTagValues("Title",r)[0],G=S.query("WGS84BoundingBox",r)[0],F=G?this._getTagValues("LowerCorner",G)[0].split(" "):["-180","-90"],A=G?this._getTagValues("UpperCorner",G)[0].split(" "):["180","90"];
G=parseFloat(F[0]);F=parseFloat(F[1]);var y=parseFloat(A[0]);A=parseFloat(A[1]);G=new m(G,F,y,A,new u({wkid:4326}));A=this._getTagValues("Identifier",S.query("Style",r)[0]);var z=this._getTagValues("Identifier",S.query("Dimension",r)[0]),B=this._getTagValues("Default",S.query("Dimension",r)[0])||this._getTagValues("Value",S.query("Dimension",r)[0]),C=1<S.query("Dimension",r).length?this._getTagValues("Identifier",S.query("Dimension",r)[1]):[],H=1<S.query("Dimension",r).length?this._getTagValues("Default",
S.query("Dimension",r)[1])||this._getTagValues("Value",S.query("Dimension",r)[1]):[];F=this._getTagValues("Format",r);w=this._getLayerMatrixInfos(r,w);k={identifier:k,tileMatrixSetInfos:w,formats:F,styles:A,title:D,description:x,gcsExtent:G,dimensions:B,dimensions2:H};r=S.query("ResourceURL",r);var E=[],K;c.forEach(r,function(I){K=I.getAttribute("template");if(z&&B&&z[0]&&B[0])if(-1<K.indexOf("{"+z+"}"))K=K.replace("{"+z+"}","{dimensionValue}");else{var L=K.toLowerCase().indexOf("{"+z[0].toLowerCase()+
"}");-1<L&&(K=K.substring(0,L)+"{dimensionValue}"+K.substring(L+z[0].length+2))}C&&H&&C[0]&&H[0]&&(-1<K.indexOf("{"+C+"}")?K=K.replace("{"+C+"}","{dimensionValue2}"):(L=K.toLowerCase().indexOf("{"+C[0].toLowerCase()+"}"),-1<L&&(K=K.substring(0,L)+"{dimensionValue2}"+K.substring(L+C[0].length+2))));E.push({template:K,format:I.getAttribute("format"),resourceType:I.getAttribute("resourceType")})});E&&0<E.length&&(k.resourceUrls=E);return k},_getLayerMatrixInfos:function(k,r){var w=[],x=this._getTagValues("TileMatrixSet",
k);if(x&&0!==x.length)return c.forEach(x,function(D){D=this._getLayerMatrixInfo(D,k,r);w.push(D)},this),w},_getLayerMatrixInfo:function(k,r,w){var x=[];r=this._getTagWithChildTagValue("TileMatrixSetLink","TileMatrixSet",k,r);var D=this._getTagValues("TileMatrix",r),G=this._getTagWithChildTagValue("TileMatrixSet","Identifier",k,w),F=this._getTagValues("SupportedCRS",G)[0];var A=parseInt(F.split(":").pop(),10);if(900913==A||3857==A)A=102100;if(-1<F.toLowerCase().indexOf("crs84")||-1<F.toLowerCase().indexOf("crs:84")){A=
4326;var y=!0}else if(-1<F.toLowerCase().indexOf("crs83")||-1<F.toLowerCase().indexOf("crs:83"))A=4269,y=!0;else if(-1<F.toLowerCase().indexOf("crs27")||-1<F.toLowerCase().indexOf("crs:27"))A=4267,y=!0;var z=new u({wkid:A}),B=S.query("TileMatrix",G)[0];w=parseInt(this._getTagValues("TileWidth",B)[0],10);r=parseInt(this._getTagValues("TileHeight",B)[0],10);var C=this._getTagValues("TopLeftCorner",B)[0].split(" ");var H=C[0],E=C[1];1<H.split("E").length&&(C=H.split("E"),H=C[0]*Math.pow(10,C[1]));1<
E.split("E").length&&(C=E.split("E"),E=C[0]*Math.pow(10,C[1]));H=parseFloat(H);E=parseFloat(E);var K=y&&4326===A&&90===H&&-180===E;for(C=0;C<this._flippingAxisForWkids.length;C++)if(F.split(":").pop()>=this._flippingAxisForWkids[C][0]&&F.split(":").pop()<=this._flippingAxisForWkids[C][1]||4326===A&&(!y||K)){4326===A&&90<H&&(H="90");var I=new g(E,H,z);break}C===this._flippingAxisForWkids.length&&(I=new g(H,E,z));if(0===D.length)for(D=S.query("TileMatrix",G),C=0;C<D.length;C++)y=this._getLodFromTileMatrix(D[C],
A,C,k),x.push(y);else for(C=0;C<D.length;C++)y=this._getTagWithChildTagValue("TileMatrix","Identifier",D[C],G),y=this._getLodFromTileMatrix(y,A,C,k),x.push(y);A=S.query("BoundingBox",G)[0];if(A){var L=this._getTagValues("LowerCorner",A)[0].split(" ");var M=this._getTagValues("UpperCorner",A)[0].split(" ")}L&&1<L.length&&M&&1<M.length?(B=parseFloat(L[0]),A=parseFloat(L[1]),L=parseFloat(M[0]),M=parseFloat(M[1])):(L=this._getTagValues("MatrixWidth",B)[0],A=this._getTagValues("MatrixHeight",B)[0],B=I.x,
M=I.y,L=B+L*r*x[0].resolution,A=M-A*w*x[0].resolution);M=L=new m(B,A,L,M,z);I=new l({dpi:96,spatialReference:z,format:this.format,rows:w,cols:r,origin:I,lods:x});return{tileMatrixSet:k,fullExtent:M,initialExtent:L,tileInfo:I}},_getCapabilitiesError:function(k){this.onError(k)},_getLodFromTileMatrix:function(k,r,w,x){var D=this._getTagValues("Identifier",k)[0];k=this._getTagValues("ScaleDenominator",k)[0];1<k.split("E").length?(k=k.split("E"),k=k[0]*Math.pow(10,k[1])):k=parseFloat(k);r=this._getResolution(r,
k,x);return{level:w,levelValue:D,scale:1.058267716535433*k,resolution:r}},_getResolution:function(k,r,w){k=a.isDefined(t[k])?t.values[t[k]]:"default028mm"===w?6370997*Math.PI/180:6378137*Math.PI/180;return 7*r/25E3/k},_getTag:function(k,r){return(k=S.query(k,r))&&0<k.length?k[0]:null},_getTagValues:function(k,r){var w=[];k=k.split("\x3e");var x=S.query(k[0],r)[0];if(1<k.length){for(r=1;r<k.length-1;r++)x=S.query(k[r],x)[0];r=S.query(k[k.length-1],x)}else r=S.query(k[0],r);r&&0<r.length&&c.forEach(r,
function(D){9>h("ie")?w.push(D.childNodes.length?D.childNodes[0].nodeValue:""):w.push(D.textContent)});return w},_getAttributeValues:function(k,r,w){k=S.query(k,w);var x=[];k&&0<k.length&&c.forEach(k,function(D){x.push(D.getAttribute(r))});return x},_getTagWithChildTagValue:function(k,r,w,x){x=x.childNodes;var D;for(D=0;D<x.length;D++)if(-1<x[D].nodeName.indexOf(k)){if(9>h("ie")){if(a.isDefined(S.query(r,x[D])[0]))var G=S.query(r,x[D])[0].childNodes[0].nodeValue}else a.isDefined(S.query(r,x[D])[0])&&
(G=S.query(r,x[D])[0].textContent);if(G===w||w.split(":")&&G===w.split(":")[1])return x[D]}},_appendCustomParameters:function(k){var r;if(this.customParameters)for(r in this.customParameters)k+=(-1===k.indexOf("?")?"?":"\x26")+r+"\x3d"+encodeURIComponent(this.customParameters[r]);return k},_appendCustomLayerParameters:function(k){var r;if(this.customLayerParameters||this.customParameters){var w=f.clone(this.customParameters||{});f.mixin(w,this.customLayerParameters||{});for(r in w)k+=(-1===k.indexOf("?")?
"?":"\x26")+r+"\x3d"+encodeURIComponent(w[r])}return k},_flippingAxisForWkids:[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,
5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,
3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],
[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]]});f.setObject("layers.WMTSLayer",J,b);return J})},"esri/layers/WMTSLayerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(S,J,f,c){S=S(null,{declaredClass:"esri.layers.WMTSLayerInfo",identifier:null,tileMatrixSet:null,format:null,style:null,tileInfo:null,title:null,fullExtent:null,initialExtent:null,description:null,dimension:null,constructor:function(h){h&&(this.title=h.title,this.tileMatrixSet=
h.tileMatrixSet,this.format=h.format,this.style=h.style,this.tileInfo=h.tileInfo,this.fullExtent=h.fullExtent,this.initialExtent=h.initialExtent,this.identifier=h.identifier,this.description=h.description,this.dimension=h.dimension)}});J.setObject("layers.WMTSLayerInfo",S,c);return S})},"arcgisonline/pages/item/widgets/typeOptions/mapOptions/httpsUpdate":function(){define("require exports tslib ../../../../../map/core/urlUtils ../../../../utils/dom dojo/dom-construct dojo/topic dojo/string dijit/a11yclick dijit/_WidgetBase dijit/_TemplatedMixin esri/lang dojo/i18n!../../../../../nls/arcgisonline dojo/text!./httpsResultIssue.html dojo/text!./httpsResultUpdated.html dojo/text!./httpsResultUnchanged.html dojo/text!./httpsUpdate.html ../../../../../tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);return function(){function k(r,w){this.templateString=l.default;this.WEB_SCENE="Web Scene"}k.prototype.postMixInProperties=
function(){this.inherited(arguments);this.i18n=g.default};k.prototype.startup=function(){this.inherited(arguments);this.initUI()};k.prototype.initUI=function(){this.isWebScene=this.item.type===this.WEB_SCENE;this.updateHttpsDesc.innerHTML=this.i18n.itemProperties[this.isWebScene?"updateSceneLayersToHTTPSDesc":"updateLayersToHTTPSDesc"];this.own((0,e.default)(this.okBtn,this.okClick.bind(this)),(0,e.default)(this.doneBtn,this.doneClick.bind(this)),(0,e.default)(this.cancelBtn,this.cancelClick.bind(this)),
(0,e.default)(this.toggleIssues,this.issuesToggled.bind(this)),(0,e.default)(this.toggleUpdated,this.updatedToggled.bind(this)),(0,e.default)(this.toggleUnchanged,this.unchangedToggled.bind(this)))};k.prototype.filterForIssues=function(r){return r.filter(function(w){return"failure"===w.layerUrlChange||w.layerRenderingFailures||w.layerQueryUrlFailures||w.itemAccess&&("failure"===w.itemUrlChange||w.itemRenderingFailures||w.itemQueryUrlFailures)})};k.prototype.filterForUpdated=function(r){return r.filter(function(w){return("success"===
w.layerUrlChange||w.layerRenderingChanged||w.layerQueryUrlChanged)&&!w.layerRenderingFailures&&!w.layerQueryUrlFailures||w.itemAccess&&("success"===w.itemUrlChange||w.itemRenderingChanged||w.itemQueryUrlChanged)&&!w.itemRenderingFailures&&!w.itemQueryUrlFailures})};k.prototype.filterForUnchanged=function(r){return r.filter(function(w){return"none"===w.layerUrlChange&&!w.layerRenderingChanged&&!w.layerRenderingFailures&&!w.layerQueryUrlChanged&&!w.layerQueryUrlFailures&&(!w.itemAccess||w.itemAccess&&
"none"===w.itemUrlChange&&!w.itemRenderingChanged&&!w.itemRenderingFailures&&!w.itemQueryUrlChanged&&!w.itemQueryUrlFailures)})};k.prototype.writeOutIssues=function(r){var w=this;r.length?(this.issuesTitle.innerHTML=a.default.substitute(this.i18n.itemProperties.layersWithIssues,{n:r.length}),d.default.empty(this.issues),r.forEach(function(x){x.message="";if("failure"===x.layerUrlChange||x.layerQueryUrlFailures||x.itemQueryUrlFailures)x.message=w.i18n.itemProperties.layerMessages.httpsNotSupported;
else if(x.layerRenderingFailures||x.itemAccess&&x.itemRenderingFailures)x.message=w.i18n.itemProperties.layerMessages[w.isWebScene?"sceneSymbolHttpsNotSupported":"symbolHttpsNotSupported"];d.default.place(a.default.substitute(m.default,x),w.issues,"last")}),h.default.showNode(this.layersWithIssues)):h.default.hideNode(this.layersWithIssues)};k.prototype.writeOutUpdated=function(r){var w=this;r.length?(this.updatedTitle.innerHTML=a.default.substitute(this.i18n.itemProperties.layersUpdated,{n:r.length}),
d.default.empty(this.updated),r.forEach(function(x){x.message="";"success"===x.layerUrlChange||x.layerRenderingChanged||x.layerQueryUrlChanged?(x.message=w.i18n.itemProperties.layerMessages[w.isWebScene?"updatedInScene":"updatedInMap"],x.itemAccess&&("success"===x.itemUrlChange||x.itemRenderingChanged||x.itemQueryUrlChanged)&&(x.message=w.i18n.itemProperties.layerMessages[w.isWebScene?"updatedInSceneAndItem":"updatedInMapAndItem"])):x.itemAccess&&("success"===x.itemUrlChange||x.itemRenderingChanged||
x.itemQueryUrlChanged)?x.message=w.i18n.itemProperties.layerMessages[w.isWebScene?"updatedInSceneAndItem":"updatedInMapAndItem"]:x.layerRenderingChanged&&(x.message=w.i18n.itemProperties.layerMessages[w.isWebScene?"updatedInScene":"updatedInMap"]);d.default.place(a.default.substitute(v.default,x),w.updated,"last")}),h.default.showNode(this.layersUpdated)):h.default.hideNode(this.layersUpdated)};k.prototype.writeOutUnchanged=function(r){var w=this;r.length?(this.unchangedTitle.innerHTML=a.default.substitute(this.i18n.itemProperties.layersUnchanged,
{n:r.length}),d.default.empty(this.unchanged),r.forEach(function(x){x.message="";d.default.place(a.default.substitute(p.default,x),w.unchanged,"last")}),h.default.showNode(this.layersUnchanged)):h.default.hideNode(this.layersUnchanged)};k.prototype.okClick=function(){var r=this;h.default.hideNode(this.updateHttpsDesc);h.default.showNode(this.updateHttpsLoading);h.default.disableNode(this.okBtn,!0);c.default.switchToHTTPS(this.item.itemData,this.item).then(function(w){var x=r.filterForIssues(w.layers),
D=r.filterForUpdated(w.layers),G=r.filterForUnchanged(w.layers);h.default.hideNode(r.updateHttpsLoading);u.default.isDefined(w.configChange)&&"failure"===w.configChange?h.default.showNode(r.unexpectedError):(r.writeOutIssues(x),r.writeOutUpdated(D),r.writeOutUnchanged(G),x.length?r.issuesToggled():D.length?r.updatedToggled():G.length&&r.unchangedToggled(),x.length||D.length||!G.length?h.default.showNode(r.updateHttpsResults):h.default.showNode(r.noChangesMade));h.default.hideNode(r.okBtn);h.default.hideNode(r.cancelBtn);
h.default.showNode(r.doneBtn);b.default.publish("item-data/change")},function(w){h.default.hideNode(r.updateHttpsLoading);h.default.showNode(r.unexpectedError);h.default.hideNode(r.okBtn);h.default.hideNode(r.cancelBtn);h.default.showNode(r.doneBtn)})};k.prototype.cancelClick=function(){b.default.publish("update-to-https/cancel")};k.prototype.doneClick=function(){b.default.publish("update-to-https/done")};k.prototype.toggleSection=function(r,w){h.default.showHide(w,r.classList.contains("icon-ui-right"));
r.classList.toggle("icon-ui-right");r.classList.toggle("icon-ui-down")};k.prototype.issuesToggled=function(){this.toggleSection(this.toggleIssues,this.issues)};k.prototype.updatedToggled=function(){this.toggleSection(this.toggleUpdated,this.updated)};k.prototype.unchangedToggled=function(){this.toggleSection(this.toggleUnchanged,this.unchanged)};return k=f.__decorate([(0,n.default)(q.default,t.default)],k)}()})},"arcgisonline/pages/components/ChangeOwnerWarning":function(){define("require exports tslib preact preact/hooks preact/compat dojo/i18n!../../nls/arcgisonline".split(" "),
function(S,J,f,c,h,d,b){Object.defineProperty(J,"__esModule",{value:!0});J.ChangeOwnerWarning=void 0;b=f.__importDefault(b);J.ChangeOwnerWarning=function(a){var e=a.sourceItem,q=a.onClose;a=f.__assign(f.__assign({},b.default.common),b.default.changeOwner);var t=(0,h.useState)(!1),u=t[0],g=t[1],m=(0,h.useRef)(null);(0,h.useEffect)(function(){m.current&&window.setTimeout(function(){g(!0)},300)},[m.current]);return(0,c.h)(c.Fragment,null,(0,d.createPortal)((0,c.h)("calcite-modal",{ref:m,open:u,width:"s",
oncalciteModalClose:function(){q()}},(0,c.h)("h3",{slot:"header",class:"font-size-2 trailer-0"},a.cantChangeOwner),(0,c.h)("div",{slot:"content"},(0,c.h)("p",null,a.itemDepends),(0,c.h)("div",null,(0,c.h)("a",{href:"./item.html?id\x3d".concat(e.id),target:"_blank",rel:"noreferrer"},(0,c.h)("img",{src:e.svgIconUrl16,width:"16",height:"16",alt:"",class:"icon-inline icon-inline--on-left margin-right-half"}),e.title))),(0,c.h)("calcite-button",{slot:"primary",width:"full",onClick:function(){q()}},a.ok)),
document.body))}})},"arcgisonline/pages/components/DeleteItems":function(){define("require exports tslib arcgisonline/esriGeowConfig dojo/i18n!../../nls/arcgisonline preact preact/hooks ../utils/channels ../utils/culture ../utils/item ../utils/recycle ../utils/timeout ./SummarizedItems".split(" "),function(S,J,f,c,h,d,b,a,e,q,t,u,g){function m(w){var x=this,D=w.recycleEnabled,G=w.items,F=w.inRecycleBin,A=w.allowDiscouraged;w=(0,b.useState)(!0);var y=w[0],z=w[1],B=(0,b.useRef)({protectedItems:[],unprotectedItems:[],
unrecyclableItems:[]});(0,b.useEffect)(function(){z(!0);(function(){return f.__awaiter(x,void 0,void 0,function(){var C,H,E,K=this;return f.__generator(this,function(I){switch(I.label){case 0:return C=function(){return f.__awaiter(K,void 0,void 0,function(){var L,M,N,P,R,Y,ja;return f.__generator(this,function(aa){switch(aa.label){case 0:return F?[2,f.__assign(f.__assign({},B.current),{unprotectedItems:G})]:D?[4,(0,t.getProtectedItems)(G,A)]:[3,2];case 1:return L=aa.sent(),M=L.protectedItems,N=L.unprotectedItems,
P=L.unrecyclableItems,[2,f.__assign(f.__assign({},B.current),{protectedItems:M,unprotectedItems:N,unrecyclableItems:P})];case 2:return[4,n.getProtectedItems(G)];case 3:return R=aa.sent(),Y=R.protectedItems,ja=R.unprotectedItems,[2,f.__assign(f.__assign({},B.current),{protectedItems:Y,unprotectedItems:ja})]}})})},H=function(){return f.__awaiter(K,void 0,void 0,function(){var L;return f.__generator(this,function(M){switch(M.label){case 0:return L=[f.__assign({},B.current)],[4,C()];case 1:return[2,f.__assign.apply(void 0,
L.concat([M.sent()]))]}})})},E=B,[4,H()];case 1:return E.current=I.sent(),z(!1),[2]}})})})()},[F,G,A]);return{isLoading:y,itemsStatus:B.current}}function v(w){var x=(0,b.useState)(w),D=x[0],G=x[1];(0,b.useEffect)(function(){r(function(F){return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,function(A){w.forEach(function(y){y.id===F.id&&(y.protected=F.protected)});G(f.__spreadArray([],w,!0));return[2]})})})},[w]);return{items:D}}function p(w){var x=w.itemsStatus,D=w.isPermanentDeleteOverride,
G=w.inRecycleBin,F=x.protectedItems,A=x.unrecyclableItems,y=x.unprotectedItems,z=(0,b.useRef)();(function(){if(D)z.current="UNRECYCLABLE";else{var B=[];0<F.length&&B.push("PROTECTED");0<A.length&&B.push("UNRECYCLABLE");0<y.length&&B.push("UNPROTECTED");z.current=B.join("_")}})();return{mode:z.current,primaryAction:function(B){var C="DELETE";if(G)return"PERMANENT_DELETE";switch(B){case "PROTECTED":C="NONE";break;case "UNRECYCLABLE":case "PROTECTED_UNRECYCLABLE":C="PERMANENT_DELETE"}return C}(z.current)}}
var l=this;Object.defineProperty(J,"__esModule",{value:!0});J.DeleteItems=void 0;c=f.__importDefault(c);h=f.__importDefault(h);e=f.__importDefault(e);q=f.__importDefault(q);var n=q.default,k=e.default,r=a.handleItemSettingsUpdate;J.DeleteItems=function(w){var x=w.recycleEnabled,D=w.inRecycleBin,G=w.onSubmit,F=w.onCancel,A=w.folder,y=w.disableLinks,z=w.allowDiscouraged,B=w.outsideCloseDisabled,C=h.default,H=(0,b.useState)(!1),E=H[0],K=H[1],I=(0,b.useState)(!1);H=I[0];var L=I[1];I=(0,b.useState)(!0);
var M=I[0],N=I[1];I=(0,b.useState)(!1);var P=I[0],R=I[1];I=(0,b.useState)(!1);var Y=I[0],ja=I[1],aa=v(w.items).items;z=m({items:aa,recycleEnabled:x,inRecycleBin:D,allowDiscouraged:z});w=z.isLoading;z=z.itemsStatus;H=H||w;var da=z.protectedItems,ra=z.unrecyclableItems,ca=z.unprotectedItems,fa=f.__spreadArray(f.__spreadArray([],ra,!0),ca,!0);z=p({itemsStatus:{protectedItems:da,unrecyclableItems:ra,unprotectedItems:ca},isPermanentDeleteOverride:P,inRecycleBin:D});var la=z.mode,ta=z.primaryAction;(0,b.useEffect)(function(){K(!0)},
[]);var Q=function(){return["PROTECTED","UNPROTECTED","UNRECYCLABLE"].includes(la)};z=function(){var ia=k.getString(C.deleteItems.areYouSurePermanent,ca.length);return(0,d.h)("div",{class:"flex-column"},(0,d.h)("span",null,ia))};I=function(){if(P)var ia=(0,d.h)("div",{class:"flex-column"},(0,d.h)("span",{class:"trailer-half"},1<fa.length?C.recycle.deleteOverride.multiple:C.recycle.deleteOverride.single),(0,d.h)(g.SummarizedItems,{id:"permanent-delete-summary",icon:"trash",title:C.deleteItems.summary.permanentlyDelete,
itemSummary:[{itemGroup:fa}],disableLinks:y}));else{ia=d.h;var X;if(X=!!A){var ha=X="";switch(la){case "UNPROTECTED":case "UNRECYCLABLE":case "UNRECYCLABLE_UNPROTECTED":X=C.deleteItems.folder.mustBeEmptyProceed.replace("${folder}",A.title);break;case "PROTECTED_UNRECYCLABLE":case "PROTECTED_UNPROTECTED":case "PROTECTED_UNRECYCLABLE_UNPROTECTED":X=C.deleteItems.folder.mustBeEmpty.replace("${folder}",A.title);ha=C.deleteItems.folder.aFewCannotBeDeleted;break;case "PROTECTED":X=C.deleteItems.folder.cannotBeDeleted.replace("${folder}",
A.title)}X=(0,d.h)(d.Fragment,null,(0,d.h)("span",{class:"trailer-half",dangerouslySetInnerHTML:{__html:X}}),ha&&(0,d.h)("span",{class:"trailer-1"},ha))}ia=ia.call(d,"div",{class:"flex-column"},X,T(),O())}return ia};var T=function(){var ia,X,ha=aa.length-(M?0:ra.length),V="".concat(c.default.self.helpBase).concat(c.default.self.helpMap.m["120004692"]||""),ea=C.deleteItems.summary,U={itemGroup:da.filter(function(za){var Ba;return"CONT_0048"===(null===(Ba=za.error)||void 0===Ba?void 0:Ba.messageCode)}),
groupHeading:ea.protectedGroup.deleteProtected,groupDescription:ea.protectedGroup.deleteProtectedDescription},ka={itemGroup:da.filter(function(za){var Ba;return"Delete discouraged"===(null===(Ba=za.error)||void 0===Ba?void 0:Ba.message)}),groupHeading:ea.protectedGroup.deleteDiscouraged,groupDescription:ea.protectedGroup.deleteDiscouragedDescription.single},ma={itemGroup:da.filter(function(za){var Ba;return"CONT_00481"===(null===(Ba=za.error)||void 0===Ba?void 0:Ba.messageCode)}),offendingItems:null===
(X=null===(ia=da[0])||void 0===ia?void 0:ia.error)||void 0===X?void 0:X.offendingItems,groupHeading:ea.protectedGroup.hasDependentItems,groupDescription:ea.protectedGroup.itemUsedBy},sa={itemGroup:ra.filter(function(za){return!za.origin}),groupHeading:ea.permanentDelete.group.notSupported},pa={itemGroup:ra.filter(function(za){return!!za.origin}),groupHeading:ea.permanentDelete.group.distributedCollaboration,groupDescription:ea.permanentDelete.group.distributedCollaborationDescription};ia=function(){var za,
Ba,ua="Delete discouraged"===(null===(Ba=null===(za=ca[0])||void 0===za?void 0:za.error)||void 0===Ba?void 0:Ba.message);za=ua?"".concat(C.deleteItems.summary.someActionsMayNoLongerWork.single," ").concat(C.deleteItems.areYouSure.single):k.getString(ea.canBeRecovered,ca.length,{days:t.DAYS_IN_RECYCLE_BIN});return(0,d.h)(g.SummarizedItems,{id:"unprotected-summary",icon:"recycle-bin",title:ua?ea.deleteDiscouraged:ea.willBeRecycled,description:za,itemSummary:[{itemGroup:ca}],disableLinks:y})};X=function(){return(0,d.h)(d.Fragment,
null,(0,d.h)(g.SummarizedItems,{id:"unrecyclable-summary",icon:"trash",title:ea.permanentlyDelete,htmlDescription:function(){var za=0<sa.itemGroup.length&&0<pa.itemGroup.length;return(0<pa.itemGroup.length&&0===sa.itemGroup.length?C.deleteItems.summary.permanentDelete.unsynchronized:za?ea.permanentDelete.notSupportedAndUnsynchronized:C.deleteItems.summary.permanentDelete.notSupported[1<ra.length?"multiple":"single"]).replace("${startLink}",'\x3ccalcite-link icon-end\x3d"launch" href\x3d"'.concat(V,
'" target\x3d"_blank"\x3e')).replace("${endLink}","\x3c/calcite-link\x3e")}(),itemSummary:[sa,pa],toggle:!Q()&&{selected:M,onToggle:function(){return N(!M)}},disableLinks:y}),0<ca.length+da.length&&(0,d.h)("hr",{class:"margin-top-1 trailer-0"}))};var Aa=function(){var za=0<U.itemGroup.length,Ba=0<ma.itemGroup.length,ua=0<ka.itemGroup.length;za=!za||Ba||ua?Ba&&!ua&&!za||Ba&&ua&&!za?ea.protectedGroup.hasDependentItemsDescription.multiple:!ua||Ba||za?ea.cannotDelete.protectedAndDependent:ea.protectedGroup.deleteDiscouragedDescription.multiple:
ea.protectedGroup.deleteProtectedDescription;if(1<da.length)return(0,d.h)(g.SummarizedItems,{id:"protected-summary",icon:"security",title:ea.cannotBeDeleted,description:za,itemSummary:[U,ma,ka],disableLinks:y});za=1===U.itemGroup.length?U:1===ma.itemGroup.length?ma:1===ka.itemGroup.length?ka:pa;return(0,d.h)(g.SummarizedItems,{id:"protected-summary",icon:"security",title:ea.cannotBeDeleted,description:za.groupDescription,itemSummary:[za],disableLinks:y})};return(0,d.h)("div",{class:"flex-column"},
!Q()&&!A&&(0,d.h)("span",{class:"margin-bottom-2"},ea.selectedItems," ",ha),0<ra.length&&X(),0<ca.length&&ia(),0<da.length&&Aa())},O=function(){return"PROTECTED"===la||"PERMANENT_DELETE"===ta?null:(0,d.h)(d.Fragment,null,(0,d.h)("calcite-button",{class:"margin-top-2 summarized-items__options",scale:"s",iconEnd:Y?"minus":"plus",appearance:"transparent",onClick:function(){ja(!Y)},onKeyDown:function(ia){["Enter"," "].includes(ia.key)&&ja(!Y)}},Y?C.deleteItems.hideOptions:C.deleteItems.moreOptions),Y&&
(0,d.h)("calcite-button",{kind:"danger",scale:"s",appearance:"transparent",iconStart:"trash",class:"margin-top-1",onClick:function(){R(!0)}},Q()?C.deleteItems.deletePermanently:C.deleteItems.summary.deleteXPermanently.replace("${subset}",ca.length+ra.length).replace("${total}",aa.length)))},Z=function(){var ia=k.getString(C.deleteItems.areYouSure,ca.length);return(0,d.h)(d.Fragment,null,"UNPROTECTED"!==la&&(0,d.h)("div",null,(0,d.h)("p",{class:"trailer-0"},C.deleteItems.cantDelete),(0,d.h)("ul",{class:"list-plain leader-half overflow-visible"},
da.map(function(X){var ha,V,ea=C.common.errors[null===(ha=X.error)||void 0===ha?void 0:ha.messageCode]||(null===(V=X.error)||void 0===V?void 0:V.message)||"";ha=d.h;V={key:X.id,class:"padding-leader-quarter flex flex-align-center"};X=ea?(0,d.h)(d.Fragment,null,na(X),(0,d.h)("arcgis-information",{label:ea,overlayPositioning:"fixed",style:{display:"flex"}},ea)):na(X);return ha.call(d,"li",V,X)}))),"PROTECTED_UNPROTECTED"===la&&(0,d.h)("p",{class:"leader-1 trailer-0"},C.deleteItems.proceed),"UNPROTECTED"===
la&&(0,d.h)("span",null,ia))},na=function(ia){return(0,d.h)("a",{class:"flex",href:"".concat(c.default.baseUrl,"item.html?id\x3d").concat(ia.id,"#settings"),target:"_blank",rel:"noreferrer"},(0,d.h)("img",{src:c.default.baseUrl+ia.svgIconUrl16,width:"16",height:"16",alt:ia.type,class:"icon-inline icon-inline--on-left margin-right-1"}),ia.title)};return(0,d.h)("calcite-modal",{open:E,kind:"danger",width:"s",outsideCloseDisabled:!!B,oncalciteModalClose:function(){F()}},(0,d.h)("h3",{slot:"header",class:"font-size-2 trailer-0"},
w?"":A?C.recycle.deleteFolder:"PERMANENT_DELETE"===ta?C.recycle.permanentlyDelete:1===aa.length?C.recycle.deleteItem:C.recycle.deleteItems),(0,d.h)("div",{slot:"content",class:x&&"summarized-items__modal"},H&&(0,d.h)("calcite-scrim",{loading:!0}),x?D?z():I():Z()),(0,d.h)("calcite-button",{slot:"secondary",width:"full",appearance:"outline",onClick:function(){return f.__awaiter(l,void 0,void 0,function(){return f.__generator(this,function(ia){switch(ia.label){case 0:return[4,(0,u.timeout)(50)];case 1:return ia.sent(),
K(!1),[2]}})})}},C.common.cancel),"PROTECTED"!==la&&(0,d.h)("calcite-button",{disabled:H,slot:"primary",width:"full",kind:"danger",appearance:"solid",onClick:function(){return f.__awaiter(l,void 0,void 0,function(){return f.__generator(this,function(ia){L(!0);P?G([],fa):G(ca,M?ra:[]);return[2]})})}},"DELETE"===ta?C.common.deleteLabel:C.common.permanentlyDeleteLabel),P&&(0,d.h)("calcite-button",{slot:"back",kind:"neutral",appearance:"outline-fill",onClick:function(){R(!1)}},C.common.back))}})},"arcgisonline/pages/components/SummarizedItems":function(){define("require exports tslib arcgisonline/esriGeowConfig dojo/i18n!../../nls/arcgisonline preact preact/hooks".split(" "),
function(S,J,f,c,h,d,b){Object.defineProperty(J,"__esModule",{value:!0});J.SummarizedItems=void 0;c=f.__importDefault(c);h=f.__importDefault(h);var a=(0,d.createContext)(!1);J.SummarizedItems=function(u){var g=u.id,m=u.icon,v=u.title,p=u.description,l=u.htmlDescription,n=u.itemSummary,k=u.toggle,r=u.disableLinks,w=n.reduce(function(A,y){return A+y.itemGroup.length},0),x=n.find(function(A){var y;return null===(y=A.itemGroup)||void 0===y?void 0:y[0]});u=null===x||void 0===x?void 0:x.itemGroup[0];var D=
1===w&&x.offendingItems;x=h.default;var G=function(A){if(r)A=(0,d.h)("span",{class:"margin-left-half"},A.svgIconUrl16&&(0,d.h)("img",{src:c.default.baseUrl+A.svgIconUrl16,width:"16",height:"16",alt:A.type,class:"icon-inline icon-inline--on-left"}),A.title);else{var y,z=null!==(y=A.id)&&void 0!==y?y:A.itemId;A=(0,d.h)("a",{href:"".concat(c.default.baseUrl,"item.html?id\x3d").concat(z,"#settings"),target:"_blank",rel:"noreferrer",class:"margin-left-half"},A.svgIconUrl16&&(0,d.h)("img",{src:c.default.baseUrl+
A.svgIconUrl16,width:"16",height:"16",alt:A.type,class:"icon-inline icon-inline--on-left"}),A.title)}return A},F=function(A){return(0,d.h)(d.Fragment,null,(0,d.h)("calcite-link",{id:g,class:"padding-left-half"},D?D.length:w),(0,d.h)(e,{reference:g,label:v,itemSummaryGroups:A}))};return(0,d.h)(a.Provider,{value:r},(0,d.h)("div",{class:"summarized-items flex"},m&&(0,d.h)("calcite-icon",{icon:m,scale:"l",class:"summarized-items__icon padding-right-half ".concat(k&&!k.selected?"summarized-items--disabled":
"")}),(0,d.h)("div",null,(0,d.h)("div",{class:"".concat(k&&!k.selected?"summarized-items--disabled":"")},(0,d.h)("div",null,v&&(0,d.h)("span",{class:"avenir-medium"},v),1===w?G(u):F(n)),(0,d.h)("div",null,p&&(0,d.h)("span",null,p),D&&(1===D.length?G(D[0]):F([{itemGroup:D}]))),l&&(0,d.h)("div",{dangerouslySetInnerHTML:{__html:l}})),!!k&&(0,d.h)("div",{class:"summarized-items__toggle leader-half"},(0,d.h)("calcite-button",{appearance:"outline",scale:"s",onClick:k.onToggle},x.deleteItems.summary[k.selected?
"deselect":"select"]),(0,d.h)("br",null)))))};var e=function(u){return(0,d.h)("calcite-popover",{label:u.label,referenceElement:u.reference,placement:"bottom",overlayPositioning:"fixed",autoClose:!0},u.itemSummaryGroups.map(function(g){if(!(0>=g.itemGroup.length))return g.groupHeading?(0,d.h)(q,{group:g}):(0,d.h)(t,{items:g.itemGroup})}))},q=function(u){u=u.group;return(0,d.h)("calcite-list-item-group",{heading:u.groupHeading},(0,d.h)(t,{items:u.itemGroup}))},t=function(u){var g=(0,b.useContext)(a);
return(0,d.h)("calcite-list",{class:"summarized-items__popover"},u.items.map(function(m){var v,p=null!==(v=m.id)&&void 0!==v?v:m.itemId;return(0,d.h)("calcite-list-item",{label:m.title,value:m.title,key:p,oncalciteListItemSelect:function(){!g&&window.open("".concat(c.default.baseUrl,"item.html?id\x3d").concat(p),"_blank")}},m.svgIconUrl16&&(0,d.h)("img",{slot:"content-start",src:c.default.baseUrl+m.svgIconUrl16,width:"16",height:"16",alt:m.type,class:"summarized-items__popover-item"}))}))}})},"arcgisonline/pages/dijit/ItemShareSummary":function(){define("require exports tslib ../../tsutils/declareDecorator dojo/on dojo/dom-construct dijit/_TemplatedMixin dijit/_WidgetBase ../utils/icons ../utils/dom ../utils/item dojo/text!./ItemShareSummary/ItemShareSummary.html dojo/i18n!../../nls/arcgisonline ../item/_Actions".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);return function(){function v(p,l){this.templateString=u.default;this.i18n=g.default;this.icons=e.default;this.showShareGroups=this.canShare=this.right=!1;this.responsive=!0;this.totalGroups=0;this.responsiveClass=
this.directionClass=""}v.prototype.postMixInProperties=function(){this.inherited(arguments);var p={private:e.default.user["16"],shared:e.default.user["16"],org:e.default.organization["16"],public:e.default.globe["16"]},l={private:g.default.itemSharing.owner,shared:g.default.itemSharing.owner,org:g.default.itemSharing.org,public:g.default.itemSharing.public};this.levelIcon=this.item.access&&p[this.item.access]||"";this.levelTooltip="".concat(g.default.itemSharing.shareLevel," ").concat(l[this.item.access]);
this.right&&(this.directionClass="share-summary--right");this.responsive&&(this.responsiveClass="share-summary--responsive");this.uid="".concat(this.item.id,"-share-summary")};v.prototype.postCreate=function(){var p,l;this.inherited(arguments);var n=!this.showShareGroups&&"shared"===this.item.access,k=this.showShareGroups&&0<(null===(p=this.item.groupData)||void 0===p?void 0:p.length);p=this.domNode.querySelector(".js-share-button");var r=this.item.title?g.default.itemSharing.updateSharingTitle.replace("${title}",
this.item.title):g.default.itemSharing.updateSharing,w=g.default.itemSharing.updateSharing,x=this.item.title?g.default.itemSharing.shareLevelTitle.replace("${title}",this.item.title):g.default.itemSharing.shareLevel,D=g.default.itemSharing.ariaLabels.privateGroups;"shared"!==this.item.access&&(D=k?"Groups":"",D=g.default.itemSharing.ariaLabels["".concat(this.item.access).concat(D)]);this.allowShare&&(this.item.canShare||t.default.canShareItem(this.item,this.portalUser))?(this.own((0,h.default)(p,
"click",this.handleClick.bind(this))),p.classList.add("share-summary__button--editable")):(w=d.default.create("span"),d.default.place(w,p,"before"),w.innerHTML=p.innerHTML,p.parentNode.removeChild(p),p=w,q.default.addClasses(p,["share-summary__button","flex","flex-center","flex-0"]),p.querySelector(".js-icon").tabIndex=0,w=r="");x="".concat(x," ").concat(D," ").concat(r);w="".concat(w).concat(w?", ":"").concat(g.default.itemSharing.shareLevel," ").concat(D);D=this.domNode.querySelector(".js-share-summary-tooltip");
p.setAttribute("aria-label",x);p.setAttribute("id",this.uid);D.querySelector(".js-tooltip-content").innerHTML=w;D.setAttribute("label",x);k&&(this.totalGroups=this.item.sharedGroups||0,w=null===(l=this.item.groupData)||void 0===l?void 0:l.map(function(G){return{id:G.id||G.groupId,title:G.title||G.groupTitle,thumbnail:G.thumbnail||G.groupThumbnail}}),0<(null===w||void 0===w?void 0:w.length)&&q.default.createElement("arcgis-group-thumbnail-stack",{groups:w,portal:this.portal,maxGroups:3,scale:"s"},
p));n&&this.domNode.classList.add("share-summary--show-unknown-group");k&&this.domNode.classList.add("share-summary--show-unknown-group-responsive");n||k||(this.domNode.querySelector(".js-sharing-plus-icon").classList.add("hide"),this.domNode.classList.add("share-summary--no-groups"))};v.prototype.handleClick=function(p){var l=this,n,k;p.preventDefault();p.stopPropagation();var r=this.item,w=this.telemetry,x=r.portal,D=this.portalUser;if(null===(n=window.location.pathname)||void 0===n?0:n.includes("content.html"))null===
(k=this.telemetry)||void 0===k?void 0:k.logEvent({eventType:"other",pageName:"content",pageUrl:window.location.href,path:window.location.pathname,category:"item action",action:"share"});this.item.isOwner?m.default.share({evt:p,item:r,user:D,portal:x,telemetry:w}):this.item.getOwnerProfile(!0,!0).then(function(G){l.item.itemOwner=G;m.default.share({evt:p,item:r,user:D,portal:x,telemetry:w})})};return v=f.__decorate([(0,c.default)(a.default,b.default)],v)}()})},"arcgisonline/pages/organization/doubleAssignedAPI":function(){define(["require",
"exports","tslib","arcgisonline/sharing/util","arcgisonline/esriGeowConfig"],function(S,J,f,c,h){function d(a,e){return f.__awaiter(this,void 0,void 0,function(){var q,t;return f.__generator(this,function(u){switch(u.label){case 0:return[4,b({q:"(userlicensetype:".concat(a.userTypes.map(function(g){return g.id}).join(" OR userlicensetype:"),")"),directapp:a.itemId,entitlement:a.key,sortField:"fullName",sortOrder:"asc",num:20,start:e})];case 1:return q=u.sent(),null===(t=null===q||void 0===q?void 0:
q.results)||void 0===t?void 0:t.forEach(function(g){g.doubleAssignedLicenses=g.doubleAssignedLicenses||[];g.doubleAssignedLicenses.push({entitlement:a.key,name:a.name})}),[2,q]}})})}function b(a){return f.__awaiter(this,void 0,void 0,function(){var e;return f.__generator(this,function(q){switch(q.label){case 0:return[4,c.default.request({url:"".concat(h.default.restBaseUrl,"portals/self/users/search"),content:a})];case 1:return e=q.sent(),[2,e]}})})}Object.defineProperty(J,"__esModule",{value:!0});
J.searchUsers=J.getDoubleAssignUsers=J.getDoubleAssignUsersForLicense=void 0;c=f.__importDefault(c);h=f.__importDefault(h);J.getDoubleAssignUsersForLicense=d;J.getDoubleAssignUsers=function(a){return f.__awaiter(this,void 0,void 0,function(){var e,q;return f.__generator(this,function(t){switch(t.label){case 0:return a?[4,Promise.all(Object.keys(a).map(function(u){return d(a[u],1)}))]:[2,{}];case 1:return e=t.sent(),q={},Object.keys(a).forEach(function(u,g){g=e[g];null!==g&&void 0!==g&&g.total&&(q[u]=
f.__assign(f.__assign({},a[u]),{response:g}))}),[2,q]}})})};J.searchUsers=b})},"arcgisonline/pages/organization/widgets/_OverviewCard":function(){define("require exports tslib ../../../tsutils/declareDecorator dijit/_WidgetBase dijit/_TemplatedMixin dojo/dom-class dojo/on dojo/i18n!../../../nls/arcgisonline dojo/text!./templates/_OverviewCard.html esri/Evented".split(" "),function(S,J,f,c,h,d,b,a,e,q,t){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=
f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);return function(){function u(g,m){this.templateString=q.default;this.cardTitleLinkHTML=this.cardTitleLinkLabel=this.cardTitleLink=this.cardTitle=this.cardClass="";this.onCardTitleLinkClick=null;this.loadingText=e.default.myOrganization.creditsCard.loading;g.containerClass||(g.containerClass="")}u.prototype.postCreate=function(){this.inherited(arguments);0<this.cardTitle.length&&b.default.remove(this._cardTitle,
"hide");0<this.cardTitleLinkLabel.length&&b.default.remove(this._cardTitleLink,"hide");0<this.cardTitleLinkHTML.length&&(this._cardTitleLink.innerHTML=this.cardTitleLinkHTML,b.default.remove(this._cardTitleLink,"hide"));this.onCardTitleLinkClick&&(0,a.default)(this._cardTitleLink,"click",this.onCardTitleLinkClick)};u.prototype.showContent=function(){b.default.add(this._loader,"hide");b.default.remove(this.containerNode,"hide")};u.prototype.showLoader=function(){b.default.remove(this._loader,"hide");
b.default.add(this.containerNode,"hide")};u.prototype.hide=function(){b.default.add(this._card,"hide")};u.prototype.show=function(){b.default.remove(this._card,"hide")};u.prototype.hideLink=function(){b.default.add(this._cardTitleLink,"hide")};u.prototype.switchCardClass=function(g){b.default.remove(this._card,this.cardClass);b.default.add(this._card,g);this.cardClass=g};u.prototype.setTitle=function(g){this.cardTitle=g;this._cardTitleNode.innerHTML=g};return u=f.__decorate([(0,c.default)(h.default,
d.default,t.default)],u)}()})},"arcgisonline/pages/organization/widgets/LicenseCardItem":function(){define("require exports tslib dojo/text!./templates/_licenseCardItem.html dojo/i18n!../../../nls/arcgisonline dojo/topic dijit/_TemplatedMixin dijit/_WidgetBase ../../../tsutils/declareDecorator ./LicensesAvailable ../../dijit/InviteMembers/AppIcon ../../utils/dom ../../utils/icons ../../utils/organization ./ExpirationBadge".split(" "),function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v){c=f.__importDefault(c);
h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);return function(){function p(l,n){this.templateString=c.default;this.i18n=h.default}p.prototype.postCreate=function(){this.inherited(arguments);this._render();this._positionExpirationBadge();this.own(d.default.subscribe("window/resize",this._positionExpirationBadge.bind(this)))};
p.prototype._render=function(){this._icon=new t.default({app:this.entitlement,portal:this.portal},this.domNode.querySelector(".js-icon"));this._mobileIcon=new t.default({app:this.entitlement,portal:this.portal},this.domNode.querySelector(".js-mobile-icon"));this._licensesAvailable=new q.default({used:this.entitlement.used,total:this.entitlement.total,cssClasses:"font-size--1 flex-wrap"},this.domNode.querySelector(".js-licenses-available"));if(-1!==this.entitlement.expiration&&new Date(this.entitlement.expiration)<=
new Date||0===this.entitlement.total&&0<this.entitlement.used){this._licensesAvailable.warn();var l=this._expiration.innerHTML=this.i18n.myOrganization.licensesTab[this.entitlement.trial?"trialsExpired":"expired"];this.portal.isPortal?this._portalExpirationBadge=new v.default({expirationText:l,portal:this.portal},this._portalExpiration):(this._expiration.innerHTML=g.default.inline["exclamation-mark-triangle"]["16"]+l,u.default.showNode(this._expiration))}};p.prototype._positionExpirationBadge=function(){m.default.isMobile()?
this._titleContainer.appendChild(this._expirationContainer):this._availableWrapper.appendChild(this._expirationContainer)};return p=f.__decorate([(0,e.default)(a.default,b.default)],p)}()})},"arcgisonline/pages/organization/widgets/LicensesAvailable":function(){define("require exports tslib dojo/text!./templates/_licensesAvailable.html dojo/i18n!../../../nls/arcgisonline dijit/_TemplatedMixin dijit/_WidgetBase ../../utils/culture ../../utils/dom ../../utils/icons ./ProgressBar ../../../tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);return function(){function g(m,v){this.templateString=c.default;this.i18n=h.default;this.icons=q.default;this.totalTextCss=this.assignedTextCss="";this.progressBarCss="licenses-card__progress-bar-container margin-left-half margin-right-half";this.cssClasses="";
this.warnPercent=-1;this.isStatus=!1}g.prototype.postCreate=function(){this.inherited(arguments);this.render();var m=this.domNode.querySelector(".progress-bar");m.setAttribute("aria-valuemin","0");m.setAttribute("aria-valuemax","".concat(this.total));this.isStatus&&(this._assignedText.setAttribute("role","status"),this._totalText.setAttribute("role","status"))};g.prototype.update=function(m,v){this.used=m;this.total=v;this.render()};g.prototype.warn=function(){this._assignedText.classList.remove("text-".concat(this._availableProgressBar.progressCss.color));
this._availableProgressBar.warn();this._assignedText.classList.add("text-".concat(this._availableProgressBar.progressCss.color));e.default.showNode(this._highContrastWarning)};g.prototype.render=function(){this._assignedText.textContent=a.default.getString(this.i18n.myOrganization.licensesTab.numberAssigned,this.used);if(this._availableProgressBar)this._availableProgressBar.update(this.used,this.total),this._mobileProgressBar.update(this.used,this.total);else{var m={used:this.used,total:this.total,
cssClasses:this.progressBarCss,warnPercent:this.warnPercent};this._availableProgressBar=new t.default(m,this.domNode.querySelector(".js-progress-bar"));this._availableProgressBar.domNode.classList.add("hide-on-mobile");this._mobileProgressBar=new t.default(m);this._mobileProgressContainer.appendChild(this._mobileProgressBar.domNode)}this._assignedText.classList.add("text-".concat(this._availableProgressBar.progressCss.color));m=this.domNode.querySelector(".progress-bar");m.setAttribute("aria-label",
this.i18n.myOrganization.licensesTab.assignedLicenses.replace("${used}",this.used));m.setAttribute("aria-valuenow","".concat(this.used));m=a.default.getString(this.i18n.myOrganization.licensesTab.numberTotal,this.total);var v=a.default.getString(this.i18n.myOrganization.licensesTab.numberAvailable,this.total-this.used);this._totalText.innerHTML="".concat(v,' \x3cspan class\x3d"margin-left-half margin-right-half licenses-available__divider"\x3e|\x3c/span\x3e ').concat(m)};return g=f.__decorate([(0,u.default)(b.default,
d.default)],g)}()})},"arcgisonline/pages/organization/widgets/ProgressBar":function(){define("require exports tslib dojo/text!./templates/_progressBar.html dojo/on dijit/_TemplatedMixin dijit/_WidgetBase arcgisonline/pages/utils/dom ../../../tsutils/declareDecorator ./_ProgressMixin".split(" "),function(S,J,f,c,h,d,b,a,e,q){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);return function(){function t(u,
g){this.templateString=c.default;this._classPrefix="progress-bar-fill"}t.prototype.postCreate=function(){this.inherited(arguments);this._addCssClasses();document.body.appendChild(this.hoverLabel);this.addEventListeners()};t.prototype.destroy=function(){document.body.removeChild(this.hoverLabel);this.inherited(arguments)};t.prototype.update=function(u,g){var m=this;this.used=u;this.total=g;this._cssClasses.forEach(function(v){m._bar.classList.remove(v)});this._addCssClasses()};t.prototype.warn=function(){this._bar.classList.remove("".concat(this._classPrefix,
"--").concat(this._green));this._bar.classList.contains("".concat(this._classPrefix,"--").concat(this._red))||this._bar.classList.add("".concat(this._classPrefix,"--").concat(this._red));this.progressCss.color=this._red};t.prototype._addCssClasses=function(){var u=this,g=this.getProgressCss();this._cssClasses=["".concat(this._classPrefix,"--").concat(this.colorOverride||g.color)];this.noRounding?this._bar.style.width="".concat(g.percent,"%"):this._cssClasses.push("".concat(this._classPrefix,"-").concat(g.percent));
this._cssClasses.forEach(function(m){u._bar.classList.add(m)})};t.prototype.addEventListeners=function(){this.own((0,h.default)(this._bar,"mouseover",this.handleMouseOver.bind(this)),(0,h.default)(this._bar,"mouseout",this.handleMouseOut.bind(this)))};t.prototype.handleMouseOver=function(u){if(this.hoverLabelFunc){var g=this._bar.getBoundingClientRect();this.hoverLabel.style.top="".concat(g.top+g.height+10,"px");this.hoverLabel.style.left="".concat(u.clientX,"px");this.hoverLabel.innerHTML=this.hoverLabelFunc();
a.default.showNode(this.hoverLabel)}};t.prototype.handleMouseOut=function(){a.default.hideNode(this.hoverLabel)};return t=f.__decorate([(0,e.default)(b.default,d.default,q.default)],t)}()})},"arcgisonline/pages/organization/widgets/ExpirationBadge":function(){define(["require","exports","tslib","./ExpirationBadgeBase","../../../tsutils/declareDecorator"],function(S,J,f,c,h){c=f.__importDefault(c);h=f.__importDefault(h);return function(){function d(b,a){}d.prototype._render=function(){this._expiresBadge.innerHTML=
this._warningIcon+this.expirationText;this._expiresBadge.classList.add(this.DANGER_CLASS);this._initTooltip()};return d=f.__decorate([(0,h.default)(c.default)],d)}()})},"arcgisonline/pages/organization/widgets/ExpirationBadgeBase":function(){define("require exports tslib dojo/on dojo/text!./templates/ExpirationBadge.html dojo/i18n!../../../nls/arcgisonline dijit/_TemplatedMixin dijit/_WidgetBase ./ExpirationTooltip ../../utils/icons ../../../tsutils/declareDecorator".split(" "),function(S,J,f,c,h,
d,b,a,e,q,t){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);return function(){function u(){this.templateString=h.default;this.i18n=d.default;this.DANGER_CLASS="license-expiration-badge--danger";this._warningIcon=q.default.inline["exclamation-mark-triangle"]["16"]}u.prototype.postCreate=function(){this.inherited(arguments);this._render();this._addEventListeners()};
u.prototype._render=function(){};u.prototype._addEventListeners=function(){var g=this;this._expiresBadge.addEventListener("click",function(m){m.stopPropagation();g._expirationTooltip.open(g._expiresBadge)})};u.prototype._initTooltip=function(){var g=this;this._expirationTooltip=new e.default({portal:this.portal,isTemporary:this.isTemporary},this.domNode.querySelector(".js-expiration-tooltip"));this.own((0,c.default)(this._expirationTooltip,"close",function(){g._expiresBadge.focus()}))};return u=f.__decorate([(0,t.default)(a.default,
b.default)],u)}()})},"arcgisonline/pages/organization/widgets/ExpirationTooltip":function(){define("require exports tslib dojo/on dojo/topic dojo/string dojo/Evented dojo/text!./templates/ExpirationTooltip.html dojo/i18n!../../../nls/arcgisonline dijit/TooltipDialog dijit/popup dijit/_TemplatedMixin dijit/_WidgetBase dijit/a11yclick ../../utils/icons ../../utils/keys ../../../tsutils/declareDecorator".split(" "),function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l){c=f.__importDefault(c);h=f.__importDefault(h);
d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);return function(){function n(k,r){this.templateString=a.default;this.i18n=e.default;this.icons=v.default;this.isTemporary=!1}n.prototype.postCreate=function(){this.inherited(arguments);this._render();this._addEventListeners()};
n.prototype.destroy=function(){this.inherited(arguments);this._dialog&&(this._closeDialog(),this._dialog.destroy(),this._dialog=void 0)};n.prototype._render=function(){var k;if(this.portal.isPortal){var r=(null===(k=this.portal.helpMap)||void 0===k?void 0:k.m)||{};k='\x3ca href\x3d"'.concat(this.portal.helpBase+(r["120001586"]||""),'" class\x3d"js-help-link" target\x3d"_blank"\x3e');k=d.default.substitute(this.i18n.myOrganization.licensesTab.portalUserTypeRenew,{linkStart:k,linkEnd:"\x3c/a\x3e"});
this._content.innerHTML=this.isTemporary?this.i18n.myOrganization.licensesTab.temporaryDesc:k;var w=this._content.querySelector(".js-help-link");w&&this.own((0,c.default)(w,"keyup",function(x){x.keyCode===p.default.ENTER&&w.click()}))}else k='\x3ca href\x3d"https://www.esri.com/en-us/contact#c\x3dus\x26t\x3d3" target\x3d"_blank"\x3e',this._content.innerHTML='\x3cp class\x3d"trailer-half"\x3e'.concat(this.i18n.myOrganization.licensesTab.licenseExpired,'\x3c/p\x3e\x3cp class\x3d"trailer-0"\x3e').concat(d.default.substitute(this.i18n.subscriptionStatusDlg.contactCustomerService,
{linkStart:k,linkEnd:"\x3c/a\x3e"}),"\x3c/p\x3e");this._dialog=new q.default({class:"popover",content:this.domNode})};n.prototype._addEventListeners=function(){this.own((0,m.default)(this._closeIcon,this._closeDialog.bind(this)),(0,m.default)(this.domNode,function(k){k.stopPropagation()}),(0,c.default)(document.body,"click",this._closeDialog.bind(this)),h.default.subscribe("expires-tooltip/close",this._closeDialog.bind(this,!0)))};n.prototype._closeDialog=function(k){t.default.close(this._dialog);
k||this.emit("close")};n.prototype.open=function(k){t.default.open({popup:this._dialog,orient:["below-alt","above-alt"],around:k});this._dialog.focus()};return n=f.__decorate([(0,l.default)(g.default,u.default,b.default)],n)}()})},"arcgisonline/pages/organization/widgets/LicenseExpirationBadge":function(){define("require exports tslib dojo/string moment/moment ./ExpirationBadgeBase ../../utils/formatters ../../utils/dom ../../utils/date ../../../tsutils/declareDecorator".split(" "),function(S,J,f,
c,h,d,b,a,e,q){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);return function(){function t(u,g){this.showTime=!1}t.prototype._render=function(){if(this.isTemporary)this._expiresBadge.classList.add(this.DANGER_CLASS),this._expiresBadge.innerHTML=this._warningIcon+this.i18n.myOrganization.licensesTab.temporary,this._initTooltip();else if(this.expiration&&0<this.expiration||0===this.total&&
0<this.used){var u=(0,h.default)((0,h.default)(this.expiration)).diff(new Date,"days");this.portal.isPortal?this._initTooltip():this._expiresBadge.classList.add("license-expiration-badge--inactive");this.expiration&&0<this.expiration&&0<this.total?30>=u?(this._expiresBadge.classList.add(this.DANGER_CLASS),0<=u?this._expiresBadge.innerHTML=this._warningIcon+c.default.substitute(this.i18n.myOrganization.licensesTab.expiresDate,{date:this.showTime?e.default.format(new Date(this.expiration),"day-short-month-year-short-time"):
b.default.fullDate(this.expiration)}):(this._expiresBadge.innerHTML=this._warningIcon+this.i18n.myOrganization.licensesTab.expired,this.portal.isPortal||(this._initTooltip(),this._expiresBadge.classList.remove("license-expiration-badge--inactive")))):this._expiresBadge.textContent=328821408E5<this.expiration?this.i18n.myOrganization.licensesTab.expiresNever:c.default.substitute(this.i18n.myOrganization.licensesTab.expiresDate,{date:this.showTime?e.default.format(new Date(this.expiration),"day-short-month-year-short-time"):
b.default.fullDate(this.expiration)}):(this._expiresBadge.classList.add(this.DANGER_CLASS),this._expiresBadge.innerHTML=this._warningIcon+this.i18n.myOrganization.licensesTab.expired);a.default.showNode(this._expiresBadge)}else a.default.hideNode(this._expiresBadge)};return t=f.__decorate([(0,q.default)(d.default)],t)}()})},"arcgisonline/pages/organization/widgets/DataStoreOverlay":function(){define("require exports tslib dojo/text!./templates/DataStoreOverlay.html dojo/i18n!../../../nls/arcgisonline dojo/string dojo/promise/all dojo/_base/kernel dojo/on dojo/topic dojo/Deferred dojox/charting/Chart dojox/charting/plot2d/Areas dojox/charting/plot2d/Lines dojox/fx/easing ../../dijit/Overlay ./ProgressBar ../../utils/icons ../../utils/date ../../utils/dom ../../utils/number ../../utils/organization ../../utils/culture ../../dijit/Dropdown/Dropdown ../../pageUtil arcgisonline/sharing/util arcgisonline/tsutils/declareDecorator dojox/charting/axis2d/Default".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);
D=f.__importDefault(D);G=f.__importDefault(G);F=f.__importDefault(F);A=f.__importDefault(A);y=f.__importDefault(y);var z;(function(H){H.CPU="db_avg_cpu";H.AllocatedStorage="db_allocated_storage_mb";H.UsedStorage="db_featurestorage_mb";H.Workers="db_workers_perecent"})(z||(z={}));var B;(function(H){H.LastHour="lastHour";H.LastDay="lastDay";H.LastWeek="lastWeek"})(B||(B={}));var C;(function(H){H.Standard="S";H.Premium1="M1";H.Premium2="M2";H.Premium3="M3";H.Premium4="M4"})(C||(C={}));return function(){function H(E,
K){this.i18n=h.default;this.texts=f.__assign(f.__assign({},h.default.myOrganization),h.default.myOrganization.overviewTab.dataStoreOverlay);this.title=this.texts.featureDS;this.constrain=!0;this.maxWidth=800;this.closeOnScrimClick=!1;this.computeNum=1;this.computeUnit="d";this.binAggregation="avg";this.helpLink="";this.portal=E.portal;this.helpLink="https://www.esri.com/en-us/arcgis/products/premium-feature-data-store/buy";K=this.getTierInfo();E=K.tierName;K=K.tierDesc;var I=d.default.substitute(this.texts.viewDetails,
{linkStart:'\x3cbutton class\x3d"js-create-report-btn btn-link"\x3e',linkEnd:"\x3c/button\x3e"});this.overlayContents=d.default.substitute(c.default,{i18n:this.i18n,texts:this.texts,tierName:E,tierDesc:K,viewDetails:I});F.default.getQueryParams()}H.prototype.open=function(){this.inherited(arguments);this.chartText=this.domNode.querySelector(".js-chart-text");this.showLoader();this.unitDropdown=new G.default({options:[{text:this.texts.lastHour,value:B.LastHour},{text:this.texts.lastDay,value:B.LastDay},
{text:this.texts.lastWeek,value:B.LastWeek}],buttonClasses:"data-store-overlay__dropdown-toggle flex flex-align-center"},this.domNode.querySelector(".js-unit-dropdown"));this.addListeners();r.default.hideNode(this._primaryBtn);this._cancelBtn.textContent=this.i18n.common.close;this.getData()};H.prototype.close=function(){this.inherited(arguments)};H.prototype.getTierInfo=function(){var E=this.portal.subscriptionInfo.dataStoreLevel||C.Standard;this.tier=E;var K=x.default.injectHelpLink(this.portal,
this.i18n.myOrganization.premiumDSDesc,"120001241");switch(E){case C.Premium1:E=this.i18n.myOrganization.featureDSM1;break;case C.Premium2:E=this.i18n.myOrganization.featureDSM2;break;case C.Premium3:E=this.i18n.myOrganization.featureDSM3;break;case C.Premium4:E=this.i18n.myOrganization.featureDSM4;break;default:E=this.i18n.myOrganization.standardFeatureDS,K=x.default.injectHelpLink(this.portal,this.i18n.myOrganization.standardFeatureDSDesc,"120001241")}return{tierName:E,tierDesc:K}};H.prototype.getData=
function(){var E=this;return(0,b.default)({compute:this.computeUtilization(),usedStorage:this.getDataStoreInfo(z.UsedStorage,"h",1)}).then(function(K){var I,L,M=E.tier===C.Premium4?4096E3:E.tier===C.Standard?512E3:1024E3;K=(null===(L=null===(I=K.usedStorage)||void 0===I?void 0:I[0])||void 0===L?void 0:L.value)||0;I=M-K;var N=E.MBtoGB(K);L=E.MBtoGB(I);I=E.MBtoGB(M);E.domNode.querySelector(".js-avail-text").textContent=d.default.substitute(E.texts.availableStorage,{availNum:N,totalNum:I});I=Math.round(K/
M*100);E.renderUsageText(I,L);L="gray";var P=E.domNode.querySelector(".js-warning-icon");75<=I&&95>I?(L="yellow",P.icon="exclamation-mark-triangle-f",P.classList.remove("data-store-storage--high-usage"),P.classList.add("data-store-storage--medium-usage"),r.default.showNode(P)):95<=I&&(L="red",P.icon="exclamation-mark-circle-f",P.classList.remove("data-store-storage--medium-usage"),P.classList.add("data-store-storage--high-usage"),r.default.hideNode(P));new l.default({used:K,total:M,warnPercent:80,
noRounding:!0,cssClasses:"data-store-overlay__progress-bar",colorOverride:L,hoverLabelFunc:function(){return d.default.substitute(E.texts.storageUsed,{num:N})}},E.domNode.querySelector(".js-progress-bar"));E.hideLoader();r.default.setVisibility(E.domNode.querySelector(".js-data-store-content"),!0)},function(){r.default.hideNode(E.domNode.querySelector(".js-storage-section"));r.default.hideNode(E.domNode.querySelector(".js-compute-section"));E.hideLoader();r.default.setVisibility(E.domNode.querySelector(".js-data-store-content"),
!0)})};H.prototype.createSampleChart=function(){for(var E=[],K=[],I=(new Date).setHours(0,0,0),L=(new Date).setHours(0,0,0),M=0;14>M;M++)E.push({ts:I,value:Math.floor(40*Math.random())}),I-=432E5;for(M=0;14>M;M++)K.push({ts:L,value:Math.floor(50*Math.random()+50)}),L-=432E5;this.computeUnit="d";this.computeNum=7;r.default.hideNode(this.domNode.querySelector(".js-dropdown-toggle"));this.chartText.innerHTML=d.default.substitute(this.texts.upgrade,{linkStart:'\x3ca href\x3d"'.concat(this.helpLink,'" target\x3d"_blank"\x3e'),
linkEnd:"\x3c/a\x3e"});r.default.showNodes([this.chartText,this.domNode.querySelector(".js-chart-mask")]);this.renderUnitLabel();this.renderChart({avg:E,max:K})};H.prototype.createSeries=function(E){return(null===E||void 0===E?void 0:E.map(function(K){return{x:K.ts,y:K.value}}))||[]};H.prototype.isSeriesDefined=function(E){return 0<E.length&&!E.some(function(K){return!K.x})};H.prototype.convertExponentialToDecimal=function(E){var K=E.toString();return-1!==K.indexOf("e")?(K=parseInt(K.split("-")[1],
10),E.toLocaleString(a.default.locale,{minimumFractionDigits:K})):E};H.prototype.MBtoGB=function(E){return w.default.format(E/1024,2)};H.prototype.getDataStoreInfo=function(E,K,I,L){var M;void 0===K&&(K="d");void 0===I&&(I=1);var N=new t.default,P={metric:E,ago:I,agoUnit:K};if(E===z.CPU||E===z.Workers)"d"===K?(P.binSize=1<I?30:5,P.binUnit="m",P.binAggregation=L||"avg"):"h"===K&&(P.binSize=1,P.binUnit="m",P.binAggregation=L||"avg");(E=null===(M=this.portal.helperServices.datastoreManagement)||void 0===
M?void 0:M.url)||N.resolve([{value:0}]);A.default.request({url:"".concat(E,"/").concat(this.portal.id,"/datastores/featureDataStore"),content:P}).then(function(R){N.resolve(R)},function(){N.resolve([{value:0}])});return N};H.prototype.addListeners=function(){var E=this;this.own(this.unitDropdown.on("change",function(K){K.value===B.LastHour?(E.computeNum=1,E.computeUnit="h"):K.value===B.LastDay?(E.computeNum=1,E.computeUnit="d"):K.value===B.LastWeek&&(E.computeNum=7,E.computeUnit="d");E.computeUtilization()}),
(0,e.default)(this.domNode.querySelector(".js-create-report-btn"),"click",function(){E.close();location.hash="#status";q.default.publish("create-report",{reportSubType:"content"})}))};H.prototype.computeUtilization=function(){var E=this,K,I=this.domNode.querySelector(".js-chart-loader");null===(K=this.computeChart)||void 0===K?void 0:K.destroy();r.default.activateNode(I);this.renderUnitLabel();return(0,b.default)({avg:this.getDataStoreInfo(z.CPU,this.computeUnit,this.computeNum),max:this.getDataStoreInfo(z.CPU,
this.computeUnit,this.computeNum,"max"),workersAvg:this.getDataStoreInfo(z.Workers,this.computeUnit,this.computeNum),workersMax:this.getDataStoreInfo(z.Workers,this.computeUnit,this.computeNum,"max")}).then(function(L){var M,N,P,R,Y=!(null===(M=null===L||void 0===L?void 0:L.avg)||void 0===M||!M.every(function(ja){return 0===ja.value}));M=!(null===(N=null===L||void 0===L?void 0:L.max)||void 0===N||!N.every(function(ja){return 0===ja.value}));N=!(null===(P=null===L||void 0===L?void 0:L.workersAvg)||
void 0===P||!P.every(function(ja){return 0===ja.value}));P=!(null===(R=null===L||void 0===L?void 0:L.workersMax)||void 0===R||!R.every(function(ja){return 0===ja.value}));if(R=Y&&M&&N&&P)E.chartText.textContent=E.texts.noData;r.default.showHide(E.chartText,R);r.default.addRemoveClassAll([E.domNode.querySelector(".js-chart-legend"),E.domNode.querySelector(".js-chart-wrapper")],"visibility-hidden",R);E.renderChart(L);r.default.deactivateNode(I)})};H.prototype.collateData=function(E,K){E&&K&&E.forEach(function(I){var L=
K.find(function(M){return M.ts===I.ts});L&&L.value>I.value&&(I.value=L.value)})};H.prototype.renderUnitLabel=function(){this.unitDropdown.updateToggleLabel((1<this.computeNum&&"d"===this.computeUnit?this.texts.lastWeek:"d"===this.computeUnit?this.texts.lastDay:this.texts.lastHour)+n.default["chevron-down"]["16"])};H.prototype.renderChart=function(E){var K=this;if(1<this.computeNum&&"d"===this.computeUnit){var I=864E5;var L="short-date-numeric"}else I="d"===this.computeUnit?36E5:3E5,L="short-time";
E&&(this.collateData(E.avg,E.workersAvg),this.collateData(E.max,E.workersMax));var M=this.createSeries(null===E||void 0===E?void 0:E.avg);E=this.createSeries(null===E||void 0===E?void 0:E.max);var N=this.isLeftToRight()?"ltr":"rtl";this.domNode.querySelector("#computeChart").style.direction=N;this.computeChart=new u.default("computeChart");this.computeChart.setDir(N).addPlot("default",{type:m.default,animate:{duration:300,easing:v.default.linear}}).addPlot("other",{type:g.default,animate:{duration:300,
easing:v.default.linear}}).addAxis("y",{vertical:!0,leftBottom:this.isLeftToRight(),fixLower:"major",fixUpper:"major",includeZero:!0,majorTick:{length:0,color:"#fff"},minorTicks:!1,font:"normal normal normal 10pt Tahoma",fontColor:"#6e6e6e",stroke:"#efefef",majorTickStep:10,min:0,max:100,title:this.texts.yLabel,titleFont:"normal normal normal 10pt Tahoma",titleFontColor:"#6e6e6e",labelFunc:function(P,R){P=-1<P.indexOf("e-")?K.convertExponentialToDecimal(R):P;return D.default.getPercentLabel(P)}}).addAxis("x",
{majorTick:{length:0,color:"#fff"},minorTicks:!1,fontColor:"#6e6e6e",stroke:"#efefef",majorTickStep:I,font:"normal normal normal 10pt Tahoma",labelFunc:function(P,R){return k.default.format(new Date(R),L)}});I=this.isSeriesDefined(M);N=this.isSeriesDefined(E);I&&this.computeChart.addSeries("Avg",M,{stroke:{color:"#0071AB",width:2},fill:"#B3D5E6"});r.default.showHide(this.domNode.querySelector(".js-avg-legend"),I);N&&this.computeChart.addSeries("Max",E,{plot:"other",stroke:"#5A9359",fill:"#DEE9DE"});
r.default.showHide(this.domNode.querySelector(".js-max-legend"),N);this.computeChart.render()};H.prototype.renderUsageText=function(E,K){var I=this,L="",M=this.texts.storageTexts;L=M.low;var N=M.medium,P=M.high;M=M.max;var R='\x3ccalcite-link href\x3d"'.concat(this.helpLink,'" target\x3d"_blank"\x3e');L=75>E?d.default.substitute(L,{availableNum:K,usedPercent:E,reportLinkStart:'\x3ccalcite-link class\x3d"js-create-report-btn"\x3e',reportLinkEnd:"\x3c/calcite-link\x3e"}):75<=E&&95>E?d.default.substitute(N,
{availableNum:K,usedPercent:E,reportLinkStart:'\x3ccalcite-link class\x3d"js-create-report-btn"\x3e',reportLinkEnd:"\x3c/calcite-link\x3e",upgradeLinkStart:R,upgradeLinkEnd:"\x3c/calcite-link\x3e"}):95<=E&&100>E?d.default.substitute(P,{availableNum:K,reportLinkStart:'\x3ccalcite-link class\x3d"js-create-report-btn"\x3e',reportLinkEnd:"\x3c/calcite-link\x3e",upgradeLinkStart:R,upgradeLinkEnd:"\x3c/calcite-link\x3e"}):d.default.substitute(M,{reportLinkStart:'\x3ccalcite-link class\x3d"js-create-report-btn"\x3e',
reportLinkEnd:"\x3c/calcite-link\x3e",upgradeLinkStart:R,upgradeLinkEnd:"\x3c/calcite-link\x3e"});K=this.domNode.querySelector(".js-usage-details");N=this.domNode.querySelector(".js-usage-notice");P=this.domNode.querySelector(".js-usage-notice-message");95>E?(K.innerHTML=L,r.default.showNode(K),r.default.hideNode(N),E=K.querySelector(".js-create-report-btn")):(P.innerHTML=L,r.default.hideNode(K),r.default.showNode(N),E=N.querySelector(".js-create-report-btn"));this.own((0,e.default)(E,"click",function(){I.close();
location.hash="#status";q.default.publish("create-report",{reportSubType:"content"})}))};return H=f.__decorate([(0,y.default)(p.default)],H)}()})},"dojox/charting/plot2d/Areas":function(){define(["dojo/_base/declare","./Default"],function(S,J){return S("dojox.charting.plot2d.Areas",J,{constructor:function(){this.opt.lines=!0;this.opt.areas=!0}})})},"dojox/charting/plot2d/Default":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/has ./CartesianBase ./_PlotEvents ./common dojox/lang/functional dojox/lang/utils dojox/gfx/fx".split(" "),
function(S,J,f,c,h,d,b,a,e,q){return J("dojox.charting.plot2d.Default",[h,d],{defaultParams:{lines:!0,areas:!1,markers:!1,tension:"",animate:!1,enableCache:!1,interpolate:!1},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:"",marker:"",markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:"",zeroLine:0},constructor:function(t,u){this.opt=S.clone(S.mixin(this.opt,this.defaultParams));e.updateWithObject(this.opt,
u);e.updateWithPattern(this.opt,u,this.optionalParams);this.animate=this.opt.animate},createPath:function(t,u,g){if(this.opt.enableCache&&0<t._pathFreePool.length){var m=t._pathFreePool.pop();m.setShape(g);u.add(m)}else m=u.createPath(g);this.opt.enableCache&&t._pathUsePool.push(m);return m},buildSegments:function(t,u){t=this.series[t];for(var g=u?Math.min(t.data.length,Math.ceil(this._hScaler.bounds.to)):t.data.length,m=null,v=[],p=u?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0;p<g;p++)if(!this.isNullValue(t.data[p]))m||
(m=[],v.push({index:p,rseg:m})),m.push(u&&t.data[p].hasOwnProperty("y")?t.data[p].y:t.data[p]);else if(!this.opt.interpolate||u)m=null;return v},render:function(t,u){if(this.zoom&&!this.isDataDirty())return this.performZoom(t,u);this.resetEvents();this.dirty=this.isDirty();if(this.dirty){f.forEach(this.series,b.purgeGroup);this._eventSeries={};this.cleanGroup();this.getGroup().setTransform(null);var g=this.getGroup();a.forEachRev(this.series,function(ja){ja.cleanGroup(g)})}for(var m=this.chart.theme,
v,p,l=this.events(),n=0;n<this.series.length;n++){var k=this.series[n];if(this.dirty||k.dirty)if(k.cleanGroup(),this.opt.enableCache&&(k._pathFreePool=(k._pathFreePool?k._pathFreePool:[]).concat(k._pathUsePool?k._pathUsePool:[]),k._pathUsePool=[]),k.data.length){var r=m.next(this.opt.areas?"area":"line",[this.opt,k],!0),w=this._hScaler.scaler.getTransformerFromModel(this._hScaler),x=this._vScaler.scaler.getTransformerFromModel(this._vScaler),D=this._eventSeries[k.name]=Array(k.data.length);g=k.group;
if(k.hidden){this.opt.lines&&(k.dyn.stroke=r.series.stroke);if(k.markers||void 0===k.markers&&this.opt.markers)k.dyn.markerFill=r.marker.fill,k.dyn.markerStroke=r.marker.stroke,k.dyn.marker=r.symbol;this.opt.areas&&(k.dyn.fill=r.series.fill)}else{for(var G=f.some(k.data,function(ja){return"number"==typeof ja||ja&&!ja.hasOwnProperty("x")}),F=this.buildSegments(n,G),A=0;A<F.length;A++){var y=F[A];var z=G?f.map(y.rseg,function(ja,aa){return{x:w(aa+y.index+1)+u.l,y:t.height-u.b-x(ja),data:ja}},this):
f.map(y.rseg,function(ja){return{x:w(ja.x)+u.l,y:t.height-u.b-x(ja.y),data:ja}},this);if(G&&this.opt.interpolate)for(;A<F.length;)A++,(y=F[A])&&(z=z.concat(f.map(y.rseg,function(ja,aa){return{x:w(aa+y.index+1)+u.l,y:t.height-u.b-x(ja),data:ja}},this)));var B=this.opt.tension?b.curve(z,this.opt.tension):"";if(this.opt.areas&&1<z.length){var C=this._plotFill(r.series.fill,t,u),H=S.clone(z),E=t.height-u.b;isNaN(this.opt.zeroLine)||(E=Math.max(u.t,Math.min(t.height-u.b-x(this.opt.zeroLine),E)));this.opt.tension?
k.dyn.fill=g.createPath(B+" L"+(H[H.length-1].x+","+E+" L"+H[0].x+","+E+" L"+H[0].x+","+H[0].y)).setFill(C).getFill():(H.push({x:z[z.length-1].x,y:E}),H.push({x:z[0].x,y:E}),H.push(z[0]),k.dyn.fill=g.createPolyline(H).setFill(C).getFill())}if(this.opt.lines||this.opt.markers)v=r.series.stroke,r.series.outline&&(p=k.dyn.outline=b.makeStroke(r.series.outline),p.width=2*p.width+(v&&v.width||0));this.opt.markers&&(k.dyn.marker=r.symbol);var K=null,I=null,L=null;if(v&&r.series.shadow&&1<z.length){var M=
r.series.shadow;C=f.map(z,function(ja){return{x:ja.x+M.dx,y:ja.y+M.dy}});this.opt.lines&&(k.dyn.shadow=this.opt.tension?g.createPath(b.curve(C,this.opt.tension)).setStroke(M).getStroke():g.createPolyline(C).setStroke(M).getStroke());this.opt.markers&&r.marker.shadow&&(M=r.marker.shadow,L=f.map(C,function(ja){return this.createPath(k,g,"M"+ja.x+" "+ja.y+" "+r.symbol).setStroke(M).setFill(M.color)},this))}if(this.opt.lines&&1<z.length){var N;p&&(k.dyn.outline=this.opt.tension?g.createPath(B).setStroke(p).getStroke():
g.createPolyline(z).setStroke(p).getStroke());k.dyn.stroke=this.opt.tension?(N=g.createPath(B)).setStroke(v).getStroke():(N=g.createPolyline(z)).setStroke(v).getStroke();N.setFilter&&r.series.filter&&N.setFilter(r.series.filter)}B=null;if(this.opt.markers){var P=r;K=Array(z.length);I=Array(z.length);p=null;P.marker.outline&&(p=b.makeStroke(P.marker.outline),p.width=2*p.width+(P.marker.stroke?P.marker.stroke.width:0));f.forEach(z,function(ja,aa){if(this.opt.styleFunc||"number"!=typeof ja.data){var da=
"number"!=typeof ja.data?[ja.data]:[];this.opt.styleFunc&&da.push(this.opt.styleFunc(ja.data));P=m.addMixin(r,"marker",da,!0)}else P=m.post(r,"marker");ja="M"+ja.x+" "+ja.y+" "+P.symbol;p&&(I[aa]=this.createPath(k,g,ja).setStroke(p));K[aa]=this.createPath(k,g,ja).setStroke(P.marker.stroke).setFill(P.marker.fill)},this);k.dyn.markerFill=P.marker.fill;k.dyn.markerStroke=P.marker.stroke;!B&&this.opt.labels&&(B=K[0].getBoundingBox());l?f.forEach(K,function(ja,aa){ja={element:"marker",index:aa+y.index,
run:k,shape:ja,outline:I[aa]||null,shadow:L&&L[aa]||null,cx:z[aa].x,cy:z[aa].y};G?(ja.x=aa+y.index+1,ja.y=k.data[aa+y.index]):(ja.x=y.rseg[aa].x,ja.y=k.data[aa+y.index].y);this._connectEvents(ja);D[aa+y.index]=ja},this):delete this._eventSeries[k.name]}if(this.opt.labels){var R=B?B.width:2,Y=B?B.height:2;f.forEach(z,function(ja,aa){if(this.opt.styleFunc||"number"!=typeof ja.data){var da="number"!=typeof ja.data?[ja.data]:[];this.opt.styleFunc&&da.push(this.opt.styleFunc(ja.data));P=m.addMixin(r,"marker",
da,!0)}else P=m.post(r,"marker");this.createLabel(g,y.rseg[aa],{x:ja.x-R/2,y:ja.y-Y/2,width:R,height:Y},P)},this)}}k.dirty=!1}}else k.dirty=!1,m.skip();else m.skip(),this._reconnectEvents(k.name)}c("dojo-bidi")&&this._checkOrientation(this.group,t,u);this.animate&&(v=this.getGroup(),q.animateTransform(S.delegate({shape:v,duration:1200,transform:[{name:"translate",start:[0,t.height-u.b],end:[0,0]},{name:"scale",start:[1,0],end:[1,1]},{name:"original"}]},this.animate)).play());this.dirty=!1;return this}})})},
"dojox/charting/plot2d/CartesianBase":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/connect dojo/has ./Base ../scaler/primitive dojox/gfx dojox/gfx/fx dojox/lang/utils".split(" "),function(S,J,f,c,h,d,b,a,e){var q=function(){return!1};return J("dojox.charting.plot2d.CartesianBase",h,{baseParams:{hAxis:"x",vAxis:"y",labels:!1,labelOffset:10,fixed:!0,precision:1,labelStyle:"inside",htmlLabels:!0,omitLabels:!0,labelFunc:null},constructor:function(t,u){this.axes=["hAxis","vAxis"];this.zoom=
null;this.zoomQueue=[];this.lastWindow={vscale:1,hscale:1,xoffset:0,yoffset:0};this.hAxis=u&&u.hAxis||"x";this.vAxis=u&&u.vAxis||"y";this.series=[];this.opt=S.clone(this.baseParams);e.updateWithObject(this.opt,u)},clear:function(){this.inherited(arguments);this._vAxis=this._hAxis=null;return this},cleanGroup:function(t,u){this.inherited(arguments);if(!u&&this.chart._nativeClip){var g=this.chart.offsets,m=this.chart.dim;this.group.setClip({x:g.l,y:g.t,width:Math.max(0,m.width-g.l-g.r),height:Math.max(0,
m.height-g.t-g.b)});this._clippedGroup||(this._clippedGroup=this.group.createGroup())}},purgeGroup:function(){this.inherited(arguments);this._clippedGroup=null},getGroup:function(){return this._clippedGroup||this.group},setAxis:function(t){t&&(this[t.vertical?"_vAxis":"_hAxis"]=t);return this},toPage:function(t){var u=this._hAxis,g=this._vAxis,m=u.getScaler(),v=g.getScaler(),p=m.scaler.getTransformerFromModel(m),l=v.scaler.getTransformerFromModel(v),n=this.chart.getCoords(),k=this.chart.offsets,r=
this.chart.dim;m=function(w){var x={};x.x=p(w[u.name])+n.x+k.l;x.y=n.y+r.height-k.b-l(w[g.name]);return x};return t?m(t):m},toData:function(t){var u=this._hAxis,g=this._vAxis,m=u.getScaler(),v=g.getScaler(),p=m.scaler.getTransformerFromPlot(m),l=v.scaler.getTransformerFromPlot(v),n=this.chart.getCoords(),k=this.chart.offsets,r=this.chart.dim;m=function(w){var x={};x[u.name]=p(w.x-n.x-k.l);x[g.name]=l(n.y+r.height-w.y-k.b);return x};return t?m(t):m},isDirty:function(){return this.dirty||this._hAxis&&
this._hAxis.dirty||this._vAxis&&this._vAxis.dirty},createLabel:function(t,u,g,m){if(this.opt.labels){var v=this.opt.labelFunc?this.opt.labelFunc.apply(this,[u,this.opt.fixed,this.opt.precision]):this._getLabel(isNaN(u.y)?u:u.y);if("inside"==this.opt.labelStyle){var p=b._base._getTextBox(v,{font:m.series.font});u=g.x+g.width/2;var l=g.y+g.height/2+p.h/4;if(p.w>g.width||p.h>g.height)return}else u=g.x+g.width/2,l=g.y-this.opt.labelOffset;this.renderLabel(t,u,l,v,m,"inside"==this.opt.labelStyle)}},performZoom:function(t,
u){var g=this._vAxis.scale||1,m=this._hAxis.scale||1;t=t.height-u.b;var v=this._hScaler.bounds;v=(v.from-v.lower)*v.scale;var p=this._vScaler.bounds;p=(p.from-p.lower)*p.scale;var l=g/this.lastWindow.vscale,n=m/this.lastWindow.hscale,k=(this.lastWindow.xoffset-v)/(1==this.lastWindow.hscale?m:this.lastWindow.hscale),r=(p-this.lastWindow.yoffset)/(1==this.lastWindow.vscale?g:this.lastWindow.vscale),w=this.getGroup();u=a.animateTransform(S.delegate({shape:w,duration:1200,transform:[{name:"translate",
start:[0,0],end:[u.l*(1-n),t*(1-l)]},{name:"scale",start:[1,1],end:[n,l]},{name:"original"},{name:"translate",start:[0,0],end:[k,r]}]},this.zoom));S.mixin(this.lastWindow,{vscale:g,hscale:m,xoffset:v,yoffset:p});this.zoomQueue.push(u);f.connect(u,"onEnd",this,function(){this.zoom=null;this.zoomQueue.shift();0<this.zoomQueue.length&&this.zoomQueue[0].play()});1==this.zoomQueue.length&&this.zoomQueue[0].play();return this},initializeScalers:function(t,u){this._hAxis?(this._hAxis.initialized()||this._hAxis.calculate(u.hmin,
u.hmax,t.width),this._hScaler=this._hAxis.getScaler()):this._hScaler=d.buildScaler(u.hmin,u.hmax,t.width);this._vAxis?(this._vAxis.initialized()||this._vAxis.calculate(u.vmin,u.vmax,t.height),this._vScaler=this._vAxis.getScaler()):this._vScaler=d.buildScaler(u.vmin,u.vmax,t.height);return this},isNullValue:function(t){if(null===t||"undefined"==typeof t)return!0;var u=this._hAxis?this._hAxis.isNullValue:q,g=this._vAxis?this._vAxis.isNullValue:q;return"number"==typeof t?u(1)||g(t):u(isNaN(t.x)?1:t.x)||
null===t.y||g(t.y)}})})},"dojox/charting/scaler/primitive":function(){define(["dojo/_base/lang"],function(S){var J=S.getObject("dojox.charting.scaler.primitive",!0);return S.mixin(J,{buildScaler:function(f,c,h,d){f==c&&(f-=.5,c+=.5);return{bounds:{lower:f,upper:c,from:f,to:c,scale:h/(c-f),span:h},scaler:J}},buildTicks:function(f,c){return{major:[],minor:[],micro:[]}},getTransformerFromModel:function(f){var c=f.bounds.from,h=f.bounds.scale;return function(d){return(d-c)*h}},getTransformerFromPlot:function(f){var c=
f.bounds.from,h=f.bounds.scale;return function(d){return d/h+c}}})})},"dojox/gfx/fx":function(){define("dojo/_base/lang ./_base ./matrix dojo/_base/Color dojo/_base/array dojo/_base/fx dojo/_base/connect dojo/sniff".split(" "),function(S,J,f,c,h,d,b,a){function e(n,k){this.start=n;this.end=k}function q(n,k,r){this.start=n;this.end=k;this.units=r}function t(n,k){this.start=n;this.end=k;this.temp=new c}function u(n){this.values=n;this.length=n.length}function g(n,k){this.values=n;this.def=k?k:{}}function m(n,
k){this.stack=n;this.original=k}function v(n,k,r,w){if(n.values)return new u(n.values);var x;var D=n.start?J.normalizeColor(n.start):x=k?r?k[r]:k:w;n.end?n=J.normalizeColor(n.end):(x||(x=k?r?k[r]:k:w),n=x);return new t(D,n)}var p=J.fx={};e.prototype.getValue=function(n){return(this.end-this.start)*n+this.start};q.prototype.getValue=function(n){return(this.end-this.start)*n+this.start+this.units};t.prototype.getValue=function(n){return c.blendColors(this.start,this.end,n,this.temp)};u.prototype.getValue=
function(n){return this.values[Math.min(Math.floor(n*this.length),this.length-1)]};g.prototype.getValue=function(n){var k=S.clone(this.def),r;for(r in this.values)k[r]=this.values[r].getValue(n);return k};m.prototype.getValue=function(n){var k=[];h.forEach(this.stack,function(r){if(r instanceof f.Matrix2D)k.push(r);else if("original"==r.name&&this.original)k.push(this.original);else if("matrix"==r.name){if(r.start instanceof f.Matrix2D&&r.end instanceof f.Matrix2D){var w=new f.Matrix2D;for(x in r.start)w[x]=
(r.end[x]-r.start[x])*n+r.start[x];k.push(w)}}else if(r.name in f)if(w=f[r.name],"function"!=typeof w)k.push(w);else{var x=h.map(r.start,function(D,G){return(r.end[G]-D)*n+D});w=w.apply(f,x);w instanceof f.Matrix2D&&k.push(w)}},this);return k};var l=new c(0,0,0,0);p.animateStroke=function(n){n.easing||(n.easing=d._defaultEasing);var k=new d.Animation(n),r=n.shape,w;b.connect(k,"beforeBegin",k,function(){w=r.getStroke();var x=n.color,D={};x&&(D.color=v(x,w,"color",l));(x=n.style)&&x.values&&(D.style=
new u(x.values));if(x=n.width){var G=x,F=w;if(G.values)var A=new u(G.values);else x=G.start?G.start:A=F?F.width:1,G.end?A=G.end:"number"!=typeof A&&(A=F?F.width:1),A=new e(x,A);D.width=A}(x=n.cap)&&x.values&&(D.cap=new u(x.values));if(x=n.join)x.values?D.join=new u(x.values):(A=x.start?x.start:w&&w.join||0,x=x.end?x.end:w&&w.join||0,"number"==typeof A&&"number"==typeof x&&(D.join=new e(A,x)));this.curve=new g(D,w)});b.connect(k,"onAnimate",r,"setStroke");return k};p.animateFill=function(n){n.easing||
(n.easing=d._defaultEasing);var k=new d.Animation(n),r=n.shape,w;b.connect(k,"beforeBegin",k,function(){w=r.getFill();var x=n.color;x&&(this.curve=v(x,w,"",l))});b.connect(k,"onAnimate",r,"setFill");return k};p.animateFont=function(n){n.easing||(n.easing=d._defaultEasing);var k=new d.Animation(n),r=n.shape,w;b.connect(k,"beforeBegin",k,function(){w=r.getFont();var x=n.style,D={};x&&x.values&&(D.style=new u(x.values));(x=n.variant)&&x.values&&(D.variant=new u(x.values));(x=n.weight)&&x.values&&(D.weight=
new u(x.values));(x=n.family)&&x.values&&(D.family=new u(x.values));if((x=n.size)&&x.units){var G=parseFloat(x.start?x.start:r.font&&r.font.size||"0");var F=parseFloat(x.end?x.end:r.font&&r.font.size||"0");D.size=new q(G,F,x.units)}this.curve=new g(D,w)});b.connect(k,"onAnimate",r,"setFont");return k};p.animateTransform=function(n){n.easing||(n.easing=d._defaultEasing);var k=new d.Animation(n),r=n.shape,w;b.connect(k,"beforeBegin",k,function(){w=r.getTransform();this.curve=new m(n.transform,w)});
b.connect(k,"onAnimate",r,"setTransform");if("svg"===J.renderer&&(9<=a("ie")||a("ff")))var x=[b.connect(k,"onBegin",k,function(){for(var D=r.getParent();D&&D.getParent;)D=D.getParent();D&&(r.__svgContainer=D.rawNode.parentNode,r.__svgRoot=D.rawNode,r.__svgRoot&&r.__svgRoot.getAttribute&&(r.__svgWidth=parseInt(r.__svgRoot.getAttribute("width"),10),isNaN(r.__svgWidth)&&delete r.__svgWidth))}),b.connect(k,"onAnimate",k,function(){try{if(r.__svgContainer){var D=r.__svgContainer.style.visibility;r.__svgContainer.style.visibility=
"visible";r.__svgContainer.style.visibility=D;var G=r.__svgWidth;if(!isNaN(G))try{r.__svgRoot.setAttribute("width",G-5E-6),r.__svgRoot.setAttribute("width",G)}catch(F){}}}catch(F){}}),b.connect(k,"onEnd",k,function(){h.forEach(x,b.disconnect);if(r.__svgContainer){var D=r.__svgContainer;if(null==D.getAttribute("__gotVis")){D.setAttribute("__gotVis",!0);var G=r.__svgContainer.style.visibility,F=r.__svgRoot,A=r.__svgWidth;D.style.visibility="visible";setTimeout(function(){try{D.style.visibility=G;D.removeAttribute("__gotVis");
D=null;try{isNaN(A)||(F.setAttribute("width",A-5E-6),F.setAttribute("width",A))}catch(y){}}catch(y){}},100)}}delete r.__svgContainer;delete r.__svgRoot;delete r.__svgWidth})];return k};return p})},"dojox/charting/plot2d/Lines":function(){define(["dojo/_base/declare","./Default"],function(S,J){return S("dojox.charting.plot2d.Lines",J,{constructor:function(){this.opt.lines=!0}})})},"dojox/fx/easing":function(){define(["dojo/_base/lang","dojo/_base/kernel","dojo/fx/easing"],function(S,J,f){J.deprecated("dojox.fx.easing",
"Upgraded to Core, use dojo.fx.easing instead","2.0");return S.getObject("dojox.fx",!0).easing=f})},"dojox/charting/axis2d/Default":function(){define("dojo/_base/lang dojo/_base/array dojo/sniff dojo/_base/declare dojo/_base/connect dojo/dom-geometry ./Invisible ../scaler/linear ./common dojox/gfx dojox/lang/utils dojox/lang/functional dojo/has!dojo-bidi?../bidi/axis2d/Default".split(" "),function(S,J,f,c,h,d,b,a,e,q,t,u,g){b=c(f("dojo-bidi")?"dojox.charting.axis2d.NonBidiDefault":"dojox.charting.axis2d.Default",
b,{defaultParams:{vertical:!1,fixUpper:"none",fixLower:"none",natural:!1,leftBottom:!0,includeZero:!1,fixed:!0,majorLabels:!0,minorTicks:!0,minorLabels:!0,microTicks:!1,rotation:0,htmlLabels:!0,enableCache:!1,dropLabels:!0,labelSizeChange:!1,position:"leftOrBottom"},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,maxLabelCharCount:0,trailingSymbol:null,stroke:{},majorTick:{},minorTick:{},microTick:{},tick:{},font:"",fontColor:"",
title:"",titleGap:0,titleFont:"",titleFontColor:"",titleOrientation:""},constructor:function(m,v){this.opt=S.clone(this.defaultParams);t.updateWithObject(this.opt,v);t.updateWithPattern(this.opt,v,this.optionalParams);this.opt.enableCache&&(this._textFreePool=[],this._lineFreePool=[],this._textUsePool=[],this._lineUsePool=[]);this._invalidMaxLabelSize=!0;v&&"position"in v||(this.opt.position=this.opt.leftBottom?"leftOrBottom":"rightOrTop");this.renderingOptions={"shape-rendering":"crispEdges"}},setWindow:function(m,
v){m!=this.scale&&(this._invalidMaxLabelSize=!0);return this.inherited(arguments)},_groupLabelWidth:function(m,v,p){if(!m.length)return 0;50<m.length&&(m.length=50);S.isObject(m[0])&&(m=u.map(m,function(l){return l.text}));p&&(m=u.map(m,function(l){return 0==S.trim(l).length?"":l.substring(0,p)+this.trailingSymbol},this));m=m.join("\x3cbr\x3e");return q._base._getTextBox(m,{font:v}).w||0},_getMaxLabelSize:function(m,v,p,l,n,k){if(null==this._maxLabelSize&&6==arguments.length){var r=this.opt;this.scaler.minMinorStep=
this._prevMinMinorStep=0;var w=S.clone(r);delete w.to;delete w.from;var x=a.buildScaler(m,v,p,w,r.to-r.from);x.minMinorStep=0;this._majorStart=x.major.start;r=a.buildTicks(x,r);if(k&&r){var D=x=0,G=function(A){A.label&&this.push(A.label)},F=[];this.opt.majorLabels&&(J.forEach(r.major,G,F),x=this._groupLabelWidth(F,n,w.maxLabelCharCount),w.maxLabelSize&&(x=Math.min(w.maxLabelSize,x)));F=[];this.opt.dropLabels&&this.opt.minorLabels&&(J.forEach(r.minor,G,F),D=this._groupLabelWidth(F,n,w.maxLabelCharCount),
w.maxLabelSize&&(D=Math.min(w.maxLabelSize,D)));this._maxLabelSize={majLabelW:x,minLabelW:D,majLabelH:k,minLabelH:k}}else this._maxLabelSize=null}return this._maxLabelSize},calculate:function(m,v,p){this.inherited(arguments);this.scaler.minMinorStep=this._prevMinMinorStep;if((this._invalidMaxLabelSize||p!=this._oldSpan)&&Infinity!=m&&-Infinity!=v){this._invalidMaxLabelSize=!1;this.opt.labelSizeChange&&(this._maxLabelSize=null);this._oldSpan=p;var l=this.opt,n=this.chart.theme.axis,k=l.rotation%360,
r=this.chart.theme.axis.tick.labelGap,w=l.font||n.majorTick&&n.majorTick.font||n.tick&&n.tick.font;n=w?q.normalizedLength(q.splitFontString(w).size):0;w=this._getMaxLabelSize(m,v,p,k,w,n);"number"!=typeof r&&(r=4);if(w&&l.dropLabels){l=Math.abs(Math.cos(k*Math.PI/180));var x=Math.abs(Math.sin(k*Math.PI/180));0>k&&(k+=360);switch(k){case 0:case 180:this.vertical?k=n:(k=w.majLabelW,n=w.minLabelW);break;case 90:case 270:this.vertical?(k=w.majLabelW,n=w.minLabelW):k=n;break;default:k=this.vertical?Math.min(w.majLabelW,
n/l):Math.min(w.majLabelW,n/x),n=Math.min(Math.sqrt(w.minLabelW*w.minLabelW+n*n),this.vertical?n*l+w.minLabelW*x:w.minLabelW*l+n*x)}this.scaler.minMinorStep=this._prevMinMinorStep=Math.max(k,n)+r;this._skipInterval=this.scaler.minMinorStep<=this.scaler.minor.tick*this.scaler.bounds.scale?0:Math.floor((k+r)/(this.scaler.major.tick*this.scaler.bounds.scale))}else this._skipInterval=0}this.ticks=a.buildTicks(this.scaler,this.opt);return this},getOffsets:function(){var m={l:0,r:0,t:0,b:0};if(!this.scaler)return m;
var v=this.opt,p=this.chart.theme.axis,l=this.chart.theme.axis.tick.labelGap,n=v.titleFont||p.title&&p.title.font;p=0==v.titleGap?0:v.titleGap||p.title&&p.title.gap;var k=this.chart.theme.getTick("major",v),r=this.chart.theme.getTick("minor",v);n=n?q.normalizedLength(q.splitFontString(n).size):0;var w=v.rotation%360,x=v.position,D="rightOrTop"!==x,G=Math.abs(Math.cos(w*Math.PI/180)),F=Math.abs(Math.sin(w*Math.PI/180));this.trailingSymbol=void 0===v.trailingSymbol||null===v.trailingSymbol?this.trailingSymbol:
v.trailingSymbol;"number"!=typeof l&&(l=4);0>w&&(w+=360);var A=this._getMaxLabelSize();if(A){var y=Math.ceil(Math.max(A.majLabelW,A.minLabelW))+1,z=Math.ceil(Math.max(A.majLabelH,A.minLabelH))+1;if(this.vertical)switch(A=D?"l":"r",w){case 0:case 180:m[A]="center"===x?0:y;m.t=m.b=z/2;break;case 90:case 270:m[A]=z;m.t=m.b=y/2;break;default:45>=w||180<w&&225>=w?(m[A]=z*F/2+y*G,m[D?"t":"b"]=z*G/2+y*F,m[D?"b":"t"]=z*G/2):315<w||180>w&&135<w?(m[A]=z*F/2+y*G,m[D?"b":"t"]=z*G/2+y*F,m[D?"t":"b"]=z*G/2):90>
w||180<w&&270>w?(m[A]=z*F+y*G,m[D?"t":"b"]=z*G+y*F):(m[A]=z*F+y*G,m[D?"b":"t"]=z*G+y*F)}else switch(A=D?"b":"t",w){case 0:case 180:m[A]="center"===x?0:z;m.l=m.r=y/2;break;case 90:case 270:m[A]=y;m.l=m.r=z/2;break;default:45<=w&&90>=w||225<=w&&270>=w?(m[A]=z*G/2+y*F,m[D?"r":"l"]=z*F/2+y*G,m[D?"l":"r"]=z*F/2):90<=w&&135>=w||270<=w&&315>=w?(m[A]=z*G/2+y*F,m[D?"l":"r"]=z*F/2+y*G,m[D?"r":"l"]=z*F/2):45>w||180<w&&225>w?(m[A]=z*G+y*F,m[D?"r":"l"]=z*F+y*G):(m[A]=z*G+y*F,m[D?"l":"r"]=z*F+y*G)}m[A]="center"===
x?0:m[A]+(l+Math.max(0<k.length?k.length:0,0<r.length?r.length:0)+(v.title?n+p:0))}return m},cleanGroup:function(m){this.opt.enableCache&&this.group&&(this._lineFreePool=this._lineFreePool.concat(this._lineUsePool),this._lineUsePool=[],this._textFreePool=this._textFreePool.concat(this._textUsePool),this._textUsePool=[]);this.inherited(arguments)},createText:function(m,v,p,l,n,k,r,w,x){if(!this.opt.enableCache||"html"==m)return e.createText[m](this.chart,v,p,l,n,k,r,w,x);0<this._textFreePool.length?
(m=this._textFreePool.pop(),m.setShape({x:p,y:l,text:k,align:n}),v.add(m)):m=e.createText[m](this.chart,v,p,l,n,k,r,w);this._textUsePool.push(m);return m},createLine:function(m,v){if(this.opt.enableCache&&0<this._lineFreePool.length){var p=this._lineFreePool.pop();p.setShape(v);m.add(p)}else p=m.createLine(v);this.opt.enableCache&&this._lineUsePool.push(p);return p},render:function(m,v){var p,l=this._isRtl();if(!this.dirty||!this.scaler)return this;var n=this.opt;var k=this.chart.theme.axis;var r=
n.position,w="rightOrTop"!==r,x=n.rotation%360,D=0;D=this.chart.theme.axis.tick.labelGap;var G=n.font||k.majorTick&&k.majorTick.font||k.tick&&k.tick.font,F=n.titleFont||k.title&&k.title.font,A=n.fontColor||k.majorTick&&k.majorTick.fontColor||k.tick&&k.tick.fontColor||"black",y=n.titleFontColor||k.title&&k.title.fontColor||"black";var z=0==n.titleGap?0:n.titleGap||k.title&&k.title.gap||15;var B=n.titleOrientation||k.title&&k.title.orientation||"axis",C=this.chart.theme.getTick("major",n),H=this.chart.theme.getTick("minor",
n),E=this.chart.theme.getTick("micro",n),K="stroke"in n?n.stroke:k.stroke,I=G?q.normalizedLength(q.splitFontString(G).size):0;var L=Math.abs(Math.cos(x*Math.PI/180));var M=Math.abs(Math.sin(x*Math.PI/180));var N=F?q.normalizedLength(q.splitFontString(F).size):0;"number"!=typeof D&&(D=4);0>x&&(x+=360);var P=this._getMaxLabelSize();P=P&&P.majLabelW;if(this.vertical){var R=m.height-v.b;var Y=void 0;var ja=v.t;var aa=void 0;k=(m.height-v.b+v.t)/2;var da=void 0;M=I*M+(P||0)*L+D+Math.max(0<C.length?C.length:
0,0<H.length?H.length:0)+N+z;var ra=0;var ca=-1;var fa=p=0;z=1;L=0;var la=D;var ta=0;switch(x){case 0:var Q="end";fa=.4*I;break;case 90:Q="middle";p=-I;break;case 180:Q="start";fa=.4*-I;break;case 270:Q="middle";break;default:45>x?(Q="end",fa=.4*I):90>x?(Q="end",fa=.4*I):135>x?Q="start":225>x?(Q="start",fa=.4*-I):270>x?(Q="start",p=w?0:.4*I):315>x?(Q="end",p=w?0:.4*I):(Q="end",fa=.4*I)}if(w)Y=aa="center"===r?m.width/2:v.l,D=B&&"away"==B?90:270,da=v.l-M+(270==D?N:0),z=-1,la=-la;else switch(Y=aa=m.width-
v.r,D=B&&"axis"==B?90:270,da=m.width-v.r+M-(270==D?0:N),Q){case "start":Q="end";break;case "end":Q="start";break;case "middle":p+=I}}else{Y=v.l;R=void 0;aa=m.width-v.r;ja=void 0;da=(m.width-v.r+v.l)/2;k=void 0;M=I*L+(P||0)*M+D+Math.max(0<C.length?C.length:0,0<H.length?H.length:0)+N+z;ra=l?-1:1;z=fa=p=ca=0;L=1;la=0;ta=D;switch(x){case 0:Q="middle";fa=I;break;case 90:Q="start";p=.4*-I;break;case 180:Q="middle";break;case 270:Q="end";p=.4*I;break;default:45>x?(Q="start",fa=w?I:0):135>x?(Q="start",p=
.4*-I):180>x?(Q="start",fa=w?0:-I):225>x?(Q="end",fa=w?0:-I):315>x?(Q="end",fa=w?.4*I:0):(Q="end",fa=w?I:0)}if(w)R=ja="center"===r?m.height/2:m.height-v.b,D=B&&"axis"==B?180:0,k=m.height-v.b+M-(D?N:0);else switch(R=ja=v.t,D=B&&"away"==B?180:0,k=v.t-M+(D?0:N),L=-1,ta=-ta,Q){case "start":Q="end";break;case "end":Q="start";break;case "middle":fa-=I}}this.cleanGroup();var T=this.group;m=this.scaler;v=this.ticks;var O=a.getTransformerFromModel(this.scaler),Z=n.title&&D||x||!this.opt.htmlLabels||f("ie")||
f("opera")?"gfx":"html",na=z*C.length,ia=L*C.length,X=this._skipInterval;T.createLine({x1:Y,y1:R,x2:aa,y2:ja}).setStroke(K);n.title&&(F=e.createText[Z](this.chart,T,da,k,"middle",n.title,F,y),"html"==Z?this.htmlElements.push(F):F.setTransform(q.matrix.rotategAt(D,da,k)));if(null==v)return this.dirty=!1,this;var ha=0<v.major.length?(v.major[0].value-this._majorStart)/m.major.tick:0,V=this.opt.majorLabels;J.forEach(v.major,function(ea,U){var ka=O(ea.value),ma=(l?aa:Y)+ra*ka;ka=R+ca*ka;U+=ha;this.createLine(T,
{x1:ma,y1:ka,x2:ma+na,y2:ka+ia}).setStroke(C);if(ea.label&&(!X||0==(U-(1+X))%(1+X))){var sa=n.maxLabelCharCount?this.getTextWithLimitCharCount(ea.label,G,n.maxLabelCharCount):{text:ea.label,truncated:!1};sa=n.maxLabelSize?this.getTextWithLimitLength(sa.text,G,n.maxLabelSize,sa.truncated):sa;U=this.createText(Z,T,ma+(0<C.length?na:0)+la+(x?0:p),ka+(0<C.length?ia:0)+ta+(x?0:fa),Q,sa.text,G,A);sa.truncated&&this.chart.formatTruncatedLabel(U,ea.label,Z);sa.truncated&&this.labelTooltip(U,this.chart,ea.label,
sa.text,G,Z);"html"==Z?this.htmlElements.push(U):x&&U.setTransform([{dx:p,dy:fa},q.matrix.rotategAt(x,ma+(0<C.length?na:0)+la,ka+(0<C.length?ia:0)+ta)])}},this);na=z*H.length;ia=L*H.length;V=this.opt.minorLabels&&m.minMinorStep<=m.minor.tick*m.bounds.scale;J.forEach(v.minor,function(ea){var U=O(ea.value),ka=(l?aa:Y)+ra*U,ma=R+ca*U;this.createLine(T,{x1:ka,y1:ma,x2:ka+na,y2:ma+ia}).setStroke(H);if(V&&ea.label){var sa=n.maxLabelCharCount?this.getTextWithLimitCharCount(ea.label,G,n.maxLabelCharCount):
{text:ea.label,truncated:!1};sa=n.maxLabelSize?this.getTextWithLimitLength(sa.text,G,n.maxLabelSize,sa.truncated):sa;U=this.createText(Z,T,ka+(0<H.length?na:0)+la+(x?0:p),ma+(0<H.length?ia:0)+ta+(x?0:fa),Q,sa.text,G,A);sa.truncated&&this.chart.formatTruncatedLabel(U,ea.label,Z);sa.truncated&&this.labelTooltip(U,this.chart,ea.label,sa.text,G,Z);"html"==Z?this.htmlElements.push(U):x&&U.setTransform([{dx:p,dy:fa},q.matrix.rotategAt(x,ka+(0<H.length?na:0)+la,ma+(0<H.length?ia:0)+ta)])}},this);na=z*E.length;
ia=L*E.length;J.forEach(v.micro,function(ea){var U=O(ea.value);ea=Y+ra*U;U=R+ca*U;this.createLine(T,{x1:ea,y1:U,x2:ea+na,y2:U+ia}).setStroke(E)},this);this.dirty=!1;return this},labelTooltip:function(m,v,p,l,n,k){var r=["dijit/Tooltip"],w={type:"rect"},x=["above","below"];l=q._base._getTextBox(l,{font:n}).w||0;n=n?q.normalizedLength(q.splitFontString(n).size):0;"html"==k?(S.mixin(w,d.position(m.firstChild,!0)),w.width=Math.ceil(l),w.height=Math.ceil(n),this._events.push({shape:dojo,handle:h.connect(m.firstChild,
"onmouseover",this,function(D){require(r,function(G){G.show(p,w,x)})})}),this._events.push({shape:dojo,handle:h.connect(m.firstChild,"onmouseout",this,function(D){require(r,function(G){G.hide(w)})})})):(k=m.getShape(),v=v.getCoords(),w=S.mixin(w,{x:k.x-l/2,y:k.y}),w.x+=v.x,w.y+=v.y,w.x=Math.round(w.x),w.y=Math.round(w.y),w.width=Math.ceil(l),w.height=Math.ceil(n),this._events.push({shape:m,handle:m.connect("onmouseenter",this,function(D){require(r,function(G){G.show(p,w,x)})})}),this._events.push({shape:m,
handle:m.connect("onmouseleave",this,function(D){require(r,function(G){G.hide(w)})})}))},_isRtl:function(){return!1}});return f("dojo-bidi")?c("dojox.charting.axis2d.Default",[b,g]):b})},"dojox/charting/axis2d/Invisible":function(){define(["dojo/_base/lang","dojo/_base/declare","./Base","../scaler/linear","dojox/lang/utils"],function(S,J,f,c,h){return J("dojox.charting.axis2d.Invisible",f,{defaultParams:{vertical:!1,fixUpper:"none",fixLower:"none",natural:!1,leftBottom:!0,includeZero:!1,fixed:!0},
optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1},constructor:function(d,b){this.opt=S.clone(this.defaultParams);h.updateWithObject(this.opt,b);h.updateWithPattern(this.opt,b,this.optionalParams)},dependOnData:function(){return!("min"in this.opt)||!("max"in this.opt)},clear:function(){delete this.scaler;delete this.ticks;this.dirty=!0;return this},initialized:function(){return"scaler"in this&&!(this.dirty&&this.dependOnData())},setWindow:function(d,b){this.scale=
d;this.offset=b;return this.clear()},getWindowScale:function(){return"scale"in this?this.scale:1},getWindowOffset:function(){return"offset"in this?this.offset:0},calculate:function(d,b,a,e){if(this.initialized())return this;var q=this.opt;this.labels=q.labels;this.scaler=(e||c).buildScaler(d,b,a,q);var t=this.scaler.bounds;"scale"in this&&(q.from=t.lower+this.offset,q.to=(t.upper-t.lower)/this.scale+q.from,!isFinite(q.from)||isNaN(q.from)||!isFinite(q.to)||isNaN(q.to)||q.to-q.from>=t.upper-t.lower?
(delete q.from,delete q.to,delete this.scale,delete this.offset):(q.from<t.lower?(q.to+=t.lower-q.from,q.from=t.lower):q.to>t.upper&&(q.from+=t.upper-q.to,q.to=t.upper),this.offset=q.from-t.lower),this.scaler=(e||c).buildScaler(d,b,a,q),t=this.scaler.bounds,1==this.scale&&0==this.offset&&(delete this.scale,delete this.offset));return this},getScaler:function(){return this.scaler},getTicks:function(){return this.ticks}})})},"dojox/charting/axis2d/Base":function(){define(["dojo/_base/declare","../Element"],
function(S,J){return S("dojox.charting.axis2d.Base",J,{constructor:function(f,c){this.vertical=c&&c.vertical;this.opt={};this.opt.min=c&&c.min;this.opt.max=c&&c.max},clear:function(){return this},initialized:function(){return!1},calculate:function(f,c,h){return this},getScaler:function(){return null},getTicks:function(){return null},getOffsets:function(){return{l:0,r:0,t:0,b:0}},render:function(f,c){this.dirty=!1;return this},isNullValue:function(f){return!1},naturalBaseline:0})})},"dojox/charting/scaler/linear":function(){define(["dojo/_base/lang",
"./common"],function(S,J){function f(b,a){b=b.toLowerCase();for(var e=a.length-1;0<=e;--e)if(b===a[e])return!0;return!1}var c=S.getObject("dojox.charting.scaler.linear",!0),h=J.getNumericLabel,d=function(b,a,e,q,t,u,g){e=S.delegate(e);q||("major"==e.fixUpper&&(e.fixUpper="minor"),"major"==e.fixLower&&(e.fixLower="minor"));t||("minor"==e.fixUpper&&(e.fixUpper="micro"),"minor"==e.fixLower&&(e.fixLower="micro"));u||("micro"==e.fixUpper&&(e.fixUpper="none"),"micro"==e.fixLower&&(e.fixLower="none"));var m=
f(e.fixLower,["major"])?Math.floor(e.min/q)*q:f(e.fixLower,["minor"])?Math.floor(e.min/t)*t:f(e.fixLower,["micro"])?Math.floor(e.min/u)*u:e.min,v=f(e.fixUpper,["major"])?Math.ceil(e.max/q)*q:f(e.fixUpper,["minor"])?Math.ceil(e.max/t)*t:f(e.fixUpper,["micro"])?Math.ceil(e.max/u)*u:e.max;e.useMin&&(b=m);e.useMax&&(a=v);var p=!q||e.useMin&&f(e.fixLower,["major"])?b:Math.ceil(b/q)*q,l=!t||e.useMin&&f(e.fixLower,["major","minor"])?b:Math.ceil(b/t)*t,n=!u||e.useMin&&f(e.fixLower,["major","minor","micro"])?
b:Math.ceil(b/u)*u,k=q?(e.useMax&&f(e.fixUpper,["major"])?Math.round((a-p)/q):Math.floor((a-p)/q))+1:0,r=t?(e.useMax&&f(e.fixUpper,["major","minor"])?Math.round((a-l)/t):Math.floor((a-l)/t))+1:0;e=u?(e.useMax&&f(e.fixUpper,["major","minor","micro"])?Math.round((a-n)/u):Math.floor((a-n)/u))+1:0;var w=t?Math.round(q/t):0,x=u?Math.round(t/u):0,D=q?Math.floor(Math.log(q)/Math.LN10):0,G=t?Math.floor(Math.log(t)/Math.LN10):0,F=g/(a-b);isFinite(F)||(F=1);return{bounds:{lower:m,upper:v,from:b,to:a,scale:F,
span:g},major:{tick:q,start:p,count:k,prec:D},minor:{tick:t,start:l,count:r,prec:G},micro:{tick:u,start:n,count:e,prec:0},minorPerMajor:w,microPerMinor:x,scaler:c}};return S.mixin(c,{buildScaler:function(b,a,e,q,t,u){var g={fixUpper:"none",fixLower:"none",natural:!1};q&&("fixUpper"in q&&(g.fixUpper=String(q.fixUpper)),"fixLower"in q&&(g.fixLower=String(q.fixLower)),"natural"in q&&(g.natural=!!q.natural));u=!u||3>u?3:u;"min"in q&&(b=q.min);"max"in q&&(a=q.max);q.includeZero&&(0<b&&(b=0),0>a&&(a=0));
g.min=b;g.useMin=!0;g.max=a;g.useMax=!0;"from"in q&&(b=q.from,g.useMin=!1);"to"in q&&(a=q.to,g.useMax=!1);if(a<=b)return d(b,a,g,0,0,0,e);t||(t=a-b);t=Math.floor(Math.log(t)/Math.LN10);t=q&&"majorTickStep"in q?q.majorTickStep:Math.pow(10,t);var m=0,v=0;if(q&&"minorTickStep"in q)m=q.minorTickStep;else{do{m=t/10;if(!g.natural||.9<m){var p=d(b,a,g,t,m,0,e);if(p.bounds.scale*p.minor.tick>u)break}m=t/5;if(!g.natural||.9<m)if(p=d(b,a,g,t,m,0,e),p.bounds.scale*p.minor.tick>u)break;m=t/2;if(!g.natural||.9<
m)if(p=d(b,a,g,t,m,0,e),p.bounds.scale*p.minor.tick>u)break;return d(b,a,g,t,0,0,e)}while(0)}if(q&&"microTickStep"in q)v=q.microTickStep,p=d(b,a,g,t,m,v,e);else{do{v=m/10;if(!g.natural||.9<v)if(p=d(b,a,g,t,m,v,e),3<p.bounds.scale*p.micro.tick)break;v=m/5;if(!g.natural||.9<v)if(p=d(b,a,g,t,m,v,e),3<p.bounds.scale*p.micro.tick)break;v=m/2;if(!g.natural||.9<v)if(p=d(b,a,g,t,m,v,e),3<p.bounds.scale*p.micro.tick)break;v=0}while(0)}return v?p:d(b,a,g,t,m,0,e)},buildTicks:function(b,a){var e=b.major.start,
q=b.minor.start,t=b.micro.start;if(a.microTicks&&b.micro.tick){var u=b.micro.tick;var g=t}else if(a.minorTicks&&b.minor.tick)u=b.minor.tick,g=q;else if(b.major.tick)u=b.major.tick,g=e;else return null;var m=1/b.bounds.scale;if(b.bounds.to<=b.bounds.from||isNaN(m)||!isFinite(m)||0>=u||isNaN(u)||!isFinite(u))return null;for(var v=[],p=[],l=[];g<=b.bounds.to+m;){if(Math.abs(e-g)<u/2){var n={value:e};a.majorLabels&&(n.label=h(e,b.major.prec,a));v.push(n);e+=b.major.tick;q+=b.minor.tick}else Math.abs(q-
g)<u/2?(a.minorTicks&&(n={value:q},a.minorLabels&&b.minMinorStep<=b.minor.tick*b.bounds.scale&&(n.label=h(q,b.minor.prec,a)),p.push(n)),q+=b.minor.tick):a.microTicks&&l.push({value:t});t+=b.micro.tick;g+=u}return{major:v,minor:p,micro:l}},getTransformerFromModel:function(b){var a=b.bounds.from,e=b.bounds.scale;return function(q){return(q-a)*e}},getTransformerFromPlot:function(b){var a=b.bounds.from,e=b.bounds.scale;return function(q){return q/e+a}}})})},"arcgisonline/pages/organization/widgets/DoubleAssignedOverlay":function(){define("require exports tslib preact arcgisonline/pages/dijit/Overlay arcgisonline/pages/pageUtil arcgisonline/pages/utils/organization arcgisonline/pages/components/DoubleAssignedLicenses/DoubleAssignedLicenses arcgisonline/pages/dijit/Pagination arcgisonline/sharing/geow/Licenses ../doubleAssignedAPI dojo/i18n!../../../nls/arcgisonline dojo/topic arcgisonline/tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m){Object.defineProperty(J,"__esModule",{value:!0});h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);S=function(){function v(p,l){this.title=u.default.myOrganization.overviewTab.doubleAssignedOverlay.title;this.overlayContents='\x3cdiv class\x3d"double-assigned-content"\x3e\x3cdiv class\x3d"js-double-assigned"\x3e\x3c/div\x3e\x3cdiv class\x3d"js-pagination"\x3e\x3c/div\x3e\x3c/div\x3e';
this.constrain=!0;this.maxWidth=800;this.closeOnScrimClick=!1;this.userLicenseTypes=[];this.members=[];this.selectedMembers=[];this.pageRange={start:1,end:1,total:0};this.usersPerPage=20;this.selectedLicense=this.pageRangeLabel="";this.licensesAPI=new q.default;this.handleToggleRow=this.handleToggleRow.bind(this);this.handleToggleAll=this.handleToggleAll.bind(this);this.handleLicenseChange=this.handleLicenseChange.bind(this);this.handlePaginationPage=this.handlePaginationPage.bind(this)}v.prototype.open=
function(){this.inherited(arguments);this.setDefaultSelected();this._primaryBtn.textContent=u.default.myOrganization.overviewTab.doubleAssignedOverlay.buttonText;this.renderContent()};v.prototype.handlePrimary=function(){return f.__awaiter(this,void 0,void 0,function(){var p,l,n,k,r=this;return f.__generator(this,function(w){switch(w.label){case 0:return this.showLoader(u.default.myOrganization.overviewTab.doubleAssignedOverlay.savingText),p=this.doubleAssignedRecords[this.selectedLicense],[4,this.getUserEntitlements(p)];
case 1:return w.sent(),l=[],this.members.forEach(function(x){var D=l.filter(function(G){return G.entitlements.join(",")===x.entitlements.join(",")})[0];D?D.users.push(x.username):l.push({users:[x.username],entitlements:x.entitlements})}),this.batchProvisionEntitlements(p.itemId,l,0),[4,new Promise(function(x){return setTimeout(function(){return x(!0)},3E3)})];case 2:return w.sent(),this.showLoader(),n=this,[4,(0,t.getDoubleAssignUsers)(this.doubleAssignedRecords)];case 3:n.doubleAssignedRecords=w.sent();
g.default.publish("double-assinged/refresh",this.doubleAssignedRecords);k=Object.keys(this.doubleAssignedRecords).some(function(x){var D;return 0<(null===(D=r.doubleAssignedRecords[x].response)||void 0===D?void 0:D.total)});if(!k)return g.default.publish("double-assigned/fixed"),this.close(),[2];this.doubleAssignedRecords[this.selectedLicense]||this.setDefaultSelected();this.hideLoader();this.renderContent();return[2]}})})};v.prototype.batchProvisionEntitlements=function(p,l,n){return f.__awaiter(this,
void 0,void 0,function(){return f.__generator(this,function(k){switch(k.label){case 0:return[4,this.licensesAPI.provisionUserEntitlements(p,l[n])];case 1:return k.sent(),n++,n>=l.length?[2]:[2,this.batchProvisionEntitlements(p,l,n)]}})})};v.prototype.setDefaultSelected=function(){this.selectedLicense=Object.keys(this.doubleAssignedRecords).sort()[0]};v.prototype.getUserEntitlements=function(p){return f.__awaiter(this,void 0,void 0,function(){var l,n=this;return f.__generator(this,function(k){switch(k.label){case 0:return p.isPro?
[4,Promise.all(this.members.map(function(r){return n.licensesAPI.getUserEntitlements(p.itemId,r.username)}))]:(this.members.forEach(function(r){r.entitlements=[]}),[2]);case 1:return l=k.sent(),l.forEach(function(r,w){n.members[w].entitlements=r.userEntitlements.entitlements.filter(function(x){return!b.default.isProKey(x)}).sort()}),[2]}})})};v.prototype.handleToggleRow=function(p){this.selectedMembers.some(function(l){return l.username===p.username})?this.selectedMembers=this.selectedMembers.filter(function(l){return l.username!==
p.username}):this.selectedMembers=f.__spreadArray(f.__spreadArray([],this.selectedMembers,!0),[p],!1);this.renderDoubleAssigned()};v.prototype.handleToggleAll=function(p){this.selectedMembers=p?f.__spreadArray([],this.members,!0):[];this.renderDoubleAssigned()};v.prototype.handleLicenseChange=function(p){this.selectedLicense=p;this.renderContent()};v.prototype.renderContent=function(){return f.__awaiter(this,void 0,void 0,function(){var p,l,n,k,r,w=this;return f.__generator(this,function(x){p=this.doubleAssignedRecords[this.selectedLicense].response;
if(!p)return[2];l=p.start;n=p.total;k=p.nextStart;this.members=p.results;this.members.forEach(function(D){D.userLicenseTypeName=w.userLicenseTypes.filter(function(G){return G.id===D.userLicenseTypeId})[0].name});this.pageRange.total=p.total;r=l+(this.usersPerPage-1);r>n&&(r=n);this.pageRange={start:l,end:r,total:n};this.updatePageRange();this.renderDoubleAssigned();this.pagination||(this.pagination=new e.default({start:l,num:this.usersPerPage,hideDropdown:!0,topic:"double-assigned-overlay_"},this.domNode.querySelector(".js-pagination")),
this.own(g.default.subscribe("double-assigned-overlay_pagination/page",this.handlePaginationPage)));this.pagination.render({start:l,end:r,total:n,nextStart:k});return[2]})})};v.prototype.handlePaginationPage=function(p){return f.__awaiter(this,void 0,void 0,function(){var l,n=this;return f.__generator(this,function(k){switch(k.label){case 0:return[4,(0,t.getDoubleAssignUsersForLicense)(this.doubleAssignedRecords[this.selectedLicense],p.start)];case 1:return l=k.sent(),this.pageRange=f.__assign({},
p),this.members=l.results,this.members.forEach(function(r){r.userLicenseTypeName=n.userLicenseTypes.filter(function(w){return w.id===r.userLicenseTypeId})[0].name}),this.updatePageRange(),this.renderDoubleAssigned(),[2]}})})};v.prototype.updatePageRange=function(){this.pageRangeLabel=d.default.getPageRangeString(this.pageRange)};v.prototype.renderDoubleAssigned=function(){(0,c.render)((0,c.h)(a.default,{texts:u.default.myOrganization.overviewTab.doubleAssignedOverlay,doubleAssignedRecords:this.doubleAssignedRecords,
selectedLicense:this.selectedLicense,pageRangeLabel:this.pageRangeLabel,members:this.members,selectedMembers:this.selectedMembers,onToggleRow:this.handleToggleRow,onToggleAll:this.handleToggleAll,onLicenseChange:this.handleLicenseChange}),this.domNode.querySelector(".js-double-assigned"))};return v=f.__decorate([(0,m.default)(h.default)],v)}();J.default=S})},"arcgisonline/pages/components/DoubleAssignedLicenses/DoubleAssignedLicenses":function(){define("require exports tslib preact preact/hooks ./DoubleAssignedLicenseRow".split(" "),
function(S,J,f,c,h,d){Object.defineProperty(J,"__esModule",{value:!0});d=f.__importDefault(d);J.default=function(b){var a=b.texts,e=b.doubleAssignedRecords,q=b.selectedLicense,t=b.pageRangeLabel,u=b.members,g=b.selectedMembers,m=b.onToggleRow,v=b.onToggleAll,p=b.onLicenseChange;b=(0,h.useRef)(null);var l=a.description,n=a.columns,k=0<g.length&&g.length===u.length,r=function(x){p(x.target.value)};b.current&&(b.current.indeterminate=0<g.length&&g.length<u.length);var w=Object.keys(e);return(0,c.h)("div",
{class:"padding-1"},(0,c.h)("p",null,l),1<w.length&&(0,c.h)("div",{class:"trailer-1"},(0,c.h)("label",{for:"double-assigned-select",class:"trailer-0"},a.choose),(0,c.h)("select",{id:"double-assigned-select",onChange:r},w.sort().map(function(x){return(0,c.h)("option",{key:x,value:x,selected:x===q},e[x].name)}))),(0,c.h)("div",{class:"font-size--1 trailer-half"},t),(0,c.h)("table",{class:"double-assigned-table"},(0,c.h)("thead",null,(0,c.h)("tr",null,(0,c.h)("th",{class:"double-assigned-table__checkbox-col hide"},
(0,c.h)("input",{type:"checkbox",checked:k,onClick:function(){v(!k)},ref:b})),(0,c.h)("th",null,n.member),(0,c.h)("th",null,n.userType),(0,c.h)("th",null,n.duplicateAddOn)))),(0,c.h)("div",{class:"double-assigned__table-body"},(0,c.h)("table",{class:"double-assigned-table"},(0,c.h)("tbody",null,u.map(function(x){var D=g.some(function(G){return G.username===x.username});return(0,c.h)(d.default,{key:x.username,member:x,selected:D,onToggle:m})})))))}})},"arcgisonline/pages/components/DoubleAssignedLicenses/DoubleAssignedLicenseRow":function(){define(["require",
"exports","preact","../MemberThumb"],function(S,J,f,c){Object.defineProperty(J,"__esModule",{value:!0});J.default=function(h){var d=h.member,b=h.onToggle;return(0,f.h)("tr",null,(0,f.h)("td",{class:"double-assigned-table__checkbox-col hide"},(0,f.h)("input",{type:"checkbox",checked:h.selected,onClick:function(){b(d)}})),(0,f.h)("td",null,(0,f.h)("div",{class:"flex flex-align-center"},(0,f.h)(c.MemberThumb,{member:d,showName:!0}))),(0,f.h)("td",null,d.userLicenseTypeName),(0,f.h)("td",null,d.doubleAssignedLicenses.map(function(a){return(0,f.h)("div",
null,a.name)})))}})},"arcgisonline/pages/organization/components/SubscriptionExpiringModal":function(){define(["require","exports","preact","preact/hooks"],function(S,J,f,c){Object.defineProperty(J,"__esModule",{value:!0});J.default=function(h){var d=h.strings,b=h.onOk,a=h.onCancel,e=(0,c.useState)(!1);h=e[0];var q=e[1];e=(0,c.useState)(!1);var t=e[0],u=e[1],g=(0,c.useRef)();(0,c.useEffect)(function(){var m,v;g.current&&(null===(v=(m=g.current).setFocus)||void 0===v?void 0:v.call(m),setTimeout(function(){q(!0)},
15))},[g.current]);return(0,f.h)("calcite-modal",{open:h,role:"dialog","aria-modal":"true",ref:g,"data-test":"dialog","aria-label":d.title,oncalciteModalClose:function(){q(!1);a()},width:"m",outsideCloseDisabled:!0,class:"bring-modal-to-front"},(0,f.h)("h3",{slot:"header",class:"font-size-2 trailer-0","data-test":"title"},d.title),(0,f.h)("div",{slot:"content",class:"position-relative leader-half trailer-half","data-test":"description"},(0,f.h)("p",{class:"leader-half"},d.expiresIn),(0,f.h)("p",{dangerouslySetInnerHTML:{__html:d.upgradeInsideUS}}),
(0,f.h)("p",{dangerouslySetInnerHTML:{__html:d.upgradeOutsideUS}}),(0,f.h)("div",{class:"leader-1"})),(0,f.h)("label",{class:"font-size--1 trailer-0",slot:"back"},(0,f.h)("input",{type:"checkbox",onChange:function(){u(!t)}})," ",d.closePermanently),(0,f.h)("calcite-button",{slot:"primary",width:"full",appearance:"solid",onClick:function(){q(!1);b(t)},"data-test":"ok"},d.ok))}})},"arcgisonline/pages/components/NewHomePageBanner/NewHomePageBanner":function(){define("require exports tslib ../../organization/widgets/settings/HomePageOverlay/HomePageOverlay ../../utils/organization dojo/topic preact preact/hooks".split(" "),
function(S,J,f,c,h,d,b,a){Object.defineProperty(J,"__esModule",{value:!0});c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);J.default=function(e){var q,t=e.texts,u=e.portal,g=e.telemetry;e=(0,a.useState)(null===(q=u.portalProperties)||void 0===q?void 0:q.extendLegacyHomePage);q=e[0];var m=e[1];(0,a.useEffect)(function(){var v=d.default.subscribe("home-page-editor/launch",function(n){(new c.default({portal:u,telemetry:g,opener:n.opener})).open()}),p=d.default.subscribe("home-page-switch-banner/refresh",
function(n){m((n.portalProperties||{}).extendLegacyHomePage)}),l=[v,p];return function(){l.forEach(function(n){n.remove()})}},[]);if(u.isPortal&&h.default.hasLegacyHomePageEnabled(u))return e="".concat(u.helpBase).concat(u.helpMap.m["120002862"]||""),q=(q?t.extended:t.description).replace("${startLink}",'\x3ca href\x3d"'.concat(e,'" target\x3d"_blank"\x3e')).replace("${endLink}","\x3c/a\x3e"),(0,b.h)("div",{class:"new-home-page-banner flex flex-align-center trailer-1"},(0,b.h)("div",{class:"new-home-page-banner__icon"},
(0,b.h)("calcite-icon",{icon:"home"})),(0,b.h)("div",{class:"flex-1 margin-left-1"},(0,b.h)("div",{class:"avenir-demi"},t.title),(0,b.h)("div",{class:"font-size--1 new-home-page-banner__restrict-message",dangerouslySetInnerHTML:{__html:"".concat(q)}})),(0,b.h)("button",{class:"btn btn-clear margin-right-1 margin-left-1",onClick:function(){d.default.publish("home-page-editor/open")}},t.previewSwitch))}})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/HomePageOverlay":function(){define("require exports tslib preact ../../../../../esriGeowConfig ../../../../dijit/Overlay ../../../../dijit/OverlayConfirm ../../../../home/sharedResources ./utils/homePageUtils ../../../../home/widgets/HomePageAboveHeader ../../../../home/widgets/HomePageBelowHeader ../../../../home/widgets/HomePageGallery ../../../../home/widgets/HomePageText ../../../../home/widgets/HomePageLinks ../../../../home/widgets/HomePageFooter ../../../../home/widgets/HomePageHeader ../../onboard/HomePageColorsOnboardOverlay ../../onboard/HomePageTypographyOnboardOverlay ./HomePagePreview ../../../../utils/icons ../../../../utils/organizationResources ../../../../utils/organization ../../../../utils/strings ../../../../pageUtil ../../../../utils/alerts ../../../../utils/dom ../../../../utils/validation ../../../../utils/device ../../../../utils/markdown ../../../../../sharing/util ../../../../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/_WidgetBase dijit/a11yclick dijit/registry dijit/popup dojo/string dojo/on dojo/Deferred dojo/topic arcgisonline/pages/utils/clone esri/libs/sanitizer/Sanitizer dojo/i18n!../../../../../nls/arcgisonline dojo/text!./HomePageOverlay.html ../../../../components/ConfirmDialog ./components/StartAdmin ./components/HeaderAdmin ./components/HeaderLayoutAdmin ./components/ContentAdmin ./components/TextAdmin ./components/LinkAdmin ./components/GalleryAdmin ./components/FooterAdmin ./components/TypographyAdmin ./components/ColorsAdmin".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E,K,I,L,M,N,P,R,Y,ja,aa,da,ra,ca,fa,la,ta,Q,T,O,Z,na,ia,X){h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);D=f.__importDefault(D);
G=f.__importDefault(G);F=f.__importDefault(F);A=f.__importDefault(A);y=f.__importDefault(y);z=f.__importDefault(z);B=f.__importDefault(B);C=f.__importDefault(C);H=f.__importDefault(H);E=f.__importDefault(E);K=f.__importDefault(K);I=f.__importDefault(I);L=f.__importDefault(L);M=f.__importDefault(M);N=f.__importDefault(N);P=f.__importDefault(P);R=f.__importDefault(R);Y=f.__importDefault(Y);ja=f.__importDefault(ja);aa=f.__importDefault(aa);da=f.__importDefault(da);ra=f.__importDefault(ra);ca=f.__importDefault(ca);
fa=f.__importDefault(fa);la=f.__importDefault(la);ta=f.__importDefault(ta);Q=f.__importDefault(Q);T=f.__importDefault(T);O=f.__importDefault(O);Z=f.__importDefault(Z);na=f.__importDefault(na);ia=f.__importDefault(ia);X=f.__importDefault(X);return function(){function ha(V,ea){this.i18n=da.default;this.icons=r.default;this.unsavedChangesText=da.default.orgHomePageSetup.unsaved;this.homePageFile="home.page.json";this.sanitizer=new aa.default;this.panelButtonListeners=[];this.bodyMaxChars=1E3;this.footerMaxChars=
this.galleryMaxChars=500;this.galleryTitleMaxChars=this.textTitleMaxChars=55;this.linkMax=8;this.linkImages={};this.galleryCount=0;this.editLinkIndex=null;this.contentWidgetArray=[];this.customColorDiv=document.createElement("div");this.groupTitles=[];this.groupSnippets=[];this.groupFeatured={};this.groupKeyedTitles={};this.groupFeaturedIds={};this.errors=[];this.currentView="desktop";this.alignLR=this.isLeftToRight()?da.default.orgHomePageSetup.header.left:da.default.orgHomePageSetup.header.right;
this.tempOrgHomePage={key:null,baseColor:"gs",useCustomStyles:!1,useCustomTypography:!1,typography:["default","default"],customTypography:["Avenir Next","Avenir Next"],header:{title:"",titleColor:"white",backgroundColor:"deprecated",showTitle:!0,titleLogoPos:"middle",titleLogoAlign:"center",logo:"",showLogo:!1,coverType:"stock",coverImg:"",showCoverImg:!0,coverImgStock:"1",coverImgLayout:"Half-height",coverImgPlacement:{x:"50%",y:"50%"},coverBGColor:"",headerCustom:"",opacity:.45},content:[],footer:{showContact:!1,
contact:"",showCopy:!1,copy:"",bgColor:"",bgCustom:""},customStyles:[]};this.state={page:"start",section:""};this.maxBlocks=15;this.maxStyles=4;this.textAreaCursor={start:0,end:0};this.updatingCustomCover=!1;this.inherited(arguments);this.portal=V.portal;this.telemetry=V.telemetry;this.title=da.default.orgHomePageSetup.title;this.tempOrgHomePage.header.title=this.portal.name||"";this.overlayContents=N.default.substitute(ra.default,{i18n:da.default,monitorIcon:r.default.monitor["16"],tabletIcon:r.default.tablet["16"],
mobileIcon:r.default.mobile["16"],warnIcon:r.default["exclamation-mark-triangle"]["16"]})}ha.prototype.postCreate=function(){var V=this;this.device=new z.default;this.markdown=this.markdown||B.default.getLinksOnlyMarkdownInstance();"organization"===(window.location&&window.location.pathname).replace(/^.*\//,"").replace(/\?.*$/,"").split(".html")[0]&&this.domNode.classList.add("is-org-page");this._overlayActionBar.classList.add("flex-center");this._primaryBtn.id="homePageSaveButton";this.closeBtn.id=
"overlayCloseX";this.closeBtn.setAttribute("aria-label",da.default.common.close);this.closeBtn.classList.add("tooltip");this.closeBtn.classList.add("tooltip-left");this.inherited(arguments);this._getGroupList();this.loadExistingHomePage().then(function(ea){V.tempOrgHomePage=(0,ja.default)(ea);V.tempOrgHomePage=(0,a.updateLegacyConfiguration)(V.tempOrgHomePage);V.galleryCount=V.tempOrgHomePage.content.filter(function(U){return"gallery"===U.type}).length;V._mapContentColors();V.preview=new k.default({},
V.domNode.querySelector(".js-preview"));V.contentContainer=V.preview.domNode.querySelector(".home-page__content");V._overlayActionBar.insertBefore(V.domNode.querySelector(".js-view-size"),V._overlayActionBar.childNodes[0]);V.tempOrgHomePage.key||(V.tempOrgHomePage.key=Date.now());V._leftBarDiv=V.domNode.querySelector(".home-page-overlay__left-panel");V.switchToNewBtn=V.domNode.querySelector(".js-switch-to-new");V._renderFirstLoad();V._renderPage();V.closeBtn.focus();V.desktopBtn=V.domNode.querySelector(".js-desktop-btn");
V.tabletBtn=V.domNode.querySelector(".js-tablet-btn");V.mobileBtn=V.domNode.querySelector(".js-mobile-btn");V.own((0,P.default)(V.desktopBtn,"click",function(){V.setPreviewMode(V.desktopBtn,"desktop")}),(0,P.default)(V.tabletBtn,"click",function(){V.setPreviewMode(V.tabletBtn,"tablet")}),(0,P.default)(V.mobileBtn,"click",function(){V.setPreviewMode(V.mobileBtn,"mobile")}),(0,P.default)(V.desktopBtn,"mouseover",function(){V.setViewModeTip("desktop")}),(0,P.default)(V.tabletBtn,"mouseover",function(){V.setViewModeTip("tablet")}),
(0,P.default)(V.mobileBtn,"mouseover",function(){V.setViewModeTip("mobile")}),(0,P.default)(V.desktopBtn,"focus",function(){V.setViewModeTip("desktop")}),(0,P.default)(V.tabletBtn,"focus",function(){V.setViewModeTip("tablet")}),(0,P.default)(V.mobileBtn,"focus",function(){V.setViewModeTip("mobile")}),(0,I.default)(V._primaryBtn,function(){V.saveToHomePage().then(function(){x.default.hasTransitionalHomePageEnabled(V.portal)&&!x.default.isEnterpriseSetToViewHomePageOnly(V.portal)&&V.switchToModern()})}),
(0,I.default)(V.switchToNewBtn,V.switchAndSave.bind(V)));V.checkPreviewSize();x.default.hasModernHomePageEnabled(V.portal)||x.default.isEnterpriseSetToViewHomePageOnly(V.portal)||!V.portal.isPortal&&x.default.hasLegacyHomePageDefaults(V.portal)?A.default.hideNode(V.switchToNewBtn.parentElement):(V._overlayActionBar.classList.add("home-page-overlay__action-bar-not-active"),V._leftBarDiv.classList.add("home-page-overlay__action-bar-not-active"))})};ha.prototype.destroy=function(){this.destroyTooltipDialogs();
var V=document.body.querySelector("#transitional-message");V&&((0,c.render)(null,V),document.body.removeChild(V));window.onbeforeunload=void 0;this.inherited(arguments)};ha.prototype.open=function(){window.onbeforeunload=this.leavePageWarning.bind(this);this.inherited(arguments)};ha.prototype.close=function(){this.destroyTooltipDialogs();window.onbeforeunload=void 0;this.inherited(arguments)};ha.prototype.confirmClose=function(){var V=this,ea=new R.default,U=new b.default({title:da.default.orgHomePageSetup.unsavedTitle,
description:this.unsavedChangesText,confirmText:da.default.orgHomePageSetup.exitWithSave,cancelText:da.default.orgHomePageSetup.exitNoSave,showClose:!0});this._overlay.appendChild(U.domNode);var ka=!1;this.errors.forEach(function(ma){".contactEmail"===ma.errorField&&(ka=!0,V.state.page="footer",V._renderPage())});U.show().then(function(ma){"onOk"===ma?ka?(y.default.setInvalidState(document.querySelector(".contactEmail"),document.querySelector(".invalid-email-address"),da.default.orgHomePageSetup.footer.invalidEmail,
!0),F.default.showAlert("error",da.default.orgHomePageSetup.save.error),ea.resolve(!1)):(V.tempOrgHomePage.header.logo!==V.orgHomePage.header.logo&&V.removeResource(V.tempOrgHomePage.header.logo),V.tempOrgHomePage.header.coverImg!==V.orgHomePage.header.coverImg&&V.removeResource(V.tempOrgHomePage.header.coverImg),V.saveToHomePage().then(function(){return ea.resolve(!0)},function(){return ea.resolve(!1)})):"onCancel"===ma?((0,a.useHomePageFonts)(V.orgHomePage),V.orgHomePage.useCustomStyles&&V.orgHomePage.customStyles.forEach(function(sa,
pa){sa&&(pa+=1,document.body.style.setProperty("--custom-homepage-color-".concat(pa,"-background"),sa.background),document.body.style.setProperty("--custom-homepage-color-".concat(pa,"-title"),sa.header),document.body.style.setProperty("--custom-homepage-color-".concat(pa,"-text"),sa.text),document.body.style.setProperty("--custom-homepage-color-".concat(pa,"-button"),sa.button))}),ea.resolve(!0)):"onClose"===ma&&ea.resolve(!1)});return ea};ha.prototype.leavePageWarning=function(V){var ea=this.i18n.orgHomePageSetup.leavePage;
V&&(V.returnValue=ea);return ea};ha.prototype.setActiveSize=function(V){V.classList.add("home-page-overlay__view-size-btn--active");V.ariaPressed="true"};ha.prototype.clearActiveSize=function(V){V.classList.remove("home-page-overlay__view-size-btn--active");V.ariaPressed="false"};ha.prototype._renderFirstLoad=function(){this.initTransitionalUI();this._initCustomStyles();this.aboveHeaderWidget=new q.default({header:this.tempOrgHomePage.header,portal:this.portal,sanitizer:this.sanitizer,markdown:this.markdown,
preview:!0,baseColor:this.tempOrgHomePage.baseColor||"gs"},this.domNode.querySelector(".home-page__above-header"));this.aboveHeaderWidget.startup();this.headerWidget=new p.default({header:this.tempOrgHomePage.header,portal:this.portal,sanitizer:this.sanitizer,markdown:this.markdown,preview:!0,baseColor:this.tempOrgHomePage.baseColor||"gs",useCustomStyles:this.tempOrgHomePage.useCustomStyles,customStyles:this.tempOrgHomePage.customStyles},this.domNode.querySelector(".home-page__header"));this.headerWidget.startup();
this.belowHeaderWidget=new t.default({header:this.tempOrgHomePage.header,portal:this.portal,sanitizer:this.sanitizer,markdown:this.markdown,preview:!0,baseColor:this.tempOrgHomePage.baseColor||"gs",useCustomStyles:this.tempOrgHomePage.useCustomStyles},this.domNode.querySelector(".home-page__below-header"));this.belowHeaderWidget.startup();this._setOrgTitleColor();this.footerWidget=new v.default({footer:this.tempOrgHomePage.footer,portal:this.portal,sanitizer:this.sanitizer,markdown:this.markdown,
preview:!0,baseColor:this.tempOrgHomePage.baseColor||"gs",useCustomStyles:this.tempOrgHomePage.useCustomStyles},this.domNode.querySelector(".home-page__footer"));this.tempOrgHomePage.customStyles||(this.tempOrgHomePage.customStyles=[]);this.footerWidget.startup();this.closeBtn.blur();(0,a.useHomePageFonts)(this.tempOrgHomePage);document.querySelector(".custom-color-overlay")?this.customColorDiv=document.querySelector(".custom-color-overlay"):(this.customColorDiv.classList.add("custom-color-overlay"),
this.customColorDiv.classList.add("hide"),document.querySelector("body").append(this.customColorDiv))};ha.prototype.onHeaderChange=function(V,ea){var U;this.isSectionButton=!1;this._unsavedChanges=!0;var ka=this.tempOrgHomePage.header,ma=this.aboveHeaderWidget,sa=this.headerWidget,pa=this.belowHeaderWidget;"coverImgPlacement"!==V&&"titleLogoPos"!==V&&"above"!==this.tempOrgHomePage.header.titleLogoPos&&this.setContentScrollTop(this.headerWidget.domNode);switch(V){case "showTitle":ka.showTitle=ea;ma.showTitle(ea);
sa.showTitle(ea);pa.showTitle(ea);break;case "title":ka.title=this.stripHTML(ea);ma.setTitle(ka.title);sa.setTitle(ka.title);pa.setTitle(ka.title);break;case "color":this.tempOrgHomePage.useCustomStyles?ka.headerCustom=ea:ka.backgroundColor=ea;this._setOrgTitleColor();break;case "showLogo":ka.showLogo=ea;ma.showLogo(ea);sa.showLogo(ea);pa.showLogo(ea);break;case "logo":this.logoFileName=ea.fileName;this.removeError(".home-page__logo-inputs");this.tempOrgHomePage.header.showLogo=!0;this.logoBlob=ea.blob;
this.tempOrgHomePage.header.logo=ea.logoURI;ma.setLogo(ea.logoURI);sa.setLogo(ea.logoURI);pa.setLogo(ea.logoURI);ma.showLogo(!0);sa.showLogo(!0);pa.showLogo(!0);break;case "logoError":this.chkLogoError();break;case "coverType":ka.coverType=ea;"custom"===ea?(this.removeError(".home-page__custom-image-inputs"),(null===(U=this.tempOrgHomePage.header.coverImg)||void 0===U?0:U.length)&&this.tempOrgHomePage.header.showCoverImg?(V=this.tempOrgHomePage.header.coverImg.match(/^url/)?this.tempOrgHomePage.header.coverImg:
this._fetchResourceUrl(this.tempOrgHomePage.header.coverImg),this.lastBackgroundImage=this.tempOrgHomePage.header.coverImg.match(/^url/)?V:"url(".concat(V,")"),sa.setCoverImage(this.lastBackgroundImage),this.coverURI=V):this.errorCheckImages("custom")):(this.removeError(".home-page__custom-image-inputs"),this.tempOrgHomePage.header.showCoverImg&&(V="".concat(C.default.relativeToExplicitUrl("js/arcgisonline/img/homepage_background-".concat(this.tempOrgHomePage.header.coverImgStock,".jpg"))),sa.setCoverImage("url(".concat(V,
")"))));break;case "coverImg":this.coverExt=ea.format;this.coverBlob=ea.blob;this.removeError(".home-page__custom-image-inputs");this.tempOrgHomePage.header.showCoverImg=!0;this.tempOrgHomePage.header.coverImg=ea.lastBackgroundImage;this.coverURI=ea.lastBackgroundImage.replace(/^url\(/,"").replace(/\)$/,"");sa.setCoverImage(ea.lastBackgroundImage);break;case "showCoverImg":this.tempOrgHomePage.header.showCoverImg=ea;this.tempOrgHomePage.header.showCoverImg?1===this.tempOrgHomePage.header.opacity&&
(this.tempOrgHomePage.header.opacity=.45,this._userCoverImgOpacity(.45),sa.setOpacity(.45)):(this.tempOrgHomePage.header.opacity=1,this._userCoverImgOpacity(1),sa.setOpacity(1));sa.setCoverImage(ea?this.tempOrgHomePage.header.coverImgLayout:"none");this.onHeaderChange("coverType",this.tempOrgHomePage.header.coverType);break;case "coverImgStock":this.useStockImage(ea);break;case "titleLogoPos":ma.setTitleAndLogoPlacement(ea);sa.setTitleAndLogoPlacement(ea);pa.setTitleAndLogoPlacement(ea);if("above"===
ea||"below"===ea)this.tempOrgHomePage.header.opacity=0,this._userCoverImgOpacity(0);else if("above"===this.tempOrgHomePage.header.titleLogoPos||"below"===this.tempOrgHomePage.header.titleLogoPos)this.tempOrgHomePage.header.opacity=.45,this._userCoverImgOpacity(.45);this.tempOrgHomePage.header.titleLogoPos=ea;this.calculateHeaderHeight();break;case "titleLogoAlign":this.tempOrgHomePage.header.titleLogoAlign=ea;ma.setTitleAndLogoAlignment(ea);sa.setTitleAndLogoAlignment(ea);pa.setTitleAndLogoAlignment(ea);
break;case "opacity":this.tempOrgHomePage.header.opacity=ea;sa.setOpacity(ea);break;case "coverImgLayout":this.tempOrgHomePage.header.coverImgLayout=ea;sa.setCoverImageLayout(ea);this.calculateHeaderHeight();break;case "coverImgPlacement":this.tempOrgHomePage.header.coverImgPlacement=ea,this._userCoverImgPlacement(ea)}};ha.prototype.onContentChange=function(V,ea){this.isSectionButton=!1;var U=this.tempOrgHomePage.content;switch(V){case "order":this._unsavedChanges=!0;this.tempOrgHomePage.content=
ea;this._drawContent();break;case "edit":this.editIndex=ea;this.state.page=this.tempOrgHomePage.content[ea].type+"-edit";"text-edit"===this.state.page?this.text=this.tempOrgHomePage.content[ea]:"link-edit"===this.state.page?this.link=this.tempOrgHomePage.content[ea]:this.gallery=this.tempOrgHomePage.content[ea];this._renderPage();break;case "addText":this.text=null;this.state.page="text";this._renderPage();break;case "addGallery":this.gallery=null;this.state.page="gallery";this._renderPage();break;
case "addLink":this.link=null;this.state.page="link";this._renderPage();break;case "delete":this._unsavedChanges=!0,U.splice(parseInt(ea,10),1),this.tempOrgHomePage.content=U,this.state.page="content",this._renderPage()}};ha.prototype.onTextChange=function(V,ea){this.isSectionButton=!1;this._setContentScroll(this.editIndex);this._unsavedChanges=!0;var U=this.setTextListenerContent(ea.index),ka=U.contItem;U=U.widge;switch(V){case "showTitle":ka.showTitle=null===ea||void 0===ea?void 0:ea.state;U.showTitle(null===
ea||void 0===ea?void 0:ea.state);break;case "title":ka.title=this.stripHTML(null===ea||void 0===ea?void 0:ea.title);U.setTitle(this.stripHTML(null===ea||void 0===ea?void 0:ea.title));break;case "showBody":ka.showBody=null===ea||void 0===ea?void 0:ea.state;U.showBody(null===ea||void 0===ea?void 0:ea.state);break;case "body":ka.body=this.stripHTML(null===ea||void 0===ea?void 0:ea.body);U.setBody(this.stripHTML(null===ea||void 0===ea?void 0:ea.body));break;case "alignment":ka.alignment=null===ea||void 0===
ea?void 0:ea.align;U.setAlignment(null===ea||void 0===ea?void 0:ea.align);break;case "color":this.tempOrgHomePage.useCustomStyles?ka.bgCustom=ea.color:ka.bgColor=ea.color,U.setBackgroundColor(ea.color)}};ha.prototype.onLinksChange=function(V,ea){this.isSectionButton=!1;this._setContentScroll(this.editIndex);if(!ea&&0!==ea)return!1;this._unsavedChanges=!0;var U=this.setLinkListenerContent(ea.index),ka=U.contItem;U=U.widge;switch(V){case "links":ka.links=ea.links;this.link=ka;this._drawContent();this._setContentScroll(ea.index);
break;case "linkImages":if(!("linkImages"in ea)&&ea.linkImages)return!1;V=0;for(ea=Object.entries(ea.linkImages);V<ea.length;V++)ka=ea[V],this.linkImages[ka[0]]=ka[1];break;case "color":this.tempOrgHomePage.useCustomStyles?ka.bgCustom=ea.color:ka.bgColor=ea.color;ka.links.length&&(null===U||void 0===U?void 0:U.setBackgroundColor(ea.color));break;case "images":ka.images=ea.images;this._drawContent();break;case "showOutline":ka.showOutline=ea.showOutline;this._drawContent();break;case "noLinks":this.onContentChange("delete",
ea);break;case "hasLinks":this.state.page="content",this._renderPage()}};ha.prototype.onGalleryChange=function(V,ea){this.isSectionButton=!1;this._unsavedChanges=!0;var U=this.setGalleryListenerContent(ea.index),ka=U.contItem;U=U.widge;this._setContentScroll(this.editIndex);switch(V){case "groupId":ka.groupId=ea.value;this.gallery=ka;U.setGroupID(ea.value);break;case "showViewLink":ka.showViewLink=ea.value;this.gallery=ka;U.showViewLink(ea.value);break;case "sortField":ka.sortField=ea.value;this.gallery=
ka;U.setSortField(ea.value);break;case "sortAsc":ka.sortAsc=ea.value;this.gallery=ka;U.setSortAsc(ea.value);break;case "itemType":ka.itemType=ea.value;this.gallery=ka;U.setItemType(ea.value,ea.callback);break;case "title":ka.title=ea.value;this.gallery=ka;U.setTitle(ea.value);break;case "showTitle":ka.showTitle=ea.value;this.gallery=ka;U.showTitle(ea.value);U.setTitle(ka.title);break;case "summary":ka.summary=ea.value;this.gallery=ka;U.setSummary(ea.value);break;case "showSummary":ka.showSummary=
ea.value;this.gallery=ka;U.showSummary(ea.value);break;case "alignment":ka.alignment=ea.value;this.gallery=ka;U.setAlignment(ea.value);break;case "showItemThumb":ka.showItemThumb=ea.value;this.gallery=ka;U.showItemThumb(ea.value);break;case "showItemTitle":ka.showItemTitle=ea.value;this.gallery=ka;U.showItemTitle(ea.value);break;case "showItemSummary":ka.showItemSummary=ea.value;this.gallery=ka;U.showItemSummary(ea.value);break;case "showItemType":ka.showItemType=ea.value;this.gallery=ka;U.showItemType(ea.value);
break;case "numItems":ka.numItems=ea.value;this.gallery=ka;U.setNumItems(ea.value);break;case "color":this.tempOrgHomePage.useCustomStyles?ka.bgCustom=ea.color:ka.bgColor=ea.color,U.setBackgroundColor(ea.color)}};ha.prototype.onFooterChange=function(V,ea){this.isSectionButton=!1;this.setContentScrollTop(this.footerWidget.domNode);switch(V){case "copy":this._unsavedChanges=!0;this.tempOrgHomePage.footer.copy=ea;this.footerWidget.setCopy(ea);break;case "contact":this._unsavedChanges=!0;this.tempOrgHomePage.footer.contact=
ea;this.footerWidget.setContact(ea);break;case "showContact":this._unsavedChanges=!0;this.tempOrgHomePage.footer.showContact=ea;this.footerWidget.showContact(ea);ea||this.removeError(".contactEmail");break;case "showCopy":this._unsavedChanges=!0;this.tempOrgHomePage.footer.showCopy=ea;this.footerWidget.showCopy(ea);break;case "contactBlur":ea&&(this.tempOrgHomePage.footer.contact=this.stripHTML(ea).replace(/(\s|\t|\n|\f)+/g,""),this.updateContactEmail(null,!0,0===this.tempOrgHomePage.footer.contact.length));
break;case "color":this._unsavedChanges=!0,this.tempOrgHomePage.useCustomStyles?(this.tempOrgHomePage.footer.bgCustom=ea,this.footerWidget.setBackgroundColor(null,ea,!0)):(this.tempOrgHomePage.footer.bgColor=ea,this.footerWidget.setBackgroundColor(ea,null,!1))}};ha.prototype.onTypographyChange=function(V,ea){this.isSectionButton=!1;this._unsavedChanges=!0;switch(V){case "useCustomTypography":this.tempOrgHomePage.useCustomTypography=ea;(0,a.useHomePageFonts)(this.tempOrgHomePage);break;case "typography":this.tempOrgHomePage.typography=
ea;(0,a.useHomePageFonts)(this.tempOrgHomePage);break;case "customTypography":this.tempOrgHomePage.customTypography=ea;(0,a.useHomePageFonts)(this.tempOrgHomePage);break;case "typographyOnboard":this.openTypographyOnboarding()}};ha.prototype.onColorsChange=function(V,ea){this.isSectionButton=!1;this._unsavedChanges=!0;switch(V){case "customColorSectionChange":if("header"===ea.section)this.onHeaderChange("color",ea.value);else if("footer"===ea.section)this.onFooterChange("color",ea.value);else{V=ea.section.split(":");
var U=this.setGalleryListenerContent(V[1]).contItem;this._setContentScroll(V[1]);U=U.type;if("gallery"===U)this.onGalleryChange("color",{index:V[1],color:ea.value});else if("text"===U)this.onTextChange("color",{index:V[1],color:ea.value});else if("link"===U)this.onLinksChange("color",{index:V[1],color:ea.value})}break;case "baseColor":this.tempOrgHomePage.baseColor=ea;this.footerWidget.baseColor=ea;this._drawContent();break;case "customStyles":this.tempOrgHomePage.customStyles=ea;(0,a.writeCustomStyles)(this.tempOrgHomePage.customStyles);
break;case "useCustomStyles":this.tempOrgHomePage.useCustomStyles=ea;this._renderPage();break;case "customColorsDelete":this.tempOrgHomePage.customStyles=ea;break;case "customColorsDeleteFromWarn":this.tempOrgHomePage.header=ea.header;this.tempOrgHomePage.content=ea.content;this.tempOrgHomePage.footer=ea.footer;this._renderPage();setTimeout(function(){document.querySelector(".style-content-card--custom button.edit-wrap").focus()},500);break;case "colorOnboard":this.openColorsOnboarding()}};ha.prototype.setTextListenerContent=
function(V){this.editIndex=V;return{contItem:this.tempOrgHomePage.content[V],widge:this.contentWidgetArray[V]}};ha.prototype.setLinkListenerContent=function(V){this.editIndex=V;return{contItem:this.tempOrgHomePage.content[V],widge:this.contentWidgetArray[V]}};ha.prototype.setGalleryListenerContent=function(V){this.editIndex=V;return{contItem:this.tempOrgHomePage.content[V],widge:this.contentWidgetArray[V]}};ha.prototype.initTransitionalUI=function(){if(x.default.hasTransitionalHomePageEnabled(this.portal)&&
!x.default.hasViewOnlyHomePageEnabled(this.portal)&&(A.default.hideNode(this.switchToNewBtn.parentElement),this.hasSavedConfig)){var V=document.createElement("div");V.id="transitional-message";document.body.appendChild(V);var ea=da.default.orgHomePageSetup.transition,U=function(){A.default.removeComponent(V,document.body)};(0,c.render)((0,c.h)(ca.default,{strings:{title:ea.title,description:ea.description,ok:da.default.common.ok,close:da.default.common.close},onCancel:U,onOk:U,autoCloseOnOk:!0,hideCancel:!0}),
V);V.firstElementChild.classList.add("bring-modal-to-front")}};ha.prototype._renderPage=function(){if("start"===this.state.page)this._renderStart();else if("header"===this.state.page)this._renderHeader();else if(this.state.page.match(/^cover/)){var V=this.state.page.split("-");this.state.page="cover";this.state.section=V[1];this._renderCover()}else this.state.page.match(/^content/)?(this._leftBarDiv.innerHTML="","content"===this.state.page&&(this.gallery=null),V=this.state.page.split("-"),this.state.page=
"content",1<V.length&&("gallery"===V[1]?"cancel"===V[2]&&this.removeLastRow():"text"===V[1]&&"cancel"===V[2]&&this.removeLastRow()),this._renderContent()):"footer"===this.state.page?this._renderFooter():"gallery"===this.state.page?this._renderGallery():"text"===this.state.page?this._renderText():"link"===this.state.page?this._renderLink():"styles"===this.state.page?this._renderStyles():"typography"===this.state.page?this._renderTypography():"link-change"===this.state.page?this._renderLink(this.link):
"gallery-edit"===this.state.page?this._renderGallery(this.gallery):"text-edit"===this.state.page?this._renderText(this.text):"link-edit"===this.state.page&&this._renderLink(this.link);this._addButtonListeners();"text"!==this.state.page&&"text-edit"!==this.state.page&&"gallery"!==this.state.page&&"gallery-edit"!==this.state.page&&"link"!==this.state.page&&"link-edit"!==this.state.page&&this._drawContent();this.calculateHeaderHeight()};ha.prototype._renderStart=function(){this._leftBarDiv.innerHTML=
"";(0,c.render)((0,c.h)(fa.default,{}),this._leftBarDiv)};ha.prototype._renderHeader=function(){var V=this;this._leftBarDiv.innerHTML="";var ea=this.sectionErrorChk(this.state.page);(0,c.render)((0,c.h)(la.default,{HP:this.tempOrgHomePage,onHeaderChange:this.onHeaderChange.bind(this),onCustColorChange:this.onColorsChange.bind(this),customColorDiv:this.customColorDiv,portal:this.portal,key:Date.now(),onOpenCoverDialog:function(){V.untrapFocus()},onCloseCoverDialog:function(){V.trapFocus()}}),this._leftBarDiv);
"above"!==this.tempOrgHomePage.header.titleLogoPos&&setTimeout(function(){V.setContentScrollTop(V.headerWidget.domNode);V.domNode.querySelector(".setup-container .org-button.back-button").focus()},700);this.showErrors(ea);this.calculateHeaderHeight()};ha.prototype._renderText=function(V){V?(this._leftBarDiv.innerHTML="",V=this.sectionErrorChk(this.state.page),(0,c.render)((0,c.h)(T.default,{portal:this.portal,HP:this.tempOrgHomePage,index:this.editIndex,onTextChange:this.onTextChange.bind(this),onCustColorChange:this.onColorsChange.bind(this),
customColorDiv:this.customColorDiv,key:Date.now()}),this._leftBarDiv),this.showErrors(V),this._setContentScroll(this.editIndex)):(this.text={type:"text",title:da.default.orgHomePageSetup.galleryText.defaultTextTitle,showTitle:!0,body:da.default.orgHomePageSetup.galleryText.defaultTextBody,showBody:!0,alignment:"left",bgColor:"medium-ramp",bgCustom:"dark-gray"},this.tempOrgHomePage.content.unshift(this.text),this.editIndex=0,this.state.page="text-edit",this._drawContent(),this._renderPage())};ha.prototype._renderFooter=
function(){var V=this;this._leftBarDiv.innerHTML="";var ea=this.sectionErrorChk(this.state.page);this.footerWidget.setCopy(this.tempOrgHomePage.footer.copy||"");(0,c.render)((0,c.h)(na.default,{portal:this.portal,HP:this.tempOrgHomePage,onFooterChange:this.onFooterChange.bind(this),onCustColorChange:this.onColorsChange.bind(this),customColorDiv:this.customColorDiv,key:Date.now()}),this._leftBarDiv);setTimeout(function(){V.setContentScrollTop(V.footerWidget.domNode)},700);this.showErrors(ea)};ha.prototype._renderCover=
function(){var V=this;this._leftBarDiv.innerHTML="";var ea=this.sectionErrorChk(this.state.page);(0,c.render)((0,c.h)(ta.default,{HP:this.tempOrgHomePage,LTR:this.isLeftToRight(),coverURI:this.coverURI,onHeaderChange:this.onHeaderChange.bind(this)}),this._leftBarDiv);"above"!==this.tempOrgHomePage.header.titleLogoPos&&setTimeout(function(){V.setContentScrollTop(V.headerWidget.domNode)},700);this.showErrors(ea);this.calculateHeaderHeight()};ha.prototype._renderContent=function(){this._leftBarDiv.innerHTML=
"";(0,c.render)((0,c.h)(Q.default,{portal:this.portal,HP:this.tempOrgHomePage,onContentChange:this.onContentChange.bind(this),groupKeyedTitles:this.groupKeyedTitles}),this._leftBarDiv)};ha.prototype._renderStyles=function(){var V=this;(0,c.render)((0,c.h)(X.default,{portal:this.portal,HP:this.tempOrgHomePage,onColorsChange:this.onColorsChange.bind(this),key:Date.now()}),this._leftBarDiv);setTimeout(function(){V.launchElement?V.launchElement.focus():document.querySelector(".org-button.back-button").focus()},
700)};ha.prototype._renderTypography=function(){(0,c.render)((0,c.h)(ia.default,{HP:this.tempOrgHomePage,onTypographyChange:this.onTypographyChange.bind(this)}),this._leftBarDiv);setTimeout(function(){document.querySelector(".org-button.back-button").focus()},700)};ha.prototype._mapContentColors=function(){var V=this,ea,U,ka,ma,sa,pa,Aa,za,Ba,ua,Fa;if(this.tempOrgHomePage.useCustomStyles)this.tempOrgHomePage.header.headerCustom?(null===(ea=this.tempOrgHomePage.header.headerCustom)||void 0===ea?0:
ea.match(/(custom|gray|black|white)[0-9]?$/i))?"white-ramp"===this.tempOrgHomePage.header.headerCustom?this.tempOrgHomePage.header.headerCustom="white":"light-ramp"===this.tempOrgHomePage.header.headerCustom?this.tempOrgHomePage.header.headerCustom="light-gray":"medium-ramp"===this.tempOrgHomePage.header.headerCustom?this.tempOrgHomePage.header.headerCustom="dark-gray":"dark-ramp"===this.tempOrgHomePage.header.headerCustom&&(this.tempOrgHomePage.header.headerCustom="black"):(null===(U=this.tempOrgHomePage.header.backgroundColor)||
void 0===U?0:U.match(/(gray|black|white)$/))?this.tempOrgHomePage.header.headerCustom=this.tempOrgHomePage.header.backgroundColor:0<=(null===(ka=this.tempOrgHomePage.header.backgroundColor)||void 0===ka?void 0:ka.indexOf("ramp"))&&("white-ramp"===this.tempOrgHomePage.header.backgroundColor?this.tempOrgHomePage.header.headerCustom="white":"light-ramp"===this.tempOrgHomePage.header.backgroundColor?this.tempOrgHomePage.header.headerCustom="light-gray":"medium-ramp"===this.tempOrgHomePage.header.backgroundColor?
this.tempOrgHomePage.header.headerCustom="dark-gray":"dark-ramp"===this.tempOrgHomePage.header.backgroundColor&&(this.tempOrgHomePage.header.headerCustom="black")):this.tempOrgHomePage.header.headerCustom="black",this.tempOrgHomePage.footer.bgCustom?(null===(ma=this.tempOrgHomePage.footer.bgCustom)||void 0===ma?0:ma.match(/(custom|gray|black|white)[0-9]?$/i))?"white-ramp"===this.tempOrgHomePage.footer.bgCustom?this.tempOrgHomePage.footer.bgCustom="white":"light-ramp"===this.tempOrgHomePage.footer.bgCustom?
this.tempOrgHomePage.footer.bgCustom="light-gray":"medium-ramp"===this.tempOrgHomePage.footer.bgCustom?this.tempOrgHomePage.footer.bgCustom="dark-gray":"dark-ramp"===this.tempOrgHomePage.footer.bgCustom&&(this.tempOrgHomePage.footer.bgCustom="black"):(null===(sa=this.tempOrgHomePage.footer.bgColor)||void 0===sa?0:sa.match(/(gray|black|white)$/))?this.tempOrgHomePage.footer.bgCustom=this.tempOrgHomePage.footer.bgColor:0<=this.tempOrgHomePage.footer.bgColor.indexOf("ramp")&&("white-ramp"===this.tempOrgHomePage.footer.bgColor?
this.tempOrgHomePage.footer.bgCustom="white":"light-ramp"===this.tempOrgHomePage.footer.bgColor?this.tempOrgHomePage.footer.bgCustom="light-gray":"medium-ramp"===this.tempOrgHomePage.footer.bgColor?this.tempOrgHomePage.footer.bgCustom="dark-gray":"dark-ramp"===this.tempOrgHomePage.footer.bgColor&&(this.tempOrgHomePage.footer.bgCustom="black")):this.tempOrgHomePage.footer.bgCustom="light-gray",this.tempOrgHomePage.content.forEach(function(va,xa){var Da,Ca,qa;va.bgCustom?(null===(Da=va.bgCustom)||void 0===
Da?0:Da.match(/(custom|gray|black|white)[0-9]?$/i))?"white-ramp"===va.bgCustom?V.tempOrgHomePage.content[xa].bgCustom="white":"light-ramp"===va.bgCustom?V.tempOrgHomePage.content[xa].bgCustom="light-gray":"medium-ramp"===va.bgCustom?V.tempOrgHomePage.content[xa].bgCustom="dark-gray":"dark-ramp"===va.bgCustom&&(V.tempOrgHomePage.content[xa].bgCustom="light-gray"):(null===(Ca=va.bgColor)||void 0===Ca?0:Ca.match(/(gray|black|white)$/))?V.tempOrgHomePage.content[xa].bgCustom=V.tempOrgHomePage.content[xa].bgColor:
0<=(null===(qa=va.bgColor)||void 0===qa?void 0:qa.indexOf("ramp"))&&("white-ramp"===va.bgColor?V.tempOrgHomePage.content[xa].bgCustom="white":"light-ramp"===va.bgColor?V.tempOrgHomePage.content[xa].bgCustom="light-gray":"medium-ramp"===va.bgColor?V.tempOrgHomePage.content[xa].bgCustom="dark-gray":"dark-ramp"===va.bgColor&&(V.tempOrgHomePage.content[xa].bgCustom="black")):V.tempOrgHomePage.content[xa].bgCustom="white"});else{if((null===(pa=this.tempOrgHomePage.header.backgroundColor)||void 0===pa?
0:pa.match(/(custom)/))||!this.tempOrgHomePage.header.backgroundColor)(null===(Aa=this.tempOrgHomePage.header.headerCustom)||void 0===Aa?0:Aa.match(/(gray|black|white)$/))||(null===(za=this.tempOrgHomePage.header.headerCustom)||void 0===za?0:za.match(/ramp/))?this.tempOrgHomePage.header.backgroundColor=this.tempOrgHomePage.header.headerCustom:!this.tempOrgHomePage.header.backgroundColor&&this.tempOrgHomePage.header.headerCustom.match(/(custom)/i)?this.tempOrgHomePage.header.backgroundColor=this._mapCustomToRamp(this.tempOrgHomePage.header.headerCustom):
this.tempOrgHomePage.header.backgroundColor="black";if((null===(Ba=this.tempOrgHomePage.footer.bgColor)||void 0===Ba?0:Ba.match(/(custom)/))||!this.tempOrgHomePage.footer.bgColor)(null===(ua=this.tempOrgHomePage.footer.bgCustom)||void 0===ua?0:ua.match(/(gray|black|white)$/))||(null===(Fa=this.tempOrgHomePage.footer.bgCustom)||void 0===Fa?0:Fa.match(/ramp/))?this.tempOrgHomePage.footer.bgColor=this.tempOrgHomePage.footer.bgCustom:!this.tempOrgHomePage.footer.bgColor&&this.tempOrgHomePage.footer.bgCustom.match(/(custom)/i)?
this.tempOrgHomePage.footer.bgColor=this._mapCustomToRamp(this.tempOrgHomePage.footer.bgCustom):this.tempOrgHomePage.footer.bgColor="light-ramp";this.tempOrgHomePage.content.forEach(function(va,xa){var Da,Ca,qa;if((null===(Da=va.bgColor)||void 0===Da?0:Da.match(/(custom)/))||!va.bgColor)(null===(Ca=va.bgCustom)||void 0===Ca?0:Ca.match(/(gray|black|white)$/))||(null===(qa=va.bgCustom)||void 0===qa?0:qa.match(/ramp/))?V.tempOrgHomePage.content[xa].bgColor=va.bgCustom:!V.tempOrgHomePage.content[xa].bgColor&&
V.tempOrgHomePage.content[xa].bgCustom.match(/(custom)/i)?V.tempOrgHomePage.content[xa].bgColor=V._mapCustomToRamp(V.tempOrgHomePage.content[xa].bgCustom):V.tempOrgHomePage.content[xa].bgColor="white"})}};ha.prototype._mapCustomToRamp=function(V){return"custom1"===V?"white-ramp":"custom2"===V?"light-ramp":"custom3"===V?"medium-ramp":"dark-ramp"};ha.prototype._initCustomStyles=function(){(0,a.writeCustomStyles)(this.tempOrgHomePage.customStyles)};ha.prototype._setContentScroll=function(V){if(this.domNode){var ea=
this.domNode.querySelectorAll(".home-page__content\x3ediv.home-page__content-block");this.setContentScrollTop(ea.item(V))}};ha.prototype._renderLink=function(V){var ea=this;this._leftBarDiv.innerHTML="";if(!V)return this.link={type:"link",showOutline:!1,bgColor:"light-ramp",bgCustom:"light-gray",links:[]},this.tempOrgHomePage.content.unshift(this.link),this.editIndex=0,this.state.page="link-edit",this._drawContent(),this._renderPage(),!1;(0,c.render)((0,c.h)(O.default,{HP:this.tempOrgHomePage,linkValues:V,
index:this.editIndex,portal:this.portal,onLinksChange:this.onLinksChange.bind(this),onCustColorChange:this.onColorsChange.bind(this),customColorDiv:this.customColorDiv,key:Date.now()}),this._leftBarDiv);setTimeout(function(){ea._setContentScroll(ea.editIndex)},100)};ha.prototype._renderGallery=function(V){var ea;if(V){this._leftBarDiv.innerHTML="";var U=this.sectionErrorChk(this.state.page);var ka=this.editIndex;var ma="".concat(this.gallery.title,"-").concat(ka);(0,c.render)((0,c.h)(Z.default,{portal:this.portal,
HP:this.tempOrgHomePage,index:ka,onGalleryChange:this.onGalleryChange.bind(this),onCustColorChange:this.onColorsChange.bind(this),key:ma,customColorDiv:this.customColorDiv,groups:this._groups}),this._leftBarDiv);this.showErrors(U);this._setContentScroll(this.editIndex)}else V=(null===(U=this._groups[0])||void 0===U?void 0:U.snippet)||"",this.gallery={type:"gallery",groupId:null===(ka=this._groups[0])||void 0===ka?void 0:ka.id,showViewLink:!1,sortField:"title",sortAsc:!0,itemType:"All",id:"",title:(null===
(ea=null===(ma=this._groups[0])||void 0===ma?void 0:ma.title)||void 0===ea?void 0:ea.substring(0,55))||"",showTitle:!0,summary:V,showSummary:!0,alignment:this.gallery?this.gallery.alignment:"left",showItemThumb:!0,showItemTitle:!0,showItemSummary:!0,showItemType:!0,bgColor:"white-ramp",bgCustom:"white",numItems:4},this.tempOrgHomePage.content.unshift(this.gallery),this.editIndex=0,this.state.page="gallery-edit",this._drawContent(),this._renderPage()};ha.prototype._getGroupList=function(){var V=this;
this.getGroups().then(function(ea){var U,ka;V._groups=ea;ea.length&&(V.defaultGroupName=(null===(U=V._groups[0].title)||void 0===U?void 0:U.substring(0,55))||"",V.defaultGroupSummary=V._groups[0].snippet,V.defaultGroupFeatured=null===(ka=V._groups[0].properties)||void 0===ka?void 0:ka.isFeatured);ea.forEach(function(ma){var sa,pa;V.groupTitles.push(ma.title.substring(0,55));V.groupKeyedTitles[ma.id]=ma.title.substring(0,55);V.groupSnippets.push(ma.snippet);V.groupFeatured[ma.id]=null===(sa=ma.properties)||
void 0===sa?void 0:sa.isFeatured;V.groupFeaturedIds[ma.id]=(null===(pa=ma.properties)||void 0===pa?void 0:pa.featuredItemIds)||[]})})};ha.prototype.getGroups=function(){var V="".concat(h.default.restBaseUrl,"community/groups");return G.default.fetchAllResources(V,{q:"orgid:".concat(this.portal.id,' AND (-owner:"esri_nav" -owner:"esri_boundaries" -owner:"esri_demographics" -owner:"esri_livingatlas") AND (access:org OR access:public)'),sortField:"title",sortOrder:"asc"})};ha.prototype.destroyTooltipDialogs=
function(){this.customColorsOnboard&&(M.default.close(this.customColorsOnboard),this.customColorsOnboard.destroy(),this.customColorsOnboard=void 0);this.typoCustomizationOnboard&&(M.default.close(this.typoCustomizationOnboard),this.typoCustomizationOnboard.destroy(),this.typoCustomizationOnboard=void 0)};ha.prototype._addButtonListeners=function(){var V=this;this.panelButtonListeners.forEach(function(U){return U.remove()});var ea=this.domNode.querySelectorAll(".org-button, .step-header");A.default.forEachNode(ea,
function(U){V.panelButtonListeners.push((0,I.default)(U,function(ka){V.isSectionButton=!0;V._findAction(ka.target);V.contentContainer.scrollTop=0;V._leftBarDiv.scrollTop=0;V.destroyTooltipDialogs()}))})};ha.prototype._findAction=function(V,ea){V=V.closest(".org-button:not(.link-section-button)");if(!V)return!1;ea||(ea=!1);if(-1<V.dataset.action.indexOf("gallery")&&0===this._groups.length)return!1;V!==document.body&&(this.state.page=V.dataset.action,this._renderPage());return null};ha.prototype.removeResource=
function(V){var ea="".concat(h.default.restBaseUrl,"portals/self/removeResource");return C.default.request({url:ea,content:{key:V}},{usePost:!0})};ha.prototype._fetchResourceUrl=function(V){return"".concat(h.default.restBaseUrl,"portals/self/resources/").concat(V,"?nocache\x3d").concat(Date.now(),"\x26token\x3d").concat(C.default.getToken())};ha.prototype._clearContent=function(){this.contentWidgetArray.forEach(function(ea){ea.destroyRecursive()});if(this.domNode){var V=this.domNode.querySelectorAll(".home-page-overlay__content .home-page__gallery, .home-page-overlay__content .home-page__text, .home-page-overlay__content .home-page__link, .home-page-overlay__content .home-page-group-div");
A.default.forEachNode(V,function(ea){ea.remove()})}};ha.prototype._drawContent=function(){var V=this;this._clearContent();var ea=document.querySelector(".home-page-overlay__content .home-page__below-header"),U=document.querySelector(".home-page-overlay__content .home-page__footer"),ka=this.tempOrgHomePage.content;this.contentWidgetArray=[];ka.forEach(function(ma,sa){var pa,Aa;if("gallery"===ma.type){var za="group".concat(null===(pa=ma.title)||void 0===pa?void 0:pa.replace(/[^a-zA-Z]/g,"")).concat(ma.groupId,
"-").concat(sa);V.destroyDijit([za]);sa=document.createElement("div");sa.id=za;sa.classList.add("home-page-group-div");ea.insertAdjacentElement("afterend",sa);V.contentContainer.insertBefore(sa,U);ma=new u.default({gallery:ma,portal:V.portal,sanitizer:V.sanitizer,markdown:V.markdown,preview:!0,baseColor:V.tempOrgHomePage.baseColor,useCustomStyles:V.tempOrgHomePage.useCustomStyles},sa);ma.startup();V.contentWidgetArray.push(ma)}else if("link"===ma.type){if(!ma.links||0===(null===(Aa=ma.links)||void 0===
Aa?void 0:Aa.length))return!1;pa="link".concat(ma.links[0].title.replace(/[^0-9a-zA-Z]+/g,"")).concat(sa);sa=document.createElement("div");sa.classList.add("home-page__link");sa.id=pa;ea.insertAdjacentElement("afterend",sa);V.contentContainer.insertBefore(sa,U);pa=new m.default({link:ma,portal:V.portal,sanitizer:V.sanitizer,markdown:V.markdown,preview:!0,baseColor:V.tempOrgHomePage.baseColor||"gs",useCustomStyles:V.tempOrgHomePage.useCustomStyles},sa);pa.startup();V.contentWidgetArray.push(pa);sa.innerHTML=
ma.links[0].title}else pa="text".concat(null===(za=ma.title)||void 0===za?void 0:za.replace(/[^a-zA-Z]/g,""),"-").concat(sa),V.destroyDijit([pa]),sa=document.createElement("div"),sa.id=pa,ea.insertAdjacentElement("afterend",sa),V.contentContainer.insertBefore(sa,U),ma=new g.default({text:ma,portal:V.portal,sanitizer:V.sanitizer,markdown:V.markdown,preview:!0,baseColor:V.tempOrgHomePage.baseColor||"gs",useCustomStyles:V.tempOrgHomePage.useCustomStyles},sa),ma.startup(),V.contentWidgetArray.push(ma)})};
ha.prototype.saveLinkImg=function(V,ea,U){var ka,ma=V.split("."),sa=ma.pop();ma=ma.join("");var pa=Date.now();this.saveLinkNewName="".concat(ma).concat(pa,".").concat(sa);this.linkImages[V]?(sa=null===(ka=this.linkImages[V])||void 0===ka?void 0:ka.blob,this.saveLinkIndex=ea,this.saveLinkIndex2=U,this.saveLinkFname=V,V="".concat(h.default.restBaseUrl,"portals/self/addResource?token\x3d").concat(C.default.getToken()),ea=new FormData,ea.append("file",sa),ea.append("key",this.saveLinkNewName),ea.append("f",
"json"),C.default.postForm(ea,V,this._addLinkImage.bind(this),this._addLinkImageFailure.bind(this))):(this.tempOrgHomePage.content[this.saveLinkIndex].links[this.saveLinkIndex2].image="",this.saveToHomePage())};ha.prototype._addLinkImage=function(){var V;this.tempOrgHomePage.content[this.saveLinkIndex].links[this.saveLinkIndex2].image=this.saveLinkNewName;(null===(V=this.linkImages[this.saveLinkFname])||void 0===V?0:V.prevFile)&&this.removeResource(this.linkImages[this.saveLinkFname].prevFile);this.saveToHomePage()};
ha.prototype._addLinkImageFailure=function(V){F.default.showAlert("error",da.default.orgHomePageSetup.link.linkImgError)};ha.prototype.sectionErrorChk=function(V){var ea=[];this.errors.forEach(function(U){U.displayState===V.split("-")[0]&&ea.push(U)});return ea};ha.prototype.removeError=function(V){var ea=this,U=[];this.errors.forEach(function(ka){ka.errorField!==V?U.push(ka):ea.domNode&&y.default.clearState([ea.domNode.querySelector(ka.errorField),ea.domNode.querySelector(ka.errorMsgField)])});this.errors=
U};ha.prototype.showErrors=function(V){0<V.length&&(y.default.setInvalidState(this.domNode.querySelector(V[0].errorField),this.domNode.querySelector(V[0].errorMsgField),V[0].errorMsg,!0),this.setTACursor(document.querySelector(V[0].errorField)))};ha.prototype.errorCheckOnSave=function(){return 0<this.errors.length?(this.state.page=this.errors[0].displayState,this._renderPage(),!0):!1};ha.prototype.errorCheckImages=function(V){var ea,U;V&&"logo"!==V||null!==(ea=this.tempOrgHomePage.header.logo)&&void 0!==
ea&&ea.length||!this.tempOrgHomePage.header.showLogo||(this.removeError(".home-page__logo-inputs"),this.errors.push({displayState:"header",errorField:".home-page__logo-inputs",errorMsgField:".logo-image-error",errorMsg:da.default.orgHomePageSetup.header.noLogo}));V&&"custom"!==V||null!==(U=this.tempOrgHomePage.header.coverImg)&&void 0!==U&&U.length||!this.tempOrgHomePage.header.showCoverImg||"custom"!==this.tempOrgHomePage.header.coverType||(this.removeError(".home-page__custom-image-inputs"),this.errors.push({displayState:"header",
errorField:".home-page__custom-image-inputs",errorMsgField:".custom-image-error",errorMsg:da.default.orgHomePageSetup.header.noCover}))};ha.prototype.openColorsOnboarding=function(){this.launchElement=this.colorsOnboardBtn;this.destroyTooltipDialogs();(new l.default).open()};ha.prototype.openTypographyOnboarding=function(){this.launchElement=this.typographyOnboardBtn;this.destroyTooltipDialogs();(new n.default).open()};ha.prototype.switchAndSave=function(){var V=this;this.saveToHomePage().then(function(){V.switchToModern()})};
ha.prototype.switchToModern=function(){Y.default.publish("activate-homepage/modern");A.default.hideNode(this.switchToNewBtn.parentElement);this._overlayActionBar.classList.remove("home-page-overlay__action-bar-not-active");this._leftBarDiv.classList.remove("home-page-overlay__action-bar-not-active")};ha.prototype.saveToHomePage=function(){var V=this,ea=new R.default;this.tempOrgHomePage.footer.showContact&&this.updateContactEmail(null,!0);if(this.logoBlob)return this.saveLogo(),ea;if(this.coverBlob)return this.saveCover(),
ea;for(var U=0;U<this.tempOrgHomePage.content.length;U++){var ka=this.tempOrgHomePage.content[U];if("link"===ka.type)for(var ma=0;ma<ka.links.length;ma++){var sa=ka.links[ma];if("image"in sa&&(sa=sa.image||null)&&(sa=sa.split(" ^ "),2===sa.length)){if(this.linkImages[sa[0]])return this.saveLinkImg(sa[0],U,ma),ea;ka.links[ma].image=null}}}for(U=0;U<this.tempOrgHomePage.content.length;U++)if(ka=this.tempOrgHomePage.content[U],ma=!1,"gallery"===ka.type&&ka.showSummary&&!this.portal.isPortal&&D.default.containsHTTPProtocol(ka.summary)?
(this.gallery=ka,this.state.page="gallery-edit",ma=!0):"text"===ka.type&&ka.showBody&&!this.portal.isPortal&&D.default.containsHTTPProtocol(ka.body)&&(this.text=ka,this.state.page="text-edit",ma=!0),ma)return this.editIndex=U,this._renderPage(),ea;if(this.errorCheckOnSave()){var pa=!1;this.errors.forEach(function(Aa){"footer"===Aa.displayState?(pa=!0,V.state.page="footer",V._renderPage()):".home-page__custom-image-inputs"===Aa.errorField?V.tempOrgHomePage.header.coverType="stock":".home-page__logo-inputs"===
Aa.errorField&&(V.tempOrgHomePage.header.showLogo=!1)});if(pa)return this._unsavedChanges=!0,ea.resolve(!1),ea;this.errors.length&&(this.errors=[],this._renderPage())}U=document.createElement("form");U.method="post";U.enctype="multipart/form-data";U=new FormData(U);U.append("key",this.homePageFile);U.append("text",JSON.stringify((0,a.encodeHomePageConfiguration)(this.tempOrgHomePage)));w.default.add(U).then(function(){V.emit("save");V.runTelemetry();F.default.showAlert("success",da.default.orgHomePageSetup.save.success);
V.orgHomePage.header.coverImg&&V.orgHomePage.header.coverImg!==V.tempOrgHomePage.header.coverImg&&V.removeResource(V.orgHomePage.header.coverImg);V.orgHomePage.header.logo&&V.orgHomePage.header.logo!==V.tempOrgHomePage.header.logo&&V.removeResource(V.orgHomePage.header.logo);V.orgHomePage=(0,ja.default)(V.tempOrgHomePage);V._unsavedChanges=!1;ea.resolve()},function(Aa){F.default.showAlert("error",da.default.orgHomePageSetup.save.error);ea.reject()});return ea};ha.prototype.runTelemetry=function(){var V,
ea,U,ka,ma,sa,pa,Aa,za;null===(V=this.telemetry)||void 0===V?void 0:V.logEvent({category:"new home page editor",label:"body textBlock",count:this.tempOrgHomePage.content.filter(function(Ba){return"text"===Ba.type}).length});null===(ea=this.telemetry)||void 0===ea?void 0:ea.logEvent({category:"new home page editor",label:"body itemGalleryBlock",count:this.tempOrgHomePage.content.filter(function(Ba){return"gallery"===Ba.type}).length});null===(U=this.telemetry)||void 0===U?void 0:U.logEvent({category:"new home page editor",
label:"body linksBlock",count:this.tempOrgHomePage.content.filter(function(Ba){return"link"===Ba.type}).length});null===(ka=this.telemetry)||void 0===ka?void 0:ka.logEvent({category:"new home page editor",label:"header coverType",details:this.tempOrgHomePage.header.coverType});null===(ma=this.telemetry)||void 0===ma?void 0:ma.logEvent({category:"new home page editor",label:"header coverImgLayout",details:"full-height"===this.tempOrgHomePage.header.coverImgLayout.toLowerCase()?"full-height":"half-height"});
null===(sa=this.telemetry)||void 0===sa?void 0:sa.logEvent({category:"new home page editor",label:"footer showContact",details:"".concat(this.tempOrgHomePage.footer.showContact)});V=this.tempOrgHomePage.useCustomTypography;ea=this.tempOrgHomePage[V?"customTypography":"typography"];null===(pa=this.telemetry)||void 0===pa?void 0:pa.logEvent({category:"new home page editor",label:"font style",details:V?"custom":"preset",attribute:(null===ea||void 0===ea?void 0:ea.join(","))||"Avenir Next,Avenir Next"});
pa=this.tempOrgHomePage.useCustomStyles;V={category:"new home page editor",label:"color style",details:pa?"custom":"preset"};pa?V.count=(null===(Aa=this.tempOrgHomePage.customStyles)||void 0===Aa?void 0:Aa.length)||0:V.attribute=this.tempOrgHomePage.baseColor;null===(za=this.telemetry)||void 0===za?void 0:za.logEvent(V)};ha.prototype.updateContactEmail=function(V,ea,U){if(ea)V=this.tempOrgHomePage.footer.contact;else{ea=V.detail.trim();var ka=this.stripHTML(ea);ea!==ka&&(V.detail=ka);V=V.detail}ea=
V.length&&!V.match(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+(\.[a-zA-Z0-9]+)*$/);!this.tempOrgHomePage.footer.showContact||!ea&&V.length?this.removeError(".contactEmail"):(this.removeError(".contactEmail"),this.errors.push({displayState:"footer",errorField:".contactEmail",errorMsgField:".invalid-email-address",errorMsg:da.default.orgHomePageSetup.footer.invalidEmail}),U||y.default.setInvalidState(document.querySelector(".contactEmail"),document.querySelector(".invalid-email-address"),da.default.orgHomePageSetup.footer.invalidEmail,
!0));this.tempOrgHomePage.footer.contact=!this.tempOrgHomePage.footer.showContact&&ea&&V.length?"":V;this._unsavedChanges=!0;this.domNode&&(U=this.domNode.querySelector(".home-page-footer-email"),this.tempOrgHomePage.footer.showContact&&(U.href="mailto:"+this.tempOrgHomePage.footer.contact))};ha.prototype.loadExistingHomePage=function(){var V=this,ea=new R.default;w.default.fetch(this.homePageFile).then(function(U){V.hasSavedConfig=!0;V.orgHomePage=(0,a.decodeHomePageConfiguration)(U);ea.resolve(V.orgHomePage)},
function(){(0,a.getDefaultOrgHomePage)(V.portal).then(function(U){V.orgHomePage=(0,ja.default)(U);ea.resolve(V.orgHomePage)})});return ea};ha.prototype._userCoverImgPlacement=function(V){var ea=this.domNode.querySelector(".home-page__header");ea.style.backgroundPositionX=V.x;ea.style.backgroundPositionY=V.y};ha.prototype._userCoverImgOpacity=function(V){this.headerWidget.setOpacity(V);var ea=(0,e.getOverlayColor)(this.tempOrgHomePage);V="rgba(".concat(ea).concat((null===V||void 0===V?void 0:V.toFixed(2))||
0,")");if(ea=this.domNode.querySelector(".placement-guide-overlay"))ea.style.backgroundColor=V};ha.prototype._setOrgTitleColor=function(){var V=this.tempOrgHomePage.useCustomStyles?this.tempOrgHomePage.header.headerCustom:this.tempOrgHomePage.header.backgroundColor.replace("ramp",this.tempOrgHomePage.baseColor);this.headerWidget.baseColor=this.tempOrgHomePage.baseColor;this.headerWidget.useCustomStyles=this.tempOrgHomePage.useCustomStyles;this.aboveHeaderWidget.setTitleColor(V);this.headerWidget.setTitleColor(V);
this.belowHeaderWidget.setTitleColor(V);this.headerWidget.setOpacity(this.tempOrgHomePage.header.opacity)};ha.prototype.removeLastRow=function(){var V=document.querySelectorAll(".home-page__gallery, .home-page__text, .home-page__link");V[V.length-1].remove()};ha.prototype.setContentScrollTop=function(V){var ea=this;setTimeout(function(){var U,ka,ma;null===V||void 0===V?void 0:V.scrollIntoView({behavior:"smooth"});(null===(U=ea.launchElement)||void 0===U?0:U.closest(".home-page-overlay__left-panel"))&&
ea.launchElement.focus();ea.isSectionButton?null===(ka=ea.domNode.querySelector(".home-page-overlay__left-panel .org-button.back-button"))||void 0===ka?void 0:ka.focus():document.activeElement.closest(".home-page-overlay__left-panel")||(null===(ma=document.querySelector(".home-page-overlay__left-panel .org-button.back-button"))||void 0===ma?void 0:ma.focus())},1E3)};ha.prototype.destroyDijit=function(V){V.forEach(function(ea){L.default.byId(ea)&&L.default.byId(ea).destroy()})};ha.prototype.useStockImage=
function(V){this.tempOrgHomePage.header.coverImgStock=V;this._unsavedChanges=!0;V="".concat(C.default.relativeToExplicitUrl("js/arcgisonline/img/homepage_background-".concat(this.tempOrgHomePage.header.coverImgStock,".jpg")));this.headerWidget.setCoverImage("url(".concat(V,")"));V=this.tempOrgHomePage.header.titleLogoPos;V="above"===V||"below"===V?0:.45;this.tempOrgHomePage.header.opacity=V;this._userCoverImgOpacity(V);V=x.default.getTitleColorBasedOnStockImage(this.tempOrgHomePage.header.coverImgStock);
this.tempOrgHomePage.header.backgroundColor=V;this.tempOrgHomePage.header.headerCustom.match(/^custom/)||(this.tempOrgHomePage.header.headerCustom="dark-ramp"===V?"black":"white");this._setOrgTitleColor()};ha.prototype._addLogo=function(){this.tempOrgHomePage.header.logo!==this.orgHomePage.header.logo&&this.removeResource(this.orgHomePage.header.logo);this.logoBlob=null;this.saveToHomePage()};ha.prototype._addLogoFailure=function(V){F.default.showAlert("error",da.default.orgHomePageSetup.header.logoError)};
ha.prototype.saveLogo=function(){var V="".concat(h.default.restBaseUrl,"portals/self/addResource?token\x3d").concat(C.default.getToken()),ea=new FormData;ea.append("file",this.logoBlob);this.tempOrgHomePage.header.logo="home.logo".concat(this.tempOrgHomePage.key,".").concat(this.logoFileName.split(".").pop());ea.append("key",this.tempOrgHomePage.header.logo);ea.append("f","json");C.default.postForm(ea,V,this._addLogo.bind(this),this._addLogoFailure.bind(this))};ha.prototype.saveCover=function(){var V=
"".concat(h.default.restBaseUrl,"portals/self/addResource?token\x3d").concat(C.default.getToken()),ea=new FormData;ea.append("file",this.coverBlob);this.tempOrgHomePage.header.coverImg="home.coverimg".concat(this.tempOrgHomePage.key,".").concat(this.coverExt);ea.append("key",this.tempOrgHomePage.header.coverImg);ea.append("f","json");C.default.postForm(ea,V,this._addCover.bind(this),this._addCoverFailure.bind(this))};ha.prototype._addCover=function(){this.tempOrgHomePage.header.coverImg!==this.orgHomePage.header.coverImg&&
this.removeResource(this.orgHomePage.header.coverImg);this.coverBlob=null;this.saveToHomePage()};ha.prototype.onLogoDelete=function(V){V.stopPropagation();this.removeResource(this.tempOrgHomePage.header.logo);this.tempOrgHomePage.header.logo="";this.tempOrgHomePage.header.showLogo=!1;this.headerWidget.showLogo(!1);this.headerWidget.setLogo("");this._editBtn.innerText=this.logoText.uploadImage;this.state.page="header";this._renderPage()};ha.prototype._addCoverFailure=function(V){F.default.showAlert("error",
da.default.orgHomePageSetup.header.customError)};ha.prototype.chkLogoError=function(){""===this.tempOrgHomePage.header.logo&&y.default.setInvalidState(this.domNode.querySelector(".home-page__logo-inputs"),this.domNode.querySelector(".logo-image-error"),da.default.orgHomePageSetup.header.noLogo,!0)};ha.prototype.chkCoverImgError=function(){!this.tempOrgHomePage.header.showCoverImg||"custom"!==this.tempOrgHomePage.header.coverType||""!==this.tempOrgHomePage.header.coverImg||this.coverURI||this.updatingCustomCover||
y.default.setInvalidState(this.domNode.querySelector(".home-page__custom-image-inputs"),this.domNode.querySelector(".custom-image-error"),da.default.orgHomePageSetup.header.noCover,!0)};ha.prototype.setPreviewMode=function(V,ea){var U=this;this.currentView=ea;[this.tabletBtn,this.mobileBtn,this.desktopBtn].forEach(function(ka){ka===V?U.setActiveSize(ka):U.clearActiveSize(ka)});"desktop"===ea?this.preview.simulateDesktop():"tablet"===ea?this.preview.simulateTablet():this.preview.simulateMobile()};
ha.prototype.checkPreviewSize=function(){this.device.isMobile?(A.default.hideNodes([this.tabletBtn,this.desktopBtn]),"mobile"!==this.currentView&&this.setPreviewMode(this.mobileBtn,"mobile")):this.device.isTablet?(A.default.showNode(this.tabletBtn),A.default.hideNode(this.desktopBtn),"mobile"!==this.currentView&&this.setPreviewMode(this.tabletBtn,"tablet")):(A.default.showNodes([this.tabletBtn,this.desktopBtn]),"desktop"!==this.currentView&&this.setPreviewMode(this.desktopBtn,"desktop"))};ha.prototype.calculateHeaderHeight=
function(){var V=this.domNode.querySelector(".home-page-overlay__content .home-page__header.home-page__header--full-height"),ea=this.domNode.querySelector(".home-page-overlay__content .home-page__header.home-page__header--half-height"),U=this.domNode.querySelector(".home-page-overlay__content .home-page__header.home-page__header--two-thirds-height"),ka=this.domNode.querySelector(".home-page-overlay__content .home-page__header.home-page__header--no-image");if((V||ea||U)&&!ka){ka=this.aboveHeaderWidget.domNode.offsetHeight;
var ma=this.belowHeaderWidget.domNode.offsetHeight;ka=0<ka?ka:ma;V?V.style.height="calc(100% - ".concat(ka,"px)"):ea?ea.style.height="calc(50% - ".concat(ka,"px)"):U&&(U.style.height="calc(67% - ".concat(ka,"px)"))}};ha.prototype.setViewModeTip=function(V){"desktop"===V?(this.desktopBtn.classList.add("tooltip"),this.tabletBtn.classList.remove("tooltip"),this.mobileBtn.classList.remove("tooltip")):"tablet"===V?(this.tabletBtn.classList.add("tooltip"),this.desktopBtn.classList.remove("tooltip"),this.mobileBtn.classList.remove("tooltip")):
"mobile"===V&&(this.mobileBtn.classList.add("tooltip"),this.desktopBtn.classList.remove("tooltip"),this.tabletBtn.classList.remove("tooltip"))};ha.prototype.setTACursor=function(V){if(!V)return!1;V.scrollIntoView();V.setSelectionRange(this.textAreaCursor.start,this.textAreaCursor.end)};ha.prototype.stripHTML=function(V){return D.default.shouldStripHTML(V)?D.default.stripHTML(V):V};return ha=f.__decorate([(0,H.default)(K.default,E.default,d.default)],ha)}()})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/utils/homePageUtils":function(){define("require exports tslib ../../../../../utils/color dojo/i18n!../../../../../../nls/arcgisonline dojo/Deferred ../../../../../../esriGeowConfig ../../../../../../sharing/util ../../../../../pageUtil".split(" "),
function(S,J,f,c,h,d,b,a,e){function q(u){u=u.replace("-","").toLowerCase();"lightgs"===u?u="lightgray":"mediumgs"===u?u="darkgray":"darkgs"===u?u="black":"whitegs"===u&&(u="white");return h.default.orgHomePageSetup.colors[u]||""}function t(u){var g="".concat(b.default.restBaseUrl,"community/groups");return e.default.fetchAllResources(g,{q:"orgid:".concat(u.id,' AND (-owner:"esri_nav" -owner:"esri_boundaries" -owner:"esri_demographics" -owner:"esri_livingatlas") AND (access:org OR access:public)'),
sortField:"title",sortOrder:"asc"})}Object.defineProperty(J,"__esModule",{value:!0});J.getGroupList=J.getGroupCounts=J.toggleLinkButton=J.getColorName=J.getColors=J.getOverlayColor=J.overlayColors=J.getLinkRanges=J.srSpeak=J.fetchResourceUrl=J.getLinksLength=J.maxStyles=J.maxBlocks=void 0;c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);J.maxBlocks=15;J.maxStyles=4;J.getLinksLength=function(u){if(!u)return 0;
u=u.match(/\[[^\]]+\]\([^\)]+\)/g);var g=0;null===u||void 0===u?void 0:u.forEach(function(m){g+=m.length;m=m.replace(/\].+$/,"").length-1;g-=m});return g};J.fetchResourceUrl=function(u){return"".concat(b.default.restBaseUrl,"portals/self/resources/").concat(u,"?nocache\x3d").concat(Date.now(),"\x26token\x3d").concat(a.default.getToken())};J.srSpeak=function(u,g){g=g||"assertive";var m=document.createElement("div"),v="speak-"+Date.now();m.setAttribute("id",v);m.setAttribute("aria-live",g||"polite");
m.classList.add("visually-hidden");document.body.appendChild(m);window.setTimeout(function(){document.getElementById(v).innerHTML=u},100);window.setTimeout(function(){document.body.removeChild(document.getElementById(v))},1E3)};J.getLinkRanges=function(u){var g=[];if(!u)return g;u.split("").forEach(function(m,v){"["===m&&g.push(v+"-");")"===m&&g[g.length-1]&&(g[g.length-1]+=v.toString())});return g};J.overlayColors={gs:["f2f2f2","4a4a4a","222222"],brown:["f2ece6","7c410a","3e2105"],blue:["e5f1f9",
"0079c1","003d61"],green:["e9f3ea","288835","14441b"],yellow:["fefced","f9e54e","7d7327"],orange:["fef5e9","f89927","7c4d14"],red:["fbeae8","d83020","6c1810"],violet:["efebf5","633b9b","321e4e"]};J.getOverlayColor=function(u){if(u.useCustomStyles)if(u.header.headerCustom.match("custom")){var g=parseInt(u.header.headerCustom.replace("custom",""),10)-1;u=c.default.hexRgb(u.customStyles[g].background);u="".concat(u[0],", ").concat(u[1],", ").concat(u[2],",")}else u="black"===u.header.headerCustom||-1!==
u.header.headerCustom.indexOf("dark-")?"0,0,0,":"255,255,255,";else u.header.backgroundColor.match(/ramp$/)&&"gs"!==u.baseColor?(u=-1!==u.header.backgroundColor.indexOf("dark-")?c.default.hexRgb(J.overlayColors[u.baseColor][2]):"white-ramp"===u.header.backgroundColor?[255,255,255]:c.default.hexRgb(J.overlayColors[u.baseColor][0]),u="".concat(u[0],", ").concat(u[1],", ").concat(u[2],",")):u="black"===u.header.backgroundColor||-1!==u.header.backgroundColor.indexOf("dark-")?"0,0,0,":"255,255,255,";return u};
J.getColors=function(u,g,m){var v="",p=[],l=u.baseColor;if(null===m||void 0===m?0:m.match(/^custom/i)){var n=parseInt(m.replace(/^custom/i,""),10)-1;n=u.customStyles[n].name}else n=q(m.replace("-ramp",l));v=m.replace("-ramp","-"+u.baseColor);u.useCustomStyles?(u.customStyles.forEach(function(k,r){k&&p.push({name:k.name,class:"custom"+(r+1).toString(),value:"custom"+(r+1).toString()})}),p.push({name:q("white"),class:"white",value:"white"}),"header"!==g&&p.push({name:q("light-gray"),class:"light-gray",
value:"light-gray"},{name:q("dark-gray"),class:"dark-gray",value:"dark-gray"}),p.push({name:q("black"),class:"black",value:"black"})):(p.push({name:q("white"),class:"white",value:"white"}),"header"!==g&&p.push({name:q("light-gray"),class:"light-gray",value:"light-gray"},{name:q("dark-gray"),class:"dark-gray",value:"dark-gray"}),p.push({name:q("black"),class:"black",value:"black"}),"gs"!==l&&(p.push({name:q("white"+l),class:"white-"+l,value:"white-ramp"}),"header"!==g&&(p.push({name:q("light"+l),class:"light-"+
l,value:"light-ramp"}),p.push({name:q("medium"+l),class:"medium-"+l,value:"medium-ramp"})),p.push({name:q("dark"+l),class:"dark-"+l,value:"dark-ramp"})));return{startColor:n,startClassSuffix:v,menuColors:p}};J.getColorName=q;J.toggleLinkButton=function(u,g){document.querySelector(".home-page-overlay__left-panel .yes-link").classList.remove("hide");document.querySelector(".home-page-overlay__left-panel .no-link").classList.remove("hide");!u||g?document.querySelector(".home-page-overlay__left-panel .yes-link").classList.add("hide"):
document.querySelector(".home-page-overlay__left-panel .no-link").classList.add("hide")};J.getGroupCounts=function(u){var g=new d.default;u="".concat(b.default.restBaseUrl,"content/groups/").concat(u,"/search");a.default.request({url:u,content:{countFields:"access",start:1,num:0,countSize:200,sortField:"added",sortOrder:"desc",f:"json",token:a.default.getToken()}}).then(function(m){var v,p,l,n={public:0,shared:0,org:0,total:0,private:0};null===(l=null===(p=null===(v=m.aggregations)||void 0===v?void 0:
v.counts[0])||void 0===p?void 0:p.fieldValues)||void 0===l?void 0:l.forEach(function(k){n[k.value]=k.count;n.total+=k.count});g.resolve([n.public,n.org,n.total-n.org-n.public])});return g};J.getGroupList=function(u){var g=new d.default;t(u).then(function(m){g.resolve(m)});return g}})},"arcgisonline/pages/organization/widgets/onboard/HomePageColorsOnboardOverlay":function(){define("require exports tslib ../../../dijit/Overlay ../../components/HomePageColorsOnboard ../../../utils/whatsNew ../../../../tsutils/declareDecorator preact dojo/i18n!../../../../nls/arcgisonline dojo/i18n!../../../../nls/org-settings".split(" "),
function(S,J,f,c,h,d,b,a,e,q){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);e=f.__importDefault(e);q=f.__importDefault(q);return function(){function t(u,g){this.i18n=e.default;this.overlayContents='\x3cdiv class\x3d"js-home-page-colors-onboarding"\x3e\x3c/div\x3e';this.strings=f.__assign({},q.default.homePageTab.colorsOnboarding);this.maxWidth=600;this.constrain=!0;this.closeOnScrimClick=!1;this.background="white"}t.prototype.postMixInProperties=function(){this.inherited(arguments);
this.title=this.i18n.orgHomePageSetup.start.colors};t.prototype.open=function(){this.inherited(arguments);this._overlayActionBar.classList.add("hide");(0,a.render)((0,a.h)(h.default,{strings:this.strings}),this.domNode.querySelector(".js-home-page-colors-onboarding"));this.domNode.querySelector(".js-home-page-colors-onboarding").focus()};t.prototype.close=function(){this.inherited(arguments);d.default.set("colorsIntro")};return t=f.__decorate([(0,b.default)(c.default)],t)}()})},"arcgisonline/pages/organization/components/HomePageColorsOnboard":function(){define(["require",
"exports","tslib","../../../sharing/util","preact"],function(S,J,f,c,h){Object.defineProperty(J,"__esModule",{value:!0});c=f.__importDefault(c);J.default=function(d){d=d.strings;var b=c.default.relativeToExplicitUrl("js/arcgisonline/img/homepage_preset-themes.png"),a=c.default.relativeToExplicitUrl("js/arcgisonline/img/homepage_custom-themes.png"),e=c.default.relativeToExplicitUrl("js/arcgisonline/img/homepage_apply-blocks.png");return(0,h.h)("div",{class:"margin-left-1 margin-right-1 leader-1 trailer-1"},
(0,h.h)("div",{class:"flex trailer-1 homepage-onboarding__colors--row"},(0,h.h)("div",{class:"margin-right-quarter homepage-onboarding__colors--column"},(0,h.h)("img",{src:b,alt:""})),(0,h.h)("div",{class:"margin-left-quarter homepage-onboarding__colors--column"},(0,h.h)("label",{class:"avenir-demi font-size-1 trailer-quarter"},d.preset),(0,h.h)("div",{class:"font-size--1"},d.pickPreset))),(0,h.h)("div",{class:"flex trailer-1 homepage-onboarding__colors--row"},(0,h.h)("div",{class:"margin-right-quarter homepage-onboarding__colors--column"},
(0,h.h)("label",{class:"avenir-demi font-size-1 trailer-quarter"},d.custom),(0,h.h)("div",{class:"font-size--1"},d.useCustom)),(0,h.h)("div",{class:"margin-left-quarter homepage-onboarding__colors--column"},(0,h.h)("img",{src:a,alt:""}))),(0,h.h)("div",{class:"flex homepage-onboarding__colors--row"},(0,h.h)("div",{class:"margin-right-quarter homepage-onboarding__colors--column"},(0,h.h)("img",{src:e,alt:""})),(0,h.h)("div",{class:"margin-left-quarter homepage-onboarding__colors--column"},(0,h.h)("label",
{class:"avenir-demi font-size-1 trailer-quarter"},d.apply),(0,h.h)("div",{class:"font-size--1"},d.applyColors))))}})},"arcgisonline/pages/organization/widgets/onboard/HomePageTypographyOnboardOverlay":function(){define("require exports tslib ../../../dijit/Overlay ../../components/HomePageTypographyOnboard ../../../utils/whatsNew ../../../../tsutils/declareDecorator preact dojo/i18n!../../../../nls/arcgisonline dojo/i18n!../../../../nls/org-settings".split(" "),function(S,J,f,c,h,d,b,a,e,q){c=f.__importDefault(c);
h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);e=f.__importDefault(e);q=f.__importDefault(q);return function(){function t(u,g){this.i18n=e.default;this.overlayContents='\x3cdiv class\x3d"js-home-page-typo-onboarding"\x3e\x3c/div\x3e';this.strings=f.__assign({},q.default.homePageTab.typographyOnboarding);this.maxWidth=400;this.constrain=!0;this.closeOnScrimClick=!1;this.background="white"}t.prototype.postMixInProperties=function(){this.inherited(arguments);this.title=this.i18n.orgHomePageSetup.start.typography};
t.prototype.open=function(){this.inherited(arguments);this._overlayActionBar.classList.add("hide");(0,a.render)((0,a.h)(h.default,{strings:this.strings}),this.domNode.querySelector(".js-home-page-typo-onboarding"));this.domNode.querySelector(".js-home-page-typo-onboarding").focus()};t.prototype.close=function(){this.inherited(arguments);d.default.set("typoIntro")};return t=f.__decorate([(0,b.default)(c.default)],t)}()})},"arcgisonline/pages/organization/components/HomePageTypographyOnboard":function(){define(["require",
"exports","tslib","../../../sharing/util","preact"],function(S,J,f,c,h){Object.defineProperty(J,"__esModule",{value:!0});c=f.__importDefault(c);J.default=function(d){d=d.strings;var b=c.default.relativeToExplicitUrl("js/arcgisonline/img/homepage_typography.png");return(0,h.h)(h.Fragment,null,(0,h.h)("div",{class:"trailer-1 homepage-onboarding__typo--row"},(0,h.h)("img",{src:b,alt:""})),(0,h.h)("div",{class:"margin-left-2 margin-right-2 leader-1 trailer-1"},(0,h.h)("div",{class:"leader-1 trailer-1 homepage-onboarding__typo--row"},
(0,h.h)("label",{class:"avenir-demi font-size-1 trailer-quarter"},d.presetTheme),(0,h.h)("div",{class:"font-size--1"},d.pickFont)),(0,h.h)("div",{class:"leader-1 trailer-1 homepage-onboarding__typo--row"},(0,h.h)("label",{class:"avenir-demi font-size-1 trailer-quarter"},d.customTheme),(0,h.h)("div",{class:"font-size--1"},d.selectCombo))))}})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/HomePagePreview":function(){define("require exports tslib dojo/text!./HomePagePreview.html dojo/i18n!../../../../../nls/arcgisonline dijit/_TemplatedMixin dijit/_WidgetBase arcgisonline/pages/utils/icons arcgisonline/tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);return function(){function q(t,u){this.templateString=c.default;this.i18n=h.default;this.icons=a.default;this.inherited(arguments)}q.prototype.postCreate=function(){this.inherited(arguments)};q.prototype.simulateTablet=function(){this.domNode.className="home-page home-page--tablet flex-1 flex"};q.prototype.simulateMobile=function(){this.domNode.className=
"home-page home-page--mobile flex-1 flex"};q.prototype.simulateDesktop=function(){this.domNode.className="home-page flex-1 flex"};return q=f.__decorate([(0,e.default)(b.default,d.default)],q)}()})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/components/StartAdmin":function(){define("require exports tslib preact preact/hooks dojo/i18n!../../../../../../nls/arcgisonline".split(" "),function(S,J,f,c,h,d){Object.defineProperty(J,"__esModule",{value:!0});d=f.__importDefault(d);J.default=
function(){var b=(0,h.useRef)();(0,h.useEffect)(function(){b.current.focus()},[]);return(0,c.h)("div",{class:"setup-container"},(0,c.h)("div",{class:"org-section start-button",id:"startToHomeButton","aria-label":d.default.orgHomePageSetup.start.intro,"data-action":"start"},(0,c.h)("div",{class:"org-setup-header"},d.default.orgHomePageSetup.start.home),(0,c.h)("div",{class:"start-text"},d.default.orgHomePageSetup.start.intro)),(0,c.h)("div",{class:"org-setup-sub-header"},d.default.orgHomePageSetup.start.contentCaps),
(0,c.h)("div",{class:"org-button start-button",id:"startToHeaderButton","aria-label":d.default.orgHomePageSetup.start.header+", "+d.default.orgHomePageSetup.start.headerDesc,"data-action":"header",ref:b,tabIndex:0,role:"button"},(0,c.h)("div",{class:"org-setup-header"},d.default.orgHomePageSetup.start.header,(0,c.h)("svg",{viewBox:"0 0 16 16",width:"16",height:"16",class:"icon-inline  "},(0,c.h)("path",{d:"M13 5.293v1.414l-4.5 4.5-4.5-4.5V5.293l4.5 4.5z"}))),(0,c.h)("div",{class:"start-text"},d.default.orgHomePageSetup.start.headerDesc)),
(0,c.h)("div",{class:"org-button start-button",id:"startToContentButton","aria-label":d.default.orgHomePageSetup.start.body+", "+d.default.orgHomePageSetup.start.contentDesc,"data-action":"content",tabIndex:0,role:"button"},(0,c.h)("div",{class:"org-setup-header"},d.default.orgHomePageSetup.start.body,(0,c.h)("svg",{viewBox:"0 0 16 16",width:"16",height:"16",class:"icon-inline  "},(0,c.h)("path",{d:"M13 5.293v1.414l-4.5 4.5-4.5-4.5V5.293l4.5 4.5z"}))),(0,c.h)("div",{class:"start-text"},d.default.orgHomePageSetup.start.contentDesc)),
(0,c.h)("div",{class:"org-button start-button",id:"startToFooterButton","aria-label":d.default.orgHomePageSetup.start.footer+", "+d.default.orgHomePageSetup.start.footerDesc,"data-action":"footer",tabIndex:0,role:"button"},(0,c.h)("div",{class:"org-setup-header"},d.default.orgHomePageSetup.start.footer,(0,c.h)("svg",{viewBox:"0 0 16 16",width:"16",height:"16",class:"icon-inline  "},(0,c.h)("path",{d:"M13 5.293v1.414l-4.5 4.5-4.5-4.5V5.293l4.5 4.5z"}))),(0,c.h)("div",{class:"start-text"},d.default.orgHomePageSetup.start.footerDesc)),
(0,c.h)("div",{class:"org-setup-sub-header"},d.default.orgHomePageSetup.start.design),(0,c.h)("div",{class:"org-button start-button",id:"startToStylesButton","aria-label":d.default.orgHomePageSetup.start.colors+", "+d.default.orgHomePageSetup.start.colorsText,"data-action":"styles",tabIndex:0,role:"button"},(0,c.h)("div",{class:"org-setup-header"},d.default.orgHomePageSetup.start.colors,(0,c.h)("svg",{viewBox:"0 0 16 16",width:"16",height:"16",class:"icon-inline  "},(0,c.h)("path",{d:"M13 5.293v1.414l-4.5 4.5-4.5-4.5V5.293l4.5 4.5z"}))),
(0,c.h)("div",{class:"start-text"},d.default.orgHomePageSetup.start.colorsText)),(0,c.h)("div",{class:"org-button start-button",id:"startToTypographyButton","aria-label":d.default.orgHomePageSetup.start.typography+", "+d.default.orgHomePageSetup.start.typographyText,"data-action":"typography",tabIndex:0,role:"button"},(0,c.h)("div",{class:"org-setup-header"},d.default.orgHomePageSetup.start.typography,(0,c.h)("svg",{viewBox:"0 0 16 16",width:"16",height:"16",class:"icon-inline  "},(0,c.h)("path",
{d:"M13 5.293v1.414l-4.5 4.5-4.5-4.5V5.293l4.5 4.5z"}))),(0,c.h)("div",{class:"start-text"},d.default.orgHomePageSetup.start.typographyText)))}})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/components/HeaderAdmin":function(){define("require exports tslib preact preact/hooks ../utils/homePageUtils ../utils/StockImageSelect dojo/i18n!../../../../../../nls/arcgisonline ../../../../../utils/strings ../../../../../components/ImageUploadModal/ImageUploadModal ../utils/ColorSelect ../utils/CustomColorOverlay".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u){Object.defineProperty(J,"__esModule",{value:!0});b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);J.default=function(g){var m=g.HP,v=g.onHeaderChange,p=g.onCustColorChange,l=g.customColorDiv,n=g.onOpenCoverDialog,k=g.onCloseCoverDialog,r=g.portal,w=m.header,x="cover",D,G=(0,h.useRef)(),F=(0,h.useRef)(),A=(0,h.useRef)(),y=(0,h.useRef)();g=(0,h.useState)(w.showTitle);var z=g[0],
B=g[1],C=(0,h.useState)(w.title);g=C[0];var H=C[1];C=(0,h.useState)(w.showLogo);var E=C[0],K=C[1],I=(0,h.useState)(w.logo);C=I[0];var L=I[1],M=(0,h.useState)(w.coverType);I=M[0];var N=M[1];M=(0,h.useState)(w.showCoverImg);var P=M[0],R=M[1];M=w.coverImg;var Y="object"===typeof w.coverImgStock?w.coverImgStock.value:w.coverImgStock,ja=m.useCustomStyles?w.headerCustom:w.backgroundColor;w=(0,d.getColors)(m,"header",ja);w=(0,h.useState)({name:w.startColor,class:w.startClassSuffix,value:ja});var aa=w[0],
da=w[1];w=function(ia){ia=e.default.stripHTML(ia.target.value).substr(0,55);H(ia);v("title",ia)};var ra=function(){D||(D=document.createElement("div"),D.classList.add("homepage-logo-upload-container"),document.querySelector(".home-page-overlay__content").closest(".overlay").appendChild(D))},ca=function(){x="logo";ra();(0,c.render)((0,c.h)(q.default,{zoomToFull:!0,onSave:fa,onCancel:la,fromOverlay:!0,texts:{title:a.default.sharedStyles.uploadLogo}}),D);D.focus()},fa=function(ia){var X=ia.blob,ha=ia.base64;
ia=ia.fileName;L(ha);K(!0);v("showLogo",!E);v("logo",{blob:X,logoURI:ha,fileName:ia});la();G.current.focus()},la=function(){D.remove();D=void 0;k();setTimeout(function(){"logo"===x?G.current.focus():F.current.focus()},100)},ta=function(ia){ia=ia.target.value;v("coverType",ia);N(ia)},Q=function(){x="cover";ra();n();(0,c.render)((0,c.h)(q.default,{noEdit:!0,onSave:T,onCancel:la,fromOverlay:!0,texts:{title:a.default.orgHomePageSetup.header.uploadCustom,size:a.default.orgHomePageSetup.header.coverUploadDescription}}),
D);setTimeout(function(){document.querySelector(".homepage-logo-upload-container .close").focus()},200)},T=function(ia){var X=ia.format,ha=ia.blob;v("coverImg",{lastBackgroundImage:"url(".concat(ia.base64,")"),format:X,blob:ha});la();A.current.focus()},O=function(ia){v("coverImgStock",ia.value);A.current.focus()},Z=function(ia){v("color",ia.value);da(ia)},na=function(){(0,c.render)((0,c.h)(u.default,{portal:r,HP:m,index:parseInt(ja.replace("custom",""),10)-1,onCancel:function(){l.classList.add("hide");
y.current.focus()},onSave:function(ia,X){l.classList.add("hide");var ha=f.__assign({},m);ha.customStyles[ia]=X;ha=(0,d.getColors)(ha,"header","custom".concat(ia+1));X=ha.startColor;ha=ha.startClassSuffix;aa.value!=="custom".concat(ia+1)&&v("color","custom".concat(ia+1));p("customStyles",m.customStyles);y.current.focus();da({name:X,class:ha,value:"custom".concat(ia+1)})},key:Date.now()}),document.querySelector(".custom-color-overlay"));document.querySelector(".custom-color-overlay").classList.remove("hide")};
return(0,c.h)("div",{class:"setup-container flex-column"},(0,c.h)("div",{class:"org-button back-button","data-action":"start",tabIndex:0,role:"button"},(0,c.h)("div",{class:"org-setup-header flex flex-align-center"},(0,c.h)("calcite-icon",{scale:"s",icon:"chevron-left"}),(0,c.h)("div",{class:"flex-1 margin-left-quarter"},a.default.orgHomePageSetup.start.home))),(0,c.h)("div",{class:"setup-body-wrapper flex-1"},(0,c.h)("div",{class:"org-setup-header org-title-bar"},a.default.orgHomePageSetup.start.header),
(0,c.h)("div",{class:"org-section"},(0,c.h)("div",{class:"org-setup-text"},(0,c.h)("div",{class:"org-padding-top"},(0,c.h)("calcite-label",{layout:"inline-space-between"},a.default.orgHomePageSetup.header.showOrganizationTitle,(0,c.h)("calcite-switch",{name:"showTitle",value:"enabled",checked:z,"aria-label":a.default.orgHomePageSetup.header.showOrganizationTitle,scale:"l",oncalciteSwitchChange:function(){v("showTitle",!z);B(!z)}})))),(0,c.h)("div",{class:"org-setup-text"},z&&(0,c.h)("div",{class:"org-setup-text toggle__orgTitle"},
(0,c.h)("label",{class:"trailer-0"},a.default.orgHomePageSetup.header.organizationTitle,(0,c.h)("br",null),(0,c.h)("input",{name:"headerTitle",id:"headerTitle",class:"orgTitle",maxLength:55,placeholder:a.default.orgHomePageSetup.header.organizationTitle,"aria-label":a.default.orgHomePageSetup.header.organizationTitle,onKeyUp:w,value:g})))),(E||z)&&(0,c.h)("div",{class:"org-setup-text toggle__orgTitle leader-half"},(0,c.h)("div",{class:"trailer-0"},(0,c.h)("div",{class:"content-block-color-title"},
(0,c.h)("div",{class:"title"},a.default.orgHomePageSetup.header.organizationTitleColor),aa.value.match(/^custom/)&&(0,c.h)("a",{href:"javascript:void(0)",ref:y,onClick:na},(0,c.h)("div",{class:"edit-custom-block-color"},a.default.orgHomePageSetup.styles.editCustomStyle))),(0,c.h)(t.default,{id:"header-color-select",HP:m,section:"header",onSelect:Z,color:aa,title:a.default.orgHomePageSetup.start.header,labelSection:a.default.orgHomePageSetup.header.organizationTitleColor})))),(0,c.h)("div",{class:"org-section org-setup-text bottom-margin-half-rem org-padding-top"},
(0,c.h)("calcite-label",{layout:"inline-space-between"},a.default.orgHomePageSetup.header.showLogo,(0,c.h)("calcite-switch",{name:"showLogo",value:"enabled",checked:E,scale:"l",oncalciteSwitchChange:function(){v("showLogo",!E);K(!E)}})),E&&(0,c.h)("div",{class:"org-setup-text org-padding-top"},(0,c.h)("button",{class:"org-setup-text toggle__logo",ref:G,onClick:ca},(0,c.h)("div",{class:"home-page__image-upload-card org-subtext home-page__logo-inputs"},(0,c.h)("div",{class:"home-page__logo-name"},C?
a.default.orgHomePageSetup.header.logoApplied:a.default.orgHomePageSetup.header.noFileChosen),(0,c.h)("div",{tabIndex:0,class:"home-page__logo-link home-page__edit-btn"},C?a.default.orgHomePageSetup.header.replaceFile:a.default.orgHomePageSetup.header.chooseFile))),(0,c.h)("div",{class:"input-error-message logo-image-error"}))),(0,c.h)("div",{class:"org-section"},(0,c.h)("div",{class:"org-setup-text"},(0,c.h)("div",{class:"org-padding-top"},(0,c.h)("calcite-label",{layout:"inline-space-between"},
a.default.orgHomePageSetup.header.showCoverImg,(0,c.h)("calcite-switch",{name:"showCoverImg",value:"enabled",checked:P,scale:"l",oncalciteSwitchChange:function(){v("showCoverImg",!P);R(!P)}}))),P&&(0,c.h)("div",null,(0,c.h)("div",{class:"toggle__coverImg",ref:A},(0,c.h)("label",{class:"trailer-0",for:"stock-cover-radio"},(0,c.h)("input",{tabIndex:0,type:"radio",id:"stock-cover-radio",name:"coverImage",class:"coverImage coverImage-stock","aria-label":a.default.orgHomePageSetup.header.stockCover,value:"stock",
onClick:ta,checked:"stock"===I}),a.default.orgHomePageSetup.header.stockCover)),"stock"===I&&(0,c.h)("div",{class:"stock-images-container toggle__coverImg needs-cover-img"},(0,c.h)(b.default,{coverImgStock:Y,onStockImgChange:O})),(0,c.h)("div",{class:"toggle__coverImg needs-cover-img"},(0,c.h)("label",{class:"trailer-0",for:"custom-cover-radio"},(0,c.h)("input",{tabIndex:0,id:"custom-cover-radio",type:"radio",name:"coverImage",class:"coverImage coverImage-custom","aria-label":a.default.orgHomePageSetup.header.uploadCustom,
value:"custom",onClick:ta,checked:"custom"===I}),a.default.orgHomePageSetup.header.uploadCustom)),"custom"===I&&(0,c.h)("button",{class:"org-setup-text toggle__logo",ref:F,onClick:Q},(0,c.h)("div",{class:"home-page__image-upload-card org-subtext home-page__logo-inputs"},(0,c.h)("div",{class:"home-page__logo-name"},M?a.default.orgHomePageSetup.header.customApplied:a.default.orgHomePageSetup.header.noFileChosen),(0,c.h)("div",{tabIndex:0,class:"home-page__logo-link home-page__edit-btn"},M?a.default.orgHomePageSetup.header.replaceFile:
a.default.orgHomePageSetup.header.chooseFile)))))),(0,c.h)("div",{class:"org-button header-to-layout",id:"headerToLayoutButton","data-action":"cover-1",tabIndex:0,role:"button"},(0,c.h)("div",{class:"org-setup-header"},a.default.orgHomePageSetup.header.layoutOptions,(0,c.h)("calcite-icon",{scale:"s",icon:"chevron-right"})))))}})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/utils/StockImageSelect":function(){define("require exports tslib preact preact/hooks dojo/i18n!../../../../../../nls/arcgisonline ../../../../../../sharing/util".split(" "),
function(S,J,f,c,h,d,b){Object.defineProperty(J,"__esModule",{value:!0});d=f.__importDefault(d);b=f.__importDefault(b);J.default=function(a){var e=a.onStockImgChange;a=a.coverImgStock||"1";var q=[{name:d.default.orgHomePageSetup.header.violetRiver,value:"1",image:b.default.relativeToExplicitUrl("js/arcgisonline/img/homepage_background_t-1.png")},{name:d.default.orgHomePageSetup.header.emeraldRiver,value:"2",image:b.default.relativeToExplicitUrl("js/arcgisonline/img/homepage_background_t-2.png")},
{name:d.default.orgHomePageSetup.header.amberGeology,value:"3",image:b.default.relativeToExplicitUrl("js/arcgisonline/img/homepage_background_t-3.png")},{name:d.default.orgHomePageSetup.header.lilacGeology,value:"4",image:b.default.relativeToExplicitUrl("js/arcgisonline/img/homepage_background_t-4.png")},{name:d.default.orgHomePageSetup.header.goldSoil,value:"5",image:b.default.relativeToExplicitUrl("js/arcgisonline/img/homepage_background_t-5.png")},{name:d.default.orgHomePageSetup.header.silverSoil,
value:"6",image:b.default.relativeToExplicitUrl("js/arcgisonline/img/homepage_background_t-6.png")}];a=parseInt(a,10)-1;a=(0,h.useState)(q[a]);var t=a[0],u=a[1];a=(0,h.useRef)();var g=(0,h.useRef)(),m=(0,h.useRef)(),v=(0,h.useRef)();(0,h.useEffect)(function(){t||u(q[0])},[]);var p,l=function(x){n();document.body.removeEventListener("click",k);x=parseInt(x.target.dataset.value,10)-1;x=q[x];u(x);e(x)},n=function(){var x=v.current.offsetTop;x>window.innerHeight-(x+45)-v.current.offsetHeight?(m.current.style.top=
"inherit",m.current.style.bottom=v.current.offsetHeight+"px"):(m.current.style.top=v.current.offsetHeight+"px",m.current.style.bottom="inherit");g.current.classList.toggle("hide");x=g.current.classList.contains("hide");var D=g.current.querySelectorAll(".option");p=D[0];D=D[D.length-1];document.body.removeEventListener("click",k);D.removeEventListener("blur",n);x?(v.current.focus(),v.current.setAttribute("aria-expanded","false"),v.current.removeAttribute("aria-activedescendant"),p=void 0):(null===
p||void 0===p?void 0:p.focus(),v.current.setAttribute("aria-expanded","true"),D.addEventListener("blur",n),document.body.addEventListener("click",k))},k=function(x){var D=x.target,G=!1;x.target&&(G=D&&!v.current.contains(D));G&&n()},r=function(x){x.preventDefault();var D=x.key,G=x.altKey,F=x.shiftKey;"Escape"===D?n():"Enter"===D||"ArrowUp"===D&&G?l(x):"Tab"===D&&!F||"ArrowDown"===D?(D=p.nextSibling)&&g.current.contains(D)?(D.focus(),p=D):n():"ArrowUp"===D&&!G||"Tab"===D&&F?(D=p.previousSibling)&&
g.current.contains(D)?(D.focus(),p=D):n():["Home","End","PageUp","PageDown"].includes(D)&&(x=g.current.querySelectorAll(".option"),"Home"!==D&&"PageUp"!==D||x[0].focus(),"End"!==D&&"PageDown"!==D||x[x.length-1].focus())},w=function(x){v.current.setAttribute("aria-activedescendant","stockImageSelect-option_".concat(x.target.dataset.value))};return(0,c.h)("div",{id:"stockImageSelect",class:"stock-images-select"},(0,c.h)("div",{onClick:n,onKeyDown:function(x){var D,G,F,A,y,z,B,C;x.preventDefault();var H=
x.key;"Enter Space Home End ArrowDown ArrowUp".split(" ").includes(H)&&(n(),"Home"===H?null===(G=null===(D=document.getElementById("stockImageSelect-option_1"))||void 0===D?void 0:D.focus)||void 0===G?void 0:G.call(D):"End"===H?null===(A=null===(F=document.getElementById("stockImageSelect-option_".concat(q.length)))||void 0===F?void 0:F.focus)||void 0===A?void 0:A.call(F):"ArrowUp"===H?null===(z=null===(y=document.getElementById("stockImageSelect-option_1"))||void 0===y?void 0:y.scrollIntoView)||
void 0===z?void 0:z.call(y):"ArrowDown"!==H||x.altKey||(null===(C=null===(B=document.getElementById("stockImageSelect-option_".concat(q.length)))||void 0===B?void 0:B.scrollIntoView)||void 0===C?void 0:C.call(B)))},ref:v,tabIndex:0,class:"enh-sel-dropdown_control enh-sel-dropdown",id:"stockImageSelect",role:"combobox","aria-expanded":"false","aria-label":d.default.orgHomePageSetup.header.stockSelect,"aria-controls":"stockImageSelect-menu_list"},(0,c.h)("div",{class:"title pointerCursor stockImgName",
ref:a},t.name)),(0,c.h)("div",{class:"menu pointerCursor enh-sel-dropdown hide",ref:g,id:"stockImageSelect-menu"},(0,c.h)("div",{class:"menu",ref:m,id:"stockImageSelect-menu_list","aria-labelledby":"stockImageSelect",role:"listbox"},q.map(function(x,D){var G="stockImageSelect-option_".concat(D+1);return(0,c.h)("div",{class:"option","data-value":D+1,"aria-label":x.name,role:"option",tabIndex:0,key:G,onClick:l,onKeyDown:r,onFocus:w,id:G,"aria-selected":t.name===x.name?"true":"false"},x.name,(0,c.h)("img",
{src:x.image,class:"option-image",alt:""}))}))))}})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/utils/ColorSelect":function(){define("require exports tslib preact preact/hooks ../utils/homePageUtils dojo/i18n!../../../../../../nls/arcgisonline ../utils/AaBox ../utils/ColorMenu".split(" "),function(S,J,f,c,h,d,b,a,e){Object.defineProperty(J,"__esModule",{value:!0});b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);J.default=function(q){var t=q.id,u=q.color,
g=q.title,m=q.onSelect,v=q.noArrow,p=q.section,l=q.HP;q=q.labelSection;var n="".concat(t,"__menu"),k=(0,d.getColors)(l,p.split(":")[0],u.value).menuColors;g=g||"";var r=(0,h.useRef)(),w=(0,h.useRef)(null),x=(0,h.useState)(!1),D=x[0],G=x[1],F=(0,h.useState)(null);x=F[0];var A=F[1],y=function(C){w.current.contains(C.target)||G(!1)};(0,h.useEffect)(function(){document.addEventListener("click",y,!0);return function(){document.removeEventListener("click",y,!0)}},[]);(0,h.useEffect)(function(){D?A("".concat(t,
"__option-").concat(u.value)):A(null)},[D]);F=function(C){A(C)};var z=function(C){G(!1);m(C,p);r.current.focus()},B=function(){G(!1);r.current.focus()};return(0,c.h)("div",{ref:w,class:"color-card-wrapper position-relative"},(0,c.h)("button",{ref:r,"aria-label":"".concat(q," - ").concat(u.name),class:"backgroundColor",id:t,onClick:function(){G(!D)},role:"combobox","aria-controls":n,"aria-expanded":D,"aria-hasPopup":"listbox","aria-activedescendant":x},(0,c.h)("div",{class:"style-content-card style-content-card--".concat(u.class,
" style-content-card-footer")},(0,c.h)(a.default,null),(0,c.h)("div",{class:"style-text"},""!==g&&(0,c.h)("div",{class:"style-header"},g),(0,c.h)("div",{class:"style-text-name"},b.default.orgHomePageSetup.styles.style,"\u00a0",(0,c.h)("span",null,u.name))),!v&&(0,c.h)("div",{class:"style-arrow"},(0,c.h)("calcite-icon",{scale:"s",icon:"caret-down"})))),D&&(0,c.h)(e.default,{id:n,colors:k,color:u,onSelect:z,onClose:B,onActiveDescendantChange:F,label:q,shortFooter:"footer"===p&&!l.footer.showCopy}))}})},
"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/utils/AaBox":function(){define(["require","exports","tslib","preact","dojo/i18n!../../../../../../nls/arcgisonline"],function(S,J,f,c,h){Object.defineProperty(J,"__esModule",{value:!0});h=f.__importDefault(h);J.default=function(d){return(0,c.h)("div",{class:d.className||"aA-box","aria-hidden":"true",role:"presentation"},(0,c.h)("svg",null,(0,c.h)("rect",{width:"32",height:"32"}),(0,c.h)("text",{class:"aAtext",x:"16",y:"21"},h.default.orgHomePageSetup.styles.aA)))}})},
"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/utils/ColorMenu":function(){define("require exports tslib preact preact/hooks ./ColorMenuOption".split(" "),function(S,J,f,c,h,d){Object.defineProperty(J,"__esModule",{value:!0});d=f.__importDefault(d);J.default=function(b){var a=b.id,e=b.colors,q=b.color,t=b.onSelect,u=b.onClose,g=b.onActiveDescendantChange,m=b.label;b=b.shortFooter;var v=(0,h.useRef)(null),p=(0,h.useRef)(null),l=(0,h.useState)(""),n=l[0],k=l[1];l=(0,h.useState)(e.findIndex(function(D){return JSON.stringify(D)===
JSON.stringify(q)}));var r=l[0],w=l[1];(0,h.useEffect)(function(){if(v.current){var D=v.current.querySelector(".menu").getBoundingClientRect();k(D.bottom+48+D.height>=window.innerHeight-68?"top":"bottom");window.setTimeout(function(){var G,F="".concat(a,"__option-").concat(e[r].value),A=document.getElementById(F);g(F);null===(G=null===A||void 0===A?void 0:A.focus)||void 0===G?void 0:G.call(A)},50)}},[v.current]);var x=function(D){t(D)};n="sc-container ".concat("top"===n?"sc-container--top":"bottom"===
n?"sc-container--bottom":"");return(0,c.h)("div",{class:n,ref:v,onKeyDown:function(D){var G=D.key;if("ArrowUp"===G||"Tab"===G&&D.shiftKey)D.preventDefault(),0<r?(D=r-1,G="".concat(a,"__option-").concat(e[D].value),w(D),g(G),document.getElementById(G).focus()):u();else if("ArrowDown"===G||"Tab"===G&&!D.shiftKey)D.preventDefault(),r<e.length-1?(D=r+1,G="".concat(a,"__option-").concat(e[D].value),w(D),g(G),document.getElementById(G).focus()):u()}},(0,c.h)("div",{ref:p,class:"style-content-cards style-content-menu no-basecolor enh-sel-dropdown",
tabIndex:-1},(0,c.h)("div",{class:"menu".concat(b?" menu-short":""),role:"listbox","aria-label":m,id:a},e.map(function(D,G){var F="".concat(a,"__option-").concat(D.value);return(0,c.h)(d.default,{id:F,value:D,key:F,onSelect:x,active:r===G,selected:q.value===D.value})}))))}})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/utils/ColorMenuOption":function(){define("require exports tslib preact preact/hooks ../utils/AaBox dojo/i18n!../../../../../../nls/arcgisonline".split(" "),function(S,
J,f,c,h,d,b){Object.defineProperty(J,"__esModule",{value:!0});d=f.__importDefault(d);b=f.__importDefault(b);J.default=function(a){var e=a.id,q=a.value,t=a.onSelect,u=a.baseColor,g=a.selected,m=a.active,v=(0,h.useRef)(null);(0,h.useEffect)(function(){m&&v.current&&v.current.focus()},[v.current,m]);a="ramp-only style-content-card style-content-card-".concat(u?"ob":"-".concat(q.class)," option ").concat(g?"base-color":"");return(0,c.h)("button",{ref:v,id:e,class:a,onClick:function(){t(u?u:q)},role:"option",
"aria-selected":g,"aria-label":u?b.default.orgHomePageSetup.colors[u.replace("gs","grayscaleOnly")]:q.name},(0,c.h)(d.default,{className:u?"aA-box one-aA light-".concat(u):null}),u&&(0,c.h)(d.default,{className:"aA-box two-aA medium-".concat(u)}),u&&(0,c.h)(d.default,{className:"aA-box three-aA dark-".concat(u)}),(0,c.h)("div",{class:"style-text"},u&&(0,c.h)("div",{class:"style-header"},b.default.orgHomePageSetup.colors[u.replace("gs","grayscaleOnly")]),!u&&q.name))}})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/utils/CustomColorOverlay":function(){define("require exports tslib preact preact/hooks dojo/i18n!../../../../../../nls/arcgisonline ../../../../../../esriGeowConfig ../utils/homePageUtils ../../../../../utils/color ../../../../../utils/focus ../../../../../utils/number ../../../../../utils/timeout".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u){var g=this;Object.defineProperty(J,"__esModule",{value:!0});d=f.__importDefault(d);b=f.__importDefault(b);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);J.default=function(m){var v,p=m.portal,l=m.HP,n=m.index,k=m.onCancel,r=m.onSave,w={background:"#202020",header:"#fff",text:"#fff",button:"#00A0FF",name:d.default.orgHomePageSetup.styles.customStyleX.replace("${x}",n+1)};m=b.default.isRightToLeft?"rtl":"ltr";for(var x=4,D=3;0<=D;D--)l.customStyles[D]||
(x=D);D=l.key;var G=l.customStyles[n]?d.default.orgHomePageSetup.styles.editCustomStyle:d.default.orgHomePageSetup.styles.addCustomStyle;w=l.customStyles[n]||w;var F=(0,h.useState)(w.name),A=F[0],y=F[1];F=(0,h.useState)(w.background);var z=F[0],B=F[1];F=(0,h.useState)(w.header);var C=F[0],H=F[1];F=(0,h.useState)(w.text);var E=F[0],K=F[1];w=(0,h.useState)(w.button);var I=w[0],L=w[1];w=(0,h.useState)(!1);var M=w[0],N=w[1];F=(0,h.useState)();w=F[0];var P=F[1];F=(0,h.useState)();var R=F[0],Y=F[1];F=(0,h.useState)(0);
var ja=F[0],aa=F[1];F=(0,h.useState)(0);var da=F[0],ra=F[1];F=(0,h.useState)(0);var ca=F[0],fa=F[1];F=(0,h.useState)(!1);var la=F[0],ta=F[1];F=(0,h.useState)(!1);var Q=F[0],T=F[1];F=(0,h.useState)(null);var O=F[0],Z=F[1],na=null===(v=p.portalProperties)||void 0===v?void 0:v.sharedTheme,ia=function(){for(var qa=[],W=Object.keys(a.overlayColors),ba=function(wa){W.forEach(function(Ea){qa.push("#"+a.overlayColors[Ea][wa])})},oa=2;0<=oa;oa--)ba(oa);return qa}(),X=(0,h.useRef)(),ha=(0,h.useRef)(),V=(0,h.useRef)(),
ea=(0,h.useRef)(),U=(0,h.useRef)(),ka=(0,h.useRef)(),ma=(0,h.useRef)(),sa=(0,h.useRef)();(0,h.useEffect)(function(){document.addEventListener("click",pa,!0);return function(){document.removeEventListener("click",pa,!0)}},[]);(0,h.useEffect)(function(){var qa=ha.current,W=q.default.trapFocus(qa);return function(){q.default.untrapFocus(qa,W)}},[ha.current]);(0,h.useEffect)(function(){V.current.focus()},[V.current]);var pa=function(qa){var W;qa=qa.target;(null===(W=X.current)||void 0===W?0:W.contains(qa))||
Aa()};(0,h.useEffect)(function(){Ba()},[z,C,E,I]);(0,h.useEffect)(function(){(function(){return f.__awaiter(this,void 0,void 0,function(){var qa;return f.__generator(this,function(W){switch(W.label){case 0:return M?[4,(0,u.timeout)(100)]:[3,2];case 1:W.sent(),null===(qa=null===sa||void 0===sa?void 0:sa.current)||void 0===qa?void 0:qa.setFocus(),W.label=2;case 2:return[2]}})})})()},[M]);var Aa=function(){return f.__awaiter(g,void 0,void 0,function(){return f.__generator(this,function(qa){switch(qa.label){case 0:return N(!1),
null!==O&&void 0!==O&&O.current?[4,(0,u.timeout)(100)]:[3,2];case 1:qa.sent(),O.current.focus(),qa.label=2;case 2:return[2]}})})},za=function(qa){"background"===R?B(qa):"header"===R?H(qa):"text"===R?K(qa):"button"===R&&L(qa)};v=function(qa){qa=qa.target.value;P(qa);za(qa)};p=function(qa){"Space"!==qa.code&&"Enter"!==qa.code||Aa()};var Ba=function(){var qa=e.default.checkContrast(z,C),W=e.default.checkContrast(z,E),ba=e.default.checkContrast(z,I);aa(qa.contrast);ra(W.contrast);fa(ba.contrast)};F=function(){k()};
var ua=function(qa,W){var ba=0!==n&&!n||W?x:n;(4.5>ja||4.5>da||4.5>ca)&&!qa?(W&&T(!0),ta(!0)):(ta(!1),r(ba,{name:A,header:C,background:z,text:E,button:I}))},Fa=function(qa,W){return f.__awaiter(g,void 0,void 0,function(){return f.__generator(this,function(ba){"background"===qa?Z(ea):"header"===qa?Z(U):"text"===qa?Z(ka):"button"===qa&&Z(ma);P(W);Y(qa);N(!0);return[2]})})},va=function(){var qa=[];qa={};var W=null===na||void 0===na?void 0:na.body;(null===W||void 0===W?0:W.background)&&"no-color"!==W.background&&
(qa[W.background]=1);(null===W||void 0===W?0:W.text)&&"no-color"!==W.text&&(qa[W.text]=1);(null===W||void 0===W?0:W.link)&&"no-color"!==W.link&&(qa[W.link]=1);W=null===na||void 0===na?void 0:na.button;(null===W||void 0===W?0:W.background)&&"no-color"!==W.background&&(qa[W.background]=1);(null===W||void 0===W?0:W.text)&&"no-color"!==W.text&&(qa[W.text]=1);W=null===na||void 0===na?void 0:na.header;(null===W||void 0===W?0:W.background)&&"no-color"!==W.background&&(qa[W.background]=1);(null===W||void 0===
W?0:W.text)&&"no-color"!==W.text&&(qa[W.text]=1);return qa=Object.keys(qa)}(),xa=[],Da="custom".concat(n+1);l.header.headerCustom===Da&&xa.push([d.default.orgHomePageSetup.start.header,""]);l.content.forEach(function(qa){qa.bgCustom===Da&&("gallery"===qa.type?xa.push([qa.title||qa.summary,d.default.orgHomePageSetup.content.itemGallery]):"text"===qa.type?xa.push([qa.title||qa.body,d.default.orgHomePageSetup.content.textBlock]):"link"===qa.type&&qa.links.length&&xa.push([qa.links[0].title,d.default.orgHomePageSetup.content.linkBlock]))});
var Ca=function(qa,W){var ba;"Tab"===qa.code&&("warn"===W?(ta(!1),null===(ba=null===O||void 0===O?void 0:O.current)||void 0===ba?void 0:ba.focus()):k())};l.footer.bgCustom===Da&&xa.push([d.default.orgHomePageSetup.start.footer,""]);Ba();return(0,c.h)("div",{class:"overlay-background js-overlay-background is-active custom-style-editor-container bring-modal-to-front",id:"uniqName_".concat(D)},(0,c.h)("div",{class:"overlay js-overlay",role:"dialog","aria-labelledby":"overlay-title-".concat(D),"aria-modal":"true",
ref:ha},(0,c.h)("div",{class:"overlay-title-bar flex js-overlay-title-bar"},(0,c.h)("h3",{id:"overlay-title-".concat(D),class:"overlay-title flex-1",title:G},G),(0,c.h)("div",null,(0,c.h)("button",{class:"btn-link btn-link-off-black font-size-2 flex-0 overlay-close","aria-label":d.default.common.close,title:d.default.common.close,onClick:F,onKeyDown:function(qa){"Tab"===qa.code&&qa.shiftKey&&k()},ref:V},(0,c.h)("calcite-icon",{scale:"l",icon:"x"})))),(0,c.h)("div",{class:"js-overlay-control-bar"}),
(0,c.h)("div",{class:"overlay-control-bar-filters js-overlay-control-bar-filters"}),(0,c.h)("div",{class:"overlay-content js-overlay-content overlay-content--scroll",id:"overlay-content-".concat(D)},(0,c.h)("div",{class:"custom-style-add-edit"},(0,c.h)("div",{class:"custom-style-settings"},(0,c.h)("div",{class:"custom-style-header"},d.default.orgHomePageSetup.styles.styleName,(0,c.h)("br",null),(0,c.h)("input",{name:"stylename",id:"stylename",class:"style-name",value:A,onInput:function(qa){y(qa.target.value)}})),
(0,c.h)("div",{class:"custom-style-header configure-colors"},d.default.orgHomePageSetup.styles.configureColors),(0,c.h)("table",{cellSpacing:0,cellPadding:0},(0,c.h)("tbody",null,(0,c.h)("tr",null,(0,c.h)("td",{class:"edit-cell edit-cell-background"},(0,c.h)("a",{href:"javascript:void(0)","data-type":"background",onClick:function(){Fa("background",z)},ref:ea,"aria-label":"".concat(d.default.orgHomePageSetup.styles.backgroundColor,": ").concat(z)},(0,c.h)("div",{class:"edit-custom-color"},(0,c.h)("svg",
{class:"color-block-container"},(0,c.h)("rect",{style:"fill: ".concat(z),class:"color-block"})),(0,c.h)("div",{class:"color-text"},(0,c.h)("div",{class:"custom-hex-color"},d.default.orgHomePageSetup.styles.backgroundColor),(0,c.h)("div",null,"\u200e",(0,c.h)("span",{class:"custom-value custom-background-value"},z))),(0,c.h)("button",{class:"edit-icon edit-background",tabIndex:-1},(0,c.h)("calcite-icon",{scale:"s",icon:"pencil"}))))),(0,c.h)("th",null,d.default.classificationBannerDlg.contrastRatio),
(0,c.h)("th",null,d.default.orgHomePageSetup.styles.legibility)),(0,c.h)("tr",null,(0,c.h)("td",{class:"edit-cell edit-cell-title"},(0,c.h)("a",{href:"javascript:void(0)","data-type":"title",onClick:function(){Fa("header",C)},"aria-label":"".concat(d.default.orgHomePageSetup.styles.titleColor,": ").concat(C),ref:U},(0,c.h)("div",{class:"edit-custom-color"},(0,c.h)("svg",{class:"color-block-container"},(0,c.h)("rect",{style:"fill:".concat(C),class:"color-block"})),(0,c.h)("div",{class:"color-text"},
(0,c.h)("div",{class:"custom-hex-color"},d.default.orgHomePageSetup.styles.titleColor),(0,c.h)("div",null,"\u200e",(0,c.h)("span",{class:"custom-value custom-title-value"},C))),(0,c.h)("button",{class:"edit-icon edit-header",tabIndex:-1},(0,c.h)("calcite-icon",{scale:"s",icon:"pencil"}))))),(0,c.h)("td",{class:"custom-title-ratio"},t.default.format(ja,2)),(0,c.h)("td",{class:"legibility"},4.5<=ja&&(0,c.h)("div",{class:"custom-cell-leg custom-title-leg"},(0,c.h)("calcite-icon",{class:"icon-ui-green",
scale:"s",icon:"check-circle-f"}),"\u00a0",d.default.orgHomePageSetup.styles.legible),4.5>ja&&(0,c.h)("div",{"aria-label":d.default.orgHomePageSetup.styles.legibilityWarn,class:"tooltip tooltip-top tooltip-multiline custom-cell-notleg icon-ui-red custom-title-notleg"},(0,c.h)("calcite-icon",{scale:"s",class:"icon-ui-red",icon:"x-circle-f"}),"\u00a0",d.default.orgHomePageSetup.styles.notLegible))),(0,c.h)("tr",null,(0,c.h)("td",{class:"edit-cell edit-cell-summary"},(0,c.h)("a",{href:"javascript:void(0)",
"data-type":"summary",onClick:function(){Fa("text",E)},"aria-label":"".concat(d.default.orgHomePageSetup.styles.summaryColor,": ").concat(E),ref:ka},(0,c.h)("div",{class:"edit-custom-color"},(0,c.h)("svg",{class:"color-block-container"},(0,c.h)("rect",{style:"fill:".concat(E),class:"color-block"})),(0,c.h)("div",{class:"color-text"},(0,c.h)("div",{class:"custom-hex-color"},d.default.orgHomePageSetup.styles.summaryColor),(0,c.h)("div",null,"\u200e",(0,c.h)("span",{class:"custom-value custom-summary-value"},
E))),(0,c.h)("button",{class:"edit-icon edit-text",tabIndex:-1},(0,c.h)("calcite-icon",{scale:"s",icon:"pencil"}))))),(0,c.h)("td",{class:"custom-summary-ratio"},t.default.format(da,2)),(0,c.h)("td",{class:"legibility"},4.5<=da&&(0,c.h)("span",{class:"custom-cell-leg custom-summary-leg"},(0,c.h)("calcite-icon",{scale:"s",icon:"check-circle-f"}),"\u00a0",d.default.orgHomePageSetup.styles.legible),4.5>da&&(0,c.h)("span",{"aria-label":d.default.orgHomePageSetup.styles.legibilityWarn,class:"tooltip tooltip-top tooltip-multiline custom-cell-notleg custom-summary-notleg"},
(0,c.h)("calcite-icon",{scale:"s",icon:"x-circle-f"}),"\u00a0",d.default.orgHomePageSetup.styles.notLegible))),(0,c.h)("tr",null,(0,c.h)("td",{class:"edit-cell edit-cell-button"},(0,c.h)("a",{href:"javascript:void(0)","data-type":"button",onClick:function(){Fa("button",I)},"aria-label":"".concat(d.default.orgHomePageSetup.styles.buttonColor,": ").concat(I),ref:ma},(0,c.h)("div",{class:"edit-custom-color"},(0,c.h)("svg",{class:"color-block-container"},(0,c.h)("rect",{style:"fill: ".concat(I),class:"color-block"})),
(0,c.h)("div",{class:"color-text"},(0,c.h)("div",{class:"custom-hex-color"},d.default.orgHomePageSetup.styles.buttonColor),(0,c.h)("div",null,"\u200e",(0,c.h)("span",{class:"custom-value custom-button-value"},I))),(0,c.h)("button",{class:"edit-icon edit-button",tabIndex:-1},(0,c.h)("calcite-icon",{scale:"s",icon:"pencil"}))))),(0,c.h)("td",{class:"custom-button-ratio"},t.default.format(ca,2)),(0,c.h)("td",{class:"legibility"},4.5<=ca&&(0,c.h)("span",{class:"custom-cell-leg custom-button-leg"},(0,c.h)("calcite-icon",
{scale:"s",icon:"check-circle-f"}),"\u00a0",d.default.orgHomePageSetup.styles.legible),4.5>ca&&(0,c.h)("span",{"aria-label":d.default.orgHomePageSetup.styles.legibilityWarn,class:"tooltip tooltip-top tooltip-multiline custom-cell-notleg custom-button-notleg"},(0,c.h)("calcite-icon",{scale:"s",icon:"x-circle-f"}),"\u00a0",d.default.orgHomePageSetup.styles.notLegible))))),(0,c.h)("span",{class:"contrast-text"},d.default.orgHomePageSetup.styles.contrastRatio),0!==xa.length&&(0,c.h)("div",{class:"custom-style-header blocks-using-header"},
d.default.orgHomePageSetup.styles.blocksUsing),0!==xa.length&&(0,c.h)("div",{class:"blocks-using-custom"},xa.map(function(qa,W){return(0,c.h)("div",{class:"block-using-custom",key:"".concat(qa.join(),"-").concat(W)},(0,c.h)("div",{class:"block-using-title",title:qa[0]},qa[0]),(0,c.h)("div",{class:"block-using-type"},qa[1]))}))),M&&(0,c.h)("div",{class:"color-picker",ref:X,onBlur:function(){N(!1)}},(0,c.h)("calcite-color-picker",{ref:sa,scale:"s",value:w,hideSaved:!0,dir:m,oncalciteColorPickerInput:v,
onKeyUp:p}),0<va.length&&(0,c.h)("div",{class:"shared-theme-colors"},(0,c.h)("div",null,d.default.orgHomePageSetup.styles.sharedThemeColors),(0,c.h)("div",{class:"shared-org-color-theme"},va.map(function(qa){return(0,c.h)("a",{href:"javascript:void(0)","aria-label":qa,onClick:function(){P(qa);za(qa)}},(0,c.h)("div",{class:"swatch"},(0,c.h)("svg",null,(0,c.h)("rect",{width:"16",height:"16",fill:qa}))))}))),(0,c.h)("div",{class:"recommended-colors"},(0,c.h)("div",null,d.default.orgHomePageSetup.styles.recColors),
(0,c.h)("div",{class:"recommended-color-theme"},ia.map(function(qa,W){return(0,c.h)("a",{href:"javascript:void(0)","aria-label":qa,key:"recommended-color-theme-option-".concat(W),onClick:function(){P(qa);za(qa)},onKeyDown:function(ba){W===ia.length-1&&"Tab"===ba.code&&Aa()}},(0,c.h)("div",{class:"swatch"},(0,c.h)("svg",null,(0,c.h)("rect",{width:"16",height:"16",fill:qa}))))})))),(0,c.h)("div",{class:"custom-style-preview-container"},(0,c.h)("div",{class:"custom-style-header"},d.default.orgHomePageSetup.styles.preview),
(0,c.h)("div",{class:"custom-style-preview",style:"background-color:".concat(z)},(0,c.h)("div",null,(0,c.h)("h2",{style:"color:".concat(C)},d.default.orgHomePageSetup.styles.blockTitle)),(0,c.h)("div",null,(0,c.h)("p",{style:"color:".concat(E)},d.default.orgHomePageSetup.styles.blockText," ",(0,c.h)("a",{href:"javascript:void(0)",tabIndex:-1,style:"color:".concat(I)},d.default.orgHomePageSetup.styles.blockText1)," ",d.default.orgHomePageSetup.styles.blockText2," ",(0,c.h)("a",{href:"javascript:void(0)",
tabIndex:-1,style:"color:".concat(I)},d.default.orgHomePageSetup.styles.blockText3),".",d.default.orgHomePageSetup.styles.blockText," ",(0,c.h)("a",{href:"javascript:void(0)",tabIndex:-1,style:"color:".concat(I)},d.default.orgHomePageSetup.styles.blockText1)," ",d.default.orgHomePageSetup.styles.blockText2," ",(0,c.h)("a",{href:"javascript:void(0)",tabIndex:-1,style:"color:".concat(I)},d.default.orgHomePageSetup.styles.blockText3),".",d.default.orgHomePageSetup.styles.blockText," ",(0,c.h)("a",{href:"javascript:void(0)",
tabIndex:-1,style:"color:".concat(I)},d.default.orgHomePageSetup.styles.blockText1)," ",d.default.orgHomePageSetup.styles.blockText2," ",(0,c.h)("a",{href:"javascript:void(0)",tabIndex:-1,style:"color:".concat(I)},d.default.orgHomePageSetup.styles.blockText3),".")),(0,c.h)("div",null,(0,c.h)("button",{style:"color:".concat(I,"; border: 1px solid ").concat(I,"; background-color: ").concat(z,";"),tabIndex:-1},d.default.orgHomePageSetup.styles.blockButton)))))),(0,c.h)("div",{class:"overlay-action-bar "},
l.customStyles[n]&&(0,c.h)("nav",{class:"right"},(0,c.h)("button",{class:"btn js-overlay-primary",onClick:function(){ua()}},d.default.orgHomePageSetup.styles.overwriteStyle),"\u00a0",4!==x&&(0,c.h)("button",{class:"btn btn-clear calcite-web-btn-clear js-overlay-cancel",onClick:function(){ua(!1,!0)}},d.default.orgHomePageSetup.styles.saveAsNew)),!l.customStyles[n]&&(0,c.h)("nav",{class:"right"},(0,c.h)("button",{class:"btn js-overlay-primary",onClick:function(){ua()}},d.default.common.save),"\u00a0",
(0,c.h)("button",{class:"btn btn-clear calcite-web-btn-clear js-overlay-cancel",onClick:F,onKeyDown:Ca},d.default.common.cancel))),la&&(0,c.h)("div",{class:"position-relative full-height overlay-confirm is-active"},(0,c.h)("div",{class:"overlay-confirm-mask"}),(0,c.h)("div",{class:"overlay-confirm-pane legibility-warning-overlay position-relative"},(0,c.h)("div",{class:"flex flex-align-center"},(0,c.h)("div",null,(0,c.h)("div",{class:"avenir-demi font-size-1"},d.default.orgHomePageSetup.styles.legOvTitle),
(0,c.h)("div",{class:"font-size--1"},d.default.orgHomePageSetup.styles.legOvBody))),(0,c.h)("div",{class:"leader-half flex overlay-confirm-buttons","data-dojo-attach-point":"_buttons"},(0,c.h)("button",{class:"btn btn-clear js-cancel-btn",onClick:function(){T(!1);ta(!la)}},d.default.orgHomePageSetup.styles.legOvPrimary),"\u00a0",(0,c.h)("button",{class:"btn margin-left-half overlay-confirm__confirm-btn js-confirm-btn",onClick:function(){ua(!0,Q)},onKeyDown:function(qa){Ca(qa,"warn")}},d.default.orgHomePageSetup.styles.legOvCancel))))))}})},
"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/components/HeaderLayoutAdmin":function(){define("require exports tslib preact preact/hooks ../../../../../../sharing/util ../utils/homePageUtils dojo/i18n!../../../../../../nls/arcgisonline dojo/i18n!../../../../../../nls/org-settings".split(" "),function(S,J,f,c,h,d,b,a,e){Object.defineProperty(J,"__esModule",{value:!0});d=f.__importDefault(d);a=f.__importDefault(a);e=f.__importDefault(e);J.default=function(q){var t=q.HP,u=q.coverURI,
g=q.onHeaderChange,m=t.header;q=q.LTR?a.default.orgHomePageSetup.header.left:a.default.orgHomePageSetup.header.right;var v=(0,h.useRef)(),p=(0,h.useState)(m.opacity),l=p[0],n=p[1];p=(0,h.useState)(m.coverImgPlacement||{x:"50%",y:"50%"});var k=p[0],r=p[1],w=(0,h.useState)(m.coverImgLayout);p=w[0];var x=w[1],D=(0,h.useState)(m.titleLogoAlign);w=D[0];var G=D[1];D=(0,h.useState)(m.titleLogoPos);var F=D[0],A=D[1],y=(0,h.useState)();D=y[0];var z=y[1],B;(0,h.useEffect)(function(){g("coverImgPlacement",k)},
[k]);y=function(P){var R=v.current.getBoundingClientRect(),Y=(P.clientX-R.left)/P.currentTarget.clientWidth;P=(P.clientY-R.top)/P.currentTarget.clientHeight;0>Y?Y=0:1<Y&&(Y=1);0>P?P=0:1<P&&(P=1);r({x:"".concat(100*Y,"%"),y:"".concat(100*P,"%")})};var C=function(P){var R=parseInt(k.y,10),Y=parseInt(k.x,10),ja="";0===R?ja=e.default.homePageTab.backgroundImage.placeTop:100===R?ja=e.default.homePageTab.backgroundImage.placeBottom:50===R?ja=e.default.homePageTab.backgroundImage.placeMiddle:50<R?ja=e.default.homePageTab.backgroundImage.placeBelow.replace("${y}",
2*(R-50)+"%"):50>R&&(ja=e.default.homePageTab.backgroundImage.placeAbove.replace("${y}",2*(50-R)+"%"));R="";0===Y?R=e.default.homePageTab.backgroundImage.placeLeft:100===Y?R=e.default.homePageTab.backgroundImage.placeRight:50===Y?R=e.default.homePageTab.backgroundImage.placeCenter:50<Y?R=e.default.homePageTab.backgroundImage.placeROC.replace("${x}",2*(Y-50)+"%"):50>Y&&(R=e.default.homePageTab.backgroundImage.placeLOC.replace("${x}",2*(50-Y)+"%"));if("x"===P||"y"===P)return"".concat(ja,", ").concat(R);
P=e.default.homePageTab.backgroundImage.placement.replace("${top}",ja).replace("${left}",R);z(P)},H=function(P,R,Y){0>R&&(R=0);0>P&&(P=0);100<R&&(R=100);100<P&&(P=100);Y.style.top=P+"%";Y.style.left=R+"%";r({x:R+"%",y:P+"%"});Y.setAttribute("aria-label",C())},E=function(P){var R=document.querySelector(".placement-guide-overlay span"),Y=parseInt(R.style.top,10),ja=parseInt(R.style.left,10),aa="";switch(P.key){case "ArrowUp":H(Y-1,ja,R);P.preventDefault();P.stopPropagation();aa=C("y");(0,b.srSpeak)(aa);
R.setAttribute("aria-label",aa);break;case "ArrowDown":H(Y+1,ja,R);P.preventDefault();P.stopPropagation();aa=C("y");(0,b.srSpeak)(aa);R.setAttribute("aria-label",aa);break;case "ArrowLeft":H(Y,ja-1,R);aa=C("x");R.setAttribute("aria-label",aa);break;case "ArrowRight":H(Y,ja+1,R),aa=C("x"),R.setAttribute("aria-label",aa)}},K=function(P){x(P.target.value);g("coverImgLayout",P.target.value)},I=function(P){G(P.target.value);g("titleLogoAlign",P.target.value)},L=function(P){"above"===P.target.value||"below"===
P.target.value?n(0):("above"===F||"below"===F)&&n(.45);A(P.target.value);g("titleLogoPos",P.target.value)},M=function(P){clearTimeout(B);B=setTimeout(function(){var R=parseInt(P.target.value,10)/100;n(R);g("opacity",R)},100)};if((t.header.coverImg||t.header.coverImgStock)&&t.header.showCoverImg){var N="custom"===t.header.coverType&&u?u:"custom"===t.header.coverType&&t.header.coverImg?(0,b.fetchResourceUrl)(t.header.coverImg):"".concat(d.default.relativeToExplicitUrl("js/arcgisonline/img/homepage_background-".concat(t.header.coverImgStock,
".jpg?nocache\x3d").concat(Date.now())));N.match(/^url\(/)&&(N=N.replace(/^url\(/,""),N=N.replace(/\)$/,""))}return(0,c.h)("div",{class:"setup-container flex-column"},(0,c.h)("div",null,(0,c.h)("div",{class:"org-button back-button",id:"layoutToHeaderButton","data-action":"header",tabIndex:0,role:"button"},(0,c.h)("div",{class:"org-setup-header flex flex-align-center"},(0,c.h)("calcite-icon",{scale:"s",icon:"chevron-left"}),(0,c.h)("div",{class:"flex-1 margin-left-quarter"},a.default.orgHomePageSetup.start.header)))),
(0,c.h)("div",null,(0,c.h)("div",{class:"setup-body-wrapper flex-1"},(0,c.h)("div",{class:"org-setup-header org-title-bar"},a.default.orgHomePageSetup.header.layoutOptions),m.showCoverImg&&(0,c.h)("div",{class:"org-section needs-cover-img"},(0,c.h)("div",{class:"org-setup-text org-padding-top org-setup-header"},a.default.orgHomePageSetup.header.coverImg),(0,c.h)("div",{class:"org-setup-text bottom-margin-half-rem"},(0,c.h)("div",{class:"org-subtext"},a.default.orgHomePageSetup.header.fullOrHalf),
(0,c.h)("div",null,(0,c.h)("label",{class:"trailer-0",for:"cover-full-height-radio"},(0,c.h)("input",{type:"radio",class:"coverImageHeight",id:"cover-full-height-radio",name:"coverImageHeight","aria-label":a.default.orgHomePageSetup.header.fullHeight,value:"Full-height",onClick:K,checked:"Full-height"===p}),a.default.orgHomePageSetup.header.fullHeight)),(0,c.h)("div",null,(0,c.h)("label",{class:"trailer-0",for:"cover-two-thirds-height-radio"},(0,c.h)("input",{type:"radio",class:"coverImageHeight",
id:"cover-two-thirds-height-radio",name:"coverImageHeight","aria-label":a.default.orgHomePageSetup.header.twoThirdsHeight,value:"Two-thirds-height",onClick:K,checked:"Two-thirds-height"===p}),a.default.orgHomePageSetup.header.twoThirdsHeight)),(0,c.h)("div",null,(0,c.h)("label",{class:"trailer-0",for:"cover-half-height-radio"},(0,c.h)("input",{type:"radio",class:"coverImageHeight",id:"cover-half-height-radio",name:"coverImageHeight","aria-label":a.default.orgHomePageSetup.header.halfHeight,value:"Half-height",
onClick:K,checked:"Half-height"===p}),a.default.orgHomePageSetup.header.halfHeight)))),m.showCoverImg&&(0,c.h)("div",{class:"org-section needs-cover-img"},(0,c.h)("div",{class:"org-setup-text org-padding-top org-setup-header"},a.default.orgHomePageSetup.header.focalPoint),(0,c.h)("div",{class:"org-subtext bottom-margin-half-rem needs-cover-img"},a.default.orgHomePageSetup.header.moreAdjustmentsDesc),(0,c.h)("div",{class:"placement-guide-container bottom-margin-half-rem"},(0,c.h)("img",{src:N,class:"placement-guide"}),
(0,c.h)("div",{class:"placement-guide-overlay",ref:v,style:"background-color: rgba(".concat((0,b.getOverlayColor)(t)).concat(l,")"),onClick:y,onKeyDown:E},(0,c.h)("span",{class:"focal-point-selector",style:"left: ".concat(k.x,"; top: ").concat(k.y),tabIndex:0,"aria-label":D}))),"above"!==F&&"below"!==F&&(0,c.h)("div",{class:"opacity-settings"},(0,c.h)("div",{class:"bottom-margin-half-rem"},a.default.orgHomePageSetup.header.overlayOpacity),(0,c.h)("div",{class:"opacity-slider"},(0,c.h)("calcite-slider",
{min:20,max:70,value:100*l,step:1,label:a.default.orgHomePageSetup.header.overlayOpacity,oncalciteSliderChange:M,ticks:0,id:"opacitySlider"}))))),(m.showLogo||m.showTitle)&&(0,c.h)("div",{class:"org-setup-text org-section needs-title-logo"},(0,c.h)("div",{class:"org-setup-header margin-bottom-1"},a.default.orgHomePageSetup.header.titleAndLogo),(0,c.h)("p",{class:"trailer-0 margin-bottom-half-rem"},(0,c.h)("fieldset",null,(0,c.h)("div",{class:"org-subtext"},(0,c.h)("legend",null,a.default.orgHomePageSetup.header.alignment)),
(0,c.h)("label",{class:"trailer-0",for:"title-alignment-left-radio"},(0,c.h)("input",{type:"radio",id:"title-alignment-left-radio",class:"alignment",name:"alignment",value:"left",onClick:I,checked:"left"===w}),q),(0,c.h)("label",{class:"trailer-0",for:"title-alignment-center-radio"},(0,c.h)("input",{type:"radio",id:"title-alignment-center-radio",class:"alignment",name:"alignment",value:"center",onClick:I,checked:"center"===w}),a.default.orgHomePageSetup.header.center))),m.showCoverImg&&(0,c.h)("div",
{class:"needs-cover-img leader-half"},(0,c.h)("label",{class:"trailer-0"},a.default.orgHomePageSetup.header.positioning,(0,c.h)("select",{name:"positioning",class:"positioning",onChange:L},(0,c.h)("option",{value:"above",selected:"above"===F},a.default.orgHomePageSetup.header.aboveCover),(0,c.h)("option",{value:"top3rd",selected:"top3rd"===F},a.default.orgHomePageSetup.header.topThird),(0,c.h)("option",{value:"middle",selected:"middle"===F},a.default.orgHomePageSetup.header.middleCover),(0,c.h)("option",
{value:"bottom3rd",selected:"bottom3rd"===F},a.default.orgHomePageSetup.header.bottomThird),(0,c.h)("option",{value:"below",selected:"below"===F},a.default.orgHomePageSetup.header.belowCover)))))))}})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/components/ContentAdmin":function(){define("require exports tslib preact preact/hooks dragula/dragula dojo/i18n!../../../../../../nls/arcgisonline ../utils/ContentCard ../utils/ContentAddButton".split(" "),function(S,J,f,c,h,d,b,a,e){Object.defineProperty(J,
"__esModule",{value:!0});d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);J.default=function(q){var t=q.HP,u=q.onContentChange,g=q.groupKeyedTitles;q=q.portal.isTrialOrg();var m=(0,h.useRef)(),v=(0,h.useRef)(),p=(0,h.useRef)(),l=(0,h.useState)(t.content),n=l[0],k=l[1];l=(0,h.useState)(!1);var r=l[0],w=l[1],x=(0,h.useState)(!1);l=x[0];var D=x[1];(0,h.useEffect)(function(){var C=(0,d.default)([m.current]).on("drop",G);return function(){C.remove()}},[]);(0,h.useEffect)(function(){var C;
null===(C=p.current)||void 0===C?void 0:C.focus()},[p.current]);var G=function(){for(var C=f.__spreadArray([],t.content,!0),H=[],E=m.current.querySelectorAll(".drag-content"),K=0;K<E.length;K++){var I=parseInt(E[K].dataset.order,10);H.push(C[I])}k(H);u("order",H)};(0,h.useEffect)(function(){r&&v.current.focus()},[r]);x=function(){w(!1)};var F=function(C){u("edit",C)},A=function(C){u("delete",C)},y=function(){u("addText","")},z=function(){u("addGallery","")},B=function(){u("addLink","")};return(0,c.h)("div",
{class:"setup-container flex-column"},(0,c.h)("div",{class:"org-button back-button",id:"contentToHomeButton","data-action":"start",tabIndex:0,ref:p,role:"button"},(0,c.h)("div",{class:"org-setup-header flex flex-align-center"},(0,c.h)("calcite-icon",{scale:"s",icon:"chevron-left"}),(0,c.h)("div",{class:"flex-1 margin-left-quarter"},b.default.orgHomePageSetup.start.home))),(0,c.h)("div",{class:"setup-body-wrapper flex-1"},(0,c.h)("div",{class:"org-setup-header org-title-bar"},b.default.orgHomePageSetup.start.body),
(0,c.h)("div",{class:"content-intro org-section org-subtext"},b.default.orgHomePageSetup.content.contentIntro),(0,c.h)("div",{class:"content-order"},(0,c.h)("div",{ref:m},n.map(function(C,H){return"link"!==C.type||C.links.length?(0,c.h)(a.default,{index:H,value:C,onEdit:F,onDelete:A,key:H,groupKeyedTitles:g,reorderContent:G}):(A(H),!1)}))),15<=t.content.length+3&&(0,c.h)("div",{class:"block-limit-warn org-subtext text-center"},b.default.orgHomePageSetup.link.linkTitleCharsRem.replace("${x}",15-t.content.length).replace("${chars}",
15)),(0,c.h)("div",{class:"org-setup-text  org-standard-text text-center"},(0,c.h)("button",{class:"btn btn-clear add-block","aria-label":"",onClick:function(){15<=t.content.length?D(!0):w(!0)}},b.default.orgHomePageSetup.content.addBlockPlus)),r&&(0,c.h)("div",{class:"setup-content"},(0,c.h)("div",{class:"setup-content-header"},(0,c.h)("div",{class:"setup-content-header-title"},b.default.orgHomePageSetup.content.addBlock),(0,c.h)("button",{class:"setup-content-header-close","aria-label":b.default.orgHomePageSetup.content.closeAddBlock,
ref:v,onClick:x},(0,c.h)("calcite-icon",{scale:"m",icon:"x"}))),(0,c.h)(e.default,{onClick:y,type:"Text"}),(0,c.h)(e.default,{onClick:z,type:"Gallery"}),!q&&(0,c.h)(e.default,{onClick:B,type:"Link"})),l&&(0,c.h)("div",{class:"block-limit"},(0,c.h)("div",{class:"block-limit-header"},(0,c.h)("div",{class:"block-limit-header-title"},b.default.orgHomePageSetup.content.blockLimitTitle),(0,c.h)("button",{class:"block-limit-header-close","aria-label":b.default.orgHomePageSetup.content.closeLimitReached,
onClick:function(){D(!1)}},(0,c.h)("calcite-icon",{scale:"m",icon:"x"}))),(0,c.h)("div",{class:"block-limit-text"},b.default.orgHomePageSetup.content.blockLimit))))}})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/utils/ContentCard":function(){define("require exports tslib preact preact/hooks dojo/i18n!../../../../../../nls/arcgisonline dojo/i18n!../../../../../../nls/org-settings ../../../../../utils/a11y".split(" "),function(S,J,f,c,h,d,b,a){Object.defineProperty(J,"__esModule",
{value:!0});d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);J.default=function(e){var q=e.index,t=e.value,u=e.onDelete,g=e.onEdit,m=e.groupKeyedTitles,v=e.reorderContent,p="",l="";e=(0,h.useState)({active:e.reorderItem,keyCode:"",index:-1});var n=e[0],k=e[1],r=(0,h.useRef)(),w,x="type"in t;x?"link"===t.type?(l=d.default.orgHomePageSetup.content.linkBlock,p=t.links[0].title):"text"===t.type?(l=d.default.orgHomePageSetup.content.textBlock,p=t.title):(l=d.default.orgHomePageSetup.content.itemGallery,
p=t.title||t.summary.substring(0,150)||m[t.groupId]):p=t.title;(0,h.useEffect)(function(){w=r.current.parentElement.children.length},[]);(0,h.useEffect)(function(){w=r.current.parentElement.children.length;var D=r.current.parentElement,G=n.keyCode;if("Enter"===G)n.active?(G=+D.dataset.order+1,D=b.default.reorder.current.replace("${n}",G).replace("${total}",w),a.default.postToLiveRegion("".concat(b.default.reorder.started," ").concat(D),"home-page-overlay__live-region")):v();else if("ArrowDown"===
G){var F=D.nextSibling;G=w;F&&(F.insertAdjacentElement("afterend",D),G=+F.dataset.order+1);D=b.default.reorder.new.replace("${n}",G).replace("${total}",w);a.default.postToLiveRegion(D,"home-page-overlay__live-region");r.current.focus()}else"ArrowUp"===G&&(F=D.previousSibling,G=1,F&&(F.insertAdjacentElement("beforebegin",D),G=+F.dataset.order||1),D=b.default.reorder.new.replace("${n}",G).replace("${total}",w),a.default.postToLiveRegion(D,"home-page-overlay__live-region"),r.current.focus())},[n]);m=
function(D){return"".concat(d.default.orgHomePageSetup.content[D],", ").concat(p,", ").concat(x?l:t.href)};return(0,c.h)("div",{class:"drag-content org-settings__card-list-row home-page-overlay__draggable-row flex flex-align-center draggable ".concat(n.active?"home-page-overlay__draggable-row--sorting tooltip":""),"data-order":q,id:""},(0,c.h)("div",{class:"flex-0 drag-icon tooltip-multiline tooltip-right","aria-label":m("reorder"),tabIndex:0,ref:r,onFocus:function(){if(!n.active){var D=b.default.reorder.current.replace("${n}",
q).replace("${total}",w);a.default.postToLiveRegion("".concat(b.default.reorder.focus," ").concat(D),"home-page-overlay__live-region")}},onKeyDown:function(D){var G=!1;"Space"===D.code||"Enter"===D.code?(k({active:!n.active,keyCode:"Enter",index:+r.current.dataset.order+1}),G=!0):n.active&&"ArrowDown"===D.code?(k({active:n.active,keyCode:"ArrowDown",index:n.index>=w?w:n.index+1}),G=!0):n.active&&"ArrowUp"===D.code?(k({active:n.active,keyCode:"ArrowUp",index:1<n.index?n.index-1:1}),G=!0):n.active&&
"Tab"===D.code?(k({active:n.active,keyCode:"Tab",index:n.index}),G=!0):"Escape"===D.code&&(k({active:!1,keyCode:"",index:-1}),G=!0);G&&(D.preventDefault(),D.stopPropagation())}},(0,c.h)("calcite-icon",{scale:"s",icon:"drag"})),(0,c.h)("button",{onClick:function(D){g(q)},"aria-label":m("edit"),tabIndex:0,class:"tooltip edit-drag-button tooltip-multiline"},(0,c.h)("div",{class:"drag-content-container drag flex-1",role:"button"},(0,c.h)("div",{class:"drag-content-text flex-1"},(0,c.h)("div",{class:"drag-content__title drag-".concat(""),
title:p},p),(0,c.h)("span",null,x?l:t.href)),(0,c.h)("div",{class:"flex-0 edit-content-item"},(0,c.h)("calcite-icon",{scale:"s",icon:"pencil"})))),(0,c.h)("button",{onClick:function(D){u(q)},"aria-label":m("delete"),tabIndex:0,class:"tooltip tooltip-multiline tooltip-left"},(0,c.h)("div",{class:"flex-0 remove-content-item",role:"button"},(0,c.h)("calcite-icon",{scale:"s",icon:"trash"}))))}})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/utils/ContentAddButton":function(){define(["require",
"exports","tslib","preact","dojo/i18n!../../../../../../nls/arcgisonline"],function(S,J,f,c,h){Object.defineProperty(J,"__esModule",{value:!0});h=f.__importDefault(h);J.default=function(d){var b=d.onClick;d=d.type;var a=d.toLowerCase(),e="Gallery"===d?h.default.orgHomePageSetup.content.itemGallery:h.default.orgHomePageSetup.content[a],q="Gallery"===d?"apps":a,t=h.default.orgHomePageSetup.content["".concat(a,"Description")];return(0,c.h)("button",{class:"org-button start-button",id:"contentTo".concat(d,
"Button"),"aria-label":e,"data-action":a,tabIndex:0,role:"button",onClick:b},(0,c.h)("div",{class:"add-block-icon flex-0"},(0,c.h)("calcite-icon",{scale:"m",icon:q})),(0,c.h)("div",{class:"add-block-text flex-1"},(0,c.h)("div",{class:"org-setup-header galleries-header"},e),(0,c.h)("div",{class:"start-text galleries-used"},t)))}})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/components/TextAdmin":function(){define("require exports tslib preact preact/hooks ../utils/homePageUtils dojo/i18n!../../../../../../nls/arcgisonline ../../../../../utils/strings ../utils/LinkedTextArea ../utils/ColorSelect ../utils/CustomColorOverlay".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t){Object.defineProperty(J,"__esModule",{value:!0});b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);J.default=function(u){var g,m=u.portal,v=u.HP,p=u.index,l=u.onTextChange,n=u.onCustColorChange,k=u.customColorDiv,r=v.content[p];u=b.default.orgHomePageSetup.galleryText.defaultTextTitle;var w=b.default.orgHomePageSetup.galleryText.defaultTextBody,x=m.isTrialOrg(),D=(0,h.useRef)(),G=(0,h.useState)(r.title),
F=G[0],A=G[1];G=(0,h.useState)(r.showTitle);var y=G[0],z=G[1],B=(0,h.useState)(r.body);G=B[0];var C=B[1];B=(0,h.useState)(r.showBody);var H=B[0],E=B[1],K=(0,h.useState)(r.alignment);B=K[0];var I=K[1],L=(0,h.useState)(55);K=L[0];var M=L[1],N=v.useCustomStyles?r.bgCustom:r.bgColor;r=(0,d.getColors)(v,"text",N);r=(0,h.useState)({name:r.startColor,class:r.startClassSuffix,value:N});var P=r[0],R=r[1],Y=(0,h.useRef)(),ja=(0,h.useRef)();(0,h.useEffect)(function(){M(55<D.current.value.length?0:55-D.current.value.length)},
[]);(0,h.useEffect)(function(){var ra;null===(ra=Y.current)||void 0===ra?void 0:ra.focus()},[Y.current]);r=function(ra){ra=a.default.stripHTML(ra.target.value).substr(0,55);A(ra);l("title",{title:ra,index:p});M(55-ra.length)};L=function(ra){C(ra);l("body",{body:ra,index:p})};var aa=function(ra){ra=ra.target.value;I(ra);l("alignment",{index:p,align:ra})},da=function(){(0,c.render)((0,c.h)(t.default,{portal:m,HP:v,index:parseInt(N.replace("custom",""),10)-1,onCancel:function(){k.classList.add("hide");
ja.current.focus()},onSave:function(ra,ca){k.classList.add("hide");var fa=f.__assign({},v);fa.customStyles[ra]=ca;ca=(0,d.getColors)(fa,"text","custom".concat(ra+1));R({name:ca.startColor,class:ca.startClassSuffix,value:"custom".concat(ra+1)});P.value!=="custom".concat(ra+1)&&l("color",{color:"custom".concat(ra+1),index:p});n("customStyles",v.customStyles);ja.current.focus()},key:Date.now()}),document.querySelector(".custom-color-overlay"));document.querySelector(".custom-color-overlay").classList.remove("hide")};
return(0,c.h)("div",{class:"setup-container flex-column"},(0,c.h)("div",{class:"org-button back-button",ref:Y,"data-action":"content",tabIndex:0,role:"button"},(0,c.h)("div",{class:"org-setup-header flex flex-align-center"},(0,c.h)("calcite-icon",{scale:"s",icon:"chevron-left"}),(0,c.h)("div",{class:"flex-1 margin-left-quarter"},b.default.orgHomePageSetup.start.body))),(0,c.h)("div",{class:"setup-body-wrapper flex-1"},(0,c.h)("div",{class:"org-setup-header org-title-bar"},b.default.orgHomePageSetup.content.textBlock),
(0,c.h)("div",{class:"org-section"},(0,c.h)("div",{class:"org-setup-text"},(0,c.h)("div",{class:"org-padding-top"},(0,c.h)("calcite-label",{layout:"inline-space-between"},b.default.orgHomePageSetup.galleryText.showHeadline,(0,c.h)("calcite-switch",{name:"showTitle",value:"enabled",checked:y,"aria-label":b.default.orgHomePageSetup.galleryText.showHeadline,scale:"l",oncalciteSwitchChange:function(){l("showTitle",{state:!y,index:p});z(!y)}}))),y&&(0,c.h)("div",{class:"title-email toggle__title"},(0,c.h)("label",
{class:"trailer-0"},b.default.orgHomePageSetup.galleryText.headline,(0,c.h)("br",null),(0,c.h)("input",{name:"textTitle",class:"textTitle",id:"textTitle",placeholder:u,ref:D,maxLength:55,"aria-label":b.default.orgHomePageSetup.galleryText.headline,value:F!==u?F.substring(0,55):"",onKeyUp:r})),(0,c.h)("div",{class:"org-subtext",role:"status"},null===(g=b.default.orgHomePageSetup.galleryText.charsRemaining)||void 0===g?void 0:g.replace("${x}",K)))),(0,c.h)("div",{class:"org-setup-text"},(0,c.h)("div",
{class:"org-padding-top"},(0,c.h)("div",{class:"trailer-0"},b.default.orgHomePageSetup.galleryText.showBodyCopy,(0,c.h)("div",{id:"displayBody",class:"bodyTog toggle-right"},(0,c.h)("calcite-switch",{name:"showBody",value:"enabled",checked:H,"aria-label":b.default.orgHomePageSetup.galleryText.showBodyCopy,scale:"l",oncalciteSwitchChange:function(){l("showBody",{state:!H,index:p});E(!H)}})))),H&&(0,c.h)("div",{class:"body-text toggle__body"},(0,c.h)(e.default,{isTrial:x,textValue:G,maxChars:1E3,onTextChange:L,
portal:m,defaultValue:w,label:b.default.orgHomePageSetup.galleryText.bodyCopy}))),(0,c.h)("div",{class:"org-setup-text org-padding-top"},b.default.orgHomePageSetup.galleryText.headlineBodyAlign,(0,c.h)("label",{class:"trailer-0",for:"text-align-left-radio"},(0,c.h)("input",{type:"radio",id:"text-align-left-radio",name:"headlineBodyAlign",class:"headlineBodyAlign",value:"left",onClick:aa,checked:"left"===B}),b.default.orgHomePageSetup.header.left),(0,c.h)("label",{class:"trailer-0",for:"text-align-center-radio"},
(0,c.h)("input",{type:"radio",id:"text-align-center-radio",name:"headlineBodyAlign",class:"headlineBodyAlign",value:"center",onClick:aa,checked:"center"===B}),b.default.orgHomePageSetup.header.center)),(0,c.h)("div",{class:"org-background-one-line org-setup-text org-padding-top"},(0,c.h)("div",{class:"trailer-0"},(0,c.h)("div",{class:"content-block-color-title"},(0,c.h)("div",{class:"title"},b.default.orgHomePageSetup.galleryText.backgroundColor),P.value.match(/^custom/)&&(0,c.h)("a",{href:"javascript:void(0)",
ref:ja,onClick:da},(0,c.h)("div",{class:"edit-custom-block-color"},b.default.orgHomePageSetup.styles.editCustomStyle))),(0,c.h)(q.default,{id:"text-color-select",HP:v,section:"text",onSelect:function(ra){l("color",{color:ra.value,index:p});R(ra)},color:P,title:"",labelSection:b.default.orgHomePageSetup.galleryText.backgroundColor}))))))}})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/utils/LinkedTextArea":function(){define("require exports tslib preact dojo/i18n!../../../../../../nls/arcgisonline preact/hooks ./homePageUtils ../utils/LinkDialog ../../../../../utils/validation".split(" "),
function(S,J,f,c,h,d,b,a,e){Object.defineProperty(J,"__esModule",{value:!0});h=f.__importDefault(h);a=f.__importDefault(a);e=f.__importDefault(e);J.default=function(q){var t,u,g=q.isTrial,m=q.textValue,v=q.maxChars,p=q.onTextChange,l=q.portal,n=q.label,k=q.defaultValue;q=(0,d.useState)({start:0,end:0});var r=q[0],w=q[1],x=(0,d.useState)({text:"",href:""});q=x[0];var D=x[1],G=(0,d.useState)(!1);x=G[0];var F=G[1];G=(0,d.useState)(m);var A=G[0],y=G[1],z=(0,d.useState)(m===k?v:v-(m.length-(0,b.getLinksLength)(m)));
G=z[0];var B=z[1],C=(0,d.useState)(h.default.orgHomePageSetup.link.addLink);z=C[0];var H=C[1];C=(0,d.useState)(void 0);var E=C[0],K=C[1],I=(0,d.useRef)(),L=(0,d.useRef)(),M=(0,d.useRef)();C=function(){F(!0)};var N=function(){var ja;F(!1);null===(ja=M.current)||void 0===ja?void 0:ja.focus()},P=function(ja){F(!1);ja="[".concat(ja.link.title,"](").concat(ja.link.href,")");E?y("".concat(A.substring(0,E.start)).concat(ja).concat(A.substring(E.end,A.length))):y(A.substring(0,r.start)+ja+A.substring(r.end,
A.length))};(0,d.useEffect)(function(){e.default.clearState([I.current,L.current]);A.match("http://")?e.default.setInvalidState(I.current,L.current,h.default.orgHomePageSetup.link.linkHrefError,!0):(B(m===k?v:v-(A.length-(0,b.getLinksLength)(A))),p(A))},[A]);var R=function(ja,aa,da){var ra;(0,b.getLinkRanges)(da).some(function(ca){var fa=ca.split("-");ca=parseInt(fa[0],10)+1;fa=parseInt(fa[1],10);var la=ja>=ca&&ja<=fa||ja<=fa&&aa>=fa||ja<=ca&&aa>=fa;if(la){var ta=A.slice(ca,fa).split("](");ra={text:ta[0],
href:ta[1]};K({start:ca-1,end:fa+1})}return la});return ra},Y=function(ja){var aa=ja.target;ja=aa.selectionStart;aa=aa.selectionEnd;w({start:ja,end:aa});var da=R(ja,aa,A);da?(D(da),H(h.default.orgHomePageSetup.link.editLink)):(ja!==aa?D({text:A.substring(ja,aa),href:""}):D({text:"",href:""}),H(h.default.orgHomePageSetup.link.addLink),K(void 0))};g=!g&&(0<G||0<(null===(t=null===q||void 0===q?void 0:q.text)||void 0===t?void 0:t.length));return(0,c.h)(c.Fragment,null,(0,c.h)("div",{class:"text-area-link-button-div"},
(0,c.h)("span",{class:"trailer-0 no-link"},n),g&&(0,c.h)("label",{class:"trailer-0 yes-link"},(0,c.h)("button",{class:"text-area-link-button",type:"button","aria-labelledby":"footer-add-link",onClick:C,ref:M,tabIndex:-1},(0,c.h)("span",{class:"text-add-link-surround",tabIndex:0},(0,c.h)("calcite-icon",{scale:"s",icon:"link"}),(0,c.h)("span",{id:"footer-add-link",class:"text-area-link-btext"},z))))),(0,c.h)("textarea",{name:"copyText",class:"copyText",ref:I,onInput:function(ja){var aa=(0,b.getLinksLength)(A);
y(ja.target.value.substring(0,v+aa))},onKeyUp:Y,onSelect:Y,onClick:Y,value:A,onFocus:function(){A===k&&y("")},"aria-label":h.default.orgHomePageSetup.footer.footText}),(0,c.h)("div",{class:"org-subtext",role:"status"},null===(u=h.default.orgHomePageSetup.galleryText.charsRemaining)||void 0===u?void 0:u.replace("${x}",G)),(0,c.h)("div",{ref:L,class:"input-error-message invalid-copy-text"}),x&&(0,c.h)("div",{class:"text-area-link-div"},(0,c.h)(a.default,{charsRem:G,link:q,onLinkChange:P,onClose:N,portal:l})))}})},
"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/utils/LinkDialog":function(){define("require exports tslib preact dojo/i18n!../../../../../../nls/arcgisonline preact/hooks arcgisonline/sharing/util ../../../../../components/ImageUploadModal/ImageUploadModal".split(" "),function(S,J,f,c,h,d,b,a){Object.defineProperty(J,"__esModule",{value:!0});h=f.__importDefault(h);b=f.__importDefault(b);a=f.__importDefault(a);J.default=function(e){var q,t=e.charsRem,u=e.textAreaCursor,g=e.link,
m=e.onLinkChange,v=e.onClose,p=e.images,l=e.index,n,k=e.portal.isPortal;void 0!==g.title&&(g.text=g.title);-1===t&&(t=30-g.text.length);var r=(0,d.useState)(t);e=r[0];var w=r[1];r=(0,d.useState)(g.text);var x=r[0],D=r[1],G=(0,d.useState)(!1);r=G[0];var F=G[1];G=(0,d.useState)(g.href);var A=G[0],y=G[1],z=(0,d.useState)(!1);G=z[0];var B=z[1];z=(0,d.useState)(g.image||null);var C=z[0],H=z[1],E=(0,d.useState)(!1);z=E[0];var K=E[1];E=(0,d.useState)();var I=E[0],L=E[1],M=t+g.text.length,N=(0,d.useRef)(),
P=(0,d.useRef)(),R=(0,d.useRef)();(0,d.useEffect)(function(){setTimeout(function(){R.current.focus()},10)},[]);var Y=function(){var ca=A.toLowerCase();return!(!ca||!k&&0===ca.indexOf("http://")||!(b.default.isValidUrl(ca)||0===ca.indexOf("mailto:")&&b.default.isValidEmailAddress(ca.replace("mailto:",""))))},ja=function(ca){var fa=ca.blob,la=ca.base64;ca=ca.fileName.replace(/ +/g,"_");ca=ca.replace(/[^0-9a-zA-Z._-]+/g,"");if(ca.match(/^[._-]/)||!ca)ca=(new Date).getTime()+ca;L({blob:fa,URI:la,fileName:ca,
prevFile:!g.image||g.image.match(/ ^ /)?null:g.image});H("".concat(ca," ^ ").concat(la));aa()},aa=function(){n.remove();n=void 0};t=function(ca){n||(n=document.createElement("div"),n.classList.add("homepage-link-img-upload-container"),document.querySelector(".home-page-overlay__content").closest(".overlay").appendChild(n));(0,c.render)((0,c.h)(a.default,{noEdit:!1,height:181,aspectRatio:1.52,onSave:ja,onCancel:aa,fromOverlay:!0,zoomToFull:!0,texts:{title:h.default.GroupWidget.thumbnailDlg.uploadImage,
size:h.default.GroupWidget.thumbnailDlg.sizeSpec}}),n)};E=function(){H(null)};var da=function(ca){null===v||void 0===v?void 0:v()},ra=null===(q=h.default.orgHomePageSetup.galleryText.charsRemaining)||void 0===q?void 0:q.replace("${x}",e);q=!x&&(r||z);r=!Y()&&(G||z);return(0,c.h)("div",{class:"setup-link"},(0,c.h)("div",{class:"setup-link-header"},(0,c.h)("div",{class:"setup-link-header-title",ref:R,tabIndex:0},0<g.href.length?h.default.orgHomePageSetup.link.editLink:h.default.orgHomePageSetup.link.addLink),
(0,c.h)("button",{class:"setup-link-header-close",role:"button",onClick:da,"aria-label":h.default.common.close},(0,c.h)("calcite-icon",{icon:"x",scale:"l"}))),"number"!==typeof l&&(0,c.h)("div",{class:"link-section org-subtext"},h.default.orgHomePageSetup.link.addLinkText),(0,c.h)("div",{class:"link-section start-button",role:"button"},(0,c.h)("div",{class:"add-link-text"},(0,c.h)("div",{class:"org-setup-header link-title"},h.default.orgHomePageSetup.link.linkTitle),(0,c.h)("div",{class:""},(0,c.h)("input",
{id:"linkTitle","aria-label":h.default.orgHomePageSetup.link.linkTitle,type:"text",value:x,ref:N,maxLength:x.length+e,onInput:function(ca){ca=ca.target.value;var fa=M-ca.length;0>fa&&(ca=ca.substring(0,M),fa=0);D(ca);F(!0);w(fa)},placeholder:h.default.orgHomePageSetup.link.linkTitleDefault,class:"".concat(q?"input-error":"")})),(0,c.h)("span",{role:"status"},ra),(0,c.h)("div",{class:"content-intro org-section org-subtext title-error error-color ".concat(q?"":"hide")},h.default.orgHomePageSetup.link.linkTitleError),
(0,c.h)("div",{class:"content-intro org-section org-subtext link-chars"}))),p&&(0,c.h)("div",{class:"link-section start-button needs-link-image",role:"button"},(0,c.h)("div",{class:"add-link-text"},(0,c.h)("div",{class:"org-setup-header link-image-title link-title"},h.default.orgHomePageSetup.link.linkImage))),p&&(0,c.h)("div",{class:"home-page__image-upload-card org-subtext home-page__link-inputs needs-link-image"},(0,c.h)("div",{class:"home-page__logo-name",id:"linkImageText"},C?h.default.orgHomePageSetup.link.imageApplied:
h.default.orgHomePageSetup.link.noImageApplied),C&&(0,c.h)("div",{tabIndex:0,id:"linkImageEdit","aria-label":h.default.orgHomePageSetup.link.replaceImage,onClick:t,class:"tooltip tooltip-left link-edit-image home-page__edit-btn"},(0,c.h)("calcite-icon",{icon:"image-plus",scale:"s"})),C&&(0,c.h)("div",{tabIndex:0,id:"linkImageDelete","aria-label":h.default.orgHomePageSetup.link.deleteImage,onClick:E,class:"tooltip tooltip-left link-delete-image home-page__del-btn"},(0,c.h)("calcite-icon",{icon:"trash",
scale:"s"})),!C&&(0,c.h)("div",{tabIndex:0,id:"linkImageAdd",onClick:t,class:"link-add-image home-page__logo-link home-page__del-btn"},h.default.orgHomePageSetup.link.uploadImage)),(0,c.h)("div",{class:"link-section start-button",role:"button"},(0,c.h)("div",{class:"add-link-text"},(0,c.h)("div",{class:"org-setup-header link-title"},h.default.orgHomePageSetup.link.linkDestination),(0,c.h)("div",{class:""},(0,c.h)("input",{id:"linkHref","aria-label":h.default.orgHomePageSetup.link.linkDestination,
type:"text",value:A,ref:P,onInput:function(ca){y(ca.target.value);B(!0)},placeholder:h.default.orgHomePageSetup.link.linkHrefDefault,class:"".concat(r?"input-error":"")})),(0,c.h)("div",{class:"content-intro org-section org-subtext href-error ".concat(r?"title-error":"")},h.default.orgHomePageSetup.link.linkHrefError))),(0,c.h)("div",{class:"link-section link-buttons",id:"linkAddCancel"},(0,c.h)("button",{class:"link-cancel btn-clear btn-cancel btn margin-right-quarter",role:"button",onClick:da,"aria-label":h.default.common.cancel},
h.default.common.cancel),(0,c.h)("button",{class:"link-save btn",role:"button",onClick:function(ca){K(!0);Y()?ca=!0:(P.current.focus(),ca=!1);if(x)var fa=!0;else N.current.focus(),fa=!1;if(!ca||!fa)return!1;m?null!==l?m({index:l,link:{title:x,href:A,image:C},imageInfo:I}):m({link:"[".concat(x,"](").concat(A,")")}):(ca=null!==l?new CustomEvent("HPLinkAddUpdate",{detail:{link:{title:x,href:A},index:l,image:C}}):new CustomEvent("HPTALinkEvent",{detail:{link:"[".concat(x,"](").concat(A,")"),textAreaCursor:u}}),
document.dispatchEvent(ca))},"aria-label":h.default.common.save},h.default.common.save)))}})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/components/LinkAdmin":function(){define("require exports tslib preact preact/hooks dojo/i18n!../../../../../../nls/arcgisonline dragula/dragula ../utils/homePageUtils ../utils/LinkDialog ../utils/ColorSelect ../utils/ContentCard ../utils/CustomColorOverlay".split(" "),function(S,J,f,c,h,d,b,a,e,q,t,u){Object.defineProperty(J,"__esModule",{value:!0});
d=f.__importDefault(d);b=f.__importDefault(b);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);J.default=function(g){var m=g.HP,v=g.linkValues,p=g.index,l=g.portal,n=g.onLinksChange,k=g.onCustColorChange,r=g.customColorDiv;g=(0,h.useState)(v.links);var w=g[0],x=g[1];g=(0,h.useState)(!1);var D=g[0],G=g[1],F=(0,h.useState)({title:"",href:"",image:""});g=F[0];var A=F[1];F=(0,h.useState)();var y=F[0],z=F[1],B=(0,h.useState)(v.images||!1);F=B[0];var C=B[1],H=
{};B=m.useCustomStyles?v.bgCustom:v.bgColor;var E=(0,a.getColors)(m,"link",B);B=(0,h.useState)({name:E.startColor,class:E.startClassSuffix,value:B});var K=B[0],I=B[1],L=(0,h.useRef)(),M=(0,h.useRef)(),N=(0,h.useRef)();(0,h.useEffect)(function(){var aa=(0,b.default)([L.current]).on("drop",P);return function(){aa.remove()}},[]);(0,h.useEffect)(function(){var aa;null===(aa=M.current)||void 0===aa?void 0:aa.focus()},[M.current]);var P=function(){for(var aa=f.__spreadArray([],v.links,!0),da=[],ra=L.current.querySelectorAll(".drag-content"),
ca=0;ca<ra.length;ca++){var fa=parseInt(ra[ca].dataset.order,10);da.push(aa[fa])}x(da)};(0,h.useEffect)(function(){n("links",{index:p,links:w})},[w]);B=function(){G(!1)};(0,h.useEffect)(function(){if(!D){var aa=L.current.querySelectorAll(".edit-drag-button")[y];null===aa||void 0===aa?void 0:aa.focus()}},[D]);var R=function(aa){var da=f.__spreadArray([],w,!0);da.splice(aa,1);x(da)},Y=function(aa){A(w[aa]);z(aa);G(!0)};E=function(aa){var da=w.slice(0);da[aa.index]=aa.link;x(da);G(!1);aa.imageInfo&&
(H[aa.imageInfo.fileName]=aa.imageInfo,n("linkImages",{index:p,linkImages:H}))};var ja=function(){var aa=parseInt(K.value.replace("custom",""),10)-1;(0,c.render)((0,c.h)(u.default,{portal:l,HP:m,index:aa,onCancel:function(){r.classList.add("hide");N.current.focus()},onSave:function(da,ra){r.classList.add("hide");var ca=f.__assign({},m);ca.customStyles[da]=ra;ra=(0,a.getColors)(ca,"link","custom".concat(da+1));I({name:ra.startColor,class:ra.startClassSuffix,value:"custom".concat(da+1)});K.value!==
"custom".concat(da+1)&&n("color",{color:"custom".concat(da+1),index:p});k("customStyles",m.customStyles);N.current.focus()}}),document.querySelector(".custom-color-overlay"));document.querySelector(".custom-color-overlay").classList.remove("hide")};return(0,c.h)("div",{class:"setup-container flex-column"},(0,c.h)("div",{class:"org-button back-button link-section-button","data-action":"content",onClick:function(){0===w.length?n("noLinks",p):n("hasLinks",p)},tabIndex:0,ref:M,role:"button"},(0,c.h)("div",
{class:"org-setup-header flex flex-align-center"},(0,c.h)("calcite-icon",{scale:"s",icon:"chevron-left"}),(0,c.h)("div",{class:"flex-1 margin-left-quarter"},d.default.orgHomePageSetup.start.body))),(0,c.h)("div",{class:"setup-body-wrapper flex-1"},(0,c.h)("div",{class:"org-setup-header org-title-bar add-link-block-title leftbar-focus"},w.length?d.default.orgHomePageSetup.link.editLinkBlock:d.default.orgHomePageSetup.link.addLinkBlock),(0,c.h)("div",{class:"org-setup-header org-title-bar hide edit-link-block-title"},
d.default.orgHomePageSetup.link.editLinkBlock),(0,c.h)("div",{class:"current-links"},(0,c.h)("div",{class:"org-section"},d.default.orgHomePageSetup.link.links),(0,c.h)("div",{class:"link-order",ref:L},w.map(function(aa,da){return(0,c.h)(t.default,{index:da,value:aa,onEdit:Y,onDelete:R,key:"link-".concat(aa),reorderContent:P})}))),(0,c.h)("div",{class:"org-setup-text  org-standard-text text-center"},(0,c.h)("button",{class:"btn btn-clear add-link","aria-label":d.default.orgHomePageSetup.link.addLinkPlus,
onClick:function(){z(w.length);A({title:"",href:""});G(!0)}},d.default.orgHomePageSetup.link.addLinkPlus)),(0,c.h)("div",{class:"links-rem"},d.default.orgHomePageSetup.link.linkTitleCharsRem.replace("${x}",8-w.length).replace("${chars}",8)),(0,c.h)("div",{class:"org-setup-text org-padding-top"},(0,c.h)("calcite-label",{layout:"inline-space-between"},d.default.orgHomePageSetup.link.addImage,(0,c.h)("calcite-switch",{name:"images",value:"enabled",checked:F,"aria-label":d.default.orgHomePageSetup.link.addImage,
scale:"l",oncalciteSwitchChange:function(aa){aa=aa.target.checked;n("images",{index:p,images:aa});C(aa)}}))),(0,c.h)("div",{class:"org-setup-text org-padding-top"},(0,c.h)("calcite-label",{layout:"inline-space-between"},d.default.orgHomePageSetup.link.showButtonOutlines,(0,c.h)("calcite-switch",{name:"showButtonOutlines",value:"enabled",checked:v.showOutline,"aria-label":d.default.orgHomePageSetup.link.showButtonOutlines,scale:"l",oncalciteSwitchChange:function(aa){n("showOutline",{index:p,showOutline:aa.target.checked})}}))),
(0,c.h)("div",{class:"org-background-one-line org-setup-text org-padding-top"},(0,c.h)("div",{class:"trailer-0"},(0,c.h)("div",{class:"content-block-color-title"},(0,c.h)("div",{class:"title",id:"color-select-label"},d.default.orgHomePageSetup.galleryText.backgroundColor),K.value.match(/^custom/)&&(0,c.h)("a",{href:"javascript:void(0)",ref:N,onClick:ja},(0,c.h)("div",{class:"edit-custom-block-color"},d.default.orgHomePageSetup.styles.editCustomStyle))),(0,c.h)(q.default,{id:"links-color-select",HP:m,
section:"links",onSelect:function(aa){n("color",{color:aa.value,index:p});I(aa)},color:K,title:"",labelSection:d.default.orgHomePageSetup.galleryText.backgroundColor})))),D&&(0,c.h)("div",{class:"text-area-link-div"},(0,c.h)(e.default,{charsRem:-1,link:g,index:y,images:F,onLinkChange:E,onClose:B,portal:l})))}})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/components/GalleryAdmin":function(){define("require exports tslib preact preact/hooks ../utils/homePageUtils dojo/i18n!../../../../../../nls/arcgisonline ../../../../../utils/strings ../utils/LinkedTextArea ../utils/ColorSelect ../../GroupSelect ../utils/CustomColorOverlay".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u){Object.defineProperty(J,"__esModule",{value:!0});b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);J.default=function(g){var m,v=g.portal,p=g.HP,l=g.index,n=g.onGalleryChange,k=g.onCustColorChange,r=g.customColorDiv,w=g.groups,x=p.content[l],D=[],G=[],F=null,A=null,y=v.isTrialOrg(),z=(0,h.useRef)(),B=(0,h.useRef)(),C,H=(0,h.useState)(x.groupId),E=H[0],K=H[1],I=(0,h.useState)(x.title),
L=I[0],M=I[1],N=(0,h.useState)(x.showTitle),P=N[0],R=N[1],Y=(0,h.useState)(x.showSummary),ja=Y[0],aa=Y[1],da=(0,h.useState)(x.alignment),ra=da[0],ca=da[1],fa=(0,h.useState)(x.sortField),la=fa[0],ta=fa[1],Q=(0,h.useState)(x.itemType),T=Q[0],O=Q[1],Z=(0,h.useState)(!1),na=Z[0],ia=Z[1],X=(0,h.useState)(x.numItems),ha=X[0],V=X[1],ea=(0,h.useState)(x.showViewLink),U=ea[0],ka=ea[1],ma=(0,h.useState)(x.showItemThumb),sa=ma[0],pa=ma[1],Aa=(0,h.useState)(x.showItemTitle),za=Aa[0],Ba=Aa[1],ua=(0,h.useState)(x.showItemSummary),
Fa=ua[0],va=ua[1],xa=(0,h.useState)(x.showItemType),Da=xa[0],Ca=xa[1],qa=(0,h.useState)([0,0,0]),W=qa[0],ba=qa[1],oa=(0,h.useState)(),wa=oa[0],Ea=oa[1],Ga=(0,h.useState)(),Ja=Ga[0],ya=Ga[1],Ha=(0,h.useState)(),Ia=Ha[0],Ka=Ha[1],Ma=(0,h.useState)(),Na=Ma[0],La=Ma[1],Pa=(0,h.useState)(!1),Oa=Pa[0],Qa=Pa[1],Ra=(0,h.useState)(!0),Sa=Ra[0],Ua=Ra[1],Va=(0,h.useState)(!0),Ya=Va[0],Wa=Va[1],$a=p.useCustomStyles?x.bgCustom:x.bgColor,Ta=(0,d.getColors)(p,"text",$a),Xa=(0,h.useState)({name:Ta.startColor,class:Ta.startClassSuffix,
value:$a}),Za=Xa[0],bb=Xa[1],db=(0,h.useState)(null===(m=b.default.orgHomePageSetup.galleryText.charsRemaining)||void 0===m?void 0:m.replace("${x}",55<L.length?0:55-L.length)),cb=db[0],gb=db[1],ab=(0,h.useRef)();(0,h.useEffect)(function(){rb(w)},[]);(0,h.useEffect)(function(){var eb;null===(eb=ab.current)||void 0===eb?void 0:eb.focus()},[ab.current]);(0,h.useEffect)(function(){n("groupId",{index:l,value:E});var eb=w.filter(function(nb){return nb.id===E})[0];(0,d.getGroupCounts)(E).then(ba);Ea(eb);
hb()},[E]);(0,h.useEffect)(function(){n("sortField",{index:l,value:la})},[la]);(0,h.useEffect)(function(){Ya?Wa(!1):Qa(0===W[0]+W[1]+W[2])},[W]);(0,h.useEffect)(function(){(null===wa||void 0===wa?0:wa.access)&&La(wa.access.replace("org",b.default.groupsPage.organization).replace("public",b.default.groupsPage.everyone).replace("private",b.default.orgHomePageSetup.content.groupMembers))},[wa]);(0,h.useEffect)(function(){var eb={value:T,index:l,callback:null};"All"!==T&&(eb.callback=sb);n("itemType",
eb)},[T]);var hb=function(){Ja&&Ia&&(Ja[E]&&0!==Ia[E].length?(Ya||(ta("title"),O("All")),Ua(!0)):(Ya||ta("title"),Ua(!1)))},fb=function(eb){var nb;eb="string"===typeof eb?eb:eb.target.value;eb=a.default.stripHTML(eb).substr(0,55);M(eb);n("title",{value:eb,index:l});gb(null===(nb=b.default.orgHomePageSetup.galleryText.charsRemaining)||void 0===nb?void 0:nb.replace("${x}",55-eb.length))},ib=function(eb,nb){eb=a.default.stripHTML(eb).substring(0,500);n("summary",{index:l,value:eb})},lb=function(eb){eb=
eb.target.value;ca(eb);n("alignment",{index:l,value:eb})},jb=function(eb){ta(eb.target.checked?"featured":"title")},kb=function(eb){ta(eb.target.value)},ob=function(eb){n("sortAsc",{index:l,value:eb.target.checked})},tb=function(eb){ia(!1);O(eb.target.value)},sb=function(){ia(!0)},rb=function(eb){F={};A={};eb.forEach(function(mb){var pb,qb;D.push(mb.title.substring(0,55));G.push(mb.snippet);F[mb.id]=null===(pb=mb.properties)||void 0===pb?void 0:pb.isFeatured;A[mb.id]=(null===(qb=mb.properties)||void 0===
qb?void 0:qb.featuredItemIds)||[]});ya(F);Ka(A);var nb=eb.filter(function(mb){return mb.id===E})[0];Ea(nb);hb();(0,d.getGroupCounts)(E).then(ba);C=new t.default({baseClass:"leader-half",portal:v,groups:eb,selectedGroup:nb,editButtonClass:"full-width",pickerClass:"home-page-overlay__group-picker"});z.current.appendChild(C.domNode);C.on("change",function(mb){mb=mb.group;K((null===mb||void 0===mb?void 0:mb.id)||null);fb(mb.title);ib(mb.snippet,!0);ia(!1)})},ub=function(){(0,c.render)((0,c.h)(u.default,
{portal:v,HP:p,index:parseInt($a.replace("custom",""),10)-1,onCancel:function(){r.classList.add("hide");B.current.focus()},onSave:function(eb,nb){r.classList.add("hide");var mb=f.__assign({},p);mb.customStyles[eb]=nb;nb=(0,d.getColors)(mb,"gallery","custom".concat(eb+1));bb({name:nb.startColor,class:nb.startClassSuffix,value:"custom".concat(eb+1)});Za.value!=="custom".concat(eb+1)&&n("color",{color:"custom".concat(eb+1),index:l});k("customStyles",p.customStyles);B.current.focus()},key:Date.now()}),
document.querySelector(".custom-color-overlay"));document.querySelector(".custom-color-overlay").classList.remove("hide")};return(0,c.h)("div",{class:"setup-container flex-column"},(0,c.h)("div",{class:"org-button back-button","data-action":"content",ref:ab,tabIndex:0,role:"button"},(0,c.h)("div",{class:"org-setup-header flex flex-align-center"},(0,c.h)("calcite-icon",{scale:"s",icon:"chevron-left"}),(0,c.h)("div",{class:"flex-1 margin-left-quarter"},b.default.orgHomePageSetup.start.body))),(0,c.h)("div",
{class:"setup-body-wrapper flex-1"},(0,c.h)("div",{class:"org-setup-header org-title-bar"},b.default.orgHomePageSetup.content.itemGallery),(0,c.h)("div",{class:"org-section"},(0,c.h)("div",{class:"org-setup-text  org-standard-text  "},b.default.orgHomePageSetup.galleryText.group,(0,c.h)("br",null),(0,c.h)("div",{id:"galleryGroup",class:"gallery-group",ref:z})),Oa&&(0,c.h)("div",{class:"input-error-message empty-group-error is-active","aria-live":"polite"},b.default.orgHomePageSetup.galleryText.groupNoItems),
(0,c.h)("div",{class:"groupMoreInfo"},(0,c.h)("div",{class:"group-info"},(0,c.h)("div",{class:"group-access",tabIndex:0},b.default.orgHomePageSetup.galleryText.groupViewableBy," ",(0,c.h)("span",{class:"val"}," ",Na)),(0,c.h)("div",{class:"group-total",tabIndex:0},(0,c.h)("calcite-icon",{scale:"s",icon:"users"}),b.default.orgHomePageSetup.galleryText.groupItems,(0,c.h)("span",{class:"val"}," ",W[2])),(0,c.h)("div",{class:"group-org",tabIndex:0},(0,c.h)("calcite-icon",{scale:"s",icon:"organization"}),
b.default.orgHomePageSetup.galleryText.organizationItems,(0,c.h)("span",{class:"val"}," ",W[1])),(0,c.h)("div",{class:"group-public",tabIndex:0},(0,c.h)("calcite-icon",{scale:"s",icon:"globe"}),b.default.orgHomePageSetup.galleryText.everyoneItems,(0,c.h)("span",{class:"val"}," ",W[0]))))),(0,c.h)("div",{class:"org-section"},(0,c.h)("div",{class:"org-setup-text"},(0,c.h)("div",{class:"org-padding-top"},(0,c.h)("calcite-label",{layout:"inline-space-between"},b.default.orgHomePageSetup.galleryText.showGalleryTitle,
(0,c.h)("calcite-switch",{name:"showTitle",value:"enabled",checked:P,"aria-label":b.default.orgHomePageSetup.galleryText.showGalleryTitle,scale:"l",oncalciteSwitchChange:function(){n("showTitle",{value:!P,index:l});R(!P)}}))),P&&(0,c.h)("div",{class:"title-email toggle__title"},(0,c.h)("label",{class:"trailer-0"},b.default.orgHomePageSetup.galleryText.galleryTitle,(0,c.h)("br",null),(0,c.h)("input",{name:"galleryTitle",class:"galleryTitle",id:"galleryTitle",maxLength:55,title:b.default.orgHomePageSetup.galleryText.galleryTitle,
"aria-label":b.default.orgHomePageSetup.galleryText.galleryTitle,value:L.substring(0,55),onKeyUp:fb})),(0,c.h)("div",{class:"org-subtext",role:"status"},cb))),(0,c.h)("div",{class:"org-setup-text"},(0,c.h)("div",{class:"org-padding-top"},(0,c.h)("calcite-label",{layout:"inline-space-between"},b.default.orgHomePageSetup.galleryText.showGallerySummary,(0,c.h)("calcite-switch",{name:"showBody",value:"enabled",checked:ja,"aria-label":b.default.orgHomePageSetup.galleryText.gallerySummary,scale:"l",oncalciteSwitchChange:function(){n("showSummary",
{value:!ja,index:l});aa(!ja)}}))),ja&&(0,c.h)("div",{class:"body-text toggle__body"},(0,c.h)(e.default,{isTrial:y,textValue:x.summary,maxChars:500,onTextChange:ib,portal:v,label:b.default.orgHomePageSetup.galleryText.gallerySummary}))),(0,c.h)("div",{class:"org-setup-text org-padding-top"},b.default.orgHomePageSetup.galleryText.titleSummaryAlign,(0,c.h)("label",{class:"trailer-0",for:"text-align-left-radio"},(0,c.h)("input",{type:"radio",id:"text-align-left-radio",name:"headlineBodyAlign",class:"headlineBodyAlign",
value:"left",onClick:lb,checked:"left"===ra}),b.default.orgHomePageSetup.header.left),(0,c.h)("label",{class:"trailer-0",for:"text-align-center-radio"},(0,c.h)("input",{type:"radio",id:"text-align-center-radio",name:"headlineBodyAlign",class:"headlineBodyAlign",value:"center",onClick:lb,checked:"center"===ra}),b.default.orgHomePageSetup.header.center)),(0,c.h)("div",{class:"org-section"},(0,c.h)("div",{class:"org-setup-text  org-standard-text"},(0,c.h)("label",{class:"trailer-0"},b.default.orgHomePageSetup.galleryText.numDisplayed,
(0,c.h)("br",null),(0,c.h)("select",{"aria-label":b.default.orgHomePageSetup.galleryText.numDisplayed,onChange:function(eb){n("numItems",{index:l,value:parseInt(eb.target.value,10)});V(parseInt(eb.target.value,10))},class:"galleryNumDisp",id:"galleryNumDisp"},(0,c.h)("option",{value:"4",selected:4===ha},"4"),(0,c.h)("option",{value:"8",selected:8===ha},"8"),(0,c.h)("option",{value:"12",selected:12===ha},"12"),(0,c.h)("option",{value:"16",selected:16===ha},"16")))),Sa&&(0,c.h)("div",{class:"org-setup-text has-featured-items org-standard-text leader-half"},
(0,c.h)("div",{class:"org-setup-text  org-standard-text "},(0,c.h)("calcite-label",{layout:"inline-space-between"},b.default.orgHomePageSetup.galleryText.showFeaturedItems,(0,c.h)("calcite-switch",{name:"featuredItems",value:"enabled",checked:"featured"===la,"aria-label":b.default.orgHomePageSetup.galleryText.showFeaturedItems,scale:"l",oncalciteSwitchChange:jb})))),"featured"!==la&&(0,c.h)("div",{class:"org-setup-text gallery-sort org-standard-text leader-half"},(0,c.h)("label",{class:"trailer-0"},
b.default.orgHomePageSetup.galleryText.sortBy,(0,c.h)("br",null),(0,c.h)("select",{class:"margin-right-half sortBy gallerySortBy",onChange:kb},(0,c.h)("option",{value:"title",selected:"title"===la},b.default.myOrganization.sortFields.title),(0,c.h)("option",{value:"owner",selected:"owner"===la},b.default.myOrganization.sortFields.owner),(0,c.h)("option",{value:"modified",selected:"modified"===la},b.default.myOrganization.sortFields.modified),(0,c.h)("option",{value:"numviews",selected:"numviews"===
la},b.default.myOrganization.sortFields.numviews)))),"featured"!==la&&(0,c.h)("div",{class:"org-setup-text gallery-sort org-standard-text bottom-margin-half-rem"},(0,c.h)("label",{class:"trailer-0"},(0,c.h)("input",{type:"checkbox",id:"sortAsc",class:"gallerySortAsc",value:"Asc",checked:x.sortAsc,onClick:ob}),b.default.orgHomePageSetup.galleryText.sortAsc)),"featured"!==la&&(0,c.h)("div",{class:"org-setup-text  org-standard-text leader-half bottom-margin-half-rem js-display-items-container"},(0,c.h)("label",
{class:"trailer-0"},b.default.orgHomePageSetup.galleryText.galleryItemType,(0,c.h)("br",null),(0,c.h)("select",{class:"margin-right-half sortBy galleryItemType",onChange:tb},(0,c.h)("option",{value:"All",selected:"All"===T},b.default.folders.filters.all),(0,c.h)("option",{value:"Maps",selected:"Maps"===T},b.default.folders.filters.maps),(0,c.h)("option",{value:"Apps",selected:"Apps"===T},b.default.folders.filters.apps),(0,c.h)("option",{value:"Scenes",selected:"Scenes"===T},b.default.folders.filters.scenes),
(0,c.h)("option",{value:"Layers",selected:"Layers"===T},b.default.folders.filters.layers),(0,c.h)("option",{value:"Files",selected:"Files"===T},b.default.folders.filters.files),(0,c.h)("option",{value:"Tools",selected:"Tools"===T},b.default.folders.filters.tools)))),na&&(0,c.h)("div",{class:"input-error-message empty-group-type-error is-active"},b.default.orgHomePageSetup.galleryText.groupTypeNoItems),(0,c.h)("div",{class:"org-setup-text org-standard-text org-gallery-display-prefs leader-half"},b.default.orgHomePageSetup.galleryText.displayPreferences),
(0,c.h)("div",{class:"org-background-one-line org-setup-text org-padding-top"},(0,c.h)("div",{class:"trailer-0"},(0,c.h)("div",{class:"content-block-color-title"},(0,c.h)("div",{class:"title"},b.default.orgHomePageSetup.galleryText.blockColors),Za.value.match(/^custom/)&&(0,c.h)("a",{href:"javascript:void(0)",ref:B,onClick:ub},(0,c.h)("div",{class:"edit-custom-block-color"},b.default.orgHomePageSetup.styles.editCustomStyle))),(0,c.h)(q.default,{id:"gallery-color-select",HP:p,section:"gallery",onSelect:function(eb){n("color",
{color:eb.value,index:l});bb(eb)},color:Za,title:"",labelSection:b.default.orgHomePageSetup.galleryText.blockColors}))),(0,c.h)("div",{class:"org-setup-text  org-standard-text"},(0,c.h)("div",{"aria-label":b.default.orgHomePageSetup.footer.blockColors,class:"gallery-background backgroundColor",id:"backgroundColor"})),(0,c.h)("div",{class:"org-setup-text  org-standard-text   org-gallery-showthumbnail"},(0,c.h)("div",{class:"org-setup-text org-padding-top"},(0,c.h)("calcite-label",{layout:"inline-space-between"},
b.default.orgHomePageSetup.galleryText.showThumbnail,(0,c.h)("calcite-switch",{name:"featuredItems",value:"enabled",checked:x.showItemThumb,"aria-label":b.default.orgHomePageSetup.galleryText.showThumbnail,scale:"l",oncalciteSwitchChange:function(){n("showItemThumb",{value:!sa,index:l});pa(!sa)}})))),(0,c.h)("div",{class:"org-setup-text  org-standard-text org-gallery-showitemtype"},(0,c.h)("div",{class:"org-setup-text org-padding-top"},(0,c.h)("calcite-label",{layout:"inline-space-between"},b.default.orgHomePageSetup.galleryText.showItemType,
(0,c.h)("calcite-switch",{name:"featuredItems",value:"enabled",checked:x.showItemType,"aria-label":b.default.orgHomePageSetup.galleryText.showItemType,scale:"l",oncalciteSwitchChange:function(){n("showItemType",{value:!Da,index:l});Ca(!Da)}})))),(0,c.h)("div",{class:"org-setup-text  org-standard-text   org-gallery-showtitle"},(0,c.h)("div",{class:"org-setup-text org-padding-top"},(0,c.h)("calcite-label",{layout:"inline-space-between"},b.default.orgHomePageSetup.galleryText.showTitle,(0,c.h)("calcite-switch",
{name:"featuredItems",value:"enabled",checked:x.showItemTitle,"aria-label":b.default.orgHomePageSetup.galleryText.showTitle,scale:"l",oncalciteSwitchChange:function(){n("showItemTitle",{value:!za,index:l});Ba(!za)}})))),(0,c.h)("div",{class:"org-setup-text  org-standard-text   org-gallery-showsummary"},(0,c.h)("div",{class:"org-setup-text org-padding-top"},(0,c.h)("calcite-label",{layout:"inline-space-between"},b.default.orgHomePageSetup.galleryText.showSummary,(0,c.h)("calcite-switch",{name:"featuredItems",
value:"enabled",checked:Fa,"aria-label":b.default.orgHomePageSetup.galleryText.showSummary,scale:"l",oncalciteSwitchChange:function(){n("showItemSummary",{value:!Fa,index:l});va(!Fa)}})))),(0,c.h)("div",{class:"org-setup-text  org-standard-text   org-gallery-group-view"},(0,c.h)("div",{class:"org-setup-text org-padding-top"},(0,c.h)("calcite-label",{layout:"inline-space-between"},b.default.orgHomePageSetup.galleryText.showViewGroup,(0,c.h)("calcite-switch",{name:"featuredItems",value:"enabled",checked:U,
"aria-label":b.default.orgHomePageSetup.galleryText.showViewGroup,scale:"l",oncalciteSwitchChange:function(){n("showViewLink",{value:!U,index:l});ka(!U)}}))))))))}})},"arcgisonline/pages/organization/widgets/settings/GroupSelect":function(){define("require exports tslib esri/Evented dojo/text!./templates/GroupSelect.html dijit/_TemplatedMixin dijit/_WidgetBase ./rows/GroupEditButton ./GroupPicker arcgisonline/tsutils/declareDecorator".split(" "),function(S,J,f,c,h,d,b,a,e,q){c=f.__importDefault(c);
h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);return function(){function t(u,g){this.templateString=h.default}t.prototype.postCreate=function(){this.inherited(arguments);this.render();this.addEventListeners()};t.prototype.render=function(){this.editButton=new a.default({portal:this.portal,groups:this.groups,selectedGroup:this.selectedGroup,baseClass:this.editButtonClass},this.domNode.querySelector(".js-edit-btn"));
this.groupPicker=new e.default({portal:this.portal,hideCancel:!0,baseClass:this.pickerClass,fetchAll:!0},this.domNode.querySelector(".js-picker"))};t.prototype.addEventListeners=function(){var u=this;this.own(this.editButton.on("edit",function(){u.editButton.hide();u.groupPicker.show();u.groupPicker.focus()}),this.groupPicker.on("selectUpdate",function(g){u.editButton.update(g);u.hideGroupPicker();u.editButton.domNode.focus();u.emit("change",{group:g})}),this.groupPicker.on("cancel",function(){return u.hideGroupPicker()}))};
t.prototype.hideGroupPicker=function(){this.groupPicker.hide();this.editButton.show()};return t=f.__decorate([(0,q.default)(b.default,d.default,c.default)],t)}()})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/components/FooterAdmin":function(){define("require exports tslib preact preact/hooks ../utils/homePageUtils ../utils/LinkedTextArea dojo/i18n!../../../../../../nls/arcgisonline ../utils/ColorSelect ../utils/CustomColorOverlay".split(" "),function(S,J,f,c,h,d,b,a,e,q){Object.defineProperty(J,
"__esModule",{value:!0});b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);J.default=function(t){var u=t.portal,g=t.HP,m=t.onFooterChange,v=t.onCustColorChange,p=t.customColorDiv,l=g.footer;t=u.isTrialOrg();var n=(0,h.useState)(l.showCopy),k=n[0],r=n[1],w=(0,h.useState)(l.copy);n=w[0];var x=w[1];w=(0,h.useState)(l.showContact);var D=w[0],G=w[1],F=(0,h.useState)(l.contact);w=F[0];var A=F[1],y=g.useCustomStyles?l.bgCustom:l.bgColor;l=(0,d.getColors)(g,"footer",
y);l=(0,h.useState)({name:l.startColor,class:l.startClassSuffix,value:y});var z=l[0],B=l[1],C=(0,h.useRef)(),H=(0,h.useRef)(),E=(0,h.useRef)();(0,h.useEffect)(function(){var L;null===(L=H.current)||void 0===L?void 0:L.focus()},[H.current]);l=function(L){x(L);m("copy",L)};F=function(){A(C.current.value);m("contact",C.current.value)};var K=function(){m("contactBlur",C.current.value)},I=function(){(0,c.render)((0,c.h)(q.default,{portal:u,HP:g,index:parseInt(y.replace("custom",""),10)-1,onCancel:function(){p.classList.add("hide");
E.current.focus()},onSave:function(L,M){p.classList.add("hide");var N=f.__assign({},g);N.customStyles[L]=M;M=(0,d.getColors)(N,"footer","custom".concat(L+1));B({name:M.startColor,class:M.startClassSuffix,value:"custom".concat(L+1)});z.value!=="custom".concat(L+1)&&m("color","custom".concat(L+1));p.classList.add("hide");v("customStyles",g.customStyles)},key:Date.now()}),document.querySelector(".custom-color-overlay"));document.querySelector(".custom-color-overlay").classList.remove("hide")};return(0,c.h)("div",
{class:"setup-container flex-column"},(0,c.h)("div",{class:"org-button back-button",ref:H,"data-action":"start",tabIndex:0,role:"button"},(0,c.h)("div",{class:"org-setup-header flex flex-align-center"},(0,c.h)("calcite-icon",{scale:"s",icon:"chevron-left"}),(0,c.h)("div",{class:"flex-1 margin-left-quarter"},a.default.orgHomePageSetup.start.home))),(0,c.h)("div",{class:"setup-body-wrapper flex-1"},(0,c.h)("div",{class:"org-setup-header org-title-bar"},a.default.orgHomePageSetup.start.footer),(0,c.h)("div",
{class:"org-section"},(0,c.h)("div",{class:"org-setup-text"},(0,c.h)("div",{class:"org-padding-top"},(0,c.h)("calcite-label",{layout:"inline-space-between"},a.default.orgHomePageSetup.footer.showCopy,(0,c.h)("calcite-switch",{name:"showCopy",value:"enabled",checked:k,scale:"l","aria-label":a.default.orgHomePageSetup.footer.showCopy,oncalciteSwitchChange:function(){m("showCopy",!k);r(!k)}})))),k&&(0,c.h)("div",{class:"copy-text toggle__copy"},(0,c.h)(b.default,{isTrial:t,textValue:n,maxChars:500,onTextChange:l,
portal:u,label:a.default.orgHomePageSetup.footer.footText})),(0,c.h)("div",{class:"input-error-message invalid-copy-text"}),(0,c.h)("div",{class:"org-setup-text"},(0,c.h)("div",{class:"org-padding-top"},(0,c.h)("calcite-label",{layout:"inline-space-between"},a.default.orgHomePageSetup.footer.showContact,(0,c.h)("calcite-switch",{name:"showContact",value:"enabled",checked:D,scale:"l",oncalciteSwitchChange:function(){m("showContact",!D);G(!D)}}))),D&&(0,c.h)("div",{class:"contact-email toggle__contact"},
(0,c.h)("label",{class:"trailer-0"},a.default.orgHomePageSetup.footer.contactEmail,(0,c.h)("br",null),(0,c.h)("input",{name:"contactEmail",class:"contactEmail",id:"contactEmail",placeholder:a.default.orgHomePageSetup.footer.contactEmail,"aria-label":a.default.orgHomePageSetup.footer.contactEmail,title:a.default.orgHomePageSetup.footer.contactEmail,value:w,onChange:F,onBlur:K,ref:C})),(0,c.h)("div",{class:"input-error-message invalid-email-address"}))),(0,c.h)("div",{class:"org-setup-text org-padding-top"},
(0,c.h)("div",{class:"trailer-0"},(0,c.h)("div",{class:"content-block-color-title"},(0,c.h)("div",{class:"title"},a.default.orgHomePageSetup.footer.backgroundColor),z.value.match(/^custom/)&&(0,c.h)("a",{href:"javascript:void(0)",ref:E,onClick:I},(0,c.h)("div",{class:"edit-custom-block-color"},a.default.orgHomePageSetup.styles.editCustomStyle))),(0,c.h)(e.default,{id:"footer-color-select",HP:g,section:"footer",onSelect:function(L){m("color",L.value);B(L)},color:z,title:a.default.orgHomePageSetup.start.footer,
labelSection:a.default.orgHomePageSetup.footer.backgroundColor}))))))}})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/components/TypographyAdmin":function(){define("require exports tslib preact dojo/i18n!../../../../../../nls/arcgisonline preact/hooks ../utils/SVGRadio ../utils/TypographySelect".split(" "),function(S,J,f,c,h,d,b,a){Object.defineProperty(J,"__esModule",{value:!0});h=f.__importDefault(h);b=f.__importDefault(b);a=f.__importDefault(a);J.default=function(e){var q=
e.HP,t=e.onTypographyChange,u=(0,d.useState)(q.useCustomTypography);e=u[0];var g=u[1],m=(0,d.useState)(q.typography);u=m[0];var v=m[1];q=(0,d.useState)(q.customTypography);var p=q[0],l=q[1];q=function(n){n=n.target.closest(".style-content-card").dataset.id.split("|");v(n);t("typography",n)};m=function(n,k){var r=f.__spreadArray([],p,!0);r[k]=n;l(r);t("customTypography",r)};return(0,c.h)("div",{class:"setup-container flex-column typography-left-bar"},(0,c.h)("div",{class:"org-button back-button","data-action":"start",
tabIndex:0,role:"button"},(0,c.h)("div",{class:"org-setup-header flex flex-align-center"},(0,c.h)("calcite-icon",{scale:"s",icon:"chevron-left"}),(0,c.h)("div",{class:"flex-1 margin-left-quarter"},h.default.orgHomePageSetup.start.home))),(0,c.h)("div",{class:"setup-body-wrapper flex-1"},(0,c.h)("div",{class:"org-setup-header org-title-bar"},h.default.orgHomePageSetup.start.typography,(0,c.h)("div",{class:"right"},(0,c.h)("button",{type:"button",class:"btn-link info-icon js-typo-onboard-btn","aria-label":"{i18n.orgHomePageSetup.start.typography}",
onClick:function(){t("typographyOnboard")}},(0,c.h)("calcite-icon",{scale:"s",icon:"information"})))),(0,c.h)("div",{class:"org-section org-padding-top no-padding-bottom no-border"},(0,c.h)("div",{class:"org-setup-header bottom-margin-rem"},h.default.orgHomePageSetup.typography.chooseTheme),(0,c.h)("div",{class:"org-padding-top toggle-button-container"},(0,c.h)("button",{class:"toggle-button use-preset-typography ".concat(e?"":"active"),onClick:function(){g(!1);t("useCustomTypography",!1)}},h.default.orgHomePageSetup.typography.usePreset),
(0,c.h)("button",{class:"toggle-button use-custom-typography ".concat(e?"active":""),onClick:function(){g(!0);t("useCustomTypography",!0)}},h.default.orgHomePageSetup.typography.useCustom))),(0,c.h)("div",{class:"content-intro org-section org-subtext"},h.default.orgHomePageSetup.typography.pickTheme,(0,c.h)("br",null),(0,c.h)("br",null)),e&&(0,c.h)("div",{class:"custom-typography org-section no-border"},(0,c.h)("div",{class:"content-intro org-section org-subtext no-border",id:"title-font-label"},
h.default.orgHomePageSetup.typography.titleFont),(0,c.h)(a.default,{id:"title-typography-select",font:p[0],onSelect:m,section:0}),(0,c.h)("div",{class:"content-intro org-section org-subtext no-border",id:"body-font-label"},h.default.orgHomePageSetup.typography.bodyFont),(0,c.h)(a.default,{id:"body-typography-select",font:p[1],onSelect:m,section:1})),!e&&(0,c.h)("div",{class:"preset-typography org-section no-border"},(0,c.h)("button",{tabIndex:0,onClick:q,class:"Avenir Next|Avenir Next"===u.join("|")?
"style-content-card style-content-card-typography active":"style-content-card style-content-card-typography","data-id":"Avenir Next|Avenir Next"},(0,c.h)("div",{class:"radio-svg","aria-hidden":"true"},(0,c.h)(b.default,null)),(0,c.h)("div",{class:"style-text"},(0,c.h)("div",{class:"style-header title-default"},h.default.orgHomePageSetup.typography.titleDefault," Avenir Next"),(0,c.h)("div",{class:"style-text-name boyd-default"},h.default.orgHomePageSetup.typography.bodyDefault," Avenir Next"))),(0,c.h)("button",
{tabIndex:0,onClick:q,class:"Avenir Next|Noto Serif"===u.join("|")?"style-content-card style-content-card-typography active":"style-content-card style-content-card-typography","data-id":"Avenir Next|Noto Serif"},(0,c.h)("div",{class:"radio-svg","aria-hidden":"true"},(0,c.h)(b.default,null)),(0,c.h)("div",{class:"style-text"},(0,c.h)("div",{class:"style-header title-default"},h.default.orgHomePageSetup.typography.titleDefault," Avenir Next"),(0,c.h)("div",{class:"style-text-name body-noto"},h.default.orgHomePageSetup.typography.bodyDefault,
" Noto Serif"))),(0,c.h)("button",{tabIndex:0,onClick:q,class:"Noto Serif|Avenir Next"===u.join("|")?"style-content-card style-content-card-typography active":"style-content-card style-content-card-typography","data-id":"Noto Serif|Avenir Next"},(0,c.h)("div",{class:"radio-svg","aria-hidden":"true"},(0,c.h)(b.default,null)),(0,c.h)("div",{class:"style-text"},(0,c.h)("div",{class:"style-header title-noto"},h.default.orgHomePageSetup.typography.titleDefault," Noto Serif"),(0,c.h)("div",{class:"style-text-name body-default  "},
h.default.orgHomePageSetup.typography.bodyDefault," Avenir Next"))),(0,c.h)("button",{tabIndex:0,onClick:q,class:"Noto Serif|Noto Serif"===u.join("|")?"style-content-card style-content-card-typography active":"style-content-card style-content-card-typography","data-id":"Noto Serif|Noto Serif"},(0,c.h)("div",{class:"radio-svg","aria-hidden":"true"},(0,c.h)(b.default,null)),(0,c.h)("div",{class:"style-text"},(0,c.h)("div",{class:"style-header title-noto"},h.default.orgHomePageSetup.typography.titleDefault,
" Noto Serif"),(0,c.h)("div",{class:"style-text-name body-noto"},h.default.orgHomePageSetup.typography.bodyDefault," Noto Serif"))))))}})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/utils/SVGRadio":function(){define(["require","exports","preact"],function(S,J,f){Object.defineProperty(J,"__esModule",{value:!0});J.default=function(){return(0,f.h)("svg",null,(0,f.h)("circle",{class:"outer",cy:"17",cx:"17",r:"6"}),(0,f.h)("circle",{class:"inner",cy:"17",cx:"17",r:"3"}))}})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/utils/TypographySelect":function(){define("require exports tslib preact preact/hooks dojo/i18n!../../../../../../nls/arcgisonline ../utils/AaBox ../utils/TypographyMenu".split(" "),
function(S,J,f,c,h,d,b,a){Object.defineProperty(J,"__esModule",{value:!0});d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);J.default=function(e){var q=e.id,t=e.font,u=e.onSelect,g=e.section,m=(0,h.useRef)(),v=(0,h.useRef)(null);e=(0,h.useState)(!1);var p=e[0],l=e[1],n=(0,h.useState)(t);e=n[0];var k=n[1];n=(0,h.useState)("".concat(q,"__typography-option_").concat(t.toLowerCase()));t=n[0];n=n[1];var r=function(D){v.current.contains(D.target)||l(!1)};(0,h.useEffect)(function(){document.addEventListener("click",
r,!0);return function(){document.removeEventListener("click",r,!0)}},[]);var w=function(D){l(!1);k(D);u(D,g);m.current.focus()},x=function(){l(!1);m.current.focus()};return(0,c.h)("div",{ref:v,class:"font-card-wrapper position-relative","aria-labelledby":""},(0,c.h)("button",{class:"title-typography-card style-content-card style-card-custom-typography",tabIndex:0,title:"".concat(g?d.default.orgHomePageSetup.typography.bodyFont:d.default.orgHomePageSetup.typography.titleFont," ").concat(e),"aria-label":"".concat(g?
d.default.orgHomePageSetup.typography.bodyFont:d.default.orgHomePageSetup.typography.titleFont," - ").concat(e),style:"font-family: '".concat(e,"'"),ref:m,onClick:function(){l(!p)},role:"combobox","aria-controls":"".concat(q,"__typography").concat(g),"aria-activedescendant":t,"aria-expanded":p},(0,c.h)(b.default,null),(0,c.h)("div",{class:"style-text"},e),(0,c.h)("div",{class:"style-arrow"},(0,c.h)("calcite-icon",{scale:"s",icon:"caret-down"}))),p&&(0,c.h)(a.default,{idPrefix:q,custFont:e,onTypographyChange:w,
onTypographyClose:x,updateActiveDescendant:n,section:g}))}})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/utils/TypographyMenu":function(){define("require exports tslib preact ../utils/AaBox preact/hooks dojo/i18n!../../../../../../nls/arcgisonline".split(" "),function(S,J,f,c,h,d,b){Object.defineProperty(J,"__esModule",{value:!0});h=f.__importDefault(h);b=f.__importDefault(b);var a="Avenir Next;Arial;Georgia;Helvetica;Merriweather;Montserrat;Noto Serif;Playfair Display;Roboto;New Times Roman;Verdana".split(";");
J.default=function(e){var q=e.idPrefix,t=e.onTypographyChange,u=e.onTypographyClose,g=e.updateActiveDescendant,m=e.section,v=e.custFont,p=(0,d.useRef)(),l=(0,d.useState)("");e=l[0];var n=l[1],k=(0,d.useState)(0);l=k[0];var r=k[1];k=(0,d.useState)(a.findIndex(function(A){return A===v}));var w=k[0],x=k[1],D=function(A){A=A.target.closest("button").dataset.val;t(A)},G=function(A){400<=A?r(400):r(A)};(0,d.useEffect)(function(){if(p.current){var A=p.current.parentElement.querySelector(".title-typography-card").getBoundingClientRect(),
y=p.current.closest(".setup-body-wrapper").getBoundingClientRect(),z=window.innerHeight-68-A.bottom-10;A=A.top-y.top-10;z>=A?(G(z),n("bottom")):(G(A),n("top"));window.setTimeout(function(){var B,C="".concat(q,"__typography-option_").concat(v.toLowerCase());x(w);g(C);null===(B=document.getElementById(C))||void 0===B?void 0:B.focus()},200)}},[p.current]);var F=function(A){var y=A.code,z=A.target,B=z.previousSibling,C=z.nextSibling;A.preventDefault();"ArrowUp"===y||"Tab"===y&&A.shiftKey?B?(B.focus(),
g(B.id)):u():"ArrowDown"===y||"Tab"===y&&!A.shiftKey?C?(C.focus(),g(C.id)):u():"Enter"!==y&&"Space"!==y||t(z.dataset.val)};e="sc-container ".concat("top"===e?"sc-container--top":"bottom"===e?"sc-container--bottom":"");return(0,c.h)("div",{class:e,ref:p},(0,c.h)("div",{class:"style-content-cards style-content-menu no-basecolor enh-sel-dropdown",tabIndex:0,title:m?b.default.orgHomePageSetup.typography.bodyFont:b.default.orgHomePageSetup.typography.titleFont,"aria-label":m?b.default.orgHomePageSetup.typography.bodyFont:
b.default.orgHomePageSetup.typography.titleFont,role:"listbox",id:"".concat(q,"__typography").concat(m)},(0,c.h)("div",{class:"menu",style:{maxHeight:"".concat(l,"px"),transition:"none"}},a.map(function(A){var y="".concat(q,"__typography-option_").concat(A.toLowerCase());return(0,c.h)("button",{key:A,tabIndex:0,onClick:D,onKeyDown:F,class:"style-content-card style-content-card--".concat(A.replace(/[^a-zA-Z0-9-\s]+/g,"").toLowerCase()," option ").concat(A===v?"active":""),"data-val":A,style:"font-family: ".concat(A),
role:"option","aria-label":A,"aria-selected":A===v?"true":"false",id:y},(0,c.h)("div",{class:"aA-box"},(0,c.h)(h.default,null)),(0,c.h)("div",{class:"style-text"},A))}))))}})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/components/ColorsAdmin":function(){define("require exports tslib preact preact/hooks dojo/i18n!../../../../../../nls/arcgisonline ../utils/homePageUtils ../utils/ColorSelect ../utils/CustomStylesList ../utils/CustomColorOverlay ../utils/CustomColorDeleteWarn ../../../../../home/sharedResources ../utils/OBColorSelect".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g){Object.defineProperty(J,"__esModule",{value:!0});d=f.__importDefault(d);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);g=f.__importDefault(g);J.default=function(m){var v=m.portal,p=m.HP,l=m.onColorsChange;m=document.createElement("div");document.querySelector(".custom-color-overlay")||(m.classList.add("custom-color-overlay"),m.classList.add("hide"),document.querySelector("body").append(m));var n=function(ia,X){ia=(0,b.getColors)(p,
ia,X);return{name:ia.startColor,class:ia.startClassSuffix,value:X}},k=p.customStyles;(0,u.writeCustomStyles)(k);var r=(0,h.useState)(!1);m=r[0];var w=r[1];r=(0,h.useState)(!1);var x=r[0],D=r[1];r=(0,h.useState)(k);var G=r[0],F=r[1];r=(0,h.useState)();var A=r[0],y=r[1];r=(0,h.useState)(p.baseColor);var z=r[0],B=r[1],C=(0,h.useState)();r=C[0];var H=C[1];C=(0,h.useState)(n("header",p.useCustomStyles?p.header.headerCustom:p.header.backgroundColor));var E=C[0],K=C[1];C=(0,h.useState)(p.header);var I=C[0],
L=C[1];C=(0,h.useState)(p.footer);var M=C[0],N=C[1];C=(0,h.useState)(p.content);var P=C[0],R=C[1];C=(0,h.useState)(n("footer",p.useCustomStyles?p.footer.bgCustom:p.footer.bgColor));var Y=C[0],ja=C[1];C=(0,h.useState)(p.useCustomStyles);var aa=C[0],da=C[1],ra=function(){var ia=[];P.forEach(function(X,ha){X=aa?X.bgCustom||"white":X.bgColor;var V=(0,b.getColors)(p,"text",X);ia[ha]={name:V.startColor,class:V.startClassSuffix,value:X}});return ia};C=(0,h.useState)(ra());var ca=C[0],fa=C[1];(0,h.useEffect)(function(){var ia=
document.querySelector(".custom-color-overlay");x?((0,c.render)((0,c.h)(q.default,{portal:v,HP:p,index:A,onCancel:function(){D(!1);la(A)},onSave:function(X,ha){D(!1);G[X]=ha;F(G);la(X)}}),ia),ia.classList.remove("hide"),ia.classList.add("bring-modal-to-front")):(ia.classList.add("hide"),ia.classList.remove("bring-modal-to-front"))},[x]);(0,h.useEffect)(function(){ta();fa(ra());R(f.__spreadArray([],P,!0));ja(n("footer",p.useCustomStyles&&p.footer.bgCustom?p.footer.bgCustom:p.footer.bgColor));K(n("header",
p.useCustomStyles&&p.header.headerCustom?p.header.headerCustom:p.header.backgroundColor));da(aa);l("customColorSectionChange",{section:"footer",value:Y.value});l("customColorSectionChange",{section:"header",value:E.value})},[aa]);(0,h.useEffect)(function(){R(f.__spreadArray([],P,!0))},[ca]);(0,h.useEffect)(function(){JSON.stringify(G)!==JSON.stringify(k)&&l("customStyles",G)},[G]);var la=function(ia){setTimeout(function(){var X=document.querySelector(".style-content-card--custom".concat(ia+1," button.edit-wrap"));
X?X.focus():document.querySelector(".add-homepage-custom-style").focus()},100)},ta=function(){p.header.headerCustom||(p.header.headerCustom="dark-ramp"===p.header.backgroundColor?"black":"white");p.footer.bgCustom||(p.footer.bgCustom="dark-ramp"===p.footer.bgColor?"black":"white-ramp"===p.footer.bgColor?"white":"medium-ramp"===p.footer.bgColor?"medium-gray":"light-gray")},Q=function(ia,X){if("header"===X)K(ia),T(aa?"headerCustom":"backgroundColor",ia.value);else if("footer"===X)ja(ia),O(aa?"bgCustom":
"bgColor",ia.value);else{var ha=X.split(":")[1],V=aa?"bgCustom":"bgColor",ea=f.__spreadArray([],ca,!0);ea[ha]=ia;var U=f.__spreadArray([],P,!0);U[ha][V]=ia.value;fa(ea);R(U)}l("customColorSectionChange",{section:X,value:ia.value})},T=function(ia,X){L(function(ha){var V;return f.__assign(f.__assign({},ha),(V={},V[ia]=X,V))})},O=function(ia,X){N(function(ha){var V;return f.__assign(f.__assign({},ha),(V={},V[ia]=X,V))})};(0,h.useEffect)(function(){p.baseColor=z;fa(ra());ta();ja(n("footer",p.useCustomStyles?
p.footer.bgCustom:p.footer.bgColor));K(n("header",p.useCustomStyles?p.header.headerCustom:p.header.backgroundColor))},[z]);var Z=function(ia){H(ia);var X="custom"+ia;I.headerCustom===X&&(I.headerCustom="white",K({name:d.default.orgHomePageSetup.colors.white,class:"white",value:"white"}),L(I));P.forEach(function(ha,V){ha.bgCustom===X&&(P[V].bgCustom="light-gray")});R(P);fa(ra());M.bgCustom===X&&(M.bgCustom="dark-gray",ja({name:d.default.orgHomePageSetup.colors.darkgray,class:"dark-gray",value:"dark-gray"}),
N(M));G[ia-1]=null;l("customColorsDeleteFromWarn",{header:I,footer:M,content:P});R(f.__spreadArray([],P,!0));F(G);la(ia-1)},na=function(ia){var X="custom"+ia;ia--;var ha=!1;I.headerCustom===X?ha=!0:M.bgCustom===X?ha=!0:P.forEach(function(ea,U){ea.bgCustom===X&&(ha=!0)});if(ha)y(ia),w(!0);else{var V=JSON.parse(JSON.stringify(G));V[ia]=null;F(V);la(ia)}};return(0,c.h)("div",{class:"setup-container flex-column"},(0,c.h)("div",{class:"org-button back-button",id:"headerToStartButton","data-action":"start",
tabIndex:0,role:"button"},(0,c.h)("div",{class:"org-setup-header flex flex-align-center"},(0,c.h)("svg",{viewBox:"0 0 16 16",width:"16",height:"16",class:"flex-0 icon-inline back"},(0,c.h)("path",{d:"M13 5.293v1.414l-4.5 4.5-4.5-4.5V5.293l4.5 4.5z"})),(0,c.h)("div",{class:"flex-1 margin-left-quarter"},d.default.orgHomePageSetup.start.home))),(0,c.h)("div",{class:"setup-body-wrapper flex-1"},(0,c.h)("div",{class:"org-setup-header org-title-bar no-border"},d.default.orgHomePageSetup.start.colors,(0,c.h)("div",
{class:"right"},(0,c.h)("button",{type:"button",class:"btn-link info-icon js-colors-onboard-btn","aria-label":d.default.orgHomePageSetup.start.colors,onClick:function(){l("colorOnboard",{detail:""})}},(0,c.h)("calcite-icon",{scale:"s",icon:"information"})))),(0,c.h)("div",{class:"org-padding-top toggle-button-container"},(0,c.h)("button",{onClick:function(){da(!1);l("useCustomStyles",!1,".preset-theme-button-true")},class:"toggle-button preset-theme-button-true preset-theme-button".concat(aa?"":" active")},
d.default.orgHomePageSetup.typography.usePreset),(0,c.h)("button",{onClick:function(){da(!0);l("useCustomStyles",!0,".preset-theme-button-false")},class:"toggle-button preset-theme-button-false preset-theme-button".concat(aa?" active":"")},d.default.orgHomePageSetup.typography.useCustom)),!aa&&(0,c.h)("div",{class:"org-setup-text org-section no-border ob-colors-section"},(0,c.h)("div",{class:"org-setup-header org-title-bar no-border",id:"obColors","aria-label":d.default.orgHomePageSetup.styles.OBColors},
d.default.orgHomePageSetup.styles.OBColors),(0,c.h)(g.default,{color:z,onSelect:function(ia){B(ia);l("baseColor",ia)}})),aa&&(0,c.h)("div",{class:"org-setup-text org-section no-border custom-colors-section"},(0,c.h)(e.default,{CustomStyles:G,HP:p,onUpdate:function(ia){if(null===ia){ia=null;for(var X=3;0<=X;X--)G[X]||(ia=X)}H(ia);y(ia);D(!0)},onDelete:function(ia){na(ia)},selIndex:r})),(0,c.h)("div",{class:"org-setup-header org-title-bar no-border"},d.default.orgHomePageSetup.styles.appliedColorStyles),
(0,c.h)("div",{class:"org-setup-text org-title-bar no-border"},(0,c.h)("div",{class:"style-content-cards"},(0,c.h)(a.default,{id:"color-admin-header-color-select",HP:p,section:"header",onSelect:Q,color:E,title:d.default.orgHomePageSetup.start.header,labelSection:d.default.orgHomePageSetup.header.organizationTitleColor}),(0,c.h)("div",{class:"style-cards__content"},P.map(function(ia,X){if("text"===ia.type)var ha=ia.title;else if("gallery"===ia.type)ha=ia.title;else{if(0===ia.links.length)return!1;
ha=ia.links[0].title}var V="color-admin-".concat(ia.type,"-").concat(X,"-color-select");return(0,c.h)(a.default,{id:V,HP:p,section:"".concat(ia.type,":").concat(X),onSelect:Q,color:ca[X],key:V,title:ha,labelSection:d.default.orgHomePageSetup.galleryText.backgroundColor})})),(0,c.h)(a.default,{id:"color-admin-footer-color-select",HP:p,section:"footer",onSelect:Q,color:Y,title:d.default.orgHomePageSetup.start.footer,labelSection:d.default.orgHomePageSetup.footer.backgroundColor})))),m&&(0,c.h)(t.default,
{HP:p,index:A,onCancel:function(){w(!1)},onDelete:function(ia){w(!1);Z(ia)}}))}})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/utils/CustomStylesList":function(){define("require exports tslib preact preact/hooks dojo/i18n!../../../../../../nls/arcgisonline dojo/i18n!../../../../../../nls/org-settings ../utils/CustomColorCard".split(" "),function(S,J,f,c,h,d,b,a){Object.defineProperty(J,"__esModule",{value:!0});d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);
J.default=function(e){var q=e.CustomStyles,t=e.onUpdate,u=e.onDelete,g=e.selIndex,m=0,v=(0,h.useRef)(),p=(0,h.useRef)();e=function(){t(null)};var l=function(k){t(k)},n=function(k){u(k+1)};return(0,c.h)("div",{class:"org-setup-text org-section no-border custom-colors-section"},(0,c.h)("div",{class:"org-setup-header org-title-bar no-border"},d.default.orgHomePageSetup.styles.customColorStyles,(0,c.h)("div",{class:"custom-style-info-button"},(0,c.h)("button",{type:"button",id:"custom-color-info",ref:v,
class:"btn-link info-icon js-colors-onboard-btn","aria-label":d.default.orgHomePageSetup.start.colors},(0,c.h)("calcite-icon",{scale:"s",icon:"information"})),(0,c.h)("calcite-popover",{referenceElement:"custom-color-info",placement:"auto",label:"",offsetDistance:6,offsetSkidding:0,closable:!0,oncalcitePopoverOpen:function(){p.current.focus()},oncalcitePopoverClose:function(){v.current.focus()}},(0,c.h)("div",{ref:p,tabIndex:0,style:"width: 300px; padding:12px 16px;"},(0,c.h)("b",null,b.default.homePageTab.colorsOnboarding.setupTheme),
(0,c.h)("br",null),(0,c.h)("br",null),b.default.homePageTab.colorsOnboarding.themeDesc)))),(0,c.h)("div",{class:"custom-styles-container"},q.map(function(k,r){if(k)return m++,(0,c.h)(a.default,{style:k,index:r,onDelete:n,onEdit:l,active:g===r})})),(0,c.h)("div",{class:"custom-styles-button"},4<=m&&(0,c.h)("button",{tabIndex:0,class:"btn btn-clear add-homepage-custom-style tooltip tooltip-top tooltip-multiline","aria-label":"".concat(d.default.orgHomePageSetup.styles.customStylesLimit,"\n\n").concat(d.default.orgHomePageSetup.styles.customStylesLimitText)},
d.default.orgHomePageSetup.styles.addCustomStyle),4>m&&(0,c.h)("button",{tabIndex:0,class:"btn btn-clear add-homepage-custom-style","aria-label":d.default.orgHomePageSetup.styles.addCustomStyle,onClick:e},d.default.orgHomePageSetup.styles.addCustomStyle)))}})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/utils/CustomColorCard":function(){define("require exports tslib preact preact/hooks dojo/i18n!../../../../../../nls/arcgisonline ../utils/AaBox".split(" "),function(S,J,f,c,h,
d,b){Object.defineProperty(J,"__esModule",{value:!0});d=f.__importDefault(d);b=f.__importDefault(b);J.default=function(a){var e=a.style,q=a.index,t=a.onDelete,u=a.onEdit,g=a.active,m=(0,h.useRef)();(0,h.useEffect)(function(){g&&m.current.focus()},[]);return(0,c.h)("div",{class:"style-content-card style-content-card--custom".concat(q+1)},(0,c.h)("button",{tabIndex:0,ref:m,class:"edit-wrap tooltip tooltip-multiline tooltip-top","aria-label":"".concat(d.default.common.edit," - ").concat(e.name),onClick:function(){u(q)}},
(0,c.h)(b.default,null),(0,c.h)("div",{class:"style-text",title:e.name},e.name),(0,c.h)("div",{class:"edit-style"},(0,c.h)("calcite-icon",{scale:"s",icon:"pencil"}))),(0,c.h)("button",{tabIndex:0,class:"delete-wrap tooltip tooltip-multiline tooltip-left","aria-label":"".concat(d.default.common.deleteLabel," - ").concat(e.name),onClick:function(){t(q)}},(0,c.h)("div",{class:"delete-style"},(0,c.h)("calcite-icon",{scale:"s",icon:"trash"}))))}})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/utils/CustomColorDeleteWarn":function(){define("require exports tslib preact dojo/i18n!../../../../../../nls/arcgisonline ./ColorCard".split(" "),
function(S,J,f,c,h,d){Object.defineProperty(J,"__esModule",{value:!0});h=f.__importDefault(h);d=f.__importDefault(d);J.default=function(b){var a=b.HP,e=b.index,q=b.onDelete,t=b.onCancel,u="custom"+(e+1),g={name:a.customStyles[e].name,class:u,value:u};b=function(){t()};return(0,c.h)("div",{class:"overlay-background js-overlay-background is-active custom-style-editor-container delete-style-editor-container",title:h.default.orgHomePageSetup.styles.deleteCustomStyle},(0,c.h)("div",{class:"overlay overlay--off-white  js-overlay"},
(0,c.h)("div",{class:"overlay-title-bar flex js-overlay-title-bar"},(0,c.h)("div",{class:"flex overlay-mobile__title font-size-2"},(0,c.h)("div",{class:"overlay-mobile__title-text",title:h.default.orgHomePageSetup.styles.deleteCustomStyle,"aria-label":h.default.orgHomePageSetup.styles.deleteCustomStyle},h.default.orgHomePageSetup.styles.deleteCustomStyle)),(0,c.h)("h3",{id:"overlay-title",class:"overlay-title flex-1",title:h.default.orgHomePageSetup.styles.deleteCustomStyle,"aria-label":h.default.orgHomePageSetup.styles.deleteCustomStyle},
h.default.orgHomePageSetup.styles.deleteCustomStyle),(0,c.h)("div",{title:h.default.common.close,onClick:b},(0,c.h)("button",{class:"btn-link btn-link-off-black font-size-2 flex-0 overlay-close","aria-label":h.default.common.close,title:h.default.common.close,onClick:b},(0,c.h)("calcite-icon",{scale:"l",icon:"x"})))),(0,c.h)("div",{class:"overlay-control-bar-filters js-overlay-control-bar-filters"}),(0,c.h)("div",{class:"overlay-content js-overlay-content overlay-content--scroll",id:"overlay-content"},
(0,c.h)("div",{class:"custom-style-delete"},(0,c.h)("div",{class:"delete-custom-style"},(0,c.h)("div",{class:"custom-style-header blocks-using-header"},h.default.orgHomePageSetup.styles.deleteStyleWarn,(0,c.h)("br",null),(0,c.h)("br",null),h.default.orgHomePageSetup.styles.deleteStyleWarn2),(0,c.h)("div",{class:"blocks-using-custom"},(0,c.h)("div",{class:"style-content-cards"},a.header.headerCustom===u&&(0,c.h)(d.default,{color:g,title:h.default.orgHomePageSetup.start.header,onClick:function(){},
noArrow:!0}),(0,c.h)("div",{class:"style-cards__content"},a.content.map(function(m,v){var p="text"===m.type?m.title:"gallery"===m.type?m.title:m.links[0].title;if(m.bgCustom===u)return(0,c.h)(d.default,{color:g,key:v,noArrow:!0,title:p,onClick:function(){}})})),a.footer.bgCustom===u&&(0,c.h)(d.default,{color:g,title:h.default.orgHomePageSetup.start.footer,onClick:function(){},noArrow:!0})))))),(0,c.h)("div",{class:"overlay-action-bar"},(0,c.h)("button",{class:"hide btn-link"}),(0,c.h)("nav",{class:"right"},
(0,c.h)("button",{class:"btn js-overlay-primary",onClick:function(){q(e+1)},"aria-label":h.default.common.remove,title:h.default.common.remove},h.default.common.remove),(0,c.h)("button",{class:"btn btn-clear calcite-web-btn-clear js-overlay-cancel","aria-label":h.default.common.cancel,title:h.default.common.cancel,onClick:b},h.default.common.cancel))),(0,c.h)("div",{class:"js-folder-loader folder-loader loader loader-centered overlay-white"},(0,c.h)("div",{class:"loader-bars"}),(0,c.h)("div",{class:"loader-text"},
h.default.common.loading))))}})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/utils/ColorCard":function(){define("require exports tslib preact dojo/i18n!../../../../../../nls/arcgisonline ../utils/AaBox".split(" "),function(S,J,f,c,h,d){Object.defineProperty(J,"__esModule",{value:!0});h=f.__importDefault(h);d=f.__importDefault(d);J.default=function(b){var a=b.color,e=b.title,q=b.onClick;b=b.noArrow;e=e||"";return(0,c.h)("button",{tabIndex:0,"aria-label":h.default.orgHomePageSetup.header.backgroundColor,
class:"backgroundColor",id:"backgroundColor",onClick:q},(0,c.h)("div",{class:"style-content-card style-content-card--".concat(a.class," style-content-card-footer")},(0,c.h)(d.default,null),(0,c.h)("div",{class:"style-text"},""!==e&&(0,c.h)("div",{class:"style-header"},e),(0,c.h)("div",{class:"style-text-name"},h.default.orgHomePageSetup.styles.style,"\u00a0",(0,c.h)("span",null,a.name))),!b&&(0,c.h)("div",{class:"style-arrow"},(0,c.h)("calcite-icon",{scale:"s",icon:"caret-down"}))))}})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/utils/OBColorSelect":function(){define("require exports tslib preact preact/hooks ../utils/OBColorsMenu ./OBColorsInnerOption dojo/i18n!../../../../../../nls/arcgisonline".split(" "),
function(S,J,f,c,h,d,b,a){Object.defineProperty(J,"__esModule",{value:!0});d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);J.default=function(e){var q=e.color,t=e.onSelect,u=(0,h.useRef)(null),g=(0,h.useRef)(null);e=(0,h.useState)(!1);var m=e[0],v=e[1];q=(0,h.useState)(q);var p=q[0],l=q[1];e=(0,h.useState)(null);q=e[0];var n=e[1],k=function(G){u.current.contains(G.target)||v(!1)};(0,h.useEffect)(function(){document.addEventListener("click",k,!0);return function(){document.removeEventListener("click",
k,!0)}},[]);e=function(G){n(G)};var r=function(G){var F,A;l(G);v(!1);t(G);null===(A=null===(F=g.current)||void 0===F?void 0:F.focus)||void 0===A?void 0:A.call(F)},w=function(){var G,F;v(!1);null===(F=null===(G=g.current)||void 0===G?void 0:G.focus)||void 0===F?void 0:F.call(G)},x="".concat("out-of-the-box-colors-select","__menu"),D="".concat(a.default.orgHomePageSetup.styles.OBColors," - ").concat(a.default.orgHomePageSetup.colors[p.replace("gs","grayscaleOnly")]);return(0,c.h)("div",{ref:u,class:"color-card-wrapper position-relative"},
(0,c.h)("button",{ref:g,class:"style-content-card style-content-card-ob style-content-card-header option",onClick:function(){var G=!m;v(!m);G?n("out-of-the-box-colors-select__option-".concat(p)):n(null)},"aria-label":D,id:"out-of-the-box-colors-select",role:"combobox","aria-controls":"out-of-the-box-colors-menu","aria-expanded":m,"aria-hasPopup":"listbox","aria-activedescendant":q},(0,c.h)(b.default,{value:p,showArrow:!0})),m&&(0,c.h)(d.default,{id:x,selectedColor:p,onSelect:r,onClose:w,onActiveDescendantChange:e}))}})},
"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/utils/OBColorsMenu":function(){define("require exports tslib preact preact/hooks ./OBColorsMenuOption dojo/i18n!../../../../../../nls/arcgisonline".split(" "),function(S,J,f,c,h,d,b){Object.defineProperty(J,"__esModule",{value:!0});d=f.__importDefault(d);b=f.__importDefault(b);J.default=function(a){var e=a.id,q=a.selectedColor,t=a.onSelect,u=a.onClose,g=a.onActiveDescendantChange,m="gs brown blue green yellow orange red violet".split(" "),
v=(0,h.useRef)(null),p=(0,h.useRef)(null),l=(0,h.useRef)(null),n=(0,h.useState)("");a=n[0];var k=n[1];n=(0,h.useState)(m.indexOf(q));var r=n[0],w=n[1];(0,h.useEffect)(function(){if(v.current){p.current.style.overflowY="hidden";v.current.style.overflowY="hidden";var D=v.current.querySelector(".menu").getBoundingClientRect(),G=D.bottom+48+D.height,F=window.innerHeight-84,A=D.bottom-120,y=F-(D.bottom+48);k(A>=y?"top":"bottom");G>=F&&120>D.top&&(p.current.style.maxHeight=A>=y?"".concat(A,"px"):"".concat(y,
"px"),p.current.style.height=A>=y?"".concat(A,"px"):"".concat(y,"px"),l.current.style.height=p.current.style.height,v.current.style.maxHeight=A>=y?"".concat(A,"px"):"".concat(y,"px"),v.current.style.height=A>=y?"".concat(A,"px"):"".concat(y,"px"));window.setTimeout(function(){var z="".concat(e,"__option-").concat(q),B=document.getElementById(z);g(z);null===B||void 0===B?void 0:B.focus()},50)}},[]);var x=function(D){t(D)};a="sc-container ".concat("top"===a?"sc-container--top":"bottom"===a?"sc-container--bottom":
"");return(0,c.h)("div",{class:a,ref:v,onKeyDown:function(D){var G=D.key;if("ArrowUp"===G||"Tab"===G&&D.shiftKey)D.preventDefault(),0<r?(D=r-1,w(D),g("".concat(e,"__option-").concat(m[D]))):u();else if("ArrowDown"===G||"Tab"===G&&!D.shiftKey)D.preventDefault(),r<m.length-1?(D=r+1,w(D),g("".concat(e,"__option-").concat(m[D]))):u()}},(0,c.h)("div",{ref:p,class:"style-content-cards style-content-menu no-basecolor enh-sel-dropdown"},(0,c.h)("div",{ref:l,class:"menu",id:e,role:"listbox","aria-label":b.default.orgHomePageSetup.styles.OBColors},
m.map(function(D,G){var F="".concat(e,"__option-").concat(D);return(0,c.h)(d.default,{id:F,key:F,value:D,onSelect:x,active:r===G,selected:q===D})}))))}})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/utils/OBColorsMenuOption":function(){define("require exports tslib preact preact/hooks dojo/i18n!../../../../../../nls/arcgisonline ./OBColorsInnerOption".split(" "),function(S,J,f,c,h,d,b){Object.defineProperty(J,"__esModule",{value:!0});d=f.__importDefault(d);b=f.__importDefault(b);
J.default=function(a){var e=a.id,q=a.value,t=a.onSelect,u=a.active,g=a.selected;a=a.showArrow;var m=(0,h.useRef)(null);(0,h.useEffect)(function(){u&&m.current&&m.current.focus()},[m.current,u]);return(0,c.h)("button",{ref:m,class:"style-content-card style-content-card-ob style-content-card-header option",onClick:function(){t(q)},"aria-label":d.default.orgHomePageSetup.colors[q.replace("gs","grayscaleOnly")],"aria-selected":g,role:"option",id:e},(0,c.h)(b.default,{value:q,showArrow:a}))}})},"arcgisonline/pages/organization/widgets/settings/HomePageOverlay/utils/OBColorsInnerOption":function(){define("require exports tslib preact ./AaBox dojo/i18n!../../../../../../nls/arcgisonline".split(" "),
function(S,J,f,c,h,d){Object.defineProperty(J,"__esModule",{value:!0});h=f.__importDefault(h);d=f.__importDefault(d);J.default=function(b){var a=b.value;b=b.showArrow;return(0,c.h)(c.Fragment,null,(0,c.h)(h.default,{className:"aA-box one-aA light-".concat(a)}),(0,c.h)(h.default,{className:"aA-box two-aA medium-".concat(a)}),(0,c.h)(h.default,{className:"aA-box three-aA dark-".concat(a)}),(0,c.h)("div",{class:"style-text"},(0,c.h)("div",{class:"style-header"},d.default.orgHomePageSetup.colors[a.replace("gs",
"grayscaleOnly")])),b&&(0,c.h)("div",{class:"style-arrow"},(0,c.h)("calcite-icon",{scale:"s",icon:"caret-down"})))}})},"arcgisonline/sharing/dijit/dialog/ManageSubscriptionDlg":function(){define("require exports tslib dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/string dojo/on dojo/query ../../../esriGeowConfig ../../../pages/pageUtil ../../../pages/utils/dom ../../../pages/utils/subscription ../../util ../../geow/Geow ../../../tsutils/declareDecorator dojo/i18n!../../../nls/arcgisonline dojo/text!./templates/ManageSubscriptionDlg.html".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);return function(){function k(){this.widgetsInTemplate=!0;this.templateString=n.default;this.i18n=f.__assign(f.__assign({},
l.default.common),l.default.manageSubscriptionDlg);this._instance=null;this._converting=!1}var r=k;k.prototype.postCreate=function(){this.inherited(arguments);this.addListeners()};k.prototype.getInstance=function(){null==this._instance&&(this._instance=new r);return this._instance};k.prototype.show=function(w){this.portal=w;this._showManageView()};k.prototype.showManage=function(w){this.portal=w;this.clear();this._showManageView();this._dialog.show()};k.prototype.showUpgrade=function(w){this.portal=
w;this.clear();this._showUpgradeView();this._dialog.show()};k.prototype._showUpgradeView=function(){var w;this._dialog.set("title",this.i18n.upgradeSubscriptionTitle);var x=null===(w=this.portal.subscriptionInfo)||void 0===w?void 0:w.type;"Trial"!==x&&"Trial Press"!==x&&"Evaluation"!==x||this._dialog.set("title",this.i18n.manageSubscriptionTitle);w='\x3cspan class\x3d"esriItemLinks"\x3e\x3ca target\x3d"_blank" href\x3d"'.concat("http://www.esri.com/about-esri/offices/",'"\x3e');var D=this.portal.isPortal;
g.default.isPersonalUse(x,D)||g.default.isStudentUse(x,D)?(this._inUSDiv.innerHTML=b.default.substitute(this.i18n.visitMyEsri,{startLink:'\x3cspan class\x3d"esriItemLinks"\x3e\x3ca target\x3d"_blank" href\x3d"'.concat(q.default.purchaseUrls.renew,'"\x3e'),endLink:"\x3c/a\x3e\x3c/span\x3e"}),this._outsideUSDiv.innerHTML=b.default.substitute(this.i18n.contactLocalOffice,{officeLinkStart:w,officeLinkEnd:"\x3c/a\x3e\x3c/span\x3e"})):(this._inUSDiv.innerHTML=b.default.substitute(this.i18n.upgradeInsideUS,
{officeLinkStart:w,officeLinkEnd:"\x3c/a\x3e\x3c/span\x3e"}),this._outsideUSDiv.innerHTML=b.default.substitute(this.i18n.upgradeOutsideUS,{officeLinkStart:w,officeLinkEnd:"\x3c/a\x3e\x3c/span\x3e"}));u.default.hideNodes([this._manageSubscriptionDiv,this._convertSubscriptionDiv,this._nextBtn,this._convertBtn,this._cancelBtn]);"active"!==this.portal.subscriptionInfo.state||"Trial"!==this.portal.subscriptionInfo.type&&"Trial Press"!==this.portal.subscriptionInfo.type&&"Evaluation"!==this.portal.subscriptionInfo.type||
this._dialog.set("title",this.i18n.manageSubscriptionTitle);u.default.showNodes([this._upgradeSubscriptionDiv,this._okBtn])};k.prototype._showManageView=function(){var w;this._dialog.set("title",this.i18n.manageSubscriptionTitle);u.default.hideNodes([this._upgradeSubscriptionDiv,this._convertSubscriptionDiv,this._okBtn,this._convertBtn]);"Evaluation"===(null===(w=this.portal.subscriptionInfo)||void 0===w?void 0:w.type)?(u.default.hideNodes([this._convertOptionDiv,this._manageSubscriptionContainer]),
u.default.showNode(this._evalSubscriptionContainer),this._purchaseInUSDiv.innerHTML=b.default.substitute(this.i18n.upgradeInsideUS,{officeLinkStart:'\x3cspan class\x3d"esriItemLinks"\x3e\x3ca target\x3d"_blank" href\x3d"'.concat("http://www.esri.com/about-esri/offices/",'"\x3e'),officeLinkEnd:"\x3c/a\x3e\x3c/span\x3e"}),this._purchaseOutsideUSDiv.innerHTML=b.default.substitute(this.i18n.upgradeOutsideUS,{officeLinkStart:'\x3cspan class\x3d"esriItemLinks"\x3e\x3ca target\x3d"_blank" href\x3d"'.concat("http://www.esri.com/about-esri/offices/",
'"\x3e'),officeLinkEnd:"\x3c/a\x3e\x3c/span\x3e"}),u.default.showNode(this._okBtn),u.default.hideNodes([this._nextBtn,this._cancelBtn])):u.default.showNodes([this._nextBtn,this._cancelBtn]);u.default.showNode(this._manageSubscriptionDiv)};k.prototype._showConvertView=function(){this._dialog.set("title",this.i18n.convertToPersonalTitle);var w="".concat(this.portal.helpBase).concat(this.portal.helpMap.m["120000592"]);this._importantMsgDiv.innerHTML=b.default.substitute(this.i18n.completeDetailsWithLinkMsg,
{helpLinkStart:'\x3cspan class\x3d"esriItemLinks"\x3e\x3ca target\x3d"_blank" href\x3d"'.concat(w,'"\x3e'),helpLinkEnd:"\x3c/a\x3e"});u.default.hideNodes([this._upgradeSubscriptionDiv,this._manageSubscriptionDiv,this._okBtn,this._nextBtn]);u.default.showNodes([this._convertSubscriptionDiv,this._convertBtn,this._cancelBtn])};k.prototype.addListeners=function(){var w=this.onCancel.bind(this);this.own((0,a.default)(this._okBtn,"click",w),(0,a.default)(this._nextBtn,"click",this.onNext.bind(this)),(0,a.default)(this._convertBtn,
"click",this.onConvert.bind(this)),(0,a.default)(this._cancelBtn,"click",w));(0,e.default)(".jevent").connect("onclick",function(x){x.preventDefault()})};k.prototype.clear=function(){var w;this._converting=!1;null===(w=this._dialog)||void 0===w?void 0:w.set("title","");if(w=this._dialog.domNode.querySelector(".dijitDialogCloseIcon"))w.tabIndex=0;u.default.hideNodes([this._upgradeSubscriptionDiv,this._manageSubscriptionDiv,this._convertSubscriptionDiv]);u.default.showNodes([this._convertOptionDiv,
this._manageSubscriptionContainer]);u.default.hideNode(this._evalSubscriptionContainer);this._upgradeRadioBtn.checked=!0};k.prototype.hide=function(){this._dialog.hide()};k.prototype.onNext=function(){this._convertRadioBtn.checked?this._showConvertView():this._showUpgradeView()};k.prototype.onConvert=function(){var w=this;this._converting||t.default.createConfirmationDialog({strings:{title:this.i18n.convertToPersonalTitle,description:this.i18n.noReturnMsg,ok:this.i18n.yesLabel,cancel:this.i18n.noLabel},
autoCloseOnOk:!0,onOk:function(){w.doConvert()}})};k.prototype.doConvert=function(){var w=this,x;if(!this._converting&&(null===(x=q.default.self)||void 0===x?0:x.id)){this._converting=!0;this._convertBtn.disabled=!0;x=q.default.baseUrl.replace(location.host,q.default.self.portalHostname);var D="".concat(x).concat(q.default.signin).replace("http:","https:");x="".concat(q.default.restBaseUrl,"portals/self/convert");m.default.request({url:x,content:{target:"personal",timeout:12E4}},{usePost:!0}).then(function(G){v.default.signout(D)},
function(G){w._converting=!1;w._convertBtn.disabled=!1;t.default.createConfirmationDialog({strings:{title:w.i18n.errorTitle,description:w.i18n.unableToConvert},hideCancel:!0,autoCloseOnOk:!0,onOk:function(){w._dialog.hide()}})})}};k.prototype.onCancel=function(){this.hide()};k.prototype.onHide=function(){};return k=r=f.__decorate([(0,p.default)(c.default,h.default,d.default)],k)}()})},"dojox/charting/plot2d/StackedAreas":function(){define(["dojo/_base/declare","./Stacked"],function(S,J){return S("dojox.charting.plot2d.StackedAreas",
J,{constructor:function(){this.opt.lines=!0;this.opt.areas=!0}})})},"dojox/charting/plot2d/Stacked":function(){define(["dojo/_base/declare","dojo/_base/lang","./Default","./commonStacked"],function(S,J,f,c){return S("dojox.charting.plot2d.Stacked",f,{getSeriesStats:function(){return c.collectStats(this.series,J.hitch(this,"isNullValue"))},buildSegments:function(h,d){for(var b=this.series[h],a=d?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0,e=d?Math.min(b.data.length-1,Math.ceil(this._hScaler.bounds.to)):
b.data.length-1,q=null,t=[],u=J.hitch(this,"isNullValue");a<=e;a++){var g=d?c.getIndexValue(this.series,h,a,u):c.getValue(this.series,h,b.data[a]?b.data[a].x:null,u);if(!u(g[0])&&(d||null!=g[0].y))q||(q=[],t.push({index:a,rseg:q})),q.push(g[0]);else if(!this.opt.interpolate||d)q=null}return t}})})},"dojox/charting/plot2d/commonStacked":function(){define(["dojo/_base/lang","dojox/lang/functional","./common"],function(S,J,f){var c=S.getObject("dojox.charting.plot2d.commonStacked",!0);return S.mixin(c,
{collectStats:function(h,d){for(var b=S.delegate(f.defaultStats),a=0;a<h.length;++a)for(var e=h[a],q=0;q<e.data.length;q++)if(null!==e.data[q]){if("number"!=typeof e.data[q]&&e.data[q].hasOwnProperty("x")){var t=e.data[q].x;if(null!==t){var u=c.getValue(h,a,t,d)[0];u=null!=u&&u.y?u.y:null}}else u=c.getIndexValue(h,a,q,d)[0],t=q+1;b.hmin=Math.min(b.hmin,t);b.hmax=Math.max(b.hmax,t);b.vmin=Math.min(b.vmin,u);b.vmax=Math.max(b.vmax,u)}return b},rearrangeValues:function(h,d,b){var a=J.filter(h,"x"),e=
a.length;if(!e)return h;for(var q={},t=0;t<e;++t){for(var u=a[t],g=u.min,m=u.max;g<m;++g)u[g]=(u[g]||0)+(q[g]||0);q=u}for(t=0;t<e;++t)for(u=a[t],g=u.min,m=u.max;g<m;++g)u[g]=this.isNullValue(u[g])?0:d(u[g])-b;if(this.opt.minWidth){d=this.opt.minWidth;for(t=e-1;t;--t)for(u=a[t],q=a[t-1],g=u.min,m=u.max;g<m;++g)u[g]-=q[g];q=u.max;for(g=u.min;g<q;++g){for(t=b=u=0;t<e;++t)m=a[t][g],0<m&&(u+=m,++b);if(u<=b*d)for(t=0;t<e;++t)m=a[t][g],0<m&&(a[t][g]=d);else{for(t=b=0;t<e;++t)u=a[t],m=u[g],0<m&&(m<d?(b+=
d-m,u[g]=d):0<b&&(m=u[g]-d,m>=b?(u[g]-=b,b=0):0<m&&(u[g]=d,b-=m)));if(0<b)for(t=e-1;0<=t;--t)if(u=a[t],m=u[g],0<m)if(m=u[g]-d,m>=b){u[g]-=b;break}else 0<m&&(u[g]=d,b-=m)}}for(t=1;t<e;++t)for(u=a[t],q=a[t-1],g=u.min,m=u.max;g<m;++g)u[g]+=q[g]}return h},getIndexValue:function(h,d,b,a){var e=0,q;for(q=0;q<=d;++q)if(!h[q].hidden){var t=e;var u=h[q].data[b];a(u)||(isNaN(u)&&(u=u.y||0),e+=u)}return[e,t]},getValue:function(h,d,b,a){var e=null,q,t;for(q=0;q<=d;++q)if(!h[q].hidden)for(t=0;t<h[q].data.length;t++){var u=
e;var g=h[q].data[t];if(!a(g))if(g.x==b){e||(e={x:b});null!=g.y&&(null==e.y&&(e.y=0),e.y+=g.y);break}else if(g.x>b)break}return[e,u]}})})},"arcgisonline/pages/components/RecycleOnboarding":function(){define("require exports tslib preact dojo/i18n!../../nls/arcgisonline preact/hooks ../utils/recycle ../utils/whatsNew".split(" "),function(S,J,f,c,h,d,b,a){Object.defineProperty(J,"__esModule",{value:!0});h=f.__importDefault(h);a=f.__importDefault(a);var e=new Date,q=new Date("November 8, 2023");J.default=
function(t){t=t.orgOnboarding;var u=(t=void 0===t?!0:t)?"recycleOrgNotice":"recycleUserNotice",g=(0,d.useState)(!1),m=g[0],v=g[1],p=(0,d.useState)(a.default.shouldShow(u,q));g=p[0];var l=p[1];if(e>q||720>window.innerWidth)return null;p=function(k,r){void 0===r&&(r=!1);return r?(0,c.h)("li",{class:"onboarding__text",dangerouslySetInnerHTML:{__html:k}}):(0,c.h)("li",{class:"onboarding__text"},k)};var n=function(){v(!1)};return(0,c.h)("div",{class:g?"trailer-1":""},(0,c.h)("calcite-notice",{icon:"lightbulb",
open:g,closable:!0,scale:"m",width:"auto",kind:"brand",oncalciteNoticeClose:function(){a.default.set(u);l(!1)}},(0,c.h)("div",{slot:"title"},h.default.recycle.onboarding.checkItOut),(0,c.h)("calcite-link",{slot:"link",onClick:function(){return v(!0)}},h.default.recycle.onboarding.learnMore)),(0,c.h)("calcite-modal",{class:"onboarding__modal",open:m,scale:"m",width:"s","intl-close":h.default.common.close,oncalciteModalClose:n},(0,c.h)("h3",{slot:"header",class:"font-size-1 trailer-0"},h.default.onboard.newFeatures),
(0,c.h)("div",{slot:"content",class:"flex flex-column onboarding__feature-content"},(0,c.h)("h3",{class:"onboarding__title"},h.default.recycle.onboarding.takeALook),(0,c.h)("div",{class:"onboarding__icon-container"},(0,c.h)("calcite-icon",{scale:"m",class:"onboarding__icon",icon:"recycle-bin"})),(0,c.h)("ul",null,p(h.default.recycle.onboarding.heldInRecycleBin.replace("${days}",b.DAYS_IN_RECYCLE_BIN)),p(t?h.default.recycle.onboarding.goToOrgRecycleBin.replace("${linkStart}",'\x3ccalcite-link href\x3d"content.html?contentType\x3drecycle#organization" target\x3d"_blank" icon-end\x3d"launch"\x3e').replace("${linkEnd}",
"\x3c/calcite-link\x3e"):h.default.recycle.onboarding.goToUserRecycleBin.replace("${linkStart}",'\x3ccalcite-link href\x3d"content.html?folder\x3drecycle" target\x3d"_blank" icon-end\x3d"launch"\x3e').replace("${linkEnd}","\x3c/calcite-link\x3e"),!0))),(0,c.h)("calcite-button",{slot:"primary",width:"full",onClick:n},h.default.common.close)))}})},"arcgisonline/pages/components/MapViewerPortalSwitchNotice":function(){define("require exports tslib preact preact/hooks ../utils/mapViewer ../utils/whatsNew dojo/i18n!../../nls/organization".split(" "),
function(S,J,f,c,h,d,b,a){Object.defineProperty(J,"__esModule",{value:!0});b=f.__importDefault(b);a=f.__importDefault(a);var e=new Date,q=new Date("August 30, 2025");J.default=function(t){var u=t.mapViewer,g=t.onUpdateClick;if(!t.isPortal||u===d.MapViewerType.Modern||e>q||720>window.innerWidth)return null;t=(0,h.useState)(b.default.shouldShow("mapViewerPortalSwitchNotice",q));u=t[0];var m=t[1];return(0,c.h)("div",{class:u?"trailer-1":""},(0,c.h)("calcite-notice",{icon:"map",open:u,closable:!0,scale:"m",
width:"auto",kind:"brand",oncalciteNoticeClose:function(){b.default.set("mapViewerPortalSwitchNotice");m(!1)}},(0,c.h)("div",{slot:"title"},a.default.mapViewerPortalSwitchNotice.title),(0,c.h)("div",{slot:"message"},a.default.mapViewerPortalSwitchNotice.description),(0,c.h)("calcite-link",{slot:"link",onClick:function(){return g()}},a.default.mapViewerPortalSwitchNotice.update)))}})},"arcgisonline/pages/organization/widgets/_licenses":function(){define("require exports tslib calcite-web/js/calcite-web dojo/on dojo/Deferred dojo/topic dojo/text!./templates/_licenses.html dojo/text!./templates/_licensesActions.html dojo/i18n!../../../nls/arcgisonline dojo/query dijit/_TemplatedMixin dijit/_WidgetBase dijit/a11yclick ./LicenseTypeCard ./LicensesSection ../../utils/dom ../../utils/organization ../../dijit/ControlBar ../../pageUtil ./onboard/OnboardBanner ./onboard/OnboardPopup ./MobileMenu ../../dijit/_CheckReadonlyMixin ../../../sharing/geow/Licenses ../../../sharing/geow/Roles ../../../sharing/util ../../../esriGeowConfig ../../../sharing/dijit/_LevelAwareMixin ../../../sharing/dijit/dialog/ImportProductLicensesDlg ../../../tsutils/declareDecorator ./OrgExtensionCard".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);
D=f.__importDefault(D);G=f.__importDefault(G);F=f.__importDefault(F);A=f.__importDefault(A);y=f.__importDefault(y);z=f.__importDefault(z);B=f.__importDefault(B);C=f.__importDefault(C);H=f.__importDefault(H);E=f.__importDefault(E);return function(){function K(){this.templateString=a.default;this.i18n=q.default;this._sections=[];this._currentTab="licenses"}K.prototype.postCreate=function(){this.inherited(arguments);n.default.isMobile()&&this._licenseTypesContainer.classList.remove("js-accordion")};
K.prototype.startup=function(){var I=this;this.inherited(arguments);this._licensesAPI=new F.default;this._rolesAPI=new A.default;this._addEventListeners();return n.default.initLicensesConfig(this.portal).then(function(){return I._initUI()})};K.prototype.destroy=function(){this.inherited(arguments);this._onboardPopup&&this._onboardPopup.destroy()};K.prototype._addEventListeners=function(){var I=this;this.own(b.default.subscribe("search/update",this._searchUpdate.bind(this)),b.default.subscribe("licenses/refresh",
function(){I._renderSections()}),b.default.subscribe("manageLicenseMembers/close",function(){I._renderSections()}),b.default.subscribe("licenses/import",function(L){L.reload&&(I._proSection&&(I._proSection.destroy(),I._proSection=void 0),I._proExtensionsSection&&(I._proExtensionsSection.destroy(),I._proExtensionsSection=void 0),I._appBundlesSection&&(I._appBundlesSection.destroy(),I._appBundlesSection=void 0),I._appSection&&(I._appSection.destroy(),I._appSection=void 0),I._dataSection&&(I._dataSection.destroy(),
I._dataSection=void 0),I.extensionsSection&&(I.extensionsSection.destroy(),I.extensionsSection=void 0),I.runtimeSection&&(I.runtimeSection.destroy(),I.runtimeSection=void 0),I._renderSections())}),b.default.subscribe("tabs/enable",this._showUserTypeTab.bind(this)),b.default.subscribe("page/show",this._showUserTypeTab.bind(this)),b.default.subscribe("onboard-banner/learn-more",this._onboardLearnMoreClick.bind(this)),b.default.subscribe("onboard-banner/close",function(){l.default.hideNode(I._onboardBannerContainer)}));
this._appLicensesTab.addEventListener("click",function(){I._switchTabs(I._appLicensesTab,I._appsContainer,"licenses",q.default.myOrganization.licensesTab.searchLicenses)});this._licenseTypesTab.addEventListener("click",function(){I._switchTabs(I._licenseTypesTab,I._licenseTypesTabContent,"user types",q.default.myOrganization.licensesTab.searchUserTypes)});this._organizationCapabilitiesTab.addEventListener("click",function(){I._switchTabs(I._organizationCapabilitiesTab,I._organizationCapabilitiesTabContent,
"organization capabilities",q.default.myOrganization.licensesTab.searchOrgCapabilities)})};K.prototype.isControlBar=function(I){return I.hasOwnProperty("setPlaceHolder")};K.prototype._switchTabs=function(I,L,M,N){(0,t.default)(".js-tab-content",this.domNode).addClass("hide");var P=(0,t.default)(".tab-selected",this.domNode);P.removeClass("tab-selected");P.removeAttr("aria-selected");I.classList.add("tab-selected");I.setAttribute("aria-selected","true");l.default.showNode(L);N&&this.isControlBar(this._controlBar)&&
this._controlBar.setPlaceholder(N);this._currentTab=M;b.default.publish("expires-tooltip/close");b.default.publish("license-popover/close")};K.prototype._onboardLearnMoreClick=function(){var I=this,L={imgSrc:"onboard_licenses1.svg",title:this.i18n.myOrganization.onboarding.licensesTitle1,description:this.i18n.myOrganization.onboarding.licensesDescription1},M={imgSrc:"onboard_licenses2.svg",title:this.i18n.myOrganization.onboarding.licensesTitle2,description:this.i18n.myOrganization.onboarding.licensesDescription2},
N=[];"licenses"===this._currentTab?N=[L,M]:"user types"===this._currentTab&&(N=[M,L]);this._onboardPopup=new x.default({items:N});this.own((0,h.default)(this._onboardPopup,"close",function(){I._onboardBanner.focusOnMore()}))};K.prototype._showUserTypeTab=function(){"#licenseTypes"===location.hash&&(this.page.tabs.updateActiveTab("licenses"),this._currentTab="user types",l.default.hideNode(this._appsContainer),l.default.showNode(this._licenseTypesTabContent),this._appLicensesTab.classList.remove("tab-selected"),
this._licenseTypesTab.classList.add("tab-selected"))};K.prototype._searchUpdate=function(I){var L=0,M=0;this._sections.forEach(function(P){0===P.searchUpdate(I)?P.hide():(M++,P.show())});0===M?l.default.showNode(this._noLicensesMatch):l.default.hideNode(this._noLicensesMatch);this._licenseTypeCards.forEach(function(P){P.matchSearch(I)?(L++,P.show()):P.hide()});0===L?(l.default.showNode(this._noUserTypeMatch),l.default.hideNode(this._userTypeDefinition)):(l.default.hideNode(this._noUserTypeMatch),
l.default.showNode(this._userTypeDefinition));var N=0;this.orgExtensionCards.forEach(function(P){P.matchSearch(I)?(N++,P.show()):P.hide()});l.default.showHide(this.noOrgExtMatch,0===N)};K.prototype._onImportLicenseClick=function(){this.checkReadonly()||r.default.createSpecifiedDialog(C.default).show()};K.prototype._initUI=function(){var I,L,M=n.default.getUserRole(this.portal.portalUser),N=null===(I=M.isAdmin)||void 0===I?void 0:I.call(M);I=M.canManageSecurity();!this.portal.isPortal&&n.default.shouldShowOnboard("licensesOnboardBanner")?
this._onboardBanner=new w.default({bannerText:this.i18n.myOrganization.onboarding.licensesInOnePlace,cookieKey:"licensesOnboardBanner"},this._onboardBanner):l.default.hideNode(this._onboardBannerContainer);this._controlBar=new k.default({search:{placeholder:q.default.myOrganization.licensesTab.searchLicenses,dontDebounce:!0},actions:this.portal.isPortal&&(N||I)?e.default:void 0,noMargin:!0},this._controlBar);M=(null===(L=this.portal.helpMap)||void 0===L?void 0:L.m)||{};this._licenseTypesHelpLink.href=
this.portal.helpBase+(M[this.portal.isPortal?"120001163":"120001561"]||"");this.portal.isPortal&&(N||I)&&this.own((0,m.default)(this.domNode.querySelector(".js-import-licenses-btn"),this._onImportLicenseClick.bind(this)));return this._renderSections()};K.prototype._createProLicensesSectionOptions=function(I,L){var M=!1;0<L.length&&(M=L.some(function(N){return n.default.isProKey(N.key)}));if(M)return{page:this.page,userTypes:I,supportsSessions:!0,productListing:{id:L[0].itemId,title:this.i18n.myOrganization.licensesTab.arcgisPro},
supportsDisablingOffline:!0,offlineOptions:{disableOfflineLabel:this.i18n.manageLicenses.disableProOffline,disableOfflineTooltip:this.i18n.manageLicenses.disableProOfflineTooltip}};L=n.default.getProFromUserTypes(I);return{page:this.page,fromUserTypes:!0,userTypes:I,supportsSessions:!0,productListing:L,supportsDisablingOffline:!0,offlineOptions:{disableOfflineLabel:this.i18n.manageLicenses.disableProOffline,disableOfflineTooltip:this.i18n.manageLicenses.disableProOfflineTooltip}}};K.prototype._getLicenseInfo=
function(){var I=new d.default,L=y.default.formatPortalOrgUrl(y.default.getPortalAdminBaseUrl(),"/license",this.portal.id);y.default.request({url:L,content:{ts:(new Date).getTime()}},{useProxy:z.default.isDebug}).then(function(M){I.resolve(M)},function(){I.resolve()});return I};K.prototype._renderSections=function(){var I=this,L=new d.default,M=new d.default;this._rolesAPI.getAllRoles(!0).then(function(N){var P=N.filter(function(Y){return Y.id===I.SYSTEM_ROLES.VIEWER})[0],R=N.filter(function(Y){return Y.id===
I.SYSTEM_ROLES.DATA_EDITOR})[0];N.forEach(function(Y){Y.id===I.SYSTEM_ROLES.VIEWER?Y.name=I.i18n.myOrganization.formatters.roleViewer:Y.id===I.SYSTEM_ROLES.DATA_EDITOR?Y.name=I.i18n.myOrganization.formatters.roleViewerEdit:Y.id===I.SYSTEM_ROLES.FACILITATOR&&(Y.name=I.i18n.myOrganization.formatters.roleFacilitator);Y.compatibleLevels=[I.LICENSE_LEVELS.TWO];A.default.exceedsRolePrivileges(P.privileges,Y.privileges,!0)||Y.compatibleLevels.push(I.LICENSE_LEVELS.ONE);A.default.exceedsRolePrivileges(R.privileges,
Y.privileges,!0)||Y.compatibleLevels.push(I.LICENSE_LEVELS.ONE_PLUS_EDIT)});N=f.__spreadArray(f.__spreadArray([],N,!0),[{id:"org_publisher",name:q.default.myOrganization.formatters.rolePublisher,compatibleLevels:[I.LICENSE_LEVELS.TWO]},{id:"org_admin",name:q.default.myOrganization.formatters.roleAdmin,compatibleLevels:[I.LICENSE_LEVELS.TWO]},{id:"org_user",name:q.default.myOrganization.formatters.roleUser,compatibleLevels:[I.LICENSE_LEVELS.TWO]}],!1);N.sort(function(Y,ja){Y=Y.name.toLowerCase();ja=
ja.name.toLowerCase();return Y>ja?1:Y<ja?-1:0});I._roles=N;M.resolve()});M.then(function(){var N=new d.default;I._licensesAPI.getLicenseTypes().then(function(P){I.portal.isPortal?I._getLicenseInfo().then(function(R){var Y;if(I._licenseResult=R)0<(null===(Y=R.portalCapabilities)||void 0===Y?void 0:Y.length)&&(I.capabilitiesInfo=R.portalCapabilities),R.userTypes&&P.userLicenseTypes&&P.userLicenseTypes.forEach(function(ja){var aa=R.userTypes.filter(function(da){return da.id===ja.id})[0];aa&&(ja.expiration=
aa.expiration)});N.resolve()}):N.resolve();N.then(function(){I._licensesAPI.getLicensedEntitlements().then(function(R){I._licensesAPI.getAppBundles().then(function(Y){var ja,aa,da,ra=Y.appBundles.map(function(T){return{key:T.appBundleItemId,itemId:T.appBundleItemId,title:T.name,used:T.assigned,total:T.maxUsers,isAppBundle:!0,apps:T.apps,allowedLevels:T.allowedLevels,usernames:T.usernames}});ra.sort(function(T,O){return T.apps.length>O.apps.length?-1:T.apps.length<O.apps.length?1:0});I._licenseResult&&
(0<(null===(ja=I._licenseResult.apps)||void 0===ja?void 0:ja.length)&&R.forEach(function(T){var O=I._licenseResult.apps.filter(function(Z){return Z.itemId===T.itemId})[0];O&&(T.expiration=O.expiration)}),0<(null===(aa=I._licenseResult.appBundles)||void 0===aa?void 0:aa.length)&&ra.forEach(function(T){var O=I._licenseResult.appBundles.filter(function(Z){return Z.itemId===T.itemId})[0];O&&(T.expiration=O.expiration)}),0<(null===(da=I._licenseResult.extensions)||void 0===da?void 0:da.length)&&R.forEach(function(T){var O=
I._licenseResult.extensions.filter(function(Z){return Z.itemId===T.itemId})[0];O&&(T.expiration=O.expiration)}));var ca=n.default.categorizeEntitlements(R);ja=ca.pro;aa=ca.proExtensions;da=ca.apps;var fa=ca.data,la=ca.userTypeExtensions;ca=ca.runtime;var ta=n.default.getUserTypesContainingPro(P.userLicenseTypes);I._appsFilter=[];da.forEach(function(T){I._appsFilter.push({id:T.itemId,name:T.title})});if(0<ja.length)I._appsFilter.push({id:ja[0].itemId,name:I.i18n.myOrganization.licensesTab.arcgisPro});
else if(0<ta.length){var Q=n.default.getProFromUserTypes(ta);Q&&I._appsFilter.push({id:Q.id,name:I.i18n.myOrganization.licensesTab.arcgisPro})}Y.appBundles.forEach(function(T){I._addAppFilter(T.apps)});P.userLicenseTypes.forEach(function(T){I._addAppFilter(T.apps)});I._appsFilter.sort(function(T,O){return T.name>O.name?1:T.name<O.name?-1:0});ja.forEach(function(T){T.allowedLevels=[I.LICENSE_LEVELS.TWO]});aa.forEach(function(T){T.allowedLevels=[I.LICENSE_LEVELS.TWO]});I._apps=n.default.filterOutProExtensions(R);
I._licenseTypes=P.userLicenseTypes;Y=0<ja.length||0<aa.length||0<ra.length||0<da.length||0<fa.length||0<la.length||0<ca.length;I._noAddOnLicenses.textContent=I.i18n.myOrganization.licensesTab[I.portal.isPortal?"noAddOnLicensesPortal":"noAddOnLicenses"];l.default.showHide(I._noAddOnLicenses,!Y);I.portal.proAndExtensionLicenses=ja.concat(aa);Y=I._createProLicensesSectionOptions(ta,ja);I._renderSection("arcgisPro",I.i18n.myOrganization.licensesTab.arcgisPro,ja,"_proSection",void 0,Y);I._renderSection("proExtensions",
I.i18n.myOrganization.licensesTab.proExtensions,aa,"_proExtensionsSection",ja,void 0,!0,{title:I.i18n.myOrganization.licensesTab.proExtensions,content:I.i18n.myOrganization.licensesTab.proExtensionsInfo,buttonAriaLabel:I.i18n.myOrganization.licensesTab.proExtensionsMoreInfo});I._renderSection("appbundles",I.i18n.myOrganization.licensesTab.appBundles,ra,"_appBundlesSection");I._renderSection("applications",I.i18n.myOrganization.licensesTab.applications,da,"_appSection");I._renderSection("data",I.i18n.myOrganization.licensesTab.data,
fa,"_dataSection");I._renderSection("extensions",I.i18n.myOrganization.licensesTab.userTypeExtensions,la,"extensionsSection");I._renderSection("runtime",I.i18n.myOrganization.licensesTab.runtimeExtensions,ca,"runtimeSection");I.initOrgCapabilities();I._licenseTypeCards&&I._licenseTypeCards.forEach(function(T){return T.destroy()});I._licenseTypesContainer.innerHTML="";0<P.userLicenseTypes.length&&(I._licenseTypeCards=[],P.userLicenseTypes.forEach(function(T,O){T=new v.default({portal:I.portal,licenseType:T,
roles:I._roles,apps:ra.concat(I._apps)});I._licenseTypeCards.push(T);0===O&&T.expand()}),l.default.appendChildren(I._licenseTypeCards.map(function(T){return T.domNode}),I._licenseTypesContainer));L.resolve();c.default.accordion();c.default.dropdown()})})})})});return L};K.prototype.checkKubernetesCapabilities=function(){return f.__awaiter(this,void 0,void 0,function(){var I,L,M,N,P,R=this,Y;return f.__generator(this,function(ja){switch(ja.label){case 0:if(!this.portal.isKubernetes())return[2];ja.label=
1;case 1:return ja.trys.push([1,3,,4]),I=z.default.portalAdminBaseUrl.replace("/portaladmin","/admin"),[4,y.default.request({url:"".concat(I,"/orgs/").concat(this.portal.id,"/license")})];case 2:if(L=ja.sent())if(M=L.capabilities,null===(Y=null===M||void 0===M?void 0:M.features)||void 0===Y?0:Y.length)N=[],P=["esriServerImg","esriServerRasterAnalytics","esriServerNoteBooksStandard","esriServerNoteBooksAdvanced"],M.features.forEach(function(aa){P.includes(aa.name)&&N.push(new E.default({portal:R.portal,
feature:aa}))}),this.orgExtensionCards=N,l.default.appendChildren(N.map(function(aa){return aa.domNode}),this.orgExtensionsSection),l.default.showNode(this._organizationCapabilitiesTab);return[3,4];case 3:return ja.sent(),[3,4];case 4:return[2]}})})};K.prototype.initOrgCapabilities=function(){return f.__awaiter(this,void 0,void 0,function(){var I,L,M,N,P,R,Y,ja,aa=this;return f.__generator(this,function(da){switch(da.label){case 0:return[4,y.default.request({url:z.default.restBaseUrl+"portals/self/subscriptionInfo"})];
case 1:return I=da.sent(),this._orgCapabilities=I.orgCapabilities,this.capabilitiesInfo&&this._orgCapabilities.forEach(function(ra){aa.capabilitiesInfo.forEach(function(ca){ca.id===ra.id&&(ra.expiration=ca.expiration)})}),this._orgCapabilities&&(L=this.i18n.myOrganization.licensesTab,M=L.licenseTypes,N=L.appLicenses,P=L.organizationCapabilities,R=new D.default({baseClass:"licenses__mobile-menu leader-1",configs:[{name:M,selected:"user types"===this._currentTab},{name:N,selected:"licenses"===this._currentTab},
{name:P,selected:"organization capabilities"===this._currentTab}]},this.domNode.querySelector(".js-mobile-menu")),this.own((0,h.default)(R,"select",this.handleMobileMenuSelect.bind(this))),0<this._orgCapabilities.length&&n.default.isMobile()&&this.domNode.classList.add("licenses__mobile-menu--show"),Y="indoors indoorsmaps indoorsspaces ips velocity liveTraffic workfloworg workflowstd".split(" "),this._orgCapabilities=this._orgCapabilities.filter(function(ra){return Y.includes(ra.id)}),l.default.showHide(this._organizationCapabilitiesTab,
0<this._orgCapabilities.length),this.orgExtensionCards=ja=this._orgCapabilities.map(function(ra){return new E.default({portal:aa.portal,capability:ra})}),this.orgExtensionsSection.innerHTML="",l.default.appendChildren(ja.map(function(ra){return ra.domNode}),this.orgExtensionsSection)),this.checkKubernetesCapabilities(),[2]}})})};K.prototype.handleMobileMenuSelect=function(I){var L=this.i18n.myOrganization.licensesTab,M=L.appLicenses,N=L.organizationCapabilities;I===L.licenseTypes?this._switchTabs(this._licenseTypesTab,
this._licenseTypesTabContent,"user types",q.default.myOrganization.licensesTab.searchUserTypes):I===M?this._switchTabs(this._appLicensesTab,this._appsContainer,"licenses",q.default.myOrganization.licensesTab.searchLicenses):I===N&&this._switchTabs(this._organizationCapabilitiesTab,this._organizationCapabilitiesTabContent,"organization capabilities",q.default.myOrganization.licensesTab.searchOrgCapabilities)};K.prototype._addAppFilter=function(I){var L=this;I.forEach(function(M){M.isAppBundle?M.apps&&
-1===M.title.indexOf("Essential Apps")&&L._addAppFilter(M.apps):L._appsFilter.filter(function(N){return N.id===M.id})[0]||L._appsFilter.push({id:M.id,name:M.title})})};K.prototype._addSection=function(I){this._appsLicenses.appendChild(I.domNode);this._sections.push(I)};K.prototype._renderSection=function(I,L,M,N,P,R,Y,ja){M.length||(null===R||void 0===R?0:R.fromUserTypes)&&R.productListing?this[N]?this[N].update(M,P):(this[N]=new p.default({sectionTitle:L,anchorName:I,page:this.page,portal:this.portal,
items:M,dependencies:P,roles:this._roles,apps:this._apps,licenseTypes:this._licenseTypes,sectionOptions:R,appsFilter:this._appsFilter,isExtension:Y,infoParameters:ja}),this._addSection(this[N])):0===M.length&&this[N]&&(this[N].destroy(),this[N]=void 0)};return K=f.__decorate([(0,H.default)(g.default,u.default,B.default,G.default)],K)}()})},"arcgisonline/pages/organization/widgets/LicenseTypeCard":function(){define("require exports tslib dojo/text!./templates/licenses/LicenseTypeCard.html dojo/i18n!../../../nls/arcgisonline dijit/_TemplatedMixin dijit/_WidgetBase dijit/a11yclick esri/lang ../../utils/dom ../../utils/organization ./LicensesAvailable ./AvailableText ./UserTypeName ../../dijit/InviteMembers/AppIconWithLabel ../../utils/icons ./UserTypeAppBundle ./LicenseExpirationBadge ./MobileUserTypeOverlay ./RoleInfo ../../../sharing/dijit/_LevelAwareMixin ../../../tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);return function(){function D(G,
F){this.templateString=c.default;this.i18n=h.default;this.icons=p.default;this._compatibleLicenses=[];this._compatibleRoles=[]}D.prototype.postCreate=function(){var G=this,F;this.inherited(arguments);this._userTypeName=new m.default({userType:this.licenseType,portal:this.portal,cssClasses:"avenir-bold flex-1"},this._userTypeName);e.default.isDefined(this.licenseType.assigned)&&e.default.isDefined(this.licenseType.maxUsers)&&(this._licensesAvailable=new u.default({used:this.licenseType.assigned,total:this.licenseType.maxUsers,
cssClasses:"flex-wrap hide-on-mobile"},this.domNode.querySelector(".js-licenses-available")),this._availableText=new g.default({used:this.licenseType.assigned,total:this.licenseType.maxUsers,cssClasses:"only-on-mobile"},this.domNode.querySelector(".js-available-text")));this._renderApps();this._compatibleLicenses=[];this._compatibleRoles=[];this.licenseType.supportsSignInOnlyFromUTApps||this.portal.isPortal&&this.licenseType.preventSignInFromNonUTEsriApps?this._compatibleLicensesEl.textContent=this.i18n.myOrganization.licensesTab.notCompatibleWithAnyAddOn:
0<(null===(F=this.apps)||void 0===F?void 0:F.length)?(this.apps.forEach(function(A){if(-1!==A.allowedLevels.indexOf(G.licenseType.level)||0===A.allowedLevels.length){var y=t.default.userTypePassesRequired(G.licenseType,A),z=t.default.alreadyIncludedInUserType(G.licenseType,A),B=A.expiration&&-1!==A.expiration&&A.expiration<Date.now()||0===A.total&&0<A.used,C=(A.isEsriApp||A.isAppBundle)&&G.licenseType.preventSignInFromNonUTEsriApps;z||B||!y||C||G._compatibleLicenses.push(A)}}),0<this._compatibleLicenses.length?
this._appendAppIcons(this._compatibleLicenses,this._compatibleLicensesEl):this._compatibleLicensesEl.textContent=this.i18n.myOrganization.licensesTab.noCompatibleLicenses):q.default.hideNode(this._compatibleLicensesBtn);this.roles?(this.roles.forEach(function(A){var y=!0;t.default.canSupportAdminRoles(G.licenseType)||(y=!t.default.isAdminRole(A));-1!==A.compatibleLevels.indexOf(G.licenseType.level)&&y&&G._compatibleRoles.push(A)}),F=this._compatibleRoles.map(function(A){return new r.default({role:A})}),
q.default.appendChildren(F.map(function(A){return A.domNode}),this._compatibleRolesEl)):q.default.hideNode(this._compatibleRolesBtn);0===this.licenseType.apps.length&&0===this.licenseType.extensions.length?q.default.hideNode(this._includedLicensesBtn):this._includedLicensesBtn.addEventListener("click",function(){G._toggleExpandedSection(G._includedLicenses,G._includedLicensesBtn)});this._includedLicensesBtn.classList.contains("hide")?this._compatibleLicensesBtn.classList.contains("hide")?this._compatibleRolesBtn.classList.contains("hide")||
this._toggleExpandedSection(this._compatibleRolesEl,this._compatibleRolesBtn):this._toggleExpandedSection(this._compatibleLicensesEl,this._compatibleLicensesBtn):this._toggleExpandedSection(this._includedLicenses,this._includedLicensesBtn);0!==this.licenseType.apps.length||this.apps||this.roles||this.domNode.classList.add("license-type-card--no-divider");this._addEventListeners();this.portal.isPortal&&(this.licenseType.expiration&&0<this.licenseType.expiration||0===this.licenseType.maxUsers&&0<this.licenseType.assigned)&&
(this._expiresBadge=new n.default({portal:this.portal,expiration:this.licenseType.expiration,used:this.licenseType.assigned,total:this.licenseType.maxUsers,isTemporary:-1<this.licenseType.id.indexOf("Temporary")},this._expiresBadge),this._expiresBadge.startup())};D.prototype.hide=function(){q.default.hideNode(this.domNode)};D.prototype.show=function(){q.default.showNode(this.domNode)};D.prototype.expand=function(){this.accordionSection.classList.add("is-active")};D.prototype.matchSearch=function(G){var F=
!1;G=G.toLowerCase();-1!==this.licenseType.name.toLowerCase().indexOf(G)&&(F=!0);this.licenseType.apps.some(function(A){-1!==A.title.toLowerCase().indexOf(G)&&(F=!0);return F});return F};D.prototype._addEventListeners=function(){var G=this;this._compatibleLicensesBtn.addEventListener("click",function(){G._toggleExpandedSection(G._compatibleLicensesEl,G._compatibleLicensesBtn)});this._compatibleRolesBtn.addEventListener("click",function(){G._toggleExpandedSection(G._compatibleRolesEl,G._compatibleRolesBtn)});
this.own((0,a.default)(this.domNode,this._onCardClick.bind(this)))};D.prototype._onCardClick=function(){t.default.isMobile()&&(new k.default({userType:this.licenseType,portal:this.portal,includedApps:this.licenseType.apps,compatibleApps:this._compatibleLicenses,compatibleRoles:this._compatibleRoles})).open()};D.prototype._appendAppIcons=function(G,F){var A=this,y=[];G.forEach(function(z){z=new v.default({app:z,portal:A.portal,textCssClasses:"margin-right-half"});y.push(z)});q.default.appendChildren(y.map(function(z){return z.domNode}),
F);return y};D.prototype._renderApps=function(){var G=this,F=this.licenseType.apps,A=[],y=[],z=[],B=F.filter(function(N){return N.isAppBundle});F=F.filter(function(N){return!N.isAppBundle});var C=this.licenseType.extensions,H=[],E=[],K=[],I=[],L=[],M=[];F.forEach(function(N){"ArcGIS Pro"===N.title?H.push(N):"Application SDK"===N.type?L.push(N):E.push(N)});H.forEach(function(N){K.push(new v.default({app:N,portal:G.portal,cssClasses:"user-type-app",textCssClasses:"licenses-card__app-icon"}))});q.default.appendChildren(K.map(function(N){return N.domNode}),
this.includedPro);q.default.showHide(this.proContainer,0<H.length);B.forEach(function(N){A.push(new l.default({appBundle:N,portal:G.portal,level:G.licenseType.level}))});q.default.appendChildren(A.map(function(N){return N.domNode}),this._includedAppBundles);q.default.showHide(this.appBundlesContainer,0<B.length);E=t.default.transformAppBundleApps(E,this.portal.isPortal);E.sort(function(N,P){return N.title>P.title?1:N.title<P.title?-1:0});E.forEach(function(N){var P=new v.default({app:N,portal:G.portal,
cssClasses:"user-type-app",textCssClasses:"licenses-card__app-icon"});N.isViewOnly?z.push(P):y.push(P)});q.default.appendChildren(y.map(function(N){return N.domNode}),this.includedApps);q.default.showHide(this.appsContainer,0<y.length);q.default.appendChildren(z.map(function(N){return N.domNode}),this.includedViewOnly);q.default.showHide(this.viewOnlyContainer,0<z.length);C.forEach(function(N){I.push(new v.default({app:N,portal:G.portal,cssClasses:"user-type-app",textCssClasses:"licenses-card__app-icon"}))});
q.default.appendChildren(I.map(function(N){return N.domNode}),this.includedExtensions);q.default.showHide(this.extensionsContainer,0<C.length);L.forEach(function(N){M.push(new v.default({app:N,portal:G.portal,cssClasses:"user-type-app",textCssClasses:"licenses-card__app-icon"}))});q.default.appendChildren(M.map(function(N){return N.domNode}),this.includedRuntime);q.default.showHide(this.runtimeContainer,0<L.length)};D.prototype._toggleExpandedSection=function(G,F){G.classList.contains("hide")?(q.default.forEachNode(this.domNode.querySelectorAll(".js-bottom-section"),
function(A){q.default.hideNode(A)}),q.default.forEachNode(this.domNode.querySelectorAll(".license-type-card__expand-link"),function(A){A.classList.remove("license-type-card__expand-link--selected")}),q.default.showNode(G),F.classList.add("license-type-card__expand-link--selected")):(q.default.hideNode(G),F.classList.remove("license-type-card__expand-link--selected"))};return D=f.__decorate([(0,x.default)(b.default,d.default,w.default)],D)}()})},"arcgisonline/pages/organization/widgets/UserTypeAppBundle":function(){define("require exports tslib dojo/i18n!../../../nls/arcgisonline dojo/text!./templates/licenses/UserTypeAppBundle.html dijit/_TemplatedMixin dijit/_WidgetBase ../../dijit/InviteMembers/AppIconWithLabel ../../utils/dom ../../utils/organization ../../utils/icons ../../../sharing/dijit/_LevelAwareMixin ../../../tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);return function(){function m(v,p){this.i18n=c.default;this.templateString=h.default;this.icons=t.default;this.numberOfColumns=4}m.prototype.postCreate=function(){var v=this;this.inherited(arguments);this.level===this.LICENSE_LEVELS.ONE&&
e.default.showNode(this._viewOnly);var p=new a.default({app:this.appBundle,portal:this.portal,textCssClasses:"licenses-card__app-icon font-size-1 avenir-demi"});this._titleContainer.appendChild(p.domNode);p=q.default.transformAppBundleApps(this.appBundle.apps,this.portal.isPortal);p.sort(function(l,n){return l.title>n.title?1:l.title<n.title?-1:0});p=p.map(function(l){return new a.default({app:l,portal:v.portal,textCssClasses:"font-size--1",blocked:l.blocked})});e.default.appendChildren(p.map(function(l){return l.domNode}),
this._appsContainer)};return m=f.__decorate([(0,g.default)(b.default,d.default,u.default)],m)}()})},"arcgisonline/pages/organization/widgets/MobileUserTypeOverlay":function(){define("require exports tslib calcite-web/js/calcite-web dojo/text!./templates/licenses/MobileUserTypeOverlay.html dojo/i18n!../../../nls/arcgisonline dojo/string dojo/dom-construct dojo/text!./templates/licenses/roleItem.html dijit/_TemplatedMixin dijit/_WidgetBase ../../dijit/Overlay ../../utils/icons ../../utils/dom ../../pageUtil ../../dijit/RoleSummaryDlg ../../dijit/InviteMembers/AppIconWithLabel ./UserTypeName ./AvailableText arcgisonline/tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);return function(){function w(x,D){this.title="";this.i18n=d.default;
this.icons=g.default;this.overlayContents=b.default.substitute(h.default,{i18n:this.i18n,chevronDown:this.icons["chevron-down"]["24"]});this.includedApps=[];this.compatibleApps=[];this.compatibleRoles=[];this.showActionBar=!1}w.prototype.postCreate=function(){this.inherited(arguments);this._render()};w.prototype.open=function(){this.inherited(arguments);c.default.accordion()};w.prototype.close=function(){this.inherited(arguments)};w.prototype._render=function(){this._includedAppsEl=this.domNode.querySelector(".js-included-apps");
this._compatibleAppsEl=this.domNode.querySelector(".js-compatible-apps");this._compatibleRolesEl=this.domNode.querySelector(".js-compatible-roles");this.domNode.classList.add("mobile-user-type");this._renderHeader();this._appendAppIcons(this.includedApps,this._includedAppsEl);this._appendAppIcons(this.compatibleApps,this._compatibleAppsEl);this._renderCompatibleRoles()};w.prototype._renderHeader=function(){var x=this.overlayTitle;x.parentElement.removeChild(x);x=new n.default({userType:this.userType,
portal:this.portal});var D=new k.default({used:this.userType.assigned,total:this.userType.maxUsers}),G=a.default.place('\x3cdiv class\x3d"flex-1"\x3e\x3c/div\x3e',this.domNode.querySelector(".overlay-mobile__title"),"after");m.default.appendChildren([x.domNode,D.domNode],G)};w.prototype._renderCompatibleRoles=function(){var x=this,D="",G=g.default.info;this.compatibleRoles.forEach(function(A){D+=b.default.substitute(e.default,{roleName:A.name,roleId:A.id,infoIcon:G["16"]})});this._compatibleRolesEl.innerHTML=
D;var F=this.domNode.querySelectorAll(".role-item-info");m.default.forEachNode(F,function(A){A.addEventListener("click",function(){var y=x.compatibleRoles.filter(function(B){return B.id===A.dataset.roleId})[0],z=v.default.createSpecifiedDialog(p.default,{role:y});setTimeout(function(){z.show()})})})};w.prototype._appendAppIcons=function(x,D){var G=this,F=[];x.forEach(function(A){A=new l.default({app:A,portal:G.portal,textCssClasses:"licenses-card__app-icon"});F.push(A)});m.default.appendChildren(F.map(function(A){return A.domNode}),
D)};return w=f.__decorate([(0,r.default)(t.default,q.default,u.default)],w)}()})},"arcgisonline/pages/organization/widgets/LicensesSection":function(){define("require exports tslib preact dojo/text!./templates/licenses/LicensesSection.html dojo/string dojo/on dojo/i18n!../../../nls/arcgisonline dijit/_TemplatedMixin dijit/_WidgetBase dijit/a11yclick ./LicensesCard ../../utils/alerts ../../utils/dom ../../utils/organization ../../dijit/ToggleSwitch ../../utils/icons ../../components/ProSettings/ProSettings ../../dijit/_CheckReadonlyMixin ../../../esriGeowConfig ../../dijit/LicenseUsageDetails ../../dijit/InfoTooltip ../../../tsutils/declareDecorator ../../../sharing/geow/Licenses".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G){h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);D=f.__importDefault(D);G=f.__importDefault(G);
return function(){function F(A,y){this.templateString=h.default;this.viewDetails=a.default.myOrganization.sessions.viewDetails;this.icons=l.default;this.appsFilter=[];this.isExtension=!1;this._cards=[]}F.prototype.postCreate=function(){var A=this;this.inherited(arguments);this._licensesAPI=new G.default;this._render();this.own((0,b.default)(this.headingBtn,"click",function(){A.domNode.classList.toggle("is-active");A.headingBtn.setAttribute("aria-expanded",A.domNode.classList.contains("is-active")?
"true":"false")}));this.sectionContent.id="".concat(this.id,"_sec_content");this.headingBtn.setAttribute("aria-controls",this.sectionContent.id)};F.prototype.searchUpdate=function(A){var y=this,z=0;if(-1!==this.sectionTitle.toLowerCase().indexOf(A.toLowerCase()))return z=this._cards.length,this._cards.forEach(function(B){B.show()}),this._heading.classList.remove("licenses-section--disable"),this._offlineContainer.classList.remove("licenses-section--disable"),0===z&&this.sectionOptions.fromUserTypes&&
(z=1),z;this._cards.forEach(function(B){var C=!1;v.default.isEntitlement(B.item)?(C=B.item,C=-1!==C.title.toLowerCase().indexOf(A.toLowerCase())):(C=B.item,C=-1!==C.name.toLowerCase().indexOf(A.toLowerCase()));C?(z++,B.show()):B.hide();z?(y._heading.classList.remove("licenses-section--disable"),y._offlineContainer.classList.remove("licenses-section--disable")):(y._heading.classList.add("licenses-section--disable"),y._offlineContainer.classList.add("licenses-section--disable"))});return z};F.prototype.update=
function(A,y){this._cards.forEach(function(z){var B=v.default.isEntitlement(z.item)?"title":"name",C=A.filter(function(H){return H[B]===z.item[B]})[0];C?z.update(C,y):z.destroy()})};F.prototype.hide=function(){m.default.hideNode(this.domNode)};F.prototype.show=function(){m.default.showNode(this.domNode)};F.prototype._renderMoreInfo=function(){this.infoParameters&&(this._moreInfo=new x.default(this.infoParameters,this._moreInfo))};F.prototype._renderSessionDetails=function(){var A=this,y,z,B,C=(null===
(y=this.sectionOptions)||void 0===y?void 0:y.supportsSessions)&&!r.default.proLicenseSettingsEnabled;m.default.showHide(this._sessionContainer,C);C&&this.own((0,t.default)(this._viewDetailsBtn,function(H){H&&(H.preventDefault(),H.stopPropagation());H=document.createElement("div");document.body.appendChild(H);(new w.default({portal:A.portal,productListing:A.sectionOptions.productListing},H)).open()}));m.default.showHide(this._fromUserTypesContainer,null===(z=this.sectionOptions)||void 0===z?void 0:
z.fromUserTypes);if(null===(B=this.sectionOptions)||void 0===B?0:B.fromUserTypes)y=this.sectionOptions.userTypes.map(function(H){return H.name}),this._fromUserTypesLabel.innerHTML=d.default.substitute(a.default.myOrganization.licensesTab.proFromUserTypes[1<y.length?"plural":"singular"],{userTypes:y.join(", ")})};F.prototype._renderOfflineOptions=function(){var A=this,y;if(null===(y=this.sectionOptions)||void 0===y?0:y.supportsDisablingOffline){var z=this.sectionOptions.productListing.listing?this.sectionOptions.productListing.listing.itemId:
this.sectionOptions.productListing.id;r.default.proLicenseSettingsEnabled?(0,c.render)((0,c.h)(n.default,{listingId:z,portal:this.portal,productListing:this.sectionOptions.productListing}),this.settingsContainer):(this._disableProOfflineToggle=new p.default({label:this.sectionOptions.offlineOptions.disableOfflineLabel,labelClasses:"toggle-switch-inline pro-offline-toggle",tooltip:a.default.manageLicenses.disableProOfflineTooltip,disabled:!0},this._offlineContainer),this._licensesAPI.getDisconnectSettingForListing(z).then(function(B){A.sectionOptions.offlineOptions.allowsOffline=
B.canDisconnect;A._disableProOfflineToggle.setChecked(!A.sectionOptions.offlineOptions.allowsOffline,!0);A._disableProOfflineToggle.enable()}),this.own(this._disableProOfflineToggle.on("change",function(B){if(A.checkReadonly())A._disableProOfflineToggle.setChecked(!B,!0);else{var C=!B;C!==A.sectionOptions.offlineOptions.allowsOffline&&A._licensesAPI.updateDisconnectSettingForListing(z,C).then(function(H){H.error?(g.default.showAlert("error",C?a.default.manageLicenses.enableProOfflineFailure:a.default.manageLicenses.disableProOfflineFailure),
A._disableProOfflineToggle.setChecked(!A.sectionOptions.offlineOptions.allowsOffline,!0)):(g.default.showAlert("success",C?a.default.manageLicenses.enableProOfflineSuccess:a.default.manageLicenses.disableProOfflineSuccess),A.sectionOptions.offlineOptions.allowsOffline=C)})}})))}else m.default.hideNode(this._offlineContainer)};F.prototype._render=function(){var A=this;this._renderMoreInfo();this._renderSessionDetails();this._renderOfflineOptions();this.items.forEach(function(y){var z;y=new u.default({item:y,
portal:A.portal,dependencies:A.dependencies,roles:A.roles,apps:A.apps,licenseTypes:A.licenseTypes,appsFilter:A.appsFilter,isExtension:A.isExtension,userTypesWithPro:null===(z=A.sectionOptions)||void 0===z?void 0:z.userTypes});A._cardsContainer.appendChild(y.domNode);A._cards.push(y)})};return F=f.__decorate([(0,D.default)(q.default,e.default,k.default)],F)}()})},"arcgisonline/pages/organization/widgets/LicensesCard":function(){define("require exports tslib dojo/text!./templates/licenses/LicensesCard.html dojo/i18n!../../../nls/arcgisonline dojo/debounce dojo/on dijit/_TemplatedMixin dijit/_WidgetBase dijit/a11yclick ../../../tsutils/declareDecorator ../../utils/dom ../../utils/organization ../../pageUtil ../../utils/icons ./LicensesAvailable ../../dijit/InviteMembers/AppIconWithLabel ../../dijit/InviteMembers/AppIcon ../../dijit/ManageLicenseMembers ../../dijit/CompatibleBadge ./LicenseExpirationBadge ../../dijit/_CheckReadonlyMixin ./BlockedAppPopup ../../components/LicenseNotAvailableBadge ../../dijit/LicenseUsageDetails ../../../sharing/dijit/_LevelAwareMixin preact".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);
D=f.__importDefault(D);G=f.__importDefault(G);F=f.__importDefault(F);A=f.__importDefault(A);return function(){function z(B,C){var H=this;this.templateString=c.default;this.i18n=h.default;this.isExtension=!1;this.debounceAdjust=(0,d.default)(function(){H.adjustForMobile()},300);this.notAvailableId=""}z.prototype.postMixInProperties=function(){this.inherited(arguments);this.isEntitlement=g.default.isEntitlement(this.item);this._updateProperties();this.notAvailableId="not-available-".concat(this.item.key)};
z.prototype.postCreate=function(){var B=this;this.inherited(arguments);this._compatibleBadge=new r.default({item:this.item,licenseTypes:this.licenseTypes,roles:this.roles,apps:this.apps,portal:this.portal,cssClasses:"flex-1 overflow-visible font-size--1"},this._compatibleBadge);if(this.isEntitlement){var C=this.item;C.isAppBundle||(this._icon=new n.default({app:C,portal:this.portal,cssClasses:"margin-right-half"},this._icon));C.isAppBundle&&(this.domNode.classList.add("licenses-bundle-card"),this._createAppIcons())}else this._createAppIcons(),
u.default.hideNode(this._actionButtons);this._updateEntitlementInfo();this.portal.isPortal&&this.portal.isKubernetes()&&!1===this.item.supportsKubernetes?(0,y.render)((0,y.h)(G.default,{buttonId:this.notAvailableId}),this.notAvailableKubernetes):this._updateExpiration();C=h.default.myOrganization.licensesTab.manageLicenseLabel.replace("${licenseName}",this.item.title);this._manageButton.setAttribute("aria-label",C);this._manageButton.addEventListener("click",this._onAssignBtnClick.bind(this));this.viewActivityButton.addEventListener("click",
function(){B.usageDetailsContainer||(B.usageDetailsContainer=document.createElement("div"),document.body.appendChild(B.usageDetailsContainer));(new F.default({portal:B.portal,productListing:{id:B.item.itemId,title:B.item.title}},B.usageDetailsContainer)).open()});this.own((0,q.default)(this.domNode,function(){g.default.isMobile()&&B._openManageOverlay("assign")}));this.adjustForMobile();window.addEventListener("resize",this.debounceAdjust);this.adjustBlocked()};z.prototype.destroy=function(){this.inherited(arguments);
window.removeEventListener("resize",this.debounceAdjust)};z.prototype.hide=function(){u.default.hideNode(this.domNode)};z.prototype.show=function(){u.default.showNode(this.domNode)};z.prototype.update=function(B,C){this.item=B;C&&(this.dependencies=C);this._updateProperties();this._updateEntitlementInfo();this._updateExpiration()};z.prototype._updateProperties=function(){if(this.isEntitlement){var B=this.item;this._title=B.title;this._used=B.used;this._total=B.total}};z.prototype.adjustBlocked=function(){if(this.item.blocked){this.domNode.classList.add("licenses-card--blocked");
var B=new D.default({aroundEl:this._icon.domNode});this.own((0,b.default)(this.licenseName,"click",B.openPopover))}};z.prototype._updateExpiration=function(){if(this.portal.isPortal&&(!this.item.isPro||0===this.item.total&&0<this.item.used))this._portalExpirationBadge=new w.default({portal:this.portal,expiration:this.item.expiration,total:this.item.total,used:this.item.used},this._portalExpiration);else if(!this.portal.isPortal&&this.item.isExpired){this._expiration.classList.add("licenses-card__expiration--danger");
this._expiration.innerHTML=v.default.inline["exclamation-mark-triangle"]["16"]+this.i18n.myOrganization.licensesTab[this.item.trial?"trialsExpired":"expired"];this._licensesAvailable&&this._licensesAvailable.warn();var B=v.default.inline["exclamation-mark-triangle"]["16"]+this.i18n.myOrganization.licensesTab[this.item.trial?"trialsExpired":"expired"];u.default.showNode(this._expiration);this._expiration.classList.add("licenses-card__expiration--danger");this._expiration.innerHTML=B}};z.prototype._updateEntitlementInfo=
function(){this._licensesAvailable?this._licensesAvailable.update(this._used,this._total):this._licensesAvailable=new p.default({used:this._used,total:this._total,cssClasses:"flex-wrap"},this.domNode.querySelector(".js-licenses-available"))};z.prototype._onAssignBtnClick=function(){this._openManageOverlay("assign")};z.prototype._openManageOverlay=function(B){var C=this;if(!this.checkReadonly()){var H=document.createElement("div");document.body.appendChild(H);this._manageLicenseMembersOverlay=new k.default({item:this.item,
portal:this.portal,action:B,dependencies:this.dependencies,showIcon:this.isEntitlement,appsFilter:this.appsFilter,userTypesWithPro:this.userTypesWithPro,constrain:!0,relatedExpiredApps:this.apps?this.apps.filter(function(E){return E.itemId===C.item.itemId&&E.key!==C.item.key&&E.isExpired}):[]},H);this._manageLicenseMembersOverlay.open()}};z.prototype._createAppIcons=function(){var B=this;u.default.showNode(this._apps);var C=g.default.transformAppBundleApps(this.item.apps,this.portal.isPortal);m.default.sortListByStrProp(C,
"title");C=C.map(function(H){return new l.default({app:H,portal:B.portal,blocked:H.blocked})});u.default.appendChildren(C.map(function(H){return H.domNode}),this._appsContainer)};z.prototype.adjustForMobile=function(){this.domNode&&(g.default.isMobile()?this.domNode.tabIndex=0:this.domNode.removeAttribute("tabindex"))};return z=f.__decorate([(0,t.default)(e.default,a.default,A.default,x.default)],z)}()})},"arcgisonline/pages/dijit/ManageLicenseMembers":function(){define("require exports tslib calcite-web/js/calcite-web dojo/promise/all dojo/Deferred dojo/topic dojo/on dojo/string dojo/text!./ManageLicenseMembers/templates/ManageLicenseMembers.html dojo/i18n!../../nls/arcgisonline dijit/registry dijit/a11yclick dijit/_TemplatedMixin dijit/_WidgetBase ../organization/widgets/LicensesAvailable ./InviteMembers/AppIcon ../portal/PortalUser ../pageUtil ../utils/alerts ../utils/dom ../utils/organization ../utils/culture ./Overlay ./Pagination ./ControlBar ./FilterStatus ./FilterSingleWithSearch ./FilterOrganizationGroups ./FilterCredits ./FilterCategoryWrapper ./ManageLicenseMembers/ManageLicenseMembersRow ../organization/widgets/AvailableText ./InviteMembers/MobileError ./MemberThumb arcgisonline/pages/utils/icons arcgisonline/pages/dijit/OverlayConfirm ./ToggleSwitch ../../esriGeowConfig ../../sharing/util ../../sharing/geow/Roles ../../sharing/geow/Licenses ../../sharing/dijit/_LevelAwareMixin ../../tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E,K,I,L,M,N,P,R,Y,ja,aa,da,ra){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);
x=f.__importDefault(x);D=f.__importDefault(D);G=f.__importDefault(G);F=f.__importDefault(F);A=f.__importDefault(A);y=f.__importDefault(y);z=f.__importDefault(z);B=f.__importDefault(B);C=f.__importDefault(C);H=f.__importDefault(H);E=f.__importDefault(E);K=f.__importDefault(K);I=f.__importDefault(I);L=f.__importDefault(L);M=f.__importDefault(M);N=f.__importDefault(N);P=f.__importDefault(P);R=f.__importDefault(R);Y=f.__importDefault(Y);ja=f.__importDefault(ja);aa=f.__importDefault(aa);da=f.__importDefault(da);
ra=f.__importDefault(ra);return function(){function ca(fa,la){this.title="";this.i18n=t.default;this.icons=M.default;this.overlayContents=e.default.substitute(q.default,{i18n:this.i18n,closeIcon:this.icons.x["24"]});this.dependencies=[];this.appsFilter=[];this.showActionBar=!1;this.relatedExpiredApps=[];this._shouldNotify=this._filtersCollapsed=!1;this._modifiedList=[];this._isMobile=this._shouldRestartAppLauncher=this._actionInProgress=!1;this._topicPrefix="MANAGE_LICENSE_MEMBERS/";this.isAdmin=
!1;this._page={start:1,num:60,total:0,nextStart:-1};this._sortOptions=[{property:"fullname",label:this.i18n.myOrganization.membersTab.memberName,ascending:!0,active:!0},{property:"username",label:this.i18n.myOrganization.membersTab.username,ascending:!0,active:!1}];this._sort={property:"fullname",label:this.i18n.myOrganization.currentGrid.fullName,ascending:!0};this._filterState={};this._filters={userLicenseType:{param:"userLicenseType",chipText:t.default.myOrganization.filterChips.userType+" ",clearText:t.default.myOrganization.filterChips.userTypeClear,
options:{}},role:{param:"role",chipText:t.default.myOrganization.filterChips.role+" ",clearText:t.default.myOrganization.filterChips.roleClear,options:{}},group:{param:"group",chipText:t.default.myOrganization.filterChips.group+" ",clearText:t.default.myOrganization.filterChips.groupClear,options:{}},app:{param:"app",chipText:t.default.myOrganization.filterChips.app+" ",clearText:t.default.myOrganization.filterChips.appClear,options:{}},lastlogin:{param:"lastlogin",chipText:t.default.myOrganization.filterChips.lastLogin+
" ",clearText:t.default.myOrganization.filterChips.lastLoginClear,minDate:void 0,showNever:!0},provider:{param:"provider",chipText:t.default.myOrganization.filterChips.loginType+" ",clearText:t.default.myOrganization.filterChips.loginTypeClear,options:{}},availablecredits:{param:"availablecredits",chipText:t.default.myOrganization.filterChips.credits+" ",clearText:t.default.myOrganization.filterChips.creditsClear},mfaenabled:{param:"mfaenabled",chipText:this.i18n.myOrganization.filterChips.mfa+" ",
clearText:this.i18n.myOrganization.filterChips.mfaClear,options:{enabled:{value:"enabled",q:"mfaenabled:true",label:this.i18n.myOrganization.membersTab.mfaEnabled},disabled:{value:"disabled",q:"-mfaenabled:true",label:this.i18n.myOrganization.membersTab.mfaDisabled}}}};this._searchTerm="";this._isOpen=!0}ca.prototype.postMixInProperties=function(){this.inherited(arguments);this.title=e.default.substitute(this.i18n.myOrganization.manageLicenseMembers.manageLicense,{appName:this.item.title})};ca.prototype.postCreate=
function(){var fa,la;this.inherited(arguments);this.userRole=x.default.getUserRole(this.portal.portalUser);this.isAdmin=null===(la=(fa=this.userRole).isAmin)||void 0===la?void 0:la.call(fa);this._isMobile=x.default.isMobile();x.default.isMobile()&&(this._mobileAlert=new I.default);this.item.blocked&&(this.domNode.querySelector(".js-blocked-notice").open=!0)};ca.prototype.destroy=function(){this.inherited(arguments);this._mobileAlert&&this._mobileAlert.destroy()};ca.prototype.open=function(){this.inherited(arguments);
this._overlayLoader.classList.add("is-active");this._overlay.insertBefore(this.domNode.querySelector(".js-top-bar"),this._overlayContentWrapper);this._renderHeader();this.domNode.classList.add("manage-license-members-overlay");this._rolesAPI=new ja.default;this._licensesAPI=new aa.default;this._initUI();this._addListeners()};ca.prototype.close=function(){this.inherited(arguments);this._isOpen=!1;var fa=document.body.querySelectorAll(".manage-license-members__alert");w.default.forEachNode(fa,function(la){u.default.byId(la.id).destroy()});
b.default.publish("manageLicenseMembers/close")};ca.prototype._handleWindowResize=function(){this._isMobile!==x.default.isMobile()&&(this._isMobile=x.default.isMobile(),this._mobileAlert||(this._mobileAlert=new I.default),this._renderHeader())};ca.prototype._initFilterStatus=function(){this._filterStatus&&this._filterStatus.destroy();var fa=x.default.isMobile()?".js-filter-status-mobile":".js-filter-status";this._filterStatus=new y.default({dontUpdateQueryParams:!0},this.domNode.querySelector(fa));
this._filterStatus.domNode.classList.add("margin-left-half");this._filterStatus.domNode.classList.add("padding-left-half");this._filterStatus.domNode.classList.add("manage-license-members__filter-status");this._filterStatus.domNode.classList.remove("flex-1");this._filterStatus.domNode.classList.remove("tablet-hide")};ca.prototype._renderHeader=function(){var fa=this.domNode.querySelector(".overlay-title"),la=x.default.isMobile();this._mobileHeader||(this._mobileHeader=this.domNode.querySelector(".js-mobile-header"),
this._mobileHeader.querySelector(".js-license-title").textContent=this.item.title,(new K.default({used:this.item.used,total:this.item.total,cssClasses:"margin-left-half"},this._mobileHeader.querySelector(".js-license-available"))).startup(),this._overlayTitleBar.insertBefore(this._mobileHeader,fa));this.showIcon&&(this._appIcon||(this._appIcon=new l.default({app:this.item,portal:this.portal,cssClasses:"margin-right-half left"})),la?this._mobileHeader.insertBefore(this._appIcon.domNode,this._mobileHeader.querySelector(".js-mobile-header-info")):
this._overlayTitleBar.insertBefore(this._appIcon.domNode,fa));la?(w.default.hideNode(fa),w.default.showNode(this._mobileHeader)):(w.default.showNode(fa),w.default.hideNode(this._mobileHeader))};ca.prototype._addListeners=function(){this.own(b.default.subscribe("".concat(this._topicPrefix,"search/update"),this._searchUpdate.bind(this)),b.default.subscribe("filter/update",this._filterUpdate.bind(this)),b.default.subscribe("filter/clear",this._filterClear.bind(this)),b.default.subscribe("filter/remove",
this._filterRemove.bind(this)),b.default.subscribe("".concat(this._topicPrefix,"sort/update"),this._sortUpdate.bind(this)),b.default.subscribe("pagination/page",this._paginationPage.bind(this)),b.default.subscribe("window/resize",this._handleWindowResize.bind(this)),(0,a.default)(this._overlayContentWrapper,"scroll",this._handleContentScroll.bind(this)))};ca.prototype._handleContentScroll=function(){0<this._overlayContentWrapper.scrollTop?this.domNode.classList.add("manage-license-members-overlay--scrolling"):
this.domNode.classList.remove("manage-license-members-overlay--scrolling")};ca.prototype._paginationPage=function(fa){this._page.start=fa.start;this._page.num=fa.num;this._renderMembers(!0)};ca.prototype._sortUpdate=function(fa){var la=fa.property,ta=fa.ascending;fa=fa.label;this._page.start=1;this._sort={property:la,ascending:ta,label:fa};this._renderMembers()};ca.prototype._filterRemove=function(fa){this._filterState[fa.param]=!1;this._renderMembers()};ca.prototype._filterClear=function(){var fa=
this;this._page.start=1;Object.keys(this._filterState).forEach(function(la){fa._filterState[la]=!1});this._assignedToggle.setChecked(!1,!0);this._renderMembers()};ca.prototype._filterUpdate=function(fa){this._page.start=1;this._filterState[fa.param]=fa.selected;this._renderMembers()};ca.prototype._searchUpdate=function(fa){this._searchTerm=fa;this._page.start=1;this._renderMembers()};ca.prototype._initUI=function(){var fa=this;this._loader=this.domNode.querySelector(".js-loader");this._gridMemberCount=
this.domNode.querySelector(".js-grid-member-count");this._grid=this.domNode.querySelector(".js-grid");this._filtersPanel=this.domNode.querySelector(".js-filters-panel");this._allBtn=this.domNode.querySelector(".js-all-btn");this._allBtn.textContent=this.i18n.myOrganization.manageLicenseMembers.managePage;this._allBtn.addEventListener("click",this._confirmBatchAction.bind(this));this._noResults=this.domNode.querySelector(".js-no-results");this._pagination=new F.default({start:1,num:this._page.num,
pageSizeLabel:t.default.contentPage.paginationPerPageMembers},this.domNode.querySelector(".js-pagination"));this._initFilterStatus();b.default.publish("sort/update",f.__assign({},this._sort));this._initFilters().then(function(){var la={search:{placeholder:fa.i18n.myOrganization.membersTab.searchMembers,searchTerm:""},sort:fa._sortOptions,filterContainer:fa.domNode.querySelector(".js-filters-panel"),viewContainer:fa.domNode.querySelector(".js-grid"),actions:'\x3cdiv class\x3d"js-licenses-available"\x3e\x3c/div\x3e',
topic:fa._topicPrefix,insideOverlay:!0};fa._controlBar=new A.default(la,fa.domNode.querySelector(".js-control-bar"));fa._renderMembers(!0);c.default.dropdown();fa._updateTopLeftColumn()})};ca.prototype._getMembers=function(){var fa=this;return Y.default.request({url:"".concat(R.default.restBaseUrl,"portals/self/users/search"),content:this._getParams()}).then(function(la){fa._nextStart=la.nextStart;fa._pagination.render(la);fa._updateGridMemberCount(la.total);return la.results})};ca.prototype._updateGridMemberCount=
function(fa){var la=this._pagination.getCurrentPageObj();this._gridMemberCount.textContent=k.default.getPageRangeString({start:0===fa?0:la.start,end:la.end,total:la.total})};ca.prototype._getParams=function(){var fa=this,la,ta,Q,T={sortField:this._sort.property,sortOrder:this._sort.ascending?"asc":"desc",q:""};this.portal.isPortal&&(T.q+="-username:esri_livingatlas -username:esri_boundaries -username:esri_demographics -username:esri_nav ");this._searchTerm&&(T.q+=" (".concat(this._searchTerm,")"));
Object.keys(this._filters).forEach(function(O){fa._filterState[O]&&"categories"!==O&&(T.q+=" ".concat(fa._filterState[O][0].q))});if("assigned"===(null===(ta=null===(la=this._filterState.licenseStatus)||void 0===la?void 0:la[0])||void 0===ta?void 0:ta.value))if(this.item.isAppBundle)T.q+="appbundle: ".concat(this.item.itemId);else if(T.directapp=this.item.itemId,this.item.isPro||this.item.isBusinessAnalyst||this.item.isDrone2Map)T.entitlement=this.item.key;if(null===(Q=this._filterState.categories)||
void 0===Q?0:Q[0])la=this._filterState.categories[0].value,T.categories="_none_"===la?"null":JSON.stringify([la]);return T=f.__assign(f.__assign({},T),this._page)};ca.prototype._renderMembers=function(fa){var la=this;w.default.hideNode(this._noResults);fa||this._loader.classList.add("is-active");this._getMembers().then(function(ta){la._overlayLoader.classList.remove("is-active");la._rows&&(la._rows.forEach(function(Q){Q.destroy()}),la._rows=void 0);0===ta.length?(w.default.showNode(la._noResults),
la._loader.classList.remove("is-active"),la._disableBatchBtn()):(la._enableBatchBtn(),ta=ta.map(function(Q){var T=new n.default(f.__assign(f.__assign({},Q),{portal:la.portal}));T.id=Q.id;return T}),la._loader.classList.remove("is-active"),la._rows||(la._rows=[]),ta.forEach(function(Q){var T,O=la._userLicenseTypes.filter(function(ia){return ia.id===Q.userLicenseTypeId})[0];Q.licenseType=O;O=x.default.isProExtension(la.item.key);var Z=!0,na=[];O?(0<(null===(T=la.dependencies)||void 0===T?void 0:T.length)&&
la.dependencies.forEach(function(ia){var X=0===ia.extNotSupported.length||-1===ia.extNotSupported.indexOf(la.item.key),ha=-1!==ia.usernames.indexOf(Q.username);X&&na.push(ia.key);X&&ha&&(Z=!1)}),Z&&Q.licenseType.apps.forEach(function(ia){ia.isAppBundle?ia.apps.forEach(function(X){la._supportThisExtension(X.entitlements)&&(Z=!1)}):la._supportThisExtension(ia.entitlements)&&(Z=!1)})):Z=!1;T=new E.default({member:Q,item:la.item,invalidDep:Z,isExtension:O,userTypes:la._userLicenseTypes,compatiblePro:na,
proLicenses:la.dependencies,container:la,portal:la.portal,relatedExpiredApps:la.relatedExpiredApps});la.own((0,a.default)(T,"license-member/assign",la._onLicenseAssign.bind(la)),(0,a.default)(T,"license-member/unassign",la._onLicenseUnassign.bind(la)));la._rows.push(T)}),(0,h.default)(la._rows.map(function(Q){return Q.startup()})).then(function(){la._preventOverAssign();w.default.appendChildren(la._rows.map(function(O){return O.domNode}),la._grid);var Q=la._getAssignableRows().length,T=la._getUnassignableRows().length;
0===Q&&0===T&&la._disableBatchBtn()}))})};ca.prototype._supportThisExtension=function(fa){var la;if(fa.some(function(ta){var Q=x.default.isProKey(ta);Q&&(la=ta);return Q})&&la)return-1===aa.default.getExtNotSupported(la).indexOf(this.item.key);!1};ca.prototype._chooseActionMobile=function(){var fa=new d.default,la=this._getAssignableRows().length,ta=this._getUnassignableRows().length;0<la&&0<ta?this._mobileAlert.show({title:this.i18n.myOrganization.manageLicenseMembers.managePage,description:this.i18n.myOrganization.manageLicenseMembers.whatAction,
buttonText:D.default.getString(this.i18n.myOrganization.manageLicenseMembers.assignMembersNum,this._getAssignableRows().length),cancelText:D.default.getString(this.i18n.myOrganization.manageLicenseMembers.unassignMembersNum,this._getUnassignableRows().length),isInfo:!0,isConfirm:!0,showClose:!0,isBlueCancel:!0}).then(function(Q){fa.resolve(Q)}):fa.resolve(0===la?"onCancel":"onOk");return fa};ca.prototype._confirmMobile=function(){var fa=this;this._chooseActionMobile().then(function(la){var ta="onOk"===
la?"assign":"onCancel"===la?"unassign":void 0;if(ta){la=fa.portal.isPortal;var Q="assign"===ta?fa._getAssignableRows():fa._getUnassignableRows(),T=Q.length,O=D.default.getString(fa.i18n.myOrganization.manageLicenseMembers[ta+"MembersQuestion"],T),Z="\x3cdiv\x3e".concat(D.default.getString(fa.i18n.myOrganization.manageLicenseMembers[ta+"OnThisPage"],T,{number:T,title:fa.item.title}),'\x3c/div\x3e\x3cdiv class\x3d"leader-half flex js-thumbs"\x3e\x3c/div\x3e\x3cdiv class\x3d"leader-half ').concat(la||
"unassign"===ta?"hide":"",'"\x3e\x3clabel class\x3d"trailer-0"\x3e\x3cinput type\x3d"checkbox" class\x3d"js-checkbox"\x3e').concat(fa.i18n.myOrganization.manageLicenseMembers.notifyViaEmail,'\x3c/label\x3e\x3c/div\x3e\x3cdiv class\x3d"leader-half"\x3e\x3cbutton class\x3d"btn full-width js-action-btn"\x3e').concat(fa.i18n.myOrganization.manageLicenseMembers[ta+"Members"],"\x3c/button\x3e\x3c/div\x3e");fa.action=ta;setTimeout(function(){fa._mobileAlert.show({title:O,description:Z,hideActionBar:!0,isInfo:!0});
var na=fa._mobileAlert.domNode.querySelector(".js-checkbox"),ia=Q.map(function(V){return V.member}),X=ia.slice(0,6).map(function(V){return(new L.default({member:V,cssClasses:"manage-license-members__assign-icon"})).domNode});if(6<T){var ha=document.createElement("div");ha.className="manage-license-members__more-members-icon flex flex-center";ha.textContent="+".concat(T-6);X.push(ha)}w.default.appendChildren(X,fa._mobileAlert.domNode.querySelector(".js-thumbs"));fa._usernames=ia.map(function(V){return V.username});
fa.own((0,g.default)(fa._mobileAlert.domNode.querySelector(".js-action-btn"),function(){fa._shouldNotify="assign"===ta?na.checked:!1;fa._proceedToBatchAction();fa._mobileAlert.hide()}))},300)}})};ca.prototype._chooseAction=function(){var fa=new d.default,la=this._getAssignableRows().length,ta=this._getUnassignableRows().length;if(0<la&&0<ta){var Q=this.i18n.myOrganization.manageLicenseMembers.managePage,T=this.i18n.myOrganization.manageLicenseMembers.whatAction;ta=D.default.getString(this.i18n.myOrganization.manageLicenseMembers.unassignMembersNum,
ta);la=D.default.getString(this.i18n.myOrganization.manageLicenseMembers.assignMembersNum,la);this.showOverlayConfirm(Q,T,la,ta,!0).then(function(O){fa.resolve(O)})}else fa.resolve(0===la?"onCancel":"onOk");return fa};ca.prototype._confirmBatchAction=function(){var fa=this;x.default.isMobile()?this._confirmMobile():this._chooseAction().then(function(la){var ta="onOk"===la?"assign":"onCancel"===la?"unassign":void 0;if(ta){var Q=fa.portal.isPortal,T="assign"===ta?fa._getAssignableRows():fa._getUnassignableRows();
la=T.length;var O=D.default.getString(fa.i18n.myOrganization.manageLicenseMembers[ta+"MembersQuestion"],la);Q="\x3cdiv\x3e".concat(D.default.getString(fa.i18n.myOrganization.manageLicenseMembers[ta+"OnThisPage"],la,{number:la,title:fa.item.title}),'\x3c/div\x3e\x3cdiv class\x3d"leader-half flex js-thumbs"\x3e\x3c/div\x3e\x3cdiv class\x3d"leader-1 ').concat(Q||"unassign"===ta?"hide":"",'"\x3e\x3clabel class\x3d"trailer-0 flex flex-align-center"\x3e\x3cinput type\x3d"checkbox" class\x3d"js-checkbox"\x3e').concat(fa.i18n.myOrganization.manageLicenseMembers.notifyViaEmail,
"\x3c/label\x3e\x3c/div\x3e");fa.action=ta;fa.showOverlayConfirm(O,Q,fa.i18n.myOrganization.manageLicenseMembers[ta+"Members"],fa.i18n.common.cancel).then(function(na){fa._allBtn.focus();"onOk"===na&&(fa._shouldNotify="assign"===ta?Z.checked:!1,fa._proceedToBatchAction())});var Z=fa._overlayConfirm.domNode.querySelector(".js-checkbox");T=T.map(function(na){return na.member});O=T.slice(0,6).map(function(na){return(new L.default({member:na,scale:"m"})).domNode});Q=void 0;6<la&&(Q=document.createElement("div"),
Q.className="manage-license-members__more-members-icon flex flex-center",Q.textContent="+".concat(la-6),O.push(Q));w.default.appendChildren(O,fa._overlayConfirm.domNode.querySelector(".js-thumbs"));fa._usernames=T.map(function(na){return na.username})}else fa._allBtn.focus()})};ca.prototype.showOverlayConfirm=function(fa,la,ta,Q,T){this._overlayConfirm=new N.default({title:fa,description:la,confirmText:ta,cancelText:Q,isActions:T});this._overlay.appendChild(this._overlayConfirm.domNode);return this._overlayConfirm.show()};
ca.prototype.showMobileAlert=function(fa){return this._mobileAlert.show(fa)};ca.prototype._provisionLicenses=function(){var fa=this;this._shouldRestartAppLauncher=!1;if(this.item.isAppBundle)return this._licensesAPI.provisionUserAppBundle(this.item.itemId,this._usernames,"assign"!==this.action);if(this.item.isPro){var la=[],ta=x.default.isProExtension(this.item.key);this._usernames.forEach(function(T){var O=fa._rows.filter(function(na){return na.member.username===T})[0].getUserProEntitlements(),Z=
[];ta?"assign"===fa.action?Z=f.__spreadArray(f.__spreadArray([],O,!0),[fa.item.key],!1):O.forEach(function(na){na!==fa.item.key&&Z.push(na)}):"assign"===fa.action&&(O.forEach(function(na){var ia=-1!==["desktopBasicN","desktopStdN","desktopAdvN"].indexOf(na);-1!==fa.item.extNotSupported.indexOf(na)||ia||Z.push(na)}),Z.push(fa.item.key));(O=fa._checkForMatchingEntitlements(la,Z))?O.users.push(T):la.push({users:[T],entitlements:Z})});return this._makeProvisionRequests(la,0)}if("Web Mapping Application"===
this.item.type||"User License Type Extension"===this.item.type)this._shouldRestartAppLauncher=-1<this._usernames.indexOf(Y.default.getUser().username);var Q={users:this._usernames,entitlements:[]};"assign"===this.action&&(Q.entitlements=this.item.isEsriApp?[this.item.key]:f.__spreadArray([],this.item.entitlementKeys||[],!0));return this._licensesAPI.provisionUserEntitlements(this.item.itemId,Q,this._shouldNotify)};ca.prototype._makeProvisionRequests=function(fa,la,ta,Q){var T=this;Q||(Q=[]);ta||(ta=
new d.default);this._licensesAPI.provisionUserEntitlements(this.item.itemId,fa[la],this._shouldNotify).then(function(O){la++;la>=fa.length?0===Q.length?ta.resolve(O):ta.reject(Q):T._makeProvisionRequests(fa,la,ta,Q)},function(O){la++;Q.push(O);la>=fa.length?ta.reject(Q):T._makeProvisionRequests(fa,la,ta,Q)});return ta};ca.prototype._checkForMatchingEntitlements=function(fa,la){var ta=this;if(0!==fa.length)return 0===la.length?fa.filter(function(Q){return 0===Q.entitlements.length})[0]:fa.filter(function(Q){return ta._isSameEntitlements(Q.entitlements,
la)})[0]};ca.prototype._isSameEntitlements=function(fa,la){fa.sort();la.sort();return fa.length===la.length&&fa.every(function(ta,Q){return ta===la[Q]})};ca.prototype._proceedToBatchAction=function(){var fa=this;this._actionInProgress||(this._actionInProgress=!0,this._overlayLoader.classList.add("is-active"),this._provisionLicenses().then(function(){fa._actionInProgress=!1;fa._overlayLoader.classList.remove("is-active");r.default.showAlert("success",e.default.substitute(fa.i18n.myOrganization.manageLicenseMembers["".concat(fa.action,
"edAllMessage")],{appName:fa.item.title,memberCount:fa._usernames.length}),{cssClasses:fa._isOpen?"manage-license-members__alert":""});fa._shouldRestartAppLauncher&&b.default.publish("appLauncher/restart");fa._isOpen&&fa._afterBatchAction()},function(la){fa._actionInProgress=!1;fa._overlayLoader.classList.remove("is-active");if(la.message){var ta="";ta="CONT_0056"===la.messageCode?e.default.substitute(fa.i18n.manageLicenses.assignLicense.disconnectedAppSomeWarning,{license:fa.item.title}):fa.i18n.myOrganization.manageLicenses.licensesUpdateError;
r.default.showAlert("error",ta,{cssClasses:"manage-license-members__alert"})}else Array.isArray(la)&&(la.some(function(Q){return"CONT_0056"===Q.messageCode})?r.default.showAlert("error",fa.i18n.manageLicenses.assignLicense.disconnectedSomeWarning,{cssClasses:"manage-license-members__alert"}):r.default.showAlert("error",fa.i18n.myOrganization.manageLicenses.licensesUpdateError,{cssClasses:"manage-license-members__alert"}))}))};ca.prototype._afterBatchAction=function(){var fa=this,la="assign"===this.action;
this._usernames.forEach(function(ta){fa._rows.forEach(function(Q){Q.member.username===ta&&(Q.setChecked(la,!0),Q=fa.item.usernames.indexOf(ta),la?-1===Q&&fa.item.usernames.push(ta):-1<Q&&fa.item.usernames.splice(Q,1))})});this.item.used=la?this.item.used+this._usernames.length:this.item.used-this._usernames.length;this._updateTopLeftColumn();this._preventOverAssign()};ca.prototype._enableBatchBtn=function(){this._allBtn.classList.remove("manage-license-members__all-btn--disable")};ca.prototype._disableBatchBtn=
function(){this._allBtn.classList.add("manage-license-members__all-btn--disable")};ca.prototype._getAssignableRows=function(){return this._rows.filter(function(fa){return fa.isAssignable()})};ca.prototype._getUnassignableRows=function(){return this._rows.filter(function(fa){return fa.isUnassignable()})};ca.prototype._onLicenseUnassign=function(fa){this.item.used--;this._updateTopLeftColumn();this._adjustModifiedList("unassign",fa.username);this._preventOverAssign()};ca.prototype._onLicenseAssign=
function(fa){this.item.used++;this._updateTopLeftColumn();this._adjustModifiedList("assign",fa.username);this._preventOverAssign()};ca.prototype._adjustModifiedList=function(fa,la){var ta=this._modifiedList.indexOf(la);this.action===fa?-1===ta&&this._modifiedList.push(la):-1!==ta&&this._modifiedList.splice(ta,1)};ca.prototype._preventOverAssign=function(){var fa=this;this._rows.forEach(function(la){la[fa.item.used>=fa.item.total&&!la.checked()?"disable":"enable"]()})};ca.prototype._updateTopLeftColumn=
function(){this._licensesAvailable?this._licensesAvailable.update(this.item.used,this.item.total):this._licensesAvailable=new p.default({used:this.item.used,total:this.item.total,cssClasses:"font-size--1 margin-right-1",isStatus:!0},this.domNode.querySelector(".js-licenses-available"));this.item.isExpired&&this._licensesAvailable.warn();this._availableText&&this._availableText.update(this.item.used)};ca.prototype._initFilters=function(){var fa=this,la=new d.default,ta=!this.portal.isPortal&&(this.isAdmin||
this.userRole.canInviteUsers()||this.userRole.canManageSecurity()),Q=this.isAdmin||this.userRole.canViewOrgUsers();(0,h.default)({roles:this._rolesAPI.getAllRoles(!0),licenseTypes:this._licensesAPI.getLicenseTypes(),loginType:ta?this.getLoginTypeInfo():null,categories:Q?Y.default.request({url:"".concat(R.default.restBaseUrl,"portals/self/memberCategorySchema")}):null}).then(function(T){var O,Z;fa._initAppFilter();fa._userLicenseTypes=T.licenseTypes.userLicenseTypes;fa._initLicenseStatusFilter();fa._initUserLicenseTypeFilter(T.licenseTypes.userLicenseTypes);
fa._initRoleFilter(T.roles);fa._initCreditsFilter();fa._initGroupFilter();fa._initLastLoginFilter();fa.initMFAFilter();ta&&T.loginType?fa.initLoginTypeFilter(T.loginType):fa.domNode.querySelector(".js-filters-container").removeChild(fa.domNode.querySelector(".js-filter-loginType"));0<(null===(Z=null===(O=T.categories)||void 0===O?void 0:O.memberCategorySchema)||void 0===Z?void 0:Z.length)?fa.initCategoryFilter(T.categories.memberCategorySchema):fa.domNode.querySelector(".js-filters-container").removeChild(fa.domNode.querySelector(".js-filter-category"));
c.default.accordion();la.resolve()});return la};ca.prototype.getBaseUrl=function(){return Y.default.getSecureUrl(R.default.restBaseUrl)};ca.prototype.request=function(fa){return Y.default.request({url:"".concat(this.getBaseUrl()).concat(fa)})};ca.prototype.getLoginTypeInfo=function(){return(0,h.default)({idp:this.request("portals/self/idp"),federation:this.request("portals/self/idp/federation"),oidc:this.request("portals/self/oidc"),social:this.request("portals/self/socialProviders")})};ca.prototype._initAppFilter=
function(){var fa=this;this.appsFilter.forEach(function(la){fa._filters.app.options[la.id]={value:la.id,q:"app:".concat(la.id),label:la.name}});this._appFilter=new z.default({title:this.i18n.myOrganization.manageLicenseMembers.app,searchText:this.i18n.myOrganization.manageLicenseMembers.app,filterParameter:this._filters.app,active:!1},this.domNode.querySelector(".js-filter-app"))};ca.prototype._initLastLoginFilter=function(){this._lastLoginFilter=new z.default({title:this.i18n.myOrganization.membersTab.lastLogin,
filterParameter:f.__assign(f.__assign({},this._filters.lastlogin),{minDate:this.portal.created}),type:"date",active:!1},this.domNode.querySelector(".js-filter-lastLogin"))};ca.prototype.initLoginTypeFilter=function(fa){var la=this,ta,Q,T,O,Z,na;if(fa){var ia=fa.idp,X=fa.federation,ha=fa.oidc;fa=fa.social;ia=!!((null===ia||void 0===ia?0:ia.id)?ia:(null===X||void 0===X?0:X.id)&&X);ha=null===(Q=null===(ta=null===ha||void 0===ha?void 0:ha.oidcProviders)||void 0===ta?void 0:ta[0])||void 0===Q?void 0:Q.id;
ta=!!ha;Q=0<(null===(O=null===(T=null===fa||void 0===fa?void 0:fa.config)||void 0===T?void 0:T.providers)||void 0===O?void 0:O.length);T=(null===(na=null===(Z=null===fa||void 0===fa?void 0:fa.config)||void 0===Z?void 0:Z.providers)||void 0===na?void 0:na.reduce(function(V,ea){return"".concat(V).concat(V?" OR ":"","provider:").concat(ea)},""))||"";f.__spreadArray(f.__spreadArray(f.__spreadArray([{value:"arcgis",label:"ArcGIS"}],ia?[{value:"enterprise",label:"SAML"}]:[],!0),ta?[{value:"oidc_".concat(ha),
label:"OpenID Connect"}]:[],!0),Q?[{value:"social",q:"(".concat(T,")"),label:this.i18n.myOrganization.membersTab.social}]:[],!0).forEach(function(V){var ea=V.value,U=V.label;la._filters.provider.options[ea]={value:ea,q:V.q||"provider:".concat(ea),label:U}});new z.default({title:this.i18n.myOrganization.membersTab.loginType,searchText:"",filterParameter:this._filters.provider,active:!1},this.domNode.querySelector(".js-filter-loginType"))}};ca.prototype.initCategoryFilter=function(fa){new H.default({props:{portal:this.portal,
user:this.portal.portalUser,filterContainer:this.domNode.querySelector(".js-filters-container"),disableEdit:!this.isAdmin,categories:fa,isMemberCategories:!0}},this.domNode.querySelector(".js-filter-category"))};ca.prototype._initGroupFilter=function(){this._groupFilter=new B.default({portal:this.portal,filterParameter:this._filters.group,active:!1},this.domNode.querySelector(".js-filter-group"))};ca.prototype.initMFAFilter=function(){if(this.portal.mfaEnabled){var fa=document.createElement("section");
this.domNode.querySelector(".js-filters-container").appendChild(fa);new z.default({title:this.i18n.myOrganization.membersTab.mfa,searchText:"",filterParameter:this._filters.mfaenabled,active:!1},fa)}};ca.prototype._initUserLicenseTypeFilter=function(fa){var la=this;fa.forEach(function(ta){la._filters.userLicenseType.options[ta.id]={value:ta.id,q:"userlicensetype:".concat(ta.id),label:ta.name}});this._userTypeFilter=new z.default({title:this.i18n.myOrganization.membersTab.licenseType,searchText:this.i18n.myOrganization.membersTab.filterUserTypes,
filterParameter:this._filters.userLicenseType},this.domNode.querySelector(".js-filter-user-type"))};ca.prototype._initLicenseStatusFilter=function(){var fa=this;this._assignedToggle=new P.default({labelClasses:"trailer-0 font-size--1",label:t.default.myOrganization.manageLicenseMembers.assignedLicenses,labelPosition:"left"},this.domNode.querySelector(".js-assigned-toggle"));this._assignedToggle.domNode.querySelector(".toggle-switch-label").classList.remove("padding-leader-quarter");this.own((0,a.default)(this._assignedToggle,
"change",function(la){fa._filterUpdate({param:"licenseStatus",selected:[{value:la?"assigned":""}]})}))};ca.prototype._initRoleFilter=function(fa){var la=this;fa.forEach(function(ta){ta.id===la.SYSTEM_ROLES.VIEWER&&(ta.name=la.i18n.myOrganization.formatters.roleViewer,la._viewerRole=ta);ta.id===la.SYSTEM_ROLES.DATA_EDITOR&&(ta.name=la.i18n.myOrganization.formatters.roleViewerEdit,la._viewerEditRole=ta);ta.id===la.SYSTEM_ROLES.FACILITATOR&&(ta.name=la.i18n.myOrganization.formatters.roleFacilitator,
la._facilitatorRole=ta)});fa=f.__spreadArray(f.__spreadArray([],fa,!0),[{id:"org_publisher",name:t.default.myOrganization.formatters.rolePublisher},{id:"org_admin",name:t.default.myOrganization.formatters.roleAdmin},{id:"org_user",name:t.default.myOrganization.formatters.roleUser}],!1);fa.sort(function(ta,Q){ta=ta.name.toLowerCase();Q=Q.name.toLowerCase();return ta>Q?1:ta<Q?-1:0});this._roles=fa;this._roles.forEach(function(ta){la._filters.role.options[ta.id]={value:ta.id,q:"role:".concat(ta.id),
label:ta.name}});this._roleFilter=new z.default({title:this.i18n.myOrganization.membersTab.role,searchText:this.i18n.myOrganization.membersTab.filterRoles,filterParameter:this._filters.role},this.domNode.querySelector(".js-filter-role"))};ca.prototype._initCreditsFilter=function(){var fa,la,ta=this.isAdmin||(null===(la=(fa=this.userRole).canManageCredits)||void 0===la?void 0:la.call(fa));R.default.creditBudgetingEnabled&&ta&&("enabled"===this.portal.creditAssignments||"validated"===this.portal.creditAssignments)?
new C.default({active:!1},this.domNode.querySelector(".js-filter-credits")):this.domNode.querySelector(".js-filters-container").removeChild(this.domNode.querySelector(".js-filter-credits"))};return ca=f.__decorate([(0,ra.default)(v.default,m.default,da.default,G.default)],ca)}()})},"arcgisonline/pages/dijit/ManageLicenseMembers/ManageLicenseMembersRow":function(){define("require exports tslib esri/lang dojo/string dojo/on dojo/Deferred dojo/promise/all dojo/topic dojo/Evented dojo/text!./templates/ManageLicenseMembersRow.html dojo/text!./templates/CompatibleApps.html dojo/text!./templates/CompatibleUserTypes.html dojo/text!./templates/ChooseNotifyDescription.html dojo/i18n!../../../nls/arcgisonline dijit/_TemplatedMixin dijit/_WidgetBase dijit/a11yclick ../../utils/alerts ../../utils/dom ../../utils/organization ../../pageUtil ../../utils/icons ../MemberThumb ../../../sharing/geow/Licenses ../ToggleSwitch ./RowPopupButton ../../../esriGeowConfig ../../../sharing/util ../../../tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);
D=f.__importDefault(D);G=f.__importDefault(G);F=f.__importDefault(F);A=f.__importDefault(A);y=f.__importDefault(y);z=f.__importDefault(z);B=f.__importDefault(B);C=f.__importDefault(C);return function(){function H(E,K){this.templateString=t.default;this.i18n=v.default;this.icons=D.default;this.userTypes=[];this.compatiblePro=[];this.proLicenses=[];this.relatedExpiredApps=[];this._actionInProgress=this._shouldNotify=!1;this._proUserEntitlements=[];this.hasDirectPro=this.hasAppBundle=this._infoButtonBound=
this._unassignable=!1;this.actionable=!0}H.prototype.postCreate=function(){this.inherited(arguments);this._toggleSwitch=new A.default({labelClasses:"trailer-0 margin-left-half",hideLabel:!0,label:v.default.myOrganization.manageLicenseMembers.assignTo.replace("${name}",this.member.fullName)},this.domNode.querySelector(".js-toggle-switch"));this._addEventListener()};H.prototype.destroy=function(){this.inherited(arguments)};H.prototype.startup=function(){var E=this,K=new b.default;this.inherited(arguments);
this._licensesAPI=new F.default;if(this.item.isPro){var I=this.item.proEntitlements.filter(function(L){return L.username===E.member.username})[0];I&&(this._proUserEntitlements=I.entitlements)}I=this.item.isPro&&this.member.licenseType.apps.some(function(L){return!L.isAppBundle&&L.entitlements.some(function(M){return w.default.isProKey(M)})});(0,a.default)({appBundles:this._licensesAPI.getUserAppBundles(this.member.username),apps:this._licensesAPI.getUserProvisionedListings(this.member.username,{includeExpired:!0}),
userEntitlements:this.item.isPro||this.item.isBusinessAnalyst||this.item.isDrone2Map?this.getUserEntitlements(this.item.itemId,this.member.username):null,checkDirectPro:I?this.checkDirectPro():null}).then(function(L){var M,N=L.apps;E.member.appBundles=L.appBundles;E.member.apps=N;L.userEntitlements&&(E.member.entitlements=(null===(M=L.userEntitlements.userEntitlements)||void 0===M?void 0:M.entitlements.filter(function(P){return!E.userTypes.filter(function(R){return E.member.userLicenseTypeId===R.id})[0].apps.some(function(R){var Y;
return!R.isAppBundle&&-1<(null===(Y=R.entitlements)||void 0===Y?void 0:Y.indexOf(P))})}))||[],E.item.isPro&&(E._proUserEntitlements=E.member.entitlements));E._initUI();K.resolve()});return K};H.prototype.getUserEntitlements=function(E,K){var I=new b.default;this._licensesAPI.getUserEntitlements(E,K).then(function(L){I.resolve(L)},function(){I.resolve(null)});return I};H.prototype.getUserProEntitlements=function(){return this._proUserEntitlements||[]};H.prototype._isIncluded=function(E){var K=["desktopBasicN",
"desktopStdN","desktopAdvN"],I=E.isAppBundle?!1:!!E.entitlements.filter(function(M){return-1!==K.indexOf(M)})[0],L=!1;E.id===this.item.itemId&&(L=this.item.isPro?this.isExtension?-1!==E.entitlements.indexOf(this.item.key):I:!0);return L};H.prototype._disableToggleSwitch=function(){this._toggleSwitch.disable();this._unassignable=!0};H.prototype._createRowPopupButton=function(){if(this._unassignableReason){var E=this.domNode.querySelector(".js-row-popup-btn")||document.createElement("button");"included"===
this._unassignableReason&&this._rowPopupButton&&(this._rowPopupButton.domNode.insertAdjacentElement("afterend",E),this._rowPopupButton.destroy(),this._rowPopupButton=void 0);var K=this._popupDict[this._unassignableReason];this._rowPopupButton=new y.default({label:K.title,message:K.description},E);this._rowPopupButton.startup()}};H.prototype._bindInfoButton=function(){var E=this;if(this._unassignableReason&&w.default.isMobile()){if(!this._infoButtonBound){var K=this._popupDict[this._unassignableReason],
I=K.title,L=K.description;this._infoButton.setAttribute("aria-label",I);this.own((0,n.default)(this._infoButton,function(){E.container.showMobileAlert({title:I,description:L,isInfo:!0,hideActionBar:!0})}));this._infoButtonBound=!0}r.default.showNode(this._infoButton)}else r.default.hideNode(this._infoButton)};H.prototype._getIncludedDescription=function(){var E,K;return h.default.substitute(this.i18n.myOrganization.manageLicenseMembers.includedDescription,{userType:null!==(K=null===(E=this.member.licenseType)||
void 0===E?void 0:E.name)&&void 0!==K?K:"",license:this.item.title})};H.prototype.getDoubleAssignedDescription=function(){return h.default.substitute(this.i18n.myOrganization.manageLicenseMembers.doubleAssignedDescription,{license:-1<this.item.title.indexOf("ArcGIS Pro")?"ArcGIS Pro":this.item.title})};H.prototype._getIncompatibleDescription=function(){var E="";this._compatibleUserTypes.forEach(function(K){E+="\x3cli\x3e".concat(K.name,"\x3c/li\x3e")});return h.default.substitute(g.default,{i18n:this.i18n,
compatibleList:E})};H.prototype._getNoCompatibleAppDescription=function(){var E="";this._compatibleUserTypes.forEach(function(L){E+="\x3cli\x3e".concat(L.name,"\x3c/li\x3e")});var K=this.i18n.myOrganization.manageLicenseMembers.mustHavePro,I="";-1!==this.compatiblePro.indexOf("desktopBasicN")?I=K.any:-1!==this.compatiblePro.indexOf("desktopStdN")?I=K.standard:-1!==this.compatiblePro.indexOf("desktopAdvN")&&(I=K.advanced);return h.default.substitute(u.default,{i18n:this.i18n,proMessage:I,compatibleList:E})};
H.prototype._getNoCompatibleRuntimeDescription=function(){var E="";this._compatibleUserTypes.forEach(function(K){E+="\x3cli\x3e".concat(K.name,"\x3c/li\x3e")});return h.default.substitute(u.default,{i18n:this.i18n,proMessage:this.i18n.myOrganization.manageLicenseMembers.mustHaveRuntime,compatibleList:E})};H.prototype._initUI=function(){var E=this,K,I;this._memberThumb=new G.default({member:this.member,showName:!0},this._memberThumb);this._compatibleUserTypes=w.default.getCompatibleUserTypes(this.item,
this.userTypes,this.proLicenses);this._popupDict={included:{title:this.i18n.myOrganization.manageLicenseMembers.included,description:this._getIncludedDescription()},notCompatible:{title:this.i18n.myOrganization.manageLicenseMembers.notCompatible,description:this._getIncompatibleDescription()},noCompatibleApp:{title:this.i18n.myOrganization.manageLicenseMembers.noCompatiblePro,description:this._getNoCompatibleAppDescription()},noCompatibleRuntime:{title:this.i18n.myOrganization.manageLicenseMembers.noCompatibleRuntime,
description:this._getNoCompatibleRuntimeDescription()},doubleAssigned:{title:this.i18n.myOrganization.manageLicenseMembers.doubleAssigned,description:this.getDoubleAssignedDescription()}};var L=(this.item.isEsriApp||this.item.isAppBundle)&&this.member.licenseType.preventSignInFromNonUTEsriApps,M=!1;this.member.licenseType.apps.some(function(Y){var ja,aa=null===(ja=Y.entitlements)||void 0===ja?void 0:ja[0];if("desktopBasicN"===aa&&E.item.key!==aa||"desktopStdN"===aa&&"desktopAdvN"===E.item.key)return!1;
M=E._isIncluded(Y);Y.isAppBundle&&!M&&Y.apps.some(function(da){return M=E._isIncluded(da)});return M});M||this.member.licenseType.extensions.some(function(Y){return M=-1<Y.entitlements.indexOf(E.item.key)});this.member.appBundles&&!M&&this.member.appBundles.some(function(Y){return M=Y.apps.some(function(ja){return M=E._isIncluded(ja)})});var N=!1;this.item.isAppBundle&&(N=this.hasAppBundle||this.member.appBundles.some(function(Y){return Y.id===E.item.itemId}));var P=!1;P=this.item.isPro||this.item.isBusinessAnalyst||
this.item.isDrone2Map?(null===(K=this.member.entitlements)||void 0===K?void 0:K.some(function(Y){return Y===E.item.key}))||this.hasDirectPro:this.member.apps.some(function(Y){return Y.itemId===E.item.itemId});if(L||this.member.licenseType.supportsSignInOnlyFromUTApps||0<this.item.allowedLevels.length&&-1===this.item.allowedLevels.indexOf(this.member.level)||this.includeAnotherPro(this.member.licenseType))this._unassignableReason="notCompatible",this._disableToggleSwitch(),M=this.actionable=!1;if(M&&
(P||N))this._toggleSwitch.setChecked(!0,!0),this._unassignableReason="doubleAssigned",r.default.showNode(this._toggleSwitch.domNode);else if(M)this._toggleSwitch.setChecked(!0,!0),this._unassignableReason="included",this._disableToggleSwitch(),this.actionable=!1;else if(P||N)this._toggleSwitch.setChecked(!0,!0),r.default.showNode(this._toggleSwitch.domNode);var R=!0;w.default.isProExtension(this.item.key)?(0<(null===(I=this.proLicenses)||void 0===I?void 0:I.length)&&this.proLicenses.forEach(function(Y){var ja,
aa=0===Y.extNotSupported.length||-1===Y.extNotSupported.indexOf(E.item.key),da=-1<(null===(ja=E.member.entitlements)||void 0===ja?void 0:ja.indexOf(Y.key));aa&&da&&(R=!1)}),R&&this.member.licenseType.apps.forEach(function(Y){Y.isAppBundle?Y.apps.forEach(function(ja){E.supportThisExtension(ja.entitlements)&&(R=!1)}):E.supportThisExtension(Y.entitlements)&&(R=!1)})):R=!1;R&&(this._unassignableReason="noCompatibleApp",this._disableToggleSwitch(),this.actionable=!1);K=this.item;I=K.requiredListings;"Application SDK"===
K.type&&0<(null===I||void 0===I?void 0:I.length)&&!w.default.userTypePassesRequired(this.member.licenseType,this.item)&&(this._unassignableReason="noCompatibleRuntime",this._disableToggleSwitch(),this.actionable=!1);this._createRowPopupButton();this._bindInfoButton()};H.prototype.checkDirectPro=function(){var E=this,K=new b.default,I=new URL("".concat(z.default.restBaseUrl,"portals/self/users/search"));I.searchParams.append("filter","username:".concat(this.member.username));I.searchParams.append("directapp",
this.item.itemId);I.searchParams.append("entitlement",this.item.key);B.default.request({url:I.toString()}).then(function(L){E.hasDirectPro=0<L.total;K.resolve()},function(){K.resolve()});return K};H.prototype.includeAnotherPro=function(E){var K=this,I,L;return!this.item.isPro||this.isExtension||"desktopAdvN"===this.item.key||"desktopBasicN"===(null===(L=null===(I=E.apps.find(function(M){return"ArcGIS Pro"===M.title}))||void 0===I?void 0:I.entitlements)||void 0===L?void 0:L[0])?!1:E.apps.some(function(M){var N=
["desktopBasicN","desktopStdN","desktopAdvN"];return M.isAppBundle||!M.entitlements.some(function(P){return N.includes(P)})?!1:!M.entitlements.includes(K.item.key)})};H.prototype.supportThisExtension=function(E){var K;if(E.some(function(I){var L=w.default.isProKey(I);L&&(K=I);return L})&&K)return-1===F.default.getExtNotSupported(K).indexOf(this.item.key);!1};H.prototype._addEventListener=function(){var E=this;this.own((0,d.default)(this._toggleSwitch,"change",this._onActionBtnClick.bind(this)),e.default.subscribe("license-members/notify-change",
function(K){E._shouldNotify=K}),e.default.subscribe("window/resize",this._bindInfoButton.bind(this)))};H.prototype._isLicenseExpired=function(E){return(this.portal.proAndExtensionLicenses.filter(function(K){return K.key===E})[0]||{key:""}).isExpired};H.prototype._provisionLicense=function(){var E=this;if(this.item.isAppBundle){if(this.member.apps){var K;this.item.apps.some(function(M){return E.member.apps.some(function(N){var P=N.itemId===M.id;P&&(K=N.itemId);return P})})&&this._licensesAPI.provisionUserEntitlements(K,
{users:[this.member.username],entitlements:[]})}return this._licensesAPI.provisionUserAppBundle(this.item.itemId,[this.member.username],"unassign"===this._actionMode)}var I={users:[this.member.username],entitlements:[]},L="assign"===this._actionMode;this.item.isPro?w.default.isProExtension(this.item.key)?L?I.entitlements=f.__spreadArray(f.__spreadArray([],this._proUserEntitlements,!0),[this.item.key],!1):this._proUserEntitlements.forEach(function(M){M===E.item.key||E._isLicenseExpired(M)||I.entitlements.push(M)}):
L&&(this._proUserEntitlements.forEach(function(M){var N=-1!==["desktopBasicN","desktopStdN","desktopAdvN"].indexOf(M);-1!==E.item.extNotSupported.indexOf(M)||N||E._isLicenseExpired(M)||I.entitlements.push(M)}),I.entitlements.push(this.item.key)):L&&(I.entitlements=this.item.isEsriApp?[this.item.key]:f.__spreadArray([],this.item.entitlementKeys||[],!0));return this._licensesAPI.provisionUserEntitlements(this.item.itemId,I,this._shouldNotify)};H.prototype._chooseNotify=function(){var E=this.i18n.myOrganization.manageLicenseMembers.notifyMemberTitle,
K=this.i18n.myOrganization.manageLicenseMembers.notifyBtn,I=this.i18n.myOrganization.manageLicenseMembers.doNotNotifyBtn,L=h.default.substitute(this.i18n.myOrganization.manageLicenseMembers.sendEmailQuestion,{fullname:this.member.fullName});L=h.default.substitute(m.default,{i18n:this.i18n,question:L,hide:sessionStorage?"":"hide"});return w.default.isMobile()?this.container.showMobileAlert({title:E,description:L,buttonText:K,cancelText:I,isInfo:!0,isConfirm:!0,showClose:!0}):this.container.showOverlayConfirm(E,
L,K,I)};H.prototype._onActionBtnClick=function(){var E=this;if(!this._actionInProgress){this._actionInProgress=!0;var K=[];this.item.isPro&&this._proUserEntitlements.forEach(function(L){var M=E.portal.proAndExtensionLicenses.filter(function(N){return N.key===L})[0];(null===M||void 0===M?0:M.isExpired)&&K.push(M)});var I=new b.default;0<K.length?x.default.createConfirmationDialog({strings:{title:this.i18n.common.notice,description:this.i18n.myOrganization.manageLicenseMembers.expiredExtensions},autoCloseOnOk:!0,
onOk:function(){I.resolve()},onCancel:function(){E._actionInProgress=!1}}):I.resolve();I.then(function(){var L=!1,M=E._toggleSwitch.checked(),N=new b.default,P=E.portal.isPortal;P||!E._toggleSwitch.checked()||c.default.isDefined(sessionStorage.notifyLicenseAssign)?(E._shouldNotify=!P&&M&&c.default.isDefined(sessionStorage.notifyLicenseAssign)?"true"===sessionStorage.notifyLicenseAssign:!1,N.resolve()):E._chooseNotify().then(function(R){"onClose"===R?(E._toggleSwitch.setChecked(M?!1:!0,!0),L=!0,N.resolve(),
E._actionInProgress=!1):(E._shouldNotify="onOk"===R,(w.default.isMobile()?E.container._mobileAlert.domNode:E.container._overlayConfirm.domNode).querySelector(".js-checkbox").checked&&(sessionStorage.notifyLicenseAssign=E._shouldNotify),N.resolve())});N.then(function(R){E._toggleSwitch.focus();L||(E._actionInProgress=!0,E._actionMode=E._toggleSwitch.checked()?"assign":"unassign",E._provisionLicense().then(function(){E._actionInProgress=!1;if(E._toggleSwitch.checked())E.item.usernames.push(E.member.username);
else{var Y=E.item.usernames.indexOf(E.member.username);-1!==Y&&E.item.usernames.splice(Y,1)}E.emit("license-member/".concat(E._actionMode),E.member);E.restartAppLauncher();"doubleAssigned"===E._unassignableReason&&(E._toggleSwitch.setChecked(!0,!0),E._unassignableReason="included",E._disableToggleSwitch(),E.actionable=!1,E._createRowPopupButton())},function(Y){E._toggleSwitch.setChecked(M?!1:!0,!0);var ja=E._actionInProgress=!1;if(E.item.isPro){var aa=E.item.proEntitlements.filter(function(fa){return fa.username===
E.member.username})[0],da=w.default.isProExtension(E.item.key);if(null===aa||void 0===aa?0:aa.entitlements){var ra=aa.entitlements.filter(function(fa){return w.default.isProKey(fa)})[0];da&&ra&&(aa=E.proLicenses.filter(function(fa){return fa.key===ra})[0])&&(ja=aa.isExpired)}}if("GWM_0021"===Y.messageCode)k.default.showAlert("error",Y.message);else if("CONT_0056"===Y.messageCode){Y=E.i18n.manageLicenses.assignLicense;var ca=void 0;ca=E.item.isPro?h.default.substitute(Y.disconnectedSingleWarning,{name:E.member.username}):
h.default.substitute(Y.disconnectedAppWarning,{name:E.member.username,license:E.item.title});k.default.showAlert("error",ca,{cssClasses:"manage-license-members__alert"})}else"CONT_0052"===Y.messageCode?(null===(ca=E.relatedExpiredApps)||void 0===ca?0:ca.length)?k.default.showAlert("error",h.default.substitute(E.i18n.myOrganization.manageLicenseMembers.expiredRelatedApps,{apps:E.relatedExpiredApps.map(function(fa){return fa.title}).join(", ")}),{cssClasses:"manage-license-members__alert"}):k.default.showAlert("error",
E.i18n.myOrganization.manageLicenseMembers.expiredLicenses,{cssClasses:"manage-license-members__alert"}):500===Y.code&&ja?k.default.showAlert("error",E.i18n.myOrganization.manageLicenseMembers.baseProExpired,{cssClasses:"manage-license-members__alert"}):(ca=h.default.substitute(E.i18n.myOrganization.manageLicenseMembers["assign"===E._actionMode?"assignError":"unassignError"],{username:E.member.username}),k.default.showAlert("error",ca,{cssClasses:"manage-license-members__alert"}))}))})})}};H.prototype.restartAppLauncher=
function(){"Web Mapping Application"!==this.item.type&&"User License Type Extension"!==this.item.type||!z.default.userInfo||z.default.userInfo.username!==this.member.username||e.default.publish("appLauncher/restart",{})};H.prototype.disable=function(){this._toggleSwitch.disable()};H.prototype.enable=function(){this._unassignable||this._toggleSwitch.enable()};H.prototype.isAssignable=function(){return!this._toggleSwitch.domNode.classList.contains("hide")&&!this._toggleSwitch.checked()&&this.actionable};
H.prototype.isUnassignable=function(){return!this._toggleSwitch.domNode.classList.contains("hide")&&this._toggleSwitch.checked()&&this.actionable};H.prototype.setChecked=function(E,K){this._toggleSwitch.setChecked(E,K)};H.prototype.checked=function(){return this._toggleSwitch.checked()};return H=f.__decorate([(0,C.default)(l.default,p.default,q.default)],H)}()})},"arcgisonline/pages/dijit/ManageLicenseMembers/RowPopupButton":function(){define("require exports tslib dojo/on dojo/text!./templates/RowPopupButton.html dijit/_TemplatedMixin dijit/_WidgetBase dijit/TooltipDialog dijit/popup arcgisonline/tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);return function(){function t(u,g){this.templateString=h.default;this.opened=!1}t.prototype.postCreate=function(){this.inherited(arguments);this._addEventListeners()};t.prototype.destroy=function(){this._dialog&&this._dialog.destroy();this.inherited(arguments)};t.prototype._addEventListeners=function(){this.own((0,c.default)(this.domNode,
"click",this._handleClick.bind(this)),(0,c.default)(document.body,"click",this._handleBodyClick.bind(this)))};t.prototype._handleBodyClick=function(){this._dialog&&e.default.close(this._dialog)};t.prototype._handleClick=function(u){var g=this;u.stopPropagation();this.opened||(u=document.createElement("div"),u.classList.add("text-left"),u.innerHTML=this.message,this._dialog=new a.default({class:"popover license-row-popover",title:"",content:u}),e.default.open({popup:this._dialog,orient:["below","above"],
around:this.domNode}),this.opened=!0,c.default.once(this._dialog,"hide",function(){g._dialog.destroy();g._dialog=void 0;g.opened=!1}))};return t=f.__decorate([(0,q.default)(b.default,d.default)],t)}()})},"arcgisonline/pages/components/LicenseNotAvailableBadge":function(){define("require exports tslib preact preact/hooks dojo/i18n!../../nls/arcgisonline arcgisonline/esriGeowConfig dojo/topic dojo/string".split(" "),function(S,J,f,c,h,d,b,a,e){Object.defineProperty(J,"__esModule",{value:!0});d=f.__importDefault(d);
b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);J.default=function(q){q=q.buttonId;var t=f.__assign({},d.default.myOrganization.licensesTab),u=(0,h.useRef)(null);(0,h.useEffect)(function(){var m=a.default.subscribe("license-popover/close",function(){u.current&&(u.current.open=!1)});return function(){m.remove()}},[]);var g={__html:e.default.substitute(t.notSupportedText,{linkStart:'\x3ca href\x3d"'.concat(b.default.self.helpBase).concat(b.default.self.helpMap.m["120003652"]||"",
'" target\x3d"_blank"\x3e'),linkEnd:"\x3c/a\x3e"})};return(0,c.h)("div",null,(0,c.h)("calcite-popover",{ref:u,label:"",referenceElement:q,class:"license-not-available__popover"},(0,c.h)("div",{class:"padding-leader-half padding-right-half padding-left-1 padding-trailer-1 flex"},(0,c.h)("p",{class:"trailer-0 font-size--1 flex-1 padding-leader-quarter license-not-available__text",dangerouslySetInnerHTML:g}),(0,c.h)("div",{class:"flex-0"},(0,c.h)("button",{class:"btn-link btn-link-darker-gray",onClick:function(){u.current&&
(u.current.open=!1)}},(0,c.h)("calcite-icon",{icon:"x"}))))),(0,c.h)("button",{id:q,class:"btn-link btn-link-darker-gray font-size--2 license-expiration-badge"},t.licenseNotAvailable))}})},"arcgisonline/pages/dijit/LicenseUsageDetails":function(){define("require exports tslib ../../esriGeowConfig ../../tsutils/declareDecorator ../utils/dom ../utils/organization ./ControlBar ./Overlay ./Pagination ../portal/PortalUser ../../sharing/util ../../sharing/geow/Licenses calcite-web/js/calcite-web dijit/_WidgetBase dijit/_TemplatedMixin dojo/i18n!../../nls/arcgisonline dojo/text!./LicenseUsageDetails/templates/LicenseUsageDetails.html dojo/string dojo/topic dojo/Deferred dojo/promise/all ./LicenseUsageDetails/LicenseUsageRow".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D){Object.defineProperty(J,"__esModule",{value:!0});c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);
x=f.__importDefault(x);D=f.__importDefault(D);S=function(){function G(F,A){this.title="";this.i18n=l.default;this.overlayContents=k.default.substitute(n.default,{i18n:l.default});this.showActionBar=!1;this._page={start:1,num:60,total:0,nextStart:-1};this._searchTerm="";this._topicPrefix="LICENSE_USAGE_DETAILS/";this._users=[];this._isOpen=!0}G.prototype.postMixInProperties=function(){this.inherited(arguments);this.title=[this.i18n.myOrganization.sessions.usageDetails,this.productListing.listing?this.productListing.listing.title:
this.productListing.title].join(" ")};G.prototype.open=function(){this.inherited(arguments);this._overlay.insertBefore(this.domNode.querySelector(".js-top-bar"),this._overlayContentWrapper);this.domNode.classList.add("license-usage-details__overlay");this._licensesAPI=new g.default;this._initUI();this._addListeners()};G.prototype.close=function(){this.inherited(arguments);this._isOpen=!1};G.prototype._initUI=function(){this._noResults=this.domNode.querySelector(".js-no-results");this._loader=this.domNode.querySelector(".js-loader");
this._gridMemberCount=this.domNode.querySelector(".js-grid-member-count");this._grid=this.domNode.querySelector(".js-grid");this._controlBar=new a.default({search:{placeholder:this.i18n.myOrganization.membersTab.searchMembers,searchTerm:"",validateInput:b.default.isSearchTermValid,generateErrorMessage:b.default.generateSearchErrorMessage},topic:this._topicPrefix},this.domNode.querySelector(".js-license-usage-control-bar"));this._pagination=new q.default(f.__assign(f.__assign({},this._page),{topic:this._topicPrefix}),
this.domNode.querySelector(".js-pagination"));this._renderMembers()};G.prototype._addListeners=function(){m.default.dropdown();this.own(r.default.subscribe("".concat(this._topicPrefix,"search/update"),this._searchUpdate.bind(this)),r.default.subscribe("".concat(this._topicPrefix,"pagination/page"),this._paginationPage.bind(this)),r.default.subscribe("licenseUsageRow/open",this._openUsageRow.bind(this)))};G.prototype._openUsageRow=function(F){this._rows.forEach(function(A){A.id!==F.id&&A.closeSessions()})};
G.prototype._paginationPage=function(F){this._page.num=F.num;this._page.start=F.start;this._renderMembers(!0)};G.prototype._searchUpdate=function(F){this._searchTerm=F;this._page.start=1;this._renderMembers()};G.prototype._updateGridMemberCount=function(F){var A=this._pagination.getCurrentPageObj();this._gridMemberCount.textContent=k.default.substitute(this.i18n.myOrganization.manageLicenseMembers.pageNumbers,{start:0===F?0:A.start,end:A.end,total:A.total})};G.prototype._getParams=function(){var F,
A,y=null!==(A=null===(F=this.productListing.listing)||void 0===F?void 0:F.itemId)&&void 0!==A?A:this.productListing.id;F={q:"".concat(this._searchTerm,' app:"').concat(y,'"'),start:this._page.start,num:this._page.num,sortField:"fullname",sortOrder:"asc"};return F=f.__assign(f.__assign({},F),this._page)};G.prototype._getMembers=function(){var F=this,A=new w.default;u.default.request({url:"".concat(c.default.restBaseUrl,"portals/self/users/search"),content:this._getParams()}).then(function(y){var z;
if(y&&!y.code){F._nextStart=y.nextStart;F._pagination.render(y);F._updateGridMemberCount(y.total);F._users=[];var B=[];if(null===(z=y.results)||void 0===z?0:z.length)B=B.concat(y.results);var C={};B.forEach(function(H){var E,K;C[H.username]=F._licensesAPI.retrieveProvisionedUserEntitlement(null!==(K=null===(E=F.productListing.listing)||void 0===E?void 0:E.itemId)&&void 0!==K?K:F.productListing.id,H.username)});(0,x.default)(C).then(function(H){F._users=B.map(function(E){var K,I=H[E.username].userEntitlements;
return f.__assign(f.__assign({},I),{username:E.username,fullName:E.fullName,thumbnail:E.thumbnail,id:E.id,lastUsed:null!==(K=null===I||void 0===I?void 0:I.lastUsed)&&void 0!==K?K:null})});A.resolve(F._users)},function(H){A.resolve(F._users)})}else F._users=[],A.resolve(F._users)});return A};G.prototype._renderMembers=function(F){var A=this;d.default.hideNodes([this._noResults,this._grid,this._gridMemberCount]);F||this._loader.classList.add("is-active");this._getMembers().then(function(y){A._rows&&
(A._rows.forEach(function(z){z.destroy()}),A._rows=void 0);0===y.length?(d.default.showNodes([A._noResults,A._grid,A._gridMemberCount]),A._loader.classList.remove("is-active")):(y=y.map(function(z){var B=new t.default(f.__assign(f.__assign({},z),{portal:A.portal}));B.id=z.id;return B}),A._loader.classList.remove("is-active"),d.default.showNodes([A._grid,A._gridMemberCount]),A._rows||(A._rows=[]),y.forEach(function(z,B){var C,H,E=new D.default({itemId:null!==(H=null===(C=A.productListing.listing)||
void 0===C?void 0:C.itemId)&&void 0!==H?H:A.productListing.id,member:z,cssClasses:0===B?"first":B===y.length-1?"last":""});A._rows.push(E)}),d.default.appendChildren(A._rows.map(function(z){return z.domNode}),A._grid))})};return G=f.__decorate([(0,h.default)(v.default,p.default,e.default)],G)}();J.default=S})},"arcgisonline/pages/dijit/LicenseUsageDetails/LicenseUsageRow":function(){define("require exports tslib ../../utils/dom ../MemberThumb ../../utils/formatters ../../../sharing/geow/Licenses ../../../tsutils/declareDecorator dojo/Evented dojo/dom-attr dojo/topic dojo/i18n!../../../nls/arcgisonline dojo/text!./templates/LicenseUsageRow.html dijit/_TemplatedMixin dijit/_WidgetBase dijit/a11yclick ./LicenseSessionDetails".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l){Object.defineProperty(J,"__esModule",{value:!0});c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);S=function(){function n(k,r){this.templateString=g.default;this.i18n=u.default;this.cssClasses=
"";this._isExpanding=this._isExpanded=!1}n.prototype.postMixInProperties=function(){var k;if(null===(k=this.member)||void 0===k?0:k.lastLogin)this.member.lastUsed=d.default.fullDate(this.member.lastLogin)};n.prototype.postCreate=function(){this.inherited(arguments);this._licensesAPI=new b.default;this._initUI()};n.prototype.openSessions=function(){this._isExpanded||this._isExpanding||(this._isExpanding=!0,this._renderSessions())};n.prototype.closeSessions=function(){this._isExpanded&&!this._isExpanding&&
(this.domNode.classList.remove("is-active"),c.default.hideNode(this._sessionsContainer),this._isExpanding=this._isExpanded=!1)};n.prototype._initUI=function(){var k=Date.now(),r=-1<this.member.lastLogin?k-this.member.lastLogin:-1;k=this.member.disconnected;r=-1<r?18E5>=r:!1;this._memberThumb=new h.default({member:this.member,showName:!0},this._memberThumb);this._memberThumb.domNode.classList.add("inline-block");k?(this._sessionIndicator.classList.add("disconnected"),q.default.set(this._disconnectedContainer,
"innerHTML",this.i18n.myOrganization.sessions.disconnectedState)):r?(this._sessionIndicator.classList.add("online"),q.default.set(this._disconnectedContainer,"innerHTML","")):(this._sessionIndicator.classList.add("hide","disconnected"),q.default.set(this._disconnectedContainer,"innerHTML",""),c.default.hideNode(this._sessionIndicator));if(k||r)this.own((0,p.default)(this.domNode,this._toggleSessions.bind(this)),t.default.subscribe("licenseSessionDetails/end-session",this._renderSessions.bind(this))),
this.domNode.classList.add("license-usage-details__grid-row--clickable")};n.prototype._toggleSessions=function(k){k&&(k.preventDefault(),k.stopPropagation());this._isExpanded?this.closeSessions():this.openSessions()};n.prototype._clearSessions=function(){this._sessions&&(this._sessions.forEach(function(k){k.destroy()}),this._sessions=void 0)};n.prototype._renderSessions=function(){var k=this;this._licensesAPI.retrieveSessionInformation(this.itemId,this.member.username).then(function(r){k._clearSessions();
k._sessions||(k._sessions=[]);k.member.disconnected?(r=new l.default({itemId:k.itemId,session:{disconnected:!0,created:-1,modified:k.member.disconnectedInfo.disconnectedSince,sessionId:"",sessionName:k.member.disconnectedInfo.sessionName,username:k.member.username,validUntil:k.member.disconnectedInfo.disconnectedUntil},cssClasses:"first"}),k._sessions.push(r),c.default.appendChildren(k._sessions.map(function(w){return w.domNode}),k._sessionsContainer),k.domNode.classList.add("is-active"),c.default.showNode(k._sessionsContainer),
k._isExpanded=!0,k._isExpanding=!1,t.default.publish("licenseUsageRow/open",k)):r.sessions.length?(r.sessions.map(function(w,x){w=new l.default({itemId:k.itemId,session:w,cssClasses:0===x?"first":""});k._sessions.push(w)}),c.default.appendChildren(k._sessions.map(function(w){return w.domNode}),k._sessionsContainer),k.domNode.classList.add("is-active"),c.default.showNode(k._sessionsContainer),k._isExpanded=!0,k._isExpanding=!1,t.default.publish("licenseUsageRow/open",k)):(k.domNode.classList.remove("is-active"),
c.default.hideNode(k._sessionsContainer),k._isExpanded=!1,k._isExpanding=!1)},function(r){k.domNode.classList.remove("is-active");c.default.hideNode(k._sessionsContainer);k._isExpanded=!1;k._isExpanding=!1})};return n=f.__decorate([(0,a.default)(v.default,m.default,e.default)],n)}();J.default=S})},"arcgisonline/pages/dijit/LicenseUsageDetails/LicenseSessionDetails":function(){define("require exports tslib ../../pageUtil ../../utils/alerts ../../utils/dom ../../utils/formatters ../../../sharing/geow/Licenses ../../../tsutils/declareDecorator dijit/_WidgetBase dijit/_TemplatedMixin dijit/a11yclick dojo/dom-attr dojo/string dojo/topic dojo/i18n!../../../nls/arcgisonline dojo/text!./templates/LicenseSessionDetails.html moment/moment".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n){Object.defineProperty(J,"__esModule",{value:!0});c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);S=function(){function k(r,w){this.templateString=l.default;this.i18n=
f.__assign(f.__assign({},p.default.common),p.default.myOrganization.sessions)}k.prototype.postMixInProperties=function(){this.inherited(arguments)};k.prototype.postCreate=function(){this.inherited(arguments);this._initUI();this._render()};k.prototype._initUI=function(){this.own((0,u.default)(this._endSessionBtn,this._endSessionClick.bind(this)))};k.prototype._render=function(){this.session.disconnected?(d.default.hideNodes([this._onlineIndicator,this._createdLabelContainer,this._endSessionBtn]),d.default.showNodes([this._disconnectedIndicator,
this._disconnectedLabel])):(d.default.hideNodes([this._disconnectedIndicator,this._disconnectedLabel]),d.default.showNodes([this._onlineIndicator,this._createdLabelContainer,this._endSessionBtn]),g.default.set(this._createdLabel,"innerHTML",this._formatDate(this.session.created)));g.default.set(this._lastUsedLabel,"innerHTML",this._formatDate(this.session.modified));this.session.disconnected?g.default.set(this._activeUntilLabel,"innerHTML",b.default.fullDate(this.session.validUntil)+" "+b.default.timeOnly(this.session.validUntil)):
g.default.set(this._activeUntilLabel,"innerHTML",b.default.timeOnly(this.session.validUntil))};k.prototype._formatDate=function(r){var w=Date.now(),x=(0,n.default)(w).isSame(r,"day"),D=(0,n.default)(w).diff((0,n.default)(r),"days"),G=(0,n.default)(w).diff((0,n.default)(r),"minutes");w=(0,n.default)(w).diff((0,n.default)(r),"hours");return x?60>G?m.default.substitute(this.i18n.minutesAgo,{num:G}):m.default.substitute(this.i18n.hoursAgo,{num:w}):!x&&2>D?p.default.myOrganization.membersTab.yesterday:
0===r||-1===r?"":b.default.fullDate(r)};k.prototype._endSessionClick=function(r){var w=this;r&&(r.preventDefault(),r.stopPropagation());c.default.createConfirmationDialog({strings:{title:this.i18n.endSession,description:m.default.substitute(this.i18n.reallyEndSession,{name:this.session.sessionName}),ok:this.i18n.yesLabel,cancel:this.i18n.cancel},autoCloseOnOk:!0,onOk:function(){a.default.terminateUserSession(w.itemId,w.session.username,w.session.sessionId).then(function(x){h.default.showAlert("success",
m.default.substitute(w.i18n.sessionEnded,{name:w.session.sessionName}));v.default.publish("licenseSessionDetails/end-session",w.session)},function(x){h.default.showAlert("error",m.default.substitute(w.i18n.cantEndSession,{sessionName:w.session.sessionName}))})}})};return k=f.__decorate([(0,e.default)(q.default,t.default)],k)}();J.default=S})},"arcgisonline/pages/components/ProSettings/ProSettings":function(){define("require exports tslib preact preact/hooks ./api ./ManageProSettings ../../dijit/LicenseUsageDetails dojo/i18n!../../../nls/arcgisonline".split(" "),
function(S,J,f,c,h,d,b,a,e){Object.defineProperty(J,"__esModule",{value:!0});b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);J.default=function(q){function t(){A(!1)}function u(y,z,B){n(y);r(z);x(B);A(!1)}var g=q.listingId,m=q.portal,v=q.productListing;q=f.__assign({},e.default.manageLicenses.ProSettings);var p=(0,h.useState)(!0),l=p[0],n=p[1],k=(0,h.useState)(30);p=k[0];var r=k[1],w=(0,h.useState)(-1);k=w[0];var x=w[1],D=(0,h.useState)(!1);w=D[0];var G=D[1];D=(0,h.useState)(!1);
var F=D[0],A=D[1];(0,h.useEffect)(function(){(function(){return f.__awaiter(this,void 0,void 0,function(){var y,z;return f.__generator(this,function(B){switch(B.label){case 0:return[4,(0,d.getDisconnectSettings)(g)];case 1:return y=B.sent(),n(y.canDisconnect),r(y.expirationWarningDays||30),x(null!==(z=y.maxDisconnectDuration)&&void 0!==z?z:-1),G(!0),[2]}})})})()},[]);return(0,c.h)("div",{class:"trailer-1"},(0,c.h)("div",{class:"flex"},(0,c.h)("calcite-button",{class:"margin-right-1",appearance:"outline",
onClick:function(){var y=document.createElement("div");document.body.appendChild(y);(new a.default({portal:m,productListing:v},y)).open()}},q.viewLicense),(0,c.h)("calcite-button",{appearance:"outline",onClick:function(){A(!0)}},q.manage)),(0,c.h)("div",{class:"leader-half trailer-half"},l?q.canOffline:q.noOffline),l&&-1<k&&(0,c.h)("div",{class:"leader-half trailer-half flex"},(0,c.h)("div",{class:"margin-right-quarter"},q.numOfflineLabel),(0,c.h)("div",{class:"avenir-demi"},q.warningValue.replace("${num}",
"".concat(Math.floor(k/24/60))))),(0,c.h)("div",{class:"flex"},(0,c.h)("div",{class:"margin-right-quarter"},q.expiryLabel),(0,c.h)("div",{class:"avenir-demi"},q.warningValue.replace("${num}","".concat(p)))),w&&(0,c.h)(b.default,{open:F,portal:m,canDisconnect:l,maxDisconnectDuration:k,licenseExpiry:p,listingId:g,onClose:t,onSave:u}))}})},"arcgisonline/pages/components/ProSettings/api":function(){define(["require","exports","tslib","../../../esriGeowConfig","../../../sharing/util"],function(S,J,f,c,
h){function d(b,a){return"".concat(c.default.restBaseUrl,"content/listings/").concat(b,"/").concat(a)}Object.defineProperty(J,"__esModule",{value:!0});J.setLicenseExpiry=J.setDisconnectSettings=J.getDisconnectSettings=void 0;c=f.__importDefault(c);h=f.__importDefault(h);J.getDisconnectSettings=function(b){return h.default.request({url:d(b,"disconnectSettings")})};J.setDisconnectSettings=function(b,a,e){return h.default.request({url:d(b,"setDisconnectSettings"),content:{canDisconnect:a,maxDisconnectDuration:e}},
{usePost:!0})};J.setLicenseExpiry=function(b,a){return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,function(e){return[2,h.default.request({url:d(b,"setLicenseSettings"),content:{expirationWarningDays:a}},{usePost:!0})]})})}})},"arcgisonline/pages/components/ProSettings/ManageProSettings":function(){define("require exports tslib preact preact/hooks preact/compat ./api ../../utils/alerts ../../../esriGeowConfig ../../../telemetry dojo/i18n!../../../nls/arcgisonline".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t){Object.defineProperty(J,"__esModule",{value:!0});a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);J.default=function(u){function g(){G();C(r);E(-1===w?w:w/60/24);I(x)}function m(N,P){N="".concat(isNaN(+N)?"".concat(P):1>+N?"1":+N>P?"".concat(P):N);return"".concat(Math.floor(+N))}function v(N){N=m(N.target.value,2E3);z.current.value=N;E(+N)}function p(N){C(!N.target.checked)}function l(N){"noOffline"===N?C(!1):"limitedOffline"===
N?(C(!0),-1===H&&E(90)):"dynamicOffline"===N&&(C(!0),E(-1))}var n=u.listingId,k=u.open,r=u.canDisconnect,w=u.maxDisconnectDuration,x=u.licenseExpiry,D=u.portal,G=u.onClose,F=u.onSave,A=f.__assign(f.__assign(f.__assign({},t.default.common),t.default.manageLicenses),t.default.manageLicenses.ProSettings),y=(0,h.useRef)(null),z=(0,h.useRef)(null);u=(0,h.useState)(r);var B=u[0],C=u[1];u=(0,h.useState)(-1===w?w:w/60/24);var H=u[0],E=u[1];u=(0,h.useState)(15<x?15:x);var K=u[0],I=u[1],L=q.default.init(D,
!0);D=D.getHelpUrl("120003910");u=B&&-1<H;var M=B&&-1===H;return(0,c.h)(c.Fragment,null,(0,d.createPortal)((0,c.h)("calcite-modal",{role:"dialog","aria-modal":"true","aria-labelledby":"manage-pro-settings-title",outsideCloseDisabled:!0,oncalciteModalClose:g,open:k,style:{"--calcite-modal-width":"588px"}},(0,c.h)("h2",{slot:"header",class:"manage-pro-offline__heading trailer-0",id:"manage-pro-settings-title"},A.manage),(0,c.h)("div",{slot:"content"},(0,c.h)("h2",{class:"font-size--2 avenir-demi trailer-0"},
A.offlineSettings),(0,c.h)("p",{class:"font-size--2 trailer-quarter"},A.applicableProVersion),e.default.proOfflineDurationEnabled?(0,c.h)("div",null,(0,c.h)("div",{class:"pro-offline-option flex ".concat(M?"pro-offline-option--checked":""),onClick:function(){l("dynamicOffline")}},(0,c.h)("calcite-label",{layout:"inline"},(0,c.h)("calcite-radio-button",{checked:M,value:"dynamicOffline",class:"margin-right-quarter"}),(0,c.h)("span",{class:"".concat(M?"avenir-demi":"")},A.dynamicOfflineOption)),(0,c.h)("calcite-button",
{id:"dynamic-offline-info-button",class:"margin-left-quarter pro-offline__info-button",iconStart:"information",appearance:"transparent",kind:"neutral",round:!0,scale:"s",onClick:function(N){N.stopPropagation()},label:A.dynamicOfflineTooltip}),(0,c.h)("calcite-tooltip",{label:A.dynamicOfflineTooltip,referenceElement:"dynamic-offline-info-button",overlayPositioning:"fixed"},(0,c.h)("span",null,A.dynamicOfflineTooltip))),(0,c.h)("div",{class:"pro-offline-option ".concat(u?"pro-offline-option--checked":
""),onClick:function(){l("limitedOffline")}},(0,c.h)("div",{class:"flex"},(0,c.h)("calcite-label",{layout:"inline"},(0,c.h)("calcite-radio-button",{checked:u,value:"limitedOffline",class:"margin-right-quarter"}),(0,c.h)("span",{class:"".concat(u?"avenir-demi":"")},A.limitedOfflineOption)),(0,c.h)("calcite-button",{id:"limited-offline-info-button",label:A.limitedOfflineTooltip,class:"margin-left-quarter pro-offline__info-button",iconStart:"information",appearance:"transparent",kind:"neutral",round:!0,
scale:"s",onClick:function(N){N.stopPropagation()}}),(0,c.h)("calcite-tooltip",{label:A.limitedOfflineTooltip,referenceElement:"limited-offline-info-button"},(0,c.h)("span",null,A.limitedOfflineTooltip))),(0,c.h)("div",{class:"flex flex-align-center pro-offline-option__content font-size--1 ".concat(u?"":"hide")},(0,c.h)("div",{class:"flex-1 margin-right-2"},(0,c.h)("div",{class:"font-size--2"},A.numOfflineDays)),(0,c.h)("div",null,(0,c.h)("calcite-input",{label:"".concat(A.numOfflineDays," ").concat(H),
ref:z,class:"pro-offline__number-input",type:"number",value:"".concat(H),min:1,max:2E3,oncalciteInputChange:v,onClick:function(N){N.stopPropagation()}})))),(0,c.h)("div",{class:"pro-offline-option ".concat(B?"":"pro-offline-option--checked"),onClick:function(){l("noOffline")}},(0,c.h)("calcite-label",{layout:"inline"},(0,c.h)("calcite-radio-button",{checked:!B,value:"noOffline",class:"margin-right-quarter"}),(0,c.h)("span",{class:"".concat(B?"":"avenir-demi")},A.noOfflineOption)))):(0,c.h)("div",
{class:"pro-switch-container"},(0,c.h)("calcite-label",null,(0,c.h)("div",{class:"flex flex-align-center"},(0,c.h)("div",{class:"flex-1 font-size-0"},A.disableProOffline),(0,c.h)("calcite-switch",{scale:"l",checked:!B,oncalciteSwitchChange:p})))),(0,c.h)("h2",{class:"font-size--2 avenir-demi trailer-quarter leader-1"},A.licenseExpTitle),(0,c.h)("p",{class:"trailer-half font-size--2"},A.licenseExpDesc," ",(0,c.h)("calcite-link",{href:D,target:"_blank",class:"margin-left-quarter"},A.licenseExpLearnMore)),
(0,c.h)("div",{class:"flex flex-align-center pro-switch-container"},(0,c.h)("div",{class:"flex-1 margin-right-2"},(0,c.h)("div",{class:"font-size--2"},A.daysToWarnLabel),(0,c.h)("div",{class:"pro-offline__sub-label"},A.daysRange.replace("${min}","1").replace("${max}","".concat(15)))),(0,c.h)("div",null,(0,c.h)("calcite-input",{ref:y,class:"pro-offline__number-input",type:"number",value:"".concat(K),min:1,max:15,oncalciteInputChange:function(N){N=m(N.target.value,15);y.current.value=N;I(+N)}}))),(0,c.h)("button",
{class:"btn-link flex flex-align-center leader-1 font-size--2",onClick:function(){C(!0);E(-1);I(15)}},(0,c.h)("calcite-icon",{icon:"refresh",class:"margin-right-half"}),A.restoreDefaults)),(0,c.h)("calcite-button",{slot:"secondary",appearance:"outline",width:"full",onClick:g},A.cancel),(0,c.h)("calcite-button",{slot:"primary",appearance:"solid",width:"full",onClick:function(){return f.__awaiter(this,void 0,void 0,function(){var N;return f.__generator(this,function(P){switch(P.label){case 0:return P.trys.push([0,
3,,4]),N=0<H&&B?1440*H:-1,[4,(0,b.setDisconnectSettings)(n,B,N)];case 1:return P.sent(),[4,(0,b.setLicenseExpiry)(n,K)];case 2:return P.sent(),a.default.showAlert("success",A.success),F(B,K,N),null===L||void 0===L?void 0:L.logEvent({category:"org licenses",action:"save",label:"pro expiration setting",number:K}),[3,4];case 3:return P.sent(),a.default.showAlert("error",A.error),G(),[3,4];case 4:return[2]}})})}},A.save)),document.body))}})},"arcgisonline/pages/organization/widgets/onboard/OnboardPopup":function(){define("require exports tslib dojo/query dojo/Evented dojo/text!./templates/OnboardPopup.html dojo/i18n!../../../../nls/arcgisonline dijit/_TemplatedMixin dijit/_WidgetBase ../../../utils/icons ../../../utils/dom ../../../utils/focus ../../../../tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);return function(){function m(v,p){this.i18n=b.default;this.templateString=d.default;this.icons=q.default;this.doneButtonText=b.default.myOrganization.onboarding.done;this._currentIndex=0}m.prototype.postCreate=function(){var v=this;if(1<
this.items.length){var p="";this.items.forEach(function(n,k){p+='\x3cbutton data-index\x3d"'.concat(k,'" class\x3d"btn-link margin-right-half onboard__toggle-btn js-toggle-btn js-toggle-btn-').concat(k,'"\x3e\x3c/div\x3e')});this._toggleContainer.insertAdjacentHTML("afterbegin",p);t.default.hideNode(this._doneButton);t.default.showNode(this._nextButton)}else t.default.hideNode(this._nextButton),t.default.showNode(this._doneButton);this._addEventListeners();this._render();var l=document.createElement("div");
document.body.appendChild(l);l.appendChild(this.domNode);setTimeout(function(){v.domNode.classList.add("shown");v._nextButton.focus();u.default.trapFocus(v.domNode)})};m.prototype._addEventListeners=function(){var v=this;this._doneButton.addEventListener("click",function(){v._close()});this._closeButton.addEventListener("click",function(){v._close()});this._nextButton.addEventListener("click",function(){v._currentIndex++;v._render()});this._backButton.addEventListener("click",function(){v._currentIndex--;
v._render()});(0,c.default)(".js-toggle-btn",this.domNode).on("click",function(p){p=p.target.dataset.index;v._currentIndex!==+p&&(v._currentIndex=+p,v._render())})};m.prototype._close=function(){var v=this;this.domNode.classList.remove("shown");this.emit("close");setTimeout(function(){v.destroy()},300)};m.prototype._render=function(){var v=this.items[this._currentIndex];this._titleText.textContent=v.title;this._descriptionText.innerHTML=v.description;this._img.src="js/arcgisonline/img/".concat(v.imgSrc);
1<this.items.length&&((0,c.default)(".onboard__toggle-btn--active",this.domNode).removeClass("onboard__toggle-btn--active"),this.domNode.querySelector(".js-toggle-btn-".concat(this._currentIndex)).classList.add("onboard__toggle-btn--active"),this._currentIndex===this.items.length-1?(t.default.hideNode(this._nextButton),t.default.showNode(this._doneButton),this._doneButton.focus()):(t.default.showNode(this._nextButton),t.default.hideNode(this._doneButton),this._nextButton.focus()),0!==this._currentIndex?
t.default.showNode(this._backButton):t.default.hideNode(this._backButton))};return m=f.__decorate([(0,g.default)(e.default,a.default,h.default)],m)}()})},"arcgisonline/pages/organization/widgets/MobileMenu":function(){define("require exports tslib esri/Evented dojo/on dojo/text!./templates/MobileMenu.html dojo/i18n!../../../nls/arcgisonline dijit/_TemplatedMixin dijit/_WidgetBase arcgisonline/pages/utils/icons arcgisonline/pages/utils/dom ./MobileMenuItem arcgisonline/tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);return function(){function m(v,p){this.templateString=d.default;this.icons=q.default;this.i18n=b.default}m.prototype.postCreate=function(){this.inherited(arguments);this.render();this.addEventListeners()};m.prototype.render=function(){var v=
this;this.items=this.configs.map(function(p){p.selected&&(v.titleEl.textContent=p.name);p=new u.default(p);v.own((0,h.default)(p,"select",v.handleItemSelect.bind(v)));return p});t.default.appendChildren(this.items.map(function(p){return p.domNode}),this.navContent)};m.prototype.addEventListeners=function(){var v=this;this.own((0,h.default)(this.titleBtn,"click",function(){v.menuContainer.classList.add("is-active")}),(0,h.default)(this.closeBtn,"click",function(){v.menuContainer.classList.remove("is-active")}))};
m.prototype.handleItemSelect=function(v){this.titleEl.textContent=v;this.items.forEach(function(p){p.name===v?p.select():p.deselect()});this.menuContainer.classList.remove("is-active");this.emit("select",v)};return m=f.__decorate([(0,g.default)(e.default,a.default,c.default)],m)}()})},"arcgisonline/pages/organization/widgets/MobileMenuItem":function(){define("require exports tslib esri/Evented dojo/on dojo/text!./templates/MobileMenuItem.html dijit/_TemplatedMixin dijit/_WidgetBase arcgisonline/tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);return function(){function q(t,u){this.templateString=d.default;this.name="";this.selected=!1}q.prototype.postCreate=function(){var t=this;this.inherited(arguments);this.selected&&this.select();this.own((0,h.default)(this.domNode,"click",function(){t.emit("select",t.name)}))};q.prototype.select=function(){this.domNode.classList.add("is-active");
this.domNode.setAttribute("aria-selected","true")};q.prototype.deselect=function(){this.domNode.classList.remove("is-active");this.domNode.setAttribute("aria-selected","false")};return q=f.__decorate([(0,e.default)(a.default,b.default,c.default)],q)}()})},"arcgisonline/sharing/dijit/dialog/ImportProductLicensesDlg":function(){define("require exports tslib ../../../esriGeowConfig ../../../pages/pageUtil ../../../pages/utils/dom ../../../pages/utils/validation ../../util ../../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/a11yclick ./ConfirmDialog dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/i18n!../../../nls/arcgisonline dojo/on dojo/text!./templates/ImportProductLicensesDlg.html dojo/topic".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);return function(){function x(){this.baseClass=
"esriBatchAssignToGroups";this.templateString=r.default;this.widgetsInTemplate=!0;this.i18n=f.__assign(f.__assign(f.__assign({},n.default.common),n.default.manageLicenses.importLicenses),n.default.importProductLicensesDlg);this._validLicense=!1}x.prototype.postCreate=function(){this.inherited(arguments);this._configureLicenseBaseUrl();this._initUI()};x.prototype.show=function(){this._dialog.show()};x.prototype.hide=function(){this._dialog.hide()};x.prototype._initUI=function(){var D;null===(D=this._dialog.domNode.querySelector(".dijitDialogCloseIcon"))||
void 0===D?void 0:D.setAttribute("tabindex","0");this._initHandlers();this._initHelpLink()};x.prototype._initHandlers=function(){this.own((0,g.default)(this._importBtn,this._importClick.bind(this)),(0,k.default)(this._file,"change",this._fileChange.bind(this)),(0,g.default)(this._closeBtn,this.hide.bind(this)),(0,g.default)(this._okBtn,this.hide.bind(this)))};x.prototype._initHelpLink=function(){var D,G,F,A,y,z=this._dialog.titleNode;if(c.default.self&&z){var B=null!==(F=null===(G=null===(D=c.default.self)||
void 0===D?void 0:D.helpMap)||void 0===G?void 0:G.m)&&void 0!==F?F:{};D="".concat(null===(A=c.default.self)||void 0===A?void 0:A.helpBase).concat(null!==(y=B["120001575"])&&void 0!==y?y:"");A=p.default.create("a",{className:"icon-ui-question margin-left-half font-size--1 help-icon",href:D,target:"_blank",title:this.i18n.importLearnMore});p.default.place(A,z,"last")}};x.prototype._configureLicenseBaseUrl=function(){this._licenseBaseUrl=a.default.formatPortalOrgUrl(a.default.getPortalAdminBaseUrl(),
"/license",c.default.portal.id)};x.prototype._validateLicense=function(){return a.default.request({url:"".concat(this._licenseBaseUrl,"/validateLicense"),form:this._licenseFileForm},{usePost:!0})};x.prototype._importLicense=function(){return a.default.request({url:"".concat(this._licenseBaseUrl,"/importLicense"),form:this._licenseFileForm},{usePost:!0})};x.prototype._fileChange=function(D){var G=this;D&&(D.stopPropagation(),D.preventDefault());b.default.clearState([this._file,this._fileError]);this._validLicense=
!1;0<this._file.files.length&&this._validateLicense().then(function(F){var A;F&&!F.code?(G._validLicense=!0,b.default.setValidState(G._file)):(F=null!==(A=F.code&&F.message)&&void 0!==A?A:G.i18n.invalidLicense,b.default.setInvalidState(G._file,G._fileError,F))},function(F){var A;F=null!==(A=F.code&&F.message)&&void 0!==A?A:G.i18n.invalidLicense;b.default.setInvalidState(G._file,G._fileError,F)})};x.prototype._importClick=function(){var D=this;if(this._validates()){var G=h.default.createSpecifiedDialog(m.default,
{className:"import-license-warning-dialog"});G.show({title:this.i18n.importLicenses,message:this.i18n.importWarning}).then(function(F){"onOk"===F&&(D._setImporting(!0),D._importLicense().then(function(A){A&&!A.code?a.default.request({url:D._licenseBaseUrl}).then(function(y){var z;y=null===(z=y.licenseManagerInfo)||void 0===z?void 0:z.hostname;D._setImporting(!1);D._showMessage(!0,D.i18n.importSuccess,y);w.default.publish("licenses/import",{reload:!0})}):(D._setImporting(!1),D._validLicense=!1,D._showMessage(!1,
D.i18n.importError))},function(A){D._setImporting(!1);D._validLicense=!1;D._showMessage(!1,D.i18n.importError)}));G.hide()})}};x.prototype._validates=function(){return 0===this._file.files.length?(b.default.setInvalidState(this._file,this._fileError,this.i18n.fileError),!1):this._validLicense};x.prototype._showMessage=function(D,G,F){l.default.set(this._importContainer,"display","none");D?p.default.create("img",{class:"status-image",src:a.default.relativeToExplicitUrl("js/arcgisonline/img/toast-icons/Success32.svg"),
alt:this.i18n.success},this._resultIcon,"only"):p.default.create("img",{class:"status-image",src:a.default.relativeToExplicitUrl("js/arcgisonline/img/toast-icons/Error32.svg"),alt:this.i18n.errorTitle},this._resultIcon,"only");v.default.set(this._resultMessage,"innerHTML",G);l.default.set(this._resultContainer,"display","");d.default.showHide(this._licenseManagerWarning,F);this._dialog.domNode.classList[F?"add":"remove"]("import-license-manager-warning")};x.prototype._setImporting=function(D){d.default.disableNode(this._importBtn,
D);v.default.set(this._importBtn,"innerHTML",this.i18n[D?"importingLabel":"importLabel"])};return x=f.__decorate([(0,e.default)(t.default,q.default,u.default)],x)}()})},"arcgisonline/pages/organization/widgets/OrgExtensionCard":function(){define("require exports tslib dojo/string dojo/text!./templates/licenses/OrgExtensionCard.html dojo/i18n!../../../nls/arcgisonline dojo/i18n!../../../nls/organization dijit/_TemplatedMixin dijit/_WidgetBase arcgisonline/pages/dijit/InfoTooltip arcgisonline/pages/utils/organization arcgisonline/pages/organization/widgets/LicenseExpirationBadge arcgisonline/pages/utils/dom arcgisonline/pages/components/LicenseNotAvailableBadge arcgisonline/tsutils/declareDecorator preact".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);return function(){function l(n,k){this.templateString=h.default;this.i18n=f.__assign(f.__assign(f.__assign({},d.default.common),d.default.myOrganization.licensesTab),b.default.orgExtensions);
this.notAvailableId=""}l.prototype.postMixInProperties=function(){this.inherited(arguments);this.capability&&(this.notAvailableId="not-available-ext-".concat(this.capability.id))};l.prototype.postCreate=function(){this.inherited(arguments);this.render()};l.prototype.renderIndoorsExtension=function(n,k){this.iconImg.src="".concat(t.default.getAppIconDir(),"indoor.png");this.nameEl.textContent=n;k&&(this.descriptionEl.textContent=k,g.default.showNode(this.descriptionEl))};l.prototype.render=function(){var n=
this,k,r;if(this.feature){var w="esriServerNoteBooksStandard"===this.feature.name||"esriServerNoteBooksAdvanced"===this.feature.name;this.iconImg.src="".concat(t.default.getAppIconDir()).concat(w?"arcgis-notebook-services.png":"user-type-extension-online.png");"esriServerImg"===this.feature.name?(this.nameEl.textContent="ArcGIS Image Services",this.descriptionEl.textContent=this.i18n.imageServiceDescription,g.default.showNode(this.descriptionEl)):"esriServerRasterAnalytics"===this.feature.name?(this.nameEl.textContent=
"ArcGIS Raster Analytics",this.descriptionEl.textContent=this.i18n.rasterAnalyticsDescription,g.default.showNode(this.descriptionEl)):"esriServerNoteBooksStandard"===this.feature.name?(this.nameEl.textContent="ArcGIS Notebook Services",this.descriptionEl.textContent=this.i18n.notebookServicesStandardDescription,g.default.showNode(this.descriptionEl)):"esriServerNoteBooksAdvanced"===this.feature.name&&(this.nameEl.textContent="ArcGIS Notebook Services Advanced",this.descriptionEl.textContent=this.i18n.notebookServicesAdvancedDescription,
g.default.showNode(this.descriptionEl));this.feature.expiration&&(w=this.feature.expiration,new u.default({portal:this.portal,expiration:w,total:999,used:0},this.domNode.querySelector(".js-expiration")),g.default.showNode(this.compatibleContainer))}else{if("indoors"===this.capability.id)this.renderIndoorsExtension("ArcGIS Indoors"),g.default.hideNode(this.analyticsIoTInfo);else if("indoorsmaps"===this.capability.id)this.renderIndoorsExtension("ArcGIS Indoors Maps",this.i18n.indoorsMapsDescription);
else if("indoorsspaces"===this.capability.id)this.renderIndoorsExtension("ArcGIS Indoors Spaces",this.i18n.indoorsSpacesDescription);else if("ips"===this.capability.id)this.iconImg.src="".concat(t.default.getAppIconDir(),"ips.png"),this.nameEl.textContent="ArcGIS IPS",this.descriptionEl.textContent=this.i18n.ipsDescription,g.default.showNode(this.descriptionEl);else if("velocity"===this.capability.id)this.iconImg.src="".concat(t.default.getAppIconDir(),"analytics-for-iot.png"),this.nameEl.textContent=
"".concat(this.i18n.arcgisAnalyticsIoT," ").concat(this.capability.level),this.computeUnits.textContent="".concat(this.capability.computeUnits),this.storageUnits.textContent="".concat(this.capability.storageUnits),this.itemUnits.textContent="".concat(null!==(k=this.capability.itemUnits)&&void 0!==k?k:0),k=this.capability.level.toLowerCase(),"standard"===k?g.default.hideNodes([this.computeSection,this.storageSection,this.itemSection]):"dedicated"===k?g.default.hideNode(this.itemSection):"advanced"===
k&&g.default.hideNode(this.computeSection),new q.default({title:"",content:this.i18n.computeUnitsTooltip},this.domNode.querySelector(".js-compute-info")),new q.default({title:"",content:this.i18n.storageUnitsTooltip},this.domNode.querySelector(".js-storage-info")),new q.default({title:"",content:this.i18n.itemUnitsTooltip},this.domNode.querySelector(".js-item-info")),this.regionValue.textContent=c.default.substitute(this.i18n.regionValue,{name:d.default.countryCodes[this.capability.region],code:this.capability.region}),
g.default.showNode(this.analyticsIoTInfo);else if("liveTraffic"===this.capability.id)this.iconContainer.parentElement.removeChild(this.iconContainer),this.nameEl.textContent=this.i18n.liveTraffic,k='\x3ca href\x3d"https://links.esri.com/agol-help/streetmap-premium/live-traffic" target\x3d"_blank"\x3e'.concat(this.i18n.learnMore,"\x3c/a\x3e"),this.descriptionEl.innerHTML="".concat(this.i18n.liveTrafficDesc," ").concat(k),g.default.showNode(this.descriptionEl);else if("workfloworg"===this.capability.id||
"workflowstd"===this.capability.id)this.iconImg.src="".concat(t.default.getAppIconDir(),"workflow-manager.png"),k="workflowstd"===this.capability.id,this.nameEl.textContent="ArcGIS Workflow Manager ".concat(k?"Standard":"Advanced"),this.descriptionEl.innerHTML=k?this.i18n.workflowStdDesc:this.i18n.workflowAdvDesc,g.default.showNode(this.descriptionEl);k=null===(r=null===(w=t.default.licensesConfig)||void 0===w?void 0:w.orgCapabilities)||void 0===r?void 0:r.filter(function(x){return x.entitlement===
n.capability.id})[0];if(this.portal.isKubernetes()&&"false"===(null===k||void 0===k?void 0:k.supportsKubernetes))g.default.showNode(this.compatibleContainer),(0,p.render)((0,p.h)(m.default,{buttonId:this.notAvailableId}),this.notAvailableKubernetes);else if(this.capability.expiration||this.capability.endDate)w=this.capability.expiration||this.capability.endDate,new u.default({portal:this.portal,expiration:w,showTime:!this.portal.isPortal,total:999,used:0},this.domNode.querySelector(".js-expiration")),
g.default.showNode(this.compatibleContainer)}};l.prototype.matchSearch=function(n){n=n.toLowerCase();var k=this.nameEl.textContent.toLowerCase(),r=this.descriptionEl.textContent.toLowerCase();return k.includes(n)||r.includes(n)};l.prototype.show=function(){g.default.showNode(this.domNode)};l.prototype.hide=function(){g.default.hideNode(this.domNode)};return l=f.__decorate([(0,v.default)(e.default,a.default)],l)}()})},"arcgisonline/pages/organization/widgets/_members":function(){define("require exports tslib esri/lang dojo/query dojo/on dojo/topic dojo/Deferred dojo/string dojo/i18n!../../../nls/arcgisonline dojo/i18n!../../../nls/organization dojo/text!./templates/members/controlBarActions.html dojo/text!./templates/members/tableHead.html dojo/text!./templates/members/tableRow.html dojo/text!./templates/members/empty.html dojo/text!./templates/members/none.html dojo/text!./templates/members/mobileInviteOptions.html dojo/text!./templates/_members.html dijit/_WidgetBase dijit/_TemplatedMixin dijit/Tooltip arcgisonline/esriGeowConfig arcgisonline/sharing/dijit/_LevelAwareMixin arcgisonline/sharing/util arcgisonline/sharing/geow/Roles arcgisonline/sharing/geow/Account arcgisonline/sharing/geow/Licenses ../../_filterStateMixin ../../pageUtil ../../utils/alerts ../../utils/categories ../../portal/PortalUser ../../components/Collaborations/collab-service ../../utils/arrays ../../utils/dom ../../utils/icons ../../utils/number ../../utils/organization ../../utils/promises ../../utils/timeout ../../dijit/FilterStatus ../../dijit/View ../../dijit/Pagination ../../dijit/ControlBar ../../dijit/SelectedMembers ../../dijit/InviteMembers/MobileError ../../dijit/_CheckReadonlyMixin ./MemberTableRow ./MemberCard ./MemberMobile ./MembersFilter ./PendingMembers/PendingMembers ./AssignGroupsOverlay/AssignGroupsOverlay ./TransferItemsOverlay ./SetCreditsOverlay/SetCreditsOverlay ./onboard/OnboardBanner ./onboard/OnboardPopup ../_OrganizationActions preact arcgisonline/pages/components/MemberCategories/CategorizeMembersModal/CategorizeMembersModal arcgisonline/pages/components/EmailVerification/EditEmailModal arcgisonline/pages/components/MemberCategories/api arcgisonline/pages/components/MemberCategories/helpers arcgisonline/pages/components/DeleteMembers/DeleteMembersModal arcgisonline/tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E,K,I,L,M,N,P,R,Y,ja,aa,da,ra,ca,fa,la,ta,Q,T,O,Z,na,ia,X,ha,V,ea,U,ka,ma,sa,pa,Aa,za){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);
k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);D=f.__importDefault(D);G=f.__importDefault(G);F=f.__importDefault(F);A=f.__importDefault(A);y=f.__importDefault(y);z=f.__importDefault(z);B=f.__importDefault(B);C=f.__importDefault(C);H=f.__importDefault(H);E=f.__importDefault(E);K=f.__importDefault(K);I=f.__importDefault(I);L=f.__importDefault(L);M=f.__importDefault(M);N=f.__importDefault(N);P=f.__importDefault(P);R=f.__importDefault(R);ja=f.__importDefault(ja);
aa=f.__importDefault(aa);da=f.__importDefault(da);ra=f.__importDefault(ra);ca=f.__importDefault(ca);fa=f.__importDefault(fa);la=f.__importDefault(la);ta=f.__importDefault(ta);Q=f.__importDefault(Q);T=f.__importDefault(T);O=f.__importDefault(O);Z=f.__importDefault(Z);na=f.__importDefault(na);ia=f.__importDefault(ia);X=f.__importDefault(X);ha=f.__importDefault(ha);V=f.__importDefault(V);ea=f.__importDefault(ea);ka=f.__importDefault(ka);ma=f.__importDefault(ma);Aa=f.__importDefault(Aa);za=f.__importDefault(za);
return function(){function Ba(){this.templateString=n.default;this.icons=M.default;this.members=[];this.userTypes=[];this.selection=[];this.searchTerm="";this.firstLoad=!0;this.firstLoadDone=!1;this.initialNum=60;this.totalMembers=0;this.filterState={};this.selectionLimit=100;this.initialView="table";this.initialStart=1;this.hasMultipleAdminType=!1;this.pendingCount=0;this.focusAfterBatchAssign=!1;this.collabCoordinators=[];this.memberCategories=[]}Ba.prototype.postMixInProperties=function(){this.inherited(arguments);
var ua=this.i18n=f.__assign(f.__assign(f.__assign(f.__assign(f.__assign({},q.default.items),q.default.contentPage),q.default.myOrganization),q.default.memberCategories),{GroupWidget:q.default.GroupWidget,filters:q.default.filters}),Fa=ua.membersTab;ua=ua.currentGrid;this._page={start:1,num:60,total:0,nextStart:-1};this._sort={property:"lastlogin",label:ua.lastLogin,ascending:!1};this._sortOptions=[{property:"fullname",label:Fa.memberName,ascending:!0},{property:"lastlogin",label:ua.lastLogin,ascending:!1,
active:!0}];this.handleCloseCategorizeModal=this.handleCloseCategorizeModal.bind(this);this.handleCategorizeDone=this.handleCategorizeDone.bind(this)};Ba.prototype.postCreate=function(){this.inherited(arguments);var ua=new a.default,Fa=this.portalUser.userRole;this.isAdmin=Fa.isAdmin();this.isPortal=this.portal.isPortal;this.canManageLicenses=this.isAdmin||Fa.canManageLicenses();this.canManageUserTypes=this.isAdmin||Fa.canChangeUserRoles()&&Fa.canManageLicenses();this.canManageSecurity=this.isAdmin||
Fa.canManageSecurity();this.canViewUsers=this.isAdmin||Fa.canViewUsers();this.canViewLastLogin=P.default.canViewLastLogin(this.portalUser);this.rolesAPI=new F.default;this.licensesAPI=new y.default;this.portal.getOIDCId();this.getTotalMembers();document.documentElement.classList.add("view-background");this._applyQueryParameters();this.initialNum&&(this._page.num=this.initialNum);return ua};Ba.prototype.startup=function(){var ua=this;this.inherited(arguments);this.canViewLastLogin||(this._sortOptions=
this._sortOptions.filter(function(Fa){return"lastlogin"!==Fa.property}),this._sort=this._sortOptions[0],this._sort.active=!0);P.default.shouldShowMFA.call(P.default,this.portal,this.portalUser)&&this._sortOptions.push({property:"mfaenabled",label:this.i18n.membersTab.multiFactorAuth,ascending:!1});this.getMemberCategories();return this.rolesAPI.getAllRoles(!0).then(function(Fa){Fa.forEach(function(va){va.id===ua.SYSTEM_ROLES.VIEWER&&(va.name=ua.i18n.formatters.roleViewer,ua.portal.viewerRole=va);
va.id===ua.SYSTEM_ROLES.DATA_EDITOR&&(va.name=ua.i18n.formatters.roleViewerEdit,ua.portal.viewerEditRole=va);va.id===ua.SYSTEM_ROLES.FACILITATOR&&(va.name=ua.i18n.formatters.roleFacilitator,ua.portal.facilitatorRole=va)});Fa=f.__spreadArray(f.__spreadArray([],Fa,!0),[{id:"org_publisher",name:ua.i18n.formatters.rolePublisher},{id:"org_admin",name:ua.i18n.formatters.roleAdmin},{id:"org_user",name:ua.i18n.formatters.roleUser}],!1);Fa.sort(function(va,xa){va=va.name.toLowerCase();xa=xa.name.toLowerCase();
return va>xa?1:va<xa?-1:0});Fa.forEach(function(va){va.id===ua.SYSTEM_ROLES.VIEWER&&(va.name=ua.i18n.formatters.roleViewer,ua.portal.viewerRole=ua.viewerRole=va);va.id===ua.SYSTEM_ROLES.DATA_EDITOR&&(va.name=ua.i18n.formatters.roleViewerEdit,ua.portal.viewerEditRole=ua.viewerEditRole=va);va.id===ua.SYSTEM_ROLES.FACILITATOR&&(va.name=ua.i18n.formatters.roleFacilitator,ua.portal.facilitatorRole=ua.facilitatorRole=va)});ua.customRoles=Fa;ua.portal.roles=Fa.map(function(va){return{id:va.id,name:va.name,
privileges:va.privileges}});return P.default.initLicensesConfig.call(P.default,ua.portal)}).then(this.initUI.bind(this)).then(function(){return K.default.getCoordinators(!0).then(function(Fa){ua.collabCoordinators=(null===Fa||void 0===Fa?void 0:Fa.users)||[]})}).then(function(){var Fa=ua._controlBar.domNode.querySelector(".js-invite-btn");ua.isPortal&&Fa&&(Fa.textContent=ua.i18n.invitePortalUsersLabel);ua._applyFilters();return ua.getMembers()}).then(function(Fa){ua.refreshPendingMembers();ua.updateState(Fa);
ua.updateView(Fa);return Fa})};Ba.prototype.destroy=function(){this.inherited(arguments);document.documentElement.classList.remove("view-background");this.reset();this.creditsTooltip&&this.creditsTooltip.destroy()};Ba.prototype.reset=function(){var ua=this;Object.keys(this.filterState).forEach(function(Fa){ua.filterState[Fa]=!1});this.selection=[];this.searchTerm="";this._sortOptions=[{property:"fullname",label:this.i18n.membersTab.memberName,ascending:!0},{property:"lastlogin",label:this.i18n.currentGrid.lastLogin,
ascending:!1,active:!0},{property:"level",label:this.i18n.currentGrid.memberLevel,ascending:!1}]};Ba.prototype.getMemberCategories=function(){return f.__awaiter(this,void 0,void 0,function(){var ua,Fa,va;return f.__generator(this,function(xa){switch(xa.label){case 0:return ua=this,[4,(0,sa.getMemberCategories)()];case 1:return ua.memberCategories=xa.sent(),(null===(Fa=this.memberCategories)||void 0===Fa?0:Fa.length)&&(this.isAdmin||(null===(va=this.portalUser.userRole)||void 0===va?0:va.canUpdateUsers()))||
L.default.hideNode(this.categorizeBtn),[2]}})})};Ba.prototype.initUI=function(){var ua=this,Fa,va,xa={select:!0,sortOptions:this._sortOptions,emptyView:v.default,noneView:p.default,tableHead:g.default,tableRow:m.default,tableRowView:ta.default,listView:Q.default,mobileView:T.default,portalUser:this.portalUser,portal:this.portal,location:this.i18n.searchingFor,telemetry:this.telemetry,recordSortToggle:!0,recordSelection:!0},Da={search:{placeholder:this.i18n.membersTab.searchMembers,searchTerm:"",generateErrorMessage:P.default.generateSearchErrorMessage},
views:{activeView:this.initialView,views:["table","list"]},sort:this._sortOptions,telemetry:this.telemetry,telemetryOptions:{search:!0,viewToggle:!0,sortOrderToggle:!0,filterToggle:!0},filterContainer:this.domNode.querySelector(".js-filter-wrap"),viewContainer:this.domNode.querySelector(".js-view-wrap")};if(null===(Fa=this.portalUser.userRole)||void 0===Fa?0:Fa.canInviteUsers())Da.actions=u.default,Da.hideMobileActions=!1;!this.isPortal&&(null===(va=this.portalUser)||void 0===va?0:va.canManageLicenses)&&
P.default.shouldShowOnboard("membersOnboardBanner")&&(this.onboardBanner=new ha.default({bannerText:this.i18n.onboarding.membersLicenses,cookieKey:"membersOnboardBanner"},this.domNode.querySelector(".js-onboard-banner")));this.filterStatus=new ja.default({},this.domNode.querySelector(".js-filter-status"));this._pagination=new da.default({start:this.initialStart,num:this._page.num,pageSizeLabel:this.i18n.paginationPerPageMembers,telemetry:this.telemetry},this.domNode.querySelector(".js-pagination"));
this.view=new aa.default(xa,this.domNode.querySelector(".js-views"));this._controlBar=new ra.default(Da,this.domNode.querySelector(".js-control-bar"));this._controlBar.domNode.classList.add("org-members__control-bar");this.selectedMembers=new ca.default({members:this.selection,emitViewEvents:!0,alignLeft:!0,showSections:!1,allowRemovingAll:!0,telemetry:this.telemetry},this.domNode.querySelector(".js-selected-members"));this.inviteBtn=this.domNode.querySelector(".js-action-inviteMembers");this.addEventListeners();
this.updateSort();this.refreshPendingMembers();this.creditsTooltip=new w.default({connectId:["orgMembersCreditsColumnIcon"],label:"".concat(this.i18n.creditsCard.totalRemainingCredits,"\x3cbr /\x3e").concat(N.default.format(Math.round(100*this.portal.availableCredits)/100,2)),position:["above","below","before","after"]});var Ca=new a.default;return this.initMembersFilter().then(function(){ua.canManageLicenses?ua.getUserTypes().then(function(){Ca.resolve()},function(){Ca.resolve()}):Ca.resolve();return Ca})};
Ba.prototype.getUserTypes=function(){var ua=this;return this.licensesAPI.getLicenseTypes().then(function(Fa){ua.userTypes=Fa.userLicenseTypes;ua.hasMultipleAdminType=ua.userTypes.some(function(va){return va.level===ua.LICENSE_LEVELS.TWO});ua.inviteBtn&&(Fa=ua.userTypes.reduce(function(va,xa){return va+xa.maxUsers},0),ua.page.disableInvites=0===Fa||ua.page.isDeveloperAccount&&1===Fa,ua.inviteBtn.disabled=ua.page.disableInvites,Fa=ua.userTypes.every(function(va){return 0>=va.maxUsers-va.assigned}),
ua.page.noUserTypesAvailable=Fa)})};Ba.prototype.render=function(){var ua=this;this.firstLoadDone&&this.getMembers().then(function(Fa){ua.updateState(Fa);ua.updateView(Fa);b.default.publish("members/refreshed",ua.members)},function(){})};Ba.prototype.updateState=function(ua){var Fa=this,va;this.firstLoad&&(this.firstLoad=!1);this.firstLoadDone=!0;this._page.start=ua.start;this._page.total=ua.total;this._page.nextStart=ua.nextStart;this.members=this.parseMembers(ua.results);if(null===(va=this.selection)||
void 0===va?0:va.length)this.selection=this.selection.map(function(xa){var Da=Fa.members.find(function(Ca){return Ca.username===xa.username});return Da?Da:xa})};Ba.prototype.updateView=function(ua){var Fa=this,va=Object.keys(this.filterState).some(function(xa){return!!Fa.filterState[xa]});b.default.publish("view/update",this.members,this.selection,va||""!==this.searchTerm);this._pagination.render(ua);va=this._pagination.getCurrentPageObj();this.pageRange.textContent=B.default.getPageRangeString({start:0===
ua.total?0:va.start,end:va.end,total:va.total});this.roleChangeUser&&(b.default.publish("role/focus",this.roleChangeUser),this.roleChangeUser=void 0);void 0!==this.focusNeighbor?(ua=this.members[this.focusNeighbor],va={member:ua,isDropdown:!0},ua&&b.default.publish("member-action/focus",va)):this.focusAfterBatchAssign?("table"===this.view._view?this.domNode.querySelector(".js-select-all").focus():this.domNode.querySelectorAll(".js-card-select-check-mark")[0].focus(),this.focusAfterBatchAssign=!1):
this.focusMemberAction&&(b.default.publish("member-action/focus",this.focusMemberAction),this.focusMemberAction=void 0)};Ba.prototype.parseMembers=function(ua){var Fa=this,va=this.i18n.formatters;return ua.map(function(xa){var Da=new E.default(f.__assign(f.__assign({},xa),{portal:Fa.portal}));Da.thumbnailUrl&&Da.thumbnailUrl===Da.defaultThumbnailUrl&&(Da.thumbnailUrl="");xa=I.default.find(Fa.selection,function(qa){return qa.username===Da.username});Da.isSelected=!!xa;xa={org_publisher:va.rolePublisher,
org_admin:va.roleAdmin,org_user:va.roleUser};Da.licenseType=Fa.canViewUsers&&Fa.canManageLicenses&&Da.userLicenseTypeId?Fa.userTypes.filter(function(qa){return qa.id===Da.userLicenseTypeId})[0]||{name:""}:{name:""};Da.roleName=Da.roleLabel=xa[Da.role]?xa[Da.role]:Fa.getRoleLabel(Da.role);Da.id||(Da.id=Da.username);c.default.isDefined(Da.availableCredits)?Da.creditsRemainingLabel=-1===Da.availableCredits?Fa.i18n.membersTab.noLimit:e.default.substitute(Fa.i18n.membersTab.creditsRemainingText,{remain:N.default.format(Da.availableCredits===
Da.assignedCredits?Da.availableCredits:Math.floor(Da.availableCredits)),total:N.default.format(Da.assignedCredits)}):Da.creditsRemainingLabel="";Da.mfaImage="";if(Da.mfaEnabled&&Fa.portal.mfaEnabled&&Fa.canManageSecurity){xa=G.default.relativeToExplicitUrl("js/arcgisonline/sharing/dijit/css/images/check.png");var Ca=Fa.i18n.membersTab.multiFactorAuthEnabled;Da.mfaImage='\x3cimg src\x3d"'.concat(xa,'" class\x3d"mfa-img" alt\x3d"').concat(Ca,'" title\x3d"').concat(Ca,'"\x3e')}Da.licenses=[];Da.emptyAppIcon=
P.default.getEmptyAppIcon();Da.isSelf=Fa.portalUser.username===Da.username;Da.hasMultipleAdminTypes=Fa.hasMultipleAdminType;Da.watch=void 0;Da.appBundles||(Da.appBundles=[]);Da.page=Fa.page;Da.isCoordinator=Fa.collabCoordinators.some(function(qa){return qa.username===Da.username});return Da})};Ba.prototype.getRoleLabel=function(ua){var Fa,va=I.default.find(this.portal.roles,function(xa){return xa.id===ua});return null!==(Fa=null===va||void 0===va?void 0:va.name)&&void 0!==Fa?Fa:""};Ba.prototype.getTotalMembers=
function(){var ua=this;G.default.request({url:"".concat(x.default.restBaseUrl,"portals/self/users?start\x3d1\x26num\x3d0")}).then(function(Fa){var va,xa;ua.totalMembers=Fa.total;ua.page.totalMembers=ua.totalMembers;!ua.isPortal&&(ua.isAdmin||(null===(xa=null===(va=ua.portalUser)||void 0===va?void 0:va.userRole)||void 0===xa?0:xa.canInviteUsers()))?ua.refreshPendingMembers():ua.isPortal&&L.default.hideNodes(ua.domNode.querySelectorAll(".js-action-pendingMembers"))})};Ba.prototype.addEventListeners=
function(){var ua=this;this.own((0,h.default)(".js-deselect",this.domNode).on("click",this.deselectAll.bind(this)),b.default.subscribe("membersSearchBy/update",this.searchByUpdate.bind(this)),b.default.subscribe("filter/update",this.filterUpdate.bind(this)),b.default.subscribe("filter/clear",this.filterClear.bind(this)),b.default.subscribe("filter/remove",this.filterRemove.bind(this)),b.default.subscribe("sort/update",this.sortUpdate.bind(this)),b.default.subscribe("view/update",this.updateSelectedView.bind(this)),
b.default.subscribe("view/refresh",this.render.bind(this)),b.default.subscribe("view/select",this.viewSelect.bind(this)),b.default.subscribe("view/deselect",this.viewDeselect.bind(this)),b.default.subscribe("view/items/deselect",this.viewDeselectItem.bind(this)),b.default.subscribe("search/wait",this.searchWait.bind(this)),b.default.subscribe("search/update",this.searchUpdate.bind(this)),b.default.subscribe("pagination/page",this.paginationPage.bind(this)),b.default.subscribe("esriAccess/update",
this.refreshContent.bind(this)),b.default.subscribe("disable/update",this.refreshContent.bind(this)),b.default.subscribe("members/refresh",function(va){ua.refreshContent();va&&(ua.canManageLicenses&&ua.getUserTypes(),ua.getTotalMembers())}),b.default.subscribe("delete/update",this.refreshContent.bind(this)),b.default.subscribe("levelChange/update",this.refreshContent.bind(this)),b.default.subscribe("member-level/change",this.refreshContent.bind(this)),b.default.subscribe("disableMultiFactor/update",
this.refreshContent.bind(this)),b.default.subscribe("credits-change",this.refreshContent.bind(this)),b.default.subscribe("role/change",this.roleChange.bind(this)),b.default.subscribe("pending/refresh",this.refreshPendingMembers.bind(this)),b.default.subscribe("onboard-banner/learn-more",this.onboardLearnMoreClick.bind(this)),b.default.subscribe("manage-member/open",function(va){ua.manageMembersOpen=va}),b.default.subscribe("manage-members-batch/open",function(va){ua.manageMembersOpen={batch:!0,members:va.members,
button:"licenses"===va.action?ua.manageLicenses:ua.manageLicenseTypes}}),b.default.subscribe("manage-members/close",function(){ua.manageMembersOpen&&(ua.manageMembersOpen.batch?(ua.manageMembersOpen.button.focus(),ua.focusAfterBatchAssign=!0):(b.default.publish("member-action/focus",ua.manageMembersOpen),ua.focusMemberAction=ua.manageMembersOpen))}),b.default.subscribe("delete-members/done",function(va){var xa=-1;ua.members.forEach(function(Da,Ca){Da.username===va.username&&(xa=Ca)});-1!==xa&&(ua.focusNeighbor=
0===xa?1:xa-1)}),b.default.subscribe("disable-members-reasons/deselect",this.disableMembersDeselect.bind(this)),b.default.subscribe("manage-user-type-reasons/deselect",this.manageUserTypesDeselect.bind(this)),b.default.subscribe("manage-licenses/deselect",this.deselectNoAddonUserTypes.bind(this)),b.default.subscribe("categorySchema/updated",function(va){var xa;ua.memberCategories=va;L.default.showHide(ua.categorizeBtn,!(null===(xa=ua.memberCategories)||void 0===xa||!xa.length)&&ua.isAdmin)}),b.default.subscribe("member-categories-and-count/update",
function(va){var xa;ua.memberCategories=va.categories;L.default.showHide(ua.categorizeBtn,!(null===(xa=ua.memberCategories)||void 0===xa||!xa.length)&&ua.isAdmin)}),b.default.subscribe("member-categories/delete-all",function(){L.default.hideNode(ua.categorizeBtn)}),b.default.subscribe("categorize-member/open",function(va){ua.logMemberAction("categorize");ua.handleCategorizeClick([va])}),b.default.subscribe("edit-email/open",function(va){ua.logMemberAction("edit email");ua.handleEditEmailClick(va)}),
b.default.subscribe("members-bulk-action/telemetry",function(va){ua.logBulkAction(va)}),b.default.subscribe("member-action/telemetry",function(va){ua.logMemberAction(va)}),(0,d.default)(this.assignGroups,"click",this.handleAssignGroups.bind(this)),(0,d.default)(this.deleteMembers,"click",this.handleDeleteMembersClick.bind(this)),(0,d.default)(this.transferItems,"click",this.handleTransferItems.bind(this)),(0,d.default)(this.manageCredits,"click",this.handleManageCredits.bind(this)),(0,d.default)(this.categorizeBtn,
"click",function(){ua.logBulkAction("categorize");ua.handleCategorizeClick()}));var Fa=this._controlBar&&this._controlBar.domNode.querySelector(".js-mobile-invite-btn");Fa&&this.own((0,d.default)(Fa,"click",this.handleMobileInvite.bind(this)));B.default.registerItemActions(this,this.domNode,ea.default,this.page,this.actionGuard.bind(this))};Ba.prototype.initMembersFilter=function(){this.membersFilter=new O.default({portal:this.portal,userRole:this.portalUser.userRole,canViewLastLogin:this.canViewLastLogin,
baseClass:"org-filters filters--accordion"},this.domNode.querySelector(".js-members-filter"));return this.membersFilter.startup()};Ba.prototype.roleChange=function(ua){this.roleChangeUser=ua.user;this.refreshContent()};Ba.prototype.refreshContent=function(ua){this.selection=[];this.updateSelectedView();this.deselectAll();setTimeout(this.render.bind(this),ua?0:1E3)};Ba.prototype.viewSelect=function(ua){I.default.find(this.selection,function(Fa){return Fa.username===ua.username})||(ua.isSelected=!0,
this.selection.push(ua));this.updateSelectedView()};Ba.prototype.viewDeselect=function(ua){ua.isSelected=!1;this.selection=this.selection.filter(function(Fa){return Fa.username!==ua.username});this.updateSelectedView()};Ba.prototype.viewDeselectItem=function(ua){I.default.find(this.members,function(Fa){return Fa.username===ua.username})?b.default.publish("view/items/".concat(ua.id,"/deselect")):this.viewDeselect(ua)};Ba.prototype.filterClear=function(ua){var Fa=this;this._page.start=1;Object.keys(this.filterState).forEach(function(va){Fa.filterState[va]=
!1});this.render();0===(null===ua||void 0===ua?void 0:ua.clientX)&&0===ua.clientY&&this.rangeText.focus()};Ba.prototype.filterRemove=function(ua){var Fa;this.filterState[ua.param]=!1;this.render();0===(null===(Fa=null===ua||void 0===ua?void 0:ua.evt)||void 0===Fa?void 0:Fa.clientX)&&0===ua.evt.clientY&&(ua.lastFilter?this.rangeText.focus():this.filterStatus.clearAll.focus())};Ba.prototype.filterUpdate=function(ua){var Fa,va,xa;this._page.start=1;this.filterState[ua.param]=ua.selected;var Da=this.getActiveFilters();
if(null===(Fa=ua.selected)||void 0===Fa?0:Fa.length)null===(va=this.telemetry)||void 0===va?void 0:va.logEvent({category:"Filter",action:ua.param,label:null===(xa=ua.selected[0])||void 0===xa?void 0:xa.label,count:Da.length,attribute:Da.sort().join(",")});this.render()};Ba.prototype.sortUpdate=function(ua){this._page.start=1;this._sort.property=ua.property;this._sort.ascending=ua.ascending;this.render()};Ba.prototype.searchWait=function(ua){B.default.updateQueryParams({searchTerm:ua})};Ba.prototype.searchUpdate=
function(ua){this.searchTerm=ua;this._page.start=1;b.default.publish("view/loading",ua);this.render()};Ba.prototype.searchByUpdate=function(ua){0<this.searchTerm.length&&(b.default.publish("view/loading",this.searchTerm),this._page.start=1,this.render());B.default.updateQueryParams({searchBy:ua})};Ba.prototype.updateSort=function(){b.default.publish("sort/update",this._sort)};Ba.prototype.deselectAll=function(){this.selection=[];b.default.publish("view/deselectAll");this.updateSelectedView()};Ba.prototype.paginationPage=
function(ua){this._page.num=ua.num;this._page.start=ua.start;this.render()};Ba.prototype.updateSelectedView=function(){var ua=this;0<this.selection.length?(L.default.hideNodes(this.domNode.querySelectorAll(".hide-if-selected")),L.default.showNodes(this.domNode.querySelectorAll(".show-if-selected")),this.filterSelectedViewActions(this.selection)):(L.default.showNodes(this.domNode.querySelectorAll(".hide-if-selected")),L.default.hideNodes(this.domNode.querySelectorAll(".show-if-selected")));var Fa=
"table"===this.view._view,va=this.domNode.querySelectorAll(Fa?".js-table-select-checkbox":".js-card-select-check-mark");L.default.forEachNode(va,function(qa){if(!qa.checked){qa.disabled=ua.selection.length>=ua.selectionLimit;var W=qa.disabled?e.default.substitute(ua.i18n.membersTab.selectionLimit,{number:ua.selectionLimit}):ua.i18n.GroupWidget.selectTitle.replace("${title}",qa.getAttribute("data-username"));if(Fa)L.default.addRemoveClass(qa,"tooltip",qa.disabled),qa.setAttribute("aria-label",W);else{var ba=
qa.parentNode;ba.setAttribute("aria-label",W);L.default.addRemoveClass(ba.parentNode.parentNode,"org-member-card--disable-select",qa.disabled)}}});if(Fa){va=this.selection.length+this.members.length>this.selectionLimit;var xa=this.domNode.querySelector(".js-select-all"),Da=xa.parentNode.parentNode,Ca=va?e.default.substitute(this.i18n.membersTab.selectionLimit,{number:this.selectionLimit}):this.i18n.filters.selectAll;xa.checked||(xa.disabled=va,L.default.addRemoveClass(Da,"tooltip",va),Da.setAttribute("aria-label",
Ca))}this.selectedMembers.update(this.selection)};Ba.prototype.filterSelectedViewActions=function(ua){var Fa=this,va=[],xa=[],Da=G.default.getUser(),Ca=!!ua.filter(function(Ma){return Ma.username===Da.username})[0],qa=!!ua.filter(function(Ma){return 0>Ma.lastLogin})[0],W=!!ua.filter(function(Ma){return"org_admin"===Ma.role||"account_admin"===Ma.role})[0],ba=ua.some(function(Ma){var Na;return-1<(null===(Na=Fa.portal.contacts)||void 0===Na?void 0:Na.indexOf(Ma.username))}),oa=ua.some(function(Ma){var Na;
return null===(Na=Ma.licenseType)||void 0===Na?void 0:Na.supportsSignInOnlyFromUTApps}),wa=this.portalUser.userRole,Ea=wa.isAdmin(),Ga=wa.canUpdateUsers(),Ja=wa.isCustom(),ya=Ja&&wa.canDisableUsers(),Ha=Ja&&wa.canManageCredits();Ja&&wa.canDeleteUsers();var Ia=ua.every(function(Ma){return!0===Ma.disabled});if(Ia||!Ea&&!Ja||Ja&&!ya)va.push(this.disableMember);else{var Ka=this.i18n.formatters[1===ua.length?"suspendUser":"suspendUsers"];this.disableMember.innerHTML="".concat(this.icons.inline["minus-circle"]["16"]).concat(Ka);
xa.push(this.disableMember)}qa||Ca||Ja&&W?(this.disableMember.classList.add("members__batch-btn--disabled"),this.disableMember.dataset.disableReasons=JSON.stringify({newUser:qa,self:Ca,selectedAdmin:Ja&&W})):this.disableMember.classList.remove("members__batch-btn--disabled");!Ia||Ca||!Ea&&!Ja||Ja&&(!ya||W)?va.push(this.enableMember):(qa=this.i18n.formatters[1===ua.length?"enableUser":"enableUsers"],this.enableMember.innerHTML="".concat(this.icons.inline.check["16"]).concat(qa),xa.push(this.enableMember));
this.canManageUserTypes?xa.push(this.manageLicenseTypes):va.push(this.manageLicenseTypes);Ca&&(!this.hasMultipleAdminType||1<ua.length)||ba&&1<ua.length?(this.manageLicenseTypes.dataset.disableReasons=JSON.stringify({onlyOneAdminUserType:!this.hasMultipleAdminType,selectedSelf:Ca,selectedAdminContact:ba,isBatch:1<ua.length}),this.manageLicenseTypes.classList.add("members__batch-btn--disabled")):this.manageLicenseTypes.classList.remove("members__batch-btn--disabled");this.canManageLicenses?xa.push(this.manageLicenses):
va.push(this.manageLicenses);L.default.addRemoveClass(this.manageLicenses,"members__batch-btn--disabled",oa);oa&&(ua=ua.every(function(Ma){var Na;return null===(Na=Ma.licenseType)||void 0===Na?void 0:Na.supportsSignInOnlyFromUTApps}),this.manageLicenses.dataset.disableReasons=JSON.stringify({all:ua}));ua="enabled"===this.portal.creditAssignments||"validated"===this.portal.creditAssignments;x.default.creditBudgetingEnabled&&(Ea||Ga&&Ha)&&ua?xa.push(this.manageCredits):va.push(this.manageCredits);Ea||
wa.canAssignUsersToOrgGroups()?xa.push(this.assignGroups):va.push(this.assignGroups);Ea||wa.canReassignOrgItems()?xa.push(this.transferItems):va.push(this.transferItems);-1<xa.indexOf(this.assignGroups)||-1<xa.indexOf(this.disableMember)||-1<xa.indexOf(this.enableMember)||-1<xa.indexOf(this.transferItems)?xa.push(this.actionsContainer):va.push(this.actionsContainer);L.default.hideNodes(va);L.default.showNodes(xa)};Ba.prototype.getMembers=function(){var ua=this,Fa=new a.default;return G.default.request({url:"".concat(x.default.restBaseUrl,
"portals/self/users/search"),content:this.getParams()}).then(function(va){0<va.results.length&&P.default.canGetUsersGroups(ua.portalUser)?ua.getUsersGroups(va.results).then(function(xa){var Da;null===(Da=null===xa||void 0===xa?void 0:xa.results)||void 0===Da?void 0:Da.forEach(function(Ca){var qa=va.results.filter(function(W){return W.username===Ca.username})[0];qa&&(qa.totalGroups=Ca.total,qa.groups=Ca.groups)});Fa.resolve(va)},function(){Fa.resolve(va)}):Fa.resolve(va);return Fa}).then(function(va){if(ua.isAdmin||
ua.canManageLicenses){var xa={};va.results.forEach(function(Da){xa[Da.username]=ua.licensesAPI.getUserAppBundles(Da.username)});return R.default.eachAlways(xa).then(function(Da){Object.keys(Da).forEach(function(Ca){va.results.forEach(function(qa){qa.username===Ca&&Da[Ca]&&(qa.appBundles=Da[Ca].value)})});return va},function(){return va})}return va})};Ba.prototype.getUsersGroups=function(ua){var Fa=new a.default;B.default.sendAllResources("".concat(x.default.restBaseUrl,"portals/self/usersGroups"),
20,ua.map(function(va){return va.username}),function(va){return{users:JSON.stringify(va)}},void 0,!1).then(function(va){var xa=[];va.forEach(function(Da){xa=f.__spreadArray(f.__spreadArray([],xa,!0),Da.results,!0)});Fa.resolve({results:xa})},function(va){Fa.reject(va)});return Fa};Ba.prototype.getParams=function(){var ua=this,Fa,va={sortField:this._sort.property,sortOrder:this._sort.ascending?"asc":"desc"};if(this.filterState.lastLogin){var xa=this.filterState.lastLogin[0];va.lastLogin="".concat(xa.from.format("000000x"),
",").concat(xa.to.format("000000x"))}va=f.__assign(f.__assign({},va),this._page);va.q=this.isPortal?"-username:esri_livingatlas -username:esri_boundaries -username:esri_demographics -username:esri_nav ":"";this.searchTerm&&(va.q+="(".concat(this.searchTerm,")"));Object.keys(this.filterState).forEach(function(Da){"categories"!==Da&&ua.filterState[Da]&&ua.filterState[Da][0]&&(va.q+=" ".concat(ua.filterState[Da][0].q),"emailstatus"===Da&&"unverified"===ua.filterState.emailstatus[0].value&&(va.q+="".concat(ua.portal.canSignInIDP?
" -provider:enterprise":"").concat(ua.portal.oidcId?" -provider:oidc_".concat(ua.portal.oidcId):"")))});if(null===(Fa=this.filterState.categories)||void 0===Fa?0:Fa[0])Fa=this.filterState.categories[0].value,va.categories="_none_"===Fa?"null":JSON.stringify([Fa]);return va};Ba.prototype.refreshPendingMembers=function(){var ua=this,Fa,va;(this.isAdmin||(null===(va=null===(Fa=this.portalUser)||void 0===Fa?void 0:Fa.userRole)||void 0===va?0:va.canInviteUsers()))&&A.default.getPendingAccountUsers(this.portal.id,
{start:1,num:0,type:"email"},function(xa){var Da,Ca,qa,W=null===(Da=ua._controlBar)||void 0===Da?void 0:Da.domNode.querySelector(".js-pending-count");ua.pendingCount=xa.total;Da=ua.domNode.querySelector(".js-pending-member-count");var ba=null===(Ca=ua._controlBar)||void 0===Ca?void 0:Ca.domNode.querySelector(".js-control-bar-actions");0<xa.total?(Da&&(Da.innerHTML=xa.total),L.default.showNodes(ua.domNode.querySelectorAll(".js-action-pendingMembers")),W&&(ba.classList.add("has-pending"),W.textContent=
xa.total,L.default.showNode(W))):(L.default.hideNodes(ua.domNode.querySelectorAll(".js-action-pendingMembers")),W&&(ba.classList.remove("has-pending"),L.default.hideNode(W)));ua.page.maxedUsers=xa.total+ua.totalMembers>=(null===(qa=ua.portal.subscriptionInfo)||void 0===qa?void 0:qa.maxUsers)})};Ba.prototype.onboardLearnMoreClick=function(){var ua=this,Fa=new V.default({doneButtonText:this.i18n.onboarding.done,items:[{imgSrc:"onboard_members_licenses1.svg",title:this.i18n.onboarding.membersLicensesTitle1,
description:e.default.substitute(this.i18n.onboarding.membersLicensesDescription1,{moreImg:M.default.inline["ellipsis-f"]["16"]})},{imgSrc:"onboard_members_licenses2.svg",title:q.default.onboarding.membersLicensesTitle2,description:q.default.onboarding.membersLicensesDescription2}]});this.own((0,d.default)(Fa,"close",function(){ua.onboardBanner.focusOnMore()}))};Ba.prototype.deselectNoAddonUserTypes=function(){this.selection.forEach(function(ua){var Fa=ua.licenseType;(null===Fa||void 0===Fa?0:Fa.supportsSignInOnlyFromUTApps)&&
b.default.publish("view/items/deselect",ua)});0<this.selection.length&&this.manageLicenses.click()};Ba.prototype.disableMembersDeselect=function(){var ua=G.default.getUser(),Fa=this.portalUser.userRole.isCustom();this.selection.forEach(function(va){var xa=va.username===ua.username,Da="org_admin"===va.role||"account_admin"===va.role;(0>va.lastLogin||xa||Fa&&Da||va.isDisabled)&&b.default.publish("view/items/deselect",va)});0<this.selection.length&&this.disableMember.click()};Ba.prototype.manageUserTypesDeselect=
function(){var ua=this,Fa=G.default.getUser();this.selection.forEach(function(va){var xa,Da=va.username===Fa.username,Ca=-1<(null===(xa=ua.portal.contacts)||void 0===xa?void 0:xa.indexOf(va.username));(Da||Ca)&&b.default.publish("view/items/deselect",va)});0<this.selection.length&&this.manageLicenseTypes.click()};Ba.prototype.handleAssignGroups=function(){var ua=this.selection.slice();this.logBulkAction("Assign groups");(new na.default({portal:this.portal,members:ua})).open();this.manageMembersOpen=
{batch:!0,members:ua,button:this.moreBtn}};Ba.prototype.checkRecycleContent=function(){return f.__awaiter(this,void 0,void 0,function(){var ua,Fa,va;return f.__generator(this,function(xa){switch(xa.label){case 0:ua=this.selection.slice(),Fa=ua.map(function(Da){return"".concat(x.default.restBaseUrl,"/content/users/").concat(Da.username)}),xa.label=1;case 1:return xa.trys.push([1,3,,4]),[4,Promise.all(Fa.map(function(Da){return G.default.request({url:Da,content:{foldersContent:!0,inRecycleBin:!0,num:0}})}))];
case 2:return va=xa.sent(),[2,va.some(function(Da){return 0<Da.total})];case 3:return xa.sent(),[2,!1];case 4:return[2]}})})};Ba.prototype.showTransferWarning=function(ua,Fa,va){return f.__awaiter(this,void 0,void 0,function(){var xa,Da,Ca,qa,W;return f.__generator(this,function(ba){xa=t.default.transferRecycleNote;Da=xa.transferRecyceBin;Ca=xa.transferBatchRecycleBin;qa=xa.viewRecycleBin;W=1<(null===Fa||void 0===Fa?void 0:Fa.length);B.default.createConfirmationDialog(f.__assign(f.__assign({strings:{title:this.i18n.membersTab.transferItems,
description:ua,ok:q.default.common.done},hideCancel:!0,autoCloseOnOk:!0},va&&{noticeMessage:W?Ca:Da}),va&&!W&&{noticeLinkURL:"content.html?user\x3d".concat(null===Fa||void 0===Fa?void 0:Fa[0].username,"\x26folder\x3drecycle#content"),noticeLinkText:qa}));return[2]})})};Ba.prototype.handleDeleteMembersClick=function(){return f.__awaiter(this,void 0,void 0,function(){var ua,Fa,va,xa,Da,Ca,qa,W,ba;return f.__generator(this,function(oa){switch(oa.label){case 0:return ua=this.selection.slice(),[4,this.getUsersContentCount(ua)];
case 1:return Fa=oa.sent(),va=null===(ba=null===(W=null===(qa=null===Fa||void 0===Fa?void 0:Fa.aggregations)||void 0===qa?void 0:qa.counts)||void 0===W?void 0:W[0])||void 0===ba?void 0:ba.fieldValues,ua.forEach(function(wa){var Ea,Ga=null===(Ea=null===va||void 0===va?void 0:va.filter(function(Ja){var ya;return(null===(ya=Ja.value)||void 0===ya?void 0:ya.toLowerCase())===wa.username.toLowerCase()})[0])||void 0===Ea?void 0:Ea.count;wa.contentCount=null!==Ga&&void 0!==Ga?Ga:0}),[4,this.getUsersGroupsCount(ua)];
case 2:return xa=oa.sent(),Da=this.domNode.querySelector(".js-delete-members"),[4,this.getUsersRecycleCount(ua)];case 3:return Ca=oa.sent(),(0,U.render)((0,U.h)(Aa.default,{portal:this.portal,members:ua,groupsCount:xa,recycleCount:Ca,onClose:function(){(0,U.render)(null,Da)},onDeleted:function(){window.setTimeout(function(){(0,U.render)(null,Da)},300);C.default.showAlert("success",q.default.myOrganization.membersTab.deleteSuccess);b.default.publish("members/refresh",!0);b.default.publish("member-categories-count/update")},
onError:function(wa){window.setTimeout(function(){(0,U.render)(null,Da)},300);C.default.showAlert("error",wa)}}),Da),[2]}})})};Ba.prototype.handleTransferItems=function(){return f.__awaiter(this,void 0,void 0,function(){var ua,Fa,va,xa,Da,Ca,qa;return f.__generator(this,function(W){switch(W.label){case 0:return ua=this.selection.slice(),[4,this.getUsersContentCount(ua)];case 1:return Fa=W.sent(),va=null===(qa=null===(Ca=null===(Da=null===Fa||void 0===Fa?void 0:Fa.aggregations)||void 0===Da?void 0:
Da.counts)||void 0===Ca?void 0:Ca[0])||void 0===qa?void 0:qa.fieldValues,ua.forEach(function(ba){var oa,wa=null===(oa=null===va||void 0===va?void 0:va.filter(function(Ea){var Ga;return(null===(Ga=Ea.value)||void 0===Ga?void 0:Ga.toLowerCase())===ba.username.toLowerCase()})[0])||void 0===oa?void 0:oa.count;ba.contentCount=null!==wa&&void 0!==wa?wa:0}),1===ua.length&&0===ua[0].contentCount?this.showTransferWarning(e.default.substitute(this.i18n.membersTab.noTransferContent,{username:ua[0].username}),
ua,!1):ua.every(function(ba){return 0===ba.contentCount})?this.showTransferWarning(this.i18n.membersTab.noTransferContentBatch,ua,!1):(xa=new ia.default({portal:this.portal,members:ua,telemetry:this.telemetry,hasRecycle:!1}),xa.open(),this.manageMembersOpen={batch:!0,members:ua,button:this.moreBtn}),[2]}})})};Ba.prototype.getUsersContentCount=function(ua){ua=ua.map(function(Fa){return"owner:".concat(Fa.username)}).join(" OR ");return G.default.request({url:"".concat(x.default.restBaseUrl,"search"),
content:{q:"(".concat(ua,") orgid:").concat(this.portal.id,' -type:"Code Attachment" -type:"Featured Items" -type:"Symbol Set" -type:"Color Set" -type:"Windows Viewer Add In" -type:"Windows Viewer Configuration" -type:"Map Area" -typekeywords:"MapAreaPackage"'),countFields:"owner",countSize:100,num:100}})};Ba.prototype.getUsersGroupsCount=function(ua){return f.__awaiter(this,void 0,void 0,function(){var Fa,va,xa;return f.__generator(this,function(Da){switch(Da.label){case 0:Fa=ua.map(function(Ca){return"owner:".concat(Ca.username)}).join(" OR "),
Da.label=1;case 1:return Da.trys.push([1,3,,4]),[4,G.default.request({url:"".concat(x.default.restBaseUrl,"community/groups"),content:{q:"(".concat(Fa,") orgid:").concat(this.portal.id),num:1}})];case 2:return va=Da.sent(),[2,null!==(xa=va.total)&&void 0!==xa?xa:0];case 3:return Da.sent(),[2,0];case 4:return[2]}})})};Ba.prototype.getUsersRecycleCount=function(ua){return f.__awaiter(this,void 0,void 0,function(){var Fa,va=this;return f.__generator(this,function(xa){switch(xa.label){case 0:return[4,
Promise.all(ua.map(function(Da){return va.getUserRecycleCount(Da.username)}))];case 1:return Fa=xa.sent(),[2,Fa.reduce(function(Da,Ca){return Da+=Ca},0)]}})})};Ba.prototype.getUserRecycleCount=function(ua){return f.__awaiter(this,void 0,void 0,function(){var Fa;return f.__generator(this,function(va){switch(va.label){case 0:return va.trys.push([0,2,,3]),[4,G.default.request({url:"".concat(x.default.restBaseUrl,"/content/users/").concat(ua),content:{foldersContent:!0,inRecycleBin:!0,num:0}})];case 1:return Fa=
va.sent(),[2,(null===Fa||void 0===Fa?void 0:Fa.total)||0];case 2:return va.sent(),[2,0];case 3:return[2]}})})};Ba.prototype.handleManageCredits=function(){var ua=this.selection.slice();this.logBulkAction("Manage credits");(new X.default({portal:this.portal,memberCount:this.totalMembers,members:ua})).open();this.manageMembersOpen={batch:!0,members:ua,button:this.manageCredits}};Ba.prototype.logBulkAction=function(ua){var Fa;null===(Fa=this.telemetry)||void 0===Fa?void 0:Fa.logEvent({category:"Bulk action",
action:ua,attribute:this.getActiveFilters().sort().join(","),count:this.selection.length})};Ba.prototype.logMemberAction=function(ua){var Fa;null===(Fa=this.telemetry)||void 0===Fa?void 0:Fa.logEvent({category:"Member action",action:ua,attribute:this.getActiveFilters().sort().join(",")})};Ba.prototype.handleCategorizeClick=function(){return f.__awaiter(this,arguments,void 0,function(ua){var Fa,va;void 0===ua&&(ua=this.selection);return f.__generator(this,function(xa){Fa=(0,pa.convertToCategoryData)(this.memberCategories);
va=H.default.getSchemaOrder(Fa);Fa.sort(function(Da,Ca){return va[Da.path]-va[Ca.path]});(0,U.render)((0,U.h)(ka.default,{categories:Fa,members:ua,onClose:this.handleCloseCategorizeModal,onDone:this.handleCategorizeDone}),this.domNode);return[2]})})};Ba.prototype.handleCloseCategorizeModal=function(){(0,U.render)(null,this.domNode);b.default.publish("manage-members/close")};Ba.prototype.handleEditEmailClick=function(ua){var Fa=this;(0,U.render)((0,U.h)(ma.default,{member:ua,onSave:function(va){ua.email=
va;Fa.handleCloseEditEmailModal()},onClose:function(){return Fa.handleCloseEditEmailModal()}}),this.domNode)};Ba.prototype.handleCloseEditEmailModal=function(){(0,U.render)(null,this.domNode);b.default.publish("manage-members/close")};Ba.prototype.searchUsersByUsernames=function(ua){return f.__awaiter(this,void 0,void 0,function(){var Fa;return f.__generator(this,function(va){switch(va.label){case 0:return va.trys.push([0,2,,3]),[4,G.default.request({url:"".concat(x.default.restBaseUrl,"portals/self/users/search"),
content:{num:100,start:1,filter:"username:".concat(ua.join(" OR username:"))}})];case 1:return Fa=va.sent(),[2,Fa.results];case 2:return va.sent(),[2];case 3:return[2]}})})};Ba.prototype.getActiveFilters=function(){var ua=this;return Object.keys(this.filterState).filter(function(Fa){Fa=ua.filterState[Fa];return!!Fa&&(!Array.isArray(Fa)||Fa.length)})};Ba.prototype.handleCategorizeDone=function(ua){return f.__awaiter(this,void 0,void 0,function(){var Fa,va,xa,Da=this;return f.__generator(this,function(Ca){switch(Ca.label){case 0:return Fa=
{},ua.forEach(function(qa){Fa[qa.username]=qa.categories}),[4,(0,sa.saveCategorizedMembers)(Fa)];case 1:return Ca.sent(),[4,(0,Y.timeout)(1E3)];case 2:Ca.sent();this.membersFilter.updateCategoriesCount();if(!this.members.length)return[3,4];va=[];this.selection.forEach(function(qa){Da.members.some(function(W){return W.username===qa.username})||va.push(qa.username)});return va.length?[4,this.searchUsersByUsernames(va)]:[3,4];case 3:xa=Ca.sent(),this.selection.forEach(function(qa){var W=xa.find(function(ba){return ba.username===
qa.username});W&&(qa.categories=W.categories);return qa}),Ca.label=4;case 4:return C.default.showAlert("success",q.default.contentCategories.success),this.refreshContent(!0),(0,U.render)(null,this.domNode),b.default.publish("manage-members/close"),[2]}})})};Ba.prototype.handleMobileInvite=function(ua){var Fa=this,va=function(){ea.default.inviteMembers({evt:ua,user:Fa.portalUser,page:Fa.page,scope:Fa})};if(0<this.pendingCount){var xa=new fa.default;xa.show({description:e.default.substitute(l.default,
{i18n:this.i18n,pendingLabel:e.default.substitute(this.i18n.membersTab.pendingMembers,{number:this.pendingCount})}),isInfo:!0,hideActionBar:!0,hideHeader:!0});var Da=xa.domNode.querySelector(".js-invite-btn"),Ca=xa.domNode.querySelector(".js-pending-btn");d.default.once(Da,"click",function(){xa.hide();va()});d.default.once(Ca,"click",function(){xa.hide();(new Z.default({portalId:Fa.portal.id})).open()});d.default.once(xa,"hide",function(){xa.destroy()})}else va()};Ba.prototype.actionGuard=function(){return this.checkReadonly(this.page.portal)};
return Ba=f.__decorate([(0,za.default)(k.default,r.default,D.default,z.default,la.default)],Ba)}()})},"arcgisonline/pages/dijit/View":function(){define("require exports tslib preact esri/Evented dojo/string dojo/on dojo/query dojo/topic dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin ./Card ./CardMobile ./CardWide ./TableRow ../pageUtil ../utils/arrays ../utils/icons dojo/text!./View/templates/tableHeader.html dojo/text!./View/templates/empty.html dojo/text!./View/templates/none.html dojo/text!./View/templates/loader.html dojo/text!./View/templates/View.html dojo/i18n!../../nls/arcgisonline dojo/i18n!../../nls/notebooks ../../tsutils/declareDecorator ../utils/dropdown ../components/SearchFeedback ../utils/search".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C){h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);D=f.__importDefault(D);
G=f.__importDefault(G);F=f.__importDefault(F);A=f.__importDefault(A);y=f.__importDefault(y);return function(){function H(E,K){this.templateString=G.default;this.i18n=F.default;this.select=!0;this.listTemplate=null;this.tableHead=r.default;this.emptyView=w.default;this.noneView=x.default;this.loaderView=D.default;this.listView=v.default;this.mobileView=m.default;this.tableRowView=p.default;this.showSource=this.fullItemTypes=!1;this.location=F.default.contentPage.searchingFor;this.sortOptions=[];this.showShareGroups=
this.allowShare=this.hasSharedOwnershipGroups=!1;this.searchTerm="";this._shiftPressed=this._hasFilters=this.allowSelectAll=this.showFeedback=this.allowDragAndDrop=this.recordSelection=this.recordSortToggle=!1;this._lastSelected=null;this._items=[];this._selected=[];this._dijits=[];this._itemViews={};this.feedbackSearchTerm="";this.inRecycle=!1}H.prototype.postMixInProperties=function(){this.inherited(arguments);this.i18n.notebookLanding=A.default.notebookLanding;this.i18n.notebookViewer=A.default.notebookViewer;
this.i18n.notebookServerManager=A.default.notebookServerManager};H.prototype.postCreate=function(){this.inherited(arguments);this._view=this.activeView;var E={i18n:this.i18n,location:this.location,searchTerm:""};this.domNode.querySelector(".js-empty-wrap").innerHTML=d.default.substitute(this.emptyView,{i18n:this.i18n});this.domNode.querySelector(".js-none-wrap").innerHTML=d.default.substitute(this.noneView,{i18n:this.i18n});this.domNode.querySelector(".js-loader-wrap").innerHTML=d.default.substitute(this.loaderView,
E);this.domNode.querySelector(".js-table-header").innerHTML=d.default.substitute(this.tableHead,{i18n:this.i18n,icons:k.default,selectClass:this.select?"":"hide"});0<this.sortOptions.length&&(E=n.default.find(this.sortOptions,function(K){return K.active}))&&this._sortUpdate(E);this._itemViews=this.declareItemViews();this._addEventListeners()};H.prototype.destroy=function(){this.inherited(arguments);this._dijits.forEach(function(E){return E.destroy()})};H.prototype.setEmptyView=function(E){this.emptyView=
E;this.domNode.querySelector(".js-empty-wrap").innerHTML=d.default.substitute(this.emptyView,{i18n:this.i18n})};H.prototype.declareItemViews=function(){return{grid:{template:g.default,containerClass:".js-grid-wrap"},mobile:{template:this.mobileView,containerClass:".js-mobile-wrap"},list:{template:this.listView,containerClass:".js-list-wrap"},table:{template:this.tableRowView,containerClass:".js-table-rows"}}};H.prototype.allowCategorization=function(){(0,a.default)(this.domNode).addClass("allow-categorization")};
H.prototype.preventCategorization=function(){(0,a.default)(this.domNode).removeClass("allow-categorization")};H.prototype.updateSearchFeedback=function(E,K,I,L,M,N){var P=this;this.searchTerm=E;var R=this.domNode.querySelector(".js-search-feedback");(0,c.render)((0,c.h)(null,null),R);R.classList.add("hide");K&&this.showFeedback&&this.telemetry&&E&&E!==this.feedbackSearchTerm&&((null===M||void 0===M?0:M.eueiEnabled)||N&&!N.orgId)&&(R.classList.remove("hide"),(0,c.render)((0,c.h)(B.SearchFeedback,{telemetry:this.telemetry,
searchTerm:this.searchTerm,page:I,onlyOrg:L,section:"content",enriched:(0,C.semanticSearchEnabled)(this.portal,this.portalUser),onSubmit:function(){return P.feedbackSearchTerm=E}}),R))};H.prototype._addEventListeners=function(){var E=this;this.own((0,b.default)(window,"keydown",function(K){return E._shiftPressed=K.shiftKey}),(0,b.default)(window,"keyup",function(K){return E._shiftPressed=!1}),(0,a.default)(".js-table-sort-header",this.domNode).on("click",this._sortHeader.bind(this)),(0,b.default)(this.domNode.querySelector(".js-select-all"),
"click",this._toggleAll.bind(this)),e.default.subscribe("view/toggle",this._toggleView.bind(this)),e.default.subscribe("view/update",this._updateView.bind(this)),e.default.subscribe("view/deselect",this._deselectItem.bind(this)),e.default.subscribe("view/deselectAll",this._deselectAll.bind(this)),e.default.subscribe("view/select",this._parseSelect.bind(this)),e.default.subscribe("view/loading",this._showSearchLoadingScreen.bind(this)),e.default.subscribe("view/updateShare",this._updateItemsSharing.bind(this)),
e.default.subscribe("sort/update",this._sortUpdate.bind(this)),e.default.subscribe("pagination/page",this._scrollToTop.bind(this)),e.default.subscribe("item/update",this._updateItem.bind(this)));this.allowDragAndDrop&&(this.domNode.classList.add("drag-and-drop-well"),this.own((0,b.default)(this.domNode,"dragover",function(K){K.preventDefault();E.dragover||(E.dragover=!0,E.domNode.classList.add("drag-and-drop-well--dragging"))}),(0,b.default)(this.domNode,"dragleave",function(K){K.preventDefault();
E.dragover=!1;E.domNode.classList.remove("drag-and-drop-well--dragging")}),(0,b.default)(this.domNode,"drop",function(K){K.preventDefault();E.dragover=!1;E.domNode.classList.remove("drag-and-drop-well--dragging");e.default.publish("view/drop",K.dataTransfer)})))};H.prototype._toggleView=function(E){this._view=E;e.default.publish("view/update",this._items,this._selected,this._hasFilters)};H.prototype._showSearchLoadingScreen=function(E){(0,a.default)(".js-view",this.domNode).addClass("hide");var K=
this.domNode.querySelector(".js-loader-wrap"),I=d.default.substitute(this.location,{term:E});K.innerHTML=d.default.substitute(this.loaderView,{i18n:this.i18n,location:I,searchTerm:E});K.classList.remove("hide")};H.prototype.showLoadingScreen=function(E){(0,a.default)(".js-view",this.domNode).addClass("hide");var K=this.domNode.querySelector(".js-loader-wrap");K.innerHTML=d.default.substitute(this.loaderView,{i18n:this.i18n,location:E});K.classList.remove("hide")};H.prototype._parseSelect=function(E,
K){var I=this._items.indexOf(E);K||!this._lastSelected&&0!==this._lastSelected||!this._shiftPressed?(this._selectItem(E),this._lastSelected=I):this._selectRange(Math.min(this._lastSelected,I),Math.max(this._lastSelected,I))};H.prototype._selectItem=function(E){n.default.find(this._selected,function(K){return K.id===E.id})||(E.isSelected=!0,this._selected.push(E));this._setSelectAllState()};H.prototype._toggleAll=function(E){var K;this._lastSelected=null;this._shiftPressed=!1;E=E.target.checked;this.allowSelectAll?
E?this.selectAll():e.default.publish("view/deselectAll"):(E?this._selectPage():this._deselectPage(),this.recordSelection&&(null===(K=this.telemetry)||void 0===K?void 0:K.logEvent({category:"Select",action:"".concat(E?"Select":"Unselect"," page"),count:this._items.length})))};H.prototype._selectRange=function(E,K){for(this._lastSelected=null;E<=K;E++)e.default.publish("view/select",this._items[E],!0);e.default.publish("view/update",this._items,this._selected,this._hasFilters)};H.prototype.selectAll=
function(){e.default.publish("view/select-all",this._items,f.__spreadArray([],this._items,!0),this._hasFilters);this._items.forEach(function(E){E.isSelected=!0})};H.prototype._selectPage=function(){this._lastSelected=null;this._items.forEach(function(E){return e.default.publish("view/select",E)});e.default.publish("view/update",this._items,this._selected,this._hasFilters,null,null,this.inRecycle)};H.prototype._deselectItem=function(E){this._lastSelected=null;E.isSelected=!1;this._selected=this._selected.filter(function(K){return K.id!==
E.id});this._setSelectAllState()};H.prototype._deselectPage=function(){this._lastSelected=null;this._items.forEach(function(E){return e.default.publish("view/deselect",E)});e.default.publish("view/update",this._items,this._selected,this._hasFilters,null,null,this.inRecycle)};H.prototype._deselectAll=function(){this._lastSelected=null;this._items=this._items.map(function(E){E.isSelected=!1;return E});this._selected=[];this._setSelectAllState()};H.prototype._sortUpdate=function(E){this._currentSort=
E;this._lastSelected=null;if("table"===this._view||this.inRecycle){var K=E.ascending?"is-ascending":"is-descending",I=(0,a.default)(".js-table-sort-header");I.removeClass(["is-descending","is-ascending"]);I.forEach(function(L){L.parentElement.setAttribute("aria-sort","none")});if(I=this.domNode.querySelector(".js-table-sort-header[data-sort\x3d'"+E.property+"']"))I.classList.add(K),I.setAttribute("data-sort-order",E.ascending?"asc":"desc"),I.parentElement.setAttribute("aria-sort",E.ascending?"ascending":
"descending")}};H.prototype._updateItem=function(E){E&&"isFavorite"!==E.name&&this._updateView(this._items,this._selected,this._hasFilters)};H.prototype._updateItemsSharing=function(E){var K=this;(E||[]).forEach(function(I){var L=n.default.find(K._items,function(M){return M.id===I.id});L&&(L.set("access",I.access),L.set("groupData",I.groupData),L.set("sharedGroups",I.sharedGroups))})};H.prototype._sortHeader=function(E){this._lastSelected=null;var K=E.target;if(!K.getAttribute("data-sort")){var I=
(0,a.default)(E.target).closest(".js-table-sort-header")[0];I&&(K=I)}var L=K.getAttribute("data-sort");I=q.default.contains(K,"is-ascending")||q.default.contains(K,"is-descending");K=K.getAttribute("data-sort-order");I&&(K="asc"===K?"desc":"asc");E=(I=n.default.find(this.sortOptions,function(M){return M.property===L}))?I.label:E.target.innerHTML;this.telemetry&&this.recordSortToggle&&this.telemetry.logEvent({category:"Table Sort Order",action:"selected sort order"});e.default.publish("sort/update",
{label:E,property:L,ascending:"asc"===K})};H.prototype._updateView=function(E,K,I,L,M,N){var P=this;void 0===N&&(N=!1);this.inRecycle=N;var R=l.default.getQueryParams();this._lastSelected=null;L=this.domNode.querySelector(".js-content-loader");M=this.domNode.querySelector(".js-table-wrap");null===L||void 0===L?void 0:L.classList.add("is-active");this._dijits.forEach(function(ra){return ra.destroy()});(0,a.default)(".js-view",this.domNode).addClass("hide");this._items=E||[];this._selected=K||[];this._hasFilters=
I;var Y=this.mobileView&&720>=window.innerWidth?"mobile":N?"table":this._view;K=this._itemViews[Y];var ja=K.template,aa=this.domNode.querySelector(K.containerClass);K=this.domNode.querySelector(".js-none-wrap");var da=this.domNode.querySelector(".js-empty-wrap");I=I?K:da;0<E.length?(E.forEach(function(ra,ca){var fa=n.default.find(P._selected,function(la){return la.id===ra.id});ca={item:ra,options:R,select:P.select,isSelected:fa,portalUser:P.portalUser,fullItemTypes:P.fullItemTypes,showSource:P.showSource,
hasSharedOwnershipGroups:P.hasSharedOwnershipGroups,allowShare:P.allowShare,showShareGroups:P.showShareGroups,itemIndex:ca,telemetry:P.telemetry,page:P.page,telemetryOptions:P.telemetryOptions,portal:P.portal,recordSelection:P.recordSelection,searchTerm:P.searchTerm,addSearchTelemetryParams:P.addSearchTelemetryParams};N?ca.template=P.recycleView:P.tableRow&&"table"===Y?ca.template=P.tableRow:P.listTemplate&&"list"===Y&&(ca.template=P.listTemplate);ca=new ja(ca);ca.startup();ca.placeAt(aa);P._dijits.push(ca)}),
q.default.remove(aa,"hide"),e.default.publish("view/show"),"table"===Y&&(M.classList.remove("hide"),this._setSelectAllState(),this._sortUpdate(this._currentSort))):I.classList.remove("hide");null===L||void 0===L?void 0:L.classList.remove("is-active");(0,z.dropdown)()};H.prototype._setSelectAllState=function(){var E=this.domNode.querySelector(".js-select-all"),K=this._items.filter(function(I){return I.isSelected});0===K.length?(E.checked=!1,E.indeterminate=!1):K.length===this._items.length?(E.checked=
!0,E.indeterminate=!1,E.disabled=!1):E.indeterminate=!0};H.prototype._scrollToTop=function(){this._lastSelected=null;var E=this.domNode.getBoundingClientRect().top;0>E&&window.scrollBy(0,E-50)};H.prototype.getItemCount=function(){return this._items.length};H.prototype.getItemsInView=function(){return this._items};return H=f.__decorate([(0,y.default)(t.default,u.default,h.default)],H)}()})},"arcgisonline/pages/dijit/CardMobile":function(){define("require exports tslib ../../tsutils/declareDecorator dojo/text!./CardMobile/CardMobile.html ../utils/formatters ./Card/_CardBase".split(" "),
function(S,J,f,c,h,d,b){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);return function(){function a(e){this.templateString=h.default;this.alwaysShowDrag=this.draggable=!1}a.prototype.postMixInProperties=function(){this.inherited(arguments);this.item.ownerText=d.default.formatOwnerText(this.item,!0)};a.prototype.postCreate=function(){this.inherited(arguments);this.draggable&&this.domNode.classList.add("card--draggable");this.alwaysShowDrag&&this.domNode.classList.add("card--show-drag")};
a.prototype.setDraggable=function(e){(this.draggable=e)?this.domNode.classList.add("card--draggable"):this.domNode.classList.remove("card--draggable")};return a=f.__decorate([(0,c.default)(b.default)],a)}()})},"arcgisonline/pages/dijit/CardWide":function(){define("require exports tslib ../../tsutils/declareDecorator ./Card/_CardBase dojo/text!./CardWide/CardWide.html".split(" "),function(S,J,f,c,h,d){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);return function(){function b(){this.isWide=
!0;this.templateString=d.default;this.badgeWidth="full"}b.prototype.postCreate=function(){this.inherited(arguments)};return b=f.__decorate([(0,c.default)(h.default)],b)}()})},"arcgisonline/pages/dijit/TableRow":function(){define("require exports tslib dojo/dom-construct dojo/query dojo/string dojo/on dojo/topic dijit/_WidgetBase dijit/_TemplatedMixin ../utils/formatters ../../esriGeowConfig ./ItemShareSummary ../utils/item ../utils/setItemUrls ../utils/icons ../utils/dom ./Card/_getItemClasses ../item/_Actions ./_CheckReadonlyMixin dojo/text!./TableRow/templates/TableRow.html dojo/text!./Card/OpenDropdown.html dojo/text!./Card/RecycleDropdown.html dojo/i18n!../../nls/arcgisonline dojo/i18n!../../nls/notebooks ../../tsutils/declareDecorator ./OrgPopup/OrgPopup preact ../components/Favorite ../content/_ContentActions".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);
D=f.__importDefault(D);G=f.__importDefault(G);F=f.__importDefault(F);A=f.__importDefault(A);y=f.__importDefault(y);B=f.__importDefault(B);C=f.__importDefault(C);return function(){function H(E,K){this.template=w.default;this.i18n=G.default;this.selectTitle=t.default.selectTitle;this.moreOptionsTitle=t.default.moreOptionsTitle;this.fullDate=t.default.fullDate;this.completeDate=t.default.completeDate;this.capitalize=t.default.capitalize;this.empty=t.default.empty;this.shortenNumber=t.default.shortenNumber;
this.getAccess=t.default.getAccess;this.getAccessIcon=t.default.getAccessIcon;this.formatRecycleTimeRemaining=t.default.formatRecycleTimeRemaining;this.show=t.default.show;this.hide=t.default.hide;this.icons=p.default;this.cssClasses=[];this.dropdownClass=this.removedRow=this.activeRow=this.selectClass=this.checked="";this.recordSelection=this.favoritesDisabled=this.showShareGroups=this.hasSharedOwnershipGroups=this.showSource=this.fullItemTypes=this.isRemoved=this.isSelected=this.select=this.isUserRecycle=
this.isRecycle=!1}H.prototype.postMixInProperties=function(){var E=this,K,I;this.inherited(arguments);this.formatDisplayName=t.default.formatDisplayName.bind(this,this.item,this.fullItemTypes);this.templateString=this.template||w.default;this.i18n.notebookLanding=F.default.notebookLanding;this.i18n.notebookViewer=F.default.notebookViewer;this.i18n.notebookServerManager=F.default.notebookServerManager;this.checked=this.isSelected?"checked":"";this.selectClass=this.select?"":"hide";this.activeRow=this.isSelected?
"table-select-row-active":"";this.removedRow=this.isRemoved?"table-select-row-removed":"";this.dropdownClass=2<this.itemIndex?"dropdown-up":"";if(null===(K=this.item)||void 0===K?0:K.classification)this.favoritesDisabled=!this.portalUser,this.item.openIn.forEach(function(L){return v.default[L](E.item)}),this.item.premiumClass=this.item.isPremium?"":"hide",this.cssClasses=(0,n.default)(this.item,this.portalUser),this.item.isAdmin=this.item.isAdmin||(null===(I=this.portalUser)||void 0===I?void 0:I.isOrgAdmin)&&
this.item.portal.id===this.portalUser.orgId,this.item.canShare=this.allowShare&&m.default.canShareItem(this.item,this.portalUser),this.item.ownerText=t.default.formatOwnerText(this.item);this.isRecycle="recycle"===this.item.folderId;this.isUserRecycle="recycle"===this.options.folder};H.prototype.postCreate=function(){var E=this,K,I,L,M;this.inherited(arguments);this.cssClasses&&this.cssClasses.forEach(function(ja){return ja&&E.domNode.classList.add(ja)});!this.favoritesDisabled&&0<(0,h.default)(".js-favorites-container",
this.domNode).length&&(this.favorite=(0,z.render)((0,z.h)(B.default,{item:this.item}),this.domNode.querySelector(".js-favorites-container")));this.isUserRecycle&&l.default.hideNodes(this.domNode.querySelectorAll(".js-recycle-owner"));if(0<(0,h.default)(".js-open-dropdown-container",this.domNode).length){var N=this.domNode.querySelector(".js-open-dropdown-container"),P=d.default.substitute(this.isRecycle?D.default:x.default,{item:this.item,i18n:G.default,icons:p.default},null,this);c.default.place(P,
N);m.default.isHubType(this.item.type)&&N.querySelector(".js-view-link").classList.add("if-hub-and-not-blocked");(null===(K=this.item.portal)||void 0===K?0:K.isPortal)&&l.default.hideNodes(N.querySelectorAll(".js-hide-portal"))}(K=this.domNode.querySelector(".js-badges"))&&l.default.createElement("arcgis-item-badges",{item:this.item,user:this.portalUser,width:"narrow",showTooltips:!0,scale:"s",api:3},K);K=this.item;N=this.portalUser;P=this.allowShare;var R=this.telemetry,Y=this.showShareGroups;(null===
(I=this.item)||void 0===I?0:I.classification)&&new g.default({item:K,portalUser:N,showShareGroups:Y,allowShare:P,telemetry:R,portal:this.portal},this.domNode.querySelector(".js-share-summary"));if("Feature Service"===K.type||"Feature Collection"===K.type)I=this.domNode.querySelector(".js-layers-tables"),P=this.domNode.querySelector(".js-layers-tables-toggle"),I&&P&&u.default.deepLayerSearchEnabled&&l.default.createElement("arcgis-layers-and-tables-summary-popup",{item:K,layers:K.sublayers,portal:K.portal,
api:3,user:N,searchTerm:this.searchTerm,config:u.default,telemetry:this.telemetry,tooltip:this.formatDisplayName(K.displayName),i18nNoService:G.default.publishWizard.errors.selectedServiceNotExist.message,i18nNoLayers:G.default.SelectLayersWFS.noLayers},I).appendChild(P);this._addEventListeners();I=this.domNode.querySelector(".js-table-select-checkbox");K=G.default.filters.selectLabel.replace("${itemName}",null!==(M=null===(L=this.item)||void 0===L?void 0:L.name)&&void 0!==M?M:"");null===I||void 0===
I?void 0:I.setAttribute("aria-label",K)};H.prototype.destroy=function(){this.inherited(arguments);this._popup&&this._popup.destroy();this.favorite&&(0,z.render)(null,this.domNode.querySelector(".js-favorites-container"),this.favorite)};H.prototype._addEventListeners=function(){var E=this,K;this.own((0,h.default)(".js-table-select-checkbox",this.domNode).on("change",this._toggleSelected.bind(this)),(0,h.default)(".js-card-item-owner",this.domNode).on("click",this._showProfile.bind(this)),(0,h.default)(".js-action",
this.domNode).on("click",this._handleAction.bind(this)),(0,h.default)(".js-item-share-dropdown",this.domNode).on("click",this._shareItemDropdown.bind(this)),(0,h.default)(".js-item-categorize",this.domNode).on("click",this._categorizeItem.bind(this)),(0,h.default)(".js-telemetry-categorize",this.domNode).on("click",function(){var L,M;if(null===(L=window.location.pathname)||void 0===L?0:L.includes("content.html"))null===(M=E.telemetry)||void 0===M?void 0:M.logEvent({eventType:"other",pageName:"content",
pageUrl:window.location.href,path:window.location.pathname,category:"item action",action:"categorize"})}),(0,h.default)(".js-item-restore",this.domNode).on("click",this._restoreItem.bind(this)),(0,h.default)(".js-inline-restore-container",this.domNode).on("click",this._restoreItem.bind(this)),(0,h.default)(".js-item-permanently-delete",this.domNode).on("click",this._permanentlyDeleteItem.bind(this)),(0,h.default)(".js-inline-permanently-delete-container",this.domNode).on("click",this._permanentlyDeleteItem.bind(this)),
a.default.subscribe("view/deselectAll",this._deselect.bind(this)),a.default.subscribe("view/items/".concat(this.item.id,"/deselect"),this._deselect.bind(this)));var I=this.domNode.querySelector(".js-verified-owner-link");I&&this.own((0,b.default)(I,"click",this.showOrgPopup.bind(this)));(null===(K=this.item)||void 0===K?0:K.watch)&&this.own(this.item.watch(this._itemUpdate.bind(this)))};H.prototype._handleAction=function(E){var K=this;E.preventDefault();var I=E.target.getAttribute("data-action");
if(I&&k.default[I]&&("share"!==I||!this.checkReadonly(this.item.portal))){var L={evt:E,item:this.item,user:this.portalUser,portal:this.item.portal,telemetry:this.telemetry};if("share"!==I||this.item.isOwner)k.default[I](L);else this.item.getOwnerProfile(!0,!0).then(function(M){K.item.itemOwner=M;k.default.share(L)})}};H.prototype.selectItem=function(){this.domNode.classList.add("table-select-row-active");this.item.isSelected=!0;this.domNode.querySelector(".js-table-select-checkbox").checked=!0};H.prototype._select=
function(){this.selectItem();a.default.publish("view/select",this.item)};H.prototype._deselect=function(){this.domNode.classList.remove("table-select-row-active");this.item.isSelected=!1;this.domNode.querySelector(".js-table-select-checkbox").checked=!1;a.default.publish("view/deselect",this.item)};H.prototype._toggleSelected=function(){var E;if(this.domNode.classList.contains("table-select-row-active")){var K="Unselect row";this._deselect()}else K="Select row",this._select();this.recordSelection&&
(null===(E=this.telemetry)||void 0===E?void 0:E.logEvent({category:"Select",action:K,count:1}))};H.prototype._itemUpdate=function(E,K,I){a.default.publish("item/update",{item:this.item,name:E,oldValue:K,value:I})};H.prototype._showProfile=function(E){a.default.publish("profile/show",E)};H.prototype.showOrgPopup=function(E){E.stopPropagation();(new y.default({item:this.item,opener:E.target})).open()};H.prototype._shareItemDropdown=function(E){this.domNode.querySelector(".js-item-share-dropdown").blur()};
H.prototype._categorizeItem=function(E){a.default.publish("item/categorize",this.item,this.domNode.querySelector(".js-dropdown-toggle"))};H.prototype._restoreItem=function(){var E,K=null!==(E=this.portal)&&void 0!==E?E:this.item.portal;C.default.restoreItems({selectedItems:[this.item],portal:K})};H.prototype._permanentlyDeleteItem=function(){var E,K=null!==(E=this.portal)&&void 0!==E?E:this.item.portal;C.default.permanentlyDeleteItems({selectedItems:[this.item],portal:K})};return H=f.__decorate([(0,A.default)(e.default,
q.default,r.default)],H)}()})},"arcgisonline/pages/content/_ContentActions":function(){define("require exports tslib dijit/Dialog dojo/query dojo/on dojo/string dojo/dom-attr dojo/topic dojo/promise/all dojo/dom-construct ../../esriGeowConfig ../utils/item ../utils/alerts ../utils/culture ../utils/storage ../item/_Actions ../utils/channels ../../sharing/dijit/dialog/AddItemDlg ../../sharing/dijit/dialog/CreateAppDlg ../../sharing/dijit/dialog/PublishWizard ../../sharing/dijit/dialog/CreateFolder ../../sharing/dijit/dialog/CreateGeolocatorDlg ../../sharing/dijit/dialog/ConnectDataset ../../sharing/dijit/dialog/AddDatastoreDlg ../../sharing/dijit/dialog/CreateNotebookDlg ../../pages/dijit/CreateImageryContent ../../pages/dijit/CreateRasterFunctionTemplate preact ../components/RestoreItems ../components/DeleteItems ../components/ConfirmDialog dojo/i18n!../../nls/arcgisonline ../utils/dom".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E,K,I){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);D=f.__importDefault(D);
G=f.__importDefault(G);F=f.__importDefault(F);A=f.__importDefault(A);y=f.__importDefault(y);z=f.__importDefault(z);E=f.__importDefault(E);K=f.__importDefault(K);I=f.__importDefault(I);return function(){function L(){}L.add=function(M,N){var P,R=M.page;M=R.portal;R=R.telemetry;var Y=M.getPortalUser(),ja=Y.canUserPublish,aa=(null===(P=N.target)||void 0===P?void 0:P.dataset)||{};P=aa.action;N=aa.label;var da=aa.title,ra=aa.message,ca=null!==P&&void 0!==P?P:"";aa=Y.getCurrentFolder();var fa=document.getElementById("add-dropdown");
if(P)if(N&&(null===R||void 0===R?void 0:R.logEvent({label:N,category:"add",eventType:"new item click",pageName:"my content"})),-1<ca.indexOf("connectDataset"))R=new G.default({label:N,telemetry:R}),R.startup(M,aa),R.showModal("true");else if(-1<ca.indexOf("datastore"))(new F.default({portal:M,portalUser:Y})).startup();else{var la=new k.default({id:"addItem_dlg",folder:aa&&aa.id!==Y.username&&"all"!==aa.id?aa.id:"/",allowPublish:ja,selected:P,label:N,telemetry:R,message:ra});la.showModal({title:da});
d.default.once(la.dialog,"hide",function(){la.dialog.destroyRecursive();null===fa||void 0===fa?void 0:fa.focus()})}};L.create=function(M,N){var P,R,Y,ja,aa=(null===(P=N.target)||void 0===P?void 0:P.dataset)||{};P=aa.action;aa=aa.label;var da=null===(R=M.page)||void 0===R?void 0:R.telemetry;if(P.length&&(aa&&(null===da||void 0===da?void 0:da.logEvent({label:aa,category:"create apps",eventType:"new item click",pageName:"my content"})),!(-1<P.indexOf("dashboard")||-1<P.indexOf("instantapps")||-1<P.indexOf("geobim")))){if(-1<
P.indexOf("app"))return this.createApp(M,N);if(-1<P.indexOf("publish"))return this.publishItem(M,N);if("geolocator"===P)return this.createGeolocator(M,N);if(-1<P.indexOf("notebook"))return this.createNotebook(M,N);if(-1<P.indexOf("storymaps"))return window.open(u.default.storymapsUrl+"/stories/new","_blank");if(-1<P.indexOf("sites")){if(M.page.portal.isPortal)return window.open("".concat(location.protocol,"//").concat(u.default.portalHostname,"/apps/sites/#/home/edit/new"),"_blank");M=u.default.openDataUrl.replace("http://",
"".concat(u.default.urlKey,".")).replace("https://","".concat(u.default.urlKey,"."));return window.open("https://".concat(M.replace("admin","edit"),"new"),"_blank")}return-1<P.indexOf("experience")?window.open(u.default.webExperienceUrl,"_blank"):-1<P.indexOf("urban")?null!==(ja=null===(Y=null===M||void 0===M?void 0:M.page)||void 0===Y?void 0:Y.portalUser)&&void 0!==ja&&ja.canPublishFeatures?window.open("".concat(u.default.urbanUrl,"/new-model-setup"),"_blank"):m.default.showAlert("error",K.default.items.urbanModelPermissionsError):
this.createItem(M,N)}};L.createApp=function(M,N){var P=M.page,R=P.portal;N=N.target.dataset;var Y=N.title,ja=N.message;(new r.default({item:M.item,label:N.label,telemetry:null===P||void 0===P?void 0:P.telemetry,action:N.action})).showWizard({title:Y,message:ja,portal:R})};L.createItem=function(M,N){var P=M.page,R=P.portal,Y=N.target.dataset,ja=Y.action;N=Y.title;var aa=Y.message,da=Y.type;P=new r.default({item:M.item,label:Y.label,telemetry:null===P||void 0===P?void 0:P.telemetry,action:ja});da=da||
ja.split("-")[1];M=M.isWAB||-1<ja.indexOf("wab");M={typeInfo:da,title:N,message:aa,isWAB:M,portal:R};"webscene"===da&&R.isPortal&&(M.typeInfo="webscene_portal");P.showCreateDefaultItem(M)};L.createNotebook=function(M,N){N=M.page.portal;M=M.page.telemetry;var P=N.getPortalUser();(new A.default({portal:N,portalUser:P,telemetry:M})).startup()};L.createGeolocator=function(M,N){var P,R=a.default.get(N.target,"data-title");N=a.default.get(N.target,"data-message");(new D.default({telemetry:null===(P=M.page)||
void 0===P?void 0:P.telemetry})).showModal({title:R,message:N})};L.publishImageryItem=function(M,N){var P=this,R,Y,ja=M.page.portal.getPortalUser();M=null===(R=M.page)||void 0===R?void 0:R.telemetry;R=ja.getCurrentFolder();R=(null===R||void 0===R?0:R.isHome)?"":null!==(Y=null===R||void 0===R?void 0:R.id)&&void 0!==Y?Y:"";this._CreateImageryContentOverlay=new y.default({onClose:function(){P._CreateImageryContentOverlay.scratchFolderId&&(ja.deleteFolder(P._CreateImageryContentOverlay.scratchFolderId),
P._CreateImageryContentOverlay=null)},folderId:R,telemetry:M},t.default.place(t.default.create("div"),document.body,"last"));this._CreateImageryContentOverlay.open()};L.createRasterFunctionTemplate=function(M,N){M=M.page.portal.getPortalUser();this._CreateRasterFunctionTemplateOverlay=new z.default({portalUser:M},t.default.place(t.default.create("div"),document.body,"last"));this._CreateRasterFunctionTemplateOverlay.open()};L.publishItem=function(M,N){var P,R=M.page,Y=null===R||void 0===R?void 0:
R.telemetry,ja=((null===(P=N.target)||void 0===P?void 0:P.dataset)||{}).action;P=R.portal;P=!P.isPortal&&P.subscriptionInfo||{state:"active"};var aa=ja.split("-")[1];ja="features"===aa?"esriFeatureLayers":"esriTileLayers";if("active"===P.state){if("imagery"===aa)return this.publishImageryItem(M,N);var da=new w.default({class:"".concat(ja," esriPublishWizardNode tabs-transparent"),itemType:aa});var ra=new c.default({title:"features"===aa?K.default.items.newFeatureLayerTitle:K.default.items.newTileLayerTitle,
content:da.domNode,class:"esriPublishingWizardDlg esriPublishingWizardDlg--content"});(0,d.default)(ra,"hide",function(){var ca;da.destroy();ra.destroyRecursive();null===(ca=document.getElementById("create-dropdown"))||void 0===ca?void 0:ca.focus()});(0,d.default)(da,"cancel",function(){ra.hide().then(function(){return!1})});(0,d.default)(da,"done",function(ca,fa){var la;(function(ta){ta.features="feature layer";ta.imagery="imagery layer";ta.tiles="tile layer"})(la||(la={}));fa=f.__assign({label:"new item",
category:"new item",pageName:"my content",details:la[aa]},fa&&{attribute:fa});null===Y||void 0===Y?void 0:Y.logEvent(fa);ra.hide().then(function(){var ta=null===ca||void 0===ca?void 0:ca.id;ta&&setTimeout(function(){window.location.href="item.html?id\x3d".concat(ta).concat("tiles"===aa?"#settings/manageTiles":"")},400)})});(0,h.default)(".dojoxWizardButtons",ra.domNode).addClass("esriFloatTrailing");ra.show().then(function(){ra.closeButtonNode.tabIndex=0})}};L.bulkAction=function(M,N){var P,R=null!==
(P=M.action)&&void 0!==P?P:a.default.get(N.target,"data-action");if(R&&this[R])this[R](M,N)};L.share=function(M,N){var P=M.page,R=P.telemetry,Y=P.portal.getPortalUser(),ja=M.selectedItems,aa,da={user:Y,items:ja,item:1===ja.length?ja[0]:null,folder:M.folder||"/",noRedirect:!0,telemetry:R};(0,q.default)(ja.map(function(ra){return ra.getOwnerProfile()})).then(function(ra){var ca=ja[0].access;ja.forEach(function(fa,la){fa.access!==ca&&(ca="mixed");aa=fa.isAdmin||Y.isOrgAdmin&&ra[la].orgId===Y.orgId;fa=
fa=f.__assign(f.__assign({},fa),{isAdmin:aa,canUpdate:aa})});R&&(da.telemetryWorkflow=R.startWorkflow("share",{details:ca,pageUrl:window.location.href,pagename:"content",count:ja.length}));l.default.share(da,N)})};L.shareOwnership=function(M){var N=M.selectedItems;l.default.shareOwnership({user:M.portalUser||M.page.portalUser,items:N,item:1===N.length?N[0]:null,folder:M.folder||"/",noRedirect:!0,portal:M.page.portal})};L.changeOwner=function(M){var N,P,R=M.page,Y=R.portal,ja=null!==(N=M.currentFolder)&&
void 0!==N?N:"";N=null!==(P=M.portalUser)&&void 0!==P?P:Y.getPortalUser();M=M.selectedItems;l.default.reassignItem({owner:N,items:M,portal:Y,item:1===M.length?M[0]:null,folder:ja,noRedirect:!0,dontRemoveFromList:"organization"===R._currentView,page:R})};L.move=function(M){l.default.moveItem(M)};L.restoreItems=function(M){var N=this,P,R,Y,ja=null!==(P=M.portal)&&void 0!==P?P:null===(R=M.page)||void 0===R?void 0:R.portal,aa=null===(Y=M.page)||void 0===Y?void 0:Y._currentView,da=function(ca,fa){return f.__awaiter(N,
void 0,void 0,function(){var la,ta,Q,T;return f.__generator(this,function(O){la=1<ca.length;ta=ca[0];Q=fa.id===ta.owner;la?(T=v.default.getString(K.default.itemProperties.itemsRestore,ca.length,{folder:'\x3ccalcite-icon class\x3d"margin-right-quarter" icon\x3d'.concat(Q?"home":"folder",' scale\x3d"s"\x3e\x3c/calcite-icon\x3e ').concat(fa.title)}),m.default.showAlert("success",T,{cssClasses:"inline-flex",textIncludesHTML:!0},"","content"===aa&&{title:K.default.itemProperties.goToFolder,onclick:function(){e.default.publish("folders/refreshAndSelect",
fa)}})):(T=v.default.getString(K.default.itemProperties.itemsRestore,ca.length,{item:ta.title,folder:'\x3ccalcite-icon class\x3d"margin-right-quarter" icon\x3d'.concat(Q?"home":"folder",' scale\x3d"s"\x3e\x3c/calcite-icon\x3e ').concat(fa.title)}),m.default.showAlert("success",T,{cssClasses:"inline-flex",textIncludesHTML:!0},"",{title:K.default.itemLinks.viewDetails,href:"./item.html?id\x3d".concat(ta.id)}));return[2]})})},ra=t.default.create("div",null,document.body,"last");(0,B.render)((0,B.h)(C.RestoreItems,
{items:M.selectedItems,portal:ja,onCancel:function(){I.default.removeComponent(ra,document.body);e.default.publish("folders/refresh")},onSubmit:function(ca,fa,la){return f.__awaiter(N,void 0,void 0,function(){var ta,Q,T,O,Z,na,ia,X=this,ha,V;return f.__generator(this,function(ea){switch(ea.label){case 0:return[4,g.default.restoreItems(ca,la)];case 1:return ta=ea.sent(),[4,g.default.restoreItems(fa,la)];case 2:return Q=ea.sent(),T=f.__spreadArray(f.__spreadArray([],ta.restored,!0),Q.restored,!0),O=
f.__spreadArray(f.__spreadArray([],ta.errors,!0),Q.errors,!0),Z=null!==(ha=null===ta||void 0===ta?void 0:ta.destinationFolder)&&void 0!==ha?ha:null===Q||void 0===Q?void 0:Q.destinationFolder,T.length&&(na=null!==(V=p.default.getCookie("ESRI_Content",!0))&&void 0!==V?V:{},na.defaultRestoreFolderId=Z.id,p.default.setCookie("ESRI_Content",na,{path:"/"},!0),e.default.publish("items/refresh"),ia=e.default.subscribe("items/refreshComplete",function(){return f.__awaiter(X,void 0,void 0,function(){return f.__generator(this,
function(U){switch(U.label){case 0:return ia.remove(),e.default.publish("view/deselectAll"),e.default.publish("aggregations/refresh"),O.length?[3,3]:[3,1];case 1:return[4,da(f.__spreadArray(f.__spreadArray([],ca,!0),fa,!0),la)];case 2:U.sent(),U.label=3;case 3:return[2]}})})})),I.default.removeComponent(ra,document.body),e.default.publish("folders/refresh"),(0,n.broadcastRecyleUpdate)(),[2]}})})}}),ra)};L.permanentlyDeleteItems=function(M){var N,P,R=t.default.create("div",null,document.body,"last"),
Y=null!==(N=M.portal)&&void 0!==N?N:null===(P=M.page)||void 0===P?void 0:P.portal;(0,B.render)((0,B.h)(H.DeleteItems,{items:M.selectedItems,portal:Y,onCancel:function(){I.default.removeComponent(R,document.body)},onSubmit:function(aa){g.default.deleteItems(aa,!0).then(function(da){var ra=da.removed,ca=da.errors;I.default.removeComponent(R,document.body);if(ra.length){e.default.publish("items/refresh",{removedItems:ra});(0,n.broadcastRecyleUpdate)();var fa=e.default.subscribe("items/refreshComplete",
function(){fa.remove();e.default.publish("view/deselectAll");e.default.publish("aggregations/refresh");if(ca.length)ja(ca);else{var la=v.default.getString(K.default.itemProperties.itemsPermanentDelete,aa.length);e.default.publish("alert/show",{type:"success",text:la})}})}else ja(ca)})},inRecycleBin:!0,recycleEnabled:!!Y.recycleBinEnabled}),R);var ja=function(aa){var da=aa.filter(function(ca){return"CONT_00481"===ca.messageCode}),ra=aa.filter(function(ca){return"uninstallFail"===ca.messageCode});0===
aa.filter(function(ca){return!ca.messageCode}).concat(da).length&&ra.length?e.default.publish("alert/show",{type:"error",text:K.default.itemProperties.bulkDeepLearningPkgDeletionFailure}):e.default.publish("alert/show",{type:"error",text:K.default.itemProperties.deleteBulkItems})}};L.deleteItems=function(M){var N=this,P=M.page.portal.recycleBinEnabled,R=t.default.create("div",null,document.body,"last");(0,B.render)((0,B.h)(H.DeleteItems,{items:M.selectedItems,portal:M.page.portal,onCancel:function(){I.default.removeComponent(R,
document.body);null===M||void 0===M?void 0:M.onClose()},onSubmit:function(ja,aa){return f.__awaiter(N,void 0,void 0,function(){var da,ra,ca,fa,la,ta,Q,T;return f.__generator(this,function(O){switch(O.label){case 0:return[4,Promise.all([g.default.deleteItems(ja,!1),g.default.deleteItems(aa,!0)])];case 1:return ca=O.sent(),fa=ca[0],la=ca[1],da=f.__spreadArray(f.__spreadArray([],fa.removed,!0),la.removed,!0),ra=f.__spreadArray(f.__spreadArray([],fa.errors,!0),la.errors,!0),ta=da,Q=ra,I.default.removeComponent(R,
document.body),ta.length?(e.default.publish("items/refresh",{removedItems:ta}),(0,n.broadcastRecyleUpdate)()):Y(Q),T=e.default.subscribe("items/refreshComplete",function(){T.remove();e.default.publish("view/deselectAll");e.default.publish("aggregations/refresh");if(Q.length)Y(Q);else{var Z=fa.removed;var na=la.removed;Z=P?0<Z.length&&0<na.length?K.default.itemProperties.itemsMixedDelete:0<Z.length?v.default.getString(K.default.itemProperties.itemsRecycle,Z.length):0<na.length?v.default.getString(K.default.itemProperties.itemsPermanentDelete,
na.length):v.default.getString(K.default.itemProperties.itemsDelete,Z.length):v.default.getString(K.default.itemProperties.itemsDelete,Z.length);e.default.publish("alert/show",{type:"success",text:Z})}}),[2]}})})},recycleEnabled:P,outsideCloseDisabled:!!M.outsideCloseDisabled}),R);var Y=function(ja){var aa=ja.filter(function(ra){return"CONT_00481"===ra.messageCode}),da=ja.filter(function(ra){return"uninstallFail"===ra.messageCode});0===ja.filter(function(ra){return!ra.messageCode}).concat(aa).length&&
da.length?e.default.publish("alert/show",{type:"error",text:K.default.itemProperties.bulkDeepLearningPkgDeletionFailure}):e.default.publish("alert/show",{type:"error",text:K.default.itemProperties.deleteBulkItems})}};L.createFolder=function(M){M=new x.default({portalUser:M.user});M.startup();M.showModal().then(function(N){e.default.publish("folders/refreshAndSelect",N)})};L.deleteFolderWithRecycle=function(M){return f.__awaiter(this,void 0,void 0,function(){var N,P,R,Y,ja,aa,da,ra,ca,fa,la=this;return f.__generator(this,
function(ta){switch(ta.label){case 0:return N=M.user,P=N.portal,R=P.recycleBinEnabled,Y=M.folder,ja=N.getCurrentFolder(),aa=t.default.create("div",null,document.body,"last"),da={q:"ownerfolder:"+Y.id,num:100},[4,P.queryItems(da)];case 1:ra=ta.sent();ca=null===ra||void 0===ra?void 0:ra.total;if(0===ca)return(0,B.render)((0,B.h)(E.default,{renderHtmlDescription:!0,strings:{title:K.default.common.deleteLabel,ok:K.default.common.deleteLabel,cancel:K.default.common.cancel,description:K.default.folders.deleteMessage.replace("${label}",
Y.title),close:K.default.common.close,processing:K.default.folderDlg.deletingFolder},onCancel:function(){I.default.removeComponent(aa,document.body)},onOk:function(){N.deleteFolder(Y.id).then(function(){ja.id===Y.id&&(N.setCurrentFolder(N.username),e.default.publish("folder/select",{}));e.default.publish("folders/refresh");m.default.showAlert("success",b.default.substitute(K.default.folderDlg.deleteFolder,[Y.title]));I.default.removeComponent(aa,document.body)},function(){e.default.publish("items/refresh");
e.default.publish("alert/show",{type:"error",text:K.default.common.errors.deleteProtectedItemsInFolder});I.default.removeComponent(aa,document.body)})},okColor:"red"}),aa),[2];(0,B.render)((0,B.h)(H.DeleteItems,{items:ra.items,portal:P,onCancel:function(){I.default.removeComponent(aa,document.body)},onSubmit:function(Q,T){return f.__awaiter(la,void 0,void 0,function(){var O,Z,na,ia,X,ha,V,ea,U;return f.__generator(this,function(ka){switch(ka.label){case 0:return[4,Promise.all([g.default.deleteItems(Q,
!1),g.default.deleteItems(T,!0)])];case 1:return na=ka.sent(),ia=na[0],X=na[1],O=f.__spreadArray(f.__spreadArray([],ia.removed,!0),X.removed,!0),Z=f.__spreadArray(f.__spreadArray([],ia.errors,!0),X.errors,!0),ha=O,V=Z,(ea=ra.items.length===ia.removed.length+X.removed.length)?[4,N.deleteFolder(Y.id)]:[3,3];case 2:return ka.sent(),ja.id===Y.id&&(N.setCurrentFolder(N.username),e.default.publish("folder/select",{}),(0,n.broadcastRecyleUpdate)()),e.default.publish("folders/refresh"),m.default.showAlert("success",
b.default.substitute(K.default.folderDlg.deleteFolder,[Y.title])),[3,4];case 3:ha.length?(e.default.publish("items/refresh",{removedItems:ha}),(0,n.broadcastRecyleUpdate)()):fa(V),U=e.default.subscribe("items/refreshComplete",function(){U.remove();e.default.publish("view/deselectAll");e.default.publish("aggregations/refresh");V.length?fa(V):e.default.publish("alert/show",{type:"error",text:K.default.common.errors.deleteProtectedItemsInFolder})}),ka.label=4;case 4:return I.default.removeComponent(aa,
document.body),[2]}})})},recycleEnabled:R,folder:Y}),aa);fa=function(Q){var T=Q.filter(function(Z){return"CONT_00481"===Z.messageCode}),O=Q.filter(function(Z){return"uninstallFail"===Z.messageCode});0===Q.filter(function(Z){return!Z.messageCode}).concat(T).length&&O.length?e.default.publish("alert/show",{type:"error",text:K.default.itemProperties.bulkDeepLearningPkgDeletionFailure}):e.default.publish("alert/show",{type:"error",text:K.default.itemProperties.deleteBulkItems})};return[2]}})})};L.deleteFolder=
function(M){var N=M.user,P=N.portal,R=M.folder,Y=N.getCurrentFolder();P.queryItems({q:"ownerfolder:"+R.id,num:1}).then(function(ja){ja=null===ja||void 0===ja?void 0:ja.total;var aa={label:R.title,numItems:ja};ja=ja?v.default.getString(K.default.folders.deleteFolderWithItems,ja,aa):b.default.substitute(K.default.folders.deleteMessage,aa);var da=t.default.create("div",null,document.body,"last");(0,B.render)((0,B.h)(E.default,{renderHtmlDescription:!0,strings:{title:K.default.common.deleteLabel,ok:K.default.common.deleteLabel,
cancel:K.default.common.cancel,description:ja,close:K.default.common.close,processing:K.default.folderDlg.deletingFolder},onCancel:function(){I.default.removeComponent(da,document.body)},onOk:function(){N.deleteFolder(R.id).then(function(){Y.id===R.id&&(N.setCurrentFolder(N.username),e.default.publish("folder/select",{}));e.default.publish("folders/refresh");m.default.showAlert("success",b.default.substitute(K.default.folderDlg.deleteFolder,[R.title]));I.default.removeComponent(da,document.body)},
function(){e.default.publish("items/refresh");e.default.publish("alert/show",{type:"error",text:K.default.common.errors.deleteProtectedItemsInFolder});I.default.removeComponent(da,document.body)})},okColor:"red"}),da)})};return L}()})},"arcgisonline/sharing/dijit/dialog/AddItemDlg":function(){define(["dojo","dijit","dojox","dojo/i18n!arcgisonline/nls/arcgisonline","dojo/require!dijit/form/Form,dojox/form/Manager,dijit/form/Select,dijit/form/Button,dojox/validate/regexp,dojox/widget/Standby,dojo/i18n,dojo/string,dojo/topic,dojo/promise/all,esri/layers/wms,esri/layers/KMLLayer,esri/layers/WFSLayer,esri/layers/WMTSLayer,arcgisonline/pages/pageUtil,arcgisonline/pages/utils/categories,arcgisonline/pages/utils/dom,arcgisonline/pages/dijit/CategoryPicker,arcgisonline/pages/utils/notebook,arcgisonline/sharing/util,arcgisonline/sharing/dijit/dialog/_AddItemDlgMixin,arcgisonline/sharing/dijit/dialog/GeneralDlg,arcgisonline/sharing/dijit/dialog/ChoiceDlg,arcgisonline/sharing/dijit/HelpManager,esri/IdentityManager,arcgisonline/sharing/dijit/ServiceInfo,esri/dijit/Tags,arcgisonline/sharing/dijit/_TimezoneUtils,arcgisonline/sharing/dijit/dialog/getWFSConfig,arcgisonline/sharing/dijit/dialog/getWMTSConfig,arcgisonline/sharing/dijit/dialog/_CreateItemUtilMixin,arcgisonline/map/thumbnail/buildThumbnailURLFromKMLItem,arcgisonline/map/thumbnail/buildThumbnailURLFromFSUrl,arcgisonline/map/thumbnail/buildThumbnailURLFromWFSItem,arcgisonline/map/thumbnail/buildThumbnailURLFromWMTSItem,arcgisonline/map/core/buildExportCall,arcgisonline/map/core/projectExtent,arcgisonline/map/core/sameSpatialReference,arcgisonline/sharing/geow/Item,arcgisonline/pages/dijit/InfoTooltip,arcgisonline/pages/dijit/UploadProgressBar,arcgisonline/sharing/dijit/dialog/_PublishImageCollection"],
function(S,J,f){S.provide("arcgisonline.sharing.dijit.dialog.AddItemDlg");S.require("dijit.form.Form");S.require("dojox.form.Manager");S.require("dijit.form.Select");S.require("dijit.form.Button");S.require("dojox.validate.regexp");S.require("dojox.widget.Standby");S.require("dojo.i18n");S.require("dojo.string");S.require("dojo.topic");S.require("dojo.promise.all");S.requireLocalization("arcgisonline","arcgisonline");S.require("esri.layers.wms");S.require("esri.layers.KMLLayer");S.require("esri.layers.WFSLayer");
S.require("esri.layers.WMTSLayer");S.require("arcgisonline.pages.pageUtil");S.require("arcgisonline.pages.utils.categories");S.require("arcgisonline.pages.utils.dom");S.require("arcgisonline.pages.dijit.CategoryPicker");S.require("arcgisonline.pages.utils.notebook");S.require("arcgisonline.sharing.util");S.require("arcgisonline.sharing.dijit.dialog._AddItemDlgMixin");S.require("arcgisonline.sharing.dijit.dialog.GeneralDlg");S.require("arcgisonline.sharing.dijit.dialog.ChoiceDlg");S.require("arcgisonline.sharing.dijit.HelpManager");
S.require("esri.IdentityManager");S.require("arcgisonline.sharing.dijit.ServiceInfo");S.require("esri.dijit.Tags");S.require("arcgisonline.sharing.dijit._TimezoneUtils");S.require("arcgisonline.sharing.dijit.dialog.getWFSConfig");S.require("arcgisonline.sharing.dijit.dialog.getWMTSConfig");S.require("arcgisonline.sharing.dijit.dialog._CreateItemUtilMixin");S.require("arcgisonline.map.thumbnail.buildThumbnailURLFromKMLItem");S.require("arcgisonline.map.thumbnail.buildThumbnailURLFromFSUrl");S.require("arcgisonline.map.thumbnail.buildThumbnailURLFromWFSItem");
S.require("arcgisonline.map.thumbnail.buildThumbnailURLFromWMTSItem");S.require("arcgisonline.map.core.buildExportCall");S.require("arcgisonline.map.core.projectExtent");S.require("arcgisonline.map.core.sameSpatialReference");S.require("arcgisonline.sharing.geow.Item");S.require("arcgisonline.pages.dijit.InfoTooltip");S.require("arcgisonline.pages.dijit.UploadProgressBar");S.require("arcgisonline.sharing.dijit.dialog._PublishImageCollection");S.declare("arcgisonline.sharing.dijit.dialog.AddItemDlg",
[J.form.Form,J._WidgetsInTemplateMixin,f.form.manager._Mixin,f.form.manager._NodeMixin,f.form.manager._EnableMixin,f.form.manager._ValueMixin,f.form.manager._DisplayMixin,f.form.manager._ClassMixin,arcgisonline.sharing.dijit.dialog._AddItemDlgMixin],{templateString:S.cache("arcgisonline.sharing.dijit.dialog","templates/AddItemDlg.html",'\x3cform data-dojo-attach-point\x3d"containerNode" enctype\x3d"multipart/form-data" action\x3d"" method\x3d"POST" autocomplete\x3d"off"  data-dojo-attach-event\x3d"onsubmit:onSubmit"\x3e\r\n\x3cdiv data-dojo-attach-point\x3d"formNode" class\x3d"esriItemLinks dijitDialogPaneContentArea"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_instructions" class\x3d"addNew"\x3e${i18n.instructions}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_publishInstructions" class\x3d"publishOld trailer-half" style\x3d"display:none;"\x3e${i18n.publishInstructions}\x3c/div\x3e\r\n    \x3cbr /\x3e\r\n    \x3cdiv class\x3d"addNew trailer-half"\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"addItemLbl" for\x3d"itemType"\x3e${i18n.itemType}\x3c/label\x3e\r\n        \x3cselect id\x3d"itemType" data-dojo-attach-point\x3d"itemType" class\x3d"wideselect"  data-dojo-type\x3d"dijit/form/Select" name\x3d\'itemType\' data-dojo-observer\x3d"changeType, changePlaceholder, deleteGrid"\x3e\r\n          \x3coption value\x3d"file" selected\x3e${i18n.itemTypeCpu}\x3c/option\x3e\r\n          \x3coption value\x3d"url"\x3e${i18n.itemTypeWeb}\x3c/option\x3e\r\n          \x3coption value\x3d"app"\x3e${i18n.itemTypeApp}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n        \x3cdiv class\x3d"type app" style\x3d"display:none;"\x3e\r\n          \x3cfieldset class\x3d"font-size--1"\x3e\r\n            \x3clegend class\x3d"trailer-quarter padding-leader-half font-size-0"\x3e${i18n.type}${i18n.colon}\x3c/legend\x3e\r\n            \x3cdiv class\x3d"indent"\x3e\r\n                \x3cinput id\x3d"apimap" data-dojo-type\x3d"dijit/form/RadioButton" class\x3d"radio" name\x3d"app" value\x3d"apimap" checked data-dojo-observer\x3d"changeApiType, changePlaceholder" /\x3e\r\n                \x3clabel for\x3d"apimap" class\x3d"trailer-0 inline-block"\x3e${i18n.appMap}\x3c/label\x3e\r\n                \x3cinput id\x3d"apimobile" data-dojo-type\x3d"dijit/form/RadioButton" class\x3d"radio margin-left-1" name\x3d"app" value\x3d"apimobile" data-dojo-observer\x3d"changeApiType, changePlaceholder" /\x3e\r\n                \x3clabel for\x3d"apimobile" class\x3d"trailer-0 inline-block"\x3e${i18n.appMobile}\x3c/label\x3e\r\n                \x3cinput id\x3d"app" data-dojo-type\x3d"dijit/form/RadioButton" style\x3d"display:none;" class\x3d"radio orgOnly margin-left-1" name\x3d"app" value\x3d"desktopapplication" data-dojo-observer\x3d"changeApiType"/\x3e\r\n                \x3clabel for\x3d"app" class\x3d"orgOnly inline-block trailer-0" style\x3d"display:none;"\x3e${i18n.desktop}\x3c/label\x3e\r\n                \x3cinput id\x3d"apiapp" data-dojo-type\x3d"dijit/form/RadioButton" style\x3d"display:none;" class\x3d"radio orgOnly margin-left-1" name\x3d"app" value\x3d"apiapp" data-dojo-observer\x3d"changeApiType" /\x3e\r\n                \x3clabel for\x3d"apiapp" class\x3d"orgOnly inline-block trailer-0" style\x3d"display:none;"\x3e${i18n.appApplication}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"indent esriLeadingMargin73 orgOnly adminOnly portalAppExtension" style\x3d"display:none;"\x3e\r\n                \x3cinput id\x3d"appbldrext" data-dojo-type\x3d"dijit/form/RadioButton" style\x3d"display:none;" class\x3d"radio orgOnly adminOnly" name\x3d"app" value\x3d"appbldrext" data-dojo-observer\x3d"changeApiType" /\x3e\r\n                \x3clabel for\x3d"appbldrext" class\x3d"orgOnly adminOnly inline-block trailer-0" style\x3d"display:none;"\x3e${i18n.appBldrExtension}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n          \x3c/fieldset\x3e\r\n        \x3c/div\x3e\r\n        \x3cfieldset class\x3d"type app api leader-half" style\x3d"display:none;"\x3e\r\n          \x3cspan class\x3d"indent esriLeadingMargin73 inline-block left margin-right-1"\x3e\r\n            \x3clabel for\x3d"purpose" class\x3d"trailer-0 font-size--1"\x3e${i18n.itemPurpose}${i18n.colon}\x3c/label\x3e\r\n              \x3cselect id\x3d"purpose" data-dojo-type\x3d"dijit/form/Select" name\x3d"purpose"\x3e\r\n                  \x3coption value\x3d"Ready To Use" selected\x3e${i18n.itemReady}\x3c/option\x3e\r\n                  \x3coption value\x3d"Configurable"\x3e${i18n.itemConfigurable}\x3c/option\x3e\r\n                  \x3coption value\x3d"selfConfigured"\x3e${i18n.itemSelfConfigurable}\x3c/option\x3e\r\n                  \x3coption value\x3d"configurableApp"\x3e${i18n.itemConfigurableApp}\x3c/option\x3e\r\n                  \x3coption value\x3d"Code Sample"\x3e${i18n.itemCode}\x3c/option\x3e\r\n              \x3c/select\x3e\r\n          \x3c/span\x3e\r\n          \x3cspan class\x3d"indent esriLeadingMargin73 esriLeadingMargin2 apiType apimap inline-block margin-right-1 left"\x3e\r\n            \x3clabel for\x3d"desktopapi" class\x3d"trailer-0 font-size--1"\x3e${i18n.itemAPI}${i18n.colon}\x3c/label\x3e\r\n              \x3cselect id\x3d"desktopapi" data-dojo-type\x3d"dijit/form/Select" name\x3d"desktopapi"\x3e\r\n                  \x3coption value\x3d"JavaScript" selected\x3e${i18n.itemJS}\x3c/option\x3e\r\n                  \x3coption value\x3d"Flex"\x3e${i18n.itemFlex}\x3c/option\x3e\r\n                  \x3coption value\x3d"Silverlight"\x3e${i18n.itemSL}\x3c/option\x3e\r\n                  \x3coption value\x3d"Web ADF"\x3e${i18n.itemADF}\x3c/option\x3e\r\n                  \x3coption value\x3d"Other"\x3e${i18n.itemOther}\x3c/option\x3e\r\n              \x3c/select\x3e\r\n          \x3c/span\x3e\r\n          \x3cspan class\x3d"indent esriLeadingMargin73 esriLeadingMargin2 apiType apimobile inline-block left margin-right-1" style\x3d"display:none;"\x3e\r\n            \x3clabel for\x3d"mobileapi" class\x3d"trailer-0"\x3e${i18n.itemSDK}${i18n.colon}\x3c/label\x3e\r\n              \x3cselect id\x3d"mobileapi" data-dojo-type\x3d"dijit/form/Select" name\x3d"mobileapi"\x3e\r\n                  \x3coption value\x3d"ArcGIS for Android"\x3e${i18n.itemAndroid}\x3c/option\x3e\r\n                  \x3coption value\x3d"ArcGIS for iPhone"\x3e${i18n.itemIOS}\x3c/option\x3e\r\n                  \x3coption value\x3d"JavaScript" selected\x3e${i18n.itemJS}\x3c/option\x3e\r\n                  \x3coption value\x3d"Flex"\x3e${i18n.itemFlex}\x3c/option\x3e\r\n                  \x3coption value\x3d"Windows Mobile"\x3e${i18n.itemMobile}\x3c/option\x3e\r\n                  \x3coption value\x3d"ArcGIS for Windows Phone"\x3e${i18n.itemWindows}\x3c/option\x3e\r\n                  \x3coption value\x3d"ArcGIS for Windows Store"\x3e${i18n.itemWindowsStore}\x3c/option\x3e\r\n                  \x3coption value\x3d"ArcGIS for Windows Universal"\x3e${i18n.itemWindowsUniversal}\x3c/option\x3e\r\n              \x3c/select\x3e\r\n          \x3c/span\x3e\r\n          \x3cspan class\x3d"indent esriLeadingMargin73 esriLeadingMargin05 apiType desktopapplication inline-block margin-right-1 left" style\x3d"display:none;"\x3e\r\n            \x3clabel for\x3d"apidesktopapp" class\x3d"trailer-0"\x3e${i18n.itemPlatform}${i18n.colon}\x3c/label\x3e\r\n              \x3cselect id\x3d"apidesktopapp" data-dojo-type\x3d"dijit/form/Select" name\x3d"apidesktopapp"\x3e\r\n                  \x3coption value\x3d"Java"\x3eJava\x3c/option\x3e\r\n                  \x3coption value\x3d".NET\u2013Windows Desktop"\x3e.NET\u2013Windows Desktop\x3c/option\x3e\r\n                  \x3coption value\x3d"OS X" selected\x3eOS X\x3c/option\x3e\r\n                  \x3coption value\x3d"Qt"\x3eQt\x3c/option\x3e\r\n                  \x3coption value\x3d"WPF"\x3eWPF\x3c/option\x3e\r\n              \x3c/select\x3e\r\n          \x3c/span\x3e\r\n        \x3c/fieldset\x3e\r\n        \x3cdiv class\x3d"type file desktopapplication"\x3e\r\n            \x3clabel for\x3d"file" class\x3d"trailer-quarter leader-half"\x3e${i18n.itemFile}${i18n.colon}\x3c/label\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"fileDiv"\x3e\r\n              \x3cinput id\x3d"file" class\x3d"required" size\x3d"41" type\x3d"file" name\x3d"file" data-dojo-attach-point\x3d"fileInput"\x3e\r\n            \x3c/span\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"type url trailer-half" style\x3d"display:none;"\x3e\r\n          \x3cfieldset\x3e\r\n            \x3clegend class\x3d"trailer-quarter leader-half"\x3e${i18n.type}${i18n.colon}\x3c/legend\x3e\r\n            \x3cdiv class\x3d"webTypes block-group block-group-2-up"\x3e\r\n              \x3cspan class\x3d"block"\x3e\r\n                \x3cinput id\x3d"ags" data-dojo-type\x3d"dijit/form/RadioButton" checked value\x3d"ags" class\x3d"radio" name\x3d"web" data-dojo-observer\x3d"changeServiceType, changePlaceholder, deleteGrid" /\x3e\r\n                \x3clabel for\x3d"ags" class\x3d"inline-block trailer-0"\x3e${i18n.webService}\x3c/label\x3e\r\n              \x3c/span\x3e\r\n              \x3cspan class\x3d"block"\x3e\r\n                \x3cinput id\x3d"kml" data-dojo-type\x3d"dijit/form/RadioButton" value\x3d"kml" name\x3d"web" class\x3d"radio" data-dojo-observer\x3d"changeServiceType, changePlaceholder, deleteGrid" /\x3e\r\n                \x3clabel for\x3d"kml" class\x3d"inline-block trailer-0"\x3e${i18n.webKML}\x3c/label\x3e\r\n              \x3c/span\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriLeadingMargin73 webTypes block-group block-group-2-up"\x3e\r\n              \x3cspan class\x3d"block"\x3e\r\n                \x3cinput id\x3d"ogc" data-dojo-type\x3d"dijit/form/RadioButton" value\x3d"ogc" name\x3d"web" class\x3d"radio" data-dojo-observer\x3d"changeServiceType, changePlaceholder, deleteGrid" /\x3e\r\n                \x3clabel for\x3d"ogc" class\x3d"inline-block trailer-0"\x3e${i18n.webOGC}\x3c/label\x3e\r\n              \x3c/span\x3e\r\n              \x3cspan class\x3d"block"\x3e\r\n                \x3cinput id\x3d"webWFS" data-dojo-type\x3d"dijit/form/RadioButton" value\x3d"wfs" name\x3d"web" class\x3d"radio" data-dojo-observer\x3d"changeServiceType, changePlaceholder, deleteGrid" /\x3e\r\n                \x3clabel for\x3d"webWFS" class\x3d"inline-block trailer-0"\x3e${i18n.webWFS}\x3c/label\x3e\r\n              \x3c/span\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriLeadingMargin73 webTypes block-group block-group-2-up"\x3e\r\n              \x3cspan class\x3d"block"\x3e\r\n                \x3cinput id\x3d"webWMTS" data-dojo-type\x3d"dijit/form/RadioButton" value\x3d"wmts" name\x3d"web" class\x3d"radio" data-dojo-observer\x3d"changeServiceType, changePlaceholder, deleteGrid" /\x3e\r\n                \x3clabel for\x3d"webWMTS" class\x3d"inline-block trailer-0"\x3e${i18n.webWMTS}\x3c/label\x3e\r\n              \x3c/span\x3e\r\n              \x3cspan class\x3d"block"\x3e\r\n                \x3cinput id\x3d"document" data-dojo-type\x3d"dijit/form/RadioButton" style\x3d"display:none;" value\x3d"document" name\x3d"web" class\x3d"orgOnly radio" data-dojo-observer\x3d"changeServiceType, changePlaceholder, deleteGrid" /\x3e\r\n                \x3clabel for\x3d"document" class\x3d"orgOnly inline-block trailer-0" style\x3d"display:none;"\x3e${i18n.webDocument}\x3c/label\x3e\r\n              \x3c/span\x3e\r\n            \x3c/div\x3e\r\n          \x3c/fieldset\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"type url app api opext appbldrext" style\x3d"display:none;"\x3e\r\n          \x3clabel id\x3d"urlLbl" for\x3d"itemUrl" class\x3d"trailer-0 font-size--1"\x3e${i18n.itemURL}\x3c/label\x3e\r\n          \x3cinput dir\x3d"ltr" id\x3d"itemUrl" data-dojo-type\x3d"dijit/form/TextBox" trim\x3d"true" name\x3d"url" data-dojo-observer\x3d"_getUrlAndType" placeHolder\x3d"${i18n.urlRules}" data-dojo-attach-point\x3d"_urlInput"\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_inlineError"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!--\x3ca data-dojo-attach-point\x3d"supportedItems" class\x3d"indent esriLeadingMargin73 nosvcauth all" target\x3d"_blank" href\x3d""\x3e${i18n.itemSupportedItems}\x3c/a\x3e--\x3e\r\n        \x3c!--\x3cbr /\x3e--\x3e\r\n        \x3cfieldset class\x3d"type svcauth indent esriLeadingMargin73 trailer-0 leader-half" style\x3d"display:none;"\x3e\r\n          \x3cdiv\x3e${i18n.secureservice}\x3c/div\x3e\r\n          \x3cdiv class\x3d"credentials"\x3e\x3c/div\x3e\r\n          \x3cdiv class\x3d"storecredentials"\x3e\r\n            \x3cdiv\x3e\r\n              \x3cinput id\x3d"nostoreauth" data-dojo-type\x3d"dijit/form/RadioButton" class\x3d"radio" checked value\x3d"nostore" name\x3d"storeauth" data-dojo-observer\x3d"changeStoreCredentials" /\x3e\r\n              \x3clabel for\x3d"nostoreauth" class\x3d"wide display-inline"\x3e${!i18n.nostoreauth}\x3c/label\x3e\r\n              \x3cbr /\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv\x3e\r\n              \x3cinput id\x3d"storeauth" data-dojo-attach-point\x3d"_storeAuth" data-dojo-type\x3d"dijit/form/RadioButton" class\x3d"radio" value\x3d"store" name\x3d"storeauth" data-dojo-observer\x3d"changeStoreCredentials"/\x3e\r\n              \x3clabel for\x3d"storeauth" class\x3d"wide display-inline"\x3e${!i18n.storeauth}\x3c/label\x3e\r\n              \x3cbr /\x3e\r\n              \x3ca data-dojo-attach-point\x3d"learnMore" target\x3d"_blank" href\x3d""\x3e${i18n.learnMore}\x3c/a\x3e\r\n              \x3cbr /\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/fieldset\x3e\r\n        \x3cspan class\x3d"indent type zip esriLeadingMargin73 inline-block leader-half" style\x3d"display:none;"\x3e\r\n          \x3clabel for\x3d"archiveSelect" class\x3d"trailer-0"\x3e${i18n.itemContents}\x3c/label\x3e\r\n          \x3cselect data-dojo-type\x3d"dijit/form/Select" id\x3d"archiveSelect" name\x3d"archiveSelect" data-dojo-observer\x3d"changeArchive"\x3e\r\n            \x3coption value\x3d"shapefile" selected\x3e${i18n.typeShapefile}\x3c/option\x3e\r\n            \x3coption value\x3d"filegeodatabase"\x3e${i18n.itemFileGeodatabase}\x3c/option\x3e\r\n            \x3coption value\x3d"dtemp"\x3e${i18n.typeDesktopTemplate}\x3c/option\x3e\r\n            \x3coption value\x3d"mtemp"\x3e${i18n.typeMapTemplate}\x3c/option\x3e\r\n            \x3coption value\x3d"gpsample"\x3e${i18n.typeGPSample}\x3c/option\x3e\r\n            \x3coption value\x3d"codesample"\x3e${i18n.itemCode}\x3c/option\x3e\r\n            \x3coption value\x3d"arcpadpackage"\x3e${i18n.itemArcPadPackage}\x3c/option\x3e\r\n            \x3coption value\x3d"caddrawing"\x3e${i18n.itemCadDrawing}\x3c/option\x3e\r\n            \x3coption value\x3d"csvcollection"\x3e${i18n.itemCsvCollection}\x3c/option\x3e\r\n            \x3coption value\x3d"kmlcollection"\x3e${i18n.itemKmlCollection}\x3c/option\x3e\r\n          \x3c/select\x3e\r\n        \x3c/span\x3e\r\n        \x3cspan class\x3d"indent type codesample esriLeadingMargin73 inline-block leader-half margin-left-1" style\x3d"display:none;"\x3e\r\n          \x3clabel for\x3d"codesample" class\x3d"trailer-0"\x3e${i18n.itemLanguage}${i18n.colon}\x3c/label\x3e\r\n          \x3cselect data-dojo-type\x3d"dijit/form/Select" name\x3d"codesample" id\x3d"codesample" style\x3d"width:120px;"\x3e\r\n            \x3coption value\x3d"C"\x3eC\x3c/option\x3e\r\n            \x3coption value\x3d"C#"\x3eC#\x3c/option\x3e\r\n            \x3coption value\x3d"C++"\x3eC++\x3c/option\x3e\r\n            \x3coption value\x3d"Java" selected\x3eJava\x3c/option\x3e\r\n            \x3coption value\x3d"Perl"\x3ePerl\x3c/option\x3e\r\n            \x3coption value\x3d"PHP"\x3ePHP\x3c/option\x3e\r\n            \x3coption value\x3d"Python"\x3ePython\x3c/option\x3e\r\n            \x3coption value\x3d"Ruby"\x3eRuby\x3c/option\x3e\r\n            \x3coption value\x3d"SQL"\x3eSQL\x3c/option\x3e\r\n            \x3coption value\x3d"VB"\x3eVB\x3c/option\x3e\r\n            \x3coption value\x3d"VB"\x3eWPF\x3c/option\x3e\r\n            \x3coption value\x3d"Other"\x3eOther\x3c/option\x3e\r\n          \x3c/select\x3e\r\n        \x3c/span\x3e\r\n        \x3cspan class\x3d"indent type arcpadpackage esriLeadingMargin73 inline-block leader-half margin-left-1" style\x3d"display:none;"\x3e\r\n          \x3clabel for\x3d"arcpadpackage" class\x3d"trailer-0"\x3e${i18n.type}${i18n.colon}\x3c/label\x3e\r\n          \x3cselect data-dojo-type\x3d"dijit/form/Select" name\x3d"arcpadpackage" id\x3d"arcpadpackage"\x3e\r\n            \x3coption value\x3d"ArcPad Project"\x3e${i18n.itemArcPadProject}\x3c/option\x3e\r\n            \x3coption value\x3d"ArcPad Template"\x3e${i18n.itemArcPadTemplate}\x3c/option\x3e\r\n          \x3c/select\x3e\r\n        \x3c/span\x3e\r\n        \x3cspan class\x3d"indent type stylx esriLeadingMargin73 inline-block leader-half" style\x3d"display:none;"\x3e\r\n          \x3clabel for\x3d"stylx" class\x3d"trailer-0"\x3e${i18n.type}${i18n.colon}\x3c/label\x3e\r\n          \x3cselect data-dojo-type\x3d"dijit/form/Select" id\x3d"stylx" name\x3d"stylx"\x3e\r\n            \x3coption value\x3d"2d"\x3e${i18n.2d}\x3c/option\x3e\r\n            \x3coption value\x3d"3d"\x3e${i18n.3d}\x3c/option\x3e\r\n          \x3c/select\x3e\r\n        \x3c/span\x3e\r\n        \x3cdiv class\x3d"type imageServiceType" style\x3d"display:none;"\x3e\r\n          \x3cfieldset\x3e\r\n            \x3clegend class\x3d"trailer-quarter leader-half"\x3e\r\n              \x3cspan class\x3d"margin-right-quarter"\x3e${i18n.addLayerFromUrlDlg.addImageryAs}\x3c/span\x3e\x3cspan data-dojo-attach-point\x3d"_imageServiceTypeInfo"\x3e\x3c/span\x3e\r\n            \x3c/legend\x3e\r\n            \x3cdiv class\x3d"block-group block-group-2-up"\x3e\r\n              \x3cspan class\x3d"block"\x3e\r\n                \x3cinput id\x3d"dynamicImagery" data-dojo-type\x3d"dijit/form/RadioButton" value\x3d"ImageServer" class\x3d"radio" name\x3d"imageServiceType" data-dojo-observer\x3d"changeImageServiceType" /\x3e\r\n                \x3clabel for\x3d"dynamicImagery" class\x3d"inline-block trailer-0"\x3e${i18n.addLayerFromUrlDlg.dynamicImagery}\x3c/label\x3e\r\n              \x3c/span\x3e\r\n              \x3cspan class\x3d"block"\x3e\r\n                \x3cinput id\x3d"tiledImagery" data-dojo-attach-point\x3d"_defaultImageServiceTypeNode" data-dojo-type\x3d"dijit/form/RadioButton" checked value\x3d"TiledImageServer" class\x3d"radio" name\x3d"imageServiceType" data-dojo-observer\x3d"changeImageServiceType" /\x3e\r\n                \x3clabel for\x3d"tiledImagery" class\x3d"inline-block trailer-0"\x3e${i18n.addLayerFromUrlDlg.tiledImagery}\x3c/label\x3e\r\n              \x3c/span\x3e\r\n            \x3c/div\x3e\r\n          \x3c/fieldset\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"_publishServiceDiv" class\x3d"indent publish type esriLeadingMargin73" style\x3d"display:none;"\x3e\r\n      \x3cfieldset data-dojo-attach-point\x3d"_publishNode" class\x3d"type publish trailer-half"\x3e\r\n        \x3cinput id\x3d"enablePublishing" data-dojo-attach-point\x3d"_enablePublishing" name\x3d"enablePublishing" data-dojo-type\x3d"dijit/form/CheckBox" checked data-dojo-observer\x3d"onPublishCheck"\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"_enablePublishingLabel" for\x3d"enablePublishing" class\x3d"display-inline"\x3e${i18n.publishService}\x3c/label\x3e\r\n      \x3c/fieldset\x3e\r\n    \x3c/div\x3e\r\n    \x3cfieldset class\x3d"fieldset-checkbox"\x3e\r\n      \x3cdiv class\x3d"title trailer-1"\x3e\r\n        \x3clabel for\x3d"title"\x3e${i18n.itemTitle}${i18n.colon}\x3c/label\x3e\r\n        \x3cinput id\x3d"title" data-dojo-type\x3d"dijit/form/TextBox" trim\x3d"true" class\x3d"required" name\x3d"title" placeHolder\x3d"${i18n.titleRules}"\x3e\r\n        \x3cbr /\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"hide categories-container"\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"_categoriesLbl" class\x3d"trailer-0" for\x3d"addItemCategoryPicker"\x3e\r\n          ${i18n.categories}${i18n.colon}\r\n        \x3c/label\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_categoriesContainer" id\x3d"addItemCategoryPicker"\x3e\x3c/div\x3e\r\n\r\n      \x3c/div\x3e\r\n      \x3cdiv\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"_tagsLbl" class\x3d"tagLbl" for\x3d"tags"\x3e${i18n.itemTags}${i18n.colon}\x3c/label\x3e\r\n        \x3cinput id\x3d"tags" data-dojo-attach-point\x3d"_tags" data-dojo-type\x3d"esri/dijit/Tags" name\x3d"tags" data-dojo-props\x3d"minWidth:\'450px\',maxWidth:\'450px\'"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n    \x3cdiv class\x3d\'subtable opextwarning opextwarningmsg esriLeadingMargin73\' style\x3d"display:none;"\x3e\r\n      \x3cdiv\x3e${i18n.opExtensionMsg}\x3c/div\x3e\r\n      \x3cul\x3e\r\n        \x3cli class\x3d"useDataFromView opextwarningmsg" style\x3d"display:none;"\x3e${i18n.manifestWarnings.useDataFromView}\x3c/li\x3e\r\n        \x3cli class\x3d"usePortalServices opextwarningmsg" style\x3d"display:none;"\x3e${i18n.manifestWarnings.usePortalServices}\x3c/li\x3e\r\n        \x3cli class\x3d"useExternalAGSServices opextwarningmsg" style\x3d"display:none;"\x3e${i18n.manifestWarnings.useExternalAGSServices}\x3c/li\x3e\r\n      \x3c/ul\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d\'subtable hosted\' style\x3d"display:none;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_publishCSVDiv" class\x3d"publish type" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"allExcelSheets xlsx trailer-half" style\x3d"display:none;"\x3e\r\n          \x3clabel for\x3d"allExcelSheets" class\x3d"trailer-0"\x3e\x3cspan class\x3d"padding-right-1"\x3e${i18n.allExcelSheets}${i18n.colon}\x3c/span\x3e\r\n            \x3cselect id\x3d"allExcelSheets" data-dojo-attach-point\x3d"_allExcelSheets" data-dojo-type\x3d"dijit/form/Select" style\x3d"width:375px;" maxHeight\x3d"200" name\x3d"allExcelSheets" data-dojo-attach-event\x3d"onChange:onChangeExcelSheet"\x3e\x3c/select\x3e\r\n          \x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d\'csv xlsx trailer-half\' style\x3d"display:none;"\x3e\r\n          \x3cdiv class\x3d"padding-right-1 trailer-0"\x3e${i18nCSV.locateUsing}\x3c/div\x3e\r\n          \x3clabel class\x3d"geocode-input-wrapper csv xlsx portal noGeocode padding-right-1 trailer-0"\x3e\r\n            \x3cinput id\x3d"locationTypes" data-dojo-type\x3d"dijit/form/RadioButton" class\x3d"radio csv xlsx portal noGeocode" name\x3d"geocode" value\x3d"locationTypes" checked data-dojo-observer\x3d"onChangeGeocode" /\x3e\r\n            ${i18n.latLong}\r\n          \x3c/label\x3e\r\n          \x3clabel class\x3d"geocode-input-wrapper csv xlsx portal padding-right-1 trailer-0"\x3e\r\n            \x3cinput id\x3d"addressTypes" data-dojo-type\x3d"dijit/form/RadioButton" class\x3d"radio csv xlsx portal" name\x3d"geocode"     value\x3d"addressTypes" data-dojo-observer\x3d"onChangeGeocode" /\x3e\r\n            ${i18n.address}\r\n          \x3c/label\x3e\r\n          \x3clabel class\x3d"geocode-input-wrapper noGeocode csv xlsx portal tableOnly padding-right-1 trailer-0"\x3e\r\n            \x3cinput id\x3d"tableOnly" data-dojo-type\x3d"dijit/form/RadioButton" class\x3d"radio csv xlsx portal noGeocode tableOnly" name\x3d"geocode"\r\n              value\x3d"none" data-dojo-observer\x3d"onChangeGeocode" /\x3e\r\n            ${i18n.table}\r\n          \x3c/label\x3e\r\n\r\n          \x3cdiv class\x3d"leader-half clearfix flex flex-column"\x3e\r\n            \x3cspan\x3e\r\n              \x3cdiv class\x3d\'multigeocode left\'\x3e\r\n                \x3cspan\x3e\r\n                  \x3clabel for\x3d"geocoderSelect" class\x3d"trailer-0"\x3e${i18nCSV.selectGeocoder}\x3c/label\x3e\r\n                  \x3cselect id\x3d"geocoderSelect" style\x3d"margin-top: 0px; max-width: 75%;" data-dojo-attach-point\x3d"_geocoderSelect" data-dojo-type\x3d"dijit/form/Select" maxHeight\x3d"200" name\x3d"geocodeAddress"\x3e\x3c/select\x3e\x3c!-- data-dojo-observer\x3d"onChangeGeocoder"--\x3e\r\n                \x3c/span\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d\'csv xlsx geocode\'\x3e\r\n                \x3cspan\x3e\r\n                \x3clabel for\x3d"geocodeAddress" class\x3d"trailer-0"\x3e${i18nCSV.inLabel}\x3c/label\x3e\r\n                \x3cselect id\x3d"geocodeAddress" style\x3d"margin-top: 0px; max-width: 75%;" data-dojo-attach-point\x3d"_countryCodes" data-dojo-type\x3d"dijit/form/Select" maxHeight\x3d"200" name\x3d"geocodeAddress" data-dojo-attach-event\x3d"onChange:onChangeCountry"\x3e\x3c/select\x3e\x3c!-- data-dojo-observer\x3d"onChangeCountry"--\x3e\r\n              \x3c/div\x3e\r\n              \x3c/span\x3e\r\n            \x3c/span\x3e\r\n            \x3cdiv class\x3d\'geocode-output leader-half\'\x3e\r\n              \x3clabel class\x3d"trailer-0 inline-block"\x3e${i18nCSV.outputFields}\x3c/label\x3e\r\n              \x3ca class\x3d"esriHelpIcon" data-dojo-attach-point\x3d"_locatorOutputHelpIcon" title\x3d"${i18n.learnMore}" href\x3d"#" target\x3d"_blank"\x3e\x3c/a\x3e\r\n              \x3cdiv class\x3d\'geocode-output__radio\'\x3e\r\n                \x3clabel class\x3d"geocode-input-wrapper csv xlsx padding-right-1 trailer-0" for\x3d"geometryOutput"\x3e\r\n                  \x3cinput id\x3d"geometryOutput" data-dojo-type\x3d"dijit/form/RadioButton" class\x3d"radio csv xlsx" value\x3d"GeometryOnly" name\x3d"geocodeFields" checked data-dojo-observer\x3d"onChangeFields" /\x3e\r\n                  ${i18nCSV.outputFieldTypes.geometryOnly}\r\n                \x3c/label\x3e\r\n                \x3clabel class\x3d"geocode-input-wrapper csv xlsx padding-right-1 trailer-0" for\x3d"minimalOutput"\x3e\r\n                  \x3cinput id\x3d"minimalOutput" data-dojo-type\x3d"dijit/form/RadioButton" class\x3d"radio csv xlsx portal" value\x3d"Minimal" name\x3d"geocodeFields" data-dojo-observer\x3d"onChangeFields" /\x3e\r\n                  ${i18nCSV.outputFieldTypes.minimal}\r\n                \x3c/label\x3e\r\n                \x3clabel class\x3d"geocode-input-wrapper csv xlsx padding-right-1 trailer-0" for\x3d"allOutput"\x3e\r\n                  \x3cinput id\x3d"allOutput" data-dojo-type\x3d"dijit/form/RadioButton" class\x3d"radio csv xlsx"\r\n                    value\x3d"AllFields" name\x3d"geocodeFields" data-dojo-observer\x3d"onChangeFields" /\x3e\r\n                  ${i18nCSV.outputFieldTypes.allFields}\r\n                \x3c/label\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cspan data-dojo-attach-point\x3d"geocodeReviewMsg" class\x3d\'csv xlsx font-size--1\' style\x3d"display:none;"\x3e${i18n.review}\x3c/span\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d\'gridNode\' class\x3d"grid leader-quarter add-item-geocode-table"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"timeZones csv xlsx leader-1" style\x3d"display:none;"\x3e\r\n        \x3clabel for\x3d"timeZones" class\x3d"trailer-0"\x3e\x3cspan class\x3d"padding-right-1"\x3e${i18n.timeZone}${i18n.colon}\x3c/span\x3e\r\n          \x3cselect id\x3d"timeZones" data-dojo-attach-point\x3d"_timeZones" data-dojo-type\x3d"dijit/form/Select" style\x3d"width:375px;" maxHeight\x3d"200" name\x3d"timeZone"\x3e\x3c/select\x3e\r\n          \x3ca class\x3d"esriHelpIcon" data-dojo-attach-point\x3d"_timezoneHelpIcon" title\x3d"${i18n.timezoneHelpTip}" href\x3d"#" target\x3d"_blank"\x3e\x3c/a\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"wfsNode" class\x3d"wfs leader-1 trailer-1" style\x3d"display:none;"\x3e\r\n          \x3clabel for\x3d"wfsLayers"\x3e${i18n.addLayerFromUrlDlg.layerLabel}\x3c/label\x3e\r\n          \x3cselect id\x3d"wfsLayers" data-dojo-attach-point\x3d"_wfsLayers" data-dojo-type\x3d"dijit/form/Select" maxHeight\x3d"200" name\x3d"wfsLayers"\x3e\x3c/select\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_wfsComplexOptions" class\x3d"complexOptions esriLeadingMargin7 trailer-1" style\x3d"display:none"\x3e\r\n              \x3clabel for\x3d"wfsGeometryType" data-dojo-attach-point\x3d"_wfsGeometryTypeMsg"\x3e${i18n.addLayerFromUrlDlg.wfsGeometryTypeMsg}\x3c/label\x3e\r\n              \x3cselect id\x3d"wfsGeometryType" data-dojo-attach-point\x3d"_wfsGeometryType" data-dojo-type\x3d"dijit/form/Select" maxHeight\x3d"200" name\x3d"wfsGeometryTypes" aria-label\x3d"${i18n.addLayerFromUrlDlg.wfsGeometryTypeMsg}"\x3e\r\n                  \x3coption value\x3d"none" selected\x3e${i18n.addLayerFromUrlDlg.chooseWFSGeometryType}\x3c/option\x3e\r\n                  \x3coption value\x3d"esriGeometryPoint"\x3e${i18n.addLayerFromUrlDlg.points}\x3c/option\x3e\r\n                  \x3coption value\x3d"esriGeometryPolyline"\x3e${i18n.addLayerFromUrlDlg.lines}\x3c/option\x3e\r\n                  \x3coption value\x3d"esriGeometryPolygon"\x3e${i18n.addLayerFromUrlDlg.polygons}\x3c/option\x3e\r\n              \x3c/select\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_tileMatrixSetInfoOptions" class\x3d"tileMatrixSetInfosOptions esriLeadingMargin7 leader-1" style\x3d"display:none"\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"_tileMatrixSetInfos" data-dojo-type\x3d"dijit/form/Select" style\x3d"width:442px;" maxHeight\x3d"200" name\x3d"tileMatrixInfos"\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"selectNotebookRuntimeContainer" class\x3d"hide"\x3e\r\n      \x3clabel for\x3d"selectNotebookRuntime"\x3e\r\n        ${i18n.notebookViewer.runtimeSelectDlg.selectRuntime}\r\n        \x3cselect id\x3d"selectNotebookRuntime" data-dojo-attach-point\x3d"selectNotebookRuntime" class\x3d"full-width"\x3e\r\n        \x3c/select\x3e\r\n      \x3c/label\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n\x3cdiv class\x3d"submitButtons leader-half trailer-half flex"\x3e\r\n    \x3cdiv class\x3d"flex flex-1"\x3e\r\n      \x3cspan data-dojo-attach-point\x3d"spinnerNode" class\x3d"hide flex-column-justify-center"\x3e${i18n.uploadingItem}\x3c/span\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_uploadProgressBar"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cinput data-dojo-type\x3d"dijit/form/Button" class\x3d"primary" id\x3d"addItem-btn" name\x3d"addItem" type\x3d"submit" label\x3d"${i18n.addItem}"\x3e\r\n    \x3cinput data-dojo-type\x3d"dijit/form/Button" class\x3d"cancel" name\x3d"cancel" type\x3d"button" data-dojo-observer\x3d"onCancel" label\x3d"${i18n.cancel}"\x3e\r\n\x3c/div\x3e\r\n\x3c/form\x3e\r\n'),
baseClass:"esriAGOAddItemForm",_requestParams:{f:"json"},_createItemUtil:arcgisonline.sharing.dijit.dialog._CreateItemUtilMixin,_publishPhotoCollection:arcgisonline.sharing.dijit.dialog._PublishImageCollection.PublishImageCollection,_imageryLayersInfoTipTemplate:S.cache("arcgisonline.sharing.dijit.dialog","templates/_ImageryLayersInfoTip.html",'\x3cdiv\x3e\r\n  \x3clabel class\x3d"leader-half trailer-quarter imagery-layer-title"\x3e${dynamicImagery}\x3c/label\x3e\r\n  \x3cdiv class\x3d"trailer-half"\x3e${dynamicImageryDesc}\x3c/div\x3e\r\n  \x3clabel class\x3d"leader-half trailer-quarter imagery-layer-title"\x3e${tiledImagery}\x3c/label\x3e\r\n  \x3cdiv class\x3d"trailer-half"\x3e${tiledImageryDesc}\x3c/div\x3e\r\n\x3c/div\x3e'),
_telemetryURLAttribute:"",_analyzedLocationTypes:[],itemAPI:arcgisonline.sharing.geow.Item,notebookUtil:arcgisonline.pages.utils.notebook,postMixInProperties:function(){this.inherited(arguments);this.i18nCSV=S.mixin({},S.i18n.getLocalization("arcgisonline","arcgisonline").CsvLocationDlg);this.i18nCommon=S.mixin({},S.i18n.getLocalization("arcgisonline","arcgisonline").common);this.i18n=S.mixin({},this.i18nCommon);this.i18n=S.mixin(this.i18n,S.i18n.getLocalization("arcgisonline","arcgisonline").addItemFrm);
this.i18n=S.mixin(this.i18n,{fileZipFormat:S.i18n.getLocalization("arcgisonline","arcgisonline").attachCodeDlg.fileZipFormat});this.i18n=S.mixin(this.i18n,{itemProperties:S.i18n.getLocalization("arcgisonline","arcgisonline").itemProperties});this.i18n=S.mixin(this.i18n,{addLayerFromUrlDlg:S.i18n.getLocalization("arcgisonline","arcgisonline").addLayerFromUrlDlg});this.i18n=S.mixin(this.i18n,{notebookViewer:S.i18n.getLocalization("arcgisonline","notebooks").notebookViewer});this.countryCodes=S.mixin({},
S.i18n.getLocalization("arcgisonline","arcgisonline").countryCodes);this.timeZones=S.mixin({},S.i18n.getLocalization("arcgisonline","arcgisonline").timeZones);this._imageryLayersInfoLabel=S.i18n.getLocalization("arcgisonline","arcgisonline").folders.weblayers.imagery;this._publishTypes={tilepackage:1,csv:1,shapefile:1,servicedefinition:1,filegeodatabase:1,geojson:1,json:1,vectortilepackage:1,scenepackage:1,featurecollection:1,xlsx:1,photocollection:1};this._maxFileSize=536870912E3;this._maxKmlFileSize=
10485760;this.changingGeocodeCountry=!1},startup:function(){this.inherited(arguments);this._loadConnections();this._util=arcgisonline.sharing.util;this._errorDlg=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance();this._choiceDlg=arcgisonline.sharing.dijit.dialog.ChoiceDlg.prototype.statics.getInstance();this._timezoneUtils=arcgisonline.sharing.dijit._TimezoneUtils.TimezoneUtils;this._user=S.mixin(this._util.getUser(),this.overrideUser||{});this._restBaseUrl=esriGeowConfig.allSSL?
esriGeowConfig.restBaseUrl.replace("http:/","https:/"):esriGeowConfig.restBaseUrl;this._restBaseUrl+=this._restBaseUrl.lastIndexOf("/")===this._restBaseUrl.length-1?"":"/";this._portalUrl=this._restBaseUrl+"portals";this._contentUri=this._restBaseUrl+"content";this._publishUri=this._contentUri+"/users/"+this._user.username;this._userContentUri=this._publishUri+(this.folder&&"/"!==this.folder?"/"+this.folder:"");this._geocodeServiceUrl=this._agoGeocodeServiceUrl="arcgis.com/arcgis/rest/services/world/geocodeserver";
this._geocodeServers=(this._helperServices=esriGeowConfig.self&&esriGeowConfig.self.helperServices)&&this._helperServices.geocode;this._rasterAnalyticsServer=this._helperServices&&this._helperServices.rasterAnalytics;this._isPortal=esriGeowConfig.self.isPortal;this._isCustomRole=esriGeowConfig.userRole&&esriGeowConfig.userRole.isCustom();this._isAdmin=esriGeowConfig.userRole&&esriGeowConfig.userRole.isBasedOnAdmin();this._roleCanPublishFeatures=(this._roleCanCreateItem=esriGeowConfig.userRole&&esriGeowConfig.userRole.canCreateItem())&&
esriGeowConfig.userRole.canPublishFeatures();this._roleCanPublishTiles=this._roleCanCreateItem&&esriGeowConfig.userRole.canPublishTiles();this._roleCanUseGeocode=this._roleCanCreateItem&&esriGeowConfig.userRole.canUseGeocode();this._roleCanPublishScenes=this._roleCanCreateItem&&this._roleCanPublishFeatures&&esriGeowConfig.userRole.canPublishScenes();if((this._geocodeServers=this._util.filterBatchGeocoders(this._geocodeServers,!this._roleCanUseGeocode))&&this._geocodeServers.length)this._roleCanUseGeocode=
!0,this._setGeocoder(this._geocodeServers[0].url),this._setGeocoderOptions(),2>this._geocodeServers.length&&S.query(".multigeocode").style("display","none");else{var c=this._util.filterNonWorldGeocoders(this._helperServices&&this._helperServices.geocode);this._geocodeServiceUrl=(c=c&&c.length?c[0]:null)&&c.url||(this._isPortal?null:this._geocodeServiceUrl)}this._isPortal&&this._rasterAnalyticsServer&&esri.isDefined(this._rasterAnalyticsServer.url)&&(this._publishTypes.imagecollection=1);esri.config.defaults.io.proxyUrl=
esriGeowConfig.proxyServer;if(!this.item){c=S.create("a",{className:"icon-ui-question margin-left-half font-size--1 help-icon",title:this.i18n.helpIconSupportedItems,href:esriGeowConfig.self&&esriGeowConfig.self.helpMap?esriGeowConfig.self.helpBase+esriGeowConfig.self.helpMap.m["120000456"]:"",target:"_blank"});var h=S.query(".dijitDialogTitleBar",this.dialog.domNode);S.place(c,h[0],1)}this._requestParams.token=this._user.token;this._basicStandby=new f.widget.Standby({target:this.dialog&&this.dialog.domNode||
this.containerNode,opacity:.45});S.body().appendChild(this._basicStandby.domNode);this._basicStandby.startup();this._serviceInfoPane=new arcgisonline.sharing.dijit.ServiceInfo({},S.query(".credentials")[0]);this._serviceInfoPane.setProtocolErrorHandler(S.hitch(this,"_showReloadDlg"));this._credentialConnect=S.connect(this._serviceInfoPane,"onCredentialChange",S.hitch(this,function(){clearTimeout(this._changeCredentialTimeout);this._changeCredentialTimeout=setTimeout(S.hitch(this,function(){var a=
this._serviceInfoPane.get("userInfo");a&&a.username&&a.password&&(this.disable(!1,this.i18n.fetching),this._getServiceInfo(this.elementValue("url"),this.elementValue("title"),this.item.type))}),250)}));this._fetchCountryCodes();this._fetchTimeZones();if(esriGeowConfig.self.user&&(esriGeowConfig.self.user.accountId||esriGeowConfig.self.user.orgId)){c="PhotoCollection ImageCollection Pages Numbers Keynote DeepLearningPackage GML".split(" ");var d=J.byId("archiveSelect");this.i18n.itemGML="GML";this._isAdmin&&
!this._isPortal&&c.unshift("AppBldrPackage");this.itemInfo=S.mixin(this.itemInfo,this.orgOnly);S.forEach(c,S.hitch(this,function(a){"PhotoCollection"===a&&this._isPortal||d.addOption({value:a.toLowerCase(),label:this.i18n["item"+a]})}));S.query(".orgOnly").style("display","");this._isAdmin?S.query(".adminOnly").style("display",""):S.query(".adminOnly").style("display","none")}this._isPortal||esriGeowConfig.isDebug||S.query(".portalAppExtension").style("display","none");this._util.loadUserTags(this._user.username).then(S.hitch(this,
function(a){this._tags.set("knownTags",a);this._updateUI();this.allowPublish&&this.item&&this._tags.set("tags",this.item.tags)}));this.message?S.attr(this._instructions,"innerHTML",this.message):S.addClass(this._instructions,"hide");if("file"===this.selected||"url"===this.selected||"app"===this.selected)esri.hide(this.itemType.domNode),esri.hide(this.addItemLbl),this.itemType.set("value",this.selected);"url"===this.selected&&(this._telemetryURLAttribute="ags");"app"===this.selected&&(this._telemetryURLAttribute=
"web mapping");this.allowPublish&&this.item&&this.startupForPublish();if(esriGeowConfig.self.hasCategorySchema){var b=function(a){this._categories=new arcgisonline.pages.dijit.CategoryPicker({categories:this.allowPublish&&this.item&&this.item.categories?this.item.categories:[],schema:a},this._categoriesContainer);this._categories.startup();arcgisonline.pages.utils.dom.showNodes(S.query(".categories-container",this.domNode))}.bind(this);this.item&&this.item.portal?this.item.portal.getCategories().then(b):
this._util.request({url:esriGeowConfig.restBaseUrl+"portals/self/categorySchema"}).then(S.hitch(this,function(a){b(a.categorySchema)}))}this._uploadProgressBar=new arcgisonline.pages.dijit.UploadProgressBar({},this._uploadProgressBar);this._uploadProgressBar.startup();this._uploadProgressBar.hide();c=S.string.substitute(this._imageryLayersInfoTipTemplate,this.i18n.addLayerFromUrlDlg);this._imageServiceInfoTooltip=new arcgisonline.pages.dijit.InfoTooltip({title:"",content:c,orient:["below-centered",
"above-centered"],buttonAriaLabel:this._imageryLayersInfoLabel,preventInfoButtonEventDefault:!0,dialogClasses:["info-tooltip"]},this._imageServiceTypeInfo);this.initNotebooks()},_setGeocoderOptions:function(){for(var c=[],h=0;h<this._geocodeServers.length;h++)c.push({label:this._geocodeServers[h].name,value:this._geocodeServers[h].url});this._geocoderSelect.set("options",c);this._geocoderSelect.set("value",this._geocodeServers[0].name,!1)},_setGeocoder:function(c){var h=this._findGeocoder(c);this._geocodeServiceUrl=
c;this._isAgoWorldGeocodeServer=this._util.isEsriWorldGeocoderNoProxy(h);this._isServiceProxyAgoWorldGeocodeServer=this._util.isEsriWorldGeocoderThroughProxy(h);this._isWorldGeocodeServer=this._isAgoWorldGeocodeServer||this._isServiceProxyAgoWorldGeocodeServer;c=!0;this._isAgoWorldGeocodeServer||this._isServiceProxyAgoWorldGeocodeServer||(c=!!h.batch);this._allowGeocode=(!this._isCustomRole||this._roleCanUseGeocode)&&(!this._isPortal&&c||this._isPortal&&(!this._isAgoWorldGeocodeServer||this._isServiceProxyAgoWorldGeocodeServer)&&
c)},_findGeocoder:function(c){var h=this._geocodeServers.filter(function(d){return d.url===c});return h&&h.length?h.shift():null},startupForPublish:function(){this._publishOnly=!0;this.elementValue("title",this.item.title);this.formWidgets.addItem.widget.set("label",this.i18n.publishItem);this.item.type=this.item.type.replace(/\s+/g,"").toLowerCase();this._updateUI("servicedefinition"===this.item.type?"title":null,this.item.type);this._updateUI("addNew","publishOld");this.removeClass("required",["file",
"url"]);"csv"===this.item.type&&this._analyze(this.item).then(S.hitch(this,"_loadCSV"));"xlsx"===this.item.type?this._analyze(this.item).then(S.hitch(this,"_loadExcel")):this.item.publishParameters={}},enable:function(){this.inherited(arguments);S.query("a",this.containerNode).removeClass("disabledLink");arcgisonline.pages.utils.dom.hideNode(this.spinnerNode);this._serviceInfoPane&&this._serviceInfoPane.set("disabled",!1)},disable:function(c,h){this.inherited(arguments);S.attr(this.spinnerNode,"innerHTML",
h||this.i18n.uploadingItem);arcgisonline.pages.utils.dom.showNode(this.spinnerNode);S.query("a",this.containerNode).addClass("disabledLink");this._serviceInfoPane&&this._serviceInfoPane.set("disabled",!0)},isValid:function(c){var h=this.gatherFormValues(this.i18n.errors.required),d=this.gatherClassState("required",this.i18n.errors.required),b=this.item&&this.item.type||null,a=this.elementValue("url");if(!c)for(var e in h)if(d[e]&&this._isEmpty(this.elementValue(e)))return this._showError(this.i18n.errors.required[e]);
if(this.item&&this.item.error)return this._showError(this.item.error);if(d.file||c&&"file"===c){if(window.FileReader){c=S.byId("file").files[0].size;if(!this._isPortal&&"kml"===this.item.type&&c>this._maxKmlFileSize)return this._showError(this.i18n.errors.kmlFileToLarge);if(c>this._maxFileSize)return this._showError(this.i18n.errors.fileToLarge)}a=this.item.name||this.item.url||this.item.title||this.item.item}return"desktopapplication"!==this.item.type||this.item.isZip?this._itemExists({name:a,title:this.elementValue("title"),
type:this.item.type}).then(S.hitch(this,function(q){if(q)return!1;if(!this.itemInfo[b.toLowerCase()])return this._showError({message:this.i18n.errors.unknownType.message});b=b&&b.toLowerCase()||null;if("opdashboardaddin"===b&&this._user&&"account_admin"!==this._user.role&&"account_publisher"!==this._user.role)return this._showError(this.i18n.errors.insuffientPrivs);if("opext"!==b||this._validateOpExtension(this._manifestInfo))if("appbldrext"!==b||this._validateAppBuilderExtension(this._manifestInfo)){if("ipynb"===
b&&!this.selectNotebookRuntime.value)return this._showError({message:this.i18n.notebookViewer.runtimeSelectDlg.selectRuntimeError});if(this.allowPublish&&!1!==this.publish&&b in this._publishTypes)return q=this.value.title.split(" ").join("_"),(this._isPortal?/[.@~`!#$%\^&*+=\-\[\]\\';,\/{}|\\":<>\?]/g.test(q):/[.@#%&*+=\-\\';,\/|\\":<>\?]/g.test(q))||120<q.length?this._showError(this.i18n.errors.invalidServiceTitle):"servicedefinition"!==b?this._serviceNameAvailable(this.item).then(S.hitch(this,
function(u){return u})):!0;q=this.value.title;var t=q.match(/^\d/)?!0:!1;return-1<q.indexOf("\x3c")||-1<q.indexOf("\x3e")?this._showError({message:this.i18n.itemProperties.error.badCharacter}):"wfs"===b&&t?this._showError({message:this.i18n.itemProperties.error.cantStartWithNumber}):this._reload?(this._showReloadDlg(),!1):!0}})):this._showError({message:this.i18n.fileZipFormat})},validate:function(c,h){return(new RegExp("^(?:"+h+")")).test(this.elementValue(c))?!0:this._showError(this.i18n.errors.invalid[c])},
_validateOpExtension:function(c){var h={Widget:1,"Map Tool":1,"Feature Action":1},d=[];if(!c)return this._showError({message:this.i18n.errors.opExtensionNotJson});if(!c.type||!1===c.type in h)return this._showError({message:this.i18n.errors.opExtensionInvalidType});if(!c.runtime||!c.runtime.path)return this._showError({message:this.i18n.errors.opExtensionNoPath});c&&(c.useDataFromView&&d.push(".useDataFromView"),c.usePortalServices&&d.push(".usePortalServices"),c.useExternalAGSServices&&d.push(".useExternalAGSServices"),
d.length&&(d.push(".opextwarning"),S.query(d.join(","),this.domNode).style("display","block")));return!0},_validateAppBuilderExtension:function(c){var h={HTML:1,HTML3D:1};return c?c.name?c.platform&&!1!==c.platform in h?c.version?c.wabVersion?!0:this._showError({message:this.i18n.errors.appBldrExtensionInvalidWabVersion}):this._showError({message:this.i18n.errors.appBldrExtensionInvalidVersion}):this._showError({message:this.i18n.errors.appBldrExtensionInvalidPlatform}):this._showError({message:this.i18n.errors.appBldrExtensionNoName}):
this._showError({message:this.i18n.errors.appBldrExtensionNotJson})},_isEmpty:function(c){return(this.trim?/^\s*$/:/^$/).test(c)},changeType:function(c){delete this._reload;this._updateUI("type",c);this._updateUI(null,"title");this._updateUI(null,"all");this.removeClass("required",["file","url"]);"file"!==c?(this.unregisterNode("file"),this.fileDiv.innerHTML=this.fileDiv.innerHTML,this.registerNode(S.byId("file")),S.disconnect(this._fileInputConnect),this._fileInputConnect=S.connect(S.byId("file"),
"onchange",S.hitch(this,"_getFileAndType")),this.addClass("required",["url"])):"url"!==c&&this.addClass("required",["file"]);"app"===c&&(c=this.elementValue("app"),this.changeApiType(c));this.elementValue("title","");this.elementValue("url","")},changeServiceType:function(c){delete this._reload;this._telemetryURLAttribute="ogc"===c?"wms":c;this._updateUI("wfs",null);this._updateUI("imageServiceType",null);esri.hide(this._tileMatrixSetInfoOptions);esri.hide(this._wfsComplexOptions);S.forEach(this._gridConnects,
S.disconnect);this.item=this.item||{};this.item.type=c},changeImageServiceType:function(c){this.item.type=c},changeApiType:function(c){this._telemetryURLAttribute={apimap:"web mapping",apimobile:"mobile",desktopapplication:"desktop",apiapp:"application",appbldrext:"app builder"}[c];var h="opext"===c||"appbldrext"===c;this._manifestInfo=null;this.item=this.item||{};this.item.type=c;this._updateUI("desktopapplication",null);this._updateUI("apiapp"===c||h?"api":null,"apiapp"===c||h?null:"api");h||S.query(".subtable.opextwarning",
this.domNode).style("display","none");this["apiapp"===c||"desktopapplication"===c?"removeClass":"addClass"]("required",["url"]);this["desktopapplication"===c?"addClass":"removeClass"]("required",["file"]);S.attr(S.byId("urlLbl"),"innerHTML",h?this.i18n.urlManifestLbl:this.i18n.itemURL);this._updateUI("apiType",c)},changeArchive:function(c){this.item=this.item||{};this.item.type=c;this._updateUI("publish");this._updateUI("codesample");this._updateUI("arcpadpackage");this._updateUI("shapefile",!this.allowPublish&&
c in this._publishTypes?null:c);this.allowPublish&&c in this._publishTypes&&(this._updateUI(null,"publish"),S.attr(this._enablePublishingLabel,"innerHTML",this.i18n["photocollection"===c?"publishPhotos":"tilepackage"!==c?"publishService":"publishNamedService"]))},changePlaceholder:function(c){this._inlineError.classList.remove("is-active");this.elementValue("title","");this.elementValue("url","");if(esriGeowConfig.isRightToLeft&&(9>S.has("ie")||5>S.has("trident")))this.formWidgets.url.widget.set("placeHolder",
"");else{c="url"===c?this._getRadioButtonValue("web"):c;var h=this.i18n.urlRules;if("ags"===c)h=this.i18n.urlRules;else if("app"===c||"apimobile"===c||"apimap"===c)h=this.i18n.urlRulesApp;else if("opext"===c||"appbldrext"===c)h=this.i18n.urlManifest;this.formWidgets.url.widget.set("placeHolder",h)}},changeStoreCredentials:function(c){},showUserTags:function(){arcgisonline.sharing.dijit.dialog.TagsDlg.prototype.statics.getInstance().show(this._user||null)},onPublishCheck:function(c){"csv"===this.item.type||
"xlsx"===this.item.type?(this._updateUI(c?null:"csv",c?"csv":null),this._updateUI(c?null:"grid",c?"grid":null),c&&"csv"===this.item.type&&"address"!==this.item.publishParameters.locationType&&this._updateUI("geocode",null),"xlsx"===this.item.type&&(this._updateUI(c?null:"xlsx",c?"xlsx":null),c&&"address"!==this.item.publishParameters.layers[0].locationType&&this._updateUI("geocode",null)),c&&this._grid.setStore(this._oStore)):"servicedefinition"===this.item.type&&this._updateUI(c?"title":null,c?null:
"title");this.publish=c},onCancel:function(){this.dialog&&(S.topic.publish("cancel-item-upload"),this.dialog.hide())},onSubmit:function(c){c.preventDefault();this._serviceInfoPane&&this._serviceInfoPane._editingCredential&&this._serviceInfoPane.domNode?J.byId("addItem-btn").focus():S.when(this.isValid(),S.hitch(this,function(h){if(!h)return!1;switch(this.elementValue("itemType")){case "url":this._addService();break;case "app":this._addApplication();break;default:this._addFile()}}))},onChangeGeocoder:function(c){this._setGeocoder(c);
this._analyzedLocationTypes=[];this.onChangeGeocode("addressTypes")},onChangeGeocode:function(c){void 0!==this.item.excelInfo?"none"===c?(this._grid.layout.setColumnVisibility(1,!1),this._grid.layout.setColumnVisibility(2,!1),S.attr(this.geocodeReviewMsg,"innerHTML",this.i18n.reviewTableExcel)):(this._grid.layout.setColumnVisibility("addressTypes"===c?1:2,!0),this._grid.layout.setColumnVisibility("addressTypes"===c?2:1,!1),S.attr(this.geocodeReviewMsg,"innerHTML",this.i18n.reviewExcel)):"none"===
c?(this._grid.layout.setColumnVisibility(2,!1),this._grid.layout.setColumnVisibility(3,!1),S.attr(this.geocodeReviewMsg,"innerHTML",this.i18n.reviewTable)):(this._grid.layout.setColumnVisibility("addressTypes"===c?2:3,!0),this._grid.layout.setColumnVisibility("addressTypes"===c?3:2,!1),S.attr(this.geocodeReviewMsg,"innerHTML",this.i18n.review));this._updateUI("geocode","addressTypes"===c&&(!this._isPortal&&this._isWorldGeocodeServer||this._isPortal&&this._isServiceProxyAgoWorldGeocodeServer)?"geocode":
null);if("none"!==c&&-1===this._analyzedLocationTypes.indexOf(c)&&this._allowGeocode)this.onChangeCountry();else"addressTypes"===c&&void 0!==this.item.excelInfo&&this._checkProxyFilter();"addressTypes"!==c?S.query(".multigeocode").style("display","none"):1<this._geocodeServers.length&&S.query(".multigeocode").style("display","");S.query(".geocode-output").style("display",this._isPortal||"addressTypes"!==c||"csv"!==this.item.type?"none":"");this._currentGeocodeVal=c},onChangeCountry:function(c){this.item&&
(c&&(this._analyzedLocationTypes=[]),this._basicStandby.show(),this.deleteGrid(!0),this._analyze(this.item).then(this._checkProxyFilter.bind(this)).then(S.hitch(this,function(h){if("xlsx"===this.item.type){var d=""===this._allExcelSheets.value?0:this._allExcelSheets.value;h.publishParameters.layers[d].sourceCountry=h.publishParameters.layers[d].sourceCountry||"world";h.publishParameters.layers[d].sourceCountryHint="";this.changingGeocodeCountry=!0;return this._loadExcel(h)}h.publishParameters.sourceCountry=
h.publishParameters.sourceCountry||"world";h.publishParameters.sourceCountryHint="";return this._loadCSV(h)})))},onChangeFields:function(c){this._basicStandby.show();this.deleteGrid(!0);this._geocoderFields=c;this._analyze(this.item).then(this._checkProxyFilter.bind(this)).then(S.hitch(this,function(h){return"xlsx"===this.item.type?this._loadExcel(h):this._loadCSV(h)}))},_checkProxyFilter:function(c){var h=new S.Deferred,d=this._findGeocoder(this._geocodeServiceUrl);d.itemId?this._request(this._contentUri+
"/items/"+d.itemId).then(function(b){b.proxyFilter&&JSON.parse(b.proxyFilter).sourceCountry?(b=JSON.parse(b.proxyFilter).sourceCountry.split(",").reduce(function(a,e){a[e.toLowerCase()]=!0;return a},{world:!0}),this._fetchCountryCodes(b)):this._fetchCountryCodes();h.resolve(c)}.bind(this),function(b){this._fetchCountryCodes();h.resolve(c)}):(this._fetchCountryCodes(),h.resolve(c));return h},_addFile:function(){if(this.item&&(this.item.publishParameters||this._analyzeError)){this.disable(null,this.i18n.updating);
var c=this.gatherFormValues(["title"]),h=this._tags.get("tags")||"",d=this.item.tags?S.isArray(this.item.tags)?this.item.tags:this.item.tags.split(","):[];h=this._unique(d.concat(h.split(","))).join(",");var b=["showUnmatchedAddresses"];c=S.mixin(c,{tags:h});return this._update(this.item,c).then(S.hitch(this,"_publish",this.item)).then(S.hitch(this,function(a){if(a&&a.error)return this._showError(a.error);if(a&&this.item.csvInfo)return this._fetch(a).then(S.hitch(this,function(e){b=b.concat(e&&e.item&&
e.item.typeKeywords||[]);b=this.item.csvInfo.publishParameters&&"none"===this.item.csvInfo.publishParameters.locationType?b.concat("Table"):b;return this._update({id:a.id,type:a.type},{typeKeywords:b.join(",")}).then(S.hitch(this,"_showItem",a))}));if(a&&this.item.excelInfo)return this._fetch(a).then(S.hitch(this,function(e){b=b.concat(e&&e.item&&e.item.typeKeywords||[]);b=this.item.excelInfo.publishParameters&&"none"===this.item.excelInfo.publishParameters.layers[0].locationType?b.concat("Table"):
b;return this._update({id:a.id,type:a.type},{typeKeywords:b.join(","),title:this.elementValue("title")}).then(S.hitch(this,"_showItem",a))}));if("featurecollection"===this.item.type)this._fetchItemData(this.item).then(S.hitch(this,function(e){var q={layers:[]};S.forEach(e.layers||[],S.hitch(this,function(t,u){u={id:u};t&&t.popupInfo&&(u.popupInfo=S.clone(t.popupInfo));t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.labelingInfo&&(u.showLabels=!0);q.layers.push(u)}));
return q.layers.length?this._update({id:a.id,type:a.type},{text:S.json.stringify(q)}).then(S.hitch(this,"_showItem",a)):this._showItem(a)}));else return this._showItem(a)}))}this._upload().then(S.hitch(this,function(a){this._uploadProgressBar.hide();this.dialog.set("closable",!0);if(!a||!a.id)return!1;var e=new S.Deferred,q={tilepackage:1,vectortilepackage:1,scenepackage:1};a=this.item=S.mixin(this.item||{},a);a=S.mixin(a,{tags:this._tags.get("tags")});this.item=S.mixin(a,this.gatherFormValues(["title"]));
switch(a.type.toLowerCase()){case "servicedefinition":e.then(S.hitch(this,"_publish",a)).then(S.hitch(this,function(g){return this._showItem(g)}));break;case "filegeodatabase":case "tilepackage":case "vectortilepackage":case "scenepackage":case "geojson":case "json":case "shapefile":e.then(S.hitch(this,"_publish",a)).then(S.hitch(this,"_showItem"));break;case "imagecollection":this._isPortal&&this.allowPublish&&this._publishTypes.imagecollection?e.then(S.hitch(this,"_publish",a)).then(S.hitch(this,
"_showItem")):e.then(S.hitch(this,"_showItem",a));break;case "photocollection":e.then(S.hitch(this,"_publishPhotos",a)).then(S.hitch(this,"_showItem"));break;case "xlsx":this.allowPublish&&this._publishTypes.xlsx&&!this._analyzeError?e.then(S.hitch(this,"_analyze",a)).then(S.hitch(this,"_loadExcel")):e.then(S.hitch(this,"_showItem",a));break;case "csv":this.allowPublish&&this._publishTypes.csv&&!this._analyzeError?e.then(function(){return this._analyze(a,this._isPortal)}.bind(this)).then(S.hitch(this,
"_loadCSV")):e.then(S.hitch(this,"_showItem",a));break;case "kml":case "kmz":var t=this._util.parseUrl(this._contentUri),u="http://"+(esriGeowConfig.self&&esriGeowConfig.self.portalHostname||t.host)+"/sharing/rest/content";a.url=this._util.getSecureUrl(u+"/items/"+a.id+"/data?token\x3d"+this._user.token);e.then(S.hitch(this,"_setKmlExtent",a)).then(S.hitch(this,function(g){return this._update(g,{extent:g.extent,url:this._util.getSecureUrl(u+"/items/"+g.id+"/data")},!0).then(S.hitch(this,"_showItem"))}));
break;case "ipynb":a.success&&(e.then(S.hitch(this,"_showItem",a)),e.resolve(a));break;default:e.then(S.hitch(this,"_showItem",a))}this.disable(!1,this.i18n.checkingStatus);this._checkStatus(a,function(g){e.resolve(g)},S.hitch(this,function(g){var m=a.type.toLowerCase();g&&"Error in adding file item"===g.message&&m in q?g.message=this.i18n.errors.invalidPackage.message:g&&-1<g.message.indexOf("already exists")&&(m=this.itemInfo[a.type.toLowerCase()]?this.itemInfo[a.type.toLowerCase()].type:a.type,
g.message=a.isFile?esri.substitute({type:m,item:a.item,name:a.name||a.item,title:a.title},this.i18n.errors.fileNameExists.message):esri.substitute({type:m,item:a.item,title:a.title},this.i18n.errors.itemExists.message),this._itemExistsError=g);return this._showError(g)}))}))},_addService:function(){var c=this._urlInput.value;var h=this.elementValue("type");if(!(c&&-1<c.indexOf("http://"))||esriGeowConfig.self.isPortal||esriGeowConfig.self.allSSL&&"MapServer"===h){this.disable();switch(this._getRadioButtonValue("web")){case "ags":c=
this._addSecureAGSService().then(S.hitch(this,"_showItem"));break;case "kml":c=this._addKMLUrl();break;case "ogc":c=this._addOGCUrl();break;case "wfs":c=this._addWFSUrl();break;case "wmts":c=this._addWMTSUrl();break;default:c=this._addUrl()}return c}J.byId("itemUrl").focus()},_addSecureAGSService:function(){var c=this.item.serviceInfo,h=this._serviceInfoPane.get("userInfo"),d=this.item.type.toLowerCase();d=this._checkThumbnailURL(this.itemInfo[d]);d=S.mixin(d,this.gatherFormValues(["url","title"]));
d=S.mixin(d,{tags:this._tags.get("tags")});if(c&&c.isSecure&&!c.userInfo||this.item.isSecured&&this.item.isSecured.isOverride&&!h||this.item.isSecured&&401!==this.item.isSecured.httpStatusCode&&!h)throw this._showError(this.i18n.errors.invalidCredentials),Error();if(this.item.isSecured&&"store"===this._getRadioButtonValue("storeauth")){if(!this._isPortal||this._isPortal&&this._checkProtocol())d.serviceUsername=this._serviceInfoPane.userInfo.username,d.servicePassword=this._serviceInfoPane.userInfo.password;
else throw this._basicStandby.hide(),this.enable(),Error();if(401===this.item.isSecured.httpStatusCode)return this._add(d).then(S.hitch(this,"_fetch")).then(S.hitch(this,function(b){this.item.id=b.item&&b.item.id;this.item.url=b.item&&b.item.url;this.item.sourceUrl=b.item&&b.item.sourceUrl;return this._addAGSService(!0)}));if(c&&c.isSecure&&!c.userInfo)throw this._showError(this.i18n.errors.invalidCredentials),Error();}return this._addAGSService(!1)},_addAGSService:function(c){var h=this.item.serviceInfo,
d=this.item.type.toLowerCase(),b=this._checkThumbnailURL(this.itemInfo[d]),a=S.mixin(b,this.gatherFormValues(["url","title"])),e={streamserver:1,imageserver:1,workspaceserver:1};a=S.mixin(a,{tags:this._tags.get("tags")});if(!h)throw this._showError({message:esri.substitute({name:a.title},this.i18n.errors.serviceNotExist.message)},null,!0),Error();b=h.documentInfo||{};a=S.mixin(a,{description:h.serviceDescription||h.description||b.Comments||"",snippet:b.Subject||"",accessInformation:h.copyrightText||
b.Credits||"",spatialReference:this._getSpatialReference(this.item),url:this.item.url||this.elementValue("url").split("?")[0]});d&&"mapserver"===d.toLowerCase()&&(a.typeKeywords+=h.singleFusedMapCache?" ,Tiled":" ,Dynamic");h&&h.type&&"Table"===h.type&&(a.typeKeywords+=", Table, Singlelayer");d&&d.toLowerCase()in e?a.typeKeywords+=" ,Singlelayer":h&&(h.layers||h.tables)&&(h.layers&&h.layers.length||!h.tables||!h.tables.length?(b=(h.layers||[]).concat(h.tables||[]),a.typeKeywords+=1<b.length?" ,Multilayer":
" ,Singlelayer"):(-1===a.typeKeywords.indexOf("Table")&&(a.typeKeywords+=" ,Table"),a.typeKeywords+=1<h.tables.length?" ,Multilayer":" ,Singlelayer"));d&&"sceneserver"===d.toLowerCase()&&(d=h.layers||[],h=d.length&&d[0].layerType||h.layerType,a.typeKeywords+=h?" ,"+h:"");return this._projectExtent2WGS84(a).then(S.hitch(this,"_getThumbnail",this.item,a)).then(S.hitch(this,function(q){a.thumbnailURL=q;a.thumbnailURL&&this.item.thumbnailToken&&(a.thumbnailURL+=(-1<a.thumbnailURL.indexOf("?")?"\x26":
"?")+"token\x3d"+this.item.thumbnailToken);return a}),S.hitch(this,function(q){return a})).then(S.hitch(this,function(q){return c?this._update(this.item,S.mixin(q,{url:this.item.sourceUrl}),!0):this._add(q)}))},_addKMLUrl:function(){var c=this.item.type.toLowerCase();c=this._checkThumbnailURL(this.itemInfo[c]);var h=S.mixin(c,this.gatherFormValues(["url","title"]));c=new S.Deferred;h=S.mixin(h,{tags:this._tags.get("tags")});c.then(S.hitch(this,"_setKmlExtent",h)).then(S.hitch(arcgisonline.map.thumbnail,
"buildThumbnailURLFromKMLItem",h,null)).then(S.hitch(this,function(d){h.thumbnailURL=d;return h}),S.hitch(this,function(d){return h})).then(S.hitch(this,"_add",h)).then(S.hitch(this,"_showItem"));c.resolve();return c},_setKmlExtent:function(c){esri.config.defaults.kmlService=esriGeowConfig.kmlService;var h=new S.Deferred,d=new esri.layers.KMLLayer(c.url),b=S.connect(d,"onLoad",S.hitch(this,function(){S.disconnect(b);c.extent=this._extent2String(this._getKmlExtent(d));h.resolve(c)})),a=S.connect(d,
"onError",S.hitch(this,function(e){S.disconnect(a);this._showError({message:e.message});throw e;}));return h},_getKmlExtent:function(c){c=c.getLayers();var h;S.forEach(c,function(d){d.graphics&&0<d.graphics.length&&(d=esri.graphicsExtent(d.graphics),h=h?h.union(d):d)});return h||null},_addOGCUrl:function(){if(this.item&&this.item.ogcInfo){var c=this.item.type.toLowerCase();c=this._checkThumbnailURL(this.itemInfo[c]);var h=S.mixin(c,this.gatherFormValues(["title"]));c=this.item.ogcInfo;var d=new S.Deferred,
b=[],a=!1;h=S.mixin(h,{tags:this._tags.get("tags")});this._grid&&this._grid.edit&&this._grid.edit.apply();var e=this._mStore&&this._mStore.query({visible:!0}).map(function(t){q=q?t.extent?q.union(t.extent):q:t.extent;b.push(t.name);var u={name:t.name,title:t.title};t.legendURL&&(u.legendURL=t.legendURL);t.queryable&&(u.queryable=t.queryable);return u});c.setVisibleLayers(b);var q=q||c.fullExtent;a=!S.some(c.spatialReferences,function(t){return t===q.spatialReference.wkid});h=S.mixin(h,{url:c.url,
description:c.description||"",accessInformation:c.copyright||"",text:this._getWMSData(c,e),extent:q});a&&d.then(S.hitch(this,"_project",q,new esri.SpatialReference({wkid:c.spatialReferences[0]}))).then(S.hitch(this,function(t){h.extent=t;return h}));d.then(S.hitch(this,"_getWMSImageUrl",h,c)).then(S.hitch(this,"_add")).then(S.hitch(this,"_showItem"));d.resolve();return d}this._showError({message:esri.substitute({name:""},this.i18n.errors.serviceNotExist.message)},null,!0)},_addWFSUrl:function(){var c=
this.item.type.toLowerCase(),h=S.mixin(this._wfsLayer||{},{geometryType:this._wfsGeometryType.get("value")}),d=S.mixin({},this.gatherFormValues(["url","title"]),this._checkThumbnailURL(this.itemInfo[c])),b=h.selectedLayer&&h.selectedLayer.fullExtent||[[],[]];this.item&&this._wfsLayer?h.geometryType&&"none"!==h.geometryType?(c=arcgisonline.sharing.dijit.dialog.getWFSConfig(h),d=S.mixin(d,{tags:this._tags.get("tags"),text:S.json.stringify(c),extent:b[0]+","+b[1]+","+b[2]+","+b[3]}),this._add(d).then(S.hitch(this,
function(a){d=S.mixin(d,a,{extent:[[b[0],b[1]],[b[2],b[3]]]});arcgisonline.map.thumbnail.buildThumbnailURLFromWFSItem(d).then(S.hitch(this,function(e){return S.mixin(d,{thumbnailUrl:e})}),S.hitch(this,function(){return d})).then(S.hitch(this,function(e){this._update(e,{thumbnailUrl:e.thumbnailUrl},!0).then(S.hitch(this,"_showItem",e))}))}))):this._showError({message:this.i18n.errors.missingGeometry.message}):this._showError({message:esri.substitute({name:""},this.i18n.errors.serviceNotExist.message)},
null,!0)},_addWMTSUrl:function(){var c=this.item.type.toLowerCase(),h=this._wmtsLayer,d=((h&&h.selectedLayer||{}).tileMatrixSetInfos||[])[this._tileMatrixSetInfos.get("value")],b=S.mixin({},this.gatherFormValues(["url","title"]),this._checkThumbnailURL(this.itemInfo[c])),a,e;this.item?this._wmtsLayer?d?(h=S.mixin(h,{selectedTileInfo:d}),arcgisonline.sharing.dijit.dialog.getWMTSConfig(h).then(S.hitch(this,function(q){e=q&&q.wmtsConfig;a=q&&q.fullExtent?h.selectedLayer.gcsExtent:{xmin:-180,ymin:-90,
xmax:180,ymax:90};b=S.mixin(b,{url:e.wmtsInfo.url,tags:this._tags.get("tags"),text:S.json.stringify(e),extent:a.xmin+","+a.ymin+","+a.xmax+","+a.ymax});this._add(b).then(S.hitch(this,function(t){b=S.mixin(b,t,{extent:[[a.xmin,a.ymin],[a.xmax,a.ymax]]});arcgisonline.map.thumbnail.buildThumbnailURLFromWMTSItem(b).then(S.hitch(this,function(u){return S.mixin(b,{thumbnailUrl:u})}),S.hitch(this,function(){return b})).then(S.hitch(this,function(u){this._update(u,{thumbnailUrl:u.thumbnailUrl},!0).then(S.hitch(this,
"_showItem",u))}))}))}))):this._showError({message:this.i18n.errors.missingGeometry.message}):this._showError({message:this.i18n.layerNotSelected}):this._showError({message:esri.substitute({name:""},this.i18n.errors.serviceNotExist.message)},null,!0)},_getWMSImageUrl:function(c,h){var d=new S.Deferred,b=S.hitch(this,function(a){c.thumbnailURL=a||c.thumbnailURL;c.extent=this._extent2String(c.extent);d.resolve(c)});h.getImageUrl(c.extent,800,532,b,b);return d},_getWMSData:function(c,h){return S.json.stringify({title:c.title||
"",url:c.url,mapUrl:c.getMapURL,version:c.version,layers:h,copyright:c.copyright||"",maxHeight:c.maxHeight,maxWidth:c.maxWidth,spatialReferences:c.spatialReferences,format:"png"!==c.getImageFormat()?c.getImageFormat():null,featureInfoUrl:c.getFeatureInfoURL,featureInfoFormat:c.featureInfoFormat})},_addUrl:function(){var c=this._getRadioButtonValue("web");c=this._checkThumbnailURL(this.itemInfo[c]);c=S.mixin(c,this.gatherFormValues(["url","title"]));c=S.mixin(c,{tags:this._tags.get("tags")});this.disable(["addItem",
"cancel"]);return this._add(c).then(S.hitch(this,"_showItem"))},_addApplication:function(){var c=this._getRadioButtonValue("app"),h=this._checkThumbnailURL(this.itemInfo[c]),d=this.elementValue("purpose"),b=this._manifestInfo,a="opext"===c||"appbldrext"===c;"apiapp"!==c&&("apimobile"===c?h.typeKeywords+=", "+this.elementValue("mobileapi"):"desktopapplication"===c?h.typeKeywords+=", "+this.elementValue("apidesktopapp"):a||(h.typeKeywords+=", "+this.elementValue("desktopapi")),a||(h.typeKeywords+=", "+
d,"selfConfigured"===d&&(h.typeKeywords+=", Configurable"),"configurableApp"===d&&(h.typeKeywords+=", configurableApp")),h=S.mixin(h,this.gatherFormValues(["url"])));d=this.elementValue("title")+"_"+(new Date).getTime();var e=S.mixin(h,this.gatherFormValues(["title"]));e=S.mixin(e,{name:d});e=S.mixin(e,{tags:this._tags.get("tags")});a&&b&&(e.thumbnailURL=b.thumbnailPath?e.url.substring(0,e.url.lastIndexOf("/")+1)+b.thumbnailPath:b.iconUrl||h.thumbnailUrl,e.accessInformation=b.credits||b.author||"",
e.description=b.description||"",e.summary=e.description,b.type&&(e.typeKeywords+=", "+b.type),b.platform&&(e.typeKeywords+=", "+b.platform),e.text=S.json.stringify(b));this.disable(["addItem","cancel"]);if("desktopapplication"!==c)return h=this._add(e),"apiapp"===c?h.then(S.hitch(this,"_registerApp")):h.then(S.hitch(this,"_showItem"));c=S.create("div",null,this.formNode);e.itemType="file";for(d in e)S.place(S.create("input",{name:d,type:"text",value:h[d],style:{display:"none"}}),c);S.place(S.create("input",
{type:"text",name:"overwrite",value:!1,style:{display:"none"}}),c);S.place(S.create("input",{type:"text",name:"async",value:!0,style:{display:"none"}}),c);return this._addItem(this.domNode,c).then(function(q){this._checkStatus(q,function(t){return this._showItem(t)}.bind(this),function(t){this._showError(t)}.bind(this))}.bind(this))},_upload:function(){this._uploadProgressBar.reset();this._uploadProgressBar.show();this.dialog.set("closable",!1);var c=this._checkThumbnailURL(this.itemInfo[this.item.type]),
h=this.item.types&&-1<this.item.types.indexOf("is-compact");if("codesample"===this.item.type||"arcpadpackage"===this.item.type||"stylx"===this.item.type)c.typeKeywords+=", "+this.elementValue(this.item.type);var d=S.create("div",null,this.formNode);"servicedefinition"===this.item.type&&this.elementValue("title",null);c=S.mixin(c,{tags:this._tags.get("tags")});"tilepackage"===this.item.type&&h&&(c.type="Compact Tile Package");"ipynb"===this.item.type&&(c.properties=this.selectNotebookRuntime.value);
for(var b in c)S.place(S.create("input",{name:b,type:"text",value:c[b],style:{display:"none"}}),d);S.place(S.create("input",{type:"text",name:"overwrite",value:!1,style:{display:"none"}}),d);S.place(S.create("input",{type:"text",name:"async",value:!0,style:{display:"none"}}),d);this.disable(["addItem"]);return this._addItem(this.domNode,d)},_add:function(c){return this._request((this._userContentUri+"/addItem").replace("http:/",c.serviceUsername&&c.servicePassword?"https:/":"http:/"),c,{usePost:!0})},
_update:function(c,h,d){var b=d||!1;if(!d)for(var a in h)c[a]&&h[a]===c[a]?delete h[a]:b=!0;if(b)return this._request(this._userContentUri+"/items/"+c.id+"/update",h,{usePost:!0});h=new S.Deferred;h.resolve(c);return h},_delete:function(c){if(!this._publishOnly&&!this._itemExistsError)return this._request(this._userContentUri+"/items/"+c.id+"/delete",{},{usePost:!0},null,function(h){})},_fetch:function(c){return this._request(this._userContentUri+"/items/"+c.id,{},{})},_registerApp:function(c){return this._request(this._restBaseUrl+
"oauth2/registerApp",{itemId:c.id,appType:"multiple",redirect_uris:'["urn:ietf:wg:oauth:2.0:oob"]'},{usePost:!0}).then(S.hitch(this,function(h){return h}),S.hitch(this,function(h){throw Error(h);})).then(S.hitch(this,"_showItem",c))},_publish:function(c){if(!this.allowPublish||!1===this.publish||this._analyzeError){var h=new S.Deferred;h.resolve(c);return h}var d=c.type.toLowerCase();h=this._getDefaultPublishParameters(c);if("servicedefinition"!==d){if("csv"===d){var b=this.item.csvInfo.publishParameters.standardizedFieldNames;
this._grid.edit.apply();var a=this._getRadioButtonValue("geocode");if("addressTypes"===a){var e=0,q={};var t=b||{};h.publishParameters.locationType="address";this._mStore.query(function(g){"unknown"!==g.locationType&&g.locationType in t&&(q[g.locationType]=g.name,e++)});if(1>e)return{error:this.i18n.errors.noAddressFields};h.publishParameters.addressFields=q}else if("locationTypes"===a){var u={locationType:"coordinates",latitudeFieldName:null,longitudeFieldName:null};t=S.mixin({},this.i18n[a]);this._mStore.query(function(g){"mgrs"===
g.locationType?(u.coordinateFieldType="MGRS",u.coordinateFieldName=g.name):"usng"===g.locationType?(u.coordinateFieldType="USNG",u.coordinateFieldName=g.name):"unknown"!==g.locationType&&g.locationType in t&&(u[g.locationType+"FieldName"]=g.name)});if(!(u.latitudeFieldName&&u.longitudeFieldName||u.coordinateFieldType&&u.coordinateFieldName))return{error:this.i18n.errors.noLocationFields};S.mixin(h.publishParameters,u)}else h.publishParameters.locationType="none"}if("xlsx"===d)if(b=this._allExcelSheets&&
this._allExcelSheets.value||0,h.filetype="excel",b=h.publishParameters.layers[b],h.publishParameters.layers.length=1,h.publishParameters.layers[0]=b,b=this.item.excelInfo.publishParameters.layers[0].standardizedFieldNames,this._grid.edit.apply(),a=this._getRadioButtonValue("geocode"),"addressTypes"===a){e=0;q={};t=b||{};h.publishParameters.layers[0].locationType="address";this._mStore.query(function(g){"unknown"!==g.locationType&&g.locationType in t&&(q[g.locationType]=g.name,e++)});if(1>e)return{error:this.i18n.errors.noAddressFields};
h.publishParameters.layers[0].addressFields=q}else if("locationTypes"===a){u={locationType:"coordinates",latitudeFieldName:null,longitudeFieldName:null};t=S.mixin({},this.i18n[a]);this._mStore.query(function(g){"mgrs"===g.locationType?(u.coordinateFieldType="MGRS",u.coordinateFieldName=g.name):"usng"===g.locationType?(u.coordinateFieldType="USNG",u.coordinateFieldName=g.name):"unknown"!==g.locationType&&g.locationType in t&&(u[g.locationType+"FieldName"]=g.name)});if(!(u.latitudeFieldName&&u.longitudeFieldName||
u.coordinateFieldType&&u.coordinateFieldName))return{error:this.i18n.errors.noLocationFields};S.mixin(h.publishParameters.layers[0],u)}else h.publishParameters.layers[0].locationType="none";"addressTypes"===a&&this._geocoderFields&&"GeometryOnly"!==this._geocoderFields?h.publishParameters.candidateFieldsType=this._geocoderFields:h.publishParameters.candidateFieldsType&&delete h.publishParameters.candidateFieldsType;(b=this._timezoneUtils._winZones[this._timeZones.get("value")])&&"UTC"!==b.id&&("xlsx"===
d?h.publishParameters.layers[0]=S.mixin(h.publishParameters.layers[0],{dateFieldsTimeReference:{timeZone:b.id}}):h.publishParameters=S.mixin(h.publishParameters,{dateFieldsTimeReference:{timeZone:b.id}}));h.publishParameters=S.json.stringify(h.publishParameters)}this.disable(null,this.i18n.publishing);this.item.publishParameters={};return this._request(this._publishUri+"/publish",h,{usePost:!0}).then(S.hitch(this,function(g){this.item.publishParameters=c.publishParameters||{};g=S.map(g.services,S.hitch(this,
function(m){var v=S.mixin(m,{id:m.serviceItemId,type:m.type||this.i18n.service,name:"Image Service"!==m.type?this.elementValue("title"):m.name,error:m.error});esri._isDefined(m.success)&&!m.success&&(m.error?m.error.message&&-1<m.error.message.indexOf("already exist")&&(m.error.message=this.i18n.errors.serviceDefinitionExists.message):v.error=this.i18n.errors.publishError);if("tilepackage"===d||"scenepackage"===d)v.buildCache=!0;return v}));return!g||1!==g.length||"Map Service"===g[0].type&&"tilepackage"!==
d?g:g[0]}))},_analyze:function(c,h){var d=this._contentUri+"/features/analyze",b={analyzeParameters:{enableGlobalGeocoding:!0,sourceLocale:S.locale.split("-")[0]},filetype:this.itemInfo[this.item.type.toLowerCase()].type.toLowerCase(),itemid:c.id};this.disable(!1,this.i18n.analyzing);if("microsoft excel"==b.filetype){var a=c.excelInfo;b.filetype="excel"}else a=c.csvInfo;if(this._isPortal&&this._geocodeServiceUrl||!this._isPortal){if(this._isPortal||!this._isPortal&&this._geocodeServers&&this._geocodeServers.length)b.analyzeParameters.geocodeServiceUrl=
encodeURI(this._geocodeServiceUrl);c&&(a||h)&&(c="addressTypes"===this._getRadioButtonValue("geocode")||h?"address":"coordinates",h="address"===c?"addressTypes":"locationTypes",-1===this._analyzedLocationTypes.indexOf(h)&&this._analyzedLocationTypes.push(h),b.analyzeParameters.locationType=c);if(!this._isPortal&&this._isWorldGeocodeServer||this._isPortal&&this._isServiceProxyAgoWorldGeocodeServer)b.analyzeParameters.sourceCountry=a?this._countryCodes.get("value").toLowerCase():"",b.analyzeParameters.sourceCountryHint=
a?"":this._sourceCountry;"addressTypes"===this._getRadioButtonValue("geocode")&&this._geocoderFields&&"GeometryOnly"!==this._geocoderFields?b.analyzeParameters.candidateFieldsType=this._geocoderFields:b.analyzeParameters.candidateFieldsType&&delete b.analyzeParameters.candidateFieldsType;b.analyzeParameters=S.json.stringify(b.analyzeParameters)}else delete b.analyzeParameters;(a=arcgisonline.sharing.util.getToken())&&(d+="?token\x3d"+a);return this._request(d,b,{usePost:!0}).then(null,S.hitch(this,
function(e){this._analyzeError||this.deleteGrid()}))},_publishPhotos:function(c){var h=new S.Deferred,d=c.title.split(" ").join("_");this.allowPublish&&!1!==this.publish?(this.disable(!1,this.i18n.creating),this._publishPhotoCollection.publish(S.mixin(c,{name:d,ownerFolder:this.folder})).then(function(b){h.resolve(b)})):h.resolve(c);return h},onChangeExcelSheet:function(c){c=this.item.excelInfo.publishParameters.layers;var h=this.get("value").allExcelSheets,d=c[h]&&c[h].fields;this.deleteGrid(!0);
this._createGrid(d,h);d="none";"address"===c[h].locationType&&(d="addressTypes");"coordinates"===c[h].locationType&&(d="locationTypes");this.elementValue("geocode",d);this.onChangeGeocode(d)},_createGrid:function(c,h){var d=this.item,b=d.type.toLowerCase(),a=this.gridInfo[b],e;if(d&&(d.csvInfo||d.excelInfo)){var q="xlsx"==d.type?d.excelInfo.publishParameters.layers[h]:d.csvInfo.publishParameters;c=S.map(c,S.hitch(this,function(t){if(q.addressFields&&void 0==q.longitudeFieldName&&void 0==q.latitudeFieldName)for(var u in q.addressFields){if(q.addressFields[u]===
t.name)return S.mixin(t,{locationType:u})}else{if(t.name===q.longitudeFieldName)return S.mixin(t,{locationType:"longitude"});if(t.name===q.latitudeFieldName)return S.mixin(t,{locationType:"latitude"});if(q.coordinateFieldType&&"MGRS"===q.coordinateFieldType.toUpperCase()&&t.name===q.coordinateFieldName)return S.mixin(t,{locationType:"mgrs"});if(q.coordinateFieldType&&"USNG"===q.coordinateFieldType.toUpperCase()&&t.name===q.coordinateFieldName)return S.mixin(t,{locationType:"usng"})}return S.mixin(t,
{locationType:"unknown"})}))}S.forEach(a,function(t){t.name=this.i18n[t.name]||t.name;t.select&&(e="csv"!==b&&"xlsx"!==b||"addressTypes"!==t.select?S.mixin({},this.i18n[t.select]):S.mixin({},S.mixin(S.clone(this.i18n.notUsed),q.standardizedFieldNames||this.i18n[t.select])),S.mixin(t,this._toSelectOptions(e,"unknown")))},this);this._mStore=new S.store.Memory({data:c,idProperty:"name"});this._oStore=new S.data.ObjectStore({objectStore:this._mStore});this._updateUI(null,"hosted");!this._publishOnly||
"csv"!==d.type&&"xlsx"!==d.type||this._updateUI(null,"csv");this._grid=new f.grid.DataGrid({id:"_grid",selectionMode:"none",singleClickEdit:!0},S.create("div",{},this.gridNode));this._grid.setStore(this._oStore);this._grid.set("structure",a);this._grid.startup();this._basicStandby.hide();this.enable();this._publishOnly||"csv"!==d.type&&"xlsx"!==d.type||this._updateUI(null,"publish");this._updateUI(null,b);"xlsx"==d.type&&1==d.excelInfo.publishParameters.layers.length&&this._updateUI("allExcelSheets",
null)},deleteGrid:function(c){!c&&this.item&&this.item.id&&(this._delete(this.item),this.item.id=null);this._grid&&(9>S.isIE&&S.style(this.dialog.domNode,"height","350px"),this._updateUI("csv"),this._updateUI("hosted"),delete this._mStore,delete this._oStore,this._grid.destroy(),delete this._grid,this._mStore=this._oStore=this._grid=null)},_getServiceInfo:function(c,h,d){var b=[499,498],a=this._tags.get("tags"),e,q=this._serviceInfoPane.get("userInfo"),t="FeatureServer"===d&&-1===c.indexOf(".arcgis.com")&&
-1===c.indexOf(".esri.com")?c.replace("FeatureServer","MapServer"):c;!this.item.isSecured||this.item.isSecured&&401!==this.item.isSecured.httpStatusCode&&q&&q.username&&q.password?this._serviceInfoPane.getServiceInfo(t,this.item.isSecured).then(S.hitch(this,function(u){"ImageServer"===this.item.type&&u.tileInfo&&("LERC"===u.tileInfo.format||u.cacheType&&"elevation"===u.cacheType.toLowerCase()?this.item.type="ElevationServer":u.cacheType&&"raster"===u.cacheType.toLowerCase()&&(this.item.type="TiledImageServer",
u.capabilities&&-1===u.capabilities.toLowerCase().indexOf("tilesonly")&&this._updateUI(null,"imageServiceType")));e=u.credential||esri.id.findCredential(c);q=this._serviceInfoPane.get("userInfo");this.item.thumbnailToken=e&&e.token||null;this.item.serviceInfo=u;this.item.serviceInfo.isSecure=q?!0:!1;this.item.serviceInfo.userInfo=q;a=((u.documentInfo||{}).Keywords||"").split(",").concat((a||"").split(","));this._tags.set("tags",this._unique(a).join(","));this.item.extent=u.fullExtent||u.extent;this.enable()}),
S.hitch(this,function(u){this._reload?this.enable():-1!==S.indexOf(b,u.code)?(this.enable(),this._updateUI("nosvcauth","svcauth"),this.item.checkUrlError?this._updateUI("storecredentials",null):this._updateUI(null,"storecredentials"),this.item.serviceInfo={isSecure:!0},this.item.isSecured=!0):u&&403===u.code?(this._showError(u),this.item.serviceInfo={isSecure:!0},this.item.isSecured=!0):u&&this.item.checkUrlError&&this.item.checkUrlError.message?this._showError({message:this.item.checkUrlError.message}):
"FeatureServer"!==d?this._showError(u&&u.message?u:{message:esri.substitute({name:h},this.i18n.errors.serviceNotExist.message)}):this._getServiceInfo(c.replace("MapServer","FeatureServer"),h,null)})):this.item.isSecured&&(this.item.isSecured.isFederatedWithWebTierAuth||401===this.item.isSecured.httpStatusCode)?this._request(this.item.url,{},{addToken:!1}).then(S.hitch(this,function(u){this.item.serviceInfo=u;a=((u.documentInfo||{}).Keywords||"").split(",").concat((a||"").split(","));this._tags.set("tags",
this._unique(a).join(","));this.item.extent=u.fullExtent||u.extent;this.enable()}),S.hitch(this,function(u){this._showError({message:esri.substitute({name:item.title},this.i18n.errors.serviceNotExist.message)},null,!0);throw Error();})):this.enable()},_getOGCServiceInfo:function(c,h){var d=new esri.layers.WMSLayer(this._stripParameters(c,"service request bbox format height width layers srs crs styles transparent bgcolor exceptions time elevation sld wfs".split(" "))),b=new S.Deferred,a=S.connect(d,
"onLoad",S.hitch(this,function(){S.disconnect(a);b.resolve(d)})),e=S.connect(d,"onError",S.hitch(this,function(){S.disconnect(e);this._showError({message:esri.substitute({name:h},this.i18n.errors.serviceNotExist.message)},null,!0);b.cancel()}));return b},_getWFSVersionFromUrl:function(c){var h="2.0.0";c=c.substring(c.indexOf("?")+1,c.length);c=S.queryToObject(c);c.version&&(h=c.version);return h},_getWFSServiceInfo:function(c,h,d){var b=new S.Deferred,a=new esri.layers.WFSLayer,e=this._getWFSVersionFromUrl(c),
q=this._stripParameters(c,["version","service","request","layer","typename"]),t=d||{version:e||"2.0.0",url:q},u=S.connect(a,"onError",S.hitch(this,function(){"2.0.0"===a.toJson().version?this._getWFSServiceInfo(c,h,{version:"1.1.0",url:q}).then(function(g){b.resolve(g)}):"1.1.0"===a.toJson().version?this._getWFSServiceInfo(c,h,{version:"1.0.0",url:q}).then(function(g){b.resolve(g)}):(S.disconnect(u),this._showError({message:esri.substitute({name:h},this.i18n.errors.serviceNotExist.message)},null,
!0),b.cancel())}));a.initialize(t,S.hitch(this,function(g){g&&g.length?(this._wfsLayer=S.mixin(a,{layers:g}),this.elementValue("url",t.url),b.resolve(this._wfsLayer)):(this._showError({message:esri.substitute({name:h},this.i18n.errors.serviceNotExist.message)},null,!0),this._wfsLayer=null,b.cancel())}));return b},_getWMTSOptions:function(c){var h=arcgisonline.sharing.util.urlToObject(c),d={},b=h.query&&h.query.request||"";if("wmts"===(h.query&&h.query.service||"").toLowerCase()&&"getcapabilities"===
b.toLowerCase()||-1<c.toLowerCase().indexOf("/1.0.0/wmtscapabilities.xml"))d=S.mixin(d,{serviceMode:"KVP"});return d},_getWMTSServiceInfo:function(c,h,d){var b=new S.Deferred,a=d||this._getWMTSOptions(c),e=this._stripParameters(c,"version service request layer style format tilematrixset tilematrix tilerow tilecol".split(" ")),q=new esri.layers.WMTSLayer(e,a),t,u=S.connect(q,"onError",S.hitch(this,function(){S.disconnect(u);if(!a.serviceMode)return this._getWMTSServiceInfo(c,h,{serviceMode:"KVP"}).then(S.hitch(this,
function(m){b.resolve(this._wmtsLayer)}));this._wmtsLayer=null;this._showError({message:esri.substitute({name:h},this.i18n.errors.serviceNotExist.message)},null,!0);b.cancel()})),g=S.connect(q,"onLoad",S.hitch(this,function(m){S.disconnect(g);(t=m.layers)&&t.length?(e=e.replace(/\/1.0.0\/wmtscapabilities.xml/i,""),this.elementValue("url",e),this._wmtsLayer=S.mixin(q,{layers:t,wmtsUrl:e}),b.resolve(this._wmtsLayer)):(this._showError({message:esri.substitute({name:h},this.i18n.errors.serviceNotExist.message)},
null,!0),this._wfsLayer=null,b.cancel())}));return b},_loadOGC:function(c){this.item.ogcInfo=c;this.item.url=c.url;this.elementValue("url",c.url);this.elementValue("title",c.title);var h=[];S.forEach(c.layerInfos,S.hitch(this,"_getWMSLayers",h));S.some(h,function(d,b){d.visible=!0;return 9<b});this._createGrid(h);this._grid.canSort=S.hitch(this,function(d){return 1!==Math.abs(d)});this._gridConnects.push(S.connect(this._oStore,"onSet",S.hitch(this,function(d,b){"visible"===b&&(S.byId("_ogcCB").checked=
this._mStore.query({visible:!0}).length===this._mStore.data.length)})));this._gridConnects.push(S.connect(this._grid,"onHeaderCellClick",S.hitch(this,function(d){if(!1!==esri.isDefined(d.target.checked)){var b=d.target.checked;this._mStore.query({visible:!b}).forEach(function(a){a.visible=b;this._mStore.put(a)},this);this._grid._fetch(0,!0)}})))},_loadWFS:function(c){var h=c.layers||[],d,b,a,e=[];S.forEach(this._gridConnects,S.disconnect);this.item.wfsInfo=c;this.elementValue("title",c.title);S.forEach(h,
function(q,t){e.push({label:q.title||q.name,value:t})});this._gridConnects.push(S.connect(this._wfsLayers,"onChange",S.hitch(this,function(q){b=h[q];a={layerName:b.name,mode:"snapshot",title:b.title||b.name,fullExtent:b.extent};c.selectLayer(a,S.hitch(this,function(t){c=S.mixin(c,{selectedLayer:a});(d="esriGeometryComplex"===c.geometryType)?(c.isComplex=!0,this._wfsGeometryType.set("value","none"),esri.show(this._wfsComplexOptions)):(c.isComplex=!1,this._wfsGeometryType.set("value",c.geometryType),
esri.hide(this._wfsComplexOptions))}))})));this._wfsLayers.set("options",e);this._wfsLayers.set("value",0,!1);this._wfsLayers.onChange(0);this._basicStandby.hide();this.enable();this._updateUI(null,"hosted");this._updateUI(null,"wfs")},_loadWMTS:function(c){var h,d=c.layers||[],b,a,e=[{label:this.i18n.addLayerFromUrlDlg.chooseWMTSLayer,value:0}],q=[];S.forEach(this._gridConnects,S.disconnect);this.item.wmtsInfo=c;S.forEach(d,function(t,u){e.push({label:t.title||t.name,value:u+1})});this._gridConnects.push(S.connect(this._wfsLayers,
"onChange",S.hitch(this,function(t){0<t?(b=d[t-1],this._wmtsLayer=S.mixin(this._wmtsLayer,{selectedLayer:b}),q=[],a=b.tileMatrixSetInfos||[],S.forEach(a,function(u,g){q.push({label:u.tileMatrixSet,value:g})}),this._tileMatrixSetInfos.set("options",q),this._tileMatrixSetInfos.set("value",0),h=1<a.length?"show":"hide",esri[h](this._tileMatrixSetInfoOptions)):this._wmtsLayer=null})));c=1<e.length?1:0;this._wfsLayers.set("options",e);this._wfsLayers.set("value",c,!1);this._wfsLayers.onChange(c);this._basicStandby.hide();
this.enable();this._updateUI(null,"hosted");this._updateUI(null,"wfs")},_loadCSV:function(c){if(c){var h=c.publishParameters||{},d="coordinates"===h.locationType?"locationTypes":"addressTypes",b=h.layerInfo&&h.layerInfo.fields||[];this.item.csvInfo=c;this.item.publishParameters=h;if(!this._isPortal&&this._isWorldGeocodeServer||this._isPortal&&this._isServiceProxyAgoWorldGeocodeServer)this._isWorldGeocodeServer=esri._isDefined(c.publishParameters.sourceCountry),c=this._countryCodes.value||c.publishParameters.sourceCountry||
"world",this._countryCodes.set("value","wo"===c?"world":c,!1);this._createGrid(b);this._publishOnly&&this._updateUI(null,"csv");this._allowGeocode||"addressTypes"!==d||(d="none",S.query(".noGeocode").style("display","none"),S.query(".tableOnly").style("display",""));this.elementValue("geocode",d);this.onChangeGeocode(d);S.attr(this._locatorOutputHelpIcon,"href",esriGeowConfig.self&&esriGeowConfig.self.helpMap?esriGeowConfig.self.helpBase+esriGeowConfig.self.helpMap.m["120002541"]:"#");this._gridConnects.push(S.connect(this._oStore,
"onSet",S.hitch(this,function(a,e,q,t){"locationType"===e&&this._mStore.query({locationType:t}).forEach(function(u){u.name!==a.name&&(u=this._mStore.get(u.name),u.locationType="unknown",this._mStore.put(u),this._grid._fetch(0,!0))},this)})));this._gridConnects.push(S.connect(this._grid,"onApplyCellEdit",S.hitch(this,function(a,e,q){"locationType"!==q||a!==(h.standardizedFieldNames&&h.standardizedFieldNames.Postal)&&a!==this.i18n.addressTypes.Postal||(a=this._grid.getItem(e),a.__isTypeUpdatedByUser||
(a.type="esriFieldTypeString",a.__isTypeUpdatedByUser=!0,this._mStore.put(a)))})))}else this._publishOnly&&this._showNoGeocodeDlg()},_loadExcel:function(c){if(c){var h=""===this._allExcelSheets.value?0:this._allExcelSheets.value,d=c.publishParameters||{},b=d.layers[h]&&"coordinates"===d.layers[h].locationType&&!this.changingGeocodeCountry?"locationTypes":"addressTypes";this.changingGeocodeCountry=!1;var a=d.layers&&d.layers[h].fields||[];this.item.excelInfo=c;this.item.publishParameters=d;if(!this._isPortal&&
this._isWorldGeocodeServer||this._isPortal&&this._isServiceProxyAgoWorldGeocodeServer)this._isWorldGeocodeServer=esri._isDefined(c.publishParameters.layers[h].sourceCountry),c=c.publishParameters.layers[h].sourceCountry||"world",this._countryCodes.set("value","wo"===c?"world":c,!1);this._fetchAllExcelLayers(d,h);this._createGrid(a,h);this._publishOnly&&this._updateUI(null,"csv");this._allowGeocode||"addressTypes"!==b||(b="none",S.query(".noGeocode").style("display","none"),S.query(".tableOnly").style("display",
""));this.elementValue("geocode",b);this.onChangeGeocode(b);this._gridConnects.push(S.connect(this._oStore,"onSet",S.hitch(this,function(e,q,t,u){"locationType"===q&&this._mStore.query({locationType:u}).forEach(function(g){g.name!==e.name&&(g=this._mStore.get(g.name),g.locationType="unknown",this._mStore.put(g),this._grid._fetch(0,!0))},this)})));this._gridConnects.push(S.connect(this._grid,"onApplyCellEdit",S.hitch(this,function(e,q,t){"locationType"!==t||e!==(d.standardizedFieldNames&&d.standardizedFieldNames.Postal)&&
e!==this.i18n.addressTypes.Postal||(e=this._grid.getItem(q),e.__isTypeUpdatedByUser||(e.type="esriFieldTypeString",e.__isTypeUpdatedByUser=!0,this._mStore.put(e)))})))}else this._publishOnly&&this._showNoGeocodeDlg()},_getWMSLayers:function(c,h){h.subLayers&&h.subLayers.length?S.forEach(h.subLayers,S.hitch(this,"_getWMSLayers",c)):c.push({name:h.name,visible:!1,title:h.title.replace(/ /g,String.fromCharCode(160)),extent:h.extent,legendURL:h.legendURL,queryable:h.queryable})},_getThumbnail:function(c,
h){var d=new S.Deferred;if(c.thumbnailURL)return d.resolve(c.thumbnailURL),d;if("MapServer"!==c.type&&"FeatureServer"!==c.type&&"ImageServer"!==c.type)return d.resolve(null),d;if("MapServer"===c.type||"ImageServer"===c.type||-1!==c.url.indexOf("MapServer")){var b=c.serviceInfo||{},a=c.extent||{};h=c.url||h.url;c=this._extent2String(c.extent);d.resolve(a?arcgisonline.map.core.buildExportCall(h,c,null,null,"800,532",null,"image",null,b):null);return d}d=h.extent.split(",");return arcgisonline.map.thumbnail.buildThumbnailURLFromFSUrl(c.url,
[[parseFloat(d[0]),parseFloat(d[1])],[parseFloat(d[2]),parseFloat(d[3])]])},_project:function(c,h){var d=new S.Deferred,b=new esri.geometry.Extent({xmax:2E7,xmin:-2E7,ymax:2E7,ymin:-2E7,spatialReference:{wkid:102100}});handler=S.hitch(this,function(a){d.resolve(a&&a.length&&a[0]&&a[0].type&&"extent"===a[0].type?a[0]:b)});c=new esri.geometry.Extent(c);arcgisonline.map.core.projectExtent(c,h,handler,handler);return d},_projectExtent2WGS84:function(c){var h=c&&c.extent||this.item.extent||{},d=h.spatialReference&&
(h.spatialReference.wkid||h.spatialReference.wkt),b=new esri.SpatialReference({wkid:4326}),a=new S.Deferred;if(d&&!arcgisonline.map.core.sameSpatialReference(b,h.spatialReference))return this._project(h,b).then(S.hitch(this,function(e){c.extent=this._extent2String(e);return c}));c.extent=this._extent2String(h);a.resolve(c);return a},_showItem:function(c){if(!c||c.error)return this._showError(c);var h=this.item.type.toLowerCase(),d=c.buildCache&&"scenepackage"!==h,b=[this.item.id],a=this._categories?
this._categories.getCategories(!0):null,e=c.jobId&&(this._isPortal||"scenepackage"!==h)?"\x26jobid\x3d"+c.jobId:"";c.id?b.push(c.id):c&&c.length&&c.forEach(function(q){q.id&&b.push(q.id)});arcgisonline.pages.utils.categories.setItemCategories(b,a).then(function(){esri.hide(this.dialog&&this.dialog.domNode);if(c.id){if(this.params&&this.params.label&&this.params.telemetry){var q={label:"add",category:"new item",pageName:"my content",details:this.params.label};this._telemetryURLAttribute&&(q.attribute=
this._telemetryURLAttribute);this.params.telemetry.logEvent(q)}return setTimeout(function(){window.location="item.html?id\x3d"+c.id+e+(d?"#settings/buildCache":"")},400)}c&&c.length&&this._showServiceResultsDlg(c);this.item&&(this.item.id=null);this.dialog&&this.dialog.hide()}.bind(this))},_showServiceResultsDlg:function(c){var h=S.doc.createDocumentFragment(),d=S.create("div",{"class":"esriAGOServicesDlg esriItemLinks"},h,"first"),b=S.create("ul",null,d),a;S.forEach(c,S.hitch(this,function(q){esri.isDefined(q.error)?
(q.type="Map Service"===q.type?"Tile Layer":"Image Service"===q.type?"Imagery Layer":"Feature Layer",q.error&&q.error.message&&-1<q.error.message.indexOf("already exist")&&(q.error.message=this.i18n.errors.serviceDefinitionExists.message),S.create("li",{innerHTML:esri.substitute(S.mixin(q,{error:q.error.message}),this.i18n.publishServicesError)},b)):(a="item.html?id\x3d"+q.id+(q.jobId?"\x26jobid\x3d"+q.jobId:"")+("Map Service"===q.type?"#settings/manageTiles":""),q=S.mixin(q,{linkTitle:this.i18n["Map Service"!==
q.type?"publishServiceView":"publishServiceBuild"],itemUrl:a}),q.type="Map Service"===q.type?"Tile Layer":"Feature Layer",S.create("li",{innerHTML:esri.substitute(q,this.i18n.publishServicesSuccess)},b))}));c=(new J.Dialog).placeAt(S.body());c.set({title:this.i18n.publishServicesTitle,content:h});c.show();var e=S.connect(c,"onHide",this,function(){S.disconnect(e);S.publish("itemAdded",[])})},_fetchCountryCodes:function(c){var h=[],d=esriGeowConfig.self||{};d=(d=(d.user||{}).region||d.ipCntryCode||
"")&&"wo"===d.toLowerCase()?"world":d;for(var b in this.countryCodes)h.push({label:this.countryCodes[b],value:b.toLowerCase()});c&&(h=h.filter(function(a){return c[a.value]}));h=h.sort(function(a,e){return a.label<e.label?-1:a.label>e.label?1:0});this._countryCodes.set("options",h);if(!this._countryCodes.value||c&&!c[this._countryCodes.value])this.countryCodes[d]&&(c&&c[d]||!c)?this._countryCodes.set("value",d.toLowerCase(),!1):c&&2===Object.keys(c).length?this._countryCodes.set("value",Object.keys(c).filter(function(a){return"world"!==
a})[0],!1):this._countryCodes.set("value","world",!1);this._sourceCountry=d.toLowerCase()},_fetchAllExcelLayers:function(c,h){var d=[];this._updateUI(null,"allExcelSheets");for(var b=0;b<c.layers.length;b++)d.push({label:c.layers[b].name,value:b});this._allExcelSheets.set("options",d);this._allExcelSheets.set("value",h,!1)},_fetchTimeZones:function(){var c=[],h;for(h in this.timeZones)c.push({label:this.timeZones[h],value:"UTC"!==h?parseFloat(h):h});this._timeZones.set("options",c);this._timeZones.set("value",
1230);S.attr(this._timezoneHelpIcon,"href",esriGeowConfig.self&&esriGeowConfig.self.helpMap?esriGeowConfig.self.helpBase+esriGeowConfig.self.helpMap.m["120001098"]:"#")},_fetchItemData:function(c){return this._request(this._contentUri+"/items/"+c.id+"/data")},_fetchManifest:function(c){var h=new S.Deferred;this.disable(null,this.i18n.fetchOpExtension);S.query(".opextwarningmsg",this.domNode).style("display","none");esri.request({url:c,handleAs:"json"},{useProxy:!1}).then(S.hitch(this,function(d){this.enable();
h.resolve(d)}),S.hitch(this,function(d){d&&d.message&&(-1<d.message.indexOf("Unexpected string")||-1<d.message.indexOf("Invalid or unexpected token"))&&(d=this.i18n.errors.opExtensionInvalidJson);this._showError(d);this.enable();h.cancel()}));return h},_request:function(c,h,d,b,a){h=S.mixin(S.mixin({},this._requestParams),h||{});var e=this._util.request({url:c,content:h},d);e.then(S.hitch(this,function(q){return q.error?this._showError(q.error):q}),S.hitch(this,function(q){if(this._isPortal&&q.message&&
-1<q.message.indexOf("ERROR 001551"))throw this._analyzeError=!0,this._basicStandby.hide(),this.enable(),q;a?a(q):this._showError(S.mixin(q,{code:"timeout"===q.dojoType?408:q.code,message:q.message,details:q.details}),e)}));return e},_uploadFile:function(c,h,d){var b=S.mixin({},this._requestParams),a=this._util.request({url:h,content:b,form:c,timeout:0});a.then(S.hitch(this,function(e){S.destroy(d);return e.error?this._showError(e.error):e}),S.hitch(this,function(e){S.destroy(d);return this._showError(e,
a)}));return a},_addItem:function(c,h){var d=this.itemAPI.addItem.call(this.itemAPI,{folderId:"/"!==this.folder?this.folder:void 0},c,S.byId("file").files[0]);d.then(function(b){S.destroy(h);return b.error?this._showError(b.error):b}.bind(this),function(b){S.destroy(h);return"Request canceled"===b.message?!1:this._showError(b,d)}.bind(this));return d},_checkStatus:function(c,h,d,b){c||d();this._request(this._userContentUri+"/items/"+c.id+"/status").then(S.hitch(this,function(a){a=a||{status:"failed"};
if("completed"===a.status)return h(c);if("failed"===a.status||""===a.status)return a&&a.statusMessage&&0<a.statusMessage.indexOf("Invalid Shapefile")?a.statusMessage=esri.substitute({name:c.item},this.i18n.errors.invalidShapefile.message):a&&a.statusMessage&&0<a.statusMessage.indexOf("Invalid File Geodatabase")&&(a.statusMessage=esri.substitute({name:c.item},this.i18n.errors.invalidFileGeodatabase.message)),d({message:a.statusMessage||this.i18n.errors.error});b=(b||500)+250;setTimeout(S.hitch(this,
function(){this._checkStatus(c,h,d,b)}),b)}),d)},_getFileAndType:function(){var c=/(?:\.([^.]+))?$/,h=S.byId("file").value.replace(/^.*(\\|\/|:)/,""),d=h&&c.exec(h)[1]?c.exec(h)[1].toLowerCase():"";c="";h&&(c=-1===h.lastIndexOf(".")?h:h.substring(0,h.lastIndexOf(".")));c=c.replace(/\./g,"_");this._itemExistsError=!1;if(window.FileReader){var b=S.byId("file").files[0].size;if(!this._isPortal&&("kml"===d||"kmz"===d)&&b>this._maxKmlFileSize)return this._showError(this.i18n.errors.kmlFileToLarge);if(b>
this._maxFileSize)return this._showError(this.i18n.errors.fileToLarge)}"xls"===d&&(d="xlsx");if(this.item&&this.item.type&&"desktopapplication"===this.item.type)return this.item.type="desktopapplication",this.item.item=h,this.item.name=h,this.elementValue("title",c),this.item.isZip="zip"===d,"zip"===d?this._itemExists({item:h,title:c,name:h,type:this.item.type}):this._showError({message:this.i18n.fileZipFormat});this._isRasterFunctionTemplate(h)&&(d="rft",c=this._getRasterFunctionTemplateName(h));
if("tpk"===d&&-1<h.indexOf("-"))return this.item={error:this.i18n.errors.invalidFileTitle},this._showError({message:this.i18n.errors.invalidFileTitle.message});this.deleteGrid();this._updateUI("wfs",null);this._updateUI("zip","title");this._updateUI("csv");this._updateUI("shapefile");this._updateUI("servicedefinition");this._updateUI("publish");this._updateUI("codesample");this._updateUI("arcpadpackage");this._updateUI("stylx");this.item={};"tpkx"===d&&(d="tilepackage",this.item.types=(this.item.types||
[]).concat(["is-compact"]));d="sd"===d?"servicedefinition":d;d="tpk"===d?"tilepackage":d;d="spk"===d||"slpk"===d?"scenepackage":d;d="vtpk"===d?"vectortilepackage":d;d="dlpk"===d?"deeplearningpackage":d;this.item.type=d;this.item.item=h;this.item.isFile=!0;this.item.fileExtension=d;this.elementValue("title",c);S.attr(this._enablePublishingLabel,"innerHTML",this.i18n["tilepackage"!==d?"publishService":"publishNamedService"]);var a=b=!0,e=!0,q=!0;if(this.allowPublish||this._allowPublishChanged)this._allowPublishChanged&&
(this.allowPublish=!0,this._allowPublishChanged=!1),"shapefile"!==d&&"csv"!==d&&"xlsx"!==d&&"geojson"!==d&&"json"!==d&&("zip"!==d||"shapefile"!==this.elementValue("archiveSelect")&&"filegeodatabase"!==this.elementValue("archiveSelect"))||this._roleCanPublishFeatures||(this.allowPublish=a=b=!1,this._allowPublishChanged=!0),"tilepackage"!==d||this._roleCanPublishTiles||(this.allowPublish=q=b=!1,this._allowPublishChanged=!0),"scenepackage"!==d||this._roleCanPublishScenes&&(!this._isPortal||esriGeowConfig.self.supportsSceneServices)||
(this.allowPublish=e=b=!1,this._allowPublishChanged=!0),"vectortilepackage"!==d||this._roleCanPublishTiles||(this.allowPublish=q=b=!1,this._allowPublishChanged=!0),"servicedefinition"===d&&(this._roleCanPublishFeatures||this._roleCanPublishTiles?(this._roleCanPublishFeatures||(a=!1),this._roleCanPublishTiles||(q=!1)):(this.allowPublish=q=a=b=!1,this._allowPublishChanged=!0));this._enablePublishing.set("value",b);this._itemExists({item:h,title:c,name:h,type:this.item.type}).then(S.hitch(S.hitch(this,
function(t){if(!t){if("zip"===d)d=this.elementValue("archiveSelect"),this.item.type=d,this.item.fileExtension="ZIP",this._updateUI("app","zip"),this._updateUI(null,this.allowPublish&&d in this._publishTypes&&a?d:null),this._updateUI(null,this.allowPublish&&d in this._publishTypes&&a?"publish":null);else if("csv"===d&&this.allowPublish&&a&&this._publishTypes.csv||"xlsx"===d&&this.allowPublish&&a&&this._publishTypes.xlsx)this._basicStandby.show(),this._addFile();else if("geojson"!==d&&"json"!==d||!this.allowPublish||
!a&&!q)if("servicedefinition"!==d&&"geojson"!==d&&"json"!==d||!this.allowPublish||!a&&!q)if("tilepackage"===d)this.allowPublish&&q&&(this._updateUI(null,"publish"),this._updateUI(null,d));else if("scenepackage"===d)this.allowPublish&&e&&(this._updateUI(null,"publish"),this._updateUI(null,d));else if("vectortilepackage"===d)this.allowPublish&&q&&(this._updateUI(null,"publish"),this._updateUI(null,d));else if("opcenteraddin"===d){if(this._user&&"account_admin"!==this._user.role&&"account_publisher"!==
this._user.role)return this._showError(this.i18n.errors.insuffientPrivs)}else if("stylx"===d)this._updateUI(null,"stylx"),this._updateUI(null,"file");else if(this.itemInfo[d])this._updateUI(null,"file");else return this._showError({message:this.i18n.errors.unknownType.message});else this._updateUI("title","publish"),this._updateUI(null,d);else this._updateUI(null,"publish"),this._updateUI(null,d);return{file:h,type:d}}})));"ipynb"==d&&this.selectNotebookRuntimeContainer.classList.remove("hide")},
_getUrlAndType:function(){this._inlineError.classList.remove("is-active");var c=/http.+\/(arcgis\/rest\/services|\/.*\/rest\/services|arcgis\/services)\/?/ig,h=/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer|WMServer|SceneServer|VectorTileServer|StreamServer|WorkspaceServer|GeoenrichmentServer)).*/ig,d=decodeURIComponent(this.elementValue("url")),b=d&&-1<d.indexOf("/dynamicLayer?")?d.substring(0,d.indexOf("/dynamicLayer")):
d.split("?")[0]||d;"/"==b.substr(-1)&&(b=b.substr(0,b.length-1));if("opext"===this._getRadioButtonValue("app")||this._getRadioButtonValue(!1))S.query(".opextwarningmsg",this.domNode).style("display","none"),this.elementValue("title","");this.deleteGrid();this._updateUI("wfs",null);this._updateUI("complexOptions",null);this._updateUI("svcauth","all");this._updateUI(null,"storecredentials");this._updateUI("imageServiceType",null);this.item&&this.item.serviceInfo&&(this.item.serviceInfo=null);if(b){/(http|https|ftp):\/\/?/.exec(b)||
this.elementValue("url",b="https://"+b);this.item=this.item||{};!(-1<b.indexOf("http://"))||esriGeowConfig.self.isPortal||esriGeowConfig.self.allSSL&&"MapServer"===e||this._showError({message:this.i18n.httpNotSupported},null,!0);if("url"===this.elementValue("itemType")){var a=b.replace(/^.*\//,"").replace(/.[^.]*$/,"");var e=this._getRadioButtonValue("web");this.item.type=e;if("ags"===e){a=b.replace(h,"").replace(/^.*\//,"").replace(/\?.*$/,"");e=(c=b.replace(c,"").match(h))&&c.length?c[0].split("/")[1]:
null;if(!e||"SceneServer"===e&&!esriGeowConfig.sceneViewerEnabled)return e=esri.substitute({portalName:esriGeowConfig.portalName||this.i18n.portalName},this.i18n.errors.unknownAGSType.message),this._showError({message:e},null,!0);c=c.length?c[0].split("/")[2]:null;"mapserver"===e&&(e="MapServer");"MapServer"!==e||isNaN(c)||(e="FeatureServer");this.item.type=e;!esriGeowConfig.allSSL&&"https:"!==location.protocol||!this._util.isHostedService(b)&&!this._util.supportsHttps(b)||(b=b.replace("http:/","https:/"));
this.disable(!1,this.i18n.fetching);this._serviceInfoPane.getIsSecured(b).then(S.hitch(this,function(q){if(q.secured)this._serviceInfoPane.isFederatedWithWebTierAuth(b,q).then(S.hitch(this,function(t){if(t||401===q.httpStatusCode)return-1===t?(this.item.isSecured=!1,this.item.checkUrlError=!0,this._storeAuth.set("checked",!1)):this.item=S.mixin(this.item,{isSecured:{httpStatusCode:401,isFederatedWithWebTierAuth:t}}),this._getServiceInfo(b);this.item.isSecured=q;this._updateUI("nosvcauth","svcauth");
this._updateUI(null,"storecredentials");q.isOverride&&this._storeAuth.set("checked",!0);this._serviceInfoPane.get("userInfo")&&this._getServiceInfo(b);this.enable()}));else return this._getServiceInfo(b)}),S.hitch(this,function(q){this.item.isSecured=!1;this.item.checkUrlError=q;this._storeAuth.set("checked",!1);return this._getServiceInfo(b)}))}else{if("ogc"===e)return this._basicStandby.show(),this.disable(!1,this.i18n.fetching),this._getOGCServiceInfo(this.elementValue("url"),a).then(S.hitch(this,
"_loadOGC"));if("wfs"===e)return this._basicStandby.show(),this.disable(!1,this.i18n.fetching),this._getWFSServiceInfo(this.elementValue("url"),a).then(S.hitch(this,"_loadWFS"));if("wmts"===e)return this._basicStandby.show(),this.disable(!1,this.i18n.fetching),this._getWMTSServiceInfo(this.elementValue("url"),a).then(S.hitch(this,"_loadWMTS"))}}else if(a=b.replace(/^.*\//,"").replace(/.[^.]*$/,""),this.item.type=this._getRadioButtonValue("app"),"opext"===this.item.type||"appbldrext"===this.item.type)-1===
b.indexOf(".json",b.length-5)?this._showError({message:this.i18n.errors["opext"===this.item.type?"opExtensionNotJson":"appBldrExtensionNotJson"]}):this._fetchManifest(b).then(S.hitch(this,function(q){this._manifestInfo=q;"opext"===this.item.type?this._validateOpExtension(q)&&(a=q&&(q.name||q.title||a),this.elementValue("title",decodeURI(a))):"appbldrext"===this.item.type&&this._validateAppBuilderExtension(q)&&(a=q&&(q.name||q.title||a),this.elementValue("title",decodeURI(a)))}));this.item.url=b;this.elementValue("title",
decodeURI(a))}},_getDefaultPublishParameters:function(c){var h=c.type.toLowerCase(),d=c.types&&-1<c.types.indexOf("is-compact"),b={itemId:c.id,filetype:h};"servicedefinition"===h?b.filetype="serviceDefinition":"tilepackage"===h?b.filetype=d?"compactTilePackage":"tilePackage":"scenepackage"===h?b.filetype="scenePackage":"json"===h?b.filetype="geojson":"imagecollection"===h?(b.filetype="imagecollection",b.outputType="image service"):b.filetype=h;if("servicedefinition"!==h&&"tilepackage"!==h&&"scenepackage"!==
h&&"vectortilepackage"!==h)b.publishParameters=S.mixin(c.csvInfo&&c.csvInfo.publishParameters||c.publishParameters||{},{hasStaticData:!0,name:this.elementValue("title").replace(/ /g,"_"),maxRecordCount:2E3}),b.publishParameters.layerInfo=S.mixin(b.publishParameters.layerInfo||{},{capabilities:"Query"}),"csv"===h&&(b.publishParameters.persistErrorRecordsForReview=!0);else{if("tilepackage"===h||"scenepackage"===h||"vectortilepackage"===h)b.publishParameters=S.mixin(c.publishParameters||{},{name:this.elementValue("title").replace(/ /g,
"_"),maxRecordCount:2E3}),"scenepackage"===h?b.outputType="sceneService":"vectortilepackage"===h&&(b.outputType="VectorTiles");b.buildInitialCache="tilepackage"===h||("vectortilepackage"===h||"scenepackage"===h)&&!this._isPortal}return b},_getSpatialReference:function(c){var h=c.serviceInfo||{};if(c="ImageServer"!==c.type?h.spatialReference:h.extent&&h.extent.spatialReference){if(c.wkid)return c.wkid;if(c.wkt&&-1!==c.wkt.search(/^PROJCS/i))return/^PROJCS\["[A-Za-z0-9_]*/i.exec(c.wkt)[0].split("[")[1]}return null},
_extent2String:function(c,h){h=h||4;var d="";if(c&&this._isValidNum(c.xmin)&&this._isValidNum(c.ymin)&&this._isValidNum(c.xmax)&&this._isValidNum(c.ymax)){d=S.number.round(c.xmin,h);var b=S.number.round(c.ymin,h),a=S.number.round(c.xmax,h);c=S.number.round(c.ymax,h);d=isNaN(d)||isNaN(b)||isNaN(a)||isNaN(c)?"":d+","+b+","+a+","+c}return d},_checkProtocol:function(){return-1===window.location.protocol.toLowerCase().indexOf("https")&&esriGeowConfig.self&&esriGeowConfig.self.isWebTierAuth?(this._showReloadDlg(),
!1):!0},_isValidNum:function(c){return isNaN(c)||void 0===c||null===c?!1:!0},_isRasterFunctionTemplate:function(c){if(!esri.isDefined(c))return!1;var h=c.substring(c.length-9,c.length).toLowerCase();c=c.substring(c.length-8,c.length).toLowerCase();return".rft.json"==h||".rft.xml"==c},_getRasterFunctionTemplateName:function(c){var h=c&&c.substring(0,c.toLowerCase().lastIndexOf(".rft.json")),d=c&&c.substring(0,c.toLowerCase().lastIndexOf(".rft.xml"));return c?h||d:""},_updateUI:function(c,h){c&&S.query("."+
c).style("display","none");h&&(this._publishOnly||"csv"!==h&&"xlsx"!==h?this._publishOnly||"json"!==h&&"geojson"!==h&&"shapefile"!==h&&"servicedefinition"!==h&&"filegeodatabase"!==h||(S.place(this._publishNode,this._publishServiceDiv,"first"),esri.show(this._publishServiceDiv),esri.hide(this._publishCSVDiv)):(S.place(this._publishNode,this._publishCSVDiv,"first"),esri.show(this._publishCSVDiv),esri.hide(this._publishServiceDiv)),S.query("."+h).style("display",""),"csv"!==h&&"xlsx"!==h||this._allowGeocode||
(S.query(".portal").style("display","none"),S.query(".noGeocode").style("display","")),"imageServiceType"===h&&this._defaultImageServiceTypeNode.set("checked",!0));S.query(".esriAGOAddItemForm").style("height","auto");this.dialog.resize()},_itemExists:function(c){var h=c.title,d=this.folder&&"/"!==this.folder?this.folder:"root",b=this.itemInfo[c.type.toLowerCase()]?this.itemInfo[c.type.toLowerCase()].type:c.type;d={q:'title:"'+h+'" AND type:"'+b+'" AND owner:"'+this._user.username+'" AND ownerfolder:"'+
d+'"',num:1};var a,e=new S.Deferred;this._util.request({url:esriGeowConfig.restBaseUrl+"search",content:d}).then(S.hitch(this,function(q){q&&q.total?(a=q.results&&q.results.shift(),!this._itemExistsError&&(this.item&&this.item.id===a.id||h!==a.title)?e.resolve(!1):(this._itemExistsError=!0,q=this.item.isFile?esri.substitute({type:this.item.fileExtension,item:c.item,name:c.name||c.title,title:c.title},this.i18n.errors.itemExistsFile.message):esri.substitute({type:b,item:c.item,title:h},this.i18n.errors.itemExists.message),
e.resolve(!this._showError({message:q})))):e.resolve(!1)}));return e},_serviceNameAvailable:function(c){c="tilepackage"===c.type?"Map Service":"scenepackage"===c.type?"Scene Service":"vectortilepackage"===c.type?"Vector Tile Service":"imagecollection"===c.type?"Image Service":"Feature Service";c={name:this.elementValue("title").split(" ").join("_"),type:c};var h=esriGeowConfig.self&&esriGeowConfig.self.user&&(esriGeowConfig.self.user.accountId||esriGeowConfig.self.user.orgId);this.disable(["addItem"]);
return this._request(this._portalUrl+"/"+h+"/isServiceNameAvailable",c).then(S.hitch(this,function(d){return d.available?!0:this._showError(this.i18n.errors.serviceNameExists)}))},_loadConnections:function(){esriGeowConfig.isRightToLeft&&(9>S.has("ie")||5>S.has("trident"))&&this._tags._textTags.set("placeHolder","");this.own(S.subscribe("onSelectedTagsUpdate",S.hitch(this,function(d){var b=this._tags.get("tags");d=b?d.split(",").concat(b.split(",")):d.split(",");this._tags.set("tags",this._unique(d).join(","))})));
9>S.isIE&&this.own(S.query(".radio").connect("onclick",S.hitch(this,function(d){(d.focusNode?S.attr(d.focusNode,"checked"):1)&&S.forEach(this.formWidgets[(d.target||d.srcElement).name].widget,S.hitch(this,function(b){S.forEach(b.observer.split(/[ ,]+/),S.hitch(this,function(a){if(!1!==b.get("value"))this[a](b.get("value"))}))}))})));this.own(S.connect(this._tagsLbl,"onclick",S.hitch(this,function(d){this._tags._inputTextBox.focus();S.query(".select2-choices",this._tags.domNode).addClass("focus")})),
S.connect(this._tags.domNode,"onfocusout",S.hitch(this,function(d){S.query(".select2-choices",this._tags.domNode).removeClass("focus")})),S.connect(this._tags.domNode,"onfocusin",S.hitch(this,function(d){S.query(".select2-choices",this._tags.domNode).addClass("focus")})));this._tagsLbl.setAttribute("for",this._tags._filterId);this._dlgConnect=S.connect(this.dialog,"hide",S.hitch(this,function(){this.deleteGrid();S.forEach([this._fileInputConnect,this._dlgConnect,this._credentialConnect].concat(this._gridConnects),
S.disconnect);this._basicStandby.destroy();this.destroy()}));this._dlgConnect=S.connect(this._geocoderSelect,"onChange",S.hitch(this,this.onChangeGeocoder));var c=arcgisonline.sharing.dijit.HelpManager.prototype.statics.getInstance(),h=setInterval(S.hitch(this,function(){c.isLoaded()&&(clearInterval(h),this.learnMore.href=c.getHelpUrl(this._isPortal?"120001641":"120000597"),c.destroyRecursive())}),200);this._fileInputConnect=S.connect(S.byId("file"),"onchange",S.hitch(this,"_getFileAndType"));this._gridConnects=
[];esri.id.setProtocolErrorHandler(S.hitch(this,"_showReloadDlg"))},_getRadioButtonValue:function(c){var h;return 9>=S.isIE?(S.some(this.formWidgets[c].widget||[],function(d){return d.get("checked")?(h=d,!0):!1}),h?h.get("value"):""):this.elementValue(c)},_unique:function(c){var h={};return S.filter(c,function(d){return!d||h[d]?!1:h[d]=!0})},_stripParameters:function(c,h){c=esri.urlToObject(c);var d=[],b;for(b in c.query)-1===S.indexOf(h,b.toLowerCase())&&d.push(b+"\x3d"+c.query[b]);return c.path+
(d.length?"?"+d.join("\x26"):"")},_checkThumbnailURL:function(c){c.thumbnailURL&&(c.thumbnailURL=this._util.getStaticImagesUrl()+c.thumbnailURL);arcgisonline.sharing.util.isPortal()&&c.thumbnailURL&&0!==c.thumbnailURL.indexOf("http")&&(c.thumbnailURL=window.location.protocol+"//"+window.location.host+c.thumbnailURL);return c},_toSelectOptions:function(c,h){var d=[],b=[],a;for(a in c)d.push(c[a]),b.push(a);return{formatter:function(e){return c[e]||c[h]},options:d,values:b}},elementValue:function(c,
h){c&&"title"===c&&esri.isDefined(h)&&(h=this.elementValue(c)||h);return this.inherited(arguments)},_showReloadDlg:function(){this._reload=!0;if(window.location&&-1===window.location.protocol.indexOf("https:")){var c={title:this.i18n.reloadTitle,message:"\x3cp\x3e"+this.i18n.reloadMessage+"\x3c/p\x3e",choiceOneTitle:this.i18n.yesLabel,choiceTwoTitle:this.i18n.noLabel,choiceOneHandler:S.hitch(this,function(){window.location=window.location.href.replace("http:","https:")}),choiceTwoHandler:S.hitch(this,
function(){this._choiceDlg.hide()})};this._choiceDlg.show(c);return!1}},_showNoGeocodeDlg:function(){var c=S.connect(this._errorDlg,"onHide",S.hitch(this,function(){S.disconnect(c);this.onCancel()})),h=S.mixin({},this.i18n.errors.error,{message:this._roleCanUseGeocode?this.i18nCommon.errors.noBatchGeocoding:this.i18nCommon.errors.noGeocodingRole});this._errorDlg.show(h)},showModal:function(c){var h=new S.Deferred;this.dialog=new J.Dialog({"class":"esriAddItemDlg"});this.dialog.set({title:c.title||
this.i18n.itemProperties.addItemDlgTitle,content:this.domNode});this.dialog.show();return h},_showError:function(c,h,d){h&&h.canceled||(c=c.error||c||{},c.code=c.code||0,c=this.i18n.errors[c.code]||c,c.details=c.details&&S.isArray(c.details)&&c.details.length?S.filter(c.details,"return item !\x3d\x3d null"):null,c.message&&-1<c.message.indexOf("Unable to load")&&(c.code||(c.code=502),c=S.mixin(c,{message:this.i18nCommon.errors.errorUploadingFile})),c.messageCode&&"GWM_0011"===c.messageCode&&(c=S.mixin(c,
{message:this.i18nCommon.errors.spamContentItemCreate})),c.messageCode&&"CONT_0001"===c.messageCode&&(c=S.mixin(c,{message:this.i18nCommon.errors.CONT_0001})),c.messageCode&&"CONT_0027"===c.messageCode&&(h=this.itemInfo[this.item.type.toLowerCase()]?this.itemInfo[this.item.type.toLowerCase()].type:this.item.type,h=this.item.isFile?esri.substitute({type:h,name:this.item.name||this.item.item},this.i18n.errors.fileNameExists.message):esri.substitute({type:h,title:this.item.item},this.i18n.errors.itemExists.message),
c=S.mixin(c,{message:h})),-1<c.message.indexOf("Must specify data to be analyzed")&&(c=S.mixin(c,{message:this.i18nCommon.errors.fileNotValid})),-1<c.message.indexOf("Duplicate field names are not allowed")&&(c=S.mixin(c,{message:this.i18nCommon.errors.duplicateFields})),c.details&&c.details.length&&(c.details=c.details.join("\x3cbr /\x3e"),c.message=c.message?c.message+"\x3cbr /\x3e"+c.details:c.details),h=S.mixin(S.mixin({},this.i18n.errors.error),c),d?(this._inlineError.innerHTML=c.message,this._inlineError.classList.add("is-active")):
this._errorDlg.show(h));this._basicStandby.hide();this.enable();return!1},initNotebooks:function(){esriGeowConfig.userRole.canCreateNotebooks()&&this.notebookUtil.notebookServerConfigured()&&this.notebookUtil.getNotebookServer().then(S.hitch(this,function(c){c&&S.promise.all({runtimeInfo:this.notebookUtil.getNotebookRuntimesBase(c.url),serverInfo:this.notebookUtil.pingNotebookServer(c.url)}).then(S.hitch(this,function(h){h.runtimeInfo.runtimes&&h.runtimeInfo.runtimes.length&&this.notebookUtil.createRuntimeSelect(h.runtimeInfo.runtimes,
h.serverInfo.currentRuntimeVersion,this.selectNotebookRuntime,!0)}))}))}})})},"dojox/form/Manager":function(){define("dijit/_Widget dijit/_AttachMixin dijit/_WidgetsInTemplateMixin ./manager/_Mixin ./manager/_NodeMixin ./manager/_FormMixin ./manager/_ValueMixin ./manager/_EnableMixin ./manager/_DisplayMixin ./manager/_ClassMixin dojo/_base/declare".split(" "),function(S,J,f,c,h,d,b,a,e,q,t){return t("dojox.form.Manager",[S,f,J,c,h,d,b,a,e,q],{searchContainerNode:!0,buildRendering:function(){this.containerNode||
(this.containerNode=this.srcNodeRef);this.inherited(arguments)}})})},"dojox/form/manager/_Mixin":function(){define("dojo/_base/window dojo/_base/lang dojo/_base/array dojo/on dojo/dom-attr dojo/dom-class dijit/_base/manager dijit/_Widget dijit/form/_FormWidget dijit/form/Button dijit/form/CheckBox dojo/_base/declare".split(" "),function(S,J,f,c,h,d,b,a,e,q,t,u){S=J.getObject("dojox.form.manager",!0);var g=S.actionAdapter=function(k){return function(r,w,x){J.isArray(w)?f.forEach(w,function(D){k.call(this,
r,D,x)},this):k.apply(this,arguments)}};S.inspectorAdapter=function(k){return function(r,w,x){return k.call(this,r,J.isArray(w)?w[0]:w,x)}};var m={domNode:1,containerNode:1,srcNodeRef:1,bgIframe:1},v=S._keys=function(k){var r=[],w;for(w in k)k.hasOwnProperty(w)&&r.push(w);return r},p=function(k){var r=k.get("name");if(r&&k.isInstanceOf(e))if(r in this.formWidgets){var w=this.formWidgets[r].widget;J.isArray(w)?w.push(k):this.formWidgets[r].widget=[w,k]}else this.formWidgets[r]={widget:k,connections:[]};
else r=null;return r},l=function(k){var r={};g(function(w,x){(w=x.get("data-dojo-observer")||x.get("observer"))&&"string"==typeof w&&f.forEach(w.split(","),function(D){(D=J.trim(D))&&J.isFunction(this[D])&&(r[D]=1)},this)}).call(this,null,this.formWidgets[k].widget);return v(r)},n=function(k,r){var w=this.formWidgets[k],x=w.widget,D=w.connections;D.length&&(f.forEach(D,function(F){F.remove()}),D=w.connections=[]);if(J.isArray(x))f.forEach(x,function(F){f.forEach(r,function(A){D.push(c(F,"change",
J.hitch(this,function(y){if(this.watching&&h.get(F.focusNode,"checked"))this[A](F.get("value"),k,F,y)})))},this)},this);else{var G=x.isInstanceOf(q)?"click":"change";f.forEach(r,function(F){D.push(c(x,G,J.hitch(this,function(A){if(this.watching)this[F](x.get("value"),k,x,A)})))},this)}};u=u("dojox.form.manager._Mixin",null,{watching:!0,startup:function(){this._started||(this.formWidgets={},this.formNodes={},this.registerWidgetDescendants(this),this.inherited(arguments))},destroy:function(){for(var k in this.formWidgets)f.forEach(this.formWidgets[k].connections,
function(r){r.remove()});this.formWidgets={};this.inherited(arguments)},registerWidget:function(k){"string"==typeof k?k=b.byId(k):k.tagName&&k.cloneNode&&(k=b.byNode(k));(k=p.call(this,k))&&n.call(this,k,l.call(this,k));return this},unregisterWidget:function(k){k in this.formWidgets&&(f.forEach(this.formWidgets[k].connections,function(r){r.remove()}),delete this.formWidgets[k]);return this},registerWidgetDescendants:function(k){"string"==typeof k?k=b.byId(k):k.tagName&&k.cloneNode&&(k=b.byNode(k));
var r=f.map(k.getDescendants(),p,this);f.forEach(r,function(w){w&&n.call(this,w,l.call(this,w))},this);return this.registerNodeDescendants?this.registerNodeDescendants(k.domNode):this},unregisterWidgetDescendants:function(k){"string"==typeof k?k=b.byId(k):k.tagName&&k.cloneNode&&(k=b.byNode(k));f.forEach(f.map(k.getDescendants(),function(r){return r instanceof e&&r.get("name")||null}),function(r){r&&this.unregisterWidget(r)},this);return this.unregisterNodeDescendants?this.unregisterNodeDescendants(k.domNode):
this},formWidgetValue:function(k,r){var w=2==arguments.length&&void 0!==r,x;"string"==typeof k&&(k=this.formWidgets[k])&&(k=k.widget);if(!k)return null;if(J.isArray(k)){if(w)return f.forEach(k,function(D){D.set("checked",!1,!this.watching)},this),f.forEach(k,function(D){D.set("checked",D.value===r,!this.watching)},this),this;f.some(k,function(D){return h.get(D.focusNode,"checked")?(x=D,!0):!1});return x?x.get("value"):""}return k.isInstanceOf&&k.isInstanceOf(t)?w?(k.set("value",!!r,!this.watching),
this):!!k.get("value"):w?(k.set("value",r,!this.watching),this):k.get("value")},formPointValue:function(k,r){k&&"string"==typeof k&&(k=this[k]);return k&&k.tagName&&k.cloneNode&&d.contains(k,"dojoFormValue")?2==arguments.length&&void 0!==r?(k.innerHTML=r,this):k.innerHTML:null},inspectFormWidgets:function(k,r,w){var x,D={};if(r)if(J.isArray(r))f.forEach(r,function(G){G in this.formWidgets&&(D[G]=k.call(this,G,this.formWidgets[G].widget,w))},this);else for(x in r)x in this.formWidgets&&(D[x]=k.call(this,
x,this.formWidgets[x].widget,r[x]));else for(x in this.formWidgets)D[x]=k.call(this,x,this.formWidgets[x].widget,w);return D},inspectAttachedPoints:function(k,r,w){var x,D,G={};if(r)if(J.isArray(r))f.forEach(r,function(F){(D=this[F])&&D.tagName&&D.cloneNode&&(G[F]=k.call(this,F,D,w))},this);else for(x in r)(D=this[x])&&D.tagName&&D.cloneNode&&(G[x]=k.call(this,x,D,r[x]));else for(x in this)x in m||(D=this[x])&&D.tagName&&D.cloneNode&&(G[x]=k.call(this,x,D,w));return G},inspect:function(k,r,w){var x=
this.inspectFormWidgets(function(D,G,F){return J.isArray(G)?k.call(this,D,f.map(G,function(A){return A.domNode}),F):k.call(this,D,G.domNode,F)},r,w);this.inspectFormNodes&&J.mixin(x,this.inspectFormNodes(k,r,w));return J.mixin(x,this.inspectAttachedPoints(k,r,w))}});J.extend(a,{observer:""});return u})},"dojox/form/manager/_NodeMixin":function(){define("dojo/_base/lang dojo/_base/array dojo/on dojo/dom dojo/dom-attr dojo/query ./_Mixin dijit/form/_FormWidget dijit/_base/manager dojo/_base/declare".split(" "),
function(S,J,f,c,h,d,b,a,e,q){b=S.getObject("dojox.form.manager",!0);var t=b.actionAdapter,u=b._keys,g=b.changeEvent=function(l){var n="click";switch(l.tagName.toLowerCase()){case "textarea":n="keyup";break;case "select":n="change";break;case "input":switch(l.type.toLowerCase()){case "text":case "password":n="keyup"}}return n},m=function(l,n){var k=h.get(l,"name");n=n||this.domNode;if(!k||k in this.formWidgets)k=null;else{for(var r=l;r&&r!==n;r=r.parentNode)if(h.get(r,"widgetId")&&e.byNode(r).isInstanceOf(a))return null;
"input"==l.tagName.toLowerCase()&&"radio"==l.type.toLowerCase()?(n=(n=this.formNodes[k])&&n.node)&&S.isArray(n)?n.push(l):this.formNodes[k]={node:[l],connections:[]}:this.formNodes[k]={node:l,connections:[]}}return k},v=function(l){var n={};t(function(k,r){(k=h.get(r,"data-dojo-observer")||h.get(r,"observer"))&&"string"==typeof k&&J.forEach(k.split(","),function(w){(w=S.trim(w))&&S.isFunction(this[w])&&(n[w]=1)},this)}).call(this,null,this.formNodes[l].node);return u(n)},p=function(l,n){var k=this.formNodes[l],
r=k.connections;r.length&&(J.forEach(r,function(w){w.remove()}),r=k.connections=[]);t(function(w,x){var D=g(x);J.forEach(n,function(G){r.push(f(x,D,S.hitch(this,function(F){if(this.watching)this[G](this.formNodeValue(l),l,x,F)})))},this)}).call(this,null,k.node)};return q("dojox.form.manager._NodeMixin",null,{destroy:function(){for(var l in this.formNodes)J.forEach(this.formNodes[l].connections,function(n){n.remove()});this.formNodes={};this.inherited(arguments)},registerNode:function(l){"string"==
typeof l&&(l=c.byId(l));(l=m.call(this,l))&&p.call(this,l,v.call(this,l));return this},unregisterNode:function(l){l in this.formNodes&&(J.forEach(this.formNodes[l].connections,function(n){n.remove()}),delete this.formNodes[l]);return this},registerNodeDescendants:function(l){"string"==typeof l&&(l=c.byId(l));d("input, select, textarea, button",l).map(function(n){return m.call(this,n,l)},this).forEach(function(n){n&&p.call(this,n,v.call(this,n))},this);return this},unregisterNodeDescendants:function(l){"string"==
typeof l&&(l=c.byId(l));d("input, select, textarea, button",l).map(function(n){return h.get(l,"name")||null}).forEach(function(n){n&&this.unregisterNode(n)},this);return this},formNodeValue:function(l,n){var k=2==arguments.length&&void 0!==n;"string"==typeof l&&(l=this.formNodes[l])&&(l=l.node);if(!l)return null;if(S.isArray(l)){if(k)return J.forEach(l,function(x){x.checked=""}),J.forEach(l,function(x){x.checked=x.value===n?"checked":""}),this;J.some(l,function(x){return x.checked?(w=x,!0):!1});return w?
w.value:""}switch(l.tagName.toLowerCase()){case "select":if(l.multiple){if(k){if(S.isArray(n)){var r={};J.forEach(n,function(x){r[x]=1});d("\x3e option",l).forEach(function(x){x.selected=x.value in r});return this}d("\x3e option",l).forEach(function(x){x.selected=x.value===n});return this}var w=d("\x3e option",l).filter(function(x){return x.selected}).map(function(x){return x.value});return 1==w.length?w[0]:w}return k?(d("\x3e option",l).forEach(function(x){x.selected=x.value===n}),this):l.value||
"";case "button":return k?(l.innerHTML=""+n,this):l.innerHTML;case "input":if("checkbox"==l.type.toLowerCase())return k?(l.checked=n?"checked":"",this):!!l.checked}return k?(l.value=""+n,this):l.value},inspectFormNodes:function(l,n,k){var r,w={};if(n)if(S.isArray(n))J.forEach(n,function(x){x in this.formNodes&&(w[x]=l.call(this,x,this.formNodes[x].node,k))},this);else for(r in n)r in this.formNodes&&(w[r]=l.call(this,r,this.formNodes[r].node,n[r]));else for(r in this.formNodes)w[r]=l.call(this,r,
this.formNodes[r].node,k);return w}})})},"dojox/form/manager/_FormMixin":function(){define("dojo/_base/lang dojo/_base/kernel dojo/_base/event dojo/window ./_Mixin dojo/_base/declare".split(" "),function(S,J,f,c,h,d){var b=S.getObject("dojox.form.manager",!0).actionAdapter;return d("dojox.form.manager._FormMixin",null,{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",startup:function(){if(this.isForm="form"==this.domNode.tagName.toLowerCase())this.connect(this.domNode,
"onreset","_onReset"),this.connect(this.domNode,"onsubmit","_onSubmit");this.inherited(arguments)},_onReset:function(a){var e={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:a.currentTarget,target:a.target};!1!==this.onReset(e)&&e.returnValue&&this.reset();f.stop(a);return!1},onReset:function(){return!0},reset:function(){this.inspectFormWidgets(b(function(a,e){e.reset&&e.reset()}));this.isForm&&this.domNode.reset();return this},_onSubmit:function(a){!1===
this.onSubmit(a)&&f.stop(a)},onSubmit:function(){return this.isValid()},submit:function(){this.isForm&&!1!==this.onSubmit()&&this.domNode.submit()},isValid:function(){for(var a in this.formWidgets){var e=!1;b(function(q,t){t.get("disabled")||!t.isValid||t.isValid()||(e=!0)}).call(this,null,this.formWidgets[a].widget);if(e)return!1}return!0},validate:function(){var a=!0,e=this.formWidgets,q=!1,t;for(t in e)b(function(u,g){g._hasBeenBlurred=!0;u=g.disabled||!g.validate||g.validate();u||q||(c.scrollIntoView(g.containerNode||
g.domNode),g.focus(),q=!0);a=a&&u}).call(this,null,e[t].widget);return a}})})},"dojox/form/manager/_ValueMixin":function(){define(["dojo/_base/lang","dojo/_base/kernel","dojo/_base/declare"],function(S,J,f){return f("dojox.form.manager._ValueMixin",null,{elementValue:function(c,h){return c in this.formWidgets?this.formWidgetValue(c,h):this.formNodes&&c in this.formNodes?this.formNodeValue(c,h):this.formPointValue(c,h)},gatherFormValues:function(c){var h=this.inspectFormWidgets(function(d){return this.formWidgetValue(d)},
c);this.inspectFormNodes&&S.mixin(h,this.inspectFormNodes(function(d){return this.formNodeValue(d)},c));S.mixin(h,this.inspectAttachedPoints(function(d){return this.formPointValue(d)},c));return h},setFormValues:function(c){c&&(this.inspectFormWidgets(function(h,d,b){this.formWidgetValue(h,b)},c),this.inspectFormNodes&&this.inspectFormNodes(function(h,d,b){this.formNodeValue(h,b)},c),this.inspectAttachedPoints(function(h,d,b){this.formPointValue(h,b)},c));return this}})})},"dojox/form/manager/_EnableMixin":function(){define(["dojo/_base/lang",
"dojo/_base/kernel","dojo/dom-attr","./_Mixin","dojo/_base/declare"],function(S,J,f,c,h){J=S.getObject("dojox.form.manager",!0);var d=J.actionAdapter,b=J.inspectorAdapter;return h("dojox.form.manager._EnableMixin",null,{gatherEnableState:function(a){var e=this.inspectFormWidgets(b(function(q,t){return!t.get("disabled")}),a);this.inspectFormNodes&&S.mixin(e,this.inspectFormNodes(b(function(q,t){return!f.get(t,"disabled")}),a));return e},enable:function(a,e){if(2>arguments.length||void 0===e)e=!0;this.inspectFormWidgets(d(function(q,
t,u){t.set("disabled",!u)}),a,e);this.inspectFormNodes&&this.inspectFormNodes(d(function(q,t,u){f.set(t,"disabled",!u)}),a,e);return this},disable:function(a){var e=this.gatherEnableState();this.enable(a,!1);return e}})})},"dojox/form/manager/_DisplayMixin":function(){define(["dojo/_base/kernel","dojo/dom-style","dojo/_base/declare"],function(S,J,f){return f("dojox.form.manager._DisplayMixin",null,{gatherDisplayState:function(c){return this.inspectAttachedPoints(function(h,d){return"none"!=J.get(d,
"display")},c)},show:function(c,h){2>arguments.length&&(h=!0);this.inspectAttachedPoints(function(d,b,a){J.set(b,"display",a?"":"none")},c,h);return this},hide:function(c){return this.show(c,!1)}})})},"dojox/form/manager/_ClassMixin":function(){define(["dojo/_base/lang","dojo/_base/kernel","dojo/dom-class","./_Mixin","dojo/_base/declare"],function(S,J,f,c,h){S=S.getObject("dojox.form.manager",!0);var d=S.actionAdapter,b=S.inspectorAdapter;return h("dojox.form.manager._ClassMixin",null,{gatherClassState:function(a,
e){return this.inspect(b(function(q,t){return f.contains(t,a)}),e)},addClass:function(a,e){this.inspect(d(function(q,t){f.add(t,a)}),e);return this},removeClass:function(a,e){this.inspect(d(function(q,t){f.remove(t,a)}),e);return this}})})},"dojox/widget/Standby":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/array dojo/_base/event dojo/_base/sniff dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/window dojo/_base/window dojo/_base/fx dojo/fx dijit/_Widget dijit/_TemplatedMixin dijit/registry".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l){S.experimental("dojox.widget.Standby");return J("dojox.widget.Standby",[v,p],{image:require.toUrl("dojox/widget/Standby/images/loading.gif").toString(),imageText:"Please Wait...",text:"Please wait...",centerIndicator:"image",target:"",color:"#C0C0C0",duration:500,zIndex:"auto",opacity:.75,templateString:'\x3cdiv\x3e\x3cdiv style\x3d"display: none; opacity: 0; z-index: 9999; position: absolute; cursor:wait;" dojoAttachPoint\x3d"_underlayNode"\x3e\x3c/div\x3e\x3cimg src\x3d"${image}" style\x3d"opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px; left: 0px; cursor:wait;" dojoAttachPoint\x3d"_imageNode"\x3e\x3cdiv style\x3d"opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px;" dojoAttachPoint\x3d"_textNode"\x3e\x3c/div\x3e\x3c/div\x3e',
_underlayNode:null,_imageNode:null,_textNode:null,_centerNode:null,_displayed:!1,_resizeCheck:null,_started:!1,_parent:null,startup:function(n){if(!this._started){if("string"===typeof this.target){var k=l.byId(this.target);this.target=k?k.domNode:d.byId(this.target)}this.text&&(this._textNode.innerHTML=this.text);"image"===this.centerIndicator?(this._centerNode=this._imageNode,b.set(this._imageNode,"src",this.image),b.set(this._imageNode,"alt",this.imageText)):this._centerNode=this._textNode;q.set(this._underlayNode,
{display:"none",backgroundColor:this.color});q.set(this._centerNode,"display","none");this.connect(this._underlayNode,"onclick","_ignore");this.domNode.parentNode&&this.domNode.parentNode!=u.body()&&u.body().appendChild(this.domNode);7==h("ie")&&(this._ieFixNode=a.create("div"),q.set(this._ieFixNode,{opacity:"0",zIndex:"-1000",position:"absolute",top:"-1000px"}),u.body().appendChild(this._ieFixNode));this.inherited(arguments)}},show:function(){this._displayed||(this._anim&&(this._anim.stop(),delete this._anim),
this._displayed=!0,this._size(),this._disableOverflow(),this._fadeIn())},hide:function(){if(this._displayed)try{this._anim&&(this._anim.stop(),delete this._anim),this._size()}catch(n){}finally{this._fadeOut(),this._displayed=!1,null!==this._resizeCheck&&(clearInterval(this._resizeCheck),this._resizeCheck=null)}},isVisible:function(){return this._displayed},onShow:function(){},onHide:function(){},uninitialize:function(){this._displayed=!1;this._resizeCheck&&clearInterval(this._resizeCheck);q.set(this._centerNode,
"display","none");q.set(this._underlayNode,"display","none");7==h("ie")&&this._ieFixNode&&(u.body().removeChild(this._ieFixNode),delete this._ieFixNode);this._anim&&(this._anim.stop(),delete this._anim);this._centerNode=this._textNode=this._imageNode=this.target=null;this.inherited(arguments)},_size:function(){if(this._displayed){var n=b.get(u.body(),"dir");n&&(n=n.toLowerCase());var k=this._scrollerWidths(),r=this.target,w=q.get(this._centerNode,"display");q.set(this._centerNode,"display","block");
var x=e.position(r,!0);if(r===u.body()||r===u.doc)x=t.getBox(),x.x=x.l,x.y=x.t;var D=e.getMarginBox(this._centerNode);q.set(this._centerNode,"display",w);if(this._ieFixNode){var G=-this._ieFixNode.offsetTop/1E3;x.x=Math.floor((x.x+.9)/G);x.y=Math.floor((x.y+.9)/G);x.w=Math.floor((x.w+.9)/G);x.h=Math.floor((x.h+.9)/G)}var F=q.get(r,"zIndex"),A=w=F;if("auto"===this.zIndex)if("auto"!=F)w=parseInt(w,10),A=parseInt(A,10);else{var y=r;if(y&&y!==u.body()&&y!==u.doc)for(y=r.parentNode,G=-1E5;y&&y!==u.body();)(F=
q.get(y,"zIndex"))&&"auto"!==F&&(F=parseInt(F,10),G<F&&(G=F,w=F+1,A=F+1)),y=y.parentNode}else w=parseInt(this.zIndex,10),A=parseInt(this.zIndex,10);q.set(this._centerNode,"zIndex",A);q.set(this._underlayNode,"zIndex",w);if((w=r.parentNode)&&w!==u.body()&&r!==u.body()&&r!==u.doc){y=x.h;A=x.w;r=e.position(w,!0);this._ieFixNode&&(G=-this._ieFixNode.offsetTop/1E3,r.x=Math.floor((r.x+.9)/G),r.y=Math.floor((r.y+.9)/G),r.w=Math.floor((r.w+.9)/G),r.h=Math.floor((r.h+.9)/G));r.w-=w.scrollHeight>w.clientHeight&&
0<w.clientHeight?k.v:0;r.h-=w.scrollWidth>w.clientWidth&&0<w.clientWidth?k.h:0;"rtl"===n&&(h("opera")?(x.x+=w.scrollHeight>w.clientHeight&&0<w.clientHeight?k.v:0,r.x+=w.scrollHeight>w.clientHeight&&0<w.clientHeight?k.v:0):h("ie")?r.x+=w.scrollHeight>w.clientHeight&&0<w.clientHeight?k.v:0:h("webkit"));r.w<x.w&&(x.w-=r.w);r.h<x.h&&(x.h-=r.h);var z=r.y,B=r.y+r.h,C=x.y,H=x.y+y;n=r.x;G=r.x+r.w;F=x.x;var E=x.x+A;if(H>z&&C<z)x.y=r.y,y-=z-C,x.h=y<r.h?y:x.h-2*(w.scrollWidth>w.clientWidth&&0<w.clientWidth?
k.h:0);else if(C<B&&H>B)x.h=B-C;else if(H<=z||C>=B)x.h=0;if(E>n&&F<n)x.x=r.x,A-=n-F,x.w=A<r.w?A:x.w-2*(w.scrollHeight>w.clientHeight&&0<w.clientHeight?k.w:0);else if(F<G&&E>G)x.w=G-F;else if(E<=n||F>=G)x.w=0}0<x.h&&0<x.w?(q.set(this._underlayNode,{display:"block",width:x.w+"px",height:x.h+"px",top:x.y+"px",left:x.x+"px"}),k=["borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"],this._cloneStyles(k),h("ie")||(k="MozBorderRadius MozBorderRadiusTopleft MozBorderRadiusTopright MozBorderRadiusBottomleft MozBorderRadiusBottomright WebkitBorderRadius WebkitBorderTopLeftRadius WebkitBorderTopRightRadius WebkitBorderBottomLeftRadius WebkitBorderBottomRightRadius".split(" "),
this._cloneStyles(k,this)),k=x.h/2-D.h/2,w=x.w/2-D.w/2,x.h>=D.h&&x.w>=D.w?q.set(this._centerNode,{top:k+x.y+"px",left:w+x.x+"px",display:"block"}):q.set(this._centerNode,"display","none")):(q.set(this._underlayNode,"display","none"),q.set(this._centerNode,"display","none"));if(null===this._resizeCheck){var K=this;this._resizeCheck=setInterval(function(){K._size()},100)}}},_cloneStyles:function(n){f.forEach(n,function(k){q.set(this._underlayNode,k,q.get(this.target,k))},this)},_fadeIn:function(){var n=
this,k=g.animateProperty({duration:n.duration,node:n._underlayNode,properties:{opacity:{start:0,end:n.opacity}}}),r=g.animateProperty({duration:n.duration,node:n._centerNode,properties:{opacity:{start:0,end:1}},onEnd:function(){n.onShow();delete n._anim}});this._anim=m.combine([k,r]);this._anim.play()},_fadeOut:function(){var n=this,k=g.animateProperty({duration:n.duration,node:n._underlayNode,properties:{opacity:{start:n.opacity,end:0}},onEnd:function(){q.set(this.node,{display:"none",zIndex:"-1000"})}}),
r=g.animateProperty({duration:n.duration,node:n._centerNode,properties:{opacity:{start:1,end:0}},onEnd:function(){q.set(this.node,{display:"none",zIndex:"-1000"});n.onHide();n._enableOverflow();delete n._anim}});this._anim=m.combine([k,r]);this._anim.play()},_ignore:function(n){n&&c.stop(n)},_scrollerWidths:function(){var n=a.create("div");q.set(n,{position:"absolute",opacity:0,overflow:"hidden",width:"50px",height:"50px",zIndex:"-100",top:"-200px",padding:"0px",margin:"0px"});var k=a.create("div");
q.set(k,{width:"200px",height:"10px"});n.appendChild(k);u.body().appendChild(n);k=e.getContentBox(n);q.set(n,"overflow","scroll");var r=e.getContentBox(n);u.body().removeChild(n);return{v:k.w-r.w,h:k.h-r.h}},_setTextAttr:function(n){this.text=this._textNode.innerHTML=n},_setColorAttr:function(n){q.set(this._underlayNode,"backgroundColor",n);this.color=n},_setImageTextAttr:function(n){b.set(this._imageNode,"alt",n);this.imageText=n},_setImageAttr:function(n){b.set(this._imageNode,"src",n);this.image=
n},_setCenterIndicatorAttr:function(n){this.centerIndicator=n;"image"===n?(this._centerNode=this._imageNode,q.set(this._textNode,"display","none")):(this._centerNode=this._textNode,q.set(this._imageNode,"display","none"))},_setTargetAttr:function(n){if("string"===typeof n){var k=l.byId(n);this._set("target",k?k.domNode:d.byId(n))}else this._set("target",n)},_disableOverflow:function(){if(this.target===u.body()||this.target===u.doc){this._overflowDisabled=!0;var n=u.body();this._oldOverflow=n.style&&
n.style.overflow?q.get(n,"overflow"):"";if(h("ie")&&!h("quirks")){if(n.parentNode&&n.parentNode.style&&n.parentNode.style.overflow)this._oldBodyParentOverflow=n.parentNode.style.overflow;else try{this._oldBodyParentOverflow=q.get(n.parentNode,"overflow")}catch(k){this._oldBodyParentOverflow="scroll"}q.set(n.parentNode,"overflow","hidden")}q.set(n,"overflow","hidden")}},_enableOverflow:function(){if(this._overflowDisabled){delete this._overflowDisabled;var n=u.body();h("ie")&&!h("quirks")&&(n.parentNode.style.overflow=
this._oldBodyParentOverflow,delete this._oldBodyParentOverflow);q.set(n,"overflow",this._oldOverflow);if(h("webkit")){var k=a.create("div",{style:{height:"2px"}});n.appendChild(k);setTimeout(function(){n.removeChild(k)},0)}delete this._oldOverflow}}})})},"esri/layers/wms":function(){define(["./agscommon","./dynamic","./WMSLayer"],function(){return{}})},"esri/layers/dynamic":function(){define(["../geometry","./DynamicMapServiceLayer"],function(){return{}})},"arcgisonline/sharing/dijit/dialog/ChoiceDlg":function(){define("require dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-attr dojo/dom-construct dojo/on dojo/query dojo/aspect dijit/Dialog dijit/form/Button dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin esri/lang ../../../esriGeowConfig dojo/i18n!../../../nls/arcgisonline dojo/text!./templates/ChoiceDlg.html".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n){var k=J("arcgisonline.sharing.dijit.dialog.ChoiceDlg",[u,g,m],{declaredClass:"arcgisonline.sharing.dijit.dialog.ChoiceDlg",widgetsInTemplate:!0,templateString:n,title:"",message:"",choiceOneButton:null,choiceOneTitle:"",choiceOneHandler:null,choiceTwoButton:null,choiceTwoTitle:"",choiceTwoHandler:null,choiceOneConn:null,choiceTwoConn:null,postCreate:function(){this.choiceOneHandler=b(this.choiceOneButton,"click",f.hitch(this,"onChoiceOneClick"));this.choiceTwoHandler=
b(this.choiceTwoButton,"click",f.hitch(this,"onChoiceTwoClick"))},postMixInProperties:function(){this.inherited(arguments);this.i18n=f.mixin({},l.common);f.mixin(this.i18n,l.choiceDlg);this.choiceOneTitle=this.i18n.ok;this.choiceTwoTitle=this.i18n.cancel},destroy:function(){this.inherited(arguments);v.isDefined(this.choiceOneConn)&&this.choiceOneConn.remove();v.isDefined(this.choiceTwoConn)&&this.choiceTwoConn.remove()},show:function(r){r.title&&""!==r.title&&(this.title=r.title);r.message&&""!==
r.message&&(this.message=r.message);r.choiceOneTitle&&""!==r.choiceOneTitle&&(this.choiceOneTitle=r.choiceOneTitle);r.choiceTwoTitle&&""!==r.choiceTwoTitle&&(this.choiceTwoTitle=r.choiceTwoTitle);r.choiceOneHandler&&(this.choiceOneHandler=r.choiceOneHandler,this.setChoiceOneHandler());r.choiceTwoHandler&&(this.choiceTwoHandler=r.choiceTwoHandler,this.setChoiceTwoHandler());r.closeHandler&&e.after(this._dialog,"onCancel",r.closeHandler);this._dialog.set("title",this.title);h.set(this.choiceContent,
"innerHTML",this.message);this.choiceOneButton.set("label",this.choiceOneTitle);this.choiceTwoButton.set("label",this.choiceTwoTitle);this._dialog.show()},setChoiceOneHandler:function(){v.isDefined(this.choiceOneConn)&&(this.choiceOneConn.remove(),this.choiceOneConn=void 0);this.choiceOneConn=b(this.choiceOneButton,"click",f.hitch(this,function(){this.hide();this.choiceOneHandler()}))},setChoiceTwoHandler:function(){v.isDefined(this.choiceTwoConn)&&(this.choiceTwoConn.remove(),this.choiceTwoConn=
void 0);this.choiceTwoConn=b(this.choiceTwoButton,"click",f.hitch(this,function(){this.hide();this.choiceTwoHandler()}))},onChoiceOneClick:function(){this.hide()},onChoiceTwoClick:function(){this.hide()},hide:function(){this._dialog.hide()}});k.prototype.statics={getInstance:function(){this._instance||(this._instance=new k);return this._instance}};return k})},"arcgisonline/sharing/dijit/_TimezoneUtils":function(){define(["require","exports"],function(S,J){return{TimezoneUtils:{_winter:new Date("January, 1, 2013"),
_summer:new Date("June, 1, 2013"),_winZones:{0:{offset:-720,id:"Dateline Standard Time",supportsDaylightSavingTime:!1,offsetText:"-12:00"},110:{offset:-660,id:"UTC-11",supportsDaylightSavingTime:!1,offsetText:"-11:00",msid:110},200:{offset:-600,id:"Hawaiian Standard Time",supportsDaylightSavingTime:!1,offsetText:"-10:00"},300:{offset:-540,id:"Alaskan Standard Time",supportsDaylightSavingTime:!0,offsetText:"-9:00"},400:{offset:-480,id:"Pacific Standard Time",supportsDaylightSavingTime:!0,offsetText:"-8:00"},
410:{offset:-480,id:"Pacific Standard Time (Mexico)",supportsDaylightSavingTime:!0,offsetText:"-8:00"},520:{offset:-420,id:"US Mountain Standard Time",supportsDaylightSavingTime:!1,offsetText:"-7:00"},510:{offset:-420,id:"Mountain Standard Time (Mexico)",supportsDaylightSavingTime:!0,offsetText:"-7:00"},500:{offset:-420,id:"Mountain Standard Time",supportsDaylightSavingTime:!0,offsetText:"-7:00"},610:{offset:-360,id:"Central America Standard Time",supportsDaylightSavingTime:!1,offsetText:"-6:00"},
620:{offset:-360,id:"Central Standard Time",supportsDaylightSavingTime:!0,offsetText:"-6:00"},630:{offset:-360,id:"Central Standard Time (Mexico)",supportsDaylightSavingTime:!0,offsetText:"-6:00"},600:{offset:-360,id:"Canada Central Standard Time",supportsDaylightSavingTime:!1,offsetText:"-6:00"},710:{offset:-300,id:"SA Pacific Standard Time",supportsDaylightSavingTime:!1,offsetText:"-5:00"},700:{offset:-300,id:"Eastern Standard Time",supportsDaylightSavingTime:!0,offsetText:"-5:00"},720:{offset:-300,
id:"US Eastern Standard Time",supportsDaylightSavingTime:!0,offsetText:"-5:00"},730:{offset:-270,id:"Venezuela Standard Time",supportsDaylightSavingTime:!1,offsetText:"-4:30"},850:{offset:-240,id:"Paraguay Standard Time",supportsDaylightSavingTime:!0,offsetText:"-4:00"},800:{offset:-240,id:"Atlantic Standard Time",supportsDaylightSavingTime:!0,offsetText:"-4:00"},810:{offset:-240,id:"Central Brazilian Standard Time",supportsDaylightSavingTime:!0,offsetText:"-4:00"},830:{offset:-240,id:"SA Western Standard Time",
supportsDaylightSavingTime:!1,offsetText:"-4:00"},820:{offset:-240,id:"Pacific SA Standard Time",supportsDaylightSavingTime:!0,offsetText:"-4:00"},900:{offset:-210,id:"Newfoundland Standard Time",supportsDaylightSavingTime:!0,offsetText:"-3:-30"},910:{offset:-180,id:"E. South America Standard Time",supportsDaylightSavingTime:!0,offsetText:"-3:00"},950:{offset:-180,id:"Argentina Standard Time",supportsDaylightSavingTime:!0,offsetText:"-3:00"},940:{offset:-180,id:"SA Eastern Standard Time",supportsDaylightSavingTime:!1,
offsetText:"-3:00"},920:{offset:-180,id:"Greenland Standard Time",supportsDaylightSavingTime:!0,offsetText:"-3:00"},930:{offset:-180,id:"Montevideo Standard Time",supportsDaylightSavingTime:!0,offsetText:"-3:00"},1010:{offset:-120,id:"UTC-02",supportsDaylightSavingTime:!1,offsetText:"-2:00"},1E3:{offset:-120,id:"Mid-Atlantic Standard Time",supportsDaylightSavingTime:!0,offsetText:"-2:00"},1100:{offset:-60,id:"Azores Standard Time",supportsDaylightSavingTime:!0,offsetText:"-1:00"},1110:{offset:-60,
id:"Cape Verde Standard Time",supportsDaylightSavingTime:!1,offsetText:"-1:00"},1220:{offset:0,id:"Morocco Standard Time",supportsDaylightSavingTime:!0,offsetText:"0:00"},1230:{offset:0,id:"UTC",supportsDaylightSavingTime:!1,offsetText:"0:00"},1200:{offset:0,id:"GMT Standard Time",supportsDaylightSavingTime:!0,offsetText:"0:00"},1210:{offset:0,id:"Greenwich Standard Time",supportsDaylightSavingTime:!1,offsetText:"0:00"},1340:{offset:60,id:"W. Europe Standard Time",supportsDaylightSavingTime:!0,offsetText:"1:00"},
1300:{offset:60,id:"Central Europe Standard Time",supportsDaylightSavingTime:!0,offsetText:"1:00"},1320:{offset:60,id:"Romance Standard Time",supportsDaylightSavingTime:!0,offsetText:"1:00"},1310:{offset:60,id:"Central European Standard Time",supportsDaylightSavingTime:!0,offsetText:"1:00"},1330:{offset:60,id:"W. Central Africa Standard Time",supportsDaylightSavingTime:!1,offsetText:"1:00"},1350:{offset:60,id:"Namibia Standard Time",supportsDaylightSavingTime:!0,offsetText:"1:00"},1430:{offset:120,
id:"GTB Standard Time",supportsDaylightSavingTime:!0,offsetText:"2:00"},1460:{offset:120,id:"Middle East Standard Time",supportsDaylightSavingTime:!0,offsetText:"2:00"},1410:{offset:120,id:"Egypt Standard Time",supportsDaylightSavingTime:!0,offsetText:"2:00"},1480:{offset:120,id:"Syria Standard Time",supportsDaylightSavingTime:!0,offsetText:"2:00"},1400:{offset:120,id:"E. Europe Standard Time",supportsDaylightSavingTime:!0,offsetText:"2:00"},1470:{offset:120,id:"South Africa Standard Time",supportsDaylightSavingTime:!1,
offsetText:"2:00"},1420:{offset:120,id:"FLE Standard Time",supportsDaylightSavingTime:!0,offsetText:"2:00"},1490:{offset:120,id:"Turkey Standard Time",supportsDaylightSavingTime:!0,offsetText:"2:00"},1440:{offset:120,id:"Israel Standard Time",supportsDaylightSavingTime:!0,offsetText:"2:00"},1450:{offset:180,id:"Jordan Standard Time",supportsDaylightSavingTime:!0,offsetText:"3:00"},1510:{offset:180,id:"Arabic Standard Time",supportsDaylightSavingTime:!0,offsetText:"3:00"},1530:{offset:180,id:"Kaliningrad Standard Time",
supportsDaylightSavingTime:!0,offsetText:"3:00"},1500:{offset:180,id:"Arab Standard Time",supportsDaylightSavingTime:!1,offsetText:"3:00"},1520:{offset:180,id:"E. Africa Standard Time",supportsDaylightSavingTime:!1,offsetText:"3:00"},1535:{offset:210,id:"Iran Standard Time",supportsDaylightSavingTime:!0,offsetText:"3:30"},1600:{offset:240,id:"Arabian Standard Time",supportsDaylightSavingTime:!1,offsetText:"4:00"},1610:{offset:240,id:"Azerbaijan Standard Time",supportsDaylightSavingTime:!0,offsetText:"4:00"},
1540:{offset:240,id:"Russian Standard Time",supportsDaylightSavingTime:!0,offsetText:"4:00"},1650:{offset:240,id:"Mauritius Standard Time",supportsDaylightSavingTime:!0,offsetText:"4:00"},1640:{offset:240,id:"Georgian Standard Time",supportsDaylightSavingTime:!1,offsetText:"4:00"},1620:{offset:240,id:"Caucasus Standard Time",supportsDaylightSavingTime:!0,offsetText:"4:00"},1660:{offset:270,id:"Afghanistan Standard Time",supportsDaylightSavingTime:!1,offsetText:"4:30"},1710:{offset:300,id:"West Asia Standard Time",
supportsDaylightSavingTime:!1,offsetText:"5:00"},1715:{offset:300,id:"Pakistan Standard Time",supportsDaylightSavingTime:!0,offsetText:"5:00"},1720:{offset:330,id:"India Standard Time",supportsDaylightSavingTime:!1,offsetText:"5:30"},1730:{offset:330,id:"Sri Lanka Standard Time",supportsDaylightSavingTime:!1,offsetText:"5:30"},1740:{offset:345,id:"Nepal Standard Time",supportsDaylightSavingTime:!1,offsetText:"5:45"},1800:{offset:360,id:"Central Asia Standard Time",supportsDaylightSavingTime:!1,offsetText:"6:00"},
1810:{offset:360,id:"Bangladesh Standard Time",supportsDaylightSavingTime:!0,offsetText:"6:00"},1755:{offset:360,id:"Ekaterinburg Standard Time",supportsDaylightSavingTime:!0,offsetText:"6:00"},1820:{offset:390,id:"Myanmar Standard Time",supportsDaylightSavingTime:!1,offsetText:"6:30"},1900:{offset:420,id:"SE Asia Standard Time",supportsDaylightSavingTime:!1,offsetText:"7:00"},1830:{offset:420,id:"N. Central Asia Standard Time",supportsDaylightSavingTime:!0,offsetText:"7:00"},2E3:{offset:480,id:"China Standard Time",
supportsDaylightSavingTime:!1,offsetText:"8:00"},1910:{offset:480,id:"North Asia Standard Time",supportsDaylightSavingTime:!0,offsetText:"8:00"},2020:{offset:480,id:"Singapore Standard Time",supportsDaylightSavingTime:!1,offsetText:"8:00"},2040:{offset:480,id:"W. Australia Standard Time",supportsDaylightSavingTime:!0,offsetText:"8:00"},2030:{offset:480,id:"Taipei Standard Time",supportsDaylightSavingTime:!1,offsetText:"8:00"},2050:{offset:480,id:"Ulaanbaatar Standard Time",supportsDaylightSavingTime:!1,
offsetText:"8:00"},2060:{offset:540,id:"North Asia East Standard Time",supportsDaylightSavingTime:!0,offsetText:"9:00"},2110:{offset:540,id:"Tokyo Standard Time",supportsDaylightSavingTime:!1,offsetText:"9:00"},2100:{offset:540,id:"Korea Standard Time",supportsDaylightSavingTime:!1,offsetText:"9:00"},2140:{offset:570,id:"Cen. Australia Standard Time",supportsDaylightSavingTime:!0,offsetText:"9:30"},2130:{offset:570,id:"AUS Central Standard Time",supportsDaylightSavingTime:!1,offsetText:"9:30"},2210:{offset:600,
id:"E. Australia Standard Time",supportsDaylightSavingTime:!1,offsetText:"10:00"},2200:{offset:600,id:"AUS Eastern Standard Time",supportsDaylightSavingTime:!0,offsetText:"10:00"},2240:{offset:600,id:"West Pacific Standard Time",supportsDaylightSavingTime:!1,offsetText:"10:00"},2220:{offset:600,id:"Tasmania Standard Time",supportsDaylightSavingTime:!0,offsetText:"10:00"},2150:{offset:600,id:"Yakutsk Standard Time",supportsDaylightSavingTime:!0,offsetText:"10:00"},2300:{offset:660,id:"Central Pacific Standard Time",
supportsDaylightSavingTime:!1,offsetText:"11:00"},2250:{offset:660,id:"Vladivostok Standard Time",supportsDaylightSavingTime:!0,offsetText:"11:00"},2410:{offset:720,id:"New Zealand Standard Time",supportsDaylightSavingTime:!0,offsetText:"12:00"},2430:{offset:720,id:"UTC+12",supportsDaylightSavingTime:!1,offsetText:"12:00"},2400:{offset:720,id:"Fiji Standard Time",supportsDaylightSavingTime:!0,offsetText:"12:00"},2310:{offset:720,id:"Magadan Standard Time",supportsDaylightSavingTime:!0,offsetText:"12:00"},
2500:{offset:780,id:"Tonga Standard Time",supportsDaylightSavingTime:!1,offsetText:"13:00"},120:{offset:780,id:"Samoa Standard Time",supportsDaylightSavingTime:!0,offsetText:"13:00"}},stdTimezoneOffset:function(){return Math.max(this._winter.getTimezoneOffset(),this._summer.getTimezoneOffset())},supportsDaylightSavingTime:function(){return this._winter.getTimezoneOffset()!==this._summer.getTimezoneOffset()},winZone:function(){var f=-this._winter.getTimezoneOffset(),c=[],h;for(h in this._winZones)this._winZones[h].offset===
f&&c.push(this._winZones[h]);if(c.length){var d=this.supportsDaylightSavingTime();f=c.filter(function(b){return b.supportsDaylightSavingTime===d});return(f.length?f[0]:c[0]).id}return null}}}})},"arcgisonline/sharing/dijit/dialog/getWFSConfig":function(){define(["dojo/_base/array","esri/renderers/SimpleRenderer","esri/symbols/jsonUtils","arcgisonline/map/popup/getDefaultPopupInfo"],function(S,J,f,c){function h(e){var q,t=e.fields,u=e.selectedLayer||{},g;t&&t.length&&(g=S.filter(t,function(m){return"esriFieldTypeGeometry"!==
m.type}))&&g.length&&(q=c({name:u.title,fields:t},!1,e));return q}var d={type:"esriSMS",style:"esriSMSCircle",color:[34,114,162,128],size:6,outline:{color:[34,114,162,255],width:1}},b={type:"esriSLS",style:"esriSLSSolid",color:[77,77,77,255],width:2},a={type:"esriSFS",style:"esriSFSSolid",color:[227,139,79,204],outline:{type:"esriSLS",style:"esriSLSSolid",color:[255,255,255,255],width:.75}};return function(e){var q=e.geometryType,t=e.toJson(),u=t.url,g=t.mode;t={version:t.version,name:t.name,wfsNamespace:e.layerNamespace,
featureUrl:e.getFeatureUrl,supportedSpatialReferences:e.spatialReferences};var m;"esriGeometryPoint"===q?m=new J(f.fromJson(d)):"esriGeometryPolyline"===q?m=new J(f.fromJson(b)):"esriGeometryPolygon"===q&&(m=new J(f.fromJson(a)));m=m.toJson();return{url:u,mode:g,wfsInfo:t,layerDefinition:{geometryType:q,drawingInfo:{renderer:m},spatialReference:{wkid:4326},fields:e.fields},popupInfo:h(e)}}})},"arcgisonline/map/popup/getDefaultPopupInfo":function(){define(["./isImageServiceLayer","./isTiledImageServiceLayer",
"dojo/_base/array","dojo/_base/lang"],function(S,J,f,c){return function(h,d,b){d=h.displayField;d=h.name+(d&&d.length?": {"+d+"}":"");var a=h.fields,e=!1,q=!1,t=!1;if(S(b)||J(b))a=b.getCustomRasterFields({rasterAttributeTableFieldPrefix:"Raster."}),t=0>f.indexOf(["F32","F64"],b.pixelType),b&&b.capabilities&&(q=(e=b.capabilities&&-1<b.capabilities.toLowerCase().indexOf("catalog")||b.fields&&0<b.fields.length)&&("esriImageServiceDataTypeVector-UV"===b.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===
b.serviceDataType));var u={esriFieldTypeDouble:1,esriFieldTypeSingle:1},g={esriFieldTypeInteger:1,esriFieldTypeSmallInteger:1},m={esriFieldTypeDate:1},v=",";h.editFieldsInfo&&(h.editFieldsInfo.creatorField&&(v+=h.editFieldsInfo.creatorField+","),h.editFieldsInfo.creationDateField&&(v+=h.editFieldsInfo.creationDateField+","),h.editFieldsInfo.editorField&&(v+=h.editFieldsInfo.editorField+","),h.editFieldsInfo.editDateField&&(v+=h.editFieldsInfo.editDateField+","),v=v.toLowerCase());a=f.map(a,c.hitch(this,
function(p,l){l="esriFieldTypeOID"!==p.type&&"esriFieldTypeGlobalID"!==p.type&&"esriFieldTypeGeometry"!==p.type;var n=null,k=p.editable&&"esriFieldTypeOID"!==p.type&&"esriFieldTypeGlobalID"!==p.type;if(l){var r=p.name.toLowerCase(),w=v+"stretched value,fnode_,tnode_,lpoly_,rpoly_,poly_,subclass,subclass_,rings_ok,rings_nok,";e&&(w+="raster.itempixelvalue,",q&&(w+="raster.magnitude,raster.direction,"));if(-1<w.indexOf(","+r+",")||-1<r.indexOf("shape")||-1<r.indexOf("perimeter")||-1<r.indexOf("objectid")||
-1<r.indexOf("raster.servicepixelvalue.")||r.indexOf("_i")==r.length-2)l=!1;p.type in g?n={places:0,digitSeparator:!0}:p.type in u?n={places:t&&(-1<r.indexOf("raster.servicepixelvalue")||-1<r.indexOf("raster.itempixelvalue"))?0:2,digitSeparator:!0}:p.type in m&&(10<=h.currentVersion||b&&10<=b.version)&&(n={dateFormat:"longMonthDayYear"})}k=k?-1===v.indexOf(","+p.name.toLowerCase()+","):k;return c.mixin({},{fieldName:p.name,label:p.alias,isEditable:k,tooltip:"",visible:l,format:n,stringFieldOption:"textbox"})}));
d={title:d,fieldInfos:a,description:null,showAttachments:!0,mediaInfos:[]};S(b)?(d.layerOptions={},d.layerOptions.showNoDataRecords=!0,d.layerOptions.returnTopmostRaster=!0):J(b)&&(d.layerOptions={},d.layerOptions.showNoDataRecords=!0);return d}})},"arcgisonline/map/popup/isImageServiceLayer":function(){define(["esri/layers/ArcGISImageServiceLayer","esri/layers/ArcGISImageServiceVectorLayer"],function(S,J){return function(f){return f instanceof esri.layers.ArcGISImageServiceLayer||f instanceof esri.layers.ArcGISImageServiceVectorLayer}})},
"esri/layers/ArcGISImageServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../config ./DynamicMapServiceLayer ./ImageServiceLayerMixin".split(" "),function(S,J,f,c,h,d,b){S=S([d,b],{declaredClass:"esri.layers.ArcGISImageServiceLayer",constructor:function(a,e){this._initialize(a,e);this.useMapImage=e&&e.useMapImage||!1},refresh:function(a){if(!0===a)this.inherited(arguments);else{var e=this.disableClientCaching;this.disableClientCaching=!0;this.inherited(arguments);
this.disableClientCaching=e}},setRenderer:function(a,e){this.renderer=a;this.onRendererChange();e||this.refresh(!0)},exportMapImage:function(a,e){var q=h.defaults.map;a=J.mixin({size:q.width+","+q.height},this._params,a?a.toJson(this.normalization):{},{f:"json"});delete a._ts;this._exportMapImage(this._url.path+"/exportImage",a,e)}});J.setObject("layers.ArcGISImageServiceLayer",S,c);return S})},"esri/layers/ImageServiceLayerMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/json dojo/_base/config dojo/_base/connect dojo/has dojo/io-query dojo/DeferredList dojo/debounce ../kernel ../config ../lang ../request ../deferredUtils ../urlUtils ../geometry/Extent ../geometry/Point ../geometry/Polygon ../renderers/colorRampUtils ./MosaicRule ./RasterFunction ./DimensionalDefinition ./Raster ./PixelBlock ./pixelFilters/VectorFieldPixelFilter ./rasterFormats/ImageCanvasDecoder ./TimeInfo ./Field ../graphic ../tasks/ImageServiceIdentifyTask ../tasks/ImageServiceIdentifyParameters".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E,K){S=S(null,{declaredClass:"esri.layers.ImageServiceLayerMixin",_rasterFieldPrefix:"Raster.",_renderingRuleFieldSubPrefix:"ServicePixelValue.",_rasterFunctionServiceInfoProps:"bandCount pixelType hasRasterAttributeTable hasColormap hasHistograms minValues maxValues meanValues stdvValues serviceDataType".split(" "),_pixelTypeRanges:{U1:[0,1],U2:[0,3],U4:[0,15],U8:[0,255],S8:[-128,127],U16:[0,65535],S16:[-32768,32767]},_eventMap:{"rendering-change":!0,
"mosaic-rule-change":!0,"spatial-reference-change":!0,"renderer-change":!0},_cachedVariableStats:{},_cachedVariableHistogram:{},constructor:function(I,L){this.useMapTime=L&&L.hasOwnProperty("useMapTime")?!!L.useMapTime:!0},_initialize:function(I,L){this._url=l.urlToObject(I);this.raster=new F(this._url.path);this._rasterFunctionTemplateInfos={};this._rasterFunctionTemplatePromise={};this._customRenderingRuleId={};this.infoTemplate=L&&L.infoTemplate;this.format=(I=L&&L.imageServiceParameters)&&I.format;
this.compressionTolerance=I&&I.compressionTolerance?I.compressionTolerance:.01;this.interpolation=I?I.interpolation:null;this.compressionQuality=I?I.compressionQuality:null;this.bandIds=I?I.bandIds:null;this.mosaicRule=I?I.mosaicRule:null;this.renderingRule=I?I.renderingRule:null;this.renderer=I?I.renderer:null;this.useMapDimensionValue=L&&L.hasOwnProperty("useMapDimensionValue")?!!L.useMapDimensionValue:!0;this.hasImageFilter=L&&L.hasImageFilter;this.activeMapDimensions=L&&L.activeMapDimensions;
this._params=J.mixin({},this._url.query,{f:"image",interpolation:this.interpolation,format:this.format,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null},I?I.toJson():{});this.pixelFilter=L&&L.pixelFilter;this.originalPixelData=this.pixelData=null;this.hasDataChanged=!0;this._requestDataHandler=J.hitch(this,this._requestDataHandler);this._requestDataErrorHandler=J.hitch(this,this._requestDataErrorHandler);this._rasterReadPromise=null;this._initLayer=J.hitch(this,
this._initLayer);this._queryVisibleRastersHandler=J.hitch(this,this._queryVisibleRastersHandler);this._visibleRasters=[];this._rasterAttributeTableFields=[];this._rasterAttributeTableFeatures=[];this._renderingRuleAttributeTable={};this._renderingRuleColormap={};this._useRenderingRuleAttributeTable=!1;this._loadCallback=L&&L.loadCallback;I&&I.renderer&&(I.renderer.outputUnit||I.renderer.inputUnit)&&(this.vectorFieldPixelFilter=new y,this.vectorFieldPixelFilter.setUnits(I.renderer.inputUnit,I.renderer.outputUnit));
(L=L&&L.resourceInfo)?this._initLayer(L):v({url:this._url.path,content:J.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});this.registerConnectEvents()},disableClientCaching:!1,_initLayer:function(I,L){if(null!==I&&void 0!==I){this._findCredential();(this.credential&&this.credential.ssl||I&&I._ssl)&&this._useSSL();L=this.minScale;var M=this.maxScale;J.mixin(this,I);this.minScale=L;this.maxScale=M;this.initialExtent=this.fullExtent=this.extent=
new n(I.extent);this.spatialReference=this.initialExtent.spatialReference;this.pixelSizeX=parseFloat(this.pixelSizeX);this.pixelSizeY=parseFloat(this.pixelSizeY);var N=this.minValues,P=this.maxValues,R=this.meanValues,Y=this.stdvValues,ja=this.bands=[];L=0;for(M=this.bandCount;L<M;L++)ja[L]={min:N[L],max:P[L],mean:R[L],stddev:Y[L]};this.timeInfo=(L=this.timeInfo)&&L.timeExtent?new B(L):null;M=this.fields=[];if(N=I.fields)for(L=0;L<N.length;L++)M.push(new C(N[L]));this._updateInfoTemplateFields(this.fields);
this.version=I.currentVersion;this.version||(this.version="fields"in I||"objectIdField"in I||"timeInfo"in I?10:9.3);m.isDefined(I.minScale)&&!this._hasMin&&"Raster"!==I.cacheType&&this.setMinScale(I.minScale);m.isDefined(I.maxScale)&&!this._hasMax&&"Raster"!==I.cacheType&&this.setMaxScale(I.maxScale);L={};I.defaultMosaicMethod?(L.method=I.defaultMosaicMethod,L.operation=I.mosaicOperator,L.sortField=I.sortField,L.sortValue=I.sortValue):L.method=x.METHOD_NONE;this.defaultMosaicRule=new x(L);this.defaultMosaicRule.ascending=
!0;this._useRenderingRuleAttributeTable=10<this.version&&"esriImageServiceDataTypeThematic"===this.serviceDataType;this._setDefaultRenderingRule(!0);this._getRenderingRuleAttributeTableAndColormap();this._isScientificData()&&(!this.mosaicRule||this.mosaicRule&&!this.mosaicRule.multidimensionalDefinition)&&this._setDefaultMultidimensionalDefinition(!0);10<this.version&&this.hasRasterAttributeTable&&this.getRasterAttributeTable().then(J.hitch(this,function(aa){aa&&(aa.features&&aa.fields&&(this.rasterAttributeTable=
J.clone(aa)),aa.features&&0<aa.features.length&&(this._rasterAttributeTableFeatures=J.clone(aa.features)),aa.fields&&0<aa.fields.length&&(this._rasterAttributeTableFields=J.clone(aa.fields)),this.renderingRule||!this.renderer||"esri.renderer.ClassBreaksRenderer"!==this.renderer.declaredClass&&"esri.renderer.UniqueValueRenderer"!==this.renderer.declaredClass||this.refresh())}));this._initVectorPixelFilter();this.bandIds||2!==this.bandCount||this.renderingRule||"esri.layers.ArcGISImageServiceLayer"!==
this.declaredClass||this.setBandIds([0,0,0],!0);!(10.3<=this.version&&this.rasterFunctionInfos&&this.rasterFunctionInfos.length)||this._url.query&&this._url.query.raster||this.getRasterFunctionInfos().then(J.hitch(this,function(aa){if(aa&&aa.length){this.rasterFunctionInfos=aa;var da=[],ra;c.forEach(aa,function(ca){if(ca){var fa=ca.functionType;ra=ra||1===fa||2===fa;da.push(ca.name)}},this);this._hasItemLevelRFT=ra;this._rasterFunctionNames=da;ra&&(this._initVectorPixelFilter(),this.refresh())}}));
this.loaded=!0;this._setDefaultFilter();this.onLoad(this);if(I=this._loadCallback)delete this._loadCallback,I(this)}},_updateInfoTemplateFields:function(I){if(I&&!(1>I.length)&&this.infoTemplate&&this.infoTemplate.info&&this.infoTemplate.info.fieldInfos&&!(1>this.infoTemplate.info.fieldInfos.length)){var L,M;var N=this.infoTemplate.info.fieldInfos;for(L=0;L<I.length;L++){var P=I[L];for(M=0;M<N.length;M++)if(N[M].fieldName.toLowerCase()===P.name.toLowerCase()&&N[M].fieldName!==P.name){N[M].fieldName=
P.name;break}}}},getKeyProperties:function(I){var L=this._url.path+"/keyProperties",M=new f(p._dfdCanceller),N={f:"json"};I&&I.renderingRule&&(N.renderingRule=h.toJson(I.renderingRule.toJson()));10<this.version?(M._pendingDfd=v({url:L,content:N,handleAs:"json",callbackParamName:"callback"}),M._pendingDfd.then(function(P){M.callback(P)},function(P){M.errback(P)})):(I=Error("Layer does not have key properties"),I.log=!!d.isDebug,M.errback(I));return M},getRasterAttributeTable:function(I){var L=this._url.path+
"/rasterAttributeTable",M=new f(p._dfdCanceller),N={f:"json"},P=this.hasRasterAttributeTable;I&&I.renderingRule&&(N.renderingRule=h.toJson(I.renderingRule.toJson()),P=!0);!this.loaded||10<this.version&&P?(M._pendingDfd=v({url:L,content:N,handleAs:"json",callbackParamName:"callback"}),M._pendingDfd.then(function(R){M.callback(R)},function(R){M.errback(R)})):(I=Error("Layer does not support raster attribute table"),I.log=!!d.isDebug,M.errback(I));return M},getRenderingRuleAttributeTable:function(I){var L=
new f(p._dfdCanceller);if(!I||!I.renderingRule)return L.errback(Error("Rendering rule is not specified")),L;I=I.renderingRule;var M=this._getRenderingRuleId(I);this._renderingRuleAttributeTable&&M&&this._renderingRuleAttributeTable.hasOwnProperty(M)?L.resolve(this._renderingRuleAttributeTable[M]):L=this.getRasterAttributeTable({renderingRule:I}).then(J.hitch(this,function(N){if(N&&N.features&&N.features.length&&N.fields&&N.fields.length){var P={features:J.clone(N.features),fields:J.clone(N.fields)};
M&&(this._renderingRuleAttributeTable[M]=P)}return P}));return L},_initVectorPixelFilter:function(){var I;this._hasItemLevelRFT&&this.renderingRule&&(I=this._getItemLevelRenderingRule(this.renderingRule));if(I=I||this.renderingRule)return this.getRenderingRuleServiceInfo(I).then(J.hitch(this,function(L){!L||!this._isVectorData(L)&&"esri.layers.ArcGISImageServiceVectorLayer"!==this.declaredClass||m.isDefined(this.pixelFilter)||(this.vectorFieldPixelFilter=this.vectorFieldPixelFilter||new y,this.vectorFieldPixelFilter.isDataUV=
"esriImageServiceDataTypeVector-UV"===L.serviceDataType,this.pixelFilter=this.vectorFieldPixelFilter.computeMagnitudeAndDirection,this.getKeyProperties().then(J.hitch(this,this._setFlowRepresentation)),this._applyVectorResamplingType(L.serviceDataType))}))},_applyVectorResamplingType:function(I){if(I){var L=this.renderingRule;L&&"Resample"===L.functionName&&((L.functionArguments||{}).ResamplingType="esriImageServiceDataTypeVector-UV"===I?7:10,this.setRenderingRule(new D(L.toJson())))}},_getRasterAttributeTableFeatures:function(){var I=
new f;if(this._rasterAttributeTableFeatures&&0<this._rasterAttributeTableFeatures.length)return I.resolve(this._rasterAttributeTableFeatures),I;if(10<this.version&&this.hasRasterAttributeTable)return I=this.getRasterAttributeTable(),I.then(J.hitch(this,function(L){L&&L.features&&0<L.features.length&&(this._rasterAttributeTableFeatures=J.clone(L.features))})),I;I.resolve(this._rasterAttributeTableFeatures);return I},_getRenderingRuleAttributeTableFeatures:function(I){I=I&&I.renderingRule;return I?
this.getRenderingRuleAttributeTable({renderingRule:I}).then(function(L){return L&&L.features}):(I=new f,I.errback(Error("Rendering rule is not specified")),I)},_getRenderingRuleAttributeTableAndColormap:function(){this.renderingRule&&this.getRenderingRuleServiceInfo(this.renderingRule).then(J.hitch(this,function(I){I.hasRasterAttributeTable&&this.getRenderingRuleAttributeTable({renderingRule:this.renderingRule}).then(J.hitch(this,function(){!this.renderer||"esri.renderer.ClassBreaksRenderer"!==this.renderer.declaredClass&&
"esri.renderer.UniqueValueRenderer"!==this.renderer.declaredClass||this.refresh()}));I.hasColormap&&this.getRenderingRuleColormap({renderingRule:this.renderingRule}).then(J.hitch(this,function(){this.renderer&&"esri.renderer.ColormapRenderer"===this.renderer.declaredClass&&this.refresh()}))}))},getCustomRasterFields:function(I){var L=I?I.rasterAttributeTableFieldPrefix:this._rasterFieldPrefix;I=10.3<=this.version?"esriFieldTypeDouble":"esriFieldTypeString";var M={name:this._rasterFieldPrefix+"ItemPixelValue",
alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:I},N={name:this._rasterFieldPrefix+"ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:I},P={name:this._rasterFieldPrefix+"ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"esriFieldTypeDouble"},R=this.fields?J.clone(this.fields):[];I=R.length;R[I]=N;10.4<=this.version&&"esri.layers.ArcGISImageServiceLayer"===this.declaredClass&&(!this.rasterFunctionInfos||
!this.rasterFunctionInfos.length||this._isRenderingRuleAProcessingTemplate({functionName:"none"}))&&(I++,R[I]=P);if(this.capabilities&&-1<this.capabilities.toLowerCase().indexOf("catalog")||this.fields&&0<this.fields.length)I++,R[I]=M;!m.isDefined(this.pixelFilter)||"esriImageServiceDataTypeVector-UV"!==this.serviceDataType&&"esriImageServiceDataTypeVector-MagDir"!==this.serviceDataType||(M={name:this._rasterFieldPrefix+"Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"esriFieldTypeDouble"},
N={name:this._rasterFieldPrefix+"Direction",alias:"Direction",domain:null,editable:!1,type:"esriFieldTypeDouble"},I++,R[I]=M,I++,R[I]=N);I=this._rasterAttributeTableFields;(M=this.renderingRule&&this._getRenderingRuleId(this.renderingRule))&&this._renderingRuleAttributeTable&&this._renderingRuleAttributeTable.hasOwnProperty(M)&&(I=this._renderingRuleAttributeTable[M].fields);I&&0<I.length&&(I=c.filter(I,function(ja){return"esriFieldTypeOID"!==ja.type&&"value"!==ja.name.toLowerCase()}),I=c.map(I,function(ja){var aa=
J.clone(ja);aa.name=L+ja.name;return aa}),R=R.concat(I));var Y=this._rasterFieldPrefix+this._renderingRuleFieldSubPrefix;10.4<=this.version&&this.rasterFunctionInfos&&c.forEach(this.rasterFunctionInfos,function(ja){ja&&ja.name&&"none"!==ja.name.toLowerCase()&&(ja={name:Y+ja.name.replace(/ /gi,"_"),alias:ja.name,domain:null,editable:!1,type:"esriFieldTypeDouble"},R.push(ja))});return R},_applyTimeToMultidimensionalCRF:function(I,L){var M=this._isTimeSupportedOnCRF();if(M&&(!I||!I.multidimensionalDefinition))return I;
var N=this.timeInfo&&this.timeInfo.startTimeField;if((L=L||this._params.time)&&N&&this._isMultidimensionalCRF()){I=J.clone(I||this.defaultMosaicRule)||new x;I.multidimensionalDefinition=I.multidimensionalDefinition||[];var P=I.multidimensionalDefinition.filter(function(Y){return Y.dimensionName===N}),R=L.split(",").map(function(Y){return parseInt(Y,10)});2===R.length&&R[0]===R[1]&&(R.length=1);0<P.length?M?I.multidimensionalDefinition.forEach(function(Y){Y.dimensionName===N&&(Y.declaredClass?(Y.dimensionName=
null,Y.isSlice=null,Y.values=null):(delete Y.dimensionName,delete Y.isSlice,delete Y.values))}):I.multidimensionalDefinition.forEach(function(Y){Y.dimensionName===N&&(Y.isSlice=1===R.length,Y.values=1===R.length?R:[R])}):M||(I.multidimensionalDefinition.some(function(Y){return null!=Y.variableName&&null==Y.dimensionName})?I.multidimensionalDefinition.forEach(function(Y){null!=Y.variableName&&null==Y.dimensionName&&(Y.dimensionName=N,Y.isSlice=1===R.length,Y.values=1===R.length?R:[R])}):I.multidimensionalDefinition.push(new G({variableName:"",
dimensionName:N,isSlice:1===R.length,values:1===R.length?R:[R]})));this._cleanupMultidimensionalDefinition(I)}return I},_prepareGetImageParameters:function(I,L,M,N){N=m.isDefined(N)?N:this._params;if(this.renderer||this._hasItemLevelRFT&&this.renderingRule){var P=this.getExportImageRenderingRule();N.renderingRule=P?h.toJson(P.toJson()):null}P=this.getExportImageMosaicRule(N);N.mosaicRule=P?h.toJson(P.toJson()):null;P=I.spatialReference.wkid||h.toJson(I.spatialReference.toJson(!1));delete N._ts;J.mixin(N,
{bbox:I.xmin+","+I.ymin+","+I.xmax+","+I.ymax,imageSR:P,bboxSR:P,size:L+","+M},this.disableClientCaching?{_ts:(new Date).getTime()}:{});delete N.compressionTolerance;N.format&&"LERC"===N.format.toUpperCase()&&(N.compressionTolerance=this.compressionTolerance);N.token=this._getToken()},getImageUrl:function(I,L,M,N,P){P=m.isDefined(P)?P:this._params;this._prepareGetImageParameters(I,L,M,P);I=J.clone(P);this._cleanupRequestParams(I);L=this._url.path+"/exportImage?";M=l.addProxy(L+e.objectToQuery(J.mixin(I,
{f:"image"})));var R=I.token;M.length>g.defaults.io.postLength||this.useMapImage?this._jsonRequest=v({url:L,content:J.mixin(I,{f:"json"}),callbackParamName:"callback",load:function(Y,ja){Y=Y.href;R&&(Y+=-1===Y.indexOf("?")?"?token\x3d"+R:"\x26token\x3d"+R);N(l.addProxy(Y))},error:this._errorHandler}):N(M)},onRenderingChange:function(){},onMosaicRuleChange:function(){},onRendererChange:function(){},setInterpolation:function(I,L){this.interpolation=this._params.interpolation=I;L||this.refresh(!0)},
setCompressionQuality:function(I,L){this.compressionQuality=this._params.compressionQuality=I;L||this.refresh(!0)},setCompressionTolerance:function(I,L){this.compressionTolerance=I;L||this.refresh(!0)},setBandIds:function(I,L){var M=!1;this.bandIds!==I&&(M=!0);this.bandIds=I;this._params.bandIds=I?I.join(","):null;if(M&&!L)this.onRenderingChange();L||this.refresh(!0)},setDefaultBandIds:function(I){this.bandIds=this._params.bandIds=null;I||this.refresh(!0)},setDisableClientCaching:function(I){this.disableClientCaching=
I},setMosaicRule:function(I,L){var M=!1;this.mosaicRule!==I&&(M=!0);this.mosaicRule=I;this._params.mosaicRule=h.toJson(I.toJson());if(M&&!L)this.onMosaicRuleChange();L||this.refresh(!0)},getRasterFunctionInfos:function(){if(!(10.3>this.version)&&this.rasterFunctionInfos&&this.rasterFunctionInfos.length)return v({url:this._url.path+"/rasterFunctionInfos",content:{f:"json"},handleAs:"json",load:function(I){return I&&I.rasterFunctionInfos}})},setRenderingRule:function(I,L){var M=!1;this.renderingRule!==
I&&(M=!0);this.renderingRule=I;this._params.renderingRule=I?h.toJson(I.toJson()):null;this._useRenderingRuleAttributeTable?this.getRenderingRuleAttributeTable({renderingRule:I}):"esri.layers.RasterXLayer"!==this.declaredClass&&this._getRenderingRuleAttributeTableAndColormap();if(M)this.onRenderingChange();this._setDefaultFilter();L||this.refresh(!0)},setImageFormat:function(I,L){this.format=this._params.format=I;this._setDefaultFilter();L||this.refresh(!0)},setInfoTemplate:function(I){this.infoTemplate=
I;this._updateInfoTemplateFields(this.fields)},setDefinitionExpression:function(I,L){var M=this.mosaicRule?this.mosaicRule.toJson():{};this.mosaicRule||(this.defaultMosaicRule?M=this.defaultMosaicRule.toJson():M.method=x.METHOD_NONE);M.where=I;I=new x(M);this.setMosaicRule(I,L);return this},getDefinitionExpression:function(){return this.mosaicRule?this.mosaicRule.where:null},setPixelFilter:function(I){this.pixelFilter=I;this._isDefaultPixelFilter=!1},getPixelData:function(I){return I?(this._useBrowserDecoding()&&
(this.originalPixelData={pixelBlock:this._getPixelBlockFromCanvas(this._context,this._map.width,this._map.height),extent:this._map.extent}),this.originalPixelData):this.pixelData},getExportImageRenderingRule:function(){var I;this._hasItemLevelRFT&&this.renderingRule&&(I=this._getServiceLevelRenderingRule(this.renderingRule));I=I||this.renderingRule;this._isItemLevelRasterFunction(this.renderingRule)&&(I=void 0);return this._combineRenderingRule(this._convertRendererToRenderingRule(this.renderer),
I)},getExportImageMosaicRule:function(){var I=this.mosaicRule,L;this._hasItemLevelRFT&&this.renderingRule&&(L=this._getItemLevelRenderingRule(this.renderingRule));L&&(I=I||this.defaultMosaicRule||new x,I.itemRenderingRule=L);return I=this._applyTimeToMultidimensionalCRF(I)},redraw:function(){this.hasDataChanged=!1;this._setPixelData(this.originalPixelData)},getHistograms:function(I){var L=I.variableName,M=(I=(I=I.renderingRule||this.renderingRule||this.defaultRenderingRule)&&"none"!==I.functionName.toLowerCase()?
I.toJson():null)?I.functionName:"",N=new f(p._dfdCanceller);if((L||""===L)&&this._cachedVariableHistogram[L]&&this._cachedVariableHistogram[L][M])return N.resolve(this._cachedVariableHistogram[L][M]),N;if(this.hasHistograms){var P={f:"json"};L&&(P.variable=L);I&&10.9<this.version&&(P.renderingRule=JSON.stringify(I));N._pendingDfd=v({url:this._url.path+"/histograms",content:P,handleAs:"json",callbackParamName:"callback"});N._pendingDfd.then(J.hitch(this,function(R){if(L||""===L)this._cachedVariableHistogram[L]=
this._cachedVariableHistogram[L]||{},this._cachedVariableHistogram[L][M]=R;N.callback(R)}),function(R){N.errback(R)})}else I=Error("Layer does not have histograms."),I.log=!!d.isDebug,N.errback(I);return N},computeHistograms:function(I){var L=new f(p._dfdCanceller);if(10.1<=this.currentVersion){I=I||{};var M=I.geometry||this.fullExtent,N=(I.geometry||this.fullExtent).toJson();M="extent"===M.type?"esriGeometryEnvelope":"esriGeometryPolygon";var P=I.renderingRule||this.renderingRule||this.defaultRenderingRule;
P=P?P.toJson():null;var R=I.mosaicRule||this.mosaicRule||this.defaultMosaicRule;R=R?R.toJson():null;I=I.pixelSize||{x:this.pixelSizeX,y:this.pixelSizeY};L._pendingDfd=v({url:this._url.path+"/computeHistograms",content:J.mixin({f:"json",geometry:JSON.stringify(N),geometryType:M,renderingRule:JSON.stringify(P),mosaicRule:JSON.stringify(R),pixelSize:JSON.stringify(I),callbackParamName:"callback"}),handleAs:"json"});L._pendingDfd.then(function(Y){L.callback(Y)},function(Y){L.errback(Y)})}else N=Error("Layer doesn't support computeHistograms."),
N.log=!!d.isDebug,L.errback(N);return L},getRenderingRuleServiceInfo:function(I,L){function M(R){return R.name&&R.arguments&&R.function&&R.hasOwnProperty("functionType")}var N=new p._fixDfd(new f(p._dfdCanceller));if(!I)return N.errback(Error("Rendering rule is not specified")),N;if(M(I))"ClipFunction"===I.function.type&&(I=this._handleClipFunctionInRenderingRule(I));else{var P=this._getRenderingRuleId(I);if(P){if(this._rasterFunctionTemplateInfos[P])return N.resolve(this._rasterFunctionTemplateInfos[P]),
N;if(this._rasterFunctionTemplatePromise[P])return N=this._rasterFunctionTemplatePromise[P]}}N=v({url:this._url.path,content:J.mixin(J.mixin({f:"json",renderingRule:JSON.stringify(I.toJson())},this._url.query)),callbackParamName:"callback",load:J.hitch(this,function(R){var Y={};c.forEach(this._rasterFunctionServiceInfoProps,function(ja){Y[ja]=R[ja]});M(I)||(this._rasterFunctionTemplateInfos[P]=Y);return Y}),error:L||this._errorHandler});P&&!this._rasterFunctionTemplatePromise[P]&&(this._rasterFunctionTemplatePromise[P]=
N);return N},queryVisibleRasters:function(I,L,M,N){var P=this._map,R=p._fixDfd(new f(p._dfdCanceller));this._visibleRasters=[];var Y,ja,aa=!0,da=!0,ra=null,ca=this.infoTemplate?this.infoTemplate.info:null,fa=ca?J.clone(this.infoTemplate.info.fieldInfos):null;L=L||{};if(ca&&this.infoTemplate.info.mediaInfos&&this.infoTemplate.info.mediaInfos.length){var la=[];c.forEach(this.infoTemplate.info.mediaInfos,function(ia){la=la.concat(ia&&ia.value&&ia.value.fields||[])});la.length&&c.forEach(fa,function(ia){ia&&
-1<la.indexOf(ia.fieldName)&&(ia.visible=!0)})}var ta=function(ia){var X=ca&&ca.title&&-1<ca.title.toLowerCase().indexOf(ia.toLowerCase());ia=ca&&ca.description&&-1<ca.description.toLowerCase().indexOf(ia.toLowerCase());return X||ia};if(fa&&0<fa.length)for(aa=!1,Y=0;Y<fa.length;Y++)if((ja=fa[Y])&&ja.fieldName.toLowerCase()!==this._rasterFieldPrefix.toLowerCase()+"servicepixelvalue"&&(ja.visible||ta(ja.fieldName))){aa=!0;break}this.infoTemplate&&this.infoTemplate.info&&this.infoTemplate.info.layerOptions&&
this.infoTemplate.info.layerOptions.hasOwnProperty("returnTopmostRaster")&&(ra=this.infoTemplate.info.layerOptions.returnTopmostRaster?1:null);fa&&0<fa.length&&(da=!1,c.some(fa,function(ia){if(ia&&ia.fieldName.toLowerCase()===this._rasterFieldPrefix.toLowerCase()+"itempixelvalue"&&ia.visible)return da=!0},this),ta(this._rasterFieldPrefix.toLowerCase()+"itempixelvalue")&&(da=!0));var Q=(ja=this._removeVisualizationStretchFunction(this.renderingRule))&&ja.functionName,T=[];if(10.4<=this.version){var O=
!1;if(this.rasterFunctionInfos&&fa){var Z=this._rasterFieldPrefix+this._renderingRuleFieldSubPrefix;c.forEach(this.rasterFunctionInfos,function(ia){var X=Z+ia.name.replace(/ /gi,"_");c.some(fa,function(ha){return ha.visible&&ha.fieldName===X})&&(O=O||Q&&Q===ia.name,T.push(new D({rasterFunction:ia.name})))})}ja&&!O&&T.push(ja)}Y=new K;Y.geometry=I.geometry;Y.returnGeometry=this._map.spatialReference.equals(this.spatialReference);Y.returnCatalogItems=aa;Y.timeExtent=this.timeInfo?I.timeExtent:null;
Y.returnPixelValues=da;Y.maxItemCount=ra||I.maxItemCount;this._params.time&&this.mosaicRule?(I=J.clone(this.mosaicRule),I=this._filterOutTimeDimension(I),Y.mosaicRule=I):Y.mosaicRule=this.mosaicRule||null;this._isMultidimensionalCRF()&&Y.timeExtent&&(Y.mosaicRule=this._applyTimeToMultidimensionalCRF(Y.mosaicRule,Y.timeExtent.toJson().join(",")),this._isTimeSupportedOnCRF()||delete Y.timeExtent);Y.renderingRule=10.4>this.version&&ja||null;Y.renderingRules=T||null;10.8>this.version&&(Y.returnPixelValues=
void 0,Y.maxItemCount=void 0);P&&(P=new k((P.extent.xmax-P.extent.xmin)/P.width,(P.extent.ymax-P.extent.ymin)/P.height,P.extent.spatialReference),Y.pixelSize=P);L.requestParams=Y;var na=this;P=new E(this.url);(R._pendingDfd=P.execute(Y)).addCallbacks(function(ia){na._queryVisibleRastersHandler(ia,L,M,N,R)},function(ia){na._resolve([ia],null,N,R,!0)});return R},_queryVisibleRastersHandler:function(I,L,M,N,P){function R(){var ka=this.getCustomRasterFields(L),ma=this._getDomainFields(ka),sa=L?L.returnDomainValues:
!1,pa=L&&L.rasterAttributeTableFieldPrefix,Aa,za,Ba,ua,Fa,va,xa,Da,Ca,qa;ka=(ka=this._getRenderingRuleId(this.renderingRule))&&this._rasterFunctionTemplateInfos[ka];this.renderingRule&&(this._useRenderingRuleAttributeTable||ka)?(ka=this._getRenderingRuleAttributeTableFeatures({renderingRule:this.renderingRule}),this.hasRasterAttributeTable||(qa=Y)):ka=this._getRasterAttributeTableFeatures();ka.then(J.hitch(this,function(W){for(Aa=0;Aa<na.length;Aa++){ea=na[Aa];ea.setInfoTemplate(this.infoTemplate);
ea._layer=this;if(Y){Ca=Y.replace(/ /gi,"").split(",");za=Y;Ba=Ca;ia&&ia.length>=Aa&&(za=ia[Aa].replace(/ /gi,", "),Ba=ia[Aa].split(" "));ea.attributes[this._rasterFieldPrefix+"ItemPixelValue"]=Ba;ea.attributes[this._rasterFieldPrefix+"ServicePixelValue"]=Ca;ja&&(ea.attributes[this._rasterFieldPrefix+"ServicePixelValue.Raw"]=ja.replace(/ /gi,"").split(","));if(this.pixelFilter){var ba=new A({height:1,width:1,pixelType:"F32",pixels:[],statistics:[]});c.forEach(Ba,function(wa){ba.addData({pixels:[wa],
statistics:{minValue:wa,maxValue:wa,noDataValue:null}})});this.pixelFilter({pixelBlock:ba,extent:new n(0,0,0,0,this._map.spatialReference)});if("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType)ea.attributes[this._rasterFieldPrefix+"Magnitude"]=ba.pixels[0][0],ea.attributes[this._rasterFieldPrefix+"Direction"]=ba.pixels[1][0]}c.forEach(fa,function(wa){ea.attributes[wa.name]=wa.value});var oa=0<this.fields.length?qa||za:qa||ja;
if(W&&0<W.length&&(ua=c.filter(W,function(wa){if(wa&&wa.attributes)return wa.attributes.hasOwnProperty("Value")?wa.attributes.Value==oa:wa.attributes.VALUE==oa}),0<ua.length&&(Fa=J.clone(ua[0]),pa&&Fa))){Da={};for(va in Fa.attributes)Fa.attributes.hasOwnProperty(va)&&(xa=pa+va,Da[xa]=Fa.attributes[va]);Fa.attributes=Da;ea.attributes=J.mixin(ea.attributes,Fa.attributes)}}sa&&ma&&0<ma.length&&c.forEach(ma,function(wa){if(wa){var Ea=ea.attributes[wa.name];m.isDefined(Ea)&&(Ea=this._getDomainValue(wa.domain,
Ea),m.isDefined(Ea)&&(ea.attributes[wa.name]=Ea))}},this);U.push(ea);this._visibleRasters.push(ea)}this._resolve([U,null,!0],null,M,P)}))}var Y=I.value,ja=I.value,aa=0,da=0,ra=this,ca=this.objectIdField,fa=[];N=L.requestParams.renderingRules;var la=I.processedValues,ta=this.renderingRule&&h.toJson(this._removeVisualizationStretchFunction(this.renderingRule).toJson());if(N&&la&&N.length===la.length){var Q=this._rasterFieldPrefix+this._renderingRuleFieldSubPrefix;c.forEach(N,function(ka,ma){if(ka.functionName){var sa=
{name:Q+ka.functionName.replace(/ /gi,"_"),value:la[ma].replace(/ /gi,"").split(",")};fa.push(sa);ta&&ta===h.toJson(ka.toJson())&&(Y=la[ma])}})}N=this.infoTemplate&&this.infoTemplate.info&&this.infoTemplate.info.layerOptions&&this.infoTemplate.info.layerOptions.hasOwnProperty("showNoDataRecords")?this.infoTemplate.info.layerOptions.showNoDataRecords:!0;if(I.catalogItems){var T=0,O=I.catalogItems.features.length;var Z=0;var na=Array(O);var ia=Array(O);var X=Array(O);if(I.properties&&I.properties.Values){O=
I.properties.Values.length;for(aa=0;aa<O;aa++)-1<I.properties.Values[aa].toLowerCase().indexOf("nodata")&&Z++;var ha=O-Z;for(aa=0;aa<O;aa++){Z=!0;if(-1<I.properties.Values[aa].toLowerCase().indexOf("nodata")){var V=ha++;N||(Z=!1,na.length--,ia.length--,X.length--)}else V=T++;Z&&(na[V]=I.catalogItems.features[aa],ia[V]=I.properties.Values[aa],X[V]=na[V].attributes[ca])}}else{for(aa=0;aa<O;aa++)na[aa]=I.catalogItems.features[aa],X[aa]=na[aa].attributes[ca];ia=null}}this._visibleRasters=[];(I=-1<Y.toLowerCase().indexOf("nodata"))&&
!N&&(na=[],ia=[],X=[]);if(Y&&!na&&!I){ca="ObjectId";na=[];var ea=new H(new n(this.fullExtent),null,{ObjectId:0});na.push(ea)}var U=[];na?!this._map.spatialReference.equals(this.spatialReference)&&X&&0<X.length?v({url:this._url.path+"/query",content:{f:"json",objectIds:X.join(","),returnGeometry:!0,outSR:h.toJson(ra._map.spatialReference.toJson()),outFields:ca},handleAs:"json",callbackParamName:"callback",load:function(ka){if(0===ka.features.length)ra._resolve([U,null,null],null,M,P);else{for(aa=0;aa<
ka.features.length;aa++)for(da=0;da<na.length;da++)na[da].attributes[ca]==ka.features[aa].attributes[ca]&&(na[da].geometry=new r(ka.features[aa].geometry),na[da].geometry.setSpatialReference(ra._map.spatialReference));R.call(ra)}},error:function(ka){ra._resolve([U,null,null],null,M,P)}}):R.call(this):this._resolve([U,null,null],null,M,P)},getVisibleRasters:function(){var I=this._visibleRasters,L=[],M;for(M in I)I.hasOwnProperty(M)&&L.push(I[M]);return L},_getDomainFields:function(I){if(I){var L=[];
c.forEach(I,function(M){if(M.domain){var N={};N.name=M.name;N.domain=M.domain;L.push(N)}});return L}},_getDomainValue:function(I,L){if(I&&I.codedValues){var M;c.some(I.codedValues,function(N){return N.code===L?(M=N.name,!0):!1});return M}},_requestData:function(I,L,M){this._rasterReadPromise&&this._rasterReadPromise.cancel();I=J.clone(I);var N=I._normalize(!0);this._prepareGetImageParameters(N,L,M);L=J.clone(this._params);this._cleanupRequestParams(L);L.extent=I;L.format=L.format||(10.3<=this.version?
"lerc":"jpgpng");"lerc"===L.format.toLowerCase()&&!L.lercVersion&&10.5<=this.version&&(L.lercVersion=2);this._params.time&&this._isMultidimensionalCRF()&&!this._isTimeSupportedOnCRF()&&delete L.time;M=null;this._useBrowserDecoding()&&(M=new z({ctx:this._context}));L={imageServiceParameters:L,nBands:Math.min(this.bandCount,3),pixelType:this.pixelType,decodeFunc:M?J.hitch(M,"decode"):null};this._rasterReadPromise=this.raster.read(L,this._requestDataHandler,this._requestDataErrorHandler)},_requestDataHandler:function(I){this._rasterReadPromise&&
this._rasterReadPromise.isCanceled()||(this.originalPixelData=I,this.hasDataChanged=!0,this._setPixelData(I))},_setPixelData:function(I){I=this._clonePixelData(I);this.pixelFilter&&this.pixelFilter(I);this.pixelData=I;this._rasterReadPromise&&this._rasterReadPromise.isCanceled()||(this._drawPixelData(),this._rasterReadPromise=null)},_clonePixelData:function(I){if(null===I||void 0===I)return I;var L={};I.extent&&(L.extent=J.clone(I.extent));I=I.pixelBlock;if(null===I||void 0===I)return L;L.pixelBlock=
I.clone();return L},_setDefaultFilter:function(){},_getPixelBlockFromCanvas:function(I,L,M){I=I.getImageData(0,0,L,M).data;var N=L*M,P=0,R=0,Y=new Uint8Array(N),ja=new Uint8Array(N),aa=new Uint8Array(N),da=new Uint8Array(N),ra=Infinity,ca=Infinity,fa=Infinity,la=-Infinity,ta=-Infinity,Q=-Infinity;for(P=0;P<N;P++){var T=I[R++];var O=I[R++];var Z=I[R++];ra=ra<T?ra:T;la=la>T?la:T;ca=ca<O?ca:O;ta=ta>O?ta:O;fa=fa<Z?fa:Z;Q=Q>Z?Q:Z;Y[P]=T;ja[P]=O;aa[P]=Z;da[P]=I[R++]&1}return new A({width:L,height:M,pixels:[Y,
ja,aa],pixelType:"U8",mask:da,statistics:[{minValue:ra,maxValue:la},{minValue:ca,maxValue:ta},{minValue:fa,maxValue:Q}]})},_useBrowserDecoding:function(){return(void 0===this.pixelFilter||null===this.pixelFilter)&&("jpeg"===this.format.toLowerCase()||"jpg"===this.format.toLowerCase()||-1<this.format.toLowerCase().indexOf("png"))},getMultidimensionalInfo:function(){var I=this._url.path+"/multiDimensionalInfo",L=new f(p._dfdCanceller);if(this._multidimensionalInfo)return L.resolve(this._multidimensionalInfo),
L;!this.loaded||10.3<=this.version&&this.hasMultidimensions?(L._pendingDfd=v({url:I,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),L._pendingDfd.then(J.hitch(this,function(M){this._multidimensionalInfo=M.multidimensionalInfo;L.callback(M.multidimensionalInfo)}),function(M){L.errback(M)})):(I=Error("Layer does not support multidimensional info"),I.log=!!d.isDebug,L.errback(I));return L},getStatistics:function(I){var L=new f(p._dfdCanceller);if(I&&this._cachedVariableStats[I])L.resolve(this._cachedVariableStats[I]);
else{var M={f:"json"};I&&(M.variable=I);L._pendingDfd=v({url:this._url.path+"/statistics",content:M,handleAs:"json",callbackParamName:"callback"});L._pendingDfd.then(J.hitch(this,function(N){N=N.statistics||N.statitsics;var P=[];N&&N[0]&&null!=N[0].min?N.forEach(function(R){P.push([R.min,R.max,R.mean,R.standardDeviation])}):P=this.minValues&&this.minValues.length?this.minValues.map(function(R,Y){return[R,this.maxValues[Y],this.meanValues[Y],this.stdvValues[Y]]}.bind(this)):N;I&&(this._cachedVariableStats[I]=
P);L.callback(P)}),function(N){L.errback(N)})}return L},getDefaultMultidimensionalDefinition:function(){var I=new f(p._dfdCanceller);if(this._defaultMultidimensionalDefinition)return I.resolve(J.clone(this._defaultMultidimensionalDefinition)),I;I._pendingDfd=this.getMultidimensionalInfo();I._pendingDfd.then(J.hitch(this,function(L){L=this._getDefaultMultidimensionalDefinition(L);I.callback(L)}),function(L){I.errback(L)});return I},_getDefaultMultidimensionalDefinition:function(I,L,M){var N,P=[],R=
this.defaultVariable||this.raster&&this.raster.defaultVariable;variableName=R||"";dimensions=variableName.length?I.variables.filter(function(Y){return Y.name===variableName})[0].dimensions:I.variables[0].dimensions;M&&(variableName=R||I.variables[0].name);for(N in dimensions)dimensions.hasOwnProperty(N)&&(L||"StdTime"!==dimensions[N].name)&&(I=dimensions[N],P.push(new G({variableName,dimensionName:I.name,isSlice:!I.hasRanges,values:[this._getDefaultDimensionValue(I)]})));this._defaultMultidimensionalDefinition=
P;return J.clone(P)},_getDefaultDimensionValue:function(I){if(I&&I.values&&I.values.length){var L=Infinity,M;if(I.hasRanges)return I.values[0];if(I.name&&"stdz"===I.name.toLowerCase()){for(M=0;M<I.values.length;M++){var N=I.values[M];var P=Math.abs(N-0);if(P<L){L=P;var R=N}if(0===P)break}return R}return I.extent[0]}},_setDefaultMultidimensionalDefinition:function(I){var L,M={};this.getDefaultMultidimensionalDefinition().then(J.hitch(this,function(N){L=N;0<L.length&&(this.mosaicRule?(M=J.clone(this.mosaicRule),
M.multidimensionalDefinition=L):this.defaultMosaicRule?(M=J.clone(this.defaultMosaicRule),M.multidimensionalDefinition=L):M=new x({multidimensionalDefinition:L}),this.setMosaicRule(M,I))}))},_setDefaultRenderingRule:function(I){var L={},M=this.renderingRule;if(!M&&"esri.layers.ArcGISImageServiceVectorLayer"!==this.declaredClass&&!this.bandIds&&this.rasterFunctionInfos&&this.rasterFunctionInfos.length&&"none"!==this.rasterFunctionInfos[0].name.toLowerCase())L.rasterFunction=this.rasterFunctionInfos[0].name;
else if("esri.layers.ArcGISImageServiceVectorLayer"===this.declaredClass&&10.3<this.version&&(!M||"Resample"!==M.functionName)){var N="esriImageServiceDataTypeVector-UV"===this.serviceDataType?7:10;L.rasterFunction="Resample";L.rasterFunctionArguments={ResamplingType:N,InputCellSize:{x:this.pixelSizeX,y:this.pixelSizeY}};M&&(L.rasterFunctionArguments.Raster=M.toJson())}L.hasOwnProperty("rasterFunction")&&(this.defaultRenderingRule=new D(L),this.setRenderingRule(this.defaultRenderingRule,I))},_cleanupRequestParams:function(I){if(!I)return I;
if(I.time&&I.mosaicRule){var L=new x(h.fromJson(I.mosaicRule));L=this._filterOutTimeDimension(L);I.mosaicRule=h.toJson(L.toJson())}L="displayOnPan drawMode styling id opacity visible resourceInfo useMapDimensionValue extent renderer".split(" ");for(var M in L)I.hasOwnProperty(L[M])&&delete I[L[M]];return I},_filterOutTimeDimension:function(I){if(this._isMultidimensionalCRF())return I;if(I&&I.multidimensionalDefinition&&0<I.multidimensionalDefinition.length){var L=c.filter(I.multidimensionalDefinition,
function(M){return"StdTime"!==M.dimensionName});I.multidimensionalDefinition=L}return I},_removeVisualizationStretchFunction:function(I){var L=I&&I.functionName;if(!L||"stretch"!==L.toLowerCase())return I;var M=I.functionArguments.Raster;return M&&M.functionName&&c.some(this.rasterFunctionInfos,function(N){return M.functionName===N.name})?M:I},_isMultidimensionalCRF:function(){return 10.71<=this.version&&this.hasMultidimensions&&this.timeInfo&&!(this.objectIdField&&this.fields&&1<this.fields.length)},
_isTimeSupportedOnCRF:function(){return 10.8<=this.version},_cleanupMultidimensionalDefinition:function(I){I&&I.multidimensionalDefinition&&(I.multidimensionalDefinition=I.multidimensionalDefinition.filter(function(L){return!(!L.variableName&&!L.dimensionName)}),0===I.multidimensionalDefinition.length&&(I.multidimensionalDefinition=null))},_isScientificData:function(){return"esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType||
"esriImageServiceDataTypeScientific"===this.serviceDataType||this.hasMultidimensions},_isVectorData:function(I){I=(I=I||this)&&I.serviceDataType;return"esriImageServiceDataTypeVector-UV"===I||"esriImageServiceDataTypeVector-MagDir"===I},_isRenderingRuleAProcessingTemplate:function(I){var L=I&&I.functionName;return!L||I.functionArguments?!1:c.some(L&&(this.rasterFunctionInfos||[]),function(M){return M&&M.name&&M.name.toLowerCase()===L.toLowerCase()})},_getRenderingRuleId:function(I){var L=I&&I.functionName;
if(L){if(this._isRenderingRuleAProcessingTemplate(I))return L;var M=this._customRenderingRuleId[L];if(M){if(M!==I){for(var N in this._customRenderingRuleId)if(this._customRenderingRuleId[N]===I)return N;for(M=0;this._customRenderingRuleId[P];)M+=1;var P;this._customRenderingRuleId[L+M]=I}}else this._customRenderingRuleId[L]=I;return L}},_createPixelData:function(I){I=new A({width:2,height:2,pixels:I,pixelType:this.pixelType,statistics:I});var L=this.fullExtent.getCenter();L=new n(L.x,L.y,L.x+this.pixelSizeX,
L.y+this.pixelSizeY,this.spatialReference);return{pixelBlock:I,extent:L}},_convertRendererToRenderingRule:function(I){var L=I&&I.declaredClass;if(!L||"esri.renderer.UniqueValueRenderer"!==L&&"esri.renderer.ClassBreaksRenderer"!==L&&"esri.renderer.StretchRenderer"!==L&&"esri.renderer.ShadedReliefRenderer"!==L&&"esri.renderer.ColormapRenderer"!==L)return null;var M=null;"esri.renderer.StretchRenderer"===L?M=I.toRenderingRule({convertToColormap:10.6>this.version}):"esri.renderer.ClassBreaksRenderer"===
L?M=this._convertClassifyRenderer(I):"esri.renderer.UniqueValueRenderer"===L?M=this._convertUniqueValueRenderer(I):"esri.renderer.ShadedReliefRenderer"===L?M=this._convertShadedReliefRenderer(I):"esri.renderer.ColormapRenderer"===L&&(M=this._convertColormapRenderer(I));return M},_getValueField:function(I){if(I&&I.length){var L,M;c.some(I,function(N){if((M=N.name)&&"value"===M.toLowerCase())return L=M,!0});return L}},_convertColormapRenderer:function(I){var L=new D;L.functionName="Colormap";L.functionArguments=
{};I=I.colormapInfos.map(function(M){return[M.value].concat(M.color)});L.functionArguments.Colormap=I;return L},_convertShadedReliefRenderer:function(I){var L=new D;L.functionName="Hillshade";var M="traditional"===I.hillshadeType?0:1,N="none"===I.scalingType?1:3,P={HillshadeType:M,SlopeType:N,ZFactor:I.zFactor};0===M&&(P.Azimuth=I.azimuth,P.Altitude=I.altitude);3===N&&(P.PSPower=I.pixelSizePower,P.PSZFactor=I.pixelSizeFactor);L.functionArguments=P;L.variableName="Raster";I.colorRamp&&(L.functionName=
"ShadedRelief",P.Colormap=w.convertColorRampToColormap(I.colorRamp,256));return L},_convertClassifyRenderer:function(I){var L=[],M=[],N=[],P=[],R;var Y=this.renderingRule&&this._getRenderingRuleId(this.renderingRule);var ja=this.hasRasterAttributeTable;if(Y){ja=this._rasterFunctionTemplateInfos[Y]?this._rasterFunctionTemplateInfos[Y].hasRasterAttributeTable:this.hasRasterAttributeTable;var aa=this._renderingRuleAttributeTable[Y];var da=this._rasterFunctionTemplateInfos[Y]}var ra=aa&&aa.features?aa.features:
this._rasterAttributeTableFeatures;var ca=this._getValueField(aa&&aa.fields?aa.fields:this._rasterAttributeTableFields);ja&&ra?(c.forEach(I.infos,function(fa,la){var ta,Q=fa.symbol.color;Q.a&&c.forEach(ra,function(T){ta=T.attributes[I.attributeField];(ta>=fa.minValue&&ta<fa.maxValue||la===I.infos.length-1&&ta>=fa.minValue)&&P.push([T.attributes[ca],Q.r,Q.g,Q.b])},this)},this),Y=da&&da.pixelType||this.pixelType,this._adjustColormapToPixelTypeRange(P,Y),Y=new D,Y.functionName="Colormap",Y.functionArguments=
{},Y.functionArguments.Colormap=P,Y.variableName="Raster"):(c.forEach(I.infos,function(fa,la){R=fa.symbol&&fa.symbol.color;R.a?(0===la?L.push.call(L,fa.minValue,fa.maxValue+1E-4):L.push.call(L,fa.minValue+1E-4,fa.maxValue+1E-4),M.push(la),P.push([la,R.r,R.g,R.b])):N.push(fa.minValue,fa.maxValue)}),Y=da&&da.pixelType||this.pixelType,this._adjustColormapToPixelTypeRange(P,Y),Y=new D,Y.functionName="Remap",Y.functionArguments={InputRanges:L,OutputValues:M,NoDataRanges:N},Y.variableName="Raster",aa=new D,
aa.functionName="Colormap",aa.functionArguments={Colormap:P,Raster:Y},Y=aa);return Y},_convertUniqueValueRenderer:function(I){var L=[],M=this.renderingRule&&this._getRenderingRuleId(this.renderingRule);if(M){var N=this._renderingRuleAttributeTable[M];var P=this._rasterFunctionTemplateInfos[M]}var R=N&&N.features?N.features:this._rasterAttributeTableFeatures;var Y=(M=N&&N.fields?N.fields:this._rasterAttributeTableFields)&&M.length?this._getValueField(M):"Value";c.forEach(I.infos,function(ja){var aa=
ja.symbol.color;aa.a&&(I.attributeField.toLowerCase()!==Y.toLowerCase()&&R.length?c.forEach(R,function(da){da.attributes[I.attributeField]==ja.value&&L.push([da.attributes[Y],aa.r,aa.g,aa.b])},this):L.push([ja.value,aa.r,aa.g,aa.b]))},this);this._adjustColormapToPixelTypeRange(L,P&&P.pixelType||this.pixelType);P=new D;P.functionName="Colormap";P.functionArguments={};P.functionArguments.Colormap=L;P.variableName="Raster";return P},_adjustColormapToPixelTypeRange:function(I,L){(L=this._pixelTypeRanges[L])&&
I.push([Math.floor(L[0]-1),0,0,0],[Math.ceil(L[1]+1),0,0,0]);return I},_combineRenderingRule:function(I,L){if(!I||!L)return I||L;var M=function(N){var P=N.Raster;return P=P&&"esri.layers.RasterFunction"===P.declaredClass?M(P.functionArguments):N};I=J.clone(I);"none"!==L.functionName.toLocaleLowerCase()&&(M(I.functionArguments).Raster=L);return I},_isItemLevelRasterFunction:function(I){var L=I&&I.functionName;if(!L||!this._hasItemLevelRFT)return!1;var M=!1;c.some(this.rasterFunctionInfos,function(N){if(N&&
N.name===L){if(1===N.functionType||2===N.functionType)M=!0;return!0}});return M},_getServiceLevelRenderingRule:function(I){if(!this._hasItemLevelRFT||!I)return I;I=new D(I.toJson());var L=I.functionArguments;for(var M;;)if((M=L&&L.Raster)&&M.functionArguments&&M.functionArguments.Raster)L=M,L=L.functionArguments;else{this._isItemLevelRasterFunction(M)&&delete L.Raster;break}return I},_getItemLevelRenderingRule:function(I){if(!this._hasItemLevelRFT||!I)return null;if(this._isItemLevelRasterFunction(I))return I;
I=new D(I.toJson());for(I=I.functionArguments;;)if((I=I&&I.Raster)&&I.functionArguments&&I.functionArguments.Raster)I=I.functionArguments;else{if(this._isItemLevelRasterFunction(I))return I;break}},_resolve:function(I,L,M,N,P){L&&this[L].apply(this,I);M&&M.apply(null,I);N&&p._resDfd(N,I,P)},_toggleTime:function(){var I=this._map;this.timeInfo&&this.useMapTime&&I&&!this.suspended?(this._timeConnect||(this._timeConnect=b.connect(I,"onTimeExtentChange",this,this._onTimeExtentChangeHandler)),this._setTime(I.timeExtent)):
(b.disconnect(this._timeConnect),this._timeConnect=null,this._setTime(null))},setUseMapTime:function(I,L){this.useMapTime=I;this._toggleTime();!L&&this._map&&this.refresh(!0)},_setTime:function(I){this._params&&(this._params.time=I?I.toJson().join(","):null)},onResume:function(){if(this._isScientificData()||this.timeInfo)this._originalGetImageUrl=this._originalGetImageUrl||this.getImageUrl.bind(this),this.getImageUrl=t(this._originalGetImageUrl,200),this._debounceGetImageTimer&&clearTimeout(this._debounceGetImageTimer),
this._debounceGetImageTimer=setTimeout(function(){this.getImageUrl=this._originalGetImageUrl}.bind(this),5E3);this.inherited(arguments)},_onTimeExtentChangeHandler:function(I){this.suspended||(this._setTime(I),this.refresh(!0))},handleSpatialReferenceChange:function(){this.onSpatialReferenceChange()},getColormap:function(I){var L=this._url.path+"/colormap",M=new f(p._dfdCanceller),N={f:"json"};I&&I.renderingRule&&(N.renderingRule=h.toJson(I.renderingRule.toJson()));this.hasColormap?(M._pendingDfd=
v({url:L,content:N,handleAs:"json",callbackParamName:"callback"}),M._pendingDfd.then(function(P){M.callback(P)},function(P){M.errback(P)})):(I=Error("Layer does not support colormap"),I.log=!!d.isDebug,M.errback(I));return M},getRenderingRuleColormap:function(I){var L=new f(p._dfdCanceller);if(!I||!I.renderingRule)return L.errback(Error("Rendering rule is not specified")),L;I=I.renderingRule;var M=this._getRenderingRuleId(I);this._renderingRuleColormap&&M&&this._renderingRuleColormap.hasOwnProperty(M)?
L.resolve(this._renderingRuleColormap[M]):L=this.getColormap({renderingRule:I}).then(J.hitch(this,function(N){N=N&&N.colormap;M&&(this._renderingRuleColormap[M]=N);return N}));return L},_handleClipFunctionInRenderingRule:function(I){I=J.clone(I);var L=I.arguments,M=L.ClippingGeometry&&L.ClippingGeometry.value,N=L.Extent&&L.Extent.value;L.ClippingRaster&&L.ClippingRaster.value||M||N||(L=this._map.extent.toJson(),I.arguments.Extent.value=L,I.functionArguments.Extent.value=L,I._isTemplate&&(I._templateJson.arguments.Extent.value=
L));return I}});J.setObject("layers.ImageServiceLayerMixin",S,u);return S})},"esri/layers/MosaicRule":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../geometry/Point ./RasterFunction".split(" "),function(S,J,f,c,h,d,b){var a=S(null,{declaredClass:"esri.layers.MosaicRule",method:null,where:null,sortField:null,sortValue:null,ascending:!1,lockRasterIds:null,viewpoint:null,objectIds:null,operation:null,multidimensionalDefinition:[],itemRenderingRule:null,constructor:function(e){J.isObject(e)&&
(J.mixin(this,e),e.mosaicMethod&&(this.method=e.mosaicMethod),this.method&&"esri"!==this.method.toLowerCase().substring(0,4)&&(this.method=this._getMethodEnum(this.method)),e.mosaicOperation&&(this.operation=e.mosaicOperation),this.operation&&"MT_"!==this.operation.toUpperCase().substring(0,3)&&(this.operation=this._getOperatorEnum(this.operation)),e.fids&&(this.objectIds=e.fids),e.viewpoint&&(this.viewpoint=new d(e.viewpoint)),e.itemRenderingRule&&(this.itemRenderingRule=new b(e.itemRenderingRule)),
this.multidimensionalDefinition=e.multidimensionalDefinition||[])},toJson:function(){var e=null,q=this.multidimensionalDefinition?this.multidimensionalDefinition.length:0;if(q){e=[];for(var t=0;t<q;t++)e.push("esri.layers.DimensionalDefinition"===this.multidimensionalDefinition[t].declaredClass?this.multidimensionalDefinition[t].toJson():this.multidimensionalDefinition[t])}e={mosaicMethod:this.method,where:this.where,sortField:this.sortField,sortValue:this.sortValue,ascending:this.ascending,lockRasterIds:J.clone(this.lockRasterIds),
viewpoint:this.viewpoint?this.viewpoint.toJson():null,fids:J.clone(this.objectIds),mosaicOperation:this.operation,multidimensionalDefinition:e,itemRenderingRule:this.itemRenderingRule?this.itemRenderingRule.toJson():null};return h.filter(e,function(u){if(null!==u)return!0})},_getMethodEnum:function(e){if(e){var q=a.METHOD_NONE;switch(e.toLowerCase()){case "byattribute":q=a.METHOD_ATTRIBUTE;break;case "center":q=a.METHOD_CENTER;break;case "lockraster":q=a.METHOD_LOCKRASTER;break;case "nadir":q=a.METHOD_NADIR;
break;case "northwest":q=a.METHOD_NORTHWEST;break;case "seamline":q=a.METHOD_SEAMLINE;break;case "viewpoint":q=a.METHOD_VIEWPOINT}return q}},_getOperatorEnum:function(e){if(e)switch(e.toLowerCase()){case "first":return a.OPERATION_FIRST;case "last":return a.OPERATION_LAST;case "max":return a.OPERATION_MAX;case "min":return a.OPERATION_MIN;case "blend":return a.OPERATION_BLEND;case "mean":return a.OPERATION_MEAN;case "sum":return a.OPERATION_SUM}}});J.mixin(a,{METHOD_NONE:"esriMosaicNone",METHOD_CENTER:"esriMosaicCenter",
METHOD_NADIR:"esriMosaicNadir",METHOD_VIEWPOINT:"esriMosaicViewpoint",METHOD_ATTRIBUTE:"esriMosaicAttribute",METHOD_LOCKRASTER:"esriMosaicLockRaster",METHOD_NORTHWEST:"esriMosaicNorthwest",METHOD_SEAMLINE:"esriMosaicSeamline",OPERATION_FIRST:"MT_FIRST",OPERATION_LAST:"MT_LAST",OPERATION_MIN:"MT_MIN",OPERATION_MAX:"MT_MAX",OPERATION_MEAN:"MT_MEAN",OPERATION_BLEND:"MT_BLEND",OPERATION_SUM:"MT_SUM"});J.setObject("layers.MosaicRule",a,c);return a})},"esri/layers/DimensionalDefinition":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../lang"],function(S,J,f,c,h){S=S(null,{declaredClass:"esri.layers.DimensionalDefinition",variableName:null,dimensionName:null,values:[],isSlice:!1,constructor:function(d){J.isObject(d)&&J.mixin(this,d)},toJson:function(){var d={variableName:this.variableName,dimensionName:this.dimensionName,values:J.clone(this.values),isSlice:this.isSlice};return h.filter(d,function(b){return null!==b})}});J.setObject("layers.DimensionalDefinition",S,c);return S})},"esri/layers/Raster":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/json dojo/sniff ../kernel ../Evented ../request ../geometry/Extent ../SpatialReference ../deferredUtils ./PixelBlock ./rasterFormats/LercCodec ./rasterFormats/Lerc2Codec".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l){var n,k,r,w,x,D;J=J(q,{declaredClass:"esri.layers.Raster",imageServiceUrl:null,validPixelTypes:"U1 U2 U4 U8 U16 U32 S8 S16 S32 F32".split(" "),validFormats:"lerc jpeg jpg jpgpng png png8 png24 png32 bip bsq tiff".split(" "),_eventMap:{"raster-read-complete":["pixelData","params"]},constructor:function(z){this.imageServiceUrl=z;this.registerConnectEvents();this._loadRasterFormatModules()},read:function(z,B,C){var H=this,E=new c(m._dfdCanceller);if(10>a("ie"))throw"This browser is not supported.";
if(!z.imageServiceParameters)throw"Insufficient parameters to read data";var K=f.clone(z.imageServiceParameters),I=z.pixelType;h.some(this.validPixelTypes,function(Y){return Y===I})||(K.pixelType="F32");h.some(this.validFormats,function(Y){return Y.toLowerCase()===K.format.toLowerCase()})||(K.format="lerc");var L=z.decodeFunc,M;this._prepareGetImageParameters(K);var N=K.width,P=K.height,R=K.extent;delete K.width;delete K.height;delete K.extent;E._pendingDfd=t({url:this.imageServiceUrl+"/exportImage",
handleAs:"arraybuffer",content:f.mixin(K,{f:"image"}),load:function(Y){H.decode(Y,{width:N,height:P,planes:null,pixelType:I,noDataValue:K.noData,format:K.format,decodeFunc:L}).then(function(ja){M={pixelBlock:ja,extent:R};H._resolve([M,K],"onRasterReadComplete",B,E)},function(ja){H._resolve([ja],null,C,E,!0)})},error:function(Y){H._resolve([Y],null,C,E,!0)}});return E.promise},decode:function(z,B){if(void 0===B||null===B)throw"missing decode options";var C;B.format&&(C=B.format.toUpperCase());"BSQ"!==
C&&"BIP"!==C&&(C=this._getFormat(z));var H=B.decodeFunc;if(void 0===H||null===H)H=this._getFormatDecoderDfd(C);return H(z,B)},onRasterReadComplete:function(){},_prepareGetImageParameters:function(z){if(z.size&&z.bbox){var B=z.size.split(",");z.width=parseFloat(B[0]);z.height=parseFloat(B[1]);z.extent||(B=z.bbox.split(","),z.extent=new u(parseFloat(B[0]),parseFloat(B[1]),parseFloat(B[2]),parseFloat(B[3]),new g(z.bboxSR)))}else{if(!z.width||Math.floor(z.width)!==z.width||!z.height||Math.floor(z.height)!==
z.height)throw"Incorrect Image Dimensions";if(!z.extent||"esri.geometry.Extent"!==z.extent.declaredClass)throw"Incorrect extent";B=z.extent;var C=B.spatialReference.wkid||b.toJson(B.spatialReference.toJson());delete z._ts;f.mixin(z,{bbox:B.xmin+","+B.ymin+","+B.xmax+","+B.ymax,imageSR:C,bboxSR:C,size:z.width+","+z.height},z.disableClientCaching?{_ts:(new Date).getTime()}:{})}},_adjustExtent:function(z,B,C){var H=z.ymax-z.ymin,E=z.xmax-z.xmin;C>=B?z.ymax=z.ymin+E*B/C:z.xmax=z.xmin+H*C/B;return z},
_resolve:function(z,B,C,H,E){B&&this[B].apply(this,z);C&&C.apply(null,z);H&&m._resDfd(H,z,E)},_getFormatDecoderDfd:function(z){var B=null;switch(z){case "LERC":B=this._decodeLerc;break;case "LERC2":B=this._decodeLerc2;break;case "JPEG":B=this._decodeJpeg;break;case "PNG":B=this._decodePng;break;case "BSQ":B=this._decodeBsq;break;case "BIP":B=this._decodeBip;break;case "TIFF":B=this._decodeTiff;break;default:B=function(C,H){throw"The raster format is not supported";}}B=f.hitch(this,B);return function(C,
H){var E=new c;try{if("LERC"===z||!0===x){var K=B(C,H);E.resolve(K)}else D.then(function(){K=B(C,H);E.resolve(K)})}catch(I){E.reject(I)}return E}},_getFormat:function(z){z=new Uint8Array(z,0,10);var B="";if(255===z[0]&&216===z[1])B="JPEG";else if(137===z[0]&&80===z[1]&&78===z[2]&&71===z[3])B="PNG";else if(67===z[0]&&110===z[1]&&116===z[2]&&90===z[3]&&73===z[4]&&109===z[5]&&97===z[6]&&103===z[7]&&101===z[8]&&32===z[9])B="LERC";else if(76===z[0]&&101===z[1]&&114===z[2]&&99===z[3]&&50===z[4]&&32===z[5])B=
"LERC2";else if(-1<String.fromCharCode.apply(null,z).toLowerCase().indexOf("error"))B="ERROR";else if(73===z[0]&&73===z[1]&&42===z[2]&&0===z[3]||77===z[0]&&77===z[1]&&0===z[2]&&42===z[3])B="TIFF";return B},_validateDecodeParams:function(z){if(!z.height||Math.floor(z.height)!==z.height)throw"Height not provided.";if(!z.width||Math.floor(z.width)!==z.width)throw"Width not provided.";},_decodeJpeg:function(z,B){if(!n)throw"The jpeg decoder module is not loaded.";this._validateDecodeParams(B);z=(new n).decode(z);
if(!y(z,B))throw"The decoded image dimensions are incorrect.";B=[];var C;for(C=0;C<z.pixels.length;C++){var H=z.pixels[C];B.push(this._calculateBandStatistics(H))}return new v({width:z.width,height:z.height,pixels:z.pixels,pixelType:"U8",mask:z.mask,statistics:B})},_decodePng:function(z,B){if(!k)throw"The png decoder module is not loaded.";this._validateDecodeParams(B);z=new Uint8Array(z);var C=new k(z);z=new Uint8Array(B.width*B.height*4);C.copyToImageData(z,C.decodePixels());var H=C=0;H=new Uint8Array(B.width*
B.height);for(C=0;C<B.width*B.height;C++)H[C]=z[4*C+3];var E=new v({width:B.width,height:B.height,pixels:[],pixelType:"U8",mask:H,statistics:[]});for(C=0;3>C;C++){var K=new Uint8Array(B.width*B.height);for(H=0;H<B.width*B.height;H++)K[H]=z[4*H+C];E.addData({pixels:K,statistics:this._calculateBandStatistics(K)})}return E},_decodeBsq:function(z,B){if(!r)throw"The bsq decoder module is not loaded.";this._validateDecodeParams(B);F=B.noDataValue;B.pixelType=A(B.pixelType);z=r.decodeBSQ(z,{bandCount:B.planes,
width:B.width,height:B.height,pixelType:G,noDataValue:F});var C=[],H,E=null;for(H=0;H<z.pixels.length;H++)E=z.pixels[H],C.push(this._calculateBandStatistics(E));return new v({width:B.width,height:B.height,pixels:z.pixels,pixelType:B.pixelType,mask:z.maskData,statistics:C})},_decodeBip:function(z,B){this._validateDecodeParams(B);F=B.noDataValue;B.pixelType=A(B.pixelType);z=r.decodeBIP(z,{bandCount:B.planes,width:B.width,height:B.height,pixelType:G,noDataValue:F});var C=[],H,E=null;for(H=0;H<z.pixels.length;H++)E=
z.pixels[H],C.push(this._calculateBandStatistics(E));return new v({width:B.width,height:B.height,pixels:z.pixels,pixelType:B.pixelType,mask:z.maskData,statistics:C})},_decodeTiff:function(z,B){this._validateDecodeParams(B);F=B.noDataValue;B.pixelType=A(B.pixelType);z=w.decode(z);B=[];var C,H=null;for(C=0;C<z.pixels.length;C++)H=z.pixels[C],B.push(this._calculateBandStatistics(H,z.maskData));return new v({width:z.width,height:z.height,pixels:z.pixels,pixelType:z.pixelType,mask:z.maskData,statistics:B})},
_decodeLerc:function(z,B){this._validateDecodeParams(B);F=B.noDataValue;B.pixelType=A(B.pixelType);for(var C=0,H,E=0,K,I=z.byteLength-10;E<I;){var L=p.decode(z,{inputOffset:E,encodedMaskData:H,returnMask:0===C?!0:!1,returnEncodedMask:0===C?!0:!1,returnFileInfo:!0,pixelType:G,noDataValue:F});E=L.fileInfo.eofOffset;0===C&&(H=L.encodedMaskData,K=new v({width:B.width,height:B.height,pixels:[],pixelType:B.pixelType,mask:L.maskData,statistics:[]}));C++;if(!y(L,B))throw"The decoded image dimensions are incorrect";
K.addData({pixels:L.pixelData,statistics:{minValue:L.minValue,maxValue:L.maxValue,noDataValue:L.noDataValue}})}return K},_decodeLerc2:function(z,B){this._validateDecodeParams(B);F=B.noDataValue;B.pixelType=A(B.pixelType);for(var C=0,H,E,K=0,I,L=z.byteLength-10,M=[];K<L;){E=l.decode(z,{inputOffset:K,maskData:H,returnFileInfo:!0});K=E.fileInfo.eofOffset;0===C&&(H=E.maskData,I=new v({width:B.width,height:B.height,pixels:[],pixelType:E.fileInfo.pixelType,mask:E.maskData,statistics:[]}));E.fileInfo.mask&&
0<E.fileInfo.mask.numBytes&&M.push(E.maskData);C++;if(!y(E,B))throw"The decoded image dimensions are incorrect";if(1<E.dimCount&&E.pixelData&&E.pixelData.length===E.width*E.height*E.dimCount){E.pixelData=E.pixelData.slice(-E.width*E.height);var N=E.dimStats&&E.dimStats.minValues&&E.dimStats.minValues[E.dimCount-1],P=E.dimStats&&E.dimStats.maxValues&&E.dimStats.maxValues[E.dimCount-1];null!=N&&null!=P&&(E.minValue=N,E.maxValue=P)}I.addData({pixels:E.pixelData,statistics:{minValue:E.minValue,maxValue:E.maxValue,
noDataValue:E.noDataValue}})}if(1<M.length){E=I.width*I.height;I.bandMasks=M;H=new Uint8Array(E);H.set(M[0]);for(B=1;B<M.length;B++)for(z=M[B],C=0;C<E;C++)H[C]&=z[C];I.maskData=H}return I},_calculateBandStatistics:function(z,B){var C=Infinity,H=-Infinity,E=z.length,K,I=0;if(B)for(K=0;K<E;K++)B[K]&&(I=z[K],C=I<C?I:C,H=I>H?I:H);else for(K=0;K<E;K++)I=z[K],C=I<C?I:C,H=I>H?I:H;return{minValue:C,maxValue:H}},_loadRasterFormatModules:function(){x||(D||(D=new c),10>a("ie")?D.isRejected()||D.reject("unsupported browser version"):
S(["./rasterFormats/JpgPlus","./rasterFormats/Png","./rasterFormats/Raw","./rasterFormats/TiffDecoder","./rasterFormats/Zlib"],function(z,B,C,H){n=z;k=B;r=C;w=H;x=!0;D.isResolved()||D.resolve(!0)}))}});var G=null,F=null,A=function(z){if("U1"===z||"U2"===z||"U4"===z||"U8"===z)return F=Math.pow(2,8)-1,G=Uint8Array,"U8";"U16"===z?(F=F||Math.pow(2,16)-1,G=Uint16Array):"U32"===z?(F=F||Math.pow(2,32)-1,G=Uint32Array):"S8"===z?(F=F||0-Math.pow(2,7),G=Int8Array):"S16"===z?(F=F||0-Math.pow(2,15),G=Int16Array):
"S32"===z?(F=F||0-Math.pow(2,31),G=Int32Array):G=Float32Array;return z},y=function(z,B){return z.height!==B.height||z.width!==B.width?!1:!0};f.setObject("layers.Raster",J,e);return J})},"esri/layers/PixelBlock":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(S,J,f,c){S=S([],{declaredClass:"esri.layers.PixelBlock",planes:null,width:null,height:null,pixelType:null,pixels:[],statistics:[],maskIsAlpha:!1,validPixelCount:null,constructor:function(h){if(h){if(!h.width||
Math.floor(h.width)!==h.width)throw"PixelBlock: incorrect width";if(!h.height||Math.floor(h.height)!==h.height)throw"PixelBlock: incorrect height";if(!h.pixels)throw"PixelBlock: pixel data not present";this.width=h.width;this.height=h.height;this.pixels=h.pixels;this.pixelType=h.pixelType||null;this.statistics=h.statistics;this.mask=h.mask||null;this.maskIsAlpha=h.maskIsAlpha||!1;h=h.validPixelCount;null==h&&(h=this.mask?this._getValidPixelCount(this.mask):this.width*this.height);this.validPixelCount=
h}},getPlaneCount:function(){return this.pixels.length!==this.statistics.length?0:this.statistics.length},addData:function(h){if(!h.pixels||!h.statistics)throw"Pixel data or statistics are not present";if(h.pixels.length!==this.width*this.height)throw"Inconsistent pixel data size";this.statistics.push(h.statistics);this.pixels.push(h.pixels)},getAsRGBA:function(){var h=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case "S8":case "S16":case "U16":case "S32":case "U32":case "F32":case "F64":this._fillFromNon8Bit(h);
break;default:this._fillFrom8Bit(h)}return new Uint8ClampedArray(h)},getAsRGBAFloat:function(){var h=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(h);return h},clone:function(h){h=h||this;var d=new this.constructor;d.width=h.width;d.height=h.height;d.pixelType=h.pixelType;d.maskIsAlpha=h.maskIsAlpha;h.mask&&(d.mask=new Uint8Array(h.mask));var b,a;if(h.pixels){d.pixels=[];var e=(a=h.pixels.length)&&h.pixels[0].slice;for(b=0;b<a;b++)d.pixels[b]=e?h.pixels[b].slice(0,h.pixels[b].length):
new h.pixels[b].constructor(h.pixels[b])}if(h.statistics)for(d.statistics=[],a=h.statistics.length,b=0;b<a;b++)d.statistics[b]=J.clone(h.statistics[b]);h=h.validPixelCount;null==h&&(h=d.mask?this._getValidPixelCount(d.mask):d.width*d.height);return d},clamp:function(h){if("F64"!==h&&"F32"!==h){switch(h){case "U8":var d=[0,255];break;case "U16":d=[0,65535];break;case "U32":d=[0,4294967295];break;case "S8":d=[-128,127];break;case "S16":d=[-32768,32767];break;case "S32":d=[-2147483648,2147483647];break;
default:d=[-3.4*1E39,3.4*1E39]}var b=d[0];d=d[1];var a=this.pixels,e=this.width*this.height,q=a.length,t,u,g=[];for(t=0;t<q;t++){var m=this._createEmptyBand(h,e);var v=a[t];for(u=0;u<e;u++){var p=v[u];m[u]=p>d?d:p<b?b:p}g.push(m)}this.pixels=g;this.pixelType=h}},calculateStatistics:function(){var h,d=[],b=this.mask;for(h=0;h<this.pixels.length;h++){var a=this.pixels[h];d.push(this._calculateBandStatistics(a,b))}this.statistics=d},_getValidPixelCount:function(h){var d,b=0;for(d=0;d<h.length;d++)h[d]&&
b++;return b},_createEmptyBand:function(h,d){switch(h){case "U8":h=new Uint8Array(d);break;case "U16":h=new Uint16Array(d);break;case "U32":h=new Uint32Array(d);break;case "S8":h=new Int8Array(d);break;case "S16":h=new Int16Array(d);break;case "S32":h=new Int32Array(d);break;case "U32":h=new Uint32Array(d);break;case "F32":h=new Float32Array(d);break;case "F64":h=new Float64Array(d);break;default:h=new Float32Array(d)}return h},_fillFrom8Bit:function(h){var d=this.pixels,b=this.mask;if(!h||!d||!d.length)return 0;
var a,e;var q=a=e=d[0];3<=d.length&&(a=d[1],e=d[2]);d=new Uint32Array(h);var t=this.width*this.height;if(q.length!==t)return 0;if(b&&b.length===t)if(this.maskIsAlpha)for(h=0;h<t;h++)b[h]&&(d[h]=b[h]<<24|e[h]<<16|a[h]<<8|q[h]);else for(h=0;h<t;h++)b[h]&&(d[h]=-16777216|e[h]<<16|a[h]<<8|q[h]);else for(h=0;h<t;h++)d[h]=-16777216|e[h]<<16|a[h]<<8|q[h]},_fillFromNon8Bit:function(h){var d=this.pixels,b=this.mask,a=this.statistics;if(!h||!d||!d.length)return 0;var e=1,q=0;e=1;a&&0<a.length?(q=a.map(function(m){return m.minValue}).reduce(function(m,
v){return Math.min(m,v)}),e=a.map(function(m){return m.maxValue-m.minValue}).reduce(function(m,v){return Math.max(m,v)}),e=255/e):(e=255,"S8"===this.pixelType?(q=-128,e=127):"U16"===this.pixelType?e=65535:"S16"===this.pixelType?(q=-32768,e=32767):"U32"===this.pixelType?e=4294967295:"S32"===this.pixelType?(q=-2147483648,e=2147483647):"F32"===this.pixelType?(q=-3.4*1E39,e=3.4*1E39):"F64"===this.pixelType&&(q=-Number.MAX_VALUE,e=Number.MAX_VALUE),e=255/(e-q));h=new Uint32Array(h);a=this.width*this.height;
var t=d[0];if(t.length!==a)return 0;if(3<=d.length){var u=d[1];var g=d[2];if(b&&b.length===a)for(d=0;d<a;d++)b[d]&&(h[d]=-16777216|(g[d]-q)*e<<16|(u[d]-q)*e<<8|(t[d]-q)*e);else for(d=0;d<a;d++)h[d]=-16777216|(g[d]-q)*e<<16|(u[d]-q)*e<<8|(t[d]-q)*e}else if(b&&b.length===a)for(d=0;d<a;d++)u=(t[d]-q)*e,b[d]&&(h[d]=-16777216|u<<16|u<<8|u);else for(d=0;d<a;d++)u=(t[d]-q)*e,h[d]=-16777216|u<<16|u<<8|u},_fillFrom32Bit:function(h){var d=this.pixels,b=this.mask;if(!h||!d||!d.length)return 0;var a,e;var q=
a=e=d[0];3<=d.length&&(a=d[1],e=d[2]);var t=this.width*this.height;if(q.length!==t)return 0;var u=0;if(b&&b.length===t)for(d=0;d<t;d++)h[u++]=q[d],h[u++]=a[d],h[u++]=e[d],h[u++]=b[d]&1;else for(d=0;d<t;d++)h[u++]=q[d],h[u++]=a[d],h[u++]=e[d],h[u++]=1},_calculateBandStatistics:function(h,d){var b=Infinity,a=-Infinity,e=h.length,q,t=0;if(d)for(q=0;q<e;q++)d[q]&&(t=h[q],b=t<b?t:b,a=t>a?t:a);else for(q=0;q<e;q++)t=h[q],b=t<b?t:b,a=t>a?t:a;return{minValue:b,maxValue:a}}});J.setObject("layers.PixelBlock",
S,c);return S})},"esri/layers/rasterFormats/LercCodec":function(){define([],function(){var S={defaultNoDataValue:-3.4027999387901484E38,decode:function(f,c){c=c||{};var h=c.inputOffset||0,d=c.encodedMaskData||null===c.encodedMaskData,b={},a=new Uint8Array(f,h,10);b.fileIdentifierString=String.fromCharCode.apply(null,a);if("CntZImage"!=b.fileIdentifierString.trim())throw"Unexpected file identifier string: "+b.fileIdentifierString;h+=10;a=new DataView(f,h,24);b.fileVersion=a.getInt32(0,!0);b.imageType=
a.getInt32(4,!0);b.height=a.getUint32(8,!0);b.width=a.getUint32(12,!0);b.maxZError=a.getFloat64(16,!0);h+=24;if(!d)if(a=new DataView(f,h,16),b.mask={},b.mask.numBlocksY=a.getUint32(0,!0),b.mask.numBlocksX=a.getUint32(4,!0),b.mask.numBytes=a.getUint32(8,!0),b.mask.maxValue=a.getFloat32(12,!0),h+=16,0<b.mask.numBytes){d=new Uint8Array(Math.ceil(b.width*b.height/8));a=new DataView(f,h,b.mask.numBytes);var e=a.getInt16(0,!0),q=2,t=0;do{if(0<e)for(;e--;)d[t++]=a.getUint8(q++);else{var u=a.getUint8(q++);
for(e=-e;e--;)d[t++]=u}e=a.getInt16(q,!0);q+=2}while(q<b.mask.numBytes);if(-32768!==e||t<d.length)throw"Unexpected end of mask RLE encoding";b.mask.bitset=d;h+=b.mask.numBytes}else 0===(b.mask.numBytes|b.mask.numBlocksY|b.mask.maxValue)&&(d=new Uint8Array(Math.ceil(b.width*b.height/8)),b.mask.bitset=d);a=new DataView(f,h,16);b.pixels={};b.pixels.numBlocksY=a.getUint32(0,!0);b.pixels.numBlocksX=a.getUint32(4,!0);b.pixels.numBytes=a.getUint32(8,!0);b.pixels.maxValue=a.getFloat32(12,!0);h+=16;d=b.pixels.numBlocksX;
a=b.pixels.numBlocksY;d+=0<b.width%d?1:0;e=a+(0<b.height%a?1:0);b.pixels.blocks=Array(d*e);for(t=q=0;t<e;t++)for(u=0;u<d;u++){var g=0;a=new DataView(f,h,Math.min(10,f.byteLength-h));var m={};b.pixels.blocks[q++]=m;var v=a.getUint8(0);g++;m.encoding=v&63;if(3<m.encoding)throw"Invalid block encoding ("+m.encoding+")";if(2===m.encoding)h++;else{if(0!==v&&2!==v){v>>=6;m.offsetType=v;if(2===v)m.offset=a.getInt8(1),g++;else if(1===v)m.offset=a.getInt16(1,!0),g+=2;else if(0===v)m.offset=a.getFloat32(1,!0),
g+=4;else throw"Invalid block offset type";if(1===m.encoding)if(v=a.getUint8(g),g++,m.bitsPerPixel=v&63,v>>=6,m.numValidPixelsType=v,2===v)m.numValidPixels=a.getUint8(g),g++;else if(1===v)m.numValidPixels=a.getUint16(g,!0),g+=2;else if(0===v)m.numValidPixels=a.getUint32(g,!0),g+=4;else throw"Invalid valid pixel count type";}h+=g;if(3!=m.encoding)if(0===m.encoding){v=(b.pixels.numBytes-1)/4;if(v!==Math.floor(v))throw"uncompressed block has invalid length";a=new ArrayBuffer(4*v);g=new Uint8Array(a);
g.set(new Uint8Array(f,h,4*v));a=new Float32Array(a);m.rawData=a;h+=4*v}else 1===m.encoding&&(v=Math.ceil(m.numValidPixels*m.bitsPerPixel/8),a=new ArrayBuffer(4*Math.ceil(v/4)),g=new Uint8Array(a),g.set(new Uint8Array(f,h,v)),m.stuffedData=new Uint32Array(a),h+=v)}}b.eofOffset=h;f=null!=c.noDataValue?c.noDataValue:S.defaultNoDataValue;d=c.encodedMaskData;v=c.returnMask;e=0;q=b.pixels.numBlocksX;t=b.pixels.numBlocksY;u=Math.floor(b.width/q);m=Math.floor(b.height/t);g=2*b.maxZError;h=Number.MAX_VALUE;
d=d||(b.mask?b.mask.bitset:null);var p;a=new (c.pixelType||Float32Array)(b.width*b.height);v&&d&&(p=new Uint8Array(b.width*b.height));v=new Float32Array(u*m);for(var l,n,k=0;k<=t;k++){var r=k!==t?m:b.height%t;if(0!==r)for(var w=0;w<=q;w++){var x=w!==q?u:b.width%q;if(0!==x){var D=k*b.width*m+w*u,G=b.width-x,F=b.pixels.blocks[e],A;if(2>F.encoding){if(0===F.encoding)var y=F.rawData;else{var z=A=y=void 0;l=F.stuffedData;n=F.bitsPerPixel;var B=F.numValidPixels,C=F.offset,H=g,E=v,K=b.pixels.maxValue,I=
(1<<n)-1,L=0,M=0,N=Math.ceil((K-C)/H);l[l.length-1]<<=8*(4*l.length-Math.ceil(n*B/8));for(z=0;z<B;z++)0===M&&(y=l[L++],M=32),M>=n?(A=y>>>M-n&I,M-=n):(M=n-M,A=(y&I)<<M&I,y=l[L++],M=32-M,A+=y>>>M),E[z]=A<N?C+A*H:K;y=v}A=0}else var P=2===F.encoding?0:F.offset;if(d)for(n=0;n<r;n++){if(D&7){var R=d[D>>3];R<<=D&7}for(l=0;l<x;l++)D&7||(R=d[D>>3]),R&128?(p&&(p[D]=1),z=2>F.encoding?y[A++]:P,h=h>z?z:h,a[D++]=z):(p&&(p[D]=0),a[D++]=f),R<<=1;D+=G}else if(2>F.encoding)for(n=0;n<r;n++){for(l=0;l<x;l++)z=y[A++],
h=h>z?z:h,a[D++]=z;D+=G}else for(h=h>P?P:h,n=0;n<r;n++){for(l=0;l<x;l++)a[D++]=P;D+=G}if(1===F.encoding&&A!==F.numValidPixels)throw"Block and Mask do not match";e++}}}P=p;p={width:b.width,height:b.height,pixelData:a,minValue:h,maxValue:b.pixels.maxValue,noDataValue:f};P&&(p.maskData=P);c.returnEncodedMask&&b.mask&&(p.encodedMaskData=b.mask.bitset?b.mask.bitset:null);if(c.returnFileInfo&&(p.fileInfo=J(b),c.computeUsedBitDepths)){c=p.fileInfo;P=b.pixels.numBlocksX*b.pixels.numBlocksY;R={};for(y=0;y<
P;y++)A=b.pixels.blocks[y],0===A.encoding?R.float32=!0:1===A.encoding?R[A.bitsPerPixel]=!0:R[0]=!0;b=Object.keys(R);c.bitDepths=b}return p}},J=function(f){return{fileIdentifierString:f.fileIdentifierString,fileVersion:f.fileVersion,imageType:f.imageType,height:f.height,width:f.width,maxZError:f.maxZError,eofOffset:f.eofOffset,mask:f.mask?{numBlocksX:f.mask.numBlocksX,numBlocksY:f.mask.numBlocksY,numBytes:f.mask.numBytes,maxValue:f.mask.maxValue}:null,pixels:{numBlocksX:f.pixels.numBlocksX,numBlocksY:f.pixels.numBlocksY,
numBytes:f.pixels.numBytes,maxValue:f.pixels.maxValue,noDataValue:this.noDataValue}}};return S})},"esri/layers/rasterFormats/Lerc2Codec":function(){define([],function(){var S={unstuff:function(c,h,d,b,a,e,q,t){var u=(1<<d)-1,g=0,m,v=0;c[c.length-1]<<=8*(4*c.length-Math.ceil(d*b/8));if(a)for(m=0;m<b;m++){if(0===v){var p=c[g++];v=32}if(v>=d){var l=p>>>v-d&u;v-=d}else v=d-v,l=(p&u)<<v&u,p=c[g++],v=32-v,l+=p>>>v;h[m]=a[l]}else for(a=Math.ceil((t-e)/q),m=0;m<b;m++)0===v&&(p=c[g++],v=32),v>=d?(l=p>>>v-
d&u,v-=d):(v=d-v,l=(p&u)<<v&u,p=c[g++],v=32-v,l+=p>>>v),h[m]=l<a?e+l*q:t},unstuffLUT:function(c,h,d,b,a,e){var q=(1<<h)-1,t=0,u=0,g=0,m=g=0,v=[];c[c.length-1]<<=8*(4*c.length-Math.ceil(h*d/8));var p=Math.ceil((e-b)/a);for(u=0;u<d;u++){if(0===g){var l=c[t++];g=32}g>=h?(m=l>>>g-h&q,g-=h):(g=h-g,m=(l&q)<<g&q,l=c[t++],g=32-g,m+=l>>>g);v[u]=m<p?b+m*a:e}v.unshift(b);return v},unstuff2:function(c,h,d,b,a,e,q,t){var u=(1<<d)-1,g=0,m,v=0,p=0;if(a)for(m=0;m<b;m++){if(0===v){var l=c[g++];v=32;p=0}if(v>=d){var n=
l>>>p&u;v-=d;p+=d}else{var k=d-v;n=l>>>p&u;l=c[g++];v=32-k;n|=(l&(1<<k)-1)<<d-k;p=k}h[m]=a[n]}else for(a=Math.ceil((t-e)/q),m=0;m<b;m++)0===v&&(l=c[g++],v=32,p=0),v>=d?(n=l>>>p&u,v-=d,p+=d):(k=d-v,n=l>>>p&u,l=c[g++],v=32-k,n|=(l&(1<<k)-1)<<d-k,p=k),h[m]=n<a?e+n*q:t;return h},unstuffLUT2:function(c,h,d,b,a,e){var q=(1<<h)-1,t=0,u=0,g=0,m=0,v=0,p=0,l=[],n=Math.ceil((e-b)/a);for(u=0;u<d;u++){if(0===m){var k=c[t++];m=32;p=0}m>=h?(v=k>>>p&q,m-=h,p+=h):(g=h-m,v=k>>>p&q,k=c[t++],m=32-g,v|=(k&(1<<g)-1)<<
h-g,p=g);l[u]=v<n?b+v*a:e}l.unshift(b);return l},originalUnstuff:function(c,h,d,b){var a=(1<<d)-1,e=0,q,t=0;c[c.length-1]<<=8*(4*c.length-Math.ceil(d*b/8));for(q=0;q<b;q++){if(0===t){var u=c[e++];t=32}if(t>=d){var g=u>>>t-d&a;t-=d}else t=d-t,g=(u&a)<<t&a,u=c[e++],t=32-t,g+=u>>>t;h[q]=g}return h},originalUnstuff2:function(c,h,d,b){var a=(1<<d)-1,e=0,q,t=0,u=0;for(q=0;q<b;q++){if(0===t){var g=c[e++];t=32;u=0}if(t>=d){var m=g>>>u&a;t-=d;u+=d}else{var v=d-t;m=g>>>u&a;g=c[e++];t=32-v;m|=(g&(1<<v)-1)<<
d-v;u=v}h[q]=m}return h}},J={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(c){for(var h=65535,d=65535,b=c.length,a=Math.floor(b/2),e=0;a;){var q=359<=a?359:a;a-=q;do h+=c[e++]<<8,d+=h+=c[e++];while(--q);h=(h&65535)+(h>>>16);d=(d&65535)+(d>>>16)}b&1&&(d+=h+=c[e]<<8);return((d&65535)+(d>>>16)<<16|(h&65535)+(h>>>16))>>>0},readHeaderInfo:function(c,h){var d=h.ptr,b=new Uint8Array(c,d,6),a={};a.fileIdentifierString=String.fromCharCode.apply(null,b);if(0!==a.fileIdentifierString.lastIndexOf("Lerc2",
0))throw"Unexpected file identifier string (expect Lerc2 ): "+a.fileIdentifierString;d+=6;b=new DataView(c,d,8);var e=b.getInt32(0,!0);a.fileVersion=e;d+=4;3<=e&&(a.checksum=b.getUint32(4,!0),d+=4);b=new DataView(c,d,12);a.height=b.getUint32(0,!0);a.width=b.getUint32(4,!0);d+=8;4<=e?(a.numDims=b.getUint32(8,!0),d+=4):a.numDims=1;b=new DataView(c,d,40);a.numValidPixel=b.getUint32(0,!0);a.microBlockSize=b.getInt32(4,!0);a.blobSize=b.getInt32(8,!0);a.imageType=b.getInt32(12,!0);a.maxZError=b.getFloat64(16,
!0);a.zMin=b.getFloat64(24,!0);a.zMax=b.getFloat64(32,!0);d+=40;h.headerInfo=a;h.ptr=d;if(3<=e&&(c=this.computeChecksumFletcher32(new Uint8Array(c,d-(4<=e?52:48),a.blobSize-14)),c!==a.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(c,h){var d=h.headerInfo,b=this.getDataTypeArray(d.imageType),a=d.numDims*this.getDataTypeSize(d.imageType),e=this.readSubArray(c,h.ptr,b,a);c=this.readSubArray(c,h.ptr+a,b,a);h.ptr+=2*a;a=!0;for(h=0;h<d.numDims;h++)if(e[h]!==c[h]){a=!1;break}d.minValues=
e;d.maxValues=c;return a},readSubArray:function(c,h,d,b){if(d===Uint8Array)c=new Uint8Array(c,h,b);else{var a=new ArrayBuffer(b);(new Uint8Array(a)).set(new Uint8Array(c,h,b));c=new d(a)}return c},readMask:function(c,h){var d=h.ptr,b=h.headerInfo,a=b.width*b.height,e=b.numValidPixel,q=new DataView(c,d,4);b={};b.numBytes=q.getUint32(0,!0);d+=4;if((0===e||a===e)&&0!==b.numBytes)throw"invalid mask";if(0===e)e=new Uint8Array(Math.ceil(a/8)),b.bitset=e,q=new Uint8Array(a),h.pixels.resultMask=q,d+=b.numBytes;
else if(0<b.numBytes){e=new Uint8Array(Math.ceil(a/8));q=new DataView(c,d,b.numBytes);c=q.getInt16(0,!0);var t=2,u=0,g=0;do{if(0<c)for(;c--;)e[u++]=q.getUint8(t++);else for(g=q.getUint8(t++),c=-c;c--;)e[u++]=g;c=q.getInt16(t,!0);t+=2}while(t<b.numBytes);if(-32768!==c||u<e.length)throw"Unexpected end of mask RLE encoding";q=new Uint8Array(a);for(t=t=c=0;t<a;t++)t&7?(c=e[t>>3],c<<=t&7):c=e[t>>3],c&128&&(q[t]=1);h.pixels.resultMask=q;b.bitset=e;d+=b.numBytes}h.ptr=d;h.mask=b;return!0},readDataOneSweep:function(c,
h,d,b){var a=h.ptr,e=h.headerInfo,q=e.numDims,t=e.width*e.height;e=e.numValidPixel*J.getDataTypeSize(e.imageType)*q;var u=h.pixels.resultMask;if(d===Uint8Array)c=new Uint8Array(c,a,e);else{var g=new ArrayBuffer(e);(new Uint8Array(g)).set(new Uint8Array(c,a,e));c=new d(g)}if(c.length===t*q)h.pixels.resultPixels=b?J.swapDimensionOrder(c,t,q,d,!0):c;else{h.pixels.resultPixels=new d(t*q);var m=g=d=0,v=0;if(1<q)if(b)for(g=0;g<t;g++){if(u[g])for(v=g,m=0;m<q;m++,v+=t)h.pixels.resultPixels[v]=c[d++]}else for(g=
0;g<t;g++){if(u[g])for(v=g*q,m=0;m<q;m++)h.pixels.resultPixels[v+m]=c[d++]}else for(g=0;g<t;g++)u[g]&&(h.pixels.resultPixels[g]=c[d++])}h.ptr=a+e;return!0},readHuffmanTree:function(c,h){var d=this.HUFFMAN_LUT_BITS_MAX,b=new DataView(c,h.ptr,16);h.ptr+=16;if(2>b.getInt32(0,!0))throw"unsupported Huffman version";var a=b.getInt32(4,!0),e=b.getInt32(8,!0);b=b.getInt32(12,!0);if(e>=b)return!1;var q=new Uint32Array(b-e);J.decodeBits(c,h,q);var t=[],u;for(u=e;u<b;u++){var g=u-(u<a?0:a);t[g]={first:q[u-e],
second:null}}u=c.byteLength-h.ptr;q=new ArrayBuffer(4*Math.ceil(u/4));(new Uint8Array(q)).set(new Uint8Array(c,h.ptr,u));c=new Uint32Array(q);h=0;q=0;var m=c[0];for(u=e;u<b;u++){g=u-(u<a?0:a);var v=t[g].first;0<v&&(t[g].second=m<<h>>>32-v,32-h>=v?(h+=v,32===h&&(h=0,q++,m=c[q])):(h+=v-32,q++,m=c[q],t[g].second|=m>>>32-h))}var p=m=0,l=new f;for(u=0;u<t.length;u++)void 0!==t[u]&&(m=Math.max(m,t[u].first));p=m>=d?d:m;d=[];var n;for(u=e;u<b;u++)if(g=u-(u<a?0:a),v=t[g].first,0<v)if(e=[v,g],v<=p){g=t[g].second<<
p-v;var k=1<<p-v;for(v=0;v<k;v++)d[g|v]=e}else for(g=t[g].second,k=l,--v;0<=v;v--)(n=g>>>v&1)?(k.right||(k.right=new f),k=k.right):(k.left||(k.left=new f),k=k.left),0!==v||k.val||(k.val=e[1]);return{decodeLut:d,numBitsLUTQick:p,numBitsLUT:m,tree:l,stuffedData:c,srcPtr:q,bitPos:h}},readHuffman:function(c,h,d,b){var a=h.headerInfo.numDims,e=h.headerInfo.height,q=h.headerInfo.width,t=q*e,u=this.readHuffmanTree(c,h);c=u.decodeLut;var g=u.tree,m=u.stuffedData,v=u.srcPtr,p=u.bitPos,l=u.numBitsLUTQick;u=
u.numBitsLUT;var n=0===h.headerInfo.imageType?128:0,k=h.pixels.resultMask,r,w,x,D,G,F,A=0;0<p&&(v++,p=0);var y=m[v],z=1===h.encodeMode,B=new d(t*a),C=B,H;if(2>a||z)for(H=0;H<a;H++)if(1<a&&(C=new d(B.buffer,t*H,t),A=0),h.headerInfo.numValidPixel===q*e)for(x=G=0;x<e;x++)for(D=0;D<q;D++,G++){var E=0;var K=r=y<<p>>>32-l;32-p<l&&(K=r|=m[v+1]>>>64-p-l);if(c[K])E=c[K][1],p+=c[K][0];else for(K=r=y<<p>>>32-u,32-p<u&&(K=r|=m[v+1]>>>64-p-u),K=g,F=0;F<u;F++)if(K=(w=r>>>u-F-1&1)?K.right:K.left,!K.left&&!K.right){E=
K.val;p=p+F+1;break}32<=p&&(p-=32,v++,y=m[v]);E-=n;z?(E=0<D?E+A:0<x?E+C[G-q]:E+A,E&=255,A=C[G]=E):C[G]=E}else for(x=G=0;x<e;x++)for(D=0;D<q;D++,G++){if(k[G]){E=0;K=r=y<<p>>>32-l;32-p<l&&(K=r|=m[v+1]>>>64-p-l);if(c[K])E=c[K][1],p+=c[K][0];else for(K=r=y<<p>>>32-u,32-p<u&&(K=r|=m[v+1]>>>64-p-u),K=g,F=0;F<u;F++)if(K=(w=r>>>u-F-1&1)?K.right:K.left,!K.left&&!K.right){E=K.val;p=p+F+1;break}32<=p&&(p-=32,v++,y=m[v]);E-=n;z?(E=0<D&&k[G-1]?E+A:0<x&&k[G-q]?E+C[G-q]:E+A,E&=255,A=C[G]=E):C[G]=E}}else for(x=G=
0;x<e;x++)for(D=0;D<q;D++)if(G=x*q+D,!k||k[G])for(H=0;H<a;H++,G+=t){E=0;K=r=y<<p>>>32-l;32-p<l&&(K=r|=m[v+1]>>>64-p-l);if(c[K])E=c[K][1],p+=c[K][0];else for(K=r=y<<p>>>32-u,32-p<u&&(K=r|=m[v+1]>>>64-p-u),K=g,F=0;F<u;F++)if(K=(w=r>>>u-F-1&1)?K.right:K.left,!K.left&&!K.right){E=K.val;p=p+F+1;break}32<=p&&(p-=32,v++,y=m[v]);E-=n;C[G]=E}h.ptr=h.ptr+4*(v+1)+(0<p?4:0);h.pixels.resultPixels=B;1<a&&!b&&(h.pixels.resultPixels=J.swapDimensionOrder(B,t,a,d))},decodeBits:function(c,h,d,b,a){var e=h.headerInfo,
q=e.fileVersion,t=0,u=new DataView(c,h.ptr,5<=c.byteLength-h.ptr?5:c.byteLength-h.ptr),g=u.getUint8(0);t++;var m=g>>6,v=0===m?4:3-m,p=0<(g&32)?!0:!1;m=g&31;g=0;if(1===v)g=u.getUint8(t),t++;else if(2===v)g=u.getUint16(t,!0),t+=2;else if(4===v)g=u.getUint32(t,!0),t+=4;else throw"Invalid valid pixel count type";v=2*e.maxZError;a=1<e.numDims?e.maxValues[a]:e.zMax;if(p){h.counter.lut++;p=u.getUint8(t);t++;e=Math.ceil((p-1)*m/8);var l=Math.ceil(e/4);l=new ArrayBuffer(4*l);var n=new Uint8Array(l);h.ptr+=
t;n.set(new Uint8Array(c,h.ptr,e));t=new Uint32Array(l);h.ptr+=e;for(u=0;p-1>>>u;)u++;e=Math.ceil(g*u/8);l=Math.ceil(e/4);l=new ArrayBuffer(4*l);n=new Uint8Array(l);n.set(new Uint8Array(c,h.ptr,e));c=new Uint32Array(l);h.ptr+=e;h=3<=q?S.unstuffLUT2(t,m,p-1,b,v,a):S.unstuffLUT(t,m,p-1,b,v,a);3<=q?S.unstuff2(c,d,u,g,h):S.unstuff(c,d,u,g,h)}else h.counter.bitstuffer++,u=m,h.ptr+=t,0<u&&(e=Math.ceil(g*u/8),l=Math.ceil(e/4),l=new ArrayBuffer(4*l),n=new Uint8Array(l),n.set(new Uint8Array(c,h.ptr,e)),c=
new Uint32Array(l),h.ptr+=e,3<=q?null==b?S.originalUnstuff2(c,d,u,g):S.unstuff2(c,d,u,g,!1,b,v,a):null==b?S.originalUnstuff(c,d,u,g):S.unstuff(c,d,u,g,!1,b,v,a))},readTiles:function(c,h,d,b){var a=h.headerInfo,e=a.width,q=a.height,t=e*q,u=a.microBlockSize,g=a.imageType,m=J.getDataTypeSize(g),v=Math.ceil(e/u),p=Math.ceil(q/u);h.pixels.numBlocksY=p;h.pixels.numBlocksX=v;var l=h.pixels.ptr=0,n=0,k=0,r=0,w=0,x=0,D=0,G=0,F=l=0,A=0,y=0,z=D=0;D=D=0;var B=new d(u*u);q=q%u||u;var C=e%u||u,H=a.numDims,E,K=
h.pixels.resultMask,I=h.pixels.resultPixels,L=5<=a.fileVersion?14:15,M=a.zMax;for(k=0;k<p;k++)for(w=k!==p-1?u:q,r=0;r<v;r++)for(x=r!==v-1?u:C,A=k*e*u+r*u,y=e-x,E=0;E<H;E++){1<H?(z=I,A=k*e*u+r*u,I=new d(h.pixels.resultPixels.buffer,t*E*m,t),M=a.maxValues[E]):z=null;D=c.byteLength-h.ptr;n=new DataView(c,h.ptr,Math.min(10,D));var N={};D=0;G=n.getUint8(0);D++;var P=5<=a.fileVersion?G&4:0;l=G>>6&255;F=G>>2&L;if(F!==(r*u>>3&L))throw"integrity issue";if(P&&0===E)throw"integrity issue";G&=3;if(3<G)throw h.ptr+=
D,"Invalid block encoding ("+G+")";if(2===G){if(P)if(K)for(l=0;l<w;l++)for(n=0;n<x;n++)K[A]&&(I[A]=z[A]),A++;else for(l=0;l<w;l++)for(n=0;n<x;n++)I[A]=z[A],A++;h.counter.constant++;h.ptr+=D}else if(0===G){if(P)throw"integrity issue";h.counter.uncompressed++;h.ptr+=D;D=w*x*m;z=c.byteLength-h.ptr;D=D<z?D:z;z=new ArrayBuffer(0===D%m?D:D+m-D%m);P=new Uint8Array(z);P.set(new Uint8Array(c,h.ptr,D));z=new d(z);D=0;if(K)for(l=0;l<w;l++){for(n=0;n<x;n++)K[A]&&(I[A]=z[D++]),A++;A+=y}else for(l=0;l<w;l++){for(n=
0;n<x;n++)I[A++]=z[D++];A+=y}h.ptr+=D*m}else if(l=J.getDataTypeUsed(P&&6>g?4:g,l),N=J.getOnePixel(N,D,l,n),D+=J.getDataTypeSize(l),3===G)if(h.ptr+=D,h.counter.constantoffset++,K)for(l=0;l<w;l++){for(n=0;n<x;n++)K[A]&&(I[A]=P?Math.min(M,z[A]+N):N),A++;A+=y}else for(l=0;l<w;l++){for(n=0;n<x;n++)I[A]=P?Math.min(M,z[A]+N):N,A++;A+=y}else if(h.ptr+=D,J.decodeBits(c,h,B,N,E),D=0,P)if(K)for(l=0;l<w;l++){for(n=0;n<x;n++)K[A]&&(I[A]=B[D++]+z[A]),A++;A+=y}else for(l=0;l<w;l++){for(n=0;n<x;n++)I[A]=B[D++]+z[A],
A++;A+=y}else if(K)for(l=0;l<w;l++){for(n=0;n<x;n++)K[A]&&(I[A]=B[D++]),A++;A+=y}else for(l=0;l<w;l++){for(n=0;n<x;n++)I[A++]=B[D++];A+=y}}1<H&&!b&&(h.pixels.resultPixels=J.swapDimensionOrder(h.pixels.resultPixels,t,H,d))},formatFileInfo:function(c){return{fileIdentifierString:c.headerInfo.fileIdentifierString,fileVersion:c.headerInfo.fileVersion,imageType:c.headerInfo.imageType,height:c.headerInfo.height,width:c.headerInfo.width,numValidPixel:c.headerInfo.numValidPixel,microBlockSize:c.headerInfo.microBlockSize,
blobSize:c.headerInfo.blobSize,maxZError:c.headerInfo.maxZError,pixelType:J.getPixelType(c.headerInfo.imageType),eofOffset:c.eofOffset,mask:c.mask?{numBytes:c.mask.numBytes}:null,pixels:{numBlocksX:c.pixels.numBlocksX,numBlocksY:c.pixels.numBlocksY,maxValue:c.headerInfo.zMax,minValue:c.headerInfo.zMin,noDataValue:c.noDataValue}}},constructConstantSurface:function(c,h){var d=c.headerInfo.zMax,b=c.headerInfo.zMin,a=c.headerInfo.maxValues,e=c.headerInfo.numDims,q=c.headerInfo.height*c.headerInfo.width,
t=0,u=0,g=0,m=c.pixels.resultMask;c=c.pixels.resultPixels;if(m)if(1<e)if(h)for(t=0;t<e;t++)for(g=t*q,d=a[t],u=0;u<q;u++)m[u]&&(c[g+u]=d);else for(u=0;u<q;u++){if(m[u])for(g=u*e,t=0;t<e;t++)c[g+e]=a[t]}else for(u=0;u<q;u++)m[u]&&(c[u]=d);else if(1<e&&b!==d)if(h)for(t=0;t<e;t++)for(g=t*q,d=a[t],u=0;u<q;u++)c[g+u]=d;else for(u=0;u<q;u++)for(g=u*e,t=0;t<e;t++)c[g+t]=a[t];else for(u=0;u<q*e;u++)c[u]=d},getDataTypeArray:function(c){switch(c){case 0:c=Int8Array;break;case 1:c=Uint8Array;break;case 2:c=Int16Array;
break;case 3:c=Uint16Array;break;case 4:c=Int32Array;break;case 5:c=Uint32Array;break;case 6:c=Float32Array;break;case 7:c=Float64Array;break;default:c=Float32Array}return c},getPixelType:function(c){switch(c){case 0:c="S8";break;case 1:c="U8";break;case 2:c="S16";break;case 3:c="U16";break;case 4:c="S32";break;case 5:c="U32";break;case 6:c="F32";break;case 7:c="F64";break;default:c="F32"}return c},isValidPixelValue:function(c,h){if(null==h)return!1;switch(c){case 0:c=-128<=h&&127>=h;break;case 1:c=
0<=h&&255>=h;break;case 2:c=-32768<=h&&32767>=h;break;case 3:c=0<=h&&65536>=h;break;case 4:c=-2147483648<=h&&2147483647>=h;break;case 5:c=0<=h&&4294967296>=h;break;case 6:c=-3.4027999387901484E38<=h&&3.4027999387901484E38>=h;break;case 7:c=4.9E-324<=h&&1.7976931348623157E308>=h;break;default:c=!1}return c},getDataTypeSize:function(c){var h=0;switch(c){case 0:case 1:h=1;break;case 2:case 3:h=2;break;case 4:case 5:case 6:h=4;break;case 7:h=8;break;default:h=c}return h},getDataTypeUsed:function(c,h){var d=
c;switch(c){case 2:case 4:d=c-h;break;case 3:case 5:d=c-2*h;break;case 6:d=0===h?c:1===h?2:1;break;case 7:d=0===h?c:c-2*h+1;break;default:d=c}return d},getOnePixel:function(c,h,d,b){c=0;switch(d){case 0:c=b.getInt8(h);break;case 1:c=b.getUint8(h);break;case 2:c=b.getInt16(h,!0);break;case 3:c=b.getUint16(h,!0);break;case 4:c=b.getInt32(h,!0);break;case 5:c=b.getUInt32(h,!0);break;case 6:c=b.getFloat32(h,!0);break;case 7:c=b.getFloat64(h,!0);break;default:throw"the decoder does not understand this pixel type";
}return c},swapDimensionOrder:function(c,h,d,b,a){var e=0,q=0,t=0,u=0,g=c;if(1<d)if(g=new b(h*d),a)for(e=0;e<h;e++)for(u=e,t=0;t<d;t++,u+=h)g[u]=c[q++];else for(e=0;e<h;e++)for(u=e,t=0;t<d;t++,u+=h)g[q++]=c[u];return g}},f=function(c,h,d){this.val=c;this.left=h;this.right=d};return{decode:function(c,h){h=h||{};var d=h.noDataValue,b=0,a={};a.ptr=h.inputOffset||0;a.pixels={};if(J.readHeaderInfo(c,a)){b=a.headerInfo;var e=b.fileVersion,q=J.getDataTypeArray(b.imageType);if(5<e)throw"unsupported lerc version 2."+
e;J.readMask(c,a);b.numValidPixel===b.width*b.height||a.pixels.resultMask||(a.pixels.resultMask=h.maskData);var t=b.width*b.height;a.pixels.resultPixels=new q(t*b.numDims);a.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var u=!h.returnPixelInterleavedDims;if(0!==b.numValidPixel)if(b.zMax===b.zMin)J.constructConstantSurface(a,u);else if(4<=e&&J.checkMinMaxRanges(c,a))J.constructConstantSurface(a,u);else{var g=new DataView(c,a.ptr,2),m=g.getUint8(0);a.ptr++;if(m)J.readDataOneSweep(c,
a,q,u);else if(1<e&&1>=b.imageType&&1E-5>Math.abs(b.maxZError-.5)){g=g.getUint8(1);a.ptr++;a.encodeMode=g;if(2<g||4>e&&1<g)throw"Invalid Huffman flag "+g;g?J.readHuffman(c,a,q,u):J.readTiles(c,a,q,u)}else J.readTiles(c,a,q,u)}a.eofOffset=a.ptr;h.inputOffset?(c=a.headerInfo.blobSize+h.inputOffset-a.ptr,1<=Math.abs(c)&&(a.eofOffset=h.inputOffset+a.headerInfo.blobSize)):(c=a.headerInfo.blobSize-a.ptr,1<=Math.abs(c)&&(a.eofOffset=a.headerInfo.blobSize));c={width:b.width,height:b.height,pixelData:a.pixels.resultPixels,
minValue:b.zMin,maxValue:b.zMax,validPixelCount:b.numValidPixel,dimCount:b.numDims,dimStats:{minValues:b.minValues,maxValues:b.maxValues},maskData:a.pixels.resultMask};if(a.pixels.resultMask&&J.isValidPixelValue(b.imageType,d)){e=a.pixels.resultMask;for(b=0;b<t;b++)e[b]||(c.pixelData[b]=d);c.noDataValue=d}a.noDataValue=d;h.returnFileInfo&&(c.fileInfo=J.formatFileInfo(a));return c}},getBandCount:function(c){for(var h=0,d=0,b={ptr:0,pixels:{}};d<c.byteLength-58;)J.readHeaderInfo(c,b),d+=b.headerInfo.blobSize,
h++,b.ptr=d;return h}}})},"esri/layers/pixelFilters/VectorFieldPixelFilter":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../../kernel ../../lang dojo/_base/array".split(" "),function(S,J,f,c,h,d){S=S(null,{declaredClass:"esri.layers.pixelFilters.VectorFieldPixelFilter",speedUnits:["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"],constructor:function(b){J.mixin(this,b);this.isDataUV=b&&b.isDataUV?b.isDataUV:!1;this.computeMagnitudeAndDirection=
J.hitch(this,this.computeMagnitudeAndDirection);this.unitConversionFactor=1;this._updateUnitConvFactor()},setUnits:function(b,a){this.inputUnit=b;this.outputUnit=a;this.unitConversionFactor=1;this._updateUnitConvFactor()},_updateUnitConvFactor:function(){var b=d.indexOf(this.speedUnits,this.inputUnit),a=d.indexOf(this.speedUnits,this.outputUnit);if(this.inputUnit&&this.outputUnit&&0<=b&&0<=a){var e=[1,.277778,.514444,.3048,.44704,0];this.unitConversionFactor=e[b]/e[a]}},computeMagnitudeAndDirection:function(b){if(!h.isDefined(b))throw"Could not compute magnitude and direction. No pixel data is available.";
var a=b.pixelBlock;if(!h.isDefined(a)||2!==a.getPlaneCount())throw"Could not compute magnitude and direction. Pixel data does not contain two bands.";var e=b.extent,q=(e.xmax-e.xmin)/a.width,t=(e.ymax-e.ymin)/a.height,u=e.xmin+q/2;e=e.ymax-t/2;a.statistics[0].minValue=0;a.statistics[0].maxValue=0;var g=180/Math.PI,m=[],v=0,p=0,l=0,n=!h.isDefined(a.mask),k,r,w,x;var D=w=Infinity;var G=x=-Infinity;for(v=0;v<a.height;v++)for(p=0;p<a.width;p++,l++)if(m.push([u+q*p,e-t*v]),n||a.mask[l]){var F=k=a.pixels[0][l];
var A=r=a.pixels[1][l];this.isDataUV&&(F=Math.sqrt(k*k+r*r),A=90-g*Math.atan2(r,k));a.pixels[0][l]=F*this.unitConversionFactor;a.pixels[1][l]=A;F>G&&(G=F);F<D&&(D=F);A>x&&(x=A);A<w&&(w=A)}a.statistics[0].maxValue=G;a.statistics[0].minValue=D;a.statistics[1].maxValue=x;a.statistics[1].minValue=w;b.locations=m;return b}});J.setObject("layers.pixelFilters.VectorFieldPixelFilter",S,c);return S})},"esri/layers/rasterFormats/ImageCanvasDecoder":function(){define(["require","dojo/_base/declare","dojo/Deferred",
"dojo/sniff"],function(S,J,f,c){var h;return J(null,{constructor:function(d){this.ctx=d.ctx;this._loadRasterFormatModule()},decode:function(d,b){if(!b.width||!b.height)throw"Native decoding requires the image format, width and height";var a=new f,e,q=new Uint8Array(d);d=this._getFormat(d);if("error"===d)throw"invalid format";"jpeg"===d&&(e=this._getMask(q,b));var t="",u;for(u=0;u<q.length;u+=65535){var g=q.subarray(u,u+65535>q.length-1?q.length-1:u+65535);t+=String.fromCharCode.apply(null,g)}q="data:image/"+
d+";base64,"+window.btoa(t);var m=new Image,v;m.src=q;var p=this;m.onload=function(){p.ctx.clearRect(0,0,b.width,b.height);p.ctx.drawImage(m,0,0);var l=p.ctx.getImageData(0,0,m.width,m.height);v=l.data;if(e)for(u=0;u<e.length;u++)v[4*u+3]=e[u]?255:0;p.ctx.putImageData(l,0,0);a.resolve(null)};m.onerror=function(){a.reject("cannot load image")};return a},_getFormat:function(d){d=new Uint8Array(d,0,10);var b="error";255===d[0]&&216===d[1]?b="jpeg":137===d[0]&&80===d[1]&&78===d[2]&&71===d[3]&&(b="png");
return b},_getMask:function(d,b){try{if(!h)throw"The zlib decoder module is not loaded.";var a=0,e=0,q=Math.round(d.length/2);1===q%2&&(q+=1);var t=d.length-2;for(a=q;a<t&&(255!==d[a]||217!==d[a+1]);a++);q=a+=2;if(q<d.length-1){var u=(new h(d.subarray(q))).getBytes();var g=new Uint8Array(b.width*b.height);for(a=d=0;a<u.length;a++)for(e=7;0<=e;e--)g[d++]=u[a]>>e&1}}catch(m){}return g},_loadRasterFormatModule:function(){10>c("ie")||S(["./Zlib"],function(d){h=d})}})})},"esri/tasks/ImageServiceIdentifyTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../request ../geometry/normalizeUtils ./Task ./ImageServiceIdentifyResult".split(" "),
function(S,J,f,c,h,d,b,a){S=S(b,{declaredClass:"esri.tasks.ImageServiceIdentifyTask",constructor:function(e){this._url.path+="/identify";this._handler=J.hitch(this,this._handler)},__msigns:[{n:"execute",c:3,a:[{i:0,p:["geometry"]}],e:2}],_handler:function(e,q,t,u,g){try{var m=new a(e);this._successHandler([m],"onComplete",t,g)}catch(v){this._errorHandler(v,u,g)}},execute:function(e,q,t,u){var g=u.assembly;e=this._encode(J.mixin({},this._url.query,{f:"json"},e.toJson(g&&g[0])));var m=this._handler,
v=this._errorHandler;return h({url:this._url.path,content:e,callbackParamName:"callback",load:function(p,l){m(p,l,q,t,u.dfd)},error:function(p){v(p,t,u.dfd)}})},onComplete:function(){}});d._createWrappers(S);J.setObject("tasks.ImageServiceIdentifyTask",S,c);return S})},"esri/tasks/ImageServiceIdentifyResult":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../geometry/jsonUtils ./FeatureSet".split(" "),function(S,J,f,c,h,d){S=S(null,{declaredClass:"esri.tasks.ImageServiceIdentifyResult",
constructor:function(b){b.catalogItems&&(this.catalogItems=new d(b.catalogItems));b.location&&(this.location=h.fromJson(b.location));this.catalogItemVisibilities=b.catalogItemVisibilities;this.name=b.name;this.objectId=b.objectId;this.value=b.value;this.processedValues=b.processedValues;this.properties=b.properties}});J.setObject("tasks.ImageServiceIdentifyResult",S,c);return S})},"esri/tasks/ImageServiceIdentifyParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/_base/array dojo/has ../kernel ../lang ../geometry/jsonUtils".split(" "),
function(S,J,f,c,h,d,b,a){S=S(null,{declaredClass:"esri.tasks.ImageServiceIdentifyParameters",geometry:null,mosaicRule:null,renderingRule:null,renderingRules:null,pixelSizeX:null,pixelSizeY:null,pixelSize:null,returnGeometry:!1,returnCatalogItems:!0,timeExtent:null,maxItemCount:null,returnPixelValues:!0,toJson:function(e){var q=e&&e.geometry||this.geometry;e={geometry:q,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,mosaicRule:this.mosaicRule?f.toJson(this.mosaicRule.toJson()):
null,renderingRule:this.renderingRule?f.toJson(this.renderingRule.toJson()):null};q&&(e.geometryType=a.getJsonType(q));q=this.timeExtent;e.time=q?q.toJson().join(","):null;b.isDefined(this.pixelSizeX)&&b.isDefined(this.pixelSizeY)?e.pixelSize=f.toJson({x:parseFloat(this.pixelSizeX),y:parseFloat(this.pixelSizeY)}):this.pixelSize&&(e.pixelSize=this.pixelSize?f.toJson(this.pixelSize.toJson()):null);this.renderingRules&&(e.renderingRules=f.toJson(c.map(this.renderingRules,function(t){return t.toJson()})));
b.isDefined(this.returnPixelValues)&&(e.returnPixelValues=this.returnPixelValues);b.isDefined(this.maxItemCount)&&(e.maxItemCount=this.maxItemCount);return e}});J.setObject("tasks.ImageServiceIdentifyParameters",S,d);return S})},"esri/layers/ArcGISImageServiceVectorLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/json dojo/sniff ../kernel ../lang ./GraphicsLayer ./ImageServiceLayerMixin ./pixelFilters/VectorFieldPixelFilter ../renderers/VectorFieldRenderer ../geometry/Point ../geometry/Extent ../graphic dojox/gfx".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v){S=S([a,e],{declaredClass:"esri.layers.ArcGISImageServiceVectorLayer",constructor:function(p,l){this.symbolTileSize=l&&l.symbolTileSize?l.symbolTileSize:50;this._maxMag=this._minMag=null;var n=J.clone(this._params);delete n.imageServiceParameters;delete n.pixelFilter;delete n.rendererStyle;delete n.symbolTileSize;this._initialize(p,l);this.renderer||this.setVectorRendererStyle(l&&l.rendererStyle?l.rendererStyle:t.STYLE_SINGLE_ARROW);this.geometryType="esriGeometryPoint";
this.symbolTileSizeUnits="Pixels";J.mixin(this._params,n)},getField:function(p){return this._getField(p,!0)},setVectorRendererStyle:function(p){this.rendererStyle=p;this._updateVectorFieldRenderer();this.useDefaultRenderer=!0},setRenderer:function(p){p&&(this.vectorFieldPixelFilter=this.vectorFieldPixelFilter||new q,this.vectorFieldPixelFilter.setUnits(p.inputUnit,p.outputUnit));this.useDefaultRenderer=!1;this.inherited(arguments)},getFlowRepresentation:function(){return this.renderer&&this.renderer.flowRepresentation||
this._vectorFlowRepresentation},onResume:function(){this.inherited(arguments);this._toggleTime()},onSuspend:function(){this.inherited(arguments);this._toggleTime()},_fixSymbolTileSize:function(){this.renderer&&(this.renderer.symbolTileSize?this.symbolTileSize=this.renderer.symbolTileSize:this.renderer.symbolTileSize=this.symbolTileSize)},_refresh:function(p){if(10>h("ie"))this.onError(Error("Unable to refresh. This layer is not supported in the current browser."));else if(this._map){this._fixSymbolTileSize();
this.setImageFormat("LERC",!0);p=this.fullExtent&&this.fullExtent.xmin;var l=this.fullExtent&&this.fullExtent.ymax,n=J.clone(this._map.extent),k=1/this.symbolTileSize*this._map.width;k=k?Math.ceil(k):50;var r=1/this.symbolTileSize*this._map.height;r=r?Math.ceil(r):Math.ceil((n.ymax-n.ymin)/(n.xmax-n.xmin)*k);var w=(n.xmax-n.xmin)/k,x=(n.ymax-n.ymin)/r;n.xmin=p+Math.floor((n.xmin-p)/w)*w;n.xmax=p+Math.ceil((n.xmax-p)/w)*w;n.ymin=l+Math.floor((n.ymin-l)/x)*x;n.ymax=l+Math.ceil((n.ymax-l)/x)*x;this._requestData(n,
k,r)}},_drawPixelData:function(){this.clear();if(this.pixelData){var p=this.pixelData.pixelBlock,l=this.pixelData.extent,n=this.pixelData.locations,k=b.isDefined(p.mask)&&0<p.mask.length;if(p&&l&&n){if(this.useDefaultRenderer&&this.renderer&&(!b.isDefined(this._minMag)||!b.isDefined(this._maxMag))){var r=this._getServiceMinMaxStats();r?(this._minMag=r.min,this._maxMag=r.max):(this._minMag=p.statistics[0].minValue,this._maxMag=p.statistics[0].maxValue);r={type:"sizeInfo",minSize:v.px2pt(.2*this.symbolTileSize),
maxSize:v.px2pt(.8*this.symbolTileSize),minDataValue:this._minMag,maxDataValue:this._maxMag};var w=[];w.push(r);w.push({type:"colorInfo"});this.renderer.setVisualVariables(w)}var x=w=r=0,D=l.spatialReference?l.spatialReference._getInfo():null;for(r=0;r<p.height;r++)for(w=0;w<p.width;w++,x++){var G=n[x];if((!k||p.mask[x])&&G&&2===G.length){G=new u(G[0],G[1],l.spatialReference);D&&(G.x=g.prototype._normalizeX(G.x,D).x);var F={Magnitude:p.pixels[0][x],Direction:p.pixels[1][x],Location:c.toJson(G.toJson())};
G=new m(G,null,F);this.add(G)}}}}},_getServiceMinMaxStats:function(){if(!b.isDefined(this.minValues)||!b.isDefined(this.maxValues)||2>this.minValues.length||2>this.maxValues.length)return null;var p=this.minValues[0],l=this.maxValues[0],n=this.minValues[1],k=this.maxValues[1];if(this.pixelFilter&&p&&l&&n&&k){var r=[];r.push([p,l]);r.push([n,k]);n=this._createPixelData(r);this.pixelFilter(n);n&&n.pixelBlock&&n.pixelBlock.pixels&&0<n.pixelBlock.pixels.length&&(p=n.pixelBlock.pixels[0][0],l=n.pixelBlock.pixels[0][1])}return p&&
l?{min:p,max:l}:null},_updateVectorFieldRenderer:function(){var p={type:"sizeInfo",minSize:v.px2pt(.2*this.symbolTileSize),maxSize:v.px2pt(.8*this.symbolTileSize),minDataValue:this._minMag,maxDataValue:this._maxMag},l=[];l.push(p);p=new t({style:this.rendererStyle,visualVariables:l,flowRepresentation:this._vectorFlowRepresentation});this.setRenderer(p)},_getField:function(p,l){if(b.isDefined(p))return l&&(p=p.toLowerCase()),"magnitude"!==p&&"direction"!==p?null:{name:p,alias:p,domain:null,editable:!1,
length:50,type:"esriFieldTypeDouble"}},_requestDataErrorHandler:function(p){"CancelError"!==p.name&&(this.clear(),this.onError(p))},_setFlowRepresentation:function(p){this.renderer&&this.renderer.flowRepresentation?this._vectorFlowRepresentation=this.renderer.flowRepresentation:p&&this.renderer&&b.isDefined(p.FlowDirection)&&p.FlowDirection&&(this._vectorFlowRepresentation="oceanographic"===p.FlowDirection.toLowerCase()?this.renderer.FLOW_TO:this.renderer.FLOW_FROM);this.renderer&&(this.renderer.flowRepresentation=
this._vectorFlowRepresentation)}});J.setObject("layers.ArcGISImageServiceVectorLayer",S,d);return S})},"arcgisonline/map/popup/isTiledImageServiceLayer":function(){define(["esri/layers/RasterXLayer"],function(S){return function(J){return J instanceof esri.layers.RasterXLayer}})},"esri/layers/RasterXLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/array dojo/_base/Deferred dojo/sniff dojo/dom-construct dojo/dom-style dojo/on dojox/gfx/matrix dojo/when dojo/DeferredList ../kernel ../config ../lang ../domUtils ../urlUtils ../graphic ../request ../renderers/ClassBreaksRenderer ../renderers/StretchRenderer ../renderers/UniqueValueRenderer ../renderers/ColormapRenderer ../renderers/ShadedReliefRenderer ../geometry/Extent ../SpatialReference ../geometry/Point ./Field ./TimeInfo ./MosaicRule ./DimensionalDefinition ./PixelBlock ./ImageServiceLayerMixin ./rasterLib/function/StretchFunction ./rasterLib/raster/rasterFactory ./rasterLib/raster/rasterProjectionHelper ./rasterLib/renderer/rasterRendererHelper ./rasterLib/tile/RasterTileInfo ./rasterLib/tile/RasterTileManager ./rasterLib/tile/RasterHandler ./layer".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E,K,I,L,M,N,P,R,Y,ja){var aa=m.defaults.map.zoomDuration;S=S([ja],{declaredClass:"esri.layers.RasterXLayer",managedSuspension:!0,opacity:1,tileMode:!0,useWebGL:!0,drawMode:!0,_eventMap:{"raster-change":!0,"renderer-change":!0},_lastPopup:[],_rasterFieldPrefix:"Raster.",_cachedVariableStats:{},_cachedVariableHistogram:{},constructor:function(da,ra){ra=ra||{};this.tileMode=null!=ra.tileMode?ra.tileMode:this.tileMode;this.useWebGL=
null!=ra.useWebGL?ra.useWebGL:this.useWebGL;this.roaming=null!=ra.roaming?ra.roaming:this.roaming;this.drawMode=null!=ra.drawMode?ra.drawMode:this.drawMode;this.bandIds=ra.bandIds&&0<ra.bandIds.length?ra.bandIds:null;this.renderer=ra.renderer;this._customModules=ra.customModules;this.useMapTime=null!=ra.useMapTime?ra.useMapTime:!0;if(ra.multidimensionalDefinition&&0<ra.multidimensionalDefinition.length){var ca=new C;ca.multidimensionalDefinition=ra.multidimensionalDefinition.map(function(fa){return fa.toJson?
fa:new H(fa)});ca.method=C.METHOD_NONE;this.mosaicRule=ca}this.infoTemplate=ra.infoTemplate;this.drawMode||(this._contextType=ra._contextType||ra.drawType);this._supportLegacyPropMethods=!1!==ra.legacySupport;this._rasterHandler=new Y({customModules:this._customModules});this._workInitPromise=this._rasterHandler.start();this.pixelData=null;this._initialize(da,ra);e(this,"load",J.hitch(this,function(){t(this._rasterHandler._connected||this._rasterHandler._connectionPromise,J.hitch(this,function(){this._rasterHandler.setLayer({layerId:this.id,
raster:{rasterInfo:this.raster.rasterInfo,rasterFunction:this.raster.rasterFunction&&this.raster.rasterFunction.toJson()},bandCount:this.raster.rasterInfo.bandCount});this.raster.rasterFunction&&this._rasterHandler.setRasterFunction({layerId:this.id,data:this.raster.rasterFunction.toJson(!0)});this._rasterRenderer&&this._rasterHandler.setRasterRenderer({layerId:this.id,data:this._rasterRenderer.toJson(!0)})}))}));this._animatePan2d=J.hitch(this,this._animatePan2d)},setOpacity:function(da){this.opacity!==
da&&(this.opacity=da,this.onOpacityChange(da))},onOpacityChange:function(){},onRendererChange:function(){},refresh:function(){if(this.loaded&&this._map)if(!this._canDraw()||10>d("ie"))this.onError(Error("Unable to refresh. This layer is not supported in the current browser."));else this._map&&this._extentChangeHandler(this._map.extent)},clear:function(da,ra,ca,fa){this._canDraw()&&(this.useWebGL||(ca?this._context.clearRect(da,ra,ca,fa):this._context.clearRect(0,0,this._map.width,this._map.height)))},
getContext:function(){return this._context},onResume:function(){this.inherited(arguments);this._toggleTime();p.show(this._div);if("css-transforms"===this._map.navigationMode){var da=this._map.__visibleDelta;this._left=this._tdx=da.x;this._top=this._tdy=da.y;a.set(this._div,g._css.names.transform,g._css.translate(this._left,this._top))}this._displayTimer=this._displayTimer||setTimeout(J.hitch(this,function(){this._extentChangeHandler(this._map.extent,null,!0)}),0)},onSuspend:function(){this.inherited(arguments);
this._fireUpdateEnd();this._toggleTime();p.hide(this._div);clearTimeout(this._displayTimer);this._displayTimer=null},redraw:function(){this.useWebGL&&this._glSetting&&(this._glSetting.hasNewTexture=!1);var da=this.tileMode?this.tileManager.originalPixelData:this.originalPixelData;if(this.tileMode?da&&(da.src||da.texture):da)if(this.tileMode)if(this.useWebGL)this._updateAllTilesOnce(da);else{this.tileManager.tiles.forEach(function(ca){ca&&(ca.update=null,ca.completed=!1,ca.processedPixelBlock=null,
ca.renderedPixelBlock=null)});da.processedPixelBlock=null;var ra=this.raster.rasterFunction?this.raster.rasterFunction.read(da):{extent:da.extent,pixelBlock:da.src[this.tileManager.identifiers[0]]&&da.src[this.tileManager.identifiers[0]].pixelBlock};da.renderedPixelBlock=null;da=this._rasterRenderer?this._rasterRenderer.draw(ra):ra;this._drawOneFrame(da)}else this._supportLegacyPropMethods&&this.pixelFilter?this._setPixelData(this.originalPixelData):(da.processedPixelBlock=null,ra=this.raster.rasterFunction?
this.raster.rasterFunction.read(da):{extent:da.extent,pixelBlock:da.src?da.src[this.tileManager.identifiers[0]]&&da.src[this.tileManager.identifiers[0]].pixelBlock:da.pixelBlock},da.renderedPixelBlock=null,da=this._rasterRenderer?this._rasterRenderer.draw(ra):ra,this._drawOneFrame(da))},getCurrentResolution:function(){var da=this._map.extent;return new y((da.xmax-da.xmin)/this._map.width,(da.ymax-da.ymin)/this._map.height,da.spatialReference)},getCustomRasterFields:function(da){var ra=da?da.rasterAttributeTableFieldPrefix:
this._rasterFieldPrefix,ca={name:this._rasterFieldPrefix+"ServicePixelValue",alias:"Pixel Value",domain:null,editable:!1,length:50,type:10.3<=this.version?"esriFieldTypeDouble":"esriFieldTypeString"};da=this.fields?J.clone(this.fields):[];da.push(ca);(ca=this.rasterAttributeTable&&this.rasterAttributeTable.fields)&&0<ca.length&&(ca=c.filter(ca,function(fa){return"esriFieldTypeOID"!==fa.type&&"value"!==fa.name.toLowerCase()}),ca=c.map(ca,function(fa){var la=J.clone(fa);la.name=ra+fa.name;return la}),
da=da.concat(ca));return da},setRenderer:function(da,ra){if(this.loaded&&da){if(da.declaredClass&&-1<da.declaredClass.indexOf("esri.layers.rasterLib")){this._rasterRenderer=da;this._rasterRenderer.bind({layer:this});var ca=this.bandIds=da.bandIndex;this.raster&&this.raster.setFetchParameters({bandIds:ca});this._params&&(this._params.bandIds=ca&&0<ca.length?ca.join(","):null);this.renderer=this._getCommonRenderer(da)}else ca=J.clone(da.toJson?da.toJson():da),"rasterStretch"===ca.type&&(ca.bandIndex=
this.bandIds,ca.bandIndex&&1<ca.bandIndex.length||!ca.bandIndex&&this.raster&&1<this.raster.rasterInfo.bandCount)&&(ca.type="rgb"),this._rasterRenderer=N.create(ca),this.renderer=da.declaredClass?da:this._getCommonRenderer(this._rasterRenderer),this._rasterRenderer.bind({layer:this});if(this._map){if(this.loaded&&this._rasterHandler._connected){var fa=this._rasterHandler.setRasterRenderer({layerId:this.id,data:this._rasterRenderer.toJson(!0)});this._updateTilingEffects()}ra||(fa?fa.then(J.hitch(this,
function(){this.redraw()})):this.redraw());this.onRendererChange()}}},setBandIds:function(da,ra){this.bandIds=da;this.raster&&this.raster.setFetchParameters({bandIds:da});this._params&&(this._params.bandIds=da&&0<da.length?da.join(","):null);this.setRenderer(this.renderer,ra)},_setTime:function(da){da=da?da.toJson():null;this._params&&(this._params.time=da);this.raster.setFetchParameters({time:da});this.tileManager&&this.tileManager.tiles&&this.tileManager.resetTiles()},setInfoTemplate:function(da){this.infoTemplate=
da;this._updateInfoTemplateFields(this.fields)},setMultiDimensionalDefinition:function(da,ra){var ca=da&&da.multidimensionalDefinition;if(ca&&this.loaded){var fa=ca&&ca[0].variableName;""===fa&&(fa=this._multidimensionalInfo.variables[0].name,ca.forEach(function(ta){ta.variableName=fa}));if("ImageService"===this.raster.sourceType){var la=this.raster._getAllDimensionDefinition(ca,fa);la.defChanged&&(da.multidimensionalDefinition=la.definition,this.setMosaicRule(da,!0))}this.raster.setFetchParameters({multidimensionalDefinition:ca});
this.tileManager&&this.tileManager.tiles&&this.tileManager.resetTiles();fa&&this._updateRasterInfo(fa);ra||this.refresh()}},_updateRasterInfo:function(da){var ra=this.raster.rasterInfo,ca=this.getHistograms({variableName:da});da=this.getStatistics(da);(new u([ca,da])).then(J.hitch(this,function(fa){fa[0][0]&&(ra.histograms=fa[0][1].histograms);fa[1][0]&&(ra.statistics=fa[1][1]);this.refresh()}))},_updateInfoTemplateFields:function(da){if(da&&!(1>da.length)&&this.infoTemplate&&this.infoTemplate.info&&
this.infoTemplate.info.fieldInfos&&!(1>this.infoTemplate.info.fieldInfos.length)){var ra,ca;var fa=this.infoTemplate.info.fieldInfos;for(ra=0;ra<da.length;ra++){var la=da[ra];for(ca=0;ca<fa.length;ca++)if(fa[ca].fieldName.toLowerCase()===la.name.toLowerCase()&&fa[ca].fieldName!==la.name){fa[ca].fieldName=la.name;break}}}},getPixelData:function(da){return this.tileMode?da?this.tileManager&&this.tileManager.originalPixelData&&this.tileManager.originalPixelData.src&&this.tileManager.originalPixelData.src[this.tileManager.identifiers[0]]:
null:this.inherited(arguments)},fetchPopupFromTiles:function(da){var ra=new h;this.identify(da.geometry).then(function(ca){var fa=ca.pixelValue;this.hasStdTime()&&fa&&fa.length&&null!=fa[0]&&(fa=fa.map(function(Q){return this.getStdTimeValue(Q)}.bind(this)).join(", "));if(fa){ca={ObjectId:0,"Raster.ServicePixelValue":fa};var la=this.rasterAttributeTable&&this.rasterAttributeTable.features;if(la&&0<la.length&&(la=c.filter(la,function(Q){if(Q&&Q.attributes)return Q.attributes.hasOwnProperty("Value")?
Q.attributes.Value==fa:Q.attributes.VALUE==fa}),0<la.length&&(la=J.clone(la[0]))))for(var ta in la.attributes)la.attributes.hasOwnProperty(ta)&&(ca[this._rasterFieldPrefix+ta]=la.attributes[ta]);ta=new n(new F(this.projectedFullExtent||this.fullExtent),null,ca);ta.setInfoTemplate(this.infoTemplate);ta._layer=this;this._lastPopup=[ta];ra.resolve([ta])}else this._lastPopup=[],ra.resolve()}.bind(this),function(ca){this._lastPopup=[];ra.resolve(ca)});return ra},getPopupFromTiles:function(){return this._lastPopup},
identify:function(da,ra){return this.raster?this.raster.identify(da):(da=new h,da.reject("layer must be initialized to identify"),da.promise)},_getCommonRenderer:function(da){switch(da.rendererName){case "RGB":case "Stretch":return new w(da.toCommonRendererJson());case "UniqueValue":return new x(da.toCommonRendererJson());case "ClassBreaks":return new r(da.toCommonRendererJson());case "Colormap":return new D(da.toCommonRendererJson());case "ShadedRelief":return new G(da.toCommonRendererJson())}},
_getProjectedFullExtent:function(da){return this.raster.getProjectedFullExtent(da).then(J.hitch(this,function(ra){this.projectedFullExtent=ra}))},_initialize:function(da,ra){ra=ra||{};this._supportLegacyPropMethods&&this.constructor._onMap&&(this.constructor._onMap["rendering-change"]={method:"onRenderingChange"},this.constructor._onMap["mosaic-rule-change"]={method:"onMosaicRuleChange"},this.constructor._onMap["spatial-reference-change"]={method:"onSpatialReferenceChange"});this.raster={};var ca=
ra.raster?ra.raster.url:da;ca&&-1<ca.toLowerCase().indexOf("/imageserver")&&this._supportLegacyPropMethods&&this._addLegacySupport(ca,ra);var fa=J.hitch(this,function(){this.loaded=!0;this.mosaicRule&&this.mosaicRule.multidimensionalDefinition&&0<this.mosaicRule.multidimensionalDefinition.length&&this.setMultiDimensionalDefinition(this.mosaicRule,!0);this.raster._setRasterHandler(this._rasterHandler);this.onLoad(this);var la=this._loadCallback;la&&(delete this._loadCallback,la(this))});(da?L.create(J.mixin({url:da},
ra)):ra.raster&&ra.raster.open()).then(J.hitch(this,function(la){if(la){this.raster=la;var ta=this._getSourceImageServiceRaster();this.url||(this.url=ta&&ta.url);this.url&&(this._url=l.urlToObject(da));var Q=ra.minScale,T=ra.maxScale,O=la.tileInfo&&"Raster"===la.tileInfo.tileType;null==T&&(T=O&&ra.zoomFactor?la.tileInfo.lods[la.tileInfo.lods.length-1].scale/ra.zoomFactor:this.maxScale);null==Q&&(Q=O&&ra.zoomFactor?la.tileInfo.lods[0].scale*ra.zoomFactor:this.minScale);ta&&"ImageService"===ta.sourceType&&
this._supportLegacyPropMethods&&this._addGeneralProperties(da,ra);this.initialExtent=this.fullExtent=this.extent=this.raster.rasterInfo.extent;this.spatialReference=this.extent.spatialReference;this.timeInfo=this.raster.rasterInfo.timeInfo?new B(this.raster.rasterInfo.timeInfo):null;this.rasterAttributeTable=this.raster.rasterInfo.vat;this._multidimensionalInfo=this.raster.rasterInfo.multidimensionalInfo;this.rasterAttributeTable&&(this._rasterAttributeTableFields=this.rasterAttributeTable.fields);
this.mosaicRule&&this.raster.setFetchParameters({multidimensionalDefinition:this.mosaicRule.multidimensionalDefinition});this._multidimensionalInfo&&(this._getDefaultMultidimensionalDefinition(this._multidimensionalInfo,!0,!0),this.mosaicRule||(this.mosaicRule=this.defaultMosaicRule,this.raster.setFetchParameters({multidimensionalDefinition:this._defaultMultidimensionalDefinition})),this.raster.defaultMultidimensionalDefinition=this._defaultMultidimensionalDefinition);null==Q||this._hasMin||this.setMinScale(Q);
null==T||this._hasMax||this.setMaxScale(T);this._workInitPromise?this._workInitPromise.then(fa,fa):fa()}}),this._errorHandler)},_getSourceImageServiceRaster:function(){var da=this.raster&&"Function"===this.raster.sourceType?1===this.raster.getMemberRasters().length?this.raster.getMemberRasters()[0]:null:this.raster;if(da&&"ImageService"===da.sourceType)return da},_addLegacySupport:function(da,ra){this._url=l.urlToObject(da);ra=ra||{};this.format=(da=ra.imageServiceParameters)&&da.format;this.compressionTolerance=
da&&da.compressionTolerance?da.compressionTolerance:.01;this.interpolation=da?da.interpolation:null;this.compressionQuality=da?da.compressionQuality:null;this.bandIds=da&&da.bandIds||ra&&ra.bandIds||null;this.mosaicRule||(this.mosaicRule=da?da.mosaicRule:null);this.renderingRule||(this.renderingRule=da?da.renderingRule:null);this.useMapDimensionValue=ra.hasOwnProperty("useMapDimensionValue")?!!ra.useMapDimensionValue:!0;this.hasImageFilter=ra.hasImageFilter;this.activeMapDimensions=ra.activeMapDimensions;
this._params=J.mixin({},this._url.query,{f:"image",interpolation:this.interpolation,format:this.format,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null},da?da.toJson():{});this.pixelFilter=ra.pixelFilter;this.originalPixelData=this.pixelData=null;this._queryVisibleRastersHandler=J.hitch(this,this._queryVisibleRastersHandler);this._useRenderingRuleAttributeTable=!1;this._rasterFunctionTemplateInfos={};this._customRenderingRuleId={};this._setDefaultFilter=
function(){};var ca={setInterpolation:"interpolation",setCompressionQuality:"compressionQuality",setCompressionTolerance:"compressionTolerance",setBandIds:"bandIds",setDefaultBandIds:"bandIds",setMosaicRule:"mosaicRule",setRenderingRule:"renderingRule",setImageFormat:"format"},fa,la=new K;Object.keys(ca).forEach(J.hitch(this,function(ta){this[ta]=J.hitch(this,function(Q,T){fa={};fa[ca[ta]]=Q;this.raster&&(this.raster.setFetchParameters(fa),la[ta].bind(this)(Q,T))})}));this.setDisableClientCaching=
function(ta){la.setDisableClientCaching.bind(this)(ta);var Q=this._getSourceImageServiceRaster();Q?Q.disableClientCaching=ta:null}.bind(this);this.setDefinitionExpression=la.setDefinitionExpression.bind(this);this.setUseMapTime=la.setUseMapTime.bind(this);this._toggleTime=la._toggleTime.bind(this);this._onTimeExtentChangeHandler=la._onTimeExtentChangeHandler.bind(this);this.setPixelFilter=la.setPixelFilter.bind(this);this.getHistograms=la.getHistograms.bind(this);this.getRasterFunctionInfos=la.getRasterFunctionInfos.bind(this);
this.getKeyProperties=la.getKeyProperties.bind(this);this.getRasterAttributeTable=la.getRasterAttributeTable.bind(this);this.getRenderingRuleServiceInfo=la.getRenderingRuleServiceInfo.bind(this);this._getRenderingRuleId=la._getRenderingRuleId.bind(this);this._isRenderingRuleAProcessingTemplate=la._isRenderingRuleAProcessingTemplate.bind(this);this.handleSpatialReferenceChange=la.handleSpatialReferenceChange.bind(this);this.onRenderingChange=this.onRenderingChange||function(){};this.onSpatialReferenceChange=
this.onSpatialReferenceChange||function(){};this.onMosaicRuleChange=this.onMosaicRuleChange||function(ta){};this.setRasterRenderer=this.setRenderer;this.getMultidimensionalInfo=la.getMultidimensionalInfo.bind(this);this.getColormap=la.getColormap.bind(this);this.getRenderingRuleColormap=la.getRenderingRuleColormap.bind(this);this.getDefaultMultidimensionalDefinition=la.getDefaultMultidimensionalDefinition.bind(this);this._getDefaultMultidimensionalDefinition=la._getDefaultMultidimensionalDefinition.bind(this);
this._getDefaultDimensionValue=la._getDefaultDimensionValue.bind(this);this.getStatistics=la.getStatistics.bind(this)},_addGeneralProperties:function(){var da=this._getSourceImageServiceRaster();if(da){var ra=["minScale","maxScale","tileInfo"];Object.keys(da.serviceInfo).forEach(function(la){null==this[la]&&-1===ra.indexOf(la)&&(this[la]=da.serviceInfo[la])}.bind(this));this.pixelSizeX=parseFloat(this.pixelSizeX);this.pixelSizeY=parseFloat(this.pixelSizeY);this.bands=da.rasterInfo.statistics;var ca,
fa=[];this.fields=this.fields||[];for(ca=0;ca<this.fields.length;ca++)fa.push(new z(this.fields[ca]));this.fields=fa;this.version=this.currentVersion;this.defaultMosaicRule=da.serviceInfo.defaultMosaicRule}},setDefaultRenderer:function(){if(this.loaded&&this._canvas&&!this.pixelFilter){var da=N.createDefaultRenderer(this);if(null!=da){var ra=this.mosaicRule&&this.mosaicRule.multidimensionalDefinition&&0<this.mosaicRule.multidimensionalDefinition.length;if(this._multidimensionalInfo&&ra&&"Stretch"===
da.rendererName){var ca=this.mosaicRule.multidimensionalDefinition[0].variableName;(ra=this._multidimensionalInfo.variables.filter(function(fa){return fa.name===ca})[0])&&ra.histograms&&ra.histograms.length&&(da.histograms=ra.histograms,6===da.stretchType&&(da.dra=!1));ra&&ra.statistics&&ra.statistics.length&&(da.statistics=ra.statistics.map(function(fa){return[fa.min,fa.max,fa.mean,fa.stddev||fa.standardDeviation]}),6!==da.stretchType&&(da.dra=!1))}this.setRenderer(da,!0)}}},setDefaultInterpolation:function(){if(this.loaded&&
this._canvas){var da=this.raster.serviceInfo&&this.raster.serviceInfo.defaultResamplingMethod;if(da)switch(da.toLowerCase()){case "bilinear":this.interpolation="RSP_BilinearInterpolation";break;case "cubic":this.interpolation="RSP_CubicConvolution";break;case "majority":this.interpolation="RSP_Majority";break;case "nearest":this.interpolation="RSP_NearestNeighbor"}else{da=this.raster.dataType&&this.raster.dataType.toLowerCase();var ra=!!this.raster.rasterInfo.colormap;this.raster.rasterInfo.vat||
ra||"thematic"===da||"StdTime"===da?"RSP_NearestNeighbor":"RSP_BilinearInterpolation"}}},_toggleTime:function(){},_updateTilingEffects:function(){(this._hasTilingEffects=this._rasterRenderer&&this._rasterRenderer.hasTilingEffects()||this.raster&&this.raster.rasterFunction&&this.raster.rasterFunction.hasTilingEffects())&&this._map&&this.tileMode&&this.useWebGL&&this.tileManager&&(this._hasTilingEffects=!1)},_setMap:function(da,ra){this.inherited(arguments);da.spatialReference&&(da.spatialReference.ics||
da.spatialReference.icsId)&&(this.roaming=this.useWebGL=this.tileMode=!1);if(this.tileMode){this.virtualTileInfo=new P(null,{refTileInfo:da.tileInfo,spatialReference:da.spatialReference,extent:this.raster.rasterInfo.extent});var ca=this.raster.tileInfo&&(-1<["Elevation","Raster"].indexOf(this.raster.tileInfo.tileType)||3===this.raster.rasterInfo.bandCount&&"U8"===this.raster.rasterInfo.pixelType)?this.raster.tileInfo:this.virtualTileInfo;this._tileParams=this._tileParams||{};this._tileParams.size=
ca.cols+","+ca.rows;this.tileManager=new R({tileInfo:ca,layer:this,mapSR:da.spatialReference})}this._dragOrigin={x:0,y:0};ca=this._div=b.create("div",null,ra);var fa={width:da.width+"px",height:da.height+"px",position:"absolute"};"css-transforms"===da.navigationMode?this.roaming&&this.tileMode&&this.useWebGL||(fa[g._css.names.transform]=g._css.translate(da.__visibleDelta.x,da.__visibleDelta.y),this._left=da.__visibleDelta.x,this._top=da.__visibleDelta.y):this._left=this._top=0;a.set(ca,fa);this._canvas=
b.create("canvas",{width:da.width+"px",height:da.height+"px",style:"position: absolute;"},ca);v.isDefined(this.opacity)&&a.set(ca,"opacity",this.opacity);this._contextType?(this._context=this._canvas.getContext(this._contextType,null),this.useWebGL=this._context instanceof WebGLRenderingContext):this.useWebGL?(this._context=this._canvas.getContext("webgl",null)||this._canvas.getContext("experimental-webgl",null),this.drawMode=!1):(this._context=this._canvas.getContext("2d"),this.drawMode=!0);this.useWebGL&&
(da.acquireWebGLContext(this),this._glSetting={gl:this._context,branchCount:this.raster.rasterFunction?this.raster.rasterFunction.branchCount:0,pingpong:null,branches:null,drawMesh:this._drawMesh,programUniforms:{}});this.raster.rasterFunction&&(this._updateTilingEffects(),this.raster.setProcessingContext({layer:this}));this.setRenderer(this.renderer,!0);this._rasterRenderer||this.setDefaultRenderer();this.interpolation||this.setDefaultInterpolation();this._mapWidth=da.width;this._mapHeight=da.height;
this._connects=[];this._connects.push(f.connect(da,"onPan",this,this._panHandler));this._connects.push(f.connect(da,"onPanEnd",this,this._panEndHandler));"css-transforms"===da.navigationMode?this._connects.push(f.connect(da,"onScale",this,this._onScaleHandler)):(this._connects.push(f.connect(da,"onZoom",this,this._onZoomHandler)),this._connects.push(f.connect(da,"onZoomEnd",this,this._onZoomEndHandler)));this._connects.push(f.connect(da,"onResize",this,this._onResizeHandler));this._connects.push(f.connect(da,
"onExtentChange",this,this._extentChangeHandler));this._connects.push(f.connect(this,"onVisibilityChange",this,this._visibilityChangeHandler));this._connects.push(f.connect(this,"onOpacityChange",this,this._opacityChangeHandler));this._startRect={left:0,top:0,width:da.width,height:da.height};this.evaluateSuspension();if(this.suspended&&!da.loaded)var la=f.connect(da,"onLoad",this,function(){f.disconnect(la);la=null;this.evaluateSuspension()});return ca},_unsetMap:function(da,ra){this.useWebGL&&da.releaseWebGLContext(this);
c.forEach(this._connects,f.disconnect,this);var ca=this._div;ca&&(ra.removeChild(ca),b.destroy(ca));this._map=this._canvas=this._context=this.data=this._connects=null;clearTimeout(this._displayTimer);this._displayTimer=null;this.inherited(arguments)},_canDraw:function(){return!!(this._map&&this._canvas&&this._context)},_requestDataErrorHandler:function(da){"CancelError"!==da.name&&(this.clear(),this.onError(da))},_clonePixelData:function(da){if(null===da||da.texture)return da;var ra={};da.extent&&
(ra.extent=J.clone(da.extent));var ca=da.pixelBlock;null!=ca&&(ra.pixelBlock=ca.clone());ra.texture=da.texture;return ra},_setPixelData:function(da){if(da){da=this._clonePixelData(da);this.pixelFilter&&(this.pixelFilter.filter?(this.pixelFilter.renderTexture=!0,this.pixelFilter.filter(da)):this.pixelFilter(da));this.pixelData=da;if(this._rasterReadPromise&&this._rasterReadPromise.isCanceled())return;this._drawPixelData()}this._rasterReadPromise=null},_requestData:function(da,ra,ca){this._rasterReadPromise&&
this._rasterReadPromise.cancel();da=J.clone(da)._normalize(!0);this._rasterReadPromise=this.raster.read({extent:da,width:this._map.width,height:this._map.height});this._rasterReadPromise.then(J.hitch(this,function(fa){this._rasterReadPromise&&this._rasterReadPromise.isCanceled()||(this.originalPixelData=fa&&fa.srcData?{extent:fa.extent,src:fa.srcData}:fa,this.useWebGL&&this._glSetting&&(this._glSetting.hasNewTexture=!0),this._setPixelData(fa))}),J.hitch(this,this._requestDataErrorHandler));return this._rasterReadPromise},
_drawPixelData:function(da){a.set(this._canvas,{left:"0px",top:"0px",width:this._map.width+"px",height:this._map.height+"px"});this._startRect={left:0,top:0,width:this._map.width,height:this._map.height};this.drawMode||"css-transforms"!==this._map.navigationMode||(this._tdx=this._left,this._tdy=this._top,this._multiply=null,a.set(this._div,g._css.names.transform,g._css.translate(this._left,this._top)),a.set(this._canvas,g._css.names.transform,g._css.translate(-this._left,-this._top)),this._dragOrigin=
{x:0,y:0});this.useWebGL&&this._rasterRenderer&&this._rasterRenderer.draw(this.pixelData);if(this._canDraw()&&this.drawMode&&this.drawMode&&(da=da||this.pixelData)&&da.pixelBlock){var ra=this.pixelFilter?this.pixelData:this._rasterRenderer?this._rasterRenderer.draw(da):da;da=ra.pixelBlock;var ca=this._context,fa=ca.createImageData(da.width,da.height);fa.data.set(da.getAsRGBA());ra=ra.extent;var la=this._map.extent,ta=this.getCurrentResolution(),Q=0,T=0;Math.abs(ra.xmin-la.xmin)>ta.x&&(Q=Math.round((ra.xmin-
la.xmin)/ta.x));Math.abs(la.ymax-ra.ymax)>ta.y&&(T=Math.round((la.ymax-ra.ymax)/ta.y));"css-transforms"===this._map.navigationMode?(this._tdx=this._left,this._tdy=this._top,this._multiply=null,a.set(this._div,g._css.names.transform,g._css.translate(this._left,this._top)),a.set(this._canvas,g._css.names.transform,g._css.translate(-this._left,-this._top))):(a.set(this._div,{left:"0px",top:"0px",width:this._map.width+"px",height:this._map.height+"px"}),a.set(this._canvas,{left:"0px",top:"0px",width:this._map.width+
"px",height:this._map.height+"px"}));this._dragOrigin={x:0,y:0};this.tileMode?this.clear(Q,T,da.width,da.height):this.clear();ca.putImageData(fa,Q,T,0,0,da.width,da.height);this._fireUpdateEnd()}},hasStdTime:function(){if(!this.hasMultidimensions||"StdTime"!==this.raster.dataType)return!1;var da=this.mosaicRule&&this.mosaicRule.multidimensionalDefinition;da=da&&da.length?da[0]:this._defaultMultidimensionalDefinition[0];var ra=this.raster.rasterInfo.multidimensionalInfo.variables,ca=da?da.variableName:
ra[0].name;return ra.some(function(fa){if(fa.name===ca)return!fa.dimensions||0===fa.dimensions.length||fa.dimensions.some(function(la){return"StdTime"===la.name})})},getStdTimeValue:function(da){return(new Date(864E5*(da-25569))).toString()},computeHistograms:function(da){da=new h;var ra=this.getPixelData(!0);if(ra&&ra.pixelBlock&&ra.pixelBlock.pixels&&((new I({}))._calculateStatisticsHistograms(ra),ra.pixelBlock.histograms))return da.resolve({histograms:ra.pixelBlock.histograms}),da;da.reject();
return da},_animatePan2d:function(){this._oldDelta&&this._delta.x===this._oldDelta.x&&this._delta.y===this._oldDelta.y||(this.tileManager.updateTile(this.tileManager.originalPixelData,!0),this._oldDelta={x:this._delta.x,y:this._delta.y});this._roamingAnimation&&this.tileMode&&this.useWebGL&&(this._roamingAnimation=requestAnimationFrame(this._animatePan2d))},_cancelAnimation:function(){this._animation&&(cancelAnimationFrame(this._animation),this._animation=null)},_updateAllTilesOnce:function(da,ra){return this.tileManager.updateTile(da,
!0).then(J.hitch(this,function(ca){(this._hasTilingEffects||this.useWebGL||ra)&&this._drawOneFrame(ca)}))},_drawOneFrame:function(da,ra){if(!(this.suspended||!this._map||this.tileMode&&!this._drawTile||(this.tileMode&&this.useWebGL&&this.tileManager.originalPixelData.isEmpty&&this._context.clear(this._context.COLOR_BUFFER_BIT),this.tileMode&&this.useWebGL&&this.tileManager.xformSetting&&this.tileManager.xformSetting.requireProjection&&!this.tileManager.xformSetting.gridConfig))){if(!this._resetCss||
this._levelChange)this._levelChange=!1,this._resetDrawing();if(da&&(da.renderedPixelBlock||da.pixelBlock)&&this._canDraw()&&this.drawMode){ra=da.extent;var ca=this._map.extent;if(!this._isExtentOutSide(ra,ca)){var fa=da.pixelBlock||da.renderedPixelBlock,la=this._context,ta=la.createImageData(fa.width,fa.height);ta.data.set((da.renderedPixelBlock||da.pixelBlock).getAsRGBA());da=this.getCurrentResolution();var Q=0,T=0;Math.abs(ra.xmin-ca.xmin)>da.x&&(Q=Math.round((ra.xmin-ca.xmin)/da.x));Math.abs(ca.ymax-
ra.ymax)>da.y&&(T=Math.round((ca.ymax-ra.ymax)/da.y));la.putImageData(ta,Q,T,0,0,fa.width,fa.height)}}else this._fireUpdateEnd()}},_isExtentOutSide:function(da,ra){return da.xmax<=ra.xmin||da.xmin>=ra.xmax||da.ymax<=ra.ymin||da.ymin>=ra.ymax},_resetDrawing:function(){this._resetCss=!0;if(!this.useWebGL)if(this._multiply||this._startRect.width!==this._map.width||this._startRect.height!==this._map.height)this.clear();else{var da=this._context.getImageData(0,0,this._map.width,this._map.height);this.clear();
this._context.putImageData(da,this._startRect.left,this._startRect.top)}this._dragOrigin={x:0,y:0};this._startRect={left:0,top:0,width:this._map.width,height:this._map.height};a.set(this._canvas,{left:"0px",top:"0px",width:this._map.width+"px",height:this._map.height+"px"});"css-transforms"===this._map.navigationMode?(this.roaming&&this.tileMode&&this.useWebGL&&(this._delta=null),this._tdx=this._left,this._tdy=this._top,this._multiply=null,a.set(this._div,g._css.names.transform,g._css.translate(this._left,
this._top)),a.set(this._canvas,g._css.names.transform,g._css.translate(-this._left,-this._top))):(a.set(this._div,{left:"0px",top:"0px",width:this._map.width+"px",height:this._map.height+"px"}),a.set(this._canvas,{left:"0px",top:"0px",width:this._map.width+"px",height:this._map.height+"px"}))},_drawAllFrames:function(){if(!this.suspended&&this._map&&(!this.tileMode||this._drawTile))if(this._resetCss){var da=this._frames,ra=0,ca;for(ca=0;ca<da.length;ca++)if(da[ca].completed)ra++;else if(da[ca].tileData.renderedPixelBlock){da[ca].completed=
!0;var fa=da[ca].tileData;break}else if(da[ca].tileData._fetched&&!da[ca].tileData.src){da[ca].completed=!0;break}else if(da[ca].tileData.update&&da[ca].tileData.update.isFulfilled()&&!da[ca].tileData.renderedPixelBlock){da[ca].completed=!0;break}else da[ca].tileData.fetch&&(!0===da[ca].tileData.fetch||da[ca].tileData.fetch.isCanceled()||da[ca].tileData.fetch.isRejected())?(da[ca].completed=!0,ra++):this._isExtentOutSide(da[ca].tileData.extent,this._map.extent)&&(da[ca].completed=!0,ra++);if(fa){ra++;
var la=fa.extent,ta=this._map.extent,Q=this.getCurrentResolution(),T=ca=0;Math.abs(la.xmin-ta.xmin)>Q.x&&(ca=Math.round((la.xmin-ta.xmin)/Q.x));Math.abs(ta.ymax-la.ymax)>Q.y&&(T=Math.round((ta.ymax-la.ymax)/Q.y));fa.renderedPixelBlock?(la=fa.renderedPixelBlock,ta=this._context.createImageData(la.width,la.height),ta.data.set(fa.renderedPixelBlock.getAsRGBA()),this._context.putImageData(ta,ca,T,0,0,la.width,la.height)):this.clear(ca,T,fa.width,fa.height)}ra===da.length?(this._animation=null,this._fireUpdateEnd()):
this._animation=requestAnimationFrame(J.hitch(this,this._drawAllFrames))}else this._resetDrawing(),this._animation=requestAnimationFrame(J.hitch(this,this._drawAllFrames))},_fetchTiles:function(da,ra){if(!this.suspended&&this.loaded){this._cancelAnimation();var ca=this.tileManager,fa=!(ca.xformSetting.requireProjection&&ca.xformSetting.requirePE)||M.load();t(fa,J.hitch(this,function(){ca.updateExtent(da,this.getCurrentResolution());this._resetCss=!1;ca.fetchTiles(ra);ra&&(this._hasTilingEffects||
this.useWebGL?this.useWebGL&&0<ca.tiles.length?(ca.fillupTiles(),ca._validateRawPixelBlocks(ca.originalPixelData)?this._updateAllTilesOnce(ca.originalPixelData):ca.originalPixelData&&ca.originalPixelData.src&&ca.tiles.some(function(la){return la.updateCompleted})&&this._context.clear(this._context.COLOR_BUFFER_BIT),ca.tiles.forEach(J.hitch(this,function(la){la.update&&!la.updateCompleted&&la.update.then(function(ta){la.updateCompleted||(la.updateCompleted=!0);(this._hasTilingEffects||this.useWebGL)&&
this._drawOneFrame(ta)}.bind(this))}))):this._hasTilingEffects&&t(ca.fetchAllCompleted.isResolved()||ca.fetchAllCompleted,J.hitch(this,function(){this._updateAllTilesOnce(ca.originalPixelData)})):(this._frames=ca.tiles.map(function(la){return{completed:!1,tileData:la}}),this._drawAllFrames()))}))}},_redrawTiles:function(){this._fetchTiles(this._map.extent,!0)},_panHandler:function(da,ra){this._drawTile=!1;"css-transforms"===this._map.navigationMode?this.roaming&&this.tileMode&&this.useWebGL?(this._delta=
ra,!this._roamingAnimation&&this.tileMode&&(this._roamingAnimation=requestAnimationFrame(this._animatePan2d))):(this._left=this._map.__visibleDelta.x+ra.x,this._top=this._map.__visibleDelta.y+ra.y,a.set(this._div,g._css.names.transform,g._css.translate(this._left,this._top))):a.set(this._div,{left:this._startRect.left+ra.x+"px",top:this._startRect.top+ra.y+"px"});this.tileMode&&this._fetchTiles(da)},_panEndHandler:function(da,ra){ra&&(this._startRect.left+=ra.x,this._startRect.top+=ra.y);this.oldData=
null;this._roamingAnimation&&(cancelAnimationFrame(this._roamingAnimation),this._oldDelta=this._roamingAnimation=null)},_onScaleHandler:function(da,ra){var ca={},fa=g._css.names;a.set(this._canvas,fa.transition,ra?"none":fa.transformName+" "+aa+"ms ease");this._matrix=da;da=this._multiply?q.multiply(da,this._multiply):da;if(this._tdx||this._tdy)da=q.multiply(da,{xx:1,xy:0,yx:0,yy:1,dx:-this._tdx,dy:-this._tdy});ca[fa.transform]=g._css.matrix(da);a.set(this._canvas,ca)},_onZoomHandler:function(da,
ra,ca){var fa=this._startRect;da=fa.width*ra;ra*=fa.height;var la=fa.left-(da-fa.width)*(ca.x-fa.left)/fa.width;ca=fa.top-(ra-fa.height)*(ca.y-fa.top)/fa.height;a.set(this._canvas,{left:la+"px",top:ca+"px",width:da+"px",height:ra+"px"});this._endRect={left:la,top:ca,width:da,height:ra}},_onZoomEndHandler:function(){this._endRect&&(this._startRect=this._endRect)},_onResizeHandler:function(da,ra,ca){a.set(this._div,{width:ra+"px",height:ca+"px"});a.set(this._canvas,{width:ra+"px",height:ca+"px"});this._startRect.width=
this._canvas.width=ra;this._startRect.height=this._canvas.height=ca;this.useWebGL&&this._glSetting&&(this._glSetting.pingpong=null,this._glSetting.branches=null)},_extentChangeHandler:function(da,ra,ca,fa){if(this.loaded&&!this.suspended&&(!ra||0!==ra.x||0!==ra.y||ca)){this._drawTile=!0;"css-transforms"===this._map.navigationMode&&(ra&&(this._dragOrigin.x+=ra.x,this._dragOrigin.y+=ra.y),this._left=this._map.__visibleDelta.x,this._top=this._map.__visibleDelta.y,this.roaming&&this.tileMode&&this.useWebGL||
ca||a.set(this._div,g._css.names.transform,g._css.translate(this._left,this._top)),ca&&(a.set(this._canvas,g._css.names.transition,"none"),this._multiply=this._multiply?q.multiply(this._matrix,this._multiply):this._matrix,this._levelChange=!0));this._fireUpdateStart();var la=this._map;ra=this.raster.rasterFunction?this.raster.getMemberRasters().map(function(Q){return Q._rasterId}):[this.raster._rasterId];var ta={};this.tileMode?((this.roaming||this.useWebGL)&&this.tileMode||(ra.forEach(function(Q,
T){ta[Q]={extent:la.extent,pixelBlock:new E({width:la.width,height:la.height,pixels:[],pixelType:"",mask:null,statistics:[]})}}),this.tileManager.originalPixelData={extent:la.extent,src:ta}),this.projectedFullExtent?this._fetchTiles(da,!0):this._getProjectedFullExtent(la.spatialReference).then(J.hitch(this,function(){this._fetchTiles(da,!0)}))):this._requestData(la.extent,la.width,la.height)}},_visibilityChangeHandler:function(da){da?p.show(this._div):p.hide(this._div)},_opacityChangeHandler:function(da){a.set(this._div,
"opacity",da)}});J.setObject("layers.RasterXLayer",S,g);return S})},"esri/layers/rasterLib/function/StretchFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./vertexShaders ./pixelShaders ./RasterFunctionWebGLMixin".split(" "),function(S,J,f,c,h,d,b){return S([f,b],{declaredClass:"esri.layers.rasterLib.function.StretchFunction",functionName:"Stretch",supportWebGL:!0,support2D:!0,constructor:function(a){this.functionArguments=this.mixinIgnoreCase({stretchType:0,
min:0,max:255,numberOfStandardDeviations:2,statistics:null,histograms:null,dra:!1,minPercent:.25,maxPercent:.5,useGamma:!1,gamma:null,raster:null,computeGamma:!1},a);this.functionArguments.statistics=this._convertStats(this.functionArguments.statistics);-1===[0,3,5,6].indexOf(this.functionArguments.stretchType)&&(this.functionArguments.stretchType=5);this.min=null==this.min?0:this.min;this.max=null==this.max?255:this.max},bind:function(a){a=this.getSourceRasterInfo(a);if(!a.raster)return Error("The raster input to stretch function is invalid.");
a.raster.statistics&&(this.srcStatistics=this._convertStats(a.raster.statistics));a.raster.histograms&&(this.srcHistograms=a.raster.histograms);this.rasterInfo=J.mixin({},a.raster,{bandCount:a.raster.bandCount,pixelType:this._calculatePixelType(this.pixelType,"U8"),statistics:null,histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Generic";return!0},read2D:function(a){a=a.raster;this._stretch(a);return a},hasTilingEffects:function(a){a=
a||this.functionArguments;return!!(a.dra||a.raster&&"object"===typeof a.raster&&a.raster.dra)},_convertStats:function(a){return a?a.map(function(e){return e&&null!=e.min?[e.min,e.max,e.mean,e.stddev]:e}):null},_updateStatistisHistograms:function(a){var e=this.functionArguments,q=e.histograms||this.srcHistograms;if(a&&a.pixelBlock&&a.pixelBlock.pixels){if(0===e.stretchType)this._statistics=e.statistics&&0<e.statistics.length?e.statistics:this.srcStatistics,this._histograms=q;else{var t=a.pixelBlock,
u=t.pixels.length,g=6===e.stretchType&&(e.dra||!q)||3===e.stretchType&&e.dra;g&&(t.statistics||t.calculateStatistics(),this._calculateStatisticsHistograms(a));if(e.dra)if(t.statistics||t.calculateStatistics(),g)this._statistics=t.statistics,this._histograms=t.histograms;else for(e=t.statistics,this._statistics=[],a=0;a<u;a++)this._statistics[a]=[e[a].minValue,e[a].maxValue,0,0];else this._statistics=e.statistics&&0<e.statistics.length?e.statistics:this.srcStatistics,this._histograms=q}this._statistics=
this._convertStats(this._statistics);this._gammaCorrection=this._getGammaCorrection()}else this._statistics=e.statistics&&0<e.statistics.length?e.statistics:this.srcStatistics,this._histograms=q,this._gammaCorrection=this._getGammaCorrection(),this._statistics=this._convertStats(this._statistics)},_getGammaCorrection:function(){var a=this.functionArguments.gamma;if(a){var e=[],q;for(q=0;q<a.length;q++)e[q]=1<a[q]?2<a[q]?6.5+Math.pow(a[q]-2,2.5):6.5+100*Math.pow(2-a[q],4):1;return e}},_stretch:function(a){if(null!==
a&&null!==a.pixelBlock&&null!==a.pixelBlock.pixels&&0!==this.functionArguments.stretchType){this._updateStatistisHistograms(a);var e=a.pixelBlock,q=e.pixels;e=e.width*e.height;var t=q.length,u,g;this._createLUT(a);if(null==this.LUT)return this._filterNoLUT(a);var m=this.LUT,v=this.LUTOffset;for(u=0;u<t;u++){var p=m[u];for(g=0;g<e;g++){var l=q[u][g];q[u][g]=p[l-v]}}a.pixelBlock.pixelType="U8"}},_calculateStatisticsHistograms:function(a){a=a.pixelBlock;var e=a.pixelType,q=a.pixels,t=a.mask,u=q.length,
g,m,v=function(F){this.min=-.5;this.max=255.5;this.size=256;J.mixin(this,F);this.counts=this.counts||new Uint32Array(this.size)},p=[],l,n;for(g=0;g<u;g++){var k=new v;var r=k.counts;var w=q[g];if("U8"===e)if(t)for(m=0;m<a.width*a.height;m++)t[m]&&r[w[m]]++;else for(m=0;m<a.width*a.height;m++)r[w[m]]++;else{var x=a.statistics[g].minValue;var D=a.statistics[g].maxValue;k.min=x;k.max=D;D=(D-x)/256;var G=new Uint32Array(257);if(t)for(m=0;m<a.width*a.height;m++)t[m]&&G[Math.floor((w[m]-x)/D)]++;else for(m=
0;m<a.width*a.height;m++)G[Math.floor((w[m]-x)/D)]++;for(m=0;255>m;m++)r[m]=G[m];r[255]=G[255]+G[256]}p.push(k);w=[];x=a.statistics[g].minValue;D=a.statistics[g].maxValue;for(m=n=l=G=0;m<k.size;m++)G+=r[m],l+=m*r[m];l/=G;for(m=0;m<k.size;m++)n+=r[m]*Math.pow(m-l,2);r=Math.sqrt(n/(G-1));m=(l+.5)*(k.max-k.min)/k.size+k.min;k=r*(k.max-k.min)/k.size;w.push(x);w.push(D);w.push(m);w.push(k);a.statistics[g]={min:x,minValue:x,max:D,maxValue:D,mean:m,stddev:k}}a.histograms=p},_getCutOffPoints:function(a){var e=
this.functionArguments,q=999;a&&a.pixelBlock?q=a.pixelBlock.pixels.length:a&&a.texture&&(q=3);a=Math.min(q,this._statistics.length);var t=[],u=[],g,m;switch(e.stretchType){case 5:for(g=0;g<a;g++)t[g]=this._statistics[g][0],u[g]=this._statistics[g][1];break;case 3:for(g=0;g<a;g++)t[g]=this._statistics[g][2]-e.numberOfStandardDeviations*this._statistics[g][3],u[g]=this._statistics[g][2]+e.numberOfStandardDeviations*this._statistics[g][3],t[g]<this._statistics[g][0]&&(t[g]=this._statistics[g][0]),u[g]>
this._statistics[g][1]&&(u[g]=this._statistics[g][1]);break;case 6:for(g=0;g<a;g++){q=this._histograms[g];var v=new Uint32Array(q.size);var p=q.counts;var l=0;var n=-.5===q.min&&1===(q.max-q.min)/p?.5:0;for(m=0;m<q.size;m++)l+=p[m],v[m]=l;p=e.minPercent*l/100;for(m=0;m<q.size;m++)if(v[m]>p){t[g]=q.min+(q.max-q.min)/q.size*(m+n);break}p=(1-e.maxPercent/100)*l;for(m=q.size-2;0<=m;m--)if(v[m]<p){u[g]=q.min+(q.max-q.min)/q.size*(m+2-n);break}}break;default:for(g=0;g<q;g++)t[g]=0,u[g]=255}return{minCutOff:t,
maxCutOff:u}},_createLUT:function(a){var e=this.functionArguments,q=a.pixelBlock,t=q.pixelType;if("U8"===t||"U16"===t||"S8"===t||"S16"===t){if(this._LUTSignature&&(t=this._computeLutSignature(),t.length===this._LUTSignature.length&&!t.some(function(A,y){return A!==this._LUTSignature[y]}.bind(this))))return;t=q.pixels.length;var u=[],g=[],m=e.max,v=e.min,p=e.gamma,l=m-v,n=this._getCutOffPoints(a);a=n.minCutOff;n=n.maxCutOff;var k=0,r=256;"S8"===q.pixelType?k=-127:"S16"===q.pixelType&&(k=-32767);if("U16"===
q.pixelType||"S16"===q.pixelType)r=65536;for(q=0;q<t;q++)u[q]=n[q]-a[q];var w=this._gammaCorrection;if(e.useGamma)for(q=0;q<t;q++){var x=[];for(e=0;e<r;e++){var D=e+k;var G=(D-a[q])/u[q];var F=1;1<p[q]&&(F-=Math.pow(1/l,G*w[q]));D<n[q]&&D>a[q]?x[e]=Math.floor(F*l*Math.pow(G,1/p[q]))+v:D>n[q]?x[e]=m:D<a[q]&&(x[e]=v)}g[q]=x}else for(q=0;q<t;q++){x=[];for(e=0;e<r;e++)D=e+k,x[e]=D<a[q]?v:D>n[q]?m:Math.floor((D-a[q])/u[q]*l)+v;g[q]=x}this.LUT=g;this.LUTOffset=k;this._LUTSignature=this._computeLutSignature()}},
_computeLutSignature:function(){var a=this.functionArguments,e=[],q,t;e.push(a.stretchType);e.push(a.min);e.push(a.max);e.push(a.numberOfStandardDeviations);if(this._statistics)for(q=0;q<this._statistics.length;q++)for(t=0;t<this._statistics[q].length;t++)e.push(this._statistics[q][t]);e.push(a.dra?1:0);e.push(a.minPercent);e.push(a.maxPercent);if(a.gamma)for(q=0;q<this._statistics.length;q++)e.push(a.gamma[q]);e.push(a.useGamma?1:0);return e},_filterNoLUT:function(a){if(null!==a&&null!==a.pixelBlock&&
null!==a.pixelBlock.pixels){var e=this.functionArguments,q=a.pixelBlock,t=q.pixels,u=q.mask;q=q.width*q.height;var g=t.length,m=[],v=[],p=e.max,l=e.min,n=e.gamma,k=p-l;var r=this._getCutOffPoints(a);var w=r.minCutOff,x=r.maxCutOff;for(r=0;r<g;r++)m[r]=x[r]-w[r];if(e.useGamma&&null!==n&&n.length>=g)for(r=0;r<g;r++)v[r]=1<n[r]?2<n[r]?6.5+Math.pow(n[r]-2,2.5):6.5+100*Math.pow(2-n[r],4):1;if(e.useGamma)if(void 0!==u&&null!==u)for(e=0;e<q;e++){if(u[e])for(r=0;r<g;r++){var D=t[r][e];var G=(D-w[r])/m[r];
var F=1;1<n[r]&&(F-=Math.pow(1/k,G*v[r]));D<x[r]&&D>w[r]?t[r][e]=Math.floor(F*k*Math.pow(G,1/n[r]))+l:D>x[r]?t[r][e]=p:D<w[r]&&(t[r][e]=l)}}else for(e=0;e<q;e++)for(r=0;r<g;r++)D=t[r][e],G=(D-w[r])/m[r],F=1,1<n[r]&&(F-=Math.pow(1/k,G*v[r])),D<x[r]&&D>w[r]?t[r][e]=Math.floor(F*k*Math.pow(G,1/n[r]))+l:D>x[r]?t[r][e]=p:D<w[r]&&(t[r][e]=l);else if(void 0!==u&&null!==u)for(e=0;e<q;e++){if(u[e])for(r=0;r<g;r++)D=t[r][e],D<x[r]&&D>w[r]?t[r][e]=Math.floor((D-w[r])/m[r]*k)+l:D>x[r]?t[r][e]=p:D<w[r]&&(t[r][e]=
l)}else for(e=0;e<q;e++)for(r=0;r<g;r++)D=t[r][e],D<x[r]&&D>w[r]?t[r][e]=Math.floor((D-w[r])/m[r]*k)+l:D>x[r]?t[r][e]=p:D<w[r]&&(t[r][e]=l);a.pixelBlock.pixelType="U8";return a}},_computeGammaValues:function(a){var e=this._statistics.length,q,t=[];for(q=0;q<e;q++){var u=this._statistics[q][2];"U8"!==a&&(u=255*(u-this._statistics[q][0])/(this._statistics[q][1]-this._statistics[q][0]));t.push(this._computeGammaValue(u))}return t},_computeGammaValue:function(a){if(0!==a&&!(255<a||0>a)){var e=0;0<a&&
150!=a&&255>a&&(e=150>=a?45*Math.cos(.01047*a):17*Math.sin(.021*a));e=Math.log((a+e)/255);if(0!==e&&(a=Math.log(a/255)/e,!isNaN(a)))return Math.min(9.9,Math.max(.01,a))}},readGL:function(a){return this._stretchGL(a.raster)},_stretchGL:function(a){this._performance.start();var e=this.renderTexture,q,t=a.pixelBlock&&a.pixelBlock.pixels&&a.pixelBlock.pixels.length||this.sourceRasterInfo.raster.bandCount,u=a.pixelBlock,g=this.gl,m=g.drawingBufferWidth,v=g.drawingBufferHeight;if(!u&&this.functionArguments.dra){var p=
new Float32Array(m*v*4),l=new Uint8Array(m*v);var n=new Float32Array(m*v);var k=new Float32Array(m*v);var r=new Float32Array(m*v);g.checkFramebufferStatus(g.FRAMEBUFFER)==g.FRAMEBUFFER_COMPLETE&&g.readPixels(0,0,m,v,g.RGBA,g.FLOAT,p);for(q=0;q<m*v;q++)n[q]=p[4*q],k[q]=p[4*q+1],r[q]=p[4*q+2],l[q]=p[4*q+3];a.pixelBlock=new c({width:m,height:v,pixels:[n,k,r],mask:l});a.pixelBlock.calculateStatistics()}!u&&this.functionArguments.dra&&this._useGPUStats?(n=new Float32Array(t),k=new Float32Array(t)):(this._updateStatistisHistograms(a),
p=this._getCutOffPoints(a),n=new Float32Array(t),k=new Float32Array(t),n.set(p.minCutOff.slice(0,t)),k.set(p.maxCutOff.slice(0,t)));this._initializeProgram({fragment:d.stretch,fragmentName:"Stretch"});p=this._setupTextureData(a);l=this.bindFrameBuffer();this.renderTexture=!1;this._performance.start();if(!u&&this.functionArguments.dra&&this._useGPUStats){this._setUniforms({u_sourceDim:[m,v],u_bandCount:t});if(1===t)var w=this._readMinMax(p,2);else{w=this._readMinMax(p,0);var x=this._readMinMax(p,1)}if(6===
this.functionArguments.stretchType||3===this.functionArguments.stretchType&&this.functionArguments.dra)q=this._readHistogram(w,x,a),n=q.minCutOff||n,k=q.minCutOff||k}r=this.functionArguments.max-this.functionArguments.min;a=new Float32Array(t);for(q=0;q<t;q++)a[q]=r/(k[q]-n[q]);this._useGPUStats&&this._initializeProgram({fragment:d.stretch,fragmentName:"Stretch"});g.blendFunc(g.SRC_ALPHA,g.ZERO);r=new Float32Array(3);var D=new Float32Array(3);for(q=0;3>q;q++)r[q]=this.functionArguments.min,D[q]=this.functionArguments.max;
q=this.functionArguments.useGamma;var G=this.functionArguments.gamma,F=this._gammaCorrection;Array.isArray(G)&&G.length>=t||(q=!1);this._setUniforms({u_sourceDim:[m,v],u_bandCount:t,u_minOutput:r,u_maxOutput:D,u_minCutOff:n,u_maxCutOff:k,u_factor:a,u_state:100,u_useGamma:q,u_gamma:G,u_scaled:!e,u_gammaCorrection:F,u_minMaxTexture:!u&&this.functionArguments.dra&&this._useGPUStats?!0:!1});this.renderTexture=e;g.viewport(0,0,m,v);this._bindTexture(p.texture,"u_image");!u&&this.functionArguments.dra&&
this._useGPUStats&&(e=g.getUniformLocation(this.rasterProgram,"u_image1"),g.uniform1i(e,1),g.activeTexture(g.TEXTURE1),g.bindTexture(g.TEXTURE_2D,w.texture),1<t&&(t=g.getUniformLocation(this.rasterProgram,"u_image2"),g.uniform1i(t,2),g.activeTexture(g.TEXTURE2),g.bindTexture(g.TEXTURE_2D,x.texture)));this._drawGL();return{extent:p.extent,texture:l.texture}},_readMinMax:function(a,e){var q=this.gl,t=a.width||q.drawingBufferWidth,u=a.height||q.drawingBufferHeight;this._setUniforms({u_state:e});this.renderTexture=
!1;var g=a.texture;for(q.activeTexture(q.TEXTURE0);1<t||1<u;){var m=this._createTexture();e=Math.max(Math.ceil(t/2),1);var v=Math.max(Math.ceil(u/2),1);q.getExtension("OES_texture_float");q.texImage2D(q.TEXTURE_2D,0,q.RGBA,e,v,0,q.RGBA,q.FLOAT,null);a=q.createFramebuffer();q.bindFramebuffer(q.FRAMEBUFFER,a);q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,m,0);q.viewport(0,0,e,v);q.bindTexture(q.TEXTURE_2D,g);this._setUniforms({u_sourceDim:[t,u]});t=e;u=v;this._drawGL(!0);g=m}a=
new Float32Array(t*u*4);q.checkFramebufferStatus(q.FRAMEBUFFER)==q.FRAMEBUFFER_COMPLETE&&q.readPixels(0,0,t,u,q.RGBA,q.FLOAT,a);return{texture:m,minmax:a}},_readHistogram:function(a,e,q){if(a)try{var t=this.gl,u=t.drawingBufferWidth,g=t.drawingBufferHeight,m,v,p;if(a.texture instanceof WebGLTexture){var l=!0;var n=[1,0,0,1];if(e){var k=a.minmax;var r=e.minmax}else k=[a.minmax[0]],r=[a.minmax[1]]}else for(r=e,k=a,n=new Float32Array(r.length),m=0;m<r.length;m++)n[m]=256/(r[m]-k[m]);var w=new Float32Array(u*
g);for(p=0;p<w.length;p++)w[p]=p;if(!this.histogramProgram){var x=h.getShader(t,h.histogram),D=d.getShader(t,d.constant);this.histogramProgram=this._loadProgram(x,D)}t.blendFunc(t.ONE,t.ONE);t.enable(t.BLEND);t.useProgram(this.histogramProgram);var G=t.getAttribLocation(this.histogramProgram,"a_pixelIndex"),F=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,F);t.bufferData(t.ARRAY_BUFFER,w,t.STATIC_DRAW);t.enableVertexAttribArray(G);t.vertexAttribPointer(G,1,t.FLOAT,!1,0,0);var A=this._setupHistTexture(q),
y=this._createTexture();t.getExtension("OES_texture_float");t.texImage2D(t.TEXTURE_2D,0,t.RGBA,257,1,0,t.RGBA,t.FLOAT,null);var z=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,z);t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,y,0);t.viewport(0,0,257,1);var B=t.getUniformLocation(this.histogramProgram,"u_image");t.uniform1i(B,0);t.activeTexture(t.TEXTURE0);t.bindTexture(t.TEXTURE_2D,A);var C=t.getUniformLocation(this.histogramProgram,"u_sourceDim");t.uniform2f(C,u,g);
var H=t.getUniformLocation(this.histogramProgram,"u_bandCount");t.uniform1i(H,3);var E=t.getUniformLocation(this.histogramProgram,"u_halfPixel");t.uniform2f(E,.5/u,.5/g);var K=t.getUniformLocation(this.histogramProgram,"u_minMaxTexture");if(l){t.uniform1i(K,1);var I=t.getUniformLocation(this.histogramProgram,"u_image1");t.uniform1i(I,1);t.activeTexture(t.TEXTURE1);t.bindTexture(t.TEXTURE_2D,a.texture);if(e){var L=t.getUniformLocation(this.histogramProgram,"u_image2");t.uniform1i(L,2);t.activeTexture(t.TEXTURE2);
t.bindTexture(t.TEXTURE_2D,e.texture)}}else{var M=t.getUniformLocation(this.histogramProgram,"u_mins");t.uniform4f(M,k[0],k[0],k[0],k[0]);t.uniform1i(K,0)}var N=t.getUniformLocation(this.histogramProgram,"u_color"),P=t.getUniformLocation(this.histogramProgram,"u_factors"),R=t.getUniformLocation(this.histogramProgram,"u_size");t.uniform1f(R,256);a=[];e=[];t.uniform4fv(N,[1,0,0,1]);t.uniform4fv(P,[n[0],0,0,1]);t.drawArrays(t.POINTS,0,w.length);var Y=this.sourceRasterInfo.raster.bandCount;1<Y&&(t.uniform4fv(N,
[0,1,0,1]),t.uniform4fv(P,[0,n[0],0,1]),t.drawArrays(t.POINTS,0,w.length),t.uniform4fv(N,[0,0,1,1]),t.uniform4fv(P,[0,0,n[0],1]),t.drawArrays(t.POINTS,0,w.length));if(t.checkFramebufferStatus(t.FRAMEBUFFER)==t.FRAMEBUFFER_COMPLETE){var ja=new Float32Array(1028);t.readPixels(0,0,257,1,t.RGBA,t.FLOAT,ja);t=0;var aa=-.5===k[0]&&1===(r[0]-k[0])/256?.5:0;for(m=0;m<Y;m++){var da=new Float32Array(257);var ra=new Float32Array(257);for(p=t=0;256>p;p++)t+=ja[4*p+m],da[p]=t,ra[p]=ja[4*p+m];ra[256]=ja[1024+m];
da[256]=t+ja[1024+m];var ca=this.functionArguments.minPercent*t/100;if(r){for(v=0;256>v;v++)if(da[v]>ca){a[m]=k[0]+(r[0]-k[0])/256*(v+aa);break}ca=(1-this.functionArguments.maxPercent/100)*t;for(v=254;0<=v;v--)if(da[v]<ca){e[m]=k[0]+(r[0]-k[0])/256*(v+2-aa);break}}}}return{histogram:ja,minCutOff:a,maxCutOff:e}}catch(fa){}},_setupHistTexture:function(a){if(a instanceof WebGLTexture)return a;var e=this.originalHistTexture=this._createTexture(),q=this.gl;a=a.pixelBlock;var t=a.width,u=a.height;q.getExtension("OES_texture_float");
this.rgbaFloatData=a.getAsRGBAFloat();q.texImage2D(q.TEXTURE_2D,0,q.RGBA,t,u,0,q.RGBA,q.FLOAT,this.rgbaFloatData);return e}})})},"esri/layers/rasterLib/function/RasterFunctionX":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/config ../raster/RasterInfo ../../../geometry/Extent ../../PixelBlock".split(" "),function(S,J,f,c,h,d){return S(null,{functionName:null,functionArguments:null,pixelType:"Unknown",rasterInfo:null,constructor:function(b){b&&(this.pixelType=b.outputPixelType||
b.OutputPixelType||this.pixelType,this.renderTexture=b.renderTexture,this._initFunction())},mixinIgnoreCase:function(b,a){var e=Object.keys(b),q=Object.keys(a),t,u,g=e.length;for(t=0;t<q.length;t++){var m=a[q[t]];if(null!=m)for(u=0;u<g;u++)if(e[u].toLowerCase()===q[t].toLowerCase()){b[e[u]]=m;break}}return b},bind:function(b){},setProcessingContext:function(b){if(!b)throw"cannot bind to layer without options";this.useWebGL=!!b.useWebGL;this._tileMode=!!b.tileMode;this._glSetting=b.glSetting;this._rawRasterInfo=
b.rawRasterInfo;this._xformSetting=b.xformSetting||this._xformSetting;if(!this.useWebGL||this._glSetting&&this._glSetting.gl){this.gl=this.useWebGL?this._glSetting.gl:null;this._glSetting&&(this._glSetting.pingpong=null,this._glSetting.branches=null);var a=this.functionArguments.raster,e=this.functionArguments.raster2,q=this.functionArguments.dem,t=this.functionArguments.fillRaster,u=this.functionArguments.rasters;a&&a.functionArguments&&a.setProcessingContext(b);e&&e.functionArguments&&e.setProcessingContext(b);
q&&q.functionArguments&&q.setProcessingContext(b);t&&t.functionArguments&&t.setProcessingContext(b);if(u)for(a=0;a<u.length;a++)u[a]&&u[a].functionArguments&&u[a].setProcessingContext(b);this.bind()}},updateBranchStructure:function(){var b=0,a=this.functionArguments;a.raster&&a.raster.read&&a.raster.functionArguments&&(b+=a.raster.updateBranchStructure());a.raster2&&a.raster2.read&&a.raster2.functionArguments&&(b+=a.raster2.updateBranchStructure(),a.raster2.isBranch=!0,a.raster&&a.raster.read&&(a.raster.isBranch=
!0));a.rasters&&(b=a.rasters.length,a.rasters.forEach(function(e){e.read&&e.functionArguments&&(e.isBranch=!0)}));a.dem&&a.dem.read&&a.dem.functionArguments&&(b+=a.dem.updateBranchStructure());return 1===b?0:b},read:function(b){b=this.processRasterArgument(b);return this.useWebGL?this.readGL(b):this.read2D(b)},hasTilingEffects:function(){return!1},read2D:function(){},readGL:function(){},getSourceRasterInfo:function(){var b,a={};if(this.functionArguments.raster2)a.functionArguments.raster=this._bindRaster(this.functionArguments.raster),
a.functionArguments.raster2=this._bindRaster(this.functionArguments.raster2);else if(this.functionArguments.rasters)for(a.rasters=[],b=0;b<this.functionArguments.rasters.length;b++)a.rasters[b]=this._bindRaster(this.functionArguments.rasters[b]);else a.raster=this._bindRaster(this.functionArguments.raster);return this.sourceRasterInfo=a},processRasterArgument:function(b){var a=this.bind();if(!0!==a)throw a;var e={};if(this.functionArguments.raster2)e.raster=this._readRaster(this.functionArguments.raster,
b),e.raster2=this._readRaster(this.functionArguments.raster2,b);else if(this.functionArguments.rasters)for(e.rasters=[],a=0;a<this.functionArguments.rasters.length;a++)e.rasters[a]=this._readRaster(this.functionArguments.rasters[a],b);else e.raster=this._readRaster(this.functionArguments.raster,b);return e},toJson:function(){var b=this.functionArguments,a=b.raster,e=b.raster2;b=b.rasters;a=a?a.toJson?a.toJson():a:null;e=e?e.toJson?e.toJson():e:null;var q;b&&0<b.length&&(q=b.map(function(t){return t.toJson?
t.toJson():t}));b=J.mixin({},this.functionArguments);b.raster=a;b.raster2=e;b.rasters=q;b=this._fixRasterFunctionJson(b);return{rasterFunction:this.functionName,rasterFunctionArguments:b,outputPixelType:this.pixelType}},_initFunction:function(b){},_getIntegerRange:function(b){switch(b){case "U8":var a=[0,255];break;case "U16":a=[0,65535];break;case "U32":a=[0,4294967295];break;case "S8":a=[-128,127];break;case "S16":a=[-32768,32767];break;case "S32":a=[-2147483648,2147483647]}return a},_calculatePixelType:function(b,
a){return b&&"unknown"!==b.toLowerCase()?b:a},_clonePixelData:function(b){if(null==b)return b;var a={};b.extent&&(a.extent=new h(b.extent.xmin,b.extent.ymin,b.extent.xmax,b.extent.ymax,b.extent.spatialReference));b=b.pixelBlock;if(null==b)return a;a.pixelBlock=b.clone?b.clone():d.prototype.clone(b);return a},_readRaster:function(b,a){if(null==b||"$$"===b)var e=this._clonePixelData(a.src[Object.keys(a.src)[0]]);else b&&b.rasterInfo&&!b.functionArguments?e=this._clonePixelData(a.src[b._rasterId]):isNaN(b)?
b.read&&(e=b.functionArguments?b.read(a):this._clonePixelData(a)):(e=a.src?a.src[Object.keys(a.src)[0]]:a,a=e.pixelBlock,a=new Float32Array(a.width*a.height),a.fill(parseFloat(b)),e=this._clonePixelData(e),e.pixelBlock.pixels=[a],e.isConstant=!0);return e},_bindRaster:function(b){if(b&&"$$"!==b)isNaN(b)?b.rasterInfo?a=b.rasterInfo:b.bind&&b.bind()&&(a=b.rasterInfo):a={};else var a=this._rawRasterInfo;a&&(a=a.clone?a.clone():new c(a),a.bandCount=a.bandCount||3);return a},_getOutputBand:function(b,
a){switch(b){case "U8":b=new Uint8Array(a);break;case "U16":b=new Uint16Array(a);break;case "U32":b=new Uint32Array(a);break;case "S8":b=new Int8Array(a);break;case "S16":b=new Int16Array(a);break;case "S32":b=new Int32Array(a);break;case "U32":b=new Uint32Array(a);break;case "F32":b=new Float32Array(a);break;case "F64":b=new Float64Array(a);break;default:b=new Float32Array(a)}return b},_clampBand:function(b,a,e){if(("F64"===a||"F32"===a)&&!e)return b;var q,t=this._getIntegerRange(a),u=b.length;if(t)for(e=
t[1],t=t[0],a=this._getOutputBand(a,u),q=0;q<u;q++){var g=b[q];a[q]=g>e?e:g<t?t:g}else a=b;return a},_performance:{start:function(){return this._start=self.performance&&self.performance.now()||new Date}.bind(this),elapsed:function(){return(self.performance&&self.performance.now()||new Date)-this._start}.bind(this)},_addPerformanceMetric:function(b){f.isDebug&&(self.rasterFunctionPerformance||(self.rasterFunctionPerformance=[]),self.rasterFunctionPerformance.push(b),50<self.rasterFunctionPerformance.length&&
self.rasterFunctionPerformance.shift())},_fixRasterFunctionJson:function(b){for(var a in b)b.hasOwnProperty(a)&&(null==b[a]?delete b[a]:b[a]instanceof Object&&!b[a].sourceType&&this._fixRasterFunctionJson(b[a],!0));return b}})})},"esri/layers/rasterLib/raster/RasterInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","../../../geometry/Extent","../../../SpatialReference","../tile/RasterTileInfo"],function(S,J,f,c,h){return S(null,{declaredClass:"esri.layers.rasterLib.raster.RasterInfo",
bandCount:null,pixelType:null,extent:null,spatialReference:null,width:null,height:null,colormap:null,attributeTable:null,multiDimensionalInfo:null,statistics:null,histograms:null,catalogInfo:null,keyProperties:null,cellSize:null,format:null,compression:null,compressionQuality:null,packetSize:null,geodataXform:null,constructor:function(d){J.mixin(this,d);this.extent=this.extent?this.extent.toJson?this.extent:new f(this.extent):null;this.spatialReference=this.spatialReference?this.spatialReference.toJson?
this.spatialReference:new c(this.spatialReference):null;this.tileInfo=this.tileInfo?this.tileInfo.toJson?this.tileInfo:new h(this.tileInfo):null},toJson:function(){return{bandCount:this.bandCount,pixelType:this.pixelType,extent:this.extent&&this.extent.toJson?this.extent.toJson():this.extent,spatialReference:this.spatialReference&&this.spatialReference.toJson?this.spatialReference.toJson():this.spatialReference,width:this.width,height:this.height,colormap:this.colormap?J.clone(this.colormap):null,
attributeTable:this.attributeTable?J.clone(this.attributeTable):null,multiDimensionalInfo:this.multiDimensionalInfo?J.clone(this.multiDimensionalInfo):null,statistics:this.statistics?J.clone(this.statistics):null,histograms:this.histograms?J.clone(this.histograms):null,catalogInfo:this.catalogInfo?J.clone(this.catalogInfo):null,keyProperties:this.keyProperties?J.clone(this.keyProperties):null,cellSize:this.cellSize&&this.cellSize.toJson?this.cellSize.toJson():this.cellSize,tileInfo:this.tileInfo&&
this.tileInfo.toJson?this.tileInfo.toJson():this.tileInfo,format:this.format,compression:this.compression,compressionQuality:this.compressionQuality,packetSize:this.packetSize,geodataXform:this.geodataXform?J.clone(this.geodataXform):null}},clone:function(){return new this.constructor(this.toJson())}})})},"esri/layers/rasterLib/tile/RasterTileInfo":function(){define("dojo/_base/declare dojo/_base/lang ../../../geometry/Extent ../../../SpatialReference ../../../geometry/Point ../../../lang ../../TileInfo".split(" "),
function(S,J,f,c,h,d,b){return S([b],{declaredClass:"esri.layers.rasterLib.tile.RasterTileInfo",rows:512,cols:512,compressionQuality:95,lercError:.01,spatialReference:null,origin:null,virtual:!0,tileType:"Raster",constructor:function(a,e){if(a||e){var q=e&&e.refTileInfo;a?this.virtual=!1:(this.virtual=!0,J.mixin(this,{rows:e.rows||this.rows,cols:e.cols||this.cols,compressionQuality:e.compressionQuality||95,lercError:e.compressionTolerance||.01,spatialReference:e.spatialReference,origin:e.origin}),
this.width=this.cols,this.height=this.rows,this.origin||(q?this.origin=q.origin:e.spatialReference.isWebMercator()||e.extent&&360<=Math.max(Math.abs(e.extent.xmin),Math.abs(e.extent.xmax))?this.origin={x:-2.0037508342787E7,y:2.0037508342787E7}:-1<[4326,4269].indexOf(e.spatialReference.wkid)||360>Math.max(Math.abs(e.extent.xmin),Math.abs(e.extent.xmax))?this.origin={x:-180,y:90}:this.origin={x:e.extent.xmin,y:e.extent.ymax}))}},toJson:function(){var a=b.prototype.toJson.apply(this);a.tileType=this.tileType;
a.virtual=this.virtual;a.lercError=this.lercError;return a},clone:function(){return new this.prototype(this.toJson())}})})},"esri/layers/rasterLib/function/vertexShaders":function(){define(["dojo/_base/declare","dojo/_base/lang","./vertexShaderScripts"],function(S,J,f){S={shaderType:"vertex",getShader:function(c,h){var d=c.createShader(c.VERTEX_SHADER);c.shaderSource(d,h);c.compileShader(d);c.getShaderParameter(d,c.COMPILE_STATUS)||(d=null);return d}};J.mixin(S,f);return S})},"esri/layers/rasterLib/function/vertexShaderScripts":function(){define([],
function(){return{basic:"varying vec2 v_texCoord;\nattribute vec2 a_texCoord;\nuniform vec2 u_xformOffset;\nuniform vec2 u_xformScale;\nuniform bool u_flipY;\nvoid main() {\nv_texCoord \x3d u_xformOffset + a_texCoord * u_xformScale;\nif (u_flipY) {\nv_texCoord.t \x3d 1.0 - v_texCoord.t;\n}\nvec2 position \x3d a_texCoord * 2.0 - 1.0;\ngl_Position \x3d vec4(position, 0.0, 1.0);\n}",histogram:"attribute float a_pixelIndex;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nuniform sampler2D u_image2;\nuniform vec2 u_sourceDim;\nuniform vec2 u_halfPixel;\nuniform vec4 u_bandSelection;\nuniform vec4 u_mins;\nuniform vec4 u_factors;\nuniform float u_size;\nuniform int u_bandCount;\nuniform bool u_minMaxTexture;\nvoid main() {\nfloat row \x3d a_pixelIndex/u_sourceDim.s;\nvec2 coord \x3d vec2(fract(row), floor(row)/u_sourceDim.t);\nvec4 pv \x3d texture2D(u_image, coord + u_halfPixel);\nvec4 minVal, maxVal, pvm;\nif (u_minMaxTexture){\nif (u_bandCount \x3d\x3d1){ //min \x3d red, max \x3d green\nvec4 minmax \x3d texture2D(u_image1, vec2(0.5,0.5));\nminVal \x3d vec4(minmax.r, minmax.r, minmax.r, 0.0);\nmaxVal \x3d vec4(minmax.g, minmax.g, minmax.g, 0.0);\n}\nelse if (u_bandCount \x3d\x3d3){ //min \x3d red, max \x3d green\nminVal \x3d texture2D(u_image1, vec2(0.5,0.5));\nmaxVal \x3d texture2D(u_image2, vec2(0.5,0.5));\n}\nvec4 factors \x3d u_size/(maxVal-minVal+vec4(0.0,0.0,0.0,1.0)) * u_factors;\npvm \x3d (pv - minVal) * factors;\n}\nelse {\npvm \x3d (pv - u_mins) * u_factors;\n}\nfloat histVal \x3d min(floor(pvm.r+pvm.g+pvm.b), u_size-1.0);\nhistVal \x3d pv.a \x3d\x3d 1.0? histVal: u_size;\ngl_Position \x3d vec4((histVal+0.1) / (u_size+1.0) * 2.0 - 1.0, 0.5, 0, 1);\ngl_PointSize \x3d 1.0;\n}",
mesh:"varying vec2 v_texCoord;\nattribute vec2 a_texCoord;\nuniform bool u_drawMeshLines;\nuniform bool u_flipY;\nuniform vec2 u_xformOffset;\nuniform vec2 u_xformScale;\nuniform sampler2D u_transformGrid;\nuniform vec2 u_transformSpacing;\nuniform vec2 u_transformGridSize;\nuniform vec2 u_targetImageSize;\nuniform vec2 u_srcImageSize;\nuniform bool u_projection;\nvec2 projectPixelLocation(vec2 coords) {\nvec2 index_image \x3d floor(coords * u_targetImageSize);\nvec2 oneTransformPixel \x3d vec2(0.25 / u_transformGridSize.s, 1.0 / u_transformGridSize.t);\nvec2 index_transform \x3d floor(index_image / u_transformSpacing) / u_transformGridSize;\nvec2 pos \x3d fract((index_image + vec2(0.5, 0.5)) / u_transformSpacing);\nvec2 srcLocation;\nvec2 transform_location \x3d index_transform + oneTransformPixel * 0.5;\nif (pos.s \x3c\x3d pos.t) {\nvec4 ll_abc \x3d texture2D(u_transformGrid, vec2(transform_location.s, transform_location.t));\nvec4 ll_def \x3d texture2D(u_transformGrid, vec2(transform_location.s + oneTransformPixel.s, transform_location.t));\nsrcLocation.s \x3d dot(ll_abc.rgb, vec3(pos, 1.0));\nsrcLocation.t \x3d dot(ll_def.rgb, vec3(pos, 1.0));\n} else {\nvec4 ur_abc \x3d texture2D(u_transformGrid, vec2(transform_location.s + 2.0 * oneTransformPixel.s, transform_location.t));\nvec4 ur_def \x3d texture2D(u_transformGrid, vec2(transform_location.s + 3.0 * oneTransformPixel.s, transform_location.t));\nsrcLocation.s \x3d dot(ur_abc.rgb, vec3(pos, 1.0));\nsrcLocation.t \x3d dot(ur_def.rgb, vec3(pos, 1.0));\n}\nreturn srcLocation;// + halfPixel;\n}\nvoid main() {\nif (u_projection) {\nv_texCoord \x3d projectPixelLocation(a_texCoord);\n} else {\nv_texCoord \x3d u_xformOffset + a_texCoord * u_xformScale;\n}\nif (u_flipY) {\nv_texCoord.t \x3d 1.0 - v_texCoord.t;\n}\nvec2 position \x3d a_texCoord * 2.0 - 1.0;\nif (u_drawMeshLines){\nvec2 adjustedPos \x3d (v_texCoord - u_xformOffset) / u_xformScale;\ngl_Position \x3d vec4( adjustedPos * 2.0 - 1.0, 0.0, 1.0);\n}\nelse {\ngl_Position \x3d vec4(position, 0.0, 1.0);\n}\n}"}})},
"esri/layers/rasterLib/function/pixelShaders":function(){define(["dojo/_base/declare","dojo/_base/lang","./pixelShaderScripts"],function(S,J,f){S={shaderType:"fragment",getShader:function(c,h){var d=c.createShader(c.FRAGMENT_SHADER);c.shaderSource(d,h);c.compileShader(d);c.getShaderParameter(d,c.COMPILE_STATUS)||(d=null);return d}};J.mixin(S,f);return S})},"esri/layers/rasterLib/function/pixelShaderScripts":function(){define([],function(){return{aspect:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec2 u_resolution;\nuniform vec2 u_cellSize;\nfloat getNeighborHoodAlpha(float a, float b, float c, float d, float e, float f, float g, float h, float i){\nif (a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0 || a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0 || a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0) {\nreturn 0.0;\n}\nelse {\nreturn e;\n}\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\nfloat pi \x3d 3.141592653589793238;\nfloat dz_dx \x3d 0.0;\nfloat dz_dy \x3d 0.0;\nvec4 va, vb, vc,vd,ve,vf,vg,vh,vi;\nvec2 axy \x3d vec2(-1.0,-1.0);\nvec2 bxy \x3d vec2(0.0, -1.0);\nvec2 cxy \x3d vec2(1.0, -1.0);\nvec2 dxy \x3d vec2(-1.0, 0.0);\nvec2 fxy \x3d vec2(1.0, 0.0);\nvec2 gxy \x3d vec2(-1.0, 1.0);\nvec2 hxy \x3d vec2(0.0, 1.0);\nvec2 ixy \x3d vec2(1.0, 1.0);\nif (v_texCoord.s \x3c u_resolution.s)\n{\naxy[0] \x3d 1.0;\ndxy[0] \x3d 1.0;\ngxy[0] \x3d 1.0;\n}\nif (v_texCoord.t \x3c u_resolution.t)\n{\naxy[1] \x3d 1.0;\nbxy[1] \x3d 1.0;\ncxy[1] \x3d 1.0;\n}\nif (v_texCoord.s \x3e1.0-u_resolution.s)\n{\ncxy[0] \x3d -1.0;\nfxy[0] \x3d -1.0;\nixy[0] \x3d -1.0;\n}\nif (v_texCoord.t \x3e 1.0- u_resolution.t)\n{\ngxy[1] \x3d -1.0;\nhxy[1] \x3d -1.0;\nixy[1] \x3d -1.0;\n}\nif (v_texCoord.s \x3e\x3d u_resolution.s \x26\x26 (1.0-u_resolution.s)\x3e\x3dv_texCoord.s \x26\x26 v_texCoord.t \x3e\x3d u_resolution.t \x26\x26 (1.0-u_resolution.t)\x3e\x3dv_texCoord.t)\n{\nva \x3d texture2D(u_image, v_texCoord + u_resolution* axy);\nvb \x3d texture2D(u_image, v_texCoord + u_resolution* bxy);\nvc \x3d texture2D(u_image, v_texCoord + u_resolution* cxy);\nvd \x3d texture2D(u_image, v_texCoord + u_resolution* dxy);\nve \x3d texture2D(u_image, v_texCoord + u_resolution* vec2(0, 0));\nvf \x3d texture2D(u_image, v_texCoord + u_resolution* fxy);\nvg \x3d texture2D(u_image, v_texCoord + u_resolution* gxy);\nvh \x3d texture2D(u_image, v_texCoord + u_resolution* hxy);\nvi \x3d texture2D(u_image, v_texCoord + u_resolution* ixy);\n}\ndz_dx \x3d (vc+2.0*vf+vi - va - 2.0*vd - vg).r/(8.0*u_cellSize[0]);\ndz_dy \x3d -(vg+2.0*vh+vi - va - 2.0*vb - vc).r/(8.0*u_cellSize[1]);\nfloat alpha \x3d getNeighborHoodAlpha(va.a, vb.a, vc.a, vd.a, ve.a, vf.a, vg.a, vh.a, vi.a);\nfloat aspect_rad \x3d 0.0;\nif (dz_dx \x3d\x3d 0.0)\n{\nif (dz_dy \x3e 0.0)\naspect_rad \x3d 0.5 * pi;\nelse if (dz_dy \x3c 0.0)\naspect_rad \x3d 1.5 * pi;\nelse\nalpha \x3d 0.0;//undefined make it nodata\n}\nelse\n{\naspect_rad \x3d 0.5*pi + atan(dz_dy, -dz_dx);\nif (aspect_rad \x3c 0.0)\naspect_rad \x3d 2.0*pi + aspect_rad;\n}\nfloat aspect \x3d aspect_rad * 180.0 / pi;\ngl_FragColor \x3d vec4(aspect, aspect, aspect, alpha);\n}",
bandArithmetic:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform int u_bandId_nir;\nuniform int u_bandId_red;\nuniform bool u_scaled;\nuniform int u_bandCount;\nuniform int u_method;\nuniform float u_constants[6];\nvec4 calculateNDVI() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(u_bandId_red \x3d\x3d 0 ? currentPixel.r : (u_bandId_red \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat nir \x3d float(u_bandId_nir \x3d\x3d 0 ? currentPixel.r : (u_bandId_nir \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat ndvi_denom \x3d nir + red;\nfloat ndvi;\nif (ndvi_denom \x3d\x3d 0.0) {\nndvi \x3d 0.0;\n} else {\nndvi \x3d (nir - red) / ndvi_denom;\nif (u_scaled) {\nndvi \x3d float(floor(ndvi * 100.0 + 100.5));\n}\n}\nreturn vec4(ndvi, ndvi, ndvi, currentPixel.a);\n}\nvec4 calculateSAVI() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(u_bandId_red \x3d\x3d 0 ? currentPixel.r : (u_bandId_red \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat nir \x3d float(u_bandId_nir \x3d\x3d 0 ? currentPixel.r : (u_bandId_nir \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat savi_denom \x3d nir + red + u_constants[0];\nfloat savi;\nif (savi_denom \x3d\x3d 0.0) {\nsavi \x3d 0.0;\n} else {\nsavi \x3d (nir - red) / savi_denom * (1.0 + u_constants[0]);\n}\nreturn vec4(savi, savi, savi, currentPixel.a);\n}\nvec4 calculateMSAVI() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(u_bandId_red \x3d\x3d 0 ? currentPixel.r : (u_bandId_red \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat nir \x3d float(u_bandId_nir \x3d\x3d 0 ? currentPixel.r : (u_bandId_nir \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat msavi \x3d 0.5 * (2.0 * (nir + 1.0) - sqrt(pow((2.0 * nir + 1.0), 2.0) - 8.0 * (nir - red)));\nreturn vec4(msavi, msavi, msavi, currentPixel.a);\n}\nvec4 calculateTSAVI() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(u_bandId_red \x3d\x3d 0 ? currentPixel.r : (u_bandId_red \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat nir \x3d float(u_bandId_nir \x3d\x3d 0 ? currentPixel.r : (u_bandId_nir \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat s \x3d u_constants[0];\nfloat a \x3d u_constants[1];\nfloat x \x3d u_constants[2];\nfloat tsavi_denom \x3d a * nir + red - a * s + x * (1.0 + s * s);\nfloat tsavi;\nif (tsavi_denom \x3d\x3d 0.0) {\ntsavi \x3d 0.0;\n} else {\ntsavi \x3d s * (nir - s * red - a) / tsavi_denom;\n}\nreturn vec4(tsavi, tsavi, tsavi, currentPixel.a);\n}\nvec4 calculatePVI() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(u_bandId_red \x3d\x3d 0 ? currentPixel.r : (u_bandId_red \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat nir \x3d float(u_bandId_nir \x3d\x3d 0 ? currentPixel.r : (u_bandId_nir \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat a \x3d u_constants[0];\nfloat b \x3d u_constants[1];\nfloat pvi \x3d (nir - a * red - b) / sqrt(1.0 + a * 2.0);\nreturn vec4(pvi, pvi, pvi, currentPixel.a);\n}\nvec4 calculateGEMI() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(u_bandId_red \x3d\x3d 0 ? currentPixel.r : (u_bandId_red \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat nir \x3d float(u_bandId_nir \x3d\x3d 0 ? currentPixel.r : (u_bandId_nir \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat gemi;\nif (red \x3d\x3d 1.0) {\ngemi \x3d 0.0;\n} else {\nfloat eta \x3d (2.0 * (nir * nir - red * red) + 1.5 * nir + 0.5 * red) / (nir + red + 0.5);\nfloat gemi \x3d eta * (1.0 - 0.25*eta) - (red - 0.125) / (1.0 - red);\n}\nreturn vec4(gemi, gemi, gemi, currentPixel.a);\n}\nvec4 calculateVARI() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(currentPixel.r);\nfloat green \x3d float(currentPixel.g);\nfloat blue \x3d float(currentPixel.b);\nfloat vari \x3d (green - red) /(green + red - blue);\nreturn vec4(vari, vari, vari, currentPixel.a);\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\nvec4 pv;\nif (u_method \x3c 4) {\nif (u_method \x3d\x3d 1) {\npv \x3d calculateNDVI();\n} else if (u_method \x3d\x3d 2) {\npv \x3d calculateSAVI();\n} else if (u_method \x3d\x3d 3) {\npv \x3d calculateTSAVI();\n} else if (u_method \x3d\x3d 4) {\npv \x3d calculateMSAVI();\n}\n} else {\nif (u_method \x3d\x3d 5) {\npv \x3d calculateGEMI();\n} else if (u_method \x3d\x3d 6) {\npv \x3d calculatePVI();\n} else if (u_method \x3d\x3d 7) {\npv \x3d calculateGEMI();\n} else if (u_method \x3d\x3d 9) {\npv \x3d calculateVARI();\n}\n}\ngl_FragColor \x3d pv;\n}",
colormap:"precision mediump float;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nvarying vec2 v_texCoord;\nuniform float u_indexedColormapOffset;\nuniform float u_indexedColormapMaxIndex;\nvec4 colorize() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat clrIndex \x3d currentPixel.r - u_indexedColormapOffset;\nvec4 result;\nif (currentPixel.a \x3d\x3d 0.0 || clrIndex \x3e u_indexedColormapMaxIndex) {\nresult \x3d vec4(0.0, 0.0, 0.0, 0.0);\n}\nelse {\nvec2 clrPosition \x3d vec2(clrIndex / u_indexedColormapMaxIndex, 0.0);\nvec4 color \x3d texture2D(u_image1, clrPosition);\nresult \x3d vec4(color.r, color.g, color.b, color.a);\n}\nreturn result;\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d colorize();\n}",
compositeBand:"precision mediump float;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nuniform sampler2D u_image2;\nvarying vec2 v_texCoord;\nuniform int u_rasterCount;\nvec4 composite() {\nvec4 p0, p1, p2;\np0 \x3d texture2D(u_image, v_texCoord);\nvec4 result;\nif (u_rasterCount \x3d\x3d 1){\nresult \x3d p0;\n}\nelse if (u_rasterCount \x3d\x3d 2){\np1 \x3d texture2D(u_image1, v_texCoord);\nresult \x3d vec4(p0.r,p1.r,0.0,min(p0.a,p1.a));\n}\nelse if (u_rasterCount \x3d\x3d 3){\np1 \x3d texture2D(u_image1, v_texCoord);\np2 \x3d texture2D(u_image2, v_texCoord);\nresult \x3d vec4(p0.r,p1.r,p2.r,min(min(p0.a,p1.a),p2.a));\n}\nreturn result;\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d composite();\n}",
constant:"precision mediump float;\nuniform vec4 u_color;\nvoid main() {\ngl_FragColor \x3d u_color;\n}",contrastBrightness:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform float u_contrastOffset;\nuniform float u_brightnessOffset;\nuniform float u_scaleFactor;\nvec4 adjustContrastBrightness() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat c \x3d u_contrastOffset;\nfloat b \x3d u_brightnessOffset;\nfloat maxI \x3d 255.0;\nfloat mid \x3d 128.0;\nvec4 v;\nif (c \x3e 0.0 \x26\x26 c \x3c 100.0) {\nv \x3d (200.0 * currentPixel - 100.0 * maxI + 2.0 * maxI * b) / (2.0 * (100.0 - c)) + mid;\n} else if (c \x3c\x3d 0.0 \x26\x26 c \x3e -100.0) {\nv \x3d (200.0 * currentPixel - 100.0 * maxI + 2.0 * maxI * b) * (100.0 + c) / 20000.0 + mid;\n} else if (c \x3d\x3d 100.0) {\nv \x3d (200.0 * currentPixel - 100.0 * maxI + (maxI + 1.0) * (100.0 - c) + 2.0 * maxI * b);\nv \x3d (sign(v) + 1.0) / 2.0; //binary contrast with extra mid tone at 0.5\n} else if (c \x3d\x3d -100.0) {\nv \x3d vec4(mid, mid, mid, currentPixel.a); //no contrast\n}\nreturn vec4(v.r / u_scaleFactor, v.g / u_scaleFactor, v.b / u_scaleFactor, currentPixel.a);\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d adjustContrastBrightness();\n}",
convolution:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec2 u_resolution;\nuniform float u_kernel[25];\nuniform int u_kernelSize;\nvec4 convolve33(){\nvec4 vp11, vp12, vp13, vp21, vp22, vp23, vp31, vp32, vp33;\nvec2 xy11 \x3d vec2(-1.0, -1.0);\nvec2 xy12 \x3d vec2(0.0, -1.0);\nvec2 xy13 \x3d vec2(1.0, -1.0);\nvec2 xy21 \x3d vec2(-1.0, 0.0);\nvec2 xy23 \x3d vec2(1.0, 0.0);\nvec2 xy31 \x3d vec2(-1.0, 1.0);\nvec2 xy32 \x3d vec2(0.0, 1.0);\nvec2 xy33 \x3d vec2(1.0, 1.0);\nif (v_texCoord.s \x3c u_resolution.s) {\nxy11[0] \x3d 1.0;\nxy21[0] \x3d 1.0;\nxy31[0] \x3d 1.0;\n}\nif (v_texCoord.t \x3c u_resolution.t) {\nxy11[1] \x3d 1.0;\nxy12[1] \x3d 1.0;\nxy13[1] \x3d 1.0;\n}\nif (v_texCoord.s \x3e 1.0 - u_resolution.s) {\nxy13[0] \x3d -1.0;\nxy23[0] \x3d -1.0;\nxy33[0] \x3d -1.0;\n}\nif (v_texCoord.t \x3e 1.0 - u_resolution.t) {\nxy31[1] \x3d -1.0;\nxy32[1] \x3d -1.0;\nxy33[1] \x3d -1.0;\n}\nvec4 convolResult \x3d\ntexture2D(u_image, v_texCoord + u_resolution * xy11) * u_kernel[0] +\ntexture2D(u_image, v_texCoord + u_resolution * xy12) * u_kernel[1] +\ntexture2D(u_image, v_texCoord + u_resolution * xy13) * u_kernel[2] +\ntexture2D(u_image, v_texCoord + u_resolution * xy21) * u_kernel[3] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(0, 0)) * u_kernel[4] +\ntexture2D(u_image, v_texCoord + u_resolution * xy23) * u_kernel[5] +\ntexture2D(u_image, v_texCoord + u_resolution * xy31) * u_kernel[6] +\ntexture2D(u_image, v_texCoord + u_resolution * xy32) * u_kernel[7] +\ntexture2D(u_image, v_texCoord + u_resolution * xy33) * u_kernel[8];\nreturn vec4(convolResult.rgb, texture2D(u_image, v_texCoord).a);\n}\nvec4 convolve55(){\nvec4 vp11, vp12, vp13, vp21, vp22, vp23, vp31, vp32, vp33;\nfloat xdif[5];//https://www.opengl.org/wiki/Data_Type_(GLSL) array constructor ES3.0\nfloat ydif[5];\nfloat a \x3d -2.0;\nfor (int i\x3d0; i\x3c5; i++){\nxdif[i] \x3d a;\nydif[i] \x3d a;\na++;\n}\nif (v_texCoord.s \x3c u_resolution.s *2.0) { //2 pixel\nxdif[0] \x3d 2.0;\nif (v_texCoord.s \x3c u_resolution.s) { //1 pixel\nxdif[1] \x3d 1.0;\n}\n}\nelse if (v_texCoord.s \x3e 1.0 - u_resolution.s *2.0) {\nxdif[0] \x3d -2.0;\nif (v_texCoord.s \x3e 1.0 - u_resolution.s) {\nxdif[1] \x3d -1.0;\n}\n}\nif (v_texCoord.t \x3c u_resolution.t *2.0) {\nydif[0] \x3d 2.0;\nif (v_texCoord.t \x3c u_resolution.t) {\nydif[1] \x3d 1.0;\n}\n}\nelse if (v_texCoord.t \x3e 1.0 - u_resolution.t*2.0) {\nydif[0] \x3d -2.0;\nif (v_texCoord.t \x3e 1.0 - u_resolution.t) {\nydif[1] \x3d -1.0;\n}\n}\nvec4 convolResult \x3d\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[0], ydif[0])) * u_kernel[0] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[1], ydif[0])) * u_kernel[1] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[2], ydif[0])) * u_kernel[2] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[3], ydif[0])) * u_kernel[3] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[4], ydif[0])) * u_kernel[4] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[0], ydif[1])) * u_kernel[5] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[1], ydif[1])) * u_kernel[6] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[2], ydif[1])) * u_kernel[7] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[3], ydif[1])) * u_kernel[8] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[4], ydif[1])) * u_kernel[9] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[0], ydif[2])) * u_kernel[10] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[1], ydif[2])) * u_kernel[11] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[2], ydif[2])) * u_kernel[12] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[3], ydif[2])) * u_kernel[13] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[4], ydif[2])) * u_kernel[14] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[0], ydif[3])) * u_kernel[15] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[1], ydif[3])) * u_kernel[16] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[2], ydif[3])) * u_kernel[17] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[3], ydif[3])) * u_kernel[18] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[4], ydif[3])) * u_kernel[19] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[0], ydif[4])) * u_kernel[20] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[1], ydif[4])) * u_kernel[21] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[2], ydif[4])) * u_kernel[22] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[3], ydif[4])) * u_kernel[23] +\ntexture2D(u_image, v_texCoord + u_resolution * vec2(xdif[4], ydif[4])) * u_kernel[24];\nreturn vec4(convolResult.rgb, texture2D(u_image, v_texCoord).a);\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\nif (u_kernelSize \x3d\x3d 9){\ngl_FragColor \x3d convolve33();\n}\nelse {\ngl_FragColor \x3d convolve55();\n}\n}",
extractBand:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform int u_bandIDs[3];\nuniform bool u_alterBand;\nvec4 extractBand() {\nvec4 p \x3d texture2D(u_image, v_texCoord);\nif (!u_alterBand){\nreturn p;\n}\nfloat r, g, b;\nif (u_bandIDs[0] \x3d\x3d0){\nr \x3d p.r;\n}\nelse if (u_bandIDs[0] \x3d\x3d1){\nr \x3d p.g;\n}\nelse if (u_bandIDs[0] \x3d\x3d2){\nr \x3d p.b;\n}\nif (u_bandIDs[1] \x3d\x3d0){\ng \x3d p.r;\n}\nelse if (u_bandIDs[1] \x3d\x3d1){\ng \x3d p.g;\n}\nelse if (u_bandIDs[1] \x3d\x3d2){\ng \x3d p.b;\n}\nif (u_bandIDs[2] \x3d\x3d0){\nb \x3d p.r;\n}\nelse if (u_bandIDs[2] \x3d\x3d1){\nb \x3d p.g;\n}\nelse if (u_bandIDs[2] \x3d\x3d2){\nb \x3d p.b;\n}\nreturn vec4(r, g, b, p.a);\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d extractBand();\n}",
hillshade:"precision mediump float;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nvarying vec2 v_texCoord;\nuniform vec2 u_resolution;\nuniform int u_slopeType;\nuniform int u_hillshadeType;\nuniform int u_lightSourceCount;\nuniform float u_sinZcosA;\nuniform float u_sinZsinA;\nuniform float u_cosZ;\nuniform float u_sinZcosAs[6];\nuniform float u_sinZsinAs[6];\nuniform float u_cosZs[6];\nuniform float u_weights[6];\nuniform float u_xFactor;\nuniform float u_yFactor;\nuniform bool u_scaled;\nuniform float u_minValue;\nuniform float u_maxValue;\nuniform bool u_applyColorramp;\nuniform float u_indexedColormapOffset;\nuniform float u_indexedColormapMaxIndex;\nuniform vec2 u_rawResolution;\nuniform int u_resampling;\nvec4 getPixelValue(vec2 coords) {\nif (u_resampling \x3d\x3d 0) {\nreturn texture2D(u_image, coords);\n}\nvec2 pos_ul \x3d floor(coords / u_rawResolution) * u_rawResolution;\nvec2 pos_ur \x3d pos_ul + vec2(1.0, 0.0) * u_rawResolution;\nvec2 pos_ll \x3d pos_ul + vec2(0.0, 1.0) * u_rawResolution;\nvec2 pos_lr \x3d pos_ul + vec2(1.0, 1.0) * u_rawResolution;\nvec2 weight \x3d fract(coords / u_rawResolution);\nvec4 vp_ul \x3d texture2D(u_image, pos_ul);\nvec4 vp_ur \x3d texture2D(u_image, pos_ur);\nvec4 vp_ll \x3d texture2D(u_image, pos_ll);\nvec4 vp_lr \x3d texture2D(u_image, pos_lr);\nvec4 vp \x3d mix(mix(vp_ul, vp_ur, weight.x), mix(vp_ll, vp_lr, weight.x), weight.y);\nreturn vp;\n}\nfloat getNeighborHoodAlpha(float a, float b, float c, float d, float e, float f, float g, float h, float i){\nif (a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0 || a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0 || a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0) {\nreturn 0.0;\n}\nelse {\nreturn e;\n}\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvec3 rgb2hsv(vec3 c) {\nvec4 K \x3d vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\nvec4 p \x3d c.g \x3c c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\nvec4 q \x3d c.r \x3c p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\nfloat d \x3d q.x - min(q.w, q.y);\nfloat e \x3d 1.0e-10;\nreturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);\n}\nvec3 hsv2rgb(vec3 c) {\nvec4 K \x3d vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\nvec3 p \x3d abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\nreturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\nvec4 overlay(float val, float minValue, float maxValue, float hillshade, float alpha) {\nfloat clrIndex \x3d clamp((val - minValue) / (maxValue - minValue), 0.0, 1.0);\nvec4 rgb \x3d texture2D(u_image1, vec2(clrIndex, 0.0));\nvec3 hsv \x3d rgb2hsv(rgb.xyz);\nhsv.z \x3d hillshade;\nreturn vec4(hsv2rgb(hsv) * alpha, alpha);\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\nvec4 va, vb, vc, vd, ve, vf, vg, vh, vi;\nvec2 axy \x3d vec2(-1.0, -1.0);\nvec2 bxy \x3d vec2(0.0, -1.0);\nvec2 cxy \x3d vec2(1.0, -1.0);\nvec2 dxy \x3d vec2(-1.0, 0.0);\nvec2 fxy \x3d vec2(1.0, 0.0);\nvec2 gxy \x3d vec2(-1.0, 1.0);\nvec2 hxy \x3d vec2(0.0, 1.0);\nvec2 ixy \x3d vec2(1.0, 1.0);\nif (v_texCoord.s \x3c u_resolution.s) {\naxy[0] \x3d 1.0;\ndxy[0] \x3d 1.0;\ngxy[0] \x3d 1.0;\n}\nif (v_texCoord.t \x3c u_resolution.t) {\naxy[1] \x3d 1.0;\nbxy[1] \x3d 1.0;\ncxy[1] \x3d 1.0;\n}\nif (v_texCoord.s \x3e 1.0 - u_resolution.s) {\ncxy[0] \x3d -1.0;\nfxy[0] \x3d -1.0;\nixy[0] \x3d -1.0;\n}\nif (v_texCoord.t \x3e 1.0 - u_resolution.t) {\ngxy[1] \x3d -1.0;\nhxy[1] \x3d -1.0;\nixy[1] \x3d -1.0;\n}\nva \x3d texture2D(u_image, v_texCoord + u_resolution * axy);\nvb \x3d texture2D(u_image, v_texCoord + u_resolution * bxy);\nvc \x3d texture2D(u_image, v_texCoord + u_resolution * cxy);\nvd \x3d texture2D(u_image, v_texCoord + u_resolution * dxy);\nve \x3d texture2D(u_image, v_texCoord + u_resolution * vec2(0, 0));\nvf \x3d texture2D(u_image, v_texCoord + u_resolution * fxy);\nvg \x3d texture2D(u_image, v_texCoord + u_resolution * gxy);\nvh \x3d texture2D(u_image, v_texCoord + u_resolution * hxy);\nvi \x3d texture2D(u_image, v_texCoord + u_resolution * ixy);\nfloat alpha \x3d getNeighborHoodAlpha(va.a, vb.a, vc.a, vd.a, ve.a, vf.a, vg.a, vh.a, vi.a);\nfloat dzx \x3d (vc + 2.0 * vf + vi - va - 2.0 * vd - vg).r * u_xFactor;\nfloat dzy \x3d (vg + 2.0 * vh + vi - va - 2.0 * vb - vc).r * u_yFactor; //flip\nfloat s2 \x3d sqrt(1.0 + dzx * dzx + dzy * dzy);\nfloat hillshade \x3d 0.0;\nif (u_hillshadeType \x3d\x3d 0){\nfloat cosDelta \x3d u_sinZsinA * dzy - u_sinZcosA * dzx;\nfloat z \x3d (u_cosZ + cosDelta) / s2;\nif (z \x3c 0.0)  z \x3d 0.0;\nhillshade \x3d z;\n}\nelse if (u_hillshadeType \x3d\x3d 1){\nfor (int k \x3d 0; k \x3c 6; k++) {\nfloat cosDelta \x3d u_sinZsinAs[k] * dzy - u_sinZcosAs[k] * dzx;\nfloat z \x3d (u_cosZs[k] + cosDelta) / s2;\nif (z \x3c 0.0) z \x3d 0.0;\nhillshade \x3d hillshade + z * u_weights[k];\nif (k \x3d\x3d u_lightSourceCount-1) break;\n}\n}\nif (u_applyColorramp) {\nvec4 result \x3d overlay(ve.r, u_minValue, u_maxValue, hillshade, alpha);\nif (u_scaled) {\nresult \x3d vec4(result.rgb * 255.0, result.a);\n}\ngl_FragColor \x3d result;\n} else {\nif (u_scaled) {\nhillshade \x3d hillshade * 255.0;\nif (hillshade\x3e 255.0) {\nhillshade \x3d 255.0;\n}\n}\ngl_FragColor \x3d vec4(hillshade, hillshade, hillshade, alpha);\n}\n}",
identity:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform int u_bandCount;\nfloat shift_right(float v, float amt) {\nv \x3d floor(v) + 0.5;\nreturn floor(v / exp2(amt));\n}\nfloat shift_left(float v, float amt) {\nreturn floor(v * exp2(amt) + 0.5);\n}\nfloat mask_last(float v, float bits) {\nreturn mod(v, shift_left(1.0, bits));\n}\nfloat extract_bits(float num, float from, float to) {\nfrom \x3d floor(from + 0.5);\nto \x3d floor(to + 0.5);\nreturn mask_last(shift_right(num, from), to - from);\n}\nvec4 encode_float(float val) {\nif (val \x3d\x3d 0.0)\nreturn vec4(0, 0, 0, 0);\nfloat sign \x3d val \x3e 0.0 ? 0.0 : 1.0;\nval \x3d abs(val);\nfloat exponent \x3d floor(log2(val));\nfloat biased_exponent \x3d exponent + 127.0;\nfloat fraction \x3d ((val / exp2(exponent)) - 1.0) * 8388608.0;\nfloat t \x3d biased_exponent / 2.0;\nfloat last_bit_of_biased_exponent \x3d fract(t) * 2.0;\nfloat remaining_bits_of_biased_exponent \x3d floor(t);\nfloat byte4 \x3d extract_bits(fraction, 0.0, 8.0) / 255.0;\nfloat byte3 \x3d extract_bits(fraction, 8.0, 16.0) / 255.0;\nfloat byte2 \x3d (last_bit_of_biased_exponent * 128.0 + extract_bits(fraction, 16.0, 23.0)) / 255.0;\nfloat byte1 \x3d (sign * 128.0 + remaining_bits_of_biased_exponent) / 255.0;\nreturn vec4(byte4, byte3, byte2, byte1);\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\nvec4 currentPixel \x3d  texture2D(u_image, v_texCoord);\ngl_FragColor \x3d vec4( currentPixel.rgb, currentPixel.a); //encode_float(currentPixel.r);\n}",
local:"precision mediump float;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nuniform sampler2D u_image2;\nvarying vec2 v_texCoord;\nuniform int u_rasterCount;\nvec4 polyfill;\nvec4 localOp1() {\nvec4 a \x3d texture2D(u_image, v_texCoord);\nvec4 result;\nvec4 replaceme1;\nreturn result;\n}\nvec4 localOp2() {\nvec4 a \x3d texture2D(u_image, v_texCoord);\nvec4 b \x3d texture2D(u_image1, v_texCoord);\nvec4 result;\nvec4 replaceme2;\nreturn result;\n}\nvec4 localOp3() {\nvec4 a \x3d texture2D(u_image, v_texCoord);\nvec4 b \x3d texture2D(u_image1, v_texCoord);\nvec4 c \x3d texture2D(u_image2, v_texCoord);\nvec4 result;\nvec4 replaceme3;\nreturn result;\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d localOp1();\n}",
local0:"precision mediump float;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_texCoord;\nuniform float u_minCutOff[3];\nuniform float u_maxCutOff[3];\nuniform float u_minOutput[3];\nuniform float u_maxOutput[3];\nuniform float u_factor[3];\nuniform int u_operation;\nuniform int u_constant[3];\nuniform vec4 gamma;\nfloat localOperate1(float a, float b, float c){\nfloat result;\nif (u_operation \x3d\x3d 1){\nresult \x3d a + b;\n}\nelse if (u_operation \x3d\x3d 2){\nresult \x3d a - b;\n}\nelse if (u_operation \x3d\x3d3){\nresult \x3d a * b;\n}\nelse if (u_operation \x3d\x3d4){\nresult \x3d sqrt(a);\n}\nelse if (u_operation \x3d\x3d5){\nresult \x3d pow(a, b);\n}\nelse if (u_operation \x3d\x3d6){\nresult \x3d acos(a);\n}\nelse if (u_operation \x3d\x3d7){\nresult \x3d asin(a);\n}\nelse if (u_operation \x3d\x3d8){\nresult \x3d atan(a);\n}\nelse if (u_operation \x3d\x3d9){\nresult \x3d 999.0; //atanh not available\n}\nelse if (u_operation \x3d\x3d10){\nresult \x3d abs(a);\n}\nelse if (u_operation \x3d\x3d13){\nresult \x3d 999.0; //bitwise not available\n}\nelse if (u_operation \x3d\x3d17){\nresult \x3d a !\x3d 0.0 \x26\x26 b !\x3d0.0;\n}\nelse if (u_operation \x3d\x3d18){\nresult \x3d a \x3d\x3d0.0? 1.0:0.0;\n}\nelse if (u_operation \x3d\x3d19){\nresult \x3d a !\x3d 0.0 || b !\x3d0.0;\n}\nelse if (u_operation \x3d\x3d20){\nresult \x3d a !\x3d 0.0 ^^ b !\x3d0.0; //exclusive or\n}\nelse if (u_operation \x3d\x3d21){\nresult \x3d cos(a);\n}\nelse if (u_operation \x3d\x3d23){\nresult \x3d a / b;\n}\nelse if (u_operation \x3d\x3d24){\nresult \x3d a \x3d\x3d b ? 1.0:0.0;\n}\nelse if (u_operation \x3d\x3d25){\nresult \x3d exp(a);\n}\nelse if (u_operation \x3d\x3d26){\nresult \x3d pow(10.0, a);\n}\nelse if (u_operation \x3d\x3d27){\nresult \x3d exp2(a);\n}\nelse if (u_operation \x3d\x3d28){\nresult \x3d a \x3e b? 1.0 : 0.0;\n}\nelse if (u_operation \x3d\x3d29){\nresult \x3d  a \x3e\x3d b? 1.0 : 0.0;\n}\nelse if (u_operation \x3d\x3d30){\nresult \x3d floor(a); //int\n}\nelse if (u_operation \x3d\x3d31){\nresult \x3d a \x3d\x3d0? 1.0:0.0; //null pass mask\n}\nelse if (u_operation \x3d\x3d32){\nresult \x3d a; //float\n}\nelse if (u_operation \x3d\x3d33){\nresult \x3d a \x3c b? 1.0 : 0.0;\n}\nelse if (u_operation \x3d\x3d34){\nresult \x3d a \x3c\x3d b? 1.0 : 0.0;\n}\nelse if (u_operation \x3d\x3d35){\nresult \x3d log(a);\n}\nelse if (u_operation \x3d\x3d36){\nresult \x3d log2(a) / log2(10.0);\n}\nelse if (u_operation \x3d\x3d37){\nresult \x3d log2(a);\n}\nelse if (u_operation \x3d\x3d44){\nresult \x3d mod(a, b);\n}\nelse if (u_operation \x3d\x3d45){\nresult \x3d -a;\n}\nelse if (u_operation \x3d\x3d46){\nresult \x3d a !\x3d b? 1.0 : 0.0;\n}\nelse if (u_operation \x3d\x3d48){\nresult \x3d ceil(a);\n}\nelse if (u_operation \x3d\x3d49){\nresult \x3d floor(a);\n}\nelse if (u_operation \x3d\x3d51){\nresult \x3d sin(a);\n}\nelse if (u_operation \x3d\x3d53){\nresult \x3d a * a;\n}\nelse if (u_operation \x3d\x3d56){\nresult \x3d tan(a);\n}\nelse if (u_operation \x3d\x3d57){\nresult \x3d 999.0; //tanh not available\n}\nelse if (u_operation \x3d\x3d59){\nresult \x3d 999.0; //acosh not available\n}\nelse if (u_operation \x3d\x3d60){\nresult \x3d 999.0; //asinh not available\n}\nelse if (u_operation \x3d\x3d61){\nresult \x3d atan(a, b);\n}\nelse if (u_operation \x3d\x3d64){\nresult \x3d a / b;\n}\nelse if (u_operation \x3d\x3d65){\nresult \x3d floor(a/b);\n}\nelse if (u_operation \x3d\x3d76){\nresult \x3d a !\x3d0? b:c;\n}\n}\nvoid main() {\nvec4 currentPixel0 \x3d  texture2D(u_image0, v_texCoord);\nfloat graya, reda, greena, bluea;\nif (u_bandCount \x3d\x3d 1) {\ngraya \x3d stretchOneaue(float(currentPixel.r), u_minCutOff[0], u_maxCutOff[0], u_minOutput[0], u_maxOutput[0], u_factor[0]);\ngl_FragColor \x3d vec4(graya, graya, graya, currentPixel.a);\n}\nelse if (u_bandCount \x3d\x3d 3) {\nreda \x3d stretchOneaue(float(currentPixel.r), u_minCutOff[0], u_maxCutOff[0], u_minOutput[0], u_maxOutput[0], u_factor[0]);\ngreena \x3d stretchOneaue(float(currentPixel.g), u_minCutOff[1], u_maxCutOff[1], u_minOutput[1], u_maxOutput[1], u_factor[1]);\nbluea \x3d stretchOneaue(float(currentPixel.b), u_minCutOff[2], u_maxCutOff[2], u_minOutput[2], u_maxOutput[2], u_factor[2]);\ngl_FragColor \x3d vec4(reda, greena, bluea, currentPixel.a);\n}\n}",
mask:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform float u_includedRanges[6];\nuniform bool u_includedRanges_specified;\nuniform float u_noDataValues[6];\nuniform bool u_noDataValues_specified;\nuniform int u_noDataInterpretation;\nuniform int u_bandCount;\nvec4 mask() {\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nvec4 processedPixel \x3d currentPixel;\nif (u_includedRanges_specified) {\nif (u_bandCount \x3d\x3d 1) {\nif (currentPixel.r \x3e u_includedRanges[0] \x26\x26 currentPixel.r \x3c u_includedRanges[1])\nprocessedPixel \x3d vec4(currentPixel.rgb, currentPixel.a);\nelse\nprocessedPixel \x3d vec4(currentPixel.rgb, 0);\n} else if (u_bandCount \x3d\x3d 3) {\nif (currentPixel.r \x3e u_includedRanges[0] \x26\x26 currentPixel.r \x3c u_includedRanges[1] \x26\x26 currentPixel.g \x3e u_includedRanges[2] \x26\x26 currentPixel.g \x3c u_includedRanges[3] \x26\x26 currentPixel.b \x3e u_includedRanges[4] \x26\x26 currentPixel.b \x3c u_includedRanges[5])\nprocessedPixel \x3d vec4(currentPixel.rgb, currentPixel.a);\nelse\nprocessedPixel \x3d vec4(currentPixel.rgb, 0);\n}\n}\nif (u_noDataValues_specified) {\nif (u_bandCount \x3d\x3d 1) {\nif (processedPixel.r \x3d\x3d u_noDataValues[0])\nprocessedPixel \x3d vec4(processedPixel.rgb, 0);\nelse\nprocessedPixel \x3d vec4(processedPixel.rgb, processedPixel.a);\n} else if (u_bandCount \x3d\x3d 3) {\nif (u_noDataInterpretation \x3d\x3d1 \x26\x26 processedPixel.r \x3d\x3d u_noDataValues[0] \x26\x26 processedPixel.g \x3d\x3d u_noDataValues[1] \x26\x26 processedPixel.b \x3d\x3d u_noDataValues[2])\nprocessedPixel \x3d vec4(processedPixel.rgb, 0);\nelse if (processedPixel.r \x3d\x3d u_noDataValues[0] || processedPixel.g \x3d\x3d u_noDataValues[1] || processedPixel.b \x3d\x3d u_noDataValues[2])\nprocessedPixel \x3d vec4(processedPixel.rgb, 0);\nelse\nprocessedPixel \x3d vec4(processedPixel.rgb, processedPixel.a);\n}\n}\nreturn processedPixel;\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d mask();\n}",
ndvi:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform int u_bandId_red;\nuniform int u_bandId_nir;\nuniform bool u_scaled;\nuniform int u_bandCount;\nvec4 calculateNDVI(){\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nfloat red \x3d float(u_bandId_red \x3d\x3d 0 ? currentPixel.r : (u_bandId_red \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat nir \x3d float(u_bandId_nir \x3d\x3d 0 ? currentPixel.r : (u_bandId_nir \x3d\x3d 1 ? currentPixel.g : currentPixel.b));\nfloat ndvi_denom \x3d nir + red;\nfloat ndvi;\nif (ndvi_denom \x3d\x3d 0.0) {\nndvi \x3d 0.0;\n}\nelse {\nndvi \x3d (nir - red) / ndvi_denom;\nif (u_scaled) {\nndvi \x3d float(floor(ndvi * 100.0 + 100.5));\n}\n}\nreturn vec4(ndvi, ndvi, ndvi, currentPixel.a);\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d calculateNDVI();\n}",
remap:"precision mediump float;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nvarying vec2 v_texCoord;\nuniform float u_indexedColormapOffset;\nuniform float u_indexedColormapMaxIndex;\nuniform float u_breaks[16];\nuniform vec2 u_rawResolution;\nuniform int u_resampling;\nvec4 getPixelValue(vec2 coords) {\nif (u_resampling \x3d\x3d 0) {\nreturn texture2D(u_image, coords);\n}\nvec2 pos_ul \x3d floor(coords / u_rawResolution) * u_rawResolution;\nvec2 pos_ur \x3d pos_ul + vec2(1.0, 0.0) * u_rawResolution;\nvec2 pos_ll \x3d pos_ul + vec2(0.0, 1.0) * u_rawResolution;\nvec2 pos_lr \x3d pos_ul + vec2(1.0, 1.0) * u_rawResolution;\nvec2 weight \x3d fract(coords / u_rawResolution);\nvec4 vp_ul \x3d texture2D(u_image, pos_ul);\nvec4 vp_ur \x3d texture2D(u_image, pos_ur);\nvec4 vp_ll \x3d texture2D(u_image, pos_ll);\nvec4 vp_lr \x3d texture2D(u_image, pos_lr);\nvec4 vp \x3d mix(mix(vp_ul, vp_ur, weight.x), mix(vp_ll, vp_lr, weight.x), weight.y);\nreturn vp;\n}\nfloat getRemapIndex(float pixelValue) {\nif (pixelValue \x3c u_breaks[0] || pixelValue \x3e u_breaks[15]) {\nreturn -1.0;\n}\nfor (int i \x3d 0; i \x3c 16; i++) {\nif (pixelValue \x3c u_breaks[i]) {\nreturn float(i - 1);\n}\n}\nif (pixelValue \x3d\x3d u_breaks[15]) {\nreturn 15.0;\n}\nreturn 0.0;\n}\nvec4 colorize(float pv) {\nfloat clrIndex \x3d pv - u_indexedColormapOffset;\nvec4 result;\nif (clrIndex \x3e u_indexedColormapMaxIndex) {\nresult \x3d vec4(0.0, 0.0, 0.0, 0.0);\n}\nelse {\nvec2 clrPosition \x3d vec2(clrIndex / u_indexedColormapMaxIndex, 0.0);\nvec4 color \x3d texture2D(u_image1, clrPosition);\nresult \x3d vec4(color.r, color.g, color.b, color.a);\n}\nreturn result;\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\nvec4 currentPixel \x3d texture2D(u_image, v_texCoord);\nif (currentPixel.a \x3d\x3d 0.0) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn;\n}\nfloat remappedIndex \x3d getRemapIndex(currentPixel.r);\nif (remappedIndex \x3c 0.0) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn;\n}\ngl_FragColor \x3d colorize(remappedIndex);\n}",
resample:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec2 u_resamplingRatio;\nuniform int u_resamplingType;\nuniform vec2 u_anchor;\nuniform vec2 u_resolution;\nvec4 resample(){\nvec2 pos_nn, pos_ul, pos_ur, pos_ll, pos_lr, pos_offset;\nfloat weight,weight_total, weight_ul, weight_ur, weight_ll, weight_lr;\nvec4 vp;  //v_texCoord is canvas space 0-1\nvec2 originalResolution \x3d vec2(u_resolution.s*u_resamplingRatio.s, u_resolution.t*u_resamplingRatio.t);\nvec2 pos \x3d vec2(u_anchor.s+(v_texCoord.s-u_anchor.s),(u_anchor.t+(v_texCoord.t-u_anchor.t)));\nif (u_resamplingType \x3d\x3d 0)\n{//shift and scaling, y \x3d ax+b so x \x3d (y-b)/a\npos_nn \x3d vec2(floor(pos.s/originalResolution.s+0.5)*originalResolution.s,floor(pos.t/originalResolution.t+0.5)*originalResolution.t);\nif (pos_nn.s \x3c0.0 || pos_nn.s \x3e 1.0 || pos_nn.t \x3c0.0 || pos_nn.t \x3e 1.0){\nvp \x3d vec4(1.0, 0.0, 0.0, 1.0);//vec4(0.0, 1.0, 0.0, vp.a);\n}\nelse {\nvp \x3d texture2D(u_image, vec2(pos_nn.s, pos_nn.t));\n}\n}\nelse if (u_resamplingType \x3d\x3d 1)\n{//shift and scaling, 4 neighbors y \x3d ax+b so x \x3d (y-b)/a\npos_ul \x3d vec2(floor(pos.s/originalResolution.s)*originalResolution.s,floor(pos.t/originalResolution.t)*originalResolution.t);\npos_ur \x3d vec2(pos_ul.s+originalResolution.s, pos_ul.t);\npos_ll \x3d vec2(pos_ul.s, pos_ul.t+originalResolution.t);\npos_lr \x3d vec2(pos_ul.s+originalResolution.s, pos_ul.t+originalResolution.t);\npos_offset \x3d vec2(pos.s - floor(pos_ul.s),pos.t - floor(pos_ul.t));\nweight_lr \x3d sqrt(pow(pos_offset.s,2.0) + pow(pos_offset.t,2.0));\nweight_ul \x3d sqrt(pow( originalResolution.s- pos_offset.s,2.0)+ pow(originalResolution.t- pos_offset.t,2.0));\nweight_ur \x3d sqrt(pow( pos_offset.s,2.0)+ 1.0- pow(originalResolution.t - pos_offset.t,2.0));\nweight_ll \x3d sqrt(pow( originalResolution.s- pos_offset.s,2.0)+ pow(pos_offset.t,2.0));\nvp \x3d (texture2D(u_image, pos_ul) * weight_ul + texture2D(u_image, pos_ur) * weight_ur + texture2D(u_image, pos_ll) * weight_ll + texture2D(u_image, pos_lr) * weight_lr)/(weight_ul+weight_ur+weight_ll+weight_lr);\n}\nelse if (u_resamplingType \x3d\x3d 2)\n{//shift and scaling, 16 neighbors\nweight_total \x3d 0.0;\nvp \x3d vec4(0.0,0.0,0.0,0.0);\npos_ul \x3d vec2(floor(pos.s/originalResolution.s)*originalResolution.s-originalResolution.s,floor(pos.t/originalResolution.t)*originalResolution.t-originalResolution.t);\npos_offset \x3d vec2(pos.s - floor(pos_ul.s),pos.t - floor(pos_ul.t));\nfor (int i\x3d0; i\x3c4; i++){//row\nfor (int j\x3d0; j\x3c4; j++){//col\nweight \x3d sqrt(pow(pos_offset.s-float(j),2.0)+ pow(pos_offset.t-float(i),2.0));\nvp +\x3dtexture2D(u_image, vec2(pos_ul.s+float(i)*originalResolution.s,pos_ul.t+float(j)*originalResolution.t)) * weight;\nweight_total +\x3d weight;\n}\n}\nvp \x3d vp/weight_total;\n}\nreturn vp;\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d resample();\n}",
slope:"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec2 u_resolution;\nuniform vec2 u_cellSize;\nuniform float u_zfactor;\nuniform float u_altitude;\nuniform float u_azimuth;\nfloat shift_right(float v, float amt) {\nv \x3d floor(v) + 0.5;\nreturn floor(v / exp2(amt));\n}\nfloat shift_left(float v, float amt) {\nreturn floor(v * exp2(amt) + 0.5);\n}\nfloat mask_last(float v, float bits) {\nreturn mod(v, shift_left(1.0, bits));\n}\nfloat extract_bits(float num, float from, float to) {\nfrom \x3d floor(from + 0.5);\nto \x3d floor(to + 0.5);\nreturn mask_last(shift_right(num, from), to - from);\n}\nvec4 encode_float(float val) {\nif (val \x3d\x3d 0.0)\nreturn vec4(0, 0, 0, 0);\nfloat sign \x3d val \x3e 0.0 ? 0.0 : 1.0;\nval \x3d abs(val);\nfloat exponent \x3d floor(log2(val));\nfloat biased_exponent \x3d exponent + 127.0;\nfloat fraction \x3d ((val / exp2(exponent)) - 1.0) * 8388608.0;\nfloat t \x3d biased_exponent / 2.0;\nfloat last_bit_of_biased_exponent \x3d fract(t) * 2.0;\nfloat remaining_bits_of_biased_exponent \x3d floor(t);\nfloat byte4 \x3d extract_bits(fraction, 0.0, 8.0) / 255.0;\nfloat byte3 \x3d extract_bits(fraction, 8.0, 16.0) / 255.0;\nfloat byte2 \x3d (last_bit_of_biased_exponent * 128.0 + extract_bits(fraction, 16.0, 23.0)) / 255.0;\nfloat byte1 \x3d (sign * 128.0 + remaining_bits_of_biased_exponent) / 255.0;\nreturn vec4(byte4, byte3, byte2, byte1);\n}\nfloat getNeighborHoodAlpha(float a, float b, float c, float d, float e, float f, float g, float h, float i){\nif (a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0 || a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0 || a \x3d\x3d 0.0 || a \x3d\x3d 0.0 || a\x3d\x3d0.0) {\nreturn 0.0;\n}\nelse {\nreturn e;\n}\n}\nvec4 calculateSlope() {\nfloat pi \x3d 3.141592653589793238;\nfloat dzx \x3d 0.0;\nfloat dzy \x3d 0.0;\nvec4 va,  vb,  vc,  vd,  ve,  vf,  vg,  vh,  vi;\nvec2 axy \x3d vec2(-1.0, -1.0);\nvec2 bxy \x3d vec2(0.0, -1.0);\nvec2 cxy \x3d vec2(1.0, -1.0);\nvec2 dxy \x3d vec2(-1.0, 0.0);\nvec2 fxy \x3d vec2(1.0, 0.0);\nvec2 gxy \x3d vec2(-1.0, 1.0);\nvec2 hxy \x3d vec2(0.0, 1.0);\nvec2 ixy \x3d vec2(1.0, 1.0);\nif (v_texCoord.s \x3c u_resolution.s) {\naxy[0] \x3d 1.0;\ndxy[0] \x3d 1.0;\ngxy[0] \x3d 1.0;\n}\nif (v_texCoord.t \x3c u_resolution.t) {\naxy[1] \x3d 1.0;\nbxy[1] \x3d 1.0;\ncxy[1] \x3d 1.0;\n}\nif (v_texCoord.s \x3e 1.0 - u_resolution.s) {\ncxy[0] \x3d -1.0;\nfxy[0] \x3d -1.0;\nixy[0] \x3d -1.0;\n}\nif (v_texCoord.t \x3e 1.0 - u_resolution.t) {\ngxy[1] \x3d -1.0;\nhxy[1] \x3d -1.0;\nixy[1] \x3d -1.0;\n}\nif (v_texCoord.s \x3e\x3d u_resolution.s \x26\x26 (1.0 - u_resolution.s) \x3e\x3d v_texCoord.s \x26\x26 v_texCoord.t \x3e\x3d u_resolution.t \x26\x26 (1.0 - u_resolution.t) \x3e\x3d v_texCoord.t) {\nva \x3d texture2D(u_image, v_texCoord + u_resolution * axy);\nvb \x3d texture2D(u_image, v_texCoord + u_resolution * bxy);\nvc \x3d texture2D(u_image, v_texCoord + u_resolution * cxy);\nvd \x3d texture2D(u_image, v_texCoord + u_resolution * dxy);\nve \x3d texture2D(u_image, v_texCoord + u_resolution * vec2(0, 0));\nvf \x3d texture2D(u_image, v_texCoord + u_resolution * fxy);\nvg \x3d texture2D(u_image, v_texCoord + u_resolution * gxy);\nvh \x3d texture2D(u_image, v_texCoord + u_resolution * hxy);\nvi \x3d texture2D(u_image, v_texCoord + u_resolution * ixy);\n}\ndzx \x3d (vc + 2.0 * vf + vi - va - 2.0 * vd - vg).r / (8.0 * u_cellSize[0]);\ndzy \x3d -(vg + 2.0 * vh + vi - va - 2.0 * vb - vc).r / (8.0 * u_cellSize[1]);\nfloat alpha \x3d getNeighborHoodAlpha(va.a, vb.a, vc.a, vd.a, ve.a, vf.a, vg.a, vh.a, vi.a);\nfloat slope \x3d atan(u_zfactor * sqrt(dzx * dzx + dzy * dzy)) * 57.2957795;\nreturn vec4(slope, slope, slope, alpha);\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\ngl_FragColor \x3d calculateSlope();\n}",
stretch:"precision mediump float;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nuniform sampler2D u_image2;\nvarying vec2 v_texCoord;\nuniform float u_minCutOff[3];\nuniform float u_maxCutOff[3];\nuniform float u_minOutput[3];\nuniform float u_maxOutput[3];\nuniform float u_factor[3];\nuniform int u_bandCount;\nuniform vec2 u_sourceDim;\nuniform vec2 u_targetDim;\nuniform int u_state;\nuniform bool u_minMaxTexture;\nuniform bool u_useGamma;\nuniform float u_gamma[4];\nuniform float u_gammaCorrection[4];\nuniform bool u_scaled;\nuniform vec2 u_rawResolution;\nuniform int u_resampling;\nvec4 getPixelValue(vec2 coords) {\nif (u_resampling \x3d\x3d 0) {\nreturn texture2D(u_image, coords);\n}\nvec2 pos_ul \x3d floor(coords / u_rawResolution) * u_rawResolution;\nvec2 pos_ur \x3d pos_ul + vec2(1.0, 0.0) * u_rawResolution;\nvec2 pos_ll \x3d pos_ul + vec2(0.0, 1.0) * u_rawResolution;\nvec2 pos_lr \x3d pos_ul + vec2(1.0, 1.0) * u_rawResolution;\nvec2 weight \x3d fract(coords / u_rawResolution);\nvec4 vp_ul \x3d texture2D(u_image, pos_ul);\nvec4 vp_ur \x3d texture2D(u_image, pos_ur);\nvec4 vp_ll \x3d texture2D(u_image, pos_ll);\nvec4 vp_lr \x3d texture2D(u_image, pos_lr);\nvec4 vp \x3d mix(mix(vp_ul, vp_ur, weight.x), mix(vp_ll, vp_lr, weight.x), weight.y);\nif (u_bandCount \x3d\x3d 1) {\nfloat alpha \x3d vp_ul.a * vp_ur.a * vp_ll.a * vp_lr.a;\nvec4 vp_nn \x3d texture2D(u_image, coords);\nreturn alpha \x3d\x3d 0.0 ? vp_nn : vec4(vp.rgb, alpha);\n}\nreturn vp;\n}\nvec4 findMin(vec4 p1, vec4 p2) {\nif (p1.a \x3d\x3d 0.0) {\nreturn p2;\n} else if (p2.a \x3d\x3d 0.0) {\nreturn p1;\n} else {\nreturn vec4(min(p1.r, p2.r),min(p1.g, p2.g),min(p1.b, p2.b),p1.a);\n}\n}\nvec4 findMax(vec4 p1, vec4 p2) {\nif (p1.a \x3d\x3d 0.0) {\nreturn p2;\n} else if (p2.a \x3d\x3d 0.0) {\nreturn p1;\n} else {\nreturn vec4(max(p1.r, p2.r),max(p1.g, p2.g),max(p1.b, p2.b),p1.a);\n}\n}\nvec4 findMinMax(vec4 p1, vec4 p2) {\nif (p1.a \x3d\x3d 0.0) {\nreturn p2;\n} else if (p2.a \x3d\x3d 0.0) {\nreturn p1;\n} else {\nreturn vec4(min(p1.r, p2.r), max(p1.g, p2.g), 0.0, p1.a);\n}\n}\nvec4 minMax(int state) {\nvec2 pixelFract \x3d fract(v_texCoord * u_sourceDim);\nfloat xshift \x3d ((pixelFract.s \x3e\x3d 0.5 || pixelFract.s \x3d\x3d 0.0) ? -1.0 : 1.0) / u_sourceDim.s; //take left pixel if \x3e 0.5\nfloat yshift \x3d ((pixelFract.s \x3e\x3d 0.5 || pixelFract.s \x3d\x3d 0.0) ? -1.0 : 1.0) / u_sourceDim.t; //take bottom pixel if \x3e 0.5\nif (u_sourceDim.s \x3d\x3d 1.0) {\nxshift \x3d 0.0;\n}\nif (u_sourceDim.t \x3d\x3d 1.0) {\nyshift \x3d 0.0;\n}\nvec4 p1 \x3d texture2D(u_image, v_texCoord);\nvec4 p2 \x3d texture2D(u_image, v_texCoord + vec2(xshift, 0.0));\nvec4 p3 \x3d texture2D(u_image, v_texCoord + vec2(0.0, yshift));\nvec4 p4 \x3d texture2D(u_image, v_texCoord + vec2(xshift, yshift));\nvec4 pval;\nif (state \x3d\x3d 2) {\npval \x3d findMinMax(findMinMax(p1, p2), findMinMax(p3, p4));\n} else if (state \x3d\x3d 1) {\npval \x3d findMax(findMax(p1, p2), findMax(p3, p4));\n} else if (state \x3d\x3d 0) {\npval \x3d findMin(findMin(p1, p2), findMin(p3, p4));\n}\nreturn pval;\n}\nfloat stretchOneValue(float val, float minCutOff, float maxCutOff, float minOutput, float maxOutput, float factor, bool scaled) {\nfloat stretchedVal;\nif (val \x3e minCutOff \x26\x26 val \x3c maxCutOff) {\nstretchedVal \x3d minOutput + (val - minCutOff) * factor;\n} else if (val \x3e\x3d maxCutOff) {\nstretchedVal \x3d maxOutput;\n} else {\nstretchedVal \x3d minOutput;\n}\nif (scaled) {\nreturn stretchedVal;\n}\nelse {\nreturn stretchedVal / maxOutput; //0-1\n}\n}\nfloat stretchOneValueGamma(float val, float minCutOff, float maxCutOff, float minOutput, float maxOutput, float factor, float gamma, float gammaCorrection, bool scaled) {\nfloat stretchedVal;\nfloat tempf \x3d 1.0;\nfloat outRange \x3d maxOutput - minOutput;\nfloat relativeVal \x3d (val - minCutOff) / (maxCutOff - minCutOff);\nif (val \x3e minCutOff \x26\x26 val \x3c maxCutOff) {\nif (gamma \x3e 1.0) {\ntempf -\x3d pow(1.0 / outRange, relativeVal * gammaCorrection);\n}\nstretchedVal \x3d floor(tempf * outRange * pow(relativeVal, 1.0 / gamma)) + minOutput;\n}\nelse if (val \x3e\x3d maxCutOff) {\nstretchedVal \x3d maxOutput;\n} else {\nstretchedVal \x3d minOutput;\n}\nif (scaled) {\nreturn stretchedVal;\n}\nelse {\nreturn stretchedVal / maxOutput; //0-1\n}\n}\nbool isOutside(){\nif (v_texCoord.t\x3e1.00001 ||v_texCoord.t\x3c-0.00001 || v_texCoord.s\x3e1.00001 ||v_texCoord.s\x3c-0.00001) {\ngl_FragColor \x3d vec4(0.0, 0.0, 0.0, 0.0);\nreturn true;\n}\nelse {\nreturn false;\n}\n}\nvoid main() {\nif (isOutside()) {\nreturn;\n}\nif (u_state \x3d\x3d 100) {\nvec4 currentPixel \x3d getPixelValue(v_texCoord);\nfloat grayVal,\nredVal,\ngreenVal,\nblueVal;\nfloat min0,\nmax0,\nmin1,\nmax1,\nmin2,\nmax2,\nfactor0,\nfactor1,\nfactor2;\nvec4 minV, maxV;\nif (u_minMaxTexture) {\nif (u_bandCount \x3d\x3d 1) {\nminV \x3d texture2D(u_image1, v_texCoord);\nmin0 \x3d minV.r;\nmax0 \x3d minV.g;\nfactor0 \x3d (u_maxOutput[0] - u_minOutput[0]) / (max0 - min0);\n} else {\nminV \x3d texture2D(u_image1, v_texCoord);\nmaxV \x3d texture2D(u_image2, v_texCoord);\nmin0 \x3d minV.r;\nmax0 \x3d maxV.r;\nmin1 \x3d minV.g;\nmax1 \x3d maxV.g;\nmin2 \x3d minV.b;\nmax2 \x3d maxV.b;\nfactor0 \x3d (u_maxOutput[0] - u_minOutput[0]) / (max0 - min0);\nfactor1 \x3d (u_maxOutput[1] - u_minOutput[1]) / (max1 - min1);\nfactor2 \x3d (u_maxOutput[2] - u_minOutput[2]) / (max2 - min2);\n}\n} else {\nmin0 \x3d u_minCutOff[0];\nmax0 \x3d u_maxCutOff[0];\nmin1 \x3d u_minCutOff[1];\nmax1 \x3d u_maxCutOff[1];\nmin2 \x3d u_minCutOff[2];\nmax2 \x3d u_maxCutOff[2];\nfactor0 \x3d u_factor[0];\nfactor1 \x3d u_factor[1];\nfactor2 \x3d u_factor[2];\n}\nif (u_useGamma){\nif (u_bandCount \x3d\x3d 1) {\ngrayVal \x3d stretchOneValueGamma(float(currentPixel.r), min0, max0, u_minOutput[0], u_maxOutput[0], factor0, u_gamma[0], u_gammaCorrection[0], u_scaled);\ngl_FragColor \x3d vec4(grayVal, grayVal, grayVal, currentPixel.a);\n} else {\nredVal \x3d stretchOneValueGamma(float(currentPixel.r), min0, max0, u_minOutput[0], u_maxOutput[0], factor0, u_gamma[0], u_gammaCorrection[0], u_scaled);\ngreenVal \x3d stretchOneValueGamma(float(currentPixel.g), min1, max1, u_minOutput[1], u_maxOutput[1], factor1, u_gamma[1], u_gammaCorrection[1], u_scaled);\nblueVal \x3d stretchOneValueGamma(float(currentPixel.b), min2, max2, u_minOutput[2], u_maxOutput[2], factor2, u_gamma[1], u_gammaCorrection[2], u_scaled);\ngl_FragColor \x3d vec4(redVal, greenVal, blueVal, currentPixel.a);\n}\n}\nelse {\nif (u_bandCount \x3d\x3d 1) {\ngrayVal \x3d stretchOneValue(float(currentPixel.r), min0, max0, u_minOutput[0], u_maxOutput[0], factor0, u_scaled);\ngl_FragColor \x3d vec4(grayVal, grayVal, grayVal, currentPixel.a);\n} else {\nredVal \x3d stretchOneValue(float(currentPixel.r), min0, max0, u_minOutput[0], u_maxOutput[0], factor0, u_scaled);\ngreenVal \x3d stretchOneValue(float(currentPixel.g), min1, max1, u_minOutput[1], u_maxOutput[1], factor1, u_scaled);\nblueVal \x3d stretchOneValue(float(currentPixel.b), min2, max2, u_minOutput[2], u_maxOutput[2], factor2, u_scaled);\ngl_FragColor \x3d vec4(redVal, greenVal, blueVal, currentPixel.a);\n}\n}\n} else {\nvec4 currentPixel \x3d minMax(u_state);\ngl_FragColor \x3d currentPixel;\n}\n}"}})},
"esri/layers/rasterLib/function/RasterFunctionWebGLMixin":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ./pixelShaders ./vertexShaders ./webglHelper ./convolutionKernel".split(" "),function(S,J,f,c,h,d,b){return S(null,{gl:null,rgbaFloatData:null,originalTexture:null,lastTexture:null,renderTexture:!1,constructor:function(a){this._isProgramInitialized=!1;this.gl=a&&a.gl;a&&a.renderTexture&&(this.renderTexture=a.renderTexture);this._xformSetting=a&&a._xformSetting||{requireProjection:!1,
meshSize:[20,20]}},bindFrameBuffer:function(){var a=this.gl;this._setupPingPongTextures();this._setupBranchingTextures();var e=this._glSetting;this.isBranch?(e.branchIndex=(e.branchIndex+1)%e.branchCount,e=e.branches[e.branchIndex]):(e.pingpongIndex=(e.pingpongIndex+1)%e.pingpong.length,e=e.pingpong[e.pingpongIndex]);a.bindFramebuffer(a.FRAMEBUFFER,e.frameBuffer);a.viewport(0,0,a.drawingBufferWidth,a.drawingBufferHeight);return e},_initializeProgram:function(a){if(this.gl)try{var e=this.gl;e.viewport(0,
0,e.drawingBufferWidth,e.drawingBufferHeight);var q=this._glSetting.programUniforms,t="local"===this.functionName?"local"+this.functionArguments.operation:this.functionName,u=q[t];if(u)this._uniforms=u.uniforms,this.rasterProgram=u.program;else{var g=(this._useMesh=this._tileMode&&this._xformSetting.requireProjection)?h.mesh:h.basic,m=h.getShader(e,a.vertex||g),v=c.getShader(e,a.fragment),p=this._loadProgram(m,v),l={rasterProgram:d.getUniforms(e,p)};q[t]={uniforms:l,program:p};this.rasterProgram=
p;this._uniforms=l}e.useProgram(this.rasterProgram);var n=e.getAttribLocation(this.rasterProgram,"a_texCoord"),k=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,k);var r=d.createMesh(this._xformSetting.meshSize);e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW);e.enableVertexAttribArray(n);e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0);e.disable(e.DEPTH_TEST);e.blendFunc(e.SRC_ALPHA,e.ZERO);e.disable(e.BLEND);e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1);this._shaderInfo=
{fragment:a.fragmentName}}catch(w){}},_setUniform:function(a,e,q){null!=e&&(q&&!this._uniforms[q]&&(this._uniforms[q]=d.getUniforms(this.gl,this[q])),q=q?this._uniforms[q]:this._uniforms.rasterProgram,(a=q[a]||q[a+"[0]"])&&d.setUniform(this.gl,a,e))},_setUniforms:function(a,e){var q=Object.keys(a),t,u=q.length;for(t=0;t<u;t++)this._setUniform(q[t],a[q[t]],e);this.rawInput?this._setUniform("u_flipY",!0,e):this._setUniform("u_flipY",!1,e);this._tileMode?(this.rawInput?(a=this._xformSetting.offset,q=
this._xformSetting.scale):(a=[0,0],q=[1,1]),this._setUniform("u_xformOffset",a,e),this._setUniform("u_xformScale",q,e),this._xformSetting.requireProjection&&(this.rawInput?(this._setupXformTexture(),this._setUniform("u_projection",!0,e),this._setUniform("u_transformGridSize",this._xformSetting.gridConfig.size,e),this._setUniform("u_transformSpacing",this._xformSetting.gridConfig.spacing,e),this._setUniform("u_targetImageSize",new Float32Array([this.gl.drawingBufferWidth,this.gl.drawingBufferHeight]),
e)):this._setUniform("u_projection",!1,e))):(a=[0,0],q=[1,1],this._setUniform("u_xformOffset",a,e),this._setUniform("u_xformScale",q,e));this.rawInput&&this._rawResolution&&("RSP_BilinearInterpolation"===this.interpolation||"RSP_CubicConvolution"===this.interpolation)?(this._setUniform("u_resampling",1),this._setUniform("u_rawResolution",this._rawResolution)):this._setUniform("u_resampling",0)},_setupTextureData:function(a,e){if(a.texture)return a;a.raster&&a.raster.pixelBlock&&(a=a.raster);this.rawInput=
!0;var q=e&&e.notOriginal,t=e&&e.bandIDs;e&&e.reCreate?e=!1:(e=this._tileMode?!this._xformSetting.hasNewTexture:!this._glSetting.hasNewTexture)&&this._originalBandIDs&&(e=t?this._originalBandIDs.join("")===t.join(""):!1);0<this._glSetting.branchCount&&(e=!1);if(e&&this.originalTexture)return{extent:a.extent,texture:this.originalTexture};e=this._createTexture();q||(this.originalTexture=e,this._originalBandIDs=t);q=this.gl;var u=a.pixelBlock;this._rawResolution=u?[1/a.pixelBlock.width,1/a.pixelBlock.height]:
[1/this.gl.drawingBufferWidth,1/this.gl.drawingBufferHeight];var g=0;t&&0<t.length&&u&&(g=Math.max.apply(null,t),u.pixels.length>g&&t&&(u.pixels=t.map(function(v){return u.pixels[v]}),u.statistics&&(u.statistics=t.map(function(v){return u.statistics[v]}))));t=u.width;g=u.height;q.getExtension("OES_texture_float");var m=u.getAsRGBAFloat();q.texImage2D(q.TEXTURE_2D,0,q.RGBA,t,g,0,q.RGBA,q.FLOAT,m);return{extent:a.extent,texture:e}},_setupPingPongTextures:function(){var a=this._glSetting;if(!a||!a.pingpong){a.pingpong=
[];var e=d.createBufferTexture(this.gl,!1);a.pingpong.push(e);e=d.createBufferTexture(this.gl,!1);a.pingpong.push(e);a.pingpongIndex=1}},_setupBranchingTextures:function(){var a=this._glSetting;if(!a||!a.branches){a.branches=[];var e=0,q=a.branchCount;if(0<q){for(e=0;e<q;e++){var t=d.createBufferTexture(this.gl,!1);a.branches.push(t)}a.branchIndex=q-1}}},_setupXformTexture:function(a){for(var e=this._createTexture(),q=this.gl,t=4*this._xformSetting.gridConfig.size[0],u=this._xformSetting.gridConfig.size[1],
g=new Float32Array(t*u*4),m=0,v=0;v<this._xformSetting.gridConfig.coefficients.length;v++)g[m++]=this._xformSetting.gridConfig.coefficients[v],2===v%3&&(g[m++]=1);q.getExtension("OES_texture_float");q.texImage2D(q.TEXTURE_2D,0,q.RGBA,t,u,0,q.RGBA,q.FLOAT,g);this._bindTexture(e,"u_transformGrid",a)},_createTexture:function(a){return d.createTexture(this.gl,a)},_bindTexture:function(a,e,q){e=e||"u_image";q=this._uniforms[q||"rasterProgram"];var t=this._getTextureIndex(e);if(-1!==t){var u=this.gl;u.uniform1i(q[e].location,
t);u.activeTexture(u.TEXTURE0+t);u.bindTexture(u.TEXTURE_2D,a)}},_getTextureIndex:function(a,e){e=this._uniforms[e||"rasterProgram"];if(!e||!e[a]||e[a].info.type!==this.gl.SAMPLER_2D)return-1;if("u_transformGrid"===a)return 0;a="u_image"===a?0:parseInt(a.replace("u_image",""));return this._xformSetting.requireProjection?a+1:a},_drawGL:function(a){var e=this.gl;this.renderTexture?(e.enable(e.BLEND),e.bindFramebuffer(e.FRAMEBUFFER,null)):e.disable(e.BLEND);a||e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight);
a=this._xformSetting.meshSize||[1,1];e.drawArrays(e.TRIANGLES,0,a[0]*a[1]*6);this._drawMesh()},_drawMesh:function(){if(this.renderTexture&&this._glSetting.drawMesh){this.meshProgram=this.meshProgram||this._setupMeshProgram();var a=this.gl;a.useProgram(this.meshProgram);a.bindFramebuffer(a.FRAMEBUFFER,null);var e=a.getAttribLocation(this.meshProgram,"a_texCoord"),q=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,q);q=this._xformSetting.meshSize||[1,1];var t=d.createMesh(q,!0);a.bufferData(a.ARRAY_BUFFER,
t,a.STATIC_DRAW);a.enableVertexAttribArray(e);a.vertexAttribPointer(e,2,a.FLOAT,!1,0,0);a.disable(a.DEPTH_TEST);a.blendFunc(a.ONE,a.ZERO);this._setUniforms({u_color:[0,0,1,1],u_drawMeshLines:!0},"meshProgram");a.drawArrays(a.LINES,0,q[0]*q[1]*10)}},_setupMeshProgram:function(){var a=h.getShader(this.gl,h.mesh),e=c.getShader(this.gl,c.constant);return this._loadProgram(a,e)},_loadProgram:function(a,e){return d.loadProgram(this.gl,a,e)},_getShaderScript:function(a,e){e=document.getElementById(e);if(!e)return null;
a="";for(e=e.firstChild;e;)3==e.nodeType&&(a+=e.textContent),e=e.nextSibling;return a}})})},"esri/layers/rasterLib/function/webglHelper":function(){define([],function(){var S={getUniforms:function(J,f){var c=J.getProgramParameter(f,J.ACTIVE_UNIFORMS),h,d,b={};for(h=0;h<c;h++)(d=J.getActiveUniform(f,h))&&(b[d.name]={location:J.getUniformLocation(f,d.name),info:d});return b},setUniform:function(J,f,c){var h=f.info;f=f.location;var d=h.type;if(null!=c)switch(d){case J.FLOAT:1<h.size?0!==c.length&&J.uniform1fv(f,
c):J.uniform1f(f,c);break;case J.FLOAT_VEC2:if(0===c.length)break;J.uniform2fv(f,c);break;case J.FLOAT_VEC3:if(0===c.length)break;J.uniform3fv(f,c);break;case J.FLOAT_VEC4:if(0===c.length)break;J.uniform4fv(f,c);break;case J.INT:case J.BOOL:1<h.size?0!==c.length&&J.uniform1iv(f,c):J.uniform1i(f,c);break;case J.INT_VEC2:case J.BOOL_VEC2:if(0===c.length)break;J.uniform2iv(f,c);break;case J.INT_VEC3:case J.BOOL_VEC3:if(0===c.length)break;J.uniform3iv(f,c);break;case J.INT_VEC4:case J.BOOL_VEC4:0!==c.length&&
J.uniform4iv(f,c)}},createTexture:function(J,f){var c=J.createTexture();J.bindTexture(J.TEXTURE_2D,c);J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE);J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE);J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,f?J.LINEAR:J.NEAREST);J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,f?J.LINEAR:J.NEAREST);return c},createBufferTexture:function(J,f,c){f=S.createTexture(J,f);J.getExtension("OES_texture_float");c=c||[J.drawingBufferWidth,
J.drawingBufferHeight];J.texImage2D(J.TEXTURE_2D,0,J.RGBA,c[0],c[1],0,J.RGBA,J.FLOAT,null);c=J.createFramebuffer();J.bindFramebuffer(J.FRAMEBUFFER,c);J.framebufferTexture2D(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,f,0);return{texture:f,frameBuffer:c}},getShader:function(J,f,c){c=c?J.createShader(J.VERTEX_SHADER):J.createShader(J.FRAGMENT_SHADER);J.shaderSource(c,f);J.compileShader(c);J.getShaderParameter(c,J.COMPILE_STATUS)||(c=null);return c},loadProgram:function(J,f,c){var h=J.createProgram();
J.attachShader(h,f);J.attachShader(h,c);J.linkProgram(h);J.getProgramParameter(h,J.LINK_STATUS)||(J.deleteProgram(h),h=null);return h},createMesh:function(J,f){if(!J||1===J[0]&&1===J[1])return new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]);var c=J&&f?new Float32Array(J[0]*J[1]*20):new Float32Array(J[0]*J[1]*12);var h=.9998/J[1],d=.9998/J[0],b,a,e=0;for(b=0;b<J[1];b++)for(a=0;a<J[0];a++){var q=1E-4+h*b;var t=1E-4+d*a;J&&!f?(c[e++]=q,c[e++]=t,c[e++]=q+h,c[e++]=t,c[e++]=q,c[e++]=t+d,c[e++]=q,c[e++]=t+d,
c[e++]=q+h,c[e++]=t,c[e++]=q+h,c[e++]=t+d):(c[e++]=q,c[e++]=t,c[e++]=q,c[e++]=t+d,c[e++]=q,c[e++]=t+d,c[e++]=q+h,c[e++]=t+d,c[e++]=q+h,c[e++]=t+d,c[e++]=q+h,c[e++]=t,c[e++]=q,c[e++]=t,c[e++]=q+h,c[e++]=t,c[e++]=q,c[e++]=t+d,c[e++]=q+h,c[e++]=t)}return c}};return S})},"esri/layers/rasterLib/function/convolutionKernel":function(){define([],function(){var S={Default:[0,0,0,0,1,0,0,0,0],LineDetectionHorizontal:[-1,-1,-1,2,2,2,-1,-1,-1],LineDetectionVertical:[-1,2,-1,-1,2,-1,-1,2,-1],LineDetectionLeftDiagonal:[2,
-1,-1,-1,2,-1,-1,-1,2],LineDetectionRightDiagonal:[-1,-1,2,-1,2,-1,2,-1,-1],GradientNorth:[-1,-2,-1,0,0,0,1,2,1],GradientWest:[-1,0,1,-2,0,2,-1,0,1],GradientEast:[1,0,-1,2,0,-2,1,0,-1],GradientSouth:[1,2,1,0,0,0,-1,-2,-1],GradientNorthEast:[0,-1,-2,1,0,-1,2,1,0],GradientNorthWest:[-2,-1,0,-1,0,1,0,1,2],SmoothArithmeticMean:[.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111],Smoothing3x3:[.0625,.125,.0625,.125,.25,.125,.0625,
.125,.0625],Smoothing5x5:[1,1,1,1,1,1,4,4,4,1,1,4,12,4,1,1,4,4,4,1,1,1,1,1,1],Sharpening3x3:[-1,-1,-1,-1,9,-1,-1,-1,-1],Sharpening5x5:[-1,-3,-4,-3,-1,-3,0,6,0,-3,-4,6,21,6,-4,-3,0,6,0,-3,-1,-3,-4,-3,-1],Laplacian3x3:[0,-1,0,-1,4,-1,0,-1,0],Laplacian5x5:[0,0,-1,0,0,0,-1,-2,-1,0,-1,-2,17,-2,-1,0,-1,-2,-1,0,0,0,-1,0,0],SobelHorizontal:[-1,-2,-1,0,0,0,1,2,1],SobelVertical:[-1,0,1,-2,0,2,-1,0,1],Sharpen:[0,-.25,0,-.25,2,-.25,0,-.25,0],Sharpen2:[-.25,-.25,-.25,-.25,3,-.25,-.25,-.25,-.25],PointSpread:[-.627,
.352,-.627,.352,2.923,.352,-.627,.352,-.627],getKernel:function(J){switch(J){case 0:return S.LineDetectionHorizontal;case 1:return S.LineDetectionVertical;case 2:return S.LineDetectionLeftDiagonal;case 3:return S.LineDetectionRightDiagonal;case 4:return S.GradientNorth;case 5:return S.GradientWest;case 6:return S.GradientEast;case 7:return S.GradientSouth;case 8:return S.GradientNorthEast;case 9:return S.GradientNorthWest;case 10:return S.SmoothArithmeticMean;case 11:return S.Smoothing3x3;case 12:return S.Smoothing5x5;
case 13:return S.Sharpening3x3;case 14:return S.Sharpening5x5;case 15:return S.Laplacian3x3;case 16:return S.Laplacian5x5;case 17:return S.SobelHorizontal;case 18:return S.SobelVertical;case 19:return S.Sharpen;case 20:return S.Sharpen2;case 21:return S.PointSpread;default:return S.Default}}};return S})},"esri/layers/rasterLib/raster/rasterFactory":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/sniff dojo/when ../../../kernel ../../../Evented ../../../request ../../../deferredUtils ../../../urlUtils ./ImageServiceRaster ./TileServiceRaster ./TileRaster ./FunctionRaster".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l){S={customDrivers:[],create:function(n){if(n){if(n.url){var k=g.urlToObject(n.url);var r=k.path;var w=k.query}k=n.serviceInfo;var x=n.rasterFxArgs||{},D=new c,G=f.hitch(this,function(z){this._trycustomDrivers(f.mixin({url:r},n),0,D)});if(r)if(-1===r.toLowerCase().indexOf("imageserver")&&-1===r.toLowerCase().indexOf("mapserver")){var F=new p(f.mixin({},n,{url:r}));n.rasterFx&&(F=new l({rasterFx:n.rasterFx,rasterFxArgs:f.mixin({},x,{raster:F})}));var A=F}else{A=
new c;k=k||this._getServiceInfo(r,w);var y=f.hitch(this,function(z){z.bandCount?F=new m(f.mixin({},{serviceInfo:z},w,n,{url:r})):z.tileInfo&&(F=new v(f.mixin({},{serviceInfo:z},w,this._options,{url:r})));n.rasterFx&&(F=new l({rasterFx:n.rasterFx,rasterFxArgs:f.mixin({},x,{raster:F})}));A.resolve(F)});a(k,y,G)}else A=F=new l({rasterFx:n.rasterFx,rasterFxArgs:f.mixin({},x,{raster:F})});a(A,f.hitch(this,function(z){z?z.open().then(f.hitch(this,function(B){D.resolve(z)}),G):G(Error("There is no raster to open"))}),
G);return D.promise}},register:function(n){this.customDrivers=this.customDrivers||[];0<this.customDrivers.filter(function(k){return k.sourceType===n.prototype.sourceType}).length||this.customDrivers.push(n)},_trycustomDrivers:function(n,k,r){r=r||new c;var w=this.customDrivers[k];if(w){var x=new w(n);x.open().then(f.hitch(this,function(D){r.resolve(x)}),f.hitch(this,function(D){this._trycustomDrivers(n,k+1,r)}))}else r.reject("cannot load layer "+(n&&n.url||""));return r.promise},_getServiceInfo:function(n,
k){k=k||{};var r=k.bandIds;k=k.renderingRule;var w=new c(u._dfdCanceller),x={f:"json"};r&&(x.bandIds=r);k&&(x.renderingRule=k.toJson?JSON.stringify(k.toJson()):JSON.stringify(k));w._pendingDfd=t({url:n,content:x,handleAs:"json",callbackParamName:"callback"});w._pendingDfd.then(function(D){w.callback(D)},function(D){w.errback(D)});return w.promise}};f.setObject("layers.rasterLib.raster.rasterFactory",S,e);return S})},"esri/layers/rasterLib/raster/ImageServiceRaster":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/_base/json dojo/sniff dojo/DeferredList dojo/when ../../../kernel ../../../Evented ../../../request ../../../geometry/Extent ../../../geometry/Point ../../../SpatialReference ../../../WKIDUnitConversion ../../../deferredUtils ../../../urlUtils ../../MosaicRule ../../ImageServiceParameters ../../PixelBlock ./RasterInfo ./BasicRaster ../../rasterFormats/rasterCodec ../tile/RasterTileInfo".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A){S=J([G],{declaredClass:"esri.layers.rasterLib.raster.ImageServiceRaster",sourceType:"ImageService",constructor:function(y){y&&(this._imageServiceParams=y.imageServiceParameters,this._commonReqParams=y._commonReqParams,this._imageServiceParams||(this._imageServiceParams={interpolation:y.interpolation,pixelType:y.pixelType,format:y.format||"lerc",compressionQuality:y.compressionQuality,bandIds:y.bandIds,noDataInterpretation:y.noDataInterpretation,
adjustAspectRatio:y.adjustAspectRatio,mosaicRule:y.mosaicRule,renderingRule:y.interpolation}))},open:function(){var y=new c;if(this.serviceInfo&&this.rasterInfo)return this.loaded=!0,this._findCredential(),this.setFetchParameters(this._imageServiceParams),y.resolve(this),y.promise;var z=this.serviceInfo||this._generateServiceInfo(this._imageServiceParams&&this._imageServiceParams.renderingRule),B=f.hitch(this,function(H){this._fixServiceInfo(H);this.serviceInfo=H;this._findCredential();var E=this._parseRasterInfo(H),
K={};H.defaultMosaicMethod?(K.method=H.defaultMosaicMethod,K.operation=H.mosaicOperator,K.sortField=H.sortField,K.sortValue=H.sortValue):K.method=r.METHOD_NONE;this.serviceInfo.defaultMosaicRule=new r(K);this.serviceInfo.defaultMosaicRule.ascending=!0;H=this._getColormap(this);K=this._getHistograms(this);var I=this._getRasterAttributeTable(this),L=this._getKeyProperties(this),M=this._getMultidimensionalInfo(),N=this._getSlices();(new e([H,K,I,L,M,N])).then(f.hitch(this,function(P){P[0][0]&&(E.colormap=
P[0][1]);P[1][0]&&(E.histograms=P[1][1]);P[2][0]&&(E.vat=P[2][1]);P[3][0]&&(E.keyProperties=P[3][1]);P[4][0]&&(E.multidimensionalInfo=P[4][1],E.multidimensionalInfo&&E.multidimensionalInfo.variables&&E.multidimensionalInfo.variables.forEach(function(R){R.statistics&&(R.statistics.forEach(function(Y){Y.stddev=Y.standardDeviation}),E.statistics||R.statistics.length!==E.bandCount||(E.statistics=R.statistics));!E.histograms&&R.histograms&&R.histograms.length===E.bandCount&&(E.histograms=R.histograms)}));
E.keyProperties=E.keyProperties||{};this._slices=P[5][0]?P[5][1]:null;E.keyProperties&&E.keyProperties.DataType&&(this.dataType=E.keyProperties.DataType);E.keyProperties&&E.keyProperties.DefaultVariable&&(this.defaultVariable=E.keyProperties.DefaultVariable);this.loaded=!0;this.rasterInfo=E;this.setFetchParameters(this._imageServiceParams);y.resolve(this)}))}),C=f.hitch(this,function(H){this.loaded=!0;y.reject(H)});q(z,B,C);return y.promise},setFetchParameters:function(y,z){if(z)this.imageServiceParams=
y;else{var B=this.imageServiceParams;B&&y?Object.keys(y).forEach(function(C){B[C]=y[C]}):this.imageServiceParams=y}this._constructGetImageParams();this._getRasterIdentifier(!0)},read:function(y){if(y.pixelBlock||y.texture){var z=new c;z.resolve(y);return z.promise}if(!1===y.virtual&&this.tileInfo&&!this.tileInfo.virtual)return this.readTile(y);if(this._slices){var B=this._getSliceId();if(null==B)return z=new c,z.resolve(y),z.promise}var C=y.extent,H=C.spatialReference.wkid||b.toJson(C.spatialReference.toJson(!1)),
E=y.timeExtent?y.timeExtent.toJson().join(","):null;z=this.url+"/exportImage";var K={};this._slices&&(K.sliceid=B);this.disableClientCaching&&(K._ts=(new Date).getTime());B=f.mixin({},this._commonReqParams,{bbox:C.xmin+","+C.ymin+","+C.xmax+","+C.ymax,imageSR:H,bboxSR:H,size:y.width+","+y.height,time:E},K);return this._requestPixels({url:z,payload:B,decodeParams:{width:y.width,height:y.height,planes:null,pixelType:null,format:null,decodeFunc:null,isPoint:!1},tileOptions:y})},readTile:function(y){var z=
this.tileBoundary&&this.tileBoundary[y.level];if(z&&(z.minRow>y.row||z.maxRow<y.row||z.minCol>y.col||z.maxCol<y.col)){var B=new c;B.resolve(y);return B.promise}if(this._slices&&(B=this._getSliceId(),null==B))return B=new c,B.resolve(y),B.promise;z=this.url+"/tile/"+y.level+"/"+y.row+"/"+y.col;var C={width:this.tileInfo.cols,height:this.tileInfo.rows,planes:null,pixelType:null,format:null,decodeFunc:null,useWasm:!0,isPoint:"elevation"===y.tileType.toLowerCase()?!0:!1};B=this._slices?"sliceid\x3d"+
B+"\x26":"";B=this.disableClientCaching?"_ts\x3d "+(new Date).getTime():B.replace(/&$/,"");return this._requestPixels({url:z+(0<B.length?"?"+B:""),payload:{},decodeParams:C,tileOptions:y})},toJson:function(){return{url:this.url,tileInfo:this.tileInfo,rasterInfo:this.rasterInfo,serviceInfo:this.serviceInfo,sourceType:this.sourceType,_commonReqParams:this._commonReqParams,_rasterId:this._rasterId}},_getSliceId:function(){var y=f.clone(this._imageServiceParams.multidimensionalDefinition),z=f.clone(this._imageServiceParams.time);
if(null==this._slices||null==z&&(null==y||0===y.length))return 0;var B=y||this.defaultMultidimensionalDefinition,C=B[0].variableName;B=this._getAllDimensionDefinition(B,C).definition;y=null;if(null==B||0===B.length)return null;if(z&&this.serviceInfo.timeInfo){if(null==z[1]||z[1]===z[0])var H=z[0];else{var E=this.serviceInfo.timeInfo.startTimeField;H=this.rasterInfo.multidimensionalInfo.variables.find(function(L){return L.name===C}).dimensions.find(function(L){return L.name===E}).values.filter(function(L){return Array.isArray(L)?
Math.max(L[0],z[0])<Math.min(L[1],z[1]):L>=z[0]&&L<=z[1]}).sort(function(L,M){L=Array.isArray(L)?L[1]:L;M=Array.isArray(M)?L[1]:M;return Math.abs(z[1]-L)-Math.abs(z[1]-M)})[0]||[z[1]]}B.some(function(L){if(L.dimensionName===E)return L.values[0]=H,!0;if(!L.dimensionName)return L.dimensionName=E,L.isSlice=!0,L.values=[H],!0})||B.push({variableName:C,dimensionName:E,isSlice:!0,values:[H]})}for(var K=0;K<this._slices.length;K++){var I=this._slices[K].multidimensionalDefinition;if(I.length===B.length&&
!I.some(function(L){var M=B.filter(function(P){return L.variableName===P.variableName&&P.dimensionName===L.dimensionName})[0];if(!M)return!0;var N=Array.isArray(L.values[0])?L.values[0][0]:L.values[0];M=Array.isArray(M.values[0])?M.values[0][0]:M.values[0];return N!==M})){y=K;break}}return y},_getAllDimensionDefinition:function(y,z){var B=y.map(function(H){return H.dimensionName}),C=!1;this.rasterInfo.multidimensionalInfo.variables.forEach(function(H){H.name!==z||H.dimensions.length===y.length&&B[0]||
(H.dimensions.forEach(function(E){0>B.indexOf(E.name)&&(B[0]?y.push({variableName:z,dimensionName:E.name,values:[E.values[0]]}):(y[0].dimensionName=E.name,y[0].values=[E.values[0]],E[0]=E.name))}),C=!0)},this);return{defChanged:C,definition:y}},_generateServiceInfo:function(y){var z=this.url,B=new c(n._dfdCanceller);B._pendingDfd=g({url:z,content:{f:"json",renderingRule:y?b.toJson(y.toJson()):null},handleAs:"json",callbackParamName:"callback"});B._pendingDfd.then(function(C){B.callback(C)},function(C){B.errback(C)});
return B},_fixServiceInfo:function(y){var z=y.spatialReference.wkid;y.tileInfo&&0===y.extent.xmin&&360===y.extent.xmax&&z&&null==l[z]&&(y.tileInfo.applyGCS360Transform=!0)},_parseRasterInfo:function(y){var z=new D;z.bandCount=y.bandCount;z.extent=new m(y.fullExtent);z.spatialReference=y.spatialReference;z.pixelType=y.pixelType;z.width=Math.floor((y.fullExtent.xmax-y.fullExtent.xmin)/y.pixelSizeX+.5);z.height=Math.floor((y.fullExtent.ymax-y.fullExtent.ymin)/y.pixelSizeY+.5);z.cellSize=new v({x:y.pixelSizeX,
y:y.pixelSizeY,spatialReference:y.spatialReference});var B;if(y.minValues&&0<y.minValues.length&&y.maxValues&&y.stdvValues&&y.meanValues){var C=[];for(B=0;B<y.minValues.length;B++)C.push({min:y.minValues[B],max:y.maxValues[B],mean:y.meanValues[B],stddev:y.stdvValues[B]});y.bandCount!==C.length&&(C=null)}this.dataType=y.serviceDataType?y.serviceDataType.replace("esriImageServiceDataType",""):"Generic";z.statistics=C;y.objectIdField&&y.fields&&(z.catalogInfo={objectIdField:y.objectIdField,fields:y.fields});
z.timeInfo=y.timeInfo;if(y.tileInfo){this.tileInfo=new A(y.tileInfo);this.tileInfo.tileType=y.cacheType||"Map";z.tileInfo=this.tileInfo;var H=z.extent,E=this.tileInfo.origin,K=this.tileInfo.cols,I=this.tileInfo.rows;this.tileBoundary=this.tileInfo.lods.map(function(L){return{minCol:Math.floor((H.xmin-E.x+.1*L.resolution)/K/L.resolution),maxCol:Math.floor((H.xmax-E.x-.1*L.resolution)/K/L.resolution),minRow:Math.floor((E.y-H.ymax+.1*L.resolution)/I/L.resolution),maxRow:Math.floor((E.y-H.ymin-.1*L.resolution)/
I/L.resolution)}})}return z},_getColormap:function(y){y=this.url+"/colormap";var z=new c(n._dfdCanceller),B={f:"json"},C=this.serviceInfo.hasColormap||this.rasterInfo&&this.rasterInfo.hasColormap;10<this.serviceInfo.currentVersion&&C?(z._pendingDfd=g({url:y,content:B,handleAs:"json",callbackParamName:"callback"}),z._pendingDfd.then(function(H){z.callback(H.colormap)},function(H){z.errback(H)})):z.callback(null);return z},_getHistograms:function(y){var z=this.url+"/histograms",B=new c(n._dfdCanceller),
C={f:"json"},H=this.serviceInfo.hasHistograms||this.rasterInfo&&this.rasterInfo.hasHistograms;y&&y.renderingRule&&(C.renderingRule=b.toJson(y.renderingRule.toJson()),H=!0);10<this.serviceInfo.currentVersion&&H?(B._pendingDfd=g({url:z,content:C,handleAs:"json",callbackParamName:"callback"}),B._pendingDfd.then(function(E){B.callback(E.histograms)},function(E){B.errback(E)})):B.callback(null);return B},_getRasterAttributeTable:function(y){var z=this.url+"/rasterAttributeTable",B=new c(n._dfdCanceller),
C={f:"json"},H=this.serviceInfo.hasRasterAttributeTable;y&&y.renderingRule&&(C.renderingRule=b.toJson(y.renderingRule.toJson()),H=!0);10<this.serviceInfo.currentVersion&&H?(B._pendingDfd=g({url:z,content:C,handleAs:"json",callbackParamName:"callback"}),B._pendingDfd.then(function(E){B.callback(E)},function(E){B.errback(E)})):B.callback(null);return B},_getKeyProperties:function(y){var z=this.url+"/keyProperties",B=new c(n._dfdCanceller),C={f:"json"};y&&y.renderingRule&&(C.renderingRule=b.toJson(y.renderingRule.toJson()));
10<this.serviceInfo.currentVersion?(B._pendingDfd=g({url:z,content:C,handleAs:"json",callbackParamName:"callback"}),B._pendingDfd.then(function(H){B.callback(H)},function(H){B.errback(H)})):B.callback(null);return B},_getMultidimensionalInfo:function(){var y=this.url+"/multidimensionalInfo",z=new c(n._dfdCanceller);10.3<=this.serviceInfo.currentVersion&&this.serviceInfo.hasMultidimensions?(z._pendingDfd=g({url:y,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),z._pendingDfd.then(f.hitch(this,
function(B){z.callback(B.multidimensionalInfo)}),function(B){z.errback(B)})):z.callback(null);return z},_getSlices:function(){var y=this.url+"/slices",z=new c(n._dfdCanceller);this.serviceInfo.hasMultidimensions?(z._pendingDfd=g({url:y,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),z._pendingDfd.then(f.hitch(this,function(B){z.callback(B.slices)}),function(B){z.errback(B)})):z.callback(null);return z},_initializationFailed:function(){},_constructGetImageParams:function(){var y=
this.imageServiceParams||{},z=f.mixin({},this._query,{f:"image",interpolation:y.interpolation,pixelType:y.pixelType,format:y.format||"lerc",compressionQuality:y.compressionQuality,bandIds:y.bandIds?y.bandIds.join(","):null,noData:null!=y.noData?y.noData.join(","):null,noDataInterpretation:y.noDataInterpretation,adjustAspectRatio:null==y.adjustAspectRatio?null:y.adjustAspectRatio,mosaicRule:y.mosaicRule?b.toJson(y.mosaicRule.toJson()):null,renderingRule:y.renderingRule?b.toJson(y.renderingRule.toJson()):
null,token:this.credential&&this.credential.token||null});"lerc"===z.format.toLowerCase()?(z.compressionTolerance=y.compressionTolerance,10.5<=this.serviceInfo.currentVersion&&(z.lercVersion=y.lercVersion||2)):"tiff"===z.format.toLowerCase()?z.compression=y.compression:-1<["jpg","jpeg","jpg","jpgpng"].indexOf(z.format.toLowerCase())&&(z.compression=y.compression);this._commonReqParams=z},_getRasterIdentifier:function(y){if(this._rasterId)return this._rasterId;y=this.url.replace("http:","").replace("https:",
"");var z=[],B=this.imageServiceParams||{};z.push(y);z.push(B.interpolation);z.push(B.pixelType);z.push(B.compressionQuality);z.push(B.bandIds?B.bandIds.join(","):"");z.push(B.mosaicRule?b.toJson(B.mosaicRule.toJson()):"");z.push(B.renderingRule?b.toJson(B.renderingRule.toJson()):"");y=z.join("|");return this._rasterId=this._computeSignature(y)},_wrapExtent:function(y){var z=y.spatialReference._getInfo();if(z){var B=z.valid[0];z=z.valid[1];if(y.xmin<B-this.resolution.x||y.xmax>z+this.resolution.y){var C=
new m((y.xmin-B)%(z-B),y.ymin,(y.xmax-z)%(z-B),y.ymax,y.spatialReference);C.xmax<C.xmin&&(C=null)}}return C||y}});f.setObject("layers.rasterLib.raster.ImageServiceRaster",S,t);return S})},"esri/layers/ImageServiceParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../lang".split(" "),function(S,J,f,c,h,d){S=S(null,{declaredClass:"esri.layers.ImageServiceParameters",extent:null,width:null,height:null,imageSpatialReference:null,format:null,interpolation:null,
compressionQuality:null,bandIds:null,timeExtent:null,mosaicRule:null,renderingRule:null,renderer:null,noData:null,compressionTolerance:null,adjustAspectRatio:null,lercVersion:null,toJson:function(b){var a=this.bbox||this.extent;b=(a=a&&b&&a._normalize(!0))?a.spatialReference.wkid||f.toJson(a.spatialReference.toJson()):null;var e=this.imageSpatialReference;a={bbox:a?a.xmin+","+a.ymin+","+a.xmax+","+a.ymax:null,bboxSR:b,size:null!==this.width&&null!==this.height?this.width+","+this.height:null,imageSR:e?
e.wkid||f.toJson(e.toJson()):b,format:this.format,interpolation:this.interpolation,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null,mosaicRule:this.mosaicRule?f.toJson(this.mosaicRule.toJson()):null,renderingRule:this.renderingRule?f.toJson(this.renderingRule.toJson()):null,renderer:this.renderer?f.toJson(this.renderer.toJson()):null,noData:this.noData,noDataInterpretation:this.noDataInterpretation,compressionTolerance:this.compressionTolerance,adjustAspectRatio:this.adjustAspectRatio,
lercVersion:this.lercVersion};b=this.timeExtent;a.time=b?b.toJson().join(","):null;return d.filter(a,function(q){if(null!==q&&void 0!==q)return!0})}});J.mixin(S,{INTERPOLATION_BILINEAR:"RSP_BilinearInterpolation",INTERPOLATION_CUBICCONVOLUTION:"RSP_CubicConvolution",INTERPOLATION_MAJORITY:"RSP_Majority",INTERPOLATION_NEARESTNEIGHBOR:"RSP_NearestNeighbor",NODATA_MATCH_ALL:"esriNoDataMatchAll",NODATA_MATCH_ANY:"esriNoDataMatchAny"});J.setObject("layers.ImageServiceParameters",S,h);return S})},"esri/layers/rasterLib/raster/BasicRaster":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/_base/json dojo/sniff dojo/DeferredList dojo/when ../../../kernel ../../../Evented ../../../request ../../../geometry/Extent ../../../geometry/Point ../../../SpatialReference ../../../deferredUtils ../../../urlUtils ../../MosaicRule ../../ImageServiceParameters ../../PixelBlock ../../rasterFormats/rasterCodec ../tile/RasterHandler ./rasterProjectionHelper ./RasterInfo".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F){return J([u],{url:null,dataType:null,rasterInfo:null,tileInfo:null,serviceInfo:null,loaded:null,constructor:function(A){if(A){var y=A.url;y&&(y=n.urlToObject(y),this.url=y.path,this._query=y.query);this.dataType=A.dataType;this.serviceInfo=A.serviceInfo;this.rasterInfo=A.rasterInfo;this.tileInfo=A.tileInfo;this.serviceInfo=A.serviceInfo}},open:function(){},read:function(A){},identify:function(A){var y=new c,z=this.rasterInfo.extent;if(G.requirePE(z.spatialReference,
A.spatialReference))G.load().then(f.hitch(this,function(){B=G.project(A,z.spatialReference);y.resolve(B)}),function(){y.reject(Error("cannot project into this spatial reference"))});else{var B=G.project(A,z.spatialReference);y.resolve(B)}return y.then(f.hitch(this,function(C){var H=this.tileInfo,E=H.origin,K=H.lods[H.lods.length-1],I=(C.x-E.x)/H.cols/K.resolution;C=(E.y-C.y)/H.rows/K.resolution;var L=Math.round((C-Math.floor(C))*H.rows)*H.cols+Math.round((I-Math.floor(I))*H.cols);E=new m(E.x+K.resolution*
H.cols*I,E.y-K.resolution*H.rows*(C+1),E.x+K.resolution*H.cols*(I+1),E.y-K.resolution*H.rows*C,z.spatialReference);var M=this.getMemberRasters?this.getMemberRasters()[0]:this;return M.read({level:K.level,row:Math.floor(C),col:Math.floor(I),extent:E,width:H.cols,height:H.rows,virtual:M.tileInfo.virtual,tileType:M.tileInfo.tileType}).then(function(N){return(N=N&&N.pixelBlock)&&N.pixels&&0<N.pixels.length&&(!N.mask||N.mask[L])?{pixelValue:N.pixels.map(function(P){return P[L]})}:{pixelValue:null}})}))},
getProjectedFullExtent:function(A,y){var z=new c;if(this.projectedFullExtent&&!y)return z.resolve(this.projectedFullExtent),z.promise;var B=this.rasterInfo.extent;if(G.requirePE(this.rasterInfo.extent.spatialReference,A))G.load().then(f.hitch(this,function(){C=G.project(B,A);this.projectedFullExtent=C=new m(C.toJson());z.resolve(C)}),function(){z.reject(Error("cannot project into this spatial reference"))});else{var C=G.project(B,A);this.projectedFullExtent=C=new m(C.toJson());z.resolve(C)}return z.promise},
setFetchParameters:function(A,y){},_setRasterHandler:function(A){this._rasterHandler=A;this.getMemberRasters&&this.getMemberRasters().forEach(f.hitch(this,function(y){y._rasterHandler=A}))},_findCredential:function(){this.url&&((this._credential=t.id&&t.id.findCredential(this.url))&&this._credential.ssl||this.serviceInfo&&this.serviceInfo._ssl)&&(this.url=this.url.replace(/^http:/i,"https:"))},_initWorker:function(){this._rasterHandler=new D;this._rasterHandler.start().then(function(){this._rasterHandlerInitialized=
!0}.bind(this))},_requestPixels:function(A){var y=A.url,z=A.payload,B=A.decodeParams,C=A.tileOptions,H=new c(l._dfdCanceller);this._rasterHandler||this._initWorker();var E=this._rasterHandler,K={};y={url:y,handleAs:"arraybuffer",content:z};A.headers&&(y.headers=A.headers);H._pendingDfd=g(y).then(f.hitch(this,function(I){(E&&this._rasterHandlerInitialized?E.decode({encodedData:I,decodeParams:B}):x.decode(I,B)).then(function(L){K.pixelBlock=new w(L);K.extent=C.extent;K.level=C.level;K.row=C.row;K.col=
C.col;K.width=C.width;K.height=C.height;l._resDfd(H,[K])},function(L){l._resDfd(H,[L],!0)})}),function(I){l._resDfd(H,[I],!0)});return H},_computeSignature:function(A){if("string"===typeof A){for(var y=new Uint8Array(A.length),z=0;z<A.length;z++)y[z]=A.charCodeAt(z);A=y}z=y=65535;for(var B=A.length,C=Math.floor(B/2),H=0;C;){var E=359<=C?359:C;C-=E;do y+=A[H++]<<8,z+=y+=A[H++];while(--E);y=(y&65535)+(y>>>16);z=(z&65535)+(z>>>16)}B&1&&(z+=y+=A[H]<<8);return((z&65535)+(z>>>16)<<16|(y&65535)+(y>>>16))>>>
0}})})},"esri/layers/rasterFormats/rasterCodec":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred ../PixelBlock ./LercCodec ./Lerc2Codec ./Lerc ./JpgPlus ./Png ./Raw ./TiffDecoder".split(" "),function(S,J,f,c,h,d,b,a,e,q,t,u){return{validPixelTypes:"U1 U2 U4 U8 U16 U32 S8 S16 S32 F32".split(" "),supportedFormats:"lerc jpeg jpg jpgpng png png8 png24 png32 bip bsq tiff".split(" "),_isPlatformLittleEndian:function(){var g=new ArrayBuffer(4),m=new Uint8Array(g);(new Uint32Array(g))[0]=
1;return 1===m[0]}(),decode:function(g,m){if(void 0===m||null===m)throw"missing decode options";var v;m.format&&(v=m.format.toUpperCase());"BSQ"!==v&&"BIP"!==v&&(v=this._getFormat(g));var p=m.decodeFunc;if(void 0===p||null===p)p=this._getFormatDecoderDfd(v,m.useWasm);return p(g,m)},_getFormatDecoderDfd:function(g,m){if(m&&("LERC"===g||"LERC2"===g))return this._decodeLercWasm.bind(this);var v=null;switch(g){case "LERC":v=this._decodeLerc;break;case "LERC2":v=this._decodeLerc2;break;case "JPEG":v=this._decodeJpeg;
break;case "PNG":v=this._decodePng;break;case "BSQ":v=this._decodeBsq;break;case "BIP":v=this._decodeBip;break;case "TIFF":v=this._decodeTiff;break;default:v=function(p,l){throw"The raster format is not supported";}}v=f.hitch(this,v);return function(p,l){var n=new c;l.isPoint&&l.width&&(l.width++,l.height++);p=v(p,l);l.isPoint&&l.width&&(this._interpolatePointGrid(p),l.width--,l.height--);n.resolve(p);return n}.bind(this)},_getFormat:function(g){g=new Uint8Array(g,0,10);var m="";if(255===g[0]&&216===
g[1])m="JPEG";else if(137===g[0]&&80===g[1]&&78===g[2]&&71===g[3])m="PNG";else if(67===g[0]&&110===g[1]&&116===g[2]&&90===g[3]&&73===g[4]&&109===g[5]&&97===g[6]&&103===g[7]&&101===g[8]&&32===g[9])m="LERC";else if(76===g[0]&&101===g[1]&&114===g[2]&&99===g[3]&&50===g[4]&&32===g[5])m="LERC2";else if(-1<String.fromCharCode.apply(null,g).toLowerCase().indexOf("error"))m="ERROR";else if(73===g[0]&&73===g[1]&&42===g[2]&&0===g[3]||77===g[0]&&77===g[1]&&0===g[2]&&42===g[3])m="TIFF";return m},_validateDecodeParams:function(g){if(!g.height||
Math.floor(g.height)!==g.height)throw"Height not provided.";if(!g.width||Math.floor(g.width)!==g.width)throw"Width not provided.";},_decodeJpeg:function(g,m){if(!e)throw"The jpeg decoder module is not loaded.";this._validateDecodeParams(m);g=(new e).decode(g);if(!this._verifyResult(g,m))throw"The decoded image dimensions are incorrect.";m=new h({width:g.width,height:g.height,pixels:g.pixels,pixelType:"U8",mask:g.mask,statistics:null});m.calculateStatistics();return m},_decodePng:function(g,m){if(!q)throw"The png decoder module is not loaded.";
this._validateDecodeParams(m);g=new Uint8Array(g);var v=new q(g);g=new Uint8Array(m.width*m.height*4);v.copyToImageData(g,v.decodePixels());var p=v=0;p=new Uint8Array(m.width*m.height);for(v=0;v<m.width*m.height;v++)p[v]=g[4*v+3];var l=new h({width:m.width,height:m.height,pixels:[],pixelType:"U8",mask:p,statistics:[]});for(v=0;3>v;v++){var n=new Uint8Array(m.width*m.height);for(p=0;p<m.width*m.height;p++)n[p]=g[4*p+v];l.addData({pixels:n})}l.calculateStatistics();return l},_decodeBsq:function(g,m){if(!t)throw"The bsq decoder module is not loaded.";
this._validateDecodeParams(m);var v=m.noDataValue;m.pixelType=this._getpixelTypeAndNoData(m.pixelType);g=t.decodeBSQ(g,{bandCount:m.planes,width:m.width,height:m.height,pixelType:m.pixelType,noDataValue:v});m=new h({width:m.width,height:m.height,pixels:g.pixels,pixelType:m.pixelType,mask:g.maskData,statistics:null});m.calculateStatistics();return m},_decodeBip:function(g,m){this._validateDecodeParams(m);var v=m.noDataValue;m.pixelType=this._getpixelTypeAndNoData(m.pixelType);g=t.decodeBIP(g,{bandCount:m.planes,
width:m.width,height:m.height,pixelType:m.pixelType,noDataValue:v});m=new h({width:m.width,height:m.height,pixels:g.pixels,pixelType:m.pixelType,mask:g.maskData,statistics:null});m.calculateStatistics();return m},_decodeTiff:function(g,m){this._validateDecodeParams(m);m.pixelType=this._getpixelTypeAndNoData(m.pixelType);g=u.decode(g);g=new h({width:g.width,height:g.height,pixels:g.pixels,pixelType:g.pixelType,mask:g.maskData,statistics:null});g.calculateStatistics();return g},_decodeLerc:function(g,
m){if(!this._isPlatformLittleEndian)throw"lerc decoder is not supported on big endian platform";this._validateDecodeParams(m);var v=m.noDataValue;m.pixelType=this._getpixelTypeAndNoData(m.pixelType);for(var p=0,l,n=0,k,r=g.byteLength-10;n<r;){var w=d.decode(g,{inputOffset:n,encodedMaskData:l,returnMask:0===p?!0:!1,returnEncodedMask:0===p?!0:!1,returnFileInfo:!0,pixelType:m.pixelType,noDataValue:v});n=w.fileInfo.eofOffset;0===p&&(l=w.encodedMaskData,k=new h({width:m.width,height:m.height,pixels:[],
pixelType:m.pixelType,mask:w.maskData,statistics:[]}));p++;if(!this._verifyResult(w,m))throw"The decoded image dimensions are incorrect";k.addData({pixels:w.pixelData,statistics:{minValue:w.minValue,maxValue:w.maxValue,noDataValue:w.noDataValue}})}return k},_decodeLerc2:function(g,m){if(!this._isPlatformLittleEndian)throw"lerc2 decoder is not supported on big endian platform";this._validateDecodeParams(m);m.pixelType=this._getpixelTypeAndNoData(m.pixelType);for(var v=0,p,l,n,k=0,r,w=g.byteLength-
10,x=[],D,G=0;k<w;){l=b.decode(g,{inputOffset:k,maskData:p,returnFileInfo:!0});k=l.fileInfo.eofOffset;p=l.maskData;0===v&&(n=l.fileInfo.numValidPixel,r=new h({width:m.width,height:m.height,pixels:[],dimCount:l.dimCount||1,pixelType:l.fileInfo.pixelType,mask:p,statistics:[]}));l.fileInfo.mask&&0<l.fileInfo.mask.numBytes&&G++;p&&x.push(p);v++;if(!this._verifyResult(l,m))throw"The decoded image dimensions are incorrect";r.addData({pixels:l.pixelData,statistics:{minValue:l.minValue,maxValue:l.maxValue,
noDataValue:l.noDataValue,dimStats:l.dimStats}})}if(1<G){m=r.width*r.height;r.bandMasks=x;p=new Uint8Array(m);p.set(x[0]);for(n=1;n<x.length;n++)for(D=x[n],g=0;g<m;g++)p[g]&=D[g];for(g=n=0;g<m;g++)n+=D[g];r.mask=p}r.validPixelCount=n;return r},_decodeLercWasm:function(g,m){if(!this._isPlatformLittleEndian)throw"lerc decoder is not supported on big endian platform";this._validateDecodeParams(m);var v=new c;a.load().then(function(){var p=a.decode(g,{inputOffset:0,noDataValue:m.noDataValue,pixelType:m.pixelType&&
m.pixelType.toUpperCase()});p=new h({width:p.width,height:p.height,pixelType:p.pixelType.toUpperCase(),pixels:p.pixels,mask:p.mask,statistics:p.statistics,validPixelCount:p.validPixelCount});m.isPoint&&m.width&&(this._interpolatePointGrid(p),m.width--,m.height--);v.resolve(p)}.bind(this),function(){v.reject("Cannot load lerc wasm decoder")});return v},_interpolatePointGrid:function(g,m){var v=g.pixels;if(v&&0!==v.length){var p=v.length,l=g.width,n=g.mask,k=l-1,r=g.height-1,w=[],x,D;if(0===(null==
m?1:m)){for(m=0;m<p;m++){var G=v[m];var F=new G.constructor(k*r);for(x=0;x<r;x++){var A=x*l;for(D=0;D<k;D++)F[x*k+D]=G[A+D]}w.push(F)}if(n){var y=new Uint8Array(k*r);for(x=0;x<r;x++)for(A=x*l,D=0;D<k;D++)y[x*k+D]=n[A+D]}}else{for(m=0;m<p;m++){G=v[m];F=new G.constructor(k*r);for(x=0;x<r;x++)for(A=x*l,D=0;D<k;D++)F[x*k+D]=(G[A+D]+G[A+D+1]+G[A+l+D]+G[A+l+D+1])/4;w.push(F)}if(n)for(y=new Uint8Array(k*r),x=0;x<r;x++)for(A=x*l,D=0;D<k;D++)y[x*k+D]=Math.min.apply(null,[n[A+D],n[A+D+1],n[A+l+D],n[A+l+D+1]])}g.width=
k;g.height=r;g.mask=y;g.pixels=w;return g}},_getpixelTypeAndNoData:function(g){return"U1"===g||"U2"===g||"U4"===g||"U8"===g?"U8":g},_verifyResult:function(g,m){return g.height!==m.height||g.width!==m.width?!1:!0}}})},"esri/layers/rasterFormats/Lerc":function(){var S=this&&this.__createBinding||(Object.create?function(h,d,b,a){void 0===a&&(a=b);Object.defineProperty(h,a,{enumerable:!0,get:function(){return d[b]}})}:function(h,d,b,a){void 0===a&&(a=b);h[a]=d[b]}),J=this&&this.__setModuleDefault||(Object.create?
function(h,d){Object.defineProperty(h,"default",{enumerable:!0,value:d})}:function(h,d){h["default"]=d}),f=this&&this.__importStar||function(h){if(h&&h.__esModule)return h;var d={};if(null!=h)for(var b in h)"default"!==b&&Object.prototype.hasOwnProperty.call(h,b)&&S(d,h,b);J(d,h);return d},c=this&&this.__read||function(h,d){var b="function"===typeof Symbol&&h[Symbol.iterator];if(!b)return h;h=b.call(h);var a,e=[];try{for(;(void 0===d||0<d--)&&!(a=h.next()).done;)e.push(a.value)}catch(t){var q={error:t}}finally{try{a&&
!a.done&&(b=h["return"])&&b.call(h)}finally{if(q)throw q.error;}}return e};define(["require","exports"],function(h,d){function b(u){var g=u._malloc,m=u._free,v=u._lerc_getBlobInfo,p=u._lerc_getDataRanges,l=u._lerc_decode_4D,n,k=Object.values(u.asm).find(function(w){return w&&"buffer"in w&&w.buffer===u.HEAPU8.buffer}),r=function(w){w=w.map(function(F){return(F>>3<<3)+16});var x=w.reduce(function(F,A){return F+A}),D=g(x);n=new Uint8Array(k.buffer);x=w[0];w[0]=D;for(D=1;D<w.length;D++){var G=w[D];w[D]=
w[D-1]+x;x=G}return w};t.getBlobInfo=function(w){var x,D=new Uint8Array(48),G=new Uint8Array(24),F=c(r([w.length,D.length,G.length]),3),A=F[0],y=F[1];F=F[2];n.set(w,A);n.set(D,y);n.set(G,F);if(x=v(A,w.length,y,F,12,3))throw m(A),"lerc-getBlobInfo: error code is ".concat(x);n=new Uint8Array(k.buffer);D.set(n.slice(y,y+D.length));G.set(n.slice(F,F+G.length));D=new Uint32Array(D.buffer);F=new Float64Array(G.buffer);y=c(D,11);G=y[2];D=y[5];var z=y[10];y={version:y[0],dimCount:G,width:y[3],height:y[4],
validPixelCount:y[6],bandCount:D,blobSize:y[7],maskCount:y[8],dataType:y[1],minValue:F[0],maxValue:F[1],maxZerror:F[2],statistics:[],bandCountWithNoData:z};if(z)return y;if(1===G&&1===D)return m(A),y.statistics.push({minValue:F[0],maxValue:F[1]}),y;var B=G*D*8,C=new Uint8Array(B),H=new Uint8Array(B);F=A;z=0;var E=!1;if(n.byteLength<A+2*B){m(A);E=!0;x=c(r([w.length,B,B]),3);F=x[0];z=x[1];var K=x[2];n.set(w,F)}else x=c(r([B,B]),2),z=x[0],K=x[1];n.set(C,z);n.set(H,K);if(x=p(A,w.length,G,D,z,K))throw m(F),
E||m(z),"lerc-getDataRanges: error code is ".concat(x);n=new Uint8Array(k.buffer);C.set(n.slice(z,z+B));H.set(n.slice(K,K+B));w=new Float64Array(C.buffer);A=new Float64Array(H.buffer);x=y.statistics;for(H=0;H<D;H++)if(1<G){B=w.slice(H*G,(H+1)*G);C=A.slice(H*G,(H+1)*G);K=Math.min.apply(null,B);var I=Math.max.apply(null,C);x.push({minValue:K,maxValue:I,dimStats:{minValues:B,maxValues:C}})}else x.push({minValue:w[H],maxValue:A[H]});m(F);E||m(z);return y};t.decode=function(w,x){var D=x.maskCount,G=x.dimCount,
F=x.bandCount,A=x.width,y=x.height,z=x.dataType,B=x.bandCountWithNoData,C=a[z],H=A*y;x=new Uint8Array(H*F);var E=H*G*F*C.size;C=new Uint8Array(E);H=new Uint8Array(F);var K=8*F,I=new Uint8Array(K),L=c(r([w.length,x.length,C.length,H.length,I.length]),5),M=L[0],N=L[1],P=L[2],R=L[3];L=L[4];n.set(w,M);n.set(x,N);n.set(C,P);n.set(H,R);n.set(I,L);if(w=l(M,w.length,D,N,G,A,y,F,z,P,R,L))throw m(M),"lerc-decode: error code is ".concat(w);n=new Uint8Array(k.buffer);C.set(n.slice(P,P+E));x.set(n.slice(N,N+x.length));
w=null;if(B)for(H.set(n.slice(R,R+F)),I.set(n.slice(L,L+K)),w=[],F=0;F<H.length;F++)w.push(H[F]?I[F]:null);m(M);return{data:C,maskData:x,noDataValues:w}}}Object.defineProperty(d,"__esModule",{value:!0});d.getBlobInfo=d.decode=d.isLoaded=d.load=void 0;var a=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,128]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",
size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-3.4027999387901484E38,3.4027999387901484E38]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-1.7976931348623157E308,1.7976931348623157E308]}],e=null,q=!1;d.load=function(){return e?e:e=(new Promise(function(u,g){h(["./lerc-wasm"],u,g)})).then(f).then(function(u){u=u.default;return u({locateFile:function(g){return h.toUrl("./"+g)}})}).then(function(u){b(u);
q=!0})};d.isLoaded=function(){return q};var t={getBlobInfo:null,decode:null};d.decode=function(u,g){var m;void 0===g&&(g={});var v=null!==(m=g.inputOffset)&&void 0!==m?m:0;m=u instanceof Uint8Array?u.subarray(v):new Uint8Array(u,v);u=t.getBlobInfo(m);var p=t.decode(m,u),l=p.maskData;m=u.width;v=u.height;var n=u.bandCount,k=u.dimCount,r=u.maskCount,w=u.statistics,x=a[u.dataType],D=new x.ctor(p.data.buffer);p=[];for(var G=[],F=m*v,A=F*k,y=0;y<n;y++){var z=D.subarray(y*A,(y+1)*A);if(g.returnPixelInterleavedDims)p.push(z);
else{var B=F,C=k;if(!(2>C)){for(var H=new x.ctor(B*C),E=0,K=0;E<B;E++)for(var I=0,L=E;I<C;I++,L+=B)H[L]=z[K++];z=H}p.push(z)}G.push(l.subarray(y*A,(y+1)*A))}l=0===r?null:1===r?G[0]:new Uint8Array(F);if(1<r)for(l.set(G[0]),y=1;y<G.length;y++)for(D=G[y],A=0;A<F;A++)l[A]&=D[A];y=g.noDataValue;y=null!=y&&x.range[0]<=y&&x.range[1]>=y;if(0<r&&y)for(B=g.noDataValue,y=0;y<n;y++)for(z=p[y],D=G[y]||l,A=0;A<F;A++)0===D[A]&&(z[A]=B);return{width:m,height:v,bandCount:n,pixelType:g.pixelType&&0===u.version?g.pixelType:
x.pixelType,dimCount:k,statistics:w,pixels:p,mask:l,bandMasks:r===n&&1<n?G:null}};d.getBlobInfo=function(u,g){var m,v;void 0===g&&(g={});var p=u instanceof Uint8Array?u.subarray(null!==(m=g.inputOffset)&&void 0!==m?m:0):new Uint8Array(u,null!==(v=g.inputOffset)&&void 0!==v?v:0);return t.getBlobInfo(p)}})},"esri/layers/rasterFormats/JpgPlus":function(){define(["dojo/_base/declare","./Zlib","./Jpg"],function(S,J,f){return S(null,{constructor:function(){},decode:function(c){var h=new Uint8Array(c);c=
new f;c.parse(h);var d=c.numComponents,b=c.getData(c.width,c.height,!0),a=c.width*c.height,e=c.eof,q=0,t=0,u=0;if(e<h.length-1){t=(new J(h.subarray(e))).getBytes();var g=new Uint8Array(a);for(q=h=0;q<t.length;q++)for(u=7;0<=u;u--)g[h++]=t[q]>>u&1}h=[];if(1===d&&b.length===a)h=[b,b,b];else{for(q=0;3>q;q++)d=new Uint8Array(a),h.push(d);for(t=u=0;t<a;t++)for(q=0;3>q;q++)h[q][t]=b[u++]}return{width:c.width,height:c.height,pixels:h,mask:g}}})})},"esri/layers/rasterFormats/Zlib":function(){define([],function(){var S=
function(){function J(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}J.prototype={ensureBuffer:function(f){var c=this.buffer,h=c?c.byteLength:0;if(f<h)return c;for(var d=512;d<f;)d<<=1;f=new Uint8Array(d);for(d=0;d<h;++d)f[d]=c[d];return this.buffer=f},getByte:function(){for(var f=this.pos;this.bufferLength<=f;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(f){var c=this.pos;if(f){this.ensureBuffer(c+f);for(f=c+f;!this.eof&&this.bufferLength<
f;)this.readBlock();var h=this.bufferLength;f>h&&(f=h)}else{for(;!this.eof;)this.readBlock();f=this.bufferLength}this.pos=f;return this.buffer.subarray(c,f)},lookChar:function(){for(var f=this.pos;this.bufferLength<=f;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var f=this.pos;this.bufferLength<=f;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(f,c,h){for(var d=
f+c;this.bufferLength<=d&&!this.eof;)this.readBlock();return new Stream(this.buffer,f,c,h)},skip:function(f){f||(f=1);this.pos+=f},reset:function(){this.pos=0}};return J}();return function(){function J(e){throw Error(e);}function f(e){var q=0,t=e[q++],u=e[q++];-1!=t&&-1!=u||J("Invalid header in flate stream");8!=(t&15)&&J("Unknown compression method in flate stream");0!=((t<<8)+u)%31&&J("Bad FCHECK in flate stream");u&32&&J("FDICT bit set in flate stream");this.bytes=e;this.bytesPos=q;this.codeBuf=
this.codeSize=0;S.call(this)}if(!self||!self.Uint32Array)return null;var c=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),h=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),d=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,
794625,798721,868353,876545]),b=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,
524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,
524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,
524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,
524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,
524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,
524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,
524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],a=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];f.prototype=Object.create(S.prototype);f.prototype.getBits=function(e){for(var q=this.codeSize,t=this.codeBuf,u=this.bytes,g=this.bytesPos,m;q<e;)"undefined"==
typeof(m=u[g++])&&J("Bad encoding in flate stream"),t|=m<<q,q+=8;this.codeBuf=t>>e;this.codeSize=q-=e;this.bytesPos=g;return t&(1<<e)-1};f.prototype.getCode=function(e){var q=e[0],t=e[1];e=this.codeSize;for(var u=this.codeBuf,g=this.bytes,m=this.bytesPos;e<t;){var v;"undefined"==typeof(v=g[m++])&&J("Bad encoding in flate stream");u|=v<<e;e+=8}t=q[u&(1<<t)-1];q=t>>16;t&=65535;(0==e||e<q||0==q)&&J("Bad encoding in flate stream");this.codeBuf=u>>q;this.codeSize=e-q;this.bytesPos=m;return t};f.prototype.generateHuffmanTable=
function(e){for(var q=e.length,t=0,u=0;u<q;++u)e[u]>t&&(t=e[u]);for(var g=1<<t,m=new Uint32Array(g),v=1,p=0,l=2;v<=t;++v,p<<=1,l<<=1)for(var n=0;n<q;++n)if(e[n]==v){var k=0,r=p;for(u=0;u<v;++u)k=k<<1|r&1,r>>=1;for(u=k;u<g;u+=l)m[u]=v<<16|n;++p}return[m,t]};f.prototype.readBlock=function(){function e(k,r,w,x,D){for(k=k.getBits(w)+x;0<k--;)r[p++]=D}var q=this.getBits(3);q&1&&(this.eof=!0);q>>=1;if(0==q){var t=this.bytes,u=this.bytesPos,g;"undefined"==typeof(g=t[u++])&&J("Bad block header in flate stream");
var m=g;"undefined"==typeof(g=t[u++])&&J("Bad block header in flate stream");m|=g<<8;"undefined"==typeof(g=t[u++])&&J("Bad block header in flate stream");q=g;"undefined"==typeof(g=t[u++])&&J("Bad block header in flate stream");(q|g<<8)!=(~m&65535)&&J("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;g=this.bufferLength;q=this.ensureBuffer(g+m);this.bufferLength=m=g+m;for(var v=g;v<m;++v){if("undefined"==typeof(g=t[u++])){this.eof=!0;break}q[v]=g}this.bytesPos=u}else{if(1==
q)u=b,g=a;else if(2==q){q=this.getBits(5)+257;g=this.getBits(5)+1;t=this.getBits(4)+4;u=Array(c.length);for(var p=0;p<t;)u[c[p++]]=this.getBits(3);u=this.generateHuffmanTable(u);p=t=0;g=q+g;for(m=Array(g);p<g;)v=this.getCode(u),16==v?e(this,m,2,3,t):17==v?e(this,m,3,3,t=0):18==v?e(this,m,7,11,t=0):m[p++]=t=v;u=this.generateHuffmanTable(m.slice(0,q));g=this.generateHuffmanTable(m.slice(q,g))}else J("Unknown block type in flate stream");m=(q=this.buffer)?q.length:0;for(v=this.bufferLength;;){var l=
this.getCode(u);if(256>l)v+1>=m&&(q=this.ensureBuffer(v+1),m=q.length),q[v++]=l;else{if(256==l){this.bufferLength=v;break}l-=257;l=h[l];var n=l>>16;0<n&&(n=this.getBits(n));t=(l&65535)+n;l=this.getCode(g);l=d[l];n=l>>16;0<n&&(n=this.getBits(n));l=(l&65535)+n;v+t>=m&&(q=this.ensureBuffer(v+t),m=q.length);for(n=0;n<t;++n,++v)q[v]=q[v-l]}}}};return f}()})},"esri/layers/rasterFormats/Jpg":function(){define([],function(){var S=function(){function J(f){this.message="JPEG error: "+f}J.prototype=Error();
J.prototype.name="JpegError";return J.constructor=J}();return function(){function J(){this.decodeTransform=null;this.colorTransform=-1}function f(a,e){for(var q=0,t=[],u,g,m=16;0<m&&!a[m-1];)m--;t.push({children:[],index:0});var v=t[0],p;for(u=0;u<m;u++){for(g=0;g<a[u];g++){v=t.pop();for(v.children[v.index]=e[q];0<v.index;)v=t.pop();v.index++;for(t.push(v);t.length<=u;)t.push(p={children:[],index:0}),v.children[v.index]=p.children,v=p;q++}u+1<m&&(t.push(p={children:[],index:0}),v.children[v.index]=
p.children,v=p)}return t[0].children}function c(a,e,q,t,u,g,m,v,p){function l(){if(0<B)return B--,z>>B&1;z=a[e++];if(255===z){var da=a[e++];if(da)throw new S("unexpected marker "+(z<<8|da).toString(16));}B=7;return z>>>7}function n(da){for(;;){da=da[l()];if("number"===typeof da)return da;if("object"!==typeof da)throw new S("invalid huffman sequence");}}function k(da){for(var ra=0;0<da;)ra=ra<<1|l(),da--;return ra}function r(da){if(1===da)return 1===l()?1:-1;var ra=k(da);return ra>=1<<da-1?ra:ra+(-1<<
da)+1}function w(da,ra){var ca=n(da.huffmanTableDC);ca=0===ca?0:r(ca);da.blockData[ra]=da.pred+=ca;for(ca=1;64>ca;){var fa=n(da.huffmanTableAC),la=fa&15;fa>>=4;if(0===la){if(15>fa)break;ca+=16}else ca+=fa,da.blockData[ra+b[ca]]=r(la),ca++}}function x(da,ra){var ca=n(da.huffmanTableDC);ca=0===ca?0:r(ca)<<p;da.blockData[ra]=da.pred+=ca}function D(da,ra){da.blockData[ra]|=l()<<p}function G(da,ra){if(0<C)C--;else for(var ca=g;ca<=m;){var fa=n(da.huffmanTableAC),la=fa&15;fa>>=4;if(0===la){if(15>fa){C=
k(fa)+(1<<fa)-1;break}ca+=16}else ca+=fa,da.blockData[ra+b[ca]]=r(la)*(1<<p),ca++}}function F(da,ra){for(var ca=g,fa=0,la;ca<=m;){la=b[ca];switch(H){case 0:fa=n(da.huffmanTableAC);la=fa&15;fa>>=4;if(0===la)15>fa?(C=k(fa)+(1<<fa),H=4):(fa=16,H=1);else{if(1!==la)throw new S("invalid ACn encoding");E=r(la);H=fa?2:3}continue;case 1:case 2:da.blockData[ra+la]?da.blockData[ra+la]+=l()<<p:(fa--,0===fa&&(H=2===H?3:0));break;case 3:da.blockData[ra+la]?da.blockData[ra+la]+=l()<<p:(da.blockData[ra+la]=E<<p,
H=0);break;case 4:da.blockData[ra+la]&&(da.blockData[ra+la]+=l()<<p)}ca++}4===H&&(C--,0===C&&(H=0))}var A=q.mcusPerLine,y=e,z=0,B=0,C=0,H=0,E,K=t.length,I,L,M,N;v=q.progressive?0===g?0===v?x:D:0===v?G:F:w;var P=0;q=1===K?t[0].blocksPerLine*t[0].blocksPerColumn:A*q.mcusPerColumn;for(var R,Y;P<q;){var ja=u?Math.min(q-P,u):q;for(I=0;I<K;I++)t[I].pred=0;C=0;if(1===K){var aa=t[0];for(N=0;N<ja;N++)v(aa,64*((aa.blocksPerLine+1)*(P/aa.blocksPerLine|0)+P%aa.blocksPerLine)),P++}else for(N=0;N<ja;N++){for(I=
0;I<K;I++)for(aa=t[I],R=aa.h,Y=aa.v,L=0;L<Y;L++)for(M=0;M<R;M++)v(aa,64*((aa.blocksPerLine+1)*((P/A|0)*aa.v+L)+(P%A*aa.h+M)));P++}B=0;(aa=d(a,e))&&aa.invalid&&(e=aa.offset);aa=aa&&aa.marker;if(!aa||65280>=aa)throw new S("marker was not found");if(65488<=aa&&65495>=aa)e+=2;else break}(aa=d(a,e))&&aa.invalid&&(e=aa.offset);return e-y}function h(a,e){a=e.blocksPerLine;for(var q=e.blocksPerColumn,t=new Int16Array(64),u=0;u<q;u++)for(var g=0;g<a;g++){var m=void 0,v=void 0,p=void 0,l=void 0,n=void 0,k=
void 0,r=void 0,w=void 0,x=n=k=l=v=m=void 0,D=void 0,G=void 0,F=void 0,A=64*((e.blocksPerLine+1)*u+g),y=t,z=e.quantizationTable,B=e.blockData;if(!z)throw new S("missing required Quantization Table.");for(var C=0;64>C;C+=8)m=B[A+C],w=B[A+C+1],r=B[A+C+2],k=B[A+C+3],n=B[A+C+4],l=B[A+C+5],p=B[A+C+6],v=B[A+C+7],m*=z[C],0===(w|r|k|n|l|p|v)?(m=5793*m+512>>10,y[C]=m,y[C+1]=m,y[C+2]=m,y[C+3]=m,y[C+4]=m,y[C+5]=m,y[C+6]=m,y[C+7]=m):(w*=z[C+1],r*=z[C+2],k*=z[C+3],n*=z[C+4],l*=z[C+5],p*=z[C+6],v*=z[C+7],F=5793*
m+128>>8,G=5793*n+128>>8,D=r,x=p,n=2896*(w-v)+128>>8,v=2896*(w+v)+128>>8,k<<=4,l<<=4,F=F+G+1>>1,G=F-G,m=3784*D+1567*x+128>>8,D=1567*D-3784*x+128>>8,x=m,n=n+l+1>>1,l=n-l,v=v+k+1>>1,k=v-k,F=F+x+1>>1,x=F-x,G=G+D+1>>1,D=G-D,m=2276*n+3406*v+2048>>12,n=3406*n-2276*v+2048>>12,v=m,m=799*k+4017*l+2048>>12,k=4017*k-799*l+2048>>12,l=m,y[C]=F+v,y[C+7]=F-v,y[C+1]=G+l,y[C+6]=G-l,y[C+2]=D+k,y[C+5]=D-k,y[C+3]=x+n,y[C+4]=x-n);for(z=0;8>z;++z)m=y[z],w=y[z+8],r=y[z+16],k=y[z+24],n=y[z+32],l=y[z+40],p=y[z+48],v=y[z+
56],0===(w|r|k|n|l|p|v)?(m=5793*m+8192>>14,m=-2040>m?0:2024<=m?255:m+2056>>4,B[A+z]=m,B[A+z+8]=m,B[A+z+16]=m,B[A+z+24]=m,B[A+z+32]=m,B[A+z+40]=m,B[A+z+48]=m,B[A+z+56]=m):(F=5793*m+2048>>12,G=5793*n+2048>>12,D=r,x=p,n=2896*(w-v)+2048>>12,v=2896*(w+v)+2048>>12,F=(F+G+1>>1)+4112,G=F-G,m=3784*D+1567*x+2048>>12,D=1567*D-3784*x+2048>>12,x=m,n=n+l+1>>1,l=n-l,v=v+k+1>>1,k=v-k,F=F+x+1>>1,x=F-x,G=G+D+1>>1,D=G-D,m=2276*n+3406*v+2048>>12,n=3406*n-2276*v+2048>>12,v=m,m=799*k+4017*l+2048>>12,k=4017*k-799*l+2048>>
12,l=m,m=F+v,v=F-v,w=G+l,p=G-l,r=D+k,l=D-k,k=x+n,n=x-n,m=16>m?0:4080<=m?255:m>>4,w=16>w?0:4080<=w?255:w>>4,r=16>r?0:4080<=r?255:r>>4,k=16>k?0:4080<=k?255:k>>4,n=16>n?0:4080<=n?255:n>>4,l=16>l?0:4080<=l?255:l>>4,p=16>p?0:4080<=p?255:p>>4,v=16>v?0:4080<=v?255:v>>4,B[A+z]=m,B[A+z+8]=w,B[A+z+16]=r,B[A+z+24]=k,B[A+z+32]=n,B[A+z+40]=l,B[A+z+48]=p,B[A+z+56]=v)}return e.blockData}function d(a,e,q){var t=a.length-1;q=q<e?q:e;if(e>=t)return null;var u=a[e]<<8|a[e+1];if(65472<=u&&65534>=u)return{invalid:null,
marker:u,offset:e};for(e=a[q]<<8|a[q+1];!(65472<=e&&65534>=e);){if(++q>=t)return null;e=a[q]<<8|a[q+1]}return{invalid:u.toString(16),marker:e,offset:q}}if(!self||!self.Uint8ClampedArray)return null;var b=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);J.prototype={parse:function(a){function e(){var z=a[u]<<8|a[u+1];u+=2;return z}function q(){var z=
e();z=u+z-2;var B=d(a,z,u);B&&B.invalid&&(z=B.offset);z=a.subarray(u,z);u+=z.length;return z}function t(z){for(var B=Math.ceil(z.samplesPerLine/8/z.maxH),C=Math.ceil(z.scanLines/8/z.maxV),H=0;H<z.components.length;H++){y=z.components[H];var E=Math.ceil(Math.ceil(z.samplesPerLine/8)*y.h/z.maxH),K=Math.ceil(Math.ceil(z.scanLines/8)*y.v/z.maxV);y.blockData=new Int16Array(64*C*y.v*(B*y.h+1));y.blocksPerLine=E;y.blocksPerColumn=K}z.mcusPerLine=B;z.mcusPerColumn=C}var u=0,g=null,m=null,v=[],p=[],l=[],n=
e();if(65496!==n)throw new S("SOI not found");for(n=e();65497!==n;){switch(n){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var k=q();65504===n&&74===k[0]&&70===k[1]&&73===k[2]&&70===k[3]&&0===k[4]&&(g={version:{major:k[5],minor:k[6]},densityUnits:k[7],xDensity:k[8]<<8|k[9],yDensity:k[10]<<8|k[11],thumbWidth:k[12],thumbHeight:k[13],thumbData:k.subarray(14,14+
3*k[12]*k[13])});65518===n&&65===k[0]&&100===k[1]&&111===k[2]&&98===k[3]&&101===k[4]&&(m={version:k[5]<<8|k[6],flags0:k[7]<<8|k[8],flags1:k[9]<<8|k[10],transformCode:k[11]});break;case 65499:n=e()+u-2;for(var r;u<n;){var w=a[u++],x=new Uint16Array(64);if(0===w>>4)for(k=0;64>k;k++)r=b[k],x[r]=a[u++];else if(1===w>>4)for(k=0;64>k;k++)r=b[k],x[r]=e();else throw new S("DQT - invalid table spec");v[w&15]=x}break;case 65472:case 65473:case 65474:if(D)throw new S("Only single frame JPEGs supported");e();
var D={};D.extended=65473===n;D.progressive=65474===n;D.precision=a[u++];D.scanLines=e();D.samplesPerLine=e();D.components=[];D.componentIds={};k=a[u++];for(n=x=w=0;n<k;n++){r=a[u];var G=a[u+1]>>4;var F=a[u+1]&15;w<G&&(w=G);x<F&&(x=F);G=D.components.push({h:G,v:F,quantizationId:a[u+2],quantizationTable:null});D.componentIds[r]=G-1;u+=3}D.maxH=w;D.maxV=x;t(D);break;case 65476:r=e();for(n=2;n<r;){w=a[u++];x=new Uint8Array(16);for(k=G=0;16>k;k++,u++)G+=x[k]=a[u];F=new Uint8Array(G);for(k=0;k<G;k++,u++)F[k]=
a[u];n+=17+G;(0===w>>4?l:p)[w&15]=f(x,F)}break;case 65501:e();var A=e();break;case 65498:e();r=a[u++];k=[];for(n=0;n<r;n++){w=D.componentIds[a[u++]];var y=D.components[w];w=a[u++];y.huffmanTableDC=l[w>>4];y.huffmanTableAC=p[w&15];k.push(y)}n=a[u++];r=a[u++];w=a[u++];n=c(a,u,D,k,A,n,r,w>>4,w&15);u+=n;break;case 65535:255!==a[u]&&u--;break;default:if(255===a[u-3]&&192<=a[u-2]&&254>=a[u-2])u-=3;else throw new S("unknown marker "+n.toString(16));}n=e()}this.width=D.samplesPerLine;this.height=D.scanLines;
this.jfif=g;this.eof=u;this.adobe=m;this.components=[];for(n=0;n<D.components.length;n++){y=D.components[n];if(g=v[y.quantizationId])y.quantizationTable=g;this.components.push({output:h(D,y),scaleX:y.h/D.maxH,scaleY:y.v/D.maxV,blocksPerLine:y.blocksPerLine,blocksPerColumn:y.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(a,e){var q=this.width/a,t=this.height/e,u,g,m=0,v=this.components.length,p=a*e*v,l=new Uint8ClampedArray(p),n=new Uint32Array(a);for(g=
0;g<v;g++){var k=this.components[g];var r=k.scaleX*q;var w=k.scaleY*t;m=g;var x=k.output;var D=k.blocksPerLine+1<<3;for(u=0;u<a;u++)k=0|u*r,n[u]=(k&4294967288)<<3|k&7;for(r=0;r<e;r++)for(k=0|r*w,k=D*(k&4294967288)|(k&7)<<3,u=0;u<a;u++)l[m]=x[k+n[u]],m+=v}if(e=this.decodeTransform)for(g=0;g<p;)for(a=k=0;k<v;k++,g++,a+=2)l[g]=(l[g]*e[a]>>8)+e[a+1];return l},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?
!0:!1},_convertYccToRgb:function(a){for(var e,q,t,u=0,g=a.length;u<g;u+=3)e=a[u],q=a[u+1],t=a[u+2],a[u]=e-179.456+1.402*t,a[u+1]=e+135.459-.344*q-.714*t,a[u+2]=e-226.816+1.772*q;return a},_convertYcckToRgb:function(a){for(var e,q,t,u,g=0,m=0,v=a.length;m<v;m+=4)e=a[m],q=a[m+1],t=a[m+2],u=a[m+3],a[g++]=-122.67195406894+q*(-6.60635669420364E-5*q+4.37130475926232E-4*t-5.4080610064599E-5*e+4.8449797120281E-4*u-.154362151871126)+t*(-9.57964378445773E-4*t+8.17076911346625E-4*e-.00477271405408747*u+1.53380253221734)+
e*(9.61250184130688E-4*e-.00266257332283933*u+.48357088451265)+u*(-3.36197177618394E-4*u+.484791561490776),a[g++]=107.268039397724+q*(2.19927104525741E-5*q-6.40992018297945E-4*t+6.59397001245577E-4*e+4.26105652938837E-4*u-.176491792462875)+t*(-7.78269941513683E-4*t+.00130872261408275*e+7.70482631801132E-4*u-.151051492775562)+e*(.00126935368114843*e-.00265090189010898*u+.25802910206845)+u*(-3.18913117588328E-4*u-.213742400323665),a[g++]=-20.810012546947+q*(-5.70115196973677E-4*q-2.63409051004589E-5*
t+.0020741088115012*e-.00288260236853442*u+.814272968359295)+t*(-1.53496057440975E-5*t-1.32689043961446E-4*e+5.60833691242812E-4*u-.195152027534049)+e*(.00174418132927582*e-.00255243321439347*u+.116935020465145)+u*(-3.43531996510555E-4*u+.24165260232407);return a},_convertYcckToCmyk:function(a){for(var e,q,t,u=0,g=a.length;u<g;u+=4)e=a[u],q=a[u+1],t=a[u+2],a[u]=434.456-e-1.402*t,a[u+1]=119.541-e+.344*q+.714*t,a[u+2]=481.816-e-1.772*q;return a},_convertCmykToRgb:function(a){for(var e,q,t,u,g=0,m=1/
255,v=0,p=a.length;v<p;v+=4)e=a[v]*m,q=a[v+1]*m,t=a[v+2]*m,u=a[v+3]*m,a[g++]=255+e*(-4.387332384609988*e+54.48615194189176*q+18.82290502165302*t+212.25662451639585*u-285.2331026137004)+q*(1.7149763477362134*q-5.6096736904047315*t-17.873870861415444*u-5.497006427196366)+t*(-2.5217340131683033*t-21.248923337353073*u+17.5119270841813)-u*(21.86122147463605*u+189.48180835922747),a[g++]=255+e*(8.841041422036149*e+60.118027045597366*q+6.871425592049007*t+31.159100130055922*u-79.2970844816548)+q*(-15.310361306967817*
q+17.575251261109482*t+131.35250912493976*u-190.9453302588951)+t*(4.444339102852739*t+9.8632861493405*u-24.86741582555878)-u*(20.737325471181034*u+187.80453709719578),a[g++]=255+e*(.8842522430003296*e+8.078677503112928*q+30.89978309703729*t-.23883238689178934*u-14.183576799673286)+q*(10.49593273432072*q+63.02378494754052*t+50.606957656360734*u-112.23884253719248)+t*(.03296041114873217*t+115.60384449646641*u-193.58209356861505)-u*(22.33816807309886*u+180.12613974708367);return a},getData:function(a,
e,q){if(4<this.numComponents)throw new S("Unsupported color mode");a=this._getLinearizedBlockData(a,e);if(1===this.numComponents&&q){q=a.length;e=new Uint8ClampedArray(3*q);for(var t=0,u=0;u<q;u++){var g=a[u];e[t++]=g;e[t++]=g;e[t++]=g}return e}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(a);if(4===this.numComponents){if(this._isColorConversionNeeded())return q?this._convertYcckToRgb(a):this._convertYcckToCmyk(a);if(q)return this._convertCmykToRgb(a)}return a}};
return J}()})},"esri/layers/rasterFormats/Png":function(){define(["./Zlib"],function(S){return function(){function J(c){var h,d;this.data=c;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(d=null;;){var b=this.readUInt32();var a=c=void 0;c=[];for(a=0;4>a;++a)c.push(String.fromCharCode(this.data[this.pos++]));c=c.join("");switch(c){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=
this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(b);break;case "fcTL":d&&this.animation.frames.push(d);this.pos+=4;d={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};c=this.readUInt16();b=this.readUInt16()||
100;d.delay=1E3*c/b;d.disposeOp=this.data[this.pos++];d.blendOp=this.data[this.pos++];d.data=[];break;case "IDAT":case "fdAT":"fdAT"===c&&(this.pos+=4,b-=4);c=(null!=d?d.data:void 0)||this.imgData;for(a=0;0<=b?a<b:a>b;0<=b?++a:--a)c.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(b);b=255-this.transparency.indexed.length;if(0<b)for(c=0;0<=b?c<b:c>b;0<=b?++c:--c)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=
this.read(b)[0];break;case 2:this.transparency.rgb=this.read(b)}break;case "tEXt":a=this.read(b);b=a.indexOf(0);c=String.fromCharCode.apply(String,a.slice(0,b));this.text[c]=String.fromCharCode.apply(String,a.slice(b+1));break;case "IEND":d&&this.animation.frames.push(d);a:{switch(this.colorType){case 0:case 3:case 4:d=1;break a;case 2:case 6:d=3;break a}d=void 0}this.colors=d;this.hasAlphaChannel=4===(h=this.colorType)||6===h;h=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*
h;a:{switch(this.colors){case 1:h="DeviceGray";break a;case 3:h="DeviceRGB";break a}h=void 0}this.colorSpace=h;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=b}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}J.load=function(c,h,d){"function"===typeof h&&(d=h);var b=new XMLHttpRequest;b.open("GET",c,!0);b.responseType="arraybuffer";b.onload=function(){var a=new Uint8Array(b.response||b.mozResponseArrayBuffer);a=new J(a);"function"===typeof(null!=
h?h.getContext:void 0)&&a.render(h);return"function"===typeof d?d(a):void 0};return b.send(null)};J.prototype.read=function(c){var h;var d=[];for(h=0;0<=c?h<c:h>c;0<=c?++h:--h)d.push(this.data[this.pos++]);return d};J.prototype.readUInt32=function(){var c=this.data[this.pos++]<<24;var h=this.data[this.pos++]<<16;var d=this.data[this.pos++]<<8;var b=this.data[this.pos++];return c|h|d|b};J.prototype.readUInt16=function(){var c=this.data[this.pos++]<<8;var h=this.data[this.pos++];return c|h};J.prototype.decodePixels=
function(c){var h,d,b,a,e,q,t,u;null==c&&(c=this.imgData);if(0===c.length)return new Uint8Array(0);c=new S(c);c=c.getBytes();var g=this.pixelBitlength/8;var m=g*this.width;var v=new Uint8Array(m*this.height);var p=c.length;for(d=a=e=0;a<p;){switch(c[a++]){case 0:for(b=h=0;h<m;b=h+=1)v[d++]=c[a++];break;case 1:for(b=q=0;q<m;b=q+=1){h=c[a++];var l=b<g?0:v[d-g];v[d++]=(h+l)%256}break;case 2:for(b=l=0;l<m;b=l+=1){h=c[a++];var n=(b-b%g)/g;q=e&&v[(e-1)*m+n*g+b%g];v[d++]=(q+h)%256}break;case 3:for(b=u=0;u<
m;b=u+=1)h=c[a++],n=(b-b%g)/g,l=b<g?0:v[d-g],q=e&&v[(e-1)*m+n*g+b%g],v[d++]=(h+Math.floor((l+q)/2))%256;break;case 4:for(b=u=0;u<m;b=u+=1){h=c[a++];n=(b-b%g)/g;l=b<g?0:v[d-g];0===e?q=t=0:(q=v[(e-1)*m+n*g+b%g],t=n&&v[(e-1)*m+(n-1)*g+b%g]);var k=l+q-t;b=Math.abs(k-l);n=Math.abs(k-q);k=Math.abs(k-t);l=b<=n&&b<=k?l:n<=k?q:t;v[d++]=(h+l)%256}break;default:throw Error("Invalid filter algorithm: "+c[a-1]);}e++}return v};J.prototype.decodePalette=function(){var c,h,d,b,a;var e=this.palette;var q=this.transparency.indexed||
[];var t=new Uint8Array((q.length||0)+e.length);var u=d=c=h=0;for(b=e.length;d<b;u=d+=3)t[h++]=e[u],t[h++]=e[u+1],t[h++]=e[u+2],t[h++]=null!=(a=q[c++])?a:255;return t};J.prototype.copyToImageData=function(c,h){var d,b;var a=this.colors;var e=null;var q=this.hasAlphaChannel;this.palette.length&&(e=null!=(d=this._decodedPalette)?d:this._decodedPalette=this.decodePalette(),a=4,q=!0);c=c.data||c;var t=c.length;var u=e||h;d=b=0;if(1===a)for(;d<t;)a=e?4*h[d/4]:b,b=u[a++],c[d++]=b,c[d++]=b,c[d++]=b,c[d++]=
q?u[a++]:this.transparency.grayscale&&this.transparency.grayscale===b?0:255,b=a;else for(;d<t;)a=e?4*h[d/4]:b,c[d++]=u[a++],c[d++]=u[a++],c[d++]=u[a++],c[d++]=q?u[a++]:this.transparency.rgb&&this.transparency.rgb[1]===u[a-3]&&this.transparency.rgb[3]===u[a-2]&&this.transparency.rgb[5]===u[a-1]?0:255,b=a};J.prototype.decode=function(){var c=new Uint8Array(this.width*this.height*4);this.copyToImageData(c,this.decodePixels());return c};var f=function(c){(void 0).clearRect(0,0,c.width,c.height);(void 0).putImageData(c,
0,0);c=new Image;c.src=(void 0).toDataURL();return c};J.prototype.decodeFrames=function(c){var h,d;if(this.animation){var b=this.animation.frames;var a=[];var e=h=0;for(d=b.length;h<d;e=++h){e=b[e];var q=c.createImageData(e.width,e.height);var t=this.decodePixels(new Uint8Array(e.data));this.copyToImageData(q,t);e.imageData=q;a.push(e.image=f(q))}return a}};J.prototype.renderFrame=function(c,h){var d=this.animation.frames;var b=d[h];d=d[h-1];0===h&&c.clearRect(0,0,this.width,this.height);1===(null!=
d?d.disposeOp:void 0)?c.clearRect(d.xOffset,d.yOffset,d.width,d.height):2===(null!=d?d.disposeOp:void 0)&&c.putImageData(d.imageData,d.xOffset,d.yOffset);0===b.blendOp&&c.clearRect(b.xOffset,b.yOffset,b.width,b.height);return c.drawImage(b.image,b.xOffset,b.yOffset)};J.prototype.animate=function(c){var h,d=this;var b=0;var a=this.animation;var e=a.numFrames;var q=a.frames;var t=a.numPlays;return(h=function(){var u=b++%e;var g=q[u];d.renderFrame(c,u);if(1<e&&b/e<t)return d.animation._timeout=setTimeout(h,
g.delay)})()};J.prototype.stopAnimation=function(){var c;return clearTimeout(null!=(c=this.animation)?c._timeout:void 0)};J.prototype.render=function(c){c._png&&c._png.stopAnimation();c._png=this;c.width=this.width;c.height=this.height;c=c.getContext("2d");if(this.animation)return this.decodeFrames(c),this.animate(c);var h=c.createImageData(this.width,this.height);this.copyToImageData(h,this.decodePixels());return c.putImageData(h,0,0)};return J}()})},"esri/layers/rasterFormats/Raw":function(){define([],
function(){return{decodeBIP:function(S,J){var f=J.pixelType,c=J.bandCount,h=[],d=J.width*J.height,b=this.getBandCount(S,J);c=c||b;var a=S.byteLength-S.byteLength%(d*this._getPixelLength(f)),e=new f(S,0,d*b),q,t,u;for(q=0;q<c;q++){var g=new f(d);for(t=0;t<d;t++)g[t]=e[t*b+q];h.push(g)}a<S.byteLength-1&&(u=this._decodeMask(S.slice(a),J));return{pixels:h,maskData:u}},decodeBSQ:function(S,J){var f=J.pixelType,c=J.bandCount;if(void 0===c||null===c)c=this.getBandCount(S,J);var h=[],d=J.width*J.height,b=
d*c,a=S.byteLength-S.byteLength%(d*this._getPixelLength(f));f=new f(S,0,b);var e;for(b=0;b<c;b++)h.push(f.subarray(b*d,(b+1)*d));a<S.byteLength-1&&(e=this._decodeMask(S.slice(a),J));return{pixels:h,maskData:e}},getBandCount:function(S,J){return Math.floor(S.byteLength/(J.width*J.height*this._getPixelLength(J.pixelType)))},_getPixelLength:function(S){var J=1;switch(S){case Uint8Array:case Int8Array:case Uint8ClampedArray:J=1;break;case Uint16Array:case Int16Array:J=2;break;case Uint32Array:case Int32Array:case Float32Array:J=
4;break;case Float64Array:J=8}return J},_decodeMask:function(S,J){var f=J.width*J.height;if(8*S.byteLength<f)return null;S=new Uint8Array(S,0,Math.ceil(f/8));J=new Uint8Array(J.width*J.height);var c=0,h=0,d=0,b=0;for(d=0;d<S.length-1;d++)for(h=S[d],b=7;0<=b;b--)J[c++]=h>>b&1;for(b=7;c<f-1;)h=S[S.length-1],J[c++]=h>>b&1,b--;return J}}})},"esri/layers/rasterFormats/TiffDecoder":function(){define(["./Jpg","./Zlib"],function(S,J){var f=function(){var b=new ArrayBuffer(4),a=new Uint8Array(b);b=new Uint32Array(b);
a[0]=1;a[1]=2;a[2]=3;a[3]=4;return 67305985===b[0]},c=function(){var b=[];b[254]="NEWSUBFILETYPE";b[255]="SUBFILETYPE";b[256]="IMAGEWIDTH";b[257]="IMAGELENGTH";b[258]="BITSPERSAMPLE";b[259]="COMPRESSION";b[262]="PHOTOMETRICINTERPRETATION";b[263]="THRESHHOLDING";b[264]="CELLWIDTH";b[265]="CELLLENGTH";b[266]="FILLORDER";b[269]="DOCUMENTNAME";b[270]="IMAGEDESCRIPTION";b[271]="MAKE";b[272]="MODEL";b[273]="STRIPOFFSETS";b[274]="ORIENTATION";b[277]="SAMPLESPERPIXEL";b[278]="ROWSPERSTRIP";b[279]="STRIPBYTECOUNTS";
b[280]="MINSAMPLEVALUE";b[281]="MAXSAMPLEVALUE";b[282]="XRESOLUTION";b[283]="YRESOLUTION";b[284]="PLANARCONFIGURATION";b[285]="PAGENAME";b[286]="XPOSITION";b[287]="YPOSITION";b[288]="FREEOFFSETS";b[289]="FREEBYTECOUNTS";b[290]="GRAYRESPONSEUNIT";b[291]="GRAYRESPONSECURVE";b[292]="T4OPTIONS";b[293]="T6OPTIONS";b[296]="RESOLUTIONUNIT";b[297]="PAGENUMBER";b[300]="COLORRESPONSEUNIT";b[301]="TRANSFERFUNCTION";b[305]="SOFTWARE";b[306]="DATETIME";b[315]="ARTIST";b[316]="HOSTCOMPUTER";b[317]="PREDICTOR";
b[318]="WHITEPOINT";b[319]="PRIMARYCHROMATICITIES";b[320]="COLORMAP";b[321]="HALFTONEHINTS";b[322]="TILEWIDTH";b[323]="TILELENGTH";b[324]="TILEOFFSETS";b[325]="TILEBYTECOUNTS";b[326]="BADFAXLINES";b[327]="CLEANFAXDATA";b[328]="CONSECUTIVEBADFAXLINES";b[330]="SUBIFD";b[332]="INKSET";b[333]="INKNAMES";b[334]="NUMBEROFINKS";b[336]="DOTRANGE";b[337]="TARGETPRINTER";b[338]="EXTRASAMPLES";b[339]="SAMPLEFORMAT";b[340]="SMINSAMPLEVALUE";b[341]="SMAXSAMPLEVALUE";b[342]="TRANSFERRANGE";b[347]="JPEGTABLES";
b[512]="JPEGPROC";b[513]="JPEGIFOFFSET";b[514]="JPEGIFBYTECOUNT";b[515]="JPEGRESTARTINTERVAL";b[517]="JPEGLOSSLESSPREDICTORS";b[518]="JPEGPOINTTRANSFORM";b[519]="JPEGQTABLES";b[520]="JPEGDCTABLES";b[521]="JPEGACTABLES";b[529]="YCBCRCOEFFICIENTS";b[530]="YCBCRSUBSAMPLING";b[531]="YCBCRPOSITIONING";b[532]="REFERENCEBLACKWHITE";b[33550]="GEOPIXELSCALE";b[33922]="GEOTIEPOINTS";b[33432]="COPYRIGHT";b[42112]="GDAL_METADATA";b[42113]="GDAL_NODATA";b[50844]="RPCCOEFFICIENT";b[34735]="GEOKEYDIRECTORY";b[34736]=
"GEODOUBLEPARAMS";b[34737]="GEOASCIIPARAMS";return b}(),h=[0,1,1,2,4,8,1,1,2,4,8,4,8],d=function(b,a){var e="UNKNOWN";3===b?e="F32":1===b?8>=a?e="U8":16>=a?e="U16":32>=a&&(e="U32"):2===b&&(8>=a?e="S8":16>=a?e="S16":32>=a&&(e="S32"));return e};return{decode:function(b){var a=new DataView(b,0,8),e=a.getUint16(0,!1);if(18761===e)var q=!0;else if(19789===e)q=!1;else throw"unexpected endianess byte";if(42!==a.getUint16(2,q))throw"unexpected tiff identifier";var t=a.getUint32(4,q);var u=q;var g,m;var v=
t;for(var p=[];v;){var l=(new DataView(b,v,2)).getUint16(0,u);var n=v+2;v=(new DataView(b,n+12*l,4)).getUint32(0,u);var k={};for(g=0;g<l;g++){var r=new DataView(b,n,12);var w=r.getUint16(0,u);var x=r.getUint16(2,u);var D=r.getUint32(4,u);var G=r.getUint32(8,u);n+=12;if(!(7===x||12<x)){var F=m={fieldTag:w,fieldType:x,fieldValueCount:D,fieldValueOffset:G},A=void 0,y=void 0,z=b,B=u,C=[],H=m.fieldType,E=m.fieldValueCount,K=m.fieldValueOffset,I=K,L=h[H],M=8*L,N=E*L,P=E*h[H]*8;if(32>=P)if(B||(K>>>=32-P),
1===E)C=[K];else for(A=0;A<E;A++)C.push(K<<M*A>>>32-M);else for(I=K;I<K+N;I+=L){switch(H){case 1:y=(new DataView(z,I,1)).getUint8(0);break;case 2:y=(new DataView(z,I,1)).getUint8(0);break;case 3:y=(new DataView(z,I,2)).getUint16(0,B);break;case 4:y=(new DataView(z,I,4)).getUint32(0,B);break;case 5:y=(new DataView(z,I,4)).getUint32(0,B)/(new DataView(z,I+4,4)).getUint32(0,B);break;case 6:y=(new DataView(z,I,1)).getInt8(0);break;case 8:y=(new DataView(z,I,2)).getInt16(0,B);break;case 9:y=(new DataView(z,
I,4)).getInt32(0,B);break;case 10:y=(new DataView(z,I,4)).getInt32(0,B)/(new DataView(z,I+4,4)).getInt32(0,B);break;case 11:y=(new DataView(z,I,4)).getFloat32(0,B);break;case 12:y=(new DataView(z,I,8)).getFloat64(0,B);break;case 7:y=null;break;default:y=null}C.push(y)}if(2===H){var R="",Y=C;C=[];for(A=0;A<Y.length;A++)0===Y[A]&&""!==R?(C.push(R),R=""):R+=String.fromCharCode(Y[A]);""===R&&0!==C.length||C.push(R)}F.fieldValues=C;var ja=k,aa=c[w];void 0===aa&&(aa="unknown"+w);ja[aa]={type:x,values:m.fieldValues}}}p.push(k)}if(0===
p.length)throw"no valid image file directory";var da,ra=p[0],ca=void 0===ra.GDAL_NODATA||null===ra.GDAL_NODATA?null:parseFloat(ra.GDAL_NODATA.values[0]);if(ra.TILEOFFSETS){var fa=f()===u,la=ra.TILEOFFSETS?ra.TILEOFFSETS.values:void 0;if(void 0===la)var ta=void 0;else{var Q=ra.TILEBYTECOUNTS.values,T=ra.TILEWIDTH.values[0],O=ra.TILELENGTH.values[0],Z=ra.IMAGEWIDTH.values[0],na=ra.IMAGELENGTH.values[0],ia=Z*na,X=ra.BITSPERSAMPLE.values[0],ha=ra.SAMPLESPERPIXEL.values[0],V=ra.SAMPLEFORMAT?ra.SAMPLEFORMAT.values[0]:
1,ea=d(V,X);if(1!==(ra.PLANARCONFIGURATION?ra.PLANARCONFIGURATION.values[0]:1))throw"can only handle PLANARCONFIGURATION\x3d1";var U=ra.COMPRESSION?ra.COMPRESSION.values[0]:1;if(1!==U&&6!==U&&8!==U&&32946!==U)throw"this compression is not supported at this moment";if(3<V)ta=void 0;else{if(3===V){var ka=new Float32Array(ia*ha);var ma=Float32Array}else 1===V?8>=X?(ka=new Uint8Array(ia*ha),ma=Uint8Array):16>=X?(ka=new Uint16Array(ia*ha),ma=Uint16Array):32>=X&&(ka=new Uint32Array(ia*ha),ma=Uint32Array):
2===V&&(8>=X?(ka=new Int8Array(ia*ha),ma=Int8Array):16>=X?(ka=new Int16Array(ia*ha),ma=Int16Array):32>=X&&(ka=new Int32Array(ia*ha),ma=Int32Array));var sa,pa,Aa,za,Ba,ua=Math.ceil(Z/T);if(0===X%8)for(sa=0;sa<la.length;sa++){var Fa=Math.floor(sa/ua)*O;var va=sa%ua*T;var xa=(Fa*Z+va)*ha;if("U8"===ea||"S8"===ea||fa)if(8===U||32946===U){var Da=new Uint8Array(b,la[sa],Q[sa]);var Ca=new J(Da);var qa=Ca.getBytes();var W=new ArrayBuffer(qa.length);Da=new Uint8Array(W);Da.set(qa)}else if(6===U){Da=new Uint8Array(b,
la[sa],Q[sa]);var ba=new S;ba.parse(Da);var oa=ba.getData(ba.width,ba.height);W=new ArrayBuffer(oa.length);Da=new Uint8Array(W);Da.set(oa)}else 1===U&&(W=b.slice(la[sa],la[sa]+Q[sa]));else{if(8===U||32946===U){Da=new Uint8Array(b,la[sa],Q[sa]);Ca=new J(Da);Da=Ca.getBytes();W=new ArrayBuffer(Da.length);var wa=new Uint8Array(W)}else 1===U&&(W=new ArrayBuffer(Q[sa]),Da=new Uint8Array(b,la[sa],Q[sa]),wa=new Uint8Array(W));switch(ea){case "U16":case "S16":for(Aa=0;Aa<Da.length;Aa+=2)wa[Aa]=Da[Aa+1],wa[Aa+
1]=Da[Aa];break;case "U32":case "S32":case "F32":for(Aa=0;Aa<Da.length;Aa+=4)wa[Aa]=Da[Aa+3],wa[Aa+1]=Da[Aa+2],wa[Aa+2]=Da[Aa+1],wa[Aa+3]=Da[Aa]}}var Ea=new ma(W);var Ga=0;var Ja=xa;var ya=Math.min(T,Z-va);var Ha=Math.min(O,na-Fa);for(za=0;za<Ha;za++)for(Ja=xa+za*Z*ha,Ga=za*T*ha,Ba=0;Ba<ya*ha;Ba++,Ja++,Ga++)ka[Ja]=Ea[Ga]}var Ia={width:Z,height:na,pixelType:ea};if(1===ha)Ia.pixels=[ka];else for(Ia.pixels=[],sa=0;sa<ha;sa++){var Ka=new ma(ia);for(pa=0;pa<ia;pa++)Ka[pa]=ka[pa*ha+sa];Ia.pixels.push(Ka)}ta=
Ia}}}else if(ra.STRIPOFFSETS){var Ma=f()===u,Na=ra.STRIPOFFSETS?ra.STRIPOFFSETS.values:void 0;if(void 0===Na)ta=void 0;else{var La=ra.STRIPBYTECOUNTS.values,Pa=ra.ROWSPERSTRIP.values,Oa=ra.IMAGEWIDTH.values[0],Qa=ra.IMAGELENGTH.values[0],Ra=Oa*Qa,Sa=ra.BITSPERSAMPLE.values[0],Ua=ra.SAMPLESPERPIXEL.values[0],Va=ra.SAMPLEFORMAT?ra.SAMPLEFORMAT.values[0]:1,Ya=d(Va,Sa);if(1!==(ra.PLANARCONFIGURATION?ra.PLANARCONFIGURATION.values[0]:1))throw"can only handle PLANARCONFIGURATION\x3d1";var Wa=ra.COMPRESSION?
ra.COMPRESSION.values[0]:1;if(1!==Wa&&6!==Wa&&8!==Wa&&32946!==Wa)throw"compressed tiff is not supported at this moment";if(3<Va)ta=void 0;else{if(3===Va){var $a=new Float32Array(Ra*Ua);var Ta=Float32Array}else 1===Va?8>=Sa?($a=new Uint8Array(Ra*Ua),Ta=Uint8Array):16>=Sa?($a=new Uint16Array(Ra*Ua),Ta=Uint16Array):32>=Sa&&($a=new Uint32Array(Ra*Ua),Ta=Uint32Array):2===Va&&(8>=Sa?($a=new Int8Array(Ra*Ua),Ta=Int8Array):16>=Sa?($a=new Int16Array(Ra*Ua),Ta=Int16Array):32>=Sa&&($a=new Int32Array(Oa*Qa*Ua),
Ta=Int32Array));var Xa,Za,bb;if(0===Sa%8)for(Xa=0;Xa<Na.length;Xa++){var db=Xa*Pa*Oa*Ua;if("U8"===Ya||"S8"===Ya||Ma)if(8===Wa||32946===Wa){var cb=new Uint8Array(b,Na[Xa],La[Xa]);var gb=new J(cb);var ab=gb.getBytes();var hb=new ArrayBuffer(ab.length);cb=new Uint8Array(hb);cb.set(ab)}else if(6===Wa){cb=new Uint8Array(b,Na[Xa],La[Xa]);var fb=new S;fb.parse(cb);var ib=fb.getData(fb.width,fb.height);hb=new ArrayBuffer(ib.length);cb=new Uint8Array(hb);cb.set(ib)}else 1===Wa&&(hb=b.slice(Na[Xa],Na[Xa]+La[Xa]));
else{if(6===Wa||8===Wa||32946===Wa){cb=new Uint8Array(b,Na[Xa],La[Xa]);gb=new J(cb);cb=gb.getBytes();hb=new ArrayBuffer(cb.length);var lb=new Uint8Array(hb)}else 1===Wa&&(hb=new ArrayBuffer(La[Xa]),cb=new Uint8Array(b,Na[Xa],La[Xa]),lb=new Uint8Array(hb));switch(Ya){case "U16":case "S16":for(bb=0;bb<cb.length;bb+=2)lb[bb]=cb[bb+1],lb[bb+1]=cb[bb];break;case "U32":case "S32":case "F32":for(bb=0;bb<cb.length;bb+=4)lb[bb]=cb[bb+3],lb[bb+1]=cb[bb+2],lb[bb+2]=cb[bb+1],lb[bb+3]=cb[bb]}}var jb=new Ta(hb);
$a.set(jb,db)}var kb={width:Oa,height:Qa,pixelType:Ya};if(1===Ua)kb.pixels=[$a];else for(kb.pixels=[],Xa=0;Xa<Ua;Xa++){var ob=new Ta(Ra);for(Za=0;Za<Ra;Za++)ob[Za]=$a[Za*Ua+Xa];kb.pixels.push(ob)}ta=kb}}}if(null!==ca){ta.maskData=new Uint8Array(ta.width*ta.height);if(1E24<Math.abs(ca))for(da=0;da<ta.width*ta.height;da++)ta.maskData[da]=1E-6>Math.abs((ta.pixels[0][da]-ca)/ca)?0:1;else for(da=0;da<ta.width*ta.height;da++)ta.maskData[da]=ta.pixels[0][da]===ca?0:1;ta.noDataValue=ca}return ta}}})},"esri/layers/rasterLib/tile/RasterHandler":function(){define("require exports module dojo/Deferred dojo/promise/all ../../PixelBlock ../../vectorTiles/core/workers ../../vectorTiles/core/promiseUtils ../../vectorTiles/core/requireUtils ../../vectorTiles/request ../../rasterLib/function/rasterFunctionHelper ../../rasterLib/renderer/rasterRendererHelper".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u){function g(m){var v=new c;h(m).then(function(p){v.resolve()});return v.promise}return function(){function m(v){this.customModules=v&&v.customModules}m.prototype.destroy=function(){this.stop();this.customModules=this.rasterLayer=null};m.prototype.start=function(){this.stop();var v=new c,p=0,l=this.customModules?this.customModules.length+1:1,n=e.getAbsMid("esri/layers/rasterLib/tile/RasterWorker",S,f),k=b.open(n,{client:this}).then(function(r){this._connection=r;p++;
p===l&&(this._connected=!0,v.resolve())}.bind(this));this._openDL=[k];this.customModules&&this.customModules.forEach(function(r){k=b.open(r,{client:this}).then(function(w){p++;p===l&&(this._connected=!0,v.resolve())});this._openDL.push(k)}.bind(this));return this._connectionPromise=v.promise};m.prototype.stop=function(){this._openDL?this._openDL.forEach(function(v){v.isFulfilled()||v.cancel()}.bind(this)):this._connectionPromise&&!this._connectionPromise.isFulfilled()&&this._connectionPromise.cancel();
this._connection&&(this._connection.close(),this._connection=null)};m.prototype.decode=function(v){if(!this._connectionPromise.isFulfilled()||!this._connection)return a.reject(Error("no connection"));var p={id:null};return this._connection.invoke("decode",v,[],p).then(function(l){l.targetWorker=p;return l})};m.prototype.process=function(v){if(!this._connectionPromise.isFulfilled()||!this._connection)return a.reject(Error("no connection"));var p={id:null};v.layerId=this.rasterLayer.layerId;var l=new c;
this._connection.invoke("process",v,[],p).then(function(n){n.targetWorker=p;n.src?Object.keys(n.src).forEach(function(k){n.src[k].pixelBlock=new d(n.src[k].pixelBlock)}):n.src=null;n.pixelBlock&&(n.pixelBlock=new d(n.pixelBlock));l.resolve(n)});return l.promise};m.prototype.render=function(v){if(!this._connectionPromise.isFulfilled()||!this._connection)return a.reject(Error("no connection"));var p={id:null};v.layerId=this.rasterLayer.layerId;return this._connection.invoke("render",v,[],p).then(function(l){l.targetWorker=
p;l.pixelBlock=l.pixelBlock?new d(l.pixelBlock):null;return l})};m.prototype.setLayer=function(v){if(!this._connectionPromise.isFulfilled()||!this._connection)return a.reject(Error("no connection"));this.rasterLayer=v;v=this._connection.broadcast("setLayer",v,[],{id:null});return g(v)};m.prototype.setRasterFunction=function(v){if(!this._connectionPromise.isFulfilled()||!this._connection)return a.reject(Error("no connection"));v=this._connection.broadcast("setRasterFunction",v,[],{id:null});return g(v)};
m.prototype.setRasterRenderer=function(v){if(!this._connectionPromise.isFulfilled()||!this._connection)return a.reject(Error("no connection"));v=this._connection.broadcast("setRasterRenderer",v,[],{id:null});return g(v)};return m}()})},"esri/layers/vectorTiles/core/workers":function(){define(["require","exports","./workers/workers"],function(S,J,f){Object.defineProperty(J,"__esModule",{value:!0});for(var c in f)J.hasOwnProperty(c)||(J[c]=f[c])})},"esri/layers/vectorTiles/core/workers/workers":function(){define("require exports dojo/sniff dojo/promise/all ../Logger ../promiseUtils ./Connection ./RemoteClient ./WorkerOwner".split(" "),
function(S,J,f,c,h,d,b,a,e){function q(){if(p)return p;for(var l=t+u,n=[],k=function(w){var x=e.create(w).then(function(D){return v[w]=D});n.push(x)},r=0;r<l;r++)k(r);return p=c(n).then(function(){})}Object.defineProperty(J,"__esModule",{value:!0});J.Connection=b;J.RemoteClient=a;(b=navigator.hardwareConcurrency)||(b=f("safari")&&f("mac")||f("trident")?8:2);var t=f("esri-workers-debug")?1:Math.max(1,Math.ceil(b/2)),u=f("esri-workers-debug")?1:Math.max(1,Math.floor(b/2)),g=h.getLogger("esri.core.workers"),
m=0,v=[];J.initialize=function(){q()};J.open=function(l,n,k){void 0===n&&(n={});if(Array.isArray(l))return new J.Connection(l.map(function(x){return new J.RemoteClient(x,n.client)}));if("string"!==typeof l){g.warn("workers-open:signature-deprecated","DEPRECATED: workers.open() changed signature.");var r=l;l=n;n={client:r,strategy:k?"dedicated":"distributed"}}var w=n.strategy||"distributed";return"local"===w?d.create(function(x){S([l],function(D){x(J.RemoteClient.connect(D))})}).then(function(x){return new J.Connection([new J.RemoteClient(x,
n.client)])}):q().then(function(){if("dedicated"===w){var x=t+m++;m%=u;return v[x].open(l).then(function(D){return new J.Connection([new J.RemoteClient(D,n.client)])})}return d.all(v.map(function(D){return D.open(l)})).then(function(D){return new J.Connection(D.map(function(G){return new J.RemoteClient(G,n.client)}))})})};J.terminate=function(){for(var l=0;l<v.length;l++)v[l]&&v[l].terminate();v.length=0};var p})},"esri/layers/vectorTiles/core/Logger":function(){define(["require","exports","dojo/has"],
function(S,J,f){var c={info:0,warn:1,error:2};S=function(){function h(d){void 0===d&&(d={});this.module=d.module||"";this.writer=d.writer||null;this.level=d.level||null;null!=d.enabled&&(this.enabled=!!d.enabled);h._loggers[this.module]=this;d=this.module.lastIndexOf(".");-1!==d&&(this.parent=h.getLogger(this.module.slice(0,d)))}h.prototype.log=function(d){for(var b=[],a=1;a<arguments.length;a++)b[a-1]=arguments[a];this._isEnabled()&&this._matchLevel(d)&&(a=this._inheritedWriter())&&a.apply(void 0,
[d,this.module].concat(b))};h.prototype.error=function(){for(var d=[],b=0;b<arguments.length;b++)d[b]=arguments[b];this.log.apply(this,["error"].concat(d))};h.prototype.warn=function(){for(var d=[],b=0;b<arguments.length;b++)d[b]=arguments[b];this.log.apply(this,["warn"].concat(d))};h.prototype.info=function(){for(var d=[],b=0;b<arguments.length;b++)d[b]=arguments[b];this.log.apply(this,["info"].concat(d))};h.prototype.getLogger=function(d){return h.getLogger(this.module+"."+d)};h.getLogger=function(d){var b=
h._loggers[d];b||(b=new h({module:d}));return b};h.prototype._parentWithMember=function(d,b){for(var a=this;a&&null==a[d];)a=a.parent;return a?a[d]:b};h.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};h.prototype._consoleWriter=function(d,b){for(var a=[],e=2;e<arguments.length;e++)a[e-2]=arguments[e];console[d].apply(console,["["+b+"]"].concat(a))};h.prototype._matchLevel=function(d){return c[this._parentWithMember("level","error")]<=c[d]};h.prototype._isEnabled=
function(){return this._parentWithMember("enabled",!0)};h._loggers={};return h}();S.getLogger("esri").level="warn";return S})},"esri/layers/vectorTiles/core/promiseUtils":function(){define("require exports dojo/Deferred dojo/when dojo/promise/all ./Error".split(" "),function(S,J,f,c,h,d){function b(a){if(a){if("function"!==typeof a.forEach){var e=Object.keys(a),q=e.map(function(m){return a[m]});return b(q).then(function(m){var v={};e.forEach(function(p,l){return v[p]=m[l]});return v})}var t=new f,
u=[],g=a.length;0===g&&t.resolve(u);a.forEach(function(m){var v={promise:m};u.push(v);m.then(function(p){v.value=p}).catch(function(p){v.error=p}).then(function(){--g;0===g&&t.resolve(u)})});return t.promise}}Object.defineProperty(J,"__esModule",{value:!0});J.all=function(a){return h(a)};J.filter=function(a,e){var q=a.slice();return h(a.map(function(t,u){return e(t,u)})).then(function(t){return q.filter(function(u,g){return t[g]})})};J.eachAlways=b;J.create=function(a,e){var q=new f(e);a(function(t){void 0===
t&&(t=null);return c(t).then(q.resolve)},q.reject);return q.promise};J.reject=function(a){var e=new f;e.reject(a);return e.promise};J.resolve=function(a){void 0===a&&(a=null);var e=new f;e.resolve(a);return e.promise};J.after=function(a,e){void 0===e&&(e=null);var q=0,t=new f(function(){q&&(clearTimeout(q),q=0)});q=setTimeout(function(){t.resolve(e)},a);return t.promise};J.timeout=function(a,e,q){var t=0,u=new f(a.cancel);a.then(function(g){u.isFulfilled()||(u.resolve(g),t&&(clearTimeout(t),t=0))});
a.catch(function(g){u.isFulfilled()||(u.reject(g),t&&(clearTimeout(t),t=0))});t=setTimeout(function(){var g=q||new d("promiseUtils:timeout","The wrapped promise did not resolve within "+e+" ms");u.reject(g)},e);return u.promise};J.wrapCallback=function(a){var e=!1,q=new f(function(){return e=!0});a(function(t){e||q.resolve(t)});return q.promise};J.isThenable=function(a){return a&&"function"===typeof a.then};J.when=function(a){return c(a)}})},"esri/layers/vectorTiles/core/Error":function(){define(["require",
"exports","./tsSupport/extendsHelper","./lang","./Message"],function(S,J,f,c,h){S=function(d){function b(a,e,q){var t=d.call(this,a,e,q)||this;return t instanceof b?t:new b(a,e,q)}f(b,d);b.prototype.toJSON=function(){return{name:this.name,message:this.message,details:c.clone(this.details),dojoType:this.dojoType}};b.fromJSON=function(a){var e=new b(a.name,a.message,a.details);null!=a.dojoType&&(e.dojoType=a.dojoType);return e};return b}(h);S.prototype.type="error";return S})},"esri/layers/vectorTiles/core/tsSupport/extendsHelper":function(){define([],
function(){return function(){var S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,f){J.__proto__=f}||function(J,f){for(var c in f)f.hasOwnProperty(c)&&(J[c]=f[c])};return function(J,f){function c(){this.constructor=J}S(J,f);J.prototype=null===f?Object.create(f):(c.prototype=f.prototype,new c)}}()})},"esri/layers/vectorTiles/core/lang":function(){define("dojo/_base/kernel dojo/_base/lang dojo/date dojo/number dojo/date/locale dojo/i18n!../nls/common".split(" "),function(S,J,f,c,
h,d){function b(m){return void 0!==m&&null!==m}function a(m){return b(m)?m:""}function e(m,v,p){var l=p.match(/([^\(]+)(\([^\)]+\))?/i),n=J.trim(l[1]);p=v[m];l=JSON.parse((l[2]?J.trim(l[2]):"{}").replace(/^\(/,"{").replace(/\)$/,"}").replace(/([{,])\s*([0-9a-zA-Z_]+)\s*:/gi,'$1"$2":').replace(/"\s*:\s*'/gi,'":"').replace(/'\s*(,|\})/gi,'"$1'));var k=l.utcOffset;if(-1===u.indexOf(n))n=J.getObject(n),J.isFunction(n)&&(p=n(p,m,v,l));else if("number"===typeof p||"string"===typeof p&&p&&!isNaN(Number(p)))switch(p=
Number(p),n){case "NumberFormat":m=J.mixin({},l);v=parseFloat(m.places);if(isNaN(v)||0>v)m.places=Infinity;return c.format(p,m);case "DateString":p=new Date(p);if(l.local||l.systemLocale)return l.systemLocale?p.toLocaleDateString()+(l.hideTime?"":" "+p.toLocaleTimeString()):p.toDateString()+(l.hideTime?"":" "+p.toTimeString());p=p.toUTCString();l.hideTime&&(p=p.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return p;case "DateFormat":return p=new Date(p),b(k)&&(p=f.add(p,"minute",p.getTimezoneOffset()-
k)),h.format(p,l)}return a(p)}function q(m,v){var p;if(v)for(p in m)m.hasOwnProperty(p)&&(void 0===m[p]?delete m[p]:m[p]instanceof Object&&q(m[p],!0));else for(p in m)m.hasOwnProperty(p)&&void 0===m[p]&&delete m[p];return m}function t(m){if(!m||"object"!=typeof m||J.isFunction(m))return m;if(m instanceof Int8Array||m instanceof Uint8Array||m instanceof Uint8ClampedArray||m instanceof Int16Array||m instanceof Int32Array||m instanceof Uint16Array||m instanceof Uint32Array||m instanceof Float32Array||
m instanceof Float64Array||m instanceof Date)return new m.constructor(m);if(m instanceof ArrayBuffer)return m.slice(0,m.byteLength);if("function"===typeof m.clone)m=m.clone();else if("function"===typeof m.map&&"function"===typeof m.forEach)m=m.map(t);else if("function"===typeof m.notifyChange&&"function"===typeof m.watch)m=m.clone();else{var v={},p,l={};for(p in m){var n=m[p];var k=!(p in l)||l[p]!==n;if(!(p in v)||v[p]!==n&&k)v[p]=t?t(n):n}m=v}return m}var u=["NumberFormat","DateString","DateFormat"],
g=/<\/?[^>]+>/g;return{equals:function(m,v){return m===v||"number"===typeof m&&isNaN(m)&&"number"===typeof v&&isNaN(v)||J.isFunction((m||{}).getTime)&&J.isFunction((v||{}).getTime)&&m.getTime()==v.getTime()||J.isFunction((m||{}).equals)&&m.equals(v)||J.isFunction((v||{}).equals)&&v.equals(m)||!1},mixin:J.mixin,valueOf:function(m,v){for(var p in m)if(m[p]==v)return p;return null},stripTags:function(m){if(m){var v=typeof m;if("string"===v)m=m.replace(g,"");else if("object"===v)for(var p in m)(v=m[p])&&
"string"===typeof v&&(v=v.replace(g,"")),m[p]=v}return m},substitute:function(m,v,p){if(b(p))if(J.isObject(p)){var l=p.first;var n=p.dateFormat;var k=p.numberFormat}else l=p;if(v&&"{*}"!==v)return J.replace(v,J.hitch({obj:m},function(w,x){w=x.split(":");return 1<w.length?(x=w[0],w.shift(),e(x,this.obj,w.join(":"))):n&&-1!==(n.properties||[]).indexOf(x)?e(x,this.obj,n.formatter||"DateString"):k&&-1!==(k.properties||[]).indexOf(x)?e(x,this.obj,k.formatter||"NumberFormat"):a(this.obj[x])}));v=[];var r;
v.push('\x3ctable class\x3d"esri-widget__table" summary\x3d"'+d.fieldsSummary+'"\x3e\x3ctbody\x3e');for(r in m)if(p=m[r],n&&-1!==(n.properties||[]).indexOf(r)?p=e(r,m,n.formatter||"DateString"):k&&-1!==(k.properties||[]).indexOf(r)&&(p=e(r,m,k.formatter||"NumberFormat")),v.push("\x3ctr\x3e\x3cth\x3e"+r+"\x3c/th\x3e\x3ctd\x3e"+a(p)+"\x3c/td\x3e\x3c/tr\x3e"),l)break;v.push("\x3c/tbody\x3e\x3c/table\x3e");return v.join("")},filter:function(m,v,p){v=[J.isString(m)?m.split(""):m,p||S.global,J.isString(v)?
new Function("item","index","array",v):v];p={};var l;m=v[0];for(l in m)v[2].call(v[l],m[l],l,m)&&(p[l]=m[l]);return p},startsWith:function(m,v,p){p=p||0;return m.indexOf(v,p)===p},endsWith:function(m,v,p){if("number"!==typeof p||!isFinite(p)||Math.floor(p)!==p||p>m.length)p=m.length;p-=v.length;m=m.indexOf(v,p);return-1!==m&&m===p},isDefined:b,fixJson:q,clone:t}})},"esri/layers/vectorTiles/core/Message":function(){define(["require","exports","dojo/string"],function(S,J,f){return function(){function c(h,
d,b){this instanceof c&&(this.name=h,this.message=d&&f.substitute(d,b,function(a){return null==a?"":a})||"",this.details=b)}c.prototype.toString=function(){return"["+this.name+"]: "+this.message};return c}()})},"esri/layers/vectorTiles/core/workers/Connection":function(){define(["require","exports","../promiseUtils"],function(S,J,f){return function(){function c(h){this._clientIdx=0;this._clients=h}c.prototype.broadcast=function(h,d,b){for(var a=[],e=0,q=this._clients;e<q.length;e++)a.push(q[e].invoke(h,
d,b));return a};c.prototype.close=function(){for(var h=0,d=this._clients;h<d.length;h++)d[h].close();this._clients=[]};c.prototype.invoke=function(h,d,b,a){var e=a&&a.client;if(!this._clients||!this._clients.length)return f.reject(Error("Connection closed"));null!=e&&-1!==this._clients.indexOf(e)||this._clients.some(function(q){return q.isBusy()?!1:(e=q,!0)})||(this._clientIdx=(this._clientIdx+1)%this._clients.length,e=this._clients[this._clientIdx]);h=e.invoke(h,d,b);a&&(a.client=e);return h};c.prototype.openPorts=
function(){return f.all(this._clients.map(function(h){return h.openPort()}))};return c}()})},"esri/layers/vectorTiles/core/workers/RemoteClient":function(){define("require exports dojo/Deferred ../Error ../promiseUtils ./utils".split(" "),function(S,J,f,c,h,d){function b(m,v){m["delete"](v)}var a=d.MessageType.CLOSE,e=d.MessageType.CANCEL,q=d.MessageType.INVOKE,t=d.MessageType.RESPONSE,u=d.MessageType.OPEN_PORT,g=function(){function m(v){this._timer=null;this._cancelledJobIds=new Set;this._invokeMessages=
[];this._invoke=v;this._timer=null;this._process=this._process.bind(this)}m.prototype.push=function(v){v.type===d.MessageType.CANCEL?this._cancelledJobIds.add(v.jobId):(this._invokeMessages.push(v),null===this._timer&&(this._timer=setTimeout(this._process,0)))};m.prototype.clear=function(){this._invokeMessages.length=0;this._cancelledJobIds.clear();this._timer=null};m.prototype._process=function(){this._timer=null;for(var v=0,p=this._invokeMessages;v<p.length;v++){var l=p[v];this._cancelledJobIds.has(l.jobId)||
this._invoke(l)}this._cancelledJobIds.clear();this._invokeMessages.length=0};return m}();return function(){function m(v,p,l){this._outJobs=new Map;this._inJobs=new Map;this._queue=new g(this._onInvoke.bind(this));this._onMessage=this._onMessage.bind(this);this._client=p;this._port=v;this._port.addEventListener("message",this._onMessage);this._port.start();this._channel=l}m.connect=function(v){var p=new MessageChannel;v="function"===typeof v?new v:"default"in v&&"function"===typeof v.default?new v.default:
v;v.remoteClient=new m(p.port1,v,p);return p.port2};m.prototype.close=function(){this._post({type:a});this._close()};m.prototype.isBusy=function(){return 0<this._outJobs.size};m.prototype.invoke=function(v,p,l){var n=this;if(!this._port)return h.reject(new c("remote-client:port-closed","Can't invoke(), port is closed"));var k=d.newJobId(),r=new f(function(){b(n._outJobs,k);n._post({type:e,jobId:k})});this._outJobs.set(k,r);this._post({type:q,jobId:k,methodName:v},p,l);return r.promise};m.prototype.openPort=
function(){var v=this,p=d.newJobId(),l=new f(function(){b(v._outJobs,p);v._post({type:e,jobId:p})});this._outJobs.set(p,l);this._post({type:u,jobId:p});return l.promise};m.prototype._close=function(){this._channel&&(this._channel=null);this._port.removeEventListener("message",this._onMessage);this._port.close();this._outJobs.forEach(function(v){v.cancel()});this._inJobs.clear();this._outJobs.clear();this._queue.clear();this._port=this._client=null};m.prototype._onMessage=function(v){if(v=d.receiveMessage(v))switch(v.type){case t:this._onResponse(v);
break;case q:this._queue.push(v);break;case e:this._onCancel(v);break;case a:this._close();break;case u:this._onOpenPort(v)}};m.prototype._onCancel=function(v){var p=this._inJobs,l=v.jobId,n=p.get(l);this._queue.push(v);n&&(b(p,l),n.cancel())};m.prototype._onInvoke=function(v){var p=this,l=v.methodName,n=v.jobId;v=v.data;var k=this._inJobs,r=this._client,w=r[l];try{if(!w&&l&&-1!==l.indexOf("."))for(var x=l.split("."),D=0;D<x.length-1;D++)r=r[x[D]],w=r[x[D+1]];if("function"!==typeof w)throw new TypeError(l+
" is not a function");var G=w.call(r,v,this)}catch(F){this._post({type:t,jobId:n,error:d.toInvokeError(F)});return}h.isThenable(G)?(k.set(n,G),G.then(function(F){k.has(n)&&(b(k,n),p._post({type:t,jobId:n},F))}).catch(function(F){k.has(n)&&(b(k,n),F&&"cancel"===F.dojoType||p._post({type:t,jobId:n,error:d.toInvokeError(F||{message:"Error encountered at method "+l})}))})):this._post({type:t,jobId:n},G)};m.prototype._onOpenPort=function(v){var p=new MessageChannel;new m(p.port1,this._client);this._post({type:t,
jobId:v.jobId},p.port2,[p.port2])};m.prototype._onResponse=function(v){var p=v.jobId,l=v.error;v=v.data;var n=this._outJobs;if(n.has(p)){var k=n.get(p);b(n,p);l?k.reject(c.fromJSON(JSON.parse(l))):k.resolve(v)}};m.prototype._post=function(v,p,l){return d.postMessage(this._port,v,p,l)};return m}()})},"esri/layers/vectorTiles/core/workers/utils":function(){define(["require","exports","dojo/has"],function(S,J,f){function c(d){return d&&"object"===typeof d&&("result"in d||"transferList"in d)}Object.defineProperty(J,
"__esModule",{value:!0});(function(d){d[d.HANDSHAKE=0]="HANDSHAKE";d[d.CONFIGURE=1]="CONFIGURE";d[d.CONFIGURED=2]="CONFIGURED";d[d.OPEN=3]="OPEN";d[d.OPENED=4]="OPENED";d[d.RESPONSE=5]="RESPONSE";d[d.INVOKE=6]="INVOKE";d[d.CANCEL=7]="CANCEL";d[d.CLOSE=8]="CLOSE";d[d.OPEN_PORT=9]="OPEN_PORT"})(J.MessageType||(J.MessageType={}));var h=0;J.newJobId=function(){return h++};J.isTranferableResult=c;J.toInvokeError=function(d){return d?d.toJSON?JSON.stringify(d):JSON.stringify({name:d.name,message:d.message,
details:d.details,stack:d.stack}):null};J.postMessage=function(d,b,a,e){2===arguments.length||void 0===a&&void 0===e?d.postMessage(b):(f("esri-workers-supports-transfer-arraybuffer")||(e?(e=e.filter(function(q){return!(q instanceof ArrayBuffer)}),e.length||(e=null)):c(a)&&a.transferList&&(a.transferList=a.transferList.filter(function(q){return!(q instanceof ArrayBuffer)}),a.transferList.length||(a.transferList=null))),e?(b.data=a,d.postMessage(b,e)):c(a)?(b.data=a.result,a.transferList?d.postMessage(b,
a.transferList):d.postMessage(b)):(b.data=a,d.postMessage(b)))};J.receiveMessage=function(d){return d?(d=d.data)?"string"===typeof d?JSON.parse(d):d:null:null}})},"esri/layers/vectorTiles/core/workers/WorkerOwner":function(){define("require exports dojo/Deferred ../../kernel ../Error ../Logger ../promiseUtils ./utils ./workerFactory".split(" "),function(S,J,f,c,h,d,b,a,e){var q=d.getLogger("esri.core.workers"),t=a.MessageType.CANCEL,u=a.MessageType.INVOKE,g=a.MessageType.OPEN,m=a.MessageType.OPENED,
v=a.MessageType.RESPONSE;return function(){function p(l,n){this._outJobs=new Map;this._inJobs=new Map;this.worker=l;this.id=n;l.addEventListener("message",this._onMessage.bind(this));l.addEventListener("error",function(k){k.preventDefault();q.error(k)})}p.create=function(l){return e.createWorker().then(function(n){return new p(n,l)})};p.prototype.terminate=function(){this.worker.terminate()};p.prototype.open=function(l){var n=this,k=a.newJobId(),r=new f(function(w){n._outJobs["delete"](k);n._post({type:t,
jobId:k})});this._outJobs.set(k,r);this._post({type:g,jobId:k,modulePath:l});return r.promise};p.prototype._onMessage=function(l){if(l=a.receiveMessage(l))switch(l.type){case m:case v:this._onResponse(l);break;case t:this._onCancel(l);break;case u:this._onInvoke(l)}};p.prototype._onCancel=function(l){(l=this._inJobs.get(l.jobId))&&l.cancel()};p.prototype._onInvoke=function(l){var n=this,k=l.methodName,r=l.jobId;l=l.data;var w=this._inJobs,x=c.workerMessages[k];try{if("function"!==typeof x)throw new TypeError(k+
" is not a function");var D=x.call(null,l)}catch(G){this._post({type:v,jobId:r,error:a.toInvokeError(G)});return}b.isThenable(D)?(w.set(r,D),D.then(function(G){w["delete"](r);n._post({type:v,jobId:r},G)}).catch(function(G){w["delete"](r);G||(G={message:"Error encountered at method"+k});G.dojoType&&"cancel"===G.dojoType||n._post({type:v,jobId:r,error:a.toInvokeError(G)})})):this._post({type:v,jobId:r},D)};p.prototype._onResponse=function(l){var n=l.jobId,k=l.error;l=l.data;var r=this._outJobs.get(n);
r&&(this._outJobs["delete"](n),k?r.reject(h.fromJSON(JSON.parse(k))):r.resolve(l))};p.prototype._post=function(l,n,k){return a.postMessage(this.worker,l,n,k)};return p}()})},"esri/layers/vectorTiles/kernel":function(){define(["require","exports","esri/kernel","./identity/IdentityManager"],function(S,J,f,c){return function(){function h(){}Object.defineProperty(h,"id",{get:function(){return f.id?c:null},enumerable:!0,configurable:!0});h.workerMessages={};return h}()})},"esri/layers/vectorTiles/identity/IdentityManager":function(){define(["require",
"exports","esri/IdentityManager"],function(S,J,f){Object.defineProperty(J,"__esModule",{value:!0});J.findCredential=function(c){return f.findCredential(c)}})},"esri/layers/vectorTiles/core/workers/workerFactory":function(){define("require exports ../tsSupport/assignHelper dojo/_base/kernel ../../config ../../request ../Logger ../promiseUtils ../sniff ../urlUtils ./loaderConfig ./utils ./WorkerFallback".split(" "),function(S,J,f,c,h,d,b,a,e,q,t,u,g){function m(x){return a.create(function(D){function G(A){if(A=
u.receiveMessage(A))switch(A.type){case w:A=x;var y=h.workers.loaderUrl||t.DEFAULT_LOADER_URL;if(null!=h["default"]){var z=f({},h);delete z["default"];z=JSON.parse(JSON.stringify(z))}else z=JSON.parse(JSON.stringify(h));var B=h.workers.loaderConfig;B=t.default({baseUrl:B.baseUrl,locale:c.locale,has:f({"config-deferredInstrumentation":0,"dojo-test-sniff":0,"esri-cors":1,"esri-secure-context":e("esri-secure-context"),"esri-workers-supports-transfer-arraybuffer":e("esri-workers-supports-transfer-arraybuffer"),
"events-keypress-typed":0,"host-webworker":1},B.has),map:f({},B.map),paths:f({},B.paths),packages:B.packages||[]});A.postMessage({type:r,configure:{esriConfig:z,loaderUrl:y,loaderConfig:B}});break;case k:x.removeEventListener("message",G),x.removeEventListener("error",F),D(x)}}function F(A){A.preventDefault();x.removeEventListener("message",G);x.removeEventListener("error",F);l.warn("Failed to create Worker. Fallback to execute module in main thread",A);x=new g;x.addEventListener("message",G);x.addEventListener("error",
F)}x.addEventListener("message",G);x.addEventListener("error",F)})}Object.defineProperty(J,"__esModule",{value:!0});var v=q.normalize(S.toUrl("./worker.js")),p=!q.hasSameOrigin(v,location.href),l=b.getLogger("esri.core.workers"),n=null,k=u.MessageType.CONFIGURED,r=u.MessageType.CONFIGURE,w=u.MessageType.HANDSHAKE;J.createWorker=function(){if(!e("esri-workers"))return m(new g);if(!p){var x=void 0;try{x=new Worker(v)}catch(D){l.warn("Failed to create Worker. Fallback to execute module in main thread",
event),x=new g}return m(x)}n||(n=d(v,{responseType:"text"}));return n.then(function(D){return new Worker(URL.createObjectURL(new Blob([D.data],{type:"text/javascript"})))}).catch(function(D){l.warn("Failed to create Worker. Fallback to execute module in main thread",D);return new g}).then(function(D){return m(D)})}})},"esri/layers/vectorTiles/core/tsSupport/assignHelper":function(){define([],function(){return Object.assign||function(S){for(var J,f=1,c=arguments.length;f<c;f++){J=arguments[f];for(var h in J)Object.prototype.hasOwnProperty.call(J,
h)&&(S[h]=J[h])}return S}})},"esri/layers/vectorTiles/config":function(){define(["require","exports","esri/config"],function(S,J,f){Object.defineProperty(f,"workers",{get:function(){return f.defaults.workers},set:function(c){return f.defaults.workers=c}});return f})},"esri/layers/vectorTiles/request":function(){define(["require","exports","esri/request","dojo/_base/lang","dojo/Deferred"],function(S,J,f,c,h){return function(d,b){d=c.mixin({},{url:d,failOk:!0},b);"array-buffer"===b.responseType?(d.handleAs=
"arraybuffer",delete d.responseType):b.responseType&&(d.handleAs=b.responseType,delete d.responseType);null!==b.query&&(d.content=d.query,delete d.query);if(b.hasOwnProperty("allowImageDataAccess")){var a={allowImageDataAccess:b.allowImageDataAccess};delete d.allowImageDataAccess}var e=new h(function(){q.isFulfilled()||q.cancel()});var q=f(d,a).then(function(t){e.resolve({data:t})}).catch(function(t){t&&null!=t.httpCode&&(t.details=t.details||{},t.details.httpStatus=t.httpCode);e.reject(t)});return e.promise}})},
"esri/layers/vectorTiles/core/sniff":function(){define(["require","exports","dojo/sniff","./global","../views/webgl/context-util"],function(S,J,f,c,h){function d(){var q={available:!1,version:0,majorPerformanceCaveat:!1,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1},t=document.createElement("canvas");if(!t)return q;var u=h.createContext(t,{failIfMajorPerformanceCaveat:!0},"webgl");!u&&(u=h.createContext(t,{},"webgl"))&&
(q.majorPerformanceCaveat=!0);if(!u)return q;t=u.getParameter(u.VERSION);if(!t)return q;if(t=t.match(/^WebGL\s+([\d.]*)/))q.version=parseFloat(t[1]),q.available=.94<=q.version,t=u.getShaderPrecisionFormat(u.FRAGMENT_SHADER,u.HIGH_FLOAT),q.supportsHighPrecisionFragment=t&&0<t.precision,q.supportsVertexShaderSamplers=0<u.getParameter(u.MAX_VERTEX_TEXTURE_IMAGE_UNITS),q.supportsElementIndexUint=null!==u.getExtension("OES_element_index_uint"),q.supportsStandardDerivatives=null!==u.getExtension("OES_standard_derivatives");
return q}function b(){var q={available:!1,version:0},t=document.createElement("canvas");if(!t)return q;t=h.createContext(t,{},"webgl2");if(!t)return q;q.available=!0;t=t.getParameter(t.VERSION);if(!t)return q;if(t=t.match(/^WebGL\s+([\d.]*)/))q.version=parseFloat(t[1]);return q}(function(){var q=navigator.userAgent,t=q.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i);q=q.match(/iPhone/i);t&&f.add("esri-mobile",t);q&&f.add("esri-iPhone",q);f.add("esri-phonegap",!!c.cordova);
f.add("esri-cors",f("esri-phonegap")||"XMLHttpRequest"in c&&"withCredentials"in new XMLHttpRequest);f.add("esri-geolocation",function(){return!!navigator.geolocation});f.add("esri-canvas-svg-support",function(){return!(f("trident")||f("ie"))});f.add("esri-secure-context",function(){if("isSecureContext"in c)return c.isSecureContext;if(c.location&&c.location.origin)return 0===c.location.origin.indexOf("https:")});f.add("esri-wasm","WebAssembly"in c);f("host-webworker")||(f.add("esri-workers","Worker"in
c),f.add("esri-script-sandbox",function(){return"MessageChannel"in c&&"HTMLIFrameElement"in c&&"sandbox"in HTMLIFrameElement.prototype}),f.add("esri-url-encodes-apostrophe",function(){var u=c.document.createElement("a");u.href="?'";return-1<u.href.indexOf("?%27")}),a||(a=d()),f.add("esri-webgl",a.available),f.add("esri-webgl-high-precision-fragment",a.supportsHighPrecisionFragment),f.add("esri-webgl-vertex-shader-samplers",a.supportsVertexShaderSamplers),f.add("esri-webgl-element-index-uint",a.supportsElementIndexUint),
f.add("esri-webgl-standard-derivatives",a.supportsStandardDerivatives),f.add("esri-webgl-major-performance-caveat",a.majorPerformanceCaveat),f.add("esri-featurelayer-webgl-labeling",!0),e||(e=b()),f.add("esri-webgl2",e.available))})();var a=null,e=null;return f})},"esri/layers/vectorTiles/core/global":function(){define(["require","exports"],function(S,J){return function(){if("undefined"!==typeof global)return global;if("undefined"!==typeof window)return window;if("undefined"!==typeof self)return self}()})},
"esri/layers/vectorTiles/views/webgl/context-util":function(){define(["require","exports"],function(S,J){function f(b,a,e){void 0===a&&(a={});switch(e){case "webgl":var q=["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case "webgl2":q=["webgl2"];break;default:q=["webgl","experimental-webgl","webkit-3d","moz-webgl"]}e=null;for(var t=0;t<q.length;t++){var u=q[t];try{e=b.getContext(u,a)}catch(g){}if(e)break}return e}function c(b,a){(b=b.parentNode)&&(b.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+
a+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}Object.defineProperty(J,"__esModule",{value:!0});J.createContextOrErrorHTML=function(b,a,e){void 0===a&&(a={});if(!window.WebGLRenderingContext)return c(b,h),null;a=f(b,a,e);return a?a:(c(b,d),null)};J.createContext=f;var h='This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e',d='It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'})},
"esri/layers/vectorTiles/core/urlUtils":function(){define(["require","exports","esri/urlUtils","dojo/_base/url"],function(S,J,f,c){function h(r){return f.normalize(r)}function d(r){return"data:"===r.slice(0,5)}function b(r){return a(r)||n.test(r)}function a(r){return r&&"/"===r[0]&&"/"===r[1]}function e(r){return f.urlToObject(r)}function q(r){if("string"===typeof r)return new c(u(r));r.scheme||(r.scheme=J.appUrl.scheme);return r}function t(r){if(d(r))return null;var w=r.indexOf("://");if(-1===w&&
a(r))w=2;else if(-1!==w)w+=3;else return null;w=r.indexOf("/",w);return-1===w?r:r.slice(0,w)}function u(r,w,x){void 0===w&&(w=J.appBaseUrl);if(a(r))return x&&x.preserveProtocolRelative?r:"http"===J.appUrl.scheme&&J.appUrl.authority===t(r).slice(2)?"http:"+r:"https:"+r;if(n.test(r))return r;x=m;if("/"===r[0]){var D=w.indexOf("//");D=w.indexOf("/",D+2);w=-1===D?w:w.slice(0,D)}return x(w,r)}function g(r,w,x){void 0===x&&(x=!1);r=q(r);w=q(w);return x||r.scheme===w.scheme?r.host.toLowerCase()===w.host.toLowerCase()&&
r.port===w.port:!1}function m(){for(var r=[],w=0;w<arguments.length;w++)r[w]=arguments[w];if(r&&r.length){w=[];if(b(r[0])){var x=r[0],D=x.indexOf("//");w.push(x.slice(0,D+1));l.test(r[0])&&(w[0]+="/");r[0]=x.slice(D+2)}else"/"===r[0][0]&&w.push("");r=r.reduce(function(G,F){return F?G.concat(F.split("/")):G},[]);for(x=0;x<r.length;x++)D=r[x],".."===D&&0<w.length?w.pop():!D||"."===D&&0!==w.length||w.push(D);return w.join("/")}}function v(r,w,x){if(!(w&&x&&r&&b(r)))return r;var D=r.indexOf("//"),G=r.indexOf("/",
D+2),F=r.indexOf(":",D+2);G=Math.min(0>G?r.length:G,0>F?r.length:F);if(r.slice(D+2,G).toLowerCase()!==w.toLowerCase())return r;w=r.slice(0,D+2);r=r.slice(G);return""+w+x+r}function p(r,w,x){void 0===w&&(w=J.appBaseUrl);if(!b(r))return r;var D=h(r),G=D.toLowerCase();w=h(w).toLowerCase().replace(/\/+$/,"");if((x=x?h(x).toLowerCase().replace(/\/+$/,""):null)&&0!==w.indexOf(x))return r;for(var F=function(z,B,C){C=z.indexOf(B,C);return-1===C?z.length:C},A=F(G,"/",G.indexOf("//")+2),y=-1;G.slice(0,A+1)===
w.slice(0,A)+"/";){y=A+1;if(A===G.length)break;A=F(G,"/",A+1)}if(-1===y||x&&y<x.length)return r;r=D.slice(y);D=w.slice(y-1).replace(/[^/]+/g,"").length;if(0<D)for(G=0;G<D;G++)r="../"+r;else r="./"+r;return r}Object.defineProperty(J,"__esModule",{value:!0});J.normalize=h;J.canUseXhr=function(r){return f.canUseXhr(r)};J.removeTrailingSlash=function(r){return r.replace(/\/+$/,"")};S=Function("return this")();J.appUrl=new c(S.location);J.appBaseUrl=function(){var r=J.appUrl.path;r=r.substring(0,r.lastIndexOf(r.split("/")[r.split("/").length-
1]));return J.appUrl.scheme+"://"+J.appUrl.host+(null!=J.appUrl.port?":"+J.appUrl.port:"")+r}();var l=/^\s*file:/i,n=/^\s*[a-z][a-z0-9-+.]*:[^0-9]/i;J.isDataProtocol=d;J.isAbsolute=b;J.isProtocolRelative=a;J.urlToObject=e;J.getOrigin=t;J.makeAbsolute=u;J.hasSameOrigin=g;J.join=m;J.removeFile=function(r){var w=0;if(b(r)){var x=r.indexOf("//");-1!==x&&(w=x+2)}x=r.lastIndexOf("/");return x<w?r:r.slice(0,x+1)};J.addProxy=function(r){return f.addProxy(r)};J.makeData=function(r){return r.isBase64?"data:"+
r.mediaType+";base64,"+r.data:"data:"+r.mediaType+","+r.data};var k=/^data:(.*?)(;base64)?,(.*)$/;J.dataComponents=function(r){return(r=r.match(k))?{mediaType:r[1],isBase64:!!r[2],data:r[3]}:null};J.changeDomain=v;J.read=function(r,w){var x=w&&w.url&&w.url.path;r&&x&&(r=u(r,x,{preserveProtocolRelative:!0}));(w=w&&w.portal)&&!w.isPortal&&w.urlKey&&w.customBaseUrl?(x=w.urlKey+"."+w.customBaseUrl,w=g(J.appUrl,J.appUrl.scheme+"://"+x)?v(r,w.portalHostname,x):v(r,x,w.portalHostname)):w=r;return w};J.write=
function(r,w){if(!r)return r;!b(r)&&w&&w.blockedRelativeUrls&&w.blockedRelativeUrls.push(r);var x=u(r);if(w){var D=w.verifyItemRelativeUrls&&w.verifyItemRelativeUrls.rootPath||w.url&&w.url.path;D&&(x=p(x,D,D),x!==r&&w.verifyItemRelativeUrls&&w.verifyItemRelativeUrls.writtenUrls.push(x))}r=x;x=(w=w&&w.portal)&&!w.isPortal&&w.urlKey&&w.customBaseUrl?v(r,w.urlKey+"."+w.customBaseUrl,w.portalHostname):r;return x};J.makeRelative=p;J.removeQueryParameters=function(r){r=e(r);Object.keys(r.query||{});return r.path}})},
"esri/layers/vectorTiles/core/workers/loaderConfig":function(){define(["require","exports","../tsSupport/assignHelper","dojo/has","../urlUtils"],function(S,J,f,c,h){Object.defineProperty(J,"__esModule",{value:!0});J.DEFAULT_LOADER_URL=h.makeAbsolute(h.removeQueryParameters(S.toUrl("./worker-init.js")));J.DEFAULT_CONFIG={baseUrl:function(){var d=h.removeQueryParameters(S.toUrl("dojo/x.js"));return h.makeAbsolute(d.slice(0,d.length-5))}(),packages:[{name:"esri"},{name:"dojo"},{name:"dojox"},{name:"dstore"},
{name:"moment",main:"moment"},{name:"@dojo"},{name:"cldrjs",main:"dist/cldr"},{name:"globalize",main:"dist/globalize"},{name:"maquette",main:"dist/maquette.umd"},{name:"maquette-css-transitions",main:"dist/maquette-css-transitions.umd"},{name:"maquette-jsx",main:"dist/maquette-jsx.umd"},{name:"tslib",main:"tslib"}],map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}}};J.default=
function(d){var b={async:d.async,isDebug:d.isDebug,locale:d.locale,baseUrl:d.baseUrl,has:f({},d.has),map:f({},d.map),packages:d.packages&&d.packages.concat()||[],paths:f({},d.paths)};d.hasOwnProperty("async")||(b.async=!0);d.hasOwnProperty("isDebug")||(b.isDebug=!1);d.baseUrl||(b.baseUrl=J.DEFAULT_CONFIG.baseUrl);J.DEFAULT_CONFIG.packages.forEach(function(t){a:{for(var u=b.packages,g=0;g<u.length;g++)if(u[g].name===t.name)break a;t=f({},t);g=h.removeQueryParameters(S.toUrl(t.name+"/x.js"));g=g.slice(0,
g.length-5);t.location=h.makeAbsolute(g);u.push(t)}});d=b.map=b.map||{};for(var a=0,e=Object.keys(J.DEFAULT_CONFIG.map);a<e.length;a++){var q=e[a];d[q]||(d[q]=J.DEFAULT_CONFIG.map[q])}return b}})},"esri/layers/vectorTiles/core/workers/WorkerFallback":function(){define(["require","exports","dojo/has","../global","./utils"],function(S,J,f,c,h){var d=function(){return function(){var e=this,q=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(function(t){e[t]=
function(){for(var u=[],g=0;g<arguments.length;g++)u[g]=arguments[g];return q[t].apply(q,u)}})}}(),b=c.MutationObserver||c.WebKitMutationObserver,a=function(){if(c.process&&c.process.nextTick)var e=function(u){c.process.nextTick(u)};else if(c.Promise)e=function(u){c.Promise.resolve().then(u)};else if(b){var q=[],t=document.createElement("div");(new b(function(){for(;0<q.length;)q.shift()()})).observe(t,{attributes:!0});e=function(u){q.push(u);t.setAttribute("queueStatus","1")}}return e}();return function(){function e(){this._dispatcher=
new d;this._isInitialized=!1;this._workerPostMessage({type:h.MessageType.HANDSHAKE})}e.prototype.terminate=function(){};Object.defineProperty(e.prototype,"onmessage",{get:function(){return this._onmessageHandler},set:function(q){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler);(this._onmessageHandler=q)&&this.addEventListener("message",q)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"onerror",{get:function(){return this._onerrorHandler},set:function(q){this._onerrorHandler&&
this.removeEventListener("error",this._onerrorHandler);(this._onerrorHandler=q)&&this.addEventListener("error",q)},enumerable:!0,configurable:!0});e.prototype.postMessage=function(q,t){var u=this;a(function(){u._workerMessageHandler(new MessageEvent("message",{data:q}))})};e.prototype.dispatchEvent=function(q){return this._dispatcher.dispatchEvent(q)};e.prototype.addEventListener=function(q,t,u){this._dispatcher.addEventListener(q,t,u)};e.prototype.removeEventListener=function(q,t,u){this._dispatcher.removeEventListener(q,
t,u)};e.prototype._workerPostMessage=function(q,t){var u=this;a(function(){u.dispatchEvent(new MessageEvent("message",{data:q}))})};e.prototype._workerMessageHandler=function(q){var t=this;if(q=h.receiveMessage(q)){var u=q.jobId;switch(q.type){case h.MessageType.CONFIGURE:this._isInitialized||this._workerPostMessage({type:h.MessageType.CONFIGURED});break;case h.MessageType.OPEN:q=q.modulePath,f("esri-webpack")?S(["esri/core/workers/RemoteClient","esri/views/vectorTiles/WorkerTileHandler","esri/views/2d/layers/features/Pipeline",
"esri/views/3d/layers/PointCloudWorker","esri/views/3d/layers/SceneLayerWorker","esri/layers/graphics/sources/support/CSVSourceWorker","esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker",q],function(g,m,v,p,l,n,k,r){switch(r){case "esri/views/vectorTiles/WorkerTileHandler":break;case "esri/views/2d/layers/features/Pipeline":m=v;break;case "esri/views/3d/layers/PointCloudWorker":m=p;break;case "esri/views/3d/layers/SceneLayerWorker":m=l;break;case "esri/layers/graphics/sources/support/CSVSourceWorker":m=
n;break;case "esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker":m=k;break;default:m=r}g=g.connect(m);t._workerPostMessage({type:h.MessageType.OPENED,jobId:u,data:g})}):S(["./RemoteClient",q],function(g,m){g=g.connect(m);t._workerPostMessage({type:h.MessageType.OPENED,jobId:u,data:g})})}}};return e}()})},"esri/layers/vectorTiles/core/requireUtils":function(){define(["require","exports","dojo/Deferred"],function(S,J,f){function c(h,d){if(Array.isArray(d)){var b=new f;h(d,function(){for(var a=
[],e=0;e<arguments.length;e++)a[e]=arguments[e];b.resolve(a)});return b.promise}return c(h,[d]).then(function(a){return a[0]})}Object.defineProperty(J,"__esModule",{value:!0});J.when=c;J.getAbsMid=function(h,d,b){return d.toAbsMid?d.toAbsMid(h):b.id.replace(/\/[^\/]*$/gi,"/")+h}})},"esri/layers/rasterLib/function/rasterFunctionHelper":function(){define(["dojo/_base/declare","dojo/_base/lang","./rasterFunctionRegistry"],function(S,J,f){return{create:function(c,h){if(c){var d=c.renderTexture,b=Object.keys(c);
if(c.read&&!h)return c;c.read&&h&&(c=c.toJson());-1<b.indexOf("name")&&b.indexOf(!1)?(c=J.mixin({},c),h=this._parseV2(c,h)):(c="esri.layers.RasterFunction"===c.declaredClass?c.toJson():J.mixin({},c),h=this._parseV1(c,h));h.branchCount=h.updateBranchStructure();h.renderTexture||(h.renderTexture=!!d);return h}},_parseV1:function(c,h){var d=c.rasterFunction,b=c.rasterFunctionArguments,a=c.renderTexture||c.rasterFunctionArguments.renderTexture||!1,e,q,t,u,g,m,v;(u=b.raster||b.Raster)&&u.rasterFunction&&
(e=this._parseV1(u,h));(u=b.raster2||b.Raster2)&&u.rasterFunction&&(q=this._parseV1(u,h));(u=b.rasters||b.Rasters)&&0<u.length&&(t=u.map(J.hitch(this,function(p){return p&&p.rasterFunction?this._parseV1(p,h):p})));(u=b.dem||b.DEM)&&(u.functionName||u.rasterFunction)&&(g=this._parseV1(u,h));(u=b.fillRaster||b.FillRaster)&&(u.functionName||u.rasterFunction)&&(m=this._parseV1(u,h));u=f.functions[d];if(!u)return null;d=new u(b);d.variableName&&(u=b[d.variableName])&&(u.functionName||u.rasterFunction)&&
(v=this._parseV1(u,h));c.outputPixelType&&(d.pixelType=c.outputPixelType);"$$"===e?d.functionArguments.raster=h&&h.raster:null!=e?d.functionArguments.raster=e:d.functionArguments.raster||(d.functionArguments.raster=h&&h.raster);null!=q&&(d.functionArguments.raster2=q);null!=t&&(d.functionArguments.rasters=t.map(function(p){"$$"===p&&(p=h&&h.raster);return p}));null!=g&&(d.functionArguments.dem=g);null!=m&&(d.functionArguments.fillRaster=m);null!=v&&(d.functionArguments[d.variableName]=v);d.renderTexture=
a;return d},_parseV2:function(c,h){if(!c)return null;c=J.clone(c);this._bindV2Args(c,h);var d={};this._convertTov1(c,d);return this._parseV1(d,h)},_bindV2Args:function(c,h){(c||h)&&Object.keys(c).forEach(function(d){c[d]["function"]&&c[d].arguments?this._bindV2Args(c[d].arguments,h):null!=h[c[d].name]&&(c[d].value=h[c[d].name])}.bind(this))},_convertV2Types:function(c){if(!c)return null;"ArgumentArray"===c.type?c.elements&&"RasterStatistics"===c.elements[0].type&&(c=c.elements):c instanceof Array&&
0===c.length&&(c=null);return c},_convertTov1:function(c,h){if((c||h)&&c["function"]){var d=c["function"],b=c.arguments;h.rasterFunction=d.type.replace("Function","");h.outputPixelType="UNKNOWN"===d.pixelType?"Unknown":d.pixelType;h.rasterFunctionArguments={};var a;Object.keys(b).forEach(function(e){b[e]["function"]&&b[e].arguments?(h.rasterFunctionArguments[e]={},this._convertTov1(b[e],h.rasterFunctionArguments[e])):(a=b[e].value,h.rasterFunctionArguments[e]="object"!==typeof a||a.functionArguments?
a:this._convertV2Types(a))}.bind(this))}}}})},"esri/layers/rasterLib/function/rasterFunctionRegistry":function(){define("dojo/_base/declare dojo/_base/lang ../../rasterLib/function/AspectFunction ../../rasterLib/function/BandArithmeticFunction ../../rasterLib/function/ColormapFunction ../../rasterLib/function/CompositeBandFunction ../../rasterLib/function/ContrastBrightnessFunction ../../rasterLib/function/ConvolutionFunction ../../rasterLib/function/ExtractBandFunction ../../rasterLib/function/HillshadeFunction ../../rasterLib/function/LocalFunction ../../rasterLib/function/MaskFunction ../../rasterLib/function/NDVIFunction ../../rasterLib/function/SlopeFunction ../../rasterLib/function/StretchFunction ../../rasterLib/function/RemapFunction ../../rasterLib/function/IdentityFunction ../../rasterLib/function/ResampleFunction".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n){return function(){function k(D){D.prototype.supportWebGL&&(w[D.prototype.functionName]=D);D.prototype.support2D&&(r[D.prototype.functionName]=D);x[D.prototype.functionName]=D}var r={},w={},x={};k(f);k(c);k(h);k(d);k(b);k(a);k(e);k(q);k(t);k(u);k(g);k(m);k(v);k(p);k(l);k(n);return{cpu:r,gpu:w,functions:x,register:k,getFunction:function(D){return x[D]},support:function(D,G){return!!("gpu"===G?w:"cpu"===G?r:x)[D]}}}()})},"esri/layers/rasterLib/function/AspectFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../../WKIDUnitConversion ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./surfaceUtils".split(" "),
function(S,J,f,c,h,d,b,a){return S([f,b],{declaredClass:"esri.layers.rasterLib.function.AspectFunction",functionName:"Aspect",supportWebGL:!0,support2D:!0,constructor:function(e){this.functionArguments=this.mixinIgnoreCase({raster:null},e)},bind:function(){var e=this.getSourceRasterInfo();if(!e.raster)return Error("The raster input to aspect function is invalid.");this.rasterInfo=J.mixin(e.raster,{bandCount:1,pixelType:this._calculatePixelType(this.pixelType,"F32"),statistics:[{min:0,max:360}],histograms:null});
this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Generic";return!0},read2D:function(e){this._performance.start();e=a.aspect(e.raster);this._addPerformanceMetric(this._performance.elapsed());return e},readGL:function(e){this._performance.start();this._initializeProgram({fragment:d.aspect,fragmentName:"Aspect"});var q=this._setupTextureData(e.raster),t=this.bindFrameBuffer(),u=this.gl,g=u.drawingBufferWidth;u=u.drawingBufferHeight;var m=q.extent;
this._setUniforms({u_resolution:e&&e.raster&&e.raster.pixelBlock?[1/e.raster.pixelBlock.width,1/e.raster.pixelBlock.height]:[1/g,1/u],u_cellSize:[(m.xmax-m.xmin)/g,(m.ymax-m.ymin)/u]});this._bindTexture(q.texture,"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:q.extent,texture:t.texture}}})})},"esri/layers/rasterLib/function/surfaceUtils":function(){define(["dojo/_base/lang"],function(S){return{hillshade:function(J,f){if(null!==J&&null!==J.pixelBlock&&
null!==J.pixelBlock.pixels){var c=this._clonePixelBlock(J.pixelBlock),h=f.altitude,d=f.azimuth,b=f.zFactor,a=f.psPower,e=f.psFactor,q=f.hillshadeType,t=f.slopeType,u=f.isGCS;1===q&&(b*=2);f=c.width;var g=c.height,m=c.pixels[0],v=c.mask,p=new Uint8Array(f*g);v&&p.set(v);var l=new Uint8Array(f*g),n=(J.extent.xmax-J.extent.xmin)/f,k=(J.extent.ymax-J.extent.ymin)/g,r=b/(8*n),w=b/(8*k);.001<b&&u&&(r/=111E3,w/=111E3);3===t&&(u?(r=111E3*n,w=111E3*k,r=(b+Math.pow(r,a)*e)/(8*r),w=(b+Math.pow(w,a)*e)/(8*w)):
(r=(b+Math.pow(n,a)*e)/(8*n),w=(b+Math.pow(k,a)*e)/(8*k)));u=(90-h)*Math.PI/180;h=Math.cos(u);var x=(360-d+90)*Math.PI/180;d=Math.sin(u)*Math.cos(x);u=Math.sin(u)*Math.sin(x);b=[];a=[];e=[];n=[315,270,225,360,180,0];var D=[60,60,60,60,60,90];t=[3,5,3,2,1,4];var G=t.reduce(function(K,I){return K+I});k=t.map(function(K){return K/G});if(1===q){var F=n.length;for(t=0;t<F;t++)h=D[t],d=n[t],u=(90-h)*Math.PI/180,h=Math.cos(u),x=(360-d+90)*Math.PI/180,d=Math.sin(u)*Math.cos(x),u=Math.sin(u)*Math.sin(x),b.push(h),
a.push(d),e.push(u)}var A=0;for(t=1;t<g-1;t++)for(D=t*f,n=1;n<f-1;n++)if(v&&!v[D+n])l[D+n]=0;else{x=0;if(v&&(x=v[D-f+n-1]+v[D-f+n]+v[D-f+n+1]+v[D+n-1]+v[D+n+1]+v[D+f+n-1]+v[D+f+n]+v[D+f+n+1],7>x)){l[D+n]=0;p[D+n]=0;continue}if(7===x){var y=v[D-f+n-1]?m[D-f+n-1]:m[D+n];var z=v[D-f+n]?m[D-f+n]:m[D+n];var B=v[D-f+n+1]?m[D-f+n+1]:m[D+n];x=v[D+n-1]?m[D+n-1]:m[D+n];var C=v[D+n+1]?m[D+n+1]:m[D+n];A=v[D+f+n-1]?m[D+f+n-1]:m[D+n];var H=v[D+f+n]?m[D+f+n]:m[D+n];var E=v[D+f+n+1]?m[D+f+n+1]:m[D+n]}else y=m[D-
f+n-1],z=m[D-f+n],B=m[D-f+n+1],x=m[D+n-1],C=m[D+n+1],A=m[D+f+n-1],H=m[D+f+n],E=m[D+f+n+1];x=(B+C+C+E-(y+x+x+A))*r;z=(A+H+H+E-(y+z+z+B))*w;B=Math.sqrt(1+x*x+z*z);A=0;if(0===q)H=u*z-d*x,H=255*(h+H)/B,0>H&&(H=0),A=H;else if(1===q)for(y=0;y<F;y++)H=e[y]*z-a[y]*x,H=255*(b[y]+H)/B,0>H&&(H=0),A+=H*k[y];l[D+n]=A}for(t=0;t<g;t++)l[t*f]=l[t*f+1],l[(t+1)*f-1]=l[(t+1)*f-2];for(t=1;t<f-1;t++)l[t]=l[t+f],l[t+(g-1)*f]=l[t+(g-2)*f];c.pixelType="U8";c.pixels=[l];c.statistics=[{minValue:0,maxValue:255}];v&&(c.mask=
p);return{extent:J.extent,pixelBlock:c}}},slope:function(J,f){if(null!==J&&null!==J.pixelBlock&&null!==J.pixelBlock.pixels){var c=this._clonePixelBlock(J.pixelBlock),h=f.zFactor,d=f.psPower,b=f.psFactor,a=f.slopeType,e=f.isGCS;f=c.width;var q=c.height,t=c.pixels[0],u=c.mask,g=new Uint8Array(f*q);u&&g.set(u);var m=new Float32Array(f*q),v=(J.extent.xmax-J.extent.xmin)/f,p=(J.extent.ymax-J.extent.ymin)/q,l=h/(8*v),n=h/(8*p);1E-4>Math.abs(h-1)&&e&&(l/=111E3,n/=111E3);3===a&&(e?(l=111E3*v,n=111E3*p,l=
(h+Math.pow(l,d)*b)/(8*l),n=(h+Math.pow(n,d)*b)/(8*n)):(l=(h+Math.pow(v,d)*b)/(8*v),n=(h+Math.pow(p,d)*b)/(8*p)));for(h=1;h<q-1;h++)for(b=h*f,d=1;d<f-1;d++)if(u&&!u[b+d])m[b+d]=0;else{p=0;if(u&&(p=u[b-f+d-1]+u[b-f+d]+u[b-f+d+1]+u[b+d-1]+u[b+d+1]+u[b+f+d-1]+u[b+f+d]+u[b+f+d+1],7>p)){m[b+d]=0;g[b+d]=0;continue}if(7===p){p=u[b-f+d-1]?t[b-f+d-1]:t[b+d];e=u[b-f+d]?t[b-f+d]:t[b+d];v=u[b-f+d+1]?t[b-f+d+1]:t[b+d];var k=u[b+d-1]?t[b+d-1]:t[b+d];var r=u[b+d+1]?t[b+d+1]:t[b+d];var w=u[b+f+d-1]?t[b+f+d-1]:t[b+
d];var x=u[b+f+d]?t[b+f+d]:t[b+d];var D=u[b+f+d+1]?t[b+f+d+1]:t[b+d]}else p=t[b-f+d-1],e=t[b-f+d],v=t[b-f+d+1],k=t[b+d-1],r=t[b+d+1],w=t[b+f+d-1],x=t[b+f+d],D=t[b+f+d+1];k=(v+r+r+D-(p+k+k+w))*l;p=(w+x+x+D-(p+e+e+v))*n;p=Math.sqrt(k*k+p*p);m[b+d]=1===a||3===a?57.2957795*Math.atan(p):100*p}for(h=0;h<q;h++)m[h*f]=m[h*f+1],m[(h+1)*f-1]=m[(h+1)*f-2];for(h=1;h<f-1;h++)m[h]=m[h+f],m[h+(q-1)*f]=m[h+(q-2)*f];c.pixelType="F32";c.pixels=[m];c.statistics=[{minValue:0,maxValue:255}];u&&(c.mask=g);return{extent:J.extent,
pixelBlock:c}}},aspect:function(J){if(null!==J&&null!==J.pixelBlock&&null!==J.pixelBlock.pixels){var f=this._clonePixelBlock(J.pixelBlock),c=f.width,h=f.height,d=f.pixels[0],b=f.mask,a=new Uint8Array(c*h);b&&a.set(b);var e=new Float32Array(c*h),q=1/((J.extent.xmax-J.extent.xmin)/c),t=1/((J.extent.ymax-J.extent.ymin)/h),u,g;for(u=1;u<h-1;u++){var m=u*c;for(g=1;g<c-1;g++)if(b&&!b[m+g])e[m+g]=0;else{var v=0;if(b&&(v=b[m-c+g-1]+b[m-c+g]+b[m-c+g+1]+b[m+g-1]+b[m+g+1]+b[m+c+g-1]+b[m+c+g]+b[m+c+g+1],7>v)){e[m+
g]=0;a[m+g]=0;continue}if(7===v){v=b[m-c+g-1]?d[m-c+g-1]:d[m+g];var p=b[m-c+g]?d[m-c+g]:d[m+g];var l=b[m-c+g+1]?d[m-c+g+1]:d[m+g];var n=b[m+g-1]?d[m+g-1]:d[m+g];var k=b[m+g+1]?d[m+g+1]:d[m+g];var r=b[m+c+g-1]?d[m+c+g-1]:d[m+g];var w=b[m+c+g]?d[m+c+g]:d[m+g];var x=b[m+c+g+1]?d[m+c+g+1]:d[m+g]}else v=d[m-c+g-1],p=d[m-c+g],l=d[m-c+g+1],n=d[m+g-1],k=d[m+g+1],r=d[m+c+g-1],w=d[m+c+g],x=d[m+c+g+1];n=(l+k+k+x-(v+n+n+r))*q;v=(r+w+w+x-(v+p+p+l))*t;0===n&&0===v?v=-1:(v=90-57.29578*Math.atan2(v,-n),0>v&&(v+=
360),360===v?v=0:360<v&&(v%=360));e[m+g]=v}}for(u=0;u<h;u++)e[u*c]=e[u*c+1],e[(u+1)*c-1]=e[(u+1)*c-2];for(u=1;u<c-1;u++)e[u]=e[u+c],e[u+(h-1)*c]=e[u+(h-2)*c];f.pixelType="F32";f.pixels=[e];f.statistics={minValue:0,maxValue:360};b&&(f.mask=a);return{extent:J.extent,pixelBlock:f}}},_clonePixelBlock:function(J){return J.clone?J.clone():S.clone(J)}}})},"esri/layers/rasterLib/function/BandArithmeticFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./rasterIndex".split(" "),
function(S,J,f,c,h,d,b){return S([f,d],{declaredClass:"esri.layers.rasterLib.function.BandArithmeticFunction",functionName:"BandArithmetic",supportWebGL:!0,support2D:!0,constructor:function(a){this.functionArguments=this.mixinIgnoreCase({method:1,bandIndexes:"",raster:null},a)},bind:function(a){a=this.getSourceRasterInfo(a);if(!a.raster)return Error("The raster input to band arithmetic function is invalid.");this.rasterInfo=J.mixin(a.raster,{bandCount:8===this.functionArguments.method?a.raster.bandCount:
1,pixelType:this._calculatePixelType(this.pixelType,"F32"),statistics:null,histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Generic";return!0},read2D:function(a){this._performance.start();a=a.raster;var e=b.calculate(a.pixelBlock,{bandIndexes:this.functionArguments.bandIndexes,method:this.functionArguments.method});this._addPerformanceMetric(this._performance.elapsed());"Unknown"!==this.pixelType&&(e.pixelType=this.pixelType);
return{extent:a.extent,pixelBlock:e}},readGL:function(a){this._performance.start();this._initializeProgram({fragment:h.bandArithmetic,fragmentName:"bandArithmetic"});var e=this.functionArguments.bandIndexes.trim().split(" ").map(function(g){return parseInt(g,10)});this._infraredBandID=e[0]-1;this._visibleBandID=e[1]-1;this._alterBand=2<Math.max(this._infraredBandID,this._visibleBandID)?!0:!1;a=this._setupTextureData(a.raster,this._alterBand&&2==e.length?{bandIDs:[this._infraredBandID,this._visibleBandID,
this._infraredBandID]}:{bandIDs:[e[0]-1,e[1]-1,e[2]-1]});var q=this.bindFrameBuffer(),t=this.functionArguments.method,u=2<e.length?e.slice(2):null;this._alterBand?this._setUniforms({u_method:t,u_bandId_nir:0,u_bandId_red:1,u_constants:u}):this._setUniforms({u_method:t,u_bandId_nir:e[0]-1,u_bandId_red:e[1]-1,u_constants:u});this._bindTexture(a.texture,"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:a.extent,texture:q.texture}}})})},"esri/layers/rasterLib/function/rasterIndex":function(){define(["dojo/_base/lang"],
function(S){return{calculate:function(J,f){if(J&&J.pixels&&J.pixels.length){var c=f&&f.bandIndexes;f=f&&f.method;var h=c.trim().split(" ").map(function(a){return parseInt(a,10)}).filter(function(a){return null!=a});J=this._clonePixelBlock(J);var d=J.pixels,b=J.mask;switch(f){case 1:d=this._calculateNDVI(b,d[h[0]-1],d[h[1]-1]);break;case 2:d=this._calculateSAVI(b,d[h[0]-1],d[h[1]-1],h[2]);break;case 3:d=this._calculateTSAVI(b,d[h[0]-1],d[h[1]-1],h[2],h[3],h[4]);break;case 4:d=this._calculateMSAVI(b,
d[h[0]-1],d[h[1]-1]);break;case 5:d=this._calculateGEMI(b,d[h[0]-1],d[h[1]-1]);break;case 6:d=this._calculatePVI(b,d[h[0]-1],d[h[1]-1],h[2],h[3]);break;case 7:d=this._calculateGVITM(b,d[h[0]-1],d[h[1]-1],d[h[2]-1],d[h[3]-1],d[h[4]-1],d[h[5]-1]);break;case 8:d=this._calculateSultan(b,d[h[0]-1],d[h[1]-1],d[h[2]-1],d[h[3]-1],d[h[4]-1],d[h[5]-1]);break;case 9:d=this._calculateVARI(b,d[h[0]-1],d[h[1]-1],d[h[2]-1]);break;case 0:d=this._calculateUserDefined(b,d,c)}J.pixels=d;J.pixelType="F32";J.calculateStatistics();
return J}},_clonePixelBlock:function(J){return J.clone?J.clone():S.clone(J)},_parseUserDefined:function(J,f){J=J.replace(" ","");0===J.indexOf("-")&&(J="0"+J);0===J.indexOf("+")&&(J=J.slice(1,J.length));J=J.split("");var c=[],h=[],d="+-*/()".split(""),b,a="";for(b=0;b<J.length;b++){var e=J[b];d.some(function(q){return q===e})?(""!==a&&h.push(parseFloat(a)),c.push(e),a=""):"b"===e.toLowerCase()?(b++,a=e.concat(J[b]),h.push(f[parseInt(a[1],10)-1]),a=""):(a=a.concat(e),b===J.length-1&&h.push(parseFloat(a)))}return{ops:c,
nums:h}},_op:function(J,f,c,h){if(c.constructor===Number&&h.constructor===Number)return c+h;var d;if(c.constructor===Number){var b=h.length;var a=c;c=new Float32Array(b);for(d=0;d<b;d++)c[d]=a}else if(b=c.length,h.constructor===Number)for(a=h,h=new Float32Array(b),d=0;d<b;d++)h[d]=a;a=new Float32Array(b);if(null==J)if("+"===f)for(d=0;d<b;d++)a[d]=c[d]+h[d];else if("-"===f)for(d=0;d<b;d++)a[d]=c[d]-h[d];else if("*"===f)for(d=0;d<b;d++)a[d]=c[d]*h[d];else{if("/"===f)for(d=0;d<b;d++)a[d]=c[d]/h[d]}else if("+"===
f)for(d=0;d<b;d++)J[d]&&(a[d]=c[d]+h[d]);else if("-"===f)for(d=0;d<b;d++)J[d]&&(a[d]=c[d]-h[d]);else if("*"===f)for(d=0;d<b;d++)J[d]&&(a[d]=c[d]*h[d]);else if("/"===f)for(d=0;d<b;d++)J[d]&&(a[d]=c[d]/h[d]);return a},_shrinkOp:function(J,f){J.splice(f,1);var c=f=0,h=0;do{for(f=h=c=0;f<J.length;f++)if("("===J[f])c=f;else if(")"===J[f]){h=f;break}h===c+1&&J.splice(c,2)}while(h===c+1);return J},_getPriorityOpIndex:function(J,f){if(1===J.length)return{opIndex:0,numIndex:0};var c=f=0,h=0,d=-1,b=0;for(f=
0;f<J.length;f++)if("("===J[f])c=f;else if(")"===J[f]){h=f;break}var a=0===h?J:J.slice(c+1,h);for(f=0;f<a.length;f++)if("*"===a[f]||"/"===a[f]){d=f;break}if(!(-1<d))for(f=0;f<a.length;f++)if("+"===a[f]||"-"===a[f]){d=f;break}0<h&&(d+=c+1);for(f=0;f<d;f++)"("===J[f]&&b++;return{opIndex:d,numIndex:d-b}},_calculateUserDefined:function(J,f,c){f=this._parseUserDefined(c,f);c=f.ops;for(var h=f.nums,d,b,a;0<c.length&&(f=this._getPriorityOpIndex(c,h),d=c[f.opIndex],b=h[f.numIndex],a=h[f.numIndex+1],d=this._op(J,
d,b,a),1!==c.length);)c=this._shrinkOp(c,f.opIndex),h.splice(f.numIndex,2,d);return[d]},_calculateNDVI:function(J,f,c){var h=c.length,d=new Float32Array(h),b;if(null==J)for(b=0;b<h;b++){var a=c[b];var e=f[b];d[b]=(e-a)/(e+a)}else for(b=0;b<h;b++)J[b]&&(a=c[b],e=f[b],d[b]=(e-a)/(e+a));return[d]},_calculateSAVI:function(J,f,c,h){var d=c.length,b=new Float32Array(d),a;if(null==J)for(a=0;a<d;a++){var e=c[a];var q=f[a];b[a]=(q-e)/(q+e+h)*(1+h)}else for(a=0;a<d;a++)J[a]&&(e=c[a],q=f[a],b[a]=(q-e)/(q+e+
h)*(1+h));return[b]},_calculateTSAVI:function(J,f,c,h,d,b){var a=c.length,e=new Float32Array(a),q=-d*h+b*(1+h*h);if(null==J)for(b=0;b<a;b++){var t=c[b];var u=f[b];e[b]=h*(u-h*t-d)/(d*u+t+q)}else for(b=0;b<a;b++)J[b]&&(t=c[b],u=f[b],e[b]=h*(u-h*t-d)/(d*u+t+q));return[e]},_calculateMSAVI:function(J,f,c){var h=c.length,d=new Float32Array(h),b;if(null==J)for(b=0;b<h;b++){var a=c[b];var e=f[b];d[b]=.5*(2*(e+1)-Math.sqrt(Math.pow(2*e+1,2)-8*(e-a)))}else for(b=0;b<h;b++)J[b]&&(d[b]=.5*(2*(e+1)-Math.sqrt(Math.pow(2*
e+1,2)-8*(e-a))));return[d]},_calculateGEMI:function(J,f,c){var h=c.length,d=new Float32Array(h),b;if(null==J)for(b=0;b<h;b++){var a=c[b];var e=f[b];e=(2*(e*e-a*a)+1.5*e+.5*a)/(e+a+.5);d[b]=e*(1-.25*e)-(a-.125)/(1-a)}else for(b=0;b<h;b++)J[b]&&(a=c[b],e=f[b],e=(2*(e*e-a*a)+1.5*e+.5*a)/(e+a+.5),d[b]=e*(1-.25*e)-(a-.125)/(1-a));return[d]},_calculatePVI:function(J,f,c,h,d){var b=c.length,a=new Float32Array(b),e,q=Math.sqrt(1+h*h);if(null==J)for(e=0;e<b;e++){var t=c[e];var u=f[e];a[e]=(u-h*t-d)/q}else for(e=
0;e<b;e++)J[e]&&(t=c[e],u=f[e],a[e]=(u-h*t-d)/q);return[a]},_calculateGVITM:function(J,f,c,h,d,b,a){var e=f.length,q=new Float32Array(e),t;if(null==J)for(t=0;t<e;t++)q[t]=-.2848*f[t]-.2435*c[t]-.5436*h[t]+.7243*d[t]+.084*b[t]-1.18*a[t];else for(t=0;t<e;t++)J[t]&&(q[t]=-.2848*f[t]-.2435*c[t]-.5436*h[t]+.7243*d[t]+.084*b[t]-1.18*a[t]);return[q]},_calculateSultan:function(J,f,c,h,d,b,a){c=f.length;var e=new Float32Array(c),q=new Float32Array(c),t=new Float32Array(c),u;if(null==J)for(u=0;u<c;u++)e[u]=
b[u]/a[u]*100,q[u]=b[u]/f[u]*100,t[u]=h[u]/d[u]*(b[u]/d[u])*100;else for(u=0;u<c;u++)J[u]&&(e[u]=b[u]/a[u]*100,q[u]=b[u]/f[u]*100,t[u]=h[u]/d[u]*(b[u]/d[u])*100);return[e,q,t]},_calculateVARI:function(J,f,c,h){var d=f.length,b=new Float32Array(d),a;if(null==J)for(a=0;a<d;a++){var e=f[a];var q=c[a];var t=h[a];b[a]=(q-e)/(q+e-t)}else for(a=0;a<d;a++)if(J[a])for(a=0;a<d;a++)e=f[a],q=c[a],t=h[a],b[a]=(q-e)/(q+e-t);return[b]}}})},"esri/layers/rasterLib/function/ColormapFunction":function(){define("dojo/_base/declare dojo/_base/lang ../../../renderers/colorRampGenerator ./RasterFunctionX ./pixelShaders ./RasterFunctionWebGLMixin ./rasterUtils".split(" "),
function(S,J,f,c,h,d,b){return S([c,d],{declaredClass:"esri.layers.rasterLib.function.ColormapFunction",functionName:"Colormap",pixelType:"U8",renderTexture:!1,supportWebGL:!0,support2D:!0,constructor:function(a){this.functionArguments=this.mixinIgnoreCase({colormap:null,colorRampName:null,colorRamp:null,colorMapName:null,raster:null},a);this.invert=a&&a.invert;a=a.colormap||a.Colormap;if(a){if(a.features||a[0].attributes){a=a.features||a;var e=Object.keys(a[0].attributes);var q=e.filter(function(p){return"alpha"===
p.toLowerCase()})[0];var t=e.filter(function(p){return"value"===p.toLowerCase()})[0];var u=e.filter(function(p){return"red"===p.toLowerCase()})[0];var g=e.filter(function(p){return"green"===p.toLowerCase()})[0];var m=e.filter(function(p){return"blue"===p.toLowerCase()})[0];if(!(t&&u&&g&&m))throw"invalid colormap";a=a.map(function(p){return q?[p.attributes[t],p.attributes[u],p.attributes[g],p.attributes[m],p.attributes[q]]:[p.attributes[t],p.attributes[u],p.attributes[g],p.attributes[m]]});var v=1.1>
Math.max.apply(null,a.map(function(p){return p[1]}));e=q&&1.1>Math.max.apply(null,a.map(function(p){return p[4]}));if(v)for(v=0;v<a.length;v++)a[v][1]=Math.round(255*a[v][1]),a[v][2]=Math.round(255*a[v][2]),a[v][3]=Math.round(255*a[v][3]),e&&(a[v][4]=Math.round(255*a[v][4]))}this.functionArguments.colormap=this._sortClr(a)}this._initialize()},bind:function(a){this._initialize();a=this.getSourceRasterInfo(a);if(!a.raster||"F32"===a.raster.pixelType)return Error("The raster input to colormap function is invalid. It must be integer type.");
this.rasterInfo=J.mixin(a.raster,{bandCount:3,pixelType:this._calculatePixelType(this.pixelType,"U8"),statistics:null,histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Processed";return!0},read2D:function(a){return this._colorize(a.raster)},readGL:function(a){return this._colorizeGL(a.raster)},_colorize:function(a){this._performance.start();var e=b.colorize(a.pixelBlock,{indexedColormap:this._indexedColormap,indexedColormapOffset:this._indexedColormapOffset,
indexed2DColormap:this._indexed2DColormap,alphaSpecified:this._alphaSpecified});this._addPerformanceMetric(this._performance.elapsed());return{extent:a.extent,pixelBlock:e}},_binarySearchClr:function(a,e){for(var q=0,t=a.length-1,u=0,g=0;q<t;)if(u=Math.floor((q+t)/2),g=a[u],g[0]<e)q=u;else if(g[0]>e)t=u;else return g.slice(1);return null},_sortClr:function(a,e){var q,t=[];for(q=0;q<a.length;q++)t.push(a[q]);for(q=0;q<t.length-1;q++){var u=t[q];for(a=q+1;a<t.length;a++)u[0]>t[a][0]&&(u=t[a],t[a]=t[q],
t[q]=u)}if(e)for(q=0;q<t.length/2;q++)u=t[q],t[t.length-1-q]=t[q],t[q]=u;return t},_invertColorRamp:function(a){if(!a)return a;var e={type:a.type};"random"===a.type?e=a:"multipart"===a.type?e.colorRamps=a.colorRamps.map(function(q){return{fromColor:q.toColor,toColor:q.fromColor}}).reverse():(e.fromColor=a.toColor,e.toColor=a.fromColor);return e},_initialize:function(){this._indexedColormapOffset=0;if(this.functionArguments.colormap){var a=b.buildIndexedColormap(this.functionArguments.colormap);this._alphaSpecified=
a&&a.alphaSpecified;this._indexedColormap=a&&a.indexedColormap;this._indexedColormapOffset=a&&a.offset;this._indexedColormap||(this._indexed2DColormap=this._getIndexed2DColormap())}else this.functionArguments.colorRamp?this._indexedColormap="multipart"===this.functionArguments.colorRamp.type?this.invert?f.createMultiPartColorRamp(this._invertColorRamp(this.functionArguments.colorRamp)):f.createMultiPartColorRamp(this.functionArguments.colorRamp):this.invert?f.createAlgorithmicColorRamp(this._invertColorRamp(this.functionArguments.colorRamp)):
f.createAlgorithmicColorRamp(this.functionArguments.colorRamp):this.functionArguments.colormapName&&"random"===this.functionArguments.colormapName.toLowerCase()&&(this._indexedColormap=f.createRandomColorRamp())},_getIndexed2DColormap:function(){var a=this.functionArguments.colormap;if(!a)return null;var e=0;0>a[0][0]&&(e=a[0][0]);var q=[],t=5===a[0].length,u;for(u=0;u<a.length;u++)q[a[u][0]-e]=t?a[u].slice(1):a[u].slice(1).concat([255]);return q},_colorizeGL:function(a){this._performance.start();
this._initializeProgram({fragment:h.colormap,fragmentName:"Colormap"});var e=this._indexedColormap,q=this._indexedColormapOffset;this._clrTexture||(this._clrTexture=this._setupColormapTexture(e));var t=this._clrTexture,u=this.bindFrameBuffer();a=this._setupTextureData(a);this._setUniforms({u_indexedColormapOffset:q,u_indexedColormapMaxIndex:e.length/4-1});this._bindTexture(t,"u_image1");this._bindTexture(a.texture,"u_image");this._drawGL();return{extent:a.extent,texture:u.texture}},_setupColormapTexture:function(a){var e=
this._createTexture(),q=this.gl,t=a.length/4,u=new Float32Array(a.length),g,m=this.renderTexture?255:1;for(g=0;g<a.length;g++)u[g]=a[g]/m;q.getExtension("OES_texture_float");q.texImage2D(q.TEXTURE_2D,0,q.RGBA,t,1,0,q.RGBA,q.FLOAT,u);return e}})})},"esri/renderers/colorRampGenerator":function(){define(["dojo/_base/declare","dojo/_base/lang","../renderers/colorUtils"],function(S,J,f){return{createAlgorithmicColorRamp:function(c,h){if(!c)return null;var d=c.fromColor,b=c.toColor;if(!d||!b)return null;
void 0===d.r&&3<=d.length&&(d={r:d[0],g:d[1],b:d[2]});void 0===b.r&&3<=b.length&&(b={r:b[0],g:b[1],b:b[2]});var a=c.size||256;c=c.algorithm||"cie-lab";if(1===a)var e=[d.r,d.g,d.b,255];else if(2===a)e=[d.r,d.g,d.b,255,b.r,b.g,d.b,255];else if(-1<c.toLowerCase().indexOf("hsv")){e=f.toHSV(d);b=f.toHSV(b);a=a||256;var q=0===e.s,t=0===b.s;d=e.h;c=b.h;q&&!t?d=e.h=c:t&&!q&&(c=b.h=d);q=Math.abs(c-d);180>q?c=(c-d)/(a-1):(q=360-q,c=d>c?q/(a-1):-q/(a-1));q=(b.s-e.s)/(a-1);t=(b.v-e.v)/(a-1);var u=e.s;e=e.v;var g,
m=new Uint8Array(4*a);for(g=0;g<a-1;g++){var v=f.toRGB({h:d,s:u,v:e});m[4*g]=v.r;m[4*g+1]=v.g;m[4*g+2]=v.b;m[4*g+3]=255;d+=c;u+=q;e+=t;360<d?d-=360:0>d&&(d+=360)}v=f.toRGB(b);m[4*(a-1)]=v.r;m[4*(a-1)+1]=v.g;m[4*(a-1)+2]=v.b;m[4*(a-1)+3]=255;e=m}else if(-1<c.toLowerCase().indexOf("lch")){u=f.toLCH(d);b=f.toLCH(b);a=a||256;e=(b.l-u.l)/(a-1);d=(b.c-u.c)/(a-1);c=(b.h-u.h)/(a-1);q=u.l;t=u.c;u=u.h;m=new Uint8Array(4*a);for(g=0;g<a-1;g++)v=f.toRGB({l:q,c:t,h:u}),m[4*g]=v.r,m[4*g+1]=v.g,m[4*g+2]=v.b,m[4*
g+3]=255,q+=e,t+=d,u+=c;v=f.toRGB(b);m[4*(a-1)]=v.r;m[4*(a-1)+1]=v.g;m[4*(a-1)+2]=v.b;m[4*(a-1)+3]=255;e=m}else if(-1<c.toLowerCase().indexOf("lab")){u=f.toLAB(d);b=f.toLAB(b);a=a||256;e=(b.l-u.l)/(a-1);d=(b.a-u.a)/(a-1);c=(b.b-u.b)/(a-1);q=u.l;t=u.a;u=u.b;m=new Uint8Array(4*a);for(g=0;g<a-1;g++)v=f.toRGB({l:q,a:t,b:u}),m[4*g]=v.r,m[4*g+1]=v.g,m[4*g+2]=v.b,m[4*g+3]=255,q+=e,t+=d,u+=c;v=f.toRGB(b);m[4*(a-1)]=v.r;m[4*(a-1)+1]=v.g;m[4*(a-1)+2]=v.b;m[4*(a-1)+3]=255;e=m}if(h&&!1===h.flattened)for(h=e,
e=[],b=0;b<e/4;b++)e[b]=h.slice(4*b,4*b+4);return e},createMultiPartColorRamp:function(c,h){if(!c)return null;h=h&&J.clone(h)||{flattened:!0};var d=c.colorRamps;if(!d||0===d.length)return null;var b=c.size||256;c=Math.max(Math.floor(b/d.length),1);var a=Math.max(c,b-(d.length-1)*c),e=!1!==h.flattened;h.flattened=!0;b=(d.length-1)*c+a;var q=new Uint8Array(4*b);for(b=0;b<d.length;b++){var t={fromColor:d[b].fromColor,toColor:d[b].toColor,size:b===d.length-1?a:c};q instanceof Array?q.concat(this.createAlgorithmicColorRamp(t,
h)):q.set(this.createAlgorithmicColorRamp(t,h),c*b*4)}if(!e)for(h=q,q=[],b=0;b<q/4;b++)q[b]=h.slice(4*b,4*b+4);return q},createRandomColorRamp:function(c){c=c||{};var h=c.size||256,d=!1===c.flattened;var b=d?new Uint8Array(4*h):[];for(c=0;c<h;c++)d?(b[4*c]=Math.round(255*Math.random()),b[4*c+1]=Math.round(255*Math.random()),b[4*c+2]=Math.round(255*Math.random()),b[4*c+3]=255):b[c]=[Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random()),255];return b}}})},"esri/layers/rasterLib/function/rasterUtils":function(){define(["dojo/_base/lang"],
function(S){return{mask:function(J,f){if(J&&J.pixels&&J.pixels.length){J=this._clonePixelBlock(J);var c=f.includedRanges,h=f.noDataInterpretation;f=f.noDataValues;if(null===c&&null===f)return J;var d=J.pixels,b=J.mask,a=J.width*J.height,e=d.length,q;if(null!==f&&f.length!==e)throw"expect "+e+" elements in noDataValues";if(null!==c&&c.length!==2*e)throw"expect "+2*e+" elements in IncludeRanges";if(null==b){b=new Uint8Array(a);for(q=0;q<a;q++)b[q]=1;J.mask=b}if(0===h)for(h=0;h<e;h++){var t=d[h];var u=
null===c?null:c[2*h];var g=null===c?null:c[2*h+1];var m=null===f?null:parseFloat(f[h]);if(null===u||null===g)for(q=0;q<a;q++){if(b[q]){var v=t[q];v===m&&(b[q]=0)}}else if(null===m)for(q=0;q<a;q++)b[q]&&(v=t[q],v<u||v>g)&&(b[q]=0);else for(q=0;q<a;q++)b[q]&&(v=t[q],v<u||v>g||v===m)&&(b[q]=0)}else{var p=new Uint8Array(a);for(q=0;q<a;q++)p[q]=b[q];for(h=0;h<e;h++)if(t=d[h],u=null===c?null:c[2*h],g=null===c?null:c[2*h+1],m=null===f?null:parseFloat(f[h]),null===u||null===g)for(q=0;q<a;q++)p[q]&&(v=t[q],
v!==m&&(p=0));else if(null===m)for(q=0;q<a;q++)p[q]&&(v=t[q],v<=u&&v<=g&&(p=0));else for(q=0;q<a;q++)p[q]&&(v=t[q],v<=u&&v<=g&&v!==m&&(p=0));for(q=0;q<a;q++)b[q]&&p[q]&&(b[q]=0)}return J}},calculateStatisticsHistograms:function(J,f){J=this._clonePixelBlock(J);f=J.pixelType;var c=J.pixels,h=J.mask,d=c.length,b,a,e=[],q;for(b=0;b<d;b++){var t={min:-.5,max:255.5,size:256,counts:new Uint32Array(256)};var u=t.counts;var g=c[b];if("U8"===f)if(h)for(a=0;a<J.width*J.height;a++)h[a]&&u[g[a]]++;else for(a=
0;a<J.width*J.height;a++)u[g[a]]++;else{var m=J.statistics[b].minValue;var v=J.statistics[b].maxValue;t.min=m;t.max=v;v=(v-m)/256;var p=new Uint32Array(257);if(h)for(a=0;a<J.width*J.height;a++)h[a]&&p[Math.floor((g[a]-m)/v)]++;else for(a=0;a<J.width*J.height;a++)p[Math.floor((g[a]-m)/v)]++;for(a=0;255>a;a++)u[a]=p[a];u[255]=p[255]+p[256]}e.push(t);m=J.statistics[b].minValue;v=J.statistics[b].maxValue;for(a=p=q=g=0;a<t.size;a++)g+=u[a],q+=a*u[a];q/=g;for(a=0;a<t.size;a++)p+=u[a]*Math.pow(a-q,2);u=
Math.sqrt(p/(g-1));a=(q+.5)*(t.max-t.min)/t.size+t.min;t=u*(t.max-t.min)/t.size;J.statistics[b]={min:m,minValue:m,max:v,maxValue:v,mean:a,stddev:t}}J.histograms=e;return J},buildIndexedColormap:function(J,f){if(!J)return null;var c=0;0>J[0][0]&&(c=J[0][0]);var h=Math.max(256,J[J.length-1][0]-c);if(65536<h)return null;var d=new Uint8Array(4*h),b=[],a=0,e=5===J[0].length;if(f)for(b=J[a],f=b[0]-c;f<h;f++)d[4*f]=b[1],d[4*f+1]=b[2],d[4*f+2]=b[3],d[4*f+3]=e?b[4]:255,f===b[0]-c&&(b=a===J.length-1?b:J[++a]);
else for(f=0;f<J.length;f++)b=J[f],a=4*(b[0]-c),d[a]=b[1],d[a+1]=b[2],d[a+2]=b[3],d[a+3]=e?b[4]:255;return{indexedColormap:d,offset:c,alphaSpecified:e}},colorize:function(J,f){if(null!==J&&null!==J.pixels){J=this._clonePixelBlock(J);var c=J.pixels,h=J.width*J.height,d=J.mask,b=f.indexedColormap,a=f.indexedColormapOffset,e=b&&b.length-1,q=f.indexed2DColormap;f=f.alphaSpecified;if(3<=c.length)throw"colormap only works on single band image";var t=c[0],u=new Uint8Array(t.length),g=new Uint8Array(t.length),
m=new Uint8Array(t.length),v=0;if(b)if(d)for(c=0;c<h;c++)d[c]&&(v=4*(t[c]-a),v<a||v>e?d[c]=0:(u[c]=b[v],g[c]=b[v+1],m[c]=b[v+2],d[c]=b[v+3]));else{d=new Uint8Array(h);for(c=0;c<h;c++)v=4*(t[c]-a),v<a||v>e?d[c]=0:(u[c]=b[v],g[c]=b[v+1],m[c]=b[v+2],d[c]=b[v+3]);J.mask=d}else if(d)for(c=0;c<h;c++)d[c]&&(b=q[t[c]],u[c]=b[0],g[c]=b[1],m[c]=b[2],d[c]=b[3]);else{d=new Uint8Array(h);for(c=0;c<h;c++)b=q[t[c]],u[c]=b[0],g[c]=b[1],m[c]=b[2],d[c]=b[3];J.mask=d}J.pixels=[u,g,m];J.statistics=null;J.pixelType="U8";
J.maskIsAlpha=f;return J}},convolute:function(J,f){J=this._clonePixelBlock(J);var c=J.pixels,h=J.width,d=J.height,b=h*d,a=c.length,e,q,t,u,g=[],m=[],v=f.normalizedKernel,p=f.kernelRows,l=f.kernelCols;for(f=0;f<a;f++){var n=c[f];var k=new Float32Array(b);k.set(n);for(t=1;t<d-1;t++){var r=t*h;for(u=1;u<h-1;u++){for(e=m=0;e<p;e++)for(q=0;q<l;q++)m+=n[r+u+(e-1)*h+q-1]*v[e*l+q];k[r+u]=m}}g.push(k)}J.pixels=g;return J},contrastBrightnessStretch:function(J,f){if(null!==J&&null!==J.pixels){J=this._clonePixelBlock(J);
var c=J.pixels,h=J.mask,d=J.width*J.height,b=c.length;var a=f&&f.contrastOffset;f=f&&f.brightnessOffset;if("U8"!==J.pixelType)throw"the contrast and brightness function only supports 8 bit unsigned integer data";var e=this._createContrastBrightnessLUT(a,f);if(null==h)for(a=0;a<d;a++)for(f=0;f<b;f++)c[f][a]=e[c[f][a]];else for(a=0;a<d;a++)if(h[a])for(f=0;f<b;f++)c[f][a]=e[c[f][a]];J.pixelType="U8";return J}},isNull:function(J,f){if(null!==J&&null!==J.pixels){J=this._clonePixelBlock(J);f=J.mask;var c=
J.pixels[0],h=c.length,d;if(f){for(d=0;d<h;d++)c[d]=f[d]?0:1;J.mask=null}else if(c.fill)c.fill(0);else for(d=0;d<h;d++)c[d]=0;return J}},setNull:function(J){if(null!==f&&null!==f.pixels){var f=this._clonePixelBlock(J);J=f.mask;var c=f.pixels[0],h=c.length,d;J=J||new Uint8Array(h);for(d=0;d<h;d++)J[d]=c[d]?0:1;f.mask=J;return f}},local:function(J,f){if(!f)return J[0];var c=f.rasterCountNeeded;f=f.functor;var h=this._clonePixelBlock(J[0]);if(null!==h&&null!==h.pixels){var d=h.width*h.height,b;J=(b=
J[1])&&b.pixels[0];var a=b&&b.mask,e=h.mask,q=h.pixels[0];if(2===c)if(!e&&a)e=a;else if(e&&a)for(b=0;b<d;b++)e[b]=e[b]&&a[b]?1:0;h.mask=e;if(1===c)if(null==e)for(b=0;b<d;b++)q[b]=f(q[b]);else for(b=0;b<d;b++)e[b]&&(q[b]=f(q[b]));else if(2===c)if(null==e)for(b=0;b<d;b++)q[b]=f(q[b],J[b]);else for(b=0;b<d;b++)e[b]&&(q[b]=f(q[b],J[b]));h.mask=e;h.calculateStatistics();return h}},remapColor:function(J,f){J=this._clonePixelBlock(J);var c=J.width*J.height,h=f.length,d=Math.floor(h/2),b=f[Math.floor(d)],
a=f[0].value,e=f[f.length-1].value,q=J.pixels[0],t,u,g=!1,m=new Uint8Array(c),v=new Uint8Array(c),p=new Uint8Array(c),l=J.mask,n=4===f[0].mappedColor.length;l&&0!==l.length||(l=new Uint8Array(c),l.fill(n?255:1),J.mask=l);for(u=0;u<c;u++)if(l[u]){var k=q[u];if(k<a||k>e)m[u]=v[u]=p[u]=l[u]=0;else{g=!1;var r=d;var w=b;var x=0;for(t=h-1;1<t-x;){if(k===w.value){g=!0;break}k>w.value?x=r:t=r;r=Math.floor((x+t)/2);w=f[Math.floor(r)]}g||(w=k===f[t].value?f[t]:f[x]);m[u]=w.mappedColor[0];v[u]=w.mappedColor[1];
p[u]=w.mappedColor[2];l[u]=w.mappedColor[3]}}J.pixels=[m,v,p];J.mask=l;J.pixelType="u8";J.maskIsAlpha=n;return J},_clonePixelBlock:function(J){if(J.clone)return J.clone();var f=S.clone(J),c;if(J.pixels&&J.pixels[0]&&0<J.pixels[0].length&&!(f.pixels&&f.pixels[0]&&0<f.pixels[0].length)){f.pixels=[];var h=J.pixels.length;for(c=0;c<h;c++)f.pixels[c]=new J.pixels[c].constructor(J.pixels[c])}if(J.statistics)for(f.statistics=[],h=J.statistics.length,c=0;c<h;c++)f.statistics[c]=S.clone(J.statistics[c]);J.mask&&
(f.mask=new Uint8Array(J.mask));return f},_createContrastBrightnessLUT:function(J,f){if(this._contrastCache&&this._contrastCache.contrastOffset===J&&this._contrastCache.brightnessOffset===f)return this._contrastCache.lut;var c=Math.min(Math.max(J,-100),100),h=Math.min(Math.max(f,-100),100),d,b=new Uint8Array(256);for(d=0;256>d;d++){if(0<c&&100>c)var a=(200*d-25500+510*h)/(2*(100-c))+128;else 0>=c&&-100<c?a=(200*d-25500+510*h)*(100+c)/2E4+128:100===c?(a=200*d-25500+256*(100-c)+510*h,a=0<a?255:0):-100===
c&&(a=128);b[d]=255<a?255:0>a?0:a}this._contrastCache={contrastOffset:J,brightnessOffset:f,lut:b};return b}}})},"esri/layers/rasterLib/function/CompositeBandFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin".split(" "),function(S,J,f,c,h,d){return S([f,d],{declaredClass:"esri.layers.rasterLib.function.CompositeBandFunction",functionName:"CompositeBand",supportWebGL:!0,support2D:!0,constructor:function(b){this.functionArguments=
this.mixinIgnoreCase({rasters:null},b)},bind:function(b){b=this.getSourceRasterInfo(b);if(!b.rasters)return Error("The rasters input to composite band function is invalid.");var a=[],e=[],q=b.rasters.length,t;if(b.rasters[0].statistics)for(t=0;t<q;t++)a.push(b.rasters[t].statistics[0]);if(b.rasters[0].histograms)for(t=0;t<q;t++)e.push(b.rasters[t].histograms[0]);this.rasterInfo=J.mixin(b.rasters[0],{bandCount:q,pixelType:this._calculatePixelType(this.pixelType,b.rasters[0].pixelType),statistics:a,
histograms:e});return!0},read2D:function(b){b=b.rasters;if(null!=b&&0!==b.length){var a=this._clonePixelData(b[0]),e=a.pixelBlock,q=[],t=[];for(u=0;u<b.length;u++)q.push(b[u].pixelBlock.pixels[0]),t.push(b[u].pixelBlock.statistics[0]);e.pixels=q;e.stackedStatistics=t;e.planes=b.length;var u;t=e.width*e.height;for(u=0;u<b.length;u++)if(e=b[u].pixelBlock.mask,g&&e)for(q=0;q<t;q++)g[q]&=e[q];else var g=g||e;a.maks=g;return a}},readGL:function(b){this._performance.start();this._initializeProgram({fragment:h.compositeBand,
fragmentName:"CompositeBand"});var a=b.rasters;if(null!=a&&0!==a.length){a=a.length;var e,q=this.bindFrameBuffer();for(e=0;e<a;e++){var t=this._setupTextureData(b.rasters[e],{notOriginal:0<e});var u=0<e?e.toString():"";this._bindTexture(t.texture,"u_image"+u)}this._setUniforms({u_rasterCount:a});this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:t.extent,texture:q.texture}}}})})},"esri/layers/rasterLib/function/ContrastBrightnessFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./rasterUtils".split(" "),
function(S,J,f,c,h,d,b){return S([f,d],{declaredClass:"esri.layers.rasterLib.function.ContrastBrightnessFunction",renderTexture:!0,functionName:"ContrastBrightness",supportWebGL:!0,support2D:!0,pixelType:"U8",constructor:function(a){this.functionArguments=this.mixinIgnoreCase({contrastOffset:0,brightnessOffset:0,raster:null},a)},bind:function(a){a=this.getSourceRasterInfo(a);if(!a.raster)return Error("The raster input to contrast and brightness function is invalid.");this.rasterInfo=J.mixin(a.raster,
{bandCount:a.raster.bandCount,pixelType:this._calculatePixelType(this.pixelType,"U8"),statistics:null,histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Processed";return!0},read2D:function(a){a=a.raster;if(null!==a&&null!==a.pixelBlock&&null!==a.pixelBlock.pixels){var e=b.contrastBrightnessStretch(a.pixelBlock,{contrastOffset:this.functionArguments.contrastOffset,brightnessOffset:this.functionArguments.brightnessOffset});"Unknown"!==
this.pixelType&&(e.pixelType=this.pixelType,e.pixels=e.pixels.map(J.hitch(this,function(q){return this._clampBand(q,e.pixelType)})));return{extent:a.extent,pixelBlock:e}}},readGL:function(a){return this._cbGL(a.raster)},_cbGL:function(a){this._performance.start();this._initializeProgram({fragment:h.contrastBrightness,fragmentName:"ContrastBrightness"});a=this._setupTextureData(a);this._setUniforms({u_contrastOffset:Math.min(Math.max(this.functionArguments.contrastOffset,-100),100),u_brightnessOffset:Math.min(Math.max(this.functionArguments.brightnessOffset,
-100),100),u_scaleFactor:this.renderTexture?255:1});this._bindTexture(a.texture,"u_image");var e=this.bindFrameBuffer();this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:a.extent,texture:e.texture}}})})},"esri/layers/rasterLib/function/ConvolutionFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./convolutionKernel ./pixelShaders ./RasterFunctionWebGLMixin ./rasterUtils".split(" "),function(S,J,f,c,h,d,b,a){return S([f,
b],{declaredClass:"esri.layers.rasterLib.function.ConvolutionFunction",functionName:"Convolution",supportWebGL:!0,support2D:!0,constructor:function(e){this.functionArguments=this.mixinIgnoreCase({columns:3,rows:3,type:0,kernel:null,raster:null},e)},bind:function(e){e=this.getSourceRasterInfo(e);if(!e.raster)return Error("The raster input to convolution function is invalid.");this.rasterInfo=J.mixin(e.raster,{bandCount:e.raster.bandCount,pixelType:this._calculatePixelType(this.pixelType,e.raster.pixelType),
statistics:e.raster.statistics,histograms:e.raster.histograms});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Generic";return!0},read2D:function(e){this._performance.start();e=e.raster;var q=this._analyzeKernel(),t=a.convolute(e.pixelBlock,{normalizedKernel:q.normalizedKernel,kernelCols:this.functionArguments.columns,kernelRows:this.functionArguments.rows});this._addPerformanceMetric(this._performance.elapsed());"Unknown"!==this.pixelType&&
(t.pixelType=this.pixelType);t.pixels=t.pixels.map(J.hitch(this,function(u){return this._clampBand(u,t.pixelType)}));return{extent:e.extent,pixelBlock:t}},readGL:function(e){this._performance.start();this._initializeProgram({fragment:d.convolution,fragmentName:"Convolution"});var q=this._setupTextureData(e.raster),t=this.bindFrameBuffer(),u=this.gl,g=u.drawingBufferWidth;u=u.drawingBufferHeight;var m=this.functionArguments.kernel;this._setUniforms({u_resolution:e&&e.raster&&e.raster.pixelBlock?[1/
e.raster.pixelBlock.width,1/e.raster.pixelBlock.height]:[1/g,1/u],u_kernel:m,u_kernelSize:m.length});this._bindTexture(q.texture,"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:q.extent,texture:t.texture}},_analyzeKernel:function(){var e=this.functionArguments.kernel,q=e.reduce(function(g,m){return g+m});0!==q&&1!==q&&(e=e.map(function(g){return g/q}));var t,u=[];for(t=0;t<e.length;t++)u.some(function(g){return g===e[t]})||u.push(e[t]);return{normalizedKernel:e,
distinctValues:u}},_analyzeKernelPattern:function(){var e=this.functionArguments.rows,q=this.functionArguments.columns,t=this.functionArguments.kernel,u=[],g,m;for(g=0;g<e;g++)u.push({weights:t.slice(g*q,(g+1)*q)});var v;for(g=1;g<e;g++){var p=u[g].weights;for(t=0;t<g;t++)if(v=u[t].weights){var l=p[0]/v[0];for(m=1;m<q;m++)p[m]/v[m]!==l&&(l=null);null!==l&&(u[g]={row:t,factor:l})}}return u}})})},"esri/layers/rasterLib/function/ExtractBandFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin".split(" "),
function(S,J,f,c,h,d){return S([f,d],{declaredClass:"esri.layers.rasterLib.function.ExtractBandFunction",functionName:"ExtractBand",supportWebGL:!0,support2D:!0,constructor:function(b){this.functionArguments=this.mixinIgnoreCase({bandIDs:[],missingBandAction:0,raster:null},b)},bind:function(b){b=this.getSourceRasterInfo(b);if(!b.raster)return Error("The raster input to extract band function is invalid.");var a=[],e=b.raster.statistics,q=[],t=b.raster.histograms,u=this.functionArguments.bandIDs.length||
b.raster.bandCount;this.functionArguments.bandIDs.forEach(J.hitch(this,function(g){if(g>=u-1){if(1===this.functionArguments.missingBandAction)return Error("missing band "+g);g=u-1}if(0>g)return Error("missing band "+g);void 0!==e&&null!==e&&0<e.length&&a.push(e[g]);void 0!==t&&null!==t&&0<t.length&&q.push(t[g])}));this.rasterInfo=J.mixin(b.raster,{bandCount:u,pixelType:this._calculatePixelType(this.pixelType,b.raster.pixelType),statistics:a,histograms:q});return!0},read2D:function(b){b=this._clonePixelData(b.raster);
if(null!==b&&null!==b.pixelBlock&&null!==b.pixelBlock.pixels){this._performance.start();var a=b.pixelBlock,e=a.statistics,q=a.pixels,t=q.length;if(null==this.functionArguments.bandIDs)throw"missing bandIDs parameter";if(0===this.functionArguments.bandIDs.length)return b;var u=[],g=[];this.functionArguments.bandIDs.forEach(function(m){if(m>=t-1){if(1===this.functionArguments.missingBandAction)throw"missing band "+m;m=t-1}if(0>m)throw"missing band "+m;u.push(q[m]);void 0!==e&&null!==e&&0<e.length&&
g.push(e[m])});a.pixels=u;a.statistics=g;a.planes=this.functionArguments.bandIDs.length;return b}},readGL:function(b){this._performance.start();if(null==this.functionArguments.bandIDs)throw"missing bandIDs parameter";if(3<this.functionArguments.bandIDs.length)throw"this version does not support more than 3 bands yet";this._initializeProgram({fragment:h.extractBand,fragmentName:"ExtractBand"});var a=this.functionArguments.bandIDs;1===a.length&&(a=[a[0],a[0],a[0]]);this._bandIDs=a;this._alterBand=!(0===
this.functionArguments.bandIDs.length||0===a[0]&&1===a[1]&&2===a[2]);var e=!!(this._alterBand&&b.raster&&b.raster.texture);b=this._setupTextureData(b.raster,{bandIDs:a});var q=this.bindFrameBuffer();e?this._setUniforms({u_bandIDs:a,u_alterBand:this._alterBand}):this._setUniforms({u_bandIDs:a,u_alterBand:!1});this._bindTexture(b.texture,"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:b.extent,texture:q.texture}}})})},"esri/layers/rasterLib/function/HillshadeFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../../renderers/colorRampGenerator ../../../WKIDUnitConversion ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./surfaceUtils ./rasterUtils".split(" "),
function(S,J,f,c,h,d,b,a,e,q){return S([f,a],{declaredClass:"esri.layers.rasterLib.function.HillshadeFunction",functionName:"Hillshade",supportWebGL:!0,support2D:!0,renderTexture:!0,constructor:function(t){this.functionArguments=this.mixinIgnoreCase({hillshadeType:0,altitude:45,azimuth:315,zFactor:1,slopeType:1,psPower:.664,psFactor:.024,colorRamp:null,raster:null},t);this._azimuths=[315,270,225,360,180,0];this._altitudes=[60,60,60,60,60,90];this._weights=[3,5,3,2,1,4];var u=this._weights.reduce(function(g,
m){return g+m});this._weights=this._weights.map(function(g){return g/u})},bind:function(t){t=this.getSourceRasterInfo(t);if(!t.raster)return Error("The raster input to hillshade function is invalid.");t.raster.statistics&&(this.srcStatistics=t.raster.statistics);this.rasterInfo=J.mixin(t.raster,{bandCount:1,pixelType:this._calculatePixelType(this.pixelType,"U8"),statistics:[{min:0,max:255}],histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType=
"Generic";this._initializeColormap();return!0},read2D:function(t){this._performance.start();t=t.raster;t=e.hillshade(t,{altitude:this.functionArguments.altitude,azimuth:this.functionArguments.azimuth,zFactor:this.functionArguments.zFactor,psPower:this.functionArguments.psPower,psFactor:this.functionArguments.psFactor,hillshadeType:this.functionArguments.hillshadeType,slopeType:this.functionArguments.slopeType,isGCS:t.extent.spatialReference.wkid&&null==h[t.extent.spatialReference.wkid]});this._addPerformanceMetric(this._performance.elapsed());
return t},readGL:function(t){this._performance.start();this._initializeProgram({fragment:b.hillshade,fragmentName:"Hillshade"});this.functionArguments.colorRamp&&this._indexedColormap&&!this._clrTexture&&(this._clrTexture=this._setupColormapTexture(this._indexedColormap));var u=this._setupTextureData(t.raster),g=this.bindFrameBuffer(),m=this.gl,v=m.drawingBufferWidth;m=m.drawingBufferHeight;var p=u.extent,l=(p.xmax-p.xmin)/v,n=(p.ymax-p.ymin)/m,k=this.functionArguments.altitude,r=this.functionArguments.azimuth,
w=this.functionArguments.zFactor;1===this.functionArguments.hillshadeType&&(w*=2);var x=w/(8*l),D=w/(8*n);.001<w&&p.spatialReference.wkid&&null==h[p.spatialReference.wkid]&&(x/=111E3,D/=111E3);var G=this.functionArguments.psPower,F=this.functionArguments.psFactor;3===this.functionArguments.slopeType&&((x=p.spatialReference.wkid&&null==h[p.spatialReference.wkid])?(x=111E3*l,D=111E3*n,x=(w+Math.pow(x,G)*F)/(8*x),D=(w+Math.pow(D,G)*F)/(8*D)):(x=(w+Math.pow(l,G)*F)/(8*l),D=(w+Math.pow(n,G)*F)/(8*n)));
var A=(90-k)*Math.PI/180;k=Math.cos(A);var y=(360-r+90)*Math.PI/180;r=Math.sin(A)*Math.cos(y);A=Math.sin(A)*Math.sin(y);G=Array(6);F=Array(6);p=Array(6);var z=this._weights,B;if(1===this.functionArguments.hillshadeType){var C=this._azimuths.length;for(B=0;B<C;B++)k=this._altitudes[B],r=this._azimuths[B],A=(90-k)*Math.PI/180,k=Math.cos(A),y=(360-r+90)*Math.PI/180,r=Math.sin(A)*Math.cos(y),A=Math.sin(A)*Math.sin(y),G[B]=k,F[B]=r,p[B]=A}else G[0]=k,F[0]=r,p[0]=A;G=G.map(function(H){return parseFloat(H)});
F=F.map(function(H){return parseFloat(H)});p=p.map(function(H){return parseFloat(H)});this._setUniforms({u_cellSize:[l,n],u_zfactor:w,u_xFactor:x,u_yFactor:D,u_sinZcosA:r,u_sinZsinA:A,u_cosZ:k,u_sinZcosAs:F,u_sinZsinAs:p,u_cosZs:G,u_weights:z,u_hillshadeType:this.functionArguments.hillshadeType,u_resolution:t&&t.raster&&t.raster.pixelBlock?[1/t.raster.pixelBlock.width,1/t.raster.pixelBlock.height]:[1/v,1/m],u_scaled:!this.renderTexture,u_applyColorramp:this._clrTexture?!0:!1,u_minValue:this.srcStatistics[0].min,
u_maxValue:this.srcStatistics[0].max,u_indexedColormapOffset:this._indexedColormapOffset||0,u_indexedColormapMaxIndex:this._indexedColormap?this._indexedColormap.length/4-1:0});this._clrTexture&&this._bindTexture(this._clrTexture,"u_image1");this._bindTexture(u.texture,"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:u.extent,texture:g.texture}},_initializeColormap:function(){this._indexedColormapOffset=0;var t=this._indexedColormap,u=this.functionArguments.colorRamp;
this.functionArguments.colormap?(this._alphaSpecified=(u=q.buildIndexedColormap(this.functionArguments.colormap))&&u.alphaSpecified,this._indexedColormap=u&&u.indexedColormap,this._indexedColormapOffset=u&&u.offset):u?(this._indexedColormap="multipart"===u.type?this.invert?c.createMultiPartColorRamp(this._invertColorRamp(u)):c.createMultiPartColorRamp(u):this.invert?c.createAlgorithmicColorRamp(this._invertColorRamp(u)):c.createAlgorithmicColorRamp(u),u.fromColor&&u.toColor&&"000"===u.fromColor.slice(0,
3).join("")&&"255255255"===u.toColor.slice(0,3).join("")&&(this._clrTexture=this._indexedColormap=null)):this.functionArguments.colormapName?"random"===this.functionArguments.colormapName.toLowerCase()&&(this._indexedColormap=c.createRandomColorRamp()):this._clrTexture=this._indexedColormap=null;if(t&&this._indexedColormap){u=!0;for(var g=0;g<t.length;g++)if(t[g]!==this._indexedColormap[g]){u=!1;break}u||(this._clrTexture=null)}},_setupColormapTexture:function(t){var u=this._createTexture(),g=this.gl,
m=t.length/4,v=new Float32Array(t.length),p;for(p=0;p<t.length;p++)v[p]=t[p]/255;g.getExtension("OES_texture_float");g.texImage2D(g.TEXTURE_2D,0,g.RGBA,m,1,0,g.RGBA,g.FLOAT,v);return u}})})},"esri/layers/rasterLib/function/LocalFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./rasterUtils".split(" "),function(S,J,f,c,h,d,b){return S([f,d],{declaredClass:"esri.layers.rasterLib.function.LocalFunction",functionName:"Local",
supportWebGL:!0,support2D:!0,constructor:function(a){this.functionArguments=this.mixinIgnoreCase({operation:null,rasters:null},a)},bind:function(a){a=this.getSourceRasterInfo(a);var e=0;a.raster?e=a.raster.bandCount:a.rasters&&(e=Math.max.apply(null,a.rasters.map(function(q){return q.bandCount})));if(0===e)return Error("The raster input to local function is invalid. It only takes single band input.");a=a.raster||a.rasters.filter(function(q){return!!q.extent})[0];this.rasterInfo=J.mixin(a,{bandCount:1,
pixelType:this._calculatePixelType(this.pixelType,"F32"),statistics:null,histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Generic";return!0},read2D:function(a){var e=[];e=a.raster?a.raster2?[a.raster,a.raster2]:[a.raster]:a.rasters;a=e.map(function(m){return m.pixelBlock});var q=this.functionArguments.operation;if(null===q)return e[0];this._performance.start();var t=this._getOperations(),u=t.operators[q-1];t=t.functors[q-1];
if(!this.functionArguments.rasters){if(1!==u)throw"no sufficient rasters, require "+u;}else if(999!==u&&this.functionArguments.rasters.length!==u)throw"number of rasters does not meet (short or exceed) the operation requirment, require "+u;var g=31===q?b.isNull(a[0]):50===q?b.setNull(a[0]):b.local(a,{rasterCountNeeded:u,functor:t});"Unknown"!==this.pixelType&&(g.pixelType=this.pixelType,g.pixels=g.pixels.map(J.hitch(this,function(m){return this._clampBand(m,g.pixelType)})));g.statistics||g.calculateStatistics();
return{extent:e[0].extent,pixelBlock:g}},readGL:function(a){this._performance.start();var e=this.functionArguments.operation,q=this._getWebGLOperations(),t=q.operators[e-1],u=h.local;q="result\x3d"+q.functors[e-1]+";";31!==e&&50!==e&&(q+="result \x3d vec4(result.rgb, a.a);");u=u.replace("vec4 replaceme"+t+";",q);q=this.gl.getParameter(this.gl.VERSION);var g="";if(-1<q.toLowerCase().indexOf("webgl 1.0")||-1<q.toLowerCase().indexOf("webgl 0."))g=this._getPolyfill(e);u=u.replace("vec4 polyfill;",g);
1<t&&(u=u.replace("gl_FragColor \x3d localOp1();","gl_FragColor \x3d localOp1();".replace("1",t.toString())));this._initializeProgram({fragment:u,fragmentName:"Local"});e=a.rasters;if(null!=e&&0!==e.length){e=e.length;q=this.bindFrameBuffer();for(t=0;t<e;t++){u=0<t?t.toString():"";var m=this._setupTextureData(a.rasters[t],{reCreate:!0});this._bindTexture(m.texture,"u_image"+u)}this._setUniforms({});this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:m.extent,texture:q.texture}}},
_getOperations:function(){return{operators:[2,2,2,1,2,1,1,1,1,1,2,2,1,2,2,2,2,1,2,2,1,1,2,2,1,1,1,2,2,1,1,1,2,2,1,1,1,999,999,999,999,999,999,2,1,2,999,1,1,1,1,1,1,999,999,1,1,999,1,1,2,2,2,999,999,999,999,999,999,999,999,999,999,3],functors:[function(a,e){return a+e},function(a,e){return a-e},function(a,e){return a*e},function(a){return Math.sqrt(a)},function(a,e){return Math.pow(a,e)},function(a){return Math.acos(a)},function(a){return Math.asin(a)},function(a){return Math.atan(a)},function(a){return Math.atanh(a)},
function(a){return Math.abs(a)},function(a,e){return a&e},function(a,e){return a<<e},function(a){return~a},function(a,e){return a|e},function(a,e){return a>>e},function(a,e){return a^e},function(a,e){return a&&e},function(a){return!a},function(a,e){return a||e},function(a,e){return a!=e},function(a){return Math.cos(a)},function(a,e){return Math.cosh(a)},function(a,e){return a/e},function(a,e){return a==e},function(a){return Math.exp(a)},function(a){return Math.pow(10,a)},function(a){return Math.pow(2,
a)},function(a,e){return a>e?1:0},function(a,e){return a>=e?1:0},function(a,e){return Math.floor(a)},function(a){return!a},function(a){return a},function(a,e){return a<e?1:0},function(a,e){return a<=e?1:0},function(a){return Math.log(a)},function(a,e){return Math.log10(a)},function(a,e){return Math.log2(a)},999,999,999,999,999,999,function(a,e){return a%e},function(a){return-a},function(a,e){return a!=e?1:0},999,function(a,e){return Math.floor(a)},function(a,e){return Math.ceil(a)},function(a,e){return e?
0:a},function(a,e){return Math.sin(a)},function(a,e){return Math.sinh(a)},function(a,e){return a*a},999,999,function(a){return Math.tan(a)},function(a){return Math.tanh(a)},999,function(a){return Math.acosh(a)},function(a){return Math.asinh(a)},function(a,e){return Math.atan2(a,e)},function(a,e){return a/e},function(a,e){return Math.floor(a/e)},999,999,999,999,999,999,999,999,999,999,function(a,e,q){return a?e:q}]}},_polyfill:{sinh:"vec4 sinh(vec4 x) {\nvec4 halfexp \x3d exp(x)/2.0;\nreturn halfexp - 1.0/halfexp;\n}",
asinh:"vec4 asinh(vec4 x) {\nvec4 halfexp \x3d exp(x)/2.0;\nreturn 1.0/(halfexp - 1.0/halfexp);\n}",cosh:"vec4 cosh(vec4 x) {\nvec4 halfexp \x3d exp(x)/2.0;\nreturn halfexp + 1.0/halfexp;\n}",acosh:"vec4 acosh(vec4 x) {\nvec4 halfexp \x3d exp(x)/2.0;\nreturn 1.0/(halfexp + 1.0/halfexp);\n}",tanh:"vec4 tanh(vec4 x) {\nvec4 expx \x3d exp(x);\nreturn (expx - 1.0/expx)/(expx + 1.0/expx);\n}",atanh:"vec4 atanh(vec4 x) {\nvec4 expx \x3d exp(x);\nreturn (expx + 1.0/expx)/(expx - 1.0/expx);\n}"},_getPolyfill:function(a){var e=
"";switch(a){case 9:e=this._polyfill.atanh;break;case 22:e=this._polyfill.cosh;break;case 52:e=this._polyfill.sinh;break;case 57:e=this._polyfill.tanh;break;case 59:e=this._polyfill.acosh;break;case 60:e=this._polyfill.asinh}return e},_getWebGLOperations:function(){return{operators:[2,2,2,1,2,1,1,1,1,1,2,2,1,2,2,2,2,1,2,2,1,1,2,2,1,1,1,2,2,1,1,1,2,2,1,1,1,999,999,999,999,999,999,2,1,2,999,1,1,1,1,1,1,999,999,1,1,999,1,1,2,2,2,999,999,999,999,999,999,999,999,999,999,3],functors:["(a + b)","(a - b)",
"(a * b)","sqrt(a)","pow(a, b)","acos(a)","asin(a)","atan(a)","atanh(a)","abs(a)","a","a","a","a","a","a","(a.r\x3d\x3d0.0 || b.r\x3d\x3d0.0) ? vec4(0.0,0.0,0.0,a.a) : vec4(1.0,1.0,1.0,a.a)","a.r\x3d\x3d0.0?vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)","(a.r\x3d\x3d0.0 \x26\x26 b.r\x3d\x3d0.0) ? vec4(0.0,0.0,0.0,a.a) : vec4(1.0,1.0,1.0,a.a)","(a.r\x3d\x3d0.0 ^^ b.r\x3d\x3d0.0) ? vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)","cos(a)","cosh(a)","a / b","a.r \x3d\x3d b.r? vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)",
"exp(a)","pow(10.0, a)","pow(2.0, a)","a.r \x3e b.r ? vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)","a.r \x3e\x3d b.r ? vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)","floor(a)","a.a \x3d\x3d 0.0? vec4(1.0,1.0,1.0,1.0) : vec4(0.0,0.0,0.0,1.0)","a","a.r \x3c b.r ? vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)","a.r \x3c\x3d b.r ? vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)","log(a)","log2(a) / log2(10.0)","log2(a)",999,999,999,999,999,999,"mod(a, b)","-a","a.r !\x3d b.r ? vec4(1.0,1.0,1.0,a.a) : vec4(0.0,0.0,0.0,a.a)",
999,"floor(a)","ceil(a)","a.r !\x3d 0.0 ? vec4(0.0,0.0,0.0,0.0) : a","sin(a)","sinh(a)","a * a",999,999,"tan(a)","tanh(a)",999,"acosh(a)","asinh(a)","atan(a, b)","a / b","floor(a / b)",999,999,999,999,999,999,999,999,999,999,"a.r!\x3d0 ? b : c"]}}})})},"esri/layers/rasterLib/function/MaskFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./rasterUtils".split(" "),function(S,J,f,c,h,d,b){return S([f,d],{declaredClass:"esri.layers.rasterLib.function.MaskFunction",
functionName:"Mask",supportWebGL:!0,support2D:!0,constructor:function(a){this.functionArguments=this.mixinIgnoreCase({includedRanges:null,noDataInterpretation:0,noDataValues:null,raster:null},a)},bind:function(a){a=this.getSourceRasterInfo(a);if(!a.raster)return Error("The raster input to mask function is invalid.");this.rasterInfo=J.mixin(a.raster,{bandCount:a.raster.bandCount,pixelType:this._calculatePixelType(this.pixelType,a.raster.pixelType),statistics:a.raster.statistics,histograms:a.raster.histograms});
return!0},read2D:function(a){this._performance.start();a=a.raster;var e=b.mask(a.pixelBlock,{includedRanges:this.functionArguments.includedRanges,noDataInterpretation:this.functionArguments.noDataInterpretation,noDataValues:this.functionArguments.noDataValues});this._addPerformanceMetric(this._performance.elapsed());"Unknown"!==this.pixelType&&(e.pixelType=this.pixelType);return{extent:a.extent,pixelBlock:e}},readGL:function(a){this._performance.start();this._initializeProgram({fragment:h.mask,fragmentName:"Mask"});
a=this._setupTextureData(a.raster);var e=this.bindFrameBuffer(),q=this.functionArguments.includedRanges,t=this.functionArguments.noDataValues?this.functionArguments.noDataValues.map(function(u){return parseFloat(u,10)}):null;this._setUniforms({u_includedRanges:q,u_includedRanges_specified:q?!0:!1,u_noDataValues:t,u_noDataValues_specified:t?!0:!1,u_noDataInterpretation:this.functionArguments.noDataInterpretation,u_bandCount:Math.min(this.sourceRasterInfo.raster.bandCount,3)});this._bindTexture(a.texture,
"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:a.extent,texture:e.texture}}})})},"esri/layers/rasterLib/function/NDVIFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./rasterIndex".split(" "),function(S,J,f,c,h,d,b){return S([f,d],{declaredClass:"esri.layers.rasterLib.function.NDVIFunction",functionName:"NDVI",supportWebGL:!0,support2D:!0,constructor:function(a){this.functionArguments=
this.mixinIgnoreCase({visibleBandID:1,infraredBandID:2,scaled:!0,raster:null},a)},bind:function(a){a=this.getSourceRasterInfo(a);if(!(a.raster&&1<a.raster.bandCount))return Error("The raster input to ndvi function is invalid. It requires more than 1 band.");this.rasterInfo=J.mixin(a.raster,{bandCount:1,pixelType:this._calculatePixelType(this.pixelType,this.scaled?"U8":"F32"),statistics:this.scaled?[{min:0,max:200}]:[{min:-1,max:1}],histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||
{};this.rasterInfo.keyProperties.DataType="Generic";return!0},read2D:function(a){this._performance.start();a=a.raster;var e=b.calculate(a.pixelBlock,{bandIndexes:[this.functionArguments.infraredBandID+1,this.functionArguments.visibleBandID+1].join(" "),method:1}),q;if(this.functionArguments.scaled){var t=e.pixels[0];var u=e.mask;var g=t.length;var m=new Uint8Array(g);if(null==u)for(q=0;q<g;q++)m[q]=100*t[q]+100&255;else for(q=0;q<g;q++)u[q]&&(m[q]=100*t[q]+100&255);e.pixels[0]=m;e.pixelType="U8"}this._addPerformanceMetric(this._performance.elapsed());
"Unknown"!==this.pixelType&&(e.pixelType=this.pixelType);return{extent:a.extent,pixelBlock:e}},readGL:function(a){this._performance.start();this._initializeProgram({fragment:h.ndvi,fragmentName:"NDVI"});var e=this.functionArguments.visibleBandID,q=this.functionArguments.infraredBandID,t=this.functionArguments.scaled||!1;this._alterBand=2<Math.max(q,e)?!0:!1;a=this._setupTextureData(a.raster,{bandIDs:this._alterBand?{bandIDs:[q,e,q]}:null});var u=this.bindFrameBuffer();this._alterBand?this._setUniforms({u_bandId_nir:0,
u_bandId_red:1,u_scaled:t}):this._setUniforms({u_bandId_nir:q,u_bandId_red:e,u_scaled:t});this._bindTexture(a.texture,"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:a.extent,texture:u.texture}}})})},"esri/layers/rasterLib/function/SlopeFunction":function(){define("dojo/_base/declare dojo/_base/lang ./RasterFunctionX ../../../WKIDUnitConversion ../../PixelBlock ./pixelShaders ./RasterFunctionWebGLMixin ./surfaceUtils".split(" "),function(S,J,f,c,h,d,
b,a){return S([f,b],{declaredClass:"esri.layers.rasterLib.function.SlopeFunction",functionName:"Slope",supportWebGL:!0,support2D:!0,constructor:function(e){this.functionArguments=this.mixinIgnoreCase({zFactor:1,slopeType:1,psPower:.664,psFactor:.024,raster:null},e)},bind:function(e){e=this.getSourceRasterInfo(e);if(!e.raster)return Error("The raster input to slope function is invalid.");this.rasterInfo=J.mixin(e.raster,{bandCount:1,pixelType:this._calculatePixelType(this.outputPixelType,"F32"),statistics:1===
this.slopeType||3===this.slopeType?[{min:0,max:90}]:null,histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType="Generic";return!0},read2D:function(e){this._performance.start();e=e.raster;e=a.slope(e,{zFactor:this.functionArguments.zFactor,psPower:this.functionArguments.psPower,psFactor:this.functionArguments.psFactor,slopeType:this.functionArguments.slopeType,isGCS:e.extent.spatialReference.wkid&&null==c[e.extent.spatialReference.wkid]});
this._addPerformanceMetric(this._performance.elapsed());return e},readGL:function(e){this._performance.start();this._initializeProgram({fragment:d.slope,fragmentName:"Slope"});var q=this._setupTextureData(e.raster),t=this.bindFrameBuffer(),u=this.gl,g=u.drawingBufferWidth;u=u.drawingBufferHeight;var m=q.extent;this._setUniforms({u_resolution:e&&e.raster&&e.raster.pixelBlock?[1/e.raster.pixelBlock.width,1/e.raster.pixelBlock.height]:[1/g,1/u],u_cellSize:[(m.xmax-m.xmin)/g,(m.ymax-m.ymin)/u],u_zfactor:this.functionArguments.zFactor});
this._bindTexture(q.texture,"u_image");this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:q.extent,texture:t.texture}}})})},"esri/layers/rasterLib/function/RemapFunction":function(){define("dojo/_base/declare dojo/_base/lang ../../../renderers/colorRampGenerator ./RasterFunctionX ./pixelShaders ./RasterFunctionWebGLMixin ./rasterUtils".split(" "),function(S,J,f,c,h,d,b){return S([c,d],{declaredClass:"esri.layers.rasterLib.function.RemapFunction",functionName:"Remap",
pixelType:"U8",renderTexture:!1,supportWebGL:!0,support2D:!0,constructor:function(a){this.functionArguments=this.mixinIgnoreCase({inputRanges:null,outputValues:null,outputColors:null,colorBreaks:null,raster:null},a)},bind:function(a){a=this.getSourceRasterInfo(a);if(!a.raster)return Error("The raster input is not available.");var e=!(!this.functionArguments.outputColors&&!this.functionArguments.colorBreaks);this.rasterInfo=J.mixin(a.raster,{bandCount:e?3:1,pixelType:this._calculatePixelType(this.pixelType,
"U8"),statistics:null,histograms:null});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};this.rasterInfo.keyProperties.DataType=e?"Processed":"Thematic";return!0},read2D:function(a){return this._remap(a.raster)},readGL:function(a){return this._remapGL(a.raster)},_remap:function(a){this._performance.start();var e=b.remapColor(a.pixelBlock,this.functionArguments.colorBreaks);this._addPerformanceMetric(this._performance.elapsed());return{extent:a.extent,pixelBlock:e}},_remapGL:function(a){this._performance.start();
this._initializeProgram({fragment:h.remap,fragmentName:"Remap"});var e=new Uint8Array(64),q=this.functionArguments.colorBreaks;q.forEach(function(m,v){e[4*v]=m.mappedColor[0];e[4*v+1]=m.mappedColor[1];e[4*v+2]=m.mappedColor[2];e[4*v+3]=1>=m.mappedColor[3]?255*m.mappedColor[3]:m.mappedColor[3]});var t=q[q.length-1],u=t.mappedColor;e[60]=u[0];e[61]=u[1];e[62]=u[2];e[63]=1>=u[3]?255*u[3]:u[3];var g=new Float32Array(16);q.forEach(function(m,v){g[v]=m.value});g[15]=t.value;this._clrTexture||(this._clrTexture=
this._setupColormapTexture(e));q=this._clrTexture;t=this.bindFrameBuffer();a=this._setupTextureData(a);this._setUniforms({u_indexedColormapOffset:0,u_indexedColormapMaxIndex:e.length/4-1,u_breaks:g});this._bindTexture(q,"u_image1");this._bindTexture(a.texture,"u_image");this._drawGL();return{extent:a.extent,texture:t.texture}},_setupColormapTexture:function(a){var e=this._createTexture(),q=a.length/4,t=new Float32Array(a.length),u=this.renderTexture?255:1,g,m=this.gl;for(g=0;g<a.length;g++)t[g]=a[g]/
u;m.getExtension("OES_texture_float");m.texImage2D(m.TEXTURE_2D,0,m.RGBA,q,1,0,m.RGBA,m.FLOAT,t);return e}})})},"esri/layers/rasterLib/function/IdentityFunction":function(){define(["dojo/_base/declare","dojo/_base/lang","./pixelShaders","./RasterFunctionX","./RasterFunctionWebGLMixin"],function(S,J,f,c,h){return S([c,h],{declaredClass:"esri.layers.rasterLib.function.IdentityFunction",functionName:"Identity",supportWebGL:!0,support2D:!0,constructor:function(d){this.functionArguments={raster:null}},
bind:function(d){d=this.getSourceRasterInfo(d);if(!d.raster)return Error("The raster input to identity function is invalid.");this.rasterInfo=J.mixin(d.raster,{});return!0},read2D:function(d){return d.raster},readGL:function(d){this._initializeProgram({fragment:f.identity,fragmentName:"identity"});d=this._setupTextureData(d.raster);var b=this.bindFrameBuffer();this._bindTexture(d.texture,"u_image");this._drawGL();return{extent:d.extent,texture:b.texture}}})})},"esri/layers/rasterLib/function/ResampleFunction":function(){define(["dojo/_base/declare",
"dojo/_base/lang","./pixelShaders","./RasterFunctionX","./RasterFunctionWebGLMixin"],function(S,J,f,c,h){return S([c,h],{declaredClass:"esri.layers.rasterLib.function.ResampleFunction",renderTexture:!0,resamplingOrigin:null,resamplingRatio:null,zFactor:1,functionName:"Resample",supportWebGL:!0,support2D:!1,constructor:function(d){this.functionArguments=this.mixinIgnoreCase({resamplingType:0},d)},bind:function(d){d=this.getSourceRasterInfo(d);if(!d.raster)return Error("The raster input to convolution function is invalid.");
this.rasterInfo=J.mixin(d.raster,{bandCount:d.raster.bandCount,pixelType:this._calculatePixelType(this.pixelType,d.raster.pixelType),statistics:d.raster.statistics,histograms:d.raster.histograms});this.rasterInfo.keyProperties=this.rasterInfo.keyProperties||{};return!0},readGL:function(d){this._performance.start();this._initializeProgram({fragment:f.resample,fragmentName:"Resample"});var b=this._setupTextureData(d.raster),a=this.bindFrameBuffer(),e=this.gl,q=e.drawingBufferWidth;e=e.drawingBufferHeight;
var t=d.raster;void 0!==t.pixelBlock?(b=b||this._setupTextureData(t),d=t.pixelBlock.width,t=t.pixelBlock.height):(b=b||t,d=q,t=e);this._setUniforms({u_resamplingRatio:this.resamplingRatio||[d/q,t/e],u_anchor:this.resamplingOrigin||[0,1],u_resamplingType:this.functionArguments.resamplingType,u_resolution:[1/q,1/e]});this._drawGL();this._addPerformanceMetric(this._performance.elapsed());return{extent:b.extent,texture:a.texture}}})})},"esri/layers/rasterLib/renderer/rasterRendererHelper":function(){define("dojo/_base/declare dojo/_base/lang ../../PixelBlock ./RasterColormapRenderer ./RasterUniqueValueRenderer ./RasterRGBRenderer ./RasterStretchColorRampRenderer ./RasterClassBreaksRenderer ./RasterShadedReliefRenderer".split(" "),
function(S,J,f,c,h,d,b,a,e){var q=function(){function t(g){u[g.prototype.rendererName]=g}var u={};t(c);t(d);t(b);t(h);t(a);t(e);return u}();return{wellKnownRenderers:q,isSupported:function(t){if(!t)return!1;var u=!0;q[t.rendererName]||(u=!1);return u},create:function(t){if(!t)return null;if(t.rendererName){var u=t.rendererName;t=t.rendererArguments}else u="uniqueValue rasterStretch rasterShadedRelief rgb rasterColormap classBreaks".split(" ").indexOf(t.type),u="UniqueValue Stretch ShadedRelief RGB Colormap ClassBreaks".split(" ")[u],
"rasterStretch"===t.type&&t.bandIndex&&1<t.bandIndex.length&&(u="RGB");return(u=q[u])?new u(t):null},createDefaultRenderer:function(t){if(t&&t.raster){var u=t.raster.rasterInfo,g=t.raster.dataType;if(u){var m=t.raster.rasterFunction,v=["Stretch","Colormap","ContrastAndBrightness"];if(m&&"U8"===u.pixelType&&-1<v.indexOf(m.functionName))m.renderTexture=!0;else if("Processed"!==g||!(t.useWebGL&&m&&m.renderTexture||!t.useWebGL&&"U8"===u.pixelType)){m&&(u=m.rasterInfo);m=u.bandCount;var p=u.colormap,l=
u.vat;v=u.histograms;v&&0===v.length&&(v=null);var n=u.statistics&&u.statistics.map(function(w){return[w.min,w.max,w.mean,w.stddev]});if(1===m&&p&&0<p.length)var k=this._getDefaultColormapRenderer(l,p);else if(1===m&&l&&l.features&&0<l.features.length)k=new h({});else{p=0;l=!1;g||!t.raster||!t.raster.tileInfo||void 0!==t.raster.tileInfo.tileType&&"Map"!==t.raster.tileInfo.tileType?"U8"===u.pixelType&&"Processed"===g?(p=5,n=n||[[0,255,0,0],[0,255,0,0],[0,255,0,0]],l=!1):"U8"===u.pixelType||"Elevation"===
g?(p=5,l=n?!1:!0):"Scientific"===g||"StdTime"===g?(p=5,l=n?!1:!0,k=this._getDefaultScientificColorRamp()):v&&0<v.length?(p=6,l=!1):n?(p=5,l=!1):(p=6,l=!0):(n=[[0,255,0,0],[0,255,0,0],[0,255,0,0]],p=5,l=!1);n||(p=5,l=!0);t=t.bandIds||t.raster&&t.raster.imageServiceParams&&t.raster.imageServiceParams.bandIds;var r;3<=m&&(r=t&&3===t.length?t.slice():this.getDefaultBandCombination(u));r&&n&&(n=r.map(function(w){return n[w]}));u={stretchType:p,min:0,max:255,dra:l,minPercent:.25,maxPercent:.25,useGamma:!1,
computeGamma:!1,statistics:n,histograms:v,numberOfStandardDeviations:2.5,bandIndex:r};1===m||r&&1===r.length?(k&&(u.colorRamp=k,u.invert=!1),k=new b(u)):k=new d(u)}return k}}}},getDefaultBandCombination:function(t){var u=t.bandCount;if(1===u)return null;if(2===u)return[0];var g=(t=t.keyProperties)&&t.ChangeAnalysisParameters&&t.ChangeAnalysisParameters.AnalysisType;if(g&&("ccdc"===g.toLowerCase()||"landtrendr"===g.toLowerCase()))return[0];t=t&&t.BandProperties;var m;if(t&&t.length===u){var v=this.getWellKnownBandIndexes(t);
t=v.red;g=v.green;var p=v.blue;v=v.nir;null!=t&&null!=g&&null!=p?m=[t,g,p]:null!=v&&null!=t&&null!=g&&(m=[v,t,g])}!m&&3<=u&&(m=[0,1,2]);return m},getWellKnownBandIndexes:function(t){for(var u={},g=0;g<t.length;g++){var m=t[g],v=m.BandName&&m.BandName.toLowerCase();"red"===v?u.red=g:"green"===v?u.green=g:"blue"===v?u.blue=g:"nearinfrared"===v||"nearinfrared_1"===v||"nir"===v?u.nir=g:m.WavelengthMax&&m.WavelengthMin&&(v=m.WavelengthMin,m=m.WavelengthMax,null==u.blue&&410<=v&&480>=v&&480<=m&&540>=m?
u.blue=g:null==u.green&&490<=v&&560>=v&&560<=m&&610>=m?u.green=g:null==u.red&&595<=v&&670>=v&&660<=m&&730>=m?u.red=g:null==u.nir&&700<=v&&860>=v&&800<=m&&950>=m&&(u.nir=g))}return u},_getDefaultColormapRenderer:function(t,u){if(u||u.length){var g=[],m=this._ratContainsColormap(t);if(m)var v=this._getRATValueClassNameMap(t);u.forEach(function(p){var l=v?v[p[0]]:p[0];g.push({color:[p[1],p[2],p[3]],value:p[0],label:m?null!=l?l:"":p[0]})});return new c({colormapInfos:g})}},_ratContainsColormap:function(t){if(!t||
!t.fields)return!1;var u,g,m;return t.fields.some(function(v){v&&v.name&&(v=v.name.toLowerCase(),"red"===v&&(u=!0),"green"===v&&(g=!0),"blue"===v&&(m=!0));return u&&g&&m})},_getRATValueClassNameMap:function(t){if(!t||!t.fields)return null;var u={},g,m;t.fields.forEach(function(v){if("classname"===v.name.toLowerCase()||"class_name"===v.name.toLowerCase())g=v.name;"value"===v.name.toLowerCase()&&(m=v.name)});t.features.forEach(function(v){v=v.attributes;u[v[m]]=g?v[g]:v[m]});return u},_getDefaultScientificColorRamp:function(){return{type:"multipart",
colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}].map(function(t){return{fromColor:t.toColor,toColor:t.fromColor}}).reverse()}}}})},"esri/layers/rasterLib/renderer/RasterColormapRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","./RasterRenderer","../function/ColormapFunction"],function(S,J,f,c){return S([f],{declaredClass:"esri.layers.rasterLib.renderer.RasterColormapRenderer",rendererName:"Colormap",
renderTexture:!0,constructor:function(h){h&&h.colormapInfos&&(h.colormap=h.colormapInfos.map(function(d){return[d.value].concat(d.color)}));this._function=new c(h);this._function.outputPixelType="U8";this._function.renderTexture=!0},draw2D:function(h){this._updateColormapParameters();h=this._clonePixelData(h);return h=this._function._colorize(h)},drawGL:function(h){this._updateColormapParameters();this._function._colorizeGL(h)},toJson:function(){var h=this._function.toJson().rasterFunctionArguments;
return{rendererName:this.rendererName,rendererArguments:h}},toCommonRendererJson:function(){return{type:"rasterColormap",colormapInfos:this.colormapInfos||this.colormap.map(function(h){return{value:h[0],color:h.slice(1),label:h[0]}})}},_updateColormapParameters:function(){var h=this._function.functionArguments;h.colormap=this.colormap;h.colormapName=this.colormapName;h.colorRamp=this.colorRamp;h.colorRampName=this.colorRampName}})})},"esri/layers/rasterLib/renderer/RasterRenderer":function(){define(["dojo/_base/declare",
"dojo/_base/lang","../../../geometry/Extent","../../PixelBlock"],function(S,J,f,c){return S(null,{declaredClass:"esri.layers.rasterLib.renderer.RasterRenderer",raster:null,constructor:function(h){h=h||{};this.raster=h.raster||h.Raster||this.raster;this.draw=J.hitch(this,this.draw);this.bind=J.hitch(this,this.bind);h=J.clone(h);Object.keys(h).forEach(function(d){null==h[d]&&delete h[d]});J.mixin(this,h)},bind:function(h){if(!h)throw"failed to bind without options";var d=h;h.layer&&(h=h.layer,d={id:h.id,
rawRasterInfo:h.raster.rasterInfo,glSetting:h._glSetting,xformSetting:h.tileManager&&h.tileManager.xformSetting,useWebGL:h.useWebGL,resampling:h.tileMode&&h.tileManager&&h.tileManager.xformSetting.requireProjection&&!h._hasTilingEffects&&"Thematic"!==h.raster.dataType?1:0,tileMode:h.tileMode});this._rawRasterInfo=d.rawRasterInfo;this.useWebGL=d.useWebGL;this._function&&this._function.setProcessingContext(J.mixin({useProcessedData:!0},d));this._processingContext=d},hasTilingEffects:function(){},draw:function(h){return this.useWebGL?
this.drawGL(h):this.draw2D(h)},toJson:function(){},_clonePixelData:function(h){if(null==h)return h;var d={};h.extent&&(d.extent=new f(h.extent.xmin,h.extent.ymin,h.extent.xmax,h.extent.ymax,h.extent.spatialReference));h=h.processedPixelBlock||h.pixelBlock;if(null==h)return d;d.pixelBlock=h.clone?h.clone():c.prototype.clone(h);return d}})})},"esri/layers/rasterLib/renderer/RasterUniqueValueRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","./RasterRenderer","../function/ColormapFunction",
"../../../renderers/colorRampGenerator"],function(S,J,f,c,h){return S([f],{declaredClass:"esri.layers.rasterLib.renderer.RasterUniqueValueRenderer",rendererName:"UniqueValue",field:"",alias:"",uniqueValueInfos:null,constructor:function(d){d&&d.colormap&&(this.colormap=d.colormap,this._function=new c(d),this._function.outputPixelType="U8",this._function.renderTexture=!0)},bind:function(d){this.inherited(arguments);if(!this._function){var b=(this.raster&&this.raster.rasterInfo||this._rawRasterInfo).vat;
if(!b)throw"uv renderer requires data source to have raster attribute table";var a=this.attributeField||this.field1||this.field,e=this.infos||this.uniqueValueInfos;this.defaultColor=this.defaultColor||this.defaultSymbol&&this.defaultSymbol.color;var q=b.fields.filter(function(k){return"value"===k.name.toLowerCase()})[0];if(q)var t=q.name;a||((a=b.fields.filter(function(k){return-1<["classname","category"].indexOf(k.name.toLowerCase())})[0])||(a=b.fields.filter(function(k){return"esriFieldTypeString"===
k.type})[0]),this.alias=(this.field=a=a&&a.name||t)&&a.alias||t);var u=[],g;if(!e){e=[];var m=b.fields.filter(function(k){return"alpha"===k.name.toLowerCase()})[0];var v=b.fields.filter(function(k){return"red"===k.name.toLowerCase()})[0];var p=b.fields.filter(function(k){return"green"===k.name.toLowerCase()})[0];var l=b.fields.filter(function(k){return"blue"===k.name.toLowerCase()})[0];for(q=0;q<b.features.length;q++){var n=b.features[q].attributes;(g=e.some(function(k){k.value===n[a]}))||(m&&v&&
p&&l?e.push({value:n[a],alias:n[a],color:[n[v.name],n[p.name],n[l.name],n[m.name]]}):v&&p&&l?e.push({value:n[a],alias:n[a],color:[n[v.name],n[p.name],n[l.name]]}):e.push({value:n[a],alias:n[a]}))}if(!(v&&p&&l))for(g=h.createRandomColorRamp({size:e.length}),q=0;q<e.length;q++)e[q].color=g[q];this.uniqueValueInfos=e}if(e)e.forEach(function(k){u=u.concat(b.features.filter(function(r){return k.value==r.attributes[a]}).map(function(r){return[r.attributes[t]].concat(k.color||k.symbol&&k.symbol.color)}))}),
this.defaultColor&&b.features.filter(function(k){u.some(function(r){return r[0]===k.attributes[t]})||u.push([k.attributes[t]].concat(this.defaultColor))});else throw"missing uniqueValueInfos property";this._function=new c({colormap:u});this.colormap=u;this._function.outputPixelType="U8";this._function.renderTexture=!0;this._function.setProcessingContext(this._processingContext)}},draw2D:function(d){d=this._clonePixelData(d);return d=this._function._colorize(d)},drawGL:function(d){this._function._colorizeGL(d)},
toJson:function(d){var b={field:this.field,uniqueValueInfos:this.uniqueValueInfos,defaultColor:this.defaultColor};d&&(b.colormap=this.colormap);return{rendererName:this.rendererName,rendererArguments:b}},toCommonRendererJson:function(){var d=this.attributeField||this.field1||this.field,b=(this.infos||this.uniqueValueInfos).map(function(a){return{value:a.value,label:a.alias+"",symbol:{color:3===a.color.length?a.color.concat([255]):a.color,type:"esriSFS",style:"esriSFSSolid"}}});return{type:"uniqueValue",
field1:d,uniqueValueInfos:b}}})})},"esri/layers/rasterLib/renderer/RasterRGBRenderer":function(){define("dojo/_base/declare dojo/_base/lang ./RasterRenderer ../function/StretchFunction ../function/ContrastBrightnessFunction ../function/rasterUtils".split(" "),function(S,J,f,c,h,d){return S([f],{declaredClass:"esri.layers.rasterLib.renderer.RasterRGBRenderer",rendererName:"RGB",bandIndex:null,stretchType:0,min:0,max:255,numberOfStandardDeviations:2,statistics:null,histograms:null,dra:!1,minPercent:.25,
maxPercent:.5,useGamma:!1,gamma:null,computeGamma:!1,sigmoidStrengthLevel:1,constructor:function(b){this.stretchType="number"===typeof this.stretchType?this.stretchType:"none   standardDeviation histogramEqualization minMax percentClip   sigmoid".split(" ").indexOf(this.stretchType);b=J.mixin({},b,{stretchType:this.stretchType});this._stretchFunction=new c(b);this._stretchFunction.outputPixelType="U8";this._stretchFunction.renderTexture=!1;this.bandIndex=b.bandIndex||b.BandIndex;this._function=new h(b);
this._function.functionArguments.raster=this._stretchFunction;this._function.renderTexture=!0},hasTilingEffects:function(){return this._stretchFunction.hasTilingEffects()},draw2D:function(b){this._updateStretchParameters();b=this._clonePixelData(b);if("U8"===b.pixelBlock.pixelType&&!this.contrastOffset&&!this.brightnessOffset)return b;this._stretchFunction._stretch(b);var a=b.pixelBlock,e=this.bandIndex,q=Math.max.apply(null,e);a&&a.pixels.length>q&&e&&(a.pixels=e.map(function(t){return a.pixels[t]}),
a.statistics&&(a.statistics=e.map(function(t){return a.statistics[t]})));if(this.contrastOffset||this.brightnessOffset)b.pixelBlock=d.contrastBrightnessStretch(b.pixelBlock,{contrastOffset:this.contrastOffset,brightnessOffset:this.brightnessOffset});return b},drawGL:function(b){this._updateStretchParameters();b.pixelBlock&&(b=this._clonePixelData(b));var a=b.pixelBlock,e=this.bandIndex,q=Math.max.apply(null,e),t=this.statistics&&0<this.statistics.length?this.statistics:this._stretchFunction&&this._stretchFunction.srcStatistics,
u=this.histograms&&0<this.histograms.length?this.histograms:this._stretchFunction&&this._stretchFunction.srcHistograms,g,m;a&&a.pixels.length>q&&e&&(a.pixels=e.map(function(v){return a.pixels[v]}),a.statistics&&(a.statistics=e.map(function(v){return a.statistics[v]})),t&&0<t.length&&t.length!==e.length&&(g=e.map(function(v){return t[v]})),u&&0<u.length&&u.length!==e.length&&(m=e.map(function(v){return u[v]})));this._stretchFunction.functionArguments.statistics=g||t;this._stretchFunction.functionArguments.histograms=
m||u;this.contrastOffset||this.brightnessOffset?(this._stretchFunction.renderTexture=!1,this._function.renderTexture=!0,b=this._stretchFunction._stretchGL(b),this._function._cbGL(b)):(this._stretchFunction.renderTexture=!0,this._stretchFunction._stretchGL(b))},toJson:function(){var b=this._stretchFunction.toJson().rasterFunctionArguments;b.bandIndex=this.bandIndex;b.contrastOffset=this.contrastOffset;b.brightnessOffset=this.brightnessOffset;return{rendererName:this.rendererName,rendererArguments:b}},
toCommonRendererJson:function(){return{type:"rasterStretch",stretchType:"none   standardDeviation histogramEqualization minMax percentClip   sigmoid".split(" ")[this.stretchType]||"minMax",min:this.min,max:this.max,numberOfStandardDeviations:this.numberOfStandardDeviations,statistics:J.clone(this.statistics),dra:this.dra,minPercent:this.minPercent,maxPercent:this.maxPercent,useGamma:this.useGamma,gamma:J.clone(this.gamma),computeGamma:this.computeGamma,sigmoidStrengthLevel:this.sigmoidStrengthLevel}},
_updateStretchParameters:function(){var b=this._stretchFunction.functionArguments;b.stretchType=this.stretchType;b.min=this.min;b.max=this.max;b.numberOfStandardDeviations=this.numberOfStandardDeviations;b.statistics=this.statistics;b.histograms=this.histograms;b.dra=this.dra;b.minPercent=this.minPercent;b.maxPercent=this.maxPercent;b.useGamma=this.useGamma;b.gamma=this.gamma;b.computeGamma=this.computeGamma;this._stretchFunction.interpolation=this.interpolation}})})},"esri/layers/rasterLib/renderer/RasterStretchColorRampRenderer":function(){define("dojo/_base/declare dojo/_base/lang ./RasterRenderer ../function/ResampleFunction ../function/StretchFunction ../function/ContrastBrightnessFunction ../function/ColormapFunction ../function/rasterUtils".split(" "),
function(S,J,f,c,h,d,b,a){return S([f],{declaredClass:"esri.layers.rasterLib.renderer.RasterStretchColorRampRenderer",rendererName:"Stretch",bandIndex:[0],colorRamp:null,invert:!1,stretchType:0,min:0,max:255,numberOfStandardDeviations:2,statistics:null,histograms:null,dra:!1,minPercent:.25,maxPercent:.5,useGamma:!1,gamma:null,computeGamma:!1,sigmoidStrengthLevel:1,constructor:function(e){this.stretchType="number"===typeof this.stretchType?this.stretchType:"none   standardDeviation histogramEqualization minMax percentClip   sigmoid".split(" ").indexOf(this.stretchType);
e=J.mixin({},e,{stretchType:this.stretchType});Object.keys(e).forEach(function(q){null==e[q]&&delete e[q]});this._function=new d(e);this._stretchFunction=new h(e);this._stretchFunction.outputPixelType="U8";this._stretchFunction.renderTexture=!1;this._clrFunction=new b(e);this._clrFunction.functionArguments.raster=this._stretchFunction;this._clrFunction.renderTexture=!1;this._function.functionArguments.raster=this._clrFunction},hasTilingEffects:function(){return this._stretchFunction.hasTilingEffects()},
draw2D:function(e){this._updateStretchParameters();e=this._clonePixelData(e);if("U8"===e.pixelBlock.pixelType&&!(this.contrastOffset||this.brightnessOffset||this.colorRamp))return e;this._stretchFunction._stretch(e);var q=e.pixelBlock,t=this.bandIndex?this.bandIndex[0]:0;q&&1<q.pixels.length&&q.pixels.length>t&&(q.pixels=[q.pixels[t]],q.statistics&&(q.statistics=[q.statistics[t]]));this.colorRamp&&(e=this._clrFunction._colorize(e));if(this.contrastOffset||this.brightnessOffset)e.pixelBlock=a.contrastBrightnessStretch(e.pixelBlock,
{contrastOffset:this.contrastOffset,brightnessOffset:this.brightnessOffset});return e},drawGL:function(e){this._updateStretchParameters();e.pixelBlock&&(e=this._clonePixelData(e));var q=e.pixelBlock,t=this.bandIndex?this.bandIndex[0]||0:0,u=this.statistics&&0<this.statistics.length?this.statistics:this._stretchFunction&&this._stretchFunction.srcStatistics,g=this.histograms&&0<this.histograms.length?this.histograms:this._stretchFunction&&this._stretchFunction.srcHistograms,m,v;q&&1<q.pixels.length&&
q.pixels.length>t&&(q.pixels=[q.pixels[t]],q.statistics&&(q.statistics=[q.statistics[t]]),u&&u.length>t&&(m=[u[t]]),g&&g.length>t&&(v=[g[t]]));this._stretchFunction.functionArguments.statistics=m||u;this._stretchFunction.functionArguments.histograms=v||g;q=!!this.colorRamp;this.contrastOffset||this.brightnessOffset?(this._stretchFunction.renderTexture=!1,this._clrFunction.renderTexture=!1,this._function.renderTexture=!0,e=this._stretchFunction._stretchGL(e),q&&(e=this._clrFunction._colorizeGL(e)),
this._function._cbGL(e)):q?(this._stretchFunction.renderTexture=!1,this._clrFunction.renderTexture=!0,e=this._stretchFunction._stretchGL(e),this._clrFunction._colorizeGL(e)):(this._stretchFunction.renderTexture=!0,this._stretchFunction._stretchGL(e))},toJson:function(){var e=this._stretchFunction.toJson().rasterFunctionArguments;e.colorRamp=this.colorRamp||"";this.invert&&(e.invert=!0);e.contrastOffset=this.contrastOffset;e.brightnessOffset=this.brightnessOffset;return{rendererName:this.rendererName,
rendererArguments:e}},toCommonRendererJson:function(){return{type:"rasterStretch",stretchType:"none   standardDeviation histogramEqualization minMax percentClip   sigmoid".split(" ")[this.stretchType]||"minMax",colorRamp:this.colorRamp&&this.colorRamp.toJson?this.colorRamp.toJson():this.colorRamp,min:this.min,max:this.max,numberOfStandardDeviations:this.numberOfStandardDeviations,statistics:J.clone(this.statistics),dra:this.dra,minPercent:this.minPercent,maxPercent:this.maxPercent,useGamma:this.useGamma,
gamma:J.clone(this.gamma),computeGamma:this.computeGamma,sigmoidStrengthLevel:this.sigmoidStrengthLevel}},_updateStretchParameters:function(){var e=this._stretchFunction.functionArguments;e.stretchType=this.stretchType;e.min=this.min;e.max=this.max;e.numberOfStandardDeviations=this.numberOfStandardDeviations;e.statistics=this.statistics;e.histograms=this.histograms;e.dra=this.dra;e.minPercent=this.minPercent;e.maxPercent=this.maxPercent;e.useGamma=this.useGamma;e.gamma=this.gamma;e.computeGamma=this.computeGamma;
this._stretchFunction.interpolation=this.interpolation}})})},"esri/layers/rasterLib/renderer/RasterClassBreaksRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","./RasterRenderer","../function/ColormapFunction","../function/RemapFunction"],function(S,J,f,c,h){return S([f],{declaredClass:"esri.layers.rasterLib.renderer.RasterClassBreaksRenderer",rendererName:"ClassBreaks",renderTexture:!0,constructor:function(d){d=d||{};this._function=new h(d);this._function.outputPixelType="U8";var b=
d.classBreakInfos;d=d.minValue;null!=d&&b&&(this._function.functionArguments.colorBreaks=this._getSortedColorBreaks(d,b))},bind:function(d){this.inherited(arguments);this.isColormapFunction=!1;var b=this.raster&&this.raster.rasterInfo||this._rawRasterInfo,a=b&&b.vat;if(a&&"u8"===b.pixelType.toLowerCase()&&this.classBreakInfos){var e=this.field;if(b=a.fields.filter(function(v){return"value"===v.name.toLowerCase()})[0])var q=b.name;var t=a.features.sort(function(v,p){return parseFloat(v.attributes[e])-
parseFloat(p.attributes[e])})[0].attributes[e];this.isColormapFunction=!0;var u=[],g=this.field,m=this.classBreakInfos;m.forEach(function(v,p){a.features.forEach(function(l){var n=m[p-1]&&m[p-1].classMaxValue||t;l.attributes[g]<=v.classMaxValue&&(l.attributes[g]>n||l.attributes[g]===t)&&(n=v.symbol.color,u.some(function(k){return k[0]===l.attributes[q]})||u.push([l.attributes[q]].concat(n)))})});this._function=new c({colormap:u});this.colormap=u;this._function.outputPixelType="U8";this._function.renderTexture=
!0}this._function&&this._function.setProcessingContext(J.mixin({useProcessedData:!0},this._processingContext))},draw2D:function(d){if(this.isColormapFunction)return this._updateColormapParameters(),d=this._clonePixelData(d),d=this._function._colorize(d);this._updateRemapParameters();return this._function._remap(d)},drawGL:function(d){this.isColormapFunction?(this._updateColormapParameters(),this._function._colorizeGL(d)):(this._function.renderTexture=!0,this._updateRemapParameters(),this._function._remapGL(d))},
toJson:function(){var d=this._function.toJson().rasterFunctionArguments;return{rendererName:this.rendererName,rendererArguments:d}},toCommonRendererJson:function(){var d,b=this.classBreakInfos,a=this.colorBreaks;if(null==b&&a)for(b=[],d=0;d<a.length-1;d++)b.push({classMaxValue:a[d+1].value,symbol:{color:a[d].mappedColor,type:"esriSFS",style:"esriSFSSolid"},label:a[d].value+" - "+a[d+1].value});return{type:"classBreaks",field:"Value",minValue:null!=this.minValue?this.minValue:a[0].value,classBreakInfos:b}},
_updateRemapParameters:function(){var d=this.classBreakInfos,b=this.minValue;null!=b&&d&&(this._function.functionArguments.colorBreaks=this._getSortedColorBreaks(b,d))},_getSortedColorBreaks:function(d,b){b=b.map(function(e){return{maxValue:e.classMaxValue,color:e.symbol.color}}).sort(function(e,q){return e.maxValue-q.maxValue});var a=[{value:d,mappedColor:b[0].color}];for(d=0;d<b.length;d++)a.push({value:b[d].maxValue,mappedColor:d===b.length-1?b[d].color:b[d+1].color});return a},_updateColormapParameters:function(){this._function.functionArguments.colormap=
this.colormap;this._function.interpolation=this.interpolation}})})},"esri/layers/rasterLib/renderer/RasterShadedReliefRenderer":function(){define("dojo/_base/declare dojo/_base/lang ./RasterRenderer ../function/HillshadeFunction ../function/ContrastBrightnessFunction ../function/ColormapFunction ../function/rasterUtils".split(" "),function(S,J,f,c,h,d,b){return S([f],{declaredClass:"esri.layers.rasterLib.renderer.RasterShadedReliefRenderer",rendererName:"ShadedRelief",hillshadeType:null,azimuth:315,
altitude:45,zFactor:1,slopeType:null,psPower:.664,psFactor:.024,raster:null,constructor:function(a){this.hillshadeType="number"===typeof this.hillshadeType?this.hillshadeType:["traditional","multi-directional"].indexOf(this.hillshadeType);a&&a.scalingType&&(this.slopeType="adjusted"===a.scalingType?3:1);a&&a.pixelSizePower&&(this.psPower=a.pixelSizePower);a&&a.pixelSizeFactor&&(this.psFactor=a.pixelSizeFactor);a=J.mixin({},a,{hillshadeType:this.hillshadeType,psPower:this.psPower,psFactor:this.psFactor,
slopeType:this.slopeType});Object.keys(a).forEach(function(e){null==a[e]&&delete a[e]});this._function=new h(a);this._hillshadeFunction=new c(a);this._hillshadeFunction.outputPixelType="U8";this._hillshadeFunction.renderTexture=!1;this._function.functionArguments.raster=this._hillshadeFunction},hasTilingEffects:function(){return this._hillshadeFunction.hasTilingEffects()},draw2D:function(a){this._updateHillshadeParameters();a=this._clonePixelData(a);a=this._hillshadeFunction.read2D({raster:a});if(this.contrastOffset||
this.brightnessOffset)a.pixelBlock=b.contrastBrightnessStretch(a.pixelBlock,{contrastOffset:this.contrastOffset,brightnessOffset:this.brightnessOffset});return a},drawGL:function(a){this._updateHillshadeParameters();this.contrastOffset||this.brightnessOffset?(this._hillshadeFunction.renderTexture=!1,this._function.renderTexture=!0,a=this._hillshadeFunction.readGL({raster:a}),this._function._cbGL(a)):(this._hillshadeFunction.renderTexture=!0,this._hillshadeFunction.readGL({raster:a}))},toJson:function(){var a=
this._hillshadeFunction.toJson().rasterFunctionArguments;a.colorRamp=this.colorRamp||"";this.invert&&(a.invert=!0);a.contrastOffset=this.contrastOffset;a.brightnessOffset=this.brightnessOffset;return{rendererName:this.rendererName,rendererArguments:a}},toCommonRendererJson:function(){return{type:"rasterShadedRelief",hillshadeType:["traditional","multi-directional"][this.hillshadeType]||"traditional",azimuth:this.azimuth,altitude:this.altitude,zFactor:this.zFactor,scalingType:3===this.slopeType?"adjusted":
"none",pixelSizePower:this.psPower,pixelSizeFactor:this.psFactor,colorRamp:this.colorRamp&&this.colorRamp.toJson?this.colorRamp.toJson():this.colorRamp}},_updateHillshadeParameters:function(){var a=this._hillshadeFunction.functionArguments;a.hillshadeType=this.hillshadeType;a.azimuth=this.azimuth;a.altitude=this.altitude;a.zFactor=this.zFactor;a.slopeType=this.slopeType;a.psPower=this.psPower;a.psFactor=this.psFactor}})})},"esri/layers/rasterLib/raster/rasterProjectionHelper":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/sniff ../../../kernel ../../../WKIDUnitConversion ../../../geometry/Extent ../../../geometry/projection ../../../geometry/webMercatorUtils ../../../SpatialReference ../../../geometry/Point".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t){S={requirePE:function(g,m){return!(g.equals(m)||g._canProject(m))},load:function(){var g=new f;if(!this._loadPromise)if(a.isSupported())this._loadPromise=a.load();else{var m=new f;m.reject("projection engine is not supported on this version of the browser, please try with a modern browser");this._loadPromise=m.promise}this._loadPromise.isFulfilled()?this._loadPromise.isResolved()?g.resolve():this._loadPromise.isRejected()&&g.resolve():(this._pendingdfds=this._pendingdfds||
[],this._pendingdfds.push(g),this._loadPromise.then(J.hitch(this,function(){this._pendingdfds.forEach(function(v){v.isFulfilled()||v.resolve()})}),J.hitch(this,function(){this._pendingdfds.forEach(function(v){v.isFulfilled()||v.reject()})})));return g.promise},computeError:function(g,m){return[Math.abs((g[0]+g[4]+g[4*m.rows]+g[4*m.rows+4])/4-g[2*m.rows+2]),Math.abs((g[1]+g[5]+g[4*m.rows+1]+g[4*m.rows+5])/4-g[2*m.rows+3])]},getDefaultDatumTransformationForDataset:function(g,m,v){if(!(m&&g.spatialReference&&
this.requirePE(g.spatialReference,m)&&a.isLoaded()))return null;g=new b(g.toJson());m=new q(m.toJson());return v?a.getTransformation(m,g.spatialReference,g):a.getTransformation(g.spatialReference,m,g)},project:function(g,m,v){if(!m||g.spatialReference.equals(m))return g;var p=a.isLoaded()?a:e;"esri.geometry.Extent"===g.declaredClass?g=new b(g.toJson()):"esri.geometry.Point"===g.declaredClass&&(g=new t(g.toJson()));m=new q(m.toJson());(g=p.project(g,m))&&"esri.geometry.Extent"===g.declaredClass?(g=
new b(g.toJson()),v&&(1E-5>Math.abs(g.xmin+180)&&1E-5>Math.abs(g.xmax-180)?(g.xmin=0,g.xmax=360):(0>g.xmin&&(g.xmin+=360,g.xmax+=360),0>g.xmax&&(g.xmax+=360)))):g&&"esri.geometry.Point"===g.declaredClass&&(g=new t(g.toJson()),v&&0>g.x&&(g.x+=360));return g},projectResolution:function(g,m,v){var p=v.xmin+(v.xmax-v.xmin)/2;v=v.ymin+(v.ymax-v.ymin)/2;g=new b(p,v,p+g.x,v+g.y,g.spatialReference);g=this.project(g,m);return new t(g.xmax-g.xmin,g.ymax-g.ymin,m)},getProjectionOffsetGrid:function(g,m,v,p,l,
n,k){null==k&&(k=[32,32]);var r=g.xmin,w=g.ymin,x=g.xmax,D=g.ymax,G=g.spatialReference,F=m.spatialReference,A=a.isLoaded()?a:e,y=l?-l:null,z=k[0]*v.x,B=k[1]*v.y;x={cols:Math.ceil((x-r)/z)+1,rows:Math.ceil((D-w)/B)+1};g=[];for(D=0;D<x.cols;D++){var C=H;var H=[];for(v=0;v<x.rows;v++){var E=new t({x:r+z*D,y:w+B*v,spatialReference:G});E=A.project(E,F,n);if(!E)return null;p&&0>E.x&&(E.x+=360);H.push(E);0<D&&null!=y&&E.x<C[v].x&&(E.x+=l-y,E.x<C[v].x&&(E.x+=l-y));g.push((E.x-m.xmin)/(m.xmax-m.xmin));g.push((E.y-
m.ymin)/(m.ymax-m.ymin))}}m=this.computeError(g,x);p=new Float32Array((x.cols-1)*(x.rows-1)*12);l=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]);n=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(D=0;D<x.cols-1;D++)for(v=0;v<x.rows-1;v++){z=D*x.rows*2+2*v;r=g[z];w=g[z+1];H=g[z+2];G=g[z+3];z+=2*x.rows;F=g[z];A=g[z+1];y=g[z+2];B=g[z+3];C=0;E=12*(v*(x.cols-1)+D);for(z=0;3>z;z++)p[E++]=l[C++]*r+l[C++]*H+l[C++]*y;for(z=C=0;3>z;z++)p[E++]=l[C++]*w+l[C++]*G+l[C++]*B;for(z=C=0;3>z;z++)p[E++]=n[C++]*r+n[C++]*F+n[C++]*
y;for(z=C=0;3>z;z++)p[E++]=n[C++]*w+n[C++]*A+n[C++]*B}return{offsets:g,error:m,coefficients:p,spacing:k,size:[x.cols-1,x.rows-1]}},getHalfWorldWidth:function(g){var m=g&&g.wkid;if(null!=m)return g.isWebMercator()&&(m=3857),null==d[m]?180:u[m]}};J.setObject("layers.rasterLib.raster.rasterProjectionHelper",S,h);var u={3395:2.0037508342789244E7,3410:1.7334193943686873E7,3857:2.0037508342788905E7,3975:1.7367530445161372E7,4087:2.0037508342789244E7,4088:2.0015108787169147E7,6933:1.7367530445161372E7,32662:2.0037508342789244E7,
53001:2.001508679602057E7,53002:1.000754339801029E7,53003:2.001508679602057E7,53004:2.001508679602057E7,53016:1.4152803599503474E7,53017:1.7333573624304302E7,53034:2.001508679602057E7,53079:2.0015114352186374E7,53080:2.0015114352186374E7,54001:2.0037508342789244E7,54002:1.0018754171394624E7,54003:2.0037508342789244E7,54004:2.0037508342789244E7,54016:1.4168658027268292E7,54017:1.736753044516137E7,54034:2.0037508342789244E7,54079:2.0037508342789244E7,54080:2.0037508342789244E7,54100:2.0037508342789244E7,
54101:2.0037508342789244E7};return S})},"esri/geometry/projection":function(){define("require exports dojo/Deferred ./pe ../SpatialReference ./GeographicTransformation".split(" "),function(S,J,f,c,h,d){function b(u,g,m,v,p){void 0===v&&(v=null);void 0===p&&(p=!1);if(null===v){var l=d.cacheKey(g,m);void 0!==t[l]?v=t[l]:(v=a(g,m,null),null===v&&(v=new d),t[l]=v)}return e._project(u,g,m instanceof h||!1===p?m:new h(m),v,p)}function a(u,g,m){void 0===m&&(m=null);u=e._getTransformation(u,g,m);return null!==
u?d.fromGE(u):null}Object.defineProperty(J,"__esModule",{value:!0});var e=null;J.isLoaded=function(){return!!e&&c.isLoaded()};J.isSupported=function(){return c.isSupported()};var q=null;J.load=function(){if(q)return q.promise;q=new f;var u=c.load();S(["./geometryEngine"],function(g){e=g;u.then(function(){e._enableProjection(c);q.resolve()},function(m){q.reject(m)})});return q.promise};J.project=function(u,g,m){void 0===m&&(m=null);return u instanceof Array?0===u.length?[]:b(u,u[0].spatialReference,
g,m):b([u],u.spatialReference,g,m)[0]};var t={};J.projectMany=b;J.getTransformation=a;J.getTransformations=function(u,g,m){void 0===m&&(m=null);u=e._getTransformationBySuitability(u,g,m);if(null!==u){g=[];for(m=0;m<u.length;m++)g.push(d.fromGE(u[m]));return g}return[]}})},"esri/geometry/pe":function(){define(["require","exports","../core/tsSupport/extendsHelper","dojo/Deferred","../core/sniff"],function(S,J,f,c,h){function d(l){function n(x,D,G){x[D]=G(x[D])}J._pe=l;u.init();g.init();m.init();v.init();
p.init();J.PeGCSExtent=function(x){function D(){return null!==x&&x.apply(this,arguments)||this}f(D,x);D.prototype.destroy=function(){J._pe.destroy(this)};return D}(J._pe.PeGCSExtent);for(var k=0,r=[J._pe.PeDatum,J._pe.PeGeogcs,J._pe.PeGeogtran,J._pe.PeObject,J._pe.PeParameter,J._pe.PePrimem,J._pe.PeProjcs,J._pe.PeSpheroid,J._pe.PeUnit];k<r.length;k++)l=r[k],n(l.prototype,"getName",function(x){return function(){return x.call(this,Array(u.PE_NAME_MAX))}});k=0;for(r=[J._pe.PeGeogtran,J._pe.PeProjcs];k<
r.length;k++)l=r[k],n(l.prototype,"getParameters",function(x){return function(){for(var D=Array(u.PE_PARM_MAX),G=x.call(this),F=0;F<D.length;F++){var A=J._pe.getValue(G,"*");D[F]=A?J._pe.wrapPointer(A,J._pe.PeParameter):null;G+=Int32Array.BYTES_PER_ELEMENT}return D}});n(J._pe.PeHorizon.prototype,"getCoord",function(x){return function(){var D=this.getSize();if(!D)return null;var G=[],F=x.call(this);q(G,D,F);return G}});n(J._pe.PeGTlistExtendedEntry.prototype,"getEntries",function(x){var D=J._pe._pe_getPeGTlistExtendedGTsSize();
return function(){var G=null,F=x.call(this);if(!J._pe.compare(F,J._pe.NULL)){G=[F];var A=this.getSteps();if(1<A){F=J._pe.getPointer(F);for(var y=1;y<A;y++)G.push(J._pe.wrapPointer(F+D*y,J._pe.PeGTlistExtendedGTs))}}return G}});var w=J._pe._pe_getPeHorizonSize();l=function(x){return function(){var D=this._cache;D||(this._cache=D=new Map);if(D.has(x))return D.get(x);var G=null,F=x.call(this);if(!J._pe.compare(F,J._pe.NULL)){G=[F];var A=F.getNump();if(1<A){F=J._pe.getPointer(F);for(var y=1;y<A;y++)G.push(J._pe.wrapPointer(F+
w*y,J._pe.PeHorizon))}}D.set(x,G);return G}};n(J._pe.PeProjcs.prototype,"horizonGcsGenerate",l);n(J._pe.PeProjcs.prototype,"horizonPcsGenerate",l);J._pe.PeObject.prototype.toString=function(x){void 0===x&&(x=u.PE_STR_OPTS_NONE);J._pe.ensureCache.prepare();var D=J._pe.getPointer(this),G=J._pe.ensureInt8(Array(u.PE_BUFFER_MAX));return J._pe.UTF8ToString(J._pe._pe_object_to_string_ext(D,x,G))}}function b(l){if(l){var n=J._pe.getClass(l);n&&(n=J._pe.getCache(n))&&(l=J._pe.getPointer(l))&&delete n[l]}}
function a(l,n){var k=[];n=Array(n);for(var r=0;r<l;r++)k.push(J._pe.ensureInt8(n));return k}function e(l){if(Array.isArray(l[0])){var n=[];l.forEach(function(k){n.push(k[0],k[1])})}else n=l;return n}function q(l,n,k,r){void 0===r&&(r=!1);if(r)for(r=0;r<2*n;r++)l[r]=J._pe.getValue(k+r*Float64Array.BYTES_PER_ELEMENT,"double");else{var w=0===l.length;for(r=0;r<n;r++)w&&(l[r]=Array(2)),l[r][0]=J._pe.getValue(k,"double"),l[r][1]=J._pe.getValue(k+Float64Array.BYTES_PER_ELEMENT,"double"),k+=2*Float64Array.BYTES_PER_ELEMENT}}
Object.defineProperty(J,"__esModule",{value:!0});var t;J._pe=null;J.isLoaded=function(){return!!J._pe};J.isSupported=function(){return!!h("esri-wasm")};J.load=function(){if(t)return t.promise;t=new c;S(["./support/pe-wasm"],function(l){l({locateFile:function(n){return S.toUrl("./support/"+n)},onAbort:function(n){t.reject(Error(n))}}).then(function(n){d(n);t.resolve()})});return t.promise};(function(l){function n(w,x,D){J._pe.ensureCache.prepare();var G=e(D),F=D===G;G=J._pe.ensureFloat64(G);(w=J._pe._pe_geog_to_proj(J._pe.getPointer(w),
x,G))&&q(D,x,G,F);return w}function k(w,x,D){return r(w,x,D,0)}function r(w,x,D,G){J._pe.ensureCache.prepare();var F=e(D),A=D===F;F=J._pe.ensureFloat64(F);(w=J._pe._pe_proj_to_geog_center(J._pe.getPointer(w),x,F,G))&&q(D,x,F,A);return w}l.geogToProj=n;l.projGeog=function(w,x,D,G){switch(G){case u.PE_TRANSFORM_P_TO_G:return k(w,x,D);case u.PE_TRANSFORM_G_TO_P:return n(w,x,D)}return 0};l.projToGeog=k;l.projToGeogCenter=r})(J.PeCSTransformations||(J.PeCSTransformations={}));var u;(function(l){l.init=
function(){l.PE_BUFFER_MAX=J._pe.PeDefs.prototype.PE_BUFFER_MAX;l.PE_NAME_MAX=J._pe.PeDefs.prototype.PE_NAME_MAX;l.PE_MGRS_MAX=J._pe.PeDefs.prototype.PE_MGRS_MAX;l.PE_USNG_MAX=J._pe.PeDefs.prototype.PE_USNG_MAX;l.PE_DD_MAX=J._pe.PeDefs.prototype.PE_DD_MAX;l.PE_DDM_MAX=J._pe.PeDefs.prototype.PE_DDM_MAX;l.PE_DMS_MAX=J._pe.PeDefs.prototype.PE_DMS_MAX;l.PE_UTM_MAX=J._pe.PeDefs.prototype.PE_UTM_MAX;l.PE_PARM_MAX=J._pe.PeDefs.prototype.PE_PARM_MAX;l.PE_TYPE_NONE=J._pe.PeDefs.prototype.PE_TYPE_NONE;l.PE_TYPE_GEOGCS=
J._pe.PeDefs.prototype.PE_TYPE_GEOGCS;l.PE_TYPE_PROJCS=J._pe.PeDefs.prototype.PE_TYPE_PROJCS;l.PE_TYPE_GEOGTRAN=J._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;l.PE_TYPE_COORDSYS=J._pe.PeDefs.prototype.PE_TYPE_COORDSYS;l.PE_TYPE_UNIT=J._pe.PeDefs.prototype.PE_TYPE_UNIT;l.PE_STR_OPTS_NONE=J._pe.PeDefs.prototype.PE_STR_OPTS_NONE;l.PE_STR_AUTH_NONE=J._pe.PeDefs.prototype.PE_STR_AUTH_NONE;l.PE_STR_AUTH_TOP=J._pe.PeDefs.prototype.PE_STR_AUTH_TOP;l.PE_STR_NAME_CANON=J._pe.PeDefs.prototype.PE_STR_NAME_CANON;l.PE_PARM_X0=
J._pe.PeDefs.prototype.PE_PARM_X0;l.PE_PARM_ND=J._pe.PeDefs.prototype.PE_PARM_ND;l.PE_TRANSFORM_1_TO_2=J._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;l.PE_TRANSFORM_2_TO_1=J._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;l.PE_TRANSFORM_P_TO_G=J._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;l.PE_TRANSFORM_G_TO_P=J._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;l.PE_HORIZON_RECT=J._pe.PeDefs.prototype.PE_HORIZON_RECT;l.PE_HORIZON_POLY=J._pe.PeDefs.prototype.PE_HORIZON_POLY;l.PE_HORIZON_LINE=J._pe.PeDefs.prototype.PE_HORIZON_LINE;
l.PE_HORIZON_DELTA=J._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(u=J.PeDefs||(J.PeDefs={}));(function(l){function n(x,D){var G=null,F=r[x];F||(F={},r[x]=F);F.hasOwnProperty(String(D))?G=F[D]:(x=J._pe.PeFactory.prototype.factoryByType(x,D),J._pe.compare(x,J._pe.NULL)||(G=x,F[D]=G));return G=k(G)}function k(x){if(x){var D=x.getType();switch(D){case u.PE_TYPE_GEOGCS:x=J._pe.castObject(x,J._pe.PeGeogcs);break;case u.PE_TYPE_PROJCS:x=J._pe.castObject(x,J._pe.PeProjcs);break;case u.PE_TYPE_GEOGTRAN:x=J._pe.castObject(x,
J._pe.PeGeogtran);break;default:D&u.PE_TYPE_UNIT&&(x=J._pe.castObject(x,J._pe.PeUnit))}}return x}var r={},w={};l.initialize=function(){J._pe.PeFactory.prototype.initialize(null)};l.coordsys=function(x){return n(u.PE_TYPE_COORDSYS,x)};l.factoryByType=n;l.fromString=function(x,D){var G=null,F=w[x];F||(F={},w[x]=F);F.hasOwnProperty(D)?G=F[D]:(x=J._pe.PeFactory.prototype.fromString(x,D),J._pe.compare(x,J._pe.NULL)||(G=x,F[D]=G));return G=k(G)};l.geogcs=function(x){return n(u.PE_TYPE_GEOGCS,x)};l.geogtran=
function(x){return n(u.PE_TYPE_GEOGTRAN,x)};l.getCode=function(x){return J._pe.PeFactory.prototype.getCode(x)};l.projcs=function(x){return n(u.PE_TYPE_PROJCS,x)};l.unit=function(x){return n(u.PE_TYPE_UNIT,x)}})(J.PeFactory||(J.PeFactory={}));J.PeGCSExtent=null;var g;(function(l){var n;l.init=function(){l.PE_GTLIST_OPTS_COMMON=J._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;n=J._pe._pe_getPeGTlistExtendedEntrySize()};l.getGTlist=function(k,r,w,x,D,G){var F=null,A=new J._pe.PeInteger(G);try{var y=
J._pe.PeGTlistExtended.prototype.getGTlist(k,r,w,x,D,A);if(G=A.val)if(F=[y],1<G){var z=J._pe.getPointer(y);for(k=1;k<G;k++)F.push(J._pe.wrapPointer(z+n*k,J._pe.PeGTlistExtendedEntry))}}finally{J._pe.destroy(A)}return F}})(g=J.PeGTlistExtended||(J.PeGTlistExtended={}));(function(l){l.destroy=function(n){if(n&&n.length){for(var k=0;k<n.length;k++){var r=n[k];b(r);r.getEntries().forEach(function(w){b(w);w=w.getGeogtran();b(w);w.getParameters().forEach(b);[w.getGeogcs1(),w.getGeogcs2()].forEach(function(x){b(x);
var D=x.getDatum();b(D);b(D.getSpheroid());b(x.getPrimem());b(x.getUnit())})})}J._pe.PeGTlistExtendedEntry.prototype.Delete(n[0])}}})(J.PeGTlistExtendedEntry||(J.PeGTlistExtendedEntry={}));(function(l){l.geogToGeog=function(n,k,r,w,x){J._pe.ensureCache.prepare();var D=e(r),G=r===D;D=J._pe.ensureFloat64(D);var F=0;w&&(F=J._pe.ensureFloat64(w));(n=J._pe._pe_geog_to_geog(J._pe.getPointer(n),k,D,F,x))&&q(r,k,D,G);return n}})(J.PeGTTransformations||(J.PeGTTransformations={}));(function(l){function n(r,
w,x,D,G,F){J._pe.ensureCache.prepare();switch(r){case "dd":var A=J._pe._pe_geog_to_dd;var y=u.PE_DD_MAX;break;case "ddm":A=J._pe._pe_geog_to_ddm;y=u.PE_DDM_MAX;break;case "dms":A=J._pe._pe_geog_to_dms,y=u.PE_DMS_MAX}r=0;w&&(r=J._pe.getPointer(w));w=e(D);w=J._pe.ensureFloat64(w);y=a(x,y);D=J._pe.ensureInt32(y);if(G=A(r,x,w,G,D))for(A=0;A<x;A++)F[A]=J._pe.UTF8ToString(y[A]);return G}function k(r,w,x,D,G){J._pe.ensureCache.prepare();switch(r){case "dd":var F=J._pe._pe_dd_to_geog;break;case "ddm":F=J._pe._pe_ddm_to_geog;
break;case "dms":F=J._pe._pe_dms_to_geog}r=0;w&&(r=J._pe.getPointer(w));w=D.map(function(A){return J._pe.ensureString(A)});D=J._pe.ensureInt32(w);w=J._pe.ensureFloat64(Array(2*x));(F=F(r,x,D,w))&&q(G,x,w);return F}l.geog_to_dms=function(r,w,x,D,G){return n("dms",r,w,x,D,G)};l.dms_to_geog=function(r,w,x,D){return k("dms",r,w,x,D)};l.geog_to_ddm=function(r,w,x,D,G){return n("ddm",r,w,x,D,G)};l.ddm_to_geog=function(r,w,x,D){return k("ddm",r,w,x,D)};l.geog_to_dd=function(r,w,x,D,G){return n("dd",r,w,
x,D,G)};l.dd_to_geog=function(r,w,x,D){return k("dd",r,w,x,D)}})(J.PeNotationDms||(J.PeNotationDms={}));var m;(function(l){l.init=function(){l.PE_MGRS_STYLE_NEW=J._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;l.PE_MGRS_STYLE_OLD=J._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;l.PE_MGRS_STYLE_AUTO=J._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;l.PE_MGRS_180_ZONE_1_PLUS=J._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;l.PE_MGRS_ADD_SPACES=J._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};
l.geog_to_mgrs_extended=function(n,k,r,w,x,D,G){J._pe.ensureCache.prepare();var F=0;n&&(F=J._pe.getPointer(n));n=e(r);r=J._pe.ensureFloat64(n);n=a(k,u.PE_MGRS_MAX);var A=J._pe.ensureInt32(n);if(w=J._pe._pe_geog_to_mgrs_extended(F,k,r,w,x,D,A))for(x=0;x<k;x++)G[x]=J._pe.UTF8ToString(n[x]);return w};l.mgrs_to_geog_extended=function(n,k,r,w,x){J._pe.ensureCache.prepare();var D=0;n&&(D=J._pe.getPointer(n));n=r.map(function(G){return J._pe.ensureString(G)});r=J._pe.ensureInt32(n);n=J._pe.ensureFloat64(Array(2*
k));(w=J._pe._pe_mgrs_to_geog_extended(D,k,r,w,n))&&q(x,k,n);return w}})(m=J.PeNotationMgrs||(J.PeNotationMgrs={}));(function(l){l.geog_to_usng=function(n,k,r,w,x,D,G){J._pe.ensureCache.prepare();var F=0;n&&(F=J._pe.getPointer(n));n=e(r);r=J._pe.ensureFloat64(n);n=a(k,u.PE_MGRS_MAX);var A=J._pe.ensureInt32(n);if(w=J._pe._pe_geog_to_usng(F,k,r,w,x,D,A))for(x=0;x<k;x++)G[x]=J._pe.UTF8ToString(n[x]);return w};l.usng_to_geog=function(n,k,r,w){J._pe.ensureCache.prepare();var x=0;n&&(x=J._pe.getPointer(n));
n=r.map(function(D){return J._pe.ensureString(D)});r=J._pe.ensureInt32(n);n=J._pe.ensureFloat64(Array(2*k));(x=J._pe._pe_usng_to_geog(x,k,r,n))&&q(w,k,n);return x}})(J.PeNotationUsng||(J.PeNotationUsng={}));var v;(function(l){l.init=function(){l.PE_UTM_OPTS_NONE=J._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;l.PE_UTM_OPTS_ADD_SPACES=J._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;l.PE_UTM_OPTS_NS=J._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};l.geog_to_utm=function(n,k,r,w,x){J._pe.ensureCache.prepare();
var D=0;n&&(D=J._pe.getPointer(n));n=e(r);r=J._pe.ensureFloat64(n);n=a(k,u.PE_UTM_MAX);var G=J._pe.ensureInt32(n);if(w=J._pe._pe_geog_to_utm(D,k,r,w,G))for(D=0;D<k;D++)x[D]=J._pe.UTF8ToString(n[D]);return w};l.utm_to_geog=function(n,k,r,w,x){J._pe.ensureCache.prepare();var D=0;n&&(D=J._pe.getPointer(n));n=r.map(function(G){return J._pe.ensureString(G)});r=J._pe.ensureInt32(n);n=J._pe.ensureFloat64(Array(2*k));(w=J._pe._pe_utm_to_geog(D,k,r,w,n))&&q(x,k,n);return w}})(v=J.PeNotationUtm||(J.PeNotationUtm=
{}));var p;(function(l){var n=new Map;l.init=function(){l.PE_PCSINFO_OPTION_NONE=J._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;l.PE_PCSINFO_OPTION_DOMAIN=J._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;l.PE_POLE_OUTSIDE_BOUNDARY=J._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;l.PE_POLE_POINT=J._pe.PePCSInfo.prototype.PE_POLE_POINT};l.generate=function(k,r){void 0===r&&(r=l.PE_PCSINFO_OPTION_DOMAIN);var w;if(n.has(k)){var x=n.get(k);x[r]&&(w=x[r])}w||(w=J._pe.PePCSInfo.prototype.generate(k,
r),x||(x=[],n.set(k,x)),x[r]=w);return w}})(p=J.PePCSInfo||(J.PePCSInfo={}));(function(l){l.version_string=function(){return J._pe.PeVersion.prototype.version_string()}})(J.PeVersion||(J.PeVersion={}));J._init=d})},"esri/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,f){J.__proto__=f}||function(J,f){for(var c in f)f.hasOwnProperty(c)&&(J[c]=f[c])};return function(J,f){function c(){this.constructor=
J}S(J,f);J.prototype=null===f?Object.create(f):(c.prototype=f.prototype,new c)}}()})},"esri/geometry/GeographicTransformation":function(){define(["require","exports","./GeographicTransformationStep"],function(S,J,f){return function(){function c(h){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(h&&h.steps){var d=0;for(h=h.steps;d<h.length;d++){var b=h[d];b instanceof f?this.steps.push(b):this.steps.push(new f({wkid:b.wkid,wkt:b.wkt,isInverse:b.isInverse}))}}}c.cacheKey=
function(h,d){return[void 0!==h.wkid&&null!==h.wkid?h.wkid.toString():"-1",void 0!==h.wkt&&null!==h.wkt?h.wkt.toString():"",void 0!==d.wkid&&null!==d.wkid?d.wkid.toString():"-1",void 0!==d.wkt&&null!==d.wkt?d.wkt.toString():""].join()};c.fromGE=function(h){var d=new c,b="",a=0;for(h=h.steps;a<h.length;a++){var e=f.fromGE(h[a]);d.steps.push(e);b+=e.uid.toString()+","}d._cached_projection={};d._gtlistentry=null;d._chain=b;return d};c.prototype.getInverse=function(){var h=new c;h.steps=[];for(var d=
this.steps.length-1;0<=d;d--)h.steps.push(this.steps[d].getInverse());return h};c.prototype.getGTListEntry=function(){for(var h="",d=0,b=this.steps;d<b.length;d++)h+=b[d].uid.toString()+",";h!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=h);return this._gtlistentry};c.prototype.assignCachedGe=function(h,d,b){this._cached_projection[c.cacheKey(h,d)]=b};c.prototype.getCachedGeTransformation=function(h,d){for(var b="",a=0,e=this.steps;a<e.length;a++)b+=e[a].uid.toString()+
",";b!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=b);h=this._cached_projection[c.cacheKey(h,d)];return void 0===h?null:h};return c}()})},"esri/geometry/GeographicTransformationStep":function(){define(["require","exports"],function(S,J){var f=0;return function(){function c(h){void 0===h&&(h=null);this.uid=f++;h?(this._wkt=void 0!==h.wkt?h.wkt:null,this._wkid=void 0!==h.wkid?h.wkid:-1,this._isInverse=void 0!==h.isInverse?!0===h.isInverse:!1):(this._wkt=null,this._wkid=
-1,this._isInverse=!1)}c.fromGE=function(h){var d=new c;d._wkt=h.wkt;d._wkid=h.wkid;d._isInverse=h.isInverse;return d};Object.defineProperty(c.prototype,"wkt",{get:function(){return this._wkt},set:function(h){this._wkt=h;this.uid=f++},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"wkid",{get:function(){return this._wkid},set:function(h){this._wkid=h;this.uid=f++},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isInverse",{get:function(){return this._isInverse},
set:function(h){this._isInverse=h;this.uid=f++},enumerable:!0,configurable:!0});c.prototype.getInverse=function(){var h=new c;h._wkt=this.wkt;h._wkid=this._wkid;h._isInverse=!this.isInverse;return h};return c}()})},"esri/layers/rasterLib/raster/TileServiceRaster":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/_base/json dojo/sniff dojo/DeferredList dojo/when ../../../kernel ../../../Evented ../../../request ../../../geometry/Extent ../../../geometry/Point ../../../SpatialReference ../../../deferredUtils ../../../urlUtils ../../PixelBlock ../../rasterFormats/rasterCodec ../tile/RasterTileInfo ./RasterInfo ./BasicRaster".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D){S=J([D],{declaredClass:"esri.layers.rasterLib.raster.TileServiceRaster",constructor:function(G){},open:function(){var G=new c,F=this.serviceInfo||this._getServiceInfo(null),A=f.hitch(this,function(z){this.serviceInfo=z;this.version=z.currentVersion;this.rasterInfo=this._parseRasterInfo(z);this.loaded=!0;this._getRasterIdentifier();G.resolve(this)}),y=f.hitch(this,function(z){this.loaded=!0;this._getRasterIdentifier();G.reject(z)});q(F,A,y);return G.promise},
read:function(G){var F=this.url+"/tile/"+G.level+"/"+G.row+"/"+G.col,A={width:this.tileInfo.cols,height:this.tileInfo.rows,planes:null,pixelType:null,format:null,decodeFunc:null,isPoint:"elevation"===this.tileType.toLowerCase()?!0:!1};return this._requestPixels({url:F+(this.disableClientCaching?"?_ts\x3d "+(new Date).getTime():""),payload:{},decodeParams:A,tileOptions:G})},identify:function(G,F){null==F&&(F=this.tileInfo.lods[this.tileInfo.lods.length-1].level);var A=(G.x-this.tileInfo.origin.x)/
this.tileInfo.lods[F].resolution/this.tileInfo.cols;G=(this.tileInfo.origin.y-G.y)/this.tileInfo.lods[F].resolution/this.tileInfo.rows;var y=Math.floor(A),z=Math.floor(G),B=Math.floor((A-y)*this.tileInfo.cols);B=Math.min(B,this.tileInfo.cols-1);var C=Math.floor((G-z)*this.tileInfo.rows);C=Math.min(C,this.tileInfo.rows-1);var H=new c;this.read({level:F,row:z,col:y}).then(function(E){var K=C*E.width+B;E&&E.pixels&&0<E.pixels.length?(E=E.mask?E.mask[K]?E.pixels.map(function(I){return I[K]}):null:E.pixels.map(function(I){return I[K]}),
H.resolve(E)):H.reject("no valid data")},function(E){H.reject(E)});return H.promise},setFetchParameters:function(G,F){},_getRasterIdentifier:function(){this._rasterId||(this._rasterId=this.url.replace("http:","").replace("https:",""));return this._rasterId},_getServiceInfo:function(){var G=this.url,F=new c(l._dfdCanceller);F._pendingDfd=g({url:G,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});F._pendingDfd.then(function(A){F.callback(A)},function(A){F.errback(A)});return F},_parseRasterInfo:function(G){var F=
new x;F.extent=new m(G.fullExtent);F.spatialReference=new p(G.spatialReference);this.tileType=G.cacheType||"Map";switch(this.tileType){case "Map":F.bandCount=3;F.pixelType="U8";this.dataType="Processed";break;case "Elevation":F.bandCount=1;F.pixelType=G.pixelType||"F32";this.dataType="Elevation";break;case "Raster":F.bandCount=null,F.pixelType=null,this.dataType=G.serviceDataType&&G.serviceDataType.replace("esriImageServiceDataType","")||"Generic"}var A=G.tileInfo;F.width=Math.floor((G.fullExtent.xmax-
G.fullExtent.xmin)/A.lods[A.lods.length-1].resolution+.5);F.height=Math.floor((G.fullExtent.ymax-G.fullExtent.ymin)/A.lods[A.lods.length-1].resolution+.5);F.cellSize=new v({x:A.lods[A.lods.length-1].resolution,y:A.lods[A.lods.length-1].resolution,spatialReference:G.spatialReference});this.tileInfo=new w(A);this.tileInfo.tileType=this.tileType;return F}});f.setObject("layers.rasterLib.raster.TileServiceRaster",S,t);return S})},"esri/layers/rasterLib/raster/TileRaster":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/_base/json dojo/sniff dojo/DeferredList dojo/when ../../../kernel ../../../Evented ../../../request ../../../geometry/Extent ../../../geometry/Point ../../../SpatialReference ../../../deferredUtils ../../../urlUtils ../../PixelBlock ../../rasterFormats/rasterCodec ../tile/RasterTileInfo ./RasterInfo ./BasicRaster".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D){S=J([D],{declaredClass:"esri.layers.rasterLib.raster.TileRaster",sourceType:"TileCache",_RECORD_SIZE:8,constructor:function(G){this._cloudBlobStorage=G&&G._cloudBlobStorage},open:function(){var G=new c,F=this.datasetInfo||this._getDatasetInfo(null),A=f.hitch(this,function(z){this.datasetInfo=z;this.rasterInfo=z=this._parseRasterInfo(z);this.tileType="Cache/LERC"===z.format?"Elevation":"Cache/MIXED"===z.format||"Cache/JPEG"===z.format||"Cache/PNG"===
z.format?"Map":"Raster";this.tileInfo=z.tileInfo;this.dataType=["Generic","Elevation","Processed"][["Raster","Elevation","Map"].indexOf(this.tileType)];this._HEADER_SIZE=z.packetSize*z.packetSize*this._RECORD_SIZE+64;this.loaded=!0;this._cloudBlobStorage=this._cloudBlobStorage||-1<this.url.toLowerCase().indexOf("s3.amazonaws.com")||-1<this.url.toLowerCase().indexOf("windows.net")||-1<this.url.toLowerCase().indexOf("googleapis.com");this._getRasterIdentifier();G.resolve(this)}),y=f.hitch(this,function(z){this.loaded=
!0;this._getRasterIdentifier();G.reject(z)});q(F,A,y);return G.promise},read:function(G){var F=new c,A=G.level,y=G.row,z=G.col,B=this._buildCacheFilePath(this.url,A,y,z),C=this._getIndexRecordFromBundle(A,y,z);g({url:B,content:{},headers:{Range:"bytes\x3d0-"+(this._HEADER_SIZE-1).toString()},handleAs:"arraybuffer"}).then(f.hitch(this,function(H,E){F.isCanceled()||(H=new Uint8Array(H),H=this._getTileEndAndContentType(H,C),E={width:this.tileInfo.cols,height:this.tileInfo.rows,planes:null,pixelType:null,
format:null,decodeFunc:null,isPoint:"elevation"===this.tileType.toLowerCase()?!0:!1},this._requestPixels({url:B+(this.disableClientCaching?"?_ts\x3d "+(new Date).getTime():""),payload:{},headers:{Range:"bytes\x3d"+H.position.toString()+"-"+(H.position+H.recordSize).toString()},decodeParams:E,tileOptions:G}).then(function(K){F.isCanceled()||F.resolve(K)},function(K){F.isCanceled()||F.reject(K)}))}));return F.promise},identify:function(){return null},setFetchParameters:function(G,F){},toJson:function(){return{url:this.url,
tileInfo:this.tileInfo.toJson(),rasterInfo:this.rasterInfo.toJson(),datasetInfo:this.datasetInfo,sourceType:this.sourceType,tileType:this.tileType,_rasterId:this._rasterId}},_getDatasetInfo:function(){return g({url:this.url+"/conf.json",handleAs:"json",content:{}})},_parseRasterInfo:function(G){var F=new x;switch(G.pixelType){case 1:var A="U1";break;case 1:A="U2";break;case 2:A="U4";break;case 3:A="U8";break;case 4:A="S8";break;case 5:A="U16";break;case 6:A="S16";break;case 7:A="U32";break;case 8:A=
"S32";break;case 9:A="F32";break;default:A="F32"}var y,z=[],B=G.LODInfos;for(y=0;y<B.levels.length;y++)z.push({level:B.levels[y],resolution:B.resolutions[y],scale:96/.0254*B.resolutions[y]});y=new p(G.extent.spatialReference||G.geodataXform.spatialReference);z=new w({rows:G.blockHeight,cols:G.blockWidth,dpi:96,format:G.format,compressionQuality:0,origin:G.origin,spatialReference:y,lods:z});F.pixelType=A;F.bandCount=G.bandCount;F.spatialReference=y;F.extent=new m({xmin:G.extent.xmin,ymin:G.extent.ymin,
xmax:G.extent.xmax,ymax:G.extent.ymax,spatialReference:y});F.cellSize=new v({x:G.pixelSizeX,y:G.pixelSizeY,spatialReference:y});F.width=Math.floor((F.extent.xmax-F.extent.xmin)/F.cellSize.x+.5);F.height=Math.floor((F.extent.ymax-F.extent.ymin)/F.cellSize.y+.5);F.statistics=G.statistics.map(function(C){Object.keys(C).forEach(function(H){isNaN(C[H])&&(C[H]=null)});return C});F.histograms=G.histograms;F.geodataXform=G.geodataXform;F.packetSize=G.packetSize;F.format=G.format;F.compressionQuality=G.compressionQuality;
F.tileInfo=z;return F},_getRasterIdentifier:function(){this._rasterId||(this._rasterId=this.url.replace("http:","").replace("https:",""));return this._rasterId},_buildCacheFilePath:function(G,F,A,y){var z=this.rasterInfo.packetSize;y=Math.floor(y/z)*z;A="R"+this._toHexString4(Math.floor(A/z)*z)+"C"+this._toHexString4(y);z="L";z=10<=F?z+F.toString():z+("0"+F.toString());return this._cloudBlobStorage?G+"/_alllayers/"+z+"/"+A+".bundle":G+"/"+z+"_"+A+"/bundle"},_getIndexRecordFromBundle:function(G,F,
A){G=this.rasterInfo.packetSize;F=F%G*G+A%G;if(0>F)throw"Invalid level / row / col";return F*this._RECORD_SIZE+64},_getTileEndAndContentType:function(G,F){G=G.subarray(F,F+8);F=0;var A;for(A=0;5>A;A++)F|=(G[A]&255)<<8*A;var y=F&0xffffffffff;F=0;for(A=5;8>A;A++)F|=(G[A]&255)<<8*(A-5);return{position:y,recordSize:F&0xffffffffff}},_toHexString4:function(G){G=G.toString(16);if(4!=G.length)for(var F=4-G.length;0<F--;)G="0"+G;return G}});f.setObject("layers.rasterLib.raster.TileRaster",S,t);return S})},
"esri/layers/rasterLib/raster/FunctionRaster":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/_base/json dojo/sniff ../DeferredList2 dojo/when ../../../kernel ../../../Evented ../../../request ../../../deferredUtils ../../../geometry/Extent ../../../geometry/Point ../../../SpatialReference ../../../deferredUtils ../../../urlUtils ../../rasterFormats/rasterCodec ./RasterInfo ./BasicRaster ../../rasterLib/function/rasterFunctionHelper".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D){S=J([x],{declaredClass:"esri.layers.rasterLib.raster.FunctionRaster",rasterFunction:null,sourceType:"Function",constructor:function(G){G&&G.rasterFx&&this._init(G.rasterFx,G.rasterFxArgs)},open:function(){var G=this.getMemberRasters().map(function(A){return A.open()});this.identifiers=this.getMemberRasters().map(function(A){return A._rasterId});var F=new c;(new e(G,null,null,!0)).then(function(A){A.some(function(y){return!y[0]})?F.reject(A):
(this.rasterFunction.bind(),this.rasterInfo=this.rasterFunction.rasterInfo,this.dataType=this.rasterInfo.keyProperties&&this.rasterInfo.keyProperties.DataType||"Generic",this.tileInfo=A[0][1].tileInfo,F.resolve(this))}.bind(this));return F.promise},getProjectedFullExtent:function(G){var F=new c;this.getMemberRasters()[0].getProjectedFullExtent(G).then(f.hitch(this,function(A){this.projectedFullExtent=A;F.resolve(A)}));return F.promise},setProcessingContext:function(G){var F=G;G.layer&&(G=G.layer,
F={id:G.id,rawRasterInfo:G.raster.rasterInfo,glSetting:G._glSetting,xformSetting:G.tileManager&&G.tileManager.xformSetting,useWebGL:G.useWebGL,resampling:G.tileMode&&G.tileManager&&G.tileManager.xformSetting.requireProjection&&!G._hasTilingEffects&&"Thematic"!==G.raster.dataType?1:0,tileMode:G.tileMode});this.rasterFunction.setProcessingContext(F);this._layerOptions=F},alterDefinition:function(G){if(G=G||this.rasterFunction)1===this.memberRasters.length&&!G._bindComplete&&(this.rasterFunction=D.create(G,
{raster:this.memberRasters[0]}))&&(this.rasterFunction.bind(),this.rasterInfo=this.rasterFunction.rasterInfo,this.dataType=this.rasterInfo.keyProperties&&this.rasterInfo.keyProperties.DataType||"Generic",this.rasterFunction.setProcessingContext(this._layerOptions)),this._rasterHandler&&this._rasterHandler._connected&&this.rasterFunction&&this._rasterHandler.setRasterFunction({layerId:this._layerOptions.id,data:this.rasterFunction.toJson(!0)})},setFetchParameters:function(G,F){var A=this.getMemberRasters();
A&&1===A.length&&A[0].setFetchParameters(G,F)},getMemberRasters:function(){this.memberRasters||(this.memberRasters=[],this._getMemberRasters(this.rasterFunction.functionArguments,this.memberRasters));return this.memberRasters},read:function(G){var F=new c(m._dfdCanceller);if(G.src){var A=this.rasterFunction.read(G);F.resolve(A);return F.promise}var y=this.getMemberRasters().map(function(H){return H.read(G)});y=new e(y);var z,B,C=this.identifiers;F._pendingDfd=y;y.then(f.hitch(this,function(H){if(z=
H.some(function(E){return E[0]}))B={},H.forEach(function(E,K){B[C[K]]=E[0]?E[1]:null});A=B?this.rasterFunction.read({extent:G.extent,src:B}):null;A.srcData=B;F.resolve(A)}));return F},_init:function(G,F){if(this.rasterFunction=D.create(G,F))this.rasterFunction._bindComplete=!0;else throw"Cannot initialize a function raster without a raster function";},_getMemberRasters:function(G,F){var A=Object.keys(G),y,z,B;for(y=0;y<A.length;y++)if(B=G[A[y]]){var C=B instanceof Array?B:[B];for(z=0;z<C.length;z++)(B=
C[z])&&("function"===typeof B||"object"===typeof B)&&B.read&&(B.functionArguments?this._getMemberRasters(B.functionArguments,F):B.sourceType&&"Function"!==B.sourceType&&(B._identifier=B._getRasterIdentifier(),F.some(function(H){return H._identifier===B._identifier})||F.push(B)))}return F}});f.setObject("layers.rasterLib.raster.FunctionRaster",S,t);return S})},"esri/layers/rasterLib/DeferredList2":function(){define(["dojo/DeferredList"],function(S){return function(J,f,c,h,d){this.list=J;f=new S(J,
f,c,h,d);var b=f.resolve.bind(f),a=f.cancel.bind(f);f.cancel=function(){J&&J.forEach(function(e){e.cancel&&e.cancel()});a.apply(this,arguments)}.bind(f);f.resolve=function(){this.isFulfilled()||b.apply(this,arguments)}.bind(f);return f}})},"esri/layers/rasterLib/tile/RasterTileManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/when ../DeferredList2 ../../../geometry/Extent ../../../SpatialReference ../../../geometry/Point ../../PixelBlock ./RasterTileInfo ../raster/rasterProjectionHelper".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t){var u=function(g,m){var v;for(v=0;v<g.length;v++)if(m(g[v]))return v;return-1};return S(null,{declaredClass:"esri.layers.rasterLib.tile.RasterTileManager",count:null,fullBoundary:null,tileBoundary:null,tiles:null,resolution:null,virtual:!0,prefetchBufferSize:0,_progressiveGlobal:!1,_MAX_TILES:128,_defaultMatrixResolution:20,constructor:function(g){this.tiles=[];this.xformSetting={};this.mapSpatialReference=g&&g.mapSR;this.layer=g&&g.layer;this.identifiers=this.layer.raster.rasterFunction?
this.layer.raster.getMemberRasters().map(function(m){return m._rasterId}):[this.layer.raster._rasterId];(g=g&&g.tileInfo)&&this.setTileInfo(g)},setTileInfo:function(g){this.tileInfo=g;this.virtual=g.virtual;this.mapResolution=null;this.tiles.length=0;this.xformSetting.requireProjection=!this.virtual&&!this.mapSpatialReference.equals(this.tileInfo.spatialReference);this.xformSetting.requirePE=t.requirePE(this.mapSpatialReference,this.tileInfo.spatialReference);this.xformSetting.meshSize=this.xformSetting.requireProjection?
[this._defaultMatrixResolution,this._defaultMatrixResolution]:[1,1];this.halfWorldWidth=t.getHalfWorldWidth(g.spatialReference)},updateResolution:function(g,m){if(!(this.mapResolution&&g&&this._resolutionEqual(this.mapResolution.x,g.x)&&this._resolutionEqual(this.mapResolution.y,g.y))){this.resetTiles();var v=this.xformSetting.requireProjection;this.mapResolution=this.resolution=g;v&&(this.resolution=t.projectResolution(g,this.tileInfo.spatialReference,this.layer.projectedFullExtent||m));this._resolution=
this.resolution;g=this.resolution;if(!this.tileInfo.virtual){v=.75*Math.min(g.x,g.y)+.25*Math.max(g.x,g.y);if(v>=this.tileInfo.lods[0].resolution){var p=this.tileInfo.lods[0];this.ooe=!0}else{if(v<=this.tileInfo.lods[this.tileInfo.lods.length-1].resolution)p=this.tileInfo.lods[this.tileInfo.lods.length-1];else for(g=0;g<this.tileInfo.lods.length-1;g++)if(p=this.tileInfo.lods[g],m=this.tileInfo.lods[g+1],p.resolution>=v&&m.resolution<=v){p.resolution-v>v-m.resolution&&(p=m);break}this.ooe=!1}this.level=
p&&p.level;g=this.resolution=new a({x:p.resolution,y:p.resolution,spatialReference:this.tileInfo.spatialReference})}v=this.layer.raster.rasterInfo.extent;p=this.tileInfo.origin;m=this.tileInfo.cols;var l=this.tileInfo.rows;this.fullBoundary={rowStart:Math.floor((p.y-v.ymax)/g.y/l),rowEnd:Math.floor((p.y-v.ymin-g.y)/g.y/l),colStart:Math.floor((v.xmin-p.x)/g.x/m),colEnd:Math.floor((v.xmax-p.x-g.x)/g.x/m)};if(v=this.halfWorldWidth){l=Math.ceil(v/g.x/(m/2));var n=this.tileInfo.applyGCS360Transform?360:
v,k=Math.round(m-(n-p.x)/g.x%m);k===m&&(k=0);this.fullBoundary.colRange=l;this.fullBoundary.paddingRight=k;this.fullBoundary.paddingLeft=Math.round((l*m*g.x+p.x-n-(this.tileInfo.applyGCS360Transform?0:p.x+v))/g.x)}this.hasNewData=!0}},getXformGrid:function(){var g=this.mapExtent,m=this.layer._hasTilingEffects?this.extent:this.fullExtent,v=this.layer.getCurrentResolution(),p=JSON.stringify(g.toJson())+JSON.stringify(m.toJson());this._datumTransformationInitialized||(this._datumTransformationInitialized=
!0,this._datumTransformation=t.getDefaultDatumTransformationForDataset(this.layer.raster.rasterInfo.extent,g.spatialReference,!0));this._cachedExtentString&&this._cachedExtentString===p||(this._cachedExtentString=p,this._xformGrid=g=t.getProjectionOffsetGrid(g,m,v,this.tileInfo.applyGCS360Transform,this.halfWorldWidth,this._datumTransformation));g=this._xformGrid;this.xformSetting.meshSize=g&&g.size;return g},getWrapTimes:function(g){var m=t.getHalfWorldWidth(g.spatialReference);if(!m)return 0;var v=
2*m;m=this.tileInfo.applyGCS360Transform?0:-m;return Math.floor((g.xmax-m)/v)-Math.floor((g.xmin-m)/v)},normalizeCoordinate:function(g,m){if(!m)return 0;var v=2*m;if(0<g){for(;g>m;)g-=v;return g}for(;g<-m;)g+=v;return g},resetTiles:function(){this.tiles.forEach(J.hitch(this,function(g){g.fetch&&!g.fetch.isCanceled()&&g.fetch.cancel();g.update&&!g.update.isCanceled()&&g.update.cancel()}));this.tiles.length=0},updateExtent:function(g,m){this.mapExtent=this.extent=g;var v=this.xformSetting.requireProjection;
if(v){this.extent=t.project(g,this.tileInfo.spatialReference,this.tileInfo.applyGCS360Transform);if(!this.extent)return;this.extent.spatialReference=new b(this.extent.spatialReference.toJson())}else if(g.spatialReference.isWebMercator()||4326===g.spatialReference.wkid){var p=4326===g.spatialReference.wkid?180:this.halfWorldWidth,l=g.xmin;if(l<-p||l>p){for(var n=g.xmax,k=2*p;l<-p;)l+=k,n+=k;for(;l>p;)l-=k,n-=k;this.mapExtent=this.extent=g=new d(l,g.ymin,n,g.ymax,g.spatialReference)}}this.updateResolution(m,
g);p=this.extent;l=this.tileInfo;n=l.cols;k=l.rows;m=this.resolution;var r=p;v=v?this.layer.raster.rasterInfo.extent:this.layer.raster.projectedFullExtent;this.ooe&&(r=this._getIntersect(p,v));var w=Math.floor((r.xmin-l.origin.x)/m.x/n)-this.prefetchBufferSize,x=Math.floor((r.xmax-l.origin.x)/m.x/n)+this.prefetchBufferSize,D=null,G=this.getWrapTimes(g),F=this.fullBoundary&&this.fullBoundary.colRange;G&&this.halfWorldWidth&&(x===w&&(D=w),x+=G*F);if(g=this.halfWorldWidth&&this.tiles.length&&(G!==this.wrapTimes||
D!==this._circlularColId))this._wrapSwitchCount=this._wrapSwitchCount?this._wrapSwitchCount+1:1;this.wrapTimes=G;this._circlularColId=D;var A=Math.floor((l.origin.y-r.ymax)/m.y/k)-this.prefetchBufferSize;D=Math.floor((l.origin.y-r.ymin)/m.y/k)+this.prefetchBufferSize;this.tileBoundary={rowStart:A,rowEnd:D,colStart:w,colEnd:x};var y,z;((r=(D-A+1)*(x-w+1)>this._MAX_TILES||!this.virtual&&this._resolution.x>8*this.tileInfo.lods[0].resolution)||2<G||g)&&this.resetTiles();if(!(r||2<G)){r=this.tiles;g=!1;
for(y=r.length-1;0<=y;y--){var B=r[y].row;var C=r[y].wrapCol;if(B<A||B>D||C<w||C>x)r[y].fetch&&!r[y].fetch.isCanceled()&&r[y].fetch.cancel(),r[y].update&&!r[y].update.isCanceled()&&r[y].update.cancel(),r.splice(y,1),g=!0}for(y=A;y<=D;y++)for(z=w;z<=x;z++){A=new d(l.origin.x+m.x*n*z,l.origin.y-m.y*k*(y+1),l.origin.x+m.x*n*(z+1),l.origin.y-m.y*k*y,p.spatialReference);var H=G&&F?0<=z?z%F:F- -z%F:z;B=u(r,function(E){return E.row===y&&E.col===H&&E.wrapCol===z});C=v.xmax>=A.xmax?n:Math.round((v.xmax-A.xmin)/
m.x);-1===B&&(r.push({row:y,col:H,wrapCol:z,cellsizeX:m.x,cellsizeY:m.y,width:n,height:k,actualWidth:C,extent:A,normalizedExtent:this._wrapExtent(A,H),pixelBlock:null,virtual:this.virtual,level:this.level,tileType:this.tileInfo.tileType||"Raster"}),g=!0)}g&&this._sortTiles();m=this.tileInfo.rows*(this.tileBoundary.rowEnd-this.tileBoundary.rowStart+1);this.width=this.tileInfo.cols*(this.tileBoundary.colEnd-this.tileBoundary.colStart+1);this.height=m;this.count=r.length;m=Math.min.apply(null,r.map(function(E){return E.extent.xmin}));
l=Math.max.apply(null,r.map(function(E){return E.extent.xmax}));n=Math.min.apply(null,r.map(function(E){return E.extent.ymin}));k=Math.max.apply(null,r.map(function(E){return E.extent.ymax}));m=this.fullExtent=new d(m,n,l,k,p.spatialReference);if(this.layer.roaming||this.layer.useWebGL)this.layer._hasTilingEffects?(this.xformSetting.offset=[0,0],this.xformSetting.scale=[1,1]):(g&&(this._tilesChanged=!0),this.xformSetting.offset=[(p.xmin-m.xmin)/(m.xmax-m.xmin),-(m.ymin-p.ymin)/(m.ymax-m.ymin)],this.xformSetting.scale=
[(p.xmax-p.xmin)/(m.xmax-m.xmin),(p.ymax-p.ymin)/(m.ymax-m.ymin)])}},fetchTiles:function(g){(this._tilesChanged||g)&&this._fetchTiles(g)},_fetchTiles:function(g){this._fetchCounter=0;var m=this.extent;this.fetchAllCompleted=g?new f:null;(this._tilesChanged||g&&this.layer._hasTilingEffects)&&this.tiles.forEach(J.hitch(this,function(p){p.updateCompleted=!1}));var v={};!this.layer.roaming&&this.layer._hasTilingEffects&&g?(this.identifiers.forEach(function(p,l){v[p]={extent:this.extent,pixelBlock:new e({width:this.layer._map.width,
height:this.layer._map.height,pixels:[],pixelType:"",mask:null,statistics:[]})}}.bind(this)),this.originalPixelData={extent:this.extent,src:v,isEmpty:!0}):this._tilesChanged&&(this.identifiers.forEach(function(p,l){v[p]={extent:this.fullExtent,pixelBlock:new e({width:128,height:128,pixels:[],pixelType:"",mask:null,statistics:[]})}}.bind(this)),this.originalPixelData={extent:this.fullExtent,src:v,isEmpty:!0});this.tiles.forEach(J.hitch(this,function(p){if(p.fetch)p.update||(p.update=this.updateTile(p));
else{if(this._isTileOutSide(p,m)){p.updateCompleted=!0;return}this._requestTile(p)}this.layer.roaming&&this.layer.useWebGL?this._fillPixelData(p):p.src&&g&&(this.layer._hasTilingEffects||this.layer.useWebGL)&&(this._fillPixelData(p),this.layer._hasTilingEffects&&(p.updateCompleted=!0),p.processedPixelBlock=null,p.renderedPixelBlock=null)}));0===this._fetchCounter&&(this._fetched=!0);this._tilesChanged=!1;g&&this._updateFetchStatus()},updateTile:function(g,m){var v=new f;if(!g.src&&!g.fetch)return v.resolve(g),
v.promise;c(g.src||g._fetched||g.fetch,J.hitch(this,function(){var p=this.layer.tileMode&&this.layer._rasterHandler&&!(this.layer._hasTilingEffects||this.layer.useWebGL),l=this.layer._drawTile,n=this._validateRawPixelBlocks(g);this.layer._hasTilingEffects&&!this.layer.useWebGL&&(l=l&&(this._progressiveGlobal||m));if((m||!m&&n)&&(p||l||this.layer.roaming)){if(this.xformSetting.requireProjection&&this.layer.useWebGL&&(this.xformSetting.gridConfig=this.getXformGrid(),null==this.xformSetting.gridConfig))return v.cancel(),
v.promise;this._processTile(g,m).then(J.hitch(this,function(k){v.isCanceled()||this._renderTile(k,m).then(J.hitch(this,function(r){this.hasNewData=!1;v.isCanceled()||v.resolve(r)}))}))}else m||n||(g.updateCompleted=!0),this.layer.useWebGL||this.layer._hasTilingEffects?v.resolve(this.originalPixelData):v.resolve()}));return v.promise},setLayer:function(g){this.layer=g},fillupTiles:function(){this.tiles.forEach(J.hitch(this,function(g){g.update&&g.updateCompleted&&!g.filled&&(g.updateCompleted=!1,this._fillPixelData(g),
g.updateCompleted=!0)}))},_validateRawPixelBlocks:function(g){return g&&g.src&&!this.identifiers.some(function(m){return!(g.src[m].pixelBlock&&0!==g.src[m].pixelBlock.validPixelCount&&g.src[m].pixelBlock.pixels&&0<g.src[m].pixelBlock.pixels.length)})},_wrapExtent:function(g,m){if(g){if(this.tileInfo.applyGCS360Transform){var v=this.normalizeCoordinate(g.xmin,180);0>v&&(v+=360);return new d({xmin:v,ymin:g.ymin,xmax:g.xmax-g.xmin+v,ymax:g.ymax,spatialReference:g.spatialReference})}if(this.halfWorldWidth){v=
null!=m?new d({xmin:this.tileInfo.origin.x+this.tileInfo.cols*m*this.resolution.x,ymin:g.ymin,xmax:this.tileInfo.origin.x+this.tileInfo.cols*(m+1)*this.resolution.x,ymax:g.ymax,spatialReference:g.spatialReference}):new d({xmin:g.xmin,ymin:g.ymin,xmax:g.xmax,ymax:g.ymax,spatialReference:g.spatialReference});m=this.normalizeCoordinate(v.xmin,this.halfWorldWidth);var p=m-v.xmin;.01<Math.abs(p)&&(v.xmin=m,v.xmax+=p)}return v||g}},_getIntersect:function(g,m){return new d(Math.max(g.xmin,m.xmin),Math.max(g.ymin,
m.ymin),Math.min(g.xmax,m.xmax),Math.min(g.ymax,m.ymax),g.spatialReference)},_isTileOutSide:function(g,m){var v=!1;if(g.virtual){var p=g.normalizedExtent;if(m=m||(this.xformSetting.requireProjection?this.layer.raster.rasterInfo.extent:this.layer.raster.projectedFullExtent)){g=p.xmin-this.prefetchBufferSize*this.tileInfo.cols*this.resolution.x;v=p.ymin-this.prefetchBufferSize*this.tileInfo.rows*this.resolution.y;var l=p.xmax+this.prefetchBufferSize*this.tileInfo.cols*this.resolution.x;p=p.ymax+this.prefetchBufferSize*
this.tileInfo.rows*this.resolution.y;v=l<=m.xmin||g>=m.xmax||p<=m.ymin||v>=m.ymax}else v=!1}else v=0>g.level||g.row<this.fullBoundary.rowStart||g.row>this.fullBoundary.rowEnd||g.col<this.fullBoundary.colStart||g.col>this.fullBoundary.colEnd;return v},_resolutionEqual:function(g,m){return g===m||g&&m&&Math.abs(g-m)<Math.abs(m/1E4)?!0:!1},_requestTile:function(g){var m=this.identifiers,v;if(this._isTileOutSide(g)){var p=new f;g.updateCompleted=!0;p.resolve(null);p=p.promise}else p=this.layer.raster.rasterFunction?
new h(this.layer.raster.getMemberRasters().map(function(l){return l.read(g)})):new h([this.layer.raster.read(g)]);g.fetch=p;this._fetchCounter++;c(g.src||g._fetched||p,J.hitch(this,function(l){if(v=l&&l.some(function(k){return k[0]})){var n={};l.forEach(function(k,r){n[m[r]]=k[0]&&k[1]?{extent:k[1].extent,pixelBlock:k[1].pixelBlock,width:k[1].width,height:k[1].height}:null});g.src=n}else g.src=null;this._fetchCounter--;0===this._fetchCounter&&(this._fetched=!0);g._fetched=!0;this._updateFetchStatus()}),
J.hitch(this,function(){this._fetchCounter--;0===this._fetchCounter&&(this._fetched=!0);g._fetched=!0;this._updateFetchStatus()}));g.update=this.updateTile(g)},_updateFetchStatus:function(){this.layer._drawTile&&this.fetchAllCompleted&&!this.fetchAllCompleted.isResolved()&&!this.tiles.some(function(g){return!g._fetched})&&(this.tiles.forEach(J.hitch(this,function(g){this._fillPixelData(g)})),this.fetchAllCompleted.resolve())},_fillPixelData:function(g,m){if(g&&!g.updateCompleted)if(Math.abs(g.cellsizeX-
this.resolution.x)>g.cellsizeX/10)g.updateCompleted=!0;else if(!1===this._validateRawPixelBlocks(g))g.updateCompleted=!0;else{var v=g.extent;if(this.layer.roaming||this.layer.useWebGL&&!this.layer._hasTilingEffects){var p=this.fullExtent;var l=this.tileInfo.cols*(this.tileBoundary.colEnd-this.tileBoundary.colStart+1);var n=this.tileInfo.rows*(this.tileBoundary.rowEnd-this.tileBoundary.rowStart+1);m?this.originalPixelData.renderedPixelBlock||(this.originalPixelData.renderedPixelBlock=new e({width:l,
height:n,pixels:[],pixelType:"",mask:null,statistics:[]})):this.identifiers.forEach(J.hitch(this,function(r){this.originalPixelData.src[r].pixelBlock.width=l;this.originalPixelData.src[r].pixelBlock.height=n}))}else p=this.extent,l=this.layer._map.width,n=this.layer._map.height,m?this.originalPixelData.renderedPixelBlock||(this.originalPixelData.renderedPixelBlock=new e({width:l,height:n,pixels:[],pixelType:"",mask:null,statistics:[]})):this.identifiers.forEach(J.hitch(this,function(r){this.originalPixelData.src[r].pixelBlock.width=
l;this.originalPixelData.src[r].pixelBlock.height=n}));if(p.xmax<=v.xmin||p.xmin>=v.xmax||p.ymax<=v.ymin||p.ymin>=v.ymax)return null;var k=this.originalPixelData.isEmpty=!1;this.identifiers.forEach(J.hitch(this,function(r){g.src&&(this._fillPixelBlock(g.src[r],this.originalPixelData.src[r],{extent:p,width:l,height:n,normalizedExtent:g.normalizedExtent},!1),k=!0)}));g.filled=k;this.hasNewData=!0}},_fillPixelBlock:function(g,m,v,p){var l=g.extent,n=v.extent;p=v.width;var k=v.height;if(g.pixelBlock&&
g.pixelBlock.pixels&&g.pixelBlock.pixels[0]){var r=(l.xmax-l.xmin)/g.width,w=Math.max(l.xmin,n.xmin),x=Math.min(l.ymax,n.ymax),D=Math.round((w-l.xmin)/r),G=g.width-Math.round(Math.abs(l.xmax-Math.min(l.xmax,n.xmax))/r),F=Math.round(Math.abs(l.ymax-x)/r),A=g.height-Math.round((Math.max(l.ymin,n.ymin)-l.ymin)/r),y=this.halfWorldWidth;w=Math.round((w-n.xmin)/r);v=v.normalizedExtent;if(!(this.wrapTimes&&y&&l.xmin<-y)){if(this.wrapTimes&&y){if(this.tileInfo.applyGCS360Transform)360<l.xmin&&(w-=this.fullBoundary.paddingLeft);
else if(l.xmin>y){w-=this.fullBoundary.paddingLeft;var z=this.normalizeCoordinate(l.xmin,y);var B=this.normalizeCoordinate(l.xmax,y)}else z=l.xmin,B=l.xmax;this.tileInfo.applyGCS360Transform?v&&360>v.xmin&&360<v.xmax&&(G-=this.fullBoundary.paddingRight):v&&v.xmin<y&&v.xmax>y?G-=this.fullBoundary.paddingRight:z<y&&B>y&&(G-=this.fullBoundary.paddingRight)}z=Math.round(Math.abs(n.ymax-x)/r);B=g.pixelBlock.pixels.length;m=m.pixelBlock;v=g.width;l=m.mask||new Uint8Array(p*k);var C=g.pixelBlock,H=C.mask,
E=0;for(r=0;r<B;r++){x=C.pixels[r];y=m.pixels[r]||new x.constructor(p*k);for(g=F;g<A;g++)for(E=(z+g-F)*p+w,n=D;n<G;n++)y[E+n-D]=x[g*v+n];m.pixels[r]=y}if(H)for(g=F;g<A;g++)for(E=(z+g-F)*p+w,n=D;n<G;n++)l[E+n-D]=H[g*v+n];else for(g=F;g<A;g++)for(E=(z+g-F)*p+w,n=D;n<G;n++)l[E+n-D]=1;m.pixelType=m.pixelType||C.pixelType;m.mask=l;if(!(m.statistics&&0<m.statistics.length))for(m.statistics=[],g=0;g<C.statistics.length;g++)m.statistics[g]={minValue:C.statistics[g].minValue,maxValue:C.statistics[g].maxValue};
else if(C.statistics&&m.statistics)for(g=0;g<m.statistics.length;g++)m.statistics[g].minValue=Math.min(C.statistics[g].minValue,m.statistics[g].minValue),m.statistics[g].maxValue=Math.max(C.statistics[g].maxValue,m.statistics[g].maxValue)}}},_processTile:function(g,m){var v=new f,p=this.layer._hasTilingEffects,l=this.layer.useWebGL,n=p||l,k=this.layer.raster.rasterFunction&&g&&(p||l||!g.processedPixelBlock);if(m)var r=g;else this._fillPixelData(g),r=n?this.originalPixelData:g;this.xformSetting.hasNewTexture=
this.hasNewData;var w;k?(this.identifiers.forEach(function(x){if(0===r.src[x].pixelBlock.pixels.length||0===r.src[x].pixelBlock.pixels[0].length)w=!0}),w?v.resolve({extent:r.extent,processedPixelBlock:r.src[this.identifiers[0]],pixelBlock:r.src[this.identifiers[0]]}):l?(this.processedPixelData=this.layer.raster.rasterFunction.read(r),v.resolve(this.processedPixelData)):this.layer._rasterHandler?this.layer._rasterHandler.process({extent:r.extent,src:r.src}).then(function(x){p?(this.processedPixelData=
x,v.resolve(this.processedPixelData)):(g.processedPixelBlock=x.pixelBlock,v.resolve(g))}):(m=this.layer.raster.rasterFunction.read(g),g.processedPixelBlock=m.pixelBlock,v.resolve(g))):n?v.resolve(r.src[this.identifiers[0]]):(g.pixelBlock=r.src[this.identifiers[0]]&&r.src[this.identifiers[0]].pixelBlock,v.resolve(g));return v.promise},_renderTile:function(g){var m=new f,v=this.layer._hasTilingEffects,p=this.layer.useWebGL,l=Math.abs((g.extent.xmax-g.extent.xmin)/g.width-this.layer.getCurrentResolution().x)>
this.resolution.x/10;l=this.layer.useWebGL&&(l||this._isTileOutSide(g,this.layer._map.extent));this.xformSetting.hasNewTexture=this.hasNewData;this.layer._rasterRenderer&&g&&(g.texture||g.src||g.pixelBlock||g.processedPixelBlock)?(this.layer._rasterRenderer.interpolation=this.layer.interpolation,p&&!l?(this.layer.raster.rasterFunction&&this.layer.raster.rasterFunction.renderTexture||this.layer._rasterRenderer.draw(g),m.resolve(g)):this.layer._rasterHandler?this.layer._rasterHandler.render({extent:g.extent,
pixelBlock:g.processedPixelBlock||g.pixelBlock}).then(function(n){v?(n.renderedPixelBlock=n.pixelBlock,m.resolve(n)):(g.renderedPixelBlock=n.pixelBlock,m.resolve(g))}.bind(this)):(g.renderedPixelBlock=this.layer._rasterRenderer.draw(g).pixelBlock,m.resolve(g))):(g.renderedPixelBlock=g.processedPixelBlock||g.pixelBlock,m.resolve(g));return m.promise},_sortTiles:function(){this.tiles.sort(function(g,m){return g.row<m.row||g.row==m.row&&g.col<m.col?-1:1})}})})},"arcgisonline/sharing/dijit/dialog/getWMTSConfig":function(){define("dojo/Deferred dojo/json dojo/_base/array dojo/_base/lang esri/renderers/SimpleRenderer esri/symbols/jsonUtils esri/SpatialReference esri/geometry/Extent arcgisonline/map/core/sameSpatialReference arcgisonline/map/core/projectExtent".split(" "),
function(S,J,f,c,h,d,b,a,e,q){function t(g){var m=new S;u(g.selectedLayer.gcsExtent,g.selectedTileInfo.fullExtent).then(function(v){m.resolve(v&&v.toJson())});return m}function u(g,m){var v=new S;m=m.spatialReference||new b({wkid:4326});handler=c.hitch(this,function(p){v.resolve(p&&p.length&&p[0]&&p[0].type&&"extent"===p[0].type?p[0]:null)});q(g,m,handler,handler);return v}return function(g){var m=new S,v=g.selectedLayer||{},p=g.selectedTileInfo||{},l;t(g).then(c.hitch(this,function(n){var k=g.selectedLayer;
var r=g.selectedTileInfo,w=-1<dojo.indexOf(k.formats,"image/png")?"image/png":k.formats[0];g.resourceUrls=k.resourceUrls;k=g.getTileUrlTemplate({identifier:k.identifier,tileMatrixSet:r.tileMatrixSet,format:w});(r=g.copyright)&&"none"!==r.toLowerCase()?180<r.length&&(r=r.substring(0,180)+".."):r="";w=n||g.selectedTileInfo.fullExtent;var x=g.selectedTileInfo.tileInfo||{};if(96!==x.dpi){for(var D=0;D<x.lods.length;D++){var G=x.lods[D];G.scale=96*G.scale/x.dpi}x.dpi=96}x=x.toJson();l={templateUrl:k,copyright:r,
fullExtent:w,tileInfo:x,wmtsInfo:{url:g.wmtsUrl,layerIdentifier:v.identifier,tileMatrixSet:p.tileMatrixSet}};m.resolve({wmtsConfig:l,fullExtent:n})}));return m}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromFSUrl":function(){define(["arcgisonline/map/thumbnail/buildThumbnailURLFromFSItem"],function(S){return function(J,f){return S({url:J,extent:f})}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromWFSItem":function(){define(["dojo/Deferred","dojo/_base/lang","./buildThumbnailURLFromWebMap",
"./getItemData","arcgisonline/sharing/util"],function(S,J,f,c,h){return function(d,b){var a={};a.baseMap=esriGeowConfig.defaultBasemap||esriGeowConfig.self.defaultBasemap;a.baseMap.title="basemap";for(var e=a.baseMap.baseMapLayers.length,q=0;q<e;q++){var t=a.baseMap.baseMapLayers[q];if(!t.isReference){!esriGeowConfig.allSSL&&"https:"!=location.protocol||!h.isHostedService(t.url)&&!h.supportsHttps(t.url)||(t.url=t.url.replace("http:","https:"));t.visibility=!1;a.baseMap.baseMapLayers=[t];break}}a.operationalLayers=
[];var u=new S;e=function(g){g.type="WFS";g.layerType="WFS";g.opacity=1;g.visibility=!0;g.id="wfs_xxx";g.wfsInfo.maxFeatures=g.wfsInfo.maxFeatures||100;a.operationalLayers.push(g);f(a,b||d.extent,J.hitch(this,function(m){u.resolve(m)}),J.hitch(this,function(m){u.reject(m)}))};d.id?c(d.id,J.hitch(this,e),J.hitch(this,e)):e();return u}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromWMTSItem":function(){define(["dojo/Deferred","dojo/_base/lang","./buildThumbnailURLFromWebMap","./getItemData"],function(S,
J,f,c){return function(h,d){var b=new S,a=function(e){var q={baseMap:{}};q.baseMap.title="basemap";q.baseMap.baseMapLayers=[];q.operationalLayers=[];e.opacity=1;e.visibility=!0;e.layerType="WebTiledLayer";e.type="WebTiledLayer";q.baseMap.baseMapLayers.push(e);f(q,d||h.extent,J.hitch(this,function(t){b.resolve(t)}),J.hitch(this,function(t){b.reject(t)}))};h.id?c(h.id,J.hitch(this,a),J.hitch(this,a)):a();return b}})},"arcgisonline/sharing/dijit/dialog/_PublishImageCollection":function(){define("require exports tslib ../../../esriGeowConfig ../../util arcgisonline/sharing/dijit/dialog/_CreateItemUtilMixin dojo/Deferred dojo/_base/lang".split(" "),
function(S,J,f,c,h,d,b,a){Object.defineProperty(J,"__esModule",{value:!0});J.PublishImageCollection=void 0;c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);S=function(){function e(){}e.findTemplate=function(){var q=c.default.portal,t=new b.default;q.queryGroups({q:'title: "Esri Layer Templates" AND owner: "esri_en"',num:1},!0).then(function(u){return(null===u||void 0===u?0:u.total)?u.results.shift():null}).then(function(u){u={q:'title:"Points" group:"'.concat(u.id,
'" AND type:"Layer Template" -type:"Attachment"'),num:1};return q.queryItems(u,!0).then(function(g){return(null===g||void 0===g?0:g.total)?g.items.shift():null})}).then(function(u){u.getData().then(function(g){t.resolve(g)})});return t};e.createService=function(q){var t=this,u,g,m=new b.default,v=this._item,p=a.default.mixin(a.default.clone(q),{name:v.name}),l=c.default.portal,n=JSON.stringify({layers:null!==(u=p.layers)&&void 0!==u?u:[],tables:null!==(g=p.tables)&&void 0!==g?g:[]});delete p.layers;
delete p.tables;delete p.initialExtent;delete p.fullExtent;delete p._ssl;u={createParameters:JSON.stringify(p),targetType:"featureService"};d.default.createService(v,u,n,l).then(function(k){t._service=a.default.mixin(q,k.createResult,{id:k.createResult.itemId});m.resolve(k)},function(k){m.reject(k)});return m};e.moveService=function(){var q=this._service,t=this._item,u=c.default.portal,g=new b.default;t.ownerFolder&&"/"!==t.ownerFolder&&"root"!==t.ownerFolder?d.default.moveItem(q,t.ownerFolder,u).then(function(){g.resolve(q)},
function(m){g.reject(m)}):g.resolve(q);return g};e.appendPhotos=function(){var q,t=this._service,u=t.layers.shift();u=t.encodedServiceURL+"/"+(null!==(q=u.id)&&void 0!==q?q:0)+"/append";q={appendItemId:this._item.id,appendUploadFormat:"imageCollection",appendAttachmentsInfo:JSON.stringify({ignoreAttachmentsWithoutLocation:!0}),upsert:!1,useGlobalIds:!1,rollbackOnFailure:!0};var g=new b.default;h.default.request({url:u,content:q},{usePost:!0}).then(function(m){g.resolve(a.default.mixin(t,m))},function(m){g.reject(m)});
return g};e.addRelationship=function(){var q,t=this._service,u=this._item,g=(null===(q=c.default.portal)||void 0===q?void 0:q.portalUser).userContentUrl;q={relationshipType:"Service2Data",destinationItemId:u.id,originItemId:t.id};var m=new b.default;h.default.request({url:g+"/addRelationship",content:q},{usePost:!0}).then(function(){m.resolve(t)},function(v){m.reject(v)});return m};e.checkStatus=function(q,t,u){var g=null===q||void 0===q?void 0:q.statusUrl,m=null!==u&&void 0!==u?u:new b.default,v=
null!==t&&void 0!==t?t:500;h.default.request({url:g}).then(function(p){var l,n;p=null!==p&&void 0!==p?p:{status:"completed"};"completed"===(null===(l=p.status)||void 0===l?void 0:l.toLowerCase())?m.resolve(!0):"failed"===(null===(n=p.status)||void 0===n?void 0:n.toLowerCase())||p.error||400<p.code||""===p.status?m.reject(p):(v=(null!==v&&void 0!==v?v:500)+125,setTimeout(function(){e.checkStatus(q,v,m)},t))},function(p){m.reject(p)});return m};e.publish=function(q){var t=this,u=new b.default;e._item=
null!==q&&void 0!==q?q:{};e.findTemplate().then(e.createService.bind(e)).then(e.moveService.bind(e)).then(e.appendPhotos.bind(e)).then(e.addRelationship.bind(e)).then(e.checkStatus.bind(e)).then(function(){u.resolve(t._service)},function(g){u.resolve(a.default.mixin(t._service,{error:g}))});return u};return e}();J.PublishImageCollection=S})},"arcgisonline/sharing/dijit/dialog/PublishWizard":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/cookie dojo/on dojo/json dojo/_base/array dijit/registry dijit/_Widget dijit/_Templated dijit/form/RadioButton dijit/form/Select dijit/form/TextBox dijit/form/NumberTextBox dojo/Deferred dojo/promise/all dojo/aspect dojo/Evented dojo/_base/kernel put-selector/put dgrid/OnDemandGrid dgrid/Selection dgrid/editor dojo/store/Memory dojo/store/Observable dojox/widget/Wizard dojox/widget/WizardPane dojo/_base/event dojo/keys dojo/topic arcgisonline/sharing/geow/Account arcgisonline/sharing/geow/Folder arcgisonline/sharing/util arcgisonline/sharing/dijit/dialog/GeneralDlg arcgisonline/sharing/dijit/dialog/BrowseItemsDlg arcgisonline/sharing/dijit/dialog/ItemPropertiesDlg arcgisonline/sharing/dijit/dialog/PluginLayerTemplates arcgisonline/sharing/dijit/dialog/PluginFeatureServices arcgisonline/sharing/dijit/dialog/PublishTileServiceDlg arcgisonline/sharing/dijit/dialog/_HighAccuracyFields arcgisonline/pages/pageUtil arcgisonline/pages/utils/arrays arcgisonline/pages/utils/categories arcgisonline/pages/utils/number esri/dijit/Tags esri/layers/ArcGISTiledMapServiceLayer esri/layers/ImageParameters esri/map esri/config esri/lang arcgisonline/map/popup/getDefaultPopupInfo esri/geometry/Extent esri/SpatialReference esri/geometry/webMercatorUtils ../../../map/core/sameSpatialReference ../../../map/core/projectExtent ../../../esriGeowConfig dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E,K,I,L,M,N,P,R,Y,ja,aa,da,ra,ca,fa,la,ta,Q,T,O,Z,na,ia,X,ha,V,ea,U,ka,ma,sa){return S("arcgisonline.sharing.dijit.dialog.PublishWizard",[C],{baseClass:"esriPublishingWizard esriItemLinks",hideDisabled:!0,onDone:function(){},onCancel:function(){},cancelFunction:function(){this.onCancel()},postMixInProperties:function(){this.inherited(arguments);this.i18n=J.mixin({},sa.common);this.i18n=J.mixin(this.i18n,sa.publishWizard);this.i18n=
J.mixin(this.i18n,sa.publishTileServiceDlg);this.i18n2=J.mixin({},sa.addItemFrm);this.i18n.errors.serviceNameExists=this.i18n2.errors.serviceNameExists;this.i18n.errors.invalidCharactersService=this.i18n2.errors.invalidCharactersService;this.previousButtonLabel=this.i18n.previousButtonLabel;this.nextButtonLabel=this.i18n.nextButtonLabel;this.doneButtonLabel=this.i18n.doneButtonLabel;this.cancelButtonLabel=this.i18n.cancelButtonLabel},postCreate:function(){this._account=L;this._util=N;this._folder=
M;this._errorDlg=P.prototype.statics.getInstance();this._init();f.add(this.nextButton.domNode,["calcite","primary"]);f.add(this.cancelButton.domNode,["calcite","cancel"]);f.add(this.previousButton.domNode,["calcite","default","btn-back"]);f.add(this.doneButton.domNode,["calcite","primary"]);this._spinner=d.create("span",{"class":"spinner hide",innerHTML:this.i18n.pleaseWait},b(".dojoxWizardButtons",this.domNode)[0],"first");document.documentElement.scrollTop=document.body.scrollTop=(document.documentElement.scrollTop||
document.body.scrollTop)+1;this.inherited(arguments)},destroy:function(){for(var pa;pa=this._connects.pop();)pa.remove();for(;pa=this._panes.pop();)this.removeChild(pa),pa.destroyRecursive();this.inherited(arguments)},_init:function(){this._account.getSelf(J.hitch(this,function(){na.defaults.io.proxyUrl=ma.proxyServer;this._connects=[];this._panes=[];this._loadConnections();this._user=this._util.getUser();this._restBaseUrl=ma.allSSL?ma.restBaseUrl.replace("http:/","https:/"):ma.restBaseUrl;this._restBaseUrl+=
this._restBaseUrl.lastIndexOf("/")===this._restBaseUrl.length-1?"":"/";this._contentUrl=this._restBaseUrl+"content";this._publishUrl=this._contentUrl+"/users/"+this._user.username;this._defaultExtent=ma.self.defaultExtent;this._tileGalleryQueryParams={query:'type:"Feature Service" AND typekeywords:"Hosted Service" AND -typekeywords:"webmap_2.1" AND -typekeywords:"Spatiotemporal" AND orgid:"'+this._user.orgId+'" AND owner:"'+this._user.username+'"'};this._svcQueryParams={q:'type:"Feature Service" AND typekeywords: "Hosted Service" AND orgid:'+
this._user.orgId,num:100,start:0,sortField:"title",sortOrder:"asc"};this._tQueryParams={q:'type:"Layer Template" AND typekeywords: "Service template"',num:100,start:0,sortField:"title",sortOrder:"asc"};this._editingInfo={hasStaticData:!1,capabilities:"Query,Editing,Create,Update,Delete",allowGeometryUpdates:!0};this.addChild(this._galleryPane(this.itemType));"features"===this.itemType?(this.addChild(this._layersPane()),this.addChild(this._extentPane()),this.addChild(this._itemDetailsPane())):this.addChild(this._tilesPane())}),
null)},_loadConnections:function(){this.own(I.subscribe("/esri/disable",J.hitch(this,function(pa,Aa){this._disable(pa,Aa||sa.common.pleaseWait)})),I.subscribe("/esri/browseitems/close",J.hitch(this,function(pa){"on-next"===pa?(this._infoPanelShowing=!1,this.nextButton.onClick(),this._showCancelButton(!1)):"on-view-item"===pa&&window.open("item.html?id\x3d"+this._browseDlg.get("selection").id)})),I.subscribe("/esri/browseitems/showInfoTemplate",J.hitch(this,function(pa){this._infoPanelShowing=pa;this._showCancelButton(this._infoPanelShowing)})));
w.after(this,"_checkButtons",function(){this.nextButton.set("disabled",this.selectedChildWidget.isLastChild);this._showCancelButton(this._infoPanelShowing);this._setButtonClass(this.nextButton);this.selectedChildWidget.isFirstChild&&"fromUrl"!==this._selectedTab&&(this.nextButton.domNode.style.display="none")})},_setButtonClass:function(pa){f.contains(pa.domNode,"btn-back")?pa.domNode.style.visibility=this.hideDisabled&&pa.disabled?"hidden":"visible":this.inherited(arguments)},_showCancelButton:function(pa){"features"!==
this.itemType&&(this.cancelButton.domNode.style.display=pa?"none":"")},_galleryPane:function(pa){return"features"===pa?this._galleryPaneFeatures():this._galleryPaneTiles()},_galleryPaneFeatures:function(pa){pa=new H({canGoBack:!1});var Aa=document.createDocumentFragment(),za,Ba={fromExisting:"from existing layer",fromTemplate:"from template",fromUrl:"from url"};this._browseDlg=za=new R({messageLeft:sa.browseItemsDlg.instructionsLeft,messageRight:this.i18n.selectFeatureLayerTemplate,item:J.mixin(this.item,
{tags:""}),"class":"esriBrowseItemsDlg"});this._telemetryAttribute=Ba.fromTemplate;this._isTemplateSelected=!0;this._selectedTab="fromTemplate";var ua=d.create("div",{id:"galleryTabs","class":"galleryTabs tabs-transparent tab-nav"},Aa);d.create("a",{"class":"esriPublishTab tab-title selected is-active",id:"fromTemplate",href:"#",innerHTML:this.i18n.fromTemplate},ua);d.create("a",{"class":"esriPublishTab tab-title",id:"fromExisting",href:"#",innerHTML:this.i18n.fromLayer},ua);d.create("a",{"class":"esriPublishTab tab-title",
id:"fromUrl",href:"#",innerHTML:this.i18n.fromUrl},ua);var Fa=d.create("div",{id:"templateContent","class":"templateContent withTabs tab-contents padding-leader-quarter"},Aa);var va=d.create("div",{id:"fromUrlDiv","class":"fromUrl padding-leader-quarter hide"},Aa);za.addPlugin("arcgisonline/sharing/dijit/dialog/PluginLayerTemplates");d.place(za.domNode,Fa);d.create("p",{innerHTML:this.i18n.chooseUrl},va);d.create("label",{"for":"fromUrlInput","class":"esriTrailingMargin1 trailer-0",innerHTML:this.i18n.urlItemLbl},
va);var xa=new l({id:"fromUrlInput",name:"url",trim:"true",placeHolder:this.i18n.urlItemPlaceHolder},d.create("span",{},va));e(ua,"click",J.hitch(this,function(Da){Da.preventDefault();b("a",ua).forEach(function(Ca){f.remove(Ca,"selected");f.remove(Ca,"is-active")});f.add(Da.target,"selected");f.add(Da.target,"is-active");f.add(Fa,"hide");f.add(va,"hide");this._selectedService=null;this._isTemplateSelected="fromTemplate"===Da.target.id;za&&(za.destroyRecursive(),za=null);this._selectedTab=Da=Da.target.id;
this._telemetryAttribute=Ba[Da];this.nextButton.domNode.style.display="fromUrl"!==Da?"none":"";"fromExisting"===Da?(this._browseDlg=za=new R({message:this.i18n.selectTemplate,item:J.mixin(this.item,{tags:""}),"class":"esriBrowseItemsDlg"}),za.addPlugin("arcgisonline/sharing/dijit/dialog/PluginFeatureServices"),d.place(za.domNode,Fa),f.remove(Fa,"hide"),za.set("message",this.i18n.selectExistingLayer)):"fromTemplate"===Da?(this._browseDlg=za=new R({messageLeft:sa.browseItemsDlg.instructionsLeft,messageRight:this.i18n.selectFeatureLayerTemplate,
item:J.mixin(this.item,{tags:""}),"class":"esriBrowseItemsDlg"}),za.addPlugin("arcgisonline/sharing/dijit/dialog/PluginLayerTemplates"),d.place(za.domNode,Fa),f.remove(Fa,"hide"),za.set("messageLeft",sa.browseItemsDlg.instructionsLeft),za.set("messageRight",this.i18n.selectTemplate)):(f.remove(va,"hide"),xa.set("value",""))}));this._connect(xa,"change",J.hitch(this,function(Da){if(Da){var Ca=/(\/(FeatureServer)).*/ig;Da=Da.split("?")[0];var qa=Da.replace(/http.+\/(arcgis\/rest\/services|arcgis\/services)\/?/ig,
"").match(Ca);qa=qa&&qa.length?qa[0].split("/")[1]:null;var W=Da.toLowerCase().indexOf("/featureserver");qa?(Da=Da.substring(0,W)+"/FeatureServer",/(http|https):\/\/?/.exec(Da)||(Da="http://"+Da),xa.set("value",Da),this._selectedService={name:Da.replace(Ca,"").replace(/^.*\//,"").replace(/\?.*$/,""),svcUrl:Da}):(this._svcErr={id:Da,error:this.i18n.errors.unknownService},this._showError(this.i18n.errors.unknownService))}}));pa.passFunction=J.hitch(this,function(){var Da=za&&za.get("selection")||this._selectedService;
return Da?(this._selectedService=this._isTemplateSelected?J.mixin(Da,{svcUrl:this._restBaseUrl+"content/items/"+Da.id+"/data"}):J.mixin(Da,{svcUrl:Da.svcUrl||Da.url}),!0):this._showError("fromExisting"===this._selectedTab?this.i18n.errors.noSelectedService:"fromTemplate"===this._selectedTab?this.i18n.errors.noSelectedTemplate:this.i18n.errors.noLayerUrl)});pa.set("content",Aa);this._panes.push(pa);return pa},_showHelpLink:function(pa,Aa,za){var Ba=b(".esriBrowseItems .icon-ui-question",this.domNode).shift();
pa=pa?"remove":"show";Aa&&h.set(Ba,"title",Aa);za&&h.set(Ba,"href",za);f[pa](Ba,"hide")},_galleryPaneTiles:function(){var pa=new H({canGoBack:!1}),Aa=document.createDocumentFragment(),za;var Ba=d.create("div",{id:"templateContent","class":"templateContent"},Aa);this._browseDlg=za=new R({message:this.i18n.errors.noSelectedService.message,itemQuery:this._tileGalleryQueryParams,item:J.mixin(this.item,{tags:""}),"class":"esriBrowseItemsDlg"});d.place(za.domNode,Ba);za.set("message",this.i18n.errors.noSelectedService.message);
pa.passFunction=J.hitch(this,function(){var ua=za&&za.get("selection")||this._selectedService;return ua&&ua.url?(ua.url!==(this._selectedService&&this._selectedService.url)&&(this._featureServiceJson=null,this._isUserDefinedTileInfo=!1,this.userDefinedTileInfo=null,this._selectedService=J.mixin(ua,{svcUrl:ua.svcUrl||ua.url})),!0):ua?this._showError(this.i18n.errors.noItemUrl):this._showError(this.i18n.errors.noSelectedService)});pa.set("content",Aa);this._panes.push(pa);return pa},_tilesPane:function(){var pa=
new H({canGoBack:!0}),Aa=document.createDocumentFragment(),za=new da({message:this.i18n.itemDetails,showFolders:!0,type:"tiles"});d.place(za.domNode,Aa);e(pa,"show",J.hitch(this,function(){this._fetchItem(this._selectedService.id).then(J.hitch(this,function(Ba){this._selectedService=J.mixin(this._selectedService,Ba);za.set("item",this._selectedService);ma.self.hasCategorySchema&&za.set("categories",this._selectedService.categories)}),J.hitch(this,function(Ba){this._showError(Ba)}))}));e(za.domNode,
"keyup",J.hitch(this,function(Ba){Ba.keyCode===K.ENTER&&(E.stop(Ba),pa.doneFunction())}));pa.doneFunction=J.hitch(this,function(){this._disable(!0,sa.publishTileServiceDlg.publishingTileService);za._validate().then(J.hitch(this,function(){za.publishService().then(J.hitch(this,function(Ba){this.onDone(Ba,this._telemetryAttribute)}))}))});pa.set("content",Aa);this._panes.push(pa);return pa},_setCalculatedScales:function(pa,Aa,za){var Ba=za.lods,ua=za.minLevel+2<Ba.length?za.minLevel+2:Ba.length-1;Aa.set("value",
Ba[-1<za.maxLevel-2?za.maxLevel-2:0].level);pa.set("value",Ba[ua].level)},_layersPane:function(){var pa=new H({canGoBack:!0}),Aa=document.createDocumentFragment(),za;d.create("div",{innerHTML:this.i18n.details},Aa);d.create("br",{},Aa);var Ba=d.create("div",{"class":"layerDetails"},Aa),ua=d.create("div",{"class":"grid layerGrid table-layout"},Ba);d.create("label",{innerHTML:this.i18n.layersLbl},ua);var Fa=[y({field:"visible",autoSave:!0},"checkbox"),y({field:"name",editOn:"click",autoSave:!0},"text")];
this._layerStore=new B(new z({data:[]}));this._layersGrid=new (S([F,A]))({selectionMode:"none",store:this._layerStore,showHeader:!1,pagingLinks:2,loadingMessage:this.i18n.loadingMessage,columns:Fa},d.create("div",{},ua));this._layersGrid.startup();d.create("br",{},Ba);ua=d.create("label",{innerHTML:this.i18n.gpsMetadataLabel,"class":"hide esriHighAccuracy js-highAccuracy"},Ba);this._highAccuracyCheckbox=d.create("input",{type:"checkbox","class":"hide  js-highAccuracy",checked:!1,disabled:!1},ua,"first");
Ba=d.create("label",{innerHTML:this.i18n.contansZValues,"class":"hide esriContainsZ js-containsZ"},Ba);this._containsZCheckbox=d.create("input",{type:"checkbox","class":"hide  js-containsZ",checked:!1,disabled:!1},Ba,"first");e(pa,"show",J.hitch(this,function(){b(".js-highAccuracy",this.domNode)[this._hasPointLayer?"removeClass":"addClass"]("hide");b(".js-containsZ",this.domNode)[this._isTemplateSelected?"removeClass":"addClass"]("hide");if(this._svcErr||za!==this._selectedService.svcUrl){this._selectedService.svcUrl=
this._selectedService.svcUrl.replace(/\d+$/,"");if((za=this._selectedService.svcUrl)&&-1<za.toLowerCase().indexOf("/mapserver"))return this._showError(this.i18n2.errors.unknownAGSType);setTimeout(J.hitch(this,function(){h.set(this._highAccuracyCheckbox,"checked",!1);h.set(this._containsZCheckbox,"checked",!1);this._updateServiceDetails(za)}),250)}}));pa.passFunction=J.hitch(this,function(){return this._svcErr||!this._featureServiceJson?this._showError(this.i18n.errors.selectService):this._layerStore&&
0>=this._layerStore.query({visible:!0}).length?this._showError(this.i18n.errors.selectLayers):!0});pa.set("content",Aa);this._panes.push(pa);return pa},_showLoadingMessage:function(pa){pa?(this._loadingNode=G(this._layersGrid.preload.node,"-div.dgrid-loading[style\x3dheight:20px]"),G(this._loadingNode,"div.dgrid-below").innerHTML=this._layersGrid.loadingMessage):G(this._loadingNode,"!")},_extentPane:function(){var pa=new H({canGoBack:!0}),Aa=document.createDocumentFragment(),za=d.create("div",{"class":"extentDetails"},
Aa);d.create("div",{innerHTML:this.i18n.extentDetails},za);d.create("br",{},za);var Ba=d.create("div",{style:{width:"80%",height:"65%"}},za),ua=d.create("div",{"class":"esriLeadingMargin15",style:{width:"100%",height:"100%"}},Ba);d.create("br",{},za);za=d.create("fieldset",{},za);d.create("label",{"for":"extentLeft",innerHTML:this.i18n.extentLeftLbl},za);var Fa=new n({name:"extentLeft",trim:"true","class":"extent",constraints:{min:-180,max:180,pattern:"###.###"},invalidMessage:this.i18n.errors.errorLon,
rangeMessage:this.i18n.errors.errorLon,required:!0,placeHolder:this.i18n.extentLeftPlaceHolder},d.create("input",{},za));d.create("label",{"for":"extentRight",innerHTML:this.i18n.extentRightLbl},za);var va=new n({name:"extentRight",trim:"true","class":"extent",constraints:{min:-180,max:180,pattern:"###.###"},invalidMessage:this.i18n.errors.errorLon,rangeMessage:this.i18n.errors.errorLon,required:!0,placeHolder:this.i18n.extentRightPlaceHolder},d.create("input",{},za));d.create("br",{},za);d.create("label",
{"for":"extentTop",innerHTML:this.i18n.extentTopLbl},za);var xa=new n({name:"extentTop",trim:"true",constraints:{min:-90,max:90,pattern:"##.###"},invalidMessage:this.i18n.errors.errorLat,rangeMessage:this.i18n.errors.errorLat,required:!0,"class":"extent",placeHolder:this.i18n.extentTopPlaceHolder},d.create("input",{},za));d.create("label",{"for":"extentBottom",innerHTML:this.i18n.extentBottomLbl},za);var Da=new n({name:"extentBottom",trim:"true",constraints:{min:-90,max:90,pattern:"##.###"},invalidMessage:this.i18n.errors.errorLat,
rangeMessage:this.i18n.errors.errorLat,required:!0,"class":"extent",placeHolder:this.i18n.extentBottomPlaceHolder},d.create("input",{},za));pa.passFunction=J.hitch(this,function(){var Ca=!1;return(Ca=b(".extent").map(u.byNode).every(function(qa){return!isNaN(qa.get("value"))&&qa.isValid()}))?Ca:this._showError(this.i18n.errors.invalidExtent)});e(pa,"show",J.hitch(this,function(){if(!this.map){this.map=new Z(ua,{showAttribution:!1,extent:this._serviceExtent,wrapAround180:!0});this._connect(this.map,
"extent-change",J.hitch(this,function(qa){qa=this.map.extent;4326!==qa.spatialReference.wkid&&(qa=this._fixExtent(qa));this._serviceExtent=this._clipExtent(qa);Fa.set("value",this._serviceExtent.xmin,!1);Da.set("value",this._serviceExtent.ymin,!1);va.set("value",this._serviceExtent.xmax,!1);xa.set("value",this._serviceExtent.ymax,!1)}));var Ca=new O;Ca.format="png24";Ca=new T(ma.extentService,{imageParameters:Ca});this.map.addLayer(Ca);this._connect(Ca,"update",J.hitch(this,function(){this.map.reposition()}));
Ca=function(qa,W,ba){isNaN(ba)||!qa.isValid()?qa.set("value",this._serviceExtent[W]):this._serviceExtent[W]!==ba&&(this._serviceExtent.update(Fa.get("value"),Da.get("value"),va.get("value"),xa.get("value"),this._serviceExtent.spatialReference),this.map.setExtent(this._serviceExtent))};e(Fa,"change",J.hitch(this,Ca,Fa,"xmin"));e(Da,"change",J.hitch(this,Ca,Da,"ymin"));e(va,"change",J.hitch(this,Ca,va,"xmax"));e(xa,"change",J.hitch(this,Ca,xa,"ymax"));Fa.focus()}}));pa.set("content",Aa);this._panes.push(pa);
return pa},_itemDetailsPane:function(){var pa=new H({canGoBack:!0}),Aa=document.createDocumentFragment(),za=new Y({message:this.i18n.itemDetails,typeInfo:"featureserver",showFolders:!0,showFile:!1,showUrl:!1,item:{}});d.place(za.domNode,Aa);this.itemPropertiesDlg=za;e(za.domNode,"keyup",J.hitch(this,function(Ba){Ba.keyCode===K.ENTER&&Ba.target&&!f.contains(Ba.target,"dijitTextArea")&&Ba.target.id&&-1===Ba.target.id.indexOf("filter-")&&(E.stop(Ba),pa.doneFunction())}));e(pa,"show",J.hitch(this,function(){var Ba=
this._selectedService||{};za.set("summary","fromUrl"===this._selectedTab?Ba.serviceDescription||"":this._isTemplateSelected?"":Ba.snippet||Ba.description);za.set("tags",Ba.tags);ma.self.hasCategorySchema&&za.set("categories",Ba.categories);za.set("focus","title")}));pa.doneFunction=J.hitch(this,function(){za._validate().then(J.hitch(this,function(Ba){var ua=za.get("item");if(/(:|&|<|>|%|#|\?|\\|"|\/|\+)/.test(ua.title))return this._showError(this.i18n.errors.invalidCharactersService);this._content=
{title:ua.title,snippet:ua.snippet,description:"fromUrl"===this._selectedTab?this._selectedService.description:null,tags:ua.tags,folder:ua.folderId,extent:this._extent2String(this._serviceExtent||this._selectedService.extent),thumbnailURL:this._getThumbnailUrl(this._serviceExtent||this._selectedService.extent)};this._itemCategories=ma.self.hasCategorySchema&&za._categories?za._categories.getCategories(!0):void 0;Ba=this._selectedService.typeKeywords||null;this._isTableOnlyTemplate=this._isTemplateSelected&&
fa.includes(Ba||[],"sourceId#Table")||!1;if(Ba&&Ba.length)for(var Fa=Ba.length-1;Fa--;)Ba[Fa].match(/(sourceId#|Singlelayer|Multilayer|Table).*/ig)&&Ba.splice(Fa,1);!0===this._highAccuracyCheckbox.checked&&(Ba=Ba&&Ba.length?Ba.concat(["gpsMetadataEnabled"]):["gpsMetadataEnabled"],this._isTemplateSelected&&this._selectedService&&this._selectedService.title&&(Ba=fa.concatUnique(Ba,[this._selectedService.title])));this._selectedService.typeKeywords=Ba;this._userContentUrl=this._publishUrl+(this._content.folder&&
"/"!==this._content.folder?"/"+this._content.folder:"");"features"===this.itemType&&(this._selectedService&&this._selectedService.typeKeywords&&(this._content.typeKeywords=this._selectedService.typeKeywords.join(","),-1!==t.indexOf(this._selectedService.typeKeywords,"Service Template")||-1!==t.indexOf(this._selectedService.typeKeywords,"Collector"))&&(this._editingInfo=J.mixin(this._editingInfo,{capabilities:"Query,Editing,Create,Update,Delete,Sync",syncEnabled:!0})),this._util.isPortal()&&this._isTemplateSelected&&
(this._content.typeKeywords+=",providerSDS"));this._disable(!0,"features"===this.itemType?this.i18n.pleaseWait:this.i18n.creatingTileLayer);this._serviceNameAvailable(ua.title).then(J.hitch(this,function(){"features"===this.itemType?this._isTemplateSelected?this._publishService():this._getItemData(this._selectedService).then(J.hitch(this,"_publishService")):this._publishService(ua)}))}),J.hitch(this,function(Ba){return this._showError(Ba)}))});pa.set("content",Aa);this._panes.push(pa);return pa},
_publishService:function(pa){var Aa=new ha(ea.geographicToWebMercator(this._serviceExtent).toJson()),za=this._featureServiceJson.service.editorTrackingInfo||{},Ba=this._featureServiceJson.service&&this._featureServiceJson.service.spatialReference,ua=this._userContentUrl,Fa=!0===this._highAccuracyCheckbox.checked,va=this._unique(this._editingInfo.capabilities.split(",").concat(this._featureServiceJson.service.capabilities.split(",")));this._featureServiceJson.service=J.mixin(this._featureServiceJson.service,
J.mixin(this._editingInfo,{capabilities:va.join(",")}));-1!==t.indexOf(this._selectedService.typeKeywords,"Service Template")||-1!==t.indexOf(this._selectedService.typeKeywords,"Collector")?J.mixin(this._featureServiceJson.service.editorTrackingInfo||{},{enableEditorTracking:!0,enableOwnershipAccessControl:!1,allowOthersToUpdate:!0,allowOthersToDelete:!0}):J.mixin(this._featureServiceJson.service.editorTrackingInfo||{},{allowOthersToDelete:ia.isDefined(za.allowOthersToDelete)?za.allowOthersToDelete:
!0,allowOthersToUpdate:ia.isDefined(za.allowOthersToUpdate)?za.allowOthersToUpdate:!0});this._project(Aa,Ba).then(J.hitch(this,function(xa){this._selectedLayerIds=[];this._layers=t.map(this._layerStore.query({visible:!0}),J.hitch(this,function(Ca){var qa=J.mixin({},Ca);this._selectedLayerIds.push(qa.id);qa=J.mixin(qa,this._editingInfo);t.forEach(["_ssl","visible","__isDirty"],J.hitch(this,function(W){delete qa[W]}));"Feature Layer"===qa.type&&(qa.extent=xa,qa.name=this._layerStore.get(Ca.id).name,
qa.adminLayerInfo={geometryField:{name:"Shape",srid:xa.spatialReference.wkid}});Fa&&"esriGeometryPoint"===qa.geometryType&&(qa.fields=this._getHighAccuracyFieldDefs(qa.fields||[]));!0===this._containsZCheckbox.checked&&(qa.hasZ=!0,qa.enableZDefaults=!0,qa.zDefault=0);return qa}));Fa&&(pa=this._addHighAccuracyPopups(pa,this._layers));delete this._featureServiceJson.service.fullExtent;delete this._featureServiceJson.service.initialExtent;if(pa){var Da=this._fixLayerIds(pa);Da&&(Da.tables=(Da.tables||
[]).concat((Da.layers||[]).filter(function(Ca){return(Ca=this._findLayer(Ca.id,this._layers))&&"Table"===Ca.type}.bind(this))),Da.layers=(Da.layers||[]).filter(function(Ca){return(Ca=this._findLayer(Ca.id,this._layers))&&"Table"!==Ca.type}.bind(this)),this._content.text=q.stringify(Da))}else this._layers=this._fixLayerIds({layers:this._layers}).layers;this._featureServiceJson.service=J.mixin(this._featureServiceJson.service,{name:this._content.title.replace(/ /g,"_")});delete this._featureServiceJson.service.layers;
delete this._featureServiceJson.service.tables;delete this._content.folder;this._disable(!0);this._createService(ua+"/createService",{createParameters:q.stringify(this._featureServiceJson.service),targetType:"featureService"}).then(J.hitch(this,function(Ca){ma.self.hasCategorySchema&&this._itemCategories?la.setItemCategories([this._service.id],this._itemCategories).then(J.hitch(this,function(){this._disable(!1);this.onDone(this._service,this._telemetryAttribute)})):(this._disable(!1),this.onDone(this._service,
this._telemetryAttribute))}),J.hitch(this,function(Ca){this._deleteService();this._disable(!1);throw Ca;}))}))},_findLayer:function(pa,Aa){return Aa.filter(function(za){return za.id===pa}).shift()},_project:function(pa,Aa){var za=new k,Ba=new ha(pa),ua=new V(Ba.spatialReference);Aa=new V(Aa);this._isTableOnlyTemplate||U(ua,Aa)?za.resolve(pa):ka(Ba,Aa,function(Fa){Fa[0]?za.resolve({spatialReference:Fa[0].spatialReference,xmax:Fa[0].xmax,xmin:Fa[0].xmin,ymax:Fa[0].ymax,ymin:Fa[0].ymin}):za.resolve(pa)});
return za},_addHighAccuracyPopups:function(pa,Aa){var za,Ba=pa&&pa.layers||Aa.map(function(ua){return{id:ua.id}});Aa=Aa.map(J.hitch(this,function(ua){za=fa.find(Ba,function(Fa){return Fa.id===ua.id});return J.mixin(za,{popupInfo:this._getPopupInfo(ua,za)})}));return J.mixin(pa||{},{layers:Aa})},_getPopupInfo:function(pa,Aa){var za=this._util.isPortal(),Ba=(Aa=Aa&&Aa.popupInfo)||X(pa,!1,pa),ua=J.mixin({},ra.popupInfo),Fa=this._isTemplateSelected?this._selectedService&&(this._selectedService.title||
this._selectedService.name):Ba&&Ba.title||pa.name;pa&&"esriGeometryPoint"===pa.geometryType&&(Ba=J.mixin(Ba,Aa||ua,{title:Fa,fieldInfos:this._getPopupFieldInfos(Ba.fieldInfos||[])}));za&&Ba&&Ba.fieldInfos&&Ba.fieldInfos.forEach(function(va){va.fieldName=va.fieldName.toLowerCase()});return Ba},_getPopupFieldInfos:function(pa){var Aa={},za=ra.popupInfo.fieldInfos||[];(pa||[]).forEach(function(Ba){Aa[Ba.fieldName.toLowerCase()]=Ba});za.forEach(function(Ba){Aa[Ba.fieldName.toLowerCase()]=Ba});return fa.toArray(Aa)},
_getHighAccuracyFieldDefs:function(pa){var Aa={},za=ra.fieldDefs||[];(pa||[]).forEach(function(Ba){Aa[Ba.name.toLowerCase()]=Ba});za.forEach(function(Ba){Aa[Ba.name.toLowerCase()]=Ba});return fa.toArray(Aa)},_createService:function(pa,Aa){var za=this._request(pa,Aa,{usePost:!0});return za.then(J.hitch(this,function(Ba){this._service=J.mixin(Ba,{id:Ba.itemId});return this._addLayers(this._service)}),J.hitch(this,function(Ba){this._showError(Ba,za);throw Ba;}))},_addLayers:function(pa){var Aa=pa.encodedServiceURL.replace("rest/services",
"rest/admin/services"),za=this._layers,Ba=[],ua;t.forEach(this._layers,J.hitch(this,function(va){va.relationships&&va.relationships.length&&(Ba.push({id:va.id,relationships:J.clone(va.relationships)}),delete va.relationships)}));var Fa=t.filter(za,J.hitch(this,function(va){return va&&"Table"===va.type}));za=t.filter(za,J.hitch(this,function(va){return va&&"Feature Layer"===va.type}));return this._updateService(this._service,this._content).then(J.hitch(this,function(){return this._request(Aa+"/addToDefinition",
{addToDefinition:q.stringify({layers:za,tables:Fa})},{usePost:!0}).then(J.hitch(this,function(va){return this._enableEditorTracking(pa).then(J.hitch(this,function(){return this._addRelationships(pa,Ba).then(J.hitch(this,function(){this._isTemplateSelected&&-1!==t.indexOf(this._selectedService.typeKeywords,"Location Tracking")&&(ua=t.map(za,J.hitch(this,function(xa){return this._enableTime(pa,xa)})));return r(ua||[]).then(J.hitch(this,function(){return va}))}))}))}),J.hitch(this,function(va){this._showError(va);
throw va;}))}))},_enableEditorTracking:function(pa){var Aa=new k,za=pa.encodedServiceURL.replace("rest/services","rest/admin/services"),Ba={editorTrackingInfo:{enableEditorTracking:!0}};hasZ=!0===this._containsZCheckbox.checked;this._util.isPortal()&&hasZ&&(Ba.hasZ=!0,Ba.enableZDefaults=!0,Ba.zDefault=0);this._isTemplateSelected?this._request(za+"/updateDefinition",{updateDefinition:q.stringify(Ba)},{usePost:!0}).then(J.hitch(this,function(ua){Aa.resolve(ua)}),J.hitch(this,function(ua){this._showError(ua);
Aa.cancel()})):Aa.resolve(pa);return Aa},_enableTime:function(pa,Aa){var za=new k,Ba=this._util.isPortal();Ba={timeInfo:{startTimeField:Ba?"created_date":"CreationDate",endTimeField:Ba?null:"",trackIdField:Ba?null:"",timeExtent:[],timeReference:{timeZone:"UTC",respectDaylightSaving:!1},timeInterval:0,timeIntervalUnits:Ba?null:"",exportOptions:{useTime:!1,timeDataCumulative:!1,TimeOffset:0,timeOffsetUnits:"esriTimeUnitsCenturies"},hasLiveData:!0}};var ua=pa.encodedServiceURL.replace("rest/services",
"rest/admin/services");this._isTemplateSelected&&-1!==t.indexOf(this._selectedService.typeKeywords,"Location Tracking")?this._request(ua+"/"+Aa.id+"/updateDefinition",{updateDefinition:q.stringify(Ba)},{usePost:!0}).then(J.hitch(this,function(Fa){za.resolve(Fa)}),J.hitch(this,function(Fa){this._showError(Fa);za.cancel()})):za.resolve(pa);return za},_addRelationships:function(pa,Aa){var za=new k,Ba=pa.encodedServiceURL.replace("rest/services","rest/admin/services");Aa&&Aa.length?this._request(Ba+"/addToDefinition",
{addToDefinition:q.stringify({layers:Aa})},{usePost:!0}).then(J.hitch(this,function(ua){za.resolve(ua)}),J.hitch(this,function(ua){this._showError(ua);za.cancel()})):za.resolve(pa);return za},_updateService:function(pa,Aa){pa=this._userContentUrl+"/items/"+pa.id+"/update";var za=new k;this._request(pa,Aa,{usePost:!0}).then(J.hitch(this,function(Ba){za.resolve(Ba)}),J.hitch(this,function(Ba){this._showError(Ba);za.reject(Ba)}));return za},_deleteService:function(){var pa=this._service&&this._service.itemId;
if(pa)return pa=this._userContentUrl+"/items/"+pa+"/delete",this._request(pa,{},{usePost:!0})},_fetchItem:function(pa){return this._request(ma.restBaseUrl+"content/items/"+pa)},_serviceNameAvailable:function(pa){pa={name:pa.replace(/ /g,"_"),type:"features"!==this.itemType?"Map Service":"Feature Service"};return this._request(this._restBaseUrl+"portals/"+this._user.accountId+"/isServiceNameAvailable",pa).then(J.hitch(this,function(Aa){if(Aa.available)return!0;this._showError(this.i18n.errors.serviceNameExists);
throw!1;}))},_updateServiceDetails:function(pa){this._hasPointLayer=!1;this._layerStore.setData([]);this._layersGrid.refresh();this._showLoadingMessage(!0);pa&&"1"!==pa&&this._copyServiceSchema(pa).then(J.hitch(this,function(Aa){this._showLoadingMessage(!1);this._featureServiceJson=Aa;this._intialExtent=new ha(ma.self.defaultExtent||this._featureServiceJson.service.initialExtent);this._serviceExtent=this._fixExtent(this._intialExtent);b(".js-highAccuracy",this.domNode)[this._hasPointLayer?"removeClass":
"addClass"]("hide");b(".js-containsZ",this.domNode)[this._isTemplateSelected?"removeClass":"addClass"]("hide");this._disable(!1)}))},_fixExtent:function(pa){pa=ea.webMercatorToGeographic(new ha(pa));var Aa=pa.spatialReference._getInfo();if(Aa&&pa.xmin>pa.xmax){var za=Aa.valid[1]-pa.xmin,Ba=pa.xmax-Aa.valid[0];za>Ba?pa.xmax=Aa.valid[1]+Ba:pa.xmin=Aa.valid[0]-za}return this._clipExtent(pa)},_copyServiceSchema:function(pa){var Aa=new k,za={},Ba={addToken:!1};this._util.isHostedService(pa)||this._util.isAgolService(pa)||
(Ba.addSSL=!1,Ba.addToken=!1);b(".dijitButton",this.domNode).map(u.byNode).forEach(function(ua){ua.set("disabled",!0)});this._svcErr=!0;this._request(pa,{},J.mixin({timeout:6E4},Ba)).then(J.hitch(this,function(ua){if(!ua)return this._showError({message:ia.substitute({url:pa},this.i18n.errors.serviceNotExist.message)});this._svcErr=null;za.service=ua;delete ua.id;this._selectedService=J.mixin(this._selectedService,ua);ua=t.map(ua.layers.concat(ua.tables||[]),J.hitch(this,function(Fa){if(Fa&&Fa.fields){var va=
new k;va.resolve(Fa)}else va=this._request(pa+"/"+Fa.id,{},Ba);return va}));return r(ua).then(J.hitch(this,function(Fa){this._layerStore.setData([]);za.layers=t.map(Fa,J.hitch(this,function(va){this._layerStore.add(J.mixin(J.mixin({},va),{visible:!0}));this._hasPointLayer=this._hasPointLayer||va&&"esriGeometryPoint"===va.geometryType;return va}))}))}),J.hitch(this,function(ua){this._svcErr={id:pa,error:ua};this._showLoadingMessage(!1);this._showError({message:ia.substitute({url:pa},this.i18n.errors.serviceNotExist.message)});
throw ua;})).then(J.hitch(this,function(){Aa.resolve(za)}));return Aa},_getThumbnailUrl:function(pa){return"https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/export?size\x3d800,532\x26bboxSR\x3d4326\x26format\x3dpng24\x26f\x3dimage\x26bbox\x3d"+pa.xmin+","+pa.ymin+","+pa.xmax+","+pa.ymax},_getItemData:function(pa){var Aa=this._contentUrl+"/items/"+pa.id+"/data";pa&&pa.id?pa=this._request(Aa):(pa=new k,pa.resolve(null));return pa},_fixLayerIds:function(pa){var Aa={},za=
pa.layers&&pa.layers.length?pa.layers.sort(function(ua,Fa){return parseInt(ua.id,10)-parseInt(Fa.id,10)}):[],Ba=this._selectedLayerIds;za=t.map(t.filter(za,function(ua){return 0<=t.indexOf(Ba,ua.id)}),function(ua,Fa){Aa[ua.id]=Fa;ua.id=Fa;return ua});return this._fixRelationshipIds(J.mixin(pa,{layers:za}),Aa)},_fixRelationshipIds:function(pa,Aa){t.forEach(pa.layers||[],J.hitch(this,function(za){za&&za.relationships&&za.relationships.length&&(za.relationships=t.filter(za.relationships||[],J.hitch(this,
function(Ba){return-1<t.indexOf(this._selectedLayerIds,Ba.relatedTableId)?(Ba.relatedTableId=ia.isDefined(Aa[Ba.relatedTableId])?Aa[Ba.relatedTableId]:Ba.relatedTableId,ia.isDefined(Ba.relationshipTableId)&&(Ba.relationshipTableId=ia.isDefined(Aa[Ba.relationshipTableId])?Aa[Ba.relationshipTableId]:Ba.relationshipTableId),!0):!1})))}));return pa},_disable:function(pa,Aa){b(".dijit, .dijitTextArea, .dojoxGrid",this.domNode).map(u.byNode).forEach(function(za){za.set("disabled",pa)});b("a",this.domNode)[pa?
"addClass":"removeClass"]("disabledLink");b("label",this.domNode)[pa?"addClass":"removeClass"]("disabled");pa&&Aa&&h.set(this._spinner,"innerHTML",Aa);c.set(this._spinner,"display",pa?"inline-block":"none");this.itemPropertiesDlg&&(pa?this.itemPropertiesDlg.disableTagsAndCategories():this.itemPropertiesDlg.enableTagsAndCategories())},_unique:function(pa){var Aa={};return t.filter(pa,function(za){return Aa[za]?!1:Aa[za]=!0})},_isEmpty:function(pa){return(this.trim?/^\s*$/:/^$/).test(pa)},_clipExtent:function(pa){pa.ymax=
85<pa.ymax?85:+pa.ymax.toFixed(3);pa.ymin=-85>pa.ymin?-85:+pa.ymin.toFixed(3);pa.xmax=180<pa.xmax?180:+pa.xmax.toFixed(3);pa.xmin=-180>pa.xmin?-180:+pa.xmin.toFixed(3);return pa},_checkStatus:function(pa,Aa,za){pa?this._request(this._userContentUrl+"/items/"+pa.id+"/status",{jobId:pa.jobId}).then(J.hitch(this,function(Ba){Ba=Ba||{status:"failed"};if("completed"===Ba.status)return Aa.resolve(pa);if("failed"===Ba.status||""===Ba.status)return Aa.reject({message:Ba.statusMessage});za=(za||500)+250;setTimeout(J.hitch(this,
function(){this._checkStatus(pa,Aa,za)}),za)}),J.hitch(this,function(Ba){Aa.reject(Ba)})):Aa.reject()},_request:function(pa,Aa,za){return this._util.request({url:pa,content:Aa},za)},_extent2String:function(pa,Aa){Aa=Aa||4;var za="";if(pa&&this._isValidNum(pa.xmin)&&this._isValidNum(pa.ymin)&&this._isValidNum(pa.xmax)&&this._isValidNum(pa.ymax)){za=pa.xmin.toFixed(Aa);var Ba=pa.ymin.toFixed(Aa),ua=pa.xmax.toFixed(Aa);pa=pa.ymax.toFixed(Aa);za=isNaN(za)||isNaN(Ba)||isNaN(ua)||isNaN(pa)?"":za+","+Ba+
","+ua+","+pa}return za},_isValidNum:function(pa){return!isNaN(pa)&&void 0!==pa&&null!==pa},_connect:function(pa,Aa,za){pa=e(pa,Aa,J.hitch(this,za));this._connects.push(pa);return pa},_showError:function(pa,Aa){Aa&&Aa.canceled||(pa&&!pa.message&&(pa=this.i18n.errors.error),pa=pa&&pa.error||pa||this.i18n.errors.error,pa.code=pa.code||0,pa=this.i18n.errors[pa.code]||pa,-1<pa.message.indexOf("Unable to add feature service definition")&&(pa.message=sa.publishWizard.errors.unableToAddFeatureServiceDefinition.message),
"en"===D.locale&&(pa.details=pa.details&&pa.details.length?t.filter(pa.details,"return item !\x3d\x3d null"):null,pa.details&&pa.details.length&&(pa.details=pa.details.join("\x3cbr /\x3e"),pa.message=pa.message?pa.message+"\x3cbr /\x3e"+pa.details:pa.details)),pa=J.mixin(J.mixin({},this.i18n.errors.error),pa),this._errorDlg.show(pa));this._disable(!1);return!1}})})},"arcgisonline/sharing/dijit/dialog/PluginLayerTemplates":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array",
"./_LayerTemplateFiltersMixin","dojo/i18n!arcgisonline/nls/arcgisonline"],function(S,J,f,c,h){var d=S("arcgisonline.sharing.dijit.dialog.PluginLayerTemplates",null,{filters:c.rootNodes.layer,filterStrings:h.layerTemplateFilters,rowsPerPage:100,constructor:function(b){J.mixin(this,b)},fetchData:function(){this._portal=this.parent&&this.parent._portal;this._user=this._portal.getPortalUser();var b;return this._fetchGroups().then(J.hitch(this,function(a){b=f.map(a||[],function(e){if(e)return'group:"'+
e.id+'"'});return this._fetchGroupItems(b)}))},_fetchGroup:function(b,a){this._groups=this._groups||[];return this._groups[b]||this._portal.queryGroups(a,!0).then(J.hitch(this,function(e){e=e.total&&e.results&&e.results[0]||null;return(this._groups[b]=e)||{}}))},_fetchGroupItems:function(b,a){return this.parent._fetchItems({query:'type:"Layer Template" AND typekeywords: "Service Template" ',groups:b})},_fetchGroups:function(){return this._fetchEsriLayerTemplates()},_fetchEsriLayerTemplates:function(){return this._fetchGroup("esriLayerTemplates",
{q:esriGeowConfig&&esriGeowConfig.self&&esriGeowConfig.self.layerTemplatesGroupQuery,num:100,start:0,sortField:"title",sortOrder:"asc"}).then(J.hitch(this,function(b){return[b]}))}});J.mixin(d,{add:function(b,a){b.plugIn||(a=a||{},a.parent=b,b.plugIn=new d(a))},remove:function(b){b.plugIn&&(b.plugIn.destroy(),delete b.plugIn)}});return d})},"arcgisonline/sharing/dijit/dialog/_LayerTemplateFiltersMixin":function(){define(["dojo/_base/declare"],function(){return{rootNodes:{layer:{all:{},buildlayer:{typekeywords:["Build a layer"]},
agriculture:{typekeywords:["Agriculture"]},electricutil:{typekeywords:["Electric Utilities"]},environment:{typekeywords:["Environment"]},forestry:{typekeywords:["Forestry"]},gasutil:{typekeywords:["Gas Utilities"]},general:{typekeywords:["General"]},natresources:{typekeywords:["Natural Resources"]},petroleum:{typekeywords:["Petroleum"]},pubsafety:{typekeywords:["Public Safety"]},telecommunications:{typekeywords:["Telecommunications"]},transportation:{typekeywords:["Transportation"]},waterutil:{typekeywords:["Water Utilities"]}}}}})},
"arcgisonline/sharing/dijit/dialog/PluginFeatureServices":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/promise/all"],function(S,J,f,c){var h=S("arcgisonline.sharing.dijit.dialog.PluginFeatureServices",null,{rowsPerPage:8,constructor:function(d){J.mixin(this,d)},fetchData:function(){this._portal=this.parent._portal;this._user=this._portal.getPortalUser();return this._fetchServices()},_fetchServices:function(){return this.parent._fetchItems({query:'type:"Feature Service" AND -owner: "esri_livingatlas" AND -typekeywords: "Spatiotemporal" AND accountid:"'+
(this._user&&(this._user.orgId||this._user.accountId))+'"'})}});J.mixin(h,{add:function(d,b){d.plugIn||(b=b||{},b.parent=d,d.plugIn=new h(b))},remove:function(d){d.plugIn&&(d.plugIn.destroy(),delete d.plugIn)}});return h})},"arcgisonline/sharing/dijit/dialog/_HighAccuracyFields":function(){define([],function(){return{fieldDefs:[{name:"esrignss_speed",type:"esriFieldTypeDouble",alias:"Speed (km/h)",sqlType:"sqlTypeOther",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"esrignss_direction",
type:"esriFieldTypeDouble",alias:"Direction of travel (\u00b0)",sqlType:"sqlTypeOther",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"esrisnsr_azimuth",type:"esriFieldTypeDouble",alias:"Compass reading (\u00b0)",sqlType:"sqlTypeOther",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"esrignss_positionsourcetype",type:"esriFieldTypeInteger",alias:"Position source type",sqlType:"sqlTypeOther",nullable:!0,editable:!0,domain:{type:"codedValue",name:"Location Tracking_esrignss_positionsourcetype_4bed2279-ed00-43d0-8608-14e188180566",
codedValues:[{name:"Unknown",code:0},{name:"User defined",code:1},{name:"Integrated (System) Location Provider",code:2},{name:"External GNSS Receiver",code:3},{name:"Network Location Provider",code:4}]},defaultValue:null},{name:"esrignss_receiver",type:"esriFieldTypeString",alias:"Receiver Name",sqlType:"sqlTypeOther",length:50,nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"esrignss_h_rms",type:"esriFieldTypeDouble",alias:"Horizontal Accuracy (m)",sqlType:"sqlTypeOther",nullable:!0,
editable:!0,domain:null,defaultValue:null},{name:"esrignss_v_rms",type:"esriFieldTypeDouble",alias:"Vertical Accuracy (m)",sqlType:"sqlTypeOther",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"esrignss_latitude",type:"esriFieldTypeDouble",alias:"Latitude",sqlType:"sqlTypeOther",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"esrignss_longitude",type:"esriFieldTypeDouble",alias:"Longitude",sqlType:"sqlTypeOther",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"esrignss_altitude",
type:"esriFieldTypeDouble",alias:"Altitude",sqlType:"sqlTypeOther",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"esrignss_pdop",type:"esriFieldTypeDouble",alias:"PDOP",sqlType:"sqlTypeOther",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"esrignss_hdop",type:"esriFieldTypeDouble",alias:"HDOP",sqlType:"sqlTypeOther",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"esrignss_vdop",type:"esriFieldTypeDouble",alias:"VDOP",sqlType:"sqlTypeOther",nullable:!0,editable:!0,
domain:null,defaultValue:null},{name:"esrignss_fixtype",type:"esriFieldTypeSmallInteger",alias:"Fix Type",sqlType:"sqlTypeOther",nullable:!0,editable:!0,domain:{type:"codedValue",name:"ESRI_FIX_TYPE_DOMAIN",codedValues:[{name:"NoFix",code:0},{name:"GPS",code:1},{name:"DifferentialGPS",code:2},{name:"PrecisePositioningService",code:3},{name:"RTKFixed",code:4},{name:"RTKFloat",code:5}]},defaultValue:null},{name:"esrignss_correctionage",type:"esriFieldTypeDouble",alias:"Correction Age",sqlType:"sqlTypeOther",
nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"esrignss_stationid",type:"esriFieldTypeSmallInteger",alias:"Station ID",sqlType:"sqlTypeOther",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"esrignss_numsats",type:"esriFieldTypeSmallInteger",alias:"Number of Satellites",sqlType:"sqlTypeOther",nullable:!0,editable:!0,domain:{type:"range",name:"ESRI_NUM_SATS_DOMAIN",range:[0,99]},defaultValue:null},{name:"esrignss_fixdatetime",type:"esriFieldTypeDate",alias:"Fix Time",sqlType:"sqlTypeOther",
length:8,nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"esrignss_avg_h_rms",type:"esriFieldTypeDouble",alias:"Average Horizontal Accuracy (m)",sqlType:"sqlTypeOther",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"esrignss_avg_v_rms",type:"esriFieldTypeDouble",alias:"Average Vertical Accuracy (m)",sqlType:"sqlTypeOther",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"esrignss_avg_positions",type:"esriFieldTypeInteger",alias:"Averaged Positions",sqlType:"sqlTypeOther",
nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"esrignss_h_stddev",type:"esriFieldTypeDouble",alias:"Standard Deviation (m)",sqlType:"sqlTypeOther",nullable:!0,editable:!0,domain:null,defaultValue:null}],popupInfo:{fieldInfos:[{fieldName:"esrignss_receiver",label:"Receiver Name",isEditable:!1,tooltip:"",visible:!0,stringFieldOption:"textbox",isEditableOnLayer:!0},{fieldName:"esrignss_h_rms",label:"Horizontal Accuracy (m)",isEditable:!1,tooltip:"",visible:!0,format:{places:2,digitSeparator:!0},
stringFieldOption:"textbox",isEditableOnLayer:!0},{fieldName:"esrignss_v_rms",label:"Vertical Accuracy (m)",isEditable:!1,tooltip:"",visible:!0,format:{places:2,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!0},{fieldName:"esrignss_latitude",label:"Latitude",isEditable:!1,tooltip:"",visible:!0,format:{places:8,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!0},{fieldName:"esrignss_longitude",label:"Longitude",isEditable:!1,tooltip:"",visible:!0,format:{places:8,
digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!0},{fieldName:"esrignss_altitude",label:"Altitude",isEditable:!1,tooltip:"",visible:!0,format:{places:2,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!0},{fieldName:"esrignss_pdop",label:"PDOP",isEditable:!1,tooltip:"",visible:!0,format:{places:2,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!0},{fieldName:"esrignss_hdop",label:"HDOP",isEditable:!1,tooltip:"",visible:!0,format:{places:2,digitSeparator:!0},
stringFieldOption:"textbox",isEditableOnLayer:!0},{fieldName:"esrignss_vdop",label:"VDOP",isEditable:!1,tooltip:"",visible:!0,format:{places:2,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!0},{fieldName:"esrignss_fixtype",label:"Fix Type",isEditable:!1,tooltip:"",visible:!0,format:{places:0,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!0},{fieldName:"esrignss_correctionage",label:"Correction Age",isEditable:!1,tooltip:"",visible:!0,format:{places:0,digitSeparator:!0},
stringFieldOption:"textbox",isEditableOnLayer:!0},{fieldName:"esrignss_stationid",label:"Station ID",isEditable:!1,tooltip:"",visible:!0,format:{places:0,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!0},{fieldName:"esrignss_numsats",label:"Number of Satellites",isEditable:!1,tooltip:"",visible:!0,format:{places:0,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!0},{fieldName:"esrignss_fixdatetime",label:"Fix Time",isEditable:!1,tooltip:"",visible:!0,format:{dateFormat:"shortDateLongTime"},
stringFieldOption:"textbox",isEditableOnLayer:!0},{fieldName:"esrignss_avg_h_rms",label:"Average Horizontal Accuracy (m)",isEditable:!1,tooltip:"",visible:!0,format:{places:2,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!0},{fieldName:"esrignss_avg_v_rms",label:"Average Vertical Accuracy (m)",isEditable:!1,tooltip:"",visible:!0,format:{places:2,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!0},{fieldName:"esrignss_avg_positions",label:"Averaged Positions",isEditable:!1,
tooltip:"",visible:!0,format:{places:0,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!0},{fieldName:"esrignss_h_stddev",label:"Standard Deviation (m)",isEditable:!1,tooltip:"",visible:!0,format:{places:3,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!0},{fieldName:"esrignss_positionsourcetype",label:"Position source type",isEditable:!1,tooltip:"",visible:!0,format:{places:0,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!0},{fieldName:"esrignss_speed",
label:"Speed (km/h)",isEditable:!1,tooltip:"",visible:!0,format:{places:2,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!0},{fieldName:"esrignss_direction",label:"Direction of travel (\u00b0)",isEditable:!1,tooltip:"",visible:!0,format:{places:2,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!0},{fieldName:"esrisnsr_azimuth",label:"Compass reading (\u00b0)",isEditable:!1,tooltip:"",visible:!0,format:{places:2,digitSeparator:!0},stringFieldOption:"textbox",isEditableOnLayer:!0}],
description:null,showAttachments:!0,mediaInfos:[]}}})},"arcgisonline/sharing/dijit/dialog/CreateFolder":function(){define("require esri/declare esri/Evented esri/kernel esri/lang esri/request esri/arcgis/Portal dojo/_base/lang dojo/_base/window dojo/_base/array dojo/topic dojo/string dojo/query dojo/on dojo/json dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/promise/all dojo/Deferred dojo/when ./ConfirmDialog dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/i18n!../../../nls/arcgisonline dojo/text!arcgisonline/sharing/dijit/dialog/templates/CreateFolder.html".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z){return J([G,F,A,f],{baseClass:"esriCreateFolderDlg",templateString:z,postMixInProperties:function(){this.inherited(arguments);this.i18n=a.mixin({},y)},startup:function(){this.inherited(arguments);this.addEventHandlers()},getFolder:function(){var B=l.get(this._input,"value");return u.trim(B)},showModal:function(){var B=new w,C=new D({title:y.folderDlg.folderDlgTitle,buttonOk:y.common.create,buttonCancel:y.common.cancel,busyMessage:y.folderDlg.creatingFolder,
style:{width:"475px",height:"auto"}});C.setContent(this.domNode);C.show();setTimeout(function(){this._input.focus()}.bind(this),400);this.own(m(C,"ok",a.hitch(this,function(){this._validate(this.getFolder())&&this.createFolder().then(a.hitch(this,function(H){this.set("readOnly",!1);C.hide().then(a.hitch(function(){B.resolve(H)}))}),a.hitch(this,function(H){if(H&&H.messageCode&&"GWM_0021"===H.messageCode)this._showError(H);else{var E=u.substitute(y.folderDlg.invalid[H&&H.messageCode||"sameFolderName"],
[this.getFolder()]);this._showError(a.mixin(H,{message:E}))}B.reject(H);this.set("readOnly",!1)}))})));return B},createFolder:function(){var B=new w,C=this.portalUser,H=this.getFolder();this.set("readOnly",!0,y.folderDlg.creatingFolder);this.bypassApi?B.resolve({title:H,id:H}):C.createFolder(H).then(a.hitch(this,function(E){B.resolve(E)}),a.hitch(this,function(E){B.reject(E)}));return B},addEventHandlers:function(){var B=new w;this.own(m(this._createFolderForm,"submit",a.hitch(this,function(C){C.preventDefault()})));
B.resolve(!0);return B},_validate:function(B){return 0===B.length?this._showError({message:y.folderDlg.invalid.provideName}):-1<B.indexOf("\x3c")||-1<B.indexOf("\x3e")?this._showError({message:y.folderDlg.invalid.invalidCharacters}):this.portalUser&&this.portalUser.username&&this.portalUser.username.toLowerCase()===B.toLowerCase()?this._showError({message:c.substitute([B],y.folderDlg.invalid.sameFolderName)}):!0},_setReadOnlyAttr:function(B){t.publish("/esri/disable",B);l.set(this._input,"readOnly",
B)},_showError:function(B){B=a.mixin(a.mixin({},y.publishWizard.errors.error),B);this._errorDlg=new D({showCancel:!1,style:{width:"400px",height:"auto"}});this._errorDlg.show(B).then(a.hitch(this,function(){this.set("readOnly",!1);this._errorDlg.hide()}));return!1}})})},"arcgisonline/sharing/dijit/dialog/CreateGeolocatorDlg":function(){define("dojo/_base/declare dojo/on dojo/dom-attr dojo/query dojo/dom-style dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/dom-construct dojo/when dojo/Deferred dojo/promise/all dojo/dom-class ./ConfirmDialog dijit/focus dojo/_base/event dojo/keys ./_CreateItemUtilMixin ./ItemPropertiesDlg dojo/topic esri/Evented esri/arcgis/Portal ../../geow/Account ../../util dojo/i18n!arcgisonline/nls/arcgisonline dojo/text!arcgisonline/sharing/dijit/dialog/templates/CreateGeolocatorDlg.html".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y){return S("arcgisonline.sharing.dijit.dialog.CreateGeolocatorDlg",[b,a,e,x],{baseClass:"esriCreateGeolocatorDlg",showFolders:!0,_typeInfo:"geocodeserver",userFolders:"",templateString:y,onDone:function(){},postMixInProperties:function(){this.inherited(arguments);this.i18n=d.mixin({},A);this._portalUser=(this._portal=esriGeowConfig.portal)&&this._portal.getPortalUser()},postCreate:function(){this.inherited(arguments);G.getSelf(d.hitch(this,
function(z){this._portal?this._init():(this._portal=new D.Portal({url:esriGeowConfig.restBaseUrl,self:z}),this._portal.on("load",d.hitch(this,function(){this._connect&&this._connect.remove();this._portalUser=this._portal.getPortalUser();this._init()})))}))},_init:function(){this._restBaseUrl=esriGeowConfig.allSSL?this._portal.portalUrl.replace("http:/","https:/"):this._portal.portalUrl;this._contentUrl=this._restBaseUrl+"content";this._publishUrl=this._contentUrl+"/users/"+this._portalUser.username;
this._itemPropertiesDlg.on("load",d.hitch(this,function(){this._loadData().then(d.hitch(this,function(z){this._itemPropertiesDlg.set("focus","title")}))}))},destroy:function(){c(".dijit",this.contentNode).map(dijit.byNode).forEach(function(B){B.destroyRecursive?B.destroyRecursive():B.destroy&&B.destroy();B=null});this._errorDlg&&(this._errorDlg.destroyRecursive(),this._errorDlg=null);this.inherited(arguments);this._tagsDijit=this._portalUser=this._portal=null;var z=document.getElementById("create-dropdown");
z&&z.focus()},_loadGeocodes:function(){this.own(w.subscribe("dlg/onOk",d.hitch(this,function(){this._focusNode&&setTimeout(d.hitch(this,function(){p.focus(this._focusNode)}),250)})),w.subscribe("/esri/disable",d.hitch(this,function(z,B){this.set("disabled",z,B,!0)})))},_loadData:function(){var z=new u;z.resolve({success:!0});return z},_setMessageAttr:{node:"_message",type:"innerHTML"},_getBusyMessageAttr:function(){return""},_setItemAttr:function(z){if(!this.fsItem||this.fsItem&&z.url!==this.fsItem.url)this.fsItem=
d.mixin({},z),this._created&&this._loadData().then(d.hitch(this,function(B){this._itemPropertiesDlg.set("focus","title")}))},_setFocusAttr:function(z){z=c(z,this.domNode);p.focus(z&&z.length?z[0]:this._title.domNode)},_setDisabledAttr:function(z,B,C){this.set("readOnly",z,B,C)},_setReadOnlyAttr:function(z,B,C){c(".dijit",this.domNode).map(dijit.byNode).forEach(function(H){H.set("disabled",z)});c("a",this.domNode)[z?"addClass":"removeClass"]("disabledLink");c("label",this.domNode)[z?"addClass":"removeClass"]("disabled");
this._itemPropertiesDlg.set("disabled",z);C||(z&&B&&w.publish("/dlg/busyMessage",B),w.publish("/esri/disable",z,B))},_validate:function(){var z=new u;this._focusNode=null;_dfd=this._itemPropertiesDlg._validate();_dfd=_dfd.then(d.hitch(this,function(B){z.resolve(B)}),d.hitch(this,function(B){this._showError(B);z.reject(B)}));return z},_checkRequired:function(){var z=new u;k.serviceNameAvailable(this._itemPropertiesDlg.get("item"),this._portal).then(d.hitch(this,function(B){B&&B.available?z.resolve(!0):
(this._focusNode=c("input",this._itemPropertiesDlg._title.domNode)[0],z.reject(A.addItemFrm.errors.serviceNameExists))}));return z},_addNewItem:function(){return this._getWorldGeocoderUrl().then(function(z){var B=this._itemPropertiesDlg.get("item");B.createAsServiceProxy=!0;B.url=z;B.typeKeywords="Geocoding filter";return k.addItem(B,B.folderId,this._portal)}.bind(this))},_getWorldGeocoderUrl:function(){function z(H){B.resolve(H)}var B=new u;if(this._portal.isPortal)this._getWorldGeocoderUrlFromProxies(this._portal.helperServices.geocode).then(z);
else{var C=this._getDevEnviroment();z("https://geocode"+(C||"")+".arcgis.com/arcgis/rest/services/World/GeocodeServer")}return B},_getDevEnviroment:function(){var z=esriGeowConfig.portalHostname;return-1!==z.indexOf("dev")?"dev":-1!==z.indexOf("qa")?"qa":null},showModal:function(z){var B=new u,C,H=this.dialog=new v({title:z.title,style:{height:"auto"}});this.set("message",z.message);H.setContent(this.domNode);H.show();this.own(J(H.okButton,"click",d.hitch(this,function(){w.publish("/esri/disable",
!0,this.get("busyMessage"));this._validate().then(d.hitch(this,function(){C=this._addNewItem();C.then(d.hitch(this,function(E){this.telemetry&&this.telemetry.logEvent({label:"create apps",category:"new item",pageName:"my content",details:"locator"});E.id&&setTimeout(function(){window.location.href=esriGeowConfig.baseUrl+"item.html?id\x3d"+E.id+"\x26newLocator\x3dtrue#settings"},400);B.resolve(E)}))}))})),J(H,"hide",d.hitch(this,function(){H.destroyRecursive()})));return B},_showError:function(z){z=
d.mixin(d.mixin({},A.publishWizard.errors.error),z);var B=d.hitch(this,function(){this.set("disabled",!1);this._errorDlg.hide();this._focusNode&&setTimeout(d.hitch(this,function(){p.focus(this._focusNode)}),250)});this._errorDlg=new v({showCancel:!1,style:{width:"400px",height:"auto"}});this._errorDlg.own(J(this._errorDlg.closeButtonNode,"click",B));this._errorDlg.show(z).then(B);return!1},_getWorldGeocoderUrlFromProxies:function(z){var B=new u;(z=z.filter(function(C){return F.isServiceProxyGeocoder(C.url)}).filter(function(C){return C.isEsriBatchGeocoder})[0])?
this._fetchItem(this._parseGeocoderItemId(z)).then(function(C){B.resolve(C.url)},function(C){B.reject(C)}):B.reject();return B},_fetchItem:function(z){return F.request({url:this._portal.portalUrl+"content/items/"+z})},_parseGeocoderItemId:function(z){return z.url.split("/servers/")[1].split("/rest/services/")[0]}})})},"arcgisonline/sharing/dijit/dialog/ConnectDataset":function(){define("require esri/declare esri/Evented esri/kernel esri/lang esri/request esri/arcgis/Portal dojo/_base/lang dojo/_base/window dojo/_base/array dojo/topic dojo/string dojo/query dojo/on dojo/json dojo/_base/event dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/promise/all dojo/Deferred dojo/when ./ConfirmDialog ./_CreateItemUtilMixin dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/Dialog arcgisonline/sharing/dijit/dialog/ItemPropertiesDlg arcgisonline/sharing/dijit/AnalyzeResults arcgisonline/pages/portal/cloudProvider/GoogleConnect arcgisonline/pages/portal/cloudProvider/DropBoxConnect arcgisonline/pages/portal/cloudProvider/BoxConnect arcgisonline/pages/portal/cloudProvider/OneDriveConnect arcgisonline/sharing/util dojo/i18n!../../../nls/arcgisonline dojo/text!arcgisonline/sharing/dijit/dialog/templates/ConnectDataset.html".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E,K,I,L,M,N,P){return J([A,y,z,f],{baseClass:"connectDataset",templateString:P,postMixInProperties:function(){this.inherited(arguments);a.mixin(this,{isBatch:this.items&&1<this.items.length});this.i18n=a.mixin({},N)},destroy:function(){this.inherited(arguments);var R=document.getElementById("add-dropdown");R&&R.focus()},startup:function(R,Y){this.inherited(arguments);this.portal=R;this.folder=Y;this.publishInfo=this.analyzeResults=
this.itemPropertiesDlg=this.publishItem=this.addItem=null;this.currentCloudProvider=this.mimeTypeForFile="";this.cloudConnect={googleConnect:null,dropBoxConnect:null,oneDriveConnect:null,boxConnect:null};this.addToItemResource=null;this.docUrl=esriGeowConfig.self?esriGeowConfig.self.helpBase+esriGeowConfig.self.helpMap.m["120001295"]:"";this.originalDialogTitle=this.i18n.connectDataset.connectToOtherSystems+"\x3ca href\x3d"+this.docUrl+' target\x3d"_blank" title\x3d"'+this.i18n.connectDataset.helpIconOriginalDialogTitle+
'"\x3e\x3ci class\x3d"icon-ui-question margin-left-half font-size--1"\x3e\x3c/i\x3e\x3c/a\x3e';return this._initUI()},showModal:function(R){R=new x;this.dlg=new B({title:this.originalDialogTitle,className:"connectDatasetDlg",style:{width:"750px",height:"auto"}});this.dlg.setContent(this.domNode);this.dlg.show();this.own(m(this.dlg,"cancel",a.hitch(this,function(){this.set("readOnly",!0);this.onCancel()})),t.subscribe("analyzeResults/analyzeError",a.hitch(this,function(Y){this._showError(Y,!1,!0)})));
return R},onCancel:function(){this.dlg&&(this._deleteItem(),this.dlg.destroyRecursive())},_initUI:function(){var R=new x;this._initHandlers();return R},_initHandlers:function(){this.own(g(".googleConnect",this.domNode).on("click",a.hitch(this,function(R){p.stop(R);this.currentCloudProvider="googleConnect";this._telemetryAttribute="google drive";this.cloudConnect[this.currentCloudProvider]=new E;this._oAuthAndDisplayFiles("Google Drive")})),g(".dropBoxConnect",this.domNode).on("click",a.hitch(this,
function(R){p.stop(R);this.currentCloudProvider="dropBoxConnect";this._telemetryAttribute="dropbox";this.cloudConnect[this.currentCloudProvider]=new K;this._oAuthAndDisplayFiles("Dropbox")})),g(".oneDriveConnect",this.domNode).on("click",a.hitch(this,function(R){p.stop(R);this.currentCloudProvider="oneDriveConnect";this._telemetryAttribute="onedrive";this.cloudConnect[this.currentCloudProvider]=new L;this._oAuthAndDisplayFiles("OneDrive")})),g(".boxConnect",this.domNode).on("click",a.hitch(this,function(R){p.stop(R);
this.currentCloudProvider="boxConnect";this._telemetryAttribute="box";this.cloudConnect[this.currentCloudProvider]=new I;this._oAuthAndDisplayFiles("Box")})),g(".page2BackButton",this.domNode).on("click",a.hitch(this,function(R){p.stop(R);this._showHideDiv(".page2",!1);g(".searchCloudDrive",this.domNode).attr("value","");this.dlg.set("title",this.originalDialogTitle);this._showHideDiv(".page1",!0)})),g(".page3BackButton",this.domNode).on("click",a.hitch(this,function(R){p.stop(R);this._deleteItem();
this.itemPropertiesDlg&&this.itemPropertiesDlg.destroyRecursive(!0);this.analyzeResults&&(this.analyzeResults.destroyRecursive(!0),this._showHideDiv(".analyze-results",!1));this._showHideDiv(".page3",!1);this._showHideDiv(".page2",!0)})),g(".searchCloudDrive",this.domNode).on("keyup, search",a.hitch(this,function(R){p.stop(R);R=n.get(R.target,"value");var Y=g(".dropdownCloud",this.domNode).shift().value;this._loaderForPage2(!0,this.i18n.connectDataset.searchingFiles);var ja={searchText:R,dropdownFilter:Y};
this._delay(a.hitch(this,function(){this._browseCloudDrive(ja)}),1E3)})),g(".dropdownCloud",this.domNode).on("change",a.hitch(this,function(R){p.stop(R);this._loaderForPage2(!0,this.i18n.connectDataset.searchingFiles);var Y={searchText:g(".searchCloudDrive",this.domNode).shift().value,dropdownFilter:R.currentTarget.value};this._delay(a.hitch(this,function(){this._browseCloudDrive(Y)}),10)})),g(".previousButton",this.domNode).on("click",a.hitch(this,function(R){p.stop(R);this._loaderForPage2(!0,this.i18n.connectDataset.searchingFiles);
R=g(".searchCloudDrive",this.domNode).shift().value;var Y=g(".dropdownCloud",this.domNode).shift().value,ja={searchText:R,dropdownFilter:Y,previousOrNext:"previous"};this._delay(a.hitch(this,function(){this._browseCloudDrive(ja)}),10)})),g(".nextButton",this.domNode).on("click",a.hitch(this,function(R){p.stop(R);this._loaderForPage2(!0,this.i18n.connectDataset.searchingFiles);R=g(".searchCloudDrive",this.domNode).shift().value;var Y=g(".dropdownCloud",this.domNode).shift().value,ja={searchText:R,
dropdownFilter:Y,previousOrNext:"next"};this._delay(a.hitch(this,function(){this._browseCloudDrive(ja)}),10)})),g(".listExternalItemsTable",this.domNode).on("click",a.hitch(this,function(R){p.stop(R);var Y=n.get(R.target,"externalItemId"),ja=n.get(R.target,"itemName");n.get(R.target,"contructUrl");var aa=n.get(R.target,"downloadUrl");g(".listExternalItems [externalItemId\x3d'"+Y+"']").shift();this.mimeTypeForFile=n.get(R.target,"mimeType");if(Y){this._loaderHelper(!0,this.i18n.connectDataset.addingItem);
var da=-1===ja.lastIndexOf(".")?ja:ja.substring(0,ja.lastIndexOf("."));this.addToItemResource={cloudProvider:this.currentCloudProvider,id:Y,mimeType:this.mimeTypeForFile,cloudDriveFileName:da};this._addExternalItem(aa,ja,this.mimeTypeForFile).then(a.hitch(this,function(ra){this._loaderHelper(!0,this.i18n.connectDataset.analyzing);this.publishInfo={itemId:this.addItem.id,filetype:this._getNameForMimeType(this.mimeTypeForFile,"publish")};this._showHideDiv(".page2",!1);this._loaderHelper(!1,null);this._showHideDiv(".page3",
!0);this.itemPropertiesDlg=new C({title:da,showFile:!1},l.byId("itemPropertiesDlgAddon"));this.itemPropertiesDlg.startup();if(-1!==this.mimeTypeForFile.indexOf("csv")||-1!==this.mimeTypeForFile.indexOf("excel")||-1!==this.mimeTypeForFile.indexOf("googlesheets"))this.analyzeResults=new H({item:ra,portal:this.portal},l.byId("analyzeResultsAddon")),this.analyzeResults.startup()}),a.hitch(this,function(ra){-1!==this.mimeTypeForFile.indexOf("shapeFile")?this._showError(N.connectDataset.errors.invalidShapefile,
!0):-1!==this.mimeTypeForFile.indexOf("fgdb")?this._showError(N.connectDataset.errors.invalidFileGeodatabase,!0):this._showError(N.connectDataset.errors.addItemCheckStatusIssue,!0)}))}})),g(".publishButton",this.domNode).on("click",a.hitch(this,function(R){p.stop(R);this._loaderHelper(!0,this.i18n.connectDataset.publishing);var Y=this.itemPropertiesDlg.get("item");Y.title?Y.tags?1==/[.@~`!#$%\^&*+=\-\[\]\\';,\/{}|\\":<>\?]/g.test(Y.title)||120<Y.title.length?this._showError(N.addItemFrm.errors.invalidServiceTitle,
!0):(-1!==this.mimeTypeForFile.indexOf("csv")||-1!==this.mimeTypeForFile.indexOf("excel")||-1!==this.mimeTypeForFile.indexOf("googlesheets")?this.publishInfo.publishParameters=this.analyzeResults.getPublishParameters():this.publishInfo.publishParameters={name:Y.title,hasStaticData:!0,maxRecordCount:2E3,layerInfo:{capabilities:"Query"}},"noLocationFields"==this.publishInfo.publishParameters?this._showError(N.addItemFrm.errors.noAddressFields,!0):(this.telemetry&&this._telemetryAttribute&&this.telemetry.logEvent({label:"add",
category:"new item",pageName:"my content",details:"from cloud drive",attribute:this._telemetryAttribute}),this._updateExternalItem(Y).then(a.hitch(this,function(){this.publishInfo.item=this.addItem;this.publishInfo.publishParameters.name=Y.title.split(" ").join("_");this.publishInfo.deleteSourceItemUponCompletion=!0;this._checkserviceNameAvailable().then(a.hitch(this,function(){this._publishExternalItem().then(a.hitch(this,function(ja){this._addResourceToItem(ja).then(a.hitch(this,function(){this._updateTypeKeyword(ja,
Y.categories).then(a.hitch(this,function(){window.location="item.html?id\x3d"+ja[0].serviceItemId+"\x26jobid\x3d"+ja[0].jobId}))}))}))}))})))):this._showError(N.connectDataset.errors.required.tags,!0):this._showError(N.connectDataset.errors.required.title,!0)})))},_delay:function(){var R=0;return function(Y,ja){clearTimeout(R);R=setTimeout(Y,ja)}}(),_browseCloudDrive:function(R){this.cloudConnect[this.currentCloudProvider].GetAllFiles(R).then(a.hitch(this,function(Y){this._setupListExternalList(Y).then(a.hitch(this,
function(){this._loaderForPage2(!1,null)}))}),a.hitch(this,function(Y){this._showError(Y)}))},_getNameForMimeType:function(R,Y){var ja="";return ja=-1!==Y.indexOf("addItem")?-1!==R.indexOf("csv")?"CSV":-1!==R.indexOf("excel")?"Microsoft Excel":-1!==R.indexOf("shapeFile")?"Shapefile":-1!==R.indexOf("fgdb")?"File Geodatabase":-1!==R.indexOf("geojson")?"GeoJson":-1!==R.indexOf("sheets")?"Microsoft Excel":"CSV":-1!==R.indexOf("csv")?"csv":-1!==R.indexOf("excel")?"excel":-1!==R.indexOf("shapeFile")?"shapefile":
-1!==R.indexOf("fgdb")?"fileGeodatabase":-1!==R.indexOf("geojson")?"geojson":-1!==R.indexOf("sheets")?"excel":"csv"},_oAuthAndDisplayFiles:function(R){this._loaderHelper(!0,this.i18n.connectDataset.defaultLoading);g(".dropdownCloud",this.domNode).shift().options.length=0;var Y=g(".dropdownCloud",this.domNode).shift(),ja={dropdownFilter:"csv"};Y.options[Y.options.length]=new Option(this.i18n.connectDataset.csvDropdown,"csv");Y.options[Y.options.length]=new Option(this.i18n.connectDataset.excelDropdown,
"excel");Y.options[Y.options.length]=new Option(this.i18n.connectDataset.fgdbDropdown,"fgdb");Y.options[Y.options.length]=new Option(this.i18n.connectDataset.geoJsonDropdown,"geoJson");"googleConnect"===this.currentCloudProvider&&(Y.options[Y.options.length]=new Option(this.i18n.connectDataset.googleSheetDropdown,"sheets"));Y.options[Y.options.length]=new Option(this.i18n.connectDataset.shapeFileDropdown,"shapeFile");this.cloudConnect[this.currentCloudProvider].GetTokenViaOauth("https://"+this.portal.portalHostname).then(a.hitch(this,
function(){this._loaderHelper(!0,this.i18n.connectDataset.loadingFiles);this.cloudConnect[this.currentCloudProvider].GetAllFiles(ja).then(a.hitch(this,function(aa){this._setupListExternalList(aa).then(a.hitch(this,function(){this._showHideDiv(".page1",!1);this._loaderHelper(!1,null);this.dlg.set("title",this.i18n.connectDataset.addItemFrom+R);this._showHideDiv(".page2",!0);this.dlg.resize()}))}),a.hitch(this,function(aa){this._showError(aa)}))}),a.hitch(this,function(aa){"popupBlocked"===aa?this._showError({title:N.overwriteFromCloudDlg.errors.popupIssue.title,
message:N.connectDataset.errors.popupIssue.message}):"InvalidToken"===aa||"windowClosed"===aa?this._loaderHelper(!1,null):this._showError(aa)}))},_setupListExternalList:function(R){var Y=new x;R.previous&&1==R.previous?g(".previousButton",this.domNode).removeAttr("disabled"):g(".previousButton",this.domNode).attr("disabled","true");R.next&&1==R.next?g(".nextButton",this.domNode).removeAttr("disabled"):g(".nextButton",this.domNode).attr("disabled","true");for(var ja=g(".listExternalItemsTable",this.domNode).shift();1<
ja.rows.length;)ja.deleteRow(1);R.files.reduce(a.hitch(this,function(aa,da){aa="";-1!==da.mimeType.indexOf("googlesheets")?aa=this.i18n.connectDataset.tableContentSheets:-1!==da.mimeType.indexOf("csv")?aa=this.i18n.connectDataset.tableContentCsv:-1!==da.mimeType.indexOf("shapeFile")?aa=this.i18n.connectDataset.tableContentZip:-1!==da.mimeType.indexOf("fgdb")?aa=this.i18n.connectDataset.tableContentZip:-1!==da.mimeType.indexOf("geojson")?aa=this.i18n.connectDataset.tableContenGeoJSON:(da.mimeType.indexOf("excel"),
aa=this.i18n.connectDataset.tableContentExcel);var ra=ja.insertRow(ja.rows.length),ca=ra.insertCell(0);ra=ra.insertCell(1);var fa=da.name.split(" ").join("\x26#32;");ca.innerHTML="\x3ci class\x3d'icon-ui-documentation'\x3e\x3c/i\x3e\x3cbutton class\x3d'btn btn-transparent btn-arrow cloudTableList' externalItemId\x3d"+da.id+" itemName\x3d"+fa+" downloadUrl\x3d"+da.downloadUrl+" mimeType\x3d"+da.mimeType+"\x3e"+da.name+"\x3c/button\x3e";ra.innerHTML=aa}),"");Y.resolve();return Y},_addExternalItem:function(R,
Y,ja){var aa=new x;R={dataUrl:R,async:!0,type:this._getNameForMimeType(ja,"addItemType"),typeKeywords:this._getNameForMimeType(ja,"addItemKeywords"),Title:Y,filename:Y};var da=this.portal;F.addItem(R,this.folder.folderId,da).then(a.hitch(this,function(ra){this.addItem=ra;F.checkStatus(this.addItem,aa,null,da,function(ca){aa.resolve(ca)})}),a.hitch(this,function(ra){if("CONT_0027"==ra.messageCode){var ca=N.connectDataset.errors.itemExistsFile;ca.message=h.substitute({type:this._getNameForMimeType(ja,
"addItemType"),title:Y,name:Y},ca.message);this._showError(ca)}else this._showError(ra);aa.reject(ra)}));return aa},_updateExternalItem:function(R){var Y=new x;if(this.addItem.Title===R.title&&this.addItem.Tags===R.tags&&this.addItem.Snippet===R.snippet)Y.resolve();else{var ja={Title:R.title,Tags:R.tags,Snippet:R.snippet,folderId:this.addItem.folderId,folder:this.addItem.folder,id:this.addItem.id};ja.thumbnailURL=M.getStaticImagesUrl()+"/desktopapp.png";this.addItem.Title=R.title;F.updateItem(ja,
this.portal).then(a.hitch(this,function(aa){Y.resolve(aa)}),a.hitch(this,function(aa){this._showError(aa);Y.reject(aa)}))}return Y},_publishExternalItem:function(){var R=new x;F.publishItem(this.publishInfo.item,this.publishInfo,this.portal).then(a.hitch(this,function(Y){this.publishItem=Y.publishResult;R.resolve(Y.publishResult)}),a.hitch(this,function(Y){this._showError(Y);R.reject(Y)}));return R},_checkserviceNameAvailable:function(){var R=new x;F.serviceNameAvailable({title:this.publishInfo.item.Title},
this.portal).then(a.hitch(this,function(Y){Y.available?R.resolve():this._showError(N.connectDataset.errors.serviceNameExists,!0)}));return R},_addResourceToItem:function(R){var Y=new x,ja=this.portal;R={folderId:this.folder.folderId,id:R[0].serviceItemId};var aa={fileName:"cloudProvider.json",text:JSON.stringify(this.addToItemResource),access:"private"};F.addItemResource(R,ja,aa).then(a.hitch(this,function(){Y.resolve()}),a.hitch(this,function(da){this._showError(da);Y.reject(da)}));return Y},_updateTypeKeyword:function(R,
Y){var ja=new x,aa=this.portal,da=this.folder.folderId,ra="Cloud Drive",ca=JSON.parse(this.publishInfo.publishParameters);if("address"===ca.locationType||ca.layers&&"address"===ca.layers[0].locationType)ra+=",showUnmatchedAddresses,Involved Lookup";else if("none"===ca.locationType||ca.layers&&"none"===ca.layers[0].locationType)ra+=",Table";F.updateItem({folderId:da,id:R[0].serviceItemId,typeKeywords:ra,categories:Y},aa).then(a.hitch(this,function(){ja.resolve()}),a.hitch(this,function(fa){this._showError(fa);
ja.reject(fa)}));return ja},_deleteItem:function(){null!=this.addItem&&F.deleteItem(this.addItem,this.portal);null!=this.publishItem&&F.deleteItem(this.publishItem,this.portal)},_showError:function(R,Y,ja){R=a.mixin(a.mixin({},N.connectDataset.errors.error),R);this._errorDlg=new G({showCancel:!1,style:{width:"400px",height:"auto"}});this._errorDlg.show(R).then(a.hitch(this,function(){this.set("readOnly",!1);ja&&(this.itemPropertiesDlg&&this.itemPropertiesDlg.destroyRecursive(!0),this.analyzeResults&&
this.analyzeResults.destroyRecursive(!0),this._showHideDiv(".page3",!1),this._showHideDiv(".page2",!0));this._errorDlg.hide()}));Y||this._deleteItem();this._loaderHelper(!1,null);this._loaderForPage2(!1,null);return!1},_loaderHelper:function(R,Y){Y=Y?Y:"Loading...";!0===R?(this._showHideDiv(".loader",!0),g(".loader-text",this.domNode).attr("innerHTML",Y),g(".changeOpacity",this.domNode).style("opacity",.5),g(".divClickable",this.domNode).style("pointer-events","none")):(g(".loader-text",this.domNode).attr("innerHTML",
Y),this._showHideDiv(".loader",!1),g(".changeOpacity",this.domNode).style("opacity",1),g(".divClickable",this.domNode).style("pointer-events","auto"))},_loaderForPage2:function(R,Y){Y=Y?Y:"Loading...";!0===R?(this._showHideDiv(".loader",!0),g(".loader-text",this.domNode).attr("innerHTML",Y),g(".listExternalItemsTable",this.domNode).style("opacity",.5),g(".listExternalItemsTable",this.domNode).style("pointer-events","none")):(g(".loader-text",this.domNode).attr("innerHTML",Y),this._showHideDiv(".loader",
!1),g(".listExternalItemsTable",this.domNode).style("opacity",1),g(".listExternalItemsTable",this.domNode).style("pointer-events","auto"))},_showHideDiv:function(R,Y){!0===Y?g(R).removeClass("hide"):g(R).addClass("hide")}})})},"arcgisonline/sharing/dijit/AnalyzeResults":function(){define("require exports tslib ../../esriGeowConfig dijit/_TemplatedMixin dijit/_WidgetBase dojo/topic dojo/query dojo/string dojo/Deferred dojo/promise/all ../../sharing/util ./AnalyzeResults/FieldsTableRow ../../sharing/dijit/dialog/_CreateItemUtilMixin ../../sharing/dijit/_TimezoneUtils ../../pages/utils/clone ../../pages/utils/dom arcgisonline/tsutils/declareDecorator dojo/text!../../pages/dijit/View/templates/loader.html dojo/text!./AnalyzeResults/templates/_analyze-results.html dojo/text!./AnalyzeResults/templates/_table-head.html dojo/text!./AnalyzeResults/templates/_table-row.html dojo/text!./AnalyzeResults/templates/_table-head-no-location.html dojo/text!./AnalyzeResults/templates/_table-row-no-location.html dojo/text!./AnalyzeResults/templates/_table-head-no-type.html dojo/text!./AnalyzeResults/templates/_table-row-no-type.html dojo/text!./AnalyzeResults/templates/_table-head-no-location-no-type.html dojo/text!./AnalyzeResults/templates/_table-row-no-location-no-type.html dojo/i18n!../../nls/arcgisonline".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);
D=f.__importDefault(D);G=f.__importDefault(G);F=f.__importDefault(F);A=f.__importDefault(A);y=f.__importDefault(y);z=f.__importDefault(z);B=f.__importDefault(B);return function(){function C(){this.templateString=r.default;this.i18n=B.default;this._dijits=[];this._sortOptions=[{property:"field",active:!0,ascending:!0},{property:"type",ascending:!0},{property:"location",ascending:!0}]}C.prototype.postMixInProperties=function(){var H;this.inherited(arguments);this.portal=this.portal||(null===(H=this.item)||
void 0===H?void 0:H.portal)||(null===c.default||void 0===c.default?void 0:c.default.self)||{};this.user=this.user||this.portalUser||this.portal.portalUser||{};this.timeZoneUtil=(0,p.default)(v.default.TimezoneUtils)};C.prototype.postCreate=function(){this.inherited(arguments);this.domNode.querySelector(".js-analyze-loader-wrap").innerHTML=e.default.substitute(k.default,{location:this.i18n.addItemFrm.analyzeCloud})};C.prototype.startup=function(){this.inherited(arguments);this._render().then(this._addEventListeners.bind(this))};
C.prototype.destroy=function(){this.inherited(arguments);this._dijits.forEach(function(H){H.destroy()});this._dijits=[]};C.prototype.showLoader=function(){l.default.showNode((0,a.default)(".analyze-loader-wrap").shift());l.default.activateNode((0,a.default)(".analyze-loader-wrap .loader").shift());(0,a.default)("main",this.domNode).addClass("is-analyzing");(0,a.default)(".js-view",this.domNode).addClass("hide")};C.prototype.hideLoader=function(){l.default.hideNode((0,a.default)(".analyze-loader-wrap").shift());
l.default.deactivateNode((0,a.default)(".analyze-loader-wrap .loader").shift());(0,a.default)(".js-view",this.domNode).removeClass("hide");(0,a.default)("main",this.domNode).removeClass("is-analyzing")};C.prototype.getPublishParameters=function(){var H=this._getFields();this._setLocationParameters(H);if("address"===this.publishParameters.locationType){if(this._isEmptyObject(this.publishParameters.addressFields))return"noLocationFields"}else if("coordinates"===this.publishParameters.locationType&&
!(this.publishParameters.latitudeFieldName&&this.publishParameters.longitudeFieldName||this.publishParameters.coordinateFieldType&&this.publishParameters.coordinateFieldName))return"noLocationFields";var E=this.publishParameters;this.isExcel?(E=f.__assign(f.__assign({},this.analyzeResult.publishParameters||{}),{layers:[this.publishParameters]}),E.hasStaticData=!0,E.maxRecordCount=2E3,E.capabilities="Query",E.layerInfo={capabilities:"Query"}):this.layerInfo.fields=H;return f.__assign(f.__assign({},
E),this._getTimezone())};C.prototype._setLocationParameters=function(H){if("address"===this.publishParameters.locationType){this.publishParameters.addressFields={};for(var E=0;E<H.length;E++)"unknown"!==H[E].locationType&&(this.publishParameters.addressFields[H[E].locationType]=H[E].name)}else if("coordinates"===this.publishParameters.locationType)for(this.publishParameters.latitudeFieldName=null,this.publishParameters.longitudeFieldName=null,this.publishParameters.coordinateFieldType=null,this.publishParameters.coordinateFieldName=
null,E=0;E<H.length;E++)"latitude"===H[E].locationType?this.publishParameters.latitudeFieldName=H[E].name:"longitude"===H[E].locationType?this.publishParameters.longitudeFieldName=H[E].name:"mgrs"===H[E].locationType?(this.publishParameters.coordinateFieldType="MGRS",this.publishParameters.coordinateFieldName=H[E].name):"usng"===H[E].locationType&&(this.publishParameters.coordinateFieldType="USNG",this.publishParameters.coordinateFieldName=H[E].name)};C.prototype._isEmptyObject=function(H){var E=
0,K;for(K in H)H.hasOwnProperty(K)&&E++;return 0===E};C.prototype._setItemAttr=function(H){this.item=H;this.fileType="microsoft excel"===this.item.type.toLowerCase()?"excel":this.item.type.toLowerCase();this.isExcel="excel"===this.fileType;this.item=f.__assign(f.__assign({},this.item),{fileType:this.fileType})};C.prototype._getTimezone=function(){var H=this.timeZoneUtil._winZones[this._timeZones.value];return H&&"UTC"!==H.id?{dateFieldsTimeReference:{timeZone:H.id}}:{}};C.prototype._getAnalyzeParameters=
function(){var H=this._geocoders.value,E=this.user.region||this.portal.ipCntryCode||"",K=this._countries.value,I=(0,a.default)('input[name\x3d"geocode"]:checked').shift();E=E&&"wo"===E.toLowerCase()?"world":E;return{geocodeServiceUrl:H,locationType:(null===I||void 0===I?void 0:I.value)||null,sourceCountry:K,sourceCountryHint:this.analyzeResult?"":E}};C.prototype._getDefaultPublishParameters=function(){var H=this.analyzeResult||{};H=this.isExcel?this._getExcelPublishParameters(H):H.publishParameters;
var E=null;this.isExcel||(this.layerInfo=f.__assign(f.__assign({},this._getLayerInfo(H)),{capabilities:"Query"}),E={capabilities:"Query",hasStaticData:!0,maxRecordCount:2E3,layerInfo:this.layerInfo,addressFields:H.addressFields||{},locationType:"unknown"!==H.locationType?H.locationType:"none",persistErrorRecordsForReview:!0});return f.__assign(f.__assign({},H),{defaults:E})};C.prototype._getLayerInfo=function(H){return(this.isExcel?H:H.layerInfo)||{}};C.prototype._getExcelPublishParameters=function(H){H=
H.publishParameters||{};var E=parseInt(this._allExcelSheets.value,10)||0;E=(H=H.layers&&H.layers[E])&&H.fields||[];this.locateFeaturesUsing&&(H.locationType=this.locateFeaturesUsing);"coordinates"===H.locationType?this._getExcelLayerFieldCoordinateLocationTypes(E,H):"address"===H.locationType&&this._getExcelLayerFieldAddressLocationTypes(E,H);return H||{}};C.prototype._getExcelLayerFieldAddressLocationTypes=function(H,E){var K=E.addressFields;H.forEach(function(I){I.locationType="unknown";for(var L in K)if(I.name===
K[L]){I.locationType=L;break}});return H};C.prototype._getExcelLayerFieldCoordinateLocationTypes=function(H,E){var K=E.latitudeFieldName,I=E.longitudeFieldName,L="unknown";H.forEach(function(M){L="unknown";M.name===K?L="latitude":M.name===I&&(L="longitude");M.locationType=L});return H};C.prototype._getFields=function(){return this._dijits.map(function(H){return H.field})};C.prototype._render=function(){var H=this,E=new q.default,K=this.user;(0,t.default)([this._fetchTimeZones(),this._fetchCountries(),
this._fetchGeocoders(),this._analyze()]).then(function(){H._allowedToGeocode=K.canUseGeocode&&H._supportsBatch&&(!H.portal.isPortal||H.portal.isPortal&&(!H._isAgoWorldGeocodeServer||H._isServiceProxyAgoWorldGeocodeServer));E.resolve(!0)});return E};C.prototype._addEventListeners=function(){var H=new q.default;this.own((0,a.default)(".js-run-analyze",this.domNode).on("change",this._analyze.bind(this)),(0,a.default)(".locate-features-using",this.domNode).on("change",this._updateExcelSheet.bind(this)),
(0,a.default)(".js-excel-sheet",this.domNode).on("change",this._updateExcelSheet.bind(this)));H.resolve();return H};C.prototype._updateView=function(H){var E,K,I;H=new q.default;var L=this.publishParameters.locationType,M=this.isExcel&&1<(null===(I=null===(K=null===(E=this.analyzeResult)||void 0===E?void 0:E.publishParameters)||void 0===K?void 0:K.layers)||void 0===I?void 0:I.length);this.standardizedFieldNames=f.__assign({},this.publishParameters.standardizedFieldNames?f.__assign(f.__assign({},this.publishParameters.standardizedFieldNames),
this.i18n.addItemFrm.notUsed):B.default.addItemFrm.locationTypes);this.locationFieldNames="coordinates"===this.publishParameters.locationType?B.default.addItemFrm.locationTypes:this.standardizedFieldNames;E=M?"removeClass":"addClass";(0,a.default)(".if-excel")[E]("hide");this._reviewLabel.innerHTML=M?"":"none"===L?B.default.addItemFrm.reviewTable:B.default.addItemFrm.review;this["radio-".concat(L)].checked=!0;(0,a.default)(".if-location")["address"===L?"removeClass":"addClass"]("hide");this._reviewLabel.innerHTML=
"none"===L?this.isExcel?B.default.addItemFrm.reviewTableExcel:B.default.addItemFrm.reviewTable:this.isExcel?B.default.addItemFrm.reviewExcel:B.default.addItemFrm.review;E="none"===L?this.isExcel?y.default:D.default:this.isExcel?F.default:w.default;(0,a.default)(".js-table-header",this.domNode).shift().innerHTML=e.default.substitute(E,{i18n:B.default});this._sortUpdate({property:"field",ascending:!0});H.resolve();return H};C.prototype._analyze=function(){var H=this,E=new q.default,K=this.item,I=this._getAnalyzeParameters();
"none"!==(null===I||void 0===I?void 0:I.locationType)?(this.showLoader(),m.default.analyzeItem(K,I,this.portal).then(function(L){H.analyzeResult=(0,p.default)(L);H.publishParameters=H._getDefaultPublishParameters();H.isExcel&&0===H._allExcelSheets.length&&H._createExcelSheetOptions(L);H._updateView().then(function(){H.hideLoader();E.resolve()})},function(L){b.default.publish("analyzeResults/analyzeError",{error:L});H.hideLoader();E.reject(L)})):(this.publishParameters.locationType="none",this._updateView(this.analyzeResult).then(function(){E.resolve(H.analyzeResult)}));
return E};C.prototype._createExcelSheetOptions=function(H){var E=this,K,I=new q.default;((null===(K=null===H||void 0===H?void 0:H.publishParameters)||void 0===K?void 0:K.layers)||[]).forEach(function(L){var M="".concat(parseInt(L.excelSheetId,10)),N=document.createElement("option");N.dataset.value=M;N.value=M;N.innerHTML=L.name;E._allExcelSheets.add(N)});I.resolve(!0);return I};C.prototype._updateExcelSheet=function(H){this.isExcel?(this.locateFeaturesUsing=null,-1!==H.currentTarget.className.indexOf("locate-features-using")&&
(this.locateFeaturesUsing=H.target.defaultValue),this.publishParameters=this._getDefaultPublishParameters(),this._updateView()):this._analyze()};C.prototype._sortHeader=function(H){var E=H.target.getAttribute("data-sort"),K=H.target.classList.contains("is-ascending")||H.target.contains("is-descending");H=H.target.getAttribute("data-sort-order");K&&(H="asc"===H?"desc":"asc");this._sortUpdate({property:E,ascending:"asc"===H})};C.prototype._sortUpdate=function(H){var E=this,K=this.publishParameters,
I=K.locationType,L=K.layerInfo||{};L=this.isExcel?K.fields||[]:L.fields||[];var M=(0,a.default)(".js-table-rows",this.domNode).shift(),N={portalUser:this.user,portal:this.portal,locationFieldNames:this.locationFieldNames,locationType:I,template:"none"===I?this.isExcel?z.default:G.default:this.isExcel?A.default:x.default,publishParameters:K};K=H.ascending?"is-ascending":"is-descending";(0,a.default)(".js-table-sort-header").removeClass("is-descending").removeClass("is-ascending").attr("aria-sort",
"none");I=(0,a.default)('.js-table-sort-header[data-sort\x3d"'.concat(H.property,'"]'));0<I.length&&(I.addClass(K),I.attr("aria-sort",H.ascending?"ascending":"descending"),I.attr("data-sort-order",H.ascending?"asc":"desc"));"type"===H.property?this._sortType(L,H):"location"===H.property?this._sortLocation(L,H):this._sortTitle(L,H);this._sortHandler&&this._sortHandler.remove();this._sortHandler=(0,a.default)(".js-table-sort-header",this.domNode).on("click",this._sortHeader.bind(this));this._dijits.forEach(function(P){P.destroy()});
this._dijits=[];L.forEach(function(P){P=new g.default(f.__assign(f.__assign({},N),{field:P}));P.startup();P.placeAt(M);E._dijits.push(P)})};C.prototype._sortTitle=function(H,E){return H.sort(function(K,I){return E.ascending?K.name.localeCompare(I.name):I.name.localeCompare(K.name)})};C.prototype._sortType=function(H,E){var K=this,I,L;return H.sort(function(M,N){I=K._getFieldType(M.type);L=K._getFieldType(N.type);return E.ascending?I.localeCompare(L):L.localeCompare(I)})};C.prototype._sortLocation=
function(H,E){var K=this,I,L;return H.sort(function(M,N){I=K._getLocationType(M.locationType);L=K._getLocationType(N.locationType);return E.ascending?I.localeCompare(L):L.localeCompare(I)})};C.prototype._getLocationType=function(H){return this.locationFieldNames[H]};C.prototype._getFieldType=function(H){return B.default.addItemFrm.fieldTypes[H]};C.prototype._fetchGeocoders=function(){var H=this,E=new q.default,K=this.user;K=u.default.filterBatchGeocoders(((this.portal||K.portal||{}).helperServices||
{}).geocode||[],!K.canUseGeocode);if(null===K||void 0===K?0:K.length){this._geocodeServiceUrl=K[0].url;this._isAgoWorldGeocodeServer=u.default.isEsriWorldGeocoderNoProxy(this._geocodeServiceUrl);this._isServiceProxyAgoWorldGeocodeServer=u.default.isEsriWorldGeocoderThroughProxy(this._geocodeServiceUrl);this._isWorldGeocodeServer=this._isAgoWorldGeocodeServer||this._isServiceProxyAgoWorldGeocodeServer;this._supportsBatch=!0;if(!this._isAgoWorldGeocodeServer&&!this._isServiceProxyAgoWorldGeocodeServer){var I=
void 0;for(I in K)I.url===this._geocodeServiceUrl&&(this._supportsBatch=!!I.batch)}K.forEach(function(L){var M=document.createElement("option");M.value=L.url;M.text=L.name;M.innerHTML=L.name;H._geocoders.add(M)});this._geocoders.selectedIndex=0}else K=(K=u.default.filterNonWorldGeocoders(K))&&K.length?K[0]:null,this._geocodeServiceUrl=(null===K||void 0===K?void 0:K.url)||this._geocodeServiceUrl;E.resolve(!0);return E};C.prototype._fetchCountries=function(){var H=this,E=new q.default,K=this.i18n.countryCodes,
I=this.portal;I=this.user.region||I.ipCntryCode||"wo";var L=[];I="wo"===(null===I||void 0===I?void 0:I.toLowerCase())?"world":I;for(var M in K)L.push({value:M.toLowerCase(),text:K[M],innerHTML:K[M]});L=L.sort(function(N,P){return N.text.localeCompare(P.text)});L.forEach(function(N){var P=document.createElement("option");P.value=N.value;P.text=N.text;P.innerHTML=N.innerHTML;H._countries.add(P)});this._countries.value=K[I]?I.toLowerCase():"world";this._sourceCountry=this._countries.value;E.resolve(!0);
return E};C.prototype._fetchTimeZones=function(){var H=new q.default,E=this.i18n.timeZones,K;for(K in E){var I=document.createElement("option");I.value="".concat("UTC"!==K?parseFloat(K):K);I.text=E[K];I.innerHTML=E[K];this._timeZones.add(I)}this._timeZones.value="".concat(1230);H.resolve(!0);return H};return C=f.__decorate([(0,n.default)(d.default,h.default)],C)}()})},"arcgisonline/sharing/dijit/AnalyzeResults/FieldsTableRow":function(){define("require exports tslib ../../../esriGeowConfig ../../../pages/utils/dom ../../../pages/utils/formatters ../../../tsutils/declareDecorator dijit/_WidgetBase dijit/_TemplatedMixin dojo/on dojo/Deferred dojo/promise/all dojo/i18n!../../../nls/arcgisonline dojo/text!./templates/_table-row.html".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);return function(){function v(p){this.i18n=g.default;this.formatters=d.default}v.prototype.postMixInProperties=function(){this.inherited(arguments);this.portal=this.portal||(null===c.default||void 0===c.default?
void 0:c.default.self)||{};this.portalUser=this.portalUser||this.user||this.portal.portalUser||{};this.templateString=this.template||m.default;this.locationFieldNames=f.__assign({},this.locationFieldNames)};v.prototype.postCreate=function(){this.inherited(arguments);this.cssClasses&&h.default.addClasses(this.domNode,this.cssClasses);this.addEventListeners=this.addEventListeners.bind(this);this.getLocationType=this.getLocationType.bind(this)};v.prototype.startup=function(){this.inherited(arguments);
this.render().then(this.addEventListeners).then(function(){})};v.prototype.render=function(){var p=new t.default;(0,u.default)([this.createFieldTypeOptions(),this.createLocationFieldOptions()]).then(function(){p.resolve(!0)});return p};v.prototype.addEventListeners=function(){var p=this,l=new t.default;this.fieldTypes&&this.own((0,q.default)(this.fieldTypes,"blur",function(n){p.field.type=p.editEnd({evt:n,getValue:p.getFieldType})}),(0,q.default)(this.fieldTypeContainer,"click",function(n){p.editStart({evt:n,
getValue:p.getFieldType})}));"none"!==this.locationType&&this.own((0,q.default)(this.locationFieldContainer,"click",function(n){p.editStart({evt:n,getValue:p.getLocationType})}),(0,q.default)(this.locationFields,"blur",function(n){n=p.editEnd({evt:n,getValue:p.getLocationType});p.field.locationType=n;"coordinates"===p.locationType?"longitude"===n?p.publishParameters.longitudeFieldName=p.field.name:p.publishParameters.latitudeFieldName=p.field.name:p.publishParameters.addressFields[p.field.locationType]=
p.field.name}));l.resolve();return l};v.prototype.editStart=function(p){var l=p.getValue;p=p.evt.target;var n=p.parentElement.querySelector("select"),k=p.dataset.value;"SPAN"===(null===p||void 0===p?void 0:p.tagName)&&(p.classList.add("hide"),n.classList.remove("hide"),n.value=l(k),n.focus())};v.prototype.editEnd=function(p){var l=p.getValue;p=p.evt.target;var n=p.parentElement.querySelector("span"),k=p.options[p.selectedIndex].dataset.value;l=l(k);n.dataset.value=k;n.innerHTML=l;p.classList.add("hide");
n.classList.remove("hide");return k};v.prototype.getLocationType=function(p){return this.locationFieldNames[p]};v.prototype.getFieldType=function(p){return g.default.addItemFrm.fieldTypes[p]};v.prototype.createFieldTypeOptions=function(){var p=this,l=new t.default,n=f.__assign({},g.default.addItemFrm.fieldTypes);this.fieldTypes&&Object.keys(n).forEach(function(k){var r=document.createElement("option");r.dataset.value=k;r.value=n[k];r.innerHTML=n[k];p.fieldTypes.add(r)});l.resolve(!0);return l};v.prototype.createLocationFieldOptions=
function(){var p=this,l=new t.default,n=f.__assign({},this.locationFieldNames);"none"!==this.locationType&&Object.keys(n).forEach(function(k){var r=document.createElement("option");r.dataset.value=k;r.value=n[k];r.innerHTML=n[k];p.locationFields.add(r)});l.resolve(!0);return l};return v=f.__decorate([(0,b.default)(a.default,e.default)],v)}()})},"arcgisonline/sharing/dijit/dialog/AddDatastoreDlg":function(){define("require esri/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin esri/dijit/Tags arcgisonline/esriGeowConfig arcgisonline/sharing/util arcgisonline/pages/pageUtil arcgisonline/pages/dijit/CategoryPicker arcgisonline/sharing/dijit/DatastoreDatabaseSettings arcgisonline/sharing/dijit/DatastoreFolderSettings arcgisonline/sharing/dijit/DatastoreCloudMenu arcgisonline/sharing/dijit/DatastoreNoSQLMenu arcgisonline/sharing/dijit/DatastoreCloudSettings arcgisonline/sharing/dijit/DatastoreNoSQLSettings arcgisonline/sharing/dijit/DatastoreBDFSSettings arcgisonline/sharing/dijit/DatastoreBDFSFileShareSettings arcgisonline/sharing/dijit/DatastoreBDFSHDFSSettings arcgisonline/sharing/dijit/DatastoreBDFSHiveSettings arcgisonline/sharing/dijit/DatastoreBDFSCloudMenu arcgisonline/sharing/dijit/DatastoreBDFSCloudSettings arcgisonline/sharing/dijit/dialog/_CreateItemUtilMixin arcgisonline/sharing/dijit/_federated-servers-table arcgisonline/sharing/dijit/dialog/GeneralDlg dijit/Dialog dijit/form/Textarea dijit/form/Select dojo/cookie dojo/json dojo/Deferred dojo/promise/all dojo/DeferredList dojo/_base/array dojo/topic dojo/on dojo/string dojo/query dojo/dom-class dojo/dom-attr dojo/dom-style dojo/NodeList-dom dojo/text!./templates/AddDatastoreDlg.html arcgisonline/pages/utils/dom dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E,K,I,L,M,N,P,R,Y,ja,aa,da,ra,ca){return J([f,c,h],{templateString:N.substitute(da,{i18n:ca.AddDatastoreDlg}),dialog:null,federatedServers:null,hostingServer:null,currentStep:null,item:null,isEnableDatastoreBDFSSettings:null,isEnableDatastoreNoSQLSettings:null,cloudStorePath:null,cloudStoreId:null,postCreate:function(){this.inherited(arguments)},constructor:function(fa){this.currentStep=1;this.i18n=ca;this.formData=new FormData;
this.item={};this.titleRegex=/\s|\+|\?|&|\/|\(|\)|\\|!|#|"|\||\*|:|<|>|%|\$|@|`|~|'|\^|\[|\]|,|=|;/gi;this.isEnableDatastoreNoSQLSettings=this.isEnableDatastoreBDFSSettings=!1},startup:function(){this.inherited(arguments);this._user=a.getUser();this._loadConnections();E({tags:a.loadUserTags(this._user.username),categories:this.portal.getCategories(),folders:this.portalUser.getFolders(),servers:this.portal.getFederatedServers()}).then(function(fa){this._setupTags(fa.tags);this._setupCategories(fa.categories);
this._setupFolders(fa.folders);this._setupFederatedServers(fa.servers);this._setupStepSettings();this._showModal()}.bind(this),function(fa){})},_setupStepSettings:function(){this.datastoreDatabaseSettings=(new t({hostingServer:this.hostingServer})).placeAt(this.step2databaseContainer);this.datastoreFolderSettings=(new u({})).placeAt(this.step2FolderContainer);this.datastoreCloudMenu=(new g({})).placeAt(this.step2CloudMenuContainer);this.datastoreCloudSettings=(new v({})).placeAt(this.step2CloudContainer);
this.isEnableDatastoreBDFSSettings&&b.bdfsEnabled&&(R.remove(this.bigdataContainerNode.parentElement,"hide"),this.datastoreBDFSSettings=(new l({})).placeAt(this.step2BDSFContainer),this.datastoreBDFSFileShareSettings=(new n({})).placeAt(this.step2FileShareContainer),this.datastoreBDFSHDFSSettings=(new k({})).placeAt(this.step2HDFSContainer),this.datastoreBDFSHiveSettings=(new r({})).placeAt(this.step2HiveContainer),this.datastoreBDFSCloudMenu=(new w({})).placeAt(this.step2BDFSCloudMenuContainer),
this.datastoreBDFSCloudSettings=(new x({})).placeAt(this.step2BDFSCloudContainer));this.isEnableDatastoreNoSQLSettings&&b.noSQLEnabled&&!a.isArcGISEnterpriseOnKubernetes()&&(R.remove(this.noSQLContainerNode.parentElement,"hide"),this.datastoreNoSQLMenu=(new m({})).placeAt(this.step2NoSQLMenuContainer),this.datastoreNoSQLSettings=(new p({})).placeAt(this.step2NoSQLContainer))},_setupFederatedServers:function(fa){this.federatedServers=fa.servers;fa=this.federatedServers.filter(function(la){return"HOSTING_SERVER"===
la.serverRole.toUpperCase()});fa.length&&(this.hostingServer=fa[0]);this.federatedServers.filter(function(la){return-1<la.serverFunction.toUpperCase().indexOf("GEOANALYTICS")}).length&&(this.isEnableDatastoreBDFSSettings=!0);this.federatedServers.filter(function(la){return-1<la.serverFunction.toUpperCase().indexOf("KNOWLEDGE")}).length&&(this.isEnableDatastoreNoSQLSettings=!0);this.federatedServersTable=(new G({federatedServers:this.federatedServers,filterFederatedServers:!0})).placeAt(this.federatedServersGridContainer)},
_setupFolders:function(fa){var la=B("ESRI_Content");la=la?C.parse(la):{};var ta=la.folderId||null;this._selectedFolderId=la.folderId||null;(!fa||!fa.length||fa&&fa.length&&fa[0].title!==this.portalUser.username)&&fa.unshift({title:this.portalUser.username,id:"/"});this._folders=ra.createElement("arcgis-folder-picker",{api:3,folder:ta||this.portalUser.username,label:ca.saveInFolder},this.domNode.querySelector(".folder-container"))},_setupCategories:function(fa){b.self.hasCategorySchema&&(this._categories=
new q({categories:[],schema:fa},this._categoriesContainer),this._categories.startup(),P(".categories-container",this.domNode).removeClass("hide"))},_showModal:function(){this.dialog=new A({title:ca.items.addDatastore,content:this.domNode,class:"add-datastore-dlg",onHide:this.destroy.bind(this),closable:!0});this.dialog.show().then(function(){this.addEventListeners();var fa=dojo.create("a",{className:"icon-ui-question margin-left-half font-size--1 help-icon",title:this.i18n.AddDatastoreDlg.helpIconDescription,
href:b.self&&b.self.helpMap?b.self.helpBase+b.self.helpMap.m["120001660"]:"",target:"_blank"}),la=dojo.query(".dijitDialogTitleBar",this.dialog.domNode);dojo.place(fa,la[0],1)}.bind(this))},_setupTags:function(fa){this._tags=ra.createElement("arcgis-tags-picker",{api:3,knownTags:fa.map(function(la){return la.tag}),label:ca.itemTags,scale:"m"},this.domNode.querySelector(".tags-container"))},_loadConnections:function(){this.own(L.subscribe("onSelectedTagsUpdate",function(fa){var la=this._tags.get("tags");
fa=la?fa.split(",").concat(la.split(",")):fa.split(",");this._tags.set("tags",this._unique(fa).join(","))}.bind(this)),L.subscribe("settings/validationComplete",this._validationComplete.bind(this)))},_processFolderPath:function(fa,la,ta){if(!ta||0!==ta.trim().length){var Q;ta.split("\\").some(function(T){Q=T;if(0<T.trim().length)return!0});la.set("value",Q);R.remove(fa,"hide")}},addEventListeners:function(){this.own(P("input[name\x3d'datastoreType']").on("change",function(fa){P("label.datastore-type").removeClass("active");
R.add(fa.target.parentElement,"active")}.bind(this)),P("input[name\x3d'noSQLProvider']").on("change",function(fa){P("label.noSQL-type").removeClass("active");R.add(fa.target.parentElement,"active")}.bind(this)),P("input[name\x3d'bdfsType']").on("change",function(fa){P("label.bdfs-type").removeClass("active");R.add(fa.target.parentElement,"active")}.bind(this)),L.subscribe("server/openNFSModal",function(fa){fa&&R.add(this.nfsModal,"is-active")}.bind(this)),M(this.nfsModalCancelButton,"click",function(fa){fa.preventDefault();
this._goToStep(2);R.remove(this.nfsModal,"is-active")}.bind(this)),M(this.nfsModalXButton,"click",function(fa){fa.preventDefault();this._goToStep(2);R.remove(this.nfsModal,"is-active")}.bind(this)),M(this.nfsModalOkButton,"click",function(fa){fa.preventDefault();this.item.allowServicesRestart=!0;this.federatedServersTable.renderTable(this.item);this.federatedServersTable.validateDatastoreForServers(this._createItemDataObject(this.item).text);R.remove(this.nfsModal,"is-active")}.bind(this)),M(this.cancelButton,
"click",function(fa){fa.preventDefault();this.dialog.hide()}.bind(this)),M(this.nextButton,"click",function(fa){fa.preventDefault();this.nextButton.disabled=!0;ja.set(this.nextButton,"opacity",1);if("cloud"===this.item.dataStoreType||"bigdata"===this.item.dataStoreType||"noSQL"===this.item.dataStoreType||"bdfsCloud"===this.item.dataStoreType&&"new"===this.datastoreBDFSCloudSettings.cloudStoreType)this.currentStep--,0===this.currentStep&&this.currentStep++;this._validateStep(this.currentStep).then(function(la){la&&
(2===this.currentStep&&(this.federatedServersTable.renderTable(this.item),this.federatedServersTable.validateDatastoreForServers(this._createItemDataObject(this.item).text)),this._goToStep(this.currentStep+1));this.nextButton.disabled=!1}.bind(this))}.bind(this)),M(this.backButton,"click",function(fa){fa.preventDefault();"bigdata"===this.item.dataStoreType&&(this.item={},this.bigdataContainerNode.checked=!0,M.emit(this.bigdataContainerNode,"change",{bubbles:!0,cancelable:!0}));"cloud"===this.item.dataStoreType&&
(this.item={},this.cloudContainerNode.checked=!0,M.emit(this.cloudContainerNode,"change",{bubbles:!0,cancelable:!0}));"noSQL"===this.item.dataStoreType&&(this.item={},this.noSQLContainerNode.checked=!0,M.emit(this.noSQLContainerNode,"change",{bubbles:!0,cancelable:!0}));"folder"===this.item.dataStoreType&&"nfsHostAndPath"===this.item.serverFolderPath&&3===this.currentStep&&(delete this.item.allowServicesRestart,delete this.item.servers);3>this.currentStep&&("fileshare"===this.item.dataStoreType||
"hdfs"===this.item.dataStoreType||"hive"===this.item.dataStoreType||"bdfsCloud"===this.item.dataStoreType)&&(this.currentStep++,this.item.dataStoreType="bigdata");3>this.currentStep&&("amazon"===this.item.dataStoreType||"azure"===this.item.dataStoreType||"alibaba"===this.item.dataStoreType||"google"===this.item.dataStoreType)&&(this.currentStep++,this.item.dataStoreType="cloud");3>this.currentStep&&"Neo4j"===this.item.dataStoreType&&(this.currentStep++,this.item.dataStoreType="noSQL");3>this.currentStep&&
("bdfsamazon"===this.item.dataStoreType||"bdfsazure"===this.item.dataStoreType)&&(this.currentStep++,this.item.dataStoreType="bdfsCloud");this._goToStep(this.currentStep-1)}.bind(this)),M(this.addButton,"click",function(fa){fa.preventDefault();this._validateStep(this.currentStep).then(function(la){la&&this._addDatastore(this.item,this.portal)}.bind(this))}.bind(this)))},_getBDFSParameterItem:function(fa,la,ta){var Q=la.split("/")[2].split("_")[0];ta={text:{},type:"Data Store"};ta.title=fa||Q;ta.tags=
[];ta.categories=void 0;fa={info:{connectionString:JSON.stringify({path:la}),connectionType:"dataStore"},path:"/bigDataFileShares/"+ta.title,type:"bigDataFileShare"};ta.text=JSON.stringify(fa);return ta},_addBDFSDatastoreItem:function(fa,la,ta){var Q=new H;a.request({url:b.restBaseUrl+"content/items/"+la+"/data"}).then(function(T){var O=this._getBDFSParameterItem(fa,ta||T.path,T.id);this.item.dataStoreType="bdfsDataStore";this._addItemToPortal(O,null,this.portal);Q.resolve({result:T})}.bind(this),
function(T){this._showError(T)}.bind(this));return Q},_addDatastore:function(fa,la){var ta=this._createItemDataObject(fa);R.remove(this.errorNode,"is-active");this.errorNode.innerHTML="";R.add(this.addButton,"hide");R.add(this.backButton,"hide");R.add(this.cancelButton,"hide");P(".step-"+this.currentStep).addClass("hide");P(".loader-text",this.domNode).innerHTML(ca.AddDatastoreDlg.addingDataStore);R.add(this.loader,"is-active");"bdfsCloud"===fa.dataStoreType&&"existing"===this.datastoreBDFSCloudSettings.cloudStoreType?
this._addBDFSDatastoreItem(this.item.title,this.cloudStoreId,this.cloudStorePath):this._addItemToPortal(ta,fa.folderId,la)},_addItemToPortal:function(fa,la,ta){D.addItem(fa,la,ta).then(function(Q){Q.success?this._addDatastoreToServers(Q.id):this._showError(Q)}.bind(this),function(Q){this._showError(Q)}.bind(this))},_showError:function(fa){this.errorNode.innerHTML=this.i18n.AddDatastoreDlg.addDatastoreError+" "+(fa.details||[]).join(" ");P(".step-"+this.currentStep).removeClass("hide");R.remove(this.addButton,
"hide");R.remove(this.backButton,"hide");R.remove(this.cancelButton,"hide");R.remove(this.loader,"is-active");R.add(this.errorNode,"is-active")},_updateItemById:function(fa){var la=new H;fa=b.restBaseUrl+"content/users/"+a.getUser().username+"/items/"+fa+"/update";a.request({url:fa}).then(function(ta){la.resolve({result:ta})}.bind(this),function(ta){la.resolve({error:ta})}.bind(this));return la},_addDatastoreToServers:function(fa){var la=[];this.item.servers.forEach(function(ta){la.push(function(){var Q=
new H,T={serverId:ta.id,datastoreId:fa};a.isArcGISEnterpriseOnKubernetes()&&(T.options=JSON.stringify({allowServicesRestart:!0}));a.request({url:b.restBaseUrl+"portals/self/datastores/addToServer",content:T},{usePost:!0}).then(function(O){Q.resolve({serverId:ta.id,result:O})}.bind(this),function(O){Q.resolve({serverId:ta.id,error:O})}.bind(this));return Q}.call(this))}.bind(this));(new K(la)).then(function(ta){var Q=[];ta.forEach(function(Z){Z[0]&&(Z[1].result||{}).success||Q.push(Z[1])});ta=b.baseUrl+
"item.html?id\x3d"+fa;if(Q.length){var T=Q.map(function(Z){var na=this.federatedServers.filter(function(ia){if(ia.id===Z.serverId){var X=ia.url,ha=(Z.error||{}).message;ha&&(X+=" - "+ha);ia.errorMessage=X;return!0}}.bind(this));if(1===na.length)return na[0].errorMessage}.bind(this));this.errorNode.innerHTML=this.i18n.AddDatastoreDlg.addToServerError+"\x3cbr\x3e\x3cbr\x3e"+T.join("\x3cbr\x3e");R.add(this.errorNode,"is-active");R.add(this.federatedServersGridContainer,"hide");R.remove(this.itemButton,
"hide");Y.set(this.itemButton,"href",ta);R.remove(this.loader,"is-active")}else if(["bdfsCloud","bdfsamazon","bdfsazure"].includes(this.item.dataStoreType))this._addBDFSDatastoreItem(this.item.title,fa,null);else if(-1<"folder database amazon google azure alibaba huawei Neo4j".split(" ").indexOf(this.item.dataStoreType))location.href=ta;else var O=setInterval(function(){var Z=b.restBaseUrl+"content/items/"+fa+"/relatedItems",na=new H;a.request({url:Z,content:{relationshipType:"BDFSDataStore2BDFSCatalogService",
direction:"forward"}}).then(function(ia){ia.total&&(clearInterval(O),location.href=b.baseUrl+"item.html?id\x3d"+ia.relatedItems[0].id)},function(ia){na.reject(ia)});return na},1E4)}.bind(this))},_createItemDataObject:function(fa){var la={text:{info:{isManaged:!1}},type:"Data Store"};la.title=fa.title;la.tags=fa.tags;la.categories=fa.categories;la.snippet=fa.summary;switch(fa.dataStoreType){case "folder":fa=this.datastoreFolderSettings.createFolderDataObject(la.text,fa);la.text=fa;break;case "database":la.text.type=
"egdb";la.text.path="/enterpriseDatabases/"+fa.title;la.text.info.dataStoreConnectionType="shared";"newConnection"===fa.serverDatabaseOption?(la.text.info.connectionString=fa.serverConnectionString,la.text.info.clientConnectionString=fa.publisherConnectionString,la.text.info.dataStoreConnectionType="replicated"):la.text.info.connectionString=fa.publisherConnectionString;break;case "amazon":case "azure":case "alibaba":case "google":la.text=this.datastoreCloudSettings.createCloudProviderDataObject(la.text,
fa);break;case "Neo4j":la.text=this.datastoreNoSQLSettings.createNoSQLDataObject(la.text,fa);break;case "fileshare":la.type="Data Store";la.text=this.datastoreBDFSFileShareSettings.createFileShareProviderDataObject(la.text,fa);break;case "hdfs":la.type="Data Store";la.text=this.datastoreBDFSHDFSSettings.createHDFSProviderDataObject(la.text,fa);break;case "hive":la.type="Data Store";la.text=this.datastoreBDFSHiveSettings.createHiveProviderDataObject(la.text,fa);break;case "bdfsCloud":la.type="Data Store";
fa=this.datastoreBDFSCloudMenu.createBDFSCloudProviderDataObject(la.text,fa);"existing"===this.datastoreBDFSCloudSettings.cloudStoreType&&(la.text=void 0,this.cloudStoreId=this.federatedServersTable.datastoreId=fa.cloudStoreId,this.cloudStorePath=fa.cloudStorePath);break;case "bdfsamazon":case "bdfsazure":la.type="Data Store",la.text=this.datastoreBDFSCloudSettings.createBDFSCloudProviderDataObject(la.text,fa)}la.text=JSON.stringify(la.text);return la},_validateTitle:function(fa){var la={valid:!0,
errorMessage:""};if(!fa)return la.valid=!1,la.message=this.i18n.AddDatastoreDlg.validation.invalidTitle,la;for(var ta=0;ta<fa.length;ta++){var Q=fa[ta];if(Q.match(this.titleRegex)){la.valid=!1;la.message=N.substitute(this.i18n.AddDatastoreDlg.validation.invalidTitleCharacter,{character:Q});break}}return la},_validateStep:function(fa){var la=new H;this._setStepFormData(this.currentStep);var ta={valid:!0},Q=!1;switch(fa){case 1:if(!this.item.dataStoreType){ta=this._generateInvalidResult(this.i18n.AddDatastoreDlg.validation.invalidDataStoreType);
break}Q=!0;D.itemExists(this.item,this.portalUser.username,this.item.folderId).then(function(T){T.itemExists&&(ta=this._generateInvalidResult(T.message),e.createSpecifiedDialog(F).show(ta));la.resolve(ta.valid)}.bind(this));break;case 2:if("folder"===this.item.dataStoreType){(fa=this.datastoreFolderSettings.validateFolderInputs(this.item))&&(ta=this._generateInvalidResult(fa));break}if("database"===this.item.dataStoreType){if(!this.hostingServer){ta=this._generateInvalidResult(this.i18n.AddDatastoreDlg.hostingServerError);
break}if(!this.item.publisherConnectionString){ta=this._generateInvalidResult(this.i18n.AddDatastoreDlg.validation.invalidPublisherConnectionFile);break}if("newConnection"===this.item.serverDatabaseOption&&!this.item.serverConnectionString){ta=this._generateInvalidResult(this.i18n.AddDatastoreDlg.validation.invalidServerConnectionFile);break}}("amazon"===this.item.dataStoreType||"azure"===this.item.dataStoreType||"alibaba"===this.item.dataStoreType||"google"===this.item.dataStoreType)&&(fa=this.datastoreCloudSettings.validateCloudProviderInputs(this.item))&&
(ta=this._generateInvalidResult(fa));"fileshare"===this.item.dataStoreType&&(fa=this.datastoreBDFSFileShareSettings.validateFileShareInputs(this.item))&&(ta=this._generateInvalidResult(fa));"hdfs"===this.item.dataStoreType&&(fa=this.datastoreBDFSHDFSSettings.validateHDFSInputs(this.item))&&(ta=this._generateInvalidResult(fa));"hive"===this.item.dataStoreType&&(fa=this.datastoreBDFSHiveSettings.validateHiveInputs(this.item))&&(ta=this._generateInvalidResult(fa));"bdfsCloud"===this.item.dataStoreType&&
(this.datastoreBDFSCloudMenu.cloudStoreId||(ta=this._generateInvalidResult(ca.AddDatastoreDlg.validation.invalidDataStore)));("bdfsamazon"===this.item.dataStoreType||"bdfsazure"===this.item.dataStoreType)&&(fa=this.datastoreBDFSCloudSettings.validateBDFSCloudInputs(this.item))&&(ta=this._generateInvalidResult(fa));"Neo4j"===this.item.dataStoreType&&(fa=this.datastoreNoSQLSettings.validateNoSQLInputs(this.item))&&(ta=this._generateInvalidResult(fa));break;case 3:(this.item.servers||[]).length||(ta=
this._generateInvalidResult(this.i18n.AddDatastoreDlg.validation.invalidServers));break;case 4:fa=this._validateTitle(this.item.title);if(!fa.valid){ta=this._generateInvalidResult(fa.message);break}"Neo4j"===this.item.dataStoreType?(Q=!0,D.checkForDuplicateNoSQL(this.item).then(function(T){T.itemExists&&(ta=this._generateInvalidResult(this.i18n.AddDatastoreDlg.validation.existingNoSQLItem+"\x3cbr\x3e"+this.getAllServers()),e.createSpecifiedDialog(F).show(ta));la.resolve(ta.valid)}.bind(this))):(Q=
!0,D.itemExists(this.item,this.portalUser.username,this.item.folderId).then(function(T){T.itemExists&&(ta=this._generateInvalidResult(T.message),e.createSpecifiedDialog(F).show(ta));la.resolve(ta.valid)}.bind(this)));break;default:throw"Invalid step";}Q||(la.resolve(ta.valid),ta.valid||e.createSpecifiedDialog(F).show(ta));return la},_generateInvalidResult:function(fa){return{title:this.i18n.generalDlg.errorDlgTitle,valid:!1,message:fa}},_setStepFormData:function(fa){switch(fa){case 1:fa=(P("input[name\x3d'datastoreType']:checked")[0]||
{}).value;var la=(P("input[name\x3d'cloudstoreProvider']:checked")[0]||{}).value,ta=(P("input[name\x3d'bdfsType']:checked")[0]||{}).value,Q=(P("input[name\x3d'bdfsCloudstoreProvider']:checked")[0]||{}).value,T=(P("input[name\x3d'noSQLProvider']:checked")[0]||{}).value;this.item.type="Data Store";this.item.dataStoreType="cloud"===this.item.dataStoreType?la||this.item.dataStoreType:"bigdata"===this.item.dataStoreType?ta||this.item.dataStoreType:"bdfsCloud"===this.item.dataStoreType?Q||this.item.dataStoreType:
"noSQL"===this.item.dataStoreType?T||this.item.dataStoreType:fa;break;case 2:"folder"===this.item.dataStoreType&&(this.item=this.datastoreFolderSettings.getFolderParamterUpdatedItem(this.item));"database"===this.item.dataStoreType&&(this.item.publisherConnectionString=R.contains(this.datastoreDatabaseSettings.publisherConnectionContainer,"is-error")?"":this.datastoreDatabaseSettings.publisherConnectionString.value,this.item.serverDatabaseOption=(P("input[name\x3d'serverDatabaseOption']:checked")[0]||
{}).value,this.item.serverConnectionString=R.contains(this.datastoreDatabaseSettings.serverConnectionContainer,"is-error")?"":this.datastoreDatabaseSettings.serverConnectionString.value);if("amazon"===this.item.dataStoreType||"azure"===this.item.dataStoreType||"alibaba"===this.item.dataStoreType||"google"===this.item.dataStoreType)this.item=this.datastoreCloudSettings.getCloudParamterUpdatedItem(this.item);"fileshare"===this.item.dataStoreType&&(this.item=this.datastoreBDFSFileShareSettings.getFileshareParamterUpdatedItem(this.item));
"hdfs"===this.item.dataStoreType&&(this.item=this.datastoreBDFSHDFSSettings.getHDFSParamterUpdatedItem(this.item));"hive"===this.item.dataStoreType&&(this.item=this.datastoreBDFSHiveSettings.getHiveParamterUpdatedItem(this.item));if("bdfsamazon"===this.item.dataStoreType||"bdfsazure"===this.item.dataStoreType)this.item=this.datastoreBDFSCloudSettings.getBDFSCloudParamterUpdatedItem(this.item);"Neo4j"===this.item.dataStoreType&&(this.item=this.datastoreNoSQLSettings.getNoSQLUpdatedItem(this.item));
break;case 3:this.item.servers=this.federatedServersTable.selectedServers;break;case 4:this.item.title=this.itemTitle.value;this.item.categories=(this._categories||{}).categories;this.item.tags=this._tags.activeTags.join(",")||null;this.item.folderId=this._folders.value!==this._user.username?this._folders.value:null;this.item.summary=this.itemSummary.value;break;default:throw"Error setting step data";}},_goToStep:function(fa){this.currentStep=fa;this._changeStepContent(fa);this._changeStepButtons(fa)},
_changeStepContent:function(fa){P(".step-container").addClass("hide");var la=".step-"+fa.toString()+(this.item.dataStoreType&&2===fa?"-"+this.item.dataStoreType:"");2===fa&&["amazon","azure","google","alibaba","huawei"].includes(this.item.dataStoreType)&&(la=".step-2-cloudItem",this.datastoreCloudSettings._displayCloudStoreItem(this.item.dataStoreType));2===fa&&"bdfsCloud"===this.item.dataStoreType&&(la=".step-2-bdfsCloudMenu");2===fa&&["bdfsamazon","bdfsazure"].includes(this.item.dataStoreType)&&
(la=".step-2-bdfsCloud",this.datastoreBDFSCloudSettings._displayBDFSCloudStoreItem(this.item.dataStoreType));2===fa&&["Neo4j"].includes(this.item.dataStoreType)&&(la=".step-2-noSQLItem",this.datastoreNoSQLSettings._displayNoSQLContent(this.item.dataStoreType));P(la).removeClass("hide");3===fa&&(-1<["fileshare","bdfsCloud"].indexOf(this.item.dataStoreType)?P(".step-info-container",this.domNode).innerHTML(ca.AddDatastoreDlg.step3Info):P(".step-info-container",this.domNode).innerHTML(ca.AddDatastoreDlg.configureServersInfo))},
_validationComplete:function(fa){a.isArcGISEnterpriseOnKubernetes()&&R.remove(this.folderKubernetesWarning,"is-active")},_changeStepButtons:function(fa){switch(fa){case 1:R.remove(this.nextButton,"hide");R.add(this.addButton,"hide");R.add(this.backButton,"hide");break;case 2:R.remove(this.backButton,"hide");R.remove(this.nextButton,"hide");R.add(this.addButton,"hide");break;case 3:R.remove(this.backButton,"hide");R.remove(this.nextButton,"hide");R.add(this.addButton,"hide");break;case 4:R.remove(this.backButton,
"hide"),R.remove(this.addButton,"hide"),R.add(this.nextButton,"hide")}},onCancel:function(){},onSubmit:function(fa){fa.preventDefault()},destroy:function(){this._categories&&this._categories.destroyRecursive();this.dialog.destroyRecursive()},getAllServers:function(){var fa="";this.item.servers.map(function(la){fa.includes("\x3ca href\x3d"+la.url+"\x3e"+la.url+"\x3c/a\x3e\x3cbr\x3e")||(fa+="\x3ca href\x3d"+la.url+"\x3e"+la.url+"\x3c/a\x3e\x3cbr\x3e")});return fa}})})},"arcgisonline/sharing/dijit/DatastoreDatabaseSettings":function(){define("esri/declare arcgisonline/sharing/util dojo/Deferred dojo/string dojo/query dojo/on dojo/topic dojo/dom-class dojo/dom-construct dojo/dom-attr dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/DatastoreDatabaseSettings.html dojo/i18n!arcgisonline/nls/arcgisonline dojo/NodeList-traverse".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v){return S([t,u,g],{templateString:c.substitute(m,{i18n:v.AddDatastoreDlg}),hostingServer:null,constructor:function(p){this.hostingServer=p.hostingServer;this.settingsMode=p.settingsMode;this.publishingToolsUrl=this._getPublishingToolsUrl();this.itemData=p.itemData;this.databaseType=this.itemData.info.implementation;this.keyFileContents={};this.newItemDetails=p.itemData},postCreate:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments);
this.settingsMode?(this.changePublisherConnectionBtn.innerHTML=v.AddDatastoreDlg.chooseDifferentPasswordFile,this.changeServerConnectionBtn.innerHTML=v.AddDatastoreDlg.chooseDifferentPasswordFile,a.add(this.databaseGeneralDescription,"hide"),a.add(this.changePublisherConnectionBtn,"hide"),a.add(this.changeServerConnectionBtn,"hide"),a.add(this.serverDatabaseOptionContainer,"hide"),a.add(this.publisherDatabaseContainer,"hide")):this.hostingServer||(a.add(this.publisherDatabaseContainer,"hide"),a.add(this.serverDatabaseContainer,
"hide"),a.add(this.databaseGeneralDescription,"hide"),a.add(this.hostingServerError,"is-active"));"database"===this.itemData.info.category&&("snowflake"===this.itemData.info.implementation?a.remove(this.snowflakeCredentialsContainer,"hide"):"bigquery"===this.itemData.info.implementation&&a.remove(this.bqCredentialsContainer,"hide"));this.addEventListeners()},_populateDatabaseSettingsFieldValues:function(p){var l=p.info.JDBCConnection,n=p.info.implementation;document.querySelectorAll(".databaseSettingsEdit").forEach(function(k){"authentication-type"!==
k.id&&"password"!==k.id&&"user"!==k.id&&(k.value="snowflake"===n&&"server"===k.id?l.connectionUrl.slice(l.connectionUrl.indexOf("jdbc:snowflake://")+17,l.connectionUrl.length):l[k.id])});"snowflake"===this.databaseType&&(this.newItemDetails.info.JDBCConnection.user="",this.newItemDetails.info.JDBCConnection.password="")},_getPublishingToolsUrl:function(){return this.hostingServer?this.hostingServer.adminUrl+"/rest/services/System/PublishingTools/GPServer":""},_setConnectionStrings:function(p,l){a.remove(this.publisherConnectionContainer,
"hide");a.add(this.publisherConnectionFile,"hide");a.add(this.publisherFileNameContainer,"hide");l?(h("input[value\x3d'newConnection']",this.domNode)[0].checked=!0,this._renderConnectionString(this.publisherConnectionStringTable,l),this._renderConnectionString(this.serverConnectionStringTable,p),q.set(this.publisherConnectionString,{value:l}),q.set(this.serverConnectionString,{value:p}),a.remove(this.publisherDatabaseNewContainer,"hide"),a.remove(this.serverConnectionContainer,"hide"),a.add(this.serverConnectionFile,
"hide"),a.add(this.serverFileNameContainer,"hide"),a.add(this.serverDatabaseOptionContainer,"hide")):(this._renderConnectionString(this.publisherConnectionStringTable,p),q.set(this.publisherConnectionString,{value:p}),a.add(this.serverDatabaseContainer,"hide"))},_doesKeyExist:function(p,l){return p.some(function(n){return n.key===l})},_parseConnectionString:function(p){var l=[];p&&p.split(";").forEach(function(n){n=n.split("\x3d");2!==n.length||this._doesKeyExist(l,n[0])||l.push({key:n[0],value:n[1]})}.bind(this));
return l},_changeConnectionFile:function(p,l,n,k,r){r.stopPropagation();n.value="";a.remove(p,"is-error");a.add(p,"hide");a.remove(n,"hide");a.remove(k,"hide");this.settingsMode&&b.publish("settings/startChangeConnectionFile")},_cancelChangeConnectionFile:function(p,l,n){a.remove(p,"hide");a.add(l,"hide");a.add(n,"hide");a.remove(l,"input-error");a.remove(l.nextElementSibling,"is-active");this.settingsMode&&b.publish("settings/cancelChangeConnectionFile")},_processConnectionFile:function(p,l,n,k,
r,w,x){var D=new f;x.target.value&&(a.remove(x.target,"input-error"),a.remove(x.target.nextElementSibling,"is-active"),a.add(x.target,"hide"),a.remove(p,"hide"),a.add(w,"hide"));var G=event.target.files[0];this._uploadConnectionFile(G).then(this._submitJob.bind(this)).then(this._pollStatus.bind(this)).then(this._getConnectionString.bind(this)).then(function(F){a.remove(k.parentElement,"hide");a.remove(l,"is-error");a.remove(l,"hide");a.add(p,"hide");this._renderConnectionString(r,F.value);q.set(n,
{value:F.value});k.innerHTML=G.name;this.settingsMode&&(F={connectionString:F.value,connectionStringType:q.get(n,"data-connection-string-type")},b.publish("settings/connectionStringChange",F))}.bind(this),function(F){x.target.value&&(a.add(x.target,"input-error"),a.add(x.target.nextElementSibling,"is-active"),a.remove(x.target,"hide"),a.add(p,"hide"),a.remove(w,"hide"));k.innerHTML=G.name}.bind(this));return D},_renderConnectionString:function(p,l){q.set(p,{innerHTML:null});this._parseConnectionString(l).forEach(function(n){"DBCLIENT"===
n.key&&-1<["bigquery","snowflake","redshift"].indexOf(n.value)&&a.add(this.serverDatabaseContainer,"hide");var k=e.create("tr");e.create("td",{innerHTML:n.key},k);e.create("td",{innerHTML:n.value,class:"value-cell"},k);-1<["ENCRYPTED_PASSWORD_UTF8","ENCRYPTED_PASSWORD"].indexOf(n.key)&&a.add(k,"hide");e.place(k,p)}.bind(this))},_getConnectionString:function(p){var l=new f;p=this.publishingToolsUrl+"/Get%20Database%20Connection%20String/jobs/"+p.jobId+"/"+p.results.out_connectionString.paramUrl;J.request({url:p},
{useProxy:J.shouldUseProxy(p)}).then(function(n){l.resolve(n)}.bind(this),function(n){l.reject(n)}.bind(this));return l},_submitJob:function(p){var l=new f,n=this.publishingToolsUrl+"/Get%20Database%20Connection%20String/submitJob";J.request({url:n,content:{in_inputData:p.itemID,in_connDataType:"UPLOADED_CONNECTION_FILE_ID"}},{usePost:!0,useProxy:J.shouldUseProxy(n)}).then(function(k){"ESRIJOBSUBMITTED"===(k.jobStatus||"").toUpperCase()?l.resolve(k):l.reject(k)}.bind(this),function(k){l.reject(k)}.bind(this));
return l},_uploadConnectionFile:function(p){var l=new f,n=this.hostingServer.adminUrl+"/admin/uploads/upload",k=new FormData;k.append("itemFile",p);J.request({url:n,form:k},{usePost:!0,useProxy:J.shouldUseProxy(n)}).then(function(r){"success"===r.status?l.resolve(r.item):l.reject(r)},function(r){l.reject(r)});return l},_pollStatus:function(p){var l=new f,n=0,k=this.publishingToolsUrl+"/Get%20Database%20Connection%20String/jobs/"+p.jobId;(function w(){n++;20>=n?J.request({url:k},{useProxy:J.shouldUseProxy(k)}).then(function(x){switch((x.jobStatus||
"").toUpperCase()){case "ESRIJOBNEW":case "ESRIJOBSUBMITTED":case "ESRIJOBWAITING":case "ESRIJOBEXECUTING":setTimeout(w,1E3);break;case "ESRIJOBSUCCEEDED":l.resolve(x);break;default:l.reject(x)}},function(x){l.reject({message:"Error."})}):l.reject({message:"Error."})})();return l},_startDatastoreDatabaseEdit:function(){a.remove(this.changePublisherConnectionBtn,"hide");a.remove(this.changeServerConnectionBtn,"hide");document.querySelectorAll(".databaseSettingsEdit").forEach(function(p){"authentication-type"!==
p.id&&(p.disabled=!1)})},_editDatabaseSnowflakeCredentials:function(p,l){"server"===p?this.newItemDetails.info.JDBCConnection.connectionUrl="jdbc:snowflake://"+l:this.newItemDetails.info.JDBCConnection[p]=l;this.snowflakeUsername.value&&this.snowflakePassword.value&&b.publish("settings/snowflakeFieldsChanged")},_editDatabaseBigQueryCredentials:function(p,l){this.newItemDetails.info.JDBCConnection[p]=l;b.publish("settings/bigQueryFieldsChanged")},_editDataStoreFields:function(p){var l=p.target.id;
p=p.target.value;switch(this.databaseType){case "snowflake":this._editDatabaseSnowflakeCredentials(l,p);break;case "bigquery":this._editDatabaseBigQueryCredentials(l,p)}},_checkValidJson:function(p){if(!p)return!1;this.bigQueryKeyFileField.value=p.name;if("application/json"!==p.type)return this.validJSON.status="invalid",this.validJSON.icon="exclamation-mark-triangle",this.validJSON.innerHTML=v.AddDatastoreDlg.invalidJson,this.bigQueryKeyFileField.status="invalid",this.bqFileIsValid=!1;this.validJSON.status=
"idle";this.validJSON.icon="information";this.validJSON.innerHTML=v.AddDatastoreDlg.validJson;this.bigQueryKeyFileField.status="valid";return this.bqFileIsValid=!0},_onHandleBQKeyFileInputChange:function(p){p=p.target.files[0];if(this._checkValidJson(p)){var l=new FileReader;l.onload=function(n){n=JSON.parse(n.target.result);this.newItemDetails.info.JDBCConnection.oAuthPvtKeyFile.type=n.type;this.newItemDetails.info.JDBCConnection.oAuthPvtKeyFile.project_id=n.project_id;this.newItemDetails.info.JDBCConnection.oAuthPvtKeyFile.private_key_id=
n.private_key_id;this.newItemDetails.info.JDBCConnection.oAuthPvtKeyFile.private_key=n.private_key;this.newItemDetails.info.JDBCConnection.oAuthPvtKeyFile.client_email=n.client_email;this.newItemDetails.info.JDBCConnection.oAuthPvtKeyFile.client_id=n.client_id;this.newItemDetails.info.JDBCConnection.oAuthPvtKeyFile.auth_uri=n.auth_uri;this.newItemDetails.info.JDBCConnection.oAuthPvtKeyFile.token_uri=n.token_uri;this.newItemDetails.info.JDBCConnection.oAuthPvtKeyFile.auth_provider_x509_cert_url=n.auth_provider_x509_cert_url;
this.newItemDetails.info.JDBCConnection.oAuthPvtKeyFile.client_x509_cert_url=n.client_x509_cert_url}.bind(this);l.readAsText(p,"UTF-8")}b.publish("settings/bigQueryFieldsChanged")},_addBQFileInput:function(){this.keyFileInputForBQ.click()},_getNewItemData:function(){return this.newItemDetails},addEventListeners:function(){this.own(b.subscribe("settings/startDatastoreConnectionEdit",this._startDatastoreDatabaseEdit.bind(this)),h("input[name\x3d'serverDatabaseOption']",this.domNode).on("change",function(p){h("div.serverDatabaseOptionContainer label").removeClass("active");
a.add(p.target.parentElement,"active");"newConnection"===p.target.value?(q.get(this.serverConnectionString,"value")||"").length?(a.remove(this.publisherDatabaseNewContainer,"hide"),a.remove(this.serverConnectionContainer,"hide")):(a.remove(this.publisherDatabaseNewContainer,"hide"),a.remove(this.serverConnectionFile,"hide")):(a.add(this.publisherDatabaseNewContainer,"hide"),a.add(this.serverConnectionFile,"hide"),a.add(this.serverConnectionContainer,"hide"));if(this.settingsMode){var l={};"newConnection"===
p.target.value?(l.connectionString=q.get(this.serverConnectionString,"value"),l.connectionStringType="server"):(connectionString=q.get(this.publisherConnectionString,"value"),l.connectionStringType="publisher");b.publish("settings/connectionStringChange",l)}}.bind(this)),d(this.changePublisherConnectionBtn,"click",this._changeConnectionFile.bind(this,this.publisherConnectionContainer,this.publisherConnectionString,this.publisherConnectionFile,this.changePublisherConnectionCancelBtn)),d(this.changeServerConnectionBtn,
"click",this._changeConnectionFile.bind(this,this.serverConnectionContainer,this.serverConnectionString,this.serverConnectionFile,this.changeServerConnectionCancelBtn)),d(this.changePublisherConnectionCancelBtn,"click",this._cancelChangeConnectionFile.bind(this,this.publisherConnectionContainer,this.publisherConnectionFile,this.changePublisherConnectionCancelBtn)),d(this.changeServerConnectionCancelBtn,"click",this._cancelChangeConnectionFile.bind(this,this.serverConnectionContainer,this.serverConnectionFile,
this.changeServerConnectionCancelBtn)),d(this.publisherConnectionFile,"change",this._processConnectionFile.bind(this,this.publisherLoader,this.publisherConnectionContainer,this.publisherConnectionString,this.publisherFileName,this.publisherConnectionStringTable,this.changePublisherConnectionCancelBtn)),d(this.serverConnectionFile,"change",this._processConnectionFile.bind(this,this.serverLoader,this.serverConnectionContainer,this.serverConnectionString,this.serverFileName,this.serverConnectionStringTable,
this.changeServerConnectionCancelBtn)),d(this.snowflakeUsername,"calciteInputInput",this._editDataStoreFields.bind(this)),d(this.snowflakePassword,"calciteInputInput",this._editDataStoreFields.bind(this)),d(this.snowflakeRole,"calciteInputInput",this._editDataStoreFields.bind(this)),d(this.snowflakeDatabase,"calciteInputInput",this._editDataStoreFields.bind(this)),d(this.snowflakeSchema,"calciteInputInput",this._editDataStoreFields.bind(this)),d(this.snowflakeWarehouse,"calciteInputInput",this._editDataStoreFields.bind(this)),
d(this.snowflakeServerSelect,"calciteInputInput",this._editDataStoreFields.bind(this)),d(this.keyFileInputForBQButton,"click",this._addBQFileInput.bind(this)),d(this.bqProjectId,"calciteInputInput",this._editDataStoreFields.bind(this)))}})})},"arcgisonline/sharing/dijit/DatastoreFolderSettings":function(){define("esri/declare dojo/string dojo/query dojo/on dojo/topic dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin arcgisonline/sharing/util dojo/text!./templates/DatastoreFolderSettings.html dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u){return S([b,a,e],{templateString:J.substitute(t,{i18n:u.AddDatastoreDlg}),constructor:function(g){this.inherited(arguments);this.settingsMode=g.settingsMode;this.i18n=u},postCreate:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments);this.settingsMode&&d.add(this.folderGeneralDescription,"hide");this.addEventListeners();q.isArcGISEnterpriseOnKubernetes()&&d.remove(this.nfsOption,"hide")},_disableTextBoxes:function(g){this.publisherFolderPath.readOnly=
g;this.newServerFolderPath.readOnly=g;this.publisherFolderHostName.readOnly=g;this.nfsHostName.readOnly=g;this.nfsSharePath.readOnly=g},_onPublisherFolderChange:function(g){(this.isDriveLetterLocation=1===g.target.value.split(":")[0].length?!0:!1)?d.remove(this.publisherFolderHostnameContainer,"hide"):d.add(this.publisherFolderHostnameContainer,"hide");this.settingsMode&&h.publish("settings/folderPathChange")},_onServerFolderChange:function(g){this.settingsMode&&h.publish("settings/folderPathChange")},
_onServerFolderRadioChange:function(g){f("div.serverFolderOptionContainer label").removeClass("active");d.add(g.target.parentElement,"active");"newPath"===g.target.value?(d.remove(this.newServerFolderPath,"hide"),d.remove(this.newServerFolderPathContainer,"hide"),d.add(this.nfsHostAndPathContainer,"hide"),d.add(this.nfsHostName,"hide"),d.add(this.nfsSharePath,"hide")):"sameAsPublisher"===g.target.value?(d.add(this.newServerFolderPath,"hide"),d.add(this.newServerFolderPathContainer,"hide"),d.add(this.nfsHostAndPathContainer,
"hide"),d.add(this.nfsHostName,"hide"),d.add(this.nfsSharePath,"hide")):"nfsHostAndPath"===g.target.value&&(d.add(this.newServerFolderPath,"hide"),d.add(this.newServerFolderPathContainer,"hide"),d.remove(this.nfsHostAndPathContainer,"hide"),d.remove(this.nfsHostName,"hide"),d.remove(this.nfsSharePath,"hide"));this.settingsMode&&h.publish("settings/folderPathChange")},_onHostNameChange:function(g){this.settingsMode&&h.publish("settings/folderPathChange")},_onNFSInputChange:function(){this.settingsMode&&
h.publish("settings/folderPathChange")},addEventListeners:function(){this.own(h.subscribe("settings/startDatastoreFolderEdit",this.startDatastoreFolderEdit.bind(this)),c(this.publisherFolderPath,"change",this._onPublisherFolderChange.bind(this)),c(this.newServerFolderPath,"change",this._onServerFolderChange.bind(this)),c(this.publisherFolderHostName,"change",this._onHostNameChange.bind(this)),c(this.nfsHostName,"change",this._onNFSInputChange.bind(this)),c(this.nfsSharePath,"change",this._onNFSInputChange.bind(this)),
f("input[name\x3d'serverFolderPath']",this.domNode).on("change",this._onServerFolderRadioChange.bind(this)))},getFolderParamterUpdatedItem:function(g){g.publisherFolderPath=this.publisherFolderPath.value;g.publisherHostName=this.isDriveLetterLocation?this.publisherFolderHostName.value:void 0;g.serverFolderPath=(f("input[name\x3d'serverFolderPath']:checked")[0]||{}).value;g.newServerFolderPath=this.newServerFolderPath.value;g.nfsHostName=this.nfsHostName.value;g.nfsSharePath=this.nfsSharePath.value;
return g},validateFolderInputs:function(g){return g.publisherFolderPath?this.isDriveLetterLocation&&!g.publisherHostName?this.i18n.AddDatastoreDlg.validation.invalidPublisherHostName:"newPath"!==g.serverFolderPath||g.newServerFolderPath?"nfsHostAndPath"!==g.serverFolderPath||g.nfsHostName||g.nfsSharePath?"nfsHostAndPath"===g.serverFolderPath&&!g.nfsHostName&&g.nfsSharePath?this.i18n.AddDatastoreDlg.validation.invalidNfsHostName:"nfsHostAndPath"===g.serverFolderPath&&g.nfsHostName&&!g.nfsSharePath?
this.i18n.AddDatastoreDlg.validation.invalidNfsPath:!1:this.i18n.AddDatastoreDlg.validation.invalidNfsHostAndPath:this.i18n.AddDatastoreDlg.validation.invalidServerFolderPath:this.i18n.AddDatastoreDlg.validation.invalidPublisherFolderPath},setFolderPaths:function(g,m,v,p,l,n){this._disableTextBoxes(!0);m&&"nfs"!==p?(f("input[value\x3d'newPath']",this.domNode)[0].checked=!0,d.add(f(".datastore-folder-same-as-publisher",this.domNode)[0],"hide"),this.publisherFolderPath.value=m,this.newServerFolderPath.value=
g,d.remove(this.serverFolderPathContainer,"hide"),d.remove(this.newServerFolderPath,"hide"),d.remove(this.newServerFolderPathContainer,"hide")):"nfs"===p&&m&&l&&n?(f("input[value\x3d'nfsHostAndPath']",this.domNode)[0].checked=!0,this.publisherFolderPath.value=m,this.nfsHostName.value=l,this.nfsSharePath.value=n,d.remove(this.nfsHostAndPathContainer,"hide"),d.remove(this.nfsHostName,"hide"),d.remove(this.nfsSharePath,"hide")):this.publisherFolderPath.value=g;v&&(this.publisherFolderHostName.value=
v,d.remove(this.publisherFolderHostnameContainer,"hide"))},createFolderDataObject:function(g,m){g.type="folder";g.path="/fileShares/"+m.title;g.info.dataStoreConnectionType="shared";g.info.path=m.publisherFolderPath;g.info.hostName=m.publisherHostName;m.allowServicesRestart&&(g.allowServicesRestart=!0);"newPath"===m.serverFolderPath?(g.clientPath=m.publisherFolderPath,g.info.path=m.newServerFolderPath,g.info.dataStoreConnectionType="replicated"):"nfsHostAndPath"===m.serverFolderPath&&(g.clientPath=
m.publisherFolderPath,g.provider="UserManaged",g.info.dataStoreConnectionType="replicated",g.info.fileServerPath=m.nfsSharePath,g.info.fileServerHost=m.nfsHostName,g.info.fileServerType="nfs");return g},startDatastoreFolderEdit:function(){this._disableTextBoxes(!1)}})})},"arcgisonline/sharing/dijit/DatastoreCloudMenu":function(){define("require exports tslib dojo/string dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/DatastoreCloudMenu.html dojo/i18n!../../nls/arcgisonline arcgisonline/tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);return function(){function t(u){this.templateString=c.default.substitute(a.default,{i18n:e.default.AddDatastoreDlg});this.settingsMode=u.settingsMode;this.i18n=e.default;this.itemData=u.itemData}t.prototype.startup=function(){this.inherited(arguments);this._populateCloudProviders()};t.prototype._populateCloudProviders=
function(){var u=this;this.settingsMode&&"huawei"===((this.itemData||{}).provider||"").toLowerCase()||delete this.i18n.AddDatastoreDlg.cloudProviders.huawei;var g="";Object.keys(this.i18n.AddDatastoreDlg.cloudProviders).forEach(function(m){var v=u.i18n.AddDatastoreDlg.cloudProviders[m];g+="\n      \x3clabel class\x3d'cloudstore-type'\x3e\n        \x3cinput type\x3d'radio' name\x3d'cloudstoreProvider' value\x3d\"".concat(m,"\"\x3e\n        \x3cspan class\x3d'cloudstore-type-text'\x3e\n          \x3cspan class\x3d'cloudstore-type-label'\x3e\n            ").concat(v,
"\n          \x3c/span\x3e\n        \x3c/span\x3e\n      \x3c/label\x3e")},this);this.cloudStoreContent.innerHTML=g};return t=f.__decorate([(0,q.default)(h.default,d.default,b.default)],t)}()})},"arcgisonline/sharing/dijit/DatastoreNoSQLMenu":function(){define("esri/declare dojo/string dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/DataStoreNoSQLMenu.html dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),function(S,J,f,c,h,d,b){return S([f,c,h],{templateString:J.substitute(d,
{i18n:b.AddDatastoreDlg}),constructor:function(a){this.inherited(arguments);this.settingsMode=a.settingsMode;this.i18n=b;this.itemData=a.itemData},postCreate:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments);this._populateNoSQLProviders()},_populateNoSQLProviders:function(){this.noSQLContent.innerHTML="\x3clabel class\x3d'noSQL-type active'\x3e\x3cinput type\x3d'radio' name\x3d'noSQLProvider' value\x3d"+b.AddDatastoreDlg.Neo4j+" checked\x3d'checked'\x3e\x3cspan class\x3d'noSQL-type-text'\x3e\x3cspan class\x3d'noSQL-type-label'\x3e"+
b.AddDatastoreDlg.Neo4j+"\x3c/span\x3e\x3c/span\x3e\x3c/label\x3e"}})})},"arcgisonline/sharing/dijit/DatastoreCloudSettings":function(){define("esri/declare esri/request dojo/string dojo/query dojo/topic dojo/dom-class dojo/Deferred dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/DatastoreCloudSettings.html dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),function(S,J,f,c,h,d,b,a,e,q,t,u){return S([a,e,q],{templateString:f.substitute(t,{i18n:u.AddDatastoreDlg}),
googleCloudJsonString:null,regionData:{},constructor:function(g){this.inherited(arguments);this.settingsMode=g.settingsMode;this.i18n=u;this.itemData=g.itemData;this.isPortal=g.isPortal},startup:function(){this.inherited(arguments);this.settingsMode&&d.add(this.cloudStoreDescription,"hide");return this._populateFormSelects().then(function(){this._addEventListeners();this.settingsMode&&this._populateCloudOptions(this.itemData)}.bind(this))},_showCloudTypeUI:function(g){Array.from(this.cloudStoreRegistrationUI.children).forEach(function(m){m.classList&&
m.classList.length&&!m.classList.contains(g)?m.classList.add("hide"):m.classList.remove("hide")});("amazon"===g&&"custom"===this.region.value||"alibaba"===g&&"custom"===this.regionAlibaba.value)&&this._showPrivateURL("custom")},_populateFormSelects:function(){this._createOptions(this.i18n.AddDatastoreDlg.credentialTypeValues,this.amazonCredentialType);this._createOptions(this.i18n.AddDatastoreDlg.credentialTypeValues,this.googleCredentialType);this._createAuthenticationTypes(this.authenticationType);
return this._fetchRegionInfo()},_createAuthenticationTypes:function(g){var m=this.i18n.AddDatastoreDlg.authenticationTypes;Object.keys(m).forEach(function(v){var p=document.createElement("option");p.id=v;p.label=m[v];p.value=v;("activeDirectory"!==v||this.isPortal)&&g.appendChild(p)})},_fetchRegionInfo:function(){var g=new b;J({url:"https://esriresources.s3.amazonaws.com/1110/regionsforcloudstorage.dat",handleAs:"json"}).then(function(m){var v=m.environments;this.isPortal||(v=m.environments.filter(function(p){return"AzureChinaCloud"!==
p.id&&"AzureGermanCloud"!==p.id}));this._addOptions(m.Amazon.regions,this.region,!0);this._addOptions(v,this.environment,!1,"storageEndpointSuffix",!0);this._addOptions(m.environments,this.azureStorageDomain,!1,"storageEndpointSuffix",!1);this._addOptions(m.Huawei.regions,this.regionHuawei,!0);this._addOptions(m.Alibaba.regions,this.regionAlibaba,!0);this._addOptions(m.Google.regions,this.regionGoogle,!1);g.resolve()}.bind(this),function(m){this._addOptions([],this.region,!0);this._addOptions([],
this.regionAlibaba,!0);this._addOptions([],this.environment,!1,"storageEndpointSuffix",!0);g.resolve()}.bind(this));return g},_createOptions:function(g,m){Object.keys(g).forEach(function(v){var p=m.id;"amazonCredentialType"===p&&"privatekey"===v||"googleCredentialType"===p&&"accesskey"!==v||(p=document.createElement("option"),p.label=g[v],p.value=v,m.appendChild(p))},this)},_addOptions:function(g,m,v,p,l){p=p||"id";m.labelAttr="displayName";m.sortByLabel=!1;v&&(v={},v.displayName=this.i18n.AddDatastoreDlg.custom,
v[p]="custom",g.push(v));l&&(p={},p.displayName=this.i18n.AddDatastoreDlg.other,p.id="other",g.push(p));this._configureRegionSelect(g,m)},_configureRegionSelect:function(g,m){this.regionData[m.id]=g;g.forEach(function(v){var p=document.createElement("option");p.id=v.id;p.label=v.storageEndpointSuffix?v.displayName+" ("+v.storageEndpointSuffix+")":v.displayName;p.value=v.id;m.appendChild(p)})},_onCredentialTypeChange:function(g){g=g.target.value;var m=-1<["iamrole","privatekey"].indexOf(g)?!0:!1;this.accessKeyId.disabled=
m;this.secretKeyId.disabled=m;c(".credential-type-change-connect").forEach(function(p){this.settingsMode&&this.editing||!this.settingsMode?(p.classList.remove("hide"),m?p.classList.add("grey-out"):p.classList.remove("grey-out")):m?p.classList.add("hide"):p.classList.remove("hide")},this);var v="privatekey"!==g;c(".googlePrivateKey").forEach(function(p){p.classList&&p.classList.length&&(v?p.classList.add("hide"):p.classList.remove("hide"))});this.settingsMode&&h.publish("settings/cloudConnectionChange")},
_onCloudOptionChange:function(g){var m=this.itemData.provider.toLowerCase();"region"!==g.target.id&&"regionGoogle"!==g.target.id&&"regionHuawei"!==g.target.id&&"regionAlibaba"!==g.target.id||this._showPrivateURL(g.target.value);"azuredatalakestore"===m&&("other"===this.azureStorageDomain.value?d.remove(this.azureEndPointContainer,"hide"):d.add(this.azureEndPointContainer,"hide"));if("azure"===m)if(d.remove(this.environmentContainer,"hide"),"other"===this.environment.value?d.remove(this.endpointContainer,
"hide"):d.add(this.endpointContainer,"hide"),"environment"===g.target.id&&("other"===g.target.value?(d.remove(this.endpointContainer,"hide"),"sharedKey"!==this.authenticationType.value&&d.add(this.accountNameContainer,"hide")):(d.add(this.endpointContainer,"hide"),d.remove(this.accountNameContainer,"hide"))),"authenticationType"===g.target.id&&("activeDirectory"===g.target.value?("other"!==this.environment.value&&d.remove(this.accountNameContainer,"hide"),d.remove(this.activeDirectoryContainer,"hide"),
d.add(this.sasTokenContainer,"hide"),d.add(this.accountKeyContainer,"hide")):"sasToken"===g.target.value?("other"!==this.environment.value&&d.remove(this.accountNameContainer,"hide"),d.remove(this.sasTokenContainer,"hide"),d.add(this.activeDirectoryContainer,"hide"),d.add(this.accountKeyContainer,"hide")):"sharedKey"===g.target.value?(d.remove(this.accountNameContainer,"hide"),d.remove(this.accountKeyContainer,"hide"),d.add(this.sasTokenContainer,"hide"),d.add(this.activeDirectoryContainer,"hide")):
"anonymous"===g.target.value&&(d.add(this.sasTokenContainer,"hide"),d.add(this.activeDirectoryContainer,"hide"),d.add(this.accountKeyContainer,"hide"),d.add(this.accountNameContainer,"hide"),d.add(this.environmentContainer,"hide"),d.remove(this.endpointContainer,"hide"))),"servicePrincipalRadio"===g.target.id||"servicePrincipalRadioContainer"===g.target.id)this.servicePrincipalRadio.checked=!0,this.userAssignedIdentityRadio.checked=!1,d.add(this.userAssignedIdentityContainer,"hide"),d.remove(this.userAssignedIdentityRadioContainer,
"checked"),d.add(this.servicePrincipalRadioContainer,"checked"),d.remove(this.servicePrincipalContainer,"hide");else if("userAssignedIdentityRadio"===g.target.id||"userAssignedIdentityRadioContainer"===g.target.id)this.userAssignedIdentityRadio.checked=!0,this.servicePrincipalRadio.checked=!1,d.add(this.servicePrincipalContainer,"hide"),d.remove(this.servicePrincipalRadioContainer,"checked"),d.add(this.userAssignedIdentityRadioContainer,"checked"),d.remove(this.userAssignedIdentityContainer,"hide");
this.settingsMode&&h.publish("settings/cloudConnectionChange")},_showPrivateURL:function(g,m){c(".privateUrl").forEach(function(v){"custom"===g||m?v.classList.remove("hide"):v.classList.add("hide")})},_addEventListeners:function(){this.own(c("input[name\x3d'cloudstoreProvider']").on("change",function(g){c("label.cloudstore-type").removeClass("active");d.add(g.target.parentElement,"active")}.bind(this)))},_displayCloudStoreContent:function(g){this.cloudStoreRegistrationUI.classList.remove("hide");
if(this.settingsMode&&this.editing||!this.settingsMode)this.amazonCredentialType.value="accesskey",this.googleCredentialType.value="accesskey";this._showCloudTypeUI(g);this.settingsMode&&h.publish("settings/cloudConnectionChange")},_displayCloudStoreItem:function(g){this.cloudStoreOption.value=this.i18n.AddDatastoreDlg.cloudProviders[g];this._displayCloudStoreContent(g)},_onGooglePrivateKeyChange:function(g){g=g.target.files[0];var m=new FileReader;m.onload=function(v){this.googleCloudJsonString=
JSON.parse(v.target.result)}.bind(this);m.readAsText(g,"UTF-8")},_disableControls:function(g){this.cloudStoreOption.disabled=this.settingsMode||g;this.storageURL.readOnly=g;this.amazonCredentialType.disabled=this.isPortal?g:!0;this.googleCredentialType.disabled=g;this.authenticationType.disabled=g;this.servicePrincipalRadio.disabled=g;this.userAssignedIdentityRadio.disabled=g;this.tenantId.readOnly=g;this.clientId.readOnly=g;this.clientSecret.readOnly=g;this.managedIdentityClientId.readOnly=g;this.token.readOnly=
g;this.endpoint.readOnly=g;this.accountName.readOnly=g;this.accountKey.readOnly=g;this.accessKeyId.readOnly=g;this.secretKeyId.readOnly=g;this.googlePrivateKey.disabled=g;this.region.disabled=g;this.regionGoogle.disabled=g;this.regionHuawei.disabled=g;this.regionAlibaba.disabled=g;this.environment.disabled=g;this.azureStorageDomain.disabled=g;this.containerName.readOnly=g;this.bucketName.readOnly=g;this.cloudFolder.readOnly=g;this.azureAccountName.readOnly=g;this.azureAccountKey.readOnly=g;this.azureContainerName.readOnly=
g},getRegionID:function(g,m){var v;g.forEach(function(p){if(p.blobStoreEndpoint===m||p.storageEndpointSuffix===m)v=p.id});return v},getRegionEndpointURL:function(g,m){var v;g.forEach(function(p){p.id===m&&(v=p.blobStoreEndpoint||p.storageEndpointSuffix)});return v},getCloudParamterUpdatedItem:function(g){g||(g={});g.provider=this.getCloudStoreValue(this.cloudStoreOption.value);g.storageURL=this.storageURL.value;g.amazonCredentialType=this.amazonCredentialType.value;g.googleCredentialType=this.googleCredentialType.value;
g.authenticationType=this.authenticationType.value;g.identityType=this.servicePrincipalRadio.checked?"servicePrincipal":"userAssignedIdentity";g.tenantId=this.tenantId.value;g.clientId=this.clientId.value;g.clientSecret=this.clientSecret.value;g.managedIdentityClientId=this.managedIdentityClientId.value;g.sasToken=this.token.value;g.overrideEndpoint=this.endpoint.value;g.accountName=this.accountName.value;g.accountKey=this.accountKey.value;g.accessKeyId=this.accessKeyId.value.trim();g.secretKeyId=
this.secretKeyId.value.trim();g.googlePrivateKey=this.googlePrivateKey.value;g.googleCloudJsonString=this.googleCloudJsonString;g.region=this.region.value;g.regionGoogle=this.regionGoogle.value;g.regionHuawei=this.regionHuawei.value;g.regionAlibaba=this.regionAlibaba.value;g.environment=this.environment.value;g.containerName=this.containerName.value;g.bucketName=this.bucketName.value;g.cloudFolder=this.cloudFolder.value;"azuredatalakestore"===g.provider&&(g.authenticationType=this.azureAuthenticationType.value,
g.accountName=this.azureAccountName.value,g.accountKey=this.azureAccountKey.value,g.environment=this.azureStorageDomain.value,g.containerName=this.azureContainerName.value,g.regionEndpointURL=this.azureEndPoint.value);return g},_retrieveGooglePrivateKey:function(g,m){for(var v in m)g[v]=m[v]},createCloudProviderDataObject:function(g,m){var v=(m.provider||"").toLowerCase(),p=g.info.connectionString={};p.credentialType="accesskey";switch(v){case "amazon":"accesskey"===m.amazonCredentialType?(p.accessKeyId=
m.accessKeyId,p.secretAccessKey=m.secretKeyId):p.credentialType=m.amazonCredentialType;"custom"===m.region?p.regionEndpointUrl=m.storageURL:(p.regionEndpointUrl=this.getRegionEndpointURL(this.regionData.region,m.region),p.region=m.region);g.info.objectStore=m.bucketName;g.provider="amazon";break;case "google":"accesskey"===m.googleCredentialType?(p.accessKeyId=m.accessKeyId,p.secretAccessKey=m.secretKeyId):"privatekey"===m.googleCredentialType&&(p.credentialType=m.googleCredentialType,this._retrieveGooglePrivateKey(p,
m.googleCloudJsonString));p.regionEndpointUrl="https://storage.googleapis.com";g.info.objectStore=m.bucketName;g.provider="Google";break;case "azure":"sharedKey"===m.authenticationType?(p.credentialType="accessKey",p.accountKey=m.accountKey):"activeDirectory"===m.authenticationType?(p.credentialType=m.identityType,"servicePrincipal"===m.identityType?(p.tenantId=m.tenantId,p.clientId=m.clientId,p.clientSecret=m.clientSecret):"userAssignedIdentity"===m.identityType&&(p.managedIdentityClientId=m.managedIdentityClientId)):
"sasToken"===m.authenticationType&&(p.credentialType="sasToken",p.sasToken=m.sasToken);"other"===m.environment?p.overrideEndpoint=m.overrideEndpoint:p.accountEndpoint=this.getRegionEndpointURL(this.regionData.environment,m.environment);p.accountName=m.accountName;g.info.objectStore=m.containerName;g.provider="azure";break;case "azuredatalakestore":p.credentialType="accessKey";p.accountKey=m.accountKey;"other"===m.environment?p.regionEndpointURL=m.regionEndpointURL:p.accountEndpoint=this.getRegionEndpointURL(this.regionData.environment,
m.environment);p.accountName=m.accountName;g.info.folder=m.containerName;g.provider="azuredatalakestore";break;case "alibaba":case "huawei":p.accessKeyId=m.accessKeyId;p.secretAccessKey=m.secretKeyId;g.info.objectStore=m.bucketName;"alibaba"===v?(g.provider="Alibaba",p.regionEndpointUrl="custom"===m.regionAlibaba?m.storageURL:this.getRegionEndpointURL(this.regionData.regionAlibaba,m.regionAlibaba)):(g.provider="Huawei",p.regionEndpointUrl="custom"===m.regionHuawei?m.storageURL:this.getRegionEndpointURL(this.regionData.regionHuawei,
m.regionHuawei));break;default:throw"Invalid cloud provider";}p.defaultEndpointsProtocol="https";m.cloudFolder&&(g.info.objectStore=g.info.objectStore+"/"+m.cloudFolder);g.info.connectionString=JSON.stringify(p);g.type="cloudStore";g.path="/cloudStores/"+m.title;return g},validateCloudProviderInputs:function(g){var m=(g.provider||"").toLowerCase();if(!m)return this.i18n.AddDatastoreDlg.validation.invalidCloudProvider;var v=[];switch(m){case "amazon":"accesskey"!==g.amazonCredentialType||g.secretKeyId||
v.push(this.i18n.AddDatastoreDlg.secretKeyId);"amazon"!==m||g.bucketName||v.push(this.i18n.AddDatastoreDlg.bucketName);"custom"!==g.region||g.storageURL||v.push(this.i18n.AddDatastoreDlg.storageURL);break;case "google":"accesskey"===g.googleCredentialType?(g.accessKeyId||v.push(this.i18n.AddDatastoreDlg.accessKeyId),g.secretKeyId||v.push(this.i18n.AddDatastoreDlg.secretKeyId)):"privatekey"===g.googleCredentialType&&(g.googlePrivateKey||v.push(this.i18n.AddDatastoreDlg.privateKeyId));g.bucketName||
v.push(this.i18n.AddDatastoreDlg.bucketName);break;case "azure":g.accountName||v.push(this.i18n.AddDatastoreDlg.accountName);g.accountKey||v.push(this.i18n.AddDatastoreDlg.accountKey);g.containerName||v.push(this.i18n.AddDatastoreDlg.containerName);"custom"!==g.environment||g.storageURL||v.push(this.i18n.AddDatastoreDlg.storageURL);break;case "azuredatalakestore":g.azureAccountName||v.push(this.i18n.AddDatastoreDlg.accountName);g.azureAccountKey||v.push(this.i18n.AddDatastoreDlg.accountKey);g.azureContainerName||
v.push(this.i18n.AddDatastoreDlg.containerName);"custom"!==g.environment||g.storageURL||v.push(this.i18n.AddDatastoreDlg.storageURL);break;case "alibaba":case "huawei":g.accessKeyId||v.push(this.i18n.AddDatastoreDlg.accessKeyId);g.secretKeyId||v.push(this.i18n.AddDatastoreDlg.secretKeyId);g.bucketName||v.push(this.i18n.AddDatastoreDlg.bucketName);"custom"!==g.region||g.storageURL||v.push(this.i18n.AddDatastoreDlg.storageURL);break;default:throw"Invalid cloud provider";}g=this.i18n.AddDatastoreDlg.validation.errorInfo.replace("${missingFields}",
v.join(", ")).replace(/,([^,]*)$/," "+this.i18n.FilterDlg.and+"$1");g=g.replace(/:/g,"");return v.length?g:!1},_populateCloudOptions:function(g){this._disableControls(!0);var m=(g.provider||"").toLowerCase(),v=g.info.objectStore;this.cloudStoreOption.value=this.i18n.AddDatastoreDlg.cloudProviders[m];this._displayCloudStoreContent(m);if(g.info.objectStore&&-1<g.info.objectStore.indexOf("/")){var p=g.info.objectStore.indexOf("/");v=g.info.objectStore.substring(0,p);this.cloudFolder.value=g.info.objectStore.substring(p+
1)}else d.add(this.cloudFolderContainer,"hide");p=JSON.parse(g.info.connectionString);switch(m){case "amazon":this.amazonCredentialType.value=p.credentialType;"accesskey"===p.amazonCredentialType&&(this.accessKeyId.value=p.accessKeyId,this.secretKeyId.value=p.secretAccessKey);g=this.getRegionID(this.regionData.region,p.regionEndpointUrl);this.region.value=g?g:"custom";this.storageURL.value=p.regionEndpointUrl;this.bucketName.value=v;break;case "google":this.googleCredentialType.value=p.credentialType;
"accesskey"===p.googleCredentialType&&(this.accessKeyId.value=p.accessKeyId,this.secretKeyId.value=p.secretAccessKey);g=this.getRegionID(this.regionData.regionGoogle,p.regionEndpointUrl.substring(8));this.regionGoogle.value=g;this.bucketName.value=v;break;case "azure":this.accountKey.value=p.accountKey||"";this.accountName.value=p.accountName||"";this.tenantId.value=p.tenantId||"";this.clientId.value=p.clientId||"";this.clientSecret.value=p.clientSecret||"";this.managedIdentityClientId.value=p.managedIdentityClientId||
"";this.token.value=p.sasToken||"";g=p.credentialType?p.credentialType.toLowerCase():"";if(!g||"accesskey"===g)this.authenticationType.value="sharedKey";else if("sastoken"===g)this.authenticationType.value="sasToken";else if("anonymous"===g)this.authenticationType.value="anonymous";else if("userassignedidentity"===g||"serviceprincipal"===g)this.authenticationType.value="activeDirectory","serviceprincipal"===g?(this.servicePrincipalRadio.checked=!0,this.userAssignedIdentityRadio.checked=!1):(this.userAssignedIdentityRadio.checked=
!0,this.servicePrincipalRadio.checked=!1);p.overrideEndpoint?(this.environment.value="other",this.endpoint.value=p.overrideEndpoint):this.environment.value=this.getRegionID(this.regionData.environment,p.accountEndpoint);this.containerName.value=v;this._toggleAzureFields();break;case "alibaba":case "huawei":this.accessKeyId.value=p.accessKeyId;this.secretKeyId.value=p.secretAccessKey;this.bucketName.value=v;"alibaba"===m?(g=this.getRegionID(this.regionData.regionAlibaba,p.regionEndpointUrl),this.regionAlibaba.value=
g?g:"custom"):(g=this.getRegionID(this.regionData.regionHuawei,p.regionEndpointUrl),this.regionHuawei.value=g?g:"custom");this.storageURL.value=p.regionEndpointUrl;break;case "azuredatalakestore":d.remove(this.cloudFolderContainer,"hide");this.cloudStoreOption.value="Microsoft Azure data Lake Storage Gen2";this.azureAuthenticationType.value="sharedKey";this.azureAccountName.value=p.accountName;v=g.info.folder.indexOf("/");this.azureContainerName.value=g.info.folder.substring(0,v);this.cloudFolder.value=
g.info.folder.substring(v+1);"other"===this.azureStorageDomain.value?d.remove(this.azureEndPointContainer,"hide"):d.add(this.azureEndPointContainer,"hide");break;default:throw"Invalid cloud provider";}},_toggleAzureFields:function(){"sharedKey"===this.authenticationType.value?(d.remove(this.accountKeyContainer,"hide"),d.add(this.activeDirectoryContainer,"hide"),d.add(this.sasTokenContainer,"hide")):"activeDirectory"===this.authenticationType.value?(d.remove(this.activeDirectoryContainer,"hide"),d.add(this.accountKeyContainer,
"hide"),d.add(this.sasTokenContainer,"hide"),this.servicePrincipalRadio.checked?(d.add(this.userAssignedIdentityContainer,"hide"),d.remove(this.userAssignedIdentityRadioContainer,"checked"),d.add(this.servicePrincipalRadioContainer,"checked"),d.remove(this.servicePrincipalContainer,"hide")):this.userAssignedIdentityRadio.checked&&(d.add(this.servicePrincipalContainer,"hide"),d.remove(this.servicePrincipalRadioContainer,"checked"),d.add(this.userAssignedIdentityRadioContainer,"checked"),d.remove(this.userAssignedIdentityContainer,
"hide"))):"sasToken"===this.authenticationType.value?(d.remove(this.sasTokenContainer,"hide"),d.add(this.activeDirectoryContainer,"hide"),d.add(this.accountKeyContainer,"hide")):"anonymous"===this.authenticationType.value&&(d.add(this.sasTokenContainer,"hide"),d.add(this.activeDirectoryContainer,"hide"),d.add(this.accountKeyContainer,"hide"),d.add(this.accountNameContainer,"hide"));"other"===this.environment.value?d.remove(this.endpointContainer,"hide"):d.add(this.endpointContainer,"hide")},startDatastoreCloudEdit:function(){this._disableControls(!1);
this._showCloudTypeUI(this.getCloudStoreValue(this.cloudStoreOption.value));"azure"===this.itemData.provider&&this._toggleAzureFields();this._showPrivateURL(null,!!this.storageURL.value);this.editing=!0},getCloudStoreValue:function(g){var m;"Microsoft Azure data Lake Storage Gen2"===g&&(g="azuredatalakestore");Object.keys(this.i18n.AddDatastoreDlg.cloudProviders).forEach(function(v){g===this.i18n.AddDatastoreDlg.cloudProviders[v]&&(m=v)},this);return m}})})},"arcgisonline/sharing/dijit/DatastoreNoSQLSettings":function(){define("esri/declare esri/request dojo/string dojo/query dojo/topic dojo/dom-class dojo/Deferred dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/DatastoreNoSQLSettings.html dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u){return S([a,e,q],{templateString:f.substitute(t,{i18n:u.AddDatastoreDlg}),constructor:function(g){this.inherited(arguments);this.settingsMode=g.settingsMode;this.i18n=u},postCreate:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments);this.settingsMode&&this._populateNoSQLSettingsPage()},_displayNoSQLContent:function(g){this.noSQLOption.value=g;this.settingsMode&&h.publish("settings/noSQLConnectionChange")},_populateNoSQLSettingsPage:function(){this._disableControls(!0);
d.add(this.noSQLGeneralDescription,"hide");this.noSQLConnectionURI.value=this.itemData.info.connectionProperties.connectionUri;this.noSQLOption.value=this.itemData.info.implementation;this.itemData.info.noSQLFallBackServer&&(this.noSQLFallBackServer.value=this.itemData.info.noSQLFallBackServer);this.noSQLFallBackServer.disabled=!0;this.noSQLUsername.value=this.itemData.info.connectionProperties.username;this.noSQLUsername.disabled=!0;this.noSQLDataBase.value=this.itemData.info.connectionProperties.database;
this.noSQLDataBase.disabled=!0},getNoSQLUpdatedItem:function(g){g||(g={});g.noSQLConnectionURI=this.noSQLConnectionURI.value;g.noSQLFallBackServer=this.noSQLFallBackServer.value;g.noSQLUsername=this.noSQLUsername.value;g.noSQLPassword=this.noSQLPassword.value;g.noSQLDataBase=this.noSQLDataBase.value;return g},validateNoSQLInputs:function(g){var m=[];g.noSQLConnectionURI||m.push(this.i18n.AddDatastoreDlg.noSQLConnectionURI);g.noSQLUsername||m.push(this.i18n.AddDatastoreDlg.noSQLUsername);g.noSQLPassword||
m.push(this.i18n.AddDatastoreDlg.noSQLPassword);g.noSQLDataBase||m.push(this.i18n.AddDatastoreDlg.noSQLDataBase);g=this.i18n.AddDatastoreDlg.validation.errorInfo.replace("${missingFields}",m.join(", ")).replace(/,([^,]*)$/," "+this.i18n.FilterDlg.and+"$1");g=g.replace(/:/g,"");return m.length?g:!1},createNoSQLDataObject:function(g,m){g.path="/nosqlDatabases/"+m.title;g.type="nosql";g.info.provider="Neo4J";g.info.dsFeature="graphStore";g.info.factory="nosql";g.info.implementation="Neo4j";g.info.category=
"database";g.info.systemManaged=!1;g.info.isManagedData=!1;g.info.purposes=["knowledge-graph"];var v=g.info.connectionProperties={};v.connectionUri=m.noSQLConnectionURI;""!==m.noSQLFallBackServer&&(v.fallbackServerAddresses=[m.noSQLFallBackServer.split(",")]);v.username=m.noSQLUsername;v.password=m.noSQLPassword;v.database=m.noSQLDataBase;return g},_onNoSQLOptionChange:function(g){this.settingsMode&&h.publish("settings/noSQLConnectionChange")},_disableControls:function(g){this.noSQLConnectionURI.disabled=
g;this.noSQLFallBackServer.disabled=g;this.noSQLPassword.disabled=g},startDatastoreNoSQLEdit:function(){this._disableControls(!1);this.editing=!0}})})},"arcgisonline/sharing/dijit/DatastoreBDFSSettings":function(){define("esri/declare dojo/string dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/DatastoreBDFSSettings.html dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),function(S,J,f,c,h,d,b){return S([f,c,h],{templateString:J.substitute(d,{i18n:b.AddDatastoreDlg}),
constructor:function(a){this.inherited(arguments);this.settingsMode=a.settingsMode;this.i18n=b},postCreate:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments)}})})},"arcgisonline/sharing/dijit/DatastoreBDFSFileShareSettings":function(){define("esri/declare dojo/string dojo/on dojo/topic dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/DatastoreBDFSFileShareSettings.html dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),
function(S,J,f,c,h,d,b,a,e,q){return S([d,b,a],{templateString:J.substitute(e,{i18n:q.AddDatastoreDlg}),constructor:function(t){this.settingsMode=t.settingsMode;this.i18n=q},startup:function(){this.inherited(arguments);this.settingsMode&&h.add(this.bdfsFileShareGeneralDescription,"hide");this.addEventListeners()},addEventListeners:function(){this.own(f(this.publisherFileShareFolderPath,"change",this._onPublisherFileShareFolderChange.bind(this)))},_onPublisherFileShareFolderChange:function(){this.settingsMode&&
c.publish("settings/filesharePathChange")},_disableTextBoxes:function(t){this.publisherFileShareFolderPath.readOnly=t},getFileshareParamterUpdatedItem:function(t){t.publisherFileShareFolderPath=this.publisherFileShareFolderPath.value;return t},validateFileShareInputs:function(t){return t.publisherFileShareFolderPath?this.isDriveLetterLocation&&!t.publisherFileShareHostName?this.i18n.AddDatastoreDlg.validation.invalidPublisherHostName:!1:this.i18n.AddDatastoreDlg.validation.invalidPublisherFolderPath},
createFileShareProviderDataObject:function(t,u){t.type="bigDataFileShare";t.path="/bigDataFileShares/"+u.title;t.info.connectionString=JSON.stringify({path:u.publisherFileShareFolderPath});t.info.connectionType="fileShare";delete t.info.isManaged;return t},setFileSharePaths:function(t){this._disableTextBoxes(!0);this.publisherFileShareFolderPath.value=t},getFolderParamterUpdatedItem:function(t){t.publisherFileShareFolderPath=this.publisherFileShareFolderPath.value;return t},startDatastoreBDFSFileShareEdit:function(){this._disableTextBoxes(!1)}})})},
"arcgisonline/sharing/dijit/DatastoreBDFSHDFSSettings":function(){define("esri/declare dojo/string dojo/query dojo/on dojo/topic dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/DatastoreBDFSHDFSSettings.html dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),function(S,J,f,c,h,d,b,a,e,q,t){return S([b,a,e],{templateString:J.substitute(q,{i18n:t.AddDatastoreDlg}),constructor:function(u){this.inherited(arguments);this.settingsMode=u.settingsMode;
this.i18n=t},postCreate:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments);this.settingsMode&&(d.add(this.bdfsHDFSDescription,"hide"),d.add(this.hdfsUserKerberoesToggle,"hide"));this.addEventListeners()},_onHDFSPathChange:function(u){this.settingsMode&&h.publish("settings/hdfsPathChange")},_onHDFSUsernameChange:function(u){this.settingsMode&&h.publish("settings/hdfsPathChange")},_onKerberosSwitchChange:function(u){u.target.checked?d.remove(this.hdfsUserKerberos,"hide"):
d.add(this.hdfsUserKerberos,"hide");this.settingsMode&&h.publish("settings/hdfsPathChange")},_onHDFSKeytabLocationChange:function(u){this.settingsMode&&h.publish("settings/hdfsPathChange")},_onHDFSPrincipalUserChange:function(u){this.settingsMode&&h.publish("settings/hdfsPathChange")},_onHDFSPrincipalRealmChange:function(u){this.settingsMode&&h.publish("settings/hdfsPathChange")},_onHDFSConfigDirChange:function(u){this.settingsMode&&h.publish("settings/hdfsPathChange")},addEventListeners:function(){this.own(c(this.hdfsPath,
"change",this._onHDFSPathChange.bind(this)),c(this.hdfsUsername,"change",this._onHDFSUsernameChange.bind(this)),f("input[name\x3d'userKerberosSwitch']",this.domNode).on("change",this._onKerberosSwitchChange.bind(this)),c(this.hdfsKeytabLocation,"change",this._onHDFSKeytabLocationChange.bind(this)),c(this.hdfsPrincipalUser,"change",this._onHDFSPrincipalUserChange.bind(this)),c(this.hdfsPrincipalRealm,"change",this._onHDFSPrincipalRealmChange.bind(this)),c(this.hdfsConfigDir,"change",this._onHDFSConfigDirChange.bind(this)))},
getHDFSParamterUpdatedItem:function(u){u.hdfsPath=this.hdfsPath.value;u.hdfsUsername=this.hdfsUsername.value;u.hdfsKeytabLocation=this.hdfsKeytabLocation.value;u.hdfsPrincipalUser=this.hdfsPrincipalUser.value;u.hdfsPrincipalRealm=this.hdfsPrincipalRealm.value;u.hdfsConfigDir=this.hdfsConfigDir.value;return u},validateHDFSInputs:function(u){return u.hdfsPath?!1:this.i18n.AddDatastoreDlg.validation.invalidPublisherFolderPath},createHDFSProviderDataObject:function(u,g){u.type="bigDataFileShare";u.path=
"/bigDataFileShares/"+g.title;var m={path:g.hdfsPath,username:g.hdfsUsername};this.hdfsUserKerberosSwitch.checked&&(m.accessMode="Kerberos",m.principal=g.hdfsPrincipalUser+"@"+g.hdfsPrincipalRealm,m.keytab=g.hdfsKeytabLocation,g.hdfsConfigDir&&(m.configDir=g.hdfsConfigDir));u.info.connectionString=JSON.stringify(m);u.info.connectionType="hdfs";delete u.info.isManaged;return u},_disableTextBoxes:function(u){this.hdfsPath.readOnly=u;this.hdfsUsername.readOnly=u},setHDFSParameters:function(u,g){this._disableTextBoxes(!0);
this.hdfsPath.readOnly=u;this.hdfsUsername.readOnly=g},startDatastoreBDFSHDFSEdit:function(){this._disableTextBoxes(!1)}})})},"arcgisonline/sharing/dijit/DatastoreBDFSHiveSettings":function(){define("esri/declare dojo/string dojo/query dojo/on dojo/topic dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/DatastoreBDFSHiveSettings.html dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),function(S,J,f,c,h,d,b,a,e,q,t){return S([b,a,e],{templateString:J.substitute(q,
{i18n:t.AddDatastoreDlg}),constructor:function(u){this.inherited(arguments);this.settingsMode=u.settingsMode;this.i18n=t},postCreate:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments);this.settingsMode&&d.add(this.bdfsHIVEDescription,"hide");this.addEventListeners()},_onHiveMetastoreURLsChange:function(u){this.settingsMode&&h.publish("settings/hivePathChange")},_onHiveDatabaseChange:function(u){this.settingsMode&&h.publish("settings/hivePathChange")},_onHiveUsernameChange:function(u){this.settingsMode&&
h.publish("settings/hivePathChange")},_onDatabaseSwitchChange:function(u){u.target.checked?d.remove(this.hiveUserDatabase,"hide"):d.add(this.hiveUserDatabase,"hide")},addEventListeners:function(){this.own(c(this.hiveMetastoreURLs,"change",this._onHiveMetastoreURLsChange.bind(this)),c(this.hiveDatabase,"change",this._onHiveDatabaseChange.bind(this)),c(this.hiveUsername,"change",this._onHiveUsernameChange.bind(this)),f("input[name\x3d'hiveDatabaseSwitch']",this.domNode).on("change",this._onDatabaseSwitchChange.bind(this)))},
getHiveParamterUpdatedItem:function(u){u.hiveMetastoreURLs=this.hiveMetastoreURLs.value;u.hiveDatabase=this.hiveDatabase.value?this.hiveDatabase.value:"default";u.hiveUsername=this.hiveUsername.value;return u},validateHiveInputs:function(u){return u.hiveMetastoreURLs?!1:this.i18n.AddDatastoreDlg.validation.invalidHiveMetastoreURLs},createHiveProviderDataObject:function(u,g){u.type="bigDataFileShare";u.path="/bigDataFileShares/"+g.title;u.info.connectionString=JSON.stringify({metaStoreUris:g.hiveMetastoreURLs,
database:g.hiveDatabase});u.info.connectionType="hive";delete u.info.isManaged;return u},setHiveParameters:function(u,g,m){this._disableTextBoxes(!0);this.hiveMetastoreURLs.value=u;this.hiveDatabase.value=g;this.hiveUsername.value=m},_disableTextBoxes:function(u){this.hiveMetastoreURLs.readOnly=u;this.hiveDatabase.readOnly=u;this.hiveUsername.readOnly=u},startDatastoreBDFSHiveEdit:function(){this._disableTextBoxes(!1)}})})},"arcgisonline/sharing/dijit/DatastoreBDFSCloudMenu":function(){define("esri/declare dojo/string dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin preact arcgisonline/pages/components/SelectCloudStore dojo/text!./templates/DatastoreBDFSCloudMenu.html dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),
function(S,J,f,c,h,d,b,a,e){return S([f,c,h],{templateString:J.substitute(a,{i18n:e.AddDatastoreDlg}),constructor:function(q){this.inherited(arguments);this.settingsMode=q.settingsMode;this.i18n=e;this.itemData=q.itemData},postCreate:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments);this._populateBDFSCloudProviders();this._addCloudStore();this._fetchCloudStore()},_configureCloudStoreParameters:function(q,t){this.cloudStoreId=q;this.cloudStorePath=t},_addCloudStore:function(){d.render(d.h(b.default,
{configureCloudStoreParameters:this._configureCloudStoreParameters.bind(this)}),this.bdfsExistingCloudStoreOption)},_fetchCloudStore:function(){},_populateBDFSCloudProviders:function(){var q="";Object.keys(this.i18n.AddDatastoreDlg.bdfsCloudProviders).forEach(function(t){q+="\x3clabel class\x3d'cloudstore-type bdfs'\x3e\x3cinput type\x3d'radio' name\x3d'bdfsCloudstoreProvider' value\x3dbdfs"+t+" data-dojo-attach-point\x3dbdfs"+t+"ContainerNode\x3e\x3cspan class\x3d'cloudstore-type-text'\x3e\x3cspan class\x3d'cloudstore-type-label'\x3e"+
this.i18n.AddDatastoreDlg.bdfsCloudProviders[t]+"\x3c/span\x3e\x3c/span\x3e\x3c/label\x3e"},this);this.bdfsCloudStoreContent.innerHTML=q},createBDFSCloudProviderDataObject:function(){return{cloudStoreId:this.cloudStoreId,cloudStorePath:this.cloudStorePath}}})})},"arcgisonline/pages/components/SelectCloudStore":function(){define("require exports tslib preact arcgisonline/sharing/util arcgisonline/esriGeowConfig dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),function(S,J,f,c,h,d,b){Object.defineProperty(J,
"__esModule",{value:!0});h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);S=function(a){function e(){var q=null!==a&&a.apply(this,arguments)||this;q.state={cloudStoreListDisplay:[]};return q}f.__extends(e,a);e.prototype.componentDidMount=function(){this.requestCloudStoreID()};e.prototype.requestCloudStoreID=function(){var q=this,t=h.default.getUser().orgId;t={q:"orgid:".concat(t,' type:"').concat("Data Store",'"'),num:1E4};var u="".concat(d.default.restBaseUrl,"search");h.default.request({url:u,
content:t},{useProxy:h.default.shouldUseProxy(u)}).then(function(g){g=g.results;var m=[];g&&(g.forEach(function(v){var p=v.id,l=v.title,n=v.type;v=v.typeKeywords;-1===v.indexOf("bigDataFileShare")&&m.push({id:p,title:l,type:n,typeKeywords:v})}),q.setState({cloudStoreListDisplay:m}))},function(g){})};e.prototype.requestCloudStoreInfo=function(q){var t=this;q="".concat(d.default.restBaseUrl,"content/items/").concat(q,"/data");h.default.request({url:q},{useProxy:h.default.shouldUseProxy(q)}).then(function(u){t.props.configureCloudStoreParameters(u.id,
u.path)},function(u){})};e.prototype.selectCloudStore=function(q){var t=q.target.value[0],u;this.state.cloudStoreListDisplay.forEach(function(g,m){g.title===t&&(u=g.id)});this.requestCloudStoreInfo(u)};e.prototype.createCloudStoreList=function(q){return q.map(function(t){return(0,c.h)("calcite-combobox-item",{key:t.id,id:t.id,textLabel:t.title,value:t.title},t.title)})};e.prototype.render=function(){var q=this.createCloudStoreList(this.state.cloudStoreListDisplay);return(0,c.h)(c.Fragment,null,(0,c.h)("calcite-combobox",
{class:"cloud-ui-select",id:"existingDataStore",scale:"m",label:"Single selection-mode combobox",selectionMode:"single",oncalciteComboboxChange:this.selectCloudStore.bind(this),value:"",placeholder:b.default.AddDatastoreDlg.existingCloudStoreDropdownMenuPlaceholder},q))};return e}(c.Component);J.default=S})},"arcgisonline/sharing/dijit/DatastoreBDFSCloudSettings":function(){define("esri/declare esri/request dojo/string dojo/query dojo/topic dojo/dom-class dojo/Deferred dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/DatastoreBDFSCloudSettings.html dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u){return S([a,e,q],{templateString:f.substitute(t,{i18n:u.AddDatastoreDlg}),cloudStoreType:"new",cloudStoreId:null,cloudStorePath:null,regionData:{},constructor:function(g){this.inherited(arguments);this.settingsMode=g.settingsMode;this.i18n=u;this.itemData=g.itemData},postCreate:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments);this.settingsMode&&d.add(this.stepDescription,"hide");return this._populateFormSelects().then(function(){this._addEventListeners();
this.settingsMode&&this._populateCloudOptions(this.itemData)}.bind(this))},_populateBDFSCloudProviders:function(){var g="";Object.keys(this.i18n.AddDatastoreDlg.bdfsCloudProviders).forEach(function(m){g+="\x3clabel class\x3d'cloudstore-type bdfs'\x3e\x3cinput type\x3d'radio' name\x3d'bdfsCloudstoreProvider' value\x3dbdfs"+m+" data-dojo-attach-point\x3dbdfs"+m+"ContainerNode\x3e\x3cspan class\x3d'cloudstore-type-text'\x3e\x3cspan class\x3d'cloudstore-type-label'\x3e"+this.i18n.AddDatastoreDlg.bdfsCloudProviders[m]+
"\x3c/span\x3e\x3c/span\x3e\x3c/label\x3e"},this);this.bdfsCloudStoreContent.innerHTML=g},_populateFormSelects:function(){this._createOptions(this.i18n.AddDatastoreDlg.credentialTypeValues,this.bdfsCredentialType);return this._fetchRegionInfo()},_fetchRegionInfo:function(){var g=new b;J({url:"https://esriresources.s3.amazonaws.com/1110/regionsforcloudstorage.dat",handleAs:"json"}).then(function(m){this._addOptions(m.Amazon.regions,this.bdfsRegion,!0);this._addOptions(m.environments,this.bdfsEnvironment,
!1,"storageEndpointSuffix");g.resolve()}.bind(this),function(m){g.resolve()});return g},_createOptions:function(g,m){Object.keys(g).forEach(function(v){var p=document.createElement("option");p.label=g[v];p.value=v;m.appendChild(p)},this)},_addOptions:function(g,m,v,p){p=p||"id";m.labelAttr="displayName";m.sortByLabel=!1;v&&(v={},v.displayName=this.i18n.AddDatastoreDlg.custom,v[p]="custom",g.push(v));this._configureRegionSelect(g,m)},_configureRegionSelect:function(g,m){this.regionData[m.id]=g;g.forEach(function(v){var p=
document.createElement("option");p.id=v.id;p.label=v.displayName;p.value=v.id;m.appendChild(p)})},_onCredentialTypeChange:function(g){var m="iamrole"===g?!0:!1;this.bdfsAccessKeyId.disabled=m;c(".credential-type-change-connect").forEach(function(v){this.settingsMode&&this.editing||!this.settingsMode?(v.classList.remove("hide"),m?v.classList.add("grey-out"):v.classList.remove("grey-out")):m?v.classList.add("hide"):v.classList.remove("hide")},this);this.settingsMode&&h.publish("settings/cloudConnectionChange")},
_populateCloudOptions:function(g){this._disableControls(!0);var m=(g.provider||"").toLowerCase(),v=g.info.objectStore;this.bdfsCloudStoreOption.value=m;this._displayCloudStoreContent(m);if(-1<g.info.objectStore.indexOf("/")){var p=g.info.objectStore.indexOf("/");v=g.info.objectStore.substring(0,p);this.bdfsCloudFolder.value=g.info.objectStore.substring(p+1)}else d.add(this.bdfsCloudFolderContainer,"hide");g=JSON.parse(g.info.connectionString);switch(m){case "amazon":this.bdfsCredentialType.value=
g.credentialType;"accesskey"===g.credentialType&&(this.bdfsAccessKeyId.value=g.accessKeyId,this.bdfsSecretKeyId.value=g.secretAccessKey);m=this.getRegionID(this.bdfsRegion.options,g.regionEndpointUrl);this.bdfsRegion.value=m?m:"custom";this.bdfsStorageURL.value=g.regionEndpointUrl;this.bdfsBucketName.value=v;break;case "azure":this.bdfsAccountKey.value=g.accountKey;this.bdfsAccountName.value=g.accountName;this.bdfsEnvironment.value=g.accountEndpoint;this.bdfsContainerName.value=v;break;default:throw"Invalid cloud provider";
}},_showPrivateURL:function(g,m){c(".privateUrl").forEach(function(v){"custom"===g||m?v.classList.remove("hide"):v.classList.add("hide")})},_showCloudTypeUI:function(g){Array.from(this.bdfsCloudStoreRegistrationUI.children).forEach(function(m){m.classList&&m.classList.length&&!m.classList.contains(g)?m.classList.add("hide"):m.classList.remove("hide")})},_addEventListeners:function(){this.own(c("input[name\x3d'cloudStoreType']").on("change",function(g){"new"===g.target.value?(this.cloudStoreType="new",
c(".bdfsNewCloudStoreOptionWrapper").removeClass("hide"),c(".cloudStore-options.bdfs").addClass("hide")):(this.cloudStoreType="existing",c(".cloudStore-options.bdfs").removeClass("hide"),c(".bdfsNewCloudStoreOptionWrapper").addClass("hide"))}.bind(this)),c("input[name\x3d'bdfsCloudstoreProvider']",this.domNode).on("change",function(g){c("label.cloudstore-type.bdfs",this.domNode).removeClass("active");d.add(g.target.parentElement,"active")}.bind(this)))},_disableControls:function(g){this.bdfsCloudStoreOption.disabled=
this.settingsMode||g;this.bdfsStorageURL.readOnly=g;this.bdfsCredentialType.disabled=g;this.bdfsAccountName.readOnly=g;this.bdfsAccountKey.readOnly=g;this.bdfsAccessKeyId.readOnly=g;this.bdfsSecretKeyId.readOnly=g;this.bdfsRegion.disabled=g;this.bdfsEnvironment.disabled=g;this.bdfsContainerName.readOnly=g;this.bdfsBucketName.readOnly=g;this.bdfsCloudFolder.readOnly=g},getRegionID:function(g,m){var v;g.forEach(function(p){p.item.blobStoreEndpoint===m&&(v=p.item.id)});return v},getRegionEndpointURL:function(g,
m){var v;g.forEach(function(p){p.id===m&&(v=p.blobStoreEndpoint||p.storageEndpointSuffix)});return v},getBDFSCloudParamterUpdatedItem:function(g){g||(g={});g.provider=this.getBDFSCloudStoreValue(this.bdfsCloudStoreOption.value);g.storageURL=this.bdfsStorageURL.value;g.credentialType=this.bdfsCredentialType.value;g.accountName=this.bdfsAccountName.value;g.accountKey=this.bdfsAccountKey.value;g.accessKeyId=this.bdfsAccessKeyId.value;g.secretKeyId=this.bdfsSecretKeyId.value;g.region=this.bdfsRegion.value;
g.environment=this.bdfsEnvironment.value;g.containerName=this.bdfsContainerName.value;g.bucketName=this.bdfsBucketName.value;g.cloudFolder=this.bdfsCloudFolder.value;return g},_displayCloudStoreContent:function(g){this.bdfsCloudStoreRegistrationUI.classList.remove("hide");if(this.settingsMode&&this.editing||!this.settingsMode)this.bdfsCredentialType.value="accesskey";this._showCloudTypeUI(g);this.settingsMode&&h.publish("settings/cloudConnectionChange")},_displayBDFSCloudStoreItem:function(g){"bdfsamazon"===
g?this.bdfsCloudStoreOption.value=this.i18n.AddDatastoreDlg.cloudProviders.amazon:"bdfsazure"===g&&(this.bdfsCloudStoreOption.value=this.i18n.AddDatastoreDlg.cloudProviders.azure);this._displayCloudStoreContent(g.substring(4))},createBDFSCloudProviderDataObject:function(g,m){if("new"===this.cloudStoreType){var v=(m.provider||"").toLowerCase(),p=g.info.connectionString={};p.credentialType="accesskey";switch(v){case "amazon":"accesskey"===m.credentialType?(p.accessKeyId=m.accessKeyId,p.secretAccessKey=
m.secretKeyId):p.credentialType=m.credentialType;p.regionEndpointUrl="custom"===m.region?m.storageURL:this.getRegionEndpointURL(this.regionData.bdfsRegion,m.region);g.info.objectStore=m.bucketName;g.provider="amazon";break;case "azure":p.accountKey=m.accountKey;p.accountName=m.accountName;p.accountEndpoint="custom"===m.environment?m.storageURL:this.getRegionEndpointURL(this.regionData.bdfsEnvironment,m.environment);g.info.objectStore=m.containerName;g.provider="azure";break;default:throw"Invalid cloud provider";
}p.defaultEndpointsProtocol="https";m.cloudFolder&&(g.info.objectStore=g.info.objectStore+"/"+m.cloudFolder);g.info.connectionString=JSON.stringify(p);g.type="cloudStore";g.path="/cloudStores/"+m.title;return g}},validateBDFSCloudInputs:function(g){var m=(g.provider||"").toLowerCase();if(!m)return this.i18n.AddDatastoreDlg.validation.invalidCloudProvider;var v=[];switch(m){case "amazon":"accesskey"!==g.credentialType||g.accessKeyId||v.push(this.i18n.AddDatastoreDlg.accessKeyId);"accesskey"!==g.credentialType||
g.secretKeyId||v.push(this.i18n.AddDatastoreDlg.secretKeyId);"amazon"!==m||g.bucketName||v.push(this.i18n.AddDatastoreDlg.bucketName);"custom"!==g.region||g.storageURL||v.push(this.i18n.AddDatastoreDlg.storageURL);break;case "azure":g.accountName||v.push(this.i18n.AddDatastoreDlg.accountName);g.accountKey||v.push(this.i18n.AddDatastoreDlg.accountKey);g.containerName||v.push(this.i18n.AddDatastoreDlg.containerName);"custom"!==g.environment||g.storageURL||v.push(this.i18n.AddDatastoreDlg.storageURL);
break;default:throw"Invalid cloud provider";}g=this.i18n.AddDatastoreDlg.validation.errorInfo.replace("${missingFields}",v.join(", ")).replace(/,([^,]*)$/," "+this.i18n.FilterDlg.and+"$1");g=g.replace(/:/g,"");return v.length?g:!1},getBDFSCloudStoreValue:function(g){var m;Object.keys(this.i18n.AddDatastoreDlg.bdfsCloudProviders).forEach(function(v){g===this.i18n.AddDatastoreDlg.bdfsCloudProviders[v]&&(m=v)},this);return m}})})},"arcgisonline/sharing/dijit/_federated-servers-table":function(){define("esri/declare arcgisonline/sharing/util arcgisonline/esriGeowConfig arcgisonline/pages/utils/dom arcgisonline/pages/utils/clone dojo/_base/array dojo/Deferred dojo/string dojo/query dojo/topic dojo/dom-class dojo/dom-construct dojo/dom-attr dojo/DeferredList dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_federated-servers-table.html dojo/i18n!arcgisonline/nls/arcgisonline dojo/NodeList-traverse".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n){return S([v,p],{templateString:a.substitute(l,{i18n:n.AddDatastoreDlg}),statusImageBaseUrl:"js/arcgisonline/sharing/dijit/css/images/",validateServerUrl:f.restBaseUrl+"portals/self/datastores/validate",constructor:function(k){this.settingsMode=k.settingsMode;this.singleSelect=k.singleSelect;this.datastoreId=k.datastoreId;this.i18n=n.AddDatastoreDlg;this.serversi18n=n.myOrganization.serversTab;this.federatedServers=k.federatedServers;this.filterFederatedServers=
k.filterFederatedServers;this.selectedServers=[];this.serverTypes=[];this.federatedServersForDisplaying=k.federatedServers},postCreate:function(){this.filterFederatedServers&&(this.federatedServers=this.filterServers(this.federatedServers,!1,!1,!1,!1),this.federatedServersForDisplaying=h.default(this.federatedServers));this.federatedServersForDisplaying.forEach(function(k){this.buildFederatedServersRow(k)}.bind(this));this.singleSelect&&t.add(this.selectAllCheckbox,"hide");this.datastoreId&&this.validateDatastoreForServers();
this.checkServersType()},checkServersType:function(){if(J.isArcGISEnterpriseOnKubernetes()){var k=[];this.federatedServersForDisplaying.forEach(function(w){if(w.isHosted){var x={};x.name=w.adminUrl;x.type="Linux";this.serverTypes.push(x);k.push(function(){var D=new b;D.resolve(w);return D}.call(this))}else"FEDERATED_SERVER"===w.serverRole&&k.push(function(){var D=new b;J.request({url:w.adminUrl+"/admin/machines?f\x3djson"},{usePost:!0}).then(function(G){D.resolve(G)}.bind(this),function(G){D.reject(G)}.bind(this));
return D}.call(this))}.bind(this));var r=new m(k);r.then(function(w){this.validateServerTypeKubernetes(w)}.bind(this))}else k=[],this.federatedServersForDisplaying.forEach(function(w){k.push(function(){var x=new b;J.request({url:w.adminUrl+"/admin/machines?f\x3djson"},{usePost:!0}).then(function(D){x.resolve(D)}.bind(this),function(D){x.reject(D)}.bind(this));return x}.call(this))}),r=new m(k),r.then(function(w){this.validateServerType(w)}.bind(this))},validateServerTypeKubernetes:function(k){var r=
[];this.federatedServersForDisplaying.forEach(function(w,x){w.isHosted?r.push(function(){var D=new b;D.resolve(w);return D}.call(this)):r.push(function(){var D=new b;J.request({url:w.adminUrl+"/admin/machines/"+k[x][1].machines[0].machineName+"?f\x3djson"},{usePost:!0}).then(function(G){D.resolve(G)}.bind(this),function(G){D.reject(G)}.bind(this));return D}.call(this))});(new m(r)).then(function(w){w.forEach(function(x,D){if(!x[1].isHosted){var G={};G.name=this.federatedServersForDisplaying[D].adminUrl;
G.type=-1<x[1].platform.indexOf("Windows")?"Windows":"Linux";this.serverTypes.push(G)}}.bind(this))}.bind(this))},validateServerType:function(k){var r=[];this.federatedServersForDisplaying=this.federatedServersForDisplaying.filter(function(w,x){return k[x][0]?(r.push(function(){var D=new b;J.request({url:w.adminUrl+"/admin/machines/"+k[x][1].machines[0].machineName+"?f\x3djson"},{usePost:!0}).then(function(G){D.resolve(G)}.bind(this),function(G){D.reject(G)}.bind(this));return D}.call(this)),!0):
!1}.bind(this));(new m(r)).then(function(w){w.forEach(function(x,D){if(x[0]){var G={};G.name=this.federatedServersForDisplaying[D].adminUrl;G.type=-1<x[1].platform.indexOf("Windows")?"Windows":"Linux";this.serverTypes.push(G)}}.bind(this))}.bind(this))},filterServersByServerPath:function(k,r){var w=-1<("folder"===k.dataStoreType?k.newServerFolderPath||k.publisherFolderPath:k.publisherFileShareFolderPath)[0].indexOf("/")?"Linux":"Windows";return r?this.federatedServersForDisplaying.filter(function(x){return this.serverTypes.find(function(D){return D.name===
x.adminUrl&&x.isHosted})}.bind(this)):this.federatedServersForDisplaying.filter(function(x){return this.serverTypes.find(function(D){return D.name===x.adminUrl&&D.type===w})}.bind(this))},checkDatabaseClient:function(k){var r=!1;"database"===k.dataStoreType&&k.publisherConnectionString&&k.publisherConnectionString.split(";").forEach(function(w){-1<w.indexOf("DBCLIENT")&&-1<["bigquery","snowflake","redshift"].indexOf(w.split("\x3d")[1])&&(r=!0)});return r},renderTable:function(k){this.federatedServersForDisplaying=
h.default(this.federatedServers);var r=k.dataStoreType,w=this.checkBigDataFileShare(r);r=this.checkNoSQLFileShare(r);var x=this.checkNFS(k.serverFolderPath,k.dataStoreType),D=this.checkDatabaseClient(k);this.federatedServersForDisplaying=this.filterServers(this.federatedServersForDisplaying,w,r,D,x);["folder","fileshare"].includes(k.dataStoreType)&&(this.federatedServersForDisplaying=this.filterServersByServerPath(k,x));u.empty(this.federatedServersTableBody);this.federatedServersForDisplaying.forEach(function(G){this.buildFederatedServersRow(G)}.bind(this))},
checkBigDataFileShare:function(k){return-1<["fileshare","hdfs","hive","bdfsCloud"].indexOf(k)},checkNoSQLFileShare:function(k){return-1<["Neo4j"].indexOf(k)},checkNFS:function(k,r){return-1<["nfsHostAndPath"].indexOf(k)&&"folder"===r},formatServerDisplay:function(k){var r=k.url;(k=this.getServerType(k))&&(r+=" ("+k+")");return r},getServerType:function(k){var r=k.serverFunction&&k.serverFunction.replace(/\s+/g,"").split(",")||[],w="";"HOSTING_SERVER"===k.serverRole&&(w+=this.serversi18n.hostedSetting);
-1<d.indexOf(r,"NotebookServer")&&(w+=this.appendServer(w,this.serversi18n.notebookServerSetting));-1<d.indexOf(r,"GeoAnalytics")&&(w+=this.appendServer(w,this.serversi18n.geoAnalyticsServerSetting));-1<d.indexOf(r,"RasterAnalytics")&&(w+=this.appendServer(w,this.serversi18n.rasterAnalysisSetting));-1<d.indexOf(r,"ImageHosting")&&(w+=this.appendServer(w,this.serversi18n.imageHostingSetting));-1<d.indexOf(r,"MissionServer")&&(w+=this.appendServer(w,this.serversi18n.missionServerSetting));return w},
appendServer:function(k,r){return""+(k&&", ")+r},buildFederatedServersRow:function(k){var r=u.create("tr",null,this.federatedServersTableBody),w=u.create("td",null,r),x=null;x=this.singleSelect?u.create("input",{type:"radio",name:"serverId",class:"federated-server-checkbox","data-server-id":k.id,disabled:!0},w):u.create("input",{type:"checkbox",class:"federated-server-checkbox","data-server-id":k.id,disabled:!0},w);k.isRegistered&&(x.checked=!0);this.connect(x,"onchange","selectServer");u.create("td",
{innerHTML:this.formatServerDisplay(k)},r);r=u.create("td",{class:"server-status"},r);u.create("img",{src:J.relativeToExplicitUrl("js/arcgisonline/css/images/LoadingAnimation_circle24blue.gif"),class:"hide","data-server-id":k.id,"data-server-validate":""},r);u.create("img",{src:"",class:"hide","data-server-id":k.id,"data-server-status":""},r);u.create("span",{innerHTML:this.i18n.serverValidation.validating,"data-server-id":k.id},r)},selectAll:function(k){e(".federated-server-checkbox").forEach(function(r){r.disabled||
(r.checked=k.target.checked?!0:!1,this.updateSelectedServers(r,!0),this.toggleActiveState(r))}.bind(this))},disableAllCheckboxes:function(){c.forEachNode(e("input[type\x3d'checkbox'",this.domNode),function(k){k.disabled=!0})},getSelectedServers:function(){c.forEachNode(e(".federated-server-checkbox"),function(k){k.checked&&this.updateSelectedServers(k,!1)}.bind(this));return this.selectedServers},selectServer:function(k){k=k.target;this.updateSelectedServers(k,!0);this.toggleActiveState(k)},updateSelectedServers:function(k,
r){var w=g.get(k,"data-server-id");k.checked?(k=this.federatedServersForDisplaying.filter(function(x){return x.id===w})[0],-1===this.selectedServers.indexOf(k)&&this.selectedServers.push(k)):this.selectedServers=this.selectedServers.filter(function(x){return x.id!==w});r&&q.publish("settings/selectedServersChange",{servers:this.selectedServers})},updateServerStatuses:function(k){this.federatedServersForDisplaying.forEach(function(w){var x=e('img[data-server-id\x3d"'+w.id+'"][data-server-validate]')[0],
D=e('img[data-server-id\x3d"'+w.id+'"][data-server-status]')[0],G=e('input[data-server-id\x3d"'+w.id+'"]')[0],F=e('span[data-server-id\x3d"'+w.id+'"]')[0],A="",y=this.statusImageBaseUrl,z=this.serverValidationResult.filter(function(C){return C[1].serverId===w.id})[0][1].result||{},B=z.status||"error";z.error?A+=z.error.message:(z.machines||[]).length&&(B=z.machines.filter(function(C){return"error"===C.status?(A+=C.machine+": ",C.dataItems.forEach(function(H){A+=H.message}),!0):!1}).length?"error":
"success");switch(B.toLowerCase()){case "success":y+="server-valid-icon.png";G.disabled=!1;F.innerHTML=this.i18n.serverValidation.normal;this.selectAllCheckbox.disabled&&(this.selectAllCheckbox.disabled=!1);break;case "failure":case "error":y+="server-invalid-icon.png";F.innerHTML=this.i18n.serverValidation.notAvailable;G.disabled=k?!1:!0;break;default:y+="server-unknown-icon.png",F.innerHTML=this.i18n.serverValidation.notAvailable,G.disabled=!1}D.parentElement.title=A.replace(/[\r\n\t]/g," ");D.src=
J.relativeToExplicitUrl(y);t.add(x,"hide");t.remove(D,"hide");this.settingsMode&&!k&&this.disableAllCheckboxes()}.bind(this));if(!this.settingsMode&&1===this.federatedServersForDisplaying.length){var r=e('input[data-server-id\x3d"'+this.federatedServersForDisplaying[0].id+'"]')[0];r.disabled||(r.checked=!0,this.updateSelectedServers(r,!1),q.publish("servers/serverAutoSelected"))}},toggleActiveState:function(k){var r=e(k).closest("tr")[0];k.checked?t.add(r,"active"):t.remove(r,"active")},filterServers:function(k,
r,w,x,D){return(k||[]).filter(function(G){var F=(G.serverRole||"").toUpperCase(),A=["ARCGIS_NOTEBOOK_SERVER","ARCGIS_MISSION_SERVER"];G=G.serverFunction&&G.serverFunction.replace(/\s+/g,"").split(",")||[];var y=["NOTEBOOKSERVER","WORKFLOWMANAGER","MISSIONSERVER"],z="HOSTING_SERVER"===F;r&&-1===G.indexOf("GeoAnalytics")&&(A.push(F),z=!1);w&&-1===G.indexOf("KnowledgeServer")&&(A.push(F),z=!1);D&&J.isArcGISEnterpriseOnKubernetes()&&(z=!0);F=-1===A.indexOf(F);x&&(F=!1);return z||F&&(!G.length||G.some(function(B){return-1===
y.indexOf(B.toUpperCase())}))})},validateDatastoreForServers:function(k){this.disableAllCheckboxes();var r=[],w;this.federatedServersForDisplaying.forEach(function(x){var D=e('img[data-server-id\x3d"'+x.id+'"][data-server-validate]',this.domNode)[0],G=e('img[data-server-id\x3d"'+x.id+'"][data-server-status]',this.domNode)[0],F=e('span[data-server-id\x3d"'+x.id+'"]',this.domNode)[0];t.add(G,"hide");t.remove(D,"hide");F.innerHTML=this.i18n.serverValidation.validating;var A={serverId:x.id};k?A.datastore=
k:A.datastoreId=this.datastoreId;k&&(w=JSON.parse(k),w.allowServicesRestart&&(A.options=JSON.stringify({allowServicesRestart:!0}),D=JSON.parse(A.datastore),delete D.allowServicesRestart,A.datastore=JSON.stringify(D)));r.push(function(){var y=new b,z={serverId:x.id};J.request({url:this.validateServerUrl,content:A},{usePost:!0}).then(function(B){z.result=B;y.resolve(z)}.bind(this),function(B){z.result={error:B};y.reject(z)}.bind(this));return y}.call(this))}.bind(this));(new m(r)).then(function(x){!0===
x[0][0]&&"success"!==x[0][1].result.status&&"RequiresServicesRestart"===x[0][1].result.machines[0].dataItems[0].error&&q.publish("server/openNFSModal",!0);this.serverValidationResult=x;q.publish("settings/validationComplete",x);this.updateServerStatuses()}.bind(this))}})})},"arcgisonline/sharing/dijit/dialog/CreateNotebookDlg":function(){define("require esri/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin esri/dijit/Tags arcgisonline/esriGeowConfig arcgisonline/sharing/util arcgisonline/pages/pageUtil arcgisonline/pages/utils/notebook arcgisonline/pages/dijit/CategoryPicker arcgisonline/sharing/dijit/dialog/_CreateItemUtilMixin arcgisonline/sharing/dijit/dialog/_AddItemDlgMixin arcgisonline/sharing/dijit/dialog/GeneralDlg dijit/Dialog dijit/form/Textarea dijit/form/Select dojo/dom-construct dojo/cookie dojo/json dojo/Deferred dojo/promise/all dojo/DeferredList dojo/_base/array dojo/_base/lang dojo/topic dojo/on dojo/string dojo/query dojo/dom-class dojo/dom-attr dojo/NodeList-dom dojo/text!./templates/CreateNotebookDlg.html dojo/i18n!arcgisonline/nls/arcgisonline dojo/i18n!arcgisonline/nls/notebooks dojox/uuid/generateRandomUuid".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E,K,I,L,M){return J([f,c,h],{templateString:z.substitute(K,{i18n:L.CreateNotebookDlg}),dialog:null,federatedServers:null,hostingServer:null,currentStep:null,item:null,thumbnail:null,postCreate:function(){this.inherited(arguments)},constructor:function(N){this.saveAs=N.saveAs;this.onHide=N.onHide;this.originalItem=N.originalItem;this.currentStep=1;this.formData=new FormData;this.item={}},postMixInProperties:function(){this.inherited(arguments);
this.i18n=I;this.i18n.notebookLanding=L.notebookLanding;this.i18n.notebookViewer=L.notebookViewer;this.i18n.notebookServerManager=L.notebookServerManager;this.i18n.CreateNotebookDlg=L.CreateNotebookDlg},startup:function(){this.inherited(arguments);this._user=a.getUser();this._loadConnections();x({tags:a.loadUserTags(this._user.username),categories:this.portal.getCategories(),folders:this.portalUser.getFolders(),samples:q.getSampleNotebooks(),runtimes:q.getNotebookRuntimes(),info:q.getNotebookServerInfo(),
thumbnail:this._loadNotebookThumbnail(this.originalItem.thumbnailUrl)}).then(function(N){this._setupSamples(N.samples);this._setupTags(N.tags);this._setupCategories(N.categories);this._setupFolders(N.folders);this._setupRuntimes(N.runtimes,N.info.currentRuntimeVersion);this._showModal();this._setThumbnail(N.thumbnail)}.bind(this),function(N){})},_setupRuntimes:function(N,P){this.runtimes=F.clone(N);q.createRuntimeSelect(this.runtimes,P,this.notebookRuntimeSelect)},_setupSamples:function(N){this.samples=
N.items;N.items.unshift({id:"blank",title:this.i18n.CreateNotebookDlg.blankNotebook,snippet:this.i18n.CreateNotebookDlg.blankNotebookSnippet});var P=n.create("div",{class:"sample-template-container"}),R=b.baseUrl+"js/arcgisonline/css/images/notebook-thumb.png";N.items.forEach(function(Y){var ja=b.restBaseUrl+"content/items/"+Y.id+"/info/"+Y.thumbnail+"?token\x3d"+this.portalUser.credential.token,aa=n.create("label",{class:"sample-template-group card"},P);n.create("input",{type:"radio",value:Y.id,
name:"sampleTemplate"},aa);n.create("div",{class:"card-selector"},aa);n.create("img",{src:Y.thumbnail?ja:R},aa);ja=n.create("div",{class:"card-content"},aa);n.create("h5",{innerHTML:Y.title,title:Y.title},ja);n.create("p",{class:"font-size--1 card-last",innerHTML:Y.snippet},ja)}.bind(this));n.place(P,this.templateSelectionContainer)},_setupFolders:function(N){var P=k("ESRI_Content");P=P?r.parse(P):{};var R=P.folderId||null;this._selectedFolderId=P.folderId||null;(!N||!N.length||N&&N.length&&N[0].title!==
this.portalUser.username)&&N.unshift({title:this.portalUser.username,id:"/"});this._folders.options=G.map(N,"return {label:item.title, value:item.id};");this._folders.set("value",R||this.portalUser.username)},_setupCategories:function(N){b.self.hasCategorySchema&&(this._categories=new t({categories:[],schema:N},this._categoriesContainer),this._categories.startup(),B(".categories-container",this.domNode).removeClass("hide"))},_showModal:function(){this.dialog=new v({title:this.saveAs?I.CreateNotebookDlg.saveNotebookAs:
I.CreateNotebookDlg.createNotebook,content:this.domNode,class:"create-notebook-dlg",onHide:function(){this.destroyRecursive();if(this.onHide)this.onHide()}.bind(this),closable:!0});this.dialog.show().then(function(){this.addEventListeners();this.saveAs?(this.item.templateId=this.originalItem.id,this.samples=[this.originalItem],C.add(this.step2Container,"padding-leader-1"),this.addButton.innerText=I.CreateNotebookDlg.saveNotebook,this._goToStep(2)):(C.remove(this.stepIndicatorContainer,"hide"),this._goToStep(1))}.bind(this))},
_setupTags:function(N){this._tags.set("knownTags",N)},_loadConnections:function(){this.own(A.subscribe("onSelectedTagsUpdate",function(N){var P=this._tags.get("tags");N=P?N.split(",").concat(P.split(",")):N.split(",");this._tags.set("tags",this._unique(N).join(","))}.bind(this)));this.own(y(this._tagsLbl,"click",function(N){this._tags._inputTextBox.focus();B(".select2-choices",this._tags.domNode).addClass("focus")}.bind(this)),y(this._tags.domNode,"focusout",function(N){B(".select2-choices",this._tags.domNode).removeClass("focus")}.bind(this)),
y(this._tags.domNode,"focusin",function(N){B(".select2-choices",this._tags.domNode).addClass("focus")}.bind(this)))},_unique:function(N){var P={};return G.filter(N,function(R){return!R||P[R]?!1:P[R]=!0})},_processFolderPath:function(N,P,R){if(!R||0!==R.trim().length){var Y;R.split("\\").some(function(ja){Y=ja;if(0<ja.trim().length)return!0});P.set("value",Y);C.remove(N,"hide")}},addEventListeners:function(){this.own(y(this.cancelButton,"click",function(N){N.preventDefault();this.dialog.hide()}.bind(this)),
y(this.nextButton,"click",function(N){N.preventDefault();this._validateStep(this.currentStep)&&this._goToStep(this.currentStep+1)}.bind(this)),y(this.backButton,"click",function(N){N.preventDefault();this._goToStep(this.currentStep-1)}.bind(this)),y(this.addButton,"click",function(N){N.preventDefault();this._validateStep(this.currentStep)&&this._createNotebook(this.item,this.portal)}.bind(this)))},_showCloudTypeUI:function(N){Array.from(this.cloudStoreRegistrationUI.children).forEach(function(P){P.classList&&
P.classList.length&&!P.classList.contains(N)?P.classList.add("hide"):P.classList.remove("hide")})},_createNotebook:function(N,P){function R(aa){this.errorNode.innerHTML=aa.message;B(".step-"+this.currentStep).removeClass("hide");C.remove(this.addButton,"hide");C.remove(this.backButton,"hide");C.remove(this.cancelButton,"hide");C.remove(this.loader,"is-active");C.add(this.errorNode,"is-active")}var Y=this.telemetry,ja=this._createItemDataObject(N);C.remove(this.errorNode,"is-active");this.errorNode.innerHTML=
"";C.add(this.addButton,"hide");C.add(this.backButton,"hide");C.add(this.cancelButton,"hide");B(".step-"+this.currentStep).addClass("hide");C.add(this.loader,"is-active");u.addItem(ja,N.folderId,P).then(function(aa){if(aa.success)if(Y&&Y.logEvent({label:"create apps",category:"new item",pageName:"my content",details:"notebook"}),this.saveAs)A.publish("notebook/itemCreated",aa);else{var da=b.baseUrl+"notebook/notebook.html?id\x3d"+aa.id;da+="blank"!==N.templateId?"\x26templateId\x3d"+N.templateId:
"";setTimeout(function(){window.location=da},400)}else R.call(this,aa)}.bind(this),function(aa){R.call(this,aa)}.bind(this))},_createItemDataObject:function(N){var P=new FormData,R=g().itemInfo.notebook;P.append("type",R.type);P.append("typeKeywords",R.typeKeywords);P.append("snippet",N.summary||"");P.append("title",N.title);P.append("tags",(N.tags||[]).join(","));P.append("categories",N.categories||"");N.properties&&P.append("properties",N.properties);this.thumbnail&&P.append("thumbnail",this.thumbnail);
return P},_validateStep:function(N){this._setStepFormData(this.currentStep);var P={valid:!0};switch(N){case 1:if(!this.item.templateId){P=this._generateInvalidResult(this.i18n.CreateNotebookDlg.validation.invalidTemplate);break}"blank"!==this.item.templateId||(this.runtimes||[]).length||(P=this._generateInvalidResult(this.i18n.CreateNotebookDlg.validation.invalidRuntimes));break;case 2:if(!this.item.title){P=this._generateInvalidResult(this.i18n.CreateNotebookDlg.validation.invalidTitle);break}this._validateTitle(this.item.title)&&
(P=this._generateInvalidResult(this.i18n.itemProperties.error.badCharacter));break;default:throw"Invalid step";}P.valid||e.createSpecifiedDialog(m).show(P);return P.valid},_validateTitle:function(N){return-1<N.indexOf("\x3c")||-1<N.indexOf("\x3e")},_generateInvalidResult:function(N){return{title:this.i18n.generalDlg.errorDlgTitle,valid:!1,message:N}},_setStepFormData:function(N){switch(N){case 1:this.item.templateId=(B("input[name\x3d'sampleTemplate']:checked")[0]||{}).value;break;case 2:this.item.title=
this.itemTitle.value;this.item.summary=this._summary.value;this.item.categories=(this._categories||{}).categories;this.item.tags=(this._tags||{}).values;this.item.folderId=this._folders.value!==this._user.username?this._folders.value:null;this.saveAs||"blank"!==this.item.templateId?this.saveAs&&this.runtimeId&&(this.item.properties=q.createNotebookRuntimeProperties(this.runtimes,null,this.runtimeId)):this.item.properties=q.createNotebookRuntimeProperties(this.runtimes,this.notebookRuntimeSelect);
break;default:throw"Error setting step data";}},_goToStep:function(N){this.currentStep=N;this._changeStepIndicator(N);this._changeStepContent(N);this._changeStepButtons(N)},_changeStepIndicator:function(N){B(".create-step").removeClass("active");B("#step"+N.toString()).addClass("active")},_changeStepContent:function(N){B(".step-container").addClass("hide");var P=".step-"+N.toString();2===N&&(this.saveAs||"blank"!==this.item.templateId||C.remove(this.notebookRuntimeContainer,"hide"),"blank"!==this.item.templateId&&
(this.samples||[]).length&&(N=this.samples.filter(function(R){return R.id===this.item.templateId}.bind(this)).shift()))&&(this._tags.set("tags",(N.tags||[]).join(",")),this._summary.set("value",N.snippet),N.properties&&(this.item.properties=JSON.stringify(N.properties)));B(P).removeClass("hide")},_changeStepButtons:function(N){switch(N){case 1:C.remove(this.nextButton,"hide");C.add(this.addButton,"hide");C.add(this.backButton,"hide");break;case 2:C.add(this.nextButton,"hide"),C.remove(this.addButton,
"hide"),this.saveAs||C.remove(this.backButton,"hide")}},hide:function(){this.dialog.hide()},onSubmit:function(N){N.preventDefault()},destroy:function(){this._tags.destroyRecursive();this._summary.destroyRecursive();this._folders.destroyRecursive();this._categories&&this._categories.destroyRecursive();this.dialog.destroyRecursive()},_loadNotebookThumbnail:function(N){if(!N)return!1;N=new URL(N);N.search="?token\x3d"+this.portalUser.credential.token;return fetch(N.toString()).then(function(P){return P.blob()}).then(function(P){var R=
P.type.split("/");R=M()+"."+R[1]||".png";return new File([P],R,{type:P.type})})},_setThumbnail:function(N){if(N)return this.thumbnail=N;this.thumbnail=null}})})},"arcgisonline/pages/dijit/CreateImageryContent":function(){define("require exports tslib dojo/string dojo/dom-attr dojo/dom-class dojo/_base/kernel dijit/_TemplatedMixin dijit/_WidgetBase dojo/text!./CreateImageryContent/templates/CreateImageryContent.html dojo/i18n!../../nls/arcgisonline ./Overlay ../../esriGeowConfig arcgisonline/tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);return function(){function v(p,l){this.overlayContents=c.default.substitute(q.default,{i18n:t.default});this.showActionBar=!1;this.title=t.default.items.createImageryLayer;this.folderId=""}v.prototype.postCreate=
function(){this.inherited(arguments);d.default.add(this.domNode,"overlay--top");var p="".concat(g.default.createImageryContentUrl,"?lang\x3d").concat(b.default.locale,"\x26folderId\x3d").concat(this.folderId);h.default.set(this.domNode.querySelector(".js-iframe"),"src",p);this._evtHandle=this._handleImageryMessage.bind(this);window.addEventListener("message",this._evtHandle)};v.prototype.destroy=function(){window.removeEventListener("message",this._evtHandle);this.inherited(arguments)};v.prototype.handleCancel=
function(p){null==this.unsavedChangesText&&this._redirectItemId?window.location.href="".concat(g.default.baseUrl,"item.html?id\x3d").concat(this._redirectItemId):this.close()};v.prototype._handleImageryMessage=function(p){var l=p.data;"imagery"===l.msgType&&(l.hasDataInPortal?(this.setUnsaved(!0),this.scratchFolderId=l.scratchFolderId,this.unsavedChangesText=l.message,this._redirectItemId=null):(this.setUnsaved(!1),this.unsavedChangesText=this.scratchFolderId=null,this._redirectItemId=l.itemId),l.close&&
(l.redirect&&l.itemId?(this.telemetry&&this.telemetry.logEvent({label:"new item",category:"new item",pageName:"my content",details:"imagery layer",attribute:l.layerType}),setTimeout(function(){return window.location.href="".concat(g.default.baseUrl,"item.html?id\x3d").concat(l.itemId)},500)):this.close()))};return v=f.__decorate([(0,m.default)(e.default,a.default,u.default)],v)}()})},"arcgisonline/pages/dijit/CreateRasterFunctionTemplate":function(){define("require exports tslib dojo/string dojo/dom-class dijit/_TemplatedMixin dijit/_WidgetBase dojo/text!./CreateRasterFunctionTemplate/templates/CreateRasterFunctionTemplate.html dojo/i18n!../../nls/arcgisonline ./Overlay ../../esriGeowConfig arcgisonline/tsutils/declareDecorator ../../sharing/dijit/RasterFunctionEditor".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);return function(){function m(v,p){this.overlayContents=c.default.substitute(a.default,{i18n:e.default});this.showActionBar=!1;this.title=e.default.items.createRasterFunctionTemplate}m.prototype.postCreate=function(){this.inherited(arguments);
h.default.add(this.domNode,"overlay--top");this.domNode.style.display="none";this.openInRFxEditor({user:this.portalUser,parent:this.srcNodeRef,entryPoint:"contentPage"});this._evtHandle=this._handleRFxEditorMessage.bind(this);window.addEventListener("message",this._evtHandle)};m.prototype.destroy=function(){window.removeEventListener("message",this._evtHandle);this.inherited(arguments)};m.prototype.openInRFxEditor=function(v){v=v||{};this._rasterFunctionEditor?(this._rasterFunctionEditor.set("parent",
v.parent),this._rasterFunctionEditor.open()):(v.showOnStart=!0,v=new g.default(v,document.createElement("div")),v.startup(),document.body.appendChild(v.domNode),this._rasterFunctionEditor=v)};m.prototype._handleRFxEditorMessage=function(v){var p=v.data;"string"===typeof p&&(p=JSON.parse(p));null!==p&&void 0!==p&&p.action&&("close"===p.action?this.close():"redirect"===p.action&&p.itemId&&setTimeout(function(){return window.location.href="".concat(t.default.baseUrl,"item.html?id\x3d").concat(p.itemId)},
500))};return m=f.__decorate([(0,u.default)(b.default,d.default,q.default)],m)}()})},"arcgisonline/sharing/dijit/RasterFunctionEditor":function(){define("dojo/dom-class dojo/string dojo/on dojo/topic dojo/_base/declare dojo/_base/lang dojo/_base/array dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/_TemplatedMixin dijit/Dialog esri/domUtils ../../pages/dijit/Overlay dojo/text!./templates/RasterFunctionEditor.html dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),function(S,J,f,c,h,d,b,a,e,
q,t,u,g,m,v){return h("arcgisonline.sharing.dijit.RasterFunctionEditor",[a,q,g],{baseClass:"esriRFxEditorContainer",user:null,constructor:function(p,l){this.user=p&&p.user;this.parent=p&&p.parent;this.item=p&&p.item;this.entryPoint=p&&p.entryPoint;this.domNode=l;this.overlayContents=J.substitute(m,{i18n:v});this.destroyOnClose=this.showActionBar=!1},postCreate:function(){this.inherited(arguments);this._iframe=this.domNode.querySelector("iframe");this._passiveOverlay=this.domNode.querySelector(".passive-overlay");
this._closeBtn=this.domNode.querySelector(".close-btn");S.add(this.domNode,"overlay--top")},startup:function(){this.inherited(arguments);var p=this.user,l=this.item?this.item.id:null,n=esriGeowConfig.rasterFunctionEditor+"?locale\x3d"+dojo.locale+"\x26entryPoint\x3d"+this.entryPoint+"\x26isViewerMode\x3d"+(p?!p.canCreateItems:!0)+"\x26portalUrl\x3d"+esriGeowConfig.restBaseUrl;p&&(n=n+"\x26username\x3d"+p.username+"\x26userId\x3d"+p.accountId+"\x26token\x3d"+p.token);l&&(n=n+"\x26itemId\x3d"+l);this._iframe.src=
n;this._showLoadingDialog();this._attachListeners()},destroy:function(){this._detachAnalysisToolListeners()},activate:function(){S.remove(this.domNode,"passive");this._iframe.contentWindow.postMessage(JSON.stringify({action:"activate"}),"*")},deactivate:function(){S.add(this.domNode,"passive");this._iframe.contentWindow.postMessage(JSON.stringify({action:"deactivate"}),"*")},onLoad:function(){this._closeLoadingDialog();this.showOnStart&&this.open()},run:function(p){"analysisStack"!==arcgisonline.map.leftPanel.getLeftContentPanelStack()&&
(arcgisonline.map.dijit.toc.analysis.configureAnalysis(),c.publish("Analysis/ShowAnalysis"));this.applyRFxTool?this.applyRFxTool.set("rasterFunction",p):p&&this.parent&&(this.parent.analysisTool.openApplyRFxTool(p,!0),this.applyRFxTool=leftPanel.toolPanel.get("currentTool"),this._detachAnalysisToolListeners(),this._attachAnalysisToolListeners());this.deactivate()},open:function(){this._iframe.contentWindow.postMessage(JSON.stringify({action:"reset",itemId:this.item?this.item.id:null}),"*");this.inherited(arguments);
this._sendMapInfo();this.activate()},close:function(p){this.inherited(arguments);this.item=void 0;this._iframe.contentWindow.postMessage(JSON.stringify({action:"close"}),"*");this._detachAnalysisToolListeners();p&&this.applyRFxTool&&this.applyRFxTool._onClose(!0);setTimeout(d.hitch(this,this._attachAnalysisToolListeners),0)},_sendMapInfo:function(){var p=[],l=[];arcgisonline.map.main&&arcgisonline.map.main.mapLayers&&0<arcgisonline.map.main.mapLayers.length&&b.forEach(arcgisonline.map.main.mapLayers,
function(k){var r=k.layer,w=r&&r.url;r&&(w&&-1<w.toLowerCase().indexOf("/imageserver")?p.push({id:r.id,name:r.name||k.title,url:w,renderingRule:r.renderingRule&&r.renderingRule.toJson(),mosaicRule:r.mosaicRule&&r.mosaicRule.toJson()}):"esri.layers.FeatureLayer"===r.declaredClass&&l.push({id:r.id,name:r.name,url:w}))});var n=arcgisonline.map.main&&arcgisonline.map.main.map&&arcgisonline.map.main.map.extent;this._iframe.contentWindow.postMessage(JSON.stringify({action:"info",layers:{imageService:p,
feature:l},extent:n&&n.toJson()}),"*")},_closeLoadingDialog:function(){this._loadingDialog&&this._loadingDialog.hide()},_showLoadingDialog:function(){this._loadingDialog||(this._loadingDialog=new t({title:v.common.loading,content:"\x3cdiv\x3e\x3cdiv\x3e"+v.common.loadingRFxEditor+"\x3c/div\x3e\x3cdiv class\x3d'throb-loading'\x3e\x3c/div\x3e\x3c/div\x3e"}));this._loadingDialog.show()},_detachAnalysisToolListeners:function(){this.applyRFxTool&&this._analysisHandles&&b.forEach(this._analysisHandles,
function(p){p&&p.remove&&p.remove()},this)},_attachAnalysisToolListeners:function(){this.applyRFxTool&&(this._analysisHandles=[],this._analysisHandles.push(this.applyRFxTool.on("close",d.hitch(this,this.close,!1))),this._analysisHandles.push(this.applyRFxTool.on("start",d.hitch(this,this.close,!1))))},_setParentAttr:function(p){p!==this.parent&&(this.parent=p,this.applyRFxTool=null)},_setItemAttr:function(p){this.item=p},_attachListeners:function(){window.addEventListener("message",d.hitch(this,function(p){if(p.source&&
p.source===this._iframe.contentWindow){p=p.data;try{p=JSON.parse(p);"close"===p.action&&this.close(!0);if("loaded"===p.action)this.onLoad();"run"===p.action&&this.run(p.rft)}catch(l){}}}),!1);this.own(f(this._passiveOverlay,"click",d.hitch(this,this.activate)),f(this._closeBtn,"click",d.hitch(this,this.close)),c.subscribe("onLayerUpdate",this._sendMapInfo.bind(this)),c.subscribe("_onRendererUpdate",this._sendMapInfo.bind(this)),c.subscribe("onMosaicRuleApply",this._sendMapInfo.bind(this)),c.subscribe("onMosaicRuleReset",
this._sendMapInfo.bind(this)))}})})},"arcgisonline/pages/components/RestoreItems":function(){define("require exports tslib preact dojo/i18n!../../nls/arcgisonline preact/hooks ../utils/timeout ../dijit/ChangeOwner/FolderPicker ../components/DeleteMembers/api ./SummarizedItems ../utils/storage ../utils/recycle".split(" "),function(S,J,f,c,h,d,b,a,e,q,t,u){function g(v){var p=this,l=v.items,n=v.user;v=(0,d.useState)(!0);var k=v[0],r=v[1],w=(0,d.useRef)({restorableItems:[],sourceItems:[],unrestorableItems:[]});
(0,d.useEffect)(function(){n&&(r(!0),function(){return f.__awaiter(p,void 0,void 0,function(){var x,D,G,F=this;return f.__generator(this,function(A){switch(A.label){case 0:return x=function(){return f.__awaiter(F,void 0,void 0,function(){var y,z,B,C;return f.__generator(this,function(H){switch(H.label){case 0:return[4,(0,u.getRestorableItems)(l,n)];case 1:return y=H.sent(),z=y.restorableItems,B=y.sourceItems,C=y.unrestorableItems,[2,f.__assign(f.__assign({},w.current),{restorableItems:z,sourceItems:B,
unrestorableItems:C})]}})})},D=function(){return f.__awaiter(F,void 0,void 0,function(){var y;return f.__generator(this,function(z){switch(z.label){case 0:return y=[f.__assign({},w.current)],[4,x()];case 1:return[2,f.__assign.apply(void 0,y.concat([z.sent()]))]}})})},G=w,[4,D()];case 1:return G.current=A.sent(),r(!1),[2]}})})}())},[l,n]);return{isLoading:k,itemsStatus:w.current}}var m=this;Object.defineProperty(J,"__esModule",{value:!0});J.RestoreItems=J.MAX_BULK_RESTORE_ITEMS_COUNT=void 0;h=f.__importDefault(h);
a=f.__importDefault(a);t=f.__importDefault(t);J.MAX_BULK_RESTORE_ITEMS_COUNT=20;J.RestoreItems=function(v){function p(la){if(z)return z;la=new a.default({portal:k,user:la,initialFolderId:Y},R.current);la.on("cancel",function(){H(!1)});la.on("selectUpdate",function(ta){K(ta);H(!1)});B(la);return la}var l,n=v.items,k=v.portal,r=v.onCancel,w=v.onSubmit,x=(0,d.useState)(!1);v=x[0];var D=x[1],G=(0,d.useState)(!1);x=G[0];var F=G[1];G=(0,d.useState)(null);var A=G[0],y=G[1];G=(0,d.useState)();var z=G[0],
B=G[1];G=(0,d.useState)(!1);var C=G[0],H=G[1];G=(0,d.useState)(null);var E=G[0],K=G[1],I=g({items:n,user:A});G=I.isLoading;I=I.itemsStatus;var L=I.restorableItems,M=I.sourceItems,N=I.unrestorableItems,P=f.__spreadArray(f.__spreadArray([],L,!0),M,!0),R=(0,d.useRef)(null),Y=null===(l=t.default.getCookie("ESRI_Content",!0))||void 0===l?void 0:l.defaultRestoreFolderId;l=x||G;var ja=n.length>J.MAX_BULK_RESTORE_ITEMS_COUNT,aa=n.every(function(la){return la.owner===n[0].owner}),da=0>=P.length;x=!ja&&aa&&
0<P.length;(0,d.useEffect)(function(){D(!0)},[]);(0,d.useEffect)(function(){(function(){return f.__awaiter(m,void 0,void 0,function(){var la,ta,Q;return f.__generator(this,function(T){switch(T.label){case 0:return[4,(0,e.getUser)(n[0].owner,k)];case 1:return la=T.sent(),[4,la.getFolders()];case 2:return T.sent(),y(la),ta={username:la.username,id:la.username,title:la.username},la.id===k.portalUser.id?K(null!==(Q=la.folders.find(function(O){return O.id===Y}))&&void 0!==Q?Q:ta):K(ta),[2]}})})})()},[n]);
(0,d.useEffect)(function(){C&&!z&&p(A).updateUser(A)},[C]);var ra=h.default;I=function(){if(aa){if(ja)return(0,c.h)("span",null,ra.recycle.restore.cannotBulkRestoreXItems.replace("${number}",J.MAX_BULK_RESTORE_ITEMS_COUNT));if(da)return ca()}else return(0,c.h)("span",null,ra.recycle.restore.cannotBulkRestoreMultipleOwners)};var ca=function(){var la,ta=N.filter(function(Q){var T,O;return 0<(null===(O=null===(T=Q.error)||void 0===T?void 0:T.offendingItems)||void 0===O?void 0:O.length)}).map(function(Q){return Q.error.offendingItems})[0];
return(0,c.h)(c.Fragment,null,(0,c.h)(q.SummarizedItems,{id:"cannot-restore-summary",itemSummary:[{itemGroup:N}],title:ra.recycle.restore.cannotRestore,description:1<N.length&&ra.recycle.restore.dependentItems.multiple,htmlDescription:1===N.length&&ra.recycle.restore.dependentItems.single.replace("${parent}",null!==(la=null===ta||void 0===ta?void 0:ta[0].title)&&void 0!==la?la:""),disableLinks:!0}),0<P.length&&(0,c.h)("hr",{class:"leader-half trailer-0"}))},fa=function(){return(0,c.h)(c.Fragment,
null,(0,c.h)("div",{class:"content-folder__input-container margin-top-1"},(0,c.h)("div",{class:"".concat(C?"hide":"")},(0,c.h)("span",{class:"summarized-items__label"},ra.recycle.restore.restoreTo),(0,c.h)("div",{class:"panel panel-white flex flex-align-center selected-folder-tile mt-2",tabIndex:0,onClick:function(){H(!0)},onKeyDown:function(la){["Space","Enter"].includes(la.code)&&H(!0)},role:"button"},(0,c.h)("calcite-icon",{icon:"".concat((null===E||void 0===E?void 0:E.id)===(null===A||void 0===
A?void 0:A.username)?"home":"folder"),scale:"s"}),(0,c.h)("div",{class:"flex-1 flex flex-column margin-left-half break-word"},(0,c.h)("span",{class:"trailer-0 summarized-items__label"},null===E||void 0===E?void 0:E.title)),(0,c.h)("calcite-icon",{icon:"pencil",scale:"s"})))),(0,c.h)("div",{class:"".concat(C?"":"hide")},(0,c.h)("div",{ref:R})))};return(0,c.h)("calcite-modal",{open:v,width:"s",oncalciteModalClose:function(){return r()}},(0,c.h)("h3",{slot:"header",class:"font-size-2 trailer-0"},G?"":
1<n.length?ra.recycle.restore.restoreItems:ra.recycle.restore.restoreItem),(0,c.h)("div",{slot:"content",class:"summarized-items__modal"},l&&(0,c.h)("calcite-scrim",{loading:!0}),(0,c.h)("div",{class:"".concat(C?"restore-modal__folder-picker":"")},(0,c.h)("div",{class:"flex-column"},!l&&(x?(0,c.h)(c.Fragment,null,0<N.length&&!C&&ca(),!C&&(0,c.h)(q.SummarizedItems,{id:"restore-summary",itemSummary:[{itemGroup:P}],title:1<P.length?ra.recycle.restore.toRestore.multiple:ra.recycle.restore.toRestore.single,
disableLinks:!0}),fa(),!C&&(0,c.h)("calcite-notice",{open:!0,class:"leader-1"},(0,c.h)("div",{slot:"message"},ra.recycle.restore.noticeMessage))):I())))),(0,c.h)("calcite-button",{slot:"secondary",width:"full",appearance:"outline",kind:"brand",onClick:function(){return f.__awaiter(m,void 0,void 0,function(){return f.__generator(this,function(la){switch(la.label){case 0:return[4,(0,b.timeout)(50)];case 1:return la.sent(),D(!1),[2]}})})}},ra.common.cancel),x&&(0,c.h)("calcite-button",{slot:"primary",
width:"full",kind:"brand",appearance:"solid",disabled:C,onClick:function(){F(!0);w(M,L,E)}},ra.recycle.restore.restore))}})},"arcgisonline/pages/components/SearchFeedback":function(){define("require exports tslib preact dojo/i18n!../../nls/arcgisonline preact/hooks".split(" "),function(S,J,f,c,h,d){Object.defineProperty(J,"__esModule",{value:!0});J.SearchFeedback=void 0;h=f.__importDefault(h);J.SearchFeedback=function(b){var a=b.telemetry,e=b.searchTerm,q=b.page,t=b.onlyOrg,u=b.section,g=b.enriched,
m=b.onSubmit,v=(0,d.useState)(1);b=v[0];var p=v[1];v=(0,d.useState)({dontSee:!1,irrelevant:!1,filters:!1,notEnoughInfo:!1});var l=v[0],n=v[1];t="".concat(u," ").concat(t?"org only":"all");u=(0,d.useState)("");var k=u[0],r=u[1],w={category:"search result page feedback ".concat(1===b?"1":"2"),pageName:t,statusCode:g?"enriched":"not enriched",pageUrl:window.location.href,number:Math.ceil(q.start/q.num),searchquery:e};return(0,c.h)("div",null,1===b&&(0,c.h)("div",{class:"leader-1 trailer-1 panel panel-white padding-leader-1 padding-trailer-1 padding-left-1 padding-right-1 flex flex-center"},
(0,c.h)("div",{class:"flex-1"},(0,c.h)("h4",{class:"font-size-0 text-black avenir-demi trailer-quarter"},h.default.searchFeedback.areTheseResultsHelpful),(0,c.h)("p",{class:"text-off-black font-size--2 trailer-0"},h.default.searchFeedback.helpUsImprove)),(0,c.h)("calcite-button",{"icon-start":"thumbs-up",appearance:"outline",class:"padding-left-1",onClick:function(){a.logEvent(f.__assign(f.__assign({},w),{label:"yes"}));p(3);m()}},h.default.searchFeedback.helpful),(0,c.h)("calcite-button",{appearance:"outline",
"icon-start":"thumbs-down",class:"padding-left-1",onClick:function(){a.logEvent(f.__assign(f.__assign({},w),{label:"no"}));p(2)}},h.default.searchFeedback.notHelpful)),2===b&&(0,c.h)("div",{class:"trailer-1 panel panel-white padding-leader-1 padding-trailer-1 padding-left-1 padding-right-1"},(0,c.h)("h4",{class:"font-size-0 text-black avenir-demi trailer-0"},h.default.searchFeedback.whatMakes),(0,c.h)("p",{class:"text-off-black font-size--2 trailer-half"},h.default.searchFeedback.selectAllThatApply),
Object.keys(l).map(function(x){return(0,c.h)("calcite-chip",{class:"margin-right-half trailer-half",value:x,appearance:l[x]?"solid":"outline",kind:l[x]?"brand":"neutral",onClick:function(){var D;n(f.__assign(f.__assign({},l),(D={},D[x]=!l[x],D)))}},h.default.searchFeedback[x])}),(0,c.h)("div",{class:"leader-1"},(0,c.h)("calcite-label",null,(0,c.h)("span",{class:"display-block padding-trailer-half"},h.default.searchFeedback.tellUsMore),(0,c.h)("calcite-input",{type:"textarea",maxLength:250,oncalciteInputInput:function(x){return r(x.target.value)}})),
(0,c.h)("div",{class:"flex flex-end trailer-1"},(0,c.h)("span",{class:"font-size--2 text-darker-gray"},k.length," / ",250))),(0,c.h)("div",{class:"flex flex-end"},(0,c.h)("calcite-button",{appearance:"outline",kind:"brand",onClick:function(){p(3);m()},class:"margin-right-quarter"},h.default.searchFeedback.close),(0,c.h)("calcite-button",{appearance:"solid",kind:"brand",onClick:function(){p(3);Object.keys(l).filter(function(x){return l[x]}).forEach(function(x){a.logEvent(f.__assign(f.__assign({},w),
{label:x}))});k&&a.logEvent(f.__assign(f.__assign({},w),{details:k,label:"other"}));m()}},h.default.searchFeedback.sendFeedback))),3===b&&(0,c.h)("calcite-alert",{label:h.default.searchFeedback.thankYou,open:!0,kind:"success",icon:"check-circle",scale:"m"},(0,c.h)("div",{slot:"title"},h.default.searchFeedback.thankYou)))}})},"arcgisonline/pages/utils/search":function(){define(["require","exports","tslib","arcgisonline/esriGeowConfig"],function(S,J,f,c){Object.defineProperty(J,"__esModule",{value:!0});
J.separateFilterFromQuery=J.semanticSearchEnabled=void 0;c=f.__importDefault(c);J.semanticSearchEnabled=function(h,d){var b;return!!(c.default.semanticSearchEnabled&&(null===(b=null===h||void 0===h?void 0:h.portalProperties)||void 0===b?0:b.semanticSearchEnabled))||d&&!d.orgId};J.separateFilterFromQuery=function(h){var d=/(tags:".+?")/gi;d=null===h||void 0===h?void 0:h.match(d);null===d||void 0===d?void 0:d.forEach(function(b){h=h.replace(new RegExp(b),"")});return{q:h,filter:(null===d||void 0===
d?void 0:d.join(" "))||""}}})},"arcgisonline/pages/organization/widgets/MemberTableRow":function(){define("require exports tslib ../_OrganizationActions ./MemberActionLinks ./MemberRole ../../dijit/TableRow ../../dijit/_CheckReadonlyMixin ../../utils/formatters ../../utils/organization ../../../tsutils/declareDecorator dijit/_WidgetBase dijit/_TemplatedMixin arcgisonline/sharing/dijit/_LevelAwareMixin dojo/dom-attr dojo/dom-class dojo/on dojo/topic".split(" "),function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,
v,p,l,n){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);return function(){function k(r,w){this.lastLoginDate=q.default.lastLoginDate.bind(q.default);this.openActionsFor=q.default.openActionsFor.bind(q.default);
this.disabledClass=q.default.disabledStyle.bind(q.default);this.disabledLinkClass=q.default.disabledLinkClass.bind(q.default);this.disabledAllowEventsClass=q.default.disabledStyleAllowEvents.bind(q.default)}k.prototype.postCreate=function(){var r=this;this.lastLoginDate=q.default.lastLoginDate.bind(q.default);this.disabledClass=q.default.disabledStyle.bind(q.default);this.disabledLinkClass=q.default.disabledLinkClass.bind(q.default);this.disabledAllowEventsClass=q.default.disabledStyleAllowEvents.bind(q.default);
var w=document.createElement("arcgis-user-avatar");w.user=this.item;w.portal=this.item.portal;w.scale="l";this._orgMemberThumbnail.appendChild(w);this._actionLinks=new h.default({item:this.item,portalUser:this.portalUser},this._actionLinks);this._memberRole=new d.default({user:this.item,roles:this.item.portal.roles,viewerRole:this.item.portal.viewerRole},this._memberRole);this._mfaColumn.innerHTML=this.item.mfaImage;if(1>this.item.lastLogin||1E3===this.item.lastLogin)v.default.set(this._lastLoginInfo,
"aria-label",q.default.neverLoggedInLabel(this.item.lastLogin,e.default.fullDate(this.item.created))),p.default.add(this._lastLoginInfo,"tooltip tooltip-multiline");this.own((0,l.default)(this._actionLinks,"dropdown/escape",function(){r._actionsBtn.focus()}));3>this.itemIndex&&this._actionsContainer.classList.remove("dropdown-up");!this.item.hasMultipleAdminTypes&&this.item.isSelf&&this.portalUser.userRole.isAdmin()&&(this._userTypeColumn.classList.add("org-member-disable-link"),this._manageUserTypeLink.setAttribute("data-prevent-action",
"true"),this._manageUserTypeLink.setAttribute("tabindex","-1"));this.inherited(arguments);this.own(n.default.subscribe("member-action/focus",function(x){x.member.username===r.item.username&&(x.isDropdown?r._actionsBtn.focus():"userType"===x.action?r._manageUserTypeLink.focus():"credits"===x.action&&r._manageCredits.focus())}))};k.prototype.destroy=function(){this._memberRole&&this._memberRole.destroy();this.inherited(arguments)};k.prototype._handleAction=function(r){r.preventDefault();var w=r.target.getAttribute("data-action"),
x=r.target.getAttribute("data-prevent-action");if(w&&c.default[w]&&!x&&!this.memberActionGuard(w,this.item.portal))c.default[w]({evt:r,item:this.item,portal:this.item.portal,user:this.portalUser,page:this.item.page})};return k=f.__decorate([(0,t.default)(u.default,g.default,b.default,m.default,a.default)],k)}()})},"arcgisonline/pages/organization/widgets/MemberActionLinks":function(){define("require exports tslib arcgisonline/esriGeowConfig ../../utils/arrays ../../utils/dom ../../utils/organization ../../utils/subscription ../../components/MemberCategories/api arcgisonline/sharing/util ../../../tsutils/declareDecorator dijit/_WidgetBase dijit/_TemplatedMixin arcgisonline/sharing/dijit/_LevelAwareMixin dojo/dom-attr dojo/keys dojo/on dojo/query dojo/topic esri/Evented dojo/i18n!../../../nls/arcgisonline dojo/text!./templates/members/MemberActionLinks.html".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);return function(){function D(G,F){this.templateString=
x.default;this.userTypeArcGIS="arcgisonly";this.userTypeBoth="both";this.isAdmin=!1}D.prototype.postMixInProperties=function(){this.inherited(arguments);this.i18n=w.default};D.prototype.postCreate=function(){var G=this,F,A;this.inherited(arguments);var y=b.default.getUserRole(this.portalUser),z=y.isAdmin();this.isAdmin=z;this.userRole=y;var B="enabled"===this.item.portal.creditAssignments||"validate"===this.item.portal.creditAssignments,C=a.default.isDeveloperSubscription(null===(F=this.item.portal.subscriptionInfo)||
void 0===F?void 0:F.type,this.item.portal.isPortal);F=0>this.item.lastLogin;var H=y.isCustom(),E=H&&y.canUpdateUsers(),K=H&&y.canDeleteUsers(),I=H&&y.canDisableUsers(),L=H&&y.canViewUsers(),M=H&&y.canViewOrgGroups(),N=H&&y.canManageLicenses(),P=H&&y.canManageCredits()&&y.canUpdateUsers(),R=H&&y.canManageItems(),Y=H&&y.canReassignOrgItems(),ja=H&&y.canManageLicenses()&&y.canChangeUserRoles()&&y.canUpdateUsers();y=H&&y.canManageSecurity();var aa=q.default.getUser(),da=this.item.licenseType&&this.item.licenseType.supportsSignInOnlyFromUTApps;
aa=aa.username===this.item.username;var ra="enterprise"===this.item.provider||-1<(null===(A=this.item.provider)||void 0===A?void 0:A.indexOf("oidc"));A="org_admin"===this.item.role;C=(!this.item.portal.isPortal&&c.default.multiFactorEnabled||this.item.portal.isPortal&&this.item.portal.supportsEmail)&&!C&&this.item.mfaEnabled&&0<=this.item.lastLogin;this.i18n=w.default;this.checkCategories();z?(v.default.set(this._manageItems,"innerHTML",this.i18n.myOrganization.formatters.manageItems),!this.item.portal.isPortal&&
c.default.creditBudgetingEnabled&&B&&d.default.showNode(this._manageCredits),C&&d.default.showNode(this._disableMfa),aa||ra||(!this.item.portal.isPortal&&F?d.default.showNode(this._resetPassword):this.item.idpUsername?0===this.item.idpUsername.length&&d.default.showNode(this._resetPassword):d.default.showNode(this._resetPassword)),d.default.showHide(this._manageLicenses,!da),d.default.showNode(this._manageLicenseType),d.default.showNode(this._transferContent),(!z||aa&&!this.item.hasMultipleAdminTypes)&&
d.default.hideNode(this._manageLicenseType),this.item.portal.isPortal||(this.item.userType===this.userTypeBoth?d.default.showNode(this._disableEsri):d.default.showNode(this._enableEsri)),aa||F||(this.item.disabled?d.default.showNode(this._enableMember):d.default.showNode(this._disableMember)),aa||d.default.showNode(this._deleteMember),(!this.item.provider||"enterprise"!==this.item.provider&&-1===this.item.provider.indexOf("oidc"))&&d.default.showNode(this.editEmailButton)):H?(!E||aa||ra||A||d.default.showNode(this._resetPassword),
!this.item.portal.isPortal&&K&&F?(d.default.hideNode(this._viewProfile),R?v.default.set(this._manageItems,"innerHTML",this.i18n.myOrganization.formatters.manageItems):d.default.hideNode(this._manageItems),L&&M||d.default.hideNode(this._viewGroups)):R?v.default.set(this._manageItems,"innerHTML",this.i18n.myOrganization.formatters.manageItems):v.default.set(this._manageItems,"innerHTML",this.i18n.myOrganization.formatters.viewItems),P&&!this.item.portal.isPortal&&c.default.creditBudgetingEnabled&&B&&
d.default.showNode(this._manageCredits),N&&!da&&d.default.showNode(this._manageLicenses),ja&&d.default.showNode(this._manageLicenseType),K&&"account_admin"!==this.item.role&&"org_admin"!==this.item.role&&!aa&&d.default.showNode(this._deleteMember),Y&&d.default.showNode(this._transferContent),!I||"account_admin"===this.item.role||"org_admin"===this.item.role||aa||F||(this.item.disabled?d.default.showNode(this._enableMember):d.default.showNode(this._disableMember)),C&&y&&d.default.showNode(this._disableMfa)):
v.default.set(this._manageItems,"innerHTML",this.i18n.myOrganization.formatters.viewItems);h.default.includes([this.LICENSE_LEVELS.ONE,this.LICENSE_LEVELS.ONE_PLUS_EDIT],this.item.level)&&d.default.hideNode(this._manageItems);this.own((0,l.default)(this._linksContainer,"keyup",function(ca){switch(ca.keyCode){case p.default.ESCAPE:G.emit("dropdown/escape")}}),(0,n.default)(".js-action",this.domNode).on("mouseover",function(ca){var fa;null===(fa=ca.target)||void 0===fa?void 0:fa.focus()}))};D.prototype.checkCategories=
function(){return f.__awaiter(this,void 0,void 0,function(){var G,F,A=this;return f.__generator(this,function(y){switch(y.label){case 0:return[4,(0,e.getMemberCategories)()];case 1:return G=y.sent(),F=this.isAdmin||this.userRole.canUpdateUsers(),G.length&&F&&d.default.showNode(this.categorizeButton),this.own(k.default.subscribe("member-categories-and-count/update",function(z){d.default.showHide(A.categorizeButton,!!z.categories.length&&F)})),[2]}})})};return D=f.__decorate([(0,t.default)(u.default,
g.default,m.default,r.default)],D)}()})},"arcgisonline/pages/organization/widgets/MemberRole":function(){define("require exports tslib ../../../esriGeowConfig ../../../sharing/util ../../utils/alerts ../../utils/organization ../../utils/dom ../../dijit/InfoTooltip ../../../tsutils/declareDecorator ../../../sharing/geow/Account ../../../sharing/geow/Roles ../../dijit/_CheckReadonlyMixin ../../../sharing/dijit/_LevelAwareMixin dojo/string dojo/on dojo/topic dijit/_WidgetBase dijit/_TemplatedMixin dojo/i18n!../../../nls/arcgisonline dojo/text!./templates/members/MemberRole.html".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);return function(){function x(D,G){this.templateString=
w.default;this.hidePlaceholder=!1}x.prototype.postCreate=function(){var D=this,G,F,A,y,z=-1<(null===(G=c.default.self.contacts)||void 0===G?void 0:G.indexOf(this.user.username));this._rolesAPI=new u.default;this.hidePlaceholder&&a.default.hideNode(this.domNode.querySelector(".js-info-tooltip"));G=null===(F=c.default.userRole)||void 0===F?void 0:F.isAdmin();F=(null===(A=c.default.userRole)||void 0===A?void 0:A.isCustom())&&c.default.userRole.canChangeUserRoles();var B=h.default.getUser();if(G||F){A=
this.user.level;var C=A===this.LICENSE_LEVELS.TWO;b.default.canSupportAdminRoles(this.user.licenseType)||(this.roles=this.roles.filter(function(E){return!b.default.isAdminRole(E)}));if(this.user.isCoordinator&&(this.roles=this.roles.filter(function(E){return"org_admin"===E.id||E.id===D.SYSTEM_ROLES.FACILITATOR}),!z)){var H=r.default.myOrganization.membersTab.coordinatorsWarning;this.createInfoTooltip(H.title,H.desc)}A=b.default.filterRoles(this.roles,this.viewerRole,C,A);"org_admin"!==this.user.role&&
F&&(A=A.filter(function(E){return"org_admin"!==E.role}));A=A.sort(function(E,K){return t.default.caseInsensitiveComparator(null===E||void 0===E?void 0:E.name,null===K||void 0===K?void 0:K.name)});B=B.username===this.user.username;G||F||(B=!0);"org_admin"===this.user.role&&F&&(B=!0);this.i18n=r.default;G=this.user.id;if("null"===this.user.id)for(F=0;32>F;F++)G+="abcdef0123456789".charAt(Math.floor(16*Math.random()));(null===(y=this.user.portal)||void 0===y?0:y.subscriptionInfo)&&"active"!==this.user.portal.subscriptionInfo.state&&
(B=!0);z&&(B=!0,y=this.i18n.myOrganization.membersTab.adminContactWarning,y=this.createInfoTooltip(y.title,v.default.substitute(y.desc,{linkStart:'\x3cbutton class\x3d"btn-link font-size-0 js-contacts-btn"\x3e',linkEnd:"\x3c/button\x3e"})).getPopover().querySelector(".js-contacts-btn"),this.own((0,p.default)(y,"click",function(){l.default.publish("admin-contacts/open")})));this._roleSelect=document.createElement("select");this._roleSelect.id="userRole_".concat(G);this._roleSelect.setAttribute("aria-label",
r.default.myOrganization.currentGrid.role);this._roleSelect.disabled=B;this._roleSelect.title=this.user.roleLabel;A.forEach(function(E){var K=document.createElement("option");K.value=E.role;K.textContent=E.name;K.selected=D.user.roleId?E.role===D.user.roleId:E.role===D.user.role;D._roleSelect.options.add(K)});this.roleContainer.replaceChildren(this._roleSelect);this.own((0,p.default)(this._roleSelect,"change",this._onRoleChange.bind(this,this.user.username)))}this.own(l.default.subscribe("role/focus",
function(E){E.username===D.user.username&&setTimeout(function(){D._roleSelect&&D._roleSelect.focus()},100)}))};x.prototype._onRoleChange=function(D,G){var F=this,A,y,z,B,C,H=null===(A=G.target.selectedOptions)||void 0===A?void 0:A[0].textContent;G=function(P){var R=function(ja,aa){var da=u.default.extraLevelOnePrivileges;if(null===aa||void 0===aa?0:aa.length)da=da.concat(aa);F._rolesAPI.containsPrivilegesOutsideRole(F.SYSTEM_ROLES.VIEWER,ja,da).then(function(ra){ra&&d.default.showAlert("error",r.default.myOrganization.userRoleFilterWarning)})},
Y=function(ja){R(ja,["features:user:edit"])};K(P)||(E.call(F),l.default.publish("role/change-success"),N&&M===F.LICENSE_LEVELS.ONE?R.call(F,I):N&&M===F.LICENSE_LEVELS.ONE_PLUS_EDIT&&Y.call(F,I))};A=function(P){K(P);F.checkReadonly(F.user.portal);E.call(F)};var E=function(){F._roleSelect.disabled=!0;l.default.publish("role/change",{user:F.user})},K=function(P){[{messageCode:"ORG_1052",template:r.default.myOrganization.securityTab.needTwoAdminRoleMsg},{messageCode:"COM_1072",template:r.default.myOrganization.userWithUpdateControlError},
{messageCode:"ORG_0026",template:r.default.myOrganization.userRoleLevelError},{messageCode:"ORG_1045",template:r.default.myOrganization.changeToViewerDataError},{messageCode:"COM_10722",template:r.default.myOrganization.userRoleNoLeaveGroupsError},{messageCode:"COM_10721",template:r.default.myOrganization.userRoleHiddenMembersError},{messageCode:"GWM_0021",template:P.message}].some(function(aa){var da=(null===P||void 0===P?void 0:P.messageCode)&&P.messageCode===aa.messageCode;da&&(ja="GWM_0021"===
aa.messageCode?aa.template:v.default.substitute(aa.template,{user:D}));return da});if(!ja&&(null===P||void 0===P?0:P.messageCode)){var R=r.default.myOrganization.manageLicenseTypes,Y=R.updateRoleError;R=R.updateRoleSharedUpdateError;var ja="COM_10724"===P.messageCode?R:Y}ja&&d.default.showAlert("error",ja);return ja},I=this.roles.filter(function(P){return P.name===H}).shift(),L=!(null===(z=null===(y=c.default.userRole)||void 0===y?void 0:y.isAdmin)||void 0===z||!z.call(y));y=!(null===(C=null===(B=
c.default.userRole)||void 0===B?void 0:B.canChangeUserRoles)||void 0===C||!C.call(B));var M=this.user.level||this.LICENSE_LEVELS.TWO,N=function(P){var R=r.default.myOrganization.formatters;return P!==R.roleViewer&&P!==R.roleUser&&P!==R.rolePublisher&&P!==R.roleAdmin}(H);B=null===I||void 0===I?void 0:I.id;!L&&y&&B&&"org_admin"===B?(d.default.showAlert("error",v.default.substitute(r.default.myOrganization.cantAssignAdminRole,{username:D})),this._roleSelect.value=this.user.roleId||this.user.role):B&&
t.default.updateUserRole(D,B,G.bind(this),A.bind(this))};x.prototype.createInfoTooltip=function(D,G){return new e.default({title:D,content:G,orient:["below-centered","above-centered"],buttonClasses:"margin-right-half",popoverClass:"member-role__info-popover"},this.domNode.querySelector(".js-info-tooltip"))};x.prototype.enable=function(){this._roleSelect.disabled=!1};return x=f.__decorate([(0,q.default)(n.default,k.default,m.default,g.default)],x)}()})},"arcgisonline/pages/organization/widgets/MemberCard":function(){define("require exports tslib dojo/_base/lang dojo/on dojo/dom-class dojo/dom-attr dojo/query dojo/topic dojo/Deferred dojo/string esri/Evented dijit/_WidgetBase dijit/_TemplatedMixin dijit/a11yclick arcgisonline/esriGeowConfig arcgisonline/sharing/dijit/_LevelAwareMixin ../../../sharing/util ../../utils/dom ../../utils/formatters ../../utils/icons ../../utils/organization calcite-web/js/calcite-web ../_OrganizationActions ./MemberActionLinks ./MemberRole ../../dijit/MemberThumb ./GroupIcon ../../dijit/_CheckReadonlyMixin ../../../tsutils/declareDecorator dojo/i18n!../../../nls/arcgisonline dojo/text!./templates/members/MemberCard.html".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);
D=f.__importDefault(D);G=f.__importDefault(G);F=f.__importDefault(F);A=f.__importDefault(A);y=f.__importDefault(y);z=f.__importDefault(z);B=f.__importDefault(B);C=f.__importDefault(C);H=f.__importDefault(H);E=f.__importDefault(E);return function(){function K(){this.templateString=E.default;this.i18n=H.default;this.lastLoginDate=x.default.lastLoginDate.bind(x.default);this.openActionsFor=x.default.openActionsFor.bind(x.default);this.disabledClass=x.default.disabledStyle.bind(x.default);this.disabledLinkClass=
x.default.disabledLinkClass.bind(x.default);this.disabledAllowEventsClass=x.default.disabledStyleAllowEvents.bind(x.default);this.hide=r.default.hide;this.show=r.default.show;this.icons=w.default;this.recordSelection=!1}K.prototype.postMixInProperties=function(){this.inherited(arguments);this.selectCardClass=this.select?"card-select":"";this.selectedClass=this.isSelected?"card-select-active":"";this.checked=this.isSelected?"checked":"";this.selectItem=this.isSelected?H.default.myOrganization.membersTab.unselectMember:
H.default.myOrganization.membersTab.selectMember;this.removedClass=this.isRemoved?"card-select-removed":"";this._mfaIconUrl=n.default.relativeToExplicitUrl("js/arcgisonline/sharing/dijit/css/images/mobile.svg");this._mfaEnabledText=this.i18n.myOrganization.securityTab.multiFactorAuth+" "+this.i18n.common.enabledLabel};K.prototype.postCreate=function(){this.inherited(arguments);var I={user:this.item,roles:this.item.portal.roles,viewerRole:this.item.portal.viewerRole,hidePlaceholder:!0},L=0===this.item.lastLogin||
-1===this.item.lastLogin?this.i18n.myOrganization.membersTab.hasNotLoggedIn:t.default.substitute(this.i18n.myOrganization.membersTab.lastLoggedIn,{lastLoginLabel:x.default.lastLoginDate(this.item.lastLogin).toLowerCase()});this.userRole=x.default.getUserRole(this.portalUser);this._isAdmin=this.userRole.isAdmin();this._canSelect=x.default.canSelectMembers(this.portalUser);this._actionLinks=new F.default({item:this.item,portalUser:this.portalUser},this._actionLinks);3>this.itemIndex&&this._actionsContainer.classList.remove("dropdown-up");
this._isAdmin||this.userRole.isCustom()&&(this.userRole.canViewUsers()||this.userRole.canChangeUserRoles())?this._memberRole=new A.default(I,this._memberRole):k.default.hideNode(this.roleColumn);this._canSelect||this._rightContent.classList.remove("margin-left-2");this._addEventListeners();this.item.mfaEnabled&&this.portal.mfaEnabled&&this._isAdmin&&k.default.showNode(this._mfaIcon);this._memberThumb=new y.default({member:this.item,cssClasses:"member-thumb--small margin-right-1"},this._orgMemberThumbnail);
this._lastLoginSpan.innerHTML=L;b.default.set(this._lastLoginSpan,"aria-label",L);if(1>this.item.lastLogin||1E3===this.item.lastLogin)b.default.set(this._lastLoginSpan,"aria-label",x.default.neverLoggedInLabel(this.item.lastLogin,r.default.fullDate(this.item.created))),d.default.add(this._lastLoginSpan,"tooltip tooltip-multiline");I=this.userRole.isCustom();L=this.userRole;I=this._isAdmin||I&&L.canManageLicenses()&&L.canChangeUserRoles()&&L.canUpdateUsers();k.default.showHide(this.userTypeColumn,
I)};K.prototype.destroy=function(){var I,L,M,N,P,R;null===(L=null===(I=this._popup)||void 0===I?void 0:I.destroy)||void 0===L?void 0:L.call(I);null===(N=null===(M=this._memberRole)||void 0===M?void 0:M.destroy)||void 0===N?void 0:N.call(M);null===(R=null===(P=this._nonAdminMemberRole)||void 0===P?void 0:P.destroy)||void 0===R?void 0:R.call(P);this._licenseDfd&&!this._licenseDfd.isFulfilled()&&this._licenseDfd.cancel();this.inherited(arguments)};K.prototype._addEventListeners=function(){var I=this;
this.own((0,h.default)(this._checkboxWrap,"click",function(L){L.stopPropagation()}),(0,h.default)(this._checkboxBtn,"change",function(L){I[L.target.checked?"_select":"_deselect"]()}),(0,h.default)(this.domNode,"click",this._toggleSelected.bind(this)),(0,h.default)(this._actionLinks,"dropdown/escape",function(){I._actionsBtn.focus()}),(0,a.default)(".js-action",this.domNode).on("click",this._handleAction.bind(this)),e.default.subscribe("view/deselectAll",this._deselect.bind(this)),e.default.subscribe("tabs/enable",
this._adjustUI.bind(this)),e.default.subscribe("view/show",this._adjustUI.bind(this)),e.default.subscribe("page/show",this._adjustUI.bind(this)),e.default.subscribe("window/resize",this._adjustUI.bind(this)),e.default.subscribe("view/items/"+this.item.id+"/deselect",this._deselect.bind(this)),e.default.subscribe("control-bar/filters-toggle",function(){setTimeout(function(){I._adjustUI.call(I)},250)}),e.default.subscribe("member-action/focus",function(L){L.member.username===I.item.username&&(L.isDropdown?
I._actionsBtn.focus():"userType"===L.action?I._manageUserTypeLink.focus():"credits"===L.action?I._manageCredits.focus():I._licensesIcons.focus())}),(0,v.default)(this._groupIcons,this._handleGroupsClick.bind(this)),(0,v.default)(this._licensesIcons,this._handleLicensesClick.bind(this)))};K.prototype._handleGroupsClick=function(){var I=p.default.baseUrl+"groups.html";this.item.username!==n.default.getUser().username&&(I+="?user\x3d"+this.item.username);location.href=I};K.prototype._handleLicensesClick=
function(I){I.stopPropagation();this.checkReadonly()||G.default.manageLicenses(c.default.mixin({},{evt:I,item:this.item,portal:this.item.portal,user:this.portalUser,page:this.item.page}))};K.prototype._handleAction=function(I){I.preventDefault();I.stopPropagation();D.default.bus.emit("dropdown:close");var L=(0,a.default)(I.target).closest(".js-action").shift().dataset.action;if(L&&G.default[L]&&!this.memberActionGuard(L))G.default[L]({evt:I,item:this.item,portal:this.item.portal,user:this.portalUser,
page:this.item.page})};K.prototype._adjustUI=function(){var I=this._isAdmin||this.userRole.isCustom()&&this.userRole.canManageLicenses(),L=this._isAdmin||this.userRole.isCustom()&&this.userRole.canViewOrgGroups()&&this.userRole.canViewUsers();I?this._generateLicensesHTML():k.default.hideNode(this.licensesColumn);L?this._generateGroupsHTML():k.default.hideNode(this.groupsColumn)};K.prototype._toggleSelected=function(I){if(this.select)this[d.default.contains(this.domNode,"card-select-active")?"_deselect":
"_select"]()};K.prototype._select=function(){var I;this._canSelect&&!this.domNode.classList.contains("org-member-card--disable-select")&&(d.default.add(this.domNode,"card-select-active"),this.item.isSelected=!0,b.default.set(this._checkboxBtn.parentNode,"aria-label",H.default.GroupWidget.unselectItem),this._checkboxBtn.checked=!0,this.recordSelection&&(null===(I=this.telemetry)||void 0===I?void 0:I.logEvent({category:"Select",action:"Select row",count:1})),e.default.publish("view/select",this.item))};
K.prototype._deselect=function(){var I;this._canSelect&&!this.domNode.classList.contains("org-member-card--disable-select")&&(d.default.remove(this.domNode,"card-select-active"),this.item.isSelected=!1,b.default.set(this._checkboxBtn.parentNode,"aria-label",H.default.GroupWidget.selectItem),this._checkboxBtn.checked=!1,this.recordSelection&&(null===(I=this.telemetry)||void 0===I?void 0:I.logEvent({category:"Select",action:"Unselect row",count:1})),e.default.publish("view/deselect",this.item))};K.prototype._generateTilesToFit=
function(I,L,M,N,P,R){var Y=I.clientWidth,ja=Y-44,aa=0;I.innerHTML="";R||(R=L.length);0!==Y&&(32<ja&&(aa=Math.floor(ja/32),P&&aa>P&&(aa=P)),0<R?(P=R-aa,0<aa&&L.some(function(da,ra){da=N(da);I.appendChild(da);return ra>=aa-1}),0<P&&(L=aa?"+".concat(P):"".concat(P),P=document.createElement("div"),P.classList.add("org-member-card__more-tile"),P.classList.add("link-darker-gray"),0<M.length&&(P.classList.add("tooltip"),P.setAttribute("aria-label",M)),P.textContent=L,I.appendChild(P))):I.innerHTML='\x3cspan class\x3d"org-member-card__no-icons-label"\x3e'+
M+"\x3c/span\x3e")};K.prototype._createLicenseTile=function(I){var L='\x3cimg src\x3d"'+I.imagePath+'" alt\x3d""\x3e';I.showAbbr&&(L+='\x3cdiv class\x3d"org-member-card__license-abbr"\x3e'+I.abbr+"\x3c/div\x3e");var M=document.createElement("div");M.classList.add("org-member-card__license-icon");M.classList.add("tooltip");I.shapeClass&&M.classList.add(I.shapeClass);M.setAttribute("aria-label",I.title);M.innerHTML=L;return M};K.prototype._createGroupTile=function(I){return(new z.default({portal:this.portal,
group:I,scale:"m"})).domNode};K.prototype._generateLicensesHTML=function(){var I=this;this._licenseDfd=new q.default;this.item.requestedLicenses?this._licenseDfd.resolve():n.default.request({url:"".concat(p.default.restBaseUrl,"community/users/").concat(this.item.username,"/provisionedListings")}).then(function(L){I.item.licenses=L.provisionedListings.map(function(M){var N=x.default.getAppIcon(M);N.title=M.title;return N});I.item.appBundles&&I.item.appBundles.forEach(function(M){var N=x.default.getAppIcon({title:M.name,
isAppBundle:!0});N.title=M.name;I.item.licenses.push(N)});I.item.licenses.sort(function(M,N){return M.isAppBundle&&!N.isAppBundle?-1:!M.isAppBundle&&N.isAppBundle?1:M.title>N.title?1:M.title<N.title?-1:0});I.item.requestedLicenses=!0;I._licenseDfd.resolve()});this._licenseDfd.then(function(){0<I.item.licenses.length?(I._licenseIconsWrapper.classList.add("icons-wrapper"),I._licensesIcons.classList.remove("tooltip"),I._licensesIcons.removeAttribute("arial-label")):(I._licenseIconsWrapper.classList.remove("icons-wrapper"),
I._licensesIcons.classList.add("tooltip"),I._licensesIcons.setAttribute("aria-label",H.default.myOrganization.membersTab.configureLicenses));I._generateTilesToFit(I._licensesContainer,I.item.licenses,H.default.myOrganization.membersTab.configureLicenses,I._createLicenseTile)})};K.prototype._generateGroupsHTML=function(){0<this.item.groups.length?(this._groupIconsWrapper.classList.add("icons-wrapper"),this._groupIcons.classList.remove("tooltip"),this._groupIcons.removeAttribute("arial-label")):(this._groupIconsWrapper.classList.remove("icons-wrapper"),
this._groupIcons.classList.add("tooltip"),this._groupIcons.setAttribute("aria-label",H.default.myOrganization.membersTab.configureGroups));this._generateTilesToFit(this._groupsContainer,this.item.groups,H.default.myOrganization.membersTab.configureGroups,this._createGroupTile.bind(this),5,this.item.totalGroups)};return K=f.__decorate([(0,C.default)(g.default,m.default,u.default,l.default,B.default)],K)}()})},"arcgisonline/pages/organization/widgets/MemberMobile":function(){define("require exports tslib ../../utils/formatters ../../utils/organization ../../utils/strings ../../../sharing/dijit/_LevelAwareMixin dijit/_WidgetBase dijit/_TemplatedMixin dijit/a11yclick esri/Evented dojo/i18n!../../../nls/arcgisonline dojo/text!./templates/members/MemberMobile.html ../../../tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);return function(){function v(p){this.templateString=g.default;this.i18n=u.default;this.lastLoginDate=h.default.lastLoginDate.bind(h.default);this.openActionsFor=h.default.openActionsFor.bind(h.default);this.disabledClass=
h.default.disabledStyle.bind(h.default);this.disabledLinkClass=h.default.disabledLinkClass.bind(h.default);this.disabledAllowEventsClass=h.default.disabledStyleAllowEvents.bind(h.default);this.hide=c.default.hide;this.show=c.default.show}v.prototype.postMixInProperties=function(){var p,l;this.inherited(arguments);var n=this.item.fullName.split(" ");this.item.initials="".concat(n[0].substring(0,1)).concat(null!==(l=null===(p=n[1])||void 0===p?void 0:p.substring(0,1))&&void 0!==l?l:"");this.item.backgroundColor=
this._getMemberFillColor(this.item)};v.prototype.postCreate=function(){this.inherited(arguments);var p=document.createElement("arcgis-user-avatar");p.scale="l";p.user=this.item;p.portal=this.item.portal;p.classList.add("margin-right-1");this.domNode.querySelector(".js-names").insertAdjacentElement("beforebegin",p);this._addEventListener()};v.prototype.destroy=function(){this.inherited(arguments)};v.prototype._addEventListener=function(){var p=this;this.own((0,q.default)(this.domNode,function(l){l.preventDefault();
l.stopPropagation();p.item.page.openMobileMemberPanel({item:p.item,portal:p.item.portal})}))};v.prototype._getMemberFillColor=function(p){var l=p.id?p.id.substr(p.id.length-6):"";d.default.isValidHex(l)||(l=d.default.stringToHex(p.username));p=d.default.hexToRgb(l);return"rgba(".concat(p.r,",").concat(p.g,",").concat(p.b,", 0.2)")};return v=f.__decorate([(0,m.default)(a.default,e.default,t.default,b.default)],v)}()})},"arcgisonline/pages/organization/widgets/AssignGroupsOverlay/AssignGroupsOverlay":function(){define("require exports tslib esri/request dojo/topic dojo/text!./AssignGroupsOverlay.html dojo/i18n!../../../../nls/arcgisonline dojo/string dijit/_TemplatedMixin dijit/_WidgetBase arcgisonline/pages/dijit/Overlay arcgisonline/pages/dijit/SelectedMembers arcgisonline/pages/utils/alerts arcgisonline/pages/utils/promises arcgisonline/pages/pageUtil arcgisonline/esriGeowConfig arcgis-components/wrappers/GroupBrowser arcgisonline/tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);n=f.__importDefault(n);return function(){function k(r,w){this.title=b.default.myOrganization.membersTab.assignGroupsOverlay.title;this.i18n=b.default;this.overlayContents=
a.default.substitute(d.default,{i18n:this.i18n});this.selectedGroups=[]}k.prototype.open=function(){this.inherited(arguments);this.init();new u.default({members:this.members},this.domNode.querySelector(".js-selected-members"))};k.prototype.close=function(){this.inherited(arguments);h.default.publish("manage-members/close")};k.prototype.handlePrimary=function(){this.addRemoveUsers()};k.prototype.showMessage=function(r,w){var x=this.i18n.batchAssignToGroupsDlg,D=x.assignmentSuccessful,G=x.oneGroupSomeUnsuccessful;
x=x.manyGroupsSomeUnsuccessful;var F="";0<r.length&&(F=1===this.selectedGroups.length?a.default.substitute(G,{group:this.selectedGroups[0].title,userList:r.join(",")}):a.default.substitute(x,{userList:r.join(",")}));0===r.length?(g.default.showAlert("success","".concat(D)),h.default.publish("members/refresh"),h.default.publish("items/refresh")):w?(g.default.showAlert("warning","\x3cp\x3e".concat(D,"\x3c/p\x3e\x3cp\x3e").concat(F,"\x3c/p\x3e")),h.default.publish("members/refresh"),h.default.publish("items/refresh")):
g.default.showAlert("error",F)};k.prototype.getAddUsersRequests=function(){var r=this;return this.selectedGroups.map(function(w){w="".concat(p.default.restBaseUrl,"community/groups/").concat(w.id,"/addUsers");return v.default.sendAllResources(w,25,r.members.map(function(x){return x.username}),function(x){return{users:x.join(", ")}},{timeout:18E4})})};k.prototype.init=function(){return f.__awaiter(this,void 0,void 0,function(){var r,w=this;return f.__generator(this,function(x){switch(x.label){case 0:this.domNode.classList.add("assign-group-members-overlay"),
x.label=1;case 1:return x.trys.push([1,3,,4]),[4,Promise.all(this.members.map(function(D){return w.getAllGroups(D.username)}))];case 2:return r=x.sent(),r.forEach(function(D,G){w.members[G].userGroups=D}),this.initGroupBrowser(),[3,4];case 3:return x.sent(),[3,4];case 4:return[2]}})})};k.prototype.shouldDisable=function(r){return"enterprise"===r.provider};k.prototype.getAllGroups=function(r){var w="".concat(p.default.restBaseUrl,"community/groups");return v.default.fetchAllResources(w,{num:100,searchUserAccess:"groupMember",
searchUserName:r})};k.prototype.initGroupBrowser=function(){var r={};this.members.forEach(function(D){D.userGroups.forEach(function(G){r[G.id]?r[G.id].selectedByIds.push(D.id):r[G.id]={group:G,selectedByIds:[D.id]}})});var w=this.i18n.batchAssignToGroupsDlg,x=w.enterpriseGroupDisabled;w=w.samlGroupDisabled;this.groupBrowser=new l.GroupBrowserWrapper(this.domNode.querySelector(".js-group-browser"),{apiVersion:3,portal:this.portal,portalUser:this.portal.portalUser,request:c.default,initialState:f.__assign(f.__assign({},
l.initialState),{config:f.__assign(f.__assign({},l.initialState.config),{enableFiltering:!0,baseQ:"orgid:".concat(this.portal.id,' AND (-owner:"esri_nav" -owner:"esri_boundaries" -owner:"esri_demographics" -owner:"esri_livingatlas")'),shareMode:"DEFAULT",disabledText:this.portal.isPortal?x:w,shouldDisable:this.shouldDisable}),groups:f.__assign(f.__assign({},l.initialState.groups),{selectorItems:this.members,selectedGroups:r}),parameters:f.__assign(f.__assign({},l.initialState.parameters),{filter:f.__assign(f.__assign({},
l.initialState.parameters.filter),{currentUsername:this.portal.portalUser.username})}),ui:f.__assign(f.__assign({},l.initialState.ui),{filter:{expanded:!0}}),utils:f.__assign(f.__assign({},l.initialState.utils),{portalUser:this.portal.portalUser})}),onChange:this.handleGroupChange.bind(this)})};k.prototype.determineAddRemove=function(){var r=this,w=this.groupBrowser.getState().groups.selectedGroups,x=[];Object.keys(w).forEach(function(F){F=w[F];var A=F.group;F.selectedByIds.length===r.members.length&&
x.push(A)});var D={},G={};this.members.forEach(function(F){x.forEach(function(A){F.userGroups.some(function(y){return y.id===A.id})||(D[A.id]||(D[A.id]=[]),D[A.id].push(F.username))});F.userGroups.forEach(function(A){Object.keys(w).some(function(y){return w[y].group.id===A.id})||(G[A.id]||(G[A.id]=[]),G[A.id].push(F.username))})});return{addRecords:D,removeRecords:G}};k.prototype.addRemoveUsers=function(){return f.__awaiter(this,void 0,void 0,function(){var r,w,x,D,G,F,A,y,z,B,C,H=this;return f.__generator(this,
function(E){switch(E.label){case 0:r=this.determineAddRemove();w=r.addRecords;x=r.removeRecords;D=Object.keys(w).some(function(K){return 0<w[K].length});G=Object.keys(x).some(function(K){return 0<x[K].length});if(!D&&!G)return this.close(),[2];F=Object.keys(w).map(function(K){return H.addRemoveRequests(K,w)});A=Object.keys(x).map(function(K){return H.addRemoveRequests(K,x,!0)});y=[];z=!1;E.label=1;case 1:return E.trys.push([1,3,,4]),[4,m.default.eachAlways(F)];case 2:return B=E.sent(),B.forEach(function(K,
I){K.value.forEach(function(L){var M=L.notAdded;null===M||void 0===M?void 0:M.forEach(function(N){-1===y.indexOf(N)&&y.push(N);N=Object.keys(w)[I];M.length<w[N].length&&(z=!0)})})}),[3,4];case 3:return E.sent(),g.default.showAlert("error",this.i18n.batchAssignToGroupsDlg.assignmentError),[2];case 4:return E.trys.push([4,6,,7]),[4,m.default.eachAlways(A)];case 5:return C=E.sent(),C.forEach(function(K,I){K.value.forEach(function(L){var M=L.notRemoved;null===M||void 0===M?void 0:M.forEach(function(N){-1===
y.indexOf(N)&&y.push(N);N=Object.keys(x)[I];M.length<x[N].length&&(z=!0)})})}),[3,7];case 6:return E.sent(),g.default.showAlert("error",this.i18n.batchAssignToGroupsDlg.assignmentError),[2];case 7:return this.showMessage(y,z),this.close(),[2]}})})};k.prototype.getGroupUrl=function(r){return"".concat(p.default.restBaseUrl,"community/groups/").concat(r)};k.prototype.addRemoveRequests=function(r,w,x){void 0===x&&(x=!1);x="".concat(this.getGroupUrl(r),"/").concat(x?"removeUsers":"addUsers");return v.default.sendAllResources(x,
25,w[r],function(D){return{users:D.join(", ")}},{timeout:18E4})};k.prototype.handleGroupChange=function(r){this.selectedGroups=r};return k=f.__decorate([(0,n.default)(q.default,e.default,t.default)],k)}()})},"arcgisonline/pages/components/MemberCategories/CategorizeMembersModal/CategorizeMembersModal":function(){define("require exports tslib preact preact/hooks preact/compat ./CategoriesSelect ./CategorizeMemberCard ../helpers ../../preactHooks arcgisonline/pages/utils/dom dragula/dragula dojo/i18n!../../../../nls/arcgisonline".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g){Object.defineProperty(J,"__esModule",{value:!0});b=f.__importDefault(b);a=f.__importDefault(a);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);J.default=function(m){var v=m.onClose,p=m.onDone,l=m.categories,n=m.members;m=f.__assign(f.__assign({},g.default.common),g.default.memberCategories);n=(0,q.useSetState)({categories:(0,e.convertToCategoryData)(l),members:n.map(function(E){E=f.__assign({},E);E.categories||(E.categories=[]);return E})});
var k=n[0],r=n[1],w=(0,h.useState)(!1);n=w[0];var x=w[1];w=(0,h.useState)(null);var D=w[0],G=w[1],F=(0,h.useRef)(null),A=(0,h.useRef)(null),y=(0,h.useRef)(null),z=function(E,K){r(function(I){var L=f.__assign({},I);L.members=L.members.map(function(M){M=f.__assign({},M);M.categories||(M.categories=[]);if(20<=M.categories.length)return M;K&&M.username!==K||(M.categories=M.categories.filter(function(N){return!((0,e.getCategoryLevel)(E.path)>(0,e.getCategoryLevel)(N)&&-1<E.path.indexOf(N))}));!(20>M.categories.length)||
K&&M.username!==K||-1!==M.categories.indexOf(E.path)||M.categories.some(function(N){return-1<"".concat(N,"/").indexOf("".concat(E.path,"/"))})||M.categories.push(E.path);M.categories=(0,e.sortCategoryPaths)(M.categories,L.categories);return M});L.categories=(0,e.updateSelectedFromMembers)(L.members,L.categories);return L})};(0,h.useEffect)(function(){r({categories:(0,e.updateSelectedFromMembers)(k.members,k.categories)});window.setTimeout(function(){x(!0)},100)},[]);(0,h.useEffect)(function(){A.current&&
A.current.setFocus()},[A]);(0,h.useEffect)(function(){window.setTimeout(function(){if(F.current&&!D){var E=(0,u.default)(t.default.querySelectorAllAsArray(".js-category-card, .js-category-group",F.current),{copy:!0,moves:function(K,I,L){return L.classList.contains("js-name")||L.classList.contains("category-view-name")},accepts:function(K,I,L,M){return!I.classList.contains("js-category-group")}});G(E);E.on("over",function(K,I,L){I.classList.contains("js-category-card")&&I.classList.add("card-select-active")});
E.on("out",function(K,I,L){I.classList.contains("js-category-card")&&I.classList.remove("card-select-active")});E.on("drop",function(K,I,L,M){var N;I&&I.classList.contains("js-category-card")&&(null===(N=K.parentNode)||void 0===N?void 0:N.removeChild(K),K=JSON.parse(K.querySelector(".js-name").dataset.category),z(K,I.dataset.username))})}},300)},[F]);var B=function(E,K){r(function(I){I=f.__assign({},I);I.members=I.members.map(function(L){return L.username===E.username?f.__assign(f.__assign({},L),
{categories:(0,e.sortCategoryPaths)(K,l)}):f.__assign({},L)});I.categories=(0,e.updateSelectedFromMembers)(I.members,I.categories);return I})},C=function(E,K){var I=E.categories,L=-1<I.indexOf(K.path)||I.some(function(M){return-1<"".concat(M,"/").indexOf("".concat(K.path,"/"))});L&&(I=I.filter(function(M){return M!==K.path&&-1==="".concat(M,"/").indexOf("".concat(K.path,"/"))}));!L&&20>I.length&&(I=I.filter(function(M){return-1==="".concat(K.path,"/").indexOf("".concat(M,"/"))}),I=f.__spreadArray(f.__spreadArray([],
I,!0),[K.path],!1));B(E,I)},H=function(E,K){var I=E.categories.filter(function(L){return L!==K});B(E,I)};return(0,c.h)(c.Fragment,null,(0,d.createPortal)((0,c.h)("calcite-modal",{ref:A,role:"dialog","aria-modal":"true",open:n,style:{"--calcite-modal-width":"1460px","--calcite-modal-content-background":"var(--calcite-color-background)","--calcite-modal-content-padding":"0"},oncalciteModalClose:v,"aria-labelledby":"categorize-members-modal",outsideCloseDisabled:!0},(0,c.h)("h3",{slot:"header",class:"font-size-2 trailer-0",
id:"categorize-members-modal"},m.categorizeMembers),(0,c.h)("div",{slot:"content",class:"full-height",ref:F},(0,c.h)("div",{class:"grid-container full-height"},(0,c.h)("div",{class:"column-7 tablet-column-6 full-height padding-leader-1 padding-trailer-1"},(0,c.h)("div",{class:"panel panel-white padding-left-half padding-right-half padding-top-half padding-bottom-half category-tree-full-height"},(0,c.h)(b.default,{categories:k.categories,onChange:function(E){E.selected?r(function(K){K=f.__assign({},
K);var I=[];K.categories=(0,e.fixDeselectedParents)(I,(0,e.toggleSelected)(E,K.categories,!1,I));K.members=(0,e.updateMembersFromSelected)(K.members,K.categories);return K}):z(E)}}))),(0,c.h)("div",{class:"column-17 tablet-column-6 full-height phone-hide member-categories__content"},(0,c.h)("div",{class:"margin-left-1 categorize-members-list"},k.members.map(function(E){return(0,c.h)(a.default,{key:E.username,memberCategories:k.categories,member:E,categorySchema:l,onCategoriesChange:B,onCategoryChange:C,
onCategoryRemove:H})}))))),(0,c.h)("div",{slot:"primary",class:"flex"},(0,c.h)("calcite-button",{appearance:"outline",width:"full",kind:"brand",class:"margin-right-1",onClick:v},m.cancel),(0,c.h)("calcite-button",{ref:y,appearance:"solid",width:"full",kind:"brand",onClick:function(){y.current.loading=!0;p(k.members)}},m.done))),document.body))}})},"arcgisonline/pages/components/MemberCategories/CategorizeMembersModal/CategoriesSelect":function(){define(["require","exports","tslib","preact","./CategoriesSelectOption"],
function(S,J,f,c,h){Object.defineProperty(J,"__esModule",{value:!0});h=f.__importDefault(h);J.default=function(d){var b=d.onChange;return(0,c.h)("ul",{class:"category-editor-group category-editor-group--fixed-height js-category-group",role:"tree"},d.categories[0].categories.map(function(a){return(0,c.h)(h.default,{key:a.path,category:a,onChange:b})}))}})},"arcgisonline/pages/components/MemberCategories/CategorizeMembersModal/CategoriesSelectOption":function(){define(["require","exports","preact",
"preact/hooks","../helpers"],function(S,J,f,c,h){Object.defineProperty(J,"__esModule",{value:!0});var d=function(b){var a,e=b.category,q=b.onChange,t=(0,c.useRef)(null);b=(0,c.useRef)(null);b.current&&(b.current.indeterminate=e.indeterminate);(0,c.useEffect)(function(){t.current&&(t.current.dataset.category=JSON.stringify(e))},[t.current]);return(0,f.h)("li",{class:"category-editor-item category-view-item",role:"treeitem"},(0,f.h)("div",{class:"category-view-checkbox flex"},(0,f.h)("calcite-label",
{class:"category-select__checkbox-label flex-0"},(0,f.h)("calcite-checkbox",{ref:b,checked:e.selected,indeterminate:e.indeterminate,oncalciteCheckboxChange:function(){q(e)}}),(0,f.h)("span",{class:"screen-readers-only"},(0,h.getPartialPath)(e.path).substring(1))),(0,f.h)("span",{ref:t,class:"category-editor-name js-name category-editor-name--draggable"},(0,f.h)("span",{class:"category-view-path"},(0,h.getPartialPath)(e.path)),(0,f.h)("span",{class:"category-view-name"},e.title))),0<(null===(a=e.categories)||
void 0===a?void 0:a.length)&&(0,f.h)("ul",{class:"category-editor-group category-view-group js-category-group"},e.categories.map(function(u){return(0,f.h)(d,{key:u.path,category:u,onChange:q})})))};J.default=d})},"arcgisonline/pages/components/MemberCategories/CategorizeMembersModal/CategorizeMemberCard":function(){define("require exports tslib preact ../../MemberThumb arcgisonline/pages/components/MemberCategories/CategoryPicker/CategoryPicker".split(" "),function(S,J,f,c,h,d){Object.defineProperty(J,
"__esModule",{value:!0});d=f.__importDefault(d);J.default=function(b){var a=b.member,e=b.memberCategories,q=b.onCategoryChange,t=b.onCategoryRemove;return(0,c.h)("div",{class:"categorize-member-card js-category-card","data-username":a.username},(0,c.h)("div",null,(0,c.h)("div",{class:"flex trailer-1"},(0,c.h)(h.MemberThumb,{member:a,showName:!0})),(0,c.h)("div",null),(0,c.h)(d.default,{memberCategories:e,selectedCategories:a.categories,memberName:a.fullName,onChange:function(u){q(a,u)},onRemove:function(u){t(a,
u)}})))}})},"arcgisonline/pages/components/EmailVerification/EditEmailModal":function(){define("require exports tslib preact preact/hooks preact/compat arcgisonline/sharing/util arcgisonline/esriGeowConfig arcgisonline/pages/utils/alerts ./NewEmail dojo/i18n!../../../nls/arcgisonline dojo/i18n!../../../nls/org-settings".split(" "),function(S,J,f,c,h,d,b,a,e,q,t,u){function g(m,v){return f.__awaiter(this,void 0,void 0,function(){var p,l;return f.__generator(this,function(n){switch(n.label){case 0:p=
u.default.securityTab.emailVerification.modal.editForm,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,b.default.request({url:"".concat(b.default.getSecureUrl(a.default.restBaseUrl),"community/users/").concat(m,"/update"),content:{email:v}},{usePost:!0})];case 2:l=n.sent();if(l.success)return e.default.showAlert("success",p.success),[2,!0];e.default.showAlert("error",p.errors.updateFailed);return[3,4];case 3:return n.sent(),e.default.showAlert("error",p.errors.updateFailed),[3,4];case 4:return[2]}})})}
Object.defineProperty(J,"__esModule",{value:!0});b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);J.default=function(m){var v=m.member,p=m.onSave,l=m.onClose;m=f.__assign(f.__assign({},t.default.common),t.default.myOrganization.membersTab);var n=(0,h.useState)(!1),k=n[0],r=n[1];n=(0,h.useState)("");var w=n[0],x=n[1];n=(0,h.useState)(v.email);var D=n[0],G=n[1],F=(0,h.useState)(!1);n=F[0];var A=F[1],y=(0,h.useRef)(null);
F=k||!w;(0,h.useEffect)(function(){y.current&&A(!0)},[y.current]);return(0,c.h)(c.Fragment,null,(0,d.createPortal)((0,c.h)("calcite-modal",{role:"dialog","aria-modal":"true","aria-labelledby":"edit-email-modal-title",outsideCloseDisabled:!0,oncalciteModalClose:l,width:"s",open:n,ref:y},(0,c.h)("h3",{slot:"header",class:"font-size-2 trailer-0",id:"edit-email-modal-title"},m.editEmail),(0,c.h)("div",{slot:"content"},(0,c.h)("div",{class:"trailer-1"},(0,c.h)("div",{class:"avenir-demi"},m.memberName),
(0,c.h)("div",null,v.fullName)),(0,c.h)(q.default,{member:v,labelTextClass:"avenir-demi",labelSpacing:"1",onChange:function(z){G(z)},onValidate:function(z){r(z)},onConfirmChange:function(z){x(z)}})),(0,c.h)("calcite-button",{slot:"secondary",appearance:"outline",width:"full",onClick:l},m.cancel),(0,c.h)("calcite-button",{slot:"primary",appearance:"solid",width:"full",disabled:F,onClick:function(){return f.__awaiter(this,void 0,void 0,function(){var z;return f.__generator(this,function(B){switch(B.label){case 0:return k||
!w?[2]:D===v.email?(l(),[2]):[4,g(v.username,D)];case 1:return(z=B.sent())?p(D):l(),[2]}})})}},m.save)),document.body))}})},"arcgisonline/pages/organization/widgets/MobileMemberPanel":function(){define("require exports tslib dojo/text!./templates/MobileMemberPanel.html dojo/i18n!../../../nls/arcgisonline dojo/string dojo/dom-construct dojo/_base/lang dojo/topic dojo/on dijit/_TemplatedMixin dijit/_WidgetBase dijit/a11yclick dijit/registry esri/lang ../../../sharing/util ../../../esriGeowConfig ../../../sharing/geow/Password ../../../sharing/geow/Account ../../../sharing/dijit/_LevelAwareMixin ../../utils/alerts ../../utils/dom ../../utils/icons ../../utils/strings ../../dijit/MemberThumb ../../utils/formatters ../../dijit/ToggleSwitch ../../utils/organization ../../dijit/InviteMembers/AppIconList ../../dijit/Overlay ../_OrganizationActions ../../dijit/InviteMembers/MobileError ../../dijit/ManageCredits ./MemberRole ../../../tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E,K,I,L){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);x=f.__importDefault(x);
D=f.__importDefault(D);G=f.__importDefault(G);F=f.__importDefault(F);A=f.__importDefault(A);y=f.__importDefault(y);z=f.__importDefault(z);B=f.__importDefault(B);C=f.__importDefault(C);H=f.__importDefault(H);E=f.__importDefault(E);K=f.__importDefault(K);I=f.__importDefault(I);L=f.__importDefault(L);return function(){function M(N,P){this.i18n=h.default;this.overlayContents=d.default.substitute(c.default,{i18n:this.i18n,chevronRight:D.default["chevron-right"]["24"],chevronDown:D.default["chevron-down"]["24"],
chevronUp:D.default["chevron-up"]["24"]});this.showActionBar=!1}M.prototype.destroy=function(){this.inherited(arguments);this._mobileAlert&&this._mobileAlert.destroy()};M.prototype.open=function(){var N;this.inherited(arguments);this._currentUser=p.default.getUser();this._isSelf=this.member.username===this._currentUser.username;this._hasNotLoggedIn=0>this.member.lastLogin;this._userRole=(null===(N=this.portal.portalUser)||void 0===N?void 0:N.userRole)||{};this._isAdmin=this._userRole.isAdmin();this._mobileAlert=
new E.default;this._memberHeading=this.domNode.querySelector(".js-member-heading");this._fullname=this.domNode.querySelector(".js-fullname");this._username=this.domNode.querySelector(".js-username");this._bio=this.domNode.querySelector(".js-bio");this._creditsValue=this.domNode.querySelector(".js-credits");this._userTypeValue=this.domNode.querySelector(".js-usertype");this._roleValue=this.domNode.querySelector(".js-role");this._numberOfGroups=this.domNode.querySelector(".js-group-num");this._numberOfItems=
this.domNode.querySelector(".js-item-num");this._itemsBtn=this.domNode.querySelector(".js-items-btn");this._groupsBtn=this.domNode.querySelector(".js-groups-btn");this._lastLogin=this.domNode.querySelector(".js-last-login");this._licenseIcons=this.domNode.querySelector(".js-license-icons");this._groupIcons=this.domNode.querySelector(".js-group-icons");this._viewProfileBtn=this.domNode.querySelector(".js-profile-btn");this._bioToggle=this.domNode.querySelector(".js-bio-toggle");this._bioCollapseToggle=
this.domNode.querySelector(".js-bio-collapse-toggle");this._licensesSection=this.domNode.querySelector(".js-licenses-section");this._resetPasswordBtn=this.domNode.querySelector(".js-reset-btn");this._deleteBtn=this.domNode.querySelector(".js-delete-btn");this._disableBtn=this.domNode.querySelector(".js-disable-btn");this._enableBtn=this.domNode.querySelector(".js-enable-btn");this._creditsSection=this.domNode.querySelector(".js-credits-section");this._userTypeRoleSection=this.domNode.querySelector(".js-usertype-role-section");
this._roleDisplaySection=this.domNode.querySelector(".js-role-display-section");this._roleDisplay=this.domNode.querySelector(".js-role-display");this._esriAccessSection=this.domNode.querySelector(".js-esri-access-section");this._userUpdateUrl="".concat(p.default.getSecureUrl(l.default.restBaseUrl),"community/users/").concat(this.member.username,"/update");this._render();this._addEventListener()};M.prototype.close=function(){this.inherited(arguments)};M.prototype._addEventListener=function(){var N=
this;this.own((0,g.default)(this._viewProfileBtn,function(){N._viewPage("user",!0)}),(0,g.default)(this._groupIcons,function(){N._viewGroups()}),(0,g.default)(this._groupsBtn,function(){N._viewGroups()}),(0,g.default)(this._itemsBtn,function(){N._viewContent()}),(0,g.default)(this._bioToggle,function(){N._bio.classList.add("mobile-member-panel__bio--expanded");x.default.hideNode(N._bioToggle);x.default.showNode(N._bioCollapseToggle);N._bio.style.height="".concat(N._bio.scrollHeight,"px")}),(0,g.default)(this._bioCollapseToggle,
function(){N._bio.classList.remove("mobile-member-panel__bio--expanded");x.default.showNode(N._bioToggle);x.default.hideNode(N._bioCollapseToggle);N._bio.style.height="75px"}),(0,g.default)(this._licensesSection,function(P){H.default.manageLicenses(a.default.mixin({},{evt:P,item:N.member,portal:N.portal,page:N.page,user:N.portal.portalUser,isDrillIn:!0}))}),(0,g.default)(this._userTypeRoleSection,this._onUserTypeRoleDrill.bind(this)),(0,g.default)(this._creditsSection,this._onCreditsDrill.bind(this)),
(0,g.default)(this._resetPasswordBtn,this._confirmResetPassword.bind(this)),(0,g.default)(this._deleteBtn,this._confirmDeleteMember.bind(this)),(0,g.default)(this._disableBtn,this._disableMember.bind(this)),(0,g.default)(this._enableBtn,this._enableMember.bind(this)),e.default.subscribe("members/refreshed",this._onMembersRefreshed.bind(this)),e.default.subscribe("licenses/update",this._onLicensesUpdate.bind(this)),e.default.subscribe("role/change-success",this._onRoleUpdated.bind(this)))};M.prototype._onRoleUpdated=
function(){this._memberRole.enable();w.default.showAlert("success",this.i18n.myOrganization.manageLicenseTypes.roleUpdateSuccess)};M.prototype._onCreditsDrill=function(){var N=document.createElement("div");document.body.appendChild(N);this._manageCredits=new K.default({portal:this.portal,member:this.member,isDrillIn:!0},N);this._manageCredits.open()};M.prototype._onUserTypeRoleDrill=function(N){H.default.manageLicenseType(a.default.mixin({},{evt:N,item:this.member,portal:this.portal,page:this.page,
user:this.portal.portalUser,isDrillIn:!0}))};M.prototype._onAccessChange=function(){var N=this;this._accessToggle.checked()?this._mobileAlert.show({title:this.i18n.myOrganization.enableEsriAccessTitle,description:this.i18n.myOrganization.enableEsriAccessDesc+"\x3cbr\x3e\x3cbr\x3e"+this.i18n.myOrganization.enableEsriAccessNote,buttonText:this.i18n.common.ok,cancelText:this.i18n.myOrganization.mobileMemberPanel.cancel,isConfirm:!0,isRedButton:!0}).then(function(P){"onOk"===P?N._enableEsriAccess():"onCancel"===
P&&N._cancelEnableAccess()}):this._disableEsriAccess()};M.prototype._cancelEnableAccess=function(){this._accessToggle.setChecked(!1,!0)};M.prototype._disableEsriAccess=function(){var N=this;p.default.request({url:this._userUpdateUrl,content:{userType:"arcgisonly"}},{usePost:!0}).then(function(P){w.default.showAlert("success",d.default.substitute(N.i18n.myOrganization.esriAccessDisabled,{user:N.member.username}));N._updateEsriAccessInHeader("arcgisonly");e.default.publish("members/refresh")},function(P){N._accessToggle.setChecked(!0);
w.default.showAlert("error",d.default.substitute(N.i18n.myOrganization.disableEsriAccessError,{user:N.member.username}))})};M.prototype._enableEsriAccess=function(){var N=this;p.default.request({url:this._userUpdateUrl,content:{userType:"both"}},{usePost:!0}).then(function(P){w.default.showAlert("success",d.default.substitute(N.i18n.myOrganization.esriAccessEnabled,{user:N.member.username}));N._updateEsriAccessInHeader("both");e.default.publish("members/refresh")},function(P){N._accessToggle.setChecked(!1);
w.default.showAlert("error",d.default.substitute(N.i18n.myOrganization.enableEsriAccessError,{user:N.member.username}))})};M.prototype._updateEsriAccessInHeader=function(N){if(this._isSelf){l.default.userInfo.usertype=N;var P=m.default.byId("header");P&&P.updateEsriAccessLinks(N)}};M.prototype._disableMember=function(){H.default.disableMember({item:this.member})};M.prototype._enableMember=function(){H.default.enableMember({item:this.member})};M.prototype._onMembersRefreshed=function(N){var P=this;
this.member=N.filter(function(R){return R.username===P.member.username})[0];this._userTypeValue.textContent=this.member.licenseType.name;this._roleValue.textContent=this.member.roleName;this._creditsValue.textContent=this.member.creditsRemainingLabel;this._renderDisableEnable()};M.prototype._onLicensesUpdate=function(){this._renderLicenses()};M.prototype._confirmResetPassword=function(){var N=this;this._mobileAlert.show({title:this.i18n.myOrganization.mobileMemberPanel.resetPassword,description:d.default.substitute(this.i18n.myOrganization.mobileMemberPanel.resetPasswordConfirm,
{username:this.member.username}),buttonText:this.i18n.myOrganization.mobileMemberPanel.reset,cancelText:this.i18n.myOrganization.mobileMemberPanel.cancel,isConfirm:!0,isInfo:!0}).then(function(P){"onOk"===P&&N._resetPassword()})};M.prototype._resetPassword=function(){n.default.resetPassword(this.member.username,this.member.fullName,this.member.email)};M.prototype._confirmDeleteMember=function(){var N=this,P=this.i18n.myOrganization.reallyDeleteUserMsg+(this.portal.isPortal?"":"\x3cbr\x3e\x3cbr\x3e"+
this.i18n.myOrganization.deleteUserReminder);P=d.default.substitute(P,{user:this.member.username});this._mobileAlert.show({title:this.i18n.myOrganization.deleteUserLabel,description:P,buttonText:this.i18n.myOrganization.deleteUserLabel,cancelText:this.i18n.myOrganization.mobileMemberPanel.cancel,isConfirm:!0,isRedButton:!0}).then(function(R){"onOk"===R&&N._deleteMember()})};M.prototype._deleteMember=function(){k.default.deleteUser(this.member.username,this._handleUserDelete.bind(this),this._handleUserDelete.bind(this))};
M.prototype._handleUserDelete=function(N){if(N){var P=this.member.username,R=void 0;N.code&&N.messageCode&&(R="COM_1029"===N.messageCode?d.default.substitute(h.default.myOrganization.unableToDeleteUserMsg,{user:P}):"COM_1056"===N.messageCode?d.default.substitute(h.default.myOrganization.noDeleteDisconnectedUserMsg,{user:P}):"COM_1057"===N.messageCode?d.default.substitute(h.default.myOrganization.noDeleteProvisionedUserMsg,{user:P}):"COM_1060"===N.messageCode?d.default.substitute(h.default.myOrganization.securityTab.needTwoAdminDeleteMsg,
{user:P}):"COM_1077"===N.messageCode?d.default.substitute(h.default.myOrganization.unableToDeleteUserBaseMsg,{user:P})+" "+h.default.myOrganization.couldNotRemoveContact:"COM_1150"===N.messageCode?d.default.substitute(h.default.myOrganization.noDeleteAppBundlesMsg,{user:P}):d.default.substitute(h.default.myOrganization.unableToDeleteUserMsg,{user:P}));R?w.default.showAlert("error",R):(w.default.showAlert("success",d.default.substitute(this.i18n.myOrganization.membersTab.deletedUser,{user:P})),e.default.publish("delete-members/done",
this.member),e.default.publish("members/refresh"),this.close())}};M.prototype._viewPage=function(N,P){var R=l.default.baseUrl;P?(R+="".concat(N,".html"),this._isSelf||(R+="?user\x3d".concat(this.member.username))):R+="search.html?q\x3downer:%22".concat(this.member.username,"%22\x26t\x3d").concat(N);window.location.href=R};M.prototype._viewContent=function(){var N=this._userRole.canManageItems();this._viewPage("content",N)};M.prototype._viewGroups=function(){var N=this._userRole.isAdmin()||this._userRole.canViewOrgGroups();
this._viewPage("groups",N)};M.prototype._render=function(){var N=this;this._memberThumb=new F.default({member:this.member,cssClasses:"mobile-member-panel__member-thumb margin-right-half"},this.domNode.querySelector(".js-member-thumb"));this._fullname.textContent=this.member.fullName;this._username.textContent=this.member.username;b.default.place(this._memberHeading,this.domNode.querySelector(".overlay-title"),"before");var P=this.member.description;P&&(P=G.default.escapeNewlines(G.default.addHyperlinks(G.default.restoreNewlines(P))));
this._bio.innerHTML=G.default.insertHTMLLineBreaks(P);this.member.level===this.LICENSE_LEVELS.TWO?this.portal.queryItems({start:1,q:'owner:"'.concat(this.member.username,'" orgid:').concat(this.portal.id,' -type:("Code Attachment") -typekeywords:("MapAreaPackage") -type:("Map Area")')}).then(function(ra){N._numberOfItems.textContent=ra.total}):x.default.hideNode(this._itemsBtn);v.default.isDefined(this.member.totalGroups)?this._numberOfGroups.textContent=String(this.member.totalGroups):(P='owner:"'.concat(this.member.username,
'" orgid:').concat(this.portal.id),this.portal.isPortal&&l.default.portalLivingAtlasConfigEnabled&&(P+=' -owner:"esri_livingatlas" -owner:"esri_boundaries" -owner:"esri_demographics"'),p.default.request({url:"".concat(l.default.restBaseUrl,"community/groups"),content:{start:1,q:P}}).then(function(ra){N._numberOfGroups.textContent=ra.total}));if(this._isAdmin)P="enabled"===this.portal.creditAssignments||"validate"===this.portal.creditAssignments,!this.portal.isPortal&&l.default.creditBudgetingEnabled&&
P&&(x.default.showNode(this._creditsSection),this._creditsValue.textContent=this.member.creditsRemainingLabel),x.default.showNode(this._userTypeRoleSection),this._userTypeValue.textContent=this.member.licenseType.name,this._roleValue.textContent=this.member.roleName,this._lastLogin.textContent=0!==this.member.lastLogin&&-1!==this.member.lastLogin?d.default.substitute(this.i18n.myOrganization.mobileMemberPanel.lastLogin,{date:A.default.fullDate(this.member.lastLogin)}):this.i18n.myOrganization.membersTab.hasNotLoggedIn,
x.default.showNode(this._lastLogin),this.portal.isPortal||(this._accessToggle=new y.default(void 0,this.domNode.querySelector(".js-access-toggle")),"both"===this.member.userType&&this._accessToggle.setChecked(!0,!0),this.own((0,q.default)(this._accessToggle,"change",this._onAccessChange.bind(this))),x.default.showNode(this._esriAccessSection)),this._renderLicenses(),x.default.showNode(this._licensesSection),this._isSelf||(!this.portal.isPortal&&this._hasNotLoggedIn?x.default.showNode(this._resetPasswordBtn):
this.member.idpUsername?0===this.member.idpUsername.length&&x.default.showNode(this._resetPasswordBtn):x.default.showNode(this._resetPasswordBtn),this._hasNotLoggedIn||this._renderDisableEnable(),x.default.showNode(this._deleteBtn));else{if(this._userRole.isCustom()){P=this._userRole.canUpdateUsers();var R=this._userRole.canDeleteUsers(),Y=this._userRole.canDisableUsers(),ja=this._userRole.canManageLicenses(),aa=this._userRole.canChangeUserRoles(),da="account_admin"===this.member.role||"org_admin"===
this.member.role;this._isSelf||(P&&x.default.showNode(this._resetPasswordBtn),!Y||this._hasNotLoggedIn||da||this._renderDisableEnable(),R&&!da&&x.default.showNode(this._deleteBtn),aa&&"org_admin"!==this.member.role&&(this._memberRole=new I.default({user:this.member,roles:this.portal.roles,viewerRole:this.portal.viewerRole},this.domNode.querySelector(".js-member-role"))));ja&&this._renderLicenses()}if(this._isSelf||!this._userRole.canChangeUserRoles()||"org_admin"===this.member.role)this._roleDisplay.textContent=
this.member.roleName;x.default.showNode(this._roleDisplaySection)}this._isAdmin||this._userRole.canManageLicenses()||x.default.hideNode(this._licensesSection);this._bio.scrollHeight>this._bio.clientHeight?(x.default.showNode(this._bioToggle),this._bio.style.height="".concat(this._bio.clientHeight,"px"),this._bio.style.maxHeight="initial"):x.default.hideNode(this._bioToggle)};M.prototype._renderDisableEnable=function(){this.member.disabled?(x.default.hideNode(this._disableBtn),x.default.showNode(this._enableBtn)):
(x.default.showNode(this._disableBtn),x.default.hideNode(this._enableBtn))};M.prototype._renderLicenses=function(){var N=this;this._licenseIconList&&this._licenseIconList.destroy();this._licenseIcons.innerHTML="";var P=document.createElement("div");this._licenseIcons.appendChild(P);p.default.request({url:"".concat(l.default.restBaseUrl,"community/users/").concat(this.member.username,"/provisionedListings")}).then(function(R){var Y=R.provisionedListings;N.member.appBundles&&N.member.appBundles.forEach(function(ja){var aa=
z.default.getAppIcon({id:void 0,title:ja.name,isAppBundle:!0});aa.title=ja.name;Y.push(aa)});0<Y.length?(Y.sort(function(ja,aa){return ja.isAppBundle&&!aa.isAppBundle?-1:!ja.isAppBundle&&aa.isAppBundle?1:ja.title>aa.title?1:ja.title<aa.title?-1:0}),N._licenseIconList=new B.default({apps:Y},P),N._licenseIconList.startup()):N._licenseIcons.textContent=N.i18n.myOrganization.membersTab.configureLicenses})};return M=f.__decorate([(0,L.default)(u.default,t.default,C.default,r.default)],M)}()})},"arcgisonline/pages/dijit/ManageCredits":function(){define("require exports tslib dojo/text!./ManageCredits/templates/ManageCredits.html dojo/i18n!../../nls/arcgisonline dojo/string dojo/on dojo/query dojo/topic dijit/_TemplatedMixin dijit/_WidgetBase dijit/form/NumberTextBox esri/lang ./Overlay ../utils/alerts ../utils/number ../../sharing/util ../../esriGeowConfig ../../tsutils/declareDecorator".split(" "),
function(S,J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importDefault(l);n=f.__importDefault(n);k=f.__importDefault(k);return function(){function r(w,x){this.i18n=h.default;this.overlayContents=d.default.substitute(c.default,
{i18n:this.i18n});this.CHECKED_CLASS="invite-member__credits-option--checked"}r.prototype.postCreate=function(){this.inherited(arguments);this.domNode.classList.add("mobile-drill-in");this.closeBtn.classList.add("hide-on-mobile");this.mobileTitle.textContent=this.i18n.myOrganization.membersTab.credits};r.prototype.open=function(){this.inherited(arguments);this._creditsError=this.domNode.querySelector(".js-credits-error");this._noLimitContainer=this.domNode.querySelector(".js-no-limit-container");
this._noLimitRadio=this.domNode.querySelector(".js-credits-no-limit-radio");this._creditsAllocContainer=this.domNode.querySelector(".js-credits-alloc-container");this._creditsAllocRadio=this.domNode.querySelector(".js-credits-alloc-radio");this._orgCredits=this.domNode.querySelector(".js-org-credits");this._memberCount=this.domNode.querySelector(".js-member-count");this._render()};r.prototype.close=function(){this.inherited(arguments)};r.prototype._render=function(){var w=this;g.default.isDefined(this.member.assignedCredits)?
this._creditsToAssign=this.member.assignedCredits:this._creditsToAssign=-1;this._creditsNumberTextbox=new u.default({trim:!0},this.domNode.querySelector(".js-credits-alloc-textbox"));this._creditsNumberTextbox.displayMessage=function(){};this._selectCreditsOption();this._orgCredits.textContent=p.default.format(this.portal.availableCredits);l.default.request({url:n.default.restBaseUrl+"portals/self/users?start1\x26num\x3d0"}).then(function(x){w._memberCount.textContent=p.default.format(x.total)});
this._addEventListener()};r.prototype._selectCreditsOption=function(){var w=this._noLimitRadio.parentElement.parentElement,x=this._creditsAllocRadio.parentElement.parentElement;this.domNode.querySelector("."+this.CHECKED_CLASS)&&this.domNode.querySelector("."+this.CHECKED_CLASS).classList.remove(this.CHECKED_CLASS);-1===this._creditsToAssign?(this._noLimitRadio.checked=!0,w.classList.add(this.CHECKED_CLASS)):(this._creditsAllocRadio.checked=!0,this._creditsNumberTextbox.setValue(String(this._creditsToAssign)),
x.classList.add(this.CHECKED_CLASS))};r.prototype._addEventListener=function(){var w=this;this.own((0,b.default)(this._creditsNumberTextbox,"change",function(){w._creditsAllocRadio.checked&&!w._creditsErrorMessage&&(w._creditsToAssign=w._creditsNumberTextbox.get("value"))}),(0,b.default)(this._creditsNumberTextbox,"keyup",function(){var x=w._creditsNumberTextbox.get("value");w._creditsAllocRadio.checked=!0;w.domNode.querySelector("."+w.CHECKED_CLASS).classList.remove(w.CHECKED_CLASS);w._creditsAllocContainer.classList.add(w.CHECKED_CLASS);
if(w._creditsNumberTextbox.isValid(!1))x&&x>w.portal.availableCredits&&(D=w.i18n.batchAssignCreditsDlg.creditLimitOrg);else var D=w.i18n.batchAssignCreditsDlg.creditsNumberRequired;(w._creditsErrorMessage=D)?(w._creditsError.textContent=D,w._creditsNumberTextbox.domNode.classList.add("input-error"),w._creditsError.classList.add("is-active")):(w._creditsNumberTextbox.domNode.classList.remove("input-error"),w._creditsError.classList.remove("is-active"))}),(0,a.default)("input[name\x3dcreditsAlloc]",
this.domNode).on("change",function(){w.domNode.querySelector("."+w.CHECKED_CLASS).classList.remove(w.CHECKED_CLASS);w._creditsAllocRadio.checked?(w._creditsAllocContainer.classList.add(w.CHECKED_CLASS),w._creditsToAssign=w._creditsNumberTextbox.get("value")):(w._noLimitContainer.classList.add(w.CHECKED_CLASS),w._creditsToAssign=-1)}))};r.prototype._assignCreditLimit=function(){return l.default.request({url:n.default.restBaseUrl+"portals/self/assignUserCredits",content:{userAssignments:JSON.stringify([{username:this.member.username,
credits:this._creditsToAssign}])}},{usePost:!0})};r.prototype.handlePrimary=function(){var w=this;this._assignCreditLimit().then(function(x){(null===x||void 0===x?0:x.code)&&x.message?w._showAllocateError():(v.default.showAlert("success",d.default.substitute(w.i18n.assignCreditsDlg.allocateCredits,{name:w.member.username,num:p.default.format(w._creditsToAssign)})),e.default.publish("members/refresh"));w.close()},function(x){w._showAllocateError();w.close()})};r.prototype._showAllocateError=function(){v.default.showAlert("error",
d.default.substitute(this.i18n.assignCreditsDlg.cantAllocateCredits,{name:this.member.username,num:p.default.format(this._creditsToAssign)}))};return r=f.__decorate([(0,k.default)(t.default,q.default,m.default)],r)}()})},"arcgisonline/pages/organization/components/HomePageRequestExtensionDialog":function(){define("require exports tslib ../../../esriGeowConfig ../widgets/settings/settings-shared ../../utils/whatsNew ../../../sharing/util dojo/topic preact preact/hooks".split(" "),function(S,J,f,c,
h,d,b,a,e,q){Object.defineProperty(J,"__esModule",{value:!0});c=f.__importDefault(c);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);J.default=function(t){var u=t.portal,g=t.telemetry,m=t.strings,v=t.onClose;t=(0,q.useState)(!1);var p=t[0],l=t[1],n=(0,q.useRef)(null);(0,q.useEffect)(function(){n.current&&(n.current.setFocus(),l(!0))},[n.current]);return(0,e.h)("calcite-modal",{ref:n,open:p,kind:"brand",role:"dialog","aria-label":m.title,"aria-modal":"true",width:"s",outsideCloseDisabled:!0},
(0,e.h)("h3",{slot:"header",class:"font-size-2 trailer-0","data-test":"title"},m.title),(0,e.h)("div",{slot:"content"},(0,e.h)("div",{class:"flex leader-half trailer-1 homepage__switch-extend-overlay-deadlines"},(0,e.h)("div",{class:"homepage__switch-extend-overlay-column margin-left-half margin-right-half"},(0,e.h)("div",{class:"avenir-demi font-size-1"},m.fall),(0,e.h)("div",{class:"leader-half font-size--1"},m.extendedDeadline))),(0,e.h)("div",{class:"trailer-half"},m.extend)),(0,e.h)("calcite-button",
{slot:"primary",width:"full",kind:"brand",appearance:"solid",onClick:function(){var k="".concat(c.default.restBaseUrl,"portals/self/update"),r=u.portalProperties||{};r.homePage="legacy";r.extendLegacyHomePage=!0;var w={portalProperties:JSON.stringify(r)};b.default.request({url:k,content:w},{usePost:!0}).then(function(){null===g||void 0===g?void 0:g.logEvent({category:h.SettingsTabKeys.HomePage,label:"portalProperties.extendLegacyHomePage",action:"Save"});d.default.set("switchHomePage2");u.portalProperties=
r;a.default.publish("activate-homepage/refresh",{portalProperties:u.portalProperties,legacyActivated:!0});a.default.publish("home-page-switch-banner/refresh",{portalProperties:u.portalProperties});l(!1);v()},function(){l(!1);v()})},"data-test":"extend"},m.ok))}})},"arcgisonline/pages/organization/components/HomePageSwitchFeedbackDialog":function(){define("require exports tslib preact preact/hooks ../../utils/whatsNew".split(" "),function(S,J,f,c,h,d){Object.defineProperty(J,"__esModule",{value:!0});
d=f.__importDefault(d);J.default=function(b){var a=b.feedbackUrl,e=b.strings,q=b.onClose;b=(0,h.useState)(!1);var t=b[0],u=b[1],g=(0,h.useRef)(null);(0,h.useEffect)(function(){g.current&&(g.current.setFocus(),u(!0))},[g.current]);return(0,c.h)("calcite-modal",{ref:g,open:t,kind:"brand",role:"dialog","aria-label":e.title,"aria-modal":"true",width:"s",oncalciteModalClose:function(){d.default.set("switchHomePage2");u(!1);q()},outsideCloseDisabled:!0},(0,c.h)("h3",{slot:"header",class:"font-size-2 trailer-0",
"data-test":"title"},e.title),(0,c.h)("div",{slot:"content"},e.description),(0,c.h)("calcite-button",{slot:"primary",width:"full",kind:"brand",appearance:"solid",onClick:function(){window.open(a,"noopener");d.default.set("switchHomePage2");u(!1);q()},"data-test":"extend",iconStart:"launch"},e.ok))}})},"arcgisonline/pages/components/MapViewerSwitchFeedbackDialog":function(){define(["require","exports","preact","preact/hooks"],function(S,J,f,c){Object.defineProperty(J,"__esModule",{value:!0});J.default=
function(h){var d=h.strings,b=h.onClose,a=(0,c.useState)(!1);h=a[0];var e=a[1],q=(0,c.useRef)(null);a=function(){e(!1);b()};(0,c.useEffect)(function(){q.current&&e(!0)},[q.current]);return(0,f.h)("calcite-modal",{open:h,kind:"brand",role:"dialog","aria-label":d.title,"aria-modal":"true",width:"s",oncalciteModalClose:a,outsideCloseDisabled:!0,ref:q},(0,f.h)("h3",{slot:"header",class:"font-size-2 trailer-0","data-test":"title"},d.title),(0,f.h)("div",{slot:"content"},d.description),(0,f.h)("calcite-button",
{slot:"primary",width:"full",kind:"brand",appearance:"solid",onClick:a,"data-test":"extend"},d.ok))}})},"arcgisonline/pages/components/RecycleOrgOnboardModal/RecycleOrgOnboardModal":function(){define("require exports tslib preact preact/hooks preact/compat dojo/i18n!../../../nls/arcgisonline dojo/i18n!../../../nls/organization dojo/string ./recycle-setting.service ../../utils/whatsNew".split(" "),function(S,J,f,c,h,d,b,a,e,q,t){Object.defineProperty(J,"__esModule",{value:!0});b=f.__importDefault(b);
a=f.__importDefault(a);e=f.__importDefault(e);t=f.__importDefault(t);J.default=function(u){function g(){return f.__awaiter(this,void 0,void 0,function(){var E;return f.__generator(this,function(K){switch(K.label){case 0:return[4,(0,q.setRecycleSetting)(!0)];case 1:return E=K.sent(),E.success&&(D(!0),t.default.set("recycle-org-onboard-".concat(r.id)),F("enabled"),l(!0)),[2]}})})}function m(){F("optOutConfirm")}function v(){F("onboard")}function p(){return f.__awaiter(this,void 0,void 0,function(){var E;
return f.__generator(this,function(K){switch(K.label){case 0:return[4,(0,q.setRecycleSetting)(!1)];case 1:return E=K.sent(),E.success&&(t.default.set("recycle-org-onboard-".concat(r.id)),D(!1),l(!1),x()),[2]}})})}function l(E){(0,q.logRecycleSettingEvent)(E,w,"org onboard",E?void 0:A)}function n(E){y(E.target.value)}var k=u.open,r=u.portal,w=u.telemetry,x=u.onClose,D=u.onRecycleEnabledChange,G=(0,h.useState)("onboard");u=G[0];var F=G[1];G=(0,h.useState)("");var A=G[0],y=G[1],z=(0,h.useState)(!1);
G=z[0];var B=z[1];z=f.__assign(f.__assign({},b.default.common),a.default.recycleOnboard);var C=e.default.substitute(z.learnMore,{linkStart:'\x3ccalcite-link icon-end\x3d"launch" href\x3d"" target\x3d"_blank"\x3e',linkEnd:"\x3c/calcite-link\x3e"}),H=e.default.substitute(z.goToOrgRecycle,{linkStart:'\x3ccalcite-link href\x3d"content.html?contentType\x3drecycle#organization" target\x3d"_blank"\x3e',linkEnd:"\x3c/calcite-link\x3e"});return(0,c.h)(c.Fragment,null,(0,d.createPortal)((0,c.h)("calcite-modal",
{open:k,oncalciteModalClose:x,style:"--calcite-modal-content-background: var(--calcite-color-background); --calcite-modal-width: 500px"},(0,c.h)("div",{slot:"header"},"optOutConfirm"===u?z.optOutConfirm:z.newFeatures),(0,c.h)("div",{slot:"content",class:"padding-left-1 padding-right-1"},"optOutConfirm"!==u&&(0,c.h)(c.Fragment,null,(0,c.h)("div",{class:"font-size-3 avenir-bold text-center"},"onboard"===u?z.recycleAvailable:z.recycleEnabled),(0,c.h)("div",{class:"flex flex-center leader-half trailer-1"},
(0,c.h)("div",{class:"opt-in-recycle-icon"},(0,c.h)("calcite-icon",{class:"large-recycle-icon",scale:"l",icon:"recycle-bin"}))),(0,c.h)("ul",null,"onboard"===u?(0,c.h)(c.Fragment,null,(0,c.h)("li",{class:"trailer-half"},z.optInRequired),(0,c.h)("li",{class:"trailer-half"},z.allowRecovery),(0,c.h)("li",{class:"trailer-half"},z.canChoose),(0,c.h)("li",{dangerouslySetInnerHTML:{__html:C}})):(0,c.h)(c.Fragment,null,(0,c.h)("li",{class:"trailer-half"},z.itemsHeld),(0,c.h)("li",{dangerouslySetInnerHTML:{__html:H}})))),
"optOutConfirm"===u&&(0,c.h)(c.Fragment,null,(0,c.h)("ul",null,(0,c.h)("li",null,z.preventAccident),(0,c.h)("li",{dangerouslySetInnerHTML:{__html:z.noRecover}})),r.eueiEnabled&&(0,c.h)("calcite-label",null,z.reasonLabel,(0,c.h)("calcite-text-area",{rows:4,value:A,oncalciteTextAreaInput:n})),(0,c.h)("calcite-label",{layout:"inline",class:"opt-out-checkbox-wrapper leader-1",style:"--calcite-label-margin-bottom: 0"},(0,c.h)("calcite-checkbox",{oncalciteCheckboxChange:function(E){B(E.target.checked)}}),
z.confirmOptOut))),"onboard"===u&&(0,c.h)(c.Fragment,null,(0,c.h)("calcite-button",{slot:"back",appearance:"outline",kind:"danger",onClick:m},z.optOut),(0,c.h)("calcite-button",{slot:"secondary",appearance:"outline",onClick:x},z.remind),(0,c.h)("calcite-button",{slot:"primary",onClick:g},z.optIn)),"enabled"===u&&(0,c.h)("calcite-button",{slot:"primary",onClick:x},z.close),"optOutConfirm"===u&&(0,c.h)(c.Fragment,null,(0,c.h)("calcite-button",{slot:"back",appearance:"outline",kind:"neutral",onClick:v},
z.back),(0,c.h)("calcite-button",{slot:"secondary",appearance:"outline",kind:"neutral",onClick:x},z.cancel),(0,c.h)("calcite-button",{slot:"primary",disabled:!G,kind:"danger",onClick:p},z.confirmButton))),document.body))}})},"arcgisonline/pages/organization/components/TrialWelcome":function(){define("require exports tslib ../../../esriGeowConfig ../../components/BodyAppender ../../../sharing/util preact preact/hooks".split(" "),function(S,J,f,c,h,d,b,a){Object.defineProperty(J,"__esModule",{value:!0});
c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);var e=d.default.relativeToExplicitUrl("js/arcgisonline/img/welcome_placeholder.png");J.default=function(q){var t=q.portalUser,u=q.strings,g=q.onClose,m=(0,a.useState)(!1);q=m[0];var v=m[1],p=(0,a.useRef)();(0,a.useEffect)(function(){var l,n;p.current&&(null===(n=(l=p.current).setFocus)||void 0===n?void 0:n.call(l),setTimeout(function(){v(!0)},15))},[p.current]);m=function(){v(!1);g()};t="".concat(u.title.replace("${name}","ja"===
document.documentElement.lang?t.lastName:t.firstName));return(0,b.h)(h.default,{id:"trial-welcome"},(0,b.h)("calcite-modal",{ref:p,open:q,oncalciteModalClose:m,class:"bring-modal-to-front welcome-trial__modal",role:"dialog","aria-modal":"true","aria-labelledby":"trial-welcome__header"},(0,b.h)("h3",{slot:"header",id:"trial-welcome__header"},t),(0,b.h)("div",{slot:"content",class:"welcome-trial__content"},(0,b.h)("div",{class:"flex flex-space-between"},(0,b.h)("div",{class:"welcome-trial__description-column"},
(0,b.h)("label",{class:"avenir-demi"},u.explore),(0,b.h)("p",null,u.exploreDesc),(0,b.h)("calcite-link",{href:"https://www.esri.com/en-us/arcgis/products/arcgis-online/trial/trial-resources",kind:"brand",target:"_blank"},u.startLearning)),(0,b.h)("div",{class:"welcome-trial__description-column"},(0,b.h)("img",{src:e,width:"290",height:"180",alt:"",role:"presentation"}))),(0,b.h)("div",{class:"welcome-trial__bottom"},(0,b.h)("label",{class:"avenir-demi leader-1"},u.exploreMore),(0,b.h)("div",{class:"flex flex-center flex-space-evenly"},
(0,b.h)("calcite-button",{href:"".concat(c.default.newMapViewerUrl),kind:"brand",appearance:"outline",iconStart:"apps",width:"half",class:"margin-left-1 margin-right-1"},u.makeMaps),(0,b.h)("calcite-button",{href:"https://www.esri.com/en-us/arcgis/products/arcgis-online/trial/trial-resources?adumkts\x3dproduct\x26adupro\x3dArcGIS_Online\x26aduc\x3demail\x26adum\x3ddrip\x26utm_Source\x3demail\x26aduca\x3darcgis_online_promotions_demandgen\x26adut\x3d340804\x26adupt\x3dlead_gen\x26sf_id\x3d701f2000001BNtKAAW\x26aducp\x3d5763F8_body_cta#essential-apps",
kind:"brand",appearance:"outline",iconStart:"arcgis-online",width:"half",class:"margin-left-1 margin-right-1",target:"_blank"},u.exploreApps)))),(0,b.h)("calcite-button",{slot:"primary",kind:"brand",appearance:"transparent",scale:"l",onClick:m},u.dontShow)))}})},"url:arcgisonline/pages/item/widgets/templates/_loader.html":'\x3cdiv class\x3d"loader is-active padding-leader-3 padding-trailer-3"\x3e\r\n  \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"loader-text"\x3e${i18n.common.loading}\x3c/div\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/pages/organization/widgets/templates/_postUpgrade.html":"\x3cdiv\x3e\r\n  \x3cp\x3e${upgradeComplete}\x3c/p\x3e\r\n  \x3cp\x3e${completePostUpgrade}\x3c/p\x3e\r\n  \x3cp\x3e${hostingServerUpgrade}\x3c/p\x3e  \r\n\x3c/div\x3e","url:arcgisonline/pages/dijit/CategoryPicker/templates/CategoryPicker.html":'\x3cdiv class\x3d"leader-half"\x3e\r\n  \x3cdiv\r\n    class\x3d"js-add-category-error alert alert-red font-size--3 padding-leader-quarter padding-trailer-quarter trailer-quarter"\r\n  \x3e\r\n    ${i18n.contentCategories.addCategoryError}\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"category-picker"\x3e\r\n    \x3cdiv class\x3d"font-size--1 category-picker__chip-wrap js-category-chip-wrap" data-dojo-attach-point\x3d"_chipWrap"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"hide category-picker__default-text font-size--1" data-dojo-attach-point\x3d"defaultTextContainer"\x3e${defaultText}\x3c/div\x3e\r\n    \x3cdiv class\x3d"dropdown js-add-category-dropdown leader-half trailer-half category-picker__dropdown"\x3e\r\n      \x3cspan class\x3d"font-size--1 category-picker__dropdown-btn"\x3e\r\n        \x3cbutton\r\n          class\x3d"btn-link btn-link-off-black font-size--1 js-add-category-dropdown-button"\r\n          tabindex\x3d"0"\r\n          aria-haspopup\x3d"true"\r\n          aria-expanded\x3d"false"\r\n          type\x3d"button"\r\n        \x3e\r\n          \x3cspan class\x3d"text-green"\x3e${!icons.inline.plus-f.16}\x3c/span\r\n          \x3e${i18n.contentCategories.addCategory}${!icons.inline-end.chevron-down.16}\r\n        \x3c/button\x3e\r\n      \x3c/span\x3e\r\n      \x3cdiv class\x3d"dropdown-menu leader-quarter category-picker__dropdown-menu"\x3e\r\n        \x3cdiv class\x3d"category-picker-search-wrap"\x3e\r\n          \x3cinput\r\n            type\x3d"text"\r\n            class\x3d"add-category-input js-add-category-input leader-0"\r\n            placeholder\x3d"${i18n.contentCategories.filterCategories}"\r\n            aria-label\x3d"${i18n.contentCategories.addCategoryToItem}"\r\n          /\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv\r\n          class\x3d"js-add-category-dropdown-menu category-picker-dropdown-nav padding-leader-half padding-trailer-half padding-left-half padding-right-half filter-tree--always-open"\r\n          role\x3d"menu"\r\n        \x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/CategoryPicker/templates/Category.html":'\x3cli class\x3d"js-category-picker-item filter-tree-item category-picker--add-category-dropdown ${isActive}" data-category-name\x3d"${title}" data-category-path\x3d"${path}" role\x3d"treeitem"\x3e\r\n  \x3cspan class\x3d"category-picker--add-category-dropdown-icon"\x3e${icons.check.16}\x3c/span\x3e\r\n  \x3ca href\x3d"#" class\x3d"filter-tree-link category-picker--add-category-dropdown-link js-add-category-dropdown-link ${isSelected}" data-category-name\x3d"${title}" data-category-path\x3d"${path}"\x3e${title}\x3c/a\x3e\r\n  ${children}\r\n\x3c/li\x3e\r\n',
"url:arcgisonline/pages/dijit/CategoryPicker/templates/CategoryGroup.html":'\x3cul class\x3d"filter-tree" role\x3d"${role}"\x3e${categories}\x3c/ul\x3e',"url:arcgisonline/pages/dijit/CategoryPicker/templates/CategoryChip.html":'\x3cspan class\x3d"label filter-label js-category-chip" data-category-name\x3d"${category}"\x3e\r\n  ${category:formatCategoryChip}\r\n  \x3cbutton class\x3d"js-category-chip-remove btn-link filter-label-remove margin-left-quarter right" aria-label\x3d"${removeText}" data-category-name\x3d"${category}"\x3e${icons.x.16}\x3c/button\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/InlineEdit/templates/InlineEdit.html":'\x3cdiv\x3e\r\n    \x3ch1 class\x3d"${titleClass} break-word flex text-ellipsis" data-edit-id\x3d"name" id\x3d"itemtitle" data-dojo-attach-point\x3d"_textView"\x3e\r\n        \x3cspan class\x3d"if-name js-view subnav-title__name" id\x3d"${titleId}"\x3e\x3c/span\x3e\r\n        \x3cbutton class\x3d"js-inline-edit btn btn-transparent padding-leader-quarter font-size--3 inline-edit-pencil ${editButtonClasses}" data-edit-id\x3d"title" aria-label\x3d"${inputLabel}"\x3e${!icons.edit.16}\x3c/button\x3e\r\n    \x3c/h1\x3e\r\n    \x3cform class\x3d"hide ${formClass}" data-edit-id\x3d"name" data-dojo-attach-point\x3d"_form"\x3e\r\n        \x3cdiv class\x3d"leader-0 flex flex-1"\x3e\r\n            \x3cinput maxlength\x3d"250" class\x3d"${inputClass} flex-1 margin-right-1 margin-left-0" name\x3d"name" type\x3d"text" placeholder\x3d"${placeholder}"\r\n                value\x3d"${value}" data-dojo-attach-point\x3d"_input" autocomplete\x3d"off"\x3e\r\n            \x3cspan class\x3d"flex-0"\x3e\r\n                \x3cbutton class\x3d"${saveButtonClasses}" type\x3d"submit" data-dojo-attach-point\x3d"_saveButton"\x3e${i18n.common.save}\x3c/button\x3e\r\n            \x3c/span\x3e\r\n            \x3cspan class\x3d"flex-0"\x3e\r\n                \x3cbutton class\x3d"${cancelButtonClasses}" data-dojo-attach-point\x3d"_cancelButton"\x3e${i18n.common.cancel}\x3c/button\x3e\r\n            \x3c/span\x3e\r\n            \x3cspan class\x3d"inline-edit-save-loader hide" data-dojo-attach-point\x3d"_saveLoader"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n    \x3c/form\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/InlineEdit/templates/inlineEditTextArea.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_textView"\x3e\r\n        \x3cbutton class\x3d"js-inline-edit right btn-link btn-link-darker-gray font-size--3 ${editButtonUpdatePermissionClasses}" aria-label\x3d"${inputLabel}"\x3e\r\n            ${!icons.inline.edit.16} ${i18n.common.edit}\r\n        \x3c/button\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cform data-dojo-attach-point\x3d"_form" class\x3d"hide" data-edit-id\x3d"snippet" aria-live\x3d"polite"\x3e\r\n        \x3clabel class\x3d"trailer-quarter" for\x3d"${inputId}"\x3e\r\n            ${inputLabel}\r\n            \x3ctextarea\r\n                id\x3d"${inputId}"\r\n                data-dojo-attach-point\x3d"_input"\r\n                name\x3d"snippet"\r\n                rows\x3d"${rows}"\r\n                class\x3d"js-snippet-input display-block resize-v"\x3e${value}\x3c/textarea\x3e\r\n        \x3c/label\x3e\r\n        \x3cdiv class\x3d"flex"\x3e\r\n            \x3cdiv class\x3d"flex-1"\x3e\r\n                \x3cdiv class\x3d"hide inline-edit__characters-left" data-dojo-attach-point\x3d"_charactersLeft"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"leader-quarter"\x3e\r\n                \x3cspan class\x3d"inline-edit-textarea__save-loader margin-right-half hide" data-dojo-attach-point\x3d"_saveLoader"\x3e\x3c/span\x3e\r\n                \x3cbutton data-dojo-attach-point\x3d"_saveButton" type\x3d"submit" class\x3d"btn"\x3e${i18n.common.save}\x3c/button\x3e\r\n                \x3cbutton data-dojo-attach-point\x3d"_cancelButton" class\x3d"btn btn-clear btn-two"\x3e${i18n.common.cancel}\x3c/button\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/form\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/InlineEdit/templates/inlineEditFieldValueType.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"_textView"\x3e\r\n    \x3cbutton class\x3d"js-inline-edit right btn-link btn-link-darker-gray font-size--3 ${editButtonUpdatePermissionClasses}" aria-label\x3d"${inputLabel}"\x3e${!icons.inline.edit.16}${i18n.common.edit}\x3c/button\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cform data-dojo-attach-point\x3d"_form" class\x3d"hide" data-edit-id\x3d"snippet" aria-live\x3d"polite"\x3e\r\n    \x3clabel class\x3d"trailer-half"\x3e\r\n      ${inputLabel}\r\n      \x3cselect class\x3d"dropdown-change" data-dojo-attach-point\x3d"_input"\x3e\x3c/select\x3e\r\n    \x3c/label\x3e\r\n    \x3cdiv class\x3d"text-right"\x3e\r\n        \x3cspan class\x3d"inline-edit-textarea__save-loader margin-right-half hide" data-dojo-attach-point\x3d"_saveLoader"\x3e\x3c/span\x3e\r\n      \x3cbutton data-dojo-attach-point\x3d"_saveButton" type\x3d"submit" class\x3d"btn"\x3e${i18n.common.save}\x3c/button\x3e\r\n      \x3cbutton data-dojo-attach-point\x3d"_cancelButton" class\x3d"btn btn-clear btn-two"\x3e${i18n.common.cancel}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/form\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/InlineEdit/templates/inlineEditRichText.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_textView" class\x3d"trailer-2"\x3e\r\n        \x3cbutton class\x3d"js-inline-edit btn-link btn-link-darker-gray ${editButtonUpdatePermissionClasses} font-size--3 right" aria-label\x3d"${inputLabel}"\x3e${!icons.inline.edit.16}${i18n.common.edit}\x3c/button\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cform data-dojo-attach-point\x3d"_form" action\x3d"" class\x3d"hide leader-1" aria-live\x3d"polite"\x3e\r\n        \x3clabel class\x3d"trailer-half" for\x3d"${inputId}"\x3e${inputLabel}\x3c/label\x3e\r\n        \x3cdiv id\x3d"${inputId}" class\x3d"rich-text" data-dojo-attach-point\x3d"_inputEl"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"text-right leader-half"\x3e\r\n            \x3cbutton data-dojo-attach-point\x3d"_saveButton" type\x3d"submit" class\x3d"btn"\x3e${i18n.common.save}\x3c/button\x3e\r\n            \x3cbutton data-dojo-attach-point\x3d"_cancelButton" class\x3d"btn btn-clear btn-two"\x3e${i18n.common.cancel}\x3c/button\x3e\r\n        \x3c/div\x3e\r\n    \x3c/form\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/InlineEdit/templates/inlineEditCustom.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_textView" class\x3d"leader-1 padding-leader-half"\x3e\r\n        \x3cbutton class\x3d"js-inline-edit btn-link btn-link-darker-gray if-can-update font-size--3 right" aria-label\x3d"${inputLabel}"\x3e${!icons.inline.edit.16}${i18n.common.edit}\x3c/button\x3e\r\n        \x3ch5 class\x3d"trailer-half"\x3e\r\n            ${viewTitle}\r\n        \x3c/h5\x3e\r\n        \x3cp class\x3d"js-view break-word"\x3e\x3c/p\x3e\r\n    \x3c/div\x3e\r\n    \x3cform data-dojo-attach-point\x3d"_form" action\x3d"" class\x3d"hide ${formClass}" aria-live\x3d"polite"\x3e\r\n        ${formTitle}\r\n        \x3cdiv data-dojo-attach-point\x3d"_inputEl"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"text-right ${buttonsClass}"\x3e\r\n            \x3cbutton data-dojo-attach-point\x3d"_saveButton" type\x3d"submit" class\x3d"btn"\x3e${i18n.common.save}\x3c/button\x3e\r\n            \x3cbutton data-dojo-attach-point\x3d"_cancelButton" class\x3d"btn btn-clear btn-two"\x3e${i18n.common.cancel}\x3c/button\x3e\r\n        \x3c/div\x3e\r\n    \x3c/form\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/InlineEdit/templates/inlineEditLayerRename.html":'\x3cdiv\x3e\r\n    \x3ch5 class\x3d"font-size-1 trailer-0 leader-0 sub-nav-title break-word" data-edit-id\x3d"name" id\x3d"itemtitle" data-dojo-attach-point\x3d"_textView"\x3e\r\n        \x3cspan class\x3d"padding-right-1 gutter-right-1 rtl-gutter-right-0"\x3e\r\n            \x3ca target\x3d"_blank" href\x3d"${layerUrl}" class\x3d"if-name js-view"\x3e\x3c/a\x3e\r\n        \x3c/span\x3e\r\n        \x3cbutton class\x3d"js-inline-edit right btn-link font-size--3 btn-link-darker-gray if-can-renameLayer" aria-label\x3d"${inputLabel}"\x3e${!icons.inline.edit.16}${i18n.common.edit}\x3c/button\x3e\r\n    \x3c/h5\x3e\r\n    \x3cform class\x3d"column-12 padding-leader-half padding-trailer-half hide" data-edit-id\x3d"name" data-dojo-attach-point\x3d"_form"\x3e\r\n        \x3cdiv class\x3d"input-group leader-0"\x3e\r\n            \x3cinput maxlength\x3d"250" class\x3d"input-group-input" name\x3d"name" type\x3d"text" placeholder\x3d"${placeholder}"\r\n                value\x3d"${value}" data-dojo-attach-point\x3d"_input"\x3e\r\n            \x3cspan class\x3d"input-group-button padding-right-quarter"\x3e\r\n                \x3cbutton class\x3d"btn" type\x3d"submit" data-dojo-attach-point\x3d"_saveButton"\x3e${i18n.common.save}\x3c/button\x3e\r\n            \x3c/span\x3e\r\n            \x3cspan class\x3d"input-group-button"\x3e\r\n                \x3cbutton class\x3d"btn-link btn btn-clear btn-two cancel-title-edit" data-dojo-attach-point\x3d"_cancelButton"\x3e${i18n.common.cancel}\x3c/button\x3e\r\n            \x3c/span\x3e\r\n            \x3cspan class\x3d"inline-edit-save-loader hide" data-dojo-attach-point\x3d"_saveLoader"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n    \x3c/form\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/InlineEdit/templates/inlineEditLayerRenameSubnav.html":'\x3cdiv class\x3d"flex-1 flex"\x3e\r\n    \x3ch5 class\x3d"trailer-0 leader-0 break-word flex" data-edit-id\x3d"name" id\x3d"itemtitle" data-dojo-attach-point\x3d"_textView"\x3e\r\n        \x3cspan class\x3d"padding-right-1 gutter-right-1 rtl-gutter-right-0 js-view subnav-breadcrumb flex-1 text-ellipsis"\x3e\x3c/span\x3e\r\n        \x3cbutton class\x3d"js-inline-edit right btn-link font-size--3 btn-link-white" aria-label\x3d"${inputLabel}"\x3e${!icons.edit.16}\x3c/button\x3e\r\n    \x3c/h5\x3e\r\n    \x3cform class\x3d"hide ${formClass}" data-edit-id\x3d"name" data-dojo-attach-point\x3d"_form"\x3e\r\n        \x3cdiv class\x3d"leader-0 flex flex-1"\x3e\r\n            \x3cinput maxlength\x3d"250" class\x3d"${inputClass} flex-1 margin-right-1 margin-left-0" name\x3d"name" type\x3d"text" placeholder\x3d"${placeholder}"\r\n                value\x3d"${value}" data-dojo-attach-point\x3d"_input" autocomplete\x3d"off"\x3e\r\n            \x3cspan class\x3d"flex-0"\x3e\r\n                \x3cbutton class\x3d"${saveButtonClasses}" type\x3d"submit" data-dojo-attach-point\x3d"_saveButton"\x3e${i18n.common.save}\x3c/button\x3e\r\n            \x3c/span\x3e\r\n            \x3cspan class\x3d"flex-0"\x3e\r\n                \x3cbutton class\x3d"${cancelButtonClasses}" data-dojo-attach-point\x3d"_cancelButton"\x3e${i18n.common.cancel}\x3c/button\x3e\r\n            \x3c/span\x3e\r\n            \x3cspan class\x3d"inline-edit-save-loader hide" data-dojo-attach-point\x3d"_saveLoader"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n    \x3c/form\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/InlineEdit/templates/inlineEditNotebookTags.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"_textView"\x3e\r\n    \x3cbutton\r\n      class\x3d"js-inline-edit btn-link btn-link-darker-gray if-can-update font-size--3 right"\r\n      aria-label\x3d"${inputLabel}"\r\n    \x3e\r\n      ${!icons.inline.edit.16}${i18n.common.edit}\r\n    \x3c/button\x3e\r\n    \x3ch4 class\x3d"panel-header if-tag if-can-update"\x3e${viewTitle}\x3c/h5\x3e\r\n    \x3cp class\x3d"js-view"\x3e\x3c/p\x3e\r\n  \x3c/div\x3e\r\n  \x3cform data-dojo-attach-point\x3d"_form" action\x3d"" class\x3d"hide ${formClass}" aria-live\x3d"polite"\x3e\r\n    ${formTitle}\r\n    \x3cdiv data-dojo-attach-point\x3d"_inputEl"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"text-right ${buttonsClass}"\x3e\r\n      \x3cbutton data-dojo-attach-point\x3d"_saveButton" type\x3d"submit" class\x3d"btn"\x3e${i18n.common.save}\x3c/button\x3e\r\n      \x3cbutton data-dojo-attach-point\x3d"_cancelButton" class\x3d"btn btn-clear btn-two"\x3e${i18n.common.cancel}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/form\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/InlineEdit/templates/inlineEditNumericChange.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_textView"\x3e\r\n      \x3ccalcite-label\x3e ${inputLabel}\r\n        \x3ccalcite-input class\x3d"js-inlineEditNumericChangeReadOnlyValue ${inputClass}" read-only type\x3d"number"\x3e\r\n          \x3ccalcite-button id\x3d"${inputId}_numeric-value-edit-button" class\x3d"js-inline-edit ${editButtonUpdatePermissionClasses}" icon-start\x3d"pencil" kind\x3d"inverse" appearance\x3d"outline-fill" slot\x3d"action" aria-label\x3d"${inputLabel}"\x3e\x3c/calcite-button\x3e\r\n        \x3c/calcite-input\x3e\r\n      \x3c/calcite-label\x3e\r\n      \x3ccalcite-tooltip reference-element\x3d"${inputId}_numeric-value-edit-button" label\x3d"${i18n.common.edit}"\x3e\x3cspan\x3e${i18n.common.edit}\x3c/span\x3e\x3c/calcite-tooltip\x3e\r\n    \x3c/div\x3e\r\n    \x3cform data-dojo-attach-point\x3d"_form" class\x3d"hide" data-edit-id\x3d"snippet" aria-live\x3d"polite"\x3e\r\n      \x3ccalcite-label\x3e ${inputLabel}\r\n        \x3ccalcite-input type\x3d"number" data-dojo-attach-point\x3d"_input"\x3e\x3c/calcite-input\x3e\r\n        \x3cdiv class\x3d"save-and-cancel"\x3e\r\n            \x3cspan class\x3d"inline-edit-textarea__save-loader margin-right-half hide" data-dojo-attach-point\x3d"_saveLoader"\x3e\x3c/span\x3e\r\n            \x3ccalcite-button data-dojo-attach-point\x3d"_cancelButton" appearance\x3d"outline-fill" width\x3d"half" class\x3d"cancel-button"\x3e${i18n.common.cancel}\x3c/calcite-button\x3e\r\n            \x3ccalcite-button data-dojo-attach-point\x3d"_saveButton" type\x3d"submit" width\x3d"half" class\x3d"save-button"\x3e${i18n.common.save}\x3c/calcite-button\x3e\r\n        \x3c/div\x3e\r\n      \x3c/calcite-label\x3e\r\n    \x3c/form\x3e\r\n  \x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/SubNav/templates/_option.html":'\x3ca\r\n  href\x3d"#${id}"\r\n  data-tab\x3d"${id}"\r\n  data-logClick\x3d"${logClick}"\r\n  role\x3d"tab"\r\n  aria-selected\x3d"false"\r\n  class\x3d"js-subnav-link subnav-link ${isActive} ${show:hide} ${classes:empty}"\r\n  aria-controls\x3d"tabcontent"\x3e\r\n  \x3cspan class\x3d"subnav-link__text no-pointer"\x3e${label}\x3c/a\x3e\r\n',"url:arcgisonline/pages/dijit/SubNav/templates/_title.html":'\x3cdiv class\x3d"js-subnav-edit subnav-edit flex flex-column flex-1 flex-align-center break-word"\x3e\r\n  \x3ch1 class\x3d"subnav-title ${_titleTypeSize}" id\x3d"pagetitle"\x3e${titleText}\x3c/h1\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/SubNav/templates/_paths.html":'\x3cdiv class\x3d"flex flex-1 flex-align-center break-word js-subnav-paths"\x3e\r\n  ${paths}\r\n\x3c/div\x3e\r\n',"url:arcgisonline/pages/dijit/SubNav/templates/_path.html":'\x3ca href\x3d"#" class\x3d"subnav-breadcrumb js-subnav-path ${lastPath} text-ellipsis"\x3e\r\n  \x3cspan class\x3d"${showBack} inline-block padding-right-quarter subnav-breadcrumb-back"\x3e${icons.arrow-left.24}\x3c/span\x3e${title}\r\n\x3c/a\x3e\r\n',"url:arcgisonline/pages/dijit/SubNav/templates/SubNav.html":'\x3cheader class\x3d"subnav" role\x3d"banner"\x3e\r\n  \x3cdiv class\x3d"subnav-wrap grid-container flex phone-flex-column js-subnav-wrap"\x3e\r\n    \x3cdiv class\x3d"flex flex-1 flex-align-center phone-flex-column ${_titleTypeSize}"\x3e\r\n      \x3cspan class\x3d"js-subnav-title-wrap flex-1 flex"\x3e${!titleHTML}\x3c/span\x3e\r\n      \x3cbutton class\x3d"js-subnav-expand subnav-expand ${hideLinks}" aria-label\x3d"${i18n.common.toggleSubNav}" aria-expanded\x3d"false"\x3e\r\n        \x3cspan class\x3d"js-subnav-current-label subnav-expand__current-label no-pointer inline-block margin-right-half margin-left-0"\x3e${activeLabel}\x3c/span\x3e\r\n        \x3csvg class\x3d"subnav-expand-icon no-pointer" xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\r\n          \x3cpath fill\x3d"#FFF" d\x3d"M8 11.5l-7-7h14z"/\x3e\r\n        \x3c/svg\x3e\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cnav class\x3d"subnav-links ${hideLinks} js-subnav-links flex-0 flex" role\x3d"tablist" aria-labelledby\x3d"pagetitle"\x3e${!linksHTML}\x3c/nav\x3e\r\n  \x3c/div\x3e\r\n\x3c/header\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/_status.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"licenses__section-tabs-container js-tabs-container flex"\x3e\r\n    \x3cdiv class\x3d"flex licenses__section-tabs"\x3e\r\n      \x3cbutton data-dojo-attach-point\x3d"dashboardTab" class\x3d"btn-link margin-right-3 licenses__tab-btn"\x3e\r\n        ${i18n.myOrganization.statusTab.dashboard}\r\n      \x3c/button\x3e\r\n      \x3cbutton data-dojo-attach-point\x3d"reportsTab" class\x3d"btn-link margin-right-3 tab-selected licenses__tab-btn"\x3e\r\n        ${i18n.myOrganization.statusTab.reports} \x3cspan class\x3d"margin-left-half trailer-quarter font-size--3 avenir-regular badge badge--new hide" data-dojo-attach-point\x3d"newBadge"\x3e${i18n.common.newLabel}\x3c/span\x3e\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv id\x3d"main-content-area"\x3e\r\n    \x3ciframe\r\n      id\x3d"statusIframe"\r\n      class\x3d"org-status-iframe flex-1 hide"\r\n      title\x3d""\r\n      name\x3d"activity-dashboard"\r\n      cellspacing\x3d"0"\r\n      scrolling\x3d"no"\r\n      data-dojo-attach-point\x3d"dashboard"\r\n    \x3e\x3c/iframe\x3e\r\n    \x3cdiv class\x3d"js-reports-section"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/Reports/templates/Reports.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"reports__control-bar-wrapper"\x3e\r\n    \x3cdiv class\x3d"js-control-bar"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"grid-container leader-1 reports-tab" data-dojo-attach-point\x3d"reportsTab"\x3e\r\n    \x3cdiv class\x3d"loader full-width leader-2 is-active" data-dojo-attach-point\x3d"loader"\x3e\r\n      \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"flex hide" data-dojo-attach-point\x3d"reportsContent"\x3e\r\n      \x3cdiv class\x3d"js-filters-panel"\x3e\r\n        \x3cdiv class\x3d"dropdown js-dropdown full-width trailer-1 create-report-dropdown"\x3e\r\n          \x3cbutton class\x3d"btn btn-fill dropdown-btn js-dropdown-toggle" tabindex\x3d"0" aria-haspopup\x3d"true" aria-expanded\x3d"false"\x3e\r\n            ${i18n.createReport}\r\n            \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"32" height\x3d"32" viewBox\x3d"0 0 32 32" class\x3d"svg-icon"\x3e\x3cpath d\x3d"M28 9v5L16 26 4 14V9l12 12L28 9z"/\x3e\x3c/svg\x3e\r\n          \x3c/button\x3e\r\n          \x3cdiv class\x3d"dropdown-menu full-width"\x3e\r\n            \x3cbutton class\x3d"dropdown-link js-action-createReport" data-action\x3d"createReport"\x3e\r\n              ${i18n.createReportDropdown.single}\r\n              \x3cspan class\x3d"description"\x3e${i18n.createReportDropdown.singleText}\x3c/span\x3e\r\n            \x3c/button\x3e\r\n            \x3cbutton class\x3d"dropdown-link js-action-scheduleReport" data-action\x3d"scheduleReport"\x3e\r\n              ${i18n.createReportDropdown.schedule}\r\n              \x3cspan class\x3d"description"\x3e${i18n.createReportDropdown.scheduleText}\x3c/span\x3e\r\n            \x3c/button\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cbutton class\x3d"btn btn-fill btn-clear trailer-1 hide" data-dojo-attach-point\x3d"scheduledReportsBtn"\x3e\r\n          ${i18n.scheduledReports}\r\n        \x3c/button\x3e\r\n        \x3cbutton class\x3d"btn btn-fill btn-clear trailer-1 hide" data-dojo-attach-point\x3d"processingBtn"\x3e\r\n          ${i18n.processingReports}\r\n        \x3c/button\x3e\r\n        \x3ch4 class\x3d"trailer-half font-size--1 avenir-demi tablet-hide"\x3e${i18n.filters}\x3c/h4\x3e\r\n        \x3c!-- Filters --\x3e\r\n        \x3cdiv class\x3d"js-filters org-filters"\x3e\r\n          \x3cdiv class\x3d"filters--accordion"\x3e\r\n            \x3cdiv class\x3d"js-type-filter"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"js-created-filter"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Learn more --\x3e\r\n        \x3ccalcite-notice open width\x3d"full" class\x3d"leader-1"\x3e\r\n          \x3cdiv slot\x3d"message" class\x3d"reports__documentation"\x3e${i18n.reportsDocumentation}\x3c/div\x3e\r\n      \x3c/calcite-notice\x3e\r\n      \x3c/div\x3e\r\n      \x3cmain class\x3d"view-wrap js-view-wrap"\x3e\r\n        \x3cdiv class\x3d"js-search-input"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"flex leader-1 trailer-half reports__view-info"\x3e\r\n          \x3cdiv\r\n            class\x3d"padding-right-1 padding-left-0 padding-leader-quarter padding-trailer-quarter font-size--2 flex-0 break-word border-box text-ellipsis"\r\n            data-dojo-attach-point\x3d"rangeText"\r\n          \x3e\r\n            \x3cspan data-dojo-attach-point\x3d"pageRange"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"js-filter-status"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"text-center" data-dojo-attach-point\x3d"noResults"\x3e\r\n          \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 256 256" width\x3d"256"\x3e\r\n            \x3cpath\r\n              fill\x3d"#ccc"\r\n              d\x3d"M149.375 182.444l56.463-56.471-25.376-25.376 5.523-14.541-59.827-22.726L110.828 48H56v124h18.365l12.437 4.724 34.182 34.101 15.33-15.294 7.07 2.686 5.164-13.597zm50.806-56.472l-47.34 47.35 26.064-68.626zM112 54.828L141.172 84H112zM60 52h48v36h36v80H60zm60.984 153.17L95.95 180.199l36.263 13.775zm20.081-12.113L85.632 172H148V85.172L133.059 70.23l47.766 18.144-34.628 91.171z"\r\n            /\x3e\r\n          \x3c/svg\x3e\r\n          \x3cdiv class\x3d"hide" data-dojo-attach-point\x3d"noReportsEl"\x3e\r\n            \x3ch3\x3e${i18n.noReports}\x3c/h3\x3e\r\n            \x3cp class\x3d"font-size--2 text-constrain margin-auto" data-dojo-attach-point\x3d"getStartedEl"\x3e${i18n.getStarted}\x3c/p\x3e\r\n          \x3c/div\x3e\r\n          \x3cp class\x3d"hide text-constrain margin-auto" data-dojo-attach-point\x3d"noResultsEl"\x3e${i18n.noResults}\x3c/p\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv\r\n          class\x3d"content-table-view js-table-wrap table-select js-view reports__table"\r\n          role\x3d"table"\r\n          data-dojo-attach-point\x3d"table"\r\n        \x3e\r\n          \x3cdiv class\x3d"table-select-head js-table-header" role\x3d"rowgroup"\x3e\r\n            \x3cdiv class\x3d"table-select-row table-select-row-header" role\x3d"row" data-dojo-attach-point\x3d"tableHeader"\x3e\r\n              \x3cspan class\x3d"table-select-cell table-select-cell-th" role\x3d"columnheader"\x3e\r\n                \x3cbutton\r\n                  class\x3d"table-select-cell-sort is-ascending js-table-sort-header"\r\n                  data-sort\x3d"title"\r\n                  data-sort-order\x3d"asc"\r\n                  aria-sort\x3d"ascending"\r\n                \x3e\r\n                  ${i18n.title}\r\n                \x3c/button\x3e\r\n              \x3c/span\x3e\r\n              \x3cspan class\x3d"table-select-cell table-select-cell-th" role\x3d"columnheader"\x3e\r\n                \x3cbutton\r\n                  class\x3d"table-select-cell-sort js-table-sort-header"\r\n                  data-sort\x3d"created"\r\n                  data-sort-order\x3d"desc"\r\n                  aria-sort\x3d"descending"\r\n                \x3e\r\n                  ${i18n.created}\r\n                \x3c/button\x3e\r\n              \x3c/span\x3e\r\n              \x3cspan class\x3d"table-select-cell table-select-cell-th" role\x3d"columnheader"\x3e\r\n                \x3cbutton\r\n                  class\x3d"table-select-cell-sort js-table-sort-header"\r\n                  data-sort\x3d"owner"\r\n                  data-sort-order\x3d"asc"\r\n                  aria-sort\x3d"ascending"\r\n                \x3e\r\n                  ${i18n.owner}\r\n                \x3c/button\x3e\r\n              \x3c/span\x3e\r\n              \x3cspan class\x3d"table-select-cell table-select-cell-th org-members__action-column" role\x3d"columnheader"\x3e\r\n                \x3clabel class\x3d"table-select-cell-sort table-select-cell-action"\x3e\x26nbsp;\x3c/label\x3e\r\n              \x3c/span\x3e\r\n              \x3cspan class\x3d"table-select-cell table-select-cell-th org-members__action-column" role\x3d"columnheader"\x3e\r\n                \x3clabel class\x3d"table-select-cell-sort table-select-cell-action"\x3e\x26nbsp;\x3c/label\x3e\r\n              \x3c/span\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"reports__cards" data-dojo-attach-point\x3d"cardsContainer"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"js-pagination"\x3e\x3c/div\x3e\r\n      \x3c/main\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/Reports/templates/ReportRow.html":'\r\n\x3cdiv class\x3d"table-select-row flex table-select-row-avatar" role\x3d"row"\x3e\r\n  \x3cspan class\x3d"table-select-cell flex-1 overflow-visible" role\x3d"cell" data-dojo-attach-point\x3d"titleCol"\x3e\r\n    \x3cdiv class\x3d"flex flex-align-center"\x3e\r\n      \x3ccalcite-icon data-dojo-attach-point\x3d"fileIcon" icon\x3d"file-text" scale\x3d"s"\x3e\x3c/calcite-icon\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"warningIcon" class\x3d"hide tooltip tooltip-bottom-left flex-center" aria-label\x3d"${i18n.processingOverlay.reportFailed}"\x3e\r\n        \x3ccalcite-icon icon\x3d"exclamation-mark-triangle-f" scale\x3d"s" class\x3d"text-red"\x3e\x3c/calcite-icon\x3e\r\n      \x3c/div\x3e\r\n      \x3ca href\x3d"${detailsLink}" title\x3d"${report.title}" class\x3d"margin-left-half text-ellipsis" data-dojo-attach-point\x3d"titleEl"\x3e${report.title}\x3c/a\x3e\r\n      \x3cdiv class\x3d"margin-left-half text-ellipsis" title\x3d"${report.title}" data-dojo-attach-point\x3d"noLinkTitle"\x3e${report.title}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/span\x3e\r\n  \x3cspan class\x3d"table-select-cell flex-1" role\x3d"cell"\x3e${report.created:fullDate}\x3c/span\x3e\r\n  \x3cspan class\x3d"table-select-cell flex-1" role\x3d"cell"\x3e\r\n    \x3cdiv class\x3d"js-report-owner"\x3e\x3c/div\x3e\r\n  \x3c/span\x3e\r\n  \x3cspan class\x3d"table-select-cell org-members__action-column" role\x3d"cell" data-dojo-attach-point\x3d"downloadCol"\x3e\r\n    \x3cbutton class\x3d"btn btn-link btn-link-darker-gray flex flex-align-center tooltip" aria-label\x3d"${i18n.download}" data-dojo-attach-point\x3d"downloadBtn"\x3e\r\n      \x3ccalcite-icon icon\x3d"download-to" scale\x3d"s"\x3e\x3c/calcite-icon\x3e\r\n    \x3c/button\x3e\r\n  \x3c/span\x3e\r\n  \x3cspan class\x3d"table-select-cell org-members__action-column hide" role\x3d"cell" data-dojo-attach-point\x3d"retryCol"\x3e\r\n    \x3cbutton class\x3d"btn btn-link btn-link-darker-gray flex flex-align-center tooltip hide" aria-label\x3d"${i18n.retry}" data-dojo-attach-point\x3d"retryBtn"\x3e\r\n      \x3ccalcite-icon icon\x3d"redo" scale\x3d"s"\x3e\x3c/calcite-icon\x3e\r\n    \x3c/button\x3e\r\n  \x3c/span\x3e\r\n  \x3cspan\r\n    class\x3d"table-select-cell org-members__action-column org-members__action-column-body table-select-cell-overflow"\r\n    role\x3d"cell"\r\n    data-dojo-attach-point\x3d"actionsCol"\r\n  \x3e\r\n    \x3cdiv class\x3d"dropdown dropdown-up js-dropdown" data-dojo-attach-point\x3d"_actionsContainer"\x3e\r\n      \x3cbutton\r\n        class\x3d"btn btn-link btn-link-darker-gray leader-quarter js-dropdown-toggle"\r\n        tabindex\x3d"0"\r\n        aria-haspopup\x3d"true"\r\n        aria-expanded\x3d"false"\r\n        data-dojo-attach-point\x3d"actionsBtn"\r\n        aria-label\x3d"${i18n.openActions}"\r\n      \x3e\r\n        \x3ccalcite-icon icon\x3d"ellipsis" scale\x3d"s"\x3e\x3c/calcite-icon\x3e\r\n      \x3c/button\x3e\r\n      \x3cnav class\x3d"dropdown-menu dropdown-right" role\x3d"menu"\x3e\r\n        \x3cbutton class\x3d"dropdown-link" role\x3d"menuitem" data-dojo-attach-point\x3d"renameBtn"\x3e${i18n.rename}\x3c/button\x3e\r\n        \x3cbutton class\x3d"dropdown-link" role\x3d"menuitem" data-dojo-attach-point\x3d"viewDetailsBtn"\x3e${i18n.viewDetails}\x3c/button\x3e\r\n        \x3cbutton class\x3d"dropdown-link" role\x3d"menuitem" data-dojo-attach-point\x3d"deleteBtn"\x3e${i18n.deleteLabel}\x3c/button\x3e\r\n      \x3c/nav\x3e\r\n    \x3c/div\x3e\r\n  \x3c/span\x3e\r\n\x3c/div\x3e\r\n\r\n',
"url:arcgisonline/pages/organization/widgets/Reports/templates/ReportOwner.html":'\x3cbutton class\x3d"btn-link flex flex-align-center font-size--1 owner-text-ellipsis" title\x3d"${report.owner}"\x3e\r\n  \x3cdiv class\x3d"js-thumb"\x3e\x3c/div\x3e\r\n  \x3cspan class\x3d"text-ellipsis"\x3e${report.owner}\x3c/span\x3e\r\n\x3c/button\x3e\r\n',"url:arcgisonline/pages/organization/widgets/Reports/templates/ReportCard.html":'\x3cdiv class\x3d"trailer-half report-card"\x3e\r\n  \x3cdiv class\x3d"avenir-demi report-card__title" data-dojo-attach-point\x3d"titleEl"\x3e${report.title}\x3c/div\x3e\r\n  \x3cdiv class\x3d"report-card__owner"\x3e\r\n    \x3cdiv class\x3d"js-report-owner"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/Reports/templates/ReportPopup.html":'\x3cdiv class\x3d"report-popup"\x3e\r\n  \x3cdiv class\x3d"report-popup__mask"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"report-popup__panel"\x3e\r\n    \x3cdiv class\x3d"report-popup__title flex flex-align-center"\x3e\r\n      \x3cdiv class\x3d"flex-1 font-size-1"\x3e${report.title}\x3c/div\x3e\r\n      \x3cdiv class\x3d"flex-0"\x3e\x3cbutton class\x3d"btn-link btn-link-darker-gray" data-dojo-attach-point\x3d"closeBtn" aria-label\x3d"${i18n.close}"\x3e${!icons.x.16}\x3c/button\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"report-popup__owner-created flex"\x3e\r\n      \x3cdiv class\x3d"report-popup__owner margin-right-1 flex-1"\x3e\r\n        \x3cdiv class\x3d"font-size--1"\x3e${i18n.owner}\x3c/div\x3e\r\n        \x3cdiv class\x3d"js-report-owner"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"report-popup__created flex-1"\x3e\r\n        \x3cdiv class\x3d"font-size--1"\x3e${i18n.created}\x3c/div\x3e\r\n        \x3cdiv\x3e${report.created:fullDate}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"report-popup__actions flex-column flex-center"\x3e\r\n      \x3cbutton class\x3d"btn-link trailer-half" data-dojo-attach-point\x3d"downloadBtn"\x3e${i18n.download}\x3c/button\x3e\r\n      \x3cbutton class\x3d"btn-link trailer-half" data-dojo-attach-point\x3d"renameBtn"\x3e${i18n.rename}\x3c/button\x3e\r\n      \x3cbutton class\x3d"btn-link" data-dojo-attach-point\x3d"viewDetailsBtn"\x3e${i18n.viewDetails}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/Reports/templates/RenameReport.html":'\x3cdiv class\x3d"rename-report"\x3e\r\n  \x3cdiv class\x3d"js-title-input"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:arcgisonline/pages/organization/widgets/Reports/templates/ProcessingReports.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"processing-reports-body"\x3e\r\n    \x3cdiv class\x3d"js-no-reports hide text-center"\x3e${i18n.noReports}\x3c/div\x3e\r\n    \x3cdiv class\x3d"js-count trailer-half"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"content-table-view js-table-wrap table-select reports__table" role\x3d"table"\x3e\r\n      \x3cdiv class\x3d"table-select-head js-table-header" role\x3d"rowgroup"\x3e\r\n        \x3cdiv class\x3d"table-select-row table-select-row-header js-table-header-content" role\x3d"row"\x3e\r\n          \x3cspan class\x3d"table-select-cell table-select-cell-th processing-report__title-col" role\x3d"columnheader"\x3e\r\n            \x3cdiv class\x3d"table-select-cell-sort no-pointer"\x3e\r\n              ${i18n.title}\r\n            \x3c/div\x3e\r\n          \x3c/span\x3e\r\n          \x3cspan class\x3d"table-select-cell table-select-cell-th" role\x3d"columnheader"\x3e\r\n            \x3cdiv class\x3d"table-select-cell-sort no-pointer"\x3e\r\n              ${i18n.created}\r\n            \x3c/div\x3e\r\n          \x3c/span\x3e\r\n          \x3cspan class\x3d"table-select-cell table-select-cell-th" role\x3d"columnheader"\x3e\r\n            \x3cdiv class\x3d"table-select-cell-sort no-pointer"\x3e\r\n              ${i18n.owner}\r\n            \x3c/div\x3e\r\n          \x3c/span\x3e\r\n          \x3cspan class\x3d"table-select-cell table-select-cell-th org-members__action-column" role\x3d"columnheader"\x3e\r\n            \x3clabel class\x3d"table-select-cell-sort table-select-cell-action"\x3e\x26nbsp;\x3c/label\x3e\r\n          \x3c/span\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/InviteMembers/templates/InviteMembers.html":'\x3cdiv class\x3d"invite-members js-overlay-body grid-container"\x3e\r\n  \x3cdiv class\x3d"js-invite-members-loader overlay-loader-container overlay-white fullscreen"\x3e\r\n    \x3ccalcite-loader class\x3d"js-invite-members-calcite-loader" scale\x3d"l" type\x3d"determinate"\x3e\x3c/calcite-loader\x3e\r\n    \x3cdiv class\x3d"js-invite-members-calcite-loader-text leader-0 trailer-half text-center"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"js-invite-members-dont-close text-center hide"\x3e${i18n.myOrganization.inviteMembers.doNotClose}\x3c/div\x3e\r\n    \x3c/calcite-loader\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"invite-members__header js-invite-members-headers"\x3e\r\n    \x3cdiv class\x3d"invite-members__header-steps flex"\x3e\r\n      \x3cbutton\r\n        data-step-num\x3d"1"\r\n        title\x3d"${i18n.myOrganization.inviteMembers.chooseInviteMethod}"\r\n        class\x3d"btn-link btn-link-darker-gray invite-members__step-item text-left font-size-1 invite-members__step-item--active js-step-link js-step-header-1"\r\n      \x3e\r\n        ${i18n.myOrganization.inviteMembers.chooseInviteMethod}\r\n      \x3c/button\x3e\r\n      \x3cbutton\r\n        data-step-num\x3d"2"\r\n        title\x3d"${i18n.myOrganization.inviteMembers.compileMemberList}"\r\n        class\x3d"btn-link btn-link-darker-gray invite-members__step-item text-left font-size-1 js-step-link js-step-header-2"\r\n        tabindex\x3d"-1"\r\n      \x3e\r\n        \x3cspan class\x3d"hide js-compile-error-icon invite-members__field-error"\x3e\r\n          ${exclamationIcon}\r\n        \x3c/span\x3e\r\n        ${i18n.myOrganization.inviteMembers.compileMemberList}\r\n      \x3c/button\x3e\r\n      \x3cbutton\r\n        data-step-num\x3d"3"\r\n        title\x3d"${i18n.myOrganization.inviteMembers.setMemberProperties}"\r\n        class\x3d"btn-link btn-link-darker-gray invite-members__step-item text-left font-size-1 js-step-link js-step-header-3"\r\n        tabindex\x3d"-1"\r\n      \x3e\r\n        ${i18n.myOrganization.inviteMembers.setMemberProperties}\r\n      \x3c/button\x3e\r\n      \x3cbutton\r\n        data-step-num\x3d"4"\r\n        title\x3d"${i18n.myOrganization.inviteMembers.confirmAndComplete}"\r\n        class\x3d"btn-link btn-link-darker-gray invite-members__step-item text-left font-size-1 js-step-link js-step-header-4"\r\n        tabindex\x3d"-1"\r\n      \x3e\r\n        ${i18n.myOrganization.inviteMembers.confirmAndComplete}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"invite-members__step-bars js-step-bars"\x3e\r\n    \x3cdiv class\x3d"hide flex invite-members__sub-bar js-compile-list-bar js-step-2-bar"\x3e\r\n      \x3cbutton class\x3d"btn-link margin-right-2 js-add-member"\x3e${i18n.myOrganization.inviteMembers.newMember}\x3c/button\x3e\r\n      \x3cbutton class\x3d"btn-link margin-right-2 js-add-members"\x3e\r\n        ${i18n.myOrganization.inviteMembers.newMembersFromFile}\r\n      \x3c/button\x3e\r\n      \x3cbutton\r\n        class\x3d"hide btn-link margin-right-2 js-add-members-enterprise-group if-on-premise if-enterprise-group-support"\r\n      \x3e\r\n        ${i18n.myOrganization.inviteMembers.newMembersFromEnterpriseGroup}\r\n      \x3c/button\x3e\r\n      \x3cdiv class\x3d"flex-1 invite-members__search-container"\x3e\r\n        \x3cdiv class\x3d"js-search-input"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"invite-members__content"\x3e\r\n    \x3cbutton data-step-num\x3d"1" class\x3d"btn-link btn-link-darker-gray invite-members__stepper-title js-stepper-title"\x3e\r\n      ${step1Title} ${checkIcon}\r\n    \x3c/button\x3e\r\n    \x3cdiv class\x3d"js-step-1 leader-half hide"\x3e\r\n      \x3cdiv class\x3d"invite-members__content-pane js-invite-methods"\x3e\r\n        \x3cdiv class\x3d"hide-on-phone font-size-2 trailer-1"\x3e${i18n.myOrganization.inviteMembers.invitationMethod}\x3c/div\x3e\r\n        \x3c!-- ArcGIS Online Options --\x3e\r\n        \x3cdiv class\x3d"if-not-on-premise"\x3e\r\n          \x3cdiv\r\n            class\x3d"invite-members__invite-method-item if-not-on-premise invite-members__invite-method-item--selected"\r\n          \x3e\r\n            \x3clabel class\x3d"flex trailer-0"\x3e\r\n              \x3cinput\r\n                name\x3d"inviteMethod"\r\n                type\x3d"radio"\r\n                role\x3d"radio"\r\n                aria-checked\x3d"false"\r\n                tabindex\x3d"0"\r\n                value\x3d"add-no-email"\r\n                class\x3d"js-add-no-email-option"\r\n                checked\r\n              /\x3e\r\n              \x3cspan class\x3d"margin-left-1 font-size-1 invite-members__method-title"\r\n                \x3e${i18n.organizationInvite.step1.addUsersLabel}\x3c/span\r\n              \x3e\r\n            \x3c/label\x3e\r\n            \x3cdiv class\x3d"invite-members__invite-method-desc leader-quarter"\x3e\r\n              ${i18n.organizationInvite.step1.addUsersMsg}\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"invite-members__invite-method-item if-not-on-premise hide js-add-enterprise-id-option-container"\x3e\r\n            \x3clabel class\x3d"flex  trailer-0"\x3e\r\n              \x3cinput\r\n                name\x3d"inviteMethod"\r\n                type\x3d"radio"\r\n                role\x3d"radio"\r\n                aria-checked\x3d"false"\r\n                tabindex\x3d"0"\r\n                value\x3d"add-enterprise-id"\r\n                class\x3d"js-add-enterprise-id-option"\r\n              /\x3e\r\n              \x3cspan class\x3d"margin-left-1 font-size-1 invite-members__method-title"\r\n                \x3e${i18n.organizationInvite.step1.addEnterpriseUsersLabel}\x3c/span\r\n              \x3e\r\n            \x3c/label\x3e\r\n            \x3cdiv class\x3d"invite-members__invite-method-desc"\x3e\r\n              ${i18n.organizationInvite.step1.addEnterpriseUsersMsg}\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"invite-members__invite-method-item if-not-on-premise"\x3e\r\n            \x3clabel class\x3d"flex trailer-0"\x3e\r\n              \x3cinput\r\n                name\x3d"inviteMethod"\r\n                type\x3d"radio"\r\n                role\x3d"radio"\r\n                aria-checked\x3d"false"\r\n                tabindex\x3d"0"\r\n                value\x3d"add-with-email"\r\n              /\x3e\r\n              \x3cspan class\x3d"margin-left-1 font-size-1 invite-members__method-title"\r\n                \x3e${i18n.organizationInvite.step1.createUsersLabel}\x3c/span\r\n              \x3e\r\n            \x3c/label\x3e\r\n            \x3cdiv class\x3d"invite-members__invite-method-desc leader-quarter"\x3e\r\n              ${i18n.organizationInvite.step1.createUsersMsg}\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"invite-members__invite-method-item if-not-on-premise"\x3e\r\n            \x3clabel class\x3d"flex trailer-0"\x3e\r\n              \x3cinput name\x3d"inviteMethod" type\x3d"radio" role\x3d"radio" aria-checked\x3d"false" tabindex\x3d"0" value\x3d"invite" /\x3e\r\n              \x3cspan class\x3d"margin-left-1 font-size-1 invite-members__method-title"\r\n                \x3e${i18n.organizationInvite.step1.inviteUsersLabel}\x3c/span\r\n              \x3e\r\n            \x3c/label\x3e\r\n            \x3cdiv class\x3d"invite-members__invite-method-desc leader-quarter"\x3e\r\n              ${i18n.organizationInvite.step1.inviteUsersMsg}\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"invite-members__invite-method-item if-not-on-premise hide js-invite-enterprise-option-container"\x3e\r\n            \x3clabel class\x3d"flex trailer-0"\x3e\r\n              \x3cinput\r\n                name\x3d"inviteMethod"\r\n                type\x3d"radio"\r\n                role\x3d"radio"\r\n                aria-checked\x3d"true"\r\n                tabindex\x3d"0"\r\n                value\x3d"invite-enterprise"\r\n                class\x3d"js-invite-enterprise-option"\r\n              /\x3e\r\n              \x3cspan class\x3d"margin-left-1 font-size-1 invite-members__method-title"\r\n                \x3e${i18n.organizationInvite.step1.idpUsersLabel}\x3c/span\r\n              \x3e\r\n            \x3c/label\x3e\r\n            \x3cdiv class\x3d"invite-members__invite-method-desc leader-quarter"\x3e\r\n              ${i18n.organizationInvite.step1.idpUsersMsg}\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Portal On-Premise Options --\x3e\r\n        \x3cdiv class\x3d"if-on-premise"\x3e\r\n          \x3cdiv class\x3d"invite-members__invite-method-item if-on-premise"\x3e\r\n            \x3clabel class\x3d"flex trailer-0"\x3e\r\n              \x3cinput\r\n                name\x3d"inviteMethod"\r\n                type\x3d"radio"\r\n                role\x3d"radio"\r\n                aria-checked\x3d"false"\r\n                tabindex\x3d"0"\r\n                value\x3d"add-built-in"\r\n                class\x3d"js-add-built-in"\r\n              /\x3e\r\n              \x3cspan class\x3d"margin-left-1 font-size-1 invite-members__method-title"\r\n                \x3e${i18n.organizationInvite.step1Create.addBuiltin}\x3c/span\r\n              \x3e\r\n            \x3c/label\x3e\r\n            \x3cdiv class\x3d"invite-members__invite-method-desc leader-quarter"\x3e\r\n              ${i18n.organizationInvite.step1Create.addBuiltinMsg}\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv\r\n            class\x3d"invite-members__invite-method-item if-on-premise invite-members__invite-method-add-saml disabled js-add-saml-option-container"\r\n          \x3e\r\n            \x3clabel class\x3d"flex trailer-0"\x3e\r\n              \x3cinput name\x3d"inviteMethod" type\x3d"radio" role\x3d"radio" aria-checked\x3d"false" tabindex\x3d"0" value\x3d"add-saml" /\x3e\r\n              \x3cspan class\x3d"margin-left-1 font-size-1 invite-members__method-title js-portal-add-saml-title"\r\n                \x3e${i18n.organizationInvite.step1Create.addSAML}\x3c/span\r\n              \x3e\r\n            \x3c/label\x3e\r\n            \x3cdiv class\x3d"invite-members__invite-method-desc leader-quarter"\x3e\r\n              ${i18n.organizationInvite.step1Create.addSAMLMsg}\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"invite-members__invite-method-item if-on-premise disabled js-add-enterprise-option-container"\x3e\r\n            \x3clabel class\x3d"flex trailer-0"\x3e\r\n              \x3cinput\r\n                name\x3d"inviteMethod"\r\n                type\x3d"radio"\r\n                role\x3d"radio"\r\n                aria-checked\x3d"false"\r\n                tabindex\x3d"0"\r\n                value\x3d"add-enterprise"\r\n              /\x3e\r\n              \x3cspan class\x3d"margin-left-1 font-size-1 invite-members__method-title"\r\n                \x3e${i18n.organizationInvite.step1Create.addEnterprise}\x3c/span\r\n              \x3e\r\n            \x3c/label\x3e\r\n            \x3cdiv class\x3d"invite-members__invite-method-desc leader-quarter"\x3e\r\n              ${i18n.organizationInvite.step1Create.addEnterpriseMsg}\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cbutton class\x3d"btn invite-members__stepper-next leader-half js-stepper-next-btn"\x3e\r\n          ${i18n.myOrganization.inviteMembers.next}\r\n        \x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"invite-members__content"\x3e\r\n    \x3cbutton data-step-num\x3d"2" class\x3d"js-stepper-title btn-link btn-link-darker-gray invite-members__stepper-title"\x3e\r\n      ${step2Title}${checkIcon}\r\n    \x3c/button\x3e\r\n    \x3cdiv class\x3d"hide js-step-2 leader-half"\x3e\r\n      \x3cdiv class\x3d"invite-members__add-options flex js-add-options"\x3e\r\n        \x3cdiv class\x3d"invite-members__add-option margin-right-2"\x3e\r\n          \x3cdiv class\x3d"invite-members__add-option-icon"\x3e\r\n            \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" id\x3d"icons-ui-svg" viewBox\x3d"0 0 64 64"\x3e\r\n              \x3cpath\r\n                d\x3d"M44.588 33.92a8.627 8.627 0 0 0-8.723-7.82h-9.73a8.626 8.626 0 0 0-8.723 7.816l-1.315 16.623a3.225 3.225 0 0 0 .91 2.483 3.476 3.476 0 0 0 2.093 1.019v2.545a3.317 3.317 0 0 0 3.314 3.314h17.172a3.317 3.317 0 0 0 3.314-3.314v-2.545a3.474 3.474 0 0 0 2.094-1.019 3.224 3.224 0 0 0 .91-2.485zm-.169 18.545a2.683 2.683 0 0 1-1.919.8h-.4v3.321a2.516 2.516 0 0 1-2.514 2.514H22.414a2.516 2.516 0 0 1-2.514-2.514v-3.322h-.4a2.685 2.685 0 0 1-1.92-.799 2.42 2.42 0 0 1-.685-1.864l1.315-16.625a7.825 7.825 0 0 1 7.925-7.076h9.73a7.825 7.825 0 0 1 7.926 7.08l1.315 16.62a2.42 2.42 0 0 1-.687 1.865zM31 20.9a8.9 8.9 0 1 0-8.9-8.9 8.91 8.91 0 0 0 8.9 8.9zm0-17a8.1 8.1 0 1 1-8.1 8.1A8.11 8.11 0 0 1 31 3.9z"\r\n                id\x3d"icons-ui-svg--base"\r\n              /\x3e\r\n            \x3c/svg\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"invite-members__add-option-button"\x3e\r\n            \x3cbutton\r\n              class\x3d"btn org-members-invite-btn js-add-member"\r\n              title\x3d"${i18n.myOrganization.inviteMembers.newMember}"\r\n            \x3e\r\n              ${i18n.myOrganization.inviteMembers.newMember}\r\n            \x3c/button\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"invite-members__add-option"\x3e\r\n          \x3cdiv class\x3d"invite-members__add-option-icon"\x3e\r\n            \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" id\x3d"icons-ui-svg" viewBox\x3d"0 0 64 64"\x3e\r\n              \x3cg id\x3d"icons-ui-svg--base"\x3e\r\n                \x3cpath\r\n                  d\x3d"M38.495 8.692a6.276 6.276 0 1 1 3.265 10.035c-.056.261-.122.52-.197.774A7.064 7.064 0 1 0 37.88 8.18q.318.244.614.51zM19.333 19.733a7.038 7.038 0 0 0 2.083-.313 10.426 10.426 0 0 1-.192-.777 6.268 6.268 0 1 1 3.09-9.778c.194-.183.392-.363.6-.53a7.066 7.066 0 1 0-5.581 11.398zM53.524 28.475a5.745 5.745 0 0 0-5.722-5.375h-8.15a10.596 10.596 0 0 1-.71.8h8.86a4.943 4.943 0 0 1 4.924 4.624l.841 13.422a2.07 2.07 0 0 1-2.067 2.201h-.4v2.175a1.78 1.78 0 0 1-1.778 1.778H46.37l.057.8h2.896a2.581 2.581 0 0 0 2.578-2.578v-1.404a2.87 2.87 0 0 0 2.466-3.023zM15.63 48.1h-1.952a1.78 1.78 0 0 1-1.778-1.778v-2.175h-.4a2.072 2.072 0 0 1-2.067-2.202l.841-13.42a4.943 4.943 0 0 1 4.924-4.625h8.86a10.584 10.584 0 0 1-.71-.8h-8.15a5.745 5.745 0 0 0-5.722 5.375l-.842 13.42a2.872 2.872 0 0 0 2.466 3.023v1.404a2.581 2.581 0 0 0 2.578 2.578h1.895z"\r\n                /\x3e\r\n                \x3cpath\r\n                  d\x3d"M43.354 35.354a7.69 7.69 0 0 0-7.57-7.254h-9.568a7.69 7.69 0 0 0-7.57 7.252l-1.133 15.869a3.122 3.122 0 0 0 .79 2.305 2.98 2.98 0 0 0 1.797.955v2.383a3.04 3.04 0 0 0 3.036 3.036h15.728a3.04 3.04 0 0 0 3.036-3.036V54.48a2.982 2.982 0 0 0 1.797-.955 3.124 3.124 0 0 0 .79-2.305zm-.25 17.636a2.168 2.168 0 0 1-1.604.719h-.4v3.155a2.239 2.239 0 0 1-2.236 2.236H23.136a2.239 2.239 0 0 1-2.236-2.236v-3.155h-.4a2.167 2.167 0 0 1-1.604-.72 2.312 2.312 0 0 1-.585-1.712l1.133-15.87a6.889 6.889 0 0 1 6.772-6.507h9.568a6.89 6.89 0 0 1 6.772 6.509l1.132 15.868a2.314 2.314 0 0 1-.584 1.713zM31.5 24.9a8.4 8.4 0 1 0-8.4-8.4 8.41 8.41 0 0 0 8.4 8.4zm0-16a7.6 7.6 0 1 1-7.6 7.6 7.609 7.609 0 0 1 7.6-7.6z"\r\n                /\x3e\r\n              \x3c/g\x3e\r\n            \x3c/svg\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"invite-members__add-option-button"\x3e\r\n            \x3cbutton\r\n              class\x3d"btn org-members-invite-btn js-add-members"\r\n              title\x3d"${i18n.myOrganization.inviteMembers.newMembersFromFile}"\r\n            \x3e\r\n              ${i18n.myOrganization.inviteMembers.newMembersFromFile}\r\n            \x3c/button\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"invite-members__add-option if-enterprise-group-support margin-left-2"\x3e\r\n          \x3cdiv class\x3d"invite-members__add-option-icon"\x3e\r\n            \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" id\x3d"icons-ui-svg" viewBox\x3d"0 0 64 64"\x3e\r\n              \x3cg id\x3d"icons-ui-svg--base"\x3e\r\n                \x3cpath\r\n                  d\x3d"M38.495 8.692a6.276 6.276 0 1 1 3.265 10.035c-.056.261-.122.52-.197.774A7.064 7.064 0 1 0 37.88 8.18q.318.244.614.51zM19.333 19.733a7.038 7.038 0 0 0 2.083-.313 10.426 10.426 0 0 1-.192-.777 6.268 6.268 0 1 1 3.09-9.778c.194-.183.392-.363.6-.53a7.066 7.066 0 1 0-5.581 11.398zM53.524 28.475a5.745 5.745 0 0 0-5.722-5.375h-8.15a10.596 10.596 0 0 1-.71.8h8.86a4.943 4.943 0 0 1 4.924 4.624l.841 13.422a2.07 2.07 0 0 1-2.067 2.201h-.4v2.175a1.78 1.78 0 0 1-1.778 1.778H46.37l.057.8h2.896a2.581 2.581 0 0 0 2.578-2.578v-1.404a2.87 2.87 0 0 0 2.466-3.023zM15.63 48.1h-1.952a1.78 1.78 0 0 1-1.778-1.778v-2.175h-.4a2.072 2.072 0 0 1-2.067-2.202l.841-13.42a4.943 4.943 0 0 1 4.924-4.625h8.86a10.584 10.584 0 0 1-.71-.8h-8.15a5.745 5.745 0 0 0-5.722 5.375l-.842 13.42a2.872 2.872 0 0 0 2.466 3.023v1.404a2.581 2.581 0 0 0 2.578 2.578h1.895z"\r\n                /\x3e\r\n                \x3cpath\r\n                  d\x3d"M43.354 35.354a7.69 7.69 0 0 0-7.57-7.254h-9.568a7.69 7.69 0 0 0-7.57 7.252l-1.133 15.869a3.122 3.122 0 0 0 .79 2.305 2.98 2.98 0 0 0 1.797.955v2.383a3.04 3.04 0 0 0 3.036 3.036h15.728a3.04 3.04 0 0 0 3.036-3.036V54.48a2.982 2.982 0 0 0 1.797-.955 3.124 3.124 0 0 0 .79-2.305zm-.25 17.636a2.168 2.168 0 0 1-1.604.719h-.4v3.155a2.239 2.239 0 0 1-2.236 2.236H23.136a2.239 2.239 0 0 1-2.236-2.236v-3.155h-.4a2.167 2.167 0 0 1-1.604-.72 2.312 2.312 0 0 1-.585-1.712l1.133-15.87a6.889 6.889 0 0 1 6.772-6.507h9.568a6.89 6.89 0 0 1 6.772 6.509l1.132 15.868a2.314 2.314 0 0 1-.584 1.713zM31.5 24.9a8.4 8.4 0 1 0-8.4-8.4 8.41 8.41 0 0 0 8.4 8.4zm0-16a7.6 7.6 0 1 1-7.6 7.6 7.609 7.609 0 0 1 7.6-7.6z"\r\n                /\x3e\r\n              \x3c/g\x3e\r\n            \x3c/svg\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"invite-members__add-option-button"\x3e\r\n            \x3cbutton\r\n              class\x3d"btn org-members-invite-btn js-add-members-enterprise-group"\r\n              title\x3d"${i18n.myOrganization.inviteMembers.newMembersFromEnterpriseGroup}"\r\n            \x3e\r\n              ${i18n.myOrganization.inviteMembers.newMembersFromEnterpriseGroup}\r\n            \x3c/button\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"hide js-new-member-form-container"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"hide js-process-members"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"hide js-form-modal"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"hide invite-members__content-pane js-members-from-file"\x3e\r\n        \x3cdiv class\x3d"font-size-2 trailer-1"\x3e\r\n          ${i18n.myOrganization.inviteMembers.addMembersFromFile}\r\n          \x3cdiv class\x3d"invite-members__summary-total-box trailer-1 leader-2 js-file-drop"\x3e\r\n            \x3cdiv class\x3d"trailer-1"\x3e\r\n              \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" id\x3d"icons" viewBox\x3d"0 0 32 32" class\x3d"invite-members__csv-icon"\x3e\r\n                \x3cpath\r\n                  d\x3d"M31.113 13h-3V8.699L20.413 1h-16.3v12h-3v15h3v3h24v-3h3zm-11-11l7 7h-7zm-15 0h14v8h8v3h-22zm22 28h-22v-2h22zm3-3h-28V14h28zm-21.15-3.731a3.179 3.179 0 0 1 4.496-4.496l-.707.707a2.179 2.179 0 1 0-3.081 3.081 2.229 2.229 0 0 0 3.08 0l.708.707a3.177 3.177 0 0 1-4.495 0zm9.117-.808a.838.838 0 0 0-.04-.684 1.334 1.334 0 0 0-.947-.477c-1.289-.198-1.953-.784-1.974-1.743a1.665 1.665 0 0 1 .48-1.202 1.81 1.81 0 0 1 1.3-.555 2.108 2.108 0 0 1 1.903 1.102l-.852.526a1.122 1.122 0 0 0-1.051-.628.798.798 0 0 0-.58.248.672.672 0 0 0-.2.478c.004.205.013.615 1.126.785a2.187 2.187 0 0 1 1.652.952 1.826 1.826 0 0 1 .126 1.53A2.134 2.134 0 0 1 16.92 24.1a2.32 2.32 0 0 1-2.146-1.24l.863-.505a1.343 1.343 0 0 0 1.283.745 1.164 1.164 0 0 0 1.16-.64zm4.074 1.523L19.78 18h1.076l1.767 4.453L24.417 18h1.078l-2.412 5.986zm-16.54.516a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1z"\r\n                \x3e\x3c/path\x3e\r\n              \x3c/svg\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"font-size-2 trailer-1"\x3e\r\n              \x3cspan class\x3d"js-drag-drop-text"\x3e${i18n.myOrganization.inviteMembers.dragDrop}\x3c/span\x3e\r\n              \x3cspan class\x3d"invite-members__file-name js-file-name hide"\x3e\x3c/span\x3e\r\n              \x3cspan class\x3d"font-size-0 leader-quarter"\x3e\r\n                \x3cdiv class\x3d"if-has-file-errors"\x3e\r\n                  ${i18n.myOrganization.inviteMembers.invalidFileDesc}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"if-has-file-warnings"\x3e\r\n                  ${i18n.myOrganization.inviteMembers.importDupUsernames}\r\n                \x3c/div\x3e\r\n              \x3c/span\x3e\r\n              \x3cinput type\x3d"file" class\x3d"hide js-file-input" /\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"font-size-0"\x3e\r\n              \x3cspan class\x3d"js-file-desc"\x3e${i18n.myOrganization.inviteMembers.fileDesc}\x3c/span\x3e\r\n              \x3cspan class\x3d"js-file-info hide"\x3e\r\n                \x3cspan class\x3d"invite-members__members-num margin-right-half js-file-members-num"\x3e\x3c/span\x3e\r\n                \x3cbutton class\x3d"btn-link js-choose-different"\x3e\r\n                  ${i18n.myOrganization.inviteMembers.chooseDiffFile}\r\n                \x3c/button\x3e\r\n              \x3c/span\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"flex"\x3e\r\n            \x3cdiv class\x3d"flex-1 margin-left-1 margin-right-1"\x3e\r\n              \x3cdiv class\x3d"font-size-2 invite-members__field-heading flex"\x3e\r\n                \x3cdiv class\x3d"flex-1"\x3e${i18n.myOrganization.inviteMembers.requiredFields}\x3c/div\x3e\r\n                \x3ccalcite-link class\x3d"js-download-csv font-size-0"\x3e${i18n.myOrganization.inviteMembers.downloadCSV}\x3c/calcite-link\x3e\r\n              \x3c/div\x3e\r\n              \x3c!-- \x3cdiv class\x3d"js-required-fields"\x3e\r\n\r\n              \x3c/div\x3e --\x3e\r\n              \x3cdiv class\x3d"flex"\x3e\r\n                \x3cdiv class\x3d"flex-1 invite-members__required-fields-col"\x3e\r\n                  \x3cdiv class\x3d"font-size-0 invite-members__field-row js-field-firstname"\x3e\r\n                    \x3cspan class\x3d"invite-members__field-check-mark if-field-success margin-right-quarter"\x3e\r\n                      ${csvSuccess}\r\n                    \x3c/span\x3e\r\n                    \x3cspan class\x3d"invite-members__field-error if-field-error margin-right-quarter"\x3e\r\n                      ${csvError}\r\n                    \x3c/span\x3e\r\n                    ${i18n.organizationInvite.csv.firstName}\r\n                    \x3cdiv class\x3d"right if-field-error invite-members__error-text margin-right-1 js-error-count"\x3e\x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"font-size-0 invite-members__field-row js-field-lastname"\x3e\r\n                    \x3cspan class\x3d"invite-members__field-check-mark if-field-success margin-right-quarter"\x3e\r\n                      ${csvSuccess}\r\n                    \x3c/span\x3e\r\n                    \x3cspan class\x3d"invite-members__field-error if-field-error margin-right-quarter"\x3e\r\n                      ${csvError}\r\n                    \x3c/span\x3e\r\n                    ${i18n.organizationInvite.csv.lastName}\r\n                    \x3cdiv class\x3d"right if-field-error invite-members__error-text margin-right-1 js-error-count"\x3e\x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"font-size-0 invite-members__field-row js-field-email"\x3e\r\n                    \x3cspan class\x3d"invite-members__field-check-mark if-field-success margin-right-quarter"\x3e\r\n                      ${csvSuccess}\r\n                    \x3c/span\x3e\r\n                    \x3cspan class\x3d"invite-members__field-error if-field-error margin-right-quarter"\x3e\r\n                      ${csvError}\r\n                    \x3c/span\x3e\r\n                    ${i18n.organizationInvite.csv.email}\r\n                    \x3cdiv class\x3d"right if-field-error invite-members__error-text margin-right-1 js-error-count"\x3e\x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"font-size-0 invite-members__field-row js-field-username"\x3e\r\n                    \x3cspan class\x3d"invite-members__field-check-mark margin-right-quarter if-field-success"\x3e\r\n                      ${csvSuccess}\r\n                    \x3c/span\x3e\r\n                    \x3cspan class\x3d"invite-members__field-error margin-right-quarter if-field-error"\x3e\r\n                      ${csvError}\r\n                    \x3c/span\x3e\r\n                    \x3cspan class\x3d"if-field-warning invite-members__field-warning margin-right-quarter"\x3e\r\n                      ${csvWarning}\r\n                    \x3c/span\x3e\r\n                    ${i18n.organizationInvite.csv.username}\r\n                    \x3cdiv class\x3d"right if-field-error invite-members__error-text margin-right-1 js-error-count"\x3e\x3c/div\x3e\r\n                    \x3cdiv\r\n                      class\x3d"right if-field-warning invite-members__warning-text margin-right-1 js-warning-count"\r\n                    \x3e\x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"font-size-0 invite-members__field-row js-field-idType"\x3e\r\n                    \x3cspan class\x3d"invite-members__field-check-mark if-field-success margin-right-quarter"\x3e\r\n                      ${csvSuccess}\r\n                    \x3c/span\x3e\r\n                    \x3cspan class\x3d"invite-members__field-error if-field-error margin-right-quarter"\x3e\r\n                      ${csvError}\r\n                    \x3c/span\x3e\r\n                    \x3cspan class\x3d"if-field-warning invite-members__field-warning margin-right-quarter"\x3e\r\n                      ${csvWarning}\r\n                    \x3c/span\x3e\r\n                    ${i18n.myOrganization.inviteMembers.idType}\r\n                    \x3cdiv class\x3d"right if-field-error invite-members__error-text margin-right-1 js-error-count"\x3e\x3c/div\x3e\r\n                    \x3cdiv\r\n                      class\x3d"right if-field-warning invite-members__warning-text margin-right-1 js-warning-count"\r\n                    \x3e\x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"font-size-0 invite-members__field-row js-field-idpUsername"\x3e\r\n                    \x3cspan class\x3d"invite-members__field-check-mark if-field-success margin-right-quarter"\x3e\r\n                      ${csvSuccess}\r\n                    \x3c/span\x3e\r\n                    \x3cspan class\x3d"invite-members__field-error if-field-error margin-right-quarter"\x3e\r\n                      ${csvError}\r\n                    \x3c/span\x3e\r\n                    \x3cspan class\x3d"if-field-warning invite-members__field-warning margin-right-quarter"\x3e\r\n                      ${csvWarning}\r\n                    \x3c/span\x3e\r\n                    \x3cspan class\x3d"js-idpusername-csv-label"\x3e${i18n.organizationInvite.csv.idpUsername}\x3c/span\x3e\r\n                    \x3cdiv class\x3d"right if-field-error invite-members__error-text margin-right-1 js-error-count"\x3e\x3c/div\x3e\r\n                    \x3cdiv\r\n                      class\x3d"right if-field-warning invite-members__warning-text margin-right-1 js-warning-count"\r\n                    \x3e\x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"flex-1 margin-left-2 invite-members__required-fields-col"\x3e\r\n                  \x3cdiv class\x3d"font-size-0 invite-members__field-row js-field-rolename"\x3e\r\n                    \x3cspan class\x3d"invite-members__field-check-mark if-field-success margin-right-quarter"\x3e\r\n                      ${csvSuccess}\r\n                    \x3c/span\x3e\r\n                    \x3cspan class\x3d"invite-members__field-error if-field-error margin-right-quarter"\x3e\r\n                      ${csvError}\r\n                    \x3c/span\x3e\r\n                    ${i18n.organizationInvite.csv.role}\r\n                    \x3cdiv class\x3d"right if-field-error invite-members__error-text margin-right-1 js-error-count"\x3e\x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"font-size-0 invite-members__field-row js-field-licenseTypeName"\x3e\r\n                    \x3cspan class\x3d"invite-members__field-check-mark if-field-success margin-right-quarter"\x3e\r\n                      ${csvSuccess}\r\n                    \x3c/span\x3e\r\n                    \x3cspan class\x3d"invite-members__field-error if-field-error margin-right-quarter"\x3e\r\n                      ${csvError}\r\n                    \x3c/span\x3e\r\n                    ${i18n.organizationInvite.csv.type}\r\n                    \x3cdiv class\x3d"right if-field-error invite-members__error-text margin-right-1 js-error-count"\x3e\x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"font-size-0 invite-members__field-row js-field-password"\x3e\r\n                    \x3cspan class\x3d"invite-members__field-check-mark if-field-success margin-right-quarter"\x3e\r\n                      ${csvSuccess}\r\n                    \x3c/span\x3e\r\n                    \x3cspan class\x3d"invite-members__field-error if-field-error margin-right-quarter"\x3e\r\n                      ${csvError}\r\n                    \x3c/span\x3e\r\n                    ${i18n.organizationInvite.csv.password}\r\n                    \x3cdiv class\x3d"right if-field-error invite-members__error-text margin-right-1 js-error-count"\x3e\x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"flex leader-half padding-leader-half"\x3e\r\n            \x3cdiv class\x3d"flex-1"\x3e\x3c/div\x3e\r\n            \x3cdiv\x3e\r\n              \x3cbutton class\x3d"btn margin-left-1 hide js-file-add-btn"\x3e${i18n.myOrganization.inviteMembers.next}\x3c/button\x3e\r\n              \x3cbutton class\x3d"btn btn-clear margin-left-half js-file-cancel"\x3e\r\n                ${i18n.myOrganization.inviteMembers.cancel}\r\n              \x3c/button\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"hide invite-members__content-pane js-members-from-enterprise-group"\x3e\r\n        \x3cdiv class\x3d"font-size-2 trailer-1"\x3e\r\n          ${i18n.myOrganization.inviteMembers.addMembersFromEnterpriseGroup}\r\n          \x3cdiv class\x3d"js-enterprise-group-form"\x3e\r\n            \x3cdiv class\x3d"flex invite-members__form-row"\x3e\r\n              \x3cdiv class\x3d"flex-1 font-size-0 invite-members__field-row--no-border margin-right-2"\x3e\r\n                \x3clabel for\x3d"invite-members-enterprise-group-input"\x3e\r\n                  ${i18n.myOrganization.inviteMembers.enterpriseGroup}\x3cbr /\x3e\r\n                  \x3cinput\r\n                    type\x3d"text"\r\n                    name\x3d"enterpriseGroup"\r\n                    class\x3d"invite-members_enterprise-group-input js-enterprise-group-input inline-block"\r\n                    id\x3d"invite-members-enterprise-group-input"\r\n                  /\x3e\r\n                  \x3cbutton\r\n                    class\x3d"btn btn-clear margin-left-half inline-block invite-members_enterprise-group-search js-enterprise-search-btn"\r\n                  \x3e\r\n                    ${i18n.myOrganization.inviteMembers.searchForGroup}\r\n                  \x3c/button\x3e\r\n                  \x3cdiv class\x3d"input-error-message js-enterprise-group-error"\x3e\x3c/div\x3e\r\n                \x3c/label\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"invite-members__form-row"\x3e\r\n              \x3cdiv class\x3d"font-size-0 invite-members__field-row--no-border"\x3e\r\n                \x3clabel\x3e\r\n                  ${i18n.myOrganization.inviteMembers.licenseType}\r\n                  \x3cdiv class\x3d"js-enterprise-group-license-types"\x3e\x3c/div\x3e\r\n                \x3c/label\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"flex invite-members__form-row"\x3e\r\n              \x3cdiv class\x3d"invite-members__form-column font-size-0 invite-members__field-row--no-border margin-right-2"\x3e\r\n                \x3clabel\x3e\r\n                  ${i18n.myOrganization.inviteMembers.role}\r\n                  \x3cdiv class\x3d"js-enterprise-group-role-container"\x3e\x3c/div\x3e\r\n                \x3c/label\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"input-error-message js-enterprise-group-role-error"\x3e\r\n              ${i18n.myOrganization.inviteMembers.chooseValidRole}\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"invite-members__form-buttons right"\x3e\r\n            \x3cbutton class\x3d"btn margin-left-1 js-enterprise-group-add-btn"\x3e\r\n              ${i18n.myOrganization.inviteMembers.add}\r\n            \x3c/button\x3e\r\n            \x3cbutton class\x3d"btn btn-clear margin-left-half js-enterprise-group-cancel"\x3e\r\n              ${i18n.myOrganization.inviteMembers.cancel}\r\n            \x3c/button\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"loader js-enterprise-group-loader overlay-white position-relative"\x3e\r\n            \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"loader-text"\x3e${i18n.common.loading}\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"hide trailer-1 js-select-all invite-members__select-all-container"\x3e\r\n        \x3c!-- \x3cinput type\x3d"checkbox" class\x3d"js-select-all-checkbox"\x3e --\x3e\r\n        \x3cspan class\x3d"js-members-numbers margin-left-half"\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"hide trailer-1 js-selected-actions"\x3e\r\n        \x3cspan class\x3d"invite-members__selected-number margin-right-half js-selected-number"\x3e\x3c/span\x3e\r\n        \x3cbutton class\x3d"btn-link btn-link-darker-gray js-clear-selection"\x3e\r\n          ${i18n.myOrganization.inviteMembers.clearSelection}\r\n        \x3c/button\x3e\r\n        \x3cbutton class\x3d"btn-link invite-members__remove-btn right js-remove-btn"\x3e\r\n          ${trashIcon}${i18n.myOrganization.inviteMembers.remove}\r\n        \x3c/button\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"js-member-list"\x3e\r\n        \x3cdiv class\x3d"flex invite-members__list-header"\x3e\r\n          \x3cdiv class\x3d"flex-0 margin-right-half"\x3e\x3cinput type\x3d"checkbox" class\x3d"js-select-all-checkbox" /\x3e\x3c/div\x3e\r\n          \x3cdiv class\x3d"flex-1 avenir-bold"\x3e${i18n.myOrganization.inviteMembers.member}\x3c/div\x3e\r\n          \x3cdiv class\x3d"flex-0 invite-members__list-item-attr avenir-bold margin-right-half"\x3e\r\n            ${i18n.myOrganization.inviteMembers.licenseType}\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"flex-0 invite-members__list-item-attr avenir-bold margin-right-half"\x3e\r\n            ${i18n.myOrganization.inviteMembers.role}\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"flex-0 invite-members__list-item-attr avenir-bold margin-right-half"\x3e\r\n            ${i18n.myOrganization.inviteMembers.includedLicenses}\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"flex-0 invite-members__list-edit-col"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"js-member-list-content"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"js-pagination"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"invite-members__add-members-mobile leader-quarter"\x3e\r\n        \x3cbutton class\x3d"btn btn-link js-add-member"\x3e${plusIcon} ${i18n.myOrganization.inviteMembers.addMember}\x3c/button\x3e\r\n        \x3cbutton class\x3d"btn invite-members__stepper-next leader-1 js-stepper-next-btn"\x3e\r\n          ${i18n.myOrganization.inviteMembers.next}\r\n        \x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"mobile-drill-in__title js-mobile-titles"\x3e\r\n    \x3cdiv class\x3d"font-size--2 leader-half invite-members__mobile-form-sub-title js-mobile-sub-title"\x3e\r\n      ${i18n.myOrganization.inviteMembers.setMemberProperties}\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"font-size-1 js-mobile-main-title"\x3e${i18n.myOrganization.inviteMembers.licenses}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv\r\n    class\x3d"flex leader-half padding-leader-half mobile-drill-in__buttons invite-members__mobile-actions js-mobile-actions"\r\n  \x3e\r\n    \x3cdiv class\x3d"invite-members-form__buttons"\x3e\r\n      \x3cbutton class\x3d"btn right js-drill-in-save"\x3e${i18n.myOrganization.inviteMembers.save}\x3c/button\x3e\r\n      \x3cbutton class\x3d"btn btn-clear margin-left-half js-drill-in-cancel"\x3e\r\n        ${i18n.myOrganization.inviteMembers.cancel}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"invite-members__content invite-members__step-3"\x3e\r\n    \x3cbutton data-step-num\x3d"3" class\x3d"js-stepper-title btn-link btn-link-darker-gray invite-members__stepper-title"\x3e\r\n      ${step3Title}${checkIcon}\r\n    \x3c/button\x3e\r\n    \x3cdiv class\x3d"hide js-step-3 leader-half position-relative invite-members__step-3"\x3e\r\n      \x3cdiv class\x3d"hide-on-mobile invite-members__prop-card trailer-1 js-licenses-prop-card"\x3e\r\n        \x3ch2 class\x3d"font-size-2 trailer-0 avenir-bold"\x3e${i18n.myOrganization.inviteMembers.licenses}\x3c/h2\x3e\r\n        \x3cbutton class\x3d"btn btn-clear leader-1 org-settings__card-header-btn js-manage-licenses-btn"\x3e\r\n          ${i18n.myOrganization.inviteMembers.manage}\r\n        \x3c/button\x3e\r\n        \x3cdiv class\x3d"leader-1 js-licenses-rows-container"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"hide-on-mobile invite-members__prop-card trailer-1 js-groups-prop-card"\x3e\r\n        \x3ch2 class\x3d"font-size-2 trailer-0 avenir-bold"\x3e${i18n.myOrganization.inviteMembers.groups}\x3c/h2\x3e\r\n        \x3cbutton class\x3d"btn btn-clear leader-1 org-settings__card-header-btn js-manage-groups-btn"\x3e\r\n          ${i18n.myOrganization.inviteMembers.manage}\r\n        \x3c/button\x3e\r\n        \x3cdiv class\x3d"leader-1 js-groups-rows-container"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"hide-on-mobile invite-members__prop-card trailer-1 js-categories-prop-card"\x3e\r\n        \x3ch2 class\x3d"font-size-2 trailer-0 avenir-bold"\x3e${i18n.myOrganization.inviteMembers.memberCategories.title}\x3c/h2\x3e\r\n        \x3cp class\x3d"trailer-0"\x3e${i18n.myOrganization.inviteMembers.memberCategories.description}\x3c/p\x3e\r\n        \x3cbutton class\x3d"btn btn-clear leader-1 org-settings__card-header-btn js-manage-categories-btn"\x3e\r\n          ${i18n.myOrganization.inviteMembers.memberCategories.assign}\r\n        \x3c/button\x3e\r\n        \x3cdiv class\x3d"js-categories-modal"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"leader-1 js-category-chips-container"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv\r\n        class\x3d"invite-members__prop-tab-content invite-members__prop-tab-licenses js-licenses-tab js-properties-content "\r\n      \x3e\r\n        \x3cdiv class\x3d"font-size-2 invite-members__assign-licenses-title"\x3e\r\n          ${i18n.myOrganization.inviteMembers.assignLicenses}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"js-licenses-tab-content invite-members__licenses-content"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"invite-members__prop-card if-not-on-premise trailer-1 hide-on-mobile"\x3e\r\n        \x3ch2 class\x3d"font-size-2 trailer-0 avenir-bold"\x3e\r\n          ${i18n.myOrganization.inviteMembers.esriAccess}\r\n          \x3cspan id\x3d"esriAccessTooltip"\r\n            \x3e\x3ca target\x3d"_blank" href\x3d"${learnEsriAccessLink}"\r\n              \x3e\x3cimg\r\n                class\x3d"help-icon"\r\n                src\x3d"${learnEsriAccessIcon}"\r\n                alt\x3d"${i18n.myOrganization.defaultsTab.learnEsriAccess}"/\x3e\x3c/a\r\n          \x3e\x3c/span\x3e\r\n        \x3c/h2\x3e\r\n        \x3cdiv class\x3d"leader-1"\x3e\r\n          \x3cdiv class\x3d"org-settings__security-switch-row flex flex-align-center margin-left-0"\x3e\r\n            \x3cdiv class\x3d"flex-1 margin-right-2"\x3e${i18n.myOrganization.inviteMembers.esriAccessDesc}\x3c/div\x3e\r\n            \x3cdiv class\x3d"js-esri-access-toggle"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv\r\n        class\x3d"hide invite-members__prop-tab-content invite-members__prop-tab-credits invite-members__content-pane flex js-properties-content js-credits-tab"\r\n      \x3e\r\n        \x3cdiv class\x3d"invite-members__credits-tab-wrapper"\x3e\r\n          \x3cdiv class\x3d"flex-1 margin-right-4 invite-members__credit-options"\x3e\r\n            \x3cdiv class\x3d"font-size-2 trailer-2 invite-members__credit-options-title avenir-bold"\x3e\r\n              ${i18n.myOrganization.inviteMembers.setCredit}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"trailer-2 invite-members__credit-option-item"\x3e\r\n              \x3clabel class\x3d"trailer-quarter" for\x3d"invite-members-credits-no-limit"\x3e\r\n                \x3cinput type\x3d"radio" name\x3d"creditsAlloc" class\x3d"js-credits-no-limit-radio" id\x3d"invite-members-credits-no-limit"/\x3e\r\n                \x3cspan class\x3d"margin-left-1"\x3e${i18n.myOrganization.inviteMembers.noAllocatedLimit}\x3c/span\x3e\r\n              \x3c/label\x3e\r\n              \x3cdiv class\x3d"margin-left-2 invite-members__no-limit-description"\x3e\r\n                ${i18n.myOrganization.inviteMembers.noLimitDesc}\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"invite-members__credit-option-item"\x3e\r\n              \x3clabel class\x3d"trailer-quarter" for\x3d"invite-members-credits-set-allocation"\x3e\r\n                \x3cinput type\x3d"radio" name\x3d"creditsAlloc" class\x3d"js-credits-alloc-radio" id\x3d"invite-members-credits-set-allocation"/\x3e\r\n                \x3cspan class\x3d"margin-left-1"\x3e${i18n.myOrganization.inviteMembers.setAlloc}\x3c/span\x3e\r\n              \x3c/label\x3e\r\n              \x3cdiv class\x3d"margin-left-2 invite-members__allocate-wrapper"\x3e\r\n                \x3cinput type\x3d"text" value\x3d"" class\x3d"js-credits-alloc-textbox" /\x3e\r\n                \x3cdiv class\x3d"js-credits-error input-error-message"\x3e\x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"invite-members__summary-total-container"\x3e\r\n            \x3cdiv class\x3d"invite-members__summary-total-title"\x3e\r\n              ${i18n.myOrganization.inviteMembers.creditInformation}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"invite-members__summary-total-box trailer-1"\x3e\r\n              \x3cdiv class\x3d"trailer-half invite-members__total-box-title"\x3e\r\n                ${i18n.myOrganization.inviteMembers.orgCredits}\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"font-size-7 invite-members__total-box-value js-org-credits"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"invite-members__summary-total-box trailer-1"\x3e\r\n              \x3cdiv class\x3d"trailer-half invite-members__total-box-title"\x3e\r\n                ${i18n.myOrganization.inviteMembers.membersInOrg}\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"font-size-7 invite-members__total-box-value js-member-count"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv\r\n        class\x3d"hide invite-members__prop-tab-content invite-members__prop-tab-groups invite-members__content-pane invite-members__assign-groups-pane js-groups-tab js-properties-content position-relative"\r\n      \x3e\r\n        \x3cdiv class\x3d"invite-members__content-pane-flex invite-members__group-tab-top hide-on-mobile"\x3e\r\n          \x3cdiv class\x3d"hide-on-mobile invite-members__content-pane-title font-size-2"\x3e\r\n            ${i18n.myOrganization.inviteMembers.assignGroups}\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"invite-members__content-pane-title-actions"\x3e\r\n            \x3cdiv class\x3d"js-selected-groups"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"leader-1 invite-members__group-browser-container" id\x3d"invite-members-group-browser-container"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv\r\n        class\x3d"hide invite-members__prop-tab-content invite-members__mobile-prop-panel invite-members__prop-tab-settings js-properties-content js-settings-tab"\r\n      \x3e\r\n        \x3cdiv class\x3d"font-size-2 trailer-1 hide hide-on-mobile"\x3e\r\n          ${i18n.myOrganization.inviteMembers.specifySettings}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"invite-members__settings-tab-body"\x3e\r\n          \x3cdiv class\x3d"invite-members__mobile-prop-row flex js-mobile-prop-licenses-row"\x3e\r\n            \x3cdiv class\x3d"flex-1"\x3e\r\n              \x3cdiv class\x3d"font-size--2 invite-members__mobile-prop-row-title"\x3e\r\n                ${i18n.myOrganization.inviteMembers.licenses}\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"js-mobile-prop-licenses-container"\x3e\r\n                ${i18n.myOrganization.inviteMembers.assignLicenses}\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"invite-members__mobile-prop-row-arrow"\x3e\r\n              ${chevronRight}\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"invite-members__mobile-prop-row flex js-mobile-prop-groups-row"\x3e\r\n            \x3cdiv class\x3d"flex-1"\x3e\r\n              \x3cdiv class\x3d"font-size--2 invite-members__mobile-prop-row-title"\x3e\r\n                ${i18n.myOrganization.inviteMembers.groups}\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"flex flex-wrap js-mobile-prop-groups-container"\x3e\r\n                ${i18n.myOrganization.inviteMembers.assignGroups}\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"invite-members__mobile-prop-row-arrow"\x3e\r\n              ${chevronRight}\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"invite-members__mobile-prop-row flex js-mobile-prop-credits-row"\x3e\r\n            \x3cdiv class\x3d"flex-1"\x3e\r\n              \x3cdiv class\x3d"font-size--2 invite-members__mobile-prop-row-title"\x3e\r\n                ${i18n.myOrganization.inviteMembers.credits}\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"js-mobile-credits-prop"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"invite-members__mobile-prop-row-arrow"\x3e\r\n              ${chevronRight}\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"if-not-on-premise"\x3e\r\n            \x3clabel class\x3d"only-on-mobile invite-members__settings-checkbox"\x3e\r\n              \x3cinput type\x3d"checkbox" class\x3d"hide-on-mobile js-enable-esri-checkbox" /\x3e\r\n              \x3cspan class\x3d"margin-left-half"\x3e\r\n                ${i18n.myOrganization.inviteMembers.enableEsriAccess}\r\n                \x3cspan id\x3d"esriAccessHelp"\r\n                  \x3e\x3ca target\x3d"_blank" href\x3d"${learnEsriAccessLink}"\r\n                    \x3e\x3cimg\r\n                      class\x3d"help-icon"\r\n                      src\x3d"${learnEsriAccessIcon}"\r\n                      alt\x3d"${i18n.myOrganization.defaultsTab.learnEsriAccess}"/\x3e\x3c/a\r\n                \x3e\x3c/span\x3e\r\n              \x3c/span\x3e\r\n              \x3cdiv class\x3d"js-mobile-esri-access"\x3e\x3c/div\x3e\r\n            \x3c/label\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"invite-members__prop-card js-settings-prop-card"\x3e\r\n            \x3ch2 class\x3d"font-size-2 trailer-0 avenir-bold trailer-1 hide-on-mobile"\x3e${i18n.myOrganization.inviteMembers.settings}\x3c/h2\x3e\r\n            \x3cdiv class\x3d"flex-1 hide-if-invite-method hide-if-cannot-update invite-members__settings-column"\x3e\r\n              \x3clabel class\x3d"invite-members__settings-label"\x3e\r\n                ${i18n.myOrganization.inviteMembers.profileVis}\r\n                \x3cselect class\x3d"invite-members__settings-select js-visibility-select"\x3e\r\n                  \x3coption value\x3d"public"\x3e${i18n.userProfile.everyone}\x3c/option\x3e\r\n                  \x3coption value\x3d"org" class\x3d"js-org-option" selected\x3e${i18n.userProfile.organization}\x3c/option\x3e\r\n                  \x3coption value\x3d"private"\x3e${i18n.userProfile.privateLabel}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n              \x3c/label\x3e\r\n              \x3clabel class\x3d"invite-members__settings-label"\x3e\r\n                ${i18n.myOrganization.inviteMembers.language}\r\n                \x3cdiv class\x3d"invite-members__filtering-select js-language-select"\x3e\x3c/div\x3e\r\n              \x3c/label\x3e\r\n              \x3clabel class\x3d"invite-members__settings-label js-language-format-container"\x3e\r\n                ${i18n.myOrganization.inviteMembers.numDateFormat}\r\n                \x3cdiv class\x3d"invite-members__filtering-select js-language-format-select"\x3e\x3c/div\x3e\r\n              \x3c/label\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"flex-1"\x3e\r\n              \x3clabel\r\n                class\x3d"invite-members__settings-label hide-if-invite-method  hide-if-cannot-update js-start-page-select-row"\r\n              \x3e\r\n                ${i18n.myOrganization.inviteMembers.startPage}\r\n                \x3cdiv class\x3d"invite-members__filtering-select js-start-page-select"\x3e\x3c/div\x3e\r\n              \x3c/label\x3e\r\n              \x3cdiv class\x3d"invite-members__email-validate-container js-email-validate-container hide"\x3e\r\n                \x3clabel class\x3d"trailer-quarter"\x3e\r\n                  \x3cinput type\x3d"radio" name\x3d"validateEmail" class\x3d"js-validate-email" checked /\x3e\r\n                  \x3cspan class\x3d"margin-left-half"\x3e${i18n.organizationInvite.step3.mustValidateEmail}\x3c/span\x3e\r\n                \x3c/label\x3e\r\n                \x3clabel for\x3d"invite-members-validate-email"\x3e\r\n                  \x3cinput type\x3d"radio" name\x3d"validateEmail" class\x3d"js-no-validate-email"  id\x3d"invite-members-validate-email"/\x3e\r\n                  \x3cspan class\x3d"margin-left-half"\x3e${i18n.organizationInvite.step3.doNotValidateEmail}\x3c/span\x3e\r\n                \x3c/label\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cbutton class\x3d"btn invite-members__stepper-next leader-half js-stepper-next-btn"\x3e\r\n        ${i18n.myOrganization.inviteMembers.next}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"invite-members__content"\x3e\r\n    \x3cbutton data-step-num\x3d"4" class\x3d"js-stepper-title btn-link btn-link-darker-gray invite-members__stepper-title"\x3e\r\n      ${step4Title}\r\n    \x3c/button\x3e\r\n    \x3cdiv class\x3d"js-step-4 hide leader-half"\x3e\r\n      \x3cdiv class\x3d"hide-on-mobile"\x3e\r\n        \x3cdiv class\x3d"trailer-1"\x3e\r\n          \x3cdiv class\x3d"font-size-2 avenir-bold"\x3e${i18n.myOrganization.inviteMembers.summary}\x3c/div\x3e\r\n          \x3cdiv class\x3d"js-summary-desc"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"invite-members__content-pane if-not-on-premise js-email-settings"\x3e\r\n        \x3cdiv class\x3d"font-size-1 avenir-bold trailer-quarter hide-on-mobile"\x3e${i18n.myOrganization.inviteMembers.emailSettings}\x3c/div\x3e\r\n        \x3cdiv class\x3d"hide-on-mobile"\x3e${i18n.myOrganization.inviteMembers.emailSettingsDesc}\x3c/div\x3e\r\n        \x3cdiv class\x3d"leader-1"\x3e${i18n.myOrganization.inviteMembers.emailMessage}\x3c/div\x3e\r\n        \x3ctextarea class\x3d"invite-members__email-message js-email-message"\x3e\r\n            \x3c!-- set by _initEmailMessage --\x3e\r\n          \x3c/textarea\r\n        \x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"invite-members__content-pane hide-on-mobile"\x3e\r\n        \x3cdiv class\x3d"font-size-1 trailer-1 avenir-bold js-summary-member-count"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"flex invite-members__list-header"\x3e\r\n          \x3cdiv class\x3d"flex-1 avenir-bold"\x3e${i18n.myOrganization.inviteMembers.member}\x3c/div\x3e\r\n          \x3cdiv class\x3d"flex-0 invite-members__list-item-attr avenir-bold margin-right-half"\x3e\r\n            ${i18n.myOrganization.inviteMembers.licenseType}\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"flex-0 invite-members__list-item-attr avenir-bold margin-right-half"\x3e\r\n            ${i18n.myOrganization.inviteMembers.role}\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"flex-0 invite-members__list-item-attr avenir-bold margin-right-half"\x3e\r\n            ${i18n.myOrganization.inviteMembers.includedLicenses}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"js-summary-member-list"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"js-summary-pagination"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"invite-members__content-pane hide-on-mobile flex-column js-summary-props-panel overflow-visible"\x3e\r\n        \x3cdiv class\x3d"font-size-1 trailer-1 avenir-bold"\x3e${i18n.myOrganization.inviteMembers.properties}\x3c/div\x3e\r\n        \x3cdiv\r\n          class\x3d"flex invite-members__summary-item-row invite-members__summary-item-row--top-border if-not-on-premise js-summary-credit-limit-container"\r\n        \x3e\r\n          \x3cdiv class\x3d""\x3e${i18n.myOrganization.inviteMembers.creditLimit}\x3c/div\x3e\r\n          \x3cdiv class\x3d"flex-1 js-summary-credit-limit"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"flex invite-members__summary-item-row if-not-on-premise"\x3e\r\n          \x3cdiv class\x3d""\x3e${i18n.myOrganization.inviteMembers.enableEsriAccess}\x3c/div\x3e\r\n          \x3cdiv class\x3d"flex-1 js-summary-enable-esri-access"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"flex invite-members__summary-item-row hide-if-invite-method hide-if-cannot-update"\x3e\r\n          \x3cdiv class\x3d""\x3e${i18n.myOrganization.inviteMembers.profileVis}\x3c/div\x3e\r\n          \x3cdiv class\x3d"flex-1 js-summary-profile-vis"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv\r\n          class\x3d"flex invite-members__summary-item-row hide-if-invite-method hide-if-cannot-update js-start-page-summary-row"\r\n        \x3e\r\n          \x3cdiv class\x3d""\x3e${i18n.myOrganization.inviteMembers.startPage}\x3c/div\x3e\r\n          \x3cdiv class\x3d"flex-1 js-summary-start-page"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"flex invite-members__summary-item-row hide-if-invite-method hide-if-cannot-update"\x3e\r\n          \x3cdiv class\x3d""\x3e${i18n.myOrganization.inviteMembers.language}\x3c/div\x3e\r\n          \x3cdiv class\x3d"flex-1 js-summary-language"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv\r\n          class\x3d"flex invite-members__summary-item-row hide-if-invite-method hide-if-cannot-update js-summary-language-format-container"\r\n        \x3e\r\n          \x3cdiv class\x3d""\x3e${i18n.myOrganization.inviteMembers.numDateFormat}\x3c/div\x3e\r\n          \x3cdiv class\x3d"flex-1 js-summary-language-format"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"flex invite-members__summary-item-row js-summary-apps-section"\x3e\r\n          \x3cdiv\x3e${i18n.myOrganization.inviteMembers.apps}\x3c/div\x3e\r\n          \x3cdiv class\x3d"flex-1 js-summary-app-icons"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"flex invite-members__summary-item-row js-summary-groups-section"\x3e\r\n          \x3cdiv\x3e${i18n.myOrganization.inviteMembers.groups}\x3c/div\x3e\r\n          \x3cdiv class\x3d"flex-1 flex flex-wrap js-group-icons"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"flex invite-members__summary-item-row js-summary-categories-section"\x3e\r\n          \x3cdiv\x3e${i18n.myOrganization.inviteMembers.memberCategories.title}\x3c/div\x3e\r\n          \x3cdiv class\x3d"flex-1 flex flex-wrap js-summary-category-chips"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"only-on-mobile leader-1 trailer-1"\x3e\r\n        \x3cdiv class\x3d"js-mobile-invite-member-number"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"js-mobile-member-icons"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cbutton class\x3d"btn invite-members__stepper-next leader-half js-stepper-next-btn js-step4-stepper-btn"\x3e\r\n        ${i18n.myOrganization.inviteMembers.sendInvitations}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"invite-members__progress-error hide js-progress-error"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"js-mobile-error"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/SelectedGroups.html":'\x3cdiv class\x3d"hide dropdown js-dropdown invite-members__selected-groups"\x3e\r\n  \x3cbutton class\x3d"btn-link flex font-size--1 invite-members__groups-dropdown js-dropdown-toggle"\x3e\r\n    \x3cdiv class\x3d"invite-members__groups-text" data-dojo-attach-point\x3d"_count"\x3e\r\n      ${i18n.myOrganization.inviteMembers.assignedGroups}\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"invite-members__groups-dropdown-arrow"\x3e${!icons.caret-right.16}\x3c/div\x3e\r\n  \x3c/button\x3e\r\n  \x3cdiv class\x3d"dropdown-menu dropdown-menu-full dropdown-right ${dropdownClass}" data-dojo-attach-point\x3d"_list"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/InviteMembers/templates/SelectedGroupItem.html":'\x3cdiv class\x3d"invite-members__selected-group-item-container"\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"_groupIcon"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"invite-members__selected-group-item-content margin-left-1"\x3e\r\n    \x3cdiv class\x3d"invite-members__selected-group-item-title-wrapper"\x3e\r\n      \x3cspan class\x3d"invite-members__selected-group-item-title font-size-1" title\x3d"${item.title:stripHTML}"\x3e${item.title:stripHTML}\x3c/span\x3e\r\n      \x3ca class\x3d"invite-members__selected-group-item-owner font-size--2"\x3e${item.owner}\x3c/a\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"invite-members__selected-group-item-remove margin-left-1"\x3e\r\n      \x3cbutton class\x3d"btn-link btn-link-off-black js-remove-group"\x3e\r\n        \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"18" height\x3d"18" viewBox\x3d"0 0 18 18"\x3e\r\n          \x3cpath fill\x3d"#6D6E71" d\x3d"M9.957 9.646l4.827 4.827-1.172 1.173-4.828-4.827-4.827 4.827-1.173-1.173 4.828-4.827-4.828-4.827 1.173-1.172 4.827 4.827 4.828-4.827 1.172 1.173-4.827 4.826z" /\x3e\r\n        \x3c/svg\x3e\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/LicensesOverlay.html":'\x3cdiv class\x3d"licenses-overlay__content"\x3e\r\n    \x3cdiv class\x3d"text-center leader-3 trailer-1 font-size-1 hide js-no-licenses"\x3e\r\n      ${i18n.myOrganization.licensesTab.noAddOnLicenses}\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"js-panels-container js-accordion"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n',"url:arcgisonline/pages/dijit/InviteMembers/templates/MemberForm.html":'\x3cdiv class\x3d"invite-members__content-pane invite-members-form invite-members__form--is-add"\x3e\r\n    \x3cdiv class\x3d"font-size-2 trailer-1 invite-members__form-title"\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"_formTitle"\x3e${i18n.myOrganization.inviteMembers.newMember}\x3c/span\x3e\r\n        \x3c!-- \x3cdiv class\x3d"invite-members__form-buttons right"\x3e\r\n            \x3cbutton class\x3d"btn-link if-add" data-dojo-attach-point\x3d"_addAnotherBtn"\x3e${i18n.myOrganization.inviteMembers.addAnother}\x3c/button\x3e\r\n            \x3cbutton class\x3d"btn margin-left-1 if-add" data-dojo-attach-point\x3d"_addBtn"\x3e${i18n.myOrganization.inviteMembers.add}\x3c/button\x3e\r\n            \x3cbutton class\x3d"btn margin-left-1 if-edit" data-dojo-attach-point\x3d"_updateBtn"\x3e${i18n.myOrganization.inviteMembers.update}\x3c/button\x3e\r\n            \x3cbutton class\x3d"btn btn-clear margin-left-half" data-dojo-attach-point\x3d"_cancelBtn"\x3e${i18n.myOrganization.inviteMembers.cancel}\x3c/button\x3e\r\n        \x3c/div\x3e --\x3e\r\n    \x3c/div\x3e\r\n    \x3cform data-dojo-attach-point\x3d"_form"\x3e\r\n        \x3cdiv class\x3d"flex invite-members__form-row"\x3e\r\n            \x3cdiv class\x3d"hide invite-members__form-column margin-right-2 margin-left-0" data-dojo-attach-point\x3d"_firstnameCol"\x3e\r\n                \x3clabel for\x3d"invite-members-first-name"\x3e\r\n                    ${i18n.myOrganization.inviteMembers.firstName}\r\n                    \x3cinput id\x3d"invite-members-first-name" type\x3d"text" name\x3d"firstname" data-dojo-attach-point\x3d"_firstnameInput" class\x3d"js-form-input" data-property-name\x3d"firstname" maxlength\x3d"115"\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"_firstnameError" class\x3d"input-error-message"\x3e${i18n.organizationInvite.step2Create.invalid.firstNameIsBlank}\x3c/div\x3e\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"hide invite-members__form-column" data-dojo-attach-point\x3d"_lastnameCol"\x3e\r\n                \x3clabel for\x3d"invite-members-last-name"\x3e\r\n                    ${i18n.myOrganization.inviteMembers.lastName}\r\n                    \x3cinput id\x3d"invite-members-last-name" type\x3d"text" name\x3d"lastname" data-dojo-attach-point\x3d"_lastnameInput" class\x3d"js-form-input" data-property-name\x3d"lastname" maxlength\x3d"115"\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"_lastnameError" class\x3d"input-error-message"\x3e${i18n.organizationInvite.step2Create.invalid.lastNameIsBlank}\x3c/div\x3e\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"flex invite-members__form-row" data-dojo-attach-point\x3d"emailRow"\x3e\r\n            \x3cdiv class\x3d"invite-members__form-column margin-right-2 margin-left-0" data-dojo-attach-point\x3d"_emailCol"\x3e\r\n                \x3clabel for\x3d"invite-members-email-address"\x3e\r\n                    ${i18n.myOrganization.inviteMembers.emailAddress}\r\n                    \x3cinput id\x3d"invite-members-email-address" type\x3d"text" name\x3d"email" data-dojo-attach-point\x3d"_emailInput" class\x3d"js-form-input"  data-property-name\x3d"email"\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"_emailError" class\x3d"input-error-message"\x3e\x3c/div\x3e\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"hide invite-members__form-column" data-dojo-attach-point\x3d"_usernameCol"\x3e\r\n                \x3clabel for\x3d"invite-members-username" class\x3d"position-relative flex-1"\x3e\r\n                  ${i18n.myOrganization.inviteMembers.username}\r\n                  \x3cdiv class\x3d"flex"\x3e\r\n                    \x3cinput id\x3d"invite-members-username" type\x3d"text" name\x3d"username" data-dojo-attach-point\x3d"_usernameInput" class\x3d"flex-1 js-form-input" data-property-name\x3d"username"\x3e\r\n                    \x3cbutton class\x3d"flex-0 btn btn-clear margin-left-half hide" data-dojo-attach-point\x3d"_searchEnterpriseUsersBtn"\x3e${i18n.myOrganization.inviteMembers.searchForUser}\x3c/button\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"input-error-warning-icon"\x3e${!icons.exclamation-mark-triangle.16}\x3c/div\x3e\r\n                  \x3cdiv data-dojo-attach-point\x3d"_usernameError" class\x3d"input-error-message"\x3e\x3c/div\x3e\r\n                  \x3cdiv data-dojo-attach-point\x3d"_usernameWarning" class\x3d"input-error-message input-error-message-warning"\x3e${i18n.myOrganization.inviteMembers.usernameAdjusted}\x3c/div\x3e\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"hide invite-members__form-column" data-dojo-attach-point\x3d"_idpUsernameCol"\x3e\r\n                \x3clabel class\x3d"position-relative" for\x3d"invite-members-idp-username"\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"idpLabelText"\x3e${i18n.myOrganization.inviteMembers.idpUsername}\x3c/div\x3e\r\n                    \x3cinput id\x3d"invite-members-idp-username" type\x3d"text" name\x3d"idpUsername" data-dojo-attach-point\x3d"_idpUsernameInput" class\x3d"js-form-input" data-property-name\x3d"idpUsername"\x3e\r\n                    \x3cdiv class\x3d"input-error-warning-icon"\x3e${!icons.exclamation-mark-triangle.16}\x3c/div\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"_idpUsernameError" class\x3d"input-error-message"\x3e\x3c/div\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"_idpUsernameWarning" class\x3d"input-error-message input-error-message-warning"\x3e${i18n.myOrganization.inviteMembers.usernameExists}\x3c/div\x3e\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"flex invite-members__form-row hide" data-dojo-attach-point\x3d"idpRow"\x3e\r\n          \x3cdiv class\x3d"invite-members__form-column margin-right-2"\x3e\r\n            \x3clabel\x3e\r\n              ${i18n.myOrganization.inviteMembers.idType}\r\n              \x3cdiv class\x3d"js-id-type-select"\x3e\x3c/div\x3e\r\n            \x3c/label\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"invite-members__form-row"\x3e\r\n            \x3clabel class\x3d"invite-members__user-type"\x3e\r\n                \x3cdiv class\x3d"invite-members-form__user-type-label"\x3e${i18n.myOrganization.inviteMembers.licenseType}\x3c/div\x3e\r\n                \x3cdiv class\x3d"invite-members-form__user-types-wrapper"\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"_licenseTypes"\x3e\x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"flex invite-members__form-row"\x3e\r\n            \x3cdiv class\x3d"invite-members__role invite-members__form-column margin-right-2 margin-left-0"\x3e\r\n                \x3clabel\x3e\r\n                    \x3cdiv class\x3d"invite-members-form__role-label"\x3e${i18n.myOrganization.inviteMembers.role}\x3c/div\x3e\r\n                    \x3cdiv class\x3d"invite-members-form__role-select-wrapper"\x3e\x3cdiv data-dojo-attach-point\x3d"_roleContainer"\x3e\x3c/div\x3e\x3c/div\x3e\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"hide invite-members__form-column invite-members__form-password" data-dojo-attach-point\x3d"_passwordCol"\x3e\r\n                \x3clabel\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"_passwordLabel"\x3e${i18n.myOrganization.inviteMembers.tempPassword}\x3c/span\x3e\r\n                    \x3cinput type\x3d"password" aria-describedby\x3d"invite-password-strength-error" name\x3d"password" data-dojo-attach-point\x3d"_passwordInput" class\x3d"js-form-input" data-property-name\x3d"password" autocomplete\x3d"new-password"\x3e\r\n                    \x3cdiv id\x3d"invite-password-strength-error"\x3e\r\n                        \x3cdiv class\x3d"js-strength-meter"\x3e\x3c/div\x3e\r\n                        \x3cdiv data-dojo-attach-point\x3d"_passwordError" class\x3d"font-size-0 input-error-message"\x3e\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_roleError" class\x3d"input-error-message"\x3e\r\n            \x3cdiv class\x3d"flex flex-align-center"\x3e\r\n                \x3ccalcite-icon icon\x3d"exclamation-mark-triangle" scale\x3d"s" class\x3d"margin-right-half"\x3e\x3c/calcite-icon\x3e\r\n                ${i18n.myOrganization.inviteMembers.chooseValidRole}\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"invite-members-form__user-type-role"\x3e\r\n            \x3clabel\x3e\r\n                ${i18n.myOrganization.inviteMembers.userTypeAndRole}\r\n                \x3cdiv class\x3d"flex invite-members-form__user-type-role-panel" data-dojo-attach-point\x3d"_userTypeRolePanel"\x3e\r\n                    \x3cdiv\x3e\r\n                        \x3cdiv class\x3d"font-size--3"\x3e${i18n.myOrganization.inviteMembers.licenseType}\x3c/div\x3e\r\n                        \x3cdiv data-dojo-attach-point\x3d"_userTypeName"\x3e\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"margin-left-1"\x3e\r\n                        \x3cdiv class\x3d"font-size--3"\x3e${i18n.myOrganization.inviteMembers.role}\x3c/div\x3e\r\n                        \x3cdiv data-dojo-attach-point\x3d"_roleName"\x3e\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"flex-1 flex drill-panel__arrow"\x3e\r\n                        ${!icons.chevron-right.24}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/label\x3e\r\n        \x3c/div\x3e\r\n    \x3c/form\x3e\r\n    \x3cbutton class\x3d"btn-link invite-members-form__remove-btn" data-dojo-attach-point\x3d"_removeBtn"\x3e\r\n        ${i18n.myOrganization.inviteMembers.removeMember}\r\n    \x3c/button\x3e\r\n    \x3cdiv class\x3d"flex leader-half padding-leader-half invite-members__form-bottom-actions"\x3e\r\n        \x3cdiv class\x3d"flex-1 invite-members-form__spacer"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"invite-members-form__buttons"\x3e\r\n            \x3cbutton class\x3d"btn-link if-add invite-members-form__add-another" data-dojo-attach-point\x3d"_addAnotherBtn"\x3e${i18n.myOrganization.inviteMembers.addAnother}\x3c/button\x3e\r\n            \x3cbutton class\x3d"btn margin-left-1 if-add invite-members-form--add-btn" data-dojo-attach-point\x3d"_addBtn"\x3e${i18n.myOrganization.inviteMembers.next}\x3c/button\x3e\r\n            \x3cbutton class\x3d"btn margin-left-1 if-edit invite-members-form--add-btn" data-dojo-attach-point\x3d"_updateBtn"\x3e${i18n.myOrganization.inviteMembers.next}\x3c/button\x3e\r\n            \x3cbutton class\x3d"btn btn-clear margin-left-half" data-dojo-attach-point\x3d"_cancelBtn"\x3e${i18n.myOrganization.inviteMembers.cancel}\x3c/button\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/SelectEnterpriseUserDlg.html":'\x3cdiv class\x3d"${baseClass}"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"_dialog" id\x3d"select-enterprise-user-dialog" class\x3d"${baseClass}" title\x3d"${i18n.selectUser}" execute\x3d""\x3e\r\n    \x3cp\x3e${i18n.useSearch}\x3c/p\x3e\r\n    \x3cdiv class\x3d"left esriFloatLeading esriTrailingMargin025"\x3e\r\n      \x3clabel for\x3d"searchInputUser" class\x3d"display-inline"\x3e${i18n.findUser}\x3c/label\x3e\r\n      \x3cdiv id\x3d"searchInputUser" data-dojo-type\x3d"dijit/form/TextBox" class\x3d"${baseClass}" data-dojo-attach-point\x3d"_search" data-dojo-props\x3d"trim:true" data-dojo-attach-event\x3d"onKeyDown:onSearchKeyDown"\x3e\x3c/div\x3e\r\n      \x3cbutton data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-point\x3d"_searchBtn" class\x3d"calcite light small" data-dojo-attach-event\x3d"onClick:onSearch"\x3e${i18n.search}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cbr style\x3d"clear:both;"/\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_gridContainer" class\x3d"leader-1"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"leader-half clearfix"\x3e\r\n      \x3cdiv class\x3d"esriFloatLeading left" data-dojo-attach-point\x3d"_goToPageContainer"\x3e\r\n        \x3clabel for\x3d"goToInputUser"\x3e${i18n.goToPage}\x3c/label\x3e\r\n        \x3cdiv id\x3d"goToInputUser" class\x3d"${baseClass}" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-attach-point\x3d"_goTo" data-dojo-attach-event\x3d"onKeyDown:onGoToPageKeyDown" data-dojo-props\x3d"trim:true"\x3e\x3c/div\x3e\r\n        \x3cbutton data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-point\x3d"_goBtn" class\x3d"calcite light small" data-dojo-attach-event\x3d"onClick:onGoToPage"\x3e${i18n.goTo}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriFloatTrailing right"\x3e\r\n        \x3cbutton data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-point\x3d"_okBtn" class\x3d"calcite blue" data-dojo-attach-event\x3d"onClick:onOk"\x3e${i18n.selectUser}\x3c/button\x3e\r\n        \x3cbutton data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-point\x3d"_cancelBtn" class\x3d"calcite transparent" data-dojo-attach-event\x3d"onClick:onCancel"\x3e${i18n.cancel}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n      \x3cbr style\x3d"clear:both;"/\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/pages/dijit/InviteMembers/templates/NewMemberCard.html":'\x3cdiv class\x3d"invite-members__member-row"\x3e\r\n  \x3cdiv class\x3d"flex flex-align-center invite-members__list-item" data-dojo-attach-point\x3d"_listItem"\x3e\r\n    \x3cdiv class\x3d"flex-0 margin-right-half" data-dojo-attach-point\x3d"checkboxCol"\x3e\r\n      \x3cinput type\x3d"checkbox" data-dojo-attach-point\x3d"_checkbox" /\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"flex-1 invite-members__list-item-member-info"\x3e\r\n      \x3cdiv class\x3d"flex flex-align-center"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"thumbContainer"\x3e\x3c/div\x3e\r\n        \x3cdiv\x3e\r\n          \x3cdiv class\x3d"font-size-1 avenir-bold trailer-quarter flex invite-members__list-item-main-title"\x3e\r\n            \x3cspan class\x3d"hide" data-dojo-attach-point\x3d"_errorIcon"\x3e\r\n              \x3csvg\r\n                class\x3d"invite-members__field-error margin-right-quarter"\r\n                xmlns\x3d"http://www.w3.org/2000/svg"\r\n                id\x3d"icons"\r\n                viewBox\x3d"0 0 16 16"\r\n              \x3e\r\n                \x3cpath\r\n                  d\x3d"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zm.994-3.576a1 1 0 0 1-2 0v-.048a1 1 0 0 1 2 0zM7.995 8h-.977V4h.977z"\r\n                \x3e\x3c/path\x3e\r\n              \x3c/svg\x3e\r\n            \x3c/span\x3e\r\n            \x3cspan class\x3d"invite-members__list-item-main-title" data-dojo-attach-point\x3d"_mainTitle"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv\r\n            class\x3d"invite-members__list-item-label invite-members__list-item-subtitle"\r\n            data-dojo-attach-point\x3d"_subTitle"\r\n          \x3e\r\n            \x3cspan data-dojo-attach-point\x3d"_username"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"org-member-dot-separator"\x3e\u2022\x3c/span\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"_email"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"flex-0 invite-members__list-item-attr margin-right-half"\x3e\r\n      \x3cdiv class\x3d"leader-quarter invite-members__list-item-label" data-dojo-attach-point\x3d"_licenseType"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"flex-0 invite-members__list-item-attr margin-right-half"\x3e\r\n      \x3cdiv class\x3d"flex flex-align-center"\x3e\r\n        \x3cdiv class\x3d"leader-quarter invite-members__list-item-label" data-dojo-attach-point\x3d"_role"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"defaultRoleWarning" class\x3d"hide margin-left-half"\x3e\r\n          \x3cbutton id\x3d"default-role-warning-btn" data-dojo-attach-point\x3d"defaultRoleWarningBtn" class\x3d"btn-link btn-link-darker-gray default-role-warning flex-center"\x3e\r\n            \x3ccalcite-icon icon\x3d"exclamation-mark-triangle"\x3e\x3c/calcite-icon\x3e\r\n          \x3c/button\x3e\r\n          \x3ccalcite-tooltip placement\x3d"auto" reference-element\x3d"default-role-warning-btn"\x3e\r\n            \x3cp class\x3d"trailer-0" data-dojo-attach-point\x3d"defaultRoleTooltipContent"\x3e${i18n.myOrganization.inviteMembers.roleWarning}\x3c/p\x3e\r\n          \x3c/calcite-tooltip\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"flex-0 invite-members__list-licenses-col margin-right-half"\x3e\r\n      \x3cdiv class\x3d"hide font-size-2 leader-quarter invite-members__list-item-label" data-dojo-attach-point\x3d"_noLicenses"\x3e\r\n        ${i18n.myOrganization.inviteMembers.none}\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_licenses"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"flex-0 invite-members__list-item-edit" data-dojo-attach-point\x3d"editCol"\x3e\r\n      \x3cbutton class\x3d"btn-link" data-dojo-attach-point\x3d"_editButton"\x3e${!icons.edit.16}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/CreateReport/templates/CreateReport.html":'\x3cdiv class\x3d"create-report js-overlay-body"\x3e\r\n  \x3c!-- Report type select --\x3e\r\n  \x3cdiv class\x3d"report-type-container"\x3e\r\n    \x3clabel class\x3d"js-report-type-label" for\x3d"reportLabel"\x3e\r\n      ${i18n.createReport.reportType.label}\r\n      \x3cdiv class\x3d"js-report-type-options" id\x3d"reportLabel"\x3e\x3c/div\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n  \x3c!-- Report name --\x3e\r\n  \x3cdiv class\x3d"report-name-container"\x3e\r\n    \x3clabel for\x3d"nameLabel"\x3e\r\n      ${i18n.createReport.nameLabel}\r\n      \x3cinput type\x3d"text" placeholder\x3d"" class\x3d"report-input js-report-name-input" value\x3d"" id\x3d"nameLabel" aria-label\x3d"${i18n.createReport.reportName}"\x3e\r\n      \x3cspan class\x3d"report-edit-icon"\x3e${editIcon}\x3c/span\x3e\r\n      \x3cdiv class\x3d"input-error-message name-error-message"\x3e\r\n        ${i18n.itemProperties.error.badCharacter}\r\n      \x3c/div\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n  \x3c!-- Date range select --\x3e\r\n  \x3cdiv class\x3d"date-picker-container panel panel-white"\x3e\r\n    \x3clabel class\x3d"date-duration select-full" for\x3d"custom-date-duration-select"\x3e\r\n      \x3cspan class\x3d"hide"\x3e${i18n.createReport.dateDuration.label}\x3c/span\x3e\r\n      \x3ccalcite-segmented-control layout\x3d"horizontal" appearance\x3d"outline" width\x3d"full" role\x3d"radiogroup" scale\x3d"l" class\x3d"custom-date-duration-select trailer-1"\x3e\r\n        \x3ccalcite-segmented-control-item value\x3d"daily" checked tabindex\x3d"0" aria-checked\x3d"true" role\x3d"radio" class\x3d"duration-daily"\x3e\r\n          ${i18n.createReport.dateDuration.day}\r\n        \x3c/calcite-segmented-control-item\x3e\r\n        \x3ccalcite-segmented-control-item value\x3d"weekly" aria-checked\x3d"false" role\x3d"radio" class\x3d"duration-weekly"\x3e\r\n          ${i18n.createReport.dateDuration.week}\r\n        \x3c/calcite-segmented-control-item\x3e\r\n        \x3ccalcite-segmented-control-item value\x3d"monthly" aria-checked\x3d"false" role\x3d"radio" class\x3d"duration-monthly"\x3e\r\n          ${i18n.createReport.dateDuration.month}\r\n        \x3c/calcite-segmented-control-item\x3e\r\n        \x3ccalcite-segmented-control-item value\x3d"quarterly" aria-checked\x3d"false" role\x3d"radio" class\x3d"duration-quarterly"\x3e\r\n          ${i18n.createReport.dateDuration.quarter}\r\n        \x3c/calcite-segmented-control-item\x3e\r\n        \x3ccalcite-segmented-control-item value\x3d"yearly" aria-checked\x3d"false" role\x3d"radio" class\x3d"duration-yearly"\x3e\r\n          ${i18n.createReport.dateDuration.year}\r\n        \x3c/calcite-segmented-control-item\x3e\r\n        \x3cinput type\x3d"hidden" /\x3e\r\n      \x3c/calcite-segmented-control\x3e\r\n      \x3cdiv class\x3d"js-report-date-options-duration"\x3e\x3c/div\x3e\r\n    \x3c/label\x3e\r\n    \x3clabel class\x3d"date-day date-day-container" for\x3d"custom-date-day-select"\x3e\r\n      ${i18n.createReport.dateDuration.timeframe}\r\n      \x3ccalcite-input-date-picker\r\n        scale\x3d"l"\r\n        lang\x3d"${locale}"\r\n        layout\x3d"horizontal"\r\n        class\x3d"report__date-picker"\r\n        overlay-positioning\x3d"fixed"\r\n      \x3e\x3c/calcite-input-date-picker\x3e\r\n    \x3c/label\x3e\r\n    \x3clabel class\x3d"date-range date-range-container" for\x3d"custom-date-range-select"\x3e\r\n      ${i18n.createReport.dateDuration.timeframe}\r\n      \x3ccalcite-input-date-picker\r\n        scale\x3d"l"\r\n        lang\x3d"${locale}"\r\n        layout\x3d"horizontal"\r\n        range\x3d"true"\r\n        class\x3d"report__range-picker"\r\n        overlay-positioning\x3d"fixed"\r\n      \x3e\x3c/calcite-input-date-picker\x3e\r\n    \x3c/label\x3e\r\n    \x3clabel class\x3d"date-year date-year-container half" for\x3d"date-year-select"\x3e\r\n      ${i18n.createReport.dateDuration.year}\r\n      \x3cselect class\x3d"select-full date-year-select" id\x3d"date-year-select"\x3e\r\n        \x3c!-- \x3coption\x3e\x3c/option\x3e --\x3e\r\n      \x3c/select\x3e\r\n    \x3c/label\x3e\r\n    \x3cp class\x3d"date-duration-info text-light font-size--2 leader-half"\x3e${i18n.createReport.dateDuration.startInfo}\x3c/p\x3e\r\n    \x3cp class\x3d"date-duration-exists hide"\x3e${i18n.createReport.dateDuration.reportExists}\x3c/p\x3e\r\n    \x3cdiv class\x3d"hide" id\x3d"view-count-container"\x3e\r\n      \x3clabel class\x3d"view-count half" for\x3d"view-count-select"\x3e\r\n        \x3cspan id\x3d"view-aggregate-label"\x3e\r\n          ${i18n.createReport.viewCountAggregation.dailyLabel}\r\n        \x3c/span\x3e\r\n          \x3cselect class\x3d"select-full view-count-select" id\x3d"view-aggregate-select"\x3e\r\n            \x3coption class\x3d"view-count-select-option day" value\x3d"day"\x3e${i18n.createReport.viewCountAggregation.daily}\x3c/option\x3e\r\n            \x3coption class\x3d"view-count-select-option week" value\x3d"week"\x3e${i18n.createReport.viewCountAggregation.weekly}\x3c/option\x3e\r\n            \x3coption class\x3d"view-count-select-option month" value\x3d"month"\x3e${i18n.createReport.viewCountAggregation.monthly}\x3c/option\x3e\r\n          \x3c/select\x3e\r\n      \x3c/label\x3e\r\n      \x3cdiv class\x3d"view-count-preview panel leader-half"\x3e\r\n        \x3clabel\x3e\r\n          ${i18n.createReport.viewCountAggregation.preview}\r\n          \x3cdiv class\x3d"overflow-auto column-preview leader-quarter"\x3e\r\n            \x3ctable class\x3d"table trailer-0"\x3e\r\n              \x3ctbody\x3e\r\n                \x3ctr id\x3d"view-count-preview-row"\x3e\r\n                  \x3ctd\x3e${i18n.createReport.viewCountAggregation.columns.itemID}\x3c/td\x3e\r\n                  \x3ctd\x3eOption 1\x3c/td\x3e\r\n                  \x3ctd\x3eOption 2\x3c/td\x3e\r\n                  \x3ctd\x3eOption 3\x3c/td\x3e\r\n                  \x3ctd\x3eOption 4\x3c/td\x3e\r\n                  \x3ctd\x3eOption 5\x3c/td\x3e\r\n                \x3c/tr\x3e\r\n              \x3c/tbody\x3e\r\n            \x3c/table\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!-- Bottom --\x3e\r\n  \x3cdiv class\x3d"create-report__progress-error hide js-progress-error"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"js-mobile-error"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/CreateReport/templates/ReportTypeSelect.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"report-type__options-container" role\x3d"listbox"\x3e\r\n      \x3cdiv class\x3d"report-type__options" data-dojo-attach-point\x3d"_options"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"report-type__selected-option" data-dojo-attach-point\x3d"_selectedOption"\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"report-type__selected-line"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"report-type__selected-line"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/CreateReport/templates/ReportTypeOption.html":'\x3cdiv class\x3d"report-type-option" tabindex\x3d"0" role\x3d"option"\x3e\r\n  \x3cdiv class\x3d"flex report-type-option__body"\x3e\r\n    \x3cdiv class\x3d"flex flex-1"\x3e\r\n      \x3cdiv class\x3d"margin-right-1 flex-column-justify-center hide"\x3e\r\n        \x3cinput type\x3d"radio" name\x3d"${radioName}" data-dojo-attach-point\x3d"_radioButton" aria-checked\x3d"false" \x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"flex-1 report-type-option__desc-container"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_name"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"screen-readers-only"\x3e, \x3c/div\x3e\r\n        \x3cdiv class\x3d"description font-size--2" data-dojo-attach-point\x3d"_desc"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!-- \x3cdiv data-dojo-attach-point\x3d"_desc"\x3e\x3c/div\x3e --\x3e\r\n    \x3cdiv class\x3d"if-report-type-option-error margin-right-3"\x3e\r\n      \x3cspan class\x3d"report-type-option__error-text margin-right-half"\x3e\r\n        ${i18n.myOrganization.inviteMembers.chooseValidLicenseType}\r\n      \x3c/span\x3e\r\n      \x3cimg class\x3d"report-type-option__error-icon" src\x3d"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjE2cHgiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeD0iMiIgeT0iMCI+PHBhdGggZmlsbD0iI2M4NmE0YSIgZD0iTTExLjIyNSwwSDQuNjQ4TDAsNC42NXY2LjU3Nmw0LjY0OCw0LjY0OWg2LjU3Nmw0LjY1LTQuNjQ5VjQuNjVMMTEuMjI1LDB6IE05LjA3MSwxMy42MDdINi44MDR2LTIuMjY5aDIuMjY4VjEzLjYwN3ogTTkuMDcxLDkuMDcxSDYuODA0VjMuNDAyaDIuMjY4VjkuMDcxeiIvPjwvc3ZnPg\x3d\x3d"\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"block-group block-group-3-up tablet-block-group-1-up phone-block-group-1-up leader-half margin-left-2 expanded-icon-list" data-dojo-attach-point\x3d"_expandedAppList"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/CreateReport/templates/ScheduleReport.html":'\x3cdiv class\x3d"create-report js-overlay-body"\x3e\r\n  \x3c!-- Report type select --\x3e\r\n  \x3cdiv class\x3d"report-type-container"\x3e\r\n    \x3clabel class\x3d"js-report-type-label"\x3e\r\n      ${i18n.createReport.reportType.label}\r\n      \x3cdiv class\x3d"js-report-type-options"\x3e\x3c/div\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n  \x3c!-- Report name select [disabled] --\x3e\r\n  \x3cdiv class\x3d"report-name-container"\x3e\r\n    \x3clabel\x3e\r\n      ${i18n.createReport.nameLabel}\r\n      \x3cinput type\x3d"text" placeholder\x3d"" class\x3d"report-input js-report-name-input" value\x3d""\x3e\r\n      \x3cspan class\x3d"report-edit-icon"\x3e${editIcon}\x3c/span\x3e\r\n      \x3cdiv class\x3d"input-error-message name-error-message"\x3e\r\n        ${i18n.itemProperties.error.badCharacter}\r\n      \x3c/div\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n  \x3c!-- Report Type 2.0 --\x3e\r\n  \x3cdiv class\x3d"report-schedule-container no-vert-padding"\x3e\r\n    \x3cdiv class\x3d"report-schedule__toggle-switch-row"\x3e\r\n      \x3cdiv class\x3d"flex hide"\x3e\r\n        \x3cdiv class\x3d"flex-1"\x3e${i18n.createReport.schedule.label}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"report-schedule__container padding-1"\x3e\r\n        \x3cdiv class\x3d"report-schedule__duration"\x3e\r\n          \x3ccalcite-segmented-control layout\x3d"horizontal" appearance\x3d"outline" width\x3d"full" role\x3d"radiogroup" scale\x3d"l" class\x3d"report-schedule__duration-radio"\x3e\r\n            \x3ccalcite-segmented-control-item value\x3d"daily" checked\x3d"" tabindex\x3d"0" aria-checked\x3d"true" role\x3d"radio" class\x3d"schedule-duration-daily"\x3e\r\n              ${i18n.createReport.schedule.daily}\r\n            \x3c/calcite-segmented-control-item\x3e\r\n            \x3ccalcite-segmented-control-item value\x3d"weekly" aria-checked\x3d"false" role\x3d"radio" class\x3d"schedule-duration-weekly"\x3e\r\n              ${i18n.createReport.schedule.weekly}\r\n            \x3c/calcite-segmented-control-item\x3e\r\n            \x3ccalcite-segmented-control-item value\x3d"monthly" aria-checked\x3d"false" role\x3d"radio" class\x3d"schedule-duration-monthly"\x3e\r\n              ${i18n.createReport.schedule.monthly}\r\n            \x3c/calcite-segmented-control-item\x3e\r\n            \x3ccalcite-segmented-control-item value\x3d"quarterly" aria-checked\x3d"false" role\x3d"radio" class\x3d"schedule-duration-quarterly"\x3e\r\n              ${i18n.createReport.schedule.quarterly}\r\n            \x3c/calcite-segmented-control-item\x3e\r\n            \x3ccalcite-segmented-control-item value\x3d"yearly" aria-checked\x3d"false" role\x3d"radio" class\x3d"schedule-duration-yearly"\x3e\r\n              ${i18n.createReport.schedule.yearly}\r\n            \x3c/calcite-segmented-control-item\x3e\r\n            \x3cinput type\x3d"hidden" /\x3e\r\n          \x3c/calcite-segmented-control\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"report-schedule__weekly leader-1 hide"\x3e\r\n          \x3cdiv class\x3d"js-schedule-radio-group"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"report-schedule__date leader-1 schedule-col-2"\x3e\r\n          \x3clabel class\x3d"report-schedule__monthly hide"\x3e\r\n            ${i18n.createReport.schedule.dayOfMonth.label}\r\n            \x3cselect class\x3d"js-schedule-monthly-select select-full"\x3e\r\n              \x3coption value\x3d"1"\x3e${i18n.createReport.schedule.dayOfMonth.first}\x3c/option\x3e\r\n              \x3coption value\x3d"L"\x3e${i18n.createReport.schedule.dayOfMonth.last}\x3c/option\x3e\r\n            \x3c/select\x3e\r\n          \x3c/label\x3e\r\n          \x3clabel\x3e\r\n            ${i18n.createReport.schedule.startDate}\r\n            \x3ccalcite-input-date-picker\r\n              scale\x3d"l"\r\n              lang\x3d"${locale}"\r\n              role\x3d"application"\r\n              layout\x3d"horizontal"\r\n              overlay-positioning\x3d"fixed"\r\n              class\x3d"report-schedule__date-picker"\r\n            \x3e\x3c/calcite-input-date-picker\x3e\r\n          \x3c/label\x3e\r\n          \x3cp class\x3d"leader-1 schedule-notice"\x3e${i18n.createReport.schedule.notice}\x3c/p\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"report-schedule__end leader-1 schedule-col-2"\x3e\r\n          \x3clabel\x3e\r\n            ${i18n.createReport.schedule.end}\r\n            \x3cselect class\x3d"select-full" data-dojo-attach-point\x3d"scheduleEnd" id\x3d"schedule-end-select"\x3e\r\n              \x3coption value\x3d"never"\x3e${i18n.createReport.schedule.endOption.never}\x3c/option\x3e\r\n              \x3coption value\x3d"ondate"\x3e${i18n.createReport.schedule.endOption.ondate}\x3c/option\x3e\r\n              \x3coption value\x3d"number"\x3e${i18n.createReport.schedule.endOption.number}\x3c/option\x3e\r\n            \x3c/select\x3e\r\n          \x3c/label\x3e\r\n          \x3clabel class\x3d"schedule-end-date hide"\x3e\r\n            ${i18n.createReport.schedule.endDate}\r\n            \x3ccalcite-input-date-picker\r\n              scale\x3d"l"\r\n              lang\x3d"${locale}"\r\n              role\x3d"application"\r\n              layout\x3d"horizontal"\r\n              overlay-positioning\x3d"fixed"\r\n              class\x3d"report-schedule_end-date"\r\n            \x3e\x3c/calcite-input-date-picker\x3e\r\n          \x3c/label\x3e\r\n          \x3ccalcite-input\r\n          scale\x3d"l"\r\n          status\x3d"idle"\r\n          type\x3d"number"\r\n          alignment\x3d"start"\r\n          number-button-type\x3d"none"\r\n          min\x3d"1"\r\n          max\x3d"100"\r\n          step\x3d"1"\r\n          prefix-text\x3d""\r\n          suffix-text\x3d""\r\n          value\x3d"1"\r\n          class\x3d"sc-calcite-input-h sc-calcite-input-s hide schedule-end-occurrence"\r\n        \x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"hide leader-1" id\x3d"view-count-container"\x3e\r\n          \x3clabel class\x3d"view-count half" for\x3d"view-count-select"\x3e\r\n            \x3cspan id\x3d"view-aggregate-label"\x3e\r\n              ${i18n.createReport.viewCountAggregation.dailyLabel}\r\n            \x3c/span\x3e\r\n              \x3cselect class\x3d"select-full view-count-select" id\x3d"view-aggregate-select"\x3e\r\n                \x3coption class\x3d"view-count-select-option day" value\x3d"day"\x3e${i18n.createReport.viewCountAggregation.daily}\x3c/option\x3e\r\n                \x3coption class\x3d"view-count-select-option week" value\x3d"week"\x3e${i18n.createReport.viewCountAggregation.weekly}\x3c/option\x3e\r\n                \x3coption class\x3d"view-count-select-option month" value\x3d"month"\x3e${i18n.createReport.viewCountAggregation.monthly}\x3c/option\x3e\r\n              \x3c/select\x3e\r\n          \x3c/label\x3e\r\n          \x3cdiv class\x3d"view-count-preview panel leader-half"\x3e\r\n            \x3clabel\x3e\r\n              ${i18n.createReport.viewCountAggregation.preview}\r\n              \x3cdiv class\x3d"overflow-auto column-preview leader-quarter"\x3e\r\n                \x3ctable class\x3d"table trailer-0"\x3e\r\n                  \x3ctbody\x3e\r\n                    \x3ctr id\x3d"view-count-preview-row"\x3e\r\n                      \x3ctd\x3e${i18n.createReport.viewCountAggregation.columns.itemID}\x3c/td\x3e\r\n                      \x3ctd\x3eOption 1\x3c/td\x3e\r\n                      \x3ctd\x3eOption 2\x3c/td\x3e\r\n                      \x3ctd\x3eOption 3\x3c/td\x3e\r\n                      \x3ctd\x3eOption 4\x3c/td\x3e\r\n                      \x3ctd\x3eOption 5\x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                  \x3c/tbody\x3e\r\n                \x3c/table\x3e\r\n              \x3c/div\x3e\r\n            \x3c/label\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3c!-- Bottom --\x3e\r\n  \x3cdiv class\x3d"create-report__progress-error hide js-progress-error"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"js-mobile-error"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/AssignLicenses/templates/AssignLicenses.html":'\x3cdiv class\x3d"assign-licenses grid-container"\x3e\r\n  \x3cdiv class\x3d"trailer-1 hide-on-mobile"\x3e\r\n    ${i18n.myOrganization.manageLicenses.selectAppAndData}\r\n    \x3cdiv class\x3d"js-selected-members"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"text-center leader-3 trailer-1 font-size-1 hide js-no-licenses"\x3e${i18n.myOrganization.licensesTab.noAddOnLicenses}\x3c/div\x3e\r\n  \x3cdiv class\x3d"trailer-1 assign-licenses__warning flex hide js-warning"\x3e\r\n    \x3cdiv class\x3d"assing-licenses__warning-icon margin-right-1"\x3e\r\n     ${infoIcon}\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"js-warning-text"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"js-panels-container"\x3e\r\n    \x3cdiv class\x3d"loader is-active padding-leader-3 padding-trailer-3 js-loader"\x3e\r\n      \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"loader-text"\x3e${i18n.myOrganization.manageLicenses.loadingLicenses}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"left js-notify hide hide-on-mobile"\x3e\r\n    \x3cdiv class\x3d"js-notify-toggle"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/ManageLicenseTypes/templates/ManageLicenseTypes.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"trailer-1 assign-licenses__warning flex flex-align-center hide js-warning"\x3e\r\n    \x3cdiv class\x3d"assing-licenses__warning-icon margin-right-1"\x3e\r\n      \x3ccalcite-icon icon\x3d"information" scale\x3d"l"\x3e\x3c/calcite-icon\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"js-warning-text"\x3e${i18n.myOrganization.manageLicenseTypes.coordinatorsWarning}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"hide js-content manage-usertype-role__content"\x3e\r\n    \x3cdiv class\x3d"trailer-2 manage-usertype-role__section"\x3e\r\n      \x3cdiv class\x3d"trailer-half position-relative flex manage-usertype-role__section-heading"\x3e\r\n        \x3cdiv id\x3d"${userTypeLabel}" class\x3d"avenir-bold flex-1 manage-license-types__type-title manage-usertype-role__section-title"\x3e${i18n.myOrganization.manageLicenseTypes.licenseType}\x3c/div\x3e\r\n        \x3cdiv class\x3d"js-selected-members"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"js-license-type-options"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"manage-usertype-role__section js-roles-section"\x3e\r\n      \x3cdiv class\x3d"avenir-bold trailer-half manage-usertype-role__section-heading manage-usertype-role__section-title"\x3e${i18n.myOrganization.manageLicenseTypes.role}\x3c/div\x3e\r\n      \x3cdiv class\x3d"js-notice-wrapper role-notice-wrapper trailer-1 hide"\x3e\r\n        \x3ccalcite-notice icon\x3d"information" open\x3d"${adminContactNotice.active}"\x3e\r\n          \x3cdiv slot\x3d"title"\x3e${adminContactNotice.title}\x3c/div\x3e\r\n          \x3cdiv slot\x3d"message"\x3e${adminContactNotice.message}\x3c/div\x3e\r\n        \x3c/calcite-notice\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv\x3e\r\n        \x3cdiv class\x3d"js-roles"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"js-role-error input-error-message"\x3e\r\n            ${i18n.myOrganization.inviteMembers.chooseValidRole}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"hide leader-1 assign-licenses__warning flex js-downgrade-warning-container"\x3e\r\n        \x3cdiv class\x3d"assing-licenses__warning-icon margin-right-1"\x3e\r\n          ${infoIcon}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"js-downgrade-warning"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"loader is-active padding-leader-3 padding-trailer-3 js-loader"\x3e\r\n    \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"loader-text"\x3e${i18n.myOrganization.manageLicenseTypes.loadingLicenseTypes}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/RolesSelect/RolesSelect.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"position-relative hide" data-dojo-attach-point\x3d"searchContainer"\x3e\r\n    \x3cdiv class\x3d"org-settings__roles-search-icon"\x3e${!icons.search.16}\x3c/div\x3e\r\n    \x3cinput class\x3d"org-settings__roles-search-input" placeholder\x3d"${i18n.myOrganization.manageLicenseTypes.searchRoles}" aria-label\x3d"${i18n.myOrganization.manageLicenseTypes.searchRoles}" type\x3d"text" data-dojo-attach-point\x3d"searchInput"\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"license-type__options-container"\x3e\r\n    \x3cdiv class\x3d"license-type__options" data-dojo-attach-point\x3d"optionsContainer"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"license-type__selected-option" data-dojo-attach-point\x3d"selectedOptionContainer"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"license-type__selected-line"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"license-type__selected-line"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/RolesSelect/RoleOption.html":'\x3cdiv class\x3d"license-type-option" tabindex\x3d"0"\x3e\r\n  \x3cdiv class\x3d"flex flex-align-center license-type-option__body full-width"\x3e\r\n    \x3cdiv class\x3d"flex-1"\x3e\r\n      \x3cdiv class\x3d"license-type-option__desc-container"\x3e\r\n        \x3cdiv class\x3d"flex hide" data-dojo-attach-point\x3d"rolesAssigned"\x3e\r\n          \x3cdiv\x3e${i18n.myOrganization.membersTab.rolesAssigned}\x3c/div\x3e\r\n          \x3cdiv class\x3d"assigned-user-type__count margin-left-1" data-dojo-attach-point\x3d"rolesAssignedCount"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cp class\x3d"trailer-0 avenir-bold" data-dojo-attach-point\x3d"nameEl"\x3e${role.name}\x3c/p\x3e\r\n        \x3cp class\x3d"trailer-0 font-size--1"\x3e${role.description}\x3c/p\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"flex flex-align-center license-type-option__member-icons" data-dojo-attach-point\x3d"memberIcons"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"if-license-type-option-error margin-right-3"\x3e\r\n      \x3cspan class\x3d"license-type-option__error-text margin-right-half"\x3e\r\n        ${i18n.myOrganization.inviteMembers.chooseValidRole}\r\n      \x3c/span\x3e\r\n      \x3cimg class\x3d"license-type-option__error-icon" src\x3d"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjE2cHgiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeD0iMiIgeT0iMCI+PHBhdGggZmlsbD0iI2M4NmE0YSIgZD0iTTExLjIyNSwwSDQuNjQ4TDAsNC42NXY2LjU3Nmw0LjY0OCw0LjY0OWg2LjU3Nmw0LjY1LTQuNjQ5VjQuNjVMMTEuMjI1LDB6IE05LjA3MSwxMy42MDdINi44MDR2LTIuMjY5aDIuMjY4VjEzLjYwN3ogTTkuMDcxLDkuMDcxSDYuODA0VjMuNDAyaDIuMjY4VjkuMDcxeiIvPjwvc3ZnPg\x3d\x3d"\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/TransferItemsOverlay.html":'\x3cdiv\r\n  class\x3d"transfer-content-overlay__content padding-leader-1 padding-trailer-1 padding-left-1 padding-right-1 position-relative"\r\n\x3e\r\n  \x3cdiv class\x3d"js-change-owner-loader loader loader-centered is-active"\x3e\r\n    \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"loader-text"\x3e${texts.loading}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"js-no-content-warning hide transfer-content-overlay__no-content-warning flex-center trailer-1"\x3e\r\n    \x3cdiv class\x3d"margin-left-1 margin-right-1"\x3e${icons.info.24}\x3c/div\x3e\r\n    \x3cdiv class\x3d"font-size--2 leader-quarter trailer-quarter"\x3e${texts.usersNoContent}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3ccalcite-notice open icon\x3d"information" class\x3d"js-recycle-notice trailer-1 hide"\x3e\r\n    \x3cdiv slot\x3d"message" class\x3d"js-recycle-notice-message"\x3e\x3c/div\x3e\r\n    \x3ccalcite-link slot\x3d"link" target\x3d"_blank" class\x3d"js-recycle-notice-link" title\x3d"${texts.viewRecycleBin}"\x3e${texts.viewRecycleBin}\x3c/calcite-link\x3e\r\n  \x3c/calcite-notice\x3e\r\n  \x3cdiv class\x3d"js-change-owner-wrapper change-owner-wrapper"\x3e\r\n    \x3cdiv class\x3d"js-owner-area hide"\x3e\r\n      \x3ch4 class\x3d"font-size--1 trailer-quarter"\x3e${texts.newOwner}\x3c/h4\x3e\r\n      \x3cdiv class\x3d"panel panel-white flex change-owner-card js-owner-edit input-error--no-icon"\x3e\r\n        \x3cdiv class\x3d"flex-1 break-word"\x3e\r\n          \x3cdiv class\x3d"js-member-thumb"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cbutton\r\n          class\x3d"btn-link btn-link-off-black change-owner-card-edit js-owner-edit-button"\r\n          aria-label\x3d"${texts.changeOwner}"\r\n        \x3e\r\n          ${icons.edit.16}\r\n        \x3c/button\x3e\r\n      \x3c/div\x3e\r\n      \x3cp class\x3d"input-error-message js-member-select-error position-absolute"\x3e\x3c/p\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"position-relative transfer-content-overlay__member-picker-wrapper js-member-picker-wrapper"\x3e\r\n      \x3cdiv class\x3d"js-member-picker"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"js-folder-area leader-1"\x3e\r\n      \x3cdiv class\x3d"js-folder-options-area trailer-1"\x3e\r\n        \x3ch4 class\x3d"font-size--1 trailer-quarter"\x3e${texts.folderOptions}\x3c/h4\x3e\r\n        \x3cdiv class\x3d"js-folder-options"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"js-multi-folder-area trailer-1"\x3e\r\n        \x3ch4 class\x3d"font-size--1 trailer-quarter"\x3e${texts.folderPrefix}\x3c/h4\x3e\r\n        \x3cdiv\r\n          class\x3d"panel panel-white transfer-content-overlay__prefix-panel flex flex-align-center change-owner-card js-folder-prefix-input-panel"\r\n        \x3e\r\n          \x3cdiv class\x3d"flex-0 js-content-icon"\x3e${icons.folder.16}\x3c/div\x3e\r\n          \x3cdiv class\x3d"flex-1 margin-left-half transfer-content-overlay__prefix-input-wrapper"\x3e\r\n            \x3cinput type\x3d"text" class\x3d"js-prefix-input transfer-content-overlay__prefix-input" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"input-error-message js-prefix-error"\x3e${texts.prefixRequired}\x3c/div\x3e\r\n        \x3cdiv class\x3d"font-size--2 leader-quarter js-prefix-example"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"js-one-folder-area hide trailer-1"\x3e\r\n        \x3ch4 class\x3d"font-size--1 trailer-quarter"\x3e${texts.folder}\x3c/h4\x3e\r\n        \x3cdiv class\x3d"panel panel-white flex flex-align-center change-owner-card js-folder-edit" tabindex\x3d"0"\x3e\r\n          \x3cdiv class\x3d"flex-0 js-folder-icon"\x3e${icons.inline.folder.16}\x3c/div\x3e\r\n          \x3cdiv class\x3d"flex-1 flex flex-column margin-left-half break-word"\x3e\r\n            \x3ch4 class\x3d"font-size-0 trailer-0 js-folder-name"\x3e\x3c/h4\x3e\r\n          \x3c/div\x3e\r\n          \x3cbutton\r\n            class\x3d"btn-link btn-link-off-black change-owner-card-edit js-folder-edit-button"\r\n            aria-label\x3d"${texts.changeFolder}"\r\n          \x3e\r\n            ${icons.edit.16}\r\n          \x3c/button\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"position-relative js-folder-picker-area transfer-content__folder-picker-wrapper hide"\x3e\r\n      \x3cdiv class\x3d"js-folder-picker"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"js-items-area leader-1"\x3e\r\n      \x3ch4 class\x3d"font-size--1 trailer-quarter"\x3e${texts.contentToTransfer}\x3c/h4\x3e\r\n      \x3ca\r\n        class\x3d"btn-link-off-black change-owner-card-edit js-launch-search-btn"\r\n        title\x3d"${texts.viewAllItems}"\r\n        target\x3d"_blank"\r\n      \x3e\r\n        \x3cdiv class\x3d"panel panel-white change-owner-card flex flex-align-center js-folder-edit"\x3e\r\n          \x3cdiv class\x3d"flex-0 js-content-icon"\x3e${icons.collection.16}\x3c/div\x3e\r\n          \x3cdiv class\x3d"flex-1 flex flex-column margin-left-half break-word"\x3e\r\n            \x3ch4 class\x3d"font-size-0 trailer-0 js-items-count"\x3e\x3c/h4\x3e\r\n          \x3c/div\x3e\r\n          ${icons.launch.16}\r\n        \x3c/div\x3e\r\n      \x3c/a\x3e\r\n      \x3cdiv class\x3d"font-size--2 leader-quarter trailer-1"\x3e${texts.allItems}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/ChangeOwner/templates/FolderPicker.html":'\x3cdiv class\x3d"${containerClass}"\x3e\r\n  \x3cdiv class\x3d"font-size--1 trailer-half flex js-member-picker-header"\x3e\r\n    \x3ch4 class\x3d"trailer-0 font-size--1 flex-1" id\x3d"folder-picker-label"\x3e${i18n.changeOwner.selectFolder}\x3c/h4\x3e\r\n    \x3cbutton class\x3d"btn-link font-size--1 flex-0 btn-link-off-black right js-folder-picker-cancel"\x3e\r\n      ${i18n.common.cancel}\r\n    \x3c/button\x3e\r\n  \x3c/div\x3e\r\n  \x3cinput\r\n    class\x3d"member-picker-search js-search-input"\r\n    placeholder\x3d"${i18n.changeOwner.searchFolders}"\r\n    aria-label\x3d"${i18n.changeOwner.searchFolders}"\r\n    aria-controls\x3d"folder-results-list"\r\n    type\x3d"search"\r\n    autocomplete\x3d"off"\r\n  /\x3e\r\n\r\n  \x3cul\r\n    class\x3d"js-member-picker-results folder-picker-results member-picker-results--border"\r\n    id\x3d"folder-results-list"\r\n    role\x3d"menu"\r\n    aria-labelledby\x3d"folder-picker-label"\r\n    data-dojo-attach-point\x3d"_resultsDropdown"\r\n  \x3e\r\n    \x3cli class\x3d"folder-list-item js-no-folder hide" data-title\x3d"no-folder" role\x3d"none"\x3e\r\n      \x3cspan\r\n        class\x3d"folder-list-link folder-list-link--expanded"\r\n        data-id\x3d"no-folder"\r\n        data-title\x3d"no-folder"\r\n        role\x3d"menuitem"\r\n        aria-selected\x3d"false"\r\n        data-dojo-attach-point\x3d"_folderLink"\r\n      \x3e\r\n        ${i18n.folderDlg.noFolders}\r\n        \x3cbutton class\x3d"js-create-folder-inline create-folder-inline-link btn-link font-size--2"\x3e\r\n          ${i18n.folderDlg.noFolderLabel}\r\n        \x3c/button\x3e\r\n      \x3c/span\x3e\r\n    \x3c/li\x3e\r\n  \x3c/ul\x3e\r\n  \x3cbutton\r\n    class\x3d"js-create-new-folder btn-link btn-link-dark-blue padding-leader-quarter padding-trailer-quarter leader-half padding-left-half padding-right-half font-size--2"\r\n  \x3e\r\n    ${!icons.inline.folder-plus.16} ${i18n.changeOwner.createNewFolder}\r\n  \x3c/button\x3e\r\n  \x3cform class\x3d"hide js-create-folder-form position-relative leader-half"\x3e\r\n    \x3cinput\r\n      class\x3d"folder-list-link folder-list-link--large leader-0 trailer-0 js-create-folder-input"\r\n      type\x3d"text"\r\n      maxlength\x3d"125"\r\n      value\x3d""\r\n      placeholder\x3d"${i18n.changeOwner.enterFolderName}"\r\n      aria-label\x3d"${i18n.changeOwner.enterFolderName}"\r\n    /\x3e\r\n    \x3cspan class\x3d"change-owner-new-folder-icon"\x3e${!icons.inline.folder-plus.16}\x3c/span\x3e\r\n    \x3cbutton\r\n      aria-label\x3d"${i18n.common.save}"\r\n      class\x3d"tooltip tooltip-left btn-link folder-list-action folder-list-action--show folder-list-action--green folder-list-action--left js-folder-create-save"\r\n      type\x3d"submit"\r\n    \x3e\r\n      ${!icons.check.24}\r\n    \x3c/button\x3e\r\n    \x3cbutton\r\n      aria-label\x3d"${i18n.common.cancel}"\r\n      class\x3d"tooltip tooltip-left btn-link folder-list-action folder-list-action--show js-folder-create-cancel"\r\n    \x3e\r\n      ${!icons.x.24}\r\n    \x3c/button\x3e\r\n  \x3c/form\x3e\r\n  \x3cdiv class\x3d"js-create-folder-error-message input-error-message"\x3e\r\n    ${i18n.folderDlg.passwordMin}\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/ChangeOwner/templates/FolderPickerRow.html":'\x3cli class\x3d"folder-list-item" data-title\x3d"${folder.title}" role\x3d"none"\x3e\r\n  \x3cspan \r\n    class\x3d"folder-list-link folder-list-link--expanded" \r\n    data-id\x3d"${folder.id}"\r\n    data-title\x3d"${folder.title}"\r\n    role\x3d"menuitem"\r\n    aria-selected\x3d"false"\r\n    data-dojo-attach-point\x3d"_folderLink"\x3e\r\n    ${!folderIcon}${folder.title}\r\n  \x3c/span\x3e\r\n\x3c/li\x3e',"url:arcgisonline/pages/organization/widgets/PendingMembers/templates/PendingMembers.html":'\x3cdiv class\x3d"grid-container pending-members-overlay__content"\x3e\r\n  \x3cdiv class\x3d"flex trailer-quarter"\x3e\r\n    \x3cdiv class\x3d"flex-1 flex flex-align-center js-member-count"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"js-sort-dropdown"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"js-list"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"js-pagination"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/PendingMembers/templates/PendingRow.html":'\x3cdiv class\x3d"flex pending-members-overlay__row"\x3e\r\n  \x3cdiv class\x3d"flex-1 padding-right-half"\x3e\r\n    \x3cdiv class\x3d"avenir-demi" data-dojo-attach-point\x3d"_email"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"font-size--2" data-dojo-attach-point\x3d"_invitedLabel"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cbutton class\x3d"btn-link margin-right-1" data-dojo-attach-point\x3d"_resendBtn"\x3e\r\n    ${!icons.inline.reset.16}\r\n    \x3cspan class\x3d"hide-on-mobile"\x3e${i18n.resendInvite}\x3c/span\x3e\r\n  \x3c/button\x3e\r\n  \x3cdiv class\x3d"flex flex-align-center margin-right-1 hide" data-dojo-attach-point\x3d"_resentLabel"\x3e\r\n    \x3cdiv class\x3d"invite-members__field-check-mark margin-right-half"\x3e${!icons.check.16}\x3c/div\x3e\r\n    \x3cspan class\x3d"hide-on-mobile"\x3e${i18n.inviteResent}\x3c/span\x3e\r\n  \x3c/div\x3e\r\n  \x3cbutton class\x3d"btn-link" data-dojo-attach-point\x3d"_deleteBtn"\x3e\r\n    ${!icons.inline.trash.16}\r\n    \x3cspan class\x3d"hide-on-mobile"\x3e${i18n.deleteInvite}\x3c/span\x3e\r\n  \x3c/button\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/SortDropdown/SortDropdown.html":'\x3cdiv class\x3d"control-bar__action control-bar__sort-dropdown js-dropdown"\x3e\r\n    \x3cbutton class\x3d"control-bar__btn js-toggle-sort-dropdown js-dropdown-toggle js-toggle-btn" aria-label\x3d"${i18n.gallery.changeSortDirection}" aria-haspopup\x3d"true" aria-controls\x3d"sortmenu"\x3e\r\n        ${icons.inline.sort-descending.16}\x3cspan class\x3d"control-bar__btn-text js-sort-label"\x3e${activeOption.label}\x3c/span\x3e\r\n    \x3c/button\x3e\r\n    \x3cdiv class\x3d"control-bar__overlay"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"control-bar__dropdown-menu dropdown-menu js-control-bar-sort-dropdown" role\x3d"menu" id\x3d"sortmenu" aria-labelledby\x3d"sortmenutitle"\x3e\r\n        \x3ch3 class\x3d"control-bar__dropdown-menu__title" id\x3d"sortmenutitle"\x3e\r\n            ${i18n.gallery.sortBy}\r\n            \x3cbutton class\x3d"js-dropdown-toggle control-bar__dropdown-menu__close control-bar__btn right" aria-label\x3d"${i18n.common.close}"\x3e\r\n                ${icons.x.32}\r\n            \x3c/button\x3e\r\n        \x3c/h3\x3e\r\n        \x3cnav class\x3d"js-sort-options"\x3e\r\n            ${options}\r\n        \x3c/nav\x3e\r\n        \x3cdiv class\x3d"js-sort-direction-section leader-half"\x3e\r\n            \x3ch3 class\x3d"control-bar__dropdown-menu__title"\x3e${i18n.gallery.sortDirection}\x3c/h3\x3e\r\n            \x3cnav class\x3d"js-sort-direction-options"\x3e\r\n                \x3cbutton class\x3d"js-sort-direction dropdown-link control-bar__dropdown-item padding-right-1 ${ascendingActive}" data-value\x3d"asc" role\x3d"menuitem"\x3e\r\n                    \x3cspan class\x3d"control-bar__dropdown-item__label js-ascending-label"\x3e${ascendingLabel}\x3c/span\x3e\r\n                \x3c/button\x3e\r\n                \x3cbutton class\x3d"js-sort-direction dropdown-link control-bar__dropdown-item padding-right-1 ${descendingActive}" data-value\x3d"desc" role\x3d"menuitem"\x3e\r\n                    \x3cspan class\x3d"control-bar__dropdown-item__label js-descending-label"\x3e${descendingLabel}\x3c/span\x3e\r\n                \x3c/button\x3e\r\n            \x3c/nav\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/SortDropdown/SortDropdownOption.html":'\x3cbutton class\x3d"js-sort-option control-bar__dropdown-item dropdown-link padding-right-1 ${isActive}" data-property\x3d"${property}" data-order\x3d"${sortOrder}" role\x3d"menuitem"\x3e\r\n    \x3cspan class\x3d"control-bar__dropdown-item__label"\x3e${label}\x3c/span\x3e\r\n\x3c/button\x3e\r\n',"url:arcgisonline/pages/organization/widgets/SetCreditsOverlay/SetCreditsOverlay.html":'\x3cdiv class\x3d"set-credits-overlay__content"\x3e\r\n  \x3cdiv class\x3d"flex"\x3e\r\n    \x3cdiv class\x3d"margin-right-4"\x3e\r\n      \x3cdiv class\x3d"flex trailer-1"\x3e\r\n        \x3cinput type\x3d"radio" name\x3d"creditAlloc" class\x3d"flex-0 js-no-limit-radio" /\x3e\r\n        \x3cdiv class\x3d"flex-1"\x3e\r\n          \x3cdiv class\x3d"avenir-bold trailer-half"\x3e${i18n.allocateCreditsUnlimited}\x3c/div\x3e\r\n          \x3cp\x3e${i18n.cannotExceed}\x3c/p\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"flex"\x3e\r\n        \x3cinput type\x3d"radio" name\x3d"creditAlloc" class\x3d"flex-0 js-credits-radio" /\x3e\r\n        \x3cdiv class\x3d"flex-1"\x3e\r\n          \x3cdiv class\x3d"avenir-bold trailer-half"\x3e${i18n.setAllocation}\x3c/div\x3e\r\n          \x3cinput type\x3d"text" class\x3d"js-credits-input" /\x3e\r\n          \x3cdiv class\x3d"js-credits-error input-error-message"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv\x3e\r\n      \x3cdiv class\x3d"set-credits-overlay__credits-info-box trailer-half"\x3e\r\n        \x3cdiv class\x3d"trailer-half"\x3e${i18n.orgCredits}\x3c/div\x3e\r\n        \x3cdiv class\x3d"js-org-credits avenir-bold font-size-5"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"set-credits-overlay__credits-info-box"\x3e\r\n        \x3cdiv class\x3d"trailer-half"\x3e${i18n.membersInOrg}\x3c/div\x3e\r\n        \x3cdiv class\x3d"js-org-member-count avenir-bold font-size-5"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"flex flex-align-center credits-overlay-notice leader-1"\x3e\r\n    \x3ccalcite-icon icon\x3d"information"\x3e\x3c/calcite-icon\x3e\r\n    \x3cdiv class\x3d"margin-left-1 font-size--1"\x3e${i18n.noticeText} \x3ca href\x3d"${learnUrl}" target\x3d"_blank"\x3e${i18n.learnAboutCredits}\x3c/a\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/ChangeOwner/templates/ChangeOwner.html":'\x3cdiv class\x3d"change-owner-container padding-leader-1 padding-trailer-1 padding-left-1 padding-right-1 position-relative"\x3e\r\n  \x3cdiv class\x3d"js-change-owner-loader loader loader-centered is-active"\x3e\r\n    \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"loader-text"\x3e${i18n.common.loading}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"js-change-owner-wrapper change-owner-wrapper"\x3e\r\n    \x3cdiv class\x3d"js-owner-area visibility-hidden"\x3e\r\n      \x3ch4 class\x3d"font-size--1 js-item-owner-label"\x3e${i18n.changeOwner.itemOwner}\x3c/h4\x3e\r\n      \x3cdiv class\x3d"panel panel-white flex change-owner-card js-owner-edit input-error--no-icon"\x3e\r\n        \x3cdiv class\x3d"flex-1 break-word"\x3e\r\n          \x3cdiv class\x3d"js-member-thumb"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cbutton\r\n          class\x3d"btn-link btn-link-off-black change-owner-card-edit js-owner-edit-button"\r\n          aria-label\x3d"${i18n.changeOwner.title}"\r\n        \x3e\r\n          ${icons.edit.16}\r\n        \x3c/button\x3e\r\n      \x3c/div\x3e\r\n      \x3cp class\x3d"input-error-message js-member-select-error position-absolute"\x3e\x3c/p\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"js-member-picker"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"js-folder-area visibility-hidden leader-1"\x3e\r\n      \x3ch4 class\x3d"font-size--1"\x3e${i18n.changeOwner.folder}\x3c/h4\x3e\r\n      \x3cdiv class\x3d"panel panel-white flex trailer-2 change-owner-card js-folder-edit"\x3e\r\n        \x3cdiv class\x3d"flex-0 js-folder-icon"\x3e${icons.inline.folder.16}\x3c/div\x3e\r\n        \x3cdiv class\x3d"flex-1 flex flex-column margin-left-half break-word"\x3e\r\n          \x3ch4 class\x3d"font-size-0 trailer-0 js-folder-name"\x3e${i18n.folderDlg.noFolderLabel}\x3c/h4\x3e\r\n        \x3c/div\x3e\r\n        \x3cbutton class\x3d"btn-link btn-link-off-black change-owner-card-edit js-folder-edit-button" aria-label\x3d"${i18n.changeOwner.title}"\x3e\r\n          ${icons.edit.16}\r\n        \x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"js-folder-picker hide"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/OrgPopup/OrgPopup.html":'\x3cdiv\x3e\r\n  \x3cspan tabindex\x3d"0" data-dojo-attach-point\x3d"closeIcon" class\x3d"hide popover-close icon-ui-close" tab-index\x3d"0" aria-label\x3d"${i18n.common.close}"\x3e\x3c/span\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"loader" class\x3d"profile-popup__loader loader"\x3e\r\n    \x3cdiv class\x3d"profile-popup__loader-bars loader-bars"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"text-left" data-dojo-attach-point\x3d"content"\x3e\r\n    \x3cdiv class\x3d"profile-popup__top-section flex flex-align-center"\x3e\r\n      \x3cimg src\x3d"${item.verified.thumbnail}" class\x3d"profile-popup__org-thumbnail margin-right-1"\x3e\r\n      \x3cdiv class\x3d"flex-1 font-size-1 avenir-demi"\x3e\r\n        ${item.verified.name}\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"profile-popup__org-bottom" data-dojo-attach-point\x3d"bottomSection"\x3e\r\n      \x3cdiv class\x3d"profile-popup__bio-container" data-dojo-attach-point\x3d"descContainer"\x3e\r\n        \x3cp class\x3d"profile-popup__bio-section trailer-half" data-dojo-attach-point\x3d"descEl"\x3e\x3c/p\x3e\r\n        \x3cbutton class\x3d"hide btn-link btn-link-darker-gray profile-popup__more-toggle" data-dojo-attach-point\x3d"descToggle"\x3e${!icons.chevron-down.24}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"leader-1"\x3e\r\n        \x3ca href\x3d"${item.verified.url}"  target\x3d"_blank"\x3e${i18n.myOrganization.homeTab.tabTitle} ${!icons.inline-end.launch.16}\x3c/a\x3e\r\n        \x3ca href\x3d"${item.verified.url}gallery.html"  target\x3d"_blank" class\x3d"margin-left-1"\x3e${i18n.myOrganization.galleryTab.tabTitle} ${!icons.inline-end.launch.16}\x3c/a\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/UploadProgressBar/UploadProgressBar.html":'\x3cdiv class\x3d"upload-progress-bar flex-1 flex-column-justify-center margin-right-1 margin-left-half position-relative"\x3e\r\n  \x3cdiv class\x3d"progress-bar"\x3e\r\n    \x3cdiv class\x3d"progress-bar-fill" data-dojo-attach-point\x3d"_uploadProgressFill"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"font-size--3 upload-percent-label" data-dojo-attach-point\x3d"_uploadPercentLabel"\x3e0%\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/AppendData/templates/_table-row.html":'\x3cdiv class\x3d"table-select-row" role\x3d"row"\x3e\r\n    \x3c!-- Field Name --\x3e\r\n  \x3cspan class\x3d"table-select-cell" role\x3d"cell"\x3e\r\n    \x3cspan class\x3d"flex"\x3e\r\n      \x3cspan class\x3d"table-select-field text-ellipsis"\x3e\r\n        \x3cspan class\x3d"margin-left-quarter text-ellipsis full-width display-block"\x3e${displayName}\x3c/span\x3e\r\n      \x3c/span\x3e\r\n    \x3c/span\x3e\r\n  \x3c/span\x3e\r\n\r\n    \x3c!-- Match Field --\x3e\r\n  \x3cspan class\x3d"table-select-cell" role\x3d"cell"\x3e\r\n    \x3cspan class\x3d"flex"\x3e\r\n      \x3cspan class\x3d"table-select-matchField text-ellipsis" data-dojo-attach-point\x3d"matchFieldsContainer"\x3e\r\n        \x3cspan class\x3d"margin-left-quarter text-ellipsis full-width" data-dojo-attach-point\x3d"matchFieldValue" data-value\x3d"__none"\x3e${!i18n.oldAppendDataDlg.none}\x3c/span\x3e\r\n        \x3cselect data-dojo-attach-point\x3d"matchFields" class\x3d"leader-0 hide"\x3e\x3c/select\x3e\r\n      \x3c/span\x3e\r\n    \x3c/span\x3e\r\n  \x3c/span\x3e\r\n\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/View/templates/loader.html":'\x3cdiv class\x3d"loader padding-leader-5 padding-trailer-5 is-active"\x3e\r\n  \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"loader-text"\x3e${location}\x3c/div\x3e\r\n\x3c/div\x3e',"url:arcgisonline/sharing/dijit/AppendData/templates/_appendData.html":'\x3cdiv\x3e\r\n    \x3csection class\x3d"padding-leader-half content-node append-data"\x3e\r\n\r\n            \x3c!--Step 1--\x3e\r\n            \x3cdiv class\x3d"step-1 hide" data-dojo-attach-point\x3d"step1"\x3e\r\n                \x3cp class\x3d"trailer-half"\x3e${i18n.oldAppendDataDlg.messageStep1}\x3c/p\x3e\r\n                \x3clabel class\x3d"trailer-half"\x3e${i18n.oldAppendDataDlg.messageStep1Title}\x3c/label\x3e\r\n                \x3cul class\x3d"trailer-half"\x3e\r\n                    \x3cli\x3e${i18n.oldAppendDataDlg.messageStep1Bullet1}\x3c/li\x3e\r\n                    \x3cli\x3e${i18n.oldAppendDataDlg.messageStep1Bullet2}\x3c/li\x3e\r\n                    \x3cli data-dojo-attach-point\x3d"step1Bullet3"\x3e${i18n.oldAppendDataDlg.messageStep1Bullet3}\x3c/li\x3e\r\n                    \x3cli data-dojo-attach-point\x3d"step1Bullet4"\x3e${i18n.oldAppendDataDlg.messageStep1Bullet4}\x3c/li\x3e\r\n                \x3c/ul\x3e\r\n                \x3cform data-dojo-attach-point\x3d"fileForm" enctype\x3d"multipart/form-data" class\x3d"text-left"\x3e\r\n                    \x3clabel\x3e\r\n                        ${i18n.oldAppendDataDlg.fileName}\r\n                        \x3cinput name\x3d"file" type\x3d"file" accept\x3d".zip, .csv, .xls, .xlsx, .geojson" data-dojo-attach-point\x3d"fileInput"/\x3e\r\n                    \x3c/label\x3e\r\n                    \x3clabel class\x3d"hide" data-dojo-attach-point\x3d"zipSelect"\x3e\r\n                        ${i18n.oldAppendDataDlg.contents}\r\n                        \x3cselect name\x3d"type" data-dojo-attach-point\x3d"supportedTypes" class\x3d"text-left"\x3e\x3c/select\x3e\r\n                    \x3c/label\x3e\r\n                \x3c/form\x3e\r\n                \x3cp class\x3d"trailer-quarter"\x3e${i18n.oldAppendDataDlg.note}\x3c/p\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3c!--Step 2--\x3e\r\n            \x3cdiv class\x3d"step-2 padding-right-half hide" data-dojo-attach-point\x3d"step2"\x3e\r\n                \x3cp class\x3d"trailer-half"\x3e${!i18n.oldAppendDataDlg.messageStep2}\x3c/p\x3e\r\n                \x3clabel class\x3d"trailer-half" data-dojo-attach-point\x3d"serviceLayersContainer"\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"appendDataLabel"\x3e${i18n.oldAppendDataDlg.chooseServiceLayer}\x3c/span\x3e\r\n                    \x3cselect data-dojo-attach-point\x3d"serviceLayersSelect" class\x3d"leader-0 select-full"\x3e\x3c/select\x3e\r\n                \x3c/label\x3e\r\n\r\n                \x3clabel class\x3d"trailer-half" data-dojo-attach-point\x3d"dataLayersContainer"\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"appendDataLabel"\x3e${i18n.oldAppendDataDlg.chooseLayer}\x3c/span\x3e\r\n                    \x3cselect data-dojo-attach-point\x3d"dataLayersSelect" class\x3d"leader-0 select-full"\x3e\x3c/select\x3e\r\n                \x3c/label\x3e\r\n\r\n                \x3c!-- Update Existing Features--\x3e\r\n                \x3cdiv class\x3d"trailer-half updateFeatures"\x3e${i18n.oldAppendDataDlg.updateExistingFeaturesLbl}\x3c/div\x3e\r\n                \x3cp class\x3d"trailer-half updateFeatures"\x3e${i18n.oldAppendDataDlg.updateExistingFeaturesMsg}\x3c/p\x3e\r\n                \x3clabel class\x3d"inline-block margin-right-half trailer-half align-middle updateFeatures js-updateFeatures js-attributesOnly"\x3e\r\n                    \x3cinput name\x3d"updateExistingFeatures" type\x3d"checkbox" data-dojo-attach-point\x3d"updateExistingFeatures"/\x3e\r\n                    ${i18n.oldAppendDataDlg.updateExistingFeatures}\r\n                \x3c/label\x3e\r\n                \x3cdiv class\x3d"margin-left-1 updateFeatures js-updateFeatures-container js-updateFeatures"\x3e\r\n                    \x3c!-- UID field matching --\x3e\r\n                    \x3cp class\x3d"trailer-half"\x3e${i18n.oldAppendDataDlg.selectFields}\x3c/p\x3e\r\n                    \x3cdiv class\x3d"trailer-half"\x3e\r\n                        \x3cselect data-dojo-attach-point\x3d"fromField" class\x3d"margin-right-half inline-block"\x3e\x3c/select\x3e\r\n                        \x3cspan class\x3d"margin-right-half"\x3e${i18n.oldAppendDataDlg.matchesTo}\x3c/span\x3e\r\n                        \x3cselect data-dojo-attach-point\x3d"toField" class\x3d"inline-block"\x3e\x3c/select\x3e\r\n                    \x3c/div\x3e\r\n                    \x3clabel class\x3d"inline-block margin-right-half trailer-half js-attributesOnly"\x3e\r\n                        ${i18n.oldAppendDataDlg.skipInserts}\r\n                        \x3cinput name\x3d"skipInserts" type\x3d"checkbox" data-dojo-attach-point\x3d"skipInserts"/\x3e\r\n                    \x3c/label\x3e\r\n                    \x3clabel class\x3d"inline-block margin-right-half trailer-half js-updateGeometry js-attributesOnly"\x3e\r\n                        ${i18n.oldAppendDataDlg.updateGeometryOnly}\r\n                        \x3cinput name\x3d"updateGeometry" type\x3d"checkbox" data-dojo-attach-point\x3d"updateGeometry"/\x3e\r\n                    \x3c/label\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3c!-- Table View --\x3e\r\n                \x3cbutton class\x3d"btn-link trailer-half btn-fill" data-value\x3d"false" data-dojo-attach-point\x3d"showFieldMatchingLink"\x3e${i18n.oldAppendDataDlg.showFieldMatching}\x3c/button\x3e\r\n                \x3cdiv class\x3d"js-table-wrap table-select trailer-half js-view hide" role\x3d"table" data-dojo-attach-point\x3d"fieldMatching"\x3e\r\n                    \x3cdiv class\x3d"table-select-head js-table-header" role\x3d"rowgroup"\x3e\r\n                        \x3cdiv class\x3d"table-select-row table-select-row-header" role\x3d"row"\x3e\r\n                            \x3cspan class\x3d"table-select-cell table-select-cell-th" role\x3d"columnheader"\x3e\x3cbutton class\x3d"table-select-cell-sort js-table-sort-header is-ascending" aria-sort\x3d"ascending" data-sort\x3d"title" data-sort-order\x3d"asc"\x3e${i18n.oldAppendDataDlg.fields}\x3c/button\x3e\x3c/span\x3e\r\n                            \x3cspan class\x3d"table-select-cell table-select-cell-th" role\x3d"columnheader"\x3e\x3cbutton class\x3d"table-select-cell-sort js-table-sort-header" data-sort\x3d"matchField" data-sort-order\x3d"asc"\x3e${i18n.oldAppendDataDlg.matchField}\x3c/button\x3e\x3c/span\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"table-select-rows js-table-rows js-view" role\x3d"rowgroup"\x3e\x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3c!-- Loader --\x3e\r\n            \x3cdiv class\x3d"hide analyze-loader-wrap js-analyze-loader-wrap"\x3e\x3c/div\x3e\r\n\r\n    \x3c/section\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/AttachCodeDlg.html":'\x3cdiv class\x3d"widgetContainer" data-dojo-attach-point\x3d"containerNode"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"dialog" title\x3d"${titleLabel}" execute\x3d""\x3e\r\n    \x3ctable class\x3d"table-layout"\x3e\r\n      \x3ctbody\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd\x3e\r\n            \x3cdiv id\x3d"code_upload_message" data-dojo-attach-point\x3d"codeUploadMessage" class\x3d"trailer-1"\x3e\r\n              ${messageLabel}\r\n            \x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd\x3e\r\n            \x3cform\r\n              data-dojo-attach-point\x3d"form"\r\n              action\x3d""\r\n              enctype\x3d"multipart/form-data"\r\n              method\x3d"post"\r\n              onSubmit\x3d"return false;"\r\n              class\x3d"trailer-1"\r\n            \x3e\r\n              \x3cinput type\x3d"file" name\x3d"file" dojoAttachPoint\x3d"fileInput" size\x3d"50" /\x3e\r\n              \x3cinput type\x3d"hidden" name\x3d"title" value\x3d"" /\x3e\r\n              \x3cinput type\x3d"hidden" name\x3d"type" value\x3d"" /\x3e\r\n              \x3cinput type\x3d"hidden" name\x3d"typekeywords" value\x3d"" /\x3e\r\n              \x3cinput type\x3d"hidden" name\x3d"overwrite" value\x3d"false" /\x3e\r\n              \x3cinput type\x3d"hidden" name\x3d"relationshipType" value\x3d"" /\x3e\r\n              \x3cinput type\x3d"hidden" name\x3d"originItemId" value\x3d"" /\x3e\r\n              \x3cinput type\x3d"hidden" name\x3d"async" value\x3d"true" /\x3e\r\n            \x3c/form\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd\x3e\r\n            \x3cbutton\r\n              data-dojo-attach-point\x3d"cancelButton"\r\n              class\x3d"esriFloatTrailing btn btn-clear btn-small right margin-left-half margine-right-half"\r\n              type\x3d"button"\r\n            \x3e\r\n              ${i18n.cancel}\r\n            \x3c/button\x3e\r\n            \x3cbutton\r\n              data-dojo-attach-point\x3d"uploadButton"\r\n              class\x3d"esriFloatTrailing btn btn-blue btn-small right margin-left-half margin-right-half"\r\n              type\x3d"button"\r\n            \x3e\r\n              ${i18n.uploadLabel}\r\n            \x3c/button\x3e\r\n            \x3cspan\r\n              id\x3d"code_upload-waiting"\r\n              data-dojo-attach-point\x3d"codeUploadWaiting"\r\n              class\x3d"esriFloatTrailing leader-1 hide"\r\n            \x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"esriFloatLeading error" dojoAttachPoint\x3d"errorLabelNode" style\x3d"padding-top: 8px"\x3e\x3c/span\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n      \x3c/tbody\x3e\r\n    \x3c/table\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dojox/widget/Wizard/Wizard.html":'\x3cdiv class\x3d"dojoxWizard" dojoAttachPoint\x3d"wizardNode"\x3e\r\n    \x3cdiv class\x3d"dojoxWizardContainer" dojoAttachPoint\x3d"containerNode"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"dojoxWizardButtons" dojoAttachPoint\x3d"wizardNav"\x3e\r\n        \x3cbutton dojoType\x3d"dijit.form.Button" type\x3d"button" dojoAttachPoint\x3d"previousButton"\x3e${previousButtonLabel}\x3c/button\x3e\r\n        \x3cbutton dojoType\x3d"dijit.form.Button" type\x3d"button" dojoAttachPoint\x3d"nextButton"\x3e${nextButtonLabel}\x3c/button\x3e\r\n        \x3cbutton dojoType\x3d"dijit.form.Button" type\x3d"button" dojoAttachPoint\x3d"doneButton" style\x3d"display:none"\x3e${doneButtonLabel}\x3c/button\x3e\r\n        \x3cbutton dojoType\x3d"dijit.form.Button" type\x3d"button" dojoAttachPoint\x3d"cancelButton"\x3e${cancelButtonLabel}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dojox/form/resources/Uploader.html":'\x3cspan class\x3d"dijit dijitReset dijitInline"\r\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:_onClick"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e \r\n\t\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen" tabIndex\x3d"-1" data-dojo-attach-point\x3d"valueNode" /\x3e\r\n\x3c/span\x3e\r\n',
"url:dijit/templates/actionBar.html":"\x3cdiv class\x3d'dijitDialogPaneActionBar' data-dojo-attach-point\x3d\"actionBarNode\"\x3e\r\n\t\x3cbutton data-dojo-type\x3d'dijit/form/Button' type\x3d'submit' data-dojo-attach-point\x3d\"okButton\"\x3e\x3c/button\x3e\r\n\t\x3cbutton data-dojo-type\x3d'dijit/form/Button' type\x3d'button'\r\n\t\t\tdata-dojo-attach-point\x3d\"cancelButton\" data-dojo-attach-event\x3d'click:onCancel'\x3e\x3c/button\x3e\r\n\x3c/div\x3e\r\n","url:dijit/form/templates/Select.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tdata-dojo-attach-point\x3d"_buttonNode,tableNode,focusNode,_popupStateNode" cellspacing\x3d\'0\' cellpadding\x3d\'0\'\r\n\trole\x3d"listbox" aria-haspopup\x3d"true"\r\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonContents" role\x3d"presentation"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitButtonText"  data-dojo-attach-point\x3d"containerNode,textDirNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitValidationContainer"\r\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t/\x3e\x3c/div\r\n\t\t\t\x3e\x3cinput type\x3d"hidden" ${!nameAttrSetting} data-dojo-attach-point\x3d"valueNode" value\x3d"${value}" aria-hidden\x3d"true"\r\n\t\t/\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode" role\x3d"presentation"\r\n\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t\t${_buttonInputDisabled}\r\n\t\t/\x3e\x3c/td\r\n\t\x3e\x3c/tr\x3e\x3c/tbody\r\n\x3e\x3c/table\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/SaveItem.html":'\x3cdiv class\x3d"${baseClass} leader-1" data-dojo-attach-point\x3d"containerNode"\x3e\r\n\r\n  \x3clabel class\x3d"calcite-web-label trailer-half calcite-web-label-textbox leader-1"\x3e\r\n    ${i18n.titleLabel}\r\n    \x3cdiv data-dojo-attach-point\x3d"saveItemTitle"\r\n         data-dojo-type\x3d"dijit/form/TextBox"\r\n         placeHolder\x3d"${i18n.defaultTextTitle}" trim\x3d"true"\x3e\x3c/div\x3e\r\n\r\n  \x3c/label\x3e\r\n  \x3clabel class\x3d"calcite-web-label trailer-half clearfix leader-1"\x3e\r\n    ${i18n.tagsLabel}\r\n    \x3cdiv data-dojo-attach-point\x3d"saveItemTagsContainer"\x3e\x3c/div\x3e\r\n  \x3c/label\x3e\r\n  \x3cdiv class\x3d"categories-container"\x3e\r\n    \x3clabel class\x3d"calcite-web-label trailer-0 clearfix categories-container leader-1"\r\n      data-dojo-attach-point\x3d"saveItemCategoriesContainer"\r\n      for\x3d"saveItemCategoryPicker"\x3e\r\n      ${i18n.categoriesLabel}\r\n    \x3c/label\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"saveItemCategories" id\x3d"saveItemCategoryPicker"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3clabel class\x3d"calcite-web-label trailer-half calcite-web-label-textbox leader-half"\x3e\r\n    ${i18n.summaryLabel}\r\n    \x3cdiv data-dojo-attach-point\x3d"saveItemSummary"\r\n         data-dojo-type\x3d"dijit/form/TextBox"\r\n         placeHolder\x3d"${i18n.defaultTextSummary}" maxlength\x3d"250" trim\x3d"true"\x3e\x3c/div\x3e\r\n\r\n  \x3c/label\x3e\r\n  \x3clabel class\x3d"calcite-web-label trailer-half calcite-web-label-select leader-1" for\x3d"itemFolderComboBox"\x3e\r\n    ${i18n.saveInFolderLabel}\r\n    \x3cdiv data-dojo-attach-point\x3d"saveItemFolder"\r\n         data-dojo-type\x3d"arcgisonline/sharing/dijit/ComboBox"\r\n         id\x3d"itemFolderComboBox"\x3e\x3c/div\x3e\r\n  \x3c/label\x3e\r\n\r\n\x3c/div\x3e',
"url:arcgisonline/sharing/dijit/dialog/templates/ExportDlg.html":'\x3cdiv class\x3d"widgetContent"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"exportDialog" id\x3d"export-dialog" title\x3d"${i18n.exportDialogTitle}" execute\x3d""\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"saveItemForm"\x3e\x3c/div\x3e\r\n    \x3cfieldset data-dojo-attach-point\x3d"featureCollectionDiv" class\x3d"leader-1 featureCollectionOnly hide"\x3e\r\n      \x3clabel\x3e\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"generalizeChk" name\x3d"generalize"\x3e${i18n.generalize}\x3c/label\x3e\r\n      \x3clabel\x3e\x3cinput type\x3d"radio" name\x3d"generalize" checked\x3e${i18n.keepOrig}\x3c/label\x3e\r\n    \x3c/fieldset\x3e\r\n\r\n    \x3cp data-dojo-attach-point\x3d"_message" class\x3d"break_word"\x3e\x3c/p\x3e\r\n    \x3cdiv class\x3d"leader-1 esriFloatTrailing right"\x3e\r\n      \x3cspan data-dojo-attach-point\x3d"exportingLabel" style\x3d"visibility:hidden;"\x3e${i18n.exportingLabel}\x3c/span\x3e\r\n      \x3cbutton class\x3d"btn btn-clear" type\x3d"button" data-dojo-attach-point\x3d"cancelBtn"\x3e${i18n.cancel}\x3c/button\x3e\r\n      \x3cbutton class\x3d"btn" type\x3d"button" data-dojo-attach-point\x3d"exportBtn"\x3e${i18n.exportLabel}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:esri/dijit/Search/templates/Search.html":'\x3cdiv role\x3d"presentation" class\x3d"${theme}"\x3e\r\n  \x3cdiv role\x3d"presentation" class\x3d"${css.searchGroup}" data-dojo-attach-point\x3d"containerNode"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"expandNode" class\x3d"${css.searchExpandContainer}"\x3e\r\n      \x3cdiv class\x3d"${css.searchAnimateContainer}"\x3e\r\n        \x3cdiv role\x3d"button" title\x3d"${_i18n.widgets.Search.main.searchIn}" id\x3d"${id}_menu_button" class\x3d"${css.searchBtn} ${css.searchToggle}" tabindex\x3d"0" data-dojo-attach-point\x3d"sourcesBtnNode"\x3e\r\n          \x3cspan aria-hidden\x3d"true" role\x3d"presentation" class\x3d"${css.searchToggleIcon}"\x3e\x3c/span\x3e\x3cspan class\x3d"${css.searchSourceName}" data-dojo-attach-point\x3d"sourceNameNode"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"${css.searchInputGroup}"\x3e\r\n          \x3cform data-dojo-attach-point\x3d"formNode"\x3e\r\n            \x3cinput maxlength\x3d"${maxLength}" autocomplete\x3d"off" type\x3d"text" tabindex\x3d"0" class\x3d"${css.searchInput}" value\x3d"${value}" aria-haspopup\x3d"true" id\x3d"${id}_input" data-dojo-attach-point\x3d"inputNode" role\x3d"textbox"\x3e\r\n          \x3c/form\x3e\r\n          \x3cdiv role\x3d"button" class\x3d"${css.searchClear}" tabindex\x3d"0" data-dojo-attach-point\x3d"clearNode"\x3e\x3cspan aria-hidden\x3d"true" class\x3d"${css.searchClearIcon}"\x3e\x3c/span\x3e\x3cspan aria-hidden\x3d"true" class\x3d"${css.searchSpinner}"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"suggestionsNode" class\x3d"${css.searchMenu} ${css.suggestionsMenu}"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv role\x3d"button" title\x3d"${_i18n.widgets.Search.main.searchButtonTitle}" class\x3d"${css.searchBtn} ${css.searchSubmit}" tabindex\x3d"0" data-dojo-attach-point\x3d"submitNode"\x3e\r\n      \x3cspan aria-hidden\x3d"true" role\x3d"presentation" class\x3d"${css.searchIcon}"\x3e\x3c/span\x3e\r\n      \x3cspan class\x3d"${css.searchButtonText}"\x3e${_i18n.widgets.Search.main.searchButtonTitle}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"sourcesNode" class\x3d"${css.searchMenu} ${css.sourcesMenu}"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"noResultsMenuNode" class\x3d"${css.searchMenu} ${css.searchNoResultsMenu}"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"${css.searchClearFloat}"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/sharing/dijit/templates/DefineExtent.html":'\x3cdiv\x3e\r\n  \x3cspan\x3e\r\n    \x3cdiv class\x3d"esriLeadingMargin05 extent-search backward-compatible-extent-search inline-block" data-dojo-attach-point\x3d"_extentSearchContainer"\x3e\x3c/div\x3e\r\n    \x3cbutton class\x3d"calcite secondary btn btn-blue small right" id\x3d"extent-dlg-draw-button" data-dojo-attach-point\x3d"_buttonSetExtent"\x3e\r\n      ${i18n.drawExtent}\r\n    \x3c/button\x3e\r\n  \x3c/span\x3e\r\n  \x3cdiv id\x3d"extent-map-container" style\x3d"width:500px; max-width: 100%; height:340px; border:1px solid #000;"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"inline-block leader-half"\x3e\r\n    \x3clabel class\x3d"extent-label inline-block" for\x3d"extent-left"\x3e${i18n.leftLabel}\x3c/label\x3e\r\n    \x3cinput class\x3d"extent-input inline-block" id\x3d"extent-left" data-dojo-attach-point\x3d"_extentLeft"\r\n           data-dojo-type\x3d"dijit/form/TextBox"\r\n           data-dojo-props\x3d"trim:true, required:true"\x3e\r\n\r\n    \x3cspan class\x3d"extent-spacer"\x3e\x26nbsp;\x3c/span\x3e\r\n\r\n    \x3clabel class\x3d"extent-label inline-block" for\x3d"extent-right"\x3e${i18n.rightLabel}\x3c/label\x3e\r\n    \x3cinput class\x3d"extent-input" id\x3d"extent-right" data-dojo-attach-point\x3d"_extentRight" data-dojo-type\x3d"dijit/form/TextBox"\r\n           data-dojo-props\x3d"trim:true, required:true"\x3e\r\n  \x3c/div\x3e\r\n  \x3cbr\x3e\r\n  \x3cdiv class\x3d"inline-block"\x3e\r\n    \x3clabel class\x3d"extent-label inline-block" for\x3d"extent-top"\x3e${i18n.topLabel}\x3c/label\x3e\r\n    \x3cinput class\x3d"extent-input" id\x3d"extent-top" data-dojo-attach-point\x3d"_extentTop" data-dojo-type\x3d"dijit/form/TextBox"\r\n           data-dojo-props\x3d"trim:true, required:true"\x3e\r\n\r\n    \x3cspan class\x3d"extent-spacer"\x3e\x26nbsp;\x3c/span\x3e\r\n\r\n    \x3clabel class\x3d"extent-label inline-block" for\x3d"extent-bottom"\x3e${i18n.bottomLabel}\x3c/label\x3e\r\n    \x3cinput class\x3d"extent-input" id\x3d"extent-bottom" data-dojo-attach-point\x3d"_extentBottom" data-dojo-type\x3d"dijit/form/TextBox"\r\n           data-dojo-props\x3d"trim:true, required:true"\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/sharing/dijit/dialog/templates/ExtentDlg.html":'\x3cdiv class\x3d"widgetContent"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" class\x3d"extent-dialog" data-dojo-attach-point\x3d"_extentDialog" title\x3d"${i18n.extentDlgTitle}"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_extentContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"right esriFloatTrailing margin-right-1 extent-ltr-margin-right-0"\x3e\r\n      \x3cbutton data-dojo-attach-point\x3d"_cancelBtn" type\x3d"button" data-dojo-type\x3d"dijit/form/Button" class\x3d"cancel"\x3e\r\n        ${i18n.cancel}\r\n      \x3c/button\x3e\r\n      \x3cbutton data-dojo-attach-point\x3d"_okBtn" data-dojo-type\x3d"dijit/form/Button" class\x3d"primary"\x3e\r\n        ${i18n.ok}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/JobStatusDlg.html":'\x3cdiv class\x3d"${baseClass}"\x3e\r\n  \x3cdiv class\x3d"${baseClass} orgDlg job-status-dlg" data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"_dialog" title\x3d"${i18n.title}"\x3e\r\n    \x3cdiv class\x3d"leader-1" data-dojo-attach-point\x3d"_statusContainer"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_statusInfo"\x3e\r\n        \x3cdiv class\x3d"flex"\x3e\r\n          \x3cdiv class\x3d"flex-1"\x3e${i18n.status}\x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_jobStatus"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"flex"\x3e\r\n          \x3cdiv class\x3d"flex-1"\x3e${i18n.startTime}\x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_jobStartTime"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"flex"\x3e\r\n          \x3cdiv class\x3d"flex-1"\x3e${i18n.endTime}\x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_jobEndTime"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"flex"\x3e\r\n          \x3cdiv class\x3d"flex-1"\x3e${i18n.duration}\x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_jobDuration"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_jobAdminDetailsContainer"\x3e\r\n          \x3cdiv class\x3d"flex"\x3e\r\n            \x3cdiv class\x3d"flex-1"\x3e${i18n.machine}\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_jobMachine"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n\r\n          \x3cdiv class\x3d"flex"\x3e\r\n            \x3cdiv class\x3d"flex-1"\x3e${i18n.user}\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"_jobUser"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"flex"\x3e\r\n          \x3cdiv class\x3d"flex-1"\x3e${i18n.jobId}\x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_jobIdLinkContainer"\x3e\x3ca data-dojo-attach-point\x3d"_jobIdLink" target\x3d"_blank"\x3e\x3c/a\x3e\x3c/div\x3e\r\n          \x3cdiv class\x3d"hide" data-dojo-attach-point\x3d"_jobIdText"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"loader overlay-white position-relative js-status-loader" data-dojo-attach-point\x3d"_statusLoader"\x3e\r\n        \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"loader-text"\x3e${!i18n.awaitingInfo}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"right inline-block leader-1"\x3e\r\n      \x3cbutton type\x3d"button" class\x3d"btn btn-blue" data-dojo-attach-point\x3d"_cancelJobBtn"\x3e${i18n.cancelJob}\x3c/button\x3e\r\n      \x3cbutton type\x3d"button" class\x3d"btn btn-clear" data-dojo-attach-point\x3d"_closeBtn"\x3e${i18n.close}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/sharing/dijit/dialog/templates/ManageSceneCache.html":'\x3cdiv class\x3d"${baseClass}"\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"_optionsContainer"\x3e\r\n    ${i18n.description}\r\n    \x3cfieldset class\x3d"trailer-0 fieldset-checkbox leader-half padding-trailer-1"\x3e\r\n      \x3clabel\x3e\r\n        \x3cinput type\x3d"radio" name\x3d"rebuildOption" data-dojo-attach-point\x3d"_rebuildLayersRadio"\x3e \x3cspan\r\n          data-dojo-attach-point\x3d"_rebuildLayersRadioLabel"\x3e${i18n.rebuildLayers}\x3c/span\x3e\r\n      \x3c/label\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"_rebuildPartialContainer"\x3e\r\n        \x3cinput type\x3d"radio" name\x3d"rebuildOption" data-dojo-attach-point\x3d"_rebuildPartialRadio"\x3e ${i18n.rebuildPartialCache}\r\n      \x3c/label\x3e\r\n      \x3clabel class\x3d"hide" data-dojo-attach-point\x3d"_rebuildPartialAttrContainer"\x3e\r\n        \x3cinput type\x3d"radio" name\x3d"rebuildOption" data-dojo-attach-point\x3d"_rebuildAttributesRadio"\x3e ${i18n.rebuildAttributesCache}\r\n      \x3c/label\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"_rebuildFullContainer"\x3e\r\n        \x3cinput type\x3d"radio" name\x3d"rebuildOption" data-dojo-attach-point\x3d"_rebuildFullRadio" checked\x3e ${i18n.rebuildFull}\r\n      \x3c/label\x3e      \r\n    \x3c/fieldset\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"hide" data-dojo-attach-point\x3d"_portalOptionsContainer"\x3e\r\n    \x3cfieldset class\x3d"trailer-0 fieldset-checkbox leader-half padding-trailer-1"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"_rebuildPortalPartialContainer"\x3e\r\n        \x3cinput type\x3d"radio" name\x3d"rebuildOption" data-dojo-attach-point\x3d"_rebuildPortalPartialRadio"\x3e ${i18n.rebuildPartialCache}\r\n      \x3c/label\x3e\r\n      \x3clabel class\x3d"hide"\x3e\r\n        \x3cinput type\x3d"radio" name\x3d"rebuildOption" data-dojo-attach-point\x3d"_rebuildPortalAttributesRadio"\x3e ${i18n.rebuildAttributesCache}\r\n      \x3c/label\x3e\r\n      \x3clabel\x3e\r\n        \x3cinput type\x3d"radio" name\x3d"rebuildOption" data-dojo-attach-point\x3d"_rebuildPortalFullRadio"\x3e ${i18n.rebuildFullCache}\r\n      \x3c/label\x3e\r\n    \x3c/fieldset\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"loader js-caching-loader overlay-white position-relative leader-1 padding-trailer-1" data-dojo-attach-point\x3d"_caching"\x3e\r\n    \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"loader-text"\x3e${!i18n.republishing}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv data-dojo-attach-point\x3d"_sceneLayerSelectContainer"\x3e\r\n    \x3clabel class\x3d"trailer-0" data-dojo-attach-point\x3d"_sceneLayerSelectLabel"\x3e${i18n.selectLayers}\x3c/label\x3e\r\n    \x3cdiv class\x3d"scene-layer-list trailer-1" data-dojo-attach-point\x3d"_sceneLayerContainer"\x3e\r\n      \x3c!-- create scene layers here--\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"trailer-1 hide" data-dojo-attach-point\x3d"_fullRebuildRequired"\x3e${i18n.rebuildFullRequired}\x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"right inline-block padding-right-1" data-dojo-attach-point\x3d"_buttonBar"\x3e\r\n    \x3cbutton type\x3d"button" class\x3d"btn btn-blue" disabled\x3d"true" data-dojo-attach-point\x3d"_rebuildBtn"\x3e${i18n.rebuildLabel}\x3c/button\x3e\r\n    \x3cbutton type\x3d"button" class\x3d"btn btn-clear" data-dojo-attach-point\x3d"_cancelBtn"\x3e${i18n.cancel}\x3c/button\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/OverwriteFromCloud.html":'\x3cdiv class\x3d"${baseClass}"\x3e\r\n   \x3cdiv class\x3d"overwriteDialog"\x3e\r\n       \x3cp class\x3d"overwriteInfoText"\x3e${i18n.overwriteFromCloudDlg.overwriteInfoText}\x3c/p\x3e\r\n       \x3cp class\x3d"overwriteInfoNote"\x3e${i18n.overwriteFromCloudDlg.overwriteInfoNote}\x3c/p\x3e\r\n   \x3c/div\x3e \r\n   \x3c!-- Loader --\x3e\r\n   \x3cdiv class\x3d"loader loader-connectDataset is-active hide padding-leader-3 padding-trailer-3"\x3e\r\n     \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n     \x3cdiv class\x3d"loader-text"\x3e${i18n.overwriteFromCloudDlg.defaultLoading}\x3c/div\x3e\r\n   \x3c/div\x3e \r\n \x3c/div\x3e',
"url:esri/dijit/VisibleScaleRangeSlider/templates/ScaleMenu.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"${css.section}"\x3e\r\n    \x3cdiv class\x3d"${css.header}"\x3e${labels.current}\x3c/div\x3e\r\n    \x3cdiv class\x3d"${css.content}"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"dap_currentScaleLabel" class\x3d"${css.item} ${css.current}"\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"dap_scaleInput" data-dojo-type\x3d"dijit/form/TextBox" class\x3d"${css.input}"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"${css.section}" data-dojo-attach-point\x3d"dap_recommendedScaleSection"\x3e\r\n    \x3cdiv class\x3d"${css.header}" data-dojo-attach-point\x3d"dap_scaleListHeader"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"${css.content}"\x3e\r\n      \x3col data-dojo-attach-point\x3d"dap_recommendedScales" class\x3d"${css.list}"\x3e\r\n        \x3cli data-dojo-attach-point\x3d"dap_mapScaleItem" class\x3d"${css.item} ${css.selectable}"\x3e\x3c/li\x3e\r\n        \x3c!--additional list items added dynamically--\x3e\r\n      \x3c/ol\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:esri/dijit/VisibleScaleRangeSlider/templates/ScalePreview.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"${css.header}"\x3e${labels.preview}\x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"dap_scalePreviewThumbnail" class\x3d"${css.thumbnail}"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:dojox/form/resources/HorizontalRangeSlider.html":'\x3ctable class\x3d"dijit dijitReset dijitSlider dijitSliderH dojoxRangeSlider" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" rules\x3d"none" dojoAttachEvent\x3d"onkeypress:_onKeyPress,onkeyup:_onKeyUp" role\x3d"presentation"\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\t\x3e\x3ctd dojoAttachPoint\x3d"topDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderDecrementIconH" tabIndex\x3d"-1" style\x3d"display:none" dojoAttachPoint\x3d"decrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e-\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper" dojoAttachEvent\x3d"onmousedown:_onClkDecBumper"\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cinput dojoAttachPoint\x3d"valueNode" type\x3d"hidden" ${!nameAttrSetting}\r\n\t\t\t/\x3e\x3cdiv role\x3d"presentation" class\x3d"dojoxRangeSliderBarContainer" dojoAttachPoint\x3d"sliderBarContainer"\r\n\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableH"\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderImageHandle dijitSliderImageHandleH" dojoAttachPoint\x3d"sliderHandle,focusNode" tabIndex\x3d"${tabIndex}" dojoAttachEvent\x3d"onmousedown:_onHandleClick" role\x3d"slider"\x3e\x3c/div\r\n\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" dojoAttachPoint\x3d"progressBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" dojoAttachEvent\x3d"onmousedown:_onBarClick"\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableH"\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderImageHandle dijitSliderImageHandleH" dojoAttachPoint\x3d"sliderHandleMax" tabIndex\x3d"${tabIndex}" dojoAttachEvent\x3d"onmousedown:_onHandleClickMax" role\x3d"slider"\x3e\x3c/div\r\n\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" dojoAttachPoint\x3d"remainingBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" dojoAttachEvent\x3d"onmousedown:_onRemainingBarClick"\x3e\x3c/div\r\n\t\t\t\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper" dojoAttachEvent\x3d"onmousedown:_onClkIncBumper"\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderIncrementIconH" tabIndex\x3d"-1" style\x3d"display:none" dojoAttachPoint\x3d"incrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e+\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\t\x3e\x3ctd dojoAttachPoint\x3d"containerNode,bottomDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\x3e\x3c/table\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/PublishTilesDlg.html":'\x3cdiv data-dojo-attach-point\x3d"contentNode"\x3e\r\n  \x3cp data-dojo-attach-point\x3d"_message"\x3e\x3c/p\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"_itemPropertiesDlg"  data-dojo-type\x3d"arcgisonline/sharing/dijit/dialog/ItemPropertiesDlg" data-dojo-props\x3d"typeInfo:\'${_typeInfo}\', showFile:false, showUrl:false, showFolders:${showFolders}"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"sceneProperties hide"\x3e\r\n      \x3cdiv class\x3d"sceneDataDisplay hide"\x3e\r\n          \x3cdiv\x3e${i18n.publishTileServiceDlg.displayInLbl}\x3c/div\x3e\r\n          \x3clabel\x3e\r\n              \x3cinput id\x3d"${id}-globalWkid" data-dojo-attach-point\x3d"_globalWkidRadio" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-props\x3d"checked:false" value\x3d"global"\x3e\r\n              \x3cspan data-dojo-attach-point\x3d"_globalWkidRadioLabel"\x3e\x3c/span\x3e\r\n          \x3c/label\x3e\r\n          \x3clabel\x3e\r\n              \x3cinput id\x3d"${id}-localWkid" data-dojo-attach-point\x3d"_localWkidRadio" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-props\x3d"checked:true" value\x3d"local"\x3e\r\n              \x3cspan data-dojo-attach-point\x3d"_localWkidRadioLabel"\x3e\x3c/span\x3e\r\n          \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"sceneMultipatch hide"\x3e\r\n        \x3clabel\x3e\r\n          \x3cinput id\x3d"${id}-enableUpdates" data-dojo-attach-point\x3d"_enableSceneUpdates" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-props\x3d"checked:true" value\x3d"true"\x3e\r\n          \x3cspan data-dojo-attach-point\x3d"_enableSceneUpdatesLabel"\x3e${i18n.publishTileServiceDlg.enableUpdates}\x3c/span\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"tileProperties hide" data-dojo-attach-point\x3d"_tilePropertiesContainer"\x3e\r\n    \x3clabel\x3e${i18n.publishTileServiceDlg.tileSchemeLabel}\x3c/label\x3e\r\n    \x3cdiv class\x3d"tilePropertiesRadios"\x3e\r\n      \x3clabel\x3e\r\n        \x3cinput id\x3d"${id}-agoBasemap" data-dojo-attach-point\x3d"_agoBasemapRadio" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-props\x3d"checked:true" value\x3d"ago"\x3e${i18n.publishTileServiceDlg.matchAGOLBasemaps}\r\n      \x3c/label\x3e\r\n      \x3clabel\x3e\r\n        \x3cinput id\x3d"${id}-custom" data-dojo-attach-point\x3d"_customBasemapRadio" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-props\x3d"checked:false" value\x3d"custom"\x3e${i18n.publishTileServiceDlg.matchOwnBasemap}\r\n      \x3c/label\x3e\r\n      \x3cinput data-dojo-attach-point\x3d"_customBasemapUrl" class\x3d"custom esriLeadingMargin2" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-props\x3d"disabled:true,placeholder:\'${i18n.publishTileServiceDlg.tileSchemePlaceholder}\'"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"tileProperties hide" data-dojo-attach-point\x3d"_tilesOnDemandContainer"\x3e\r\n      \x3clabel\x3e\r\n        \x3cinput id\x3d"${id}-tilesOnDemand" data-dojo-attach-point\x3d"_tilesOnDemand" type\x3d"checkbox" data-dojo-type\x3d"dijit/form/CheckBox"\x3e ${i18n.publishTileServiceDlg.enableTilesOnDemand}\r\n      \x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"visibleScaleRange hide"\x3e\r\n      \x3clabel class\x3d"tileRange"\x3e${i18n.publishTileServiceDlg.scaleRangeLabel}\x3c/label\x3e\r\n      \x3cdiv\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_visibleScaleRangeContainer"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"loader js-visible-range-loader overlay-white position-relative hide" data-dojo-attach-point\x3d"_visibleRangeLoader"\x3e\r\n          \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n          \x3cdiv class\x3d"loader-text hide" data-dojo-attach-point\x3d"_visibleRangeLoaderMsg"\x3e${!i18n.common.loading}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"hide" data-dojo-attach-point\x3d"_increaseScaleWarning"\x3e\r\n      ${i18n.publishTileServiceDlg.increaseScaleWarning}\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"vectorTileProperties leader-half hide" data-dojo-attach-point\x3d"_selectAttributesContainer"\x3e\r\n    \x3cbutton class\x3d"btn btn-clear" data-dojo-attach-point\x3d"_selectAttributesBtn"\x3e${i18n.itemProperties.configureAttributes.selectAttributes}\x3c/button\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"viewProperties hide"\x3e\r\n    \x3clabel\x3e ${i18n.publishTileServiceDlg.createViewOptionsLabel}\x3c/label\x3e\r\n    \x3clabel\x3e\r\n      \x3cinput id\x3d"${id}-preserveIds" data-dojo-attach-point\x3d"_preserveIds" type\x3d"checkbox" data-dojo-type\x3d"dijit/form/CheckBox"\x3e ${i18n.publishTileServiceDlg.preserveLayerIds}\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/RateLimiting.html":'\x3cdiv\x3e\r\n  \x3cdiv id\x3d"rateLimiting" class\x3d"rateLimiting"\x3e\r\n    \x3cp\x3e${i18n.rateLimiting.instructions}\x3c/p\x3e\r\n    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"_enableLimits" type\x3d"checkbox" value\x3d"true" name\x3d"enableRateLimiting"/\x3e\r\n    \x3clabel class\x3d"esriLeadingMargin05 esriTrailingMargin1 inline-block trailer-half" for\x3d"referrerUri"\x3e${i18n.rateLimiting.hitRate}\x3c/label\x3e\r\n    \x3cdiv class\x3d"rateLimitingDiv esriLeadingMargin108 clearfix"\x3e\r\n      \x3cinput class\x3d"hitRate" value\x3d"1000"\r\n        data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n        data-dojo-attach-point\x3d"_hitRate"\r\n        data-dojo-props\x3d"disabled:true, rangeMessage:\'${i18n.rateLimiting.hitRateRangeMessage}\', invalidMessage:\'${i18n.rateLimiting.hitRateInvalidMessage}\',constraints:{min:1, max:1000000, places:0}" /\x3e\r\n      \x3clabel class\x3d"canDisable esriLeadingMargin1 esriTrailingMargin1 inline-block left leader-half trailer-0 padding-right-half" for\x3d"referrerUri"\x3e\r\n        ${i18n.rateLimiting.per}\r\n      \x3c/label\x3e\r\n      \x3cinput class\x3d"hitRate" value\x3d"1"\r\n        data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n        data-dojo-attach-point\x3d"_hitCount"\r\n        data-dojo-props\x3d"disabled:true, rangeMessage:\'${i18n.rateLimiting.hitRateRangeMessage}\', invalidMessage:\'${i18n.rateLimiting.hitRateInvalidMessage}\', constraints:{min:1, max:1000000, places:0}"/\x3e\r\n\r\n      \x3cselect class\x3d"esriUnits left inline-block" data-dojo-attach-point\x3d"_interval" data-dojo-type\x3d"dijit/form/Select" data-dojo-props\x3d"disabled:true" style\x3d"width:8.75em;"\x3e\r\n        \x3coption value\x3d"1"\x3e${i18n.rateLimiting.second}\x3c/option\x3e\r\n        \x3coption value\x3d"60"\x3e${i18n.rateLimiting.minute}\x3c/option\x3e\r\n        \x3coption value\x3d"3600"\x3e${i18n.rateLimiting.hour}\x3c/option\x3e\r\n        \x3coption value\x3d"86400"\x3e${i18n.rateLimiting.day}\x3c/option\x3e\r\n        \x3coption value\x3d"604800"\x3e${i18n.rateLimiting.week}\x3c/option\x3e\r\n        \x3coption value\x3d"2628000"\x3e${i18n.rateLimiting.month}\x3c/option\x3e\r\n      \x3c/select\x3e\r\n    \x3c/div\x3e\r\n    \x3cbr /\x3e\r\n    \x3clabel class\x3d"esriTrailingMargin05 trailer-half" for\x3d"referrerUri"\x3e${i18n.rateLimiting.referrerUri}\x3c/label\x3e\r\n    \x3cdiv class\x3d"clearfix"\x3e\r\n      \x3cinput data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"_referrerUrl" data-dojo-props\x3d"placeHolder:\'${i18n.registerApp.urlPlaceHolder}\'" type\x3d"text" class\x3d"left referrerUrl"/\x3e\r\n      \x3cbutton class\x3d"calcite small cancel" data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-point\x3d"_delBtn" data-dojo-props\x3d"disabled:true, label:\'${i18n.registerApp.del}\'"\x3e\x3c/button\x3e\r\n      \x3cbutton class\x3d"calcite small cancel" data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-point\x3d"_addBtn" data-dojo-props\x3d"label:\'${i18n.registerApp.add}\'"\x3e\x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriLeadingMargin93 trailer-half referralUris" data-dojo-type\x3d"dijit/form/MultiSelect" data-dojo-attach-point\x3d"_referrers" data-dojo-props\x3d"size:4, name:\'referral_uris\'"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dojox/form/resources/TriStateCheckBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d"dojoxTriStateCheckBoxInner" dojoAttachPoint\x3d"stateLabelNode"\x3e\x3c/div\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" role\x3d"${type}" dojoAttachPoint\x3d"focusNode"\r\n\tclass\x3d"dijitReset dojoxTriStateCheckBoxInput" dojoAttachEvent\x3d"onclick:_onClick"\r\n/\x3e\x3c/div\x3e\r\n',"url:arcgisonline/pages/dijit/ChangeOwner/templates/MoveItem.html":'\x3cdiv class\x3d"padding-leader-1 padding-trailer-1 padding-left-1 padding-right-1 position-relative"\x3e\r\n  \x3cdiv class\x3d"js-change-owner-loader loader loader-centered is-active"\x3e\r\n    \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"loader-text"\x3e${i18n.common.updating}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"js-change-owner-wrapper change-owner-wrapper"\x3e\r\n    \x3cdiv class\x3d"js-folder-picker"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/ReplaceLayer/templates/ReplaceLayer.html":'\x3cdiv class\x3d"stepper js-overlay-body grid-container"\x3e\r\n  \x3cdiv class\x3d"stepper__header js-stepper-headers"\x3e\r\n    \x3cdiv class\x3d"stepper__header-steps"\x3e\r\n      \x3cbutton\r\n        data-step-num\x3d"1"\r\n        title\x3d"${i18n.replaceLayer.selectReplacementLayer}"\r\n        class\x3d"btn-link btn-link-darker-gray stepper__step-item text-left font-size-1 stepper__step-item--active js-step-link js-step-header-1"\r\n      \x3e\r\n        ${i18n.replaceLayer.selectReplacementLayer}\r\n      \x3c/button\x3e\r\n      \x3cbutton\r\n        data-step-num\x3d"2"\r\n        title\x3d"${i18n.replaceLayer.chooseArchiveOption}"\r\n        class\x3d"btn-link btn-link-darker-gray stepper__step-item text-left font-size-1 js-step-link js-step-header-2"\r\n      \x3e\r\n        ${i18n.replaceLayer.chooseArchiveOption}\r\n      \x3c/button\x3e\r\n      \x3cbutton\r\n        data-step-num\x3d"3"\r\n        title\x3d"${i18n.replaceLayer.previewStyles}"\r\n        class\x3d"btn-link btn-link-darker-gray stepper__step-item text-left font-size-1 js-step-link js-step-header-3 js-replace-lyr-show-preview-step"\r\n      \x3e\r\n        ${i18n.replaceLayer.previewStyles}\r\n      \x3c/button\x3e\r\n      \x3cbutton\r\n        data-step-num\x3d"4"\r\n        title\x3d"${i18n.replaceLayer.summary}"\r\n        class\x3d"btn-link btn-link-darker-gray stepper__step-item text-left font-size-1 js-step-link js-step-header-4"\r\n      \x3e\r\n        ${i18n.replaceLayer.summary}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"stepper__step-bars js-step-bars"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"flex-1 stepper__search-container"\x3e\x3cdiv class\x3d"js-search-input"\x3e\x3c/div\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"stepper__content"\x3e\r\n    \x3cbutton data-step-num\x3d"1" class\x3d"btn-link btn-link-darker-gray stepper__title js-stepper-title"\x3e\x3c/button\x3e\r\n    \x3cdiv class\x3d"js-step-1 leader-half hide"\x3e\r\n      \x3cdiv\x3e\r\n        \x3ch4 class\x3d"font-size--1 trailer-half"\x3e${i18n.replaceLayer.replacementLayer}\x3c/h4\x3e\r\n        \x3cdiv class\x3d"pre-select"\x3e\r\n          \x3cdiv class\x3d"font-size-2 text-darker-gray trailer-1"\x3e${i18n.replaceLayer.noLayerSelected}\x3c/div\x3e\r\n          \x3cbutton class\x3d"btn btn-clear js-replace-layer-select trailer-2"\x3e${i18n.replaceLayer.selectLayer}\x3c/button\x3e\r\n          \x3cdiv\x3e${i18n.replaceLayer.requirements}\x3c/div\x3e\r\n          \x3chr class\x3d"leader-0 trailer-half" /\x3e\r\n          \x3cdiv\x3e\r\n            \x3cspan\x3e${i18n.replaceLayer.layersShouldHaveSame}\x3c/span\x3e\r\n            \x3cul\x3e\r\n              \x3cli\x3e${i18n.replaceLayer.layerShouldHaveSameScheme}\x3c/li\x3e\r\n              \x3cli\x3e${i18n.replaceLayer.layerShouldHaveSameComposition}\x3c/li\x3e\r\n            \x3c/ul\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"post-select hide"\x3e\r\n          \x3cdiv class\x3d"selected-card trailer-2"\x3e\r\n            \x3cdiv class\x3d"stepper__content-pane js-replace-lyr-selected-layer"\x3e\r\n              \x3ch3 class\x3d"js-replace-lyr-selected-lyr-name trailer-quarter"\x3e\x3c/h3\x3e\r\n              \x3ch5 class\x3d"trailer-half font-size--2"\x3e\r\n                \x3cimg class\x3d"js-replace-lyr-selected-icon replace-lyr-item-type-icon" /\x3e\r\n                \x3cspan class\x3d"js-replace-lyr-selected-type"\x3e\x3c/span\x3e ${i18n.replaceLayer.by}\r\n                \x3ca class\x3d"js-replace-lyr-selected-owner" target\x3d"_blank"\x3e\x3c/a\x3e\r\n              \x3c/h5\x3e\r\n              \x3cdiv class\x3d"replace-lyr-change-lyr-container"\x3e\r\n                \x3cbutton class\x3d"font-size--3 btn-link replace-lyr-change-lyr-btn js-replace-lyr-change-lyr"\x3e\r\n                  ${i18n.replaceLayer.changeLayer}\r\n                \x3c/button\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv\r\n              data-dojo-attach-point\x3d"_layerError"\r\n              class\x3d"input-error-message input-error-message-right js-replace-lyr-error replace-lyr-error"\r\n            \x3e\r\n              ${i18n.replaceLayer.error}\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"stepper__content-pane-compact font-size--1 js-replace-lyr-check-styles flex-center"\x3e\r\n            \x3cspan class\x3d"replace-lyr-loader margin-right-quarter"\x3e\x3c/span\x3e ${i18n.replaceLayer.checkIfCompatible}\r\n          \x3c/div\x3e\r\n          \x3cdiv\r\n            class\x3d"stepper__content-pane-compact stepper__alert-success font-size--1 js-replace-lyr-check-styles-success flex-center hide"\r\n          \x3e\r\n            \x3cspan class\x3d"replace-lyr-success-icon"\x3e${icons.inline.check-circle-f.16}\x3c/span\x3e\r\n            ${i18n.replaceLayer.stylesAreCompatible}\r\n          \x3c/div\x3e\r\n          \x3cdiv\r\n            class\x3d"stepper__content-pane-compact stepper__alert-warning font-size--1 js-replace-lyr-check-styles-warning flex-center hide"\r\n          \x3e\r\n            \x3cspan class\x3d"replace-lyr-warning-icon margin-right-half"\r\n              \x3e${icons.inline.exclamation-mark-triangle-f.16}\x3c/span\r\n            \x3e\r\n            \x3cdiv\x3e${i18n.replaceLayer.stylesAreIncompatible}\x3cbr /\x3e\x3cspan class\x3d"js-replace-lyr-show-preview-step"\x3e${i18n.replaceLayer.reviewDifferences}\x3c/span\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cbutton data-step-num\x3d"2" class\x3d"btn-link btn-link-darker-gray stepper__title js-stepper-title"\x3e\x3c/button\x3e\r\n    \x3cdiv class\x3d"js-step-2 leader-half hide"\x3e\r\n      \x3c!-- Radio --\x3e\r\n      \x3cdiv class\x3d"stepper__radio-item stepper__radio-item--selected"\x3e\r\n        \x3clabel class\x3d"flex trailer-0 stepper__radio-title"\x3e\r\n          \x3cinput\r\n            name\x3d"js-replace-lyr-archive-option-radio"\r\n            type\x3d"radio"\r\n            role\x3d"radio"\r\n            value\x3d"archive"\r\n            checked\r\n          /\x3e\r\n          \x3cspan class\x3d"margin-left-1 font-size-1 stepper__method-title"\x3e${i18n.replaceLayer.archiveAs}\x3c/span\x3e\r\n\r\n          \x3cdiv class\x3d"js-replace-lyr-edit-container replace-lyr-edit-container margin-left-half input-group hide"\x3e\r\n            \x3cinput\r\n              class\x3d"js-replace-lyr-edit-name input-group-input"\r\n              onfocus\x3d"this.select();"\r\n              type\x3d"text"\r\n              placeholder\x3d"${i18n.replaceLayer.layerName}"\r\n              maxlength\x3d"120"\r\n            /\x3e\r\n            \x3cdiv class\x3d"js-replace-name-input-error input-error-message"\x3e\r\n              ${i18n.addItemFrm.errors.invalidServiceTitle.message}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"js-replace-name-available-error input-error-message"\x3e\r\n              ${i18n.addItemFrm.errors.serviceNameExists.message}\r\n            \x3c/div\x3e\r\n            \x3cspan class\x3d"input-group-button"\x3e\r\n              \x3cbutton class\x3d"js-replace-lyr-edit-save btn"\x3e${i18n.replaceLayer.save}\x3c/button\x3e\r\n            \x3c/span\x3e\r\n          \x3c/div\x3e\r\n\r\n          \x3cbutton class\x3d"js-replace-lyr-current-arch-btn margin-left-half btn-link"\x3e\r\n            \x3cspan class\x3d"js-replace-lyr-current-arch-name"\x3e\x3c/span\x3e ${icons.inline.edit.16}\r\n          \x3c/button\x3e\r\n        \x3c/label\x3e\r\n\r\n        \x3cdiv class\x3d"stepper__radio-desc leader-quarter"\x3e${i18n.replaceLayer.contentWillBeArchived}\x3c/div\x3e\r\n        \x3c!-- below the divider - list of replacement rules and localized svg--\x3e\r\n        \x3chr class\x3d"margin-left-2 leader-half trailer-half" /\x3e\r\n        \x3cdiv class\x3d"margin-left-1 stepper__radio-details flex"\x3e\r\n          \x3cdiv class\x3d"stepper__radio-detail margin-right-2"\x3e\r\n            \x3cul class\x3d"font-size--2"\x3e\r\n              \x3cli\x3e${i18n.replaceLayer.retainsCurrentLayer}\x3c/li\x3e\r\n              \x3cli\x3e${i18n.replaceLayer.archiveCurrentLayer}\x3c/li\x3e\r\n              \x3cli\x3e${i18n.replaceLayer.replacementLayerIsDeleted}\x3c/li\x3e\r\n              \x3cli\x3e${i18n.replaceLayer.idealForArchive}\x3c/li\x3e\r\n            \x3c/ul\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"js-archive_svg stepper__radio-detail"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"stepper__radio-item"\x3e\r\n        \x3clabel class\x3d"flex trailer-0 stepper__radio-title"\x3e\r\n          \x3cinput\r\n            name\x3d"js-replace-lyr-archive-option-radio"\r\n            type\x3d"radio"\r\n            role\x3d"radio"\r\n            value\x3d"replace"\r\n          /\x3e\r\n          \x3cspan class\x3d"margin-left-1 font-size-1 stepper__method-title"\r\n            \x3e${i18n.replaceLayer.useReplacementAsArchive}\x3c/span\r\n          \x3e\r\n        \x3c/label\x3e\r\n        \x3cdiv class\x3d"stepper__radio-desc leader-quarter"\x3e${i18n.replaceLayer.contentWillBeSwapped}\x3c/div\x3e\r\n        \x3c!-- below the divider - list of replacement rules and localized svg--\x3e\r\n        \x3chr class\x3d"margin-left-2 leader-half trailer-half" /\x3e\r\n        \x3cdiv class\x3d"margin-left-1 stepper__radio-details flex"\x3e\r\n          \x3cdiv class\x3d"stepper__radio-detail margin-right-2"\x3e\r\n            \x3cul class\x3d"font-size--2"\x3e\r\n              \x3cli\x3e${i18n.replaceLayer.retainsBothLayers}\x3c/li\x3e\r\n              \x3cli\x3e${i18n.replaceLayer.idealForReplacement}\x3c/li\x3e\r\n            \x3c/ul\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"js-replace_svg stepper__radio-detail"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- End radio --\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"stepper__content-pane stepper__content-pane-flex leader-1"\x3e\r\n        \x3cdiv class\x3d"flex-1"\x3e\r\n          \x3cspan class\x3d"margin-left-1 font-size-1 stepper__method-title"\x3e${i18n.replaceLayer.replaceItemInfo}\x3c/span\x3e\r\n          \x3cdiv class\x3d"margin-left-1 font-size--2 leader-quarter"\x3e${i18n.replaceLayer.willUpdateItemInfo}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3clabel class\x3d"toggle-switch replace-lyr-switch modifier-class"\x3e\r\n          \x3cinput type\x3d"checkbox" class\x3d"js-replace-lyr-replace-item-switch toggle-switch-input" /\x3e\r\n          \x3cspan class\x3d"toggle-switch-track margin-right-1"\x3e\x3c/span\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cbutton data-step-num\x3d"3" class\x3d"btn-link btn-link-darker-gray stepper__title js-stepper-title"\x3e\x3c/button\x3e\r\n    \x3cdiv class\x3d"js-step-3 grid-container stepper__content-container flex-column leader-half hide"\x3e\r\n      \x3cdiv class\x3d"leader-1 trailer-half"\x3e${i18n.replaceLayer.stylePreview}\x3c/div\x3e\r\n      \x3cdiv class\x3d"trailer-1 js-replace-lyr-single-style flex hide"\x3e\r\n        \x3cspan\x3e${i18n.replaceLayer.otherStyles}\x3c/span\x3e \x3cb class\x3d"js-replace-lyr-style-layer margin-left-half"\x3e\x3c/b\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"trailer-1 js-replace-lyr-multiple-styles replace-lyr-multiple-styles flex"\x3e\r\n        \x3c/span\x3e${i18n.replaceLayer.otherStyles}\x3c/span\x3e\r\n        \x3cselect class\x3d"js-replace-lyr-style-layer-dropdown margin-left-half"\x3e\x3c/select\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"stepper__content-pane flex-column"\x3e\r\n        \x3cdiv class\x3d"replace-lyr-preview-label flex flex-space-between"\x3e\r\n          \x3cspan\x3e${i18n.replaceLayer.replacementLayer}\x3c/span\x3e\r\n          \x3cspan\x3e${i18n.replaceLayer.currentLayer}\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3ciframe class\x3d"js-replace-lyr-preview-container replace-lyr-preview-container"\x3e\x3c/iframe\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cbutton data-step-num\x3d"4" class\x3d"btn-link btn-link-darker-gray stepper__title js-stepper-title"\x3e\x3c/button\x3e\r\n    \x3cdiv class\x3d"js-step-4 leader-half hide"\x3e\r\n      \x3cdiv class\x3d"selected-card trailer-1"\x3e\r\n        \x3cdiv class\x3d"stepper__content-pane"\x3e\r\n          \x3cdiv class\x3d"font-size--3 trailer-half"\x3e${i18n.replaceLayer.currentLayer}\x3c/div\x3e\r\n          \x3ch3 class\x3d"js-replace-lyr-current-lyr-name trailer-quarter"\x3e\x3c/h3\x3e\r\n          \x3ch5 class\x3d"trailer-half font-size--2"\x3e\r\n            \x3cimg class\x3d"js-replace-lyr-current-icon replace-lyr-item-type-icon" /\x3e\r\n            \x3cspan class\x3d"js-replace-lyr-current-type"\x3e\x3c/span\x3e ${i18n.replaceLayer.by} \x3ca class\x3d"js-replace-lyr-current-owner" target\x3d"_blank"\x3e\x3c/a\x3e\r\n          \x3c/h5\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"selected-card trailer-1"\x3e\r\n        \x3cdiv class\x3d"stepper__content-pane"\x3e\r\n          \x3cdiv class\x3d"font-size--3 trailer-half"\x3e${i18n.replaceLayer.replacementLayer}\x3c/div\x3e\r\n          \x3ch3 class\x3d"js-replace-lyr-selected-lyr-name trailer-quarter"\x3e\x3c/h3\x3e\r\n          \x3ch5 class\x3d"font-size--2"\x3e\r\n            \x3cimg class\x3d"js-replace-lyr-selected-icon replace-lyr-item-type-icon" /\x3e\r\n            \x3cspan class\x3d"js-replace-lyr-selected-type"\x3e\x3c/span\x3e ${i18n.replaceLayer.by}\r\n            \x3ca class\x3d"js-replace-lyr-selected-owner" target\x3d"_blank"\x3e\x3c/a\x3e\r\n          \x3c/h5\x3e\r\n          \x3chr class\x3d"leader-1 trailer-1" /\x3e\r\n          \x3cdiv class\x3d"replace-lyr-sub-container flex-center"\x3e\r\n            \x3cdiv class\x3d"js-replace-lyr-check-styles-warning flex-center font-size--1 hide"\x3e\r\n              \x3cspan class\x3d"replace-lyr-warning-icon"\x3e${icons.inline.exclamation-mark-triangle-f.16}\x3c/span\x3e\r\n              ${i18n.replaceLayer.stylesAreIncompatible}\r\n            \x3c/div\x3e\r\n            \x3cbutton class\x3d"font-size--3 btn-link js-replace-lyr-change-lyr-summary text-right flex-1"\x3e\r\n              ${i18n.replaceLayer.selectReplacementLayer}\r\n            \x3c/button\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"selected-card trailer-1"\x3e\r\n        \x3cdiv class\x3d"stepper__content-pane"\x3e\r\n          \x3cdiv class\x3d"font-size--3 trailer-half"\x3e${i18n.replaceLayer.archiveOption}\x3c/div\x3e\r\n          \x3cul\x3e\r\n            \x3cli class\x3d"js-replace-lyr-archive-option hide"\x3e\r\n              ${i18n.replaceLayer.archiveAs} \x3cb class\x3d"js-replace-lyr-new-layer-name"\x3e\x3c/b\x3e\r\n            \x3c/li\x3e\r\n            \x3cli class\x3d"js-replace-lyr-replace-option hide"\x3e${i18n.replaceLayer.useReplacementAsArchive}\x3c/li\x3e\r\n            \x3cli class\x3d"js-replace-lyr-replace-item-information hide"\x3e${i18n.replaceLayer.replaceItemInfo}\x3c/li\x3e\r\n          \x3c/ul\x3e\r\n          \x3chr class\x3d"leader-1 trailer-1" /\x3e\r\n          \x3cdiv class\x3d"replace-lyr-sub-container"\x3e\r\n            \x3cbutton class\x3d"font-size--3 btn-link replace-lyr-change-lyr-btn js-replace-lyr-change-option"\x3e\r\n              ${i18n.replaceLayer.chooseArchiveOption}\r\n            \x3c/button\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"stepper__content-pane-compact font-size--1 js-replace-lyr-availabilty-notice flex flex-space-between hide"\x3e\r\n        \x3cspan\x3e${icons.inline.lightbulb.24} ${i18n.replaceLayer.replacementLayerAvailabilityNotice}\x3c/span\x3e\r\n        \x3cbutton class\x3d"btn-link btn-link-off-black js-replace-lyr-availabilty-notice-close replace-lyr-availabilty-notice-close"\x3e${icons.inline.x.16}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cbutton class\x3d"btn stepper__next leader-half js-stepper-next-btn"\x3e${i18n.myOrganization.inviteMembers.next}\x3c/button\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/img/Archive_no-text.svg":'\x3csvg id\x3d"Layer_1" data-name\x3d"Layer 1" xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 550 200" class\x3d"font-size--3"\x3e\x3cdefs\x3e\x3cstyle\x3e.cls-1,.cls-13{fill:none}.cls-1{stroke:#323232;stroke-miterlimit:10}.cls-1,.cls-13,.cls-14{stroke-linecap:round}.cls-2{fill:#323232}.cls-14,.cls-3{fill:#fff}.cls-4{fill:#efe9e3}.cls-5{fill:#a9d99d}.cls-6{fill:#fcf2ea}.cls-7{fill:#e5e4de}.cls-8{fill:#bdf2af}.cls-9{fill:#a7d6fe}.cls-13,.cls-14{stroke:#ff3636;stroke-linejoin:round}\x3c/style\x3e\x3c/defs\x3e\x3cpath class\x3d"cls-1" d\x3d"M389.51 132.42c-7 0-14.06 4.57-19.41 13.84M100.34 109.42c-7 0-14.06 4.57-19.42 13.84M219.51 16.42c-7 0-14.06 4.57-19.41 13.84"/\x3e\x3cpath class\x3d"cls-2" d\x3d"M245 83.11l-.19-13.15-7.42 4.29-9.52-5.5-7.75 4.47 9.53 5.5-7.42 4.28 22.77.11z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M118.17 126.4a.47.47 0 01-.25-.07l-55.42-32a.49.49 0 010-.86l55.08-31.8a.43.43 0 01.25-.07.47.47 0 01.25.07l55.42 32a.49.49 0 010 .86l-55.08 31.8a.43.43 0 01-.25.07z"/\x3e\x3cpath class\x3d"cls-2" d\x3d"M117.83 62.1l55.42 32-55.08 31.8-55.42-32 55.08-31.8m0-1a1 1 0 00-.5.13L62.25 93a1 1 0 000 1.74l55.42 32a1 1 0 00.5.13 1 1 0 00.5-.13L173.75 95a1 1 0 000-1.74l-55.42-32a1 1 0 00-.5-.13z"/\x3e\x3cpath class\x3d"cls-4" d\x3d"M87.7 79.49l19.06 11 30.12-17.39-19.05-11L87.7 79.49zM62.75 93.9l19.05 11 19.79-11.43-19.05-11L62.75 93.9zM112.11 122.4l6.06 3.5 19.8-11.43-6.06-3.5-19.8 11.43zM111.95 93.49l19.92 11.5 30.12-17.39-19.91-11.5-30.13 17.39zM167.19 90.6l-30.12 17.39 6.06 3.5 30.12-17.39-6.06-3.5z"/\x3e\x3cpath class\x3d"cls-5" d\x3d"M87 107.9l19.92 11.5 19.79-11.43-19.92-11.5L87 107.9z"/\x3e\x3cpath class\x3d"cls-6" d\x3d"M88.57 78.99l18.18 10.5 29.26-16.89-18.18-10.5-29.26 16.89zM62.75 93.9l18.18 10.5 18.94-10.93-18.19-10.5L62.75 93.9zM112.98 122.9l5.19 3 18.94-10.93-5.2-3-18.93 10.93zM113.68 93.49l18.19 10.5 29.26-16.89-18.19-10.5-29.26 16.89zM168.06 91.1l-29.27 16.89 5.2 3 29.26-16.89-5.19-3z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M106.05 118.9l-18.19-10.5 18.94-10.93 18.18 10.5-18.93 10.93z"/\x3e\x3cpath class\x3d"cls-7" d\x3d"M117.88 71.07l7.79 4.5 7.74-4.47-7.79-4.5-7.74 4.47zM108.41 76.54l7.79 4.5 6.89-3.98-7.8-4.5-6.88 3.98zM98.94 82l7.8 4.5 6.88-3.97-7.79-4.5L98.94 82zM170.66 92.6l-7.75 4.47 2.6 1.5 7.74-4.47-2.59-1.5zM153.44 102.54l2.6 1.5 6.89-3.98-2.6-1.5-6.89 3.98zM143.97 108l2.6 1.5 6.89-3.97-2.6-1.5-6.89 3.97zM123.02 65.1l-5.19-3-7.75 4.47 5.2 3 7.74-4.47zM112.7 71.06l-5.2-3-6.89 3.98 5.2 3 6.89-3.98zM103.23 76.53l-5.2-3-6.88 3.97 5.19 3 6.89-3.97zM62.75 93.9l15.59 9 16.35-9.44-15.59-9-16.35 9.44zM115.58 124.4l2.59 1.5 16.36-9.44-2.6-1.5-16.35 9.44zM118.86 93.5l12.99 7.5 12.05-6.95-12.99-7.5-12.05 6.95zM133.49 85.06l12.99 7.5 12.05-6.96-12.99-7.5-12.05 6.96z"/\x3e\x3cpath class\x3d"cls-8" d\x3d"M111.59 105.2a3.88 3.88 0 011.86 2h10.31L108 98.18v5.95a9.28 9.28 0 013.59 1.07zM102.09 105.19a9 9 0 013.52-1.07v-6l-16.32 9.42 11-.35a3.71 3.71 0 011.8-2z"/\x3e\x3cellipse class\x3d"cls-9" cx\x3d"106.85" cy\x3d"107.94" rx\x3d"2.47" ry\x3d"4.27" transform\x3d"rotate(-89.69 106.851 107.935)"/\x3e\x3cpath class\x3d"cls-8" d\x3d"M102.12 110.67a3.9 3.9 0 01-1.86-2l-11.34.33 16.08 9.29.63-6.55a9.09 9.09 0 01-3.51-1.07zM113.45 108.65a3.78 3.78 0 01-1.83 2 9.15 9.15 0 01-3.56 1.06l-.61 6.34 16.32-9.42z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M178.21 84.61a.52.52 0 01-.25-.07l-66.21-38.23a.49.49 0 010-.86l65.79-38a.59.59 0 01.25-.07.52.52 0 01.25.07l66.21 38.23a.49.49 0 010 .86l-65.79 38a.59.59 0 01-.25.07z"/\x3e\x3cpath class\x3d"cls-2" d\x3d"M177.79 7.89L244 46.12l-65.79 38L112 45.88l65.79-38m0-1a1 1 0 00-.5.14L111.5 45a1 1 0 000 1.74L177.71 85a1 1 0 00.5.14 1 1 0 00.5-.14l65.79-38a1 1 0 000-1.74L178.29 7a1 1 0 00-.5-.14z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M178.17 78.4a.47.47 0 01-.25-.07l-55.42-32a.49.49 0 010-.86l55.08-31.8a.43.43 0 01.25-.07.47.47 0 01.25.07l55.42 32a.49.49 0 010 .86l-55.08 31.8a.43.43 0 01-.25.07z"/\x3e\x3cpath class\x3d"cls-7" d\x3d"M177.83 14.1l55.42 32-55.08 31.8-55.42-32 55.08-31.8m0-1a1 1 0 00-.5.13L122.25 45a1 1 0 000 1.74l55.42 32a1 1 0 00.5.13 1 1 0 00.5-.13L233.75 47a1 1 0 000-1.74l-55.42-32a1 1 0 00-.5-.13z"/\x3e\x3cpath class\x3d"cls-4" d\x3d"M147.71 31.49l19.05 11 30.12-17.39-19.05-11-30.12 17.39zM122.75 45.9l19.05 11 19.79-11.43-19.05-11-19.79 11.43zM172.11 74.4l6.06 3.5 19.8-11.43-6.06-3.5-19.8 11.43zM171.95 45.49l19.92 11.5 30.12-17.39-19.91-11.5-30.13 17.39zM227.19 42.6l-30.12 17.39 6.06 3.5 30.12-17.39-6.06-3.5z"/\x3e\x3cpath class\x3d"cls-5" d\x3d"M147 59.9l19.91 11.5 19.8-11.43-19.92-11.5L147 59.9z"/\x3e\x3cpath class\x3d"cls-6" d\x3d"M148.57 30.99l18.18 10.5 29.26-16.89-18.18-10.5-29.26 16.89zM122.75 45.9l18.18 10.5 18.94-10.93-18.19-10.5-18.93 10.93zM172.98 74.9l5.19 3 18.94-10.93-5.2-3-18.93 10.93zM173.68 45.49l18.19 10.5 29.26-16.89-18.19-10.5-29.26 16.89zM228.06 43.1l-29.27 16.89 5.2 3 29.26-16.89-5.19-3z"/\x3e\x3cpath class\x3d"cls-8" d\x3d"M166.05 70.9l-18.19-10.5 18.94-10.93 18.18 10.5-18.93 10.93z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M289.21 148.61a.52.52 0 01-.25-.07l-66.21-38.23a.49.49 0 010-.86l65.79-38a.59.59 0 01.25-.07.52.52 0 01.25.07l66.21 38.23a.49.49 0 010 .86l-65.79 38a.59.59 0 01-.25.07z"/\x3e\x3cpath class\x3d"cls-2" d\x3d"M288.79 71.89L355 110.12l-65.79 38L223 109.88l65.79-38m0-1a1 1 0 00-.5.14L222.5 109a1 1 0 000 1.74L288.71 149a1 1 0 00.5.14 1 1 0 00.5-.14l65.79-38a1 1 0 000-1.74L289.29 71a1 1 0 00-.5-.14z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M289.17 142.4a.47.47 0 01-.25-.07l-55.42-32a.49.49 0 010-.86l55.08-31.8a.43.43 0 01.25-.07.47.47 0 01.25.07l55.42 32a.49.49 0 010 .86l-55.08 31.8a.43.43 0 01-.25.07z"/\x3e\x3cpath class\x3d"cls-7" d\x3d"M288.83 78.1l55.42 32-55.08 31.8-55.42-32 55.08-31.8m0-1a1 1 0 00-.5.13L233.25 109a1 1 0 000 1.74l55.42 32a1 1 0 00.5.13 1 1 0 00.5-.13L344.75 111a1 1 0 000-1.74l-55.42-32a1 1 0 00-.5-.13z"/\x3e\x3cpath class\x3d"cls-4" d\x3d"M258.7 95.49l19.06 11 30.12-17.39-19.05-11-30.13 17.39zM233.75 109.9l19.05 11 19.79-11.43-19.05-11-19.79 11.43zM283.11 138.4l6.06 3.5 19.8-11.43-6.07-3.5-19.79 11.43zM282.95 109.49l19.92 11.5 30.12-17.39-19.91-11.5-30.13 17.39zM338.19 106.6l-30.12 17.39 6.06 3.5 30.12-17.39-6.06-3.5z"/\x3e\x3cpath class\x3d"cls-5" d\x3d"M258 123.9l19.92 11.5 19.79-11.43-19.92-11.5L258 123.9z"/\x3e\x3cpath class\x3d"cls-6" d\x3d"M259.57 94.99l18.18 10.5 29.26-16.89-18.18-10.5-29.26 16.89zM233.75 109.9l18.18 10.5 18.94-10.93-18.19-10.5-18.93 10.93zM283.98 138.9l5.19 3 18.94-10.93-5.2-3-18.93 10.93zM284.68 109.49l18.19 10.5 29.26-16.89-18.19-10.5-29.26 16.89zM339.06 107.1l-29.26 16.89 5.19 3 29.26-16.89-5.19-3z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M277.05 134.9l-18.19-10.5 18.94-10.93 18.18 10.5-18.93 10.93z"/\x3e\x3cpath class\x3d"cls-7" d\x3d"M288.88 87.07l7.79 4.5 7.75-4.47-7.8-4.5-7.74 4.47zM279.41 92.54l7.79 4.5 6.89-3.98-7.8-4.5-6.88 3.98zM269.94 98l7.8 4.5 6.88-3.97-7.79-4.5-6.89 3.97zM341.65 108.6l-7.74 4.47 2.6 1.5 7.74-4.47-2.6-1.5zM324.44 118.54l2.6 1.5 6.89-3.98-2.6-1.5-6.89 3.98zM314.98 124l2.59 1.5 6.89-3.97-2.6-1.5-6.88 3.97zM294.02 81.1l-5.19-3-7.75 4.47 5.2 3 7.74-4.47zM283.7 87.06l-5.2-3-6.88 3.98 5.19 3 6.89-3.98zM274.23 92.53l-5.2-3-6.88 3.97 5.19 3 6.89-3.97zM233.75 109.9l15.59 9 16.35-9.44-15.59-9-16.35 9.44zM286.57 140.4l2.6 1.5 16.35-9.44-2.59-1.5-16.36 9.44zM289.86 109.5l12.99 7.5 12.05-6.95-12.99-7.5-12.05 6.95zM304.49 101.06l12.99 7.5 12.05-6.96-12.99-7.5-12.05 6.96z"/\x3e\x3cpath class\x3d"cls-8" d\x3d"M282.59 121.2a3.88 3.88 0 011.86 2h10.31L279 114.18v5.95a9.28 9.28 0 013.59 1.07zM273.09 121.19a9 9 0 013.52-1.07v-6l-16.32 9.42 11-.35a3.71 3.71 0 011.8-2z"/\x3e\x3cellipse class\x3d"cls-9" cx\x3d"277.85" cy\x3d"123.94" rx\x3d"2.47" ry\x3d"4.27" transform\x3d"rotate(-89.69 277.848 123.937)"/\x3e\x3cpath class\x3d"cls-8" d\x3d"M273.12 126.67a3.9 3.9 0 01-1.86-2l-11.34.36 16.08 9.26.63-6.55a9.09 9.09 0 01-3.51-1.07zM284.45 124.65a3.78 3.78 0 01-1.83 2 9.15 9.15 0 01-3.56 1.06l-.61 6.34 16.32-9.42z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M229.17 190.4a.47.47 0 01-.25-.07l-55.42-32a.49.49 0 010-.86l55.08-31.8a.43.43 0 01.25-.07.47.47 0 01.25.07l55.42 32a.49.49 0 010 .86l-55.08 31.8a.43.43 0 01-.25.07z"/\x3e\x3cpath d\x3d"M228.83 126.1l55.42 32-55.08 31.8-55.42-32 55.08-31.8m0-1a1 1 0 00-.5.13L173.25 157a1 1 0 000 1.74l55.42 32a1 1 0 00.5.13 1 1 0 00.5-.13L284.75 159a1 1 0 000-1.74l-55.42-32a1 1 0 00-.5-.13z" fill\x3d"#ff3636"/\x3e\x3cpath class\x3d"cls-4" d\x3d"M198.71 143.49l19.05 11 30.12-17.39-19.05-11-30.12 17.39zM173.75 157.9l19.05 11 19.79-11.43-19.05-11-19.79 11.43zM223.11 186.4l6.06 3.5 19.8-11.43-6.06-3.5-19.8 11.43zM222.95 157.49l19.92 11.5 30.12-17.39-19.91-11.5-30.13 17.39zM278.19 154.6l-30.12 17.39 6.06 3.5 30.12-17.39-6.06-3.5zM198 171.9l19.91 11.5 19.8-11.43-19.92-11.5L198 171.9z"/\x3e\x3cpath class\x3d"cls-6" d\x3d"M199.57 142.99l18.18 10.5 29.26-16.89-18.18-10.5-29.26 16.89zM173.75 157.9l18.18 10.5 18.94-10.93-18.19-10.5-18.93 10.93zM223.98 186.9l5.19 3 18.94-10.93-5.2-3-18.93 10.93zM224.68 157.49l18.19 10.5 29.26-16.89-18.19-10.5-29.26 16.89zM279.06 155.1l-29.27 16.89 5.2 3 29.26-16.89-5.19-3z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M217.05 182.9l-18.19-10.5 18.94-10.93 18.18 10.5-18.93 10.93z"/\x3e\x3cpath class\x3d"cls-7" d\x3d"M228.88 135.07l7.79 4.5 7.74-4.47-7.79-4.5-7.74 4.47zM219.41 140.54l7.79 4.5 6.89-3.98-7.8-4.5-6.88 3.98zM209.94 146l7.8 4.5 6.88-3.97-7.79-4.5-6.89 3.97zM281.65 156.6l-7.74 4.47 2.6 1.5 7.74-4.47-2.6-1.5zM264.44 166.54l2.6 1.5 6.89-3.98-2.6-1.5-6.89 3.98zM254.97 172l2.6 1.5 6.89-3.97-2.6-1.5-6.89 3.97zM234.02 129.1l-5.19-3-7.75 4.47 5.2 3 7.74-4.47zM223.7 135.06l-5.2-3-6.88 3.98 5.19 3 6.89-3.98zM214.23 140.53l-5.2-3-6.88 3.97 5.19 3 6.89-3.97zM173.75 157.9l15.59 9 16.35-9.44-15.59-9-16.35 9.44zM226.57 188.4l2.6 1.5 16.36-9.44-2.6-1.5-16.36 9.44zM229.86 157.5l12.99 7.5 12.05-6.95-12.99-7.5-12.05 6.95zM244.49 149.06l12.99 7.5 12.05-6.96-12.99-7.5-12.05 6.96z"/\x3e\x3cpath class\x3d"cls-8" d\x3d"M222.59 169.2a3.88 3.88 0 011.86 2h10.31L219 162.18v5.95a9.28 9.28 0 013.59 1.07zM213.09 169.19a9 9 0 013.52-1.07v-6l-16.32 9.42 11-.35a3.71 3.71 0 011.8-2z"/\x3e\x3cellipse class\x3d"cls-9" cx\x3d"217.85" cy\x3d"171.94" rx\x3d"2.47" ry\x3d"4.27" transform\x3d"rotate(-89.69 217.85 171.934)"/\x3e\x3cpath class\x3d"cls-8" d\x3d"M213.12 174.67a3.9 3.9 0 01-1.86-2l-11.34.36 16.08 9.26.63-6.55a9.09 9.09 0 01-3.51-1.07zM224.45 172.65a3.78 3.78 0 01-1.83 2 9.15 9.15 0 01-3.56 1.06l-.61 6.34 16.32-9.42z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M350.67 190.4a.47.47 0 01-.25-.07l-55.42-32a.49.49 0 010-.86l55.08-31.8a.43.43 0 01.25-.07.47.47 0 01.25.07l55.42 32a.49.49 0 010 .86l-55.08 31.8a.43.43 0 01-.25.07z"/\x3e\x3cpath class\x3d"cls-2" d\x3d"M350.33 126.1l55.42 32-55.08 31.8-55.42-32 55.08-31.8m0-1a1 1 0 00-.5.13L294.75 157a1 1 0 000 1.74l55.42 32a1 1 0 00.5.13 1 1 0 00.5-.13L406.25 159a1 1 0 000-1.74l-55.42-32a1 1 0 00-.5-.13z"/\x3e\x3cpath class\x3d"cls-4" d\x3d"M320.2 143.49l19.06 11 30.12-17.39-19.05-11-30.13 17.39zM295.25 157.9l19.05 11 19.79-11.43-19.05-11-19.79 11.43zM344.61 186.4l6.06 3.5 19.8-11.43-6.07-3.5-19.79 11.43zM344.45 157.49l19.92 11.5 30.12-17.39-19.91-11.5-30.13 17.39zM399.69 154.6l-30.12 17.39 6.06 3.5 30.12-17.39-6.06-3.5z"/\x3e\x3cpath class\x3d"cls-5" d\x3d"M319.5 171.9l19.92 11.5 19.79-11.43-19.92-11.5-19.79 11.43z"/\x3e\x3cpath class\x3d"cls-6" d\x3d"M321.07 142.99l18.18 10.5 29.26-16.89-18.18-10.5-29.26 16.89zM295.25 157.9l18.18 10.5 18.94-10.93-18.19-10.5-18.93 10.93zM345.48 186.9l5.19 3 18.94-10.93-5.2-3-18.93 10.93zM346.18 157.49l18.19 10.5 29.26-16.89-18.19-10.5-29.26 16.89zM400.56 155.1l-29.26 16.89 5.19 3 29.26-16.89-5.19-3z"/\x3e\x3cpath class\x3d"cls-8" d\x3d"M338.55 182.9l-18.19-10.5 18.94-10.93 18.18 10.5-18.93 10.93z"/\x3e\x3cpath fill\x3d"#ffe0e0" d\x3d"M229.17 189.9l-55.42-32 55.08-31.8 55.42 32-55.08 31.8z" opacity\x3d".5"/\x3e\x3cpath class\x3d"cls-13" d\x3d"M232.93 150v-1.73a2.8 2.8 0 00-2.57-2.27h-3.29a2.8 2.8 0 00-2.57 2.27V150"/\x3e\x3cpath class\x3d"cls-14" d\x3d"M235.47 170h-12.94l-2.35-20h17.64l-2.35 20z"/\x3e\x3cpath class\x3d"cls-14" d\x3d"M219.5 149h19v4h-19z"/\x3e\x3cpath class\x3d"cls-13" d\x3d"M223.6 155.6l1.2 12M227.2 155.6l.4 12M230.8 155.6l-.4 12M234.4 155.6l-1.2 12"/\x3e\x3cpath class\x3d"cls-1" d\x3d"M132.65 87a29.18 29.18 0 011.35-8.41 39.56 39.56 0 013.68-8.38 40.18 40.18 0 015.45-7.37 29.46 29.46 0 016.68-5.4 17.25 17.25 0 015.6-2.16"/\x3e\x3cpath class\x3d"cls-2" d\x3d"M153.15 60.13l-.83-.56 2.74-4.1-4.29-2.43.49-.87 5.23 2.96-3.34 5z"/\x3e\x3ctext class\x3d"archive-lyr-current-layer-svg" x\x3d"225" y\x3d"20" text-anchor\x3d"start"\x3e${i18n.replaceLayer.currentLayer}\x3c/text\x3e\x3ctext x\x3d"80" y\x3d"140" text-anchor\x3d"middle"\x3e${i18n.replaceLayer.replacementLayer}\x3c/text\x3e\x3ctext class\x3d"archive-lyr-archive-svg" x\x3d"395" y\x3d"137" text-anchor\x3d"start"\x3e${i18n.replaceLayer.archivedSvg}\x3c/text\x3e\x3c/svg\x3e\r\n',
"url:arcgisonline/img/Replace_no-text.svg":'\x3csvg id\x3d"Layer_1" data-name\x3d"Layer 1" xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 550 200" class\x3d"font-size--3"\x3e\x3cdefs\x3e\x3cstyle\x3e.cls-1{fill:none;stroke:#323232;stroke-linecap:round;stroke-miterlimit:10}.cls-2{fill:#323232}.cls-3{fill:#fff}.cls-4{fill:#efe9e3}.cls-5{fill:#a9d99d}.cls-6{fill:#fcf2ea}.cls-7{fill:#e5e4de}.cls-8{fill:#bdf2af}.cls-9{fill:#a7d6fe}\x3c/style\x3e\x3c/defs\x3e\x3cpath class\x3d"cls-1" d\x3d"M100.34 109.42c-7 0-14.06 4.57-19.42 13.84M219.51 16.42c-7 0-14.06 4.57-19.41 13.84"/\x3e\x3cpath class\x3d"cls-2" d\x3d"M245 83.11l-.19-13.15-7.42 4.29-9.52-5.5-7.75 4.47 9.53 5.5-7.42 4.28 22.77.11z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M118.17 126.4a.47.47 0 01-.25-.07l-55.42-32a.49.49 0 010-.86l55.08-31.8a.43.43 0 01.25-.07.47.47 0 01.25.07l55.42 32a.49.49 0 010 .86l-55.08 31.8a.43.43 0 01-.25.07z"/\x3e\x3cpath class\x3d"cls-2" d\x3d"M117.83 62.1l55.42 32-55.08 31.8-55.42-32 55.08-31.8m0-1a1 1 0 00-.5.13L62.25 93a1 1 0 000 1.74l55.42 32a1 1 0 00.5.13 1 1 0 00.5-.13L173.75 95a1 1 0 000-1.74l-55.42-32a1 1 0 00-.5-.13z"/\x3e\x3cpath class\x3d"cls-4" d\x3d"M87.7 79.49l19.06 11 30.12-17.39-19.05-11L87.7 79.49zM62.75 93.9l19.05 11 19.79-11.43-19.05-11L62.75 93.9zM112.11 122.4l6.06 3.5 19.8-11.43-6.06-3.5-19.8 11.43zM111.95 93.49l19.92 11.5 30.12-17.39-19.91-11.5-30.13 17.39zM167.19 90.6l-30.12 17.39 6.06 3.5 30.12-17.39-6.06-3.5z"/\x3e\x3cpath class\x3d"cls-5" d\x3d"M87 107.9l19.92 11.5 19.79-11.43-19.92-11.5L87 107.9z"/\x3e\x3cpath class\x3d"cls-6" d\x3d"M88.57 78.99l18.18 10.5 29.26-16.89-18.18-10.5-29.26 16.89zM62.75 93.9l18.18 10.5 18.94-10.93-18.19-10.5L62.75 93.9zM112.98 122.9l5.19 3 18.94-10.93-5.2-3-18.93 10.93zM113.68 93.49l18.19 10.5 29.26-16.89-18.19-10.5-29.26 16.89zM168.06 91.1l-29.27 16.89 5.2 3 29.26-16.89-5.19-3z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M106.05 118.9l-18.19-10.5 18.94-10.93 18.18 10.5-18.93 10.93z"/\x3e\x3cpath class\x3d"cls-7" d\x3d"M117.88 71.07l7.79 4.5 7.74-4.47-7.79-4.5-7.74 4.47zM108.41 76.54l7.79 4.5 6.89-3.98-7.8-4.5-6.88 3.98zM98.94 82l7.8 4.5 6.88-3.97-7.79-4.5L98.94 82zM170.66 92.6l-7.75 4.47 2.6 1.5 7.74-4.47-2.59-1.5zM153.44 102.54l2.6 1.5 6.89-3.98-2.6-1.5-6.89 3.98zM143.97 108l2.6 1.5 6.89-3.97-2.6-1.5-6.89 3.97zM123.02 65.1l-5.19-3-7.75 4.47 5.2 3 7.74-4.47zM112.7 71.06l-5.2-3-6.89 3.98 5.2 3 6.89-3.98zM103.23 76.53l-5.2-3-6.88 3.97 5.19 3 6.89-3.97zM62.75 93.9l15.59 9 16.35-9.44-15.59-9-16.35 9.44zM115.58 124.4l2.59 1.5 16.36-9.44-2.6-1.5-16.35 9.44zM118.86 93.5l12.99 7.5 12.05-6.95-12.99-7.5-12.05 6.95zM133.49 85.06l12.99 7.5 12.05-6.96-12.99-7.5-12.05 6.96z"/\x3e\x3cpath class\x3d"cls-8" d\x3d"M111.59 105.2a3.88 3.88 0 011.86 2h10.31L108 98.18v5.95a9.28 9.28 0 013.59 1.07zM102.09 105.19a9 9 0 013.52-1.07v-6l-16.32 9.42 11-.35a3.71 3.71 0 011.8-2z"/\x3e\x3cellipse class\x3d"cls-9" cx\x3d"106.85" cy\x3d"107.94" rx\x3d"2.47" ry\x3d"4.27" transform\x3d"rotate(-89.69 106.851 107.935)"/\x3e\x3cpath class\x3d"cls-8" d\x3d"M102.12 110.67a3.9 3.9 0 01-1.86-2l-11.34.33 16.08 9.29.63-6.55a9.09 9.09 0 01-3.51-1.07zM113.45 108.65a3.78 3.78 0 01-1.83 2 9.15 9.15 0 01-3.56 1.06l-.61 6.34 16.32-9.42z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M178.21 84.61a.52.52 0 01-.25-.07l-66.21-38.23a.49.49 0 010-.86l65.79-38a.59.59 0 01.25-.07.52.52 0 01.25.07l66.21 38.23a.49.49 0 010 .86l-65.79 38a.59.59 0 01-.25.07z"/\x3e\x3cpath class\x3d"cls-2" d\x3d"M177.79 7.89L244 46.12l-65.79 38L112 45.88l65.79-38m0-1a1 1 0 00-.5.14L111.5 45a1 1 0 000 1.74L177.71 85a1 1 0 00.5.14 1 1 0 00.5-.14l65.79-38a1 1 0 000-1.74L178.29 7a1 1 0 00-.5-.14z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M178.17 78.4a.47.47 0 01-.25-.07l-55.42-32a.49.49 0 010-.86l55.08-31.8a.43.43 0 01.25-.07.47.47 0 01.25.07l55.42 32a.49.49 0 010 .86l-55.08 31.8a.43.43 0 01-.25.07z"/\x3e\x3cpath class\x3d"cls-7" d\x3d"M177.83 14.1l55.42 32-55.08 31.8-55.42-32 55.08-31.8m0-1a1 1 0 00-.5.13L122.25 45a1 1 0 000 1.74l55.42 32a1 1 0 00.5.13 1 1 0 00.5-.13L233.75 47a1 1 0 000-1.74l-55.42-32a1 1 0 00-.5-.13z"/\x3e\x3cpath class\x3d"cls-4" d\x3d"M147.71 31.49l19.05 11 30.12-17.39-19.05-11-30.12 17.39zM122.75 45.9l19.05 11 19.79-11.43-19.05-11-19.79 11.43zM172.11 74.4l6.06 3.5 19.8-11.43-6.06-3.5-19.8 11.43zM171.95 45.49l19.92 11.5 30.12-17.39-19.91-11.5-30.13 17.39zM227.19 42.6l-30.12 17.39 6.06 3.5 30.12-17.39-6.06-3.5z"/\x3e\x3cpath class\x3d"cls-5" d\x3d"M147 59.9l19.91 11.5 19.8-11.43-19.92-11.5L147 59.9z"/\x3e\x3cpath class\x3d"cls-6" d\x3d"M148.57 30.99l18.18 10.5 29.26-16.89-18.18-10.5-29.26 16.89zM122.75 45.9l18.18 10.5 18.94-10.93-18.19-10.5-18.93 10.93zM172.98 74.9l5.19 3 18.94-10.93-5.2-3-18.93 10.93zM173.68 45.49l18.19 10.5 29.26-16.89-18.19-10.5-29.26 16.89zM228.06 43.1l-29.27 16.89 5.2 3 29.26-16.89-5.19-3z"/\x3e\x3cpath class\x3d"cls-8" d\x3d"M166.05 70.9l-18.19-10.5 18.94-10.93 18.18 10.5-18.93 10.93z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M289.21 148.61a.52.52 0 01-.25-.07l-66.21-38.23a.49.49 0 010-.86l65.79-38a.59.59 0 01.25-.07.52.52 0 01.25.07l66.21 38.23a.49.49 0 010 .86l-65.79 38a.59.59 0 01-.25.07z"/\x3e\x3cpath class\x3d"cls-2" d\x3d"M288.79 71.89L355 110.12l-65.79 38L223 109.88l65.79-38m0-1a1 1 0 00-.5.14L222.5 109a1 1 0 000 1.74L288.71 149a1 1 0 00.5.14 1 1 0 00.5-.14l65.79-38a1 1 0 000-1.74L289.29 71a1 1 0 00-.5-.14z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M289.17 142.4a.47.47 0 01-.25-.07l-55.42-32a.49.49 0 010-.86l55.08-31.8a.43.43 0 01.25-.07.47.47 0 01.25.07l55.42 32a.49.49 0 010 .86l-55.08 31.8a.43.43 0 01-.25.07z"/\x3e\x3cpath class\x3d"cls-7" d\x3d"M288.83 78.1l55.42 32-55.08 31.8-55.42-32 55.08-31.8m0-1a1 1 0 00-.5.13L233.25 109a1 1 0 000 1.74l55.42 32a1 1 0 00.5.13 1 1 0 00.5-.13L344.75 111a1 1 0 000-1.74l-55.42-32a1 1 0 00-.5-.13z"/\x3e\x3cpath class\x3d"cls-4" d\x3d"M258.7 95.49l19.06 11 30.12-17.39-19.05-11-30.13 17.39zM233.75 109.9l19.05 11 19.79-11.43-19.05-11-19.79 11.43zM283.11 138.4l6.06 3.5 19.8-11.43-6.07-3.5-19.79 11.43zM282.95 109.49l19.92 11.5 30.12-17.39-19.91-11.5-30.13 17.39zM338.19 106.6l-30.12 17.39 6.06 3.5 30.12-17.39-6.06-3.5z"/\x3e\x3cpath class\x3d"cls-5" d\x3d"M258 123.9l19.92 11.5 19.79-11.43-19.92-11.5L258 123.9z"/\x3e\x3cpath class\x3d"cls-6" d\x3d"M259.57 94.99l18.18 10.5 29.26-16.89-18.18-10.5-29.26 16.89zM233.75 109.9l18.18 10.5 18.94-10.93-18.19-10.5-18.93 10.93zM283.98 138.9l5.19 3 18.94-10.93-5.2-3-18.93 10.93zM284.68 109.49l18.19 10.5 29.26-16.89-18.19-10.5-29.26 16.89zM339.06 107.1l-29.26 16.89 5.19 3 29.26-16.89-5.19-3z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M277.05 134.9l-18.19-10.5 18.94-10.93 18.18 10.5-18.93 10.93z"/\x3e\x3cpath class\x3d"cls-7" d\x3d"M288.88 87.07l7.79 4.5 7.75-4.47-7.8-4.5-7.74 4.47zM279.41 92.54l7.79 4.5 6.89-3.98-7.8-4.5-6.88 3.98zM269.94 98l7.8 4.5 6.88-3.97-7.79-4.5-6.89 3.97zM341.65 108.6l-7.74 4.47 2.6 1.5 7.74-4.47-2.6-1.5zM324.44 118.54l2.6 1.5 6.89-3.98-2.6-1.5-6.89 3.98zM314.98 124l2.59 1.5 6.89-3.97-2.6-1.5-6.88 3.97zM294.02 81.1l-5.19-3-7.75 4.47 5.2 3 7.74-4.47zM283.7 87.06l-5.2-3-6.88 3.98 5.19 3 6.89-3.98zM274.23 92.53l-5.2-3-6.88 3.97 5.19 3 6.89-3.97zM233.75 109.9l15.59 9 16.35-9.44-15.59-9-16.35 9.44zM286.57 140.4l2.6 1.5 16.35-9.44-2.59-1.5-16.36 9.44zM289.86 109.5l12.99 7.5 12.05-6.95-12.99-7.5-12.05 6.95zM304.49 101.06l12.99 7.5 12.05-6.96-12.99-7.5-12.05 6.96z"/\x3e\x3cpath class\x3d"cls-8" d\x3d"M282.59 121.2a3.88 3.88 0 011.86 2h10.31L279 114.18v5.95a9.28 9.28 0 013.59 1.07zM273.09 121.19a9 9 0 013.52-1.07v-6l-16.32 9.42 11-.35a3.71 3.71 0 011.8-2z"/\x3e\x3cellipse class\x3d"cls-9" cx\x3d"277.85" cy\x3d"123.94" rx\x3d"2.47" ry\x3d"4.27" transform\x3d"rotate(-89.69 277.848 123.937)"/\x3e\x3cpath class\x3d"cls-8" d\x3d"M273.12 126.67a3.9 3.9 0 01-1.86-2l-11.34.36 16.08 9.26.63-6.55a9.09 9.09 0 01-3.51-1.07zM284.45 124.65a3.78 3.78 0 01-1.83 2 9.15 9.15 0 01-3.56 1.06l-.61 6.34 16.32-9.42z"/\x3e\x3cpath class\x3d"cls-3" d\x3d"M229.17 190.4a.47.47 0 01-.25-.07l-55.42-32a.49.49 0 010-.86l55.08-31.8a.43.43 0 01.25-.07.47.47 0 01.25.07l55.42 32a.49.49 0 010 .86l-55.08 31.8a.43.43 0 01-.25.07z"/\x3e\x3cpath class\x3d"cls-2" d\x3d"M228.83 126.1l55.42 32-55.08 31.8-55.42-32 55.08-31.8m0-1a1 1 0 00-.5.13L173.25 157a1 1 0 000 1.74l55.42 32a1 1 0 00.5.13 1 1 0 00.5-.13L284.75 159a1 1 0 000-1.74l-55.42-32a1 1 0 00-.5-.13z"/\x3e\x3cpath class\x3d"cls-4" d\x3d"M198.71 143.49l19.05 11 30.12-17.39-19.05-11-30.12 17.39zM173.75 157.9l19.05 11 19.79-11.43-19.05-11-19.79 11.43zM223.11 186.4l6.06 3.5 19.8-11.43-6.06-3.5-19.8 11.43zM222.95 157.49l19.92 11.5 30.12-17.39-19.91-11.5-30.13 17.39zM278.19 154.6l-30.12 17.39 6.06 3.5 30.12-17.39-6.06-3.5z"/\x3e\x3cpath class\x3d"cls-5" d\x3d"M198 171.9l19.91 11.5 19.8-11.43-19.92-11.5L198 171.9z"/\x3e\x3cpath class\x3d"cls-6" d\x3d"M199.57 142.99l18.18 10.5 29.26-16.89-18.18-10.5-29.26 16.89zM173.75 157.9l18.18 10.5 18.94-10.93-18.19-10.5-18.93 10.93zM223.98 186.9l5.19 3 18.94-10.93-5.2-3-18.93 10.93zM224.68 157.49l18.19 10.5 29.26-16.89-18.19-10.5-29.26 16.89zM279.06 155.1l-29.27 16.89 5.2 3 29.26-16.89-5.19-3z"/\x3e\x3cpath class\x3d"cls-8" d\x3d"M217.05 182.9l-18.19-10.5 18.94-10.93 18.18 10.5-18.93 10.93z"/\x3e\x3cpath class\x3d"cls-1" d\x3d"M132.68 85.94a30.38 30.38 0 011.32-7.35 39.56 39.56 0 013.68-8.38 40.18 40.18 0 015.45-7.37 29.46 29.46 0 016.68-5.4 17.25 17.25 0 015.6-2.16"/\x3e\x3cpath class\x3d"cls-2" d\x3d"M137.07 82.96l-.68-.74-3.62 3.34-3.07-3.86-.78.63 3.73 4.7 4.42-4.07zM153.15 60.13l-.83-.56 2.74-4.1-4.29-2.43.49-.87 5.23 2.96-3.34 5z"/\x3e\x3ctext class\x3d"replace-lyr-current-layer-svg" x\x3d"225" y\x3d"20" text-anchor\x3d"start"\x3e${i18n.replaceLayer.currentLayer}\x3c/text\x3e\x3ctext x\x3d"80" y\x3d"140" text-anchor\x3d"middle"\x3e${i18n.replaceLayer.replacementLayer}\x3c/text\x3e\x3c/svg\x3e\r\n',
"url:arcgisonline/pages/dijit/ReplaceLayer/templates/ReplaceSceneLayer.html":'\x3cdiv class\x3d"stepper js-overlay-body grid-container"\x3e\r\n  \x3cdiv class\x3d"stepper__header js-stepper-headers"\x3e\r\n    \x3cdiv class\x3d"stepper__header-steps"\x3e\r\n      \x3cbutton\r\n        data-step-num\x3d"1"\r\n        title\x3d"${i18n.replaceLayer.selectReplacementLayer}"\r\n        class\x3d"btn-link btn-link-darker-gray stepper__step-item text-left font-size-1 stepper__step-item--active js-step-link js-step-header-1"\r\n      \x3e\r\n        ${i18n.replaceLayer.selectReplacementLayer}\r\n      \x3c/button\x3e\r\n      \x3cbutton\r\n        data-step-num\x3d"2"\r\n        title\x3d"${i18n.replaceLayer.replaceSceneLayer.archive}"\r\n        class\x3d"btn-link btn-link-darker-gray stepper__step-item text-left font-size-1 js-step-link js-step-header-2"\r\n      \x3e\r\n        ${i18n.replaceLayer.replaceSceneLayer.archive}\r\n      \x3c/button\x3e\r\n      \x3cbutton\r\n        data-step-num\x3d"3"\r\n        title\x3d"${i18n.replaceLayer.previewStyles}"\r\n        class\x3d"btn-link btn-link-darker-gray stepper__step-item text-left font-size-1 js-step-link js-step-header-3 js-replace-lyr-show-preview-step"\r\n      \x3e\r\n        ${i18n.replaceLayer.previewStyles}\r\n      \x3c/button\x3e\r\n      \x3cbutton\r\n        data-step-num\x3d"4"\r\n        title\x3d"${i18n.replaceLayer.summary}"\r\n        class\x3d"btn-link btn-link-darker-gray stepper__step-item text-left font-size-1 js-step-link js-step-header-4"\r\n      \x3e\r\n        ${i18n.replaceLayer.summary}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"stepper__step-bars js-step-bars"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"flex-1 stepper__search-container"\x3e\x3cdiv class\x3d"js-search-input"\x3e\x3c/div\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"stepper__content"\x3e\r\n    \x3cbutton data-step-num\x3d"1" class\x3d"btn-link btn-link-darker-gray stepper__title js-stepper-title"\x3e\x3c/button\x3e\r\n    \x3cdiv class\x3d"js-step-1 leader-half hide"\x3e\r\n      \x3cdiv\x3e\r\n        \x3ch4 class\x3d"font-size--1 trailer-half"\x3e${i18n.replaceLayer.replacementLayer}\x3c/h4\x3e\r\n        \x3cdiv class\x3d"pre-select"\x3e\r\n          \x3cdiv class\x3d"font-size-2 text-darker-gray trailer-1"\x3e${i18n.replaceLayer.noLayerSelected}\x3c/div\x3e\r\n          \x3cbutton class\x3d"btn btn-clear js-replace-layer-select trailer-2"\x3e${i18n.replaceLayer.selectLayer}\x3c/button\x3e\r\n          \x3cdiv\x3e${i18n.replaceLayer.requirements}\x3c/div\x3e\r\n          \x3chr class\x3d"leader-0 trailer-half" /\x3e\r\n          \x3cdiv\x3e\r\n            \x3cspan\x3e${i18n.replaceLayer.layersShouldHaveSame}\x3c/span\x3e\r\n            \x3cul\x3e\r\n              \x3cli\x3e${i18n.replaceLayer.replaceSceneLayer.coordinateSystem}\x3c/li\x3e\r\n              \x3cli\x3e${i18n.replaceLayer.layerShouldHaveSameComposition}\x3c/li\x3e\r\n              \x3cli\x3e${i18n.replaceLayer.replaceSceneLayer.layerTypesShouldMatch}\x3c/li\x3e\r\n            \x3c/ul\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"post-select hide"\x3e\r\n          \x3cdiv class\x3d"selected-card trailer-2"\x3e\r\n            \x3cdiv class\x3d"stepper__content-pane js-replace-lyr-selected-layer"\x3e\r\n              \x3ch3 class\x3d"js-replace-lyr-selected-lyr-name trailer-quarter"\x3e\x3c/h3\x3e\r\n              \x3ch5 class\x3d"trailer-half font-size--2"\x3e\r\n                \x3cimg class\x3d"js-replace-lyr-selected-icon replace-lyr-item-type-icon" /\x3e\r\n                \x3cspan class\x3d"js-replace-lyr-selected-type"\x3e\x3c/span\x3e ${i18n.replaceLayer.by}\r\n                \x3ca class\x3d"js-replace-lyr-selected-owner" target\x3d"_blank"\x3e\x3c/a\x3e\r\n              \x3c/h5\x3e\r\n              \x3cdiv class\x3d"replace-lyr-change-lyr-container"\x3e\r\n                \x3cbutton class\x3d"font-size--3 btn-link replace-lyr-change-lyr-btn js-replace-lyr-change-lyr"\x3e\r\n                  ${i18n.replaceLayer.changeLayer}\r\n                \x3c/button\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv\r\n              data-dojo-attach-point\x3d"_layerError"\r\n              class\x3d"input-error-message input-error-message-right js-replace-lyr-error replace-lyr-error"\r\n            \x3e\r\n              ${i18n.replaceLayer.error}\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"stepper__content-pane-compact font-size--1 js-replace-lyr-check-styles flex-center"\x3e\r\n            \x3cspan class\x3d"replace-lyr-loader margin-right-quarter"\x3e\x3c/span\x3e ${i18n.replaceLayer.checkIfCompatible}\r\n          \x3c/div\x3e\r\n          \x3cdiv\r\n            class\x3d"stepper__content-pane-compact stepper__alert-success font-size--1 js-replace-lyr-check-styles-success flex-center hide"\r\n          \x3e\r\n            \x3cspan class\x3d"replace-lyr-success-icon"\x3e${icons.inline.check-circle-f.16}\x3c/span\x3e\r\n            ${i18n.replaceLayer.stylesAreCompatible}\r\n          \x3c/div\x3e\r\n          \x3cdiv\r\n            class\x3d"stepper__content-pane-compact stepper__alert-warning font-size--1 js-replace-lyr-check-styles-warning flex-center hide"\r\n          \x3e\r\n            \x3cspan class\x3d"replace-lyr-warning-icon margin-right-half"\r\n              \x3e${icons.inline.exclamation-mark-triangle-f.16}\x3c/span\r\n            \x3e\r\n            \x3cdiv\x3e${i18n.replaceLayer.stylesAreIncompatible}\x3cbr /\x3e\x3cspan class\x3d"js-replace-lyr-show-preview-step"\x3e${i18n.replaceLayer.reviewDifferences}\x3c/span\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cbutton data-step-num\x3d"2" class\x3d"btn-link btn-link-darker-gray stepper__title js-stepper-title"\x3e\x3c/button\x3e\r\n    \x3cdiv class\x3d"js-step-2 leader-half hide"\x3e\r\n      \x3c!-- Radio --\x3e\r\n      \x3cdiv class\x3d"stepper__radio-item"\x3e\r\n        \x3clabel class\x3d"flex trailer-0 stepper__radio-title"\x3e\r\n          \x3c!-- Radio \'checked\' needed for summary --\x3e\r\n          \x3cinput\r\n            name\x3d"js-replace-lyr-archive-option-radio"\r\n            type\x3d"radio"\r\n            role\x3d"radio"\r\n            value\x3d"archive"\r\n            checked\r\n            class\x3d"hide"\r\n          /\x3e\r\n          \x3cspan class\x3d"margin-left-1 font-size-1 stepper__method-title"\x3e${i18n.replaceLayer.archiveAs}\x3c/span\x3e\r\n\r\n          \x3cdiv class\x3d"js-replace-lyr-edit-container replace-lyr-edit-container margin-left-half input-group hide"\x3e\r\n            \x3cinput\r\n              class\x3d"js-replace-lyr-edit-name input-group-input"\r\n              onfocus\x3d"this.select();"\r\n              type\x3d"text"\r\n              placeholder\x3d"${i18n.replaceLayer.layerName}"\r\n              maxlength\x3d"120"\r\n            /\x3e\r\n            \x3cdiv class\x3d"js-replace-name-input-error input-error-message"\x3e\r\n              ${i18n.addItemFrm.errors.invalidServiceTitle.message}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"js-replace-name-available-error input-error-message"\x3e\r\n              ${i18n.addItemFrm.errors.serviceNameExists.message}\r\n            \x3c/div\x3e\r\n            \x3cspan class\x3d"input-group-button"\x3e\r\n              \x3cbutton class\x3d"js-replace-lyr-edit-save btn"\x3e${i18n.replaceLayer.save}\x3c/button\x3e\r\n            \x3c/span\x3e\r\n          \x3c/div\x3e\r\n\r\n          \x3cbutton class\x3d"js-replace-lyr-current-arch-btn margin-left-half btn-link"\x3e\r\n            \x3cspan class\x3d"js-replace-lyr-current-arch-name"\x3e\x3c/span\x3e ${icons.inline.edit.16}\r\n          \x3c/button\x3e\r\n        \x3c/label\x3e\r\n\r\n        \x3cdiv class\x3d"stepper__radio-desc leader-quarter"\x3e${i18n.replaceLayer.contentWillBeArchived}\x3c/div\x3e\r\n        \x3c!-- below the divider - list of replacement rules and localized svg--\x3e\r\n        \x3chr class\x3d"margin-left-2 leader-half trailer-half" /\x3e\r\n        \x3cdiv class\x3d"margin-left-1 stepper__radio-details flex"\x3e\r\n          \x3cdiv class\x3d"stepper__radio-detail margin-right-2"\x3e\r\n            \x3cul class\x3d"font-size--2"\x3e\r\n              \x3cli\x3e${i18n.replaceLayer.replaceSceneLayer.retainsCurrentLayer}\x3c/li\x3e\r\n              \x3cli\x3e${i18n.replaceLayer.archiveCurrentLayer}\x3c/li\x3e\r\n              \x3cli\x3e${i18n.replaceLayer.replacementLayerIsDeleted}\x3c/li\x3e\r\n            \x3c/ul\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"js-archive_svg stepper__radio-detail"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n\r\n      \x3cdiv class\x3d"stepper__content-pane stepper__content-pane-flex leader-1"\x3e\r\n        \x3cdiv class\x3d"flex-1"\x3e\r\n          \x3cspan class\x3d"margin-left-1 font-size-1 stepper__method-title"\x3e${i18n.replaceLayer.replaceItemInfo}\x3c/span\x3e\r\n          \x3cdiv class\x3d"margin-left-1 font-size--2 leader-quarter"\x3e${i18n.replaceLayer.willUpdateItemInfo}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3clabel class\x3d"toggle-switch replace-lyr-switch modifier-class"\x3e\r\n          \x3cinput type\x3d"checkbox" class\x3d"js-replace-lyr-replace-item-switch toggle-switch-input" /\x3e\r\n          \x3cspan class\x3d"toggle-switch-track margin-right-1"\x3e\x3c/span\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cbutton data-step-num\x3d"3" class\x3d"btn-link btn-link-darker-gray stepper__title js-stepper-title"\x3e\x3c/button\x3e\r\n    \x3cdiv class\x3d"js-step-3 grid-container stepper__content-container flex-column leader-half hide"\x3e\r\n      \x3cdiv class\x3d"leader-1 trailer-half"\x3e${i18n.replaceLayer.stylePreview}\x3c/div\x3e\r\n      \x3cdiv class\x3d"trailer-1 js-replace-lyr-single-style flex hide"\x3e\r\n        \x3cspan\x3e${i18n.replaceLayer.otherStyles}\x3c/span\x3e \x3cb class\x3d"js-replace-lyr-style-layer margin-left-half"\x3e\x3c/b\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"trailer-1 js-replace-lyr-multiple-styles replace-lyr-multiple-styles flex"\x3e\r\n        \x3c/span\x3e${i18n.replaceLayer.otherStyles}\x3c/span\x3e\r\n        \x3cselect class\x3d"js-replace-lyr-style-layer-dropdown margin-left-half"\x3e\x3c/select\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"stepper__content-pane flex-1"\x3e\x3ciframe class\x3d"js-replace-lyr-preview-container replace-lyr-preview-container"\x3e\x3c/iframe\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cbutton data-step-num\x3d"4" class\x3d"btn-link btn-link-darker-gray stepper__title js-stepper-title"\x3e\x3c/button\x3e\r\n    \x3cdiv class\x3d"js-step-4 leader-half hide"\x3e\r\n      \x3cdiv class\x3d"selected-card trailer-1"\x3e\r\n        \x3cdiv class\x3d"stepper__content-pane"\x3e\r\n          \x3cdiv class\x3d"font-size--3 trailer-half"\x3e${i18n.replaceLayer.currentLayer}\x3c/div\x3e\r\n          \x3ch3 class\x3d"js-replace-lyr-current-lyr-name trailer-quarter"\x3e\x3c/h3\x3e\r\n          \x3ch5 class\x3d"trailer-half font-size--2"\x3e\r\n            \x3cimg class\x3d"js-replace-lyr-current-icon replace-lyr-item-type-icon" /\x3e\r\n            \x3cspan class\x3d"js-replace-lyr-current-type"\x3e\x3c/span\x3e ${i18n.replaceLayer.by} \x3ca class\x3d"js-replace-lyr-current-owner" target\x3d"_blank"\x3e\x3c/a\x3e\r\n          \x3c/h5\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"selected-card trailer-1"\x3e\r\n        \x3cdiv class\x3d"stepper__content-pane"\x3e\r\n          \x3cdiv class\x3d"font-size--3 trailer-half"\x3e${i18n.replaceLayer.replacementLayer}\x3c/div\x3e\r\n          \x3ch3 class\x3d"js-replace-lyr-selected-lyr-name trailer-quarter"\x3e\x3c/h3\x3e\r\n          \x3ch5 class\x3d"font-size--2"\x3e\r\n            \x3cimg class\x3d"js-replace-lyr-selected-icon replace-lyr-item-type-icon" /\x3e\r\n            \x3cspan class\x3d"js-replace-lyr-selected-type"\x3e\x3c/span\x3e ${i18n.replaceLayer.by}\r\n            \x3ca class\x3d"js-replace-lyr-selected-owner" target\x3d"_blank"\x3e\x3c/a\x3e\r\n          \x3c/h5\x3e\r\n          \x3chr class\x3d"leader-1 trailer-1" /\x3e\r\n          \x3cdiv class\x3d"replace-lyr-sub-container flex-center"\x3e\r\n            \x3cdiv class\x3d"js-replace-lyr-check-styles-warning flex-center font-size--1 hide"\x3e\r\n              \x3cspan class\x3d"replace-lyr-warning-icon"\x3e${icons.inline.exclamation-mark-triangle-f.16}\x3c/span\x3e\r\n              ${i18n.replaceLayer.stylesAreIncompatible}\r\n            \x3c/div\x3e\r\n            \x3cbutton class\x3d"font-size--3 btn-link js-replace-lyr-change-lyr-summary text-right flex-1"\x3e\r\n              ${i18n.replaceLayer.selectReplacementLayer}\r\n            \x3c/button\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"selected-card trailer-1"\x3e\r\n        \x3cdiv class\x3d"stepper__content-pane"\x3e\r\n          \x3cdiv class\x3d"font-size--3 trailer-half"\x3e${i18n.replaceLayer.replaceSceneLayer.archiveDetails}\x3c/div\x3e\r\n          \x3cul\x3e\r\n            \x3cli class\x3d"js-replace-lyr-archive-option hide"\x3e\r\n              ${i18n.replaceLayer.archiveAs} \x3cb class\x3d"js-replace-lyr-new-layer-name"\x3e\x3c/b\x3e\r\n            \x3c/li\x3e\r\n            \x3cli class\x3d"js-replace-lyr-replace-option hide"\x3e${i18n.replaceLayer.useReplacementAsArchive}\x3c/li\x3e\r\n            \x3cli class\x3d"js-replace-lyr-replace-item-information hide"\x3e${i18n.replaceLayer.replaceItemInfo}\x3c/li\x3e\r\n          \x3c/ul\x3e\r\n          \x3chr class\x3d"leader-1 trailer-1" /\x3e\r\n          \x3cdiv class\x3d"replace-lyr-sub-container"\x3e\r\n            \x3cbutton class\x3d"font-size--3 btn-link replace-lyr-change-lyr-btn js-replace-lyr-change-option"\x3e\r\n              ${i18n.replaceLayer.replaceSceneLayer.updateArchive}\r\n            \x3c/button\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"stepper__content-pane-compact font-size--1 js-replace-lyr-availabilty-notice flex flex-space-between hide"\x3e\r\n        \x3cspan\x3e${icons.inline.lightbulb.24} ${i18n.replaceLayer.replacementLayerAvailabilityNotice}\x3c/span\x3e\r\n        \x3cbutton class\x3d"btn-link btn-link-off-black js-replace-lyr-availabilty-notice-close replace-lyr-availabilty-notice-close"\x3e${icons.inline.x.16}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cbutton class\x3d"btn stepper__next leader-half js-stepper-next-btn"\x3e${i18n.myOrganization.inviteMembers.next}\x3c/button\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/item/widgets/AdvancedOfflineOptions/templates/AdvancedOfflineOptions.html":'\x3cdiv class\x3d"advanced-offline-options grid-container js-accordion"\x3e\r\n  \x3csection class\x3d"accordion-section is-active"\x3e\r\n    \x3ch4 class\x3d"accordion-title font-size-1" tabindex\x3d"0"\x3e\r\n      \x3cspan class\x3d"avenir-demi"\x3e${i18n.itemProperties.advancedOptions.featuresAttachmentsTitle}\x3c/span\x3e\r\n      \x3cdiv class\x3d"js-attachments-info"\x3e\x3c/div\x3e\r\n    \x3c/h4\x3e\r\n    \x3cdiv class\x3d"accordion-content"\x3e\r\n      \x3cdiv\x3e${i18n.itemProperties.advancedOptions.featuresAttachmentsDescription}\x3c/div\x3e\r\n      \x3cdiv class\x3d"trailer-half leader-1 avenir-demi"\x3e${i18n.itemProperties.advancedOptions.editableFeatures}\x3c/div\x3e\r\n      \x3cdiv class\x3d"font-size--1 margin-left-1"\x3e\r\n        \x3cdiv class\x3d"advanced-offline-options__option-row"\x3e\r\n          \x3cinput\r\n            type\x3d"radio"\r\n            name\x3d"editableFeatures"\r\n            value\x3d"featuresAndAttachments"\r\n            data-sync\x3d"syncFeaturesAndAttachments"\r\n            class\x3d"js-editable-features js-edit-features-and-attachments"\r\n          /\x3e\r\n          ${i18n.itemProperties.advancedOptions.downloadFeaturesAndAttachments}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"advanced-offline-options__option-row"\x3e\r\n          \x3cinput\r\n            type\x3d"radio"\r\n            name\x3d"editableFeatures"\r\n            value\x3d"features"\r\n            data-sync\x3d"syncFeaturesUploadAttachments"\r\n            class\x3d"js-editable-features js-edit-features-only"\r\n          /\x3e\r\n          ${i18n.itemProperties.advancedOptions.downloadFeaturesOnly}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"advanced-offline-options__option-row"\x3e\r\n          \x3cinput\r\n            type\x3d"radio"\r\n            name\x3d"editableFeatures"\r\n            value\x3d"none"\r\n            data-sync\x3d"uploadFeaturesAndAttachments"\r\n            class\x3d"js-editable-features js-edit-none"\r\n          /\x3e\r\n          ${i18n.itemProperties.advancedOptions.neverGetUpdates}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"leader-1 trailer-half avenir-demi"\x3e${i18n.itemProperties.advancedOptions.readonlyFeatures}\x3c/div\x3e\r\n      \x3cdiv class\x3d"font-size--1 margin-left-1"\x3e\r\n        \x3cdiv class\x3d"advanced-offline-options__option-row"\x3e\r\n          \x3cinput\r\n            type\x3d"radio"\r\n            name\x3d"readonlyFeatures"\r\n            value\x3d"true"\r\n            class\x3d"js-readonly-features js-readonly-features-and-attachments"\r\n          /\x3e\r\n          ${i18n.itemProperties.advancedOptions.downloadFeaturesAndAttachments}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"advanced-offline-options__option-row"\x3e\r\n          \x3cinput\r\n            type\x3d"radio"\r\n            name\x3d"readonlyFeatures"\r\n            value\x3d"false"\r\n            class\x3d"js-readonly-features js-readonly-features-only"\r\n          /\x3e\r\n          ${i18n.itemProperties.advancedOptions.readonlyFeaturesOnly}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"advanced-offline-options__foot-note font-size--2 leader-1"\x3e\r\n        ${i18n.itemProperties.advancedOptions.featuresAttachmentsFootNote}\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/section\x3e\r\n  \x3csection class\x3d"accordion-section is-active leader-1"\x3e\r\n    \x3ch4 class\x3d"accordion-title font-size-1" tabindex\x3d"0"\x3e\r\n      \x3cspan class\x3d"avenir-demi"\x3e ${i18n.itemProperties.advancedOptions.tilePackageTitle}\x3c/span\x3e\r\n    \x3c/h4\x3e\r\n    \x3cdiv class\x3d"accordion-content"\x3e\r\n      \x3cdiv\x3e${i18n.itemProperties.advancedOptions.tilePackageDescription}\x3c/div\x3e\r\n      \x3cdiv class\x3d"font-size--1 leader-1"\x3e\r\n        \x3cdiv class\x3d"advanced-offline-options__option-row"\x3e\r\n          \x3cinput type\x3d"radio" name\x3d"useTilePackage" value\x3d"webmap" class\x3d"js-tile-option js-tile-webmap" /\x3e\r\n          ${i18n.itemProperties.advancedOptions.useBasemapInWebmap}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"advanced-offline-options__option-row flex"\x3e\r\n          \x3cinput type\x3d"radio" name\x3d"useTilePackage" value\x3d"mobile" class\x3d"js-tile-option js-tile-mobile" /\x3e\r\n          \x3cdiv\x3e\r\n            \x3cdiv\x3e${i18n.itemProperties.advancedOptions.useTilePackageOnMobile}\x3c/div\x3e\r\n            \x3cdiv\r\n              class\x3d"leader-half padding-left-2 hide advanced-offline-options__option-input-container js-file-name-container"\r\n            \x3e\r\n              \x3clabel class\x3d"trailer-0"\x3e\r\n                ${i18n.itemProperties.advancedOptions.packageFileName}\r\n                \x3cinput\r\n                  type\x3d"text"\r\n                  class\x3d"js-tile-mobile-file-name"\r\n                  placeholder\x3d"${i18n.itemProperties.advancedOptions.fileNamePlaceholder}"\r\n                /\x3e\r\n                \x3cdiv class\x3d"input-error-message js-tile-mobile-file-name-error"\x3e\x3c/div\x3e\r\n              \x3c/label\x3e\r\n              \x3cdiv class\x3d"font-size--2"\x3e${i18n.itemProperties.advancedOptions.enterTilePackageFileName}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"advanced-offline-options__option-row flex hide js-tile-org-container"\x3e\r\n          \x3cinput type\x3d"radio" name\x3d"useTilePackage" value\x3d"uploaded" class\x3d"js-tile-option js-tile-org" /\x3e\r\n          \x3cdiv\x3e\r\n            \x3cdiv\x3e${i18n.itemProperties.advancedOptions.useUploadedTilePackage}\x3c/div\x3e\r\n            \x3cdiv\r\n              class\x3d"hide leader-half padding-left-2 advanced-offline-options__option-input-container js-tile-search-container"\r\n            \x3e\r\n              \x3cdiv class\x3d"flex flex-align-center"\x3e\r\n                \x3cbutton class\x3d"btn btn-primary js-browse-package-btn margin-right-1"\x3e${i18n.common.browse}\x3c/button\x3e\r\n                \x3cdiv class\x3d"js-selected-package"\x3e${i18n.itemProperties.advancedOptions.noTilePackageSelected}\x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"advanced-offline-options__foot-note font-size--2 leader-1"\x3e\r\n        ${i18n.itemProperties.advancedOptions.tilePackageFootnote}\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/section\x3e\r\n  \x3csection class\x3d"accordion-section is-active leader-1 hide js-capabilities-section"\x3e\r\n    \x3ch4 class\x3d"accordion-title font-size-1" tabindex\x3d"0"\x3e\r\n      \x3cspan class\x3d"avenir-demi"\x3e ${i18n.itemProperties.advancedOptions.offlineCapabilities}\x3c/span\x3e\r\n      \x3cdiv class\x3d"js-capabilities-info"\x3e\x3c/div\x3e\r\n    \x3c/h4\x3e\r\n    \x3cdiv class\x3d"accordion-content"\x3e\r\n      \x3cdiv\x3e${i18n.itemProperties.advancedOptions.offlineCapabilitiesSubtitle}\x3c/div\x3e\r\n      \x3cdiv class\x3d"leader-1 avenir-demi"\x3e${i18n.itemProperties.advancedOptions.utilNetwork}\x3c/div\x3e\r\n      \x3cp class\x3d"trailer-half"\x3e${i18n.itemProperties.advancedOptions.utilNetworkDesc}\x3c/p\x3e\r\n      \x3cdiv class\x3d"font-size--1 margin-left-1"\x3e\r\n        \x3cdiv class\x3d"advanced-offline-options__option-row"\x3e\r\n          \x3cinput\r\n            type\x3d"radio"\r\n            name\x3d"utilNetworkOptions"\r\n            value\x3d"12"\r\n            class\x3d"js-util-network-option js-network-simple-features"\r\n          /\x3e\r\n          \x3cdiv class\x3d"flex flex-align-center"\x3e\r\n            ${i18n.itemProperties.advancedOptions.downloadSimple}\r\n            \x3cdiv class\x3d"js-util-simple-info"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"advanced-offline-options__option-row"\x3e\r\n          \x3cinput type\x3d"radio" name\x3d"utilNetworkOptions" value\x3d"156" class\x3d"js-util-network-option js-network-editing" /\x3e\r\n          \x3cdiv class\x3d"flex flex-align-center"\x3e\r\n            ${i18n.itemProperties.advancedOptions.editFeatures}\r\n            \x3cdiv class\x3d"js-util-editing-info"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"advanced-offline-options__option-row"\x3e\r\n          \x3cinput type\x3d"radio" name\x3d"utilNetworkOptions" value\x3d"1036" class\x3d"js-util-network-option js-network-tracing" /\x3e\r\n          \x3cdiv class\x3d"flex flex-align-center"\x3e\r\n            ${i18n.itemProperties.advancedOptions.traceAndEdit}\r\n            \x3cdiv class\x3d"js-util-tracing-info"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"advanced-offline-options__foot-note font-size--2 leader-1"\x3e\r\n        ${i18n.itemProperties.advancedOptions.capabilitiesFootnote}\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/section\x3e\r\n  \x3cdiv class\x3d"position-relative js-update-loader-container advanced-offline-options__loader-container"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_optionsLoader" class\x3d"loader js-update-loader overlay-white fullscreen"\x3e\r\n      \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"loader-text"\x3e${i18n.itemProperties.updatingItemLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3ca class\x3d"js-learn-more" target\x3d"_blank"\x3e${i18n.itemProperties.advancedOptions.learnMore}\x3c/a\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/item/widgets/typeOptions/mapOptions/domainUpdate.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"font-size--1" data-dojo-attach-point\x3d"updateDomainDesc"\x3e${i18n.itemProperties.updateDomainDesc}\x3c/div\x3e\r\n  \x3cdiv class\x3d"leader-half" data-dojo-attach-point\x3d"updateDomainContainer"\x3e\r\n    \x3cdiv class\x3d"align-top"\x3e\r\n      \x3clabel for\x3d"domain-update-select"\x3e\r\n        ${i18n.common.find}\x3cbr\x3e\r\n        \x3cselect class\x3d"select-full" data-dojo-attach-point\x3d"domainSelect" id\x3d"domain-update-select"\x3e\x3c/select\x3e\r\n      \x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"align-top"\x3e\r\n      \x3clabel for\x3d"domain-replace-input"\x3e\r\n        ${i18n.common.replace}\x3cbr\x3e\r\n        \x3cinput id\x3d"domain-replace-input" data-dojo-attach-point\x3d"domainReplace"\x3e\r\n        \x3cdiv class\x3d"hide input-error-message" data-dojo-attach-point\x3d"domainReplaceError"\x3e\r\n          ${i18n.itemProperties.siteReferenceInvalid}\r\n        \x3c/div\x3e\r\n      \x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"inline-block align-top"\x3e\r\n      \x3cbutton class\x3d"btn btn-clear btn-small" data-dojo-attach-point\x3d"replaceDomainBtn" disabled\x3e${i18n.common.replace}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"hide leader-half" data-dojo-attach-point\x3d"replaceDomainLoading"\x3e\r\n    \x3cspan class\x3d"icon-ui-loading-indicator icon-ui-flush icon-ui-spinning" aria-label\x3d"${i18n.itemProperties.updatingDomains}"\x3e\x3c/span\x3e\r\n    ${i18n.itemProperties.updatingDomains}\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"hide leader-half" data-dojo-attach-point\x3d"replaceDomainFailure"\x3e\r\n    \x3cspan class\x3d"icon-ui-error icon-ui-red"\x3e\x3c/span\x3e\r\n    \x3cspan data-dojo-attach-point\x3d"replaceDomainFailureMessage"\x3e\x3c/span\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"hide leader-half" data-dojo-attach-point\x3d"replaceDomainSuccess"\x3e\r\n    \x3cspan class\x3d"icon-ui-check-mark text-dark-green"\x3e\x3c/span\x3e\r\n    \x3cspan data-dojo-attach-point\x3d"replaceDomainSuccessMessage"\x3e\x3c/span\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"hide leader-half" data-dojo-attach-point\x3d"layerDetailsContainer"\x3e\r\n    ${i18n.itemProperties.layersWithDomain}\r\n    \x3cdiv class\x3d"font-size--2" data-dojo-attach-point\x3d"layerDetails"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"clearfix leader-1 esriFloatTrailing right"\x3e\r\n    \x3cbutton class\x3d"btn btn-blue" data-dojo-attach-point\x3d"doneBtn"\x3e${i18n.common.done}\x3c/button\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/item/widgets/typeOptions/mapOptions/httpsResultIssue.html":'\x3cdiv class\x3d"margin-left-1 leader-half"\x3e\r\n  ${title}\x3cbr\x3e\r\n  \x3cspan class\x3d"font-size--3"\x3e${message}\x3c/span\x3e\r\n\x3c/div\x3e',"url:arcgisonline/pages/item/widgets/typeOptions/mapOptions/httpsResultUpdated.html":'\x3cdiv class\x3d"margin-left-1 leader-half"\x3e\r\n  ${title}\x3cbr\x3e\r\n  \x3cspan class\x3d"font-size--3"\x3e${message}\x3c/span\x3e\r\n\x3c/div\x3e',"url:arcgisonline/pages/item/widgets/typeOptions/mapOptions/httpsResultUnchanged.html":'\x3cdiv class\x3d"margin-left-1 leader-half"\x3e\r\n  ${title}\x3cbr\x3e\r\n  \x3cspan class\x3d"font-size--3"\x3e${message}\x3c/span\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/pages/item/widgets/typeOptions/mapOptions/httpsUpdate.html":'\x3cdiv class\x3d"clearfix"\x3e\r\n  \x3cdiv class\x3d"leader-half font-size--1" data-dojo-attach-point\x3d"updateHttpsDesc"\x3e${i18n.itemProperties.updateLayersToHTTPSDesc}\x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"hide leader-half" data-dojo-attach-point\x3d"updateHttpsLoading"\x3e\r\n    \x3cspan class\x3d"icon-ui-loading-indicator icon-ui-flush icon-ui-spinning" aria-label\x3d"${i18n.itemProperties.updatingLayersToHTTPS}"\x3e\x3c/span\x3e\r\n    ${i18n.itemProperties.updatingLayersToHTTPS}\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"hide update-https-results" data-dojo-attach-point\x3d"updateHttpsResults"\x3e\r\n    \x3cdiv class\x3d"leader-half" data-dojo-attach-point\x3d"layersWithIssues"\x3e\r\n      \x3cdiv class\x3d"update-layer-section inline-block"\x3e\r\n        \x3cspan class\x3d"icon-ui-right update-section-toggle" data-dojo-attach-point\x3d"toggleIssues"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"icon-ui-error icon-ui-red"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"text-red" data-dojo-attach-point\x3d"issuesTitle"\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"hide leader-half margin-left-1" data-dojo-attach-point\x3d"issues"\x3e\x3c!-- write out issues here --\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"leader-half" data-dojo-attach-point\x3d"layersUpdated"\x3e\r\n      \x3cdiv class\x3d"update-layer-section inline-block"\x3e\r\n        \x3cspan class\x3d"icon-ui-right update-section-toggle" data-dojo-attach-point\x3d"toggleUpdated"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"icon-ui-check-mark text-dark-green"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"updatedTitle"\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"hide leader-half margin-left-1" data-dojo-attach-point\x3d"updated"\x3e\x3c!-- write out updated here --\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"leader-half" data-dojo-attach-point\x3d"layersUnchanged"\x3e\r\n      \x3cdiv class\x3d"update-layer-section inline-block"\x3e\r\n        \x3cspan class\x3d"icon-ui-right update-section-toggle" data-dojo-attach-point\x3d"toggleUnchanged"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"icon-ui-check-mark text-dark-green"\x3e\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"unchangedTitle"\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"hide leader-half margin-left-1" data-dojo-attach-point\x3d"unchanged"\x3e\x3c!-- write out unchanged here --\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"hide leader-half" data-dojo-attach-point\x3d"noChangesMade"\x3e\r\n    \x3cspan class\x3d"icon-ui-check-mark text-dark-green"\x3e\x3c/span\x3e\r\n    ${i18n.itemProperties.noLayersToUpdateHTTPS}\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"hide leader-half" data-dojo-attach-point\x3d"unexpectedError"\x3e${i18n.itemProperties.errorUpdateHTTPS}\x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"leader-1 inline-block esriFloatTrailing right"\x3e\r\n    \x3cbutton class\x3d"btn btn-blue" data-dojo-attach-point\x3d"okBtn"\x3e${i18n.itemProperties.updateLayers}\x3c/button\x3e\r\n    \x3cbutton class\x3d"hide btn btn-blue" data-dojo-attach-point\x3d"doneBtn"\x3e${i18n.common.done}\x3c/button\x3e\r\n    \x3cbutton class\x3d"btn btn-clear" data-dojo-attach-point\x3d"cancelBtn"\x3e${i18n.common.cancel}\x3c/button\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/ItemShareSummary/ItemShareSummary.html":'\x3cdiv class\x3d"share-summary ${directionClass} ${responsiveClass}"\x3e\r\n  \x3cbutton class\x3d"js-share-button share-summary__button flex flex-center flex-0" id\x3d"${uid}"\x3e\r\n    \x3cspan class\x3d"js-icon share-summary__level flex flex-center"\x3e${!levelIcon}\x3c/span\x3e\r\n    \x3cspan class\x3d"js-sharing-plus-icon share-summary__plus"\x3e${!icons.plus.16}\x3c/span\x3e\r\n    \x3cspan class\x3d"share-summary__group share-summary__group--unknown"\x3e\r\n      ${!icons.users.16}\r\n    \x3c/span\x3e\r\n  \x3c/button\x3e\r\n  \x3ccalcite-tooltip class\x3d"js-share-summary-tooltip" reference-element\x3d"${uid}"\x3e\r\n    \x3cspan class\x3d"js-tooltip-content share-tooltip-text avenir-regular font-size--3 trailer-0 leader-0"\x3e${levelTooltip}\x3c/span\x3e\r\n  \x3c/calcite-tooltip\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/Card.html":'\x3cdiv class\x3d"js-card card ${selectCardClass} ${selectedClass} ${removedClass} ${imageClass} block trailer-1 position-relative" data-id\x3d"${item.id}"\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"dragHandle" class\x3d"card-drag-handle flex-center tooltip" tabindex\x3d"0" title\x3d"${i18n.orgHomePageSetup.content.reorder}" aria-label\x3d"${i18n.orgHomePageSetup.content.reorder}"\x3e\r\n    ${!icons.drag.16}\r\n  \x3c/div\x3e\r\n  \x3clabel class\x3d"card-select-check-mark js-card-select-check-mark-wrap tooltip" aria-label\x3d"${selectItem}"\x3e\r\n    \x3cinput type\x3d"checkbox" class\x3d"checkbox-custom-input js-card-select-check-mark" aria-label\x3d"${item.title:selectTitle}" value\x3d"${item.id}" data-id\x3d"${item.id}" ${checked}\x3e\r\n    \x3cspan class\x3d"checkbox-custom checkbox-custom--large checkbox-custom--on-dark"\x3e\r\n      \x3csvg viewBox\x3d"0 0 16 16" class\x3d"checkbox-custom-icon checkbox-custom-icon--checked"\x3e\x3cpath d\x3d"M12.753 3l-7.319 7.497L3.252 8.31 2 9.373l3.434 3.434L14 4.24z"/\x3e\x3c/svg\x3e\r\n      \x3csvg viewBox\x3d"0 0 16 16" class\x3d"checkbox-custom-icon checkbox-custom-icon--mixed"\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M4 7h8v2H4z"/\x3e\x3c/svg\x3e\r\n    \x3c/span\x3e\r\n  \x3c/label\x3e\r\n\r\n  \x3ca href\x3d"${item.defaultOpenUrl:empty}" class\x3d"card-image-wrap card-last js-default-open js-telemetry-thumbnail-hover" aria-label\x3d"${!item.title}: ${item.defaultOpenText:empty}"\x3e\r\n    \x3cspan class\x3d"card-image-overlay no-pointer"\x3e\r\n      \x3cspan class\x3d"font-size--1 link-white text-center thumbnail-icon card-image-open"\x3e${!item.defaultOpenSvg:empty}${item.defaultOpenText:empty}\x3c/span\x3e\r\n    \x3c/span\x3e\r\n    \x3cimg class\x3d"card-image js-card-image no-pointer ${isImage:show}" src\x3d"${item.largeThumbnailUrl}" alt\x3d""\x3e\r\n    \x3cspan class\x3d"card-image-wrap__center-image ${isImage:hide}"\x3e\r\n      \x3cimg class\x3d"card-image js-card-image no-pointer" src\x3d"${item.largeThumbnailUrl}" alt\x3d""\x3e\r\n    \x3c/span\x3e\r\n  \x3c/a\x3e\r\n  \x3cdiv class\x3d"card-content card-content-no-padding"\x3e\r\n    \x3cdiv class\x3d"padding-leader-half padding-half padding-left-half padding-right-half card-content-auto-top"\x3e\r\n      \x3ch4 class\x3d"card-title font-size--1 trailer-0 text-ellipsis"\x3e\x3ca class\x3d"card-title-link js-telemetry-title-hover" href\x3d"item.html?id\x3d${item.id}" title\x3d"${item.title}"\x3e${!item.title}\x3c/a\x3e\x3c/h4\x3e\r\n      \x3cp class\x3d"font-size--2 trailer-quarter flex"\x3e\r\n        \x3cspan class\x3d"js-layers-tables font-size--2"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"js-layers-tables-toggle text-darkest-gray"\x3e\r\n          \x3cspan class\x3d"flex-0 ${showSource:show}"\x3e\x3cimg width\x3d"16" src\x3d"${item.svgIconUrl16}" alt\x3d"" class\x3d"icon-inline icon-inline--on-left"\x3e\x26lrm;${item.displayName:formatDisplayName}\x3c/span\x3e\r\n          \x3cspan class\x3d"flex-0 ${showSource:hide} tooltip tooltip--data" data-tooltip\x3d"${item.sourceLabel}"\x3e\x3cimg width\x3d"16" src\x3d"${item.svgIconUrl16}" alt\x3d"" class\x3d"icon-inline icon-inline--on-left"\x3e\x26lrm;${item.displayName:formatDisplayName}\x3c/span\x3e\r\n        \x3c/span\x3e\r\n      \x3c/p\x3e\r\n      \x3cp class\x3d"font-size--3 trailer-0 text-darker-gray card-created" title\x3d"${i18n.contentPage.createdLabel} ${item.created:completeDate}"\x3e${i18n.contentPage.created} ${item.created:fullDate}\x3c/p\x3e\r\n      \x3cp class\x3d"font-size--3 trailer-0 text-darker-gray" title\x3d"${i18n.itemProperties.lastModified} ${item.modified:completeDate}"\x3e${i18n.contentPage.modified} ${item.modified:fullDate}\x3c/p\x3e\r\n      \x3cp class\x3d"font-size--3 trailer-0 text-darker-gray"\x3e${item:formatViewsLabel} ${item.numViews:formatNumViews}\x3c/p\x3e\r\n      \x3cdiv class\x3d"flex-0 card-badges js-card-badges"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"card-action-bar flex flex-center leader-quarter"\x3e\r\n      \x3cspan class\x3d"js-card-owner-text flex-1 text-ellipsis font-size--2 inline-block"\x3e${!item.ownerText}\x3c/span\x3e\r\n      \x3cdiv class\x3d"flex-0 flex flex-center flex-justify-end card-actions"\x3e\r\n        \x3cspan class\x3d"js-share-summary"\x3e\x3c/span\x3e\r\n        \x3cdiv class\x3d"js-favorites-container inline-block"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"js-open-dropdown-container js-telemetry-overflow-menu inline-block dropdown-up"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/OpenDropdown.html":'\x3cdiv class\x3d"display-block dropdown js-dropdown"\x3e\r\n  \x3cbutton class\x3d"card-action js-dropdown-toggle" tabindex\x3d"0" aria-haspopup\x3d"true" aria-expanded\x3d"false" aria-label\x3d"${item.title:moreOptionsTitle}"\x3e\r\n    ${icons.ellipsis-f.16}\r\n  \x3c/button\x3e\r\n  \x3cnav class\x3d"dropdown-menu dropdown-menu-constrained dropdown-right" role\x3d"menu"\x3e\r\n    \x3c!-- Primary Item Actions --\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"item.html?id\x3d${item.id}${telemetryParams:empty}" class\x3d"dropdown-link"\x3e${i18n.itemLinks.viewDetails}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.downloadUrl:empty}" class\x3d"dropdown-link if-pdf js-action" data-action\x3d"download"\x3e${i18n.itemLinks.open}\x3c/a\x3e\r\n    \x3cbutton role\x3d"menuitem" class\x3d"dropdown-link js-item-categorize if-allow-categorization js-telemetry-categorize"\x3e${i18n.items.categorize}\x3c/button\x3e\r\n\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.downloadUrl:empty}" class\x3d"dropdown-link if-file if-download js-action" data-action\x3d"download"\x3e${i18n.itemLinks.download}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.downloadUrl:empty}" class\x3d"dropdown-link if-explorer js-action" data-action\x3d"download"\x3e${i18n.itemLinks.openExplorer}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.downloadStyleUrl:empty}" class\x3d"dropdown-link if-resources"\x3e${i18n.itemLinks.downloadStyle}\x3c/a\x3e\r\n\r\n    \x3cdiv class\x3d"if-only-map-viewer-modern"\x3e\r\n      \x3ca role\x3d"menuitem" href\x3d"${item.newMapViewerUrl:empty}" class\x3d"dropdown-link"\x3e${i18n.itemLinks.openMapViewerBetaLabel}\x3c/a\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"if-multiple-map-viewer"\x3e\r\n      \x3cdiv class\x3d"if-map-viewer-classic"\x3e\r\n        \x3cdiv class\x3d"if-map-viewer-beta"\x3e\r\n          \x3ca role\x3d"menuitem" href\x3d"${item.newMapViewerUrl:empty}" class\x3d"dropdown-link if-can-openInNewMapViewer"\x3e${i18n.itemLinks.openMapViewerBetaLabel}\x3c/a\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"hide-if-no-legacy-viewer-support"\x3e\r\n          \x3ca role\x3d"menuitem" href\x3d"${item.mapViewerUrl:empty}" data-href\x3d"${item.mapViewerUrl:empty}" class\x3d"dropdown-link if-map if-featureCollection if-vectorTile if-2d if-table js-action" data-action\x3d"newMapViewer"\x3e${i18n.itemLinks.openMapViewer}\x3c/a\x3e\r\n          \x3ca role\x3d"menuitem" href\x3d"${item.mapNewViewerUrl:empty}" data-href\x3d"${item.mapNewViewerUrl:empty}" class\x3d"dropdown-link if-featureCollection if-vectorTile if-2d if-table js-action" data-action\x3d"newMapViewer"\x3e${i18n.itemLinks.addToNewViewer}\x3c/a\x3e\r\n          \x3ca role\x3d"menuitem" href\x3d"${item.mapViewerWithEditUrl:empty}" data-href\x3d"${item.mapViewerWithEditUrl:empty}" class\x3d"dropdown-link if-can-edit-service js-action" data-action\x3d"newMapViewer"\x3e${i18n.itemProperties.openViewerFullEditingRole}\x3c/a\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"if-map-viewer-modern"\x3e\r\n        \x3cdiv class\x3d"if-map-viewer-beta"\x3e\r\n          \x3ca role\x3d"menuitem" href\x3d"${item.newMapViewerUrl:empty}" class\x3d"dropdown-link if-can-openInNewMapViewer"\x3e${i18n.itemLinks.openMapViewerBetaLabel}\x3c/a\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"hide-if-no-legacy-viewer-support"\x3e\r\n          \x3ca role\x3d"menuitem" href\x3d"${item.mapViewerUrl:empty}" data-href\x3d"${item.mapViewerUrl:empty}" class\x3d"dropdown-link if-map if-featureCollection if-vectorTile if-2d if-table js-action" data-action\x3d"newMapViewer"\x3e${i18n.itemLinks.openMapViewer}\x3c/a\x3e\r\n          \x3ca role\x3d"menuitem" href\x3d"${item.mapViewerWithEditUrl:empty}" data-href\x3d"${item.mapViewerWithEditUrl:empty}" class\x3d"dropdown-link if-can-edit-service js-action" data-action\x3d"newMapViewer"\x3e${i18n.itemLinks.openMapViewerWithControl}\x3c/a\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n\r\n    \x3cdiv class\x3d"if-geoBIM"\x3e\r\n      \x3ca role\x3d"menuitem" href\x3d"${item.geoBIMUrl:empty}" class\x3d"dropdown-link if-create-GeoBIM"\x3e${i18n.itemLinks.openGeoBIM}\x3c/a\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.sceneViewerUrl:empty}" class\x3d"dropdown-link if-scene if-3d"\x3e${i18n.itemLinks.openSceneViewer}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.url:empty}" target\x3d"_blank" class\x3d"dropdown-link if-app js-view-link"\x3e${i18n.itemLinks.viewApp}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.appViewerUrl:empty}" target\x3d"_blank" class\x3d"dropdown-link if-mobile"\x3e${i18n.itemLinks.getApp}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.appViewerUrl:empty}" target\x3d"_blank" class\x3d"dropdown-link if-link"\x3e${i18n.itemLinks.open}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.workforceViewerUrl:empty}" class\x3d"dropdown-link if-workforceProject-and-not-blocked"\x3e${i18n.itemLinks.openWorkforce}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.workflowViewerUrl:empty}"  class\x3d"dropdown-link if-workflow"\x3e${i18n.itemLinks.openWorkflow}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.surveyViewerUrl:empty}" class\x3d"dropdown-link if-surveyFormBrowser-and-not-blocked"\x3e${i18n.itemLinks.openSurveyBrowser}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.surveyAppUrl:empty}" class\x3d"dropdown-link if-surveyForm-and-not-blocked"\x3e${i18n.itemLinks.openSurveyApp}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.surveyManageUrl:empty}" class\x3d"dropdown-link if-can-edit-surveyForm js-open-surveyViewer "\x3e${i18n.itemLinks.manageSurveyApp}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.surveyEditUrl:empty}" class\x3d"dropdown-link if-can-edit-surveyForm js-open-surveyViewer "\x3e${i18n.itemLinks.editSurveyApp}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.insightsViewerUrl:empty}" class\x3d"dropdown-link if-insights-and-not-blocked"\x3e${i18n.itemLinks.openInsights}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.urbanViewerUrl:empty}" class\x3d"dropdown-link if-urbanModel"\x3e${i18n.itemLinks.openUrbanModel}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.orthoMakerUrl:empty}" class\x3d"dropdown-link if-orthoMaker-and-not-blocked"\x3e${i18n.itemLinks.openOrthoMaker}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.missionViewerUrl:empty}" class\x3d"dropdown-link if-mission"\x3e${i18n.itemLinks.openMission}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.geoAIStudioUrl:empty}" class\x3d"dropdown-link if-geoAIStudioProject-and-not-blocked"\x3e${i18n.itemLinks.openGeoAIStudio}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.hubInitiativeUrl:empty}" class\x3d"dropdown-link if-hubInitiative-and-not-blocked"\x3e${i18n.itemLinks.openHubInitiative}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.hubEventUrl:empty}" class\x3d"dropdown-link if-hubEvent-and-not-blocked"\x3e${i18n.itemLinks.viewInHub}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.hubProjectUrl:empty}" class\x3d"dropdown-link if-hubProject-and-not-blocked"\x3e${i18n.itemLinks.openHubInitiative}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.hubProjectEditUrl:empty}" class\x3d"dropdown-link if-hubProject-and-not-blocked"\x3e${i18n.itemLinks.editHubProject}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.iotViewerUrl:empty}" class\x3d"dropdown-link if-bigDataAnalytic if-realTimeAnalytic"\x3e${i18n.itemLinks.openAnalyticsIoT}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.iotFeedUrl:empty}" class\x3d"dropdown-link if-feedLayer"\x3e${i18n.itemLinks.openAnalyticsIoT}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.vrExperienceUrl:empty}" class\x3d"dropdown-link if-vrExperience-and-not-blocked js-hide-portal"\x3e${i18n.itemLinks.openVRExperience}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.excaliburViewerUrl:empty}" class\x3d"dropdown-link if-excaliburProject"\x3e${i18n.itemLinks.openExcalibur}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.excaliburProjectUrl:empty}" class\x3d"dropdown-link if-excaliburProject"\x3e${i18n.itemLinks.viewExcaliburProject}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.excaliburMediaUrl:empty}" class\x3d"dropdown-link if-excaliburMedia"\x3e${i18n.itemLinks.openExcalibur}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.dashboardUrl:empty}" target\x3d"_blank" class\x3d"dropdown-link if-dashboard-and-not-blocked"\x3e${i18n.itemLinks.dashboardView}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.dashboardEditUrl:empty}" class\x3d"dropdown-link if-can-edit-dashboard"\x3e${i18n.itemLinks.dashboardEdit}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.fieldMapsUrl:empty}" class\x3d"dropdown-link if-fieldMaps"\x3e${i18n.itemLinks.fieldMaps}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.dataPipelineUrl:empty}" class\x3d"dropdown-link if-data-pipeline-and-not-blocked"\x3e${i18n.itemLinks.openDataPipelines}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.knowledgeStudioUrl:empty}" class\x3d"dropdown-link if-knowledge-studio"\x3e${i18n.itemLinks.openKnowledgeStudio}\x3c/a\x3e\r\n    \x3cdiv class\x3d"if-notebookServer-enabled"\x3e\r\n      \x3cspan class\x3d"if-can-create-notebooks"\x3e\r\n        \x3ca role\x3d"menuitem" href\x3d"${item.notebookViewerUrl:empty}" target\x3d"_blank" class\x3d"dropdown-link if-notebook"\x3e${i18n.itemLinks.openNotebook}\x3c/a\x3e\r\n      \x3c/span\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!-- Web Experience Actions ---\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.webExperienceUrl:empty}" class\x3d"dropdown-link if-published-webExperience-and-not-blocked" target\x3d"_blank" rel\x3d"noopener noreferrer"\x3e${i18n.itemLinks.view}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.webExperienceEditUrl:empty}" class\x3d"dropdown-link if-can-edit-webExperience"\x3e${i18n.common.edit}\x3c/a\x3e\r\n\r\n    \x3c!-- Web Experience Template Actions ---\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.webExperienceUrl:empty}" class\x3d"dropdown-link if-published-webExperienceTemplate-and-not-blocked"\x3e${i18n.itemLinks.view}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.webExperienceEditUrl:empty}" class\x3d"dropdown-link if-can-edit-webExperienceTemplate"\x3e${i18n.common.edit}\x3c/a\x3e\r\n    \x3cspan class\x3d"if-published-webExperienceTemplate-and-not-blocked"\x3e\r\n      \x3ca href\x3d"${item.webExperienceCreateUrl:empty}" class\x3d"dropdown-link if-can-create-webExperienceTemplate if-published-webExperienceTemplate-and-not-blocked if-no-public-user js-open-btn"\x3e${i18n.itemLinks.createWebExperience}\x3c/a\x3e\r\n    \x3c/span\x3e\r\n\r\n    \x3c!-- Secondary Item Actions --\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.wabEditUrl:empty}" class\x3d"dropdown-link if-can-edit-wab-and-not-blocked"\x3e${i18n.itemLinks.editApp}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.sceneViewerUrl:empty}" class\x3d"dropdown-link if-scene-2"\x3e${i18n.itemLinks.openSceneViewer}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.openDesktop:empty}" class\x3d"dropdown-link js-action if-desktop" data-action\x3d"openDesktop" data-type\x3d"arcmap"\x3e${i18n.itemLinks.openDesktop}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.openDesktop:empty}" class\x3d"dropdown-link js-action if-desktop if-desktopPro" data-action\x3d"openDesktop" data-type\x3d"arcmap"\x3e${i18n.itemLinks.openArcMap}\x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.openDesktop:empty}" class\x3d"dropdown-link js-action if-pro if-desktopPro" data-action\x3d"openDesktop" data-type\x3d"pro"\x3e${i18n.itemLinks.openPro}\x3c/a\x3e\r\n    \x3cdiv class\x3d"if-can-configure"\x3e\r\n      \x3ca role\x3d"menuitem" href\x3d"${item.configureUrl:empty}" class\x3d"dropdown-link if-instant-apps-and-not-blocked"\x3e${i18n.itemProperties.configureApp}\x3c/a\x3e\r\n    \x3c/div\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.viewStyleUrl:empty}" target\x3d"_blank" class\x3d"dropdown-link if-vectorTile if-viewStyle"\x3e${i18n.itemLinks.viewStyle}\x3c/a\x3e\r\n\r\n    \x3c!-- Storymap Actions --\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.configureStoryMapUrl:empty}" class\x3d"dropdown-link if-editable-storymap-and-not-blocked"\x3e\r\n      \x3cspan class\x3d"if-storymap-item"\x3e${i18n.itemLinks.editStorymap}\x3c/span\x3e\r\n      \x3cspan class\x3d"if-storymap-briefing"\x3e${i18n.itemLinks.editBriefing}\x3c/span\x3e\r\n      \x3cspan class\x3d"if-storymap-collection"\x3e${i18n.itemLinks.editStorymapCollection}\x3c/span\x3e\r\n    \x3c/a\x3e\r\n    \x3ca role\x3d"menuitem" href\x3d"${item.storyMapViewerUrl:empty}" class\x3d"dropdown-link if-published-storymap-and-not-blocked"\x3e\r\n      \x3cspan class\x3d"if-storymap-item"\x3e${i18n.itemLinks.viewStorymap}\x3c/span\x3e\r\n      \x3cspan class\x3d"if-storymap-briefing"\x3e${i18n.itemLinks.viewBriefing}\x3c/span\x3e\r\n      \x3cspan class\x3d"if-storymap-collection"\x3e${i18n.itemLinks.viewStorymapCollection}\x3c/span\x3e\r\n    \x3c/a\x3e\r\n\r\n    \x3cdiv class\x3d"if-published-storymap-theme"\x3e\r\n      \x3ca\r\n        class\x3d"dropdown-link"\r\n        href\x3d"${item.newStoryMapFromThemeUrl:empty}"\r\n      \x3e\r\n        ${i18n.itemLinks.newStoryFromTheme}\r\n      \x3c/a\x3e\r\n      \x3ca role\x3d"menuitem" href\x3d"${item.newStoryMapCollectionFromThemeUrl:empty}" class\x3d"dropdown-link"\x3e\r\n        ${i18n.itemLinks.newCollectionFromTheme}\r\n      \x3c/a\x3e\r\n    \x3c/div\x3e\r\n    \x3ca\r\n      href\x3d"${item.configureStoryMapThemeUrl:empty}"\r\n      class\x3d"dropdown-link if-editable-storymap-theme"\r\n    \x3e\r\n      ${i18n.itemLinks.editStorymapTheme}\r\n    \x3c/a\x3e\r\n  \x3c/nav\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/MinimalCard.html":'\x3cdiv class\x3d"js-card card ${selectCardClass} ${selectedClass} ${removedClass} ${imageClass} block trailer-1 position-relative" data-id\x3d"${item.id}" tabindex\x3d"0"\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"dragHandle" class\x3d"card-drag-handle flex-center" tabindex\x3d"0"\x3e\r\n    ${!icons.drag.16}\r\n  \x3c/div\x3e\r\n  \x3ca data-dojo-attach-point\x3d"thumbLink" href\x3d"${item.defaultOpenUrl:empty}" class\x3d"card-image-wrap card-last js-default-open" aria-label\x3d"${!item.title}: ${item.defaultOpenText:empty}"\x3e\r\n    \x3cspan class\x3d"card-image-overlay no-pointer"\x3e\r\n      \x3cspan class\x3d"font-size--1 link-white text-center thumbnail-icon card-image-open"\x3e${!item.defaultOpenSvg:empty}${item.defaultOpenText:empty}\x3c/span\x3e\r\n    \x3c/span\x3e\r\n    \x3cimg class\x3d"card-image js-card-image no-pointer ${isImage:show}" src\x3d"${item.largeThumbnailUrl}" alt\x3d""\x3e\r\n    \x3cspan class\x3d"card-image-wrap__center-image ${isImage:hide}"\x3e\r\n      \x3cimg class\x3d"card-image js-card-image no-pointer" src\x3d"${item.largeThumbnailUrl}" alt\x3d""\x3e\r\n    \x3c/span\x3e\r\n  \x3c/a\x3e\r\n  \x3cdiv class\x3d"card-content card-content-no-padding"\x3e\r\n    \x3cdiv class\x3d"padding-leader-half padding-half padding-left-half padding-right-half card-content-auto-top"\x3e\r\n      \x3ch4 class\x3d"card-title font-size-0 leader-quarter trailer-quarter text-ellipsis avenir-bold"\x3e\x3ca data-dojo-attach-point\x3d"titleLink" class\x3d"card-title-link minimal-card__title-link display-block text-ellipsis" href\x3d"item.html?id\x3d${item.id}" title\x3d"${item.title}"\x3e${item.title}\x3c/a\x3e\x3c/h4\x3e\r\n      \x3cp class\x3d"font-size--2"\x3e\x26lrm;${item.displayName:formatDisplayName}\x3c/p\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/_OverviewCard.html":'\x3cdiv class\x3d"card block ${cardClass} trailer-1" data-dojo-attach-point\x3d"_card"\x3e\r\n    \x3cdiv class\x3d"padding-left-1 padding-right-1 overview-card-heading padding-leader-half padding-trailer-half hide" data-dojo-attach-point\x3d"_cardTitle"\x3e\r\n        \x3ch3 class\x3d"trailer-0 font-size-1 avenir-demi flex"\x3e\r\n            \x3cdiv class\x3d"flex-1 text-ellipsis margin-right-1 overview-card__title" data-dojo-attach-point\x3d"_cardTitleNode"\x3e${cardTitle}\x3c/div\x3e\r\n            \x3ca href\x3d"${cardTitleLink}" class\x3d"font-size--1 avenir-regular overview-card-title-link hide js-card-title-link" data-dojo-attach-point\x3d"_cardTitleLink"\x3e${cardTitleLinkLabel}\x3c/a\x3e\r\n        \x3c/h3\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"loader is-active padding-leader-3 padding-trailer-3" data-dojo-attach-point\x3d"_loader"\x3e\r\n        \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"loader-text"\x3e${loadingText}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"hide ${containerClass}" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/_licenseCardItem.html":'\x3cdiv class\x3d"trailer-half padding-trailer-half  org-overview__license-card-item"\x3e\r\n  \x3cdiv class\x3d"inline-block license-card-item__icon-wrapper"\x3e\r\n    \x3cdiv class\x3d"js-icon"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"margin-left-half inline-block org-overview__license-info"\x3e\r\n    \x3cdiv class\x3d"license-card-item__title" data-dojo-attach-point\x3d"_titleContainer"\x3e\r\n      \x3cspan class\x3d"license-card-item__mobile-icon"\x3e\r\n        \x3cdiv class\x3d"js-mobile-icon"\x3e\x3c/div\x3e\r\n      \x3c/span\x3e\r\n      \x3cdiv class\x3d"license-card-item__title-text"\x3e${entitlement.title}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"flex license-card-item__available-wrapper" data-dojo-attach-point\x3d"_availableWrapper"\x3e\r\n      \x3cdiv class\x3d"js-licenses-available"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"flex-1 overview-license-card-item__expiration-container" data-dojo-attach-point\x3d"_expirationContainer"\x3e\r\n        \x3cdiv class\x3d"font-size--2 licenses-card__expiration licenses-card__expiration--danger hide" data-dojo-attach-point\x3d"_expiration"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"hide" data-dojo-attach-point\x3d"_portalExpiration"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/_licensesAvailable.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"flex ${cssClasses}" data-dojo-attach-point\x3d"_topSection"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_assignedText" class\x3d"text-ellipsis ${assignedTextCss} licenses-available__assigned"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"js-progress-bar"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_highContrastWarning" class\x3d"hide licenses-available__high-contrast-warning"\x3e${!icons.inline.exclamation-mark-triangle.16}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_totalText" class\x3d"text-ellipsis flex flex-wrap licenses-available__total ${totalTextCss}"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"only-on-mobile" data-dojo-attach-point\x3d"_mobileProgressContainer"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/_progressBar.html":'\x3cdiv class\x3d"${cssClasses}"\x3e\r\n    \x3cdiv class\x3d"progress-bar overview-progress-bar" role\x3d"progressbar"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_bar" class\x3d"progress-bar-fill"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"progress-bar__hover-label hide" data-dojo-attach-point\x3d"hoverLabel"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:arcgisonline/pages/organization/widgets/templates/ExpirationBadge.html":'\x3cdiv\x3e\r\n    \x3cbutton class\x3d"btn-link btn-link-darker-gray font-size--2 license-expiration-badge" data-dojo-attach-point\x3d"_expiresBadge"\x3e\x3c/button\x3e\r\n    \x3cdiv class\x3d"js-expiration-tooltip"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/pages/organization/widgets/templates/ExpirationTooltip.html":'\x3cdiv class\x3d"text-left"\x3e\r\n    \x3cspan tabindex\x3d"0" data-dojo-attach-point\x3d"_closeIcon" class\x3d"popover-close expiration-tooltip__close-icon" tab-index\x3d"0" aria-label\x3d"${i18n.common.close}"\x3e${!icons.x.16}\x3c/span\x3e\r\n    \x3cdiv class\x3d"popover-text" data-dojo-attach-point\x3d"_content"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:arcgisonline/pages/organization/widgets/templates/DataStoreOverlay.html":'\x3cdiv class\x3d"data-store-overlay__content visibility-hidden js-data-store-content"\x3e\r\n  \x3cdiv class\x3d"data-store-overlay__section"\x3e\r\n    \x3cdiv\x3e${texts.tier}\x3c/div\x3e\r\n    \x3cdiv class\x3d"avenir-bold"\x3e${tierName}\x3c/div\x3e\r\n    \x3cp class\x3d"font-size--2 leader-half trailer-0"\x3e${tierDesc}\x3c/p\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"data-store-overlay__section padding-leader-1 js-storage-section"\x3e\r\n    \x3cdiv\x3e${texts.storage}\x3c/div\x3e\r\n    \x3cdiv class\x3d"flex flex-align-center"\x3e\r\n      \x3cdiv class\x3d"avenir-bold js-avail-text leader-half trailer-half"\x3e\x3c/div\x3e\r\n      \x3ccalcite-icon icon\x3d"exclamation-mark-circle-f" class\x3d"margin-left-quarter hide js-warning-icon" \x3e\x3c/calcite-icon\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"js-progress-bar"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"font-size--2 leader-half js-usage-details"\x3e${viewDetails}\x3c/div\x3e\r\n    \x3ccalcite-notice class\x3d"hide js-usage-notice" open kind\x3d"danger" icon\x3d"exclamation-mark-circle-f"\x3e\r\n      \x3cdiv slot\x3d"message" class\x3d"js-usage-notice-message"\x3e\x3c/div\x3e\r\n    \x3c/calcite-notice\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"padding-leader-1 js-compute-section"\x3e\r\n    \x3cdiv class\x3d"flex"\x3e\r\n      \x3cdiv class\x3d"flex-1"\x3e${texts.computeTitle}\x3c/div\x3e\r\n      \x3cdiv class\x3d"js-unit-dropdown"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cp class\x3d"leader-half font-size--2"\x3e${texts.computeDesc}\x3c/p\x3e\r\n    \x3cdiv class\x3d"position-relative"\x3e\r\n      \x3cdiv class\x3d"js-chart-loader loader data-store-overlay__chart-loader"\x3e\r\n        \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"data-store-overlay__chart-mask hide js-chart-mask"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"data-store-overlay__upgrade-label hide js-chart-text"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"flex flex-end js-chart-legend"\x3e\r\n        \x3cdiv class\x3d"flex flex-align-center font-size--1"\x3e\r\n          \x3cspan class\x3d"margin-right-half flex flex-align-center js-max-legend" \x3e\r\n            \x3csvg aria-hidden\x3d"true" role\x3d"none" focusable\x3d"false" overflow\x3d"hidden" width\x3d"14px" height\x3d"14px" class\x3d"org-overview__graph-icon--storage margin-right-half"\x3e\r\n              \x3crect fill\x3d"#DEE9DE" fill-opacity\x3d"1"  width\x3d"14" height\x3d"14" ry\x3d"0" rx\x3d"0" \x3e\x3c/rect\x3e\r\n            \x3c/svg\x3e\r\n            ${texts.max}\r\n          \x3c/span\x3e\r\n          \x3cspan class\x3d"margin-right-half flex flex-align-center js-avg-legend" \x3e\r\n            \x3csvg aria-hidden\x3d"true" role\x3d"none" focusable\x3d"false" overflow\x3d"hidden" width\x3d"14px" height\x3d"14px" class\x3d"org-overview__graph-icon--analytics margin-right-half"\x3e\r\n              \x3crect fill\x3d"#B3D5E6" fill-opacity\x3d"1"  width\x3d"14" height\x3d"14" ry\x3d"0" rx\x3d"0" \x3e\x3c/rect\x3e\r\n            \x3c/svg\x3e\r\n            ${texts.avg}\r\n          \x3c/span\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv id\x3d"computeChart" class\x3d"data-store-overlay__chart-wrapper js-chart-wrapper" style\x3d"height: 300px;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/settings/HomePageOverlay/HomePagePreview.html":'\x3cdiv class\x3d"home-page flex-1 flex"\x3e\r\n  \x3cdiv class\x3d"home-page__content" tabindex\x3d"0"\x3e\r\n\r\n    \x3cdiv class\x3d"home-page__above-header"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"flex home-page__header home-page__header--half-height home-page__header-background-color--white"\x3e\r\n      \x3cdiv class\x3d"flex home-page__header-overlay home-page__header-overlay-valign--middle"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"home-page__below-header"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"home-page__footer flex-center"\x3e\r\n      \x3cdiv class\x3d"flex home-page__footer-content"\x3e\r\n        \x3ca\r\n          href\x3d"mailto:arcgisonline_feedback@esri.com"\r\n          target\x3d"_blank"\r\n          class\x3d"home-page-footer-email home-page-show-false home-page__footer-link margin-right-2 font-size--1"\r\n          \x3eContact Us\x3c/a\x3e\r\n        \x3ca\r\n          href\x3d"http://trust.arcgis.com"\r\n          target\x3d"_blank"\r\n          class\x3d"home-page__footer-link margin-right-2 font-size--1"\r\n          \x3eTrust Center\x3c/a\r\n        \x3e\r\n        \x3ca\r\n          href\x3d"http://www.esri.com/about-esri/contact"\r\n          target\x3d"_blank"\r\n          class\x3d"home-page__footer-link margin-right-2 font-size--1"\r\n          \x3eContact Esri\x3c/a\r\n        \x3e\r\n        \x3ca\r\n          href\x3d"mailto:arcgisonline_feedback@esri.com"\r\n          target\x3d"_blank"\r\n          class\x3d"home-page__footer-link margin-right-2 font-size--1"\r\n          \x3eReport Abuse\x3c/a\r\n        \x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/settings/HomePageOverlay/HomePageOverlay.html":'\x3cdiv class\x3d"home-page-overlay__content flex"\x3e\r\n  \x3cdiv class\x3d"home-page-overlay__left-panel"\x3e\x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"js-preview"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"js-view-size flex flex-align-center flex-1 left"\x3e\r\n    \x3cdiv class\x3d"margin-right-1"\x3e${i18n.orgHomePageSetup.view}:\x3c/div\x3e\r\n    \x3cbutton tabindex\x3d"0"\r\n      aria-label\x3d"${i18n.orgHomePageSetup.desktopView}"\r\n      aria-pressed\x3d"true"\r\n      class\x3d"tooltip tooltip-top js-desktop-btn btn-link home-page-overlay__view-size-btn home-page-overlay__view-size-btn--active"\r\n    \x3e\r\n      ${monitorIcon}\r\n    \x3c/button\x3e\r\n    \x3cbutton tabindex\x3d"0"\r\n      aria-label\x3d"${i18n.orgHomePageSetup.tabletView}"\r\n      aria-pressed\x3d"false"\r\n      class\x3d"tooltip tooltip-top js-tablet-btn btn-link home-page-overlay__view-size-btn"\r\n    \x3e\r\n      ${tabletIcon}\r\n    \x3c/button\x3e\r\n    \x3cbutton tabindex\x3d"0"\r\n      aria-label\x3d"${i18n.orgHomePageSetup.mobileView}"\r\n      aria-pressed\x3d"false"\r\n      class\x3d"tooltip tooltip-top js-mobile-btn btn-link home-page-overlay__view-size-btn"\r\n    \x3e\r\n      ${mobileIcon}\r\n    \x3c/button\x3e\r\n\r\n    \x3cdiv class\x3d"js-config-not-active home-page-overlay__config-not-active flex-center flex-1 right"\x3e\r\n      \x3cbutton class\x3d"js-warn-btn btn-link" tabindex\x3d"-1"\x3e${warnIcon}\x3c/button\x3e\r\n      ${i18n.orgHomePageSetup.configNotActive}\x26nbsp;\r\n      \x3ca class\x3d"org-settings__clickable-link js-switch-to-new" tabindex\x3d"0" aria-label\x3d"${i18n.orgHomePageSetup.switchToConfig}" id\x3d"switchToConfig"\x3e${i18n.orgHomePageSetup.switchToConfig}\x3c/a\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv id\x3d"home-page-overlay__live-region" class\x3d"screen-readers-only" role\x3d"alert" aria-live\x3d"assertive" aria-atomic\x3d"true"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/settings/templates/GroupSelect.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"js-edit-btn"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"js-picker"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:arcgisonline/sharing/dijit/dialog/templates/ManageSubscriptionDlg.html":'\x3cdiv class\x3d"widgetContent" \x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit.Dialog" id\x3d"manage-subscription-dialog" data-dojo-attach-point\x3d"_dialog" title\x3d"${i18n.manageSubscriptionTitle}" execute\x3d"" style\x3d"width:400px;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_upgradeSubscriptionDiv" class\x3d"hide"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_inUSDiv"\x3e\x3c/div\x3e\x3cbr/\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_outsideUSDiv"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_manageSubscriptionDiv" class\x3d"hide"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_manageSubscriptionContainer"\x3e\r\n        \x3cp\x3e${i18n.manageSubscriptionDesc}\x3c/p\x3e\r\n        \x3cinput type\x3d"radio" name\x3d"manageOption" data-dojo-attach-point\x3d"_upgradeRadioBtn" id\x3d"upgrade-radio-button" value\x3d"upgrade" checked\x3d"true"\x3e\r\n        \x3cspan\x3e\x3clabel for\x3d"upgrade-radio-button"\x3e\x3cb\x3e${i18n.upgradeOption}\x3c/b\x3e\x3c/label\x3e\x3c/span\x3e\x3cbr/\x3e\r\n        \x3cdiv class\x3d"esriLeadingMargin15"\x3e${i18n.upgradeDesc}\x3c/div\x3e\x3cbr/\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_convertOptionDiv"\x3e\r\n          \x3cinput type\x3d"radio" name\x3d"manageOption" data-dojo-attach-point\x3d"_convertRadioBtn" id\x3d"convert-radio-button" value\x3d"convert"\x3e\r\n          \x3cspan\x3e\x3clabel for\x3d"convert-radio-button"\x3e\x3cb\x3e${i18n.convertOption}\x3c/b\x3e\x3c/label\x3e\x3c/span\x3e\x3cbr/\x3e\r\n          \x3cdiv class\x3d"esriLeadingMargin15"\x3e${i18n.convertDesc}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_evalSubscriptionContainer" class\x3d"hide"\x3e\r\n        \x3cp\x3e${i18n.upgradeOption} ${i18n.upgradeDesc}\x3c/p\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_purchaseInUSDiv"\x3e\x3c/div\x3e\x3cbr/\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_purchaseOutsideUSDiv"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_convertSubscriptionDiv" class\x3d"hide"\x3e\r\n      \x3cp\x3e${i18n.convertSubscriptionDesc}\x3c/p\x3e\r\n      \x3cp\x3e\x3cb\x3e${i18n.deleteHostedMsg}\x3c/b\x3e\x3cbr/\x3e${i18n.notAvailableMsg}\x3c/p\x3e\r\n      \x3cdiv\x3e\x3cb\x3e${i18n.importantMsg}\x3c/b\x3e\x3cdiv data-dojo-attach-point\x3d"_importantMsgDiv"\x3e\x3c/div\x3e\x3c/div\x3e\r\n      \x3cp\x3e\x3cb\x3e${i18n.intendToUpgradeMsg}\x3c/b\x3e\x3c/p\x3e\r\n    \x3c/div\x3e\r\n    \x3cbr/\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_buttonDiv" class\x3d"right esriFloatTrailing"\x3e\r\n      \x3cbutton data-dojo-attach-point\x3d"_okBtn" class\x3d"btn btn-clear" type\x3d"button"\x3e${i18n.ok}\x3c/button\x3e\r\n      \x3cbutton data-dojo-attach-point\x3d"_nextBtn" class\x3d"btn" type\x3d"button"\x3e${i18n.next}\x3c/button\x3e\r\n      \x3cbutton data-dojo-attach-point\x3d"_convertBtn" class\x3d"btn" type\x3d"button"\x3e${i18n.convertLabel}\x3c/button\x3e\r\n      \x3cbutton data-dojo-attach-point\x3d"_cancelBtn" class\x3d"btn btn-clear" type\x3d"button"\x3e${i18n.cancel}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cbr style\x3d"clear:both;"/\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/pages/organization/widgets/templates/_overviewMembersRow.html":'\x3cdiv class\x3d"flex padding-leader-1 padding-trailer-half"\x3e\r\n    \x3cdiv class\x3d"margin-right-1 js-avatar-container"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"flex-1"\x3e\r\n        \x3ch5 class\x3d"trailer-0 font-size--1 avenir-bold"\x3e\r\n            \x3ca class\x3d"js-member-card-username" data-username\x3d"${username}" href\x3d"#"\x3e${fullName}\x3c/a\x3e\r\n        \x3c/h5\x3e\r\n        \x3cp class\x3d"font-size--2 trailer-half member-email if-can-view-users"\x3e${email}\x3c/p\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/_openDataGroup.html":'\x3cdiv class\x3d"flex trailer-half open-data-row"\x3e\r\n  \x3cdiv class\x3d"margin-right-1 js-open-data-thumb-${id}"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"flex-1"\x3e\r\n    \x3ch5 class\x3d"trailer-0 avenir-bold font-size-0"\x3e\r\n      \x3ca href\x3d"/home/group.html?id\x3d${id}"\x3e${title}\x3c/a\x3e\r\n    \x3c/h5\x3e\r\n    \x3cp class\x3d"trailer-0 font-size--1"\x3e${snippet}\x3c/p\x3e\r\n    \x3cdiv class\x3d"font-size--2"\x3e\r\n      \x3cdiv class\x3d"left margin-right-2"\x3e${contributorsLabel} \x3ca href\x3d"/home/group.html?id\x3d${id}\x26start\x3d1#members"\x3e${memberCount}\x3c/a\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"left"\x3e${itemsLabel}  \x3ca href\x3d"/home/group.html?id\x3d${id}\x26start\x3d1\x26view\x3dlist#content"\x3e${itemCount}\x3c/a\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/_regionalDataHostingInfo.html":'\x3cdiv class\x3d"trailer-half"\x3e${location} \x3cspan class\x3d"avenir-demi"\x3e${hostingLocation}\x3c/span\x3e\x3c/div\x3e\r\n\x3cdiv class\x3d"trailer-half"\x3e\r\n  ${storageDesc}\r\n  \x3cul class\x3d"padding-left-1"\x3e\r\n    \x3cli class\x3d"font-size--2"\x3e${storageTypes.features}\x3c/li\x3e\r\n    \x3cli class\x3d"font-size--2"\x3e${storageTypes.tiles}\x3c/li\x3e\r\n    \x3cli class\x3d"font-size--2"\x3e${storageTypes.data}\x3c/li\x3e\r\n    \x3cli class\x3d"font-size--2"\x3e${storageTypes.webmaps}\x3c/li\x3e\r\n  \x3c/ul\x3e\r\n\x3c/div\x3e\r\n\x3cdiv\x3e${otherContent}\x3c/div\x3e\r\n\x3ca href\x3d"${helpUrl}" target\x3d"_blank"\x3e${learnMore} ${icons.inline.launch.16}\x3c/a\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/_overview.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"padding-leader-1 padding-trailer-1 org-overview__body"\x3e\r\n    \x3cdiv class\x3d"grid-container" id\x3d"main-content-area"\x3e\r\n      \x3cdiv class\x3d"column-24"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"alertsContainer"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"js-member-defaults-warning"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"js-idp-warning"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"js-migrate-warning"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"js-https-warning"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"js-sql-warning"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"js-notebook-onboard"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"js-double-assigned hide double-assigned-notice flex flex-align-center trailer-1"\x3e\r\n          \x3ccalcite-icon icon\x3d"exclamation-mark-triangle"\x3e\x3c/calcite-icon\x3e\r\n          \x3cdiv class\x3d"flex-1 margin-left-1"\x3e\r\n            \x3cdiv class\x3d"avenir-demi"\x3e${i18n.myOrganization.overviewTab.doubleAssignedNotice.title}\x3c/div\x3e\r\n            \x3cdiv class\x3d"font-size--1"\x3e${i18n.myOrganization.overviewTab.doubleAssignedNotice.description}\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cbutton class\x3d"btn btn-clear js-open-double-assigned-btn"\x3e${i18n.myOrganization.overviewTab.doubleAssignedNotice.buttonText}\x3c/button\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"new-home-page-banner flex flex-align-center trailer-1 hide" data-dojo-attach-point\x3d"rasterBanner"\x3e\r\n          \x3cdiv class\x3d"new-home-page-banner__icon"\x3e\r\n            \x3ccalcite-icon icon\x3d"basemap"\x3e\x3c/calcite-icon\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"flex-1 margin-left-1"\x3e\r\n            \x3cdiv class\x3d"avenir-demi"\x3e${i18n.myOrganization.overviewTab.rasterBanner.title}\x3c/div\x3e\r\n            \x3cdiv class\x3d"font-size--1"\x3e\r\n              ${i18n.myOrganization.overviewTab.rasterBanner.description}\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cbutton class\x3d"btn btn-clear margin-right-1" data-dojo-attach-point\x3d"updateRasterBtn"\x3e\r\n            ${i18n.myOrganization.overviewTab.rasterBanner.buttonText}\r\n          \x3c/button\x3e\r\n          \x3cbutton data-dojo-attach-point\x3d"closeRasterWarningBtn" class\x3d"btn-link btn-link-darker-gray"\x3e\r\n            \x3ccalcite-icon icon\x3d"x"\x3e\x3c/calcite-icon\x3e\r\n          \x3c/button\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"js-new-home-page-banner"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"js-recycle-onboarding"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"js-map-viewer-portal-switch-banner"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"js-map-viewer-switch-banner"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"collabOnboard" class\x3d"flex-center full-width trailer-1 hide"\x3e\r\n          \x3cdiv class\x3d"collab-onboard-banner flex flex-align-center" \x3e\r\n            \x3cdiv class\x3d"flex-0"\x3e\r\n              \x3csvg width\x3d"68px" height\x3d"59px" viewBox\x3d"0 0 68 59" version\x3d"1.1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink"\x3e\r\n                \x3ctitle\x3eGroup 15\x3c/title\x3e\r\n                \x3cg id\x3d"onboarding---Yes" stroke\x3d"none" stroke-width\x3d"1" fill\x3d"none" fill-rule\x3d"evenodd"\x3e\r\n                    \x3cg id\x3d"Light-/-Notice-/-M-/-Green-/-Default" transform\x3d"translate(-1076.000000, -10.000000)"\x3e\r\n                        \x3cg id\x3d"Group-15" transform\x3d"translate(1076.000000, 10.000000)"\x3e\r\n                            \x3cpolygon id\x3d"Path-2" fill\x3d"#EBF1F8" points\x3d"66.966178 0.749999956 66.966178 26.512 63.348178 29.124 50.885178 11.868"\x3e\x3c/polygon\x3e\r\n                            \x3cpolygon id\x3d"Path-2" fill\x3d"#B8DEF7" transform\x3d"translate(10.555954, 17.818134) scale(-1, 1) rotate(-6.000000) translate(-10.555954, -17.818134) " points\x3d"19.1119075 4.11366435 16.4119789 29.8017689 14.3992766 31.522603 2 15.3963927"\x3e\x3c/polygon\x3e\r\n                            \x3cg id\x3d"64-/-partners-64" transform\x3d"translate(3.170178, 0.000000)" fill\x3d"#6A6A6A"\x3e\r\n                                \x3cpath d\x3d"M63.796,26.512 L63.327,25.863 L60.357,28.007 L59.522,26.849 L59.529,26.844 L59.055,26.2 L48.832,12.048 L63.576,1.39799996 L63.107,0.749999956 L47.715,11.868 L48.933,13.554 L39.871,20.1 L30.553,20.1 L12.833,31.005 L12.963,31.32 C12.991,31.384 13.654,32.9 16.667,32.9 C18.3999548,32.9347909 20.10323,32.4469461 21.555,31.5 L25.455,28.9 L33.165,28.9 L49.295,45.396 C49.709605,45.8197246 49.9153282,46.4052727 49.8568559,46.9952056 C49.7983837,47.5851384 49.4817172,48.118909 48.992,48.453 L48.695,48.655 C47.9720499,49.1461548 47.053951,49.250824 46.239,48.935 L37.609,40.71 L37.058,41.29 L45.625,49.456 L45.612,50.019 C45.600391,50.4904029 45.3630385,50.9275333 44.974,51.194 L43.678,52.079 C43.1526582,52.4369607 42.5056576,52.5691707 41.882,52.446 L41.539,52.379 L32.279,43.379 L31.721,43.953 L40.743,52.721 L40.709,53.423 C40.6863088,53.8669315 40.4577584,54.274846 40.091,54.526 L39.478,54.944 C38.9937268,55.203727 38.4379879,55.298515 37.895,55.214 L36.84,54.928 L36.928,54.831 L34.728,52.864 C35.1553734,52.2754989 35.2892675,51.523512 35.0912895,50.8236647 C34.8933115,50.1238173 34.3853286,49.5534094 33.713,49.276 L33.106,49.026 C32.5801468,48.8059362 31.995754,48.7682675 31.446,48.919 L30.172,49.14 L30.135,49.102 L30.05,48.448 C29.9278134,47.967233 29.5861397,47.5721959 29.128,47.382 L27.569,46.742 C27.0646065,46.4612159 26.4952115,46.3180912 25.918,46.327 C25.5337792,46.3682349 25.1550023,46.4500239 24.788,46.571 C24.7668271,46.2818 24.6740407,46.00241 24.518,45.758 C24.3223326,45.4541778 24.018471,45.2361124 23.668,45.148 L21.812,44.456 C21.4649792,44.3259832 21.0867367,44.3040208 20.727,44.393 L19.486,44.698 L19.448,44.655 C19.4340994,44.2895277 19.335874,43.9322201 19.161,43.611 C18.8723398,43.2329533 18.4775247,42.9495499 18.027,42.797 L15.837,41.893 C15.0742165,41.5762967 14.1988588,41.7071194 13.562,42.233 L13.172,42.554 L10.9,40.174 L10.9,35.49 L4.28399996,29.475 L14.537,18.093 L22.254,25.044 L22.789,24.45 L15.072,17.499 L16.148,16.304 L0.770999951,2.45199996 L0.23499995,3.04699996 L15.018,16.363 L2.07199995,30.735 L0.739999951,29.535 L0.20499995,30.13 L2.13099995,31.865 L3.74899996,30.069 L10.1,35.843 L10.1,40.493 L12.553,43.064 L10.81,44.5 L10.79,44.518 C10.4088835,44.8783108 10.2066242,45.3887232 10.2374903,45.9122887 C10.2683564,46.4358543 10.5291874,46.9189659 10.95,47.232 L24.596,57.47 C25.1994935,57.9415497 25.942142,58.1999998 26.708,58.205 C27.8187205,58.1389195 28.8876943,57.7580846 29.79,57.107 L34.16,53.43 L36.097,55.161 L36.093,55.227 C36.0241232,56.0362142 35.5002477,56.735491 34.743,57.029 C33.7493126,57.5636655 32.5337459,57.4617148 31.643,56.769 L30.916,56.187 L30.416,56.813 L31.144,57.394 C31.7280016,57.8865895 32.4669974,58.157472 33.231,58.159 C33.8455228,58.1398383 34.4516934,58.011154 35.021,57.779 C35.923246,57.4481688 36.5970918,56.6836492 36.812,55.747 L37.752,55.998 C38.5012847,56.1235542 39.2709109,55.9846184 39.929,55.605 L40.542,55.187 C41.11499,54.7937437 41.4721087,54.1560317 41.508,53.462 L41.521,53.191 L41.728,53.231 C42.5614617,53.3928212 43.4250554,53.2161443 44.128,52.74 L45.425,51.855 C46.0267686,51.4430403 46.3939696,50.7670482 46.412,50.038 L46.415,49.912 L46.484,49.84 C47.4056699,50.0346608 48.3668682,49.8454542 49.146,49.316 L49.443,49.114 C50.1281391,48.6463364 50.5711406,47.8993975 50.6529562,47.0739092 C50.7347718,46.2484209 50.4470095,45.4290547 49.867,44.836 L33.502,28.1 L25.212,28.1 L21.093,30.847 C19.7737585,31.693366 18.2331208,32.1294218 16.666,32.1 C15.6765684,32.1987635 14.6880112,31.904208 13.914,31.28 L30.78,20.9 L40.13,20.9 L49.402,14.203 L58.409,26.675 L50.1,32.798 L50.1,38.824 L47.031,41.635 L47.571,42.225 L50.9,39.176 L50.9,33.202 L58.878,27.324 L60.178,29.124 L63.796,26.512 Z M25.967,47.125 C26.4035079,47.1407431 26.8308158,47.2549198 27.217,47.459 L28.822,48.122 C29.0324311,48.2068095 29.1945955,48.3803218 29.265,48.596 L29.375,49.463 L23.32,55.513 L19.396,52.569 L24.619,47.476 C25.0524335,47.3047582 25.5050933,47.186892 25.967,47.125 L25.967,47.125 Z M20.918,45.169 C21.1216211,45.1188845 21.3356307,45.1314322 21.532,45.205 L23.454,45.916 C23.6216294,45.9686293 23.7667221,46.0760401 23.866,46.221 C23.9762696,46.4504915 24.0232219,46.7052771 24.002,46.959 L18.802,52.031 L19.134,52.373 L15.062,49.318 L19.275,45.574 L20.918,45.169 Z M11.035,45.866 C11.0182134,45.582423 11.1259376,45.3056266 11.33,45.108 L14.071,42.851 C14.4799143,42.5140578 15.0412235,42.4298614 15.531,42.632 L17.747,43.546 C18.0361187,43.6407919 18.2933058,43.8138653 18.49,44.046 C18.6230783,44.3618477 18.6829077,44.7037298 18.665,45.046 L14.409,48.828 L11.429,46.591 C11.1967312,46.4196497 11.0524229,46.1541079 11.035,45.866 L11.035,45.866 Z M29.317,56.464 C27.555,57.585 26.247,57.696 25.075,56.829 L23.966,55.998 L29.986,49.984 L31.624,49.698 C32.0124289,49.5878887 32.4265906,49.6114846 32.8,49.765 L33.408,50.015 C33.9216049,50.2273383 34.2849191,50.6950916 34.363574,51.2452651 C34.4422289,51.7954387 34.2245333,52.3462553 33.791,52.694 L29.317,56.464 Z" id\x3d"partners-64"\x3e\x3c/path\x3e\r\n                            \x3c/g\x3e\r\n                        \x3c/g\x3e\r\n                    \x3c/g\x3e\r\n                \x3c/g\x3e\r\n              \x3c/svg\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"flex-1 margin-left-1 margin-right-1"\x3e\r\n              \x3cp class\x3d"avenir-demi trailer-half"\x3e${i18n.myOrganization.overviewTab.collabOnboard.description}\x3c/p\x3e\r\n              \x3cbutton class\x3d"btn btn-clear" data-dojo-attach-point\x3d"collabBtn"\x3e${i18n.myOrganization.overviewTab.collabOnboard.buttonLabel}\x3c/button\x3e\r\n            \x3c/div\x3e\r\n            \x3cbutton class\x3d"btn-link btn-link-darker-gray" data-dojo-attach-point\x3d"dismissCollabOnBoard"\x3e\x3ccalcite-icon icon\x3d"x"\x3e\x3c/calcite-icon\x3e\x3c/button\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"alert alert-full font-size--1 trailer-1 org-overview__maintenance-alert" data-dojo-attach-point\x3d"_maintenanceContainer"\x3e\r\n          \x3cspan class\x3d"avenir-demi"\x3e${i18n.myOrganization.systemMaintenance}\x3c/span\x3e\r\n          \x3cdiv class\x3d"right"\x3e\r\n            \x3cbutton class\x3d"btn-link" data-dojo-attach-point\x3d"_maintenanceLink"\x3e${i18n.myOrganization.overviewTab.learnMore}\x3c/button\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"block-group block-group-2-up tablet-block-group-1-up phone-block-group-1-up org-overview__cards-container"\x3e\r\n          \x3cdiv class\x3d"js-org-info"\x3e\r\n            \x3cdiv class\x3d"card-content padding-trailer-0 org-overview__info-card-body"\x3e\r\n              \x3cdiv class\x3d"flex padding-trailer-half org-overview__info-card-content"\x3e\r\n                \x3cdiv class\x3d"flex-1 margin-right-1 org-overview__info-card-top"\x3e\r\n                  \x3cimg src\x3d"${portal.thumbnailUrl}" alt\x3d"" class\x3d"left margin-right-1 org-thumb-medium"\x3e\r\n                  \x3cdiv class\x3d"org-download-activity-link"\x3e\r\n                    \x3cbutton class\x3d"hide btn btn-transparent org-download-activity-btn margin-right-half btn-wrap text-left" data-dojo-attach-point\x3d"_downloadActivity"\x3e${i18n.myOrganization.orgInfoCard.activityDownload}\x3c/button\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"org-overview__info-mobile-title leader-1 avenir-demi"\x3e\r\n                    ${portal.name}\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"org-overview__info-card-right overview-card-col overflow-visible"\x3e\r\n                  \x3cdiv class\x3d"trailer-half hide" data-dojo-attach-point\x3d"_portalVersionContainer"\x3e\r\n                    \x3ch5 class\x3d"font-size--1 avenir-bold trailer-0"\x3e${i18n.myOrganization.orgInfoCard.portalVersion}\x3c/h5\x3e\r\n                    \x3cp class\x3d"font-size--2 trailer-0 margin-left-1" data-dojo-attach-point\x3d"_portalVersion"\x3e\x3c/p\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"trailer-1 org-overview__info-row" data-dojo-attach-point\x3d"_organizationIdContainer"\x3e\r\n                    \x3ch5 class\x3d"font-size--2 trailer-0"\x3e${i18n.myOrganization.orgInfoCard.subscriptionId}\x3c/h5\x3e\r\n                    \x3cp class\x3d"font-size--1 trailer-0"\x3e${subscriptionId}\x3c/p\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"trailer-1 org-overview__info-row hide" data-dojo-attach-point\x3d"_featureDSContainer"\x3e\r\n                    \x3ch5 class\x3d"font-size--2 trailer-0"\x3e\r\n                      \x3cspan class\x3d"js-no-ds-details"\x3e${i18n.myOrganization.featureDS}\x3c/span\x3e\r\n                      \x3cbutton class\x3d"btn-link font-size--2 js-ds-details hide" data-dojo-attach-point\x3d"viewDSBtn"\x3e${i18n.myOrganization.featureDS}\x3c/button\x3e\r\n                      \x3cdiv class\x3d"js-feature-ds-info"\x3e\x3c/div\x3e\r\n                    \x3c/h5\x3e\r\n                    \x3cp class\x3d"font-size--1 trailer-0 flex flex-align-center"\x3e\r\n                      \x3ccalcite-icon icon\x3d"data" class\x3d"margin-right-quarter" \x3e\x3c/calcite-icon\x3e\r\n                      \x3cspan data-dojo-attach-point\x3d"_featureDSLevel" class\x3d"org-overview__feature-ds-label"\x3e\x3c/span\x3e\r\n                      \x3ccalcite-icon icon\x3d"exclamation-mark-circle-f" class\x3d"margin-left-quarter hide" data-dojo-attach-point\x3d"featureDSIcon"\x3e\x3c/calcite-icon\x3e\r\n                    \x3c/p\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"trailer-1 org-overview__info-row hide" data-dojo-attach-point\x3d"_regionalDataHostingContainer"\x3e\r\n                    \x3ch5 class\x3d"font-size--2 trailer-0"\x3e${i18n.myOrganization.orgInfoCard.regionalDataHosting}\r\n                      \x3cdiv data-dojo-attach-point\x3d"_regionalDataHostingInfo"\x3e\x3c/div\x3e\r\n                    \x3c/h5\x3e\r\n                    \x3cp class\x3d"font-size--1 trailer-0" data-dojo-attach-point\x3d"_regionalHostingLocation"\x3e\x3c/p\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"trailer-1 org-overview__info-row only-on-mobile" data-dojo-attach-point\x3d"_mobileRenewalDateContainer"\x3e\r\n                    \x3ch5 class\x3d"font-size--2 trailer-0" data-dojo-attach-point\x3d"_mobileRenewalLabel"\x3e${i18n.myOrganization.orgInfoCard.renewalDate}\x3c/h5\x3e\r\n                    \x3cp class\x3d"font-size--1 trailer-0" data-dojo-attach-point\x3d"_mobileRenewalDate"\x3e\x3c/p\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"org-overview__info-system-health" data-dojo-attach-point\x3d"_systemHealthContainer"\x3e\r\n                    \x3ch5 class\x3d"font-size--2 trailer-0 hide-on-mobile"\x3e\r\n                      \x3ca class\x3d"font-size--2 flex flex-align-center" data-dojo-attach-point\x3d"systemHealthLink" href\x3d"https://status.arcgis.com/" target\x3d"_blank"\x3e${i18n.myOrganization.orgInfoCard.systemHealth} \x3ccalcite-icon class\x3d"margin-left-half" scale\x3d"s" icon\x3d"launch"\x3e\x3c/calcite-icon\x3e\x3c/a\x3e\r\n                    \x3c/h5\x3e\r\n                    \x3cp class\x3d"trailer-0" data-dojo-attach-point\x3d"_systemHealth"\x3e\x3c/p\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"hide" data-dojo-attach-point\x3d"_portalSystemHealthContainer"\x3e\r\n                      \x3ch5 class\x3d"font-size--1 trailer-0"\x3e\r\n                        \x3cspan class\x3d"avenir-bold"\x3e${i18n.myOrganization.orgInfoCard.systemHealth}\x3c/span\x3e\r\n                        \x3ca href\x3d"#" data-dojo-attach-point\x3d"_portalSystemHealthInfoLink"\x3e\r\n                          \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" class\x3d"org-overview__info-icon" viewBox\x3d"0 0 16 16"\x3e\r\n                            \x3cpath d\x3d"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM7.5 5.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM7 7h1v5H7zm2 5H6v-1h3z"\x3e\x3c/path\x3e\r\n                          \x3c/svg\x3e\r\n                        \x3c/a\x3e\r\n                      \x3c/h5\x3e\r\n                      \x3cp class\x3d"trailer-0 font-size--2" \x3e\r\n                        \x3cimg src\x3d"" class\x3d"org-overview__sync-icon" data-dojo-attach-point\x3d"_syncImage" \x3e \x3cspan class\x3d"org-overview__sync-status"\x3e${i18n.myOrganization.orgInfoCard.indexStatus}\x3c/span\x3e\r\n                      \x3c/p\x3e\r\n                      \x3cp class\x3d"trailer-0 font-size--2" data-dojo-attach-point\x3d"_serverValidationContainer" \x3e\r\n                          \x3cimg src\x3d"" class\x3d"org-overview__sync-icon" data-dojo-attach-point\x3d"_serverValidationImage" \x3e \x3cspan\x3e${i18n.myOrganization.orgInfoCard.federatedServersStatus}\x3c/span\x3e\r\n                      \x3c/p\x3e\r\n                      \x3cp class\x3d"trailer-0 font-size--2 margin-left-1 hide" data-dojo-attach-point\x3d"_noFederatedServers"\x3e\r\n                        ${i18n.myOrganization.orgInfoCard.noFederatedServers}\r\n                      \x3c/p\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"card-content hide-on-mobile" data-dojo-attach-point\x3d"_organizationDatesContainer"\x3e\r\n              \x3cdiv class\x3d"flex padding-leader-half padding-trailer-half overview-border-top"\x3e\r\n                \x3cdiv class\x3d"flex-1 margin-right-1" data-dojo-attach-point\x3d"_createdDateContainer"\x3e\r\n                  \x3ch5 class\x3d"font-size--2 trailer-0"\x3e${i18n.myOrganization.orgInfoCard.created}\x3c/h5\x3e\r\n                  \x3cp class\x3d"font-size-0 trailer-0" data-dojo-attach-point\x3d"_createdDate"\x3e\x3c/p\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"margin-left-1 overview-card-col" data-dojo-attach-point\x3d"_renewalDateContainer"\x3e\r\n                  \x3ch5 class\x3d"font-size--2 trailer-0"\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"_renewalDateLabel"\x3e${i18n.myOrganization.orgInfoCard.renewalDate}\x3c/span\x3e\r\n                    \x3cdiv class\x3d"hide" data-dojo-attach-point\x3d"_portalExpirationInfo"\x3e\x3c/div\x3e\r\n                    \x3cspan class\x3d"org-member-dot-separator" data-dojo-attach-point\x3d"_renewalDateDot"\x3e\u2022\x3c/span\x3e\r\n                    \x3cbutton data-dojo-attach-point\x3d"_renewLink" class\x3d"btn-link font-size--2 hide"\x3e${i18n.myOrganization.upgradeSubscriptionLabel}\x3c/button\x3e\r\n                    \x3cbutton data-dojo-attach-point\x3d"_purchaseLink" class\x3d"btn-link font-size--2 hide"\x3e${i18n.myOrganization.manageSubscriptionLabel}\x3c/button\x3e\r\n                  \x3c/h5\x3e\r\n                  \x3cp class\x3d"font-size-0 trailer-0" data-dojo-attach-point\x3d"_renewalDate"\x3e\r\n                  \x3c/p\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"flex-1 hide org-overview__info-card-right" data-dojo-attach-point\x3d"_licenseWarningContainer"\x3e\r\n                  \x3ch5 class\x3d"font-size--2 trailer-0 avenir-bold"\x3e${i18n.myOrganization.orgInfoCard.licenseExpirationWarning}\x3c/h5\x3e\r\n                  \x3cp class\x3d"font-size--2" data-dojo-attach-point\x3d"_licenseWarningMessage"\x3e\x3c/p\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"js-credits-info"\x3e\r\n            \x3cdiv class\x3d"card-content card-content-border-bottom card-content-border-top org-overview__credits-top"\x3e\r\n              \x3cdiv class\x3d"flex org-overview__credits-values-wrapper"\x3e\r\n                \x3cdiv class\x3d"margin-right-2 flex-1 js-credits-container org-overview__credits-container"\x3e\r\n                  \x3ch5 class\x3d"font-size--1 trailer-0 org-overview__credits-label" title\x3d"${i18n.myOrganization.creditsCard.totalRemainingCredits}"\x3e${i18n.myOrganization.creditsCard.totalRemainingCredits}\x3c/h5\x3e\r\n                  \x3cspan class\x3d"text-dark-green org-overview__credits-value js-credits-value font-size-6" data-dojo-attach-point\x3d"_availableCredits"\x3e\x3c/span\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"margin-right-2 flex-1 js-credits-container org-overview__credits-container hide-if-credits-error" data-dojo-attach-point\x3d"_lastMonthUsageContainer"\x3e\r\n                  \x3ch5 class\x3d"font-size--1 trailer-0 org-overview__credits-label js-credits-days-label" title\x3d"${i18n.myOrganization.creditsCard.lastThirtyDays}"\x3e${i18n.myOrganization.creditsCard.lastThirtyDays}\x3c/h5\x3e\r\n                  \x3cspan class\x3d"text-dark-green  org-overview__credits-value js-credits-value font-size-6" data-dojo-attach-point\x3d"_lastThirtyDaysUsage"\x3e\x3c/span\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"flex-1 js-credits-container org-overview__credits-container hide-if-credits-error" data-dojo-attach-point\x3d"_lastDayUsageContainer"\x3e\r\n                  \x3ch5 class\x3d"font-size--1 trailer-0 org-overview__credits-label" title\x3d"${i18n.myOrganization.creditsCard.lastTwentyFourHours}"\x3e${i18n.myOrganization.creditsCard.lastTwentyFourHours}\x3c/h5\x3e\r\n                  \x3cspan class\x3d"text-dark-green  org-overview__credits-value js-credits-value font-size-6" data-dojo-attach-point\x3d"_lastDayUsage"\x3e\x3c/span\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"card-content org-overview__credits-chart-container hide-if-credits-error"\x3e\r\n              \x3cdiv class\x3d"card-content-auto-top padding-trailer-half org-overview__credits-chart-body"\x3e\r\n                \x3ch5 class\x3d"font-size--1 trailer-0"\x3e\r\n                  \x3cspan class\x3d"hide-on-mobile"\x3e${i18n.myOrganization.creditsCard.lastThirtyDays}\x3c/span\x3e\r\n                  \x3cspan class\x3d"right font-size--2"\x3e\r\n                    \x3cspan class\x3d"margin-right-half"\x3e\r\n                      \x3csvg aria-hidden\x3d"true" role\x3d"none" focusable\x3d"false" overflow\x3d"hidden" width\x3d"14px" height\x3d"14px" class\x3d"org-overview__graph-icon--storage"\x3e\r\n                        \x3crect fill\x3d"#DEE9DE" fill-opacity\x3d"1"  width\x3d"14" height\x3d"14" ry\x3d"0" rx\x3d"0" \x3e\x3c/rect\x3e\r\n                      \x3c/svg\x3e\r\n                      ${i18n.myOrganization.creditsCard.storage}\r\n                    \x3c/span\x3e\r\n                    \x3cspan class\x3d"margin-right-half"\x3e\r\n                      \x3csvg aria-hidden\x3d"true" role\x3d"none" focusable\x3d"false" overflow\x3d"hidden" width\x3d"14px" height\x3d"14px" class\x3d"org-overview__graph-icon--analytics"\x3e\r\n                        \x3crect fill\x3d"#B3D5E6" fill-opacity\x3d"1"  width\x3d"14" height\x3d"14" ry\x3d"0" rx\x3d"0" \x3e\x3c/rect\x3e\r\n                      \x3c/svg\x3e\r\n                      ${i18n.myOrganization.creditsCard.analytics}\r\n                    \x3c/span\x3e\r\n                    \x3cspan class\x3d""\x3e\r\n                      \x3csvg aria-hidden\x3d"true" role\x3d"none" focusable\x3d"false" overflow\x3d"hidden" width\x3d"14px" height\x3d"14px" class\x3d"org-overview__graph-icon--subscriber"\x3e\r\n                        \x3crect fill\x3d"#F6D2C2" fill-opacity\x3d"1"  width\x3d"14" height\x3d"14" ry\x3d"0" rx\x3d"0" \x3e\x3c/rect\x3e\r\n                      \x3c/svg\x3e\r\n                      ${i18n.myOrganization.creditsCard.subscriberContent}\r\n                    \x3c/span\x3e\r\n                  \x3c/span\x3e\r\n                \x3c/h5\x3e\r\n                \x3cfigure role\x3d"group"\x3e\r\n                  \x3cdiv id\x3d"creditsChart" data-dojo-attach-point\x3d"_chartWrapper"\x3e\x3c/div\x3e\r\n                  \x3cfigcaption class\x3d"screen-readers-only"\x3e\r\n                    \x3ch2\x3e${i18n.myOrganization.creditsCard.chartCaption.title}\x3c/h2\x3e\r\n                    \x3ctable\x3e\r\n                      \x3cthead\x3e\r\n                        \x3ctr\x3e\r\n                          \x3cth\x3e${i18n.myOrganization.creditsCard.chartCaption.date}\x3c/th\x3e\r\n                          \x3cth\x3e${i18n.myOrganization.creditsCard.storage}\x3c/th\x3e\r\n                          \x3cth\x3e${i18n.myOrganization.creditsCard.analytics}\x3c/th\x3e\r\n                          \x3cth\x3e${i18n.myOrganization.creditsCard.subscriberContent}\x3c/th\x3e\r\n                        \x3c/tr\x3e\r\n                      \x3c/thead\x3e\r\n                      \x3ctbody class\x3d"js-chart-caption-body"\x3e\r\n                      \x3c/tbody\x3e\r\n                    \x3c/table\x3e\r\n                  \x3c/figcaption\x3e\r\n                \x3c/figure\x3e\r\n                \x3cdiv class\x3d"credits-date-labels font-size--2"\x3e\r\n                  \x3cdiv class\x3d"credits-start-date" data-dojo-attach-point\x3d"_creditsStartDate"\x3e\x3c/div\x3e\r\n                  \x3cdiv class\x3d"credits-end-date" data-dojo-attach-point\x3d"_creditsEndDate"\x3e\x3c/div\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"js-admin-contacts"\x3e\r\n            \x3cdiv class\x3d"card-content padding-leader-0" data-dojo-attach-point\x3d"_adminCardContent"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n\r\n          \x3cdiv class\x3d"js-members-info"\x3e\r\n            \x3cdiv class\x3d"card-content padding-trailer-0 org-overview__members-content"\x3e\r\n              \x3ccalcite-notice id\x3d"unverified-emails-notice"  icon\x3d"information" width\x3d"full" class\x3d"trailer-1"\x3e\r\n                \x3cdiv id\x3d"unverified-emails-notice-title" slot\x3d"title"\x3e\x3c/div\x3e\r\n                \x3cdiv slot\x3d"message"\x3e\r\n                  \x3cp id\x3d"unverified-emails-notice-message" class\x3d"trailer-half"\x3e\x3c/p\x3e\r\n                  \x3cdiv class\x3d"flex"\x3e\r\n                    \x3cdiv class\x3d"flex-1"\x3e\x3c/div\x3e\r\n                    \x3cbutton id\x3d"unverified-member-report-btn" class\x3d"btn-link margin-right-1 hide"\x3e${i18n.myOrganization.membersCard.unverifiedEmailNotice.createReport}\x3c/button\x3e\r\n                    \x3cbutton id\x3d"unverified-emails-btn" class\x3d"btn btn-clear"\x3e${i18n.myOrganization.membersCard.unverifiedEmailNotice.viewMembers}\x3c/button\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n              \x3c/calcite-notice\x3e\r\n              \x3cdiv id\x3d"unverified-modal"\x3e\x3c/div\x3e\r\n              \x3cdiv class\x3d"flex padding-trailer-1 overview-border-bottom org-overview__members-top" data-dojo-attach-point\x3d"_membersCardTop"\x3e\r\n                \x3cdiv class\x3d"flex-1 margin-right-2 org-overview__members-top-row"\x3e\r\n                  \x3ch5 class\x3d"font-size--1 trailer-0"\x3e${i18n.myOrganization.membersCard.totalMembers}\x3c/h5\x3e\r\n                  \x3cspan class\x3d"text-dark-green font-size-6" data-dojo-attach-point\x3d"_totalMembersCount"\x3e0\x3c/span\x3e\r\n                  \x3cspan class\x3d"hide font-size-6" data-dojo-attach-point\x3d"_totalAvailMembers"\x3e\x3c/span\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"flex-1 hide org-overview__pending-invites-wrapper org-overview__members-top-row" data-dojo-attach-point\x3d"_pendingInvites"\x3e\r\n                  \x3ch5 class\x3d"font-size--1 trailer-0"\x3e${i18n.myOrganization.membersCard.pendingInvites}\x3c/h5\x3e\r\n                  \x3cbutton class\x3d"btn-link font-size-6 btn-link-off-black"\r\n                    data-dojo-attach-point\x3d"_pendingInvitesCount" disabled\x3d"true"\x3e0\x3c/button\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"card-content" data-dojo-attach-point\x3d"_membersPerLicenseTypeSection"\x3e\r\n              \x3ch4 class\x3d"trailer-1 font-size-0"\x3e\r\n                ${i18n.myOrganization.membersCard.membersPerLicenseType}\r\n              \x3c/h4\x3e\r\n              \x3cdiv class\x3d"trailer-half" data-dojo-attach-point\x3d"_membersPerLicenseTypeList"\x3e\x3c/div\x3e\r\n              \x3ca href\x3d"#licenseTypes" class\x3d"hide leader-half trailer-half org-overview__more-usertypes" data-dojo-attach-point\x3d"_moreLicenseTypes"\x3e\x3c/a\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"js-newest-members"\x3e\r\n            \x3cdiv class\x3d"card-content padding-leader-0" data-dojo-attach-point\x3d"_newestMemberContent"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"js-licenses-info"\x3e\r\n            \x3c!-- \x3cdiv class\x3d"card-content padding-trailer-0 js-licenses-info-container"\x3e\r\n              \x3cdiv class\x3d"block-group block-group-2-up" data-dojo-attach-point\x3d"_proLicenseContainer"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e --\x3e\r\n            \x3cdiv class\x3d"card-content card-content-border-top org-overview__licenses-card-content js-licenses-info-container leader-half"\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"_licenseContainer"\x3e\x3c/div\x3e\r\n              \x3ca href\x3d"#licenses" class\x3d"inline-block font-size--1 leader-half org-overview__more-licenses" data-dojo-attach-point\x3d"_moreAppsLink"\x3e\x3c/a\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"card-content hide" data-dojo-attach-point\x3d"_noLicensesContainer"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"js-open-data"\x3e\r\n            \x3cdiv class\x3d"card-content trailer-1" data-dojo-attach-point\x3d"_openDataGroupsContainer"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"card block trailer-1 hide" data-dojo-attach-point\x3d"apiKeyCard"\x3e\r\n            \x3cdiv class\x3d"padding-left-1 padding-right-1 overview-card-heading padding-leader-half padding-trailer-half"\x3e\r\n              \x3cdiv class\x3d"trailer-0 font-size-1 avenir-demi flex"\x3e\r\n                \x3cdiv class\x3d"flex-1 text-ellipsis margin-right-1 overview-card__title"\x3e${orgStrings.apiKeysOverviewCard.apiKeys}\x3c/div\x3e\r\n                \x3ca href\x3d\'content.html?searchTerm\x3dtype%3A+"API+Key"+typekeywords%3A+"Registered+Apps"#organization\' target\x3d"_blank" class\x3d"font-size--1 avenir-regular overview-card-title-link"\x3e${orgStrings.apiKeysOverviewCard.viewAll}\x3c/a\x3e\r\n                \x3cspan class\x3d"org-overview__link-separator"\x3e|\x3c/span\x3e\r\n                \x3ca href\x3d"https://developers.arcgis.com/documentation/mapping-apis-and-services/security/api-keys/" target\x3d"_blank" class\x3d"font-size--1 avenir-regular overview-card-title-link"\x3e${orgStrings.apiKeysOverviewCard.learnMore}\x3c/a\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"card-content card-content-border-bottom card-content-border-top"\x3e\r\n              \x3cdiv class\x3d"flex api-keys-overview-card__content"\x3e\r\n                \x3cdiv class\x3d"flex-1"\x3e\r\n                  \x3ch5 class\x3d"font-size--1 trailer-0 org-overview__credits-label" title\x3d"${orgStrings.apiKeysOverviewCard.totalKeys}"\x3e${orgStrings.apiKeysOverviewCard.totalKeys}\x3c/h5\x3e\r\n                  \x3cspan class\x3d"text-dark-green org-overview__credits-value js-credits-value font-size-5" data-dojo-attach-point\x3d"totalAPIKeysContainer"\x3e\x3c/span\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"flex-1"\x3e\r\n                  \x3ch5 class\x3d"font-size--1 trailer-0 org-overview__credits-label" title\x3d"${orgStrings.apiKeysOverviewCard.keysUsed}"\x3e${orgStrings.apiKeysOverviewCard.keysUsed}\x3c/h5\x3e\r\n                  \x3cspan class\x3d"text-dark-green org-overview__credits-value js-credits-value font-size-5" data-dojo-attach-point\x3d"keysUsedContainer"\x3e\x3c/span\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"grid-container leader-1" data-dojo-attach-point\x3d"_contentCard"\x3e\r\n    \x3cdiv class\x3d"column-24"\x3e\r\n      \x3ch3 class\x3d"flex flex-wrap"\x3e\r\n        \x3cspan class\x3d"flex-1"\x3e${i18n.myOrganization.contentCard.contentTitle}\x3c/span\x3e\r\n        \x3ca href\x3d"content.html#organization" class\x3d"flex-0 font-size--2 link-darkest-gray inline-block leader-half"\x3e${i18n.myOrganization.contentCard.viewAll}${!icons.inline-end.launch.16}\x3c/a\x3e\r\n      \x3c/h3\x3e\r\n      \x3cdiv class\x3d"js-latest-content block-group block-group-5-up tablet-block-group-3-up phone-block-group-1-up"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/_featureDataStoreInfo.html":'\x3cp class\x3d"trailer-half"\x3e${currentLabel}\r\n    \x3cstrong\x3e${dataStoreName}\x3c/strong\x3e\r\n\x3c/p\x3e\r\n\x3cp class\x3d"trailer-half"\x3e${description}\r\n\x3cp class\x3d"trailer-half"\x3e\r\n    ${learnMore}\r\n\x3c/p\x3e',"url:arcgisonline/pages/organization/widgets/templates/_licenses.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"_controlBar" class\x3d"trailer-0"\x3e\x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"padding-leader-1 licenses__onboard-section overflow-hidden tablet-hide" data-dojo-attach-point\x3d"_onboardBannerContainer"\x3e\r\n    \x3cdiv class\x3d"grid-container"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_onboardBanner"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"licenses__section-tabs-container js-tabs-container flex"\x3e\r\n    \x3cdiv class\x3d"flex licenses__section-tabs" role\x3d"tablist"\x3e\r\n      \x3cbutton data-dojo-attach-point\x3d"_licenseTypesTab" data-section\x3d"licenseTypes" class\x3d"btn-link margin-right-3 js-section-tab licenses__tab-btn" role\x3d"tab" aria-controls\x3d"licenses-tab"\x3e${i18n.myOrganization.licensesTab.licenseTypes}\x3c/button\x3e\r\n      \x3cbutton data-dojo-attach-point\x3d"_appLicensesTab" data-section\x3d"applications" class\x3d"btn-link margin-right-3 js-section-tab tab-selected licenses__tab-btn" role\x3d"tab" aria-controls\x3d"apps-tab" aria-selected\x3d"true"\x3e${i18n.myOrganization.licensesTab.appLicenses}\x3c/button\x3e\r\n      \x3cbutton data-dojo-attach-point\x3d"_organizationCapabilitiesTab" data-section\x3d"organizationCapabilities" class\x3d"hide btn-link js-section-tab licenses__tab-btn" role\x3d"tab" aria-controls\x3d"org-extensions-tab"\x3e${i18n.myOrganization.licensesTab.organizationCapabilities}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"js-mobile-menu"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"licenses-tab padding-leader-1 padding-trailer-1" id\x3d"main-content-area"\x3e\r\n    \x3cdiv class\x3d"grid-container js-tab-content" data-dojo-attach-point\x3d"_appsContainer" role\x3d"tabpanel" id\x3d"apps-tab"\x3e\r\n        \x3cdiv class\x3d"grid-container leader-1 trailer-1 text-center licenses__no-licenses-section hide" data-dojo-attach-point\x3d"_noAddOnLicenses"\x3e\r\n            ${i18n.myOrganization.licensesTab.noAddOnLicenses}\r\n          \x3c/div\x3e\r\n        \x3cdiv class\x3d"text-center leader-1 text-constrain margin-auto hide"  data-dojo-attach-point\x3d"_noLicensesMatch"\x3e${i18n.myOrganization.licensesTab.noLicensesMatch}\x3c/div\x3e\r\n        \x3cdiv class\x3d"licenses__sections-container" data-dojo-attach-point\x3d"_appsLicenses"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"grid-container js-tab-content hide" data-dojo-attach-point\x3d"_licenseTypesTabContent" role\x3d"tabpanel" id\x3d"licenses-tab"\x3e\r\n      \x3cdiv class\x3d"trailer-1 leader-half column-12" data-dojo-attach-point\x3d"_userTypeDefinition"\x3e\r\n        ${i18n.myOrganization.licensesTab.licenseTypesDesc}\r\n        \x3ccalcite-link class\x3d"onboard__learn-more link-dark-blue" href\x3d"#licenseTypes" target\x3d"_blank" data-dojo-attach-point\x3d"_licenseTypesHelpLink"\x3e\r\n          ${i18n.myOrganization.licensesTab.learnMore}\r\n          \x3cspan class\x3d"margin-left-quarter inline-block"\x3e\r\n            \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" id\x3d"icons" class\x3d"svg-icon-dark-blue" viewBox\x3d"0 0 16 16"\x3e\x3cpath d\x3d"M14 8h1v7H1V1h7v1H2v12h12zm-4-7v1h3.29L7.62 7.67l.71.71L14 2.71V6h1V1z"\x3e\x3c/path\x3e\x3c/svg\x3e\r\n          \x3c/span\x3e\r\n        \x3c/calcite-link\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"text-center leader-1 text-constrain margin-auto hide" data-dojo-attach-point\x3d"_noUserTypeMatch"\x3e${i18n.myOrganization.licensesTab.noUserTypeMatch}\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_licenseTypesContainer" class\x3d"js-accordion trailer-2 column-24 licenses__user-types-container"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_organizationCapabilitiesTabContent" class\x3d"grid-container js-tab-content licenses__sections-container hide" role\x3d"tabpanel" id\x3d"org-extensions-tab"\x3e\r\n      \x3cdiv class\x3d"text-center leader-1 text-constrain margin-auto hide" data-dojo-attach-point\x3d"noOrgExtMatch"\x3e${i18n.myOrganization.licensesTab.noOrgExtMatch}\x3c/div\x3e\r\n      \x3cdiv class\x3d"licenses-section__cards-container block-group block-group-2-up tablet-block-group-1-up phone-block-group-1-up" data-dojo-attach-point\x3d"orgExtensionsSection"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/_licensesActions.html":'\x3cdiv class\x3d"flex full-width"\x3e\r\n  \x3c!-- \x3cdiv class\x3d"if-not-on-premise full-width"\x3e\r\n    \x3ca href\x3d"#" class\x3d"btn btn-small btn-clear btn-fill"\x3e${i18n.myOrganization.licensesTab.buyLicenses}\x3c/a\x3e\r\n  \x3c/div\x3e --\x3e\r\n  \x3cdiv class\x3d"if-on-premise full-width"\x3e\r\n    \x3cbutton class\x3d"btn btn-clear btn-fill js-import-licenses-btn"\x3e${i18n.manageLicenses.importLicenses.importLicenses}\x3c/button\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/licenses/LicenseTypeCard.html":'\x3cdiv class\x3d"license-type-card trailer-half"\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"accordionSection" class\x3d"license-type-card__top license-type-card--no-divider accordion-section"\x3e\r\n    \x3cdiv class\x3d"flex flex-wrap padding-left-0 license-type-card__top-row accordion-title"\x3e\r\n      ${!icons.chevron-down.24}\r\n      \x3cdiv class\x3d"flex-1" data-dojo-attach-point\x3d"_userTypeName"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"js-licenses-available"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"js-available-text"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"accordion-content"\x3e\r\n      \x3cdiv class\x3d"flex flex-wrap trailer-1 license-type-card__toggle-btns"\x3e\r\n        \x3cbutton class\x3d"margin-right-2 license-type-card__expand-link btn-link btn-link-darker-gray"\r\n          data-dojo-attach-point\x3d"_includedLicensesBtn"\x3e\r\n          \x3cspan class\x3d"license-type-card__count-label"\x3e${i18n.myOrganization.licensesTab.includedLicenses}\x3c/span\x3e\r\n        \x3c/button\x3e\r\n        \x3cbutton class\x3d"margin-right-2 license-type-card__expand-link btn-link btn-link-darker-gray"\r\n          data-dojo-attach-point\x3d"_compatibleLicensesBtn"\x3e\r\n          \x3cspan class\x3d"license-type-card__count-label"\x3e${i18n.myOrganization.licensesTab.compatibleLicenses}\x3c/span\x3e\r\n        \x3c/button\x3e\r\n        \x3cbutton class\x3d"license-type-card__expand-link btn-link btn-link-darker-gray" data-dojo-attach-point\x3d"_compatibleRolesBtn"\x3e\r\n          \x3cspan class\x3d"license-type-card__count-label"\x3e${i18n.myOrganization.licensesTab.compatibleRoles}\x3c/span\x3e\r\n        \x3c/button\x3e\r\n        \x3cdiv class\x3d"flex-1 user-type-card__expires-container"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_expiresBadge"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"license-type-card__list-container"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_includedLicenses" class\x3d"hide js-bottom-section"\x3e\r\n          \x3cdiv class\x3d"hide trailer-1" data-dojo-attach-point\x3d"proContainer"\x3e\r\n            \x3ch2 class\x3d"font-size-0 avenir-bold trailer-0"\x3e${i18n.myOrganization.licensesTab.arcgisPro}\x3c/h2\x3e\r\n            \x3cdiv class\x3d"block-group block-group-3-up tablet-block-group-1-up phone-block-group-1-up" data-dojo-attach-point\x3d"includedPro"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"hide trailer-1" data-dojo-attach-point\x3d"appBundlesContainer"\x3e\r\n            \x3ch2 class\x3d"font-size-0 avenir-bold trailer-0"\x3e${i18n.myOrganization.licensesTab.appBundles}\x3c/h2\x3e\r\n            \x3cdiv class\x3d"leader-half" data-dojo-attach-point\x3d"_includedAppBundles"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"hide trailer-1" data-dojo-attach-point\x3d"appsContainer"\x3e\r\n            \x3ch2 class\x3d"font-size-0 avenir-bold trailer-0"\x3e${i18n.myOrganization.licensesTab.applications}\x3c/h2\x3e\r\n            \x3cdiv class\x3d"block-group block-group-3-up tablet-block-group-1-up phone-block-group-1-up" data-dojo-attach-point\x3d"includedApps"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"hide trailer-1" data-dojo-attach-point\x3d"viewOnlyContainer"\x3e\r\n            \x3ch2 class\x3d"font-size-0 trailer-0"\x3e${i18n.myOrganization.licensesTab.viewOnly}\x3c/h2\x3e\r\n            \x3cdiv class\x3d"block-group block-group-3-up tablet-block-group-1-up phone-block-group-1-up" data-dojo-attach-point\x3d"includedViewOnly"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"hide trailer-1" data-dojo-attach-point\x3d"extensionsContainer"\x3e\r\n            \x3ch2 class\x3d"font-size-0 avenir-bold trailer-0"\x3e${i18n.myOrganization.licensesTab.userTypeExtensions}\x3c/h2\x3e\r\n            \x3cdiv class\x3d"block-group block-group-3-up tablet-block-group-1-up phone-block-group-1-up" data-dojo-attach-point\x3d"includedExtensions"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"hide trailer-1" data-dojo-attach-point\x3d"runtimeContainer"\x3e\r\n            \x3ch2 class\x3d"font-size-0 avenir-bold trailer-0"\x3e${i18n.myOrganization.inviteMembers.arcgisRuntime}\x3c/h2\x3e\r\n            \x3cdiv class\x3d"block-group block-group-3-up tablet-block-group-1-up phone-block-group-1-up" data-dojo-attach-point\x3d"includedRuntime"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_compatibleLicensesEl" class\x3d"hide js-bottom-section block-group block-group-3-up tablet-block-group-1-up phone-block-group-1-up license-type-card__expanded-section"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_compatibleRolesEl" class\x3d"hide js-bottom-section block-group block-group-3-up tablet-block-group-1-up phone-block-group-1-up license-type-card__expanded-section"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!-- \x3cdiv class\x3d"hide license-type-card__included-apps padding-leader-half padding-trailer-half" data-dojo-attach-point\x3d"_apps"\x3e\r\n    \x3cdiv class\x3d"trailer-quarter"\x3e${i18n.myOrganization.licensesTab.includedApps}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_appsContainer" class\x3d"block-group block-group-2-up tablet-block-group-1-up phone-block-group-1-up"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e --\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/licenses/UserTypeAppBundle.html":'\x3cdiv class\x3d"user-type-app-bundle"\x3e\r\n    \x3cdiv class\x3d"right margin-right-1 leader-half hide" data-dojo-attach-point\x3d"_viewOnly"\x3e\r\n        ${!icons.inline.info.16} ${i18n.myOrganization.licensesTab.viewOnlyAccess}\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"user-type-app-bundle__title" data-dojo-attach-point\x3d"_titleContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"margin-left-2 leader-half block-group block-group-${numberOfColumns}-up tablet-block-group-2-up phone-block-group-1-up" data-dojo-attach-point\x3d"_appsContainer"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/pages/organization/widgets/templates/licenses/MobileUserTypeOverlay.html":'\x3cdiv class\x3d"js-accordion mobile-user-type__body"\x3e\r\n  \x3csection class\x3d"accordion-section is-active"\x3e\r\n    \x3cbutton class\x3d"accordion-title text-left btn-link btn-link-darker-gray" tabindex\x3d"0"\x3e${chevronDown}${i18n.myOrganization.licensesTab.includedLicenses}\x3c/button\x3e\r\n    \x3cdiv class\x3d"accordion-content mobile-user-type__list js-included-apps"\x3e\x3c/div\x3e\r\n  \x3c/section\x3e\r\n  \x3csection class\x3d"accordion-section is-active"\x3e\r\n    \x3cbutton class\x3d"accordion-title text-left btn-link btn-link-darker-gray" tabindex\x3d"0"\x3e${chevronDown}${i18n.myOrganization.licensesTab.compatibleLicenses}\x3c/button\x3e\r\n    \x3cdiv class\x3d"accordion-content mobile-user-type__list js-compatible-apps"\x3e\x3c/div\x3e\r\n  \x3c/section\x3e\r\n  \x3csection class\x3d"accordion-section is-active"\x3e\r\n    \x3cbutton class\x3d"accordion-title text-left btn-link btn-link-darker-gray" tabindex\x3d"0"\x3e${chevronDown}${i18n.myOrganization.licensesTab.compatibleRoles}\x3c/button\x3e\r\n    \x3cdiv class\x3d"accordion-content mobile-user-type__list js-compatible-roles"\x3e\x3c/div\x3e\r\n  \x3c/section\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/licenses/roleItem.html":'\x3cdiv class\x3d"block flex leader-half"\x3e\r\n  \x3cspan class\x3d"inline-block margin-right-quarter js-role-name"\x3e${roleName}\x3c/span\x3e\r\n  \x3cbutton class\x3d"role-item-info btn-link btn-link-darker-gray" data-role-id\x3d"${roleId}"\x3e${infoIcon}\x3c/button\x3e\r\n\x3c/div\x3e\r\n',"url:arcgisonline/pages/organization/widgets/templates/licenses/LicensesSection.html":'\x3csection class\x3d"accordion-section is-active trailer-1 licenses-section"\x3e\r\n  \x3ch4 class\x3d"accordion-title font-size-2 trailer-half padding-left-quarter licenses-section__title" data-dojo-attach-point\x3d"_heading"\x3e\r\n    \x3cbutton class\x3d"btn-link btn-link-darker-gray font-size-2 accordion-title__btn licenses-section__title-btn" aria-expanded\x3d"true" data-dojo-attach-point\x3d"headingBtn"\x3e${!icons.chevron-down.24}${sectionTitle}\x3c/button\x3e\r\n    \x3cspan class\x3d"margin-left-1 font-size--1" data-dojo-attach-point\x3d"_sessionContainer"\x3e\r\n      \x3ccalcite-link data-dojo-attach-point\x3d"_viewDetailsBtn"\x3e${viewDetails}\x3c/calcite-link\x3e\r\n    \x3c/span\x3e\r\n    \x3cspan data-dojo-attach-point\x3d"_moreInfo"\x3e\x3c/span\x3e\r\n  \x3c/h4\x3e\r\n  \x3cdiv class\x3d"accordion-content padding-left-1 padding-right-1 licenses-section__content" data-dojo-attach-point\x3d"sectionContent"\x3e\r\n    \x3cdiv class\x3d"hide" data-dojo-attach-point\x3d"_offlineContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"settingsContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"hide" data-dojo-attach-point\x3d"_fromUserTypesContainer"\x3e\r\n      \x3cspan class\x3d"font-size--1" data-dojo-attach-point\x3d"_fromUserTypesLabel"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"licenses-section__cards-container block-group block-group-2-up tablet-block-group-1-up phone-block-group-1-up" data-dojo-attach-point\x3d"_cardsContainer"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/section\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/licenses/LicensesCard.html":'\x3cdiv class\x3d"card block trailer-1 licenses-card"\x3e\r\n  \x3cdiv class\x3d"licenses-card__body flex-1 overflow-visible"\x3e\r\n    \x3cdiv class\x3d"flex padding-trailer-quarter licenses-card__name-section"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_icon"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"flex-1 flex-column margin-left-half licenses-card__assigned-info"\x3e\r\n        \x3cdiv class\x3d"flex licenses-card__title-container"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"licenseName" class\x3d"licenses-card__name margin-right-half flex-1 font-size-1"\x3e${_title}\x3c/div\x3e\r\n          \x3cdiv\x3e\r\n            \x3cdiv class\x3d"hide font-size--2 licenses-card__expiration" data-dojo-attach-point\x3d"_expiration"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"hide" data-dojo-attach-point\x3d"_portalExpiration"\x3e\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"notAvailableKubernetes"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"popover" class\x3d"text-left hide"\x3e\r\n            \x3cspan tabindex\x3d"0" data-dojo-attach-point\x3d"closeIcon" class\x3d"info-tooltip__close popover-close icon-ui-close" tab-index\x3d"0" aria-label\x3d"${i18n.common.close}"\x3e\x3c/span\x3e\r\n            \x3cdiv class\x3d"popover-title"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"popover-text leader-half"\x3e${i18n.myOrganization.licensesTab.appBlocked}\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_userTypeName"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"flex font-size--1 trailer-half licenses-card__available-container"\x3e\r\n          \x3cdiv class\x3d"js-licenses-available"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv\x3e\r\n      \x3cdiv class\x3d"hide licenses-card__included-apps padding-leader-half padding-trailer-half" data-dojo-attach-point\x3d"_apps"\x3e\r\n        \x3cdiv class\x3d"trailer-quarter licenses-card__included-apps-title"\x3e${i18n.myOrganization.licensesTab.includedApps}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_appsContainer" class\x3d"block-group block-group-2-up tablet-block-group-1-up phone-block-group-1-up"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"padding-leader-half padding-trailer-quarter card-content-auto-top licenses-card__action-bar flex flex-wrap"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_compatibleBadge"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"flex flex-wrap flex-align-center" data-dojo-attach-point\x3d"_actionButtons"\x3e\r\n        \x3ccalcite-link data-dojo-attach-point\x3d"_manageButton"\x3e${i18n.myOrganization.licensesTab.manage}\x3c/calcite-link\x3e\r\n        \x3cdiv class\x3d"flex flex-align-center hide" data-dojo-attach-point\x3d"viewActivityWrapper"\x3e\r\n         \x3cdiv class\x3d"margin-left-half margin-right-half"\x3e | \x3c/div\x3e\r\n         \x3ccalcite-link data-dojo-attach-point\x3d"viewActivityButton" \x3e${i18n.manageLicenses.ProSettings.viewLicense}\x3c/calcite-link\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/ManageLicenseMembers/templates/ManageLicenseMembers.html":'\x3cdiv class\x3d"manage-license-members grid-container"\x3e\r\n  \x3cdiv class\x3d"position-relative full-height hide js-overlay-confirm"\x3e\r\n    \x3cdiv class\x3d"overlay-confirm-mask"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"overlay-confirm-pane position-relative"\x3e\r\n      \x3cbutton class\x3d"btn btn-link btn-link-darker-gray overlay-confirm-close-btn js-overlay-confirm-close-btn" \x3e${closeIcon}\x3c/button\x3e\r\n      \x3cdiv\x3e\r\n        \x3cdiv class\x3d"js-overlay-confirm-title avenir-demi font-size-1"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"js-overlay-confirm-description font-size--1"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"leader-half flex overlay-confirm-buttons"\x3e\r\n        \x3cbutton class\x3d"btn btn-clear js-overlay-confirm-cancel-btn"\x3e\x3c/button\x3e\r\n        \x3cbutton class\x3d"btn margin-left-half js-overlay-confirm-btn"\x3e\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"manage-license-members__top-bar js-top-bar"\x3e\r\n    \x3cdiv class\x3d"js-control-bar"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"hide js-mobile-header leader-half flex flex-1 flex-align-center"\x3e\r\n    \x3cdiv class\x3d"js-mobile-header-info"\x3e\r\n      \x3cdiv class\x3d"avenir-demi"\x3e${i18n.myOrganization.manageLicenseMembers.manageLicenses}\x3c/div\x3e\r\n      \x3cdiv class\x3d"flex"\x3e\r\n        \x3cdiv class\x3d"padding-right-half mobile-header-title js-license-title"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"js-license-available"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"flex manage-license-members__body column-24"\x3e\r\n    \x3cdiv class\x3d"manage-license-members__filters js-filters-panel"\x3e\r\n      \x3cdiv class\x3d"trailer-half font-size--1 avenir-demi tablet-hide"\x3e${i18n.myOrganization.manageLicenseMembers.filters}\x3c/div\x3e\r\n      \x3cdiv class\x3d"flex manage-license-members__assigned-filter"\x3e\r\n        \x3c!-- \x3cdiv class\x3d"flex-1 font-size--1"\x3e${i18n.myOrganization.manageLicenseMembers.assignedLicenses}\x3c/div\x3e --\x3e\r\n        \x3cdiv class\x3d"js-assigned-toggle"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"org-filters accordion filters--accordion js-filters-container"\x3e\r\n        \x3csection class\x3d"js-filter-category"\x3e\x3c/section\x3e\r\n        \x3csection class\x3d"js-filter-user-type"\x3e\x3c/section\x3e\r\n        \x3csection class\x3d"js-filter-role"\x3e\x3c/section\x3e\r\n        \x3csection class\x3d"js-filter-credits"\x3e\x3c/section\x3e\r\n        \x3csection class\x3d"js-filter-lastLogin"\x3e\x3c/section\x3e\r\n        \x3csection class\x3d"js-filter-loginType"\x3e\x3c/section\x3e\r\n        \x3csection class\x3d"js-filter-app"\x3e\x3c/section\x3e\r\n        \x3csection class\x3d"js-filter-group"\x3e\x3c/section\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"manage-license-members__members flex-1"\x3e\r\n      \x3ccalcite-notice  class\x3d"trailer-half js-blocked-notice"\x3e\r\n        \x3cdiv slot\x3d"message"\x3e${i18n.myOrganization.licensesTab.appBlocked}\x3c/div\x3e\r\n      \x3c/calcite-notice\x3e\r\n      \x3cdiv class\x3d"flex flex-wrap trailer-half font-size--2 manage-license-members__members-top-bar"\x3e\r\n        \x3cdiv class\x3d"js-filter-status-mobile"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"flex full-width"\x3e\r\n          \x3cdiv class\x3d"flex-1 flex flex-align-center"\x3e\r\n            \x3cdiv class\x3d"js-grid-member-count manage-license-members__member-count padding-right-half"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"js-filter-status"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cbutton class\x3d"btn-link leader-quarter trailer-quarter font-size--2 margin-left-half manage-license-members__assign-all js-all-btn"\x3e\x3c/button\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"manage-license-members__grid js-grid"\x3e\r\n        \x3cdiv class\x3d"loader padding-leader-3 padding-trailer-3 js-loader"\x3e\r\n          \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n          \x3cdiv class\x3d"loader-text"\x3e${i18n.myOrganization.manageLicenseMembers.loadingMembers}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"hide leader-1 text-center js-no-results"\x3e${i18n.GroupWidget.noMembers}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"js-pagination"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/ManageLicenseMembers/templates/ManageLicenseMembersRow.html":'\x3cdiv class\x3d"manage-license-members__grid-row flex flex-align-center"\x3e\r\n  \x3cdiv class\x3d"flex-1 font-size--1 manage-license-members__member-name-col margin-right-half"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_memberThumb"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cbutton class\x3d"btn-link hide only-on-mobile" aria-label\x3d"" data-dojo-attach-point\x3d"_infoButton"\x3e\r\n    ${!icons.inline.info.16}\r\n  \x3c/button\x3e\r\n  \x3cdiv class\x3d"flex flex-align-center"\x3e\r\n    \x3cbutton class\x3d"hide js-row-popup-btn"\x3e\x3c/button\x3e\r\n    \x3cdiv class\x3d"js-toggle-switch"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/ManageLicenseMembers/templates/CompatibleApps.html":'\x3cdiv class\x3d"trailer-1"\x3e\r\n  ${proMessage}\r\n  \x3cdiv class\x3d"leader-half"\x3e${i18n.myOrganization.manageLicenseMembers.mustHaveUserType}\x3c/div\x3e\r\n  \x3cul\x3e${compatibleList}\x3c/ul\x3e\r\n\x3c/div\x3e\r\n\x3cdiv\x3e${i18n.myOrganization.manageLicenseMembers.updatedOnMembersTab}\x3c/div\x3e\r\n',"url:arcgisonline/pages/dijit/ManageLicenseMembers/templates/CompatibleUserTypes.html":'\x3cdiv class\x3d"trailer-1"\x3e\r\n  ${i18n.myOrganization.manageLicenseMembers.updateMemberUserType}\r\n  \x3cul\x3e${compatibleList}\x3c/ul\x3e\r\n\x3c/div\x3e\r\n\x3cdiv\x3e${i18n.myOrganization.manageLicenseMembers.updatedOnMembersTab}\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/ManageLicenseMembers/templates/ChooseNotifyDescription.html":'\x3cdiv\x3e${question}\x3c/div\x3e\r\n\x3clabel class\x3d"leader-1 trailer-0 flex flex-align-center ${hide}"\x3e\r\n  \x3cdiv\x3e\x3cinput type\x3d"checkbox" class\x3d"js-checkbox" /\x3e\x3c/div\x3e\r\n  ${i18n.myOrganization.manageLicenseMembers.applySession}\r\n\x3c/label\x3e\r\n',"url:arcgisonline/pages/dijit/ManageLicenseMembers/templates/RowPopupButton.html":'\x3cbutton class\x3d"hide-on-mobile btn-link btn-link-darker-gray font-size--1"\x3e${label}\x3c/button\x3e\r\n',
"url:arcgisonline/pages/dijit/LicenseUsageDetails/templates/LicenseUsageDetails.html":'\x3cdiv class\x3d"license-usage-details"\x3e\r\n  \x3cdiv class\x3d"license-usage-details__top-bar js-top-bar"\x3e\r\n    \x3cdiv class\x3d"js-license-usage-control-bar"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"grid-container"\x3e\r\n    \x3cdiv class\x3d"license-usage-details__body column-24 leader-1"\x3e\r\n      \x3cdiv class\x3d"license-usage-details__members"\x3e\r\n        \x3cdiv class\x3d"trailer-half font-size--1 license-usage-details__members-top-bar"\x3e\r\n          \x3cdiv class\x3d"js-grid-member-count"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"license-usage-details__grid clearfix js-grid"\x3e\r\n          \x3cdiv class\x3d"loader padding-leader-3 padding-trailer-3 js-loader"\x3e\r\n            \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"loader-text"\x3e${i18n.myOrganization.manageLicenseMembers.loadingMembers}\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"column-24 tablet-column-12 phone-column-6 license-usage-details__grid-header"\x3e\r\n            \x3cdiv class\x3d"column-12 tablet-column-6 phone-column-3 font-size--1 license-usage-details__grid-member-name-col"\x3e${i18n.myOrganization.sessions.userCol}\x3c/div\x3e\r\n            \x3cdiv class\x3d"column-12 tablet-column-6 phone-column-3 font-size--1 license-usage-details__grid-last-used-col"\x3e${i18n.myOrganization.sessions.lastUsedCol}\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"hide padding-leader-2 text-center js-no-results"\x3e${i18n.myOrganization.licensesTab.noMembersFound}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"js-pagination"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/LicenseUsageDetails/templates/LicenseUsageRow.html":'\x3cdiv class\x3d"column-24 tablet-column-12 phone-column-6 license-usage-details__grid-row ${cssClasses}"\x3e\r\n  \x3cdiv\x3e\r\n    \x3cdiv class\x3d"column-12 tablet-column-6 phone-column-3 font-size--1 license-usage-details__member-name-col"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_memberThumb"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"column-12 tablet-column-6 phone-column-3 font-size--1 license-usage-details__last-used-col"\x3e\r\n        \x3cdiv class\x3d"inline-block margin-right-half license-usage-details__session-indicator" data-dojo-attach-point\x3d"_sessionIndicator"\x3e\x3c/div\x3e\r\n        \x3cspan\x3e${member.lastUsed}\x3c/span\x3e\r\n        \x3cspan data-dojo-attach-point\x3d"_disconnectedContainer"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"hide column-24 tablet-column-12 phone-column-6 font-size--1 text-center leader-1 trailer-1 license-usage-details__sessions-row" data-dojo-attach-point\x3d"_sessionsContainer"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/pages/dijit/LicenseUsageDetails/templates/LicenseSessionDetails.html":'\x3cdiv class\x3d"column-8 table-column-4 phone-column-2 text-left padding-leader-half padding-trailer-half license-session-details ${cssClasses}"\x3e\r\n  \x3cdiv class\x3d"margin-left-3"\x3e\r\n    \x3cdiv\x3e\r\n      \x3cdiv class\x3d"inline-block" data-dojo-attach-point\x3d"_onlineIndicator"\x3e\r\n        \x3csvg width\x3d"26px" height\x3d"19px" viewBox\x3d"0 0 26 19" version\x3d"1.1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink"\x3e\r\n          \x3cg id\x3d"license-tab---manage-offline-licenses" stroke\x3d"none" stroke-width\x3d"1" fill\x3d"none" fill-rule\x3d"evenodd"\x3e\r\n            \x3cg id\x3d"license-page---view-type3-copy-12" transform\x3d"translate(-89.000000, -449.000000)" fill-rule\x3d"nonzero"\x3e\r\n              \x3cg id\x3d"Group" transform\x3d"translate(91.000000, 449.000000)"\x3e\r\n                \x3cg id\x3d"Group-12-Copy-3" transform\x3d"translate(5.000000, 0.000000)" fill\x3d"#000000"\x3e\r\n                  \x3cpath d\x3d"M19,13 L19,0 L0,0 L0,13 L7,13 L7,15 L5,15 L5,16 L14,16 L14,15 L12,15 L12,13 L19,13 Z M1,12 L1,1 L18,1 L18,12 L1,12 Z M11,15 L8,15 L8,13 L11,13 L11,15 Z M17,3 L2,3 L2,2 L17,2 L17,3 Z"\r\n                    id\x3d"Shape"\x3e\x3c/path\x3e\r\n                \x3c/g\x3e\r\n                \x3ccircle id\x3d"Oval" stroke\x3d"#FFFFFF" stroke-width\x3d"1.5" fill\x3d"#338033" cx\x3d"5" cy\x3d"12" r\x3d"5.75"\x3e\x3c/circle\x3e\r\n              \x3c/g\x3e\r\n            \x3c/g\x3e\r\n          \x3c/g\x3e\r\n        \x3c/svg\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"hide inline-block" data-dojo-attach-point\x3d"_disconnectedIndicator"\x3e\r\n        \x3csvg width\x3d"26px" height\x3d"19px" viewBox\x3d"0 0 26 19" version\x3d"1.1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink"\x3e\r\n          \x3cg id\x3d"license-tab---manage-offline-licenses" stroke\x3d"none" stroke-width\x3d"1" fill\x3d"none" fill-rule\x3d"evenodd"\x3e\r\n            \x3cg id\x3d"license-page---view-type3-copy-13" transform\x3d"translate(-90.000000, -283.000000)" fill-rule\x3d"nonzero"\x3e\r\n              \x3cg id\x3d"Group" transform\x3d"translate(92.000000, 283.000000)"\x3e\r\n                \x3cg id\x3d"Group-12-Copy-3" transform\x3d"translate(5.000000, 0.000000)" fill\x3d"#000000"\x3e\r\n                  \x3cpath d\x3d"M19,13 L19,0 L0,0 L0,13 L7,13 L7,15 L5,15 L5,16 L14,16 L14,15 L12,15 L12,13 L19,13 Z M1,12 L1,1 L18,1 L18,12 L1,12 Z M11,15 L8,15 L8,13 L11,13 L11,15 Z M17,3 L2,3 L2,2 L17,2 L17,3 Z"\r\n                    id\x3d"Shape"\x3e\x3c/path\x3e\r\n                \x3c/g\x3e\r\n                \x3ccircle id\x3d"Oval" stroke\x3d"#FFFFFF" stroke-width\x3d"1.5" fill\x3d"#C7461A" cx\x3d"5" cy\x3d"12" r\x3d"5.75"\x3e\x3c/circle\x3e\r\n              \x3c/g\x3e\r\n            \x3c/g\x3e\r\n          \x3c/g\x3e\r\n        \x3c/svg\x3e\r\n      \x3c/div\x3e\r\n      \x3cspan class\x3d"avenir-bold font-size--1 license-session-details__alias-name"\x3e${session.sessionName}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"license-session-details__info"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_disconnectedLabel"\x3e${i18n.disconnected}\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_createdLabelContainer"\x3e${i18n.created} \x3cspan data-dojo-attach-point\x3d"_createdLabel"\x3e\x3c/span\x3e\x3c/div\x3e\r\n      ${i18n.lastUsed} \x3cspan data-dojo-attach-point\x3d"_lastUsedLabel"\x3e\x3c/span\x3e\x3cbr\x3e\r\n      ${i18n.activeUntil} \x3cspan data-dojo-attach-point\x3d"_activeUntilLabel"\x3e\x3c/span\x3e\x3cbr\x3e\r\n      \x3cbutton class\x3d"btn-link" type\x3d"button" data-dojo-attach-point\x3d"_endSessionBtn"\x3e${i18n.endSession}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/pages/organization/widgets/onboard/templates/OnboardPopup.html":'\x3cdiv class\x3d"onboard-popup"\x3e\r\n  \x3cdiv class\x3d"position-relative"\x3e\r\n    \x3cbutton class\x3d"btn-link onboard-popup__close-btn" data-dojo-attach-point\x3d"_closeButton"\x3e\r\n         ${!icons.inline.x.24}\r\n    \x3c/button\x3e\r\n    \x3cdiv class\x3d"flex onboard-popup__top-section"\x3e\r\n      \x3cdiv class\x3d"position-relative"\x3e\r\n        \x3cdiv class\x3d"onboard-popup__text-container"\x3e\r\n          \x3ch4 class\x3d"avenir-bold trailer-quarter" data-dojo-attach-point\x3d"_titleText"\x3e\x3c/h4\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_descriptionText"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv\x3e\r\n        \x3cimg data-dojo-attach-point\x3d"_img" class\x3d"onboard-popup__img"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"flex onboard-popup__bottom-section"\x3e\r\n      \x3cbutton class\x3d"hide btn-link onboard-popup__back-btn flex" data-dojo-attach-point\x3d"_backButton"\x3e\r\n        \x3cspan class\x3d"margin-right-quarter onboard__back-button-icon"\x3e\r\n          ${!icons.inline.chevron-right.16}\r\n        \x3c/span\x3e\r\n        ${i18n.myOrganization.onboarding.back}\r\n      \x3c/button\x3e\r\n      \x3cdiv class\x3d"flex flex-1 onboard__toggle-container" data-dojo-attach-point\x3d"_toggleContainer"\x3e\x3c/div\x3e\r\n      \x3cbutton class\x3d"btn-link onboard-popup__primary-button hide" data-dojo-attach-point\x3d"_doneButton"\x3e${doneButtonText}\x3c/button\x3e\r\n      \x3cbutton class\x3d"btn-link onboard-popup__primary-button" data-dojo-attach-point\x3d"_nextButton"\x3e${i18n.myOrganization.onboarding.next}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/MobileMenu.html":'\x3cdiv class\x3d"only-on-mobile position-relative org-settings__mobile-nav-container"\x3e\r\n    \x3cbutton class\x3d"flex flex-align-center btn-link btn-link-darker-gray org-settings__title-btn" data-dojo-attach-point\x3d"titleBtn"\x3e\r\n      \x3cdiv class\x3d"font-size-4 avenir-bold org-settings__main-title" data-dojo-attach-point\x3d"titleEl"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"margin-left-quarter"\x3e${!icons.chevron-down.24}\x3c/div\x3e\r\n    \x3c/button\x3e\r\n    \x3cdiv class\x3d"org-settings__mobile-menu" data-dojo-attach-point\x3d"menuContainer"\x3e\r\n      \x3cdiv class\x3d"org-settings__mobile-nav-mask"\x3e\x3c/div\x3e\r\n      \x3cnav class\x3d"org-settings__mobile-nav flex-0 flex flex-column" role\x3d"tablist" data-dojo-attach-point\x3d"nav"\x3e\r\n        \x3cdiv class\x3d"flex trailer-half"\x3e\r\n          \x3cdiv class\x3d"flex-1"\x3e\x3c/div\x3e\r\n          \x3cbutton class\x3d"btn-link btn-link-darker-gray" data-dojo-attach-point\x3d"closeBtn" aria-label\x3d"${i18n.common.close}"\x3e${!icons.x.16}\x3c/button\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"org-settings__mobile-nav-content" data-dojo-attach-point\x3d"navContent"\x3e\x3c/nav\x3e\r\n      \x3c/nav\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/MobileMenuItem.html":'\x3ca role\x3d"tab" aria-selected\x3d"false" class\x3d"subnav-link padding-left-3"\x3e\r\n  \x3cspan class\x3d"subnav-link__text no-pointer" \x3e${name}\x3c/span\x3e\r\n\x3c/a\x3e\r\n',"url:arcgisonline/sharing/dijit/dialog/templates/ImportProductLicensesDlg.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" class\x3d"${baseClass} import-product-licenses-dialog" data-dojo-attach-point\x3d"_dialog" title\x3d"${i18n.importLicenses}"\x3e\r\n    \x3cdiv class\x3d"leader-1" data-dojo-attach-point\x3d"_importContainer"\x3e\r\n      ${i18n.selectFile}\r\n      \x3cform class\x3d"leader-1" data-dojo-attach-point\x3d"_licenseFileForm"\x3e\r\n        \x3cdiv\x3e\r\n          \x3clabel for\x3d"license-file"\x3e\r\n            ${i18n.licenseFile}\r\n            \x3cinput id\x3d"license-file" type\x3d"file" name\x3d"file" data-dojo-attach-point\x3d"_file"\x3e\r\n            \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_fileError"\x3e\x3c/div\x3e\r\n          \x3c/label\x3e\r\n        \x3c/div\x3e\r\n      \x3c/form\x3e\r\n      \x3cbr\x3e\r\n      \x3cdiv class\x3d"clearfix status-container esriFloatTrailing right leader-1"\x3e\r\n        \x3cbutton type\x3d"button" class\x3d"btn" data-dojo-attach-point\x3d"_importBtn"\x3e${i18n.importLabel}\x3c/button\x3e\r\n        \x3cbutton type\x3d"button" class\x3d"btn btn-clear" data-dojo-attach-point\x3d"_closeBtn"\x3e${i18n.cancel}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"leader-1" data-dojo-attach-point\x3d"_resultContainer" style\x3d"display:none;"\x3e\r\n      \x3cdiv class\x3d"import-product-licenses-result flex"\x3e\r\n        \x3cdiv class\x3d"inline-block import-product-licenses-result-icon margin-right-quarter" data-dojo-attach-point\x3d"_resultIcon"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"inline-block import-product-licenses-result-msg" data-dojo-attach-point\x3d"_resultMessage"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"hide leader-half" data-dojo-attach-point\x3d"_licenseManagerWarning"\x3e\r\n        ${i18n.licenseManagerWarning}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"clearfix esriFloatTrailing right leader-1"\x3e\r\n        \x3cbutton type\x3d"button" class\x3d"btn" data-dojo-attach-point\x3d"_okBtn"\x3e${i18n.ok}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/pages/organization/widgets/templates/licenses/OrgExtensionCard.html":'\x3cdiv class\x3d"card block trailer-1 licenses-card"\x3e\r\n  \x3cdiv class\x3d"licenses-card__body flex-1 overflow-visible"\x3e\r\n    \x3cdiv class\x3d"flex padding-trailer-quarter licenses-card__name-section"\x3e\r\n      \x3cdiv class\x3d"org-member-card__license-icon margin-right-half" data-dojo-attach-point\x3d"iconContainer"\x3e\r\n          \x3cimg data-dojo-attach-point\x3d"iconImg"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"flex-1 flex-column margin-left-half nested-flex-fix"\x3e\r\n        \x3cdiv class\x3d"flex"\x3e\r\n          \x3cdiv class\x3d"licenses-card__name margin-right-half flex-1 font-size-1" data-dojo-attach-point\x3d"nameEl"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"flex font-size--1 trailer-half"\x3e\r\n          ${i18n.availableToAllMembers}\r\n        \x3c/div\x3e\r\n        \x3cp class\x3d"hide font-size--1" data-dojo-attach-point\x3d"descriptionEl"\x3e\x3c/p\x3e\r\n        \x3cdiv class\x3d"hide font-size--1" data-dojo-attach-point\x3d"analyticsIoTInfo"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"computeSection" class\x3d"trailer-quarter"\x3e${i18n.computeUnits} \x3cspan class\x3d"margin-right-half avenir-bold" data-dojo-attach-point\x3d"computeUnits"\x3e\x3c/span\x3e\x3cbutton class\x3d"js-compute-info"\x3e\x3c/button\x3e\x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"storageSection" class\x3d"trailer-quarter"\x3e${i18n.storageUnits} \x3cspan class\x3d"margin-right-half avenir-bold" data-dojo-attach-point\x3d"storageUnits"\x3e\x3c/span\x3e\x3cbutton class\x3d"js-storage-info"\x3e\x3c/button\x3e\x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"itemSection" class\x3d"trailer-quarter"\x3e${i18n.itemUnits} \x3cspan class\x3d"margin-right-half avenir-bold" data-dojo-attach-point\x3d"itemUnits"\x3e\x3c/span\x3e\x3cbutton class\x3d"js-item-info"\x3e\x3c/button\x3e\x3c/div\x3e\r\n          \x3cdiv class\x3d"trailer-quarter"\x3e${i18n.region} \x3cspan class\x3d"avenir-bold" data-dojo-attach-point\x3d"regionValue"\x3e\x3c/span\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"compatibleContainer" class\x3d"hide padding-leader-half padding-trailer-quarter card-content-auto-top licenses-card__action-bar flex flex-wrap"\x3e\r\n      \x3cdiv class\x3d"flex flex-1 overflow-visible font-size--1"\x3e\r\n        \x3cdiv class\x3d"compatible-badge__label text-darker-gray flex-1" \x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"js-expiration"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"notAvailableKubernetes"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/members/controlBarActions.html":'\x3cdiv class\x3d"flex full-width position-relative"\x3e\r\n    \x3cdiv class\x3d"hide member-actions-mobile__pending-count member-actions-mobile js-pending-count"\x3e\x3c/div\x3e\r\n    \x3cbutton class\x3d"btn-link flex-1 member-actions-mobile__invite-members member-actions-mobile js-mobile-invite-btn" aria-label\x3d"${i18n.myOrganization.inviteUsersLabel}"\x3e\r\n        ${icons.user-plus.24}\r\n    \x3c/button\x3e\r\n    \x3cbutton class\x3d"btn btn-small btn-clear flex-1 member-actions-desktop js-action-inviteMembers js-invite-btn" data-action\x3d"inviteMembers"\x3e\r\n      ${i18n.myOrganization.inviteUsersLabel}\r\n    \x3c/button\x3e\r\n    \x3cbutton class\x3d"btn btn-small btn-clear flex-1 member-actions-desktop margin-left-half js-action-pendingMembers if-invite-enabled" data-action\x3d"showPendingInvitations"\x3e\r\n        ${i18n.myOrganization.pendingMembers.pendingMembers}\x26nbsp;\x3cspan class\x3d"margin-right-quarter js-pending-member-count"\x3e\x3c/span\x3e\r\n    \x3c/button\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/members/tableHead.html":'\x3cdiv class\x3d"table-select-row table-select-row-header org-members-table-head"  role\x3d"row"\x3e\r\n  \x3cspan class\x3d"table-select-cell table-select-cell-th table-select-checkbox ${selectClass} org-members__select-column" role\x3d"columnheader"\x3e\r\n    \x3clabel class\x3d"table-select-cell-sort table-select-check-all"\x3e\r\n      \x3cinput type\x3d"checkbox" aria-label\x3d"${i18n.filters.selectAll}" class\x3d"js-select-all org-members__select-all-checkbox"\x3e\r\n    \x3c/label\x3e\r\n  \x3c/span\x3e\r\n  \x3cspan class\x3d"table-select-cell table-select-cell-th org-member-user-column" role\x3d"columnheader"\x3e\r\n    \x3cbutton class\x3d"table-select-cell-sort js-table-sort-header" data-sort\x3d"fullname" data-sort-order\x3d"asc"\x3e${i18n.myOrganization.membersTab.member}\x3c/button\x3e\r\n  \x3c/span\x3e\r\n  \x3cspan class\x3d"table-select-cell table-select-cell-th table-mfa org-members__mfa-column" role\x3d"columnheader"\x3e\r\n    \x3cbutton class\x3d"table-select-cell-sort flex flex-center js-table-sort-header" data-sort\x3d"mfaenabled" data-sort-order\x3d"asc"\r\n      title\x3d"${i18n.myOrganization.securityTab.multiFactorAuth}"\r\n      aria-label\x3d"${i18n.myOrganization.securityTab.multiFactorAuth}"\x3e${icons.mobile.16}\r\n    \x3c/button\x3e\r\n  \x3c/span\x3e\r\n  \x3cspan class\x3d"table-select-cell table-select-cell-th org-members__credits-column" id\x3d"orgMembersCreditsColumn" title\x3d"${i18n.myOrganization.currentGrid.creditsRemaining}" role\x3d"columnheader"\x3e\r\n    \x3clabel class\x3d"table-select-cell-sort" data-sort\x3d"credits" data-sort-order\x3d"desc"\x3e${i18n.myOrganization.currentGrid.creditsRemaining}       \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" class\x3d"org-member-level-info-icon" id\x3d"orgMembersCreditsColumnIcon" viewBox\x3d"0 0 16 16"\x3e\r\n      \x3cpath d\x3d"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM7.5 5.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM7 7h1v5H7zm2 5H6v-1h3z"\x3e\x3c/path\x3e\r\n    \x3c/svg\x3e\x3c/label\x3e\r\n  \x3c/span\x3e\r\n  \x3cspan class\x3d"table-select-cell table-select-cell-th org-members__lastlogin-column" title\x3d"${i18n.myOrganization.currentGrid.lastLogin}" role\x3d"columnheader"\x3e\r\n    \x3cbutton class\x3d"table-select-cell-sort js-table-sort-header" data-sort\x3d"lastlogin" data-sort-order\x3d"desc"\x3e${i18n.myOrganization.currentGrid.lastLogin}\x3c/button\x3e\r\n  \x3c/span\x3e\r\n  \x3cspan class\x3d"table-select-cell table-select-cell-th if-can-view-user-types org-members__usertype-column" title\x3d"${i18n.myOrganization.membersTab.licenseType}" role\x3d"columnheader"\x3e\r\n    \x3clabel class\x3d"table-select-cell-sort"\x3e${i18n.myOrganization.membersTab.licenseType}\x3c/label\x3e\r\n  \x3c/span\x3e\r\n  \x3cspan class\x3d"table-select-cell table-select-cell-th if-can-view-user-roles org-members__role-column" title\x3d"${i18n.myOrganization.currentGrid.role}" role\x3d"columnheader"\x3e\r\n    \x3clabel class\x3d"table-select-cell-sort" data-sort\x3d"role" data-sort-order\x3d"asc"\x3e${i18n.myOrganization.currentGrid.role}\x3c/label\x3e\r\n  \x3c/span\x3e\r\n  \x3cspan class\x3d"table-select-cell table-select-cell-th org-members__action-column" role\x3d"columnheader"\x3e\r\n    \x3clabel class\x3d"table-select-cell-sort table-select-cell-action"\x3e\x26nbsp;\x3c/label\x3e\r\n  \x3c/span\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/members/tableRow.html":'\x3cdiv class\x3d"table-select-row flex table-select-row-avatar ${activeRow}" role\x3d"row"\x3e\r\n  \x3cspan class\x3d"table-select-cell table-select-checkbox flex-0 ${selectClass} org-members__select-column" role\x3d"cell"\x3e\r\n    \x3cinput type\x3d"checkbox" aria-label\x3d"${item.username:selectTitle}" class\x3d"js-table-select-checkbox org-members__select-checkbox" data-username\x3d"${item.username}" ${checked}\x3e\r\n  \x3c/span\x3e\r\n  \x3cspan class\x3d"table-select-cell org-member-user-column ${item.disabled:disabledAllowEventsClass}" role\x3d"cell"\x3e\r\n    \x3cdiv class\x3d"flex"\x3e\r\n        \x3cdiv class\x3d"margin-right-half" data-dojo-attach-point\x3d"_orgMemberThumbnail"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"flex-1 org-member__name-col"\x3e\r\n          \x3cdiv class\x3d"org-member-full-name avenir-demi"\x3e\r\n            \x3ca href\x3d"javascript:;" class\x3d"js-action" data-action\x3d"orgProfilePopup" title\x3d"${item.fullName}"\x3e${item.fullName}\x3c/a\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"org-member-username font-size--1"\x3e${item.username}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n  \x3c/span\x3e\r\n  \x3cspan data-dojo-attach-point\x3d"_mfaColumn" class\x3d"table-select-cell table-mfa flex-1 org-members__mfa-column ${item.disabled:disabledClass}" role\x3d"cell"\x3e\x3c/span\x3e\r\n  \x3cspan class\x3d"table-select-cell flex-1 org-members__credits-column ${item.disabled:disabledAllowEventsClass}" role\x3d"cell"\x3e\x3ca href\x3d"javascript:;" class\x3d"js-action" data-dojo-attach-point\x3d"_manageCredits" data-action\x3d"manageCredits" title\x3d"${item.creditsRemainingLabel}"\x3e${item.creditsRemainingLabel}\x3c/a\x3e\x3c/span\x3e\r\n  \x3cspan class\x3d"table-select-cell flex-1 org-members__lastlogin-column ${item.disabled:disabledClass}" role\x3d"cell"\x3e\x3cspan aria-label\x3d"${item.lastLogin:lastLoginDate}" data-dojo-attach-point\x3d"_lastLoginInfo"\x3e${item.lastLogin:lastLoginDate}\x3c/span\x3e\x3c/span\x3e\r\n  \x3cspan class\x3d"table-select-cell flex-1 org-members__usertype-column if-can-view-user-types ${item.disabled:disabledAllowEventsClass}" data-dojo-attach-point\x3d"_userTypeColumn" role\x3d"cell"\x3e\r\n    \x3ca href\x3d"javascript:;" class\x3d"js-action if-can-manage-user-types" data-action\x3d"manageLicenseType" title\x3d"${item.licenseType.name}" data-dojo-attach-point\x3d"_manageUserTypeLink"\x3e${item.licenseType.name}\x3c/a\x3e\r\n    \x3cspan class\x3d"if-cannot-manage-user-types"\x3e${item.licenseType.name}\x3c/span\x3e\r\n  \x3c/span\x3e\r\n  \x3cspan class\x3d"table-select-cell flex-1 org-members__role-column ${item.disabled:disabledAllowEventsClass} if-can-view-user-roles" role\x3d"cell"\x3e\x3cdiv data-dojo-attach-point\x3d"_memberRole"\x3e\x3c/div\x3e\x3c/span\x3e\r\n  \x3cspan class\x3d"table-select-cell org-members__action-column org-members__action-column-body table-select-cell-overflow" role\x3d"cell"\x3e\r\n    \x3cdiv class\x3d"dropdown dropdown-up js-dropdown" data-dojo-attach-point\x3d"_actionsContainer"\x3e\r\n      \x3cbutton class\x3d"btn btn-link btn-link-darker-gray leader-quarter js-dropdown-toggle" aria-haspopup\x3d"true" aria-expanded\x3d"false" data-dojo-attach-point\x3d"_actionsBtn" aria-label\x3d"${item.fullName:openActionsFor}"\x3e\r\n        ${!icons.ellipsis-f.16}\r\n      \x3c/button\x3e\r\n      \x3cnav data-dojo-attach-point\x3d"_actionLinks"\x3e\x3c/nav\x3e\r\n    \x3c/div\x3e\r\n  \x3c/span\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/members/empty.html":'\x3cdiv class\x3d"js-empty-view text-center"\x3e\r\n  \x3ch3\x3e${i18n.GroupWidget.emptyMembers}\x3c/h3\x3e\r\n\x3c/div\x3e',"url:arcgisonline/pages/organization/widgets/templates/members/none.html":'\x3cdiv class\x3d"text-center leader-1 text-constrain margin-auto"\x3e${i18n.GroupWidget.noMembers}\x3c/div\x3e',"url:arcgisonline/pages/organization/widgets/templates/members/mobileInviteOptions.html":'\x3cbutton class\x3d"btn-link full-width text-center trailer-1 js-invite-btn"\x3e${i18n.inviteUsersLabel}\x3c/button\x3e\r\n\x3cbutton class\x3d"btn-link full-width text-center js-pending-btn"\x3e${pendingLabel}\x3c/button\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/_members.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"js-control-bar"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"members__onboard-section overflow-hidden tablet-hide" data-dojo-attach-point\x3d"_onboardBannerContainer"\x3e\r\n        \x3cdiv class\x3d"grid-container"\x3e\r\n          \x3cdiv class\x3d"js-onboard-banner"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3csection class\x3d"grid-container"\x3e\r\n        \x3cdiv class\x3d"column-24 flex"\x3e\r\n            \x3c!-- Left Side --\x3e\r\n            \x3cdiv class\x3d"js-filter-wrap"\x3e\r\n                \x3ch4 class\x3d"trailer-half font-size--1 avenir-demi tablet-hide"\x3e${i18n.GroupWidget.filters}\x3c/h4\x3e\r\n                \x3c!-- Filters --\x3e\r\n                \x3cdiv class\x3d"js-filters  org-filters"\x3e\r\n                    \x3cdiv class\x3d"filters--accordion js-members-filter"\x3e\x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3c!-- Main --\x3e\r\n            \x3cmain class\x3d"view-wrap org-members-main-panel js-view-wrap hide-created" id\x3d"main-content-area"\x3e\r\n                \x3c!-- Hide if members are selected --\x3e\r\n                \x3cdiv class\x3d"clearfix padding-trailer-quarter hide-if-selected flex break-word"\x3e\r\n                    \x3cdiv class\x3d"font-size--1 inline-block flex-1 flex flex-align-center filter-status-wrap"\x3e\r\n                        \x3c!-- Current/Total counts --\x3e\r\n                        \x3cspan class\x3d"padding-right-1 padding-left-0 padding-leader-quarter padding-trailer-quarter font-size--2 flex-0 break-word border-box text-ellipsis" data-dojo-attach-point\x3d"rangeText"\x3e\r\n                            \x3cspan data-dojo-attach-point\x3d"pageRange"\x3e\x3c/span\x3e\r\n                        \x3c/span\x3e\r\n\r\n                        \x3c!-- Filter Status --\x3e\r\n                        \x3cdiv class\x3d"inline-block js-filter-status"\x3e\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Show if members are selected --\x3e\r\n                \x3cdiv class\x3d"clearfix padding-trailer-half show-if-selected hide" data-dojo-attach-point\x3d"selectedWrap"\x3e\r\n                    \x3cdiv class\x3d"js-selected-members"\x3e\x3c/div\x3e\r\n                    \x3cspan class\x3d"margin-left-1 margin-right-1"\x3e\r\n                        \x3cbutton class\x3d"js-deselect btn-link btn-link-black font-size--2"\x3e${i18n.GroupWidget.deselect}\x3c/button\x3e\r\n                    \x3c/span\x3e\r\n                    \x3cnav class\x3d"right flex flex-align-center"\x3e\r\n                        \x3cbutton class\x3d"btn-link btn-link-black margin-right-1 icon-ui-add-user font-size--2" data-dojo-attach-point\x3d"categorizeBtn"\x3e\r\n                          \x3cdiv class\x3d"flex flex-align-center"\x3e\r\n                            \x3ccalcite-icon icon\x3d"select-category" scale\x3d"s" class\x3d"margin-right-quarter" \x3e\x3c/calcite-icon\x3e ${i18n.categorize}\r\n                          \x3c/div\x3e\r\n                        \x3c/button\x3e\r\n                        \x3cbutton data-action\x3d"manageLicensesBulk"\r\n                            class\x3d"btn-link btn-link-black margin-right-1 icon-ui-add-user font-size--2 js-action-manageLicenses"\r\n                            data-dojo-attach-point\x3d"manageLicenses"\x3e${!icons.inline.key.16}${i18n.manageLicenses.overlayTitle}\x3c/button\x3e\r\n                        \x3cbutton data-action\x3d"manageLicenseTypesBulk"\r\n                            class\x3d"btn-link btn-link-black margin-right-1 icon-ui-add-user font-size--2 js-action-manageLicenseTypes"\r\n                            data-dojo-attach-point\x3d"manageLicenseTypes"\x3e${!icons.inline.user.16}${i18n.manageLicenseTypes.manageLicenseTypes}\x3c/button\x3e\r\n                        \x3cbutton data-dojo-attach-point\x3d"manageCredits"\r\n                            class\x3d"btn-link btn-link-black margin-right-1 font-size--2"\x3e${!icons.inline.credits.16}${i18n.formatters.manageCredits}\x3c/button\x3e\r\n                        \x3cdiv class\x3d"dropdown js-dropdown" data-dojo-attach-point\x3d"actionsContainer"\x3e\r\n                          \x3cbutton data-dojo-attach-point\x3d"moreBtn" class\x3d"btn btn-link btn-link-black leader-quarter js-dropdown-toggle font-size--2" tabindex\x3d"0" aria-haspopup\x3d"true" aria-expanded\x3d"false" aria-label\x3d"${i18n.formatters.more}"\x3e\r\n                            ${i18n.formatters.more} ${!icons.inline.chevron-down.16}\r\n                          \x3c/button\x3e\r\n                          \x3cnav class\x3d"dropdown-menu dropdown-right" role\x3d"menu"\x3e\r\n                            \x3cbutton class\x3d"dropdown-link js-action-disableMember" role\x3d"menuitem" data-action\x3d"disableMemberBulk" data-dojo-attach-point\x3d"disableMember"\x3e${!icons.inline.minus-circle.16}${i18n.formatters.suspendUser}\x3c/button\x3e\r\n                            \x3cbutton class\x3d"dropdown-link js-action-enableMember" role\x3d"menuitem" data-action\x3d"enableMemberBulk" data-dojo-attach-point\x3d"enableMember"\x3e${!icons.inline.check.16}${i18n.formatters.enableUser}\x3c/button\x3e\r\n                            \x3cbutton class\x3d"dropdown-link" role\x3d"menuitem"  data-dojo-attach-point\x3d"assignGroups"\x3e${!icons.inline.users.16}${i18n.membersTab.manageGroupMembership}\x3c/button\x3e\r\n                            \x3cbutton class\x3d"dropdown-link flex flex-align-center" role\x3d"menuitem"  data-dojo-attach-point\x3d"transferItems"\x3e${!icons.inline.user-right.16}${i18n.membersTab.transferItems}\x3c/button\x3e\r\n                            \x3cbutton class\x3d"dropdown-link flex flex-align-center" role\x3d"menuitem"  data-dojo-attach-point\x3d"deleteMembers"\x3e\x3ccalcite-icon icon\x3d"trash" scale\x3d"s" class\x3d"margin-right-half"\x3e\x3c/calcite-icon\x3e ${i18n.membersTab.deleteMembers}\x3c/button\x3e\r\n                            \x3c!-- \x3cbutton class\x3d"dropdown-link flex flex-align-center" role\x3d"menuitem"  data-dojo-attach-point\x3d"emptyRecycleBin"\x3e\x3ccalcite-icon icon\x3d"group-x" scale\x3d"s" class\x3d"margin-right-half"\x3e\x3c/calcite-icon\x3e ${i18n.membersTab.emptyBins}\x3c/button\x3e --\x3e\r\n                          \x3c/nav\x3e\r\n                        \x3c/div\x3e\r\n\r\n                        \x3c!-- N/A as bulk actions for 6.2 (Summer 2018) --\x3e\r\n                        \x3c!-- \x3cbutton data-action\x3d"enableEsriBulk"\r\n                            class\x3d"btn-link btn-link-darker-gray margin-right-1 icon-ui-update-user-role font-size--2 js-action-enableEsriAccess"\r\n                            data-dojo-attach-point\x3d"_enableEsriAccess"\x3e${i18n.formatters.enableEsri}\x3c/button\x3e --\x3e\r\n                        \x3c!-- \x3cbutton data-action\x3d"deleteMemberBulk"\r\n                            class\x3d"btn-link btn-link-darker-gray margin-right-1 icon-ui-remove-user font-size--2 js-action-deleteMember"\r\n                            data-dojo-attach-point\x3d"_deleteMember"\x3e${i18n.formatters.deleteUser}\x3c/button\x3e --\x3e\r\n                    \x3c/nav\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3c!-- Content Views --\x3e\r\n                \x3cdiv class\x3d"clearfix padding-trailer-half js-content js-views"\x3e\x3c/div\x3e\r\n\r\n                \x3c!-- Pagination --\x3e\r\n                \x3cdiv class\x3d"clearfix padding-leader-half padding-trailer-half js-pagination"\x3e\x3c/div\x3e\r\n            \x3c/main\x3e\r\n        \x3c/div\x3e\r\n    \x3c/section\x3e\r\n    \x3cdiv class\x3d"js-delete-members"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/CardMobile/CardMobile.html":'\x3ca href\x3d"item.html?id\x3d${item.id}" class\x3d"js-card block card card-mobile trailer-half" data-id\x3d"${item.id}"\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"dragHandle" class\x3d"card-drag-handle flex-center tooltip" tabindex\x3d"0" title\x3d"${i18n.orgHomePageSetup.content.reorder}" aria-label\x3d"${i18n.orgHomePageSetup.content.reorder}"\x3e\r\n    ${!icons.drag.16}\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"card-content"\x3e\r\n    \x3ch4 class\x3d"trailer-0 font-size-1"\x3e${item.title}\x3c/h4\x3e\r\n    \x3cp class\x3d"font-size--2 trailer-half flex"\x3e\r\n      \x3cspan class\x3d"flex-0"\x3e\r\n        \x3cimg width\x3d"16" src\x3d"${item.svgIconUrl16}" alt\x3d"" class\x3d"icon-inline icon-inline--on-left"\x3e\x26lrm;${item.displayName:formatDisplayName}\r\n      \x3c/span\x3e\r\n      \x3cspan class\x3d"margin-left-quarter margin-right-quarter flex-0"\x3e${i18n.itemProperties.by}\x3c/span\x3e\r\n      \x3cspan class\x3d"flex-1 text-ellipsis"\x3e${!item.ownerText}\x3c/span\x3e\r\n    \x3c/p\x3e\r\n    \x3cdiv class\x3d"clearfix"\x3e\r\n      \x3cspan class\x3d"left inline-block margin-right-1 margin-left-0 font-size--3 text-darker-gray"\x3e\r\n        \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 16 16" width\x3d"16" class\x3d"icon-inline icon-inline--on-left"\x3e\r\n          \x3cpath fill\x3d"currentColor" d\x3d"M8 7h3v1H7V3h1zm4.803 5.803a7.5 7.5 0 1 1 0-10.606 7.5 7.5 0 0 1 0 10.606zm-.636-9.97A6.591 6.591 0 0 0 .927 7H2v1H.927A6.567 6.567 0 0 0 7 14.073v-1.38h1v1.38a6.591 6.591 0 0 0 4.167-11.24z"/\x3e\r\n        \x3c/svg\x3e\r\n        ${item.modified:fullDate}\r\n      \x3c/span\x3e\r\n      \x3cdiv class\x3d"right inline-block card-badges js-card-badges"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/a\x3e\r\n',
"url:arcgisonline/pages/dijit/CardWide/CardWide.html":'\x3cdiv\r\n  class\x3d"js-card block card ${selectCardClass} ${selectedClass} ${removedClass} ${imageClass} card-wide trailer-1"\r\n  data-id\x3d"${item.id}"\r\n\x3e\r\n  \x3clabel class\x3d"card-select-check-mark js-card-select-check-mark-wrap"\x3e\r\n    \x3cinput\r\n      type\x3d"checkbox"\r\n      class\x3d"checkbox-custom-input js-card-select-check-mark"\r\n      value\x3d"${item.id}"\r\n      aria-label\x3d"${item.title:selectTitle}"\r\n      data-id\x3d"${item.id}"\r\n      ${checked}\r\n    /\x3e\r\n    \x3cspan class\x3d"checkbox-custom checkbox-custom--large checkbox-custom--on-dark"\x3e\r\n      \x3csvg viewBox\x3d"0 0 16 16" class\x3d"checkbox-custom-icon checkbox-custom-icon--checked"\x3e\r\n        \x3cpath d\x3d"M12.753 3l-7.319 7.497L3.252 8.31 2 9.373l3.434 3.434L14 4.24z" /\x3e\r\n      \x3c/svg\x3e\r\n      \x3csvg viewBox\x3d"0 0 16 16" class\x3d"checkbox-custom-icon checkbox-custom-icon--mixed"\x3e\r\n        \x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M4 7h8v2H4z" /\x3e\r\n      \x3c/svg\x3e\r\n    \x3c/span\x3e\r\n  \x3c/label\x3e\r\n  \x3ca\r\n    class\x3d"card-wide-image-wrap card-wide-image-wrap--static js-default-open"\r\n    href\x3d"${item.defaultOpenUrl:empty}"\r\n    aria-label\x3d"${!item.title}: ${item.defaultOpenText:empty}"\r\n  \x3e\r\n    \x3cspan class\x3d"card-image-overlay no-pointer"\x3e\r\n      \x3cspan class\x3d"font-size--1 text-center thumbnail-icon"\r\n        \x3e${!item.defaultOpenSvg:empty}${item.defaultOpenText:empty}\x3c/span\r\n      \x3e\r\n    \x3c/span\x3e\r\n    \x3cimg class\x3d"card-image--static js-card-image no-pointer" src\x3d"${item.largeThumbnailUrl}" alt\x3d"" /\x3e\r\n  \x3c/a\x3e\r\n  \x3cdiv class\x3d"card-content card-content-no-padding card-content--static"\x3e\r\n    \x3cdiv class\x3d"padding-left-half padding-right-half padding-leader-half card-last"\x3e\r\n      \x3ch4 class\x3d"trailer-quarter font-size-1"\x3e\r\n        \x3ca class\x3d"card-title-link js-card-title-link" href\x3d"item.html?id\x3d${item.id}"\x3e${!item.title}\x3c/a\x3e\r\n      \x3c/h4\x3e\r\n      \x3cdiv class\x3d"js-layers-tables font-size--2"\x3e\x3c/div\x3e\r\n      \x3cp class\x3d"font-size--2 trailer-half flex ${hasSublayers:show}"\x3e\r\n        \x3cspan class\x3d"js-layers-tables-toggle"\x3e\r\n          \x3cspan class\x3d"flex-0 ${showSource:show}"\x3e\x3cimg width\x3d"16" src\x3d"${item.svgIconUrl16}" alt\x3d"" class\x3d"icon-inline icon-inline--on-left"\x3e\x26lrm;${item.displayName:formatDisplayName}\x3c/span\x3e\r\n          \x3cspan class\x3d"flex-0 ${showSource:hide} tooltip tooltip--data" data-tooltip\x3d"${item.sourceLabel}"\x3e\x3cimg width\x3d"16" src\x3d"${item.svgIconUrl16}" alt\x3d"" class\x3d"icon-inline icon-inline--on-left"\x3e\x26lrm;${item.displayName:formatDisplayName}\x3c/span\x3e\r\n        \x3c/span\x3e\r\n      \x3c/p\x3e\r\n      \x3cp class\x3d"font-size--2 trailer-half leader-quarter"\x3e${item.snippet}\x3c/p\x3e\r\n      \x3cp class\x3d"font-size--3 trailer-half leader-quarter text-darker-gray"\x3e\r\n        \x3cspan\r\n          class\x3d"inline-block margin-right-1 card-created"\r\n          title\x3d"${i18n.contentPage.createdLabel} ${item.created:completeDate}"\r\n          \x3e${i18n.contentPage.created} ${item.created:fullDate}\x3c/span\r\n        \x3e\r\n        \x3cspan\r\n          class\x3d"inline-block margin-right-1"\r\n          title\x3d"${i18n.itemProperties.lastModified} ${item.modified:completeDate}"\r\n          \x3e${i18n.contentPage.modified} ${item.modified:fullDate}\x3c/span\r\n        \x3e\r\n        \x3cspan class\x3d"inline-block margin-right-1"\x3e${item:formatViewsLabel} ${item.numViews:formatNumViews}\x3c/span\x3e\r\n      \x3c/p\x3e\r\n      \x3cdiv class\x3d"js-sublayers"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"flex-1 card-badges js-card-badges trailer-half"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"card-action-bar flex flex-center clearfix"\x3e\r\n      \x3cdiv class\x3d"flex-1"\x3e\r\n        \x3cspan class\x3d"js-card-owner-text flex-1 text-ellipsis"\x3e${!item.ownerText}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"flex-0 flex flex-center card-actions"\x3e\r\n        \x3cspan class\x3d"js-share-summary"\x3e\x3c/span\x3e\r\n        \x3cdiv class\x3d"js-favorites-container inline-block"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"js-open-dropdown-container inline-block dropdown-up"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/TableRow/templates/TableRow.html":'\x3cdiv class\x3d"table-select-row ${activeRow} ${removedRow}" role\x3d"row"\x3e\r\n  \x3cspan class\x3d"table-select-cell table-select-checkbox ${selectClass}" role\x3d"cell"\x3e\r\n    \x3cinput type\x3d"checkbox" class\x3d"js-table-select-checkbox" aria-label\x3d"${item.title:selectTitle}" ${checked}\x3e\r\n  \x3c/span\x3e\r\n  \x3cspan class\x3d"table-select-cell table-select-cell-extra-wide" role\x3d"cell"\x3e\r\n    \x3cspan class\x3d"flex"\x3e\r\n      \x3cspan class\x3d"table-select-title flex flex-1"\x3e\r\n        \x3ca href\x3d"./item.html?id\x3d${item.id}" class\x3d"flex-1 overflow-hidden"\x3e${!item.title}\x3c/a\x3e\r\n      \x3c/span\x3e\r\n      \x3cspan class\x3d"padding-left-half padding-right-half table-select-item-type full-width"\x3e\r\n        \x3cspan class\x3d"flex-1"\x3e\r\n          \x3cspan class\x3d"js-layers-tables"\x3e\x3c/span\x3e\r\n          \x3cspan class\x3d"js-layers-tables-toggle display-block text-ellipsis" title\x3d"${item.displayName:formatDisplayName}"\x3e\r\n            \x3cimg src\x3d"${item.svgIconUrl16}" width\x3d"16" height\x3d"16" alt\x3d"" class\x3d"icon-inline icon-inline--on-left"\x3e\r\n            \x3cspan class\x3d"margin-left-quarter" dir\x3d"ltr"\x3e\x26lrm;${item.displayName:formatDisplayName}\x3c/span\x3e\r\n          \x3c/span\x3e\r\n        \x3c/span\x3e\r\n        \x3cspan class\x3d"table-select-item-type--badges js-badges"\x3e\x3c/span\x3e\r\n      \x3c/span\x3e\r\n      \x3cspan class\x3d"js-share-summary"\x3e\x3c/span\x3e\r\n      \x3cspan class\x3d"js-favorites-container inline-block"\x3e\x3c/span\x3e\r\n      \x3cspan class\x3d"js-open-dropdown-container ${dropdownClass}"\x3e\x3c/span\x3e\r\n    \x3c/span\x3e\r\n  \x3c/span\x3e\r\n  \x3cspan class\x3d"table-select-cell table-select-cell-medium" role\x3d"cell" title\x3d"${i18n.itemProperties.lastModified} ${item.modified:completeDate}"\x3e${item.modified:fullDate}\x3c/span\x3e\r\n  \x3cspan class\x3d"table-select-cell table-laptop-show" role\x3d"cell"\x3e${!item.ownerText}\x3c/span\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/RecycleDropdown.html":'\x3cdiv class\x3d"display-block dropdown js-dropdown"\x3e\r\n  \x3cbutton class\x3d"card-action js-dropdown-toggle" tabindex\x3d"0" aria-haspopup\x3d"true" aria-expanded\x3d"false"\r\n    aria-label\x3d"${i18n.siteHeader.moreOptions}"\x3e\r\n    ${icons.ellipsis-f.16}\r\n  \x3c/button\x3e\r\n  \x3cnav class\x3d"dropdown-menu dropdown-menu-constrained dropdown-right" role\x3d"menu"\x3e\r\n    \x3cbutton role\x3d"menuitem" class\x3d"table-laptop-hide dropdown-link js-inline-restore-container"\x3e${i18n.recycle.restore.restore}\x3c/button\x3e\r\n    \x3c!-- In Recycle bin --\x3e\r\n    \x3cbutton role\x3d"menuitem" class\x3d"dropdown-link js-item-permanently-delete"\x3e${i18n.recycle.permanentlyDelete}\x3c/button\x3e\r\n  \x3c/nav\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/ChoiceDlg.html":'\x3cdiv class\x3d"widgetContent"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"_dialog" id\x3d"choice-dialog" class\x3d"general-dialog" title\x3d"${i18n.notice}"\x3e\r\n    \x3cdiv style\x3d"margin-top:1em;" data-dojo-attach-point\x3d"choiceContent"\x3e\x3c/div\x3e\r\n    \x3cdiv style\x3d"clear: both; margin-top: 2em;" class\x3d"esriAlignTrailing right"\x3e\r\n      \x3cbutton data-dojo-attach-point\x3d"choiceOneButton" class\x3d"primary trailer-quarter" type\x3d"button" data-dojo-type\x3d"dijit/form/Button"\x3e\r\n        ${i18n.ok}\r\n      \x3c/button\x3e\r\n      \x3cbutton data-dojo-attach-point\x3d"choiceTwoButton" class\x3d"cancel btn-two trailer-quarter" type\x3d"button" data-dojo-type\x3d"dijit/form/Button"\x3e\r\n        ${i18n.cancel}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"clear:both; float:none; height: 0;"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/CreateFolder.html":'\x3cdiv data-dojo-attach-point\x3d"contentNode"\x3e\r\n    \x3cform data-dojo-attach-point\x3d"_createFolderForm"\x3e\r\n        \x3clabel for\x3d"create-new-folder"\x3e${i18n.folderDlg.folderName}\x3cinput id\x3d"create-new-folder" name\x3d"folder" type\x3d"text" data-dojo-attach-point\x3d"_input" maxlength\x3d"125"/\x3e\x3c/label\x3e\r\n    \x3c/form\x3e\r\n\x3c/div\x3e\r\n',"url:arcgisonline/sharing/dijit/dialog/templates/CreateGeolocatorDlg.html":'\x3cdiv data-dojo-attach-point\x3d"contentNode"\x3e\r\n  \x3cp data-dojo-attach-point\x3d"_message"\x3e\x3c/p\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"_itemPropertiesDlg"  data-dojo-type\x3d"arcgisonline/sharing/dijit/dialog/ItemPropertiesDlg" data-dojo-props\x3d"typeInfo:\'${_typeInfo}\', showFile:false, showUrl:false, showFolders:${showFolders}"\x3e\x3c/div\x3e\r\n  \x3c!-- \x3cdiv class\x3d"tileProperties"\x3e --\x3e \x3c!-- Radio Buttons Dialog: Use when Custom Urls can be set --\x3e\r\n  \x3c!--   \x3clabel\x3e${i18n.publishTileServiceDlg.tileSchemeLabel}\x3c/label\x3e --\x3e\r\n  \x3c!--   \x3cdiv class\x3d"tilePropertiesRadios"\x3e --\x3e\r\n  \x3c!--     \x3clabel\x3e --\x3e\r\n  \x3c!--       \x3cinput id\x3d"${id}-agoBasemap" data-dojo-attach-point\x3d"_agoBasemapRadio" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-props\x3d"checked:true" value\x3d"ago"\x3e${i18n.publishTileServiceDlg.matchAGOLBasemaps} --\x3e\r\n  \x3c!--     \x3c/label\x3e --\x3e\r\n  \x3c!--     \x3clabel\x3e --\x3e\r\n  \x3c!--       \x3cinput id\x3d"${id}-custom" data-dojo-attach-point\x3d"_customBasemapRadio" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-props\x3d"checked:false" value\x3d"custom"\x3e${i18n.publishTileServiceDlg.matchOwnBasemap} --\x3e\r\n  \x3c!--     \x3c/label\x3e --\x3e\r\n  \x3c!--     \x3cinput data-dojo-attach-point\x3d"_customBasemapUrl" class\x3d"custom esriLeadingMargin2" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-props\x3d"disabled:true,placeholder:\'${i18n.publishTileServiceDlg.tileSchemePlaceholder}\'"/\x3e --\x3e\r\n  \x3c!--   \x3c/div\x3e --\x3e\r\n  \x3c!-- \x3c/div\x3e --\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/AnalyzeResults/templates/_table-row.html":'\x3cdiv class\x3d"table-select-row" role\x3d"row"\x3e\r\n  \x3c!-- Field Name --\x3e\r\n  \x3cspan class\x3d"table-select-cell" role\x3d"cell"\x3e\r\n    \x3cspan class\x3d"flex"\x3e\r\n      \x3cspan class\x3d"table-select-field text-ellipsis"\x3e\r\n        \x3cspan class\x3d"margin-left-quarter text-ellipsis full-width display-block"\x3e${field.name}\x3c/span\x3e\r\n      \x3c/span\x3e\r\n    \x3c/span\x3e\r\n  \x3c/span\x3e\r\n\r\n  \x3c!-- Field Type --\x3e\r\n  \x3cspan class\x3d"table-select-cell" role\x3d"cell"\x3e\r\n    \x3cspan class\x3d"flex"\x3e\r\n      \x3cspan class\x3d"table-select-type text-ellipsis" data-dojo-attach-point\x3d"fieldTypeContainer"\x3e\r\n        \x3cspan class\x3d"margin-left-quarter text-ellipsis full-width" data-value\x3d"${field.type}"\x3e${field.type:_getFieldType}\x3c/span\x3e\r\n        \x3cselect data-dojo-attach-point\x3d"fieldTypes" class\x3d"leader-0 hide"\x3e\x3c/select\x3e\r\n      \x3c/span\x3e\r\n    \x3c/span\x3e\r\n  \x3c/span\x3e\r\n\r\n    \x3c!-- Location Type --\x3e\r\n  \x3cspan class\x3d"table-select-cell" role\x3d"cell"\x3e\r\n    \x3cspan class\x3d"flex"\x3e\r\n      \x3cspan class\x3d"table-select-location text-ellipsis" data-dojo-attach-point\x3d"locationFieldContainer"\x3e\r\n        \x3cspan class\x3d"margin-left-quarter text-ellipsis full-width" data-value\x3d"${field.locationType}"\x3e${field.locationType:_getLocationType}\x3c/span\x3e\r\n        \x3cselect data-dojo-attach-point\x3d"locationFields" class\x3d"leader-0 hide"\x3e\x3c/select\x3e\r\n      \x3c/span\x3e\r\n    \x3c/span\x3e\r\n  \x3c/span\x3e\r\n\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/AnalyzeResults/templates/_analyze-results.html":'\x3cdiv\x3e\r\n    \x3csection class\x3d"padding-leader-half padding-trailer-half content-container analyze-results"\x3e\r\n        \x3c!-- Main --\x3e\r\n        \x3cmain class\x3d"rtl-post-0"\x3e\r\n\r\n            \x3c!-- excel sheet --\x3e\r\n            \x3clabel class\x3d"padding-right-1 trailer-half if-excel js-allExcelSheets hide" for\x3d"allExcelSheets"\x3e${i18n.addItemFrm.allExcelSheets}\x3c/label\x3e\r\n            \x3cspan class\x3d"inline-block align-middle trailer-half if-excel js-allExcelSheets hide"\x3e\r\n              \x3cselect id\x3d"allExcelSheets" data-dojo-attach-point\x3d"_allExcelSheets" class\x3d"leader-0 js-excel-sheet"\x3e\x3c/select\x3e\r\n            \x3c/span\x3e\r\n\r\n            \x3c!-- Geocode Type --\x3e\r\n            \x3cfieldset class\x3d"fieldset-radio locate-features-using"\x3e\r\n                \x3clegend class\x3d"font-size-0"\x3e${i18n.addItemFrm.locateUsing}\x3c/legend\x3e\r\n                \x3clabel class\x3d"inline-block margin-right-half"\x3e\r\n                    \x3cinput type\x3d"radio" name\x3d"geocode" value\x3d"coordinates" data-dojo-attach-point\x3d"radio-coordinates"\x3e ${i18n.addItemFrm.latLong}\r\n                \x3c/label\x3e\r\n                \x3clabel class\x3d"inline-block margin-right-half"\x3e\r\n                    \x3cinput type\x3d"radio" name\x3d"geocode" value\x3d"address" data-dojo-attach-point\x3d"radio-address"\x3e ${i18n.addItemFrm.address}\r\n                \x3c/label\x3e\r\n                \x3clabel class\x3d"inline-block margin-right-half"\x3e\r\n                    \x3cinput type\x3d"radio" name\x3d"geocode" value\x3d"none" data-dojo-attach-point\x3d"radio-none"\x3e ${i18n.addItemFrm.table}\r\n                \x3c/label\x3e\r\n            \x3c/fieldset\x3e\r\n\r\n            \x3c!-- Geocoders --\x3e\r\n            \x3clabel class\x3d"padding-right-1 trailer-half if-location js-geocoders hide" for\x3d"geocoder"\x3e${i18n.addItemFrm.selectGeocoder}\x3c/label\x3e\r\n            \x3cspan class\x3d"inline-block align-middle trailer-half if-location js-geocoders hide"\x3e\r\n              \x3cselect id\x3d"geocoder" data-dojo-attach-point\x3d"_geocoders" class\x3d"leader-0 js-run-analyze"\x3e\x3c/select\x3e\r\n            \x3c/span\x3e\r\n\r\n            \x3c!-- Countries --\x3e\r\n            \x3clabel class\x3d"padding-right-1 trailer-half if-location js-countries hide" for\x3d"country"\x3e${i18n.addItemFrm.country}\x3c/label\x3e\r\n            \x3cspan class\x3d"inline-block align-middle trailer-half if-location js-countries hide"\x3e\r\n              \x3cselect id\x3d"country" data-dojo-attach-point\x3d"_countries" class\x3d"leader-0 js-run-analyze"\x3e\x3c/select\x3e\r\n            \x3c/span\x3e\r\n\r\n            \x3c!-- Table View --\x3e\r\n            \x3cdiv class\x3d"flex-0 break-word border-box text-ellipsis trailer-half js-view"\r\n                 data-dojo-attach-point\x3d"_reviewLabel"\x3e${i18n.addItemFrm.review}\x3c/div\x3e\r\n            \x3cdiv class\x3d"js-table-wrap table-select trailer-half js-view" role\x3d"table"\x3e\r\n                \x3cdiv class\x3d"table-select-head js-table-header" role\x3d"rowgroup"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"table-select-rows js-table-rows js-view" role\x3d"rowgroup"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3c!-- TimeZone --\x3e\r\n            \x3cdiv class\x3d"trailer-1 js-view"\x3e\r\n                  \x3clabel class\x3d"padding-right-1 trailer-half" for\x3d"timezone"\x3e${i18n.addItemFrm.timeZone}\x3c/label\x3e\r\n                  \x3cspan class\x3d"inline-block align-middle"\x3e\r\n                    \x3cselect id\x3d"timezone" data-dojo-attach-point\x3d"_timeZones" class\x3d"leader-0"\x3e\x3c/select\x3e\r\n                  \x3c/span\x3e\r\n                  \x3cspan\x3e\x3c/span\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3c!-- Loader --\x3e\r\n            \x3cdiv class\x3d"hide analyze-loader-wrap js-analyze-loader-wrap"\x3e\x3c/div\x3e\r\n\r\n        \x3c/main\x3e\r\n    \x3c/section\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/AnalyzeResults/templates/_table-head.html":'\x3cdiv class\x3d"table-select-row table-select-row-header" role\x3d"row"\x3e\r\n    \x3cspan class\x3d"table-select-cell table-select-cell-th" role\x3d"columnheader"\x3e\x3cbutton class\x3d"table-select-cell-sort js-table-sort-header" data-sort\x3d"field" data-sort-order\x3d"asc"\x3e${i18n.addItemFrm.fieldName}\x3c/button\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"table-select-cell table-select-cell-th" role\x3d"columnheader"\x3e\x3cbutton class\x3d"table-select-cell-sort js-table-sort-header" data-sort\x3d"type" data-sort-order\x3d"asc"\x3e${i18n.addItemFrm.fieldType}\x3c/button\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"table-select-cell table-select-cell-th" role\x3d"columnheader"\x3e\x3cbutton class\x3d"table-select-cell-sort js-table-sort-header" data-sort\x3d"location" data-sort-order\x3d"desc"\x3e${i18n.addItemFrm.locationFields}\x3c/button\x3e\x3c/span\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/AnalyzeResults/templates/_table-head-no-location.html":'\x3cdiv class\x3d"table-select-row table-select-row-header" role\x3d"row"\x3e\r\n    \x3cspan class\x3d"table-select-cell table-select-cell-th" role\x3d"columnheader"\x3e\x3cbutton class\x3d"table-select-cell-sort js-table-sort-header" data-sort\x3d"field" data-sort-order\x3d"asc"\x3e${i18n.addItemFrm.fieldName}\x3c/button\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"table-select-cell table-select-cell-th" role\x3d"columnheader"\x3e\x3cbutton class\x3d"table-select-cell-sort js-table-sort-header" data-sort\x3d"type" data-sort-order\x3d"asc"\x3e${i18n.addItemFrm.fieldType}\x3c/button\x3e\x3c/span\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/AnalyzeResults/templates/_table-row-no-location.html":'\x3cdiv class\x3d"table-select-row" role\x3d"row"\x3e\r\n  \x3c!-- Field Name --\x3e\r\n  \x3cspan class\x3d"table-select-cell" role\x3d"cell"\x3e\r\n    \x3cspan class\x3d"flex"\x3e\r\n      \x3cspan class\x3d"table-select-field text-ellipsis"\x3e\r\n        \x3cspan class\x3d"margin-left-quarter text-ellipsis full-width display-block"\x3e${field.name}\x3c/span\x3e\r\n      \x3c/span\x3e\r\n    \x3c/span\x3e\r\n  \x3c/span\x3e\r\n\r\n  \x3c!-- Field Type --\x3e\r\n  \x3cspan class\x3d"table-select-cell" role\x3d"cell"\x3e\r\n    \x3cspan class\x3d"flex"\x3e\r\n      \x3cspan class\x3d"table-select-type text-ellipsis" data-dojo-attach-point\x3d"_fieldTypeContainer"\x3e\r\n        \x3cspan class\x3d"margin-left-quarter text-ellipsis full-width" data-value\x3d"${field.type}"\x3e${field.type:_getFieldType}\x3c/span\x3e\r\n        \x3cselect data-dojo-attach-point\x3d"_fieldTypes" class\x3d"leader-0 hide"\x3e\x3c/select\x3e\r\n      \x3c/span\x3e\r\n    \x3c/span\x3e\r\n  \x3c/span\x3e\r\n\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/AnalyzeResults/templates/_table-head-no-type.html":'\x3cdiv class\x3d"table-select-row table-select-row-header" role\x3d"row"\x3e\r\n    \x3cspan class\x3d"table-select-cell table-select-cell-th" role\x3d"columnheader"\x3e\x3cbutton class\x3d"table-select-cell-sort js-table-sort-header" data-sort-order\x3d"asc"\x3e${i18n.addItemFrm.fieldName}\x3c/button\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"table-select-cell table-select-cell-th" role\x3d"columnheader"\x3e\x3cbutton class\x3d"table-select-cell-sort js-table-sort-header" data-sort-order\x3d"desc"\x3e${i18n.addItemFrm.locationFields}\x3c/button\x3e\x3c/span\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/AnalyzeResults/templates/_table-row-no-type.html":'\x3cdiv class\x3d"table-select-row" role\x3d"row"\x3e\r\n  \x3c!-- Field Name --\x3e\r\n  \x3cspan class\x3d"table-select-cell" role\x3d"cell"\x3e\r\n    \x3cspan class\x3d"flex"\x3e\r\n      \x3cspan class\x3d"table-select-field text-ellipsis"\x3e\r\n        \x3cspan class\x3d"margin-left-quarter text-ellipsis full-width display-block"\x3e${field.name}\x3c/span\x3e\r\n      \x3c/span\x3e\r\n    \x3c/span\x3e\r\n  \x3c/span\x3e\r\n\r\n    \x3c!-- Location Type --\x3e\r\n  \x3cspan class\x3d"table-select-cell" role\x3d"cell"\x3e\r\n    \x3cspan class\x3d"flex"\x3e\r\n      \x3cspan class\x3d"table-select-location text-ellipsis" data-dojo-attach-point\x3d"_locationFieldContainer"\x3e\r\n        \x3cspan class\x3d"margin-left-quarter text-ellipsis full-width" data-value\x3d"${field.locationType}"\x3e${field.locationType:_getLocationType}\x3c/span\x3e\r\n        \x3cselect data-dojo-attach-point\x3d"_locationFields" class\x3d"leader-0 hide"\x3e\x3c/select\x3e\r\n      \x3c/span\x3e\r\n    \x3c/span\x3e\r\n  \x3c/span\x3e\r\n\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/AnalyzeResults/templates/_table-head-no-location-no-type.html":'\x3cdiv class\x3d"table-select-row table-select-row-header" role\x3d"row"\x3e\r\n    \x3cspan class\x3d"table-select-cell table-select-cell-th" role\x3d"columnheader"\x3e\x3cbutton class\x3d"table-select-cell-sort js-table-sort-header" data-sort\x3d"field" data-sort-order\x3d"asc"\x3e${i18n.addItemFrm.fieldName}\x3c/button\x3e\x3c/span\x3e\r\n\x3c/div\x3e\r\n',"url:arcgisonline/sharing/dijit/AnalyzeResults/templates/_table-row-no-location-no-type.html":'\x3cdiv class\x3d"table-select-row" role\x3d"row"\x3e\r\n  \x3c!-- Field Name --\x3e\r\n  \x3cspan class\x3d"table-select-cell" role\x3d"cell"\x3e\r\n    \x3cspan class\x3d"flex"\x3e\r\n      \x3cspan class\x3d"table-select-field text-ellipsis"\x3e\r\n        \x3cspan class\x3d"margin-left-quarter text-ellipsis full-width display-block"\x3e${field.name}\x3c/span\x3e\r\n      \x3c/span\x3e\r\n    \x3c/span\x3e\r\n  \x3c/span\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/ConnectDataset.html":'\x3cdiv class\x3d"${baseClass}"\x3e\r\n   \x3c!-- data-dojo-attach-point\x3d"contentNode"\x3e --\x3e\r\n\r\n  \x3cdiv class\x3d"page1 changeOpacity divClickable"\x3e\r\n    \x3cbutton class\x3d"googleConnect connectButton btn btn-transparent"\x3e\x3c/button\x3e\r\n    \x3cbutton class\x3d"dropBoxConnect connectButton btn btn-transparent"\x3e\x3c/button\x3e\r\n    \x3cbutton class\x3d"oneDriveConnect connectButton btn btn-transparent"\x3e\x3c/button\x3e\r\n    \x3c!--Hide till box oauth is fixed\r\n     \x3cbr\x3e\x3cbr\x3e\r\n    \x3cbutton class\x3d"boxConnect connectButton btn btn-transparent"\x3e\x3c/button\x3e --\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"page2 changeOpacity divClickable hide"\x3e\r\n    \x3cinput type\x3d"search" placeholder\x3d"${i18n.connectDataset.searchPlaceholder}" aria-label\x3d"${i18n.connectDataset.searchPlaceholder}" class\x3d"searchCloudDrive flex-1 input-minimal"\x3e\r\n    \x3cselect class\x3d"modifier-class dropdownCloud"\x3e\r\n    \x3c/select\x3e\r\n\r\n    \x3ctable class\x3d"listExternalItemsTable modifier-class table-striped"\x3e\r\n      \x3cthead\x3e\r\n        \x3ctr\x3e\r\n          \x3cth\x3e${i18n.connectDataset.tableFileName}\x3c/th\x3e\r\n          \x3cth\x3e${i18n.connectDataset.tableFileType}\x3c/th\x3e\r\n        \x3c/tr\x3e\r\n      \x3c/thead\x3e\r\n    \x3c/table\x3e\r\n\r\n    \x3cbutton class\x3d"page2BackButton backButton btn btn-transparent"\x3e${i18n.connectDataset.backButton}\x3c/button\x3e\r\n\r\n    \x3cdiv class\x3d"paginationCloud text-center trailer-1 leader-1"\x3e\r\n      \x3cbutton class\x3d"previousButton btn btn-transparent btn-arrow"\x3e${i18n.connectDataset.previousPageButton}\x3c/button\x3e\r\n      \x3cbutton class\x3d"nextButton btn btn-transparent btn-arrow"\x3e${i18n.connectDataset.nextPageButton}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"page3 changeOpacity divClickable hide"\x3e\r\n    \x3cdiv id\x3d"itemPropertiesDlgAddon"\x3e\x3c/div\x3e\r\n    \x3cdiv id\x3d"analyzeResultsAddon"\x3e\x3c/div\x3e\r\n    \x3cbutton class\x3d"publishButton right btn"\x3e${i18n.connectDataset.publishButton}\x3c/button\x3e\r\n    \x3cbutton class\x3d"page3BackButton left backButton btn btn-transparent"\x3e${i18n.connectDataset.backButton}\x3c/button\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3c!-- Loader --\x3e\r\n  \x3cdiv class\x3d"loader loader-connectDataset is-active hide padding-leader-3 padding-trailer-3"\x3e\r\n    \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"loader-text"\x3e${i18n.connectDataset.defaultLoading}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/DatastoreDatabaseSettings.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"datastore-connection" data-dojo-attach-point\x3d"databaseGeneralDescription"\x3e\r\n    \x3clabel for\x3d"database-general-description"\x3e\r\n      \x3cp id\x3d"database-general-description" class\x3d"generalDescription" data-dojo-attach-point\x3d"databaseSettingsSubheader"\x3e\r\n        ${i18n.configurationGuide}\r\n      \x3c/p\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"datastore-connection" data-dojo-attach-point\x3d"publisherDatabaseContainer"\x3e\r\n    \x3clegend for\x3d"publisherDatabaseConnection"\x3e\r\n      ${i18n.publisherDatabaseConnection}\x3cspan class\x3d"sde-file"\x3e${i18n.sdeFile}\x3c/span\x3e\r\n    \x3c/legend\x3e\r\n    \x3cdiv\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"publisherLoader" class\x3d"hide loader-container"\x3e\r\n        \x3cimg src\x3d"./js/arcgisonline/css/images/LoadingAnimation_circle24blue.gif"\r\n          alt\x3d"${i18n.importingConnectionFile}" /\x3e\x26nbsp;${i18n.importingConnectionFile}\r\n      \x3c/div\x3e\r\n      \x3cinput id\x3d"publisherConnectionFile" name\x3d"publisherConnectionFile" type\x3d"file" accept\x3d".sde"\r\n        data-dojo-attach-point\x3d"publisherConnectionFile" /\x3e\r\n      \x3cdiv class\x3d"input-error-message"\x3e\r\n        ${i18n.connectionFileError}\r\n      \x3c/div\x3e\r\n      \x3cbutton class\x3d"btn btn-transparent right choose-different-file-btn hide"\r\n        data-dojo-attach-point\x3d"changePublisherConnectionCancelBtn"\x3e\r\n        ${i18n.cancelButton}\r\n      \x3c/button\x3e\r\n      \x3cdiv class\x3d"hide connection-string-container" data-dojo-attach-point\x3d"publisherConnectionContainer"\x3e\r\n        \x3cdiv\x3e\r\n          \x3ctable class\x3d"table table-striped trailer-0"\x3e\r\n            \x3cthead data-dojo-attach-point\x3d"publisherFileNameContainer"\x3e\r\n              \x3ctr\x3e\r\n                \x3cth colspan\x3d"2"\x3e\r\n                  ${i18n.fileChosen}: \x3cspan class\x3d"server-file-name" data-dojo-attach-point\x3d"publisherFileName"\x3e\x3c/span\x3e\r\n                \x3c/th\x3e\r\n              \x3c/tr\x3e\r\n            \x3c/thead\x3e\r\n            \x3ctbody data-dojo-attach-point\x3d"publisherConnectionStringTable"\x3e\x3c/tbody\x3e\r\n          \x3c/table\x3e\r\n        \x3c/div\x3e\r\n        \x3cinput type\x3d"hidden" data-dojo-attach-point\x3d"publisherConnectionString"\r\n          data-connection-string-type\x3d"publisher" /\x3e\r\n\r\n        \x3cbutton class\x3d"btn btn-transparent choose-different-file-btn"\r\n          data-dojo-attach-point\x3d"changePublisherConnectionBtn"\x3e\r\n          ${i18n.chooseDifferentFile}\r\n        \x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"datastore-connection hide" data-dojo-attach-point\x3d"snowflakeCredentialsContainer" hide\x3e\r\n    \x3cdiv class\x3d"bq-server-settings"\x3e\r\n      \x3clabel class\x3d"credential-type-change-connect" for\x3d"accessKeyId"\x3e\r\n        ${i18n.bitQueryServer}\r\n        \x3cdiv\x3e\r\n          \x3ccalcite-input class\x3d"databaseSettingsEdit" id\x3d"server" data-dojo-attach-point\x3d"snowflakeServerSelect" style\x3d"width:100%" disabled\x3e\x3c/calcite-input\x3e\r\n        \x3c/div\x3e\r\n      \x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"bq-auth-type-settings"\x3e\r\n      \x3clabel class\x3d"credential-type-change-connect" for\x3d"authentication-type"\x3e\r\n        ${i18n.bitQueryAuthenticationType}\r\n        \x3cdiv\x3e\r\n          \x3ccalcite-input class\x3d"databaseSettingsEdit" id\x3d"authentication-type" data-dojo-attach-point\x3d"snowflakeAuthenticationType" value\x3d"${i18n.databaseUserAuthentication}" disabled\x3e\x3c/calcite-input\x3e\r\n        \x3c/div\x3e\r\n      \x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"bq-username-and-password flex"\x3e\r\n      \x3cdiv class\x3d"bq-username-settings" style\x3d"width: 100%;"\x3e\r\n        \x3clabel class\x3d"credential-type-change-connect flex-1" for\x3d"username"\x3e\r\n          ${i18n.bitQueryUsername}\r\n          \x3cdiv\x3e\r\n            \x3ccalcite-input class\x3d"databaseSettingsEdit" id\x3d"user" data-dojo-attach-point\x3d"snowflakeUsername" disabled\x3e\x3c/calcite-input\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"bq-password-settings" style\x3d"margin-inline-start: 3rem; width: 100%;"\x3e\r\n        \x3clabel class\x3d"credential-type-change-connect flex-1" for\x3d"password"\x3e\r\n          ${i18n.bitQueryPassword}\r\n          \x3cdiv\x3e\r\n            \x3ccalcite-input class\x3d"databaseSettingsEdit" id\x3d"password" type\x3d"password" data-dojo-attach-point\x3d"snowflakePassword" disabled\x3e\x3c/calcite-input\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"bq-role-settings"\x3e\r\n      \x3clabel class\x3d"credential-type-change-connect" for\x3d"snowflake-role-select"\x3e\r\n        ${i18n.bitQueryRole}\r\n        \x3cdiv\x3e\r\n          \x3ccalcite-input class\x3d"databaseSettingsEdit" id\x3d"role" data-dojo-attach-point\x3d"snowflakeRole" style\x3d"width:100%" disabled\x3e\x3c/calcite-input\x3e\r\n        \x3c/div\x3e\r\n      \x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"bq-database-settings"\x3e\r\n      \x3clabel class\x3d"credential-type-change-connect" for\x3d"snowflake-database-select"\x3e\r\n        ${i18n.bitQueryDatabase}\r\n        \x3cdiv\x3e\r\n          \x3ccalcite-input class\x3d"databaseSettingsEdit" id\x3d"database" data-dojo-attach-point\x3d"snowflakeDatabase" style\x3d"width:100%" disabled\x3e\x3c/calcite-input\x3e\r\n        \x3c/div\x3e\r\n      \x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"bq-schema-settings"\x3e\r\n      \x3clabel class\x3d"credential-type-change-connect" for\x3d"schema"\x3e\r\n        ${i18n.bitQuerySchema}\r\n        \x3cdiv\x3e\r\n          \x3ccalcite-input class\x3d"databaseSettingsEdit" id\x3d"schema" data-dojo-attach-point\x3d"snowflakeSchema" disabled\x3e\x3c/calcite-input\x3e\r\n        \x3c/div\x3e\r\n      \x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"bq-warehouse-settings"\x3e\r\n      \x3clabel class\x3d"credential-type-change-connect" for\x3d"warehouse"\x3e\r\n        ${i18n.bitQueryWarehouse}\r\n        \x3cdiv\x3e\r\n          \x3ccalcite-input class\x3d"databaseSettingsEdit" id\x3d"warehouse" data-dojo-attach-point\x3d"snowflakeWarehouse" disabled\x3e\x3c/calcite-input\x3e\r\n        \x3c/div\x3e\r\n      \x3c/label\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"datastore-connection hide" data-dojo-attach-point\x3d"bqCredentialsContainer"\x3e\r\n    \x3ccalcite-label class\x3d"field keyFileInput"\x3e\r\n      ${i18n.snowflakeKeyFile}\r\n      \x3ccalcite-input class\x3d"databaseSettingsEdit" read-only\x3d"true" data-dojo-attach-point\x3d"bigQueryKeyFileField" id\x3d"bqKeyFile" disabled\x3e\r\n        \x3ccalcite-button slot\x3d"action" icon-start\x3d"folder" kind\x3d"neutral" appearance\x3d"outline" data-dojo-attach-point\x3d"keyFileInputForBQButton"\x3e\r\n          ${i18n.snowflakeSelectKeyFile}\r\n        \x3c/calcite-button\x3e\r\n      \x3c/calcite-input\x3e\r\n      \x3cinput\r\n        class\x3d"hide"\r\n        type\x3d"file"\r\n        id\x3d"snowflake-key-file"\r\n        accept\x3d".json"\r\n        data-dojo-attach-point\x3d"keyFileInputForBQ"\r\n        data-dojo-attach-event\x3d"onChange: _onHandleBQKeyFileInputChange"\r\n      \x3e\x3c/input\x3e\r\n      \x3ccalcite-input-message\r\n        icon\x3d"information"\r\n        status\x3d"idle"\r\n        data-dojo-attach-point\x3d"validJSON" \r\n      \x3e\r\n        ${i18n.validJson}\r\n      \x3c/calcite-input-message\x3e\r\n    \x3c/calcite-label\x3e\r\n    \x3cdiv class\x3d"bq-warehouse-settings" style\x3d"margin-top: 1rem; margin-bottom: 1rem;"\x3e\r\n      \x3ccalcite-label class\x3d"credential-type-change-connect" for\x3d"warehouse"\x3e\r\n        ${i18n.snowflakeProjectId}\r\n        \x3cdiv\x3e\r\n         \x3ccalcite-input class\x3d"databaseSettingsEdit" id\x3d"projectId" data-dojo-attach-point\x3d"bqProjectId" disabled\x3e\x3c/calcite-input\x3e\r\n        \x3c/div\x3e\r\n      \x3c/calcite-label\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"datastore-connection leader-1" data-dojo-attach-point\x3d"serverDatabaseContainer"\x3e\r\n    \x3cdiv class\x3d"fieldset-radio"\x3e\r\n      \x3clegend\x3e${i18n.serverDatabaseConnection}\x3cspan class\x3d"sde-file"\x3e${i18n.sdeFile}\x3c/span\x3e\x3c/legend\x3e\r\n      \x3cdiv class\x3d"serverDatabaseOptionContainer" data-dojo-attach-point\x3d"serverDatabaseOptionContainer"\x3e\r\n        \x3clabel class\x3d"datastore-database-same-as-publisher active"\x3e\r\n          \x3cinput type\x3d"radio" name\x3d"serverDatabaseOption" value\x3d"sameAsPublisher"\r\n            checked\x3d"checked" /\x3e${i18n.sameAsPublisher}\r\n        \x3c/label\x3e\r\n        \x3clabel class\x3d"datastore-database-new-path"\x3e\r\n          \x3cinput type\x3d"radio" name\x3d"serverDatabaseOption" value\x3d"newConnection" /\x3e\r\n          ${i18n.newConnection}\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"datastore-connection hide" data-dojo-attach-point\x3d"publisherDatabaseNewContainer"\x3e\r\n    \x3cdiv\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"serverLoader" class\x3d"hide loader-container"\x3e\r\n        \x3cimg src\x3d"./js/arcgisonline/css/images/LoadingAnimation_circle24blue.gif"\r\n          alt\x3d"${i18n.importingConnectionFile}" /\x3e\x26nbsp;${i18n.importingConnectionFile}\r\n      \x3c/div\x3e\r\n      \x3cinput class\x3d"hide" id\x3d"serverConnectionFile" name\x3d"serverConnectionFile" type\x3d"file" accept\x3d".sde"\r\n        data-dojo-attach-point\x3d"serverConnectionFile" /\x3e\r\n      \x3cdiv class\x3d"input-error-message"\x3e\r\n        ${i18n.connectionFileError}\r\n      \x3c/div\x3e\r\n      \x3cbutton class\x3d"btn btn-transparent right choose-different-file-btn hide"\r\n        data-dojo-attach-point\x3d"changeServerConnectionCancelBtn"\x3e\r\n        ${i18n.cancelButton}\r\n      \x3c/button\x3e\r\n      \x3cdiv class\x3d"hide connection-string-container" data-dojo-attach-point\x3d"serverConnectionContainer"\x3e\r\n        \x3cdiv\x3e\r\n          \x3ctable class\x3d"table table-striped trailer-0"\x3e\r\n            \x3cthead data-dojo-attach-point\x3d"serverFileNameContainer"\x3e\r\n              \x3ctr\x3e\r\n                \x3cth colspan\x3d"2"\x3e\r\n                  ${i18n.fileChosen}: \x3cspan class\x3d"server-file-name" data-dojo-attach-point\x3d"serverFileName"\x3e\x3c/span\x3e\r\n                \x3c/th\x3e\r\n              \x3c/tr\x3e\r\n            \x3c/thead\x3e\r\n            \x3ctbody data-dojo-attach-point\x3d"serverConnectionStringTable"\x3e\x3c/tbody\x3e\r\n          \x3c/table\x3e\r\n        \x3c/div\x3e\r\n        \x3cinput type\x3d"hidden" data-dojo-attach-point\x3d"serverConnectionString" data-connection-string-type\x3d"server" /\x3e\r\n\r\n        \x3cbutton class\x3d"btn btn-transparent choose-different-file-btn"\r\n          data-dojo-attach-point\x3d"changeServerConnectionBtn"\x3e\r\n          ${i18n.chooseDifferentFile}\r\n        \x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"alert alert-yellow leader-1" data-dojo-attach-point\x3d"hostingServerError"\x3e\r\n    ${i18n.hostingServerError}\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/sharing/dijit/templates/DatastoreFolderSettings.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"datastore-connection" data-dojo-attach-point\x3d"folderGeneralDescription"\x3e\r\n    \x3clabel for\x3d"folder-general-description"\x3e\r\n      \x3cdiv id\x3d"folder-general-description" class\x3d"generalDescription"\x3e\r\n        ${i18n.configurationGuide}\r\n      \x3c/div\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"datastore-connection"\x3e\r\n    \x3clabel for\x3d"publisherFolderPath"\x3e\r\n      ${i18n.publisherFolderPath}\r\n      \x3cdiv\x3e\r\n        \x3cinput id\x3d"publisherFolderPath" type\x3d"text" data-dojo-attach-point\x3d"publisherFolderPath"\r\n          placeholder\x3d"${i18n.fileSharePlaceholder}" class\x3d"folder-path" /\x3e\r\n      \x3c/div\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"datastore-connection"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"publisherFolderHostnameContainer" class\x3d"publisherFolderHostname hide"\x3e\r\n      \x3clabel for\x3d"publisherFolderHostname"\x3e\r\n        ${i18n.publisherFolderHostname}\r\n        \x3ctextarea id\x3d"publisherFolderHostName" data-dojo-attach-point\x3d"publisherFolderHostName"\x3e\x3c/textarea\x3e\r\n        \x3cdiv class\x3d"publisherHostnameInfo"\x3e${i18n.publisherHostnameInfo}\x3c/div\x3e\r\n      \x3c/label\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"datastore-connection" data-dojo-attach-point\x3d"serverFolderPathContainer"\x3e\r\n    \x3cfieldset class\x3d"fieldset-radio"\x3e\r\n      \x3clegend\x3e${i18n.serverFolderPath}\x3c/legend\x3e\r\n      \x3cdiv class\x3d"serverFolderOptionContainer" data-dojo-attach-point\x3d"serverFolderOptionContainer"\x3e\r\n        \x3clabel class\x3d"datastore-folder-same-as-publisher active"\x3e\x3cinput type\x3d"radio" name\x3d"serverFolderPath"\r\n            value\x3d"sameAsPublisher" checked\x3d"checked"\x3e${i18n.sameAsPublisherFolderPath}\x3c/label\x3e\r\n        \x3clabel class\x3d"datastore-folder-new-path"\x3e\x3cinput type\x3d"radio" name\x3d"serverFolderPath"\r\n            value\x3d"newPath"\x3e${i18n.newPath}\x3c/label\x3e\r\n        \x3clabel class\x3d"datastore-folder-NFSHostandPath hide" data-dojo-attach-point\x3d"nfsOption"\x3e\x3cinput type\x3d"radio" name\x3d"serverFolderPath"\r\n            value\x3d"nfsHostAndPath"\x3e${i18n.nfsHostAndPath}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"datastore-connection hide" data-dojo-attach-point\x3d"newServerFolderPathContainer"\x3e\r\n    \x3clabel for\x3d"newServerFolderPath"\x3e\r\n      \x3cdiv\x3e\r\n        \x3cinput id\x3d"newServerFolderPath" class\x3d"folder-path" type\x3d"text" data-dojo-attach-point\x3d"newServerFolderPath"\r\n          placeholder\x3d"${i18n.replicatedFileSharePlaceholder}" /\x3e\r\n      \x3c/div\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"datastore-connection hide" data-dojo-attach-point\x3d"nfsHostAndPathContainer"\x3e\r\n    \x3clabel for\x3d"nfsHostName"\x3e\r\n      \x3cdiv\x3e\r\n        ${i18n.nfsHostName}\r\n        \x3cinput id\x3d"nfsHostName" class\x3d"nfs-hostName" type\x3d"text" data-dojo-attach-point\x3d"nfsHostName"/\x3e\r\n      \x3c/div\x3e\r\n    \x3c/label\x3e\r\n    \x3clabel for\x3d"nfsSharePath"\x3e\r\n      \x3cdiv\x3e\r\n        ${i18n.nfsSharePath}\r\n        \x3cinput id\x3d"nfsSharePath" class\x3d"nfs-sharePath" type\x3d"text" data-dojo-attach-point\x3d"nfsSharePath"/\x3e\r\n      \x3c/div\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/sharing/dijit/templates/DatastoreCloudMenu.html":'\x3cdiv\x3e\r\n  \x3c!-- Cloud Store type \x26 provider--\x3e\r\n  \x3cdiv class\x3d"cloudstore-types"\x3e\r\n    \x3cfieldset class\x3d"fieldset-radio"\x3e\r\n      \x3clegend class\x3d"cloudstore-legend"\x3e${i18n.cloudStorageProviderTitle}\x3c/legend\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"cloudStoreContent"\x3e\x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',"url:arcgisonline/sharing/dijit/templates/DataStoreNoSQLMenu.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"noSQL-types"\x3e\r\n      \x3cfieldset class\x3d"fieldset-radio"\x3e\r\n        \x3clegend class\x3d"noSQL-legend"\x3e${i18n.nosqlInfo}\x3c/legend\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"noSQLContent"\x3e\x3c/div\x3e\r\n      \x3c/fieldset\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n\r\n\r\n',
"url:arcgisonline/sharing/dijit/templates/DatastoreCloudSettings.html":'\x3cdiv\x3e\r\n\r\n  \x3cdiv class\x3d"datastore-connection"\x3e\r\n    \x3clabel for\x3d"datastore-cloud-general-description"\x3e\r\n      \x3cdiv id\x3d"datastore-cloud-general-description" class\x3d"generalDescription" data-dojo-attach-point\x3d"cloudStoreDescription"\x3e\r\n        ${i18n.configurationGuide}\r\n      \x3c/div\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"datastore-connection"\x3e\r\n    \x3clabel for\x3d"cloudStoreOption" class\x3d"cloudStore-options"\x3e\r\n      ${i18n.cloudStoreOption}\r\n      \x3cdiv\x3e\r\n        \x3cinput id\x3d"cloudStoreOption" type\x3d"text" data-dojo-attach-point\x3d"cloudStoreOption" disabled /\x3e\r\n      \x3c/div\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"datastore-connection"\x3e\r\n    \x3cdiv class\x3d"hide cloudStoreRegistrationUI" data-dojo-attach-point\x3d"cloudStoreRegistrationUI"\x3e\r\n      \x3cdiv class\x3d"amazon"\x3e\r\n        \x3clabel for\x3d"amazonCredentialType"\x3e\r\n          ${i18n.credentialType}\r\n          \x3cdiv\x3e\r\n            \x3cselect class\x3d"cloud-ui-select" id\x3d"amazonCredentialType" data-dojo-attach-point\x3d"amazonCredentialType"\r\n              data-dojo-attach-event\x3d"onChange: _onCredentialTypeChange"\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"google"\x3e\r\n        \x3clabel for\x3d"googleCredentialType"\x3e\r\n          ${i18n.credentialType}\r\n          \x3cdiv\x3e\r\n            \x3cselect class\x3d"cloud-ui-select" id\x3d"googleCredentialType" data-dojo-attach-point\x3d"googleCredentialType"\r\n              data-dojo-attach-event\x3d"onChange: _onCredentialTypeChange"\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"googlePrivateKey"\x3e\r\n        \x3clabel for\x3d"googlePrivateKey"\x3e\r\n          ${i18n.privateKeyLabel}\r\n          \x3cdiv\x3e\r\n            \x3cinput class\x3d"cloud-ui-select" id\x3d"googlePrivateKey" type\x3d"file" name\x3d"googlePrivateKey" accept\x3d".json"\r\n              data-dojo-attach-point\x3d"googlePrivateKey" data-dojo-attach-event\x3d"onChange: _onGooglePrivateKeyChange" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"azure"\x3e\r\n        \x3clabel for\x3d"authenticationType"\x3e\r\n          ${i18n.authenticationType}\r\n          \x3cdiv\x3e\r\n            \x3cselect class\x3d"cloud-ui-select" id\x3d"authenticationType" data-dojo-attach-point\x3d"authenticationType"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange"\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"azure" data-dojo-attach-point\x3d"activeDirectoryContainer"\x3e\r\n        \x3clabel for\x3d"identityType"\x3e\r\n          ${i18n.identityType}\r\n          \x3cdiv id\x3d"identityType"\x3e\r\n            \x3cdiv class\x3d"cloud-ui-radio" id\x3d"servicePrincipalRadioContainer" data-dojo-attach-point\x3d"servicePrincipalRadioContainer" data-dojo-attach-event\x3d"onClick: _onCloudOptionChange"\x3e\r\n              \x3cinput type\x3d"radio" id\x3d"servicePrincipalRadio" data-dojo-attach-point\x3d"servicePrincipalRadio"\r\n                     data-dojo-attach-event\x3d"onChange: _onCloudOptionChange"/\x3e${i18n.identityTypes.servicePrincipal}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"cloud-ui-radio" id\x3d"userAssignedIdentityRadioContainer" data-dojo-attach-point\x3d"userAssignedIdentityRadioContainer" data-dojo-attach-event\x3d"onClick: _onCloudOptionChange"\x3e\r\n              \x3cinput type\x3d"radio" id\x3d"userAssignedIdentityRadio" data-dojo-attach-point\x3d"userAssignedIdentityRadio"\r\n                     data-dojo-attach-event\x3d"onChange: _onCloudOptionChange"/\x3e${i18n.identityTypes.userAssignedIdentity}\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n        \x3cdiv class\x3d"hide" data-dojo-attach-point\x3d"servicePrincipalContainer"\x3e\r\n          \x3clabel for\x3d"tenantId"\x3e\r\n            ${i18n.tenantId}\r\n            \x3cdiv\x3e\r\n              \x3cinput id\x3d"tenantId" type\x3d"text" data-dojo-attach-point\x3d"tenantId"\r\n                     data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" /\x3e\r\n            \x3c/div\x3e\r\n          \x3c/label\x3e\r\n          \x3clabel for\x3d"clientId"\x3e\r\n            ${i18n.clientId}\r\n            \x3cdiv\x3e\r\n              \x3cinput id\x3d"clientId" type\x3d"text" data-dojo-attach-point\x3d"clientId"\r\n                     data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" /\x3e\r\n            \x3c/div\x3e\r\n          \x3c/label\x3e\r\n          \x3clabel for\x3d"clientSecret"\x3e\r\n            ${i18n.clientSecret}\r\n            \x3cdiv\x3e\r\n              \x3cinput id\x3d"clientSecret" type\x3d"password" data-dojo-attach-point\x3d"clientSecret"\r\n                     data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" /\x3e\r\n            \x3c/div\x3e\r\n          \x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"hide" data-dojo-attach-point\x3d"userAssignedIdentityContainer"\x3e\r\n          \x3clabel for\x3d"managedIdentityClientId"\x3e\r\n            ${i18n.optionalClientId}\r\n            \x3cdiv\x3e\r\n              \x3cinput id\x3d"managedIdentityClientId" type\x3d"text" data-dojo-attach-point\x3d"managedIdentityClientId"\r\n                     data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" /\x3e\r\n            \x3c/div\x3e\r\n          \x3c/label\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"azure" data-dojo-attach-point\x3d"sasTokenContainer"\x3e\r\n        \x3clabel for\x3d"sasToken"\x3e\r\n          ${i18n.token}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"sasToken" type\x3d"text" data-dojo-attach-point\x3d"token"\r\n                   data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"azure" data-dojo-attach-point\x3d"accountNameContainer"\x3e\r\n        \x3clabel for\x3d"accountName"\x3e\r\n          ${i18n.accountName}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"accountName" type\x3d"text" data-dojo-attach-point\x3d"accountName"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"azure" data-dojo-attach-point\x3d"accountKeyContainer"\x3e\r\n        \x3clabel for\x3d"accountKey"\x3e\r\n          ${i18n.accountKey}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"accountKey" type\x3d"password" data-dojo-attach-point\x3d"accountKey"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"amazon google alibaba huawei"\x3e\r\n        \x3clabel class\x3d"credential-type-change-connect" for\x3d"accessKeyId"\x3e\r\n          ${i18n.accessKeyId}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"accessKeyId" type\x3d"text" data-dojo-attach-point\x3d"accessKeyId"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"amazon alibaba huawei google"\x3e\r\n        \x3clabel class\x3d"credential-type-change-connect" for\x3d"secretKeyId"\x3e\r\n          ${i18n.secretKeyId}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"secretKeyId" type\x3d"password" data-dojo-attach-point\x3d"secretKeyId"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"amazon"\x3e\r\n        \x3clabel for\x3d"region"\x3e\r\n          ${i18n.region}\r\n          \x3cdiv\x3e\r\n            \x3cselect class\x3d"cloud-ui-select" id\x3d"region" data-dojo-attach-point\x3d"region"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange"\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"google"\x3e\r\n        \x3clabel for\x3d"regionGoogle"\x3e\r\n          ${i18n.region}\r\n          \x3cdiv\x3e\r\n            \x3cselect class\x3d"cloud-ui-select" id\x3d"regionGoogle" data-dojo-attach-point\x3d"regionGoogle"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" disabled\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"huawei"\x3e\r\n        \x3clabel for\x3d"regionHuawei"\x3e\r\n          ${i18n.region}\r\n          \x3cdiv\x3e\r\n            \x3cselect class\x3d"cloud-ui-select" id\x3d"regionHuawei" data-dojo-attach-point\x3d"regionHuawei"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange"\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"alibaba"\x3e\r\n        \x3clabel for\x3d"regionAlibaba"\x3e\r\n          ${i18n.region}\r\n          \x3cdiv\x3e\r\n            \x3cselect class\x3d"cloud-ui-select" id\x3d"regionAlibaba" data-dojo-attach-point\x3d"regionAlibaba"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange"\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"azure" data-dojo-attach-point\x3d"environmentContainer"\x3e\r\n        \x3clabel for\x3d"environment"\x3e\r\n          ${i18n.storageDomain}\r\n          \x3cdiv\x3e\r\n            \x3cselect class\x3d"cloud-ui-select" id\x3d"environment" data-dojo-attach-point\x3d"environment"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange"\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"azure" data-dojo-attach-point\x3d"endpointContainer"\x3e\r\n        \x3clabel for\x3d"endpoint"\x3e\r\n          ${i18n.endpoint}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"endpoint" type\x3d"text" placeholder\x3d"${i18n.endpointPlaceholder}" data-dojo-attach-point\x3d"endpoint"\r\n                   data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"azuredatalakestore"\x3e\r\n        \x3clabel for\x3d"azureAuthenticationType"\x3e\r\n          ${i18n.authenticationType}\r\n          \x3cdiv\x3e\r\n            \x3cselect class\x3d"cloud-ui-select" id\x3d"azureAuthenticationType" data-dojo-attach-point\x3d"azureAuthenticationType"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" disabled\x3e\r\n              \x3coption value\x3d"sharedKey"\x3e${i18n.authenticationTypes.sharedKey}\x3c/option\x3e\r\n            \x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n        \x3clabel for\x3d"azureAccountName"\x3e\r\n          ${i18n.accountName}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"azureAccountName" type\x3d"text" data-dojo-attach-point\x3d"azureAccountName"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n        \x3clabel for\x3d"azureAccountKey"\x3e\r\n          ${i18n.accountKey}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"azureAccountKey" type\x3d"password" data-dojo-attach-point\x3d"azureAccountKey"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n        \x3clabel for\x3d"azureStorageDomain"\x3e\r\n          ${i18n.storageDomain}\r\n          \x3cdiv\x3e\r\n            \x3cselect class\x3d"cloud-ui-select" id\x3d"azureStorageDomain" data-dojo-attach-point\x3d"azureStorageDomain"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange"\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"azureEndPointContainer"\x3e\r\n          \x3clabel for\x3d"azureEndPoint"\x3e\r\n            ${i18n.endpoint}\r\n            \x3cdiv\x3e\r\n              \x3cinput id\x3d"azureEndPoint" type\x3d"text" placeholder\x3d"${i18n.endpointPlaceholder}" data-dojo-attach-point\x3d"azureEndPoint"\r\n                data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" /\x3e\r\n            \x3c/div\x3e\r\n          \x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3clabel for\x3d"azureContainerName"\x3e\r\n          ${i18n.containerName}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"azureContainerName" type\x3d"text" data-dojo-attach-point\x3d"azureContainerName"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"privateUrl"\x3e\r\n        \x3clabel for\x3d"storageURL"\x3e\r\n          ${i18n.storageURL}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"storageURL" type\x3d"text" data-dojo-attach-point\x3d"storageURL"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"azure"\x3e\r\n        \x3clabel for\x3d"containerName"\x3e\r\n          ${i18n.containerName}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"containerName" type\x3d"text" data-dojo-attach-point\x3d"containerName"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"amazon google huawei alibaba"\x3e\r\n        \x3clabel for\x3d"bucketName"\x3e\r\n          ${i18n.bucketName}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"bucketName" type\x3d"text" data-dojo-attach-point\x3d"bucketName"\r\n              data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"amazon azure google huawei alibaba azuredatalakestore" data-dojo-attach-point\x3d"cloudFolderContainer"\x3e\r\n        \x3clabel for\x3d"cloudFolder"\x3e\r\n          ${i18n.cloudfolder}\r\n          \x3cdiv\x3e\r\n            \x3cinput type\x3d"text" id\x3d"cloudFolder" data-dojo-attach-point\x3d"cloudFolder"\r\n              placeholder\x3d"${i18n.cloudFolderPlaceHolder}" data-dojo-attach-event\x3d"onChange: _onCloudOptionChange" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/DatastoreNoSQLSettings.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"datastore-connection"\x3e\r\n        \x3clabel for\x3d"datastore-noSQL-general-description"\x3e\r\n          \x3cdiv id\x3d"datastore-noSQL-general-description" class\x3d"generalDescription" data-dojo-attach-point\x3d"noSQLGeneralDescription"\x3e\r\n            ${i18n.noSQLGeneralDescription}\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"datastore-connection"\x3e\r\n        \x3clabel for\x3d"noSQLOption" class\x3d"noSQL-options"\x3e\r\n            ${i18n.noSQLOption}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"noSQLOption" type\x3d"text" data-dojo-attach-point\x3d"noSQLOption" disabled /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"datastore-connection"\x3e\r\n        \x3cdiv class\x3d"noSQLRegistrationUI" data-dojo-attach-point\x3d"noSQLRegistrationUI"\x3e\r\n            \x3cdiv class\x3d"noSQLConnectionURI"\x3e\r\n                \x3clabel for\x3d"noSQLConnectionURI"\x3e\r\n                    ${i18n.noSQLConnectionURI}\r\n                    \x3cdiv\x3e\r\n                        \x3cinput type\x3d"text" id\x3d\'noSQLConnectionURI\' data-dojo-attach-point\x3d"noSQLConnectionURI"\r\n                        data-dojo-attach-event\x3d"onChange: _onNoSQLOptionChange"\r\n                        /\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"noSQLConnectionURLExample"\x3e${i18n.noSQLConnectionURLExample}\x3c/div\x3e\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"noSQLFallBackServer"\x3e\r\n                \x3clabel for\x3d"noSQLFallBackServer"\x3e\r\n                    ${i18n.noSQLFallBackServer}\r\n                    \x3cdiv\x3e\r\n                        \x3cinput type\x3d"text" data-dojo-attach-point\x3d"noSQLFallBackServer"\r\n                        data-dojo-attach-event\x3d"onChange: _onNoSQLOptionChange"\r\n                        /\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"noSQLFallBackServerExample"\x3e${i18n.noSQLFallBackServerExample}\x3c/div\x3e\r\n                \x3c/label\x3e\r\n            \x3c/div\x3e\r\n        \x3c/label\x3e\r\n    \x3c/div\x3e\r\n            \x3cdiv class\x3d"noSQLUsername"\x3e\r\n              \x3clabel for\x3d"noSQLUsername"\x3e\r\n                  ${i18n.noSQLUsername}\r\n                  \x3cdiv\x3e\r\n                      \x3cinput type\x3d"text" data-dojo-attach-point\x3d"noSQLUsername"/\x3e\r\n                  \x3c/div\x3e\r\n              \x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"noSQLPassword"\x3e\r\n              \x3clabel for\x3d"noSQLPassword"\x3e\r\n                  ${i18n.noSQLPassword} *\r\n                  \x3cdiv\x3e\r\n                      \x3cinput type\x3d"password" id\x3d"noSQLPassword" data-dojo-attach-point\x3d"noSQLPassword"\r\n                      data-dojo-attach-event\x3d"onChange: _onNoSQLOptionChange"\r\n                      /\x3e\r\n                  \x3c/div\x3e\r\n              \x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"noSQLDataBase"\x3e\r\n              \x3clabel for\x3d"noSQLDataBase"\x3e\r\n                  ${i18n.noSQLDataBase}\r\n                  \x3cdiv\x3e\r\n                      \x3cinput type\x3d"text" data-dojo-attach-point\x3d"noSQLDataBase"/\x3e\r\n                  \x3c/div\x3e\r\n              \x3c/label\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3c!--keep for future change as we look more into trust strategy  --\x3e\r\n            \x3c!-- \x3cdiv class\x3d"noSQLTrustStrategy"\x3e\r\n              \x3clabel for\x3d"noSQLTrustStrategy"\x3e\r\n                ${i18n.noSQLTrustStrategy}\r\n                \x3cdiv\x3e\r\n                  \x3cselect class\x3d"noSQLTrustStrategy" id\x3d"noSQLTrustStrategy" data-dojo-attach-point\x3d"noSQLTrustStrategy" data-dojo-attach-event\x3d"onChange: _onNoSQLOptionChange"\x3e\r\n                      \x3coption value\x3d"TRUST_ALL_CERTIFICATES" selected\x3d"selected"\x3e${i18n.noSQLTrustStrategyTRUST_ALL_CERTIFICATES}\x3c/option\x3e\r\n                      \x3coption value\x3d"TRUST_CUSTOM_CA_SIGNED_CERTIFICATES"\x3e${i18n.noSQLTrustStrategyTRUST_CUSTOM_CA_SIGNED_CERTIFICATES}\x3c/option\x3e\r\n                      \x3coption value\x3d"TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"\x3e${i18n.noSQLTrustStrategyTRUST_SYSTEM_CA_SIGNED_CERTIFICATES}\x3c/option\x3e\r\n                  \x3c/select\x3e\r\n                \x3c/div\x3e\r\n              \x3c/label\x3e\r\n            \x3c/div\x3e --\x3e\r\n        \x3c/div\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/sharing/dijit/templates/DatastoreBDFSSettings.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"datastore-connection"\x3e\r\n        \x3clabel for\x3d"bdfs-general-description"\x3e\r\n            \x3cdiv id\x3d"bdfs-general-description" class\x3d"generalDescription"\x3e\r\n                ${i18n.bdfsConfigurationGuide}\r\n            \x3c/div\x3e\r\n        \x3c/label\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"bdfs-types"\x3e\r\n        \x3cfieldset class\x3d"fieldset-radio"\x3e\r\n            \x3clabel class\x3d"bdfs-type"\x3e\r\n                \x3cinput type\x3d"radio" name\x3d"bdfsType" value\x3d"fileshare"\x3e\r\n                \x3cspan class\x3d"bdfs-type-text"\x3e\r\n                    \x3cspan class\x3d"bdfs-type-label"\x3e${i18n.fileShare}\x3c/span\x3e\r\n                    \x3cspan class\x3d"bdfs-type-description"\x3e${i18n.fileShareDescription}\x3c/span\x3e\r\n                \x3c/span\x3e\r\n            \x3c/label\x3e\r\n            \x3clabel class\x3d"bdfs-type"\x3e\r\n                \x3cinput type\x3d"radio" name\x3d"bdfsType" value\x3d"hdfs"\x3e\r\n                \x3cspan class\x3d"bdfs-type-text"\x3e\r\n                    \x3cspan class\x3d"bdfs-type-label"\x3e${i18n.HDFS}\x3c/span\x3e\r\n                    \x3cspan class\x3d"bdfs-type-description"\x3e${i18n.HDFSDescription}\x3c/span\x3e\r\n                \x3c/span\x3e\r\n            \x3c/label\x3e\r\n            \x3clabel class\x3d"bdfs-type"\x3e\r\n                \x3cinput type\x3d"radio" name\x3d"bdfsType" value\x3d"hive"\x3e\r\n                \x3cspan class\x3d"bdfs-type-text"\x3e\r\n                    \x3cspan class\x3d"bdfs-type-label"\x3e${i18n.hive}\x3c/span\x3e\r\n                    \x3cspan class\x3d"bdfs-type-description"\x3e${i18n.hiveDescription}\x3c/span\x3e\r\n                \x3c/span\x3e\r\n            \x3c/label\x3e\r\n            \x3clabel class\x3d"bdfs-type"\x3e\r\n                \x3cinput type\x3d"radio" name\x3d"bdfsType" value\x3d"bdfsCloud"\x3e\r\n                \x3cspan class\x3d"bdfs-type-text"\x3e\r\n                    \x3cspan class\x3d"bdfs-type-label"\x3e${i18n.cloud}\x3c/span\x3e\r\n                    \x3cspan class\x3d"bdfs-type-description"\x3e${i18n.bdfsCloudDescription}\x3c/span\x3e\r\n                \x3c/span\x3e\r\n            \x3c/label\x3e\r\n        \x3c/fieldset\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/sharing/dijit/templates/DatastoreBDFSFileShareSettings.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"datastore-connection" data-dojo-attach-point\x3d"bdfsFileShareGeneralDescription"\x3e\r\n    \x3clabel for\x3d"bdfsFileShare-general-description"\x3e\r\n      \x3cdiv id\x3d"bdfsFileShare-general-description" class\x3d"generalDescription" style\x3d"color: hsl(0, 0%, 66%);"\x3e\r\n        ${i18n.bdfsInfoConfig}\r\n      \x3c/div\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"datastore-connection" data-dojo-attach-point\x3d"bdfsFileShareContainer"\x3e\r\n    \x3clabel for\x3d"publisherFileShareFolderPath"\x3e\r\n      ${i18n.publisherFileShareFolderPath}\r\n      \x3cdiv\x3e\r\n        \x3cinput id\x3d"publisherFileShareFolderPath" data-dojo-attach-point\x3d"publisherFileShareFolderPath"\r\n          placeholder\x3d"${i18n.fileSharePlaceholder}" class\x3d"folder-path" /\x3e\r\n      \x3c/div\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n\r\n\x3c/div\x3e',
"url:arcgisonline/sharing/dijit/templates/DatastoreBDFSHDFSSettings.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"datastore-connection" data-dojo-attach-point\x3d"bdfsHDFSDescription"\x3e\r\n    \x3clabel for\x3d"bdfsHDFS-general-description"\x3e\r\n      \x3cdiv id\x3d"bdfsHDFS-general-description" class\x3d"generalDescription" style\x3d"color: hsl(0, 0%, 66%);"\x3e\r\n        ${i18n.bdfsInfoConfig}\r\n      \x3c/div\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"datastore-connection"\x3e\r\n    \x3cdiv class\x3d"hdfsStoreRegistrationUI" data-dojo-attach-point\x3d"hdfsStoreRegistrationUI"\x3e\r\n\r\n      \x3cdiv class\x3d"hdfs"\x3e\r\n        \x3clabel for\x3d"hdfsPath"\x3e\r\n          ${i18n.hdfsPath}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"hdfsPath" type\x3d"text" data-dojo-attach-point\x3d"hdfsPath" placeholder\x3d"${i18n.hdfsPathPlaceholder}" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n\r\n      \x3cdiv class\x3d"hdfs"\x3e\r\n        \x3clabel for\x3d"hdfsUsername"\x3e\r\n          ${i18n.hdfsUsername}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"hdfsUsername" type\x3d"text" data-dojo-attach-point\x3d"hdfsUsername" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n\r\n      \x3cdiv class\x3d"hdfs" data-dojo-attach-point\x3d"hdfsUserKerberoesToggle"\x3e\r\n        \x3clabel class\x3d"toggle-switch modifier-class clearfix"\x3e\r\n          \x3cspan class\x3d"toggle-switch-label margin-right-1"\x3e${i18n.hdfsUserKerberos}\x3c/span\x3e\r\n          \x3cinput type\x3d"checkbox" name\x3d"userKerberosSwitch" class\x3d"toggle-switch-input" data-dojo-attach-point\x3d"hdfsUserKerberosSwitch"\x3e\r\n          \x3cspan class\x3d"toggle-switch-track"\x3e\x3c/span\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n\r\n      \x3cdiv class\x3d"hdfs hide" data-dojo-attach-point\x3d"hdfsUserKerberos"\x3e\r\n        \x3clabel for\x3d"hdfsKeytabLocation"\x3e\r\n          ${i18n.hdfsKeytabLocation}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"hdfsKeytabLocation" type\x3d"text" data-dojo-attach-point\x3d"hdfsKeytabLocation" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n\r\n        \x3clabel for\x3d"hdfsPrincipalUser"\x3e\r\n          ${i18n.hdfsPrincipalUser}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"hdfsPrincipalUser" type\x3d"text" data-dojo-attach-point\x3d"hdfsPrincipalUser" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n\r\n        \x3clabel for\x3d"hdfsPrincipalRealm"\x3e\r\n          ${i18n.hdfsPrincipalRealm}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"hdfsPrincipalRealm" type\x3d"text" data-dojo-attach-point\x3d"hdfsPrincipalRealm" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n\r\n        \x3clabel for\x3d"hdfsConfigDir"\x3e\r\n          ${i18n.hdfsConfigDir}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"hdfsConfigDir" type\x3d"text" data-dojo-attach-point\x3d"hdfsConfigDir" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n\x3c/div\x3e',
"url:arcgisonline/sharing/dijit/templates/DatastoreBDFSHiveSettings.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"datastore-connection" data-dojo-attach-point\x3d"bdfsHIVEDescription"\x3e\r\n    \x3clabel for\x3d"bdfsHive-general-description"\x3e\r\n      \x3cdiv id\x3d"bdfsHive-general-description" class\x3d"generalDescription" style\x3d"color: hsl(0, 0%, 66%);"\x3e\r\n        ${i18n.bdfsInfoConfig}\r\n      \x3c/div\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"datastore-connection"\x3e\r\n    \x3cdiv class\x3d"hiveStoreRegistrationUI" data-dojo-attach-point\x3d"hiveStoreRegistrationUI"\x3e\r\n      \x3cdiv class\x3d"hive"\x3e\r\n        \x3clabel for\x3d"hiveMetastoreURLs"\x3e\r\n          ${i18n.hiveMetastoreURLs}\r\n          \x3cdiv\x3e\r\n            \x3ctextarea id\x3d"hiveMetastoreURLs" rows\x3d"3" cols\x3d"20" data-dojo-attach-point\x3d"hiveMetastoreURLs"\r\n              placeholder\x3d"${i18n.hiveMetastoreURLsPlaceholder}" style\x3d"font-style: oblique;"\x3e\x3c/textarea\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n\r\n      \x3cdiv class\x3d"hive" data-dojo-attach-point\x3d"hiveDatabase"\x3e\r\n        \x3clabel for\x3d"hiveDatabase"\x3e\r\n          ${i18n.hiveDatabase}\r\n          \x3cdiv class\x3d"hive" data-dojo-attach-point\x3d"hiveDatabaseToggle"\x3e\r\n            \x3cdiv\x3e${i18n.hiveDatabaseLabel}\x3c/div\x3e\r\n            \x3c!-- Hive database switch --\x3e\r\n            \x3clabel class\x3d"hive-toggle-switch toggle-switch modifier-class clearfix"\x3e\r\n              \x3cspan class\x3d"toggle-switch-label margin-right-1"\x3e${i18n.hiveSwitchLabel}\x3c/span\x3e\r\n              \x3cinput type\x3d"checkbox" name\x3d"hiveDatabaseSwitch" class\x3d"toggle-switch-input"\x3e\r\n              \x3cspan class\x3d"toggle-switch-track"\x3e\x3c/span\x3e\r\n            \x3c/label\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Hive database input textbox --\x3e\r\n          \x3cdiv class\x3d"hiveDatabase hide" data-dojo-attach-point\x3d"hiveUserDatabase"\x3e\r\n            \x3cinput id\x3d"hiveDatabase" type\x3d"text" data-dojo-attach-point\x3d"hiveDatabase"\r\n              placeholder\x3d"${i18n.hiveDatabasePlaceholder}"/\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n\r\n      \x3cdiv class\x3d"hive"\x3e\r\n        \x3clabel for\x3d"hiveUsername"\x3e\r\n          ${i18n.hiveUsername}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"hiveUsername" type\x3d"text" data-dojo-attach-point\x3d"hiveUsername" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/sharing/dijit/templates/DatastoreBDFSCloudMenu.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"datastore-connection"\x3e\r\n        \x3cfieldset class\x3d"fieldset-radio"\x3e\r\n            \x3clegend\x3e${i18n.datastoreType}\x3c/legend\x3e\r\n            \x3clabel class\x3d"cloudStoreTypeLabel"\x3e\x3cinput type\x3d"radio" \r\n                name\x3d"cloudStoreType" value\x3d"new"\x3e${i18n.newCloudStoreLabel}\x3c/label\x3e\r\n            \x3clabel class\x3d"cloudStoreTypeLabel"\x3e\x3cinput type\x3d"radio" \r\n                name\x3d"cloudStoreType" value\x3d"existing"\x3e${i18n.existingCloudStoreLabel}\x3c/label\x3e\r\n        \x3c/fieldset\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!-- bdfs cloud menu: amazon \x26\x26 azure --\x3e\r\n    \x3cdiv class\x3d"cloudstore-types"\x3e\r\n        \x3cdiv class\x3d"bdfsNewCloudStoreOptionWrapper hide" data-dojo-attach-point\x3d"bdfsNewCloudStoreOptionWrapper"\x3e\r\n            \x3cfieldset class\x3d"fieldset-radio"\x3e\r\n                \x3clegend\x3e${i18n.cloudStorageProviderTitle}\x3c/legend\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"bdfsCloudStoreContent"\x3e\x3c/div\x3e\r\n            \x3c/fieldset\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"datastore-connection"\x3e\r\n        \x3clabel for\x3d"bdfsExistingCloudStoreOption" class\x3d"cloudStore-options bdfs hide"\r\n            data-dojo-attach-point\x3d"bdfsExistingCloudStoreOptionWrapper"\x3e\r\n            \x3clegend\x3e${i18n.existingCloudStoreDropdownMenu}\x3c/legend\x3e\r\n            \x3cdiv class\x3d"bdfsExistingCloudStoreOption" data-dojo-attach-point\x3d"bdfsExistingCloudStoreOption"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/sharing/dijit/templates/DatastoreBDFSCloudSettings.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"datastore-connection"\x3e\r\n    \x3clabel for\x3d"datastore-cloud-general-description"\x3e\r\n      \x3cdiv id\x3d"datastore-cloud-general-description" class\x3d"generalDescription"\x3e\r\n        ${i18n.configurationGuide}\r\n      \x3c/div\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3c!-- bdfs content --\x3e\r\n  \x3cdiv class\x3d"datastore-connection"\x3e\r\n    \x3clabel for\x3d"bdfsCloudStoreOption" class\x3d"cloudStore-options"\x3e\r\n      ${i18n.cloudStoreOption}\r\n      \x3cdiv\x3e\r\n        \x3cinput id\x3d"bdfsCloudStoreOption" type\x3d"text" data-dojo-attach-point\x3d"bdfsCloudStoreOption" disabled/\x3e\r\n      \x3c/div\x3e\r\n    \x3c/label\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"datastore-connection"\x3e\r\n    \x3cdiv class\x3d"hide cloudStoreRegistrationUI" data-dojo-attach-point\x3d"bdfsCloudStoreRegistrationUI"\x3e\r\n      \x3cdiv class\x3d"amazon"\x3e\r\n        \x3clabel for\x3d"bdfsCredentialType"\x3e\r\n          ${i18n.credentialType}\r\n          \x3cdiv\x3e\r\n            \x3cselect class\x3d"cloud-ui-select" id\x3d"bdfsCredentialType" data-dojo-attach-point\x3d"bdfsCredentialType"\r\n              data-dojo-attach-event\x3d"onChange: _onCredentialTypeChange"\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"azure"\x3e\r\n        \x3clabel for\x3d"bdfsAccountName"\x3e\r\n          ${i18n.accountName}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"bdfsAccountName" type\x3d"text" data-dojo-attach-point\x3d"bdfsAccountName" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"azure"\x3e\r\n        \x3clabel for\x3d"bdfsAccountKey"\x3e\r\n          ${i18n.accountKey}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"bdfsAccountKey" type\x3d"password" data-dojo-attach-point\x3d"bdfsAccountKey" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"amazon"\x3e\r\n        \x3clabel class\x3d"credential-type-change-connect" for\x3d"bdfsAccessKeyId"\x3e\r\n          ${i18n.accessKeyId}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"bdfsAccessKeyId" type\x3d"text" data-dojo-attach-point\x3d"bdfsAccessKeyId" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"amazon"\x3e\r\n        \x3clabel class\x3d"credential-type-change-connect" for\x3d"bdfsSecretKeyId"\x3e\r\n          ${i18n.secretKeyId}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"bdfsSecretKeyId" type\x3d"password" data-dojo-attach-point\x3d"bdfsSecretKeyId" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"amazon"\x3e\r\n        \x3clabel for\x3d"bdfsRegion"\x3e\r\n          ${i18n.region}\r\n          \x3cdiv\x3e\r\n            \x3cselect class\x3d"cloud-ui-select" id\x3d"bdfsRegion" data-dojo-attach-point\x3d"bdfsRegion"\r\n              data-dojo-attach-event\x3d"onChange: _showPrivateURL"\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"azure"\x3e\r\n        \x3clabel for\x3d"bdfsEnvironment"\x3e\r\n          ${i18n.environment}\r\n          \x3cdiv\x3e\r\n            \x3cselect class\x3d"cloud-ui-select" id\x3d"bdfsEnvironment" data-dojo-attach-point\x3d"bdfsEnvironment"\r\n              data-dojo-attach-event\x3d"onChange: _showPrivateURL"\x3e\x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"privateUrl"\x3e\r\n        \x3clabel for\x3d"bdfsStorageURL"\x3e\r\n          ${i18n.storageURL}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"bdfsStorageURL" type\x3d"text" data-dojo-attach-point\x3d"bdfsStorageURL" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"azure"\x3e\r\n        \x3clabel for\x3d"bdfsContainerName"\x3e\r\n          ${i18n.containerName}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"bdfsContainerName" type\x3d"text" data-dojo-attach-point\x3d"bdfsContainerName" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"amazon"\x3e\r\n        \x3clabel for\x3d"bdfsBucketName"\x3e\r\n          ${i18n.bucketName}\r\n          \x3cdiv\x3e\r\n            \x3cinput id\x3d"bdfsBucketName" type\x3d"text" data-dojo-attach-point\x3d"bdfsBucketName" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"amazon azure" data-dojo-attach-point\x3d"bdfsCloudFolderContainer"\x3e\r\n        \x3clabel for\x3d"bdfsCloudFolder"\x3e\r\n          ${i18n.cloudfolder}\r\n          \x3cdiv\x3e\r\n            \x3cinput type\x3d"text" id\x3d"bdfsCloudFolder" data-dojo-attach-point\x3d"bdfsCloudFolder" placeholder\x3d"${i18n.cloudFolderPlaceHolder}" /\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/sharing/dijit/templates/_federated-servers-table.html":'\x3ctable class\x3d"table add-datastore-dlg-server-table"\x3e\r\n    \x3cthead\x3e\r\n        \x3ctr\x3e\r\n            \x3cth class\x3d"col-width-1 text-center"\x3e\r\n                \x3cinput type\x3d"checkbox" data-dojo-attach-event\x3d"onchange: selectAll" data-dojo-attach-point\x3d"selectAllCheckbox" disabled\x3d"true"\x3e\r\n            \x3c/th\x3e\r\n            \x3cth\x3e${i18n.server}\x3c/th\x3e\r\n            \x3cth class\x3d"col-width-3 text-center"\x3e${i18n.status}\x3c/th\x3e\r\n        \x3c/tr\x3e\r\n    \x3c/thead\x3e\r\n    \x3ctbody data-dojo-attach-point\x3d"federatedServersTableBody"\x3e\r\n    \x3c/tbody\x3e\r\n\x3c/table\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/AddDatastoreDlg.html":'\x3cdiv\x3e\r\n    \x3cform data-dojo-attach-point\x3d"containerNode" class\x3d"data-store-form" enctype\x3d"multipart/form-data" action\x3d""\r\n        method\x3d"POST" autocomplete\x3d"off" data-dojo-attach-event\x3d"onsubmit:onSubmit"\x3e\r\n        \x3cdiv class\x3d"clearfix"\x3e\r\n            \x3cdiv class\x3d"step-container step-1" data-dojo-attach-point\x3d"containerStep1Node"\x3e\r\n                \x3cdiv class\x3d"datastore-types"\x3e\r\n                    \x3cfieldset class\x3d"fieldset-radio"\x3e\r\n                        \x3clegend class\x3d"datastore-legend"\x3e${i18n.datastoreType}\x3c/legend\x3e\r\n                        \x3clabel class\x3d"datastore-type"\x3e\r\n                            \x3cinput type\x3d"radio" name\x3d"datastoreType" value\x3d"folder"\x3e\r\n                            \x3cspan class\x3d"datastore-type-text"\x3e\r\n                                \x3cspan class\x3d"datastore-type-label"\x3e${i18n.folder}\x3c/span\x3e\r\n                                \x3cspan class\x3d"datastore-type-description"\x3e${i18n.folderDescription}\x3c/span\x3e\r\n                            \x3c/span\x3e\r\n                        \x3c/label\x3e\r\n                        \x3clabel class\x3d"datastore-type"\x3e\r\n                            \x3cinput type\x3d"radio" name\x3d"datastoreType" value\x3d"database"\x3e\r\n                            \x3cspan class\x3d"datastore-type-text"\x3e\r\n                                \x3cspan class\x3d"datastore-type-label"\x3e${i18n.database}\x3c/span\x3e\r\n                                \x3cspan class\x3d"datastore-type-description"\x3e${i18n.databaseDescription}\x3c/span\x3e\r\n                            \x3c/span\x3e\r\n                        \x3c/label\x3e\r\n                        \x3clabel class\x3d"datastore-type"\x3e\r\n                            \x3cinput type\x3d"radio" name\x3d"datastoreType" value\x3d"cloud"\r\n                                data-dojo-attach-point\x3d"cloudContainerNode"\x3e\r\n                            \x3cspan class\x3d"datastore-type-text"\x3e\r\n                                \x3cspan class\x3d"datastore-type-label"\x3e${i18n.cloud}\x3c/span\x3e\r\n                                \x3cspan class\x3d"datastore-type-description"\x3e${i18n.cloudDescription}\x3c/span\x3e\r\n                            \x3c/span\x3e\r\n                        \x3c/label\x3e\r\n                        \x3clabel class\x3d"datastore-type hide"\x3e\r\n                            \x3cinput type\x3d"radio" name\x3d"datastoreType" value\x3d"bigdata"\r\n                                data-dojo-attach-point\x3d"bigdataContainerNode"\x3e\r\n                            \x3cspan class\x3d"datastore-type-text"\x3e\r\n                                \x3cspan class\x3d"datastore-type-label"\x3e${i18n.bigdata}\x3c/span\x3e\r\n                                \x3cspan class\x3d"datastore-type-description"\x3e${i18n.bigdataDescription}\x3c/span\x3e\r\n                            \x3c/span\x3e\r\n                        \x3c/label\x3e\r\n                        \x3clabel class\x3d"datastore-type hide"\x3e\r\n                            \x3cinput type\x3d"radio" name\x3d"datastoreType" value\x3d"noSQL"\r\n                                data-dojo-attach-point\x3d"noSQLContainerNode"\x3e\r\n                            \x3cspan class\x3d"datastore-type-text"\x3e\r\n                                \x3cspan class\x3d"datastore-type-label"\x3e${i18n.nosql}\x3c/span\x3e\r\n                                \x3cspan class\x3d"datastore-type-description"\x3e${i18n.nosqlDescription}\x3c/span\x3e\r\n                            \x3c/span\x3e\r\n                        \x3c/label\x3e\r\n                    \x3c/fieldset\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"step-2"\x3e\r\n                \x3c!-- widget goes here --\x3e\r\n                \x3cdiv class\x3d"step-container step-2-folder hide" data-dojo-attach-point\x3d"step2FolderContainer"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"step-container step-2-database hide" data-dojo-attach-point\x3d"step2databaseContainer"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"step-container step-2-cloud hide" data-dojo-attach-point\x3d"step2CloudMenuContainer"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"step-container step-2-noSQL hide" data-dojo-attach-point\x3d"step2NoSQLMenuContainer"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"step-container step-2-bigdata hide" data-dojo-attach-point\x3d"step2BDSFContainer"\x3e\x3c/div\x3e\r\n\r\n                \x3cdiv class\x3d"step-container step-2-cloudItem hide" data-dojo-attach-point\x3d"step2CloudContainer"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"step-container step-2-noSQLItem hide" data-dojo-attach-point\x3d"step2NoSQLContainer"\x3e\x3c/div\x3e\r\n\r\n                \x3c!-- 4 sub-widgets of BDFS go here --\x3e\r\n                \x3cdiv class\x3d"step-container step-2-fileshare hide" data-dojo-attach-point\x3d"step2FileShareContainer"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"step-container step-2-hdfs hide" data-dojo-attach-point\x3d"step2HDFSContainer"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"step-container step-2-hive hide" data-dojo-attach-point\x3d"step2HiveContainer"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"step-container step-2-bdfsCloudMenu hide"\r\n                    data-dojo-attach-point\x3d"step2BDFSCloudMenuContainer"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"step-container step-2-bdfsCloud hide" data-dojo-attach-point\x3d"step2BDFSCloudContainer"\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"step-container step-3 hide"\x3e\r\n                \x3cdiv class\x3d"datastore-connection serverConfiguration"\x3e\r\n                    \x3clabel for\x3d"datastore-cloud-general-description"\x3e\r\n                        \x3cdiv id\x3d"datastore-cloud-general-description" class\x3d"generalDescription step-info-container"\x3e\r\n                            ${i18n.configureServersInfo}\r\n                        \x3c/div\x3e\r\n                    \x3c/label\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"alert alert-full alert-yellow" style\x3d"margin-top: -20px;"\r\n                    data-dojo-attach-point\x3d"folderKubernetesWarning"\x3e\r\n                    ${i18n.folderKubernetesWarning}\r\n                \x3c/div\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"federatedServersGridContainer"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"errorNode" class\x3d"alert alert-red"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"loader padding-leader-3 padding-trailer-3" data-dojo-attach-point\x3d"loader"\x3e\r\n                \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"loader-text"\x3e${i18n.loading}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"step-container step-4 hide"\x3e\r\n                \x3cdiv class\x3d"step-4-description"\x3e${i18n.step4Description}\x3c/div\x3e\r\n                \x3cdiv\x3e\r\n                    \x3ccalcite-label\x3e\r\n                        ${i18n.title}\r\n                        \x3ccalcite-input name\x3d"title" data-dojo-attach-point\x3d"itemTitle"\x3e\x3c/calcite-input\x3e\r\n                    \x3c/calcite-label\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"tags-container"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"folder-container trailer-1"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"categories-container hide trailer-1"\x3e\r\n                    \x3clabel data-dojo-attach-point\x3d"_categoriesLbl" class\x3d"trailer-0" for\x3d"addItemCategoryPicker"\x3e\r\n                        ${i18n.categories}\r\n                    \x3c/label\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"_categoriesContainer" id\x3d"addItemCategoryPicker"\x3e\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"summary-container"\x3e\r\n                    \x3clabel for\x3d"itemSummary"\x3e\r\n                        ${i18n.itemSummaryLabel}\r\n                        \x3cdiv\x3e\r\n                            \x3ctextarea id\x3d"itemSummary" name\x3d"itemSummary" rows\x3d"3" cols\x3d"20" data-dojo-attach-point\x3d"itemSummary"\r\n                                placeholder\x3d"${i18n.itemSummaryPlaceholder}"\x3e\x3c/textarea\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/label\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/form\x3e\r\n    \x3cdiv class\x3d"action-buttons"\x3e\r\n        \x3cbutton class\x3d"btn btn-transparent hide" id\x3d"back-button" name\x3d"backButton"\r\n            data-dojo-attach-point\x3d"backButton"\x3e${i18n.backButton}\x3c/button\x3e\r\n        \x3cspan class\x3d"right"\x3e\r\n            \x3cbutton class\x3d"btn btn-clear" id\x3d"cancel-button" name\x3d"cancelButton"\r\n            data-dojo-attach-point\x3d"cancelButton"\x3e${i18n.cancelButton}\x3c/button\x3e\r\n            \x3cbutton class\x3d"btn hide" id\x3d"add-button" name\x3d"addButton" type\x3d"submit"\r\n                data-dojo-attach-point\x3d"addButton"\x3e${i18n.addButton}\x3c/button\x3e\r\n            \x3cbutton class\x3d"btn" id\x3d"next-button" name\x3d"nextButton"\r\n                data-dojo-attach-point\x3d"nextButton"\x3e${i18n.nextButton}\x3c/button\x3e\r\n            \x3ca href\x3d"#" class\x3d"btn hide" name\x3d"itemButton" data-dojo-attach-point\x3d"itemButton"\x3e${i18n.itemButton}\x3c/a\x3e\r\n        \x3c/span\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"js-modal modal-overlay modifier-class" data-modal\x3d"foo" data-dojo-attach-point\x3d"nfsModal"\x3e\r\n        \x3cdiv class\x3d"modal-content column-12" role\x3d"dialog" aria-labelledby\x3d"modal" role\x3d"dialog"\x3e\r\n\r\n          \x3ca class\x3d"js-modal-toggle right" href\x3d"#" aria-label\x3d"close-modal" data-dojo-attach-point\x3d"nfsModalXButton"\x3e\r\n            \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"30" height\x3d"21" viewBox\x3d"0 0 32 32" class\x3d"svg-icon"\x3e\x3cpath d\x3d"M18.404 16l9.9 9.9-2.404 2.404-9.9-9.9-9.9 9.9L3.696 25.9l9.9-9.9-9.9-9.898L6.1 3.698l9.9 9.899 9.9-9.9 2.404 2.406-9.9 9.898z"/\x3e\x3c/svg\x3e\r\n          \x3c/a\x3e\r\n\r\n          \x3cp class\x3d"nfsModalText"\x3e${i18n.requiresServicesRestartModalText}\x3c/p\x3e\r\n\r\n          \x3cdiv class\x3d"text-right"\x3e\r\n              \x3cbutton class\x3d"btn btn-clear js-modal-toggle" data-dojo-attach-point\x3d"nfsModalCancelButton"\x3e${i18n.cancelButton}\x3c/button\x3e\r\n              \x3cbutton class\x3d"btn js-modal-toggle" data-dojo-attach-point\x3d"nfsModalOkButton"\x3e${i18n.okButton}\x3c/button\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/CreateNotebookDlg.html":'\x3cdiv class\x3d"main-flex-container"\x3e\r\n  \x3cdiv class\x3d"trailer-half step-indicator-container hide" data-dojo-attach-point\x3d"stepIndicatorContainer"\x3e\r\n    \x3cdiv class\x3d"create-step active" id\x3d"step1"\x3e\r\n      \x3cdiv class\x3d"step-text"\x3e${i18n.step1}\x3c/div\x3e\r\n      \x3cdiv class\x3d"step-label"\x3e${i18n.step1Description}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"create-step" id\x3d"step2"\x3e\r\n      \x3cdiv class\x3d"step-text"\x3e${i18n.step2}\x3c/div\x3e\r\n      \x3cdiv class\x3d"step-label"\x3e${i18n.step2Description}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"content-container"\x3e\r\n    \x3cdiv class\x3d"step-container step-1 hide" data-dojo-attach-point\x3d"step1Container"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"templateSelectionContainer" class\x3d"template-selection-container"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"step-container step-2 hide" data-dojo-attach-point\x3d"step2Container"\x3e\r\n      \x3cdiv\x3e\r\n        \x3clabel for\x3d"title"\x3e\r\n          ${i18n.title} \x3cinput type\x3d"text" name\x3d"title" data-dojo-attach-point\x3d"itemTitle" autofocus /\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"tags-container"\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"_tagsLbl" class\x3d"tagLbl" for\x3d"tags"\r\n          \x3e${i18n.itemTags}\r\n          \x3cinput\r\n            id\x3d"tags"\r\n            data-dojo-attach-point\x3d"_tags"\r\n            data-dojo-type\x3d"esri/dijit/Tags"\r\n            name\x3d"tags"\r\n          /\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"summary-container"\x3e\r\n        \x3clabel for\x3d""\x3e\r\n          ${i18n.summary}\r\n          \x3ctextarea\r\n            data-dojo-type\x3d"dijit/form/Textarea"\r\n            data-dojo-attach-point\x3d"_summary"\r\n            id\x3d"summaryTextArea"\r\n          \x3e\x3c/textarea\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"hide" data-dojo-attach-point\x3d"notebookRuntimeContainer"\x3e\r\n        \x3clabel for\x3d"runtime"\x3e\r\n          ${i18n.runtime}\r\n          \x3cselect data-dojo-attach-point\x3d"notebookRuntimeSelect"\x3e\x3c/select\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"folder-container trailer-1"\x3e\r\n        \x3clabel for\x3d"folder" class\x3d"trailer-0"\x3e ${i18n.folder} \x3c/label\x3e\r\n        \x3cselect\r\n          data-dojo-type\x3d"dijit/form/Select"\r\n          id\x3d"create-notebook-dlg-folder"\r\n          name\x3d"create-notebook-dlg-folder"\r\n          data-dojo-id\x3d"create-notebook-dlg-folder"\r\n          style\x3d"width: 99.5% !important;"\r\n          class\x3d"folderDropdownSelect folderDropdown"\r\n          data-dojo-attach-point\x3d"_folders"\r\n          data-dojo-props\x3d\'maxHeight: "200"\'\r\n        \x3e\x3c/select\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"categories-container hide trailer-1"\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"_categoriesLbl" class\x3d"trailer-0" for\x3d"addItemCategoryPicker"\x3e\r\n          ${i18n.categories}\r\n        \x3c/label\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_categoriesContainer" id\x3d"addItemCategoryPicker"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"errorNode" class\x3d"alert alert-red"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"loader padding-leader-3 padding-trailer-3" data-dojo-attach-point\x3d"loader"\x3e\r\n      \x3cdiv class\x3d"loader-bars"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"loader-text"\x3e${i18n.loading}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"action-buttons"\x3e\r\n    \x3cbutton class\x3d"btn btn-transparent hide" id\x3d"back-button" name\x3d"backButton" data-dojo-attach-point\x3d"backButton"\x3e\r\n      ${i18n.backButton}\r\n    \x3c/button\x3e\r\n    \x3cspan class\x3d"right"\x3e\r\n      \x3cbutton class\x3d"btn hide" id\x3d"add-button" name\x3d"addButton" type\x3d"submit" data-dojo-attach-point\x3d"addButton"\x3e\r\n        ${i18n.addButton}\r\n      \x3c/button\x3e\r\n      \x3cbutton class\x3d"btn" id\x3d"next-button" name\x3d"nextButton" data-dojo-attach-point\x3d"nextButton"\x3e\r\n        ${i18n.nextButton}\r\n      \x3c/button\x3e\r\n      \x3cbutton class\x3d"btn btn-clear" id\x3d"cancel-button" name\x3d"cancelButton" data-dojo-attach-point\x3d"cancelButton"\x3e\r\n        ${i18n.cancelButton}\r\n      \x3c/button\x3e\r\n    \x3c/span\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/CreateImageryContent/templates/CreateImageryContent.html":'\x3cdiv class\x3d"flex create-imagery"\x3e\r\n    \x3ciframe class\x3d"js-iframe flex-1 create-imagery__iframe" \x3e\x3c/iframe\x3e\r\n\x3c/div\x3e',"url:arcgisonline/pages/dijit/CreateRasterFunctionTemplate/templates/CreateRasterFunctionTemplate.html":'\x3cdiv class\x3d"flex create-raster-function-template"\x3e\x3c/div\x3e\r\n',"url:arcgisonline/sharing/dijit/templates/RasterFunctionEditor.html":"\x3cdiv class\x3d\"esriRFxEditorContainer\"\x3e\r\n  \x3cdiv class\x3d'close-btn'\x3e \r\n  \x3csvg xmlns\x3d'http://www.w3.org/2000/svg' width\x3d'15' height\x3d'15' viewBox\x3d'0 0 32 32' class\x3d'svg-icon'\x3e \r\n    \x3cpath d\x3d'M18.404 16l9.9 9.9-2.404 2.404-9.9-9.9-9.9 9.9L3.696 25.9l9.9-9.9-9.9-9.898L6.1 3.698l9.9 9.899 9.9-9.9 2.404 2.406-9.9 9.898z'/\x3e \r\n  \x3c/svg\x3e \r\n  \x3c/div\x3e \r\n  \x3cdiv data-dojo-attach-point\x3d'passiveOverlay' class\x3d'passive-overlay'\x3e\x3c/div\x3e \r\n  \x3ciframe data-dojo-attach-point\x3d'_iframe'\x3e \r\n  \x3c/iframe\x3e \r\n\x3c/div\x3e\r\n",
"url:arcgisonline/pages/dijit/View/templates/tableHeader.html":'\x3cdiv class\x3d"table-select-row table-select-row-header" role\x3d"row"\x3e\r\n  \x3cspan class\x3d"table-select-cell table-select-cell-th table-select-checkbox ${selectClass}" role\x3d"columnheader"\x3e\r\n    \x3clabel class\x3d"table-select-cell-sort table-select-check-all"\x3e\r\n      \x3cinput type\x3d"checkbox" aria-label\x3d"${i18n.filters.selectAll}" class\x3d"js-select-all" /\x3e\r\n    \x3c/label\x3e\r\n  \x3c/span\x3e\r\n  \x3cspan class\x3d"table-select-cell table-select-cell-th" role\x3d"columnheader" title\x3d"${i18n.filters.titleHeader}"\x3e\r\n    \x3cbutton class\x3d"table-select-cell-sort js-table-sort-header js-title-header" data-sort\x3d"title" data-sort-order\x3d"asc"\x3e\r\n      ${i18n.filters.titleHeader}\r\n    \x3c/button\x3e\r\n  \x3c/span\x3e\r\n  \x3cspan\r\n    class\x3d"table-select-cell table-select-cell-th table-select-cell-medium"\r\n    role\x3d"columnheader"\r\n    title\x3d"${i18n.filters.modifiedHeader}"\r\n  \x3e\r\n    \x3cbutton\r\n      class\x3d"table-select-cell-sort js-table-sort-header js-modified-header"\r\n      data-sort\x3d"modified"\r\n      data-sort-order\x3d"desc"\r\n    \x3e\r\n      ${i18n.filters.modifiedHeader}\r\n    \x3c/button\x3e\r\n  \x3c/span\x3e\r\n  \x3cspan\r\n    class\x3d"table-select-cell table-select-cell-th table-select-cell-small js-recycle-size hide table-select-size"\r\n    role\x3d"columnheader"\r\n    title\x3d"${i18n.filters.sizeHeader}"\r\n  \x3e\r\n    \x3cbutton class\x3d"table-select-cell-sort js-table-sort-header" data-sort\x3d"size" data-sort-order\x3d"desc"\x3e\r\n      ${i18n.filters.sizeHeader}\r\n    \x3c/button\x3e\r\n  \x3c/span\x3e\r\n  \x3cspan\r\n    class\x3d"table-select-cell table-select-cell-th table-laptop-show table-select-cell-medium-small js-owner-sort"\r\n    role\x3d"columnheader"\r\n    title\x3d"${i18n.filters.owner}"\r\n  \x3e\r\n    \x3cbutton class\x3d"table-select-cell-sort js-table-sort-header js-owner-header" data-sort\x3d"owner" data-sort-order\x3d"asc"\x3e\r\n      ${i18n.filters.owner}\r\n    \x3c/button\x3e\r\n  \x3c/span\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/View/templates/empty.html":'\x3cdiv class\x3d"js-empty-view text-center"\x3e\r\n    \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 256 256" width\x3d"256"\x3e\x3cpath fill\x3d"#ccc" d\x3d"M149.375 182.444l56.463-56.471-25.376-25.376 5.523-14.541-59.827-22.726L110.828 48H56v124h18.365l12.437 4.724 34.182 34.101 15.33-15.294 7.07 2.686 5.164-13.597zm50.806-56.472l-47.34 47.35 26.064-68.626zM112 54.828L141.172 84H112zM60 52h48v36h36v80H60zm60.984 153.17L95.95 180.199l36.263 13.775zm20.081-12.113L85.632 172H148V85.172L133.059 70.23l47.766 18.144-34.628 91.171z"/\x3e\x3c/svg\x3e\r\n    \x3ch3\x3e${i18n.GroupWidget.noItemsYet}\x3c/h3\x3e\r\n    \x3cp class\x3d"font-size--2 text-constrain margin-auto"\x3e${i18n.GroupWidget.noItemsYetExplanation}\x3c/p\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/View/templates/none.html":'\x3cdiv class\x3d"text-center leader-1 text-constrain margin-auto"\x3e${i18n.GroupWidget.noItems}\x3c/div\x3e',"url:arcgisonline/pages/dijit/View/templates/View.html":'\x3cdiv\x3e\r\n  \x3c!-- Table View --\x3e\r\n  \x3cdiv class\x3d"hide content-table-view js-table-wrap table-select js-view" role\x3d"table"\x3e\r\n    \x3cdiv class\x3d"table-select-head js-table-header" role\x3d"rowgroup"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"table-select-rows js-table-rows js-view" role\x3d"rowgroup"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3c!-- Grid View --\x3e\r\n  \x3cdiv\r\n    class\x3d"hide content-grid-view block-group block-group-4-up laptop-block-group-3-up tablet-block-group-2-up phone-block-group-1-up js-grid-wrap js-view"\r\n  \x3e\x3c/div\x3e\r\n\r\n  \x3c!-- Mobile View --\x3e\r\n  \x3cdiv class\x3d"hide content-mobile-view block-group block-group-1-up js-mobile-wrap js-view"\x3e\x3c/div\x3e\r\n\r\n  \x3c!-- List View --\x3e\r\n  \x3cdiv class\x3d"hide content-list_view block-group block-group-1-up js-list-wrap js-view"\x3e\x3c/div\x3e\r\n\r\n  \x3c!-- Empty View (no results) --\x3e\r\n  \x3cdiv class\x3d"hide js-empty-wrap js-view"\x3e\x3c/div\x3e\r\n\r\n  \x3c!-- None View (tabula rasa) --\x3e\r\n  \x3cdiv class\x3d"hide js-none-wrap js-view"\x3e\x3c/div\x3e\r\n\r\n  \x3c!-- Loader --\x3e\r\n  \x3cdiv class\x3d"hide js-loader-wrap js-view"\x3e\x3c/div\x3e\r\n\r\n  \x3c!-- Gallery Grid View --\x3e\r\n  \x3cdiv\r\n    class\x3d"hide block-group block-group-4-up laptop-block-group-3-up tablet-block-group-2-up phone-block-group-1-up gallery-card-wrap js-gallery-wrap js-view"\r\n  \x3e\x3c/div\x3e\r\n\r\n  \x3c!-- Gallery List View --\x3e\r\n  \x3cdiv class\x3d"hide block-group block-group-1-up  gallery-list-wrap js-gallery-list-wrap js-view"\x3e\x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"hide js-search-feedback"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/members/MemberActionLinks.html":'\x3cnav class\x3d"dropdown-menu dropdown-right" role\x3d"menu" data-dojo-attach-point\x3d"_linksContainer" \x3e\r\n    \x3cbutton class\x3d"dropdown-link js-action hide" role\x3d"menuitem" data-action\x3d"categorizeMember" data-dojo-attach-point\x3d"categorizeButton"\x3e${i18n.items.categorize}\x3c/button\x3e\r\n    \x3cbutton class\x3d"dropdown-link js-action hide" role\x3d"menuitem" data-action\x3d"editEmail" data-dojo-attach-point\x3d"editEmailButton"\x3e${i18n.myOrganization.membersTab.editEmail}\x3c/button\x3e\r\n    \x3cbutton class\x3d"dropdown-link js-action hide" role\x3d"menuitem" data-action\x3d"manageLicenses" data-dojo-attach-point\x3d"_manageLicenses"\x3e${i18n.myOrganization.manageLicenses.overlayTitle}\x3c/button\x3e\r\n    \x3cbutton class\x3d"dropdown-link js-action hide" role\x3d"menuitem" data-action\x3d"manageLicenseType" data-dojo-attach-point\x3d"_manageLicenseType"\x3e${i18n.myOrganization.manageLicenseTypes.manageLicenseType}\x3c/button\x3e\r\n    \x3cbutton class\x3d"dropdown-link js-action" role\x3d"menuitem" data-action\x3d"manageItems" data-dojo-attach-point\x3d"_manageItems"\x3e${i18n.myOrganization.formatters.manageItems}\x3c/button\x3e\r\n    \x3cbutton class\x3d"dropdown-link js-action hide" role\x3d"menuitem" data-action\x3d"transferContent" data-dojo-attach-point\x3d"_transferContent"\x3e${i18n.myOrganization.membersTab.transferItems}\x3c/button\x3e\r\n    \x3cbutton class\x3d"dropdown-link js-action hide" role\x3d"menuitem" data-action\x3d"manageCredits" data-dojo-attach-point\x3d"_manageCredits"\x3e${i18n.myOrganization.formatters.manageCredits}\x3c/button\x3e\r\n    \x3cbutton class\x3d"dropdown-link js-action" role\x3d"menuitem" data-action\x3d"viewGroups" data-dojo-attach-point\x3d"_viewGroups"\x3e${i18n.myOrganization.formatters.viewGroups}\x3c/button\x3e\r\n    \x3cbutton class\x3d"dropdown-link js-action" role\x3d"menuitem" data-action\x3d"viewProfile" data-dojo-attach-point\x3d"_viewProfile"\x3e${i18n.myOrganization.formatters.viewProfile}\x3c/button\x3e\r\n    \x3cbutton class\x3d"dropdown-link js-action hide" role\x3d"menuitem" data-action\x3d"expirePassword" data-dojo-attach-point\x3d"_expirePassword"\x3e${i18n.myOrganization.formatters.expirePassword}\x3c/button\x3e\r\n    \x3cbutton class\x3d"dropdown-link js-action hide" role\x3d"menuitem" data-action\x3d"resetPassword" data-dojo-attach-point\x3d"_resetPassword"\x3e${i18n.myOrganization.formatters.resetPassword}\x3c/button\x3e\r\n    \x3cbutton class\x3d"dropdown-link js-action hide" role\x3d"menuitem" data-action\x3d"disableMultiFactor" data-dojo-attach-point\x3d"_disableMfa"\x3e${i18n.myOrganization.formatters.disableMultiFactor}\x3c/button\x3e\r\n    \x3cbutton class\x3d"dropdown-link js-action hide" role\x3d"menuitem" data-action\x3d"enableEsri" data-dojo-attach-point\x3d"_enableEsri"\x3e${i18n.myOrganization.formatters.enableEsri}\x3c/button\x3e\r\n    \x3cbutton class\x3d"dropdown-link js-action hide" role\x3d"menuitem" data-action\x3d"disableEsri" data-dojo-attach-point\x3d"_disableEsri"\x3e${i18n.myOrganization.formatters.disableEsri}\x3c/button\x3e\r\n    \x3cbutton class\x3d"dropdown-link js-action hide" role\x3d"menuitem" data-action\x3d"enableMember" data-dojo-attach-point\x3d"_enableMember"\x3e${i18n.myOrganization.formatters.enableUser}\x3c/button\x3e\r\n    \x3cbutton class\x3d"dropdown-link js-action hide" role\x3d"menuitem" data-action\x3d"disableMember" data-dojo-attach-point\x3d"_disableMember"\x3e${i18n.myOrganization.formatters.suspendUser}\x3c/button\x3e\r\n    \x3c!-- \x3cbutton class\x3d"dropdown-link js-action hide" role\x3d"menuitem" data-action\x3d"emptyRecycleBin" data-dojo-attach-point\x3d"emptyRecycleBin"\x3e${i18n.myOrganization.formatters.emptyBin}\x3c/button\x3e --\x3e\r\n    \x3cbutton class\x3d"dropdown-link js-action hide" role\x3d"menuitem" data-action\x3d"deleteMember" data-dojo-attach-point\x3d"_deleteMember"\x3e${i18n.myOrganization.formatters.deleteUser}\x3c/button\x3e\r\n  \x3c/nav\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/members/MemberRole.html":'\x3cdiv class\x3d"flex flex-align-center"\x3e\r\n  \x3cdiv class\x3d"js-info-tooltip member-role__info-placeholder"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"flex-1"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"roleContainer"\x3e${user.roleLabel}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:arcgisonline/pages/organization/widgets/templates/members/MemberCard.html":'\x3cdiv class\x3d"block card ${selectCardClass} ${selectedClass} ${removedClass} card-wide trailer-1 org-member-card"\x3e\r\n  \x3cdiv class\x3d"flex org-member-card__content"\x3e\r\n    \x3clabel class\x3d"org-members__select-column card-select-check-mark card-select-check-mark--wide tooltip" data-dojo-attach-point\x3d"_checkboxWrap" aria-label\x3d"${selectItem}"\x3e\r\n      \x3cinput type\x3d"checkbox" class\x3d"checkbox-custom-input js-card-select-check-mark" value\x3d"${item.id}" data-id\x3d"${item.id}" data-dojo-attach-point\x3d"_checkboxBtn" ${checked}\x3e\r\n      \x3cspan class\x3d"checkbox-custom checkbox-custom--large"\x3e\r\n        \x3csvg viewBox\x3d"0 0 16 16" class\x3d"checkbox-custom-icon checkbox-custom-icon--checked"\x3e\x3cpath d\x3d"M12.753 3l-7.319 7.497L3.252 8.31 2 9.373l3.434 3.434L14 4.24z"/\x3e\x3c/svg\x3e\r\n        \x3csvg viewBox\x3d"0 0 16 16" class\x3d"checkbox-custom-icon checkbox-custom-icon--mixed"\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M4 7h8v2H4z"/\x3e\x3c/svg\x3e\r\n      \x3c/span\x3e\r\n    \x3c/label\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"_rightContent" class\x3d"flex-column flex-1 margin-left-2 padding-left-half margin-right-0 padding-right-0 org-member-card__right-content ${item.disabled:disabledAllowEventsClass}"\x3e\r\n      \x3cdiv class\x3d"flex"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_orgMemberThumbnail"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"flex-1 org-member-card__name-wrapper"\x3e\r\n          \x3ch4 class\x3d"trailer-0 flex"\x3e\r\n            \x3ca href\x3d"#" class\x3d"org-text-ellipsis org-member-card__name-link js-action" data-action\x3d"orgProfilePopup" title\x3d"${item.fullName}"\x3e${item.fullName}\x3c/a\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"_mfaIcon" class\x3d"hide flex flex-align-center margin-left-half" alt\x3d"${_mfaEnabledText}" title\x3d"${_mfaEnabledText}"\x3e${!icons.mobile.16}\x3c/span\x3e\r\n          \x3c/h4\x3e\r\n          \x3cdiv class\x3d"font-size--3"\x3e${item.username}\r\n            \x3cspan class\x3d"org-members__lastlogin-column"\x3e\r\n              \x3cspan class\x3d"org-member-dot-separator"\x3e\u2022\x3c/span\x3e\r\n              \x3cspan data-dojo-attach-point\x3d"_lastLoginSpan"\x3e\x3c/span\x3e\r\n            \x3c/span\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"org-members-viewer-view if-can-view-user-roles org-member-card__non-admin-role-attr ${item.disabled:disabledAllowEventsClass} hide"\x3e\r\n        \x3cdiv class\x3d"org-member-card__attr-heading"\x3e${i18n.myOrganization.currentGrid.role}\x3c/div\x3e\r\n        \x3cdiv\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_nonAdminMemberRole"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"flex flex-wrap org-members__attr-container" data-dojo-attach-point\x3d"_attrContainer"\x3e\r\n        \x3cdiv class\x3d"org-member-card__attr" data-dojo-attach-point\x3d"userTypeColumn"\x3e\r\n          \x3cdiv class\x3d"org-member-card__attr-item org-member-card__type-attr flex-column"\x3e\r\n            \x3cdiv class\x3d"org-member-card__attr-heading"\x3e${i18n.myOrganization.membersTab.licenseType}\x3c/div\x3e\r\n            \x3cdiv class\x3d"org-member-card__attr-value org-member-card__user-type-value"\x3e\r\n              \x3ca href\x3d"javascript:;" class\x3d"js-action" data-action\x3d"manageLicenseType" title\x3d"${item.licenseType.name}" data-dojo-attach-point\x3d"_manageUserTypeLink"\x3e${item.licenseType.name}\x3c/a\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"org-member-card__attr org-members__role-column" data-dojo-attach-point\x3d"roleColumn"\x3e\r\n          \x3cdiv class\x3d"org-member-card__attr-item org-member-card__role-attr flex-column"\x3e\r\n            \x3cdiv class\x3d"org-member-card__attr-heading"\x3e${i18n.myOrganization.currentGrid.role}\x3c/div\x3e\r\n            \x3cdiv class\x3d"org-member-card__member-role"\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"_memberRole"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"org-member-card__attr org-members__credits-column"\x3e\r\n          \x3cdiv class\x3d"org-member-card__attr-item org-member-card__credits-attr flex-column"\x3e\r\n            \x3cdiv class\x3d"org-member-card__attr-heading"\x3e${i18n.myOrganization.currentGrid.creditsRemaining}\x3c/div\x3e\r\n            \x3cdiv class\x3d"org-member-card__attr-value"\x3e\r\n              \x3ca href\x3d"javascript:;" class\x3d"js-action" data-dojo-attach-point\x3d"_manageCredits" title\x3d"${item.creditsRemainingLabel}" data-action\x3d"manageCredits"\x3e${item.creditsRemainingLabel}\x3c/a\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"org-member-card__attr org-member-card__license-attr" data-dojo-attach-point\x3d"licensesColumn"\x3e\r\n          \x3cdiv class\x3d"org-member-card__icons-item flex-column"\x3e\r\n            \x3cdiv class\x3d"org-members-card__item-icons" tabindex\x3d"0" data-dojo-attach-point\x3d"_licensesIcons"\x3e\r\n              \x3cdiv class\x3d"org-member-card__attr-heading"\x3e${i18n.myOrganization.membersTab.licenses}\x3c/div\x3e\r\n              \x3cdiv class\x3d"org-member-card__attr-value icons-wrapper" data-dojo-attach-point\x3d"_licenseIconsWrapper"\x3e\r\n                \x3cdiv class\x3d"flex" data-dojo-attach-point\x3d"_licensesContainer"\x3e\x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"org-member-card__attr org-member-card__groups-attr" data-dojo-attach-point\x3d"groupsColumn"\x3e\r\n          \x3cdiv class\x3d"org-member-card__icons-item flex-column"\x3e\r\n            \x3cdiv class\x3d"org-members-card__item-icons" tabindex\x3d"0" data-dojo-attach-point\x3d"_groupIcons"\x3e\r\n              \x3cdiv class\x3d"org-member-card__attr-heading"\x3e${i18n.myOrganization.membersTab.groups}\x3c/div\x3e\r\n              \x3cdiv class\x3d"org-member-card__attr-value icons-wrapper" data-dojo-attach-point\x3d"_groupIconsWrapper"\x3e\r\n                \x3cdiv class\x3d"flex" data-dojo-attach-point\x3d"_groupsContainer"\x3e\x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"org-members__action-column margin-left-quarter"\x3e\r\n      \x3cdiv class\x3d"dropdown dropdown-up right js-dropdown"  data-dojo-attach-point\x3d"_actionsContainer"\x3e\r\n        \x3cbutton\r\n          class\x3d"btn btn-link btn-link-darker-gray js-dropdown-toggle"\r\n          aria-haspopup\x3d"true" aria-expanded\x3d"false"\r\n          aria-label\x3d"${item.fullName:openActionsFor}"\r\n          data-dojo-attach-point\x3d"_actionsBtn"\x3e\r\n          ${!icons.ellipsis-f.16}\r\n        \x3c/button\x3e\r\n        \x3cnav data-dojo-attach-point\x3d"_actionLinks"\x3e\x3c/nav\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/members/MemberMobile.html":'\x3ca href\x3d"#"  class\x3d"block card card-mobile trailer-half org-member-card org-member-card--mobile" \x3e\r\n    \x3cdiv class\x3d"flex org-member-card__content"\x3e\r\n        \x3cdiv class\x3d"flex-1 ${item.disabled:disabledAllowEventsClass}"\x3e\r\n            \x3cdiv class\x3d"flex flex-align-center"\x3e\r\n                \x3cdiv class\x3d"js-names"\x3e\r\n                    \x3cdiv class\x3d"trailer-0 flex org-member-card__mobile-title"\x3e\r\n                        ${item.fullName}\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"font-size--3"\x3e${item.username}\x3c/div\x3e\r\n                    \x3cdiv class\x3d"screen-readers-only"\x3e${i18n.myOrganization.membersTab.openMemberDialog}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/a\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/AssignGroupsOverlay/AssignGroupsOverlay.html":'\x3cdiv class\x3d"js-group-browser"\x3e\x3c/div\x3e\r\n\r\n',"url:arcgisonline/pages/organization/widgets/templates/MobileMemberPanel.html":'\x3cdiv class\x3d"mobile-member-panel"\x3e\r\n    \x3cdiv class\x3d"flex flex-1 js-member-heading"\x3e\r\n        \x3cdiv class\x3d"js-member-thumb"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"flex-1"\x3e\r\n            \x3cdiv class\x3d"avenir-demi js-fullname"\x3emember.fullName\x3c/div\x3e\r\n            \x3cdiv class\x3d"font-size--2 js-username"\x3emember.username\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"flex mobile-member-panel__owned-container"\x3e\r\n        \x3cbutton class\x3d"btn-link btn-link-darker-gray mobile-member-panel__owned-col flex-1 js-items-btn"\x3e\r\n            \x3cdiv class\x3d"font-size-2 avenir-demi js-item-num"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"font-size--3"\x3e${i18n.myOrganization.mobileMemberPanel.items}\x3c/div\x3e\r\n        \x3c/button\x3e\r\n        \x3cbutton class\x3d"btn-link btn-link-darker-gray mobile-member-panel__owned-col flex-1 js-groups-btn"\x3e\r\n            \x3cdiv class\x3d"font-size-2 avenir-demi js-group-num"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"font-size--3"\x3e${i18n.myOrganization.mobileMemberPanel.groups}\x3c/div\x3e\r\n        \x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"mobile-member-panel__bio-wrapper"\x3e\r\n        \x3cdiv class\x3d"mobile-member-panel__bio js-bio"\x3e\x3c/div\x3e\r\n        \x3cbutton class\x3d"btn-link btn-link-darker-gray mobile-member-panel__bio-expand-toggle js-bio-toggle"\x3e${chevronDown}\x3c/button\x3e\r\n        \x3cbutton class\x3d"hide btn-link btn-link-darker-gray mobile-member-panel__bio-collapse-toggle js-bio-collapse-toggle"\x3e${chevronUp}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"mobile-member-panel__last-login hide js-last-login"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"flex mobile-drill-in-row hide js-credits-section"\x3e\r\n        \x3cdiv class\x3d"flex-1"\x3e\r\n            \x3cdiv class\x3d"font-size--2"\x3e${i18n.myOrganization.mobileMemberPanel.credits}\x3c/div\x3e\r\n            \x3cdiv class\x3d"js-credits"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"flex-column-justify-center mobile-drill-in-row__arrow"\x3e${chevronRight}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"flex mobile-drill-in-row hide js-usertype-role-section"\x3e\r\n        \x3cdiv class\x3d"flex-1"\x3e\r\n            \x3cdiv class\x3d"font-size--2"\x3e${i18n.myOrganization.mobileMemberPanel.userTypeRole}\x3c/div\x3e\r\n            \x3cdiv class\x3d"js-usertype"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"js-role"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"flex-column-justify-center mobile-drill-in-row__arrow"\x3e${chevronRight}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"flex mobile-drill-in-row hide js-role-display-section"\x3e\r\n        \x3cdiv class\x3d"flex-1"\x3e\r\n            \x3cdiv class\x3d"font-size--2"\x3e${i18n.myOrganization.mobileMemberPanel.role}\x3c/div\x3e\r\n            \x3cdiv class\x3d"js-role-display"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"js-member-role"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"flex mobile-drill-in-row js-licenses-section" \x3e\r\n        \x3cdiv class\x3d"flex-1"\x3e\r\n            \x3cdiv class\x3d"font-size--2"\x3e${i18n.myOrganization.mobileMemberPanel.addonLicenses}\x3c/div\x3e\r\n            \x3cdiv class\x3d"js-license-icons"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"flex-column-justify-center mobile-drill-in-row__arrow"\x3e${chevronRight}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"flex mobile-drill-in-row hide"\x3e\r\n        \x3cdiv class\x3d"flex-1"\x3e\r\n            \x3cdiv class\x3d"font-size--2"\x3e${i18n.myOrganization.mobileMemberPanel.groups}\x3c/div\x3e\r\n            \x3cdiv class\x3d"js-group-icons"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"flex-column-justify-center mobile-drill-in-row__arrow"\x3e${chevronRight}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"flex mobile-drill-in-row hide js-esri-access-section"\x3e\r\n        \x3cdiv class\x3d"flex-1"\x3e${i18n.myOrganization.mobileMemberPanel.esriAccess}\x3c/div\x3e\r\n        \x3cdiv\x3e\x3cdiv class\x3d"js-access-toggle"\x3e\x3c/div\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"mobile-member__actions"\x3e\r\n        \x3cbutton class\x3d"btn btn-link js-profile-btn"\x3e${i18n.myOrganization.mobileMemberPanel.viewProfilePage}\x3c/button\x3e\r\n        \x3cbutton class\x3d"btn btn-link hide js-reset-btn"\x3e${i18n.myOrganization.mobileMemberPanel.resetPassword}\x3c/button\x3e\r\n        \x3cbutton class\x3d"btn btn-link mobile-member__actions-btn--danger hide js-disable-btn"\x3e${i18n.myOrganization.mobileMemberPanel.disableMember}\x3c/button\x3e\r\n        \x3cbutton class\x3d"btn btn-link hide js-enable-btn"\x3e${i18n.myOrganization.mobileMemberPanel.enableMember}\x3c/button\x3e\r\n        \x3cbutton class\x3d"btn btn-link mobile-member__actions-btn--danger hide js-delete-btn"\x3e${i18n.myOrganization.mobileMemberPanel.deleteMember}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/pages/dijit/ManageCredits/templates/ManageCredits.html":'\x3cdiv class\x3d"invite-members__credits-tab-wrapper"\x3e\r\n  \x3cdiv class\x3d"flex-1 margin-right-4 invite-members__credit-options"\x3e\r\n    \x3cdiv class\x3d"font-size-2 trailer-2 invite-members__credit-options-title"\x3e${i18n.myOrganization.inviteMembers.setCredit}\x3c/div\x3e\r\n    \x3cdiv class\x3d"trailer-2 invite-members__credit-option-item js-no-limit-container"\x3e\r\n      \x3clabel class\x3d"trailer-quarter"\x3e\r\n        \x3cinput type\x3d"radio" name\x3d"creditsAlloc" class\x3d"js-credits-no-limit-radio"\x3e\r\n        \x3cspan class\x3d"margin-left-1"\x3e${i18n.myOrganization.inviteMembers.noAllocatedLimit}\x3c/span\x3e\r\n      \x3c/label\x3e\r\n      \x3cdiv class\x3d"margin-left-2 invite-members__no-limit-description"\x3e\r\n        ${i18n.myOrganization.inviteMembers.noLimitDesc}\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"invite-members__credit-option-item js-credits-alloc-container"\x3e\r\n      \x3clabel class\x3d"trailer-quarter"\x3e\r\n        \x3cinput type\x3d"radio" name\x3d"creditsAlloc" class\x3d"js-credits-alloc-radio"\x3e\r\n        \x3cspan class\x3d"margin-left-1"\x3e${i18n.myOrganization.inviteMembers.setAlloc}\x3c/span\x3e\r\n      \x3c/label\x3e\r\n      \x3cdiv class\x3d"margin-left-2 invite-members__allocate-wrapper"\x3e\r\n        \x3cinput type\x3d"number" value\x3d"" class\x3d"js-credits-alloc-textbox"\x3e\r\n        \x3cdiv class\x3d"js-credits-error input-error-message"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"invite-members__summary-total-container"\x3e\r\n    \x3cdiv class\x3d"invite-members__summary-total-title"\x3e${i18n.myOrganization.inviteMembers.creditInformation}\x3c/div\x3e\r\n    \x3cdiv class\x3d"invite-members__summary-total-box trailer-1"\x3e\r\n      \x3cdiv class\x3d"trailer-half invite-members__total-box-title"\x3e${i18n.myOrganization.inviteMembers.orgCredits}\x3c/div\x3e\r\n      \x3cdiv class\x3d"font-size-7 invite-members__total-box-value js-org-credits"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"invite-members__summary-total-box trailer-1"\x3e\r\n      \x3cdiv class\x3d"trailer-half invite-members__total-box-title"\x3e${i18n.myOrganization.inviteMembers.membersInOrg}\x3c/div\x3e\r\n      \x3cdiv class\x3d"font-size-7 invite-members__total-box-value js-member-count"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"*now":function(S){S(['dojo/i18n!*preload*arcgisonline/pages/nls/organization*["ar","bg","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("arcgisonline/pages/organization","require exports tslib dojo/Deferred dojo/string dojo/dom-construct dojo/hash dojo/topic dojo/promise/all dojo/on dojo/has dojo/i18n!../nls/arcgisonline dojo/i18n!../nls/org-settings dojo/text!./item/widgets/templates/_loader.html dojo/text!./organization/widgets/templates/_postUpgrade.html dijit/registry ./utils/queryHandler ./pageUtil ./basePage ./components/ConfirmDialog ./dijit/SubNav ./utils/alerts ./utils/arrays ./utils/organization ./utils/user ./utils/dom ./utils/subscription ./utils/mapViewer ./utils/notebook ./utils/whatsNew ../sharing/util ../sharing/geow/Licenses ../esriGeowConfig ./organization/widgets/_status ./organization/widgets/_settings ./organization/widgets/_overview ./organization/widgets/_licenses ./organization/widgets/_members ./organization/widgets/MobileMemberPanel ./organization/components/HomePageRequestExtensionDialog ./organization/components/HomePageSwitchFeedbackDialog ./components/MapViewerSwitchFeedbackDialog ./components/RecycleOrgOnboardModal/RecycleOrgOnboardModal arcgisonline/tsutils/declareDecorator preact ./organization/components/TrialWelcome".split(" "),function(S,
J,f,c,h,d,b,a,e,q,t,u,g,m,v,p,l,n,k,r,w,x,D,G,F,A,y,z,B,C,H,E,K,I,L,M,N,P,R,Y,ja,aa,da,ra,ca,fa){c=f.__importDefault(c);h=f.__importDefault(h);d=f.__importDefault(d);b=f.__importDefault(b);a=f.__importDefault(a);e=f.__importDefault(e);q=f.__importDefault(q);t=f.__importDefault(t);u=f.__importDefault(u);g=f.__importDefault(g);m=f.__importDefault(m);v=f.__importDefault(v);p=f.__importDefault(p);l=f.__importStar(l);n=f.__importDefault(n);k=f.__importDefault(k);r=f.__importDefault(r);w=f.__importDefault(w);
x=f.__importDefault(x);D=f.__importDefault(D);G=f.__importDefault(G);F=f.__importDefault(F);A=f.__importDefault(A);y=f.__importDefault(y);B=f.__importDefault(B);C=f.__importDefault(C);H=f.__importDefault(H);E=f.__importDefault(E);K=f.__importDefault(K);I=f.__importDefault(I);L=f.__importDefault(L);M=f.__importDefault(M);N=f.__importDefault(N);P=f.__importDefault(P);R=f.__importDefault(R);Y=f.__importDefault(Y);ja=f.__importDefault(ja);aa=f.__importDefault(aa);da=f.__importDefault(da);ra=f.__importDefault(ra);
fa=f.__importDefault(fa);var la;(function(ta){ta.Overview="overview";ta.Members="members";ta.Licenses="licenses";ta.UserTypes="licenseTypes";ta.Status="status";ta.Settings="settings"})(la||(la={}));return function(){function ta(){var Q=this;this.baseClass="flex-1 overflow-visible view-background";this.skipToContent="main-content-area";this.hashParts=[];this.isPortal=this.isDeveloperAccount=!1;this.homePageFeedbackUrl="https://arcg.is/1Gzefy0";this.switchToMapViewer=function(){return f.__awaiter(Q,
void 0,void 0,function(){var T,O,Z;return f.__generator(this,function(na){switch(na.label){case 0:T=this.portal.portalProperties||{},T.mapViewer=z.MapViewerType.Modern,T.mapViewerSwitchDate=Date.now(),delete T.newMapViewerEnabled,O="".concat(K.default.restBaseUrl,"portals/self/update"),Z={portalProperties:JSON.stringify(T)},na.label=1;case 1:return na.trys.push([1,3,,4]),[4,H.default.request({url:O,content:Z},{usePost:!0})];case 2:return na.sent(),x.default.showAlert("success",g.default.mapTab.mapViewer.success),
K.default.self.portalProperties=T,this.portal.portalProperties=T,A.default.hideNode(document.querySelector(".js-map-viewer-switch-banner")),[3,4];case 3:return na.sent(),x.default.showAlert("error",g.default.mapTab.mapViewer.error),[3,4];case 4:return[2]}})})};this.switchToMapViewerClassic=function(){return f.__awaiter(Q,void 0,void 0,function(){var T,O,Z,na,ia,X,ha,V,ea,U,ka,ma;return f.__generator(this,function(sa){switch(sa.label){case 0:T=this.portal.portalProperties||{};if(T.mapViewer===z.MapViewerType.Classic)return[3,
4];T.mapViewer=z.MapViewerType.Classic;T.mapViewerSwitchDate=Date.now();delete T.newMapViewerEnabled;O="".concat(K.default.restBaseUrl,"portals/self/update");Z={portalProperties:JSON.stringify(T)};sa.label=1;case 1:return sa.trys.push([1,3,,4]),[4,H.default.request({url:O,content:Z},{usePost:!0})];case 2:return sa.sent(),K.default.self.portalProperties=T,this.portal.portalProperties=T,[3,4];case 3:return sa.sent(),[3,4];case 4:return A.default.hideNode(this.domNode.querySelector(".js-map-viewer-switch-banner")),
C.default.set("mapViewerBanner"),na=document.querySelector("#".concat("map-viewer-switch-later-dlg")),na||(na=document.createElement("div"),na.id="map-viewer-switch-later-dlg",document.body.appendChild(na)),ia=function(){var pa=document.querySelector("#".concat("map-viewer-switch-later-dlg"));A.default.removeComponent(pa,document.body)},X=g.default.newMapViewerBanner.notYet,ha=X.title,V=X.description,ea=this.i18n.common,U=ea.ok,ka=ea.close,ma={title:ha,description:V,ok:U,close:ka},(0,ca.render)((0,ca.h)(aa.default,
{strings:ma,onClose:ia}),na),[2]}})})}}ta.prototype.postCreate=function(){var Q;this.inherited(arguments);this.licensesAPI=new E.default;this.licensesTabLinkId="".concat(this.id,"_license-tab-link");this._forceErrorToast=!0;this.isPortal=this.portal.isPortal;this.isDeveloperAccount=y.default.isDeveloperSubscription(null===(Q=this.portal.subscriptionInfo)||void 0===Q?void 0:Q.type,this.isPortal);H.default.requireAuthentication();!K.default.restrictOrganizationPageToAdmin||K.default.userRole&&K.default.userRole.isAdmin()||
(window.location.href="error.html?c\x3dAccessDeniedResource");this._hideErrors=!0;this.userRole=this.portalUser.userRole;Q="enabled"===this.portal.creditAssignments||"validated"===this.portal.creditAssignments;var T=this.userRole.canUpdateUsers()&&this.userRole.canManageCredits();this.shouldShowCredits=K.default.creditBudgetingEnabled&&T&&Q;this.canShowLicenses=this.portalUser.canManageLicenses;this.own(a.default.subscribe("organization/edit-properties",this.refreshPortal.bind(this)),a.default.subscribe("organization/edit-save",
this.refreshPortal.bind(this)))};ta.prototype.startup=function(){var Q=this;this.inherited(arguments);this.checkForPopulatedPortal().then(function(T){T&&location.reload();Q.showWelcome();Q.portal.isPortal&&Q.portalUser.userRole.isAdmin()?Q.performPortalPostUpgradeCheck().then(function(O){O||Q.checkIfExceeded()},function(){Q.checkIfExceeded()}):Q.checkIfExceeded();Q.renderPage().then(function(){Q.emit("ready");A.default.createElement("arcgis-onboarding-whats-new",{user:Q.portalUser,portal:Q.portal,
helpBase:Q.portal.helpBase,helpMap:Q.portal.helpMap.m})},function(O){Q._showError(O);Q.emit("error",O)})})};ta.prototype.destroy=function(){this._destroyTab();[document.querySelector("#fix-single-use-subscription-dlg"),document.querySelector("#switch-home-page-extend-overlay"),document.querySelector("#switch-home-page-feedback-overlay"),document.querySelector("#upgrade-home-page-overlay")].forEach(function(Q){Q&&A.default.removeComponent(Q,document.body)});this.inherited(arguments)};ta.prototype.updatePortal=
function(Q){var T=this;return H.default.request({url:"".concat(this.portal.portalUrl,"portals/self/update"),content:Q},{usePost:!0}).then(function(){Q.rotatorPanels&&(Q.rotatorPanels=JSON.parse(Q.rotatorPanels));T.refreshPortal(Q)})};ta.prototype.openMobileMemberPanel=function(Q){var T=Q.item,O=Q.evt;Q=Q.portal;O&&O.preventDefault();T&&(O=document.createElement("div"),document.body.appendChild(O),(new R.default({member:T,portal:Q,page:this},O)).open())};ta.prototype.renderPage=function(){var Q=this,
T=n.default.splitHashParts((0,b.default)()),O=G.default.getUserRole(this.portalUser),Z=O.canViewUsers()&&O.canViewOrgGroups()&&O.canViewOrgItems();this.portal.thumbnailUrl=this.portal.thumbnail&&this.portal.thumbnailUrl||"./images/group-no-image.png";var na=O.isAdmin()||O.canViewOrgUsers()&&(O.canManageCollaborations()||O.canManageCredits()||O.canManageRoles()||O.canManageSecurity()||O.canManageServers()||O.canManageUtilityServices()||O.canManageWebsite()||O.canManageMarketplace()||O.canManageWebhooks()),
ia=this.i18n.itemProperties,X=ia.settings,ha=this.i18n.myOrganization,V=ha.licensesCard.tabTitle,ea=ha.statusTab.statusTitle;T={active:(null===T||void 0===T?void 0:T[0])||this.hashParts[0]||la.Overview,titleText:this.portal.name,links:[{id:la.Overview,label:ia.overview,logClick:!0},{id:la.Members,label:ha.membersLabel,show:O.canViewOrgUsers(),logClick:!0},{id:la.Licenses,label:V,show:O.canManageLicenses(),logClick:!0},{id:la.Status,label:ea,show:Z&&480<=window.innerWidth,logClick:!0},{id:la.Settings,
label:X,show:na,logClick:!0}],edit:this.getSubNavEditOptions(),telemetry:this.telemetry};this.tabs=new w.default(T);this.domNode.appendChild(this.tabs.domNode);this._loader=d.default.place(h.default.substitute(m.default,{i18n:this.i18n}),this.domNode);this._content=d.default.create("main",{class:"hide tab-content",id:"tabcontent","aria-live":"polite",role:"main"},this.domNode);this.set("pageTitle",this.portal.name);this.setBodyCssClasses(this.portal);return this.updateTab().then(function(){Q.hideLoader();
a.default.publish("page/show");Q.addEventListeners()})};ta.prototype.goToCollaborations=function(){var Q=this;this.updateTab("settings",{tab:"collaborations"}).then(function(){Q.hideLoader();location.hash="settings";a.default.publish("tabs/enable")})};ta.prototype.goToEmailVerification=function(){var Q=this;this.updateTab("settings",{tab:"security",scrollTo:"email-verification"}).then(function(){Q.hideLoader();location.hash="settings";a.default.publish("tabs/enable")})};ta.prototype.goToMapSettings=
function(){var Q=this;this.updateTab("settings",{tab:"map"}).then(function(){Q.hideLoader();location.hash="settings";a.default.publish("tabs/enable")})};ta.prototype.goToSecuritySettings=function(){var Q=this;this.updateTab("settings",{tab:"security",scrollTo:"https"}).then(function(){Q.hideLoader();location.hash="settings";a.default.publish("tabs/enable")})};ta.prototype.goToMemberDefaults=function(){var Q=this;this.updateTab("settings",{tab:"newMemberDefaults"}).then(function(){Q.hideLoader();location.hash=
"settings";a.default.publish("tabs/enable")})};ta.prototype.goToEnterpriseLogins=function(){var Q=this;this.updateTab("settings",{tab:"security",scrollTo:"enterprise-logins"}).then(function(){Q.hideLoader();location.hash="settings";a.default.publish("tabs/enable")})};ta.prototype.goToAdminContacts=function(){var Q=this;this.updateTab("settings",{tab:"general",scrollTo:"admin-contacts"}).then(function(){Q.hideLoader();location.hash="settings";a.default.publish("tabs/enable")})};ta.prototype.openTellUsWhyDialog=
function(){var Q=document.createElement("div");Q.id="switch-home-page-feedback-overlay";document.body.appendChild(Q);(0,ca.render)((0,ca.h)(ja.default,{feedbackUrl:this.homePageFeedbackUrl,strings:g.default.homePageTab.switchFeedback,onClose:function(){(0,ca.render)(null,Q);document.body.removeChild(Q)}}),Q)};ta.prototype.openRequestExtensionDialog=function(Q){var T=document.createElement("div");T.id="switch-home-page-extend-overlay";document.body.appendChild(T);(0,ca.render)((0,ca.h)(Y.default,{portal:this.portal,
telemetry:this.telemetry,strings:g.default.homePageTab.extendSwitch,onClose:function(){(0,ca.render)(null,T);document.body.removeChild(T);null===Q||void 0===Q?void 0:Q.focus()}}),T)};ta.prototype.goToHomePageEditor=function(){var Q=this,T="#"===window.location.hash.charAt(0)?window.location.hash.substring(1):window.location.hash;this.updateTab("settings",{tab:"homePage",scrollTo:"config-homepage"}).then(function(){Q.hideLoader();location.hash="settings";a.default.publish("tabs/enable");setTimeout(function(){a.default.publish("home-page-editor/launch")},
"settings"!==T?1E3:0)})};ta.prototype.renderRecycleOnboard=function(Q){var T=this,O=document.querySelector("#".concat("recycle-onboard-modal"));O||(O=document.createElement("div"),O.id="recycle-onboard-modal",document.body.appendChild(O));(0,ca.render)((0,ca.h)(da.default,{open:Q,portal:this.portal,onClose:function(){T.renderRecycleOnboard(!1)},onRecycleEnabledChange:function(Z){T.portal.recycleBinEnabled=Z}}),O)};ta.prototype.addEventListeners=function(){var Q=this;window.addEventListener("popstate",
function(){var T="#"===window.location.hash.charAt(0)?window.location.hash.substring(1):window.location.hash;a.default.publish("tabs/disable");n.default.clearAllQueryParams();Q.updateTab(T).then(function(){Q.hideLoader();a.default.publish("tabs/enable")})});this.own(a.default.subscribe("/dojo/hashchange",function(T){if((0,t.default)("ie")||(0,t.default)("trident")||(0,t.default)("edge"))a.default.publish("tabs/disable"),n.default.clearAllQueryParams(),Q.updateTab(T).then(function(){Q.hideLoader();
a.default.publish("tabs/enable")})}),a.default.subscribe("settings/thumbnailChange",this.handleThumbChange.bind(this)),a.default.subscribe("settings/orgNameChange",function(T){Q.portal.name=T;Q.tabs.updateText(T)}),a.default.subscribe("credits-budgeting/enable",this.handleCreditsUpdate.bind(this,!0)),a.default.subscribe("credits-budgeting/disable",this.handleCreditsUpdate.bind(this,!1)),a.default.subscribe("collaborations-settings/open",this.goToCollaborations.bind(this)),a.default.subscribe("security-settings/open",
this.goToSecuritySettings.bind(this)),a.default.subscribe("map-settings/open",this.goToMapSettings.bind(this)),a.default.subscribe("email-verification/open",this.goToEmailVerification.bind(this)),a.default.subscribe("security-member-defaults/open",this.goToMemberDefaults.bind(this)),a.default.subscribe("security-enterprise-logins/open",this.goToEnterpriseLogins.bind(this)),a.default.subscribe("admin-contacts/open",this.goToAdminContacts.bind(this,!0)),a.default.subscribe("home-page-editor/open",this.goToHomePageEditor.bind(this)),
a.default.subscribe("home-page-switch/extend",this.openRequestExtensionDialog.bind(this)),a.default.subscribe("map-viewer-switch/update",this.switchToMapViewer),a.default.subscribe("map-viewer-switch/later",this.switchToMapViewerClassic),this.portal.watch(function(){Q.setBodyCssClasses(Q.portal)}))};ta.prototype.handleThumbChange=function(Q){this.portal.set("thumbnailUrl",Q?this.portal.formatThumbnailUrl(Q):"./images/group-no-image.png")};ta.prototype.handleCreditsUpdate=function(Q){this.shouldShowCredits=
Q&&this.userRole.canUpdateUsers()&&this.userRole.canManageCredits();A.default.addRemoveClass(document.body,"credits-disabled",!this.shouldShowCredits)};ta.prototype.updateTab=function(Q,T){var O=this,Z=new c.default;Q=n.default.splitHashParts(Q);var na=(Q=(null===Q||void 0===Q?void 0:Q[0])||this.hashParts[0]||la.Overview)||this.currentTab;this.hideErrors();this.hidePopups();Q!==la.Members||this.portalUser.userRole.canViewOrgUsers()||(na=la.Overview,(0,b.default)(na,!0));if(na===this.currentTab)return Z.resolve(this.tabDijit),
Z;this._destroyTab().then(function(){O.currentTab=na;O.tabs.hideEditLink();O.domNode.classList.add("view-background");switch(na){case la.Status:var ia=I.default;break;case la.Settings:ia=L.default;break;case la.Members:ia=P.default;break;case la.Licenses:case la.UserTypes:ia=N.default;break;default:ia=M.default,O.tabs.showEditLink()}return O._createTab(ia,T)}).then(function(ia){Z.resolve(ia)});return Z};ta.prototype.hidePopups=function(){(p.default.findWidgets(document.body)||[]).filter(function(Q){return-1<
Q.id.indexOf("arcgisonline_sharing_dijit_ProfilePopup")||-1<Q.id.indexOf("dijit_TooltipDialog")}).forEach(function(Q){return Q.destroy()})};ta.prototype.setBodyCssClasses=function(Q){var T=[this.portalUser?"is-signed-in":"is-signed-out"],O=document.body.className.split(" "),Z=this.portalUser.userRole,na=Z.isAdmin(),ia=Z.canUpdateUsers(),X=Z.canViewUsers()&&Z.canViewOrgGroups()&&Z.canViewOrgItems(),ha=Z.canManageLicenses(),V=Z.canViewUsers()&&Z.canChangeUserRoles()&&Z.canManageLicenses()&&Z.canUpdateUsers(),
ea=Z.canViewOrgUsers(),U=Z.canViewUsers();Z=Z.canInviteUsers();var ka=G.default.canViewLastLogin(this.portalUser),ma=G.default.canSelectMembers(this.portalUser),sa=G.default.shouldShowMFA(this.portal,this.portalUser);T.push(Q.id?"":"is-public-user");T.push(ia?"can-update":"is-viewer");T.push(na?"is-admin":"non-admin");T.push(X?"can-view-org-status":"");T.push(ea?"can-view-org-members":"");T.push(ha?"can-manage-licenses":"");T.push(U?"can-view-user-roles":"");T.push(V?"can-manage-user-types":"");T.push(Z?
"can-invite":"");T.push(Q.isPortal?"is-on-premise":"is-not-on-premise");T.push(this.shouldShowCredits?"":"credits-disabled");T.push(ka?"":"lastlogin-disabled");T.push(ma?"":"select-disabled");T.push(sa?"":"mfa-disabled");T.push(na||Z?"":"invite-disabled");T.push(U?"can-view-users":"");T.push(U&&ha?"can-view-user-types":"");T.push(B.default.notebookServerConfigured()?"has-notebookServer-enabled":"");Q=O.filter(function(pa){return 0===pa.indexOf("dj_")});T=f.__spreadArray(f.__spreadArray([],T,!0),Q,
!0);document.body.className=T.join(" ")};ta.prototype.getSubNavEditOptions=function(){if(this.portalUser.isOrgAdmin)return{baseClass:"subnav-edit flex flex-1 flex-align-center break-word",editButtonClasses:"btn-link-white",prop:"name",value:this.portal.name,required:!0,pattern:"[^\x3c\x3e%]+",emptyText:u.default.myOrganization.error.provideName,invalidText:u.default.myOrganization.error.specialCharactersError,maxLength:55,titleClass:"subnav-title margin-right-1"}};ta.prototype.refreshPortal=function(Q){Q=
f.__assign({},Q);delete Q.clearEmptyFields;delete Q.f;delete Q.token;delete Q.created;delete Q.displayRasterAnalyticsMessage;this.portal.set(Q)};ta.prototype.checkForPopulatedPortal=function(){var Q=this,T=new c.default,O=this.portalUser.userRole;this.portal.isPortal&&O.isAdmin()?H.default.request({url:"".concat(H.default.getPortalAdminBaseUrl())},{useProxy:K.default.isDebug}).then(function(Z){!Z||Z.code||Z.isLicensePopulated||H.default.isArcGISEnterpriseOnKubernetes()?T.resolve():Q.populateLicense().then(function(na){T.resolve(na)})},
function(Z){T.resolve()}):T.resolve();return T};ta.prototype.populateLicense=function(){var Q=new c.default;H.default.request({url:"".concat(H.default.getPortalAdminBaseUrl(),"/license/populateLicense")},{usePost:!0}).then(function(){Q.resolve(!0)},function(){x.default.showAlert("error",u.default.createInitialAdminAccount.populateLicenseError);Q.resolve(!1)});return Q};ta.prototype.showWelcome=function(){var Q=this,T,O,Z=l.queryToObject(window.location.search.slice(1));!this.isPortal&&((null===(T=
this.portal.portalProperties)||void 0===T?0:T.mustWelcome)||(null===Z||void 0===Z?0:Z.welcome))&&((null===Z||void 0===Z?0:Z.welcome)&&n.default.removeQueryParams(["welcome"]),T=null===(O=this.portal.subscriptionInfo)||void 0===O?void 0:O.type,"Trial"===T||"Trial Press"===T?(0,ca.render)((0,ca.h)(fa.default,{portalUser:this.portalUser,strings:g.default.trialWelcome,onClose:function(){Q.removeMustWelcome()}}),document.body):(O=this.i18n.myOrganization.noData.welcomeTitle,T=this.portalUser.fullName||
F.default.createFullName(this.portalUser),n.default.createConfirmationDialog({strings:{title:h.default.substitute(O,{fullName:T}),description:this.getNoDataMessage()},hideCancel:!0,autoCloseOnOk:!0,renderHtmlDescription:!0,onOk:function(){Q.removeMustWelcome()}})))};ta.prototype.performPortalPostUpgradeCheck=function(){var Q=this,T=new c.default;this.fetchPortalPostUpgradeStatus().then(function(O){if(O){var Z=h.default.substitute(v.default,{upgradeComplete:Q.i18n.myOrganization.upgradeComplete,performPostUpgrade:Q.i18n.myOrganization.performPostUpgrade,
livingAtlasUpgrade:Q.i18n.myOrganization.livingAtlasUpgrade,hostingServerUpgrade:Q.i18n.myOrganization.hostingServerUpgrade,joinStandby:Q.i18n.myOrganization.haJoinStandby,completePostUpgrade:Q.i18n.myOrganization.completePostUpgrade});n.default.createConfirmationDialog({strings:{title:Q.i18n.myOrganization.postUpgradeRequired,description:Z,processing:Q.i18n.myOrganization.runningPostUpgrade},hideCancel:!0,hideClose:!0,renderHtmlDescription:!0,onOk:function(na){Q.executePostUpgradeOperation().then(function(ia){var X;
na();if(null===(X=null===ia||void 0===ia?void 0:ia.messages)||void 0===X?0:X.length){var ha="";ia.messages.forEach(function(V){ha+="\x3cp\x3e".concat(V,"\x3c/p\x3e")});n.default.createConfirmationDialog({strings:{title:Q.i18n.common.notice,description:ha},hideCancel:!0,autoCloseOnOk:!0,renderHtmlDescription:!0})}},function(ia){var X;na();var ha=ia.message||(null===(X=ia.messages)||void 0===X?0:X.length)?ia.messages.shift():Q.i18n.common.errors.genericError.message;n.default.createConfirmationDialog({strings:{title:Q.i18n.myOrganization.postUpgradeFailed,
description:ha},hideCancel:!0,autoCloseOnOk:!0})})}})}T.resolve(O)},function(){T.resolve(!1)});return T};ta.prototype.fetchPortalPostUpgradeStatus=function(){var Q=new c.default,T="".concat(H.default.getPortalAdminBaseUrl(),"/"),O={};K.default.isDebug&&(O.useProxy=!0);H.default.request({url:T},O).then(function(Z){Z?Q.resolve(!!Z.isPostUpgrade):Q.resolve(!1)},function(){Q.resolve(!1)});return Q};ta.prototype.executePostUpgradeOperation=function(){var Q="".concat(H.default.getPortalAdminBaseUrl(),"/postUpgrade");
return H.default.request({url:Q},{usePost:!0,timeout:0})};ta.prototype.checkIfExceeded=function(){var Q=this,T,O=this.hashParts[0]||this.currentTab||la.Overview;(O===la.Overview||O===la.Licenses)&&(null===(T=this.portalUser)||void 0===T?0:T.canManageLicenses)&&(0,e.default)({entitlements:this.licensesAPI.getLicensedEntitlements(),licenseTypes:this.licensesAPI.getLicenseTypes()}).then(function(Z){var na=Z.licenseTypes.userLicenseTypes;Z=Z.entitlements;var ia=na.some(function(V){return 0>V.maxUsers-
V.assigned}),X=Z.some(function(V){return 0>V.remaining}),ha=!Q.portal.isPortal&&D.default.includes(["Personal Use","Student Use"],Q.portal.subscriptionInfo.type)&&1===Q.portal.subscriptionInfo.maxUsers;ia&&X?ha?Q.showFixSingleUserSubscription(na,Z):Q.showLicensesAndUserTypeExceededWarning(O):X?Q.showLicensesExceededWarning(O):ia&&(ha?Q.showFixSingleUserSubscription(na,Z):Q.showUserTypeExceededWarning(O))})};ta.prototype.showFixSingleUserSubscription=function(Q,T){Q=Q.filter(function(ea){return 0===
ea.assigned&&1===ea.maxUsers}).shift();var O=g.default.fixSingleUse,Z=O.title,na=O.learnMore,ia=O.ok,X=O.processing,ha=g.default.common,V=ha.cancel;ha=ha.close;O="".concat(O.description.replace("${subType}","ArcGIS for ".concat(this.portal.subscriptionInfo.type)),'\x3cdiv class\x3d"leader-1"\x3e\x3ca href\x3d"https://links.esri.com/personal-use-updates" target\x3d"_blank"\x3e').concat(na,"\x3c/a\x3e\x3c/div\x3e");this.openFixSingleUserSubscriptionDialog({title:Z,cancel:V,close:ha,description:O,learnMore:na,
ok:ia,processing:X},Q,T)};ta.prototype.openFixSingleUserSubscriptionDialog=function(Q,T,O){var Z=document.querySelector("#fix-single-use-subscription-dlg");Z||(Z=document.createElement("div"),Z.id="fix-single-use-subscription-dlg",document.body.appendChild(Z));T=this.fixSingleUserSubscription.bind(this,T,O);this.openConfirmDialog(Z,Q,T,function(){A.default.removeComponent(Z,document.body)},!1,!0,!0,!0)};ta.prototype.closeFixSingleUserSubscriptionDialog=function(){var Q=document.querySelector("#fix-single-use-subscription-dlg");
A.default.removeComponent(Q,document.body)};ta.prototype.openConfirmDialog=function(Q,T,O,Z,na,ia,X,ha){void 0===na&&(na=!1);void 0===ia&&(ia=!1);void 0===X&&(X=!1);void 0===ha&&(ha=!1);(0,ca.render)((0,ca.h)(r.default,{strings:T,onOk:O,onCancel:Z,autoCloseOnOk:na,hideCancel:ia,renderHtmlDescription:X,hideClose:ha}),Q)};ta.prototype.fixSingleUserSubscription=function(Q,T,O){var Z=this,na,ia,X=g.default.fixSingleUse,ha=X.success,V=X.failure,ea=null===(ia=null===(na=this.licensesAPI.getProListing())||
void 0===na?void 0:na.listing)||void 0===ia?void 0:ia.itemId,U=[this.portalUser.username],ka=T.filter(function(ma){return G.default.isProExtension(ma.key)}).map(function(ma){return ma.key});this.licensesAPI.provisionUserEntitlements(ea,{users:U,entitlements:[]}).then(function(){Z.licensesAPI.updateUserLicenseType(U,Q.id).then(function(){Z.licensesAPI.provisionUserEntitlements(ea,{users:U,entitlements:ka}).then(function(){null===O||void 0===O?void 0:O();Z.closeFixSingleUserSubscriptionDialog();x.default.showAlert("success",
ha);setTimeout(function(){window.location.reload()},4E3)},function(){x.default.showAlert("error",V)})},function(){x.default.showAlert("error",V)})},function(){x.default.showAlert("error",V)})};ta.prototype.showWarning=function(Q,T){var O=document.body.querySelector("#".concat("org-license-warning"));O||(O=document.createElement("div"),O.id="org-license-warning",document.body.appendChild(O));var Z=function(){(0,ca.render)(null,O)};G.default.isMobile()?x.default.showAlert("warning",Q):(0,ca.render)((0,ca.h)(r.default,
{strings:{title:this.i18n.common.notice,description:Q,ok:this.i18n.common.ok,close:this.i18n.common.close},hideCancel:!0,autoCloseOnOk:!0,renderHtmlDescription:!0,onOk:Z,onCancel:Z}),O);if(T===la.Overview&&(Q=document.querySelector("#".concat(this.licensesTabLinkId))))q.default.once(Q,"click",function(){G.default.isMobile()?x.default.clearAlerts():(0,ca.render)(null,O)})};ta.prototype.showLicensesAndUserTypeExceededWarning=function(Q){var T=this.i18n.myOrganization,O=T.licensesAndUserTypesExceeded;
T=T.licensesAndUserTypesExceededLicensesTab;O=Q===la.Licenses?T:h.default.substitute(O,this.getLicensesLinkParams());this.showWarning(O,Q)};ta.prototype.showUserTypeExceededWarning=function(Q){var T=this.i18n.myOrganization,O=T.userTypesExceededWarning;T=T.userTypesExceededWarningLicensesTab;O=Q===la.Licenses?T:h.default.substitute(O,this.getLicensesLinkParams());this.showWarning(O,Q)};ta.prototype.showLicensesExceededWarning=function(Q){var T=this.i18n.myOrganization,O=T.provisionsExceededWarningPortal,
Z=T.provisionsExceededWarning,na=T.provisionsExceededLicensesTabPortal;T=T.provisionsExceededLicensesTab;O=Q===la.Licenses?this.isPortal?na:T:h.default.substitute(this.isPortal?O:Z,this.getLicensesLinkParams());this.showWarning(O,Q)};ta.prototype.getLicensesLinkParams=function(){return{startLink:'\x3ca id\x3d"'.concat(this.licensesTabLinkId,'" href\x3d"#licenses"\x3e'),endLink:"\x3c/a\x3e"}};ta.prototype.getNoDataMessage=function(){var Q,T=this.i18n.myOrganization.noData,O=T.usersTitlePortal,Z=T.usersTitle,
na=T.usersMessagePortal,ia=T.membersMessage,X=T.usersSetupTitlePortal,ha=T.usersSetupTitle,V=T.usersSetupMessagePortal,ea=T.membersSetupMessage,U=T.usersAddUsers,ka=T.usersAbilities_1,ma=T.usersAbilities_2,sa=T.usersAbilities_3,pa=T.usersAbilities_4,Aa=T.usersAbilities_5;T=T.usersAbilities_6;na=this.isPortal?na:ia;X=this.isPortal?X:ha;V=this.isPortal?V:ea;O=h.default.substitute(this.isPortal?O:Z,{fullName:this.portal.user.fullName});return 1===(null===(Q=this.portal.subscriptionInfo)||void 0===Q?
void 0:Q.maxUsers)?'\x3cdiv class\x3d"org-welcome"\x3e\n          \x3cspan class\x3d"avenir-bold org-welcome__section-title"\x3e'.concat(X,'\x3c/span\x3e\x3cbr\x3e\n          \x3cp class\x3d"font-size--2 trailer-0"\x3e').concat(V,"\x3c/p\x3e\n        \x3c/div\x3e"):'\x3cdiv class\x3d"org-welcome\x3e\n      \x3cspan class\x3d"avenir-bold org-welcome__section-title"\x3e\n        '.concat(O,'\n      \x3c/span\x3e\x3cbr\x3e\n      \x3cp class\x3d"font-size--2 trailer-half"\x3e\n        ').concat(na,"\x3cbr\x3e\n        ").concat(U,
'\x3cbr\x3e\n        \x3cul class\x3d"font-size--2"\x3e\n          \x3cli\x3e').concat(ka,"\x3c/li\x3e\n          \x3cli\x3e").concat(ma,"\x3c/li\x3e\n          \x3cli\x3e").concat(sa,"\x3c/li\x3e\n          \x3cli\x3e").concat(pa,"\x3c/li\x3e\n          \x3cli\x3e").concat(Aa,"\x3c/li\x3e\n          \x3cli\x3e").concat(T,'\x3c/li\x3e\n        \x3c/ul\x3e\n      \x3c/p\x3e\n      \x3cspan class\x3d"avenir-bold org-welcome__section-title"\x3e\n        ').concat(X,'\n      \x3c/span\x3e\x3cbr\x3e\n      \x3cp class\x3d"font-size--2 trailer-0"\x3e\n        ').concat(V,
"\n      \x3c/p\x3e\n    \x3c/div\x3e")};ta.prototype.removeMustWelcome=function(){var Q;if(null===(Q=this.portal.portalProperties)||void 0===Q?0:Q.mustWelcome)return delete this.portal.portalProperties.mustWelcome,H.default.request({url:"".concat(K.default.restBaseUrl,"portals/self/update"),content:{access:this.portal.access,portalProperties:JSON.stringify(this.portal.portalProperties)}},{usePost:!0})};return ta=f.__decorate([(0,ra.default)(k.default)],ta)}()});